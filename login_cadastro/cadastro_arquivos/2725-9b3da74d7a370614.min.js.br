"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="976331a1-85b8-5bb4-84df-32a753cc116c")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[2725],{10199:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.AutoLayout=r.styleForAutoLayout=void 0;let i=n(165959),a=n(411855),o=n(545977),s=n(229009),l=n(539321),c=n(450311),d=n(478469);function u(e,r,n){let{style:i,overlayStyle:a,wrapperStyle:o}=(0,s.styleForFrame)(e,r,n);return{style:Object.assign(Object.assign(Object.assign({},i),(0,l.getParentLayout)(e)),(0,l.getVisibility)(e)),overlayStyle:a,wrapperStyle:o}}r.styleForAutoLayout=u,r.AutoLayout=a.forwardRef(function(e,r){let{attributes:n,children:l}=e,m=(0,i.__rest)(e,["attributes","children"]),p=a.useContext(o.ParentContext);(0,o.warnInvalidConstraints)(Object.assign(Object.assign({},m),{parent:p}));let h=(0,d.normalizeProps)(Object.assign(Object.assign({},(0,c.getDefaultAutoLayoutProps)()),m)),_=(0,o.getInvalidFillParentCheckerRef)(Object.assign(Object.assign({},h),{parent:p})),g=u(h,p,a.Children.count(l)>0);return a.createElement(o.ParentContext.Provider,{value:{type:"autolayout",props:h}},(0,s.domNodeFromFrame)({figmaLayerName:h.name,styles:g,attributes:n,children:l,ref:(0,o.mergeRefs)([_,r])}))})},778883:(e,r,n)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.applyMatrixToPoint=r.roundBoundingBox=r.roundTransform=r.isRotated=r.getRelativeBoundsAndRotation=r.skipPosition=r.rotatePoint=r.multiply=r.getCenteredRotation=r.flipVertical=r.isFlippedVertical=r.getAngleDeg=r.getAngle=void 0;let i=n(713261);function a(e){let r=e[0][0];return Math.atan2(e[0][1],r)}function o(e,r){let[[n,i,a],[o,s,l]]=e,[[c,d,u],[m,p,h]]=r;return[[n*c+i*m,n*d+i*p,n*u+i*h+a],[o*c+s*m,o*d+s*p,o*u+s*h+l]]}function s(e,r){let[[n,i,a],[o,s,l]]=e,[c,d]=r;return[n*c+i*d+a,o*c+s*d+l]}function l(e){let[[r,n],[i,a]]=e;return[[r,n,0],[i,a,0]]}r.getAngle=a,r.getAngleDeg=function(e){return a(e)*(180/Math.PI)},r.isFlippedVertical=function(e){let[[r,n],[i,a]]=e;return r*a-n*i<0},r.flipVertical=function(e){return o([[1,0,0],[0,-1,0]],e)},r.getCenteredRotation=function(e,r,n){let i=e*Math.PI/180;return o([[1,0,r/2],[0,1,n/2]],o([[Math.cos(i),Math.sin(i),0],[-Math.sin(i),Math.cos(i),0]],[[1,0,-r/2],[0,1,-n/2]]))},r.multiply=o,r.rotatePoint=s,r.skipPosition=l,r.getRelativeBoundsAndRotation=function(e){let{width:r,height:n}=e,i=o([[1,0,r/2],[0,1,n/2]],o(l(e.relativeTransform),[[1,0,-r/2],[0,1,-n/2]])),[a,c]=s(i,[0,0]),[d,u]=s(i,[0,n]),[m,p]=s(i,[r,0]),[h,_]=s(i,[r,n]),g=Math.min(a,d,m,h),f=Math.min(c,u,p,_),E=Math.max(a,d,m,h)-g,y=Math.max(c,u,p,_)-f,b=o([[1,0,(E-r)/2],[0,1,(y-n)/2]],i),[[,,v],[,,I]]=b;return{relativeBoundingBox:{x:e.relativeTransform[0][2]-v,y:e.relativeTransform[1][2]-I,width:E,height:y},rotationOnlyTransform:b,relativeTransform:e.relativeTransform}},r.isRotated=function(e){if(!e.relativeTransform)return!1;let r=e.relativeTransform[0][0],n=e.relativeTransform[0][1],i=e.relativeTransform[1][0],a=e.relativeTransform[1][1];return!(r-1<1e-5&&n-0<1e-5&&i-0<1e-5&&a-1<1e-5)},r.roundTransform=function(e){return[[(0,i.round)(e[0][0],5),(0,i.round)(e[0][1],5),(0,i.round)(e[0][2],5)],[(0,i.round)(e[1][0],5),(0,i.round)(e[1][1],5),(0,i.round)(e[1][2],5)]]},r.roundBoundingBox=function(e){return{x:(0,i.round)(e.x),y:(0,i.round)(e.y),width:(0,i.round)(e.width),height:(0,i.round)(e.height)}},r.applyMatrixToPoint=function(e,r){return[r[0]*e[0][0]+r[1]*e[0][1]+e[0][2],r[0]*e[1][0]+r[1]*e[1][1]+e[1][2]]}},986116:(e,r,n)=>{n(306811),n(320468),n(955056),n(776758),n(605758),n(374894),n(62928),n(938011)},516319:(e,r,n)=>{n.d(r,{$y:()=>m,Bb:()=>w,ER:()=>N,Ed:()=>E,Et:()=>a,I1:()=>f,Jo:()=>h,K6:()=>C,M7:()=>i,N5:()=>_,Nd:()=>s,O2:()=>T,Qv:()=>g,Uu:()=>d,W:()=>l,Xq:()=>y,aK:()=>c,cc:()=>v,i9:()=>u,iv:()=>b,jg:()=>S,kH:()=>A,li:()=>o,nm:()=>I,uD:()=>p});let i="org_self_serve_figjam--stepContent--sL7gc",a="org_self_serve_figjam--stepContentTeamCreation--aaY9V",o="org_self_serve_figjam--menuContainer--hPrPq",s="org_self_serve_figjam--cancelMenuItem--ZABKH",l="org_self_serve_figjam--pageTitle--Y69Xv",c="org_self_serve_figjam--summaryDivider--Ijd9-",d="org_self_serve_figjam--flex--0m89h",u="org_self_serve_figjam--svgText--d7FBP org_self_serve_figjam--flex--0m89h",m="org_self_serve_figjam--helpIcon--VL26R",p="org_self_serve_figjam--textLink--eCcAk org_self_serve_figjam--billingSubText--tlSbP",h="org_self_serve_figjam--confirmationBox--Z-OCC org_self_serve_figjam--stepRect--bhosM org_self_serve_figjam--boxBorder--IYrfM",_="org_self_serve_figjam--flexBox--3nRDc",g="org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",f="org_self_serve_figjam--confirmationCharge--6L8US org_self_serve_figjam--confirmationPageText--WnNVw text--fontPos13--xW8hS text--_fontBase--QdLsd",E="org_self_serve_figjam--confirmationRow--qQLOY",y="org_self_serve_figjam--confirmationHomeButton--NMBxx text--fontNeg13--7Ebf5 text--_fontBase--QdLsd text--_negText--j9g-L",b="org_self_serve_figjam--confirmationAmountDue--p0xPk",v="org_self_serve_figjam--confirmationHeading--SQiqP",I="org_self_serve_figjam--confirmationLoadingText--CTID2 org_self_serve_figjam--msaLabelText--r7LKd",T="org_self_serve_figjam--greenCheck--NXjmx",S="org_self_serve_figjam--confirmationPage--KGVNA",w="org_self_serve_figjam--createTeamContainer--D3kS-",A="org_self_serve_figjam--teamsContainer---d-jS",C="org_self_serve_figjam--teamCheckboxContainer--nXQyM",N="org_self_serve_figjam--selectTeamsIcon--W96qS"},486184:(e,r,n)=>{n.d(r,{F0:()=>c,Fb:()=>o,N6:()=>i,Nd:()=>a,Pr:()=>d,Zy:()=>u,b0:()=>s,eA:()=>l,x:()=>m});let i="team_upgrade_v2--breadCrumbsMenuContainer--dvekb",a="team_upgrade_v2--cancelMenuItem--2RsWk",o="team_upgrade_v2--stepTitle--4NAuW",s="team_upgrade_v2--stepSubtitle--YyFvT",l="team_upgrade_v2--createTeamButton--F2nsr",c="team_upgrade_v2--createTeamNameInput--BvH1V",d="team_upgrade_v2--createTeamIcon--27Mtz",u="team_upgrade_v2--createTeamTextInput--qXTZr",m="team_upgrade_v2--createTeamUpgradeExisting--Vjzv8"},750933:(e,r,n)=>{n.d(r,{cG:()=>i,hz:()=>a});let i="members_table--lockedAccountType--nlQJ4 members_table--columnMargin--tcfqd",a="members_table--lockIcon--OxTzh"},662673:(e,r,n)=>{},516724:(e,r,n)=>{n.d(r,{RS:()=>s,Ys:()=>l,_U:()=>a,is:()=>c,p$:()=>i,s8:()=>d,yd:()=>o});let i="team_tile--emptyState--V-Q4V tiles_view--emptyState--jfzsE text--fontPos11--2LvXf text--_fontBase--QdLsd",a="team_tile--emptyTitle--eXex6 tiles_view--emptyTitle--3Vwmu",o="team_tile--emptyButton--gQB5Q tiles_view--emptyButton--oAaGe",s="team_tile--newTeamIcon--7eANI tiles_view--newFileIcon--LR1sm",l="team_tile--joinSpinner--w04qe",c="team_tile--favoriteStarContainer--PBn-d button_styles--button--vl9vc",d="team_tile--showBlueBorder--E6TFe"},13326:(e,r,n)=>{n.d(r,{CZ:()=>c,Qp:()=>l,RF:()=>a,RL:()=>p,hv:()=>i,kz:()=>h,nv:()=>m,qE:()=>d,qS:()=>u,uj:()=>o,yu:()=>s});let i="base_badge--backgroundLight--agxeS",a="base_badge--backgroundWarning--i7d2I",o="base_badge--backgroundWhite--ZqZgN",s="base_badge--borderStrong--makDy",l="base_badge--height24--PMSUp text--fontPos11--2LvXf text--_fontBase--QdLsd",c="base_badge--heightSixteen--BEJT8 text--fontPos9--naThA text--_fontBase--QdLsd",d="base_badge--badgeIconContainer--Gu5zx",u="base_badge--badge--cbfYy base_badge--backgroundLight--agxeS",m="base_badge--badgeContentContainerWithIcon--ECslI",p="base_badge--badgeTooltip--Qz3RM",h="base_badge--tooltipLink--KpcPS"},313507:(e,r,n)=>{n.d(r,{$c:()=>p,BN:()=>l,BQ:()=>o,JM:()=>s,Sl:()=>i,XO:()=>d,ZW:()=>u,nJ:()=>c,u1:()=>h,wr:()=>a,zA:()=>m});let i="feed_page--hubFile--uHbnb feed_page--resourceLinkTag--5KQz7",a="feed_page--prototypeIcon--JlZyq",o="feed_page--tileUpperLeftWrapper--mwqC-",s="feed_page--tileEditorIcon--ymAxC",l="feed_page--resourcePreview--IePch",c="feed_page--redesignedResourcePreview--MjW2w",d="feed_page--resourcePreviewContentWrapper--H1eHK",u="feed_page--resourcePreviewContentWrapperFigJamDots---54d- feed_page--resourcePreviewContentWrapper--H1eHK",m="feed_page--resourcePreviewContentWrapperThumbnailSet--QlsAU feed_page--resourcePreviewContentWrapper--H1eHK",p="feed_page--resourcePreviewContentWrapperRadiusCursorOverride--kfxmj",h="feed_page--spinner--Z0jz3"},879319:(e,r,n)=>{n.d(r,{avatar:()=>u,genericSelectorExternalTeamsIcon:()=>c,genericSelectorInner:()=>s,genericSelectorModal:()=>o,genericSelectorModalCancel:()=>l,modal:()=>i,modalBackdrop:()=>a,workspaceSelectorModal:()=>m,workspaceSelectorModalInner:()=>p,workspaceTitleWrapper:()=>d});let i="index--modal--vmXNN",a="index--modalBackdrop--VqLCO",o="index--genericSelectorModal--3aSLC index--modalBackdrop--VqLCO text--fontPos13--xW8hS text--_fontBase--QdLsd",s="index--genericSelectorInner--HBJH2",l="index--genericSelectorModalCancel--WOjxG",c="index--genericSelectorExternalTeamsIcon--KL8jt",d="index--workspaceTitleWrapper--e9YT2",u="index--avatar--nIkKj",m="index--workspaceSelectorModal--KqRLO index--modalBackdrop--VqLCO",p="index--workspaceSelectorModalInner--6wXm6 index--genericSelectorInner--HBJH2"},724819:(e,r,n)=>{n.d(r,{mh:()=>i});let i="tags_container--tagsPublishModalBanner--nSLkS"},618247:(e,r,n)=>{n.d(r,{Jm:()=>o,UD:()=>i,zr:()=>a});let i="blocking_modal--buttonContainer--HB2rf",a="blocking_modal--secondaryButton--cteqp",o="blocking_modal--buttonLabel--92cjn"},28752:(e,r,n)=>{n.d(r,{$J:()=>p,Az:()=>d,Hx:()=>a,Pl:()=>f,Wy:()=>i,Yg:()=>s,_D:()=>h,au:()=>_,bO:()=>g,ce:()=>l,fe:()=>m,ik:()=>o,oK:()=>c,y3:()=>u});let i="dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",a="dragging_resource--resizingDraggingLibraryItem--h5-J0 dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",o="dragging_resource--draggingFragment--ckSxw dragging_resource--_draggingResource--RyWym",s="dragging_resource--isDraggingOverCanvas--PgYby",l="dragging_resource--isDraggingLibraryItemOverCanvas---q3C7 dragging_resource--isDraggingOverCanvas--PgYby",c="dragging_resource--isDraggingFragmentOverCanvas--JzTDI dragging_resource--isDraggingOverCanvas--PgYby",d="dragging_resource--draggingWidget--t0JuE dragging_resource--_draggingResource--RyWym",u="dragging_resource--draggingTemplate--q-s5W dragging_resource--_draggingResource--RyWym",m="dragging_resource--draggingPlugin--krda0 dragging_resource--_draggingResource--RyWym",p="dragging_resource--draggingFace--3qq2- dragging_resource--_draggingResource--RyWym",h="dragging_resource--draggingTool--zfhjm dragging_resource--_draggingResource--RyWym",_="dragging_resource--draggingLibraryItemList--Cuvnd dragging_resource--draggingLibraryItem--ecbrh dragging_resource--_draggingLibraryItem--puqkp dragging_resource--_draggingResource--RyWym",g="dragging_resource--draggingLibraryItemListName--kNTa4 ellipsis--ellipsis--Tjyfa",f="dragging_resource--expandAnimation--4FamY"},550894:(e,r,n)=>{n.d(r,{RG:()=>i,bv:()=>s,dO:()=>o,ue:()=>a});let i="multiplayer_onboarding--contentNudge--KflAC",a="multiplayer_onboarding--footerContainerNudge--nBkOA",o="multiplayer_onboarding--footerButtonNudge--4CJm-",s="multiplayer_onboarding--boldText--c42DO"},126760:(e,r,n)=>{n.d(r,{c:()=>i});let i="accessible_area--displayContent--ZXsUq"},896572:(e,r,n)=>{},973094:(e,r,n)=>{n.d(r,{$M:()=>a,Bi:()=>v,Fb:()=>h,Fl:()=>c,J7:()=>S,JQ:()=>P,KR:()=>l,Kb:()=>f,MP:()=>A,Nv:()=>N,Q3:()=>D,RR:()=>m,Sp:()=>C,Tz:()=>u,Vl:()=>s,cO:()=>o,cf:()=>x,cu:()=>g,dL:()=>b,g:()=>O,gW:()=>U,gf:()=>k,h1:()=>V,hI:()=>M,i2:()=>R,ii:()=>i,iz:()=>d,kU:()=>T,o6:()=>y,pB:()=>I,vG:()=>E,wH:()=>B,wp:()=>p,xB:()=>F,xc:()=>_,xm:()=>L,yZ:()=>w});let i="community_cards--cardLayoutContainer--nPcgb",a="community_cards--cardSubtitleRowSizing--9WRul",o="community_cards--cardBottomRowSizing--sT6xQ",s="community_cards--cardImageContainer--8ngfu base_community_cards--base_cardImageContainer--jpAKE base_community_cards--_hasBorder--kFIag",l="community_cards--cardHover_TopLeft--yGcAk",c="community_cards--cardBottomRow_MetadataContainer--QLUfh",d="community_cards--cardBottomRow_Metadata_HoverText--McZzP",u="community_cards--cardBottomRow_Metadata_HoverText_AnimateHeight--4wdBR community_cards--cardBottomRow_Metadata_HoverText--McZzP",m="community_cards--cardBottomRow_Metadata_AuthorName_WithHoverText--GJXdW",p="community_cards--cardBottomRowAvatarDropdown--2uCLR",h="community_cards--cardBottomRow_Metadata_AvatarContainer--6-CIe",_="community_cards--cardBottomRow_Metadata_TextContainer--ewZLG",g="community_cards--cardBottomRow_Metadata_PrimaryText--tktO3 text--fontPos13--xW8hS text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="community_cards--base_cardBottomRow_Metadata_SecondaryText---Tn2M text--fontPos11--2LvXf text--_fontBase--QdLsd",E="community_cards--cardBottomRow_Metadata_AuthorName_WithDropdown--Fk7tl",y="community_cards--cardBottomRow_ResourceActionContainer--hgEhI",b="community_cards--cardBottomRow_ResourceActionButton--v146M",v="community_cards--cardHover_Center--hzP7R community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",I="community_cards--cardHover_Cover--kIVQS community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",T="community_cards--cardHover_BottomLeft--XlAgk community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",S="community_cards--cardHover_BottomRight--5So4- community_cards--_cardHover--BGAKM base_community_cards--base_cardHover--5h7Ip",w="community_cards--publisherDropdown--m7Bx2",A="community_cards--publisherDropdownContent_Row--iIBB3",C="community_cards--publisherDropdownContent_Row_Text--7hDpO text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",N="community_cards--creatorPreviewDummySpace_Name--fb75z",L="community_cards--creatorPreviewDummySpace_Avatar--LLBj8",O="community_cards--figjamTileMeta--Sh90c",R="community_cards--figjamTextMetadataCaret--bqK8s",P="community_cards--figjamMetadataContainer--4kXQt",D="community_cards--defaultCursor--K5TUO",k="community_cards--figjamTextMetadataContainer--LBupv",M="community_cards--figjamTextMetadataContainerFull--VPsvv",F="community_cards--figjamTextMetadataLockIcon--yazii",x="community_cards--figjamTextMetadataErrorContainer--XDHyT",U="community_cards--figjamTextMetadataName--wP7vv text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",B="community_cards--subtextDetails--2-EUq",V="community_cards--subtextPublishers--BR4-w ellipsis--ellipsis--Tjyfa"},109546:(e,r,n)=>{n.d(r,{K8:()=>i});let i="hub_file_viewer--zoomDropdownKeyboardShortcut--uixb-"},805443:(e,r,n)=>{n.d(r,{GC:()=>u,PJ:()=>d,Rt:()=>v,SL:()=>g,Tm:()=>E,Uz:()=>_,Vg:()=>s,Yk:()=>p,ZF:()=>f,aq:()=>l,bx:()=>h,g4:()=>i,g8:()=>a,i3:()=>y,jG:()=>m,qc:()=>b,qr:()=>c,vu:()=>o});let i="universal_posting_modal--loadingContainer--5giX-",a="universal_posting_modal--modalClose--eqgHH",o="universal_posting_modal--playgroundtoolbar--62laP",s="universal_posting_modal--grid--Jdvpe",l="universal_posting_modal--previewModal--XtKWL universal_posting_modal--modalBase--HkH3v",c="universal_posting_modal--footer--A-QeR",d="universal_posting_modal--footerText--Pp0H1 universal_posting_modal--_userSelectNone--dHUZk",u="universal_posting_modal--buttonGroup--C-atN",m="universal_posting_modal--scrollContainer--YtNZ-",p="universal_posting_modal--workspaceBarContainer--VHcn1",h="universal_posting_modal--desktopMessageContainer--QXif3 text--fontPos16--oMC-G text--_fontBase--QdLsd",_="universal_posting_modal--desktopMessageTitle--3XDQ-",g="universal_posting_modal--desktopMessageSubTitle--UGHlr",f="universal_posting_modal--searchQuery--07ulH",E="universal_posting_modal--universalPostingSearchContainer--BFSZI",y="universal_posting_modal--xIcon--9icra",b="universal_posting_modal--searchIcon--r7rXz search--searchIconBrowseIA--WYUGA search--searchIcon--0Agiv",v="universal_posting_modal--searchInput--fTx57 search--communityLandingSearchInput--Mtiu3 search--searchInput__OLD--m2Hef text--fontPos13--xW8hS text--_fontBase--QdLsd text--fontPos14--OL9Hp text--_fontBase--QdLsd"},623721:(e,r,n)=>{n.r(r),n.d(r,{_thumbnailBase:()=>f,buttons:()=>l,contextMenu:()=>I,fieldContainer:()=>o,fieldContainerFaded:()=>s,gridContainer:()=>h,label:()=>i,learnMore:()=>a,listContainer:()=>p,listItemContainer:()=>_,listItemRemoveButton:()=>g,offlineIcon:()=>P,outerContainer:()=>c,outerContainerBorderBottom:()=>d,publishCTA:()=>A,scrollContainer_grid:()=>m,scrollContainer_list:()=>u,skeletonText:()=>R,skeletonThumbnailGrid:()=>O,skeletonThumbnailList:()=>L,thumbnailGrid:()=>y,thumbnailGridBase:()=>E,thumbnailList:()=>v,thumbnailListBase:()=>b,tryAgain:()=>D,trying:()=>k,warning:()=>T,warningIcon:()=>C,warningIconList:()=>N,warningOfflineContainer:()=>S,warningPublish:()=>w});let i="preferred_values_instance_picker--label--to5M3",a="preferred_values_instance_picker--learnMore--zD-c7",o="preferred_values_instance_picker--fieldContainer--JJx3j",s="preferred_values_instance_picker--fieldContainerFaded--Z8-Oj preferred_values_instance_picker--fieldContainer--JJx3j",l="preferred_values_instance_picker--buttons---ohnK",c="preferred_values_instance_picker--outerContainer---jRbV",d="preferred_values_instance_picker--outerContainerBorderBottom--eh6jg preferred_values_instance_picker--outerContainer---jRbV",u="preferred_values_instance_picker--scrollContainer_list--kaH92",m="preferred_values_instance_picker--scrollContainer_grid--8kvKL",p="preferred_values_instance_picker--listContainer--BPie-",h="preferred_values_instance_picker--gridContainer--2LTF6",_="preferred_values_instance_picker--listItemContainer--a4t-g",g="preferred_values_instance_picker--listItemRemoveButton--HO05L",f="preferred_values_instance_picker--_thumbnailBase--eAxDp",E="preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",y="preferred_values_instance_picker--thumbnailGrid--XHfz- preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp drilldown_item--_thumbnailContainer--kDsBt",b="preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",v="preferred_values_instance_picker--thumbnailList--nGJE1 drilldown_item--_thumbnailContainer--kDsBt preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",I="preferred_values_instance_picker--contextMenu--qSN6X",T="preferred_values_instance_picker--warning--bgA-c",S="preferred_values_instance_picker--warningOfflineContainer--9BcdC",w="preferred_values_instance_picker--warningPublish--fB8Mq preferred_values_instance_picker--warning--bgA-c",A="preferred_values_instance_picker--publishCTA--FlNCB",C="preferred_values_instance_picker--warningIcon--2TXXz",N="preferred_values_instance_picker--warningIconList--aDgpb preferred_values_instance_picker--warningIcon--2TXXz",L="preferred_values_instance_picker--skeletonThumbnailList--sAAp7 preferred_values_instance_picker--thumbnailListBase--KpYBM preferred_values_instance_picker--_thumbnailBase--eAxDp",O="preferred_values_instance_picker--skeletonThumbnailGrid--UVfqq preferred_values_instance_picker--thumbnailGridBase--O9Rrc preferred_values_instance_picker--_thumbnailBase--eAxDp",R="preferred_values_instance_picker--skeletonText--YCONM",P="preferred_values_instance_picker--offlineIcon--4JDDc",D="preferred_values_instance_picker--tryAgain--UNg1i",k="preferred_values_instance_picker--trying--HmoFd"},389785:(e,r,n)=>{n.d(r,{Gp:()=>h,NJ:()=>l,QK:()=>u,UV:()=>a,Ww:()=>d,_o:()=>i,dc:()=>p,kL:()=>s,mh:()=>o,r9:()=>m,sC:()=>_,xn:()=>c});let i="scrubbable_control--scrubCursorSvg--pav0z",a="scrubbable_control--containerInLiveScrub--P5bqH",o="scrubbable_control--scrubbingDisabled--TDxTX",s="scrubbable_control--container--Y1X4e",l="scrubbable_control--noScrubCursor--xmhcD",c="scrubbable_control--containerBordered--Pq8Lq raw_components--borderFocusWithin--BaipZ scrubbable_control--container--Y1X4e",d="scrubbable_control--inputNarrow--BHcl-",u="scrubbable_control--inactiveLabel--qI8ZV",m="scrubbable_control--disabled--vp-59",p="scrubbable_control--disableHoverBorder--y5AhV",h="scrubbable_control--variableControl--DqEyP",_="scrubbable_control--scrubbableInput--Sv3BW"},130400:(e,r,n)=>{n.d(r,{P:()=>i});let i="feature_callout--featureCallout---qPZ7"},520614:(e,r,n)=>{n.d(r,{kL:()=>i});let i="footer_banner--container--HxFNE"},120825:(e,r,n)=>{n.d(r,{B8:()=>c,BN:()=>s,Hi:()=>i,_K:()=>a,rH:()=>d,u$:()=>o,uu:()=>l});let i="fullscreen_accessibility_tree--debugModeNode--aGne7",a="fullscreen_accessibility_tree--debugModeNodeTransition--PP1HR",o="fullscreen_accessibility_tree--debugModeNodeRender1--sOwjz fullscreen_accessibility_tree--debugModeNode--aGne7",s="fullscreen_accessibility_tree--debugModeNodeRender2--d5GgH fullscreen_accessibility_tree--debugModeNode--aGne7",l="fullscreen_accessibility_tree--debugModeNodeRender3--ferOf fullscreen_accessibility_tree--debugModeNode--aGne7",c="fullscreen_accessibility_tree--debugModeNodeRender4--fiCWb fullscreen_accessibility_tree--debugModeNode--aGne7",d="fullscreen_accessibility_tree--node--WGNTu"},467492:(e,r,n)=>{n.d(r,{Kt:()=>c,LE:()=>s,NV:()=>l,Qq:()=>d,l8:()=>a,ro:()=>o,zc:()=>i});let i="action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",a="action_option--checkMarkContainer--hq6Bt action_option--iconContainer--LFlTl action_option--_iconContainerBase--FtOiz",o="action_option--rightIconContainer--rTqI4",s="action_option--shortcut--w0R75 action_option--rightIconContainer--rTqI4",l="action_option--optionContainer--ru4UN",c="action_option--optionContainerLimitWidth--aaElZ",d="action_option--text--fSMIm"},456622:(e,r,n)=>{n.d(r,{Kn:()=>l,P3:()=>m,VO:()=>s,Xu:()=>d,hr:()=>c,i3:()=>p,ig:()=>a,kG:()=>u,q_:()=>o,vi:()=>i});let i="attachment--thumbnailButton--CfAkK",a="attachment--selectedThumbnailButton--x2RnD attachment--thumbnailButton--CfAkK",o="attachment--thumbnailImage--Jx4fa",s="attachment--lightOverlay--F8qzZ attachment--overlay--dIw1C",l="attachment--publishedThumbnailContainer--oFj0f",c="attachment--pendingThumbnailContainer--iL-xu",d="attachment--darkOverlay--l3K9x attachment--overlay--dIw1C",u="attachment--composerContainer--mP7Kx",m="attachment--deleteBadge--9aSjm",p="attachment--xIcon--hhlua"},884857:(e,r,n)=>{n.d(r,{$S:()=>c,Du:()=>S,F7:()=>o,GI:()=>b,In:()=>T,KK:()=>L,Lo:()=>_,MJ:()=>g,OM:()=>h,Qq:()=>A,SD:()=>P,UR:()=>s,VM:()=>l,WJ:()=>O,WO:()=>w,YD:()=>C,aW:()=>R,eX:()=>a,ex:()=>N,g2:()=>v,k8:()=>f,lo:()=>E,wC:()=>m,wG:()=>d,wb:()=>u,xH:()=>y,xS:()=>i,xe:()=>p,zl:()=>I});let i="thread_comment--threadHeaderLeft--gppoV thread_comment--_threadHeader--59aR8",a="thread_comment--threadHeaderRight--1gMsu thread_comment--_threadHeader--59aR8",o="thread_comment--threadHeaderContainer--0TaTS",s="thread_comment--threadHeaderButton--psBeY",l="thread_comment--threadHeaderButtonInactive--LhTNi",c="thread_comment--addReactionButton--n1Dj5",d="thread_comment--loader--GUeJt",u="thread_comment--threadContainer--oH8Ia",m="thread_comment--threadContainerCommunityDetailsPage--W6Cmv thread_comment--threadContainer--oH8Ia",p="thread_comment--threadContainerAnimated--OT8HU thread_comment--threadContainer--oH8Ia",h="thread_comment--threadContainerInner--Bzqm7",_="thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",g="thread_comment--threadElementReplyContainer--6vz0m thread_comment--threadElement--4grcZ thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos13--xW8hS text--_fontBase--QdLsd",f="thread_comment--threadSubelementNoMargin--aGW6z",E="thread_comment--indentedQuickReplyThreadSubelement--PR9a5 thread_comment--threadSubelementNoMargin--aGW6z",y="thread_comment--quickReplyThreadSubelementNoMargin--MD3aF thread_comment--threadSubelementNoMargin--aGW6z",b="thread_comment--indentedThreadSubelement--gs1fI thread_comment--threadSubelement--7-le3 thread_comment--threadSubelementNoMargin--aGW6z",v="thread_comment--rightJustified--lK8hG",I="thread_comment--leftJustified--HHuN0",T="thread_comment--quickReplyThreadElement--cZUZj thread_comment--_threadElement--PYPeg text--fontPos11--2LvXf text--_fontBase--QdLsd text--fontPos11--2LvXf text--_fontBase--QdLsd",S="thread_comment--authorAvatar--xOCLt",w="thread_comment--authorHandle--fmYkb thread_comment--headerLabel--Oq7ar",A="thread_comment--text--FHTSU",C="thread_comment--grayLabel--6ZZkD thread_comment--headerLabel--Oq7ar",N="thread_comment--iconButtonSpace--VkGFf",L="thread_comment--attachmentsContainer--lOeTy",O="thread_comment--reactionsContainer--n2YcQ",R="thread_comment--resolvedIcon--YSM3V",P="thread_comment--loadingAvatar--82RED comment_cluster_elements--loadingSpinner--6derj"},573576:(e,r,n)=>{n.d(r,{Gm:()=>f,MP:()=>h,OX:()=>l,Sg:()=>o,U0:()=>a,bQ:()=>g,fP:()=>i,i8:()=>_,iQ:()=>u,mr:()=>s,o1:()=>E,oD:()=>d,q9:()=>p,uX:()=>m,xu:()=>c});let i="thread_comment_composer--inputSectionWrapper--Bxyab",a="thread_comment_composer--newComment--eYLj7",o="thread_comment_composer--composerEmpty--VgMY7",s="thread_comment_composer--highlighted--GPAOe",l="thread_comment_composer--editableTypeahead--9R6Yd text--fontPos13--xW8hS text--_fontBase--QdLsd",c="thread_comment_composer--leftComposerButtonGroup--6jQ3I",d="thread_comment_composer--submitUpArrowIcon--e8uT9",u="thread_comment_composer--submitUpArrowIconDisabled--iPBY3 thread_comment_composer--submitUpArrowIcon--e8uT9",m="thread_comment_composer--textButton--GUo5c",p="thread_comment_composer--editSubmitButtons--GyqGL",h="thread_comment_composer--replyComposerContainer---8DSl",_="thread_comment_composer--replyAuthorElement--qze1r",g="thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab",f="thread_comment_composer--errorFallbackNewComment--xlyNp thread_comment_composer--errorFallback--G5K6y text--fontPos13--xW8hS text--_fontBase--QdLsd thread_comment_composer--inputSectionWrapper--Bxyab thread_comment_composer--newComment--eYLj7",E="thread_comment_composer--actions--7LRnN"},989326:(e,r,n)=>{},109176:(e,r,n)=>{n.d(r,{sx:()=>i});let i="fullscreen_view--fontsIcon--a4W8y"},154500:(e,r,n)=>{n.d(r,{GM:()=>i});let i="keyboard_shortcut_panel--spacerTab--yNO02"},486107:(e,r,n)=>{n.d(r,{QT:()=>i});let i="component_sidebar_asset_tile--focusableElementWrapper---mXHu"},948729:(e,r,n)=>{n.d(r,{FF:()=>h,GR:()=>m,Ib:()=>_,Ms:()=>l,N4:()=>g,NK:()=>f,OD:()=>y,Ol:()=>C,Tq:()=>S,UA:()=>E,Vk:()=>p,Vs:()=>i,XK:()=>O,Yc:()=>I,aC:()=>A,aS:()=>s,bF:()=>w,bo:()=>a,fh:()=>o,hs:()=>L,nl:()=>c,oV:()=>u,v:()=>T,vZ:()=>b,wi:()=>v,xC:()=>N,yg:()=>d});let i="library_item_tile--tile--okxBn",a="library_item_tile--tileFigJam--BkXTr library_item_tile--tile--okxBn",o="library_item_tile--tileGrid--wgcTu library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",s="library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",l="library_item_tile--tileGridCompact--a7lPd library_item_tile--tileGridBase--xcbaX library_item_tile--tile--okxBn library_item_tile--_nameHover--idlJb library_item_tile--_variantHover--xfLPt",c="library_item_tile--tileList--yPfDI library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",d="library_item_tile--tileListLarge--aoNFs library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",u="library_item_tile--tileListLargeNoPadding--QnDtc library_item_tile--tile--okxBn library_item_tile--_variantHover--xfLPt library_item_tile--_tileListBase--jZpFH",m="library_item_tile--thumbAndNameWrapper--FT1HH",p="library_item_tile--thumbAndNameWrapperGrayscale--FGh2L library_item_tile--thumbAndNameWrapper--FT1HH",h="library_item_tile--thumb--MNoWO",_="library_item_tile--thumbWithShadowOnHover--V8LMf library_item_tile--thumb--MNoWO",g="library_item_tile--thumbScaledDown--usdag library_item_tile--thumb--MNoWO",f="library_item_tile--thumbFullPage--ox1s1",E="library_item_tile--nameGrid--rnFsh library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",y="library_item_tile--nameList--ezsvn library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",b="library_item_tile--nameListLarge--5iAF2 library_item_tile--name---mWwN ellipsis--ellipsis--Tjyfa",v="library_item_tile--thumbWrapper--fmgue library_item_tile--thumbWrapperNoBg--dq7A6",I="library_item_tile--thumbWrapperNoBg--dq7A6",T="library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",S="library_item_tile--thumbWrapperListView--zLZLK library_item_tile--thumbWrapperNoBgListView--zVBTw library_item_tile--thumbWrapperNoBg--dq7A6",w="library_item_tile--variableSetThumb--cCo2-",A="library_item_tile--variableTypeIcon--58dL0",C="library_item_tile--thumbContainer--7rKmQ",N="library_item_tile--numVariants--tOsFg library_item_tile--_numVariantsBase--039pu",L="library_item_tile--numVariantsList--aGNbh library_item_tile--_numVariantsBase--039pu",O="library_item_tile--tileBorder--clelb"},243074:(e,r,n)=>{},578482:(e,r,n)=>{n.d(r,{H0:()=>o,Mj:()=>s,g_:()=>a,j3:()=>i});let i="inset 0px 0px 0px 0.5px var(--color-border)",a="5px",o="16px",s="16px"},164655:(e,r,n)=>{},450503:(e,r,n)=>{},170460:(e,r,n)=>{n.d(r,{Bj:()=>g,DE:()=>f,Dy:()=>i,Lo:()=>u,S8:()=>l,VW:()=>s,bu:()=>h,hD:()=>E,iU:()=>d,iY:()=>p,or:()=>a,p:()=>_,u0:()=>o,vD:()=>m,z8:()=>c});let i="multiplayer_cursors--cursor--n8aPY",a="multiplayer_cursors--cursorPointer--ya3cR",o="multiplayer_cursors--cursorImage--hYFE4",s="multiplayer_cursors--nameContainer--O1WsV",l="multiplayer_cursors--nameContainerCloserToCursor--8L8SW",c="multiplayer_cursors--isPointingRight--eOPEm",d="multiplayer_cursors--message--1NMSI multiplayer_cursors--nameContainer--O1WsV",u="multiplayer_cursors--messageText--jI1cQ",m="multiplayer_cursors--topMessageLine--uwXou",p="multiplayer_cursors--cursorName--i776D",h="multiplayer_cursors--cursorNameSmall--Cy-9n",_="multiplayer_cursors--multiplayerHighFiveCenteringContainer--knxoP",g="multiplayer_cursors--multiplayerPointerForHighFive--hpa2g",f="multiplayer_cursors--multiplayerPointerForHighFiveHidden--V-bo-",E="multiplayer_cursors--chatBackground--hGJJf"},921100:(e,r,n)=>{n.d(r,{E7:()=>u,EA:()=>c,EU:()=>d,P0:()=>l,TK:()=>o,V3:()=>i,W5:()=>a,aN:()=>s});let i="object_row--layerIcon--dTOdu",a="object_row--customLayerIcon--SlCXj object_row--layerIcon--dTOdu",o="object_row--customMenuLayerIcon--JK53S object_row--layerIcon--dTOdu",s="object_row--customComponentMenuLayerIcon--SWH-7 object_row--layerIcon--dTOdu",l="object_row--iconWrapper--ivRSW",c="object_row--stickyIconWrapper--UycmN",d="object_row--stickyIconWrapperOutOfView--riwK8",u="object_row--iconOverlay--gPp-S"},163280:(e,r,n)=>{},488819:(e,r,n)=>{n.d(r,{X3:()=>i,f$:()=>a,lo:()=>s,x7:()=>o});let i="chit--chitThumbnail--KxCGp",a="chit--chitAlpha--Mn-aK",o="chit--chit--WdWdx",s="chit--chitBorder--ydYLm"},587997:(e,r,n)=>{n.d(r,{DV:()=>p,Dn:()=>u,FL:()=>E,KQ:()=>_,MC:()=>b,N4:()=>m,Om:()=>f,PD:()=>o,VM:()=>v,Y7:()=>h,cL:()=>d,ed:()=>a,gn:()=>s,lN:()=>g,lS:()=>c,l_:()=>I,lo:()=>l,v9:()=>i,yr:()=>y});let i="collapsible_property_panel--showOnTitleHover--yqPoD",a="collapsible_property_panel--panelTitleRowOuter--i5K0R",o="collapsible_property_panel--emptyPanelTitleRowOuter---pBf9 collapsible_property_panel--panelTitleRowOuter--i5K0R",s="collapsible_property_panel--ui3Row--9nUnV collapsible_property_panel--_hoverTarget--eRHji",l="collapsible_property_panel--ui3RowSelected--FZgmc",c="collapsible_property_panel--ui3RowButtons--xHUX3",d="collapsible_property_panel--styleTitle--a7BMw",u="collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",m="collapsible_property_panel--titleButton--7yILK",p="collapsible_property_panel--fadeOutOnTitleUnhover--15rtL",h="collapsible_property_panel--panelTitleRowInGrid--Kq3wh collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",_="collapsible_property_panel--panelTitleRowInGridWithButton--8yQlq",g="collapsible_property_panel--panelEmptyTitleRowInGrid--TlCXf collapsible_property_panel--panelEmptyTitleRow--vDg0z collapsible_property_panel--panelTitleRow--AV-Sv collapsible_property_panel--_hoverTarget--eRHji",f="collapsible_property_panel--panelStyleTitle--R1Tqo collapsible_property_panel--panelTitle--4vpTS raw_components--panelTitle--VAQQA",E="collapsible_property_panel--panelMixedMessage--UuCKj",y="collapsible_property_panel--panelTitleText--vFGYT",b="collapsible_property_panel--titleButtons--k6Lxk",v="collapsible_property_panel--dropdownOption--cy1JZ",I="collapsible_property_panel--updateIcon--0YXMO"},911216:(e,r,n)=>{n.d(r,{A:()=>i,C_:()=>h,Rb:()=>u,Tu:()=>a,W1:()=>m,gE:()=>s,hg:()=>c,lG:()=>l,p3:()=>d,p5:()=>o,wH:()=>p});let i="style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",a="style_title--readOnly--6RqsN",o="style_title--selectedCollapsedPanelPreviewTitle--x1waj style_title--collapsedPanelPreviewTitle--jpW2- collapsible_property_panel--styleRowTitle--YsCp4",s="style_title--numTextStyleOverrides--VcFQr",l="style_title--narrowCollapsedPanelPreviewTitle---OnQ7",c="style_title--collapsedPanelPreviewIcon--TYMgV",d="style_title--styleTitleName--lJDZI ellipsis--ellipsis--Tjyfa",u="style_title--customTitleName--Y--0d",m="style_title--ui3SelectionStyleItemTitle--bYnM2",p="style_title--selected--9K15m",h="style_title--secondarySelected--gqSFt"},437457:(e,r,n)=>{n.d(r,{Lt:()=>c,Qz:()=>o,Wv:()=>i,be:()=>d,d_:()=>p,f0:()=>m,hF:()=>u,hL:()=>h,in:()=>a,kL:()=>s,t_:()=>l});let i="combo_box--selectInputExpanded--SgrsN select--selectInputExpanded--Lz6m4",a="combo_box--focused--vZXh1 select--selectInputFocused--c-NQ7",o="combo_box--containerDisabled--bNA2c combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t",s="combo_box--container--Vml-n combo_box--_container--uIFGE raw_components--singleRowHeight--dKM4t select--comboBoxShowChevronOnHover--rVuud",l="combo_box--selectDisabled--yJxRy combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",c="combo_box--select--JMl-q select--comboBoxSelect--T-iQ- select--_comboBoxSelect--zpLTH combo_box--_select--T75K- select--comboBoxSelectDisabled--EWdld select--_comboBoxSelect--zpLTH",d="combo_box--selectInput--fikB4 raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",u="combo_box--input--CW6xE raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",m="combo_box--scrubbableControl--t9lCI raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t combo_box--_scrubbableControlBase--jZV-D",p="combo_box--withSvg--BjUJI",h="combo_box--noBorderOnFocus--7Ago-"},179069:(e,r,n)=>{n.d(r,{TQ:()=>i});let i="containing_assets_panel--componentName--Lwkmx"},914683:(e,r,n)=>{n.d(r,{D6:()=>a,kF:()=>i});let i="asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo",a="asset_description_lexical_editor--contentEditableCollapsed--H601A asset_description_lexical_editor--contentEditableReadOnly--BlHWQ asset_description_lexical_editor--contentEditableBase--nTcyo"},501891:(e,r,n)=>{n.d(r,{$C:()=>l,Bt:()=>E,EA:()=>p,I0:()=>d,LO:()=>i,MC:()=>I,N1:()=>f,Qp:()=>o,VM:()=>T,We:()=>c,YF:()=>s,Z0:()=>a,iB:()=>b,l_:()=>S,me:()=>h,qw:()=>g,sK:()=>m,t4:()=>_,u$:()=>v,vF:()=>y,vS:()=>u});let i="instance_panel--panelTitleRow--TN-S6",a="instance_panel--collapsibleTitleRow--YQUPk",o="instance_panel--instanceNameContainer--DjJ1a",s="instance_panel--isInComponentPlayground--jSk5E",l="instance_panel--instanceIcon--9Rb3Q",c="instance_panel--pickerButtonText--37jAr ellipsis--ellipsis--Tjyfa",d="instance_panel--propPillContainer--uUMdd",u="instance_panel--pickerButton--aETR-",m="instance_panel--selectedPickerButton--PqYr4",p="instance_panel--sublayerPanelWithHover--jgbud",h="instance_panel--sublayerPanelMixedState--h9Vb4",_="instance_panel--chevronIcon--0j2aS",g="instance_panel--viewOnlyPickerButton--70Wl5 instance_panel--pickerButton--aETR-",f="instance_panel--selectInstanceIcon--9lKUr",E="instance_panel--ui3InstanceNameContainer--2BVOa instance_panel--instanceNameContainer--DjJ1a",y="instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",b="instance_panel--ui3InstanceNameTitle--RLDS5 ellipsis--ellipsis--Tjyfa",v="instance_panel--instanceNameTitleWide--InQRA instance_panel--instanceNameTitle--khSFz ellipsis--ellipsis--Tjyfa",I="instance_panel--titleButtons--8ha4T",T="instance_panel--dropdownOption--g0g2W",S="instance_panel--updateIcon--4lm0w"},918061:(e,r,n)=>{n.d(r,{UZ:()=>a,ai:()=>i});let i="layer_panel--chevron--UUQ0D",a="layer_panel--variableSetModeInput--SQzwi"},244979:(e,r,n)=>{n.d(r,{$r:()=>D,BT:()=>L,Bx:()=>W,Cv:()=>O,EC:()=>c,EX:()=>o,FV:()=>A,GB:()=>v,GI:()=>s,H:()=>u,IX:()=>f,I_:()=>h,Is:()=>I,Kx:()=>K,L3:()=>P,MX:()=>S,NI:()=>R,O1:()=>T,QK:()=>x,RK:()=>k,TL:()=>m,Tp:()=>U,Xd:()=>y,YJ:()=>_,Z6:()=>w,cD:()=>a,eV:()=>i,hj:()=>$,kA:()=>E,kv:()=>G,mH:()=>H,n1:()=>d,np:()=>N,os:()=>g,p:()=>B,py:()=>p,vc:()=>b,wM:()=>C,wh:()=>l,x7:()=>M,zc:()=>F,zm:()=>V});let i="paint_panels--variableValue--2xpUO ellipsis--ellipsis--Tjyfa",a="paint_panels--typeContainer--e-3I2",o="paint_panels--colorInput--nSz13",s="paint_panels--typeContainerHidden--5zTrp paint_panels--typeContainer--e-3I2",l="paint_panels--colorInputHidden--ZojfD paint_panels--colorInput--nSz13",c="paint_panels--opacityInputHidden--I2GEk",d="paint_panels--opacityInputContainer--oqlsk",u="paint_panels--strokeInput--Zg8DO raw_components--flushLeft--YH-5P",m="paint_panels--strokeWeight---jmn2 raw_components--borderFocusWithin--BaipZ",p="paint_panels--strokeWeightNew--HHR3i raw_components--borderFocusWithin--BaipZ",h="paint_panels--strokeWeightVar--gxKxA",_="paint_panels--strokeWeightVarNew--CkN1w",g="paint_panels--strokeAlign--UKGAx",f="paint_panels--strokeAlignNew--6VVfv",E="paint_panels--strokeAlignInput--P3fhz",y="paint_panels--strokeAlignChevron--9p1Hk",b="paint_panels--leftEndCap--tHF9y",v="paint_panels--swapCap--eAzkX",I="paint_panels--rightEndCap--Oy9SG",T="paint_panels--endPointSvg--E5Qlh",S="paint_panels--endPointSvgShort--YHOkF",w="paint_panels--endPointOption--NrunB",A="paint_panels--advancedStroke--653Nf",C="paint_panels--paintPanelColorValueContainer--squRD paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",N="paint_panels--fitToSizePaintPanelColorValueContainer--XMkEF paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",L="paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",O="paint_panels--fitToSizePaintPanelVariableValueContainer---k9XP paint_panels--paintPanelVariableValueContainer--bxDVz paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t",R="paint_panels--paintPanelValueSelected--QHJsV",P="paint_panels--paintPanelValueSelectedSecondary--6uSZ2",D="paint_panels--paintPanelIconContainer--l4u-f",k="paint_panels--paintPanelRow--NZUf3",M="paint_panels--chit--twQEy",F="paint_panels--iconContainer--1gum-",x="paint_panels--inactiveLabel--gsLwE transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO",U="paint_panels--onDrop--Va3gz",B="paint_panels--paintRowIcons--5b-UG",V="paint_panels--iconVisibleOnHover--1rweo",G="paint_panels--checkbox--1acob",H="paint_panels--checkboxLabel--q0GyI",K="paint_panels--checkboxLabelRow--ZNgFg",W="paint_panels--deletedIcon--nXIQH",$="paint_panels--ui3EndpointFlipped--JAuAi"},320986:(e,r,n)=>{},697945:(e,r,n)=>{n.d(r,{Rh:()=>o,Tw:()=>i,iw:()=>a});let i="prototype_video_playback_panel--videoErrorPanelFooter--cdsDJ",a="prototype_video_playback_panel--ui3VideoErrorText--l6t6c",o="prototype_video_playback_panel--ui3VideoErrorLink--y1RWa"},447141:(e,r,n)=>{n.d(r,{Ah:()=>E,Bg:()=>I,CZ:()=>N,DS:()=>k,Dn:()=>L,EA:()=>d,LE:()=>w,LJ:()=>u,No:()=>f,O1:()=>h,PB:()=>b,PQ:()=>i,Pf:()=>s,Tz:()=>D,U:()=>g,X0:()=>S,Z4:()=>p,Zz:()=>C,_Z:()=>c,a2:()=>v,ai:()=>_,bW:()=>R,ht:()=>A,iY:()=>P,kR:()=>a,l$:()=>T,pc:()=>m,pq:()=>o,sI:()=>O,vR:()=>y,wh:()=>l});let i="raw_components--border--SKh2u",a="raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip",o="raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",s="raw_components--label--4LcC7 raw_components--base--T7G0z",l="raw_components--labelInactive--tm1fU raw_components--label--4LcC7 raw_components--base--T7G0z",c="raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",d="raw_components--textInputSoftDisabled--M5O7I",u="raw_components--noPlaceholderLine--KBoD7",m="raw_components--textAreaInput--mi1Ag raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t",p="raw_components--noLeftBorder--QE-ZB",h="raw_components--squareRightBorder--ktojw",_="raw_components--chevron--nJiSt",g="raw_components--wide--F33jp",f="raw_components--transparentIconButtonEnabled--l2bm3 raw_components--iconButtonEnabled--WmVk5 raw_components--_iconButton---ybo6",E="raw_components--iconButtonDisabled--SoTjK raw_components--_iconButton---ybo6",y="raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6",b="raw_components--outlineButton--FyUoF",v="raw_components--modalPanel--wmDfl",I="raw_components--propertiesPanelErrorBox--N2p6o",T="raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",S="raw_components--row200--Dgjc6 raw_components--row200Height--wotRv raw_components--_row--rHucX",w="raw_components--row150--2Q0-i raw_components--_rowHeight150--ZzVcZ raw_components--_row--rHucX",A="raw_components--row125--J20Ob raw_components--_rowHeight125--G2mEi raw_components--_row--rHucX",C="raw_components--labelRow--wxp77 raw_components--singleRow--W5dYN raw_components--_singleRow--yTGIY raw_components--singleRowHeight--dKM4t raw_components--_row--rHucX raw_components--row--NThzm",N="raw_components--rowSelected--M2Eip",L="raw_components--panelTitle--VAQQA",O="raw_components--panelTitleWithoutChevron--qIjza",R="raw_components--collapsiblePanelTitle--PXa3p",P="raw_components--panelTitleExtended--GoX-m raw_components--panelTitle--VAQQA",D="raw_components--panelTitleFaded--cUUkM raw_components--panelTitle--VAQQA",k="raw_components--panelIconContainer--V9E3Z"},584999:(e,r,n)=>{n.d(r,{AN:()=>g,BB:()=>m,BI:()=>w,CU:()=>L,Df:()=>V,H9:()=>B,HT:()=>E,Hi:()=>l,IK:()=>f,IZ:()=>A,JB:()=>k,O:()=>x,Om:()=>M,P2:()=>y,QF:()=>I,Qc:()=>p,Qw:()=>_,UY:()=>o,Vb:()=>h,Wm:()=>v,ZM:()=>P,ai:()=>u,fE:()=>O,hF:()=>s,hH:()=>a,kL:()=>i,l8:()=>C,nJ:()=>N,pR:()=>c,re:()=>R,sS:()=>F,tN:()=>d,uK:()=>T,w$:()=>U,x1:()=>b,x7:()=>G,yF:()=>S,z6:()=>D});let i="select--container--UJhOt raw_components--singleRowHeight--dKM4t",a="select--hiddenInput--3smCs raw_components--selectHiddenInput--bJ8vl",o="select--safariVoiceover--meUJ0",s="select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",l="select--fauxFocus--D1GLI",c="select--inputDisabled--08EdX select--input--meQUx raw_components--base--T7G0z raw_components--border--SKh2u raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t ellipsis--ellipsis--Tjyfa",d="select--inputTextWrapper--kEwIr",u="select--chevron--KfTY2",m="select--inputWithSvg--t6hLE",p="select--inputAlignRight--5HWz5",h="select--inputSvg--Sqy6u",_="select--backgroundOnHover--5kQnp",g="select--inputText--I3JIv select--inputTextWrapper--kEwIr",f="select--inputTextTruncated--j6p-H ellipsis--ellipsis--Tjyfa",E="select--inputTextFill--H3tO-",y="select--dropdownContainer--0zweb _overlayBase--_overlayBase--Rkj8l",b="select--dropdownScrollClip--5ft6D",v="select--dropdown--8DAM-",I="select--dropdownContentWrapper--yDAla",T="select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",S="select--divider--HfbAX",w="select--optionFocused--8DSsx select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",A="select--optionDisabled--fEanh select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",C="select--optionHeader--34zhZ select--option--8gulr dropdown--_optionBase--z-REc text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",N="select--optionTruncatedText--QqUBO",L="select--optionTextRemoveRightPadding--ULI6k",O="select--optionFullWidth--sW3Zl",R="select--optionText--D3BVM select--optionTruncatedText--QqUBO ellipsis--ellipsis--Tjyfa",P="select--rightLabel--I-ojL",D="select--check--xQ8c3",k="select--rightCheck--UdnTu",M="select--rightCheckText--vWTPu",F="select--topScrollIndicator--nys8N select--scrollIndicator--U0Wy-",x="select--bottomScrollIndicator--C7EE7 select--scrollIndicator--U0Wy-",U="select--scrollIndicatorChevron--9-te-",B="select--optionIcon--yngNx",V="select--iconToReplaceCheck--MMwXJ",G="select--chit--WI9C6"},329652:(e,r,n)=>{n.d(r,{Kk:()=>s,be:()=>i,j1:()=>o,kk:()=>a});let i="stack_panel_v4--selectInput--DdAPZ",a="stack_panel_v4--comboBoxInput--ewblc dimension_input--comboBoxInput--J0jWQ",o="stack_panel_v4--comboBoxPillsContainer--BiDzq dimension_input--comboBoxPillsContainer--Uv3fj",s="stack_panel_v4--icon--PJRhG"},252957:(e,r,n)=>{n.d(r,{QK:()=>a,hF:()=>i});let i="transform_panel--input--nRDX0 raw_components--flushLeft--YH-5P",a="transform_panel--inactiveLabel--fPCxr raw_components--iconInsideBorderFocusWithin--2g7fO"},834447:(e,r,n)=>{n.d(r,{H5:()=>u,Od:()=>c,Pf:()=>l,Pv:()=>s,RF:()=>i,Y7:()=>m,by:()=>h,hF:()=>d,ig:()=>p,kb:()=>a,pG:()=>o});let i="ui3_modal_rows--ui3TwoColumnModalRow--ktXqt ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",a="ui3_modal_rows--left--5-4DR",o="ui3_modal_rows--right--TTLb7",s="ui3_modal_rows--ui3OneColumnModalRow--wLU6K ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",l="ui3_modal_rows--label--vQA2E",c="ui3_modal_rows--ui3LabelOneInputRow--kpsQB ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",d="ui3_modal_rows--input--WH2lM",u="ui3_modal_rows--ui3LabelOneInputDoubleRow--8P9kp ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",m="ui3_modal_rows--ui3LabelTwoInputRow---zU18 ui3_modal_rows--_row--x9xQX ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu",p="ui3_modal_rows--leftInput--pkjk8",h="ui3_modal_rows--rightInput--mOj6z"},261579:(e,r,n)=>{n.d(r,{$6:()=>a,G:()=>c,Z7:()=>l,cF:()=>d,mq:()=>o,nM:()=>s,o3:()=>i});let i="variable_mode_entries--variableSetName--hmoV4",a="variable_mode_entries--ui3VariableSetName--eqW9C variable_mode_entries--variableSetName--hmoV4",o="variable_mode_entries--variableSetModeSelect--P6crF",s="variable_mode_entries--row--8OoWO",l="variable_mode_entries--infoIconContainer--DmUPj",c="variable_mode_entries--infoIcon--JylKl",d="variable_mode_entries--infoOption--fKiWW"},722511:(e,r,n)=>{n.d(r,{nW:()=>i,zF:()=>a});let i="plugin_parameter_entry--pillIcon--y5eMK",a="plugin_parameter_entry--pluginLabelIcon--ct5AV plugin_parameter_entry--pillIcon--y5eMK"},125906:(e,r,n)=>{n.d(r,{Tk:()=>i,ZR:()=>a});let i="quick_actions--noresult--qrETa quick_actions--centerItemsVertically--4COtP",a="quick_actions--pluginIcon--d9b13"},371325:(e,r,n)=>{n.d(r,{kv:()=>a,wn:()=>i});let i="quick_actions--resultDisabled--tjdlc",a="quick_actions--checkbox--jhzha"},42296:(e,r,n)=>{n.d(r,{BK:()=>L,C7:()=>c,EI:()=>l,Ge:()=>_,K$:()=>m,Km:()=>C,MT:()=>x,O5:()=>y,QD:()=>R,Rt:()=>K,VV:()=>s,Vr:()=>N,Vw:()=>V,WY:()=>B,Wh:()=>i,XE:()=>h,_L:()=>d,a1:()=>T,aK:()=>D,ai:()=>k,az:()=>A,cu:()=>P,dn:()=>M,hC:()=>G,hg:()=>w,i3:()=>H,me:()=>v,qN:()=>O,qb:()=>p,qc:()=>U,r9:()=>o,rR:()=>a,ro:()=>W,wH:()=>f,ws:()=>u,yo:()=>E,yx:()=>g,zK:()=>F,zW:()=>I,zb:()=>b,zk:()=>S});let i="multiplayer_view--multiplayerView---Lf04",a="multiplayer_view--onboardingTarget--Ja9Ak",o="multiplayer_view--disabled--K9QcN",s="multiplayer_view--users--DcWtM",l="multiplayer_view--usersContainer--bzaNI",c="multiplayer_view--userIconView--XlLWC",d="multiplayer_view--userIconViewHorizontal--CRVT- multiplayer_view--userIconView--XlLWC",u="multiplayer_view--userIconAvatar--qt4Vz",m="multiplayer_view--userIconAvatarLoading--s5PPI",p="multiplayer_view--normal--xHQOT",h="multiplayer_view--avatarWithCollaborationToolsContainer--7lq5U",_="multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",g="multiplayer_view--fullHeightSidebarAvatarWithToolsOverridesWithOverflow--hExNS multiplayer_view--fullHeightSidebarAvatarWithToolsOverrides--Z5S16",f="multiplayer_view--selected--PrEy3",E="multiplayer_view--hovered--X1V8M",y="multiplayer_view--textAvatarContainer--SwGAW",b="multiplayer_view--overflowTextAvatar--ouAgh multiplayer_view--textAvatar--P-4wz",v="multiplayer_view--separator--d7XC2",I="multiplayer_view--separatorContainer--3NXhc",T="multiplayer_view--overflowDropdown--5PCUX",S="multiplayer_view--multiplayerUserCount--VN79F",w="multiplayer_view--fileSeenStateSubtitle--xTYdr",A="multiplayer_view--avatarWithGroupActions--hdn0o",C="multiplayer_view--avatarWithGroupActionsTightened---blv6",N="multiplayer_view--groupActions--C2jLX",L="multiplayer_view--presenterButtonAction--7CCnt",O="multiplayer_view--pointingDropdown--4CD2d",R="multiplayer_view--pointingDropdownAdditionalPaddingUI2--zc-aF",P="multiplayer_view--listBox--9RJ5F",D="multiplayer_view--listBoxNew--z88cs",k="multiplayer_view--chevron--Vn-C1",M="multiplayer_view--ui3SearchContainer--KQpDt",F="multiplayer_view--ui3SearchContainerNew--brZ7S",x="multiplayer_view--searchContainer--q6zE8",U="multiplayer_view--searchIcon--C9Aoz",B="multiplayer_view--xIconButtonContainerWrapper--wSUus",V="multiplayer_view--xIconButtonContainerNew--3CYqO",G="multiplayer_view--xIconButtonContainer--vYjh1",H="multiplayer_view--xIcon--Oq2hB",K="multiplayer_view--searchInput--f43Gp text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",W="multiplayer_view--withOverflow---4XmW"},289566:(e,r,n)=>{n.d(r,{Dn:()=>b,FE:()=>A,FH:()=>g,Jk:()=>m,LY:()=>y,QO:()=>T,S0:()=>_,Sn:()=>w,WB:()=>f,Xf:()=>a,Y7:()=>d,cm:()=>p,hF:()=>s,i5:()=>h,l4:()=>o,om:()=>c,r2:()=>I,r4:()=>v,sH:()=>i,sy:()=>S,vu:()=>C,wR:()=>l,wg:()=>u,zj:()=>E});let i="zoom_menu--zoomMenuBase--Uy7YH",a="zoom_menu--zoomMenu--3OqMw",o="zoom_menu--fullHeightSidebarZoomMenu--ElxlP",s="zoom_menu--input---hdA- input--darkInput--zfbnG",l="zoom_menu--zoomMenuContainer--DJXOL",c="zoom_menu--zoomMenuContainerActive--E7m0j",d="zoom_menu--fullHeightSidebarZoomMenuContainer--So738",u="zoom_menu--fullHeightSidebarZoomMenuContainerActive--jPaQb zoom_menu--fullHeightSidebarZoomMenuContainer--So738",m="zoom_menu--fullHeightSidebarZoomMenuContainerCollapsed--FpFJm zoom_menu--fullHeightSidebarZoomMenuContainer--So738",p="zoom_menu--zoomAmount--Qb6gL",h="zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",_="zoom_menu--fullHeightSidebarZoomAmountActive--EKFn- zoom_menu--fullHeightSidebarZoomAmount---M-Dz zoom_menu--zoomAmount--Qb6gL",g="zoom_menu--chevronContainer---jqeH",f="zoom_menu--fullHeightSidebarChevronActive--s0s-C",E="zoom_menu--zoomInputContainer---Xqu1",y="zoom_menu--middleZoomButton--17GYR",b="zoom_menu--zoomMiddleChevronContainer--XxlkP",v="zoom_menu--zoomMiddleChevronContainerActive--dN2OQ zoom_menu--zoomMiddleChevronContainer--XxlkP",I="zoom_menu--zoomMiddleChevronSVGContainer--6TlCz",T="zoom_menu--zoomMinus--wljce",S="zoom_menu--zoomPlus--B-iye",w="zoom_menu--enabled--JWySc",A="zoom_menu--feedZoomPan--AxC05",C="zoom_menu--active--WlOsd"},610265:(e,r,n)=>{n.d(r,{Bx:()=>u,EE:()=>s,Gq:()=>c,Hw:()=>d,Io:()=>a,Mk:()=>o,Nt:()=>m,Qq:()=>l,_C:()=>p,zr:()=>i});let i="variable_pill--root--0ibUT",a="variable_pill--pill--NU8eR variable_pill_base--pillBase--HIf9B",o="variable_pill--useHover--S6o02",s="variable_pill--forceHover--EDu9s",l="variable_pill--text--Fm5k5",c="variable_pill--invalid--dxyCJ",d="variable_pill--nameAndIcons--Cyvcc",u="variable_pill--deletedIcon--QaRlG",m="variable_pill--inferredIcon--eLJef",p="variable_pill--isHovered--qumV3"},640001:(e,r,n)=>{n.d(r,{Er:()=>s,Fi:()=>p,JJ:()=>a,N:()=>m,Q_:()=>d,RH:()=>o,Uq:()=>c,eK:()=>u,pv:()=>i,xH:()=>l});let i="variable_pill_base--pillBase--HIf9B",a="variable_pill_base--pillHasIcon--qR8Mw",o="variable_pill_base--pillSelected--WuPhz",s="variable_pill_base--pillDisableHover--A9znd",l="variable_pill_base--pillDefault--5YSwx",c="variable_pill_base--pillDefaultComponent--GMeSg",d="variable_pill_base--pillDisabled--Xci9C",u="variable_pill_base--pillDisabledTertiary--C2fJb",m="variable_pill_base--pillInSelection--HupPT",p="variable_pill_base--pillNarrow--Oai69"},376272:(e,r,n)=>{n.d(r,{QW:()=>a,qS:()=>i});let i="go_to_stripe_button--badge--aJn3P text--fontPos12--YsUAh text--_fontBase--QdLsd",a="go_to_stripe_button--warningIcon--eeAU7"},908198:(e,r,n)=>{n.d(r,{k:()=>i});let i="dock--dockDesign--kbym5 dock--dock--A6jIs"},553574:(e,r,n)=>{},132752:(e,r,n)=>{n.d(r,{$C:()=>h,B6:()=>g,BG:()=>C,Cq:()=>L,D1:()=>l,F$:()=>s,FV:()=>m,Gy:()=>A,JW:()=>R,MJ:()=>d,ML:()=>D,NH:()=>p,QF:()=>O,UK:()=>c,VJ:()=>b,Vx:()=>F,Xb:()=>i,Y2:()=>P,Y9:()=>k,YB:()=>x,ZK:()=>f,Zv:()=>N,_P:()=>a,c6:()=>o,ez:()=>U,k7:()=>B,kQ:()=>V,lI:()=>v,lO:()=>I,lP:()=>u,o2:()=>w,od:()=>E,ot:()=>M,sI:()=>S,vt:()=>_,y2:()=>y,zZ:()=>T});let i="resource_tiles--showOnHover--2v687",a="resource_tiles--figjamPluginRowIconHoverBg--0GjEb",o="resource_tiles--fauxFocused--Tk7MC",s="resource_tiles--optionsButtonActive--CnmDE resource_tiles--optionsButton--B7MN2",l="resource_tiles--optionsButtonShowOnHover--kJQHm resource_tiles--optionsButton--B7MN2 resource_tiles--showOnHover--2v687",c="resource_tiles--pluginTitleBadgeContainer--Q-9cz",d="resource_tiles--browsePluginTile--Dl1N0 resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",u="resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",m="resource_tiles--pluginTileMeta--xgpJR",p="resource_tiles--browsePluginTileDevModeWizard--ApW9E",h="resource_tiles--browsePluginTileSmall--t70Gg resource_tiles--_browsePluginTileBase--V7a7Y resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X",_="resource_tiles--pluginTileIconLoading--mas66 resource_tiles--pluginTileIcon--rmGOy resource_tiles--_browseTileIconBase--DDmKv",g="resource_tiles--pluginTileName--9Isog text--fontPos12--YsUAh text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",f="resource_tiles--pluginTileSubheader--Fihho text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",E="resource_tiles--ctaButtonContainer--z2HxW",y="resource_tiles--priceBadgeContainer--6O7DF",b="resource_tiles--widgetMonetizationBadge--hXbF6",v="resource_tiles--ctaButton--qu-bG",I="resource_tiles--cta--JU9XJ text--fontPos12--YsUAh text--_fontBase--QdLsd",T="resource_tiles--buttonSubmenuChevron--af8r9",S="resource_tiles--buttonSubmenuChevronWhite--c7pTT resource_tiles--buttonSubmenuChevron--af8r9",w="resource_tiles--rowChevron--tIIjl",A="resource_tiles--widgetTileSmall--gtI7m resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos11--2LvXf text--_fontBase--QdLsd",C="resource_tiles--widgetTile--OjUTk resource_tiles--_widgetTileBase--pKu3B resource_tiles--_browseTileBase--7oogR resource_tiles--_parentWithHoverAction--m180X text--fontPos12--YsUAh text--_fontBase--QdLsd",N="resource_tiles--widgetTileIconSmall--Dox02 resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",L="resource_tiles--widgetTileIcon--hGlOB resource_tiles--_widgetTileIconBase--vgb2t resource_tiles--_browseTileIconBase--DDmKv",O="resource_tiles--widgetTileMetadata--Ggrsh",R="resource_tiles--widgetTileNameContainer--HqAEf",P="resource_tiles--widgetTileName--hvW06 ellipsis--ellipsis--Tjyfa",D="resource_tiles--widgetTileSubheader--7-TT- ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd",k="resource_tiles--paymentErrorIcon--w-8j9",M="resource_tiles--relativeContainer--7lvHF",F="resource_tiles--redDot---lNFV red_dot--baseRedDot--pgZV7",x="resource_tiles--saveButtonEditorSmall--Jt970 resource_tiles--_saveButton--mDwpY",U="resource_tiles--saveButtonVisible---tZad",B="resource_tiles--saveButtonEditorLarge--nKxZq resource_tiles--_saveButton--mDwpY",V="resource_tiles--svg16--B1UCN"},373494:(e,r,n)=>{n.d(r,{Be:()=>s,DD:()=>_,F4:()=>b,G6:()=>l,Hx:()=>c,KA:()=>f,Lt:()=>A,Lu:()=>a,N4:()=>w,Rt:()=>S,U0:()=>v,Vq:()=>h,_Z:()=>g,aY:()=>y,bE:()=>u,iZ:()=>T,jE:()=>p,kL:()=>I,pL:()=>i,p_:()=>o,v0:()=>d,yl:()=>m,z3:()=>E});let i="modal--confirmButton--SNUDv",a="modal--cancelLink--gmgMU modal--button--ZJmGG",o="modal--list--AYXsM",s="modal--blueLink--9GcJu blue_link--blueLink--9rlnd",l="modal--modalFooterButtonGroup--G-glC",c="modal--modalFooter--doArv",d="modal--buttonRow--o2A0S",u="modal--groupedButtonRow--bwN6C modal--buttonRow--o2A0S",m="modal--modal--fXC8G modal--modalShadow--d-rJf modal--modalBare--AlP7E",p="modal--modalContent--P643j",h="modal--important--qfd6R",_="modal--title--sEkWg",g="modal--textInput---r1fJ",f="modal--tfaQrCode--Xy6Qb",E="modal--error--Kk49K",y="modal--code--zhp08",b="modal--codes--U1NYW",v="modal--avatarWithHandle--AJpEE",I="modal--container--LVq8G",T="modal--blockQuote--bzdW1 text--fontPos11--2LvXf text--_fontBase--QdLsd",S="modal--blockQuoteHeader--IKpaG",w="modal--blockQuoteText--nDUnj ellipsis--ellipsis--Tjyfa",A="modal--select--a5n-Q"},275596:(e,r,n)=>{n.d(r,{Ar:()=>S,B9:()=>d,FQ:()=>b,Hn:()=>A,IL:()=>s,Lq:()=>l,Ny:()=>T,OQ:()=>f,TI:()=>m,ZA:()=>g,ZO:()=>p,_S:()=>o,a5:()=>v,b:()=>a,dC:()=>_,gF:()=>w,gh:()=>E,jS:()=>h,nW:()=>I,oX:()=>y,uS:()=>u,w0:()=>c,wV:()=>i});let i="pointer_modal--announcementPointerModalDark--9DD-M pointer_modal--announcementPointerModal---X9Ui",a="pointer_modal--closeButton--yKnli",o="pointer_modal--closeButtonExtraSpacing--e8erM",s="pointer_modal--announcementPointerModalLight--AaKLA pointer_modal--announcementPointerModal---X9Ui",l="pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz",c="pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",d="pointer_modal--walkThroughModalAnimateFast--Xm453 pointer_modal--walkThroughModal--6eTVS pointer_modal--pointerModal--wrpFz",u="pointer_modal--closeButtonWhite--nj2uk",m="pointer_modal--primaryCtaButtonLight--WnZAX pointer_modal--primaryCtaButton--Snffw",p="pointer_modal--primaryCtaButtonDark--ZWijN pointer_modal--primaryCtaButton--Snffw",h="pointer_modal--secondaryCtaButtonLight---Dv4E pointer_modal--secondaryCtaButton--Jg0Yu",_="pointer_modal--secondaryCtaButtonDark--dKbwo pointer_modal--secondaryCtaButton--Jg0Yu",g="pointer_modal--footerDiv--JtCDN",f="pointer_modal--ctaContainer--luZLz",E="pointer_modal--noMotion--YIicU",y="pointer_modal--topTriangleBackground--bAkvB pointer_modal--topTriangle--eTQ3K",b="pointer_modal--topTriangleForeground--BZxHM pointer_modal--topTriangle--eTQ3K",v="pointer_modal--bottomTriangleBackground--GHZc5 pointer_modal--bottomTriangle--iDHi9",I="pointer_modal--bottomTriangleForeground--2hiBJ pointer_modal--bottomTriangle--iDHi9",T="pointer_modal--rightTriangleBackground--fw0l3 pointer_modal--rightTriangle--rQltw",S="pointer_modal--rightTriangleForeground--ReV7J pointer_modal--rightTriangle--rQltw",w="pointer_modal--leftTriangleBackground--GAtIC pointer_modal--leftTriangle--p5eQp",A="pointer_modal--leftTriangleForeground--shkXU pointer_modal--leftTriangle--p5eQp"},743586:(e,r,n)=>{n.d(r,{Fp:()=>d,HF:()=>a,UT:()=>s,g7:()=>c,kv:()=>l,v6:()=>i,zG:()=>o});let i="options_menu--optionMenuResponsiveViewer--nakUc options_menu--optionMenu--9fG9u",a="options_menu--optionMenuForFooter--HiOGO options_menu--optionMenu--9fG9u",o="options_menu--optionMenuButton--9sq9i",s="options_menu--buttonChevron--N2JHA",l="options_menu--dropdownButtonForFooter--UIPTM",c="options_menu--deviceName--qS44h",d="options_menu--optionsMenuIconFixed--zXwsG"},260522:(e,r,n)=>{n.d(r,{$7:()=>s,Jf:()=>m,KK:()=>o,Qs:()=>l,S4:()=>_,Tp:()=>i,Xw:()=>c,h2:()=>g,lJ:()=>p,q9:()=>u,t0:()=>a,wc:()=>d,xQ:()=>h});let i="prototype--background--C7T7U",a="prototype--backgroundTransparent--g5yZq",o="prototype--documentationContainer---zYeR",s="prototype--noScrollBars--Hz0hJ",l="prototype--content--9zE6J",c="prototype--contentMiddle--sqEVr",d="prototype--contentMiddleWithHeader--Qr1mu",u="prototype--viewerContainer--8C5YF",m="prototype--viewerContainerFullScale--bf-Sp prototype--viewerContainer--8C5YF",p="prototype--viewer--uYMkg",h="prototype--footerContainer--AikxI",_="prototype--commentsNextCursor--uIXBd",g="prototype--suppressFocusRings--uoAQT"},138504:(e,r,n)=>{n.d(r,{UL:()=>s,c6:()=>a,jG:()=>o,so:()=>i});let i="right_sidebar_panel--sidebarContainer--VeCtS right_sidebar_panel--container--CtQ1g",a="right_sidebar_panel--sidebarContainerHidden--POHqM right_sidebar_panel--container--CtQ1g",o="right_sidebar_panel--scrollContainer--ORIOM right_sidebar_panel--sidebarDragContainer--n0xNj",s="right_sidebar_panel--withoutHeaderMargin--R9T7p"},414598:(e,r,n)=>{n.d(r,{Db:()=>p,Dg:()=>o,Kb:()=>E,MD:()=>d,Qs:()=>i,S:()=>l,SV:()=>f,Tw:()=>_,lI:()=>y,o:()=>u,oO:()=>m,qg:()=>g,qr:()=>s,v0:()=>c,xC:()=>a,yl:()=>h,zP:()=>b});let i="rcs_components--content--N7eCo text--fontPos11--2LvXf text--_fontBase--QdLsd",a="rcs_components--contentFeatureUpdate--BQecL text--fontPos11--2LvXf text--_fontBase--QdLsd rcs_components--contentLarge--1qHKL rcs_components--leftRightContent--5yuzu",o="rcs_components--imgContainer--JofI3",s="rcs_components--footer--l5bb0",l="rcs_components--footerStepCounter--jKzRi",c="rcs_components--buttonRow--OfMRY",d="rcs_components--closeButtonDefault--q8cPK rcs_components--closeButtonBase--wooGI",u="rcs_components--closeButtonOnLight--rFK2o rcs_components--closeButtonBase--wooGI",m="rcs_components--closeButtonOnDark--SRWWX rcs_components--closeButtonBase--wooGI",p="rcs_components--closeButtonHighContrast--Dlf2s rcs_components--closeButtonBase--wooGI",h="rcs_components--modal--sgfHP",_="rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",g="rcs_components--fullscreenBackground--tIex6",f="rcs_components--fullscreenWelcomeSequenceModal--cuKAh rcs_components--welcomeSequenceModal--TOyd- rcs_components--overflowingModal--QrH-H",E="rcs_components--modalAnimateIn--zcZjW",y="rcs_components--ctaButton--5FSzm",b="rcs_components--loadingSpinner--rOHo1"},996887:(e,r,n)=>{n.d(r,{Hj:()=>i,pO:()=>a});let i="onboarding--promoPointerTitle--Z1b9a text--fontPos13--xW8hS text--_fontBase--QdLsd",a="onboarding--lowZIndexPointerModal--9C2QH pointer_modal--pointerModalBlue--9Jjg8 pointer_modal--pointerModal--wrpFz"},71048:(e,r,n)=>{n.d(r,{$9:()=>i,Gv:()=>l,Lq:()=>m,Pj:()=>c,SI:()=>d,hj:()=>u,ig:()=>a,mj:()=>o,s1:()=>p,vL:()=>s});let i="styles_properties_form--textPreviewContainer---jjb4 styles_properties_form--previewContainer--SH1Yk",a="styles_properties_form--gridAndEffectPreviewContainer--9q2FM styles_properties_form--previewContainer--SH1Yk",o="styles_properties_form--loadedFillPreviewContainer--36WiC styles_properties_form--fillPreviewSize--GiUdz",s="styles_properties_form--loadingFillPreviewContainer--WPdS6 styles_properties_form--fillPreviewSize--GiUdz",l="styles_properties_form--stylePreview--tJF78",c="styles_properties_form--textStylePreview--Jp6WQ",d="styles_properties_form--textStylePreviewInverted--GeC3b",u="styles_properties_form--fillStylePreview--xOVAg styles_properties_form--fillPreviewSize--GiUdz",m="styles_properties_form--loading--0A0hy",p="styles_properties_form--isLoaded--2czdf"},467703:(e,r,n)=>{n.d(r,{BA:()=>I,D:()=>T,E0:()=>E,I6:()=>O,KY:()=>i,NM:()=>l,SB:()=>m,SM:()=>w,T3:()=>_,TH:()=>d,U1:()=>g,UE:()=>o,Ym:()=>A,_Z:()=>a,cr:()=>u,eO:()=>f,hP:()=>C,jG:()=>s,jm:()=>N,ln:()=>h,nM:()=>y,p$:()=>S,ry:()=>L,sI:()=>p,sM:()=>b,uH:()=>v,wY:()=>c});let i="multi_select_list--actionBar--T9qpZ",a="multi_select_list--actionBarVisible--3rWgr multi_select_list--actionBar--T9qpZ",o="multi_select_list--arrow--CW8ia",s="multi_select_list--scrollContainer--B-Dk-",l="multi_select_list--scrollContent--bCmOd",c="multi_select_list--tableWrapper--pDejK",d="multi_select_list--tableWithNewScrollContext--Iffr4",u="multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",m="multi_select_list--actionBarContentContainerVisible--AEaW4 multi_select_list--actionBarContentContainer--lbuSx _overlayBase--_overlayBase--Rkj8l text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",p="multi_select_list--menuBarDropdown--Lf9-4",h="multi_select_list--stickyHeader--FkV5r",_="multi_select_list--stickyHeaderWithBanner--9IDR1 multi_select_list--stickyHeader--FkV5r",g="multi_select_list--headerRow--22Lao",f="multi_select_list--headerRowDisabled--zG4LU multi_select_list--headerRow--22Lao multi_select_list--_disabled--INopV",E="multi_select_list--checkboxColumn--SgkHV",y="multi_select_list--row--nfio-",b="multi_select_list--unselectedCheckbox--KAaaj",v="multi_select_list--rowWithRoundedBorder--im1TP",I="multi_select_list--notFirstRowInSelectedGroup--3m6oH",T="multi_select_list--notLastRowInSelectedGroup--N4myp",S="multi_select_list--emptyState--QQcOE",w="multi_select_list--batchActionCount--R41SC",A="multi_select_list--batchActionClear--7q1Vl",C="multi_select_list--actionButton--D2K4w",N="multi_select_list--longList--Oz-Pp",L="multi_select_list--longListDisabled--x8onM multi_select_list--longList--Oz-Pp multi_select_list--_disabled--INopV",O="multi_select_list--highlightedRow--W4ZZn"},372464:(e,r,n)=>{n.d(r,{Jw:()=>s,Lm:()=>o,NQ:()=>f,Y1:()=>h,ai:()=>g,ef:()=>c,h3:()=>i,hq:()=>y,i1:()=>d,k_:()=>l,li:()=>p,q0:()=>a,um:()=>m,vL:()=>u,xW:()=>E,zP:()=>_});let i="desktop_tool_bar--toolBarSpacerContainer--rLTCP",a="desktop_tool_bar--toolBarSpacerContainerTabletOptimized--0Tv6Q desktop_tool_bar--toolBarSpacerContainer--rLTCP",o="desktop_tool_bar--toolBarContainer--1EjL8",s="desktop_tool_bar--pageViewToolBarContainer--iC3UY desktop_tool_bar--toolBarContainer--1EjL8",l="desktop_tool_bar--settingsModalToolbarStickyContainer--lE8qt",c="desktop_tool_bar--toolBarContainerFullWidth--GT5GG desktop_tool_bar--toolBarContainer--1EjL8",d="desktop_tool_bar--toolBarLeftSide--wJapT text--fontPos13--xW8hS text--_fontBase--QdLsd",u="desktop_tool_bar--toolBarCenter--orkTM",m="desktop_tool_bar--toolBarCenterFullWidth---a4El",p="desktop_tool_bar--toolBarRightSide--XfTEn",h="desktop_tool_bar--toolBarTabContent--a1orn ellipsis--ellipsis--Tjyfa",_="desktop_tool_bar--toolBarTabContentBase--CoAtY",g="desktop_tool_bar--chevron--zwxsY",f="desktop_tool_bar--adminSettingsToolBarTabContentBase--xaPNN",E="desktop_tool_bar--adminSettingsToolBarTabContentSelected--YOoLG",y="desktop_tool_bar--chevronSvgContainer--Fz1VL"},847768:(e,r,n)=>{n.d(r,{AL:()=>A,BI:()=>g,Cu:()=>b,DL:()=>d,FH:()=>w,Fp:()=>i,G7:()=>E,Hl:()=>a,LH:()=>T,MO:()=>_,Nn:()=>C,TV:()=>u,UD:()=>y,VQ:()=>I,Vs:()=>h,cJ:()=>p,e6:()=>m,hv:()=>v,j7:()=>o,ko:()=>l,nP:()=>s,vO:()=>c,xn:()=>S,yH:()=>f});let i="voice_users--voiceParticipantAvatar--7mhMG",a="voice_users--overflowRow--dyDR2",o="voice_users--nameAndSuffixContainer--GGoKj",s="voice_users--flexContainer--bWLmT",l="voice_users--flexLeftContainer--EVDRS",c="voice_users--flexRightContainer--Su6EL",d="voice_users--voiceParticipantName--MPxav text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",u="voice_users--voiceParticipantNameGreyedOut--4zNHd text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",m="voice_users--participantStatus--cnVtZ",p="voice_users--participantRowOldPadding--96Ig5",h="voice_users--participantRowNewPadding--b0v2c",_="voice_users--participantRow--D4Yar",g="voice_users--hoverable--tq5aE",f="voice_users--containsCursor--Wx6C4",E="voice_users--secondaryMenuIconButtonContainer--aAh8o",y="voice_users--showSecondaryDropdownOnHover--AWGE6",b="voice_users--currentUserHeaderRow--Jiv6z",v="voice_users--secondaryActionsMenuButton--2emFq",I="voice_users--secondaryActionsMenuButtonActive--QoLJK",T="voice_users--multiplayerUserView--7nAcD",S="voice_users--userSuffix--2OgbZ text--fontPos11--2LvXf text--_fontBase--QdLsd",w="voice_users--userSuffixNew--husrg text--fontPos11--2LvXf text--_fontBase--QdLsd",A="voice_users--voiceUserHeadphonesIcon--wLuPW",C="voice_users--mutedContainer--JL7uZ"},690864:(e,r,n)=>{n.d(r,{Aw:()=>_,DV:()=>a,FY:()=>s,Hn:()=>d,Jj:()=>m,R_:()=>i,ZS:()=>l,cg:()=>p,e6:()=>h,kQ:()=>c,nf:()=>u,ti:()=>o});let i="lexical_editor_theme--heading--SosJn",a="lexical_editor_theme--codeBlock--TJ-Fu",o="lexical_editor_theme--inlineCode--jE754",s="lexical_editor_theme--paragraph--GBDXU",l="lexical_editor_theme--textBold--tWO8-",c="lexical_editor_theme--textItalic--vqDDt",d="lexical_editor_theme--textStrikethrough--CHepi",u="lexical_editor_theme--link--IC2wz",m="lexical_editor_theme--linkReadOnly--h-PyL",p="lexical_editor_theme--listOl--Ae2L-",h="lexical_editor_theme--listUl--EMQyv",_="lexical_editor_theme--listItem--tt5uP"},630564:(e,r,n)=>{},194021:(e,r,n)=>{n.d(r,{GE:()=>c,KQ:()=>s,QH:()=>o,Sw:()=>a,_J:()=>i,ky:()=>l,lx:()=>d});let i="loading_content--shimmerAnimation--qZjRw",a="loading_content--shimmerOnMenuAnimation--U9c8t loading_content--shimmerAnimation--qZjRw",o="loading_content--lightShimmerAnimation--Iz23-",s="loading_content--loadingText--MFUIw",l="loading_content--loadingTextOnMenu--WrELp loading_content--loadingText--MFUIw",c="loading_content--loadingImage--eB8Kt",d="loading_content--loadingPrimary--HsesM"},686820:(e,r,n)=>{n.d(r,{Ak:()=>_,K5:()=>h,OH:()=>a,Pj:()=>d,QY:()=>p,c0:()=>c,cQ:()=>l,d6:()=>m,lE:()=>o,m8:()=>u,nf:()=>s,qr:()=>i});let i="footer--footer--JB9iL",a="footer--footerHidden--U2SCb footer--footer--JB9iL",o="footer--replayKeyboardShortcut--Lqop8",s="footer--replayButtonContainer--XR1gy",l="footer--replayButton--fKqPi footer--pill--a9ne7",c="footer--debugToolsContainer--WeB-G",d="footer--frameCounterContainer--oMKsY",u="footer--frameCounterResponsive--XW-b7 footer--frameCounter--5AU-l footer--pill--a9ne7",m="footer--frameCounterText--hv93-",p="footer--imageButton--Uadgb",h="footer--footerOptionsMenuSeparator--5rW7E",_="footer--embedFrameCounterText--OS77U"},305928:(e,r,n)=>{n.d(r,{A4:()=>A,CK:()=>m,Cu:()=>L,Dv:()=>g,FR:()=>i,RK:()=>S,SA:()=>T,SC:()=>h,Sl:()=>l,Tr:()=>v,VA:()=>_,Vj:()=>b,W0:()=>f,WM:()=>w,XK:()=>a,_O:()=>d,ag:()=>y,gO:()=>E,h5:()=>u,m2:()=>o,m4:()=>p,ol:()=>N,q6:()=>c,su:()=>C,vS:()=>I,yl:()=>s});let i="generic_tile_DEPRECATED--selectedContainer--ybkd4 generic_tile_DEPRECATED--container--XotGi",a="generic_tile_DEPRECATED--tileBorder---DBQk",o="generic_tile_DEPRECATED--subtitleWrapperInner--ncwf-",s="generic_tile_DEPRECATED--genericTile--6ezs8",l="generic_tile_DEPRECATED--image--ikVLI",c="generic_tile_DEPRECATED--bottomControls--Ro4JX",d="generic_tile_DEPRECATED--listView--5yggJ text--fontPos13--xW8hS text--_fontBase--QdLsd",u="generic_tile_DEPRECATED--listViewSlightlyLarger--QwvP6 generic_tile_DEPRECATED--listView--5yggJ text--fontPos13--xW8hS text--_fontBase--QdLsd",m="generic_tile_DEPRECATED--gridView--ICika",p="generic_tile_DEPRECATED--standaloneFileTile--lmMfZ generic_tile_DEPRECATED--container--XotGi",h="generic_tile_DEPRECATED--subtitleContainer--y18L5",_="generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",g="generic_tile_DEPRECATED--disabledSubtitle--yTOPL generic_tile_DEPRECATED--subtitle--SkL2a ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd generic_tile_DEPRECATED--flexHorizontally--kRrGY",f="generic_tile_DEPRECATED--settings--cInfj",E="generic_tile_DEPRECATED--ellipsis--jqPWA ellipsis--ellipsis--Tjyfa",y="generic_tile_DEPRECATED--subtitleMetadata--94sE7 text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",b="generic_tile_DEPRECATED--modifiedMetadata--AphD2",v="generic_tile_DEPRECATED--genericTileRedesign--ySqO2",I="generic_tile_DEPRECATED--topLeftControls--hrfPC",T="generic_tile_DEPRECATED--topRightControls--bIPIz",S="generic_tile_DEPRECATED--visible--dakmY",w="generic_tile_DEPRECATED--facepile--MZY4B",A="generic_tile_DEPRECATED--control--xjbn-",C="generic_tile_DEPRECATED--branchIndicator--xy-8Y",N="generic_tile_DEPRECATED--viewOnlyLabel--4apxb",L="generic_tile_DEPRECATED--itemsViewTitle--Uxr-A"},119257:(e,r,n)=>{n.d(r,{Pf:()=>o,bb:()=>a,zr:()=>i});let i="truncated_text--root--kx5Ta ellipsis--ellipsis--Tjyfa",a="truncated_text--rootTruncateStart--aClXJ",o="truncated_text--directionFix--T1NOI"},491087:(e,r,n)=>{n.d(r,{Id:()=>u,MW:()=>d,Vt:()=>l,X8:()=>s,Yp:()=>m,gC:()=>p,kL:()=>i,o1:()=>o,rf:()=>a,ut:()=>c});let i="base_cookie_banner--container--nUKFl",a="base_cookie_banner--body--lPBYi",o="base_cookie_banner--actions--1LAhr",s="base_cookie_banner--dismiss--gdSyk",l="base_cookie_banner--container__community--oc-bP",c="base_cookie_banner--container__fileViewer--522-P",d="base_cookie_banner--dismissIcon--0O2Nl",u="base_cookie_banner--container__prototype--A1a4y",m="base_cookie_banner--container__auth--okjXC",p="base_cookie_banner--container__authOrCommunity--cqdOl"},616121:(e,r,n)=>{n.d(r,{$C:()=>g,$b:()=>ek,$r:()=>p,A4:()=>ed,AN:()=>ee,Af:()=>eu,Ah:()=>j,B9:()=>B,DE:()=>en,DN:()=>eO,Dd:()=>x,De:()=>d,Dr:()=>l,FQ:()=>eP,JI:()=>H,JT:()=>h,K4:()=>eF,LL:()=>eh,Me:()=>_,N0:()=>T,PN:()=>a,PQ:()=>eG,Po:()=>S,Pp:()=>V,Py:()=>k,Q1:()=>eV,Q2:()=>eA,QQ:()=>s,Qw:()=>N,R2:()=>ef,R3:()=>c,RO:()=>L,Rv:()=>eH,SW:()=>U,Sb:()=>C,T2:()=>eD,Td:()=>Z,U8:()=>I,Uw:()=>$,Vm:()=>o,Wn:()=>f,Ws:()=>el,X8:()=>eb,Z6:()=>b,Zz:()=>eB,_M:()=>ec,_P:()=>em,_x:()=>K,a6:()=>W,aT:()=>eM,az:()=>eT,bu:()=>O,c6:()=>eE,dV:()=>m,eN:()=>eI,eg:()=>i,ev:()=>ei,fU:()=>eg,fV:()=>J,fh:()=>eS,g$:()=>Y,gn:()=>eo,h3:()=>eN,i4:()=>eR,iU:()=>eC,is:()=>A,jR:()=>E,jc:()=>ey,k0:()=>R,k7:()=>G,mO:()=>ev,n7:()=>ep,nG:()=>Q,nL:()=>ex,o$:()=>eU,oK:()=>F,oW:()=>P,p5:()=>e_,pZ:()=>ew,qH:()=>X,qm:()=>w,qt:()=>et,t1:()=>M,vD:()=>z,vY:()=>ea,vh:()=>y,w3:()=>u,wO:()=>q,wl:()=>es,xr:()=>v,xu:()=>er,yG:()=>eL,zt:()=>D});let i="#e5e5e5",a="rgba(0, 0, 0, 0.8)",o="#fff",s="#333333",l="#fff",c="#000",d="#e6e6e6",u="#667799",m="#007be5",p="#9747ff",h="#ff24bd",_="#f24822",g="#ffcd29",f="#14ae5c",E="rgba(30, 30, 30, 1)",y="rgba(117, 117, 117, 1)",b="rgba(179, 179, 179, 1)",v="rgba(230, 230, 230, 1)",I="rgba(217, 217, 217, 1)",T="rgba(242, 72, 34, 1)",S="rgba(255, 199, 194, 1)",w="rgba(255, 166, 41, 1)",A="rgba(252, 209, 156, 1)",C="rgba(255, 205, 41, 1)",N="rgba(255, 232, 163, 1)",L="rgba(20, 174, 92, 1)",O="rgba(175, 244, 198, 1)",R="rgba(13, 153, 255, 1)",P="rgba(189, 227, 255, 1)",D="rgba(151, 71, 255, 1)",k="rgba(228, 204, 255, 1)",M="rgba(255, 255, 255, 1)",F="rgba(175, 188, 207, 1)",x="rgba(230, 230, 230, 1)",U="rgba(255, 175, 163, 1)",B="rgba(255, 196, 112, 1)",V="rgba(255, 217, 102, 1)",G="rgba(133, 224, 163, 1)",H="rgba(128, 202, 255, 1)",K="rgba(217, 184, 255, 1)",W="rgba(255, 189, 242, 1)",$="rgba(230, 230, 230, 1)",Y="rgba(151, 151, 151, 1)",z="rgba(255, 153, 248, 1)",j="rgba(255, 174, 79, 1)",q="rgba(255, 238, 0, 1)",Z="rgba(134, 250, 22, 1)",X="rgba(111, 255, 246, 1)",J="rgba(179, 143, 255, 1)",Q="rgba(255, 255, 255, 1)",ee="rgba(175, 175, 175, 1)",et="rgba(255, 160, 249, 1)",er="rgba(255, 184, 104, 1)",en="rgba(255, 242, 52, 1)",ei="rgba(174, 255, 97, 1)",ea="rgba(126, 255, 247, 1)",eo="rgba(188, 155, 255, 1)",es="rgba(255, 255, 255, 1)",el="rgba(17, 17, 17, 1)",ec="rgba(117, 117, 117, 1)",ed="rgba(217, 217, 217, 1)",eu="rgba(224, 62, 26, 1)",em="rgba(251, 188, 182, 1)",ep="rgba(247, 151, 34, 1)",eh="rgba(255, 196, 112, 1)",e_="rgba(243, 193, 27, 1)",eg="rgba(249, 223, 144, 1)",ef="rgba(25, 143, 81, 1)",eE="rgba(161, 232, 185, 1)",ey="rgba(12, 140, 233, 1)",eb="rgba(168, 215, 250, 1)",ev="rgba(138, 56, 245, 1)",eI="rgba(214, 182, 251, 1)",eT="rgba(255, 255, 255, 1)",eS="rgba(102, 119, 153, 1)",ew="rgba(242, 72, 34, 1)",eA="rgba(255, 166, 41, 1)",eC="rgba(255, 205, 41, 1)",eN="rgba(20, 174, 92, 1)",eL="rgba(13, 153, 255, 1)",eO="rgba(151, 71, 255, 1)",eR="rgba(255, 36, 189, 1)",eP="rgba(230, 230, 230, 1)",eD="rgba(175, 188, 207, 1)",ek="rgba(252, 163, 151, 1)",eM="rgba(255, 196, 112, 1)",eF="rgba(247, 209, 95, 1)",ex="rgba(121, 210, 151, 1)",eU="rgba(124, 196, 248, 1)",eB="rgba(209, 168, 255, 1)",eV="rgba(253, 156, 224, 1)",eG="rgba(230, 230, 230, 1)",eH="#f8f8f8"},699670:(e,r,n)=>{n.d(r,{ss:()=>i});let i=11},930269:(e,r,n)=>{n.d(r,{compareChangesModalWidth:()=>f,curatorTertiaryModalZ:()=>b,defaultCornerRadius:()=>g,designToolbarHeight:()=>l,devHandoffAssetPreviewMaxHeight:()=>m,devHandoffAssetPreviewMaxWidth:()=>u,figmaComponentFlyoutTextMaxCollapsedHeight:()=>p,helpWidgetSizePlusMargin:()=>s,leftNavLeftMarginUI3:()=>c,modalZ:()=>I,propertiesPanelRightMarginUI3:()=>d,rulerThickness:()=>_,scrollBarXHeight:()=>i,scrollBarYWidth:()=>a,secondaryModalZ:()=>v,stylePickerMaxHeight:()=>h,templateModalTeamName:()=>y,topBarZ:()=>E,trackPadding:()=>o,uiFontFamily:()=>T,whyteFontFamily:()=>S});let i="6px",a="6px",o="2px",s="64px",l="48px",c="8px",d="8px",u="44px",m="44px",p="96px",h="300px",_="20px",g="2px",f="3000px",E=3,y=2,b=7,v=9,I=10,T="Inter, sans-serif",S="Whyte, sans-serif"},262311:(e,r,n)=>{n.d(r,{FX:()=>s,QU:()=>a,Us:()=>i,ZV:()=>l,rz:()=>o});let i="40px",a="12px",o="16px",s="16px",l="40px"},631981:(e,r,n)=>{n.d(r,{az:()=>i,i0:()=>a});let i="toolbar_action--hideOnMobile--nG2oh",a="toolbar_action--hideOnDesktop--caccx"},317258:(e,r,n)=>{n.d(r,{B7:()=>p,E3:()=>i,H0:()=>d,Kk:()=>o,My:()=>m,Nl:()=>c,Oy:()=>a,Xy:()=>l,hR:()=>u,m$:()=>s});let i="visual_bell--base--Q4n07",a="visual_bell--fplBase--oYGmj",o="visual_bell--icon--rn9Ns",s="visual_bell--iconUI3Color--1jcVh",l="visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",c="visual_bell--customIconCircle--LwQJ3 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",d="visual_bell--customIconError--wr7b0 visual_bell--customIcon--Uxudp plugin--pluginIconBase--yAG5F",u="visual_bell--progressIcon--RYZye",m="visual_bell--slidesVisualBell--arXfI",p="visual_bell--slidesVisualBellIcon--LAt8o"},606789:(e,r,n)=>{n.d(r,{DD:()=>i,DK:()=>a,LY:()=>o,Y_:()=>s});let i="slides_view_header--title--3oQx- utilities--bodyLarge--VTRab ellipsis--ellipsis--Tjyfa",a="slides_view_header--rightColumn--izw82",o="slides_view_header--headerButtonContainer--B0t6E",s="slides_view_header--titleWithoutTopLeftIcon--gaywC slides_view_header--title--3oQx- utilities--bodyLarge--VTRab ellipsis--ellipsis--Tjyfa"},222849:(e,r,n)=>{n.d(r,{Kv:()=>m,Le:()=>s,Lq:()=>c,Qo:()=>u,Sn:()=>d,X9:()=>i,f$:()=>l,k8:()=>o,wH:()=>a});let i="slides_color_controls--panelToggle--kL4qJ",a="slides_color_controls--selected--FUTwH",o="slides_color_controls--colorChit--pdLKf",s="slides_color_controls--chitBackground--Vlkza",l="slides_color_controls--chitAlpha--GJlf2 chit--chitAlpha--Mn-aK",c="slides_color_controls--editChitButton--Am-hP",d="slides_color_controls--enabled--3SYlu",u="slides_color_controls--shownForTests--S2xlM",m="slides_color_controls--renameColorInput--7gA0L raw_components--textInput--t9D8g raw_components--base--T7G0z raw_components--input--JB4Ix raw_components--singleRowHeight--dKM4t raw_components--border--SKh2u"},130940:(e,r,n)=>{n.d(r,{Oe:()=>a,RJ:()=>s,g0:()=>o,mu:()=>l,yE:()=>i});let i="feed_post_zoom_pan--zoomPanContainer--zUqcL",a="feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",o="feed_post_zoom_pan--guidelineLayer--p6ik- feed_post_zoom_pan--zoomPanInteractionLayer--8w-cl",s="feed_post_zoom_pan--transformedImage--hjQSb",l="feed_post_zoom_pan--zoomControls--8PqPP feed_post_detail_modal--contentOverlayPill--1jsoj"},935084:(e,r,n)=>{n.d(r,{D9:()=>i,ZS:()=>o,oO:()=>a});let i="whiteboard_text_style_control--offscreenMeasurementContainer--BKhB1",a="whiteboard_text_style_control--selectInputForMeasurement--slyc8",o="whiteboard_text_style_control--optionForMeasurement--Am6OD"},509742:(e,r,n)=>{n.d(r,{$:()=>A,$d:()=>F,$y:()=>p,B4:()=>q,BE:()=>J,BN:()=>$,Bx:()=>P,F0:()=>N,FK:()=>L,FP:()=>y,ID:()=>Q,Lt:()=>a,SN:()=>Y,Sk:()=>V,UJ:()=>g,WX:()=>k,Wq:()=>X,ZJ:()=>x,Zh:()=>_,_V:()=>S,ac:()=>D,cP:()=>z,cq:()=>M,dP:()=>j,dR:()=>i,eB:()=>U,gz:()=>B,hA:()=>C,he:()=>T,i0:()=>l,iD:()=>K,iE:()=>d,ll:()=>O,oE:()=>w,pN:()=>u,qs:()=>c,rf:()=>I,rh:()=>Z,sD:()=>s,t3:()=>H,tS:()=>v,tq:()=>b,uA:()=>f,uh:()=>W,vu:()=>o,vy:()=>m,wj:()=>E,xI:()=>G,yG:()=>h,z6:()=>R});let i="delightful_toolbar--focusVisibleHover--Ag5DV",a="delightful_toolbar--select--Qs3At",o="delightful_toolbar--active--Xm9-4",s="delightful_toolbar--hand--UoaPp",l="delightful_toolbar--animate--gXF-Y",c="delightful_toolbar--universalInsertCollage--0-jTN",d="delightful_toolbar--stamp--diHIZ",u="delightful_toolbar--universalInsert--FC5m4",m="delightful_toolbar--universalInsertGoogleClassroom--9iLQR",p="delightful_toolbar--fakeButtonContainer--ivi7f",h="delightful_toolbar--toolbarFakeButtonTarget--SdMI0",_="delightful_toolbar--passthruLayout--gz5r2",g="delightful_toolbar--stampButton--3kdlW",f="delightful_toolbar--peekingVotingWheel--w0rd4",E="delightful_toolbar--peekingVotingWheelHidden--97uHk",y="delightful_toolbar--peekingVotingWheelDoneVoting--tAyvc",b="delightful_toolbar--peekingVotingWheelShowHide--1jIMo",v="delightful_toolbar--remainingVotesIndicator--1pWLF text--fontPos12--YsUAh text--_fontBase--QdLsd",I="delightful_toolbar--remainingVotesIndicatorInProgress--x9DdJ",T="delightful_toolbar--remainingVotesIndicatorDone--OyZtG",S="delightful_toolbar--remainingVotesIndicatorTextSpan--ola4B ellipsis--ellipsis--Tjyfa",w="delightful_toolbar--checkIcon--JmhHu",A="delightful_toolbar--peekingVotingWheelContainer--EBQCY",C="delightful_toolbar--peekingVotingWheelInactive--bdvqB",N="delightful_toolbar--horizontalButton--GEYZm",L="delightful_toolbar--horizontalButtonDisabled--J--Nk",O="delightful_toolbar--pointerEventsDisabled--0umVY",R="delightful_toolbar--tool--g8UFJ",P="delightful_toolbar--toolIconIsDragging--NbbVm",D="delightful_toolbar--shapeAndStickyShadow--19Urt",k="delightful_toolbar--hasDropShadow--Jr9fo",M="delightful_toolbar--easeInDltItemFill--rGBLG",F="delightful_toolbar--shapeSpawnAnimation--bHVVH",x="delightful_toolbar--customAnimatedStickyV3--qLTBA",U="delightful_toolbar--bottomStickyV3---oRIg delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",B="delightful_toolbar--middleStickyV3--BiM-v delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",V="delightful_toolbar--topStickyV3--5ndgM delightful_toolbar--stickyAnimationPropertiesV3--tf0ke",G="delightful_toolbar--middleStickyContainerV3--dlPej delightful_toolbar--backgroundStickyV3--NbeSj",H="delightful_toolbar--bottomStickyContainerV3--h7rWX delightful_toolbar--backgroundStickyV3--NbeSj",K="delightful_toolbar--fakeStickyContainer--OmfTq delightful_toolbar--backgroundStickyV3--NbeSj",W="delightful_toolbar--stickyOuterV3--ROW-i",$="delightful_toolbar--stickyCurlV3--6kp8i",Y="delightful_toolbar--stickyMaskContainerV3--XBMQM",z="delightful_toolbar--stickyMaskDynamicV3--hTZdB",j="delightful_toolbar--stickyMaskStaticV3---Ycp2",q="delightful_toolbar--showCurlV3--qx7tK",Z="delightful_toolbar--noTransition--aPSPH",X="delightful_toolbar--stickyBaseV3--sQACX",J="delightful_toolbar--reverse---CQhv",Q="delightful_toolbar--fakeStickyV3--Jq79A delightful_toolbar--stickyAnimationPropertiesV3--tf0ke"},773595:(e,r,n)=>{n.d(r,{EO:()=>s,MY:()=>o,Yv:()=>a,cN:()=>l,hT:()=>i,iJ:()=>c});let i={EN:"en",JA:"ja",FR:"fr",DE:"de",ES_ES:"es-es",ES_LA:"es-la",KO_KR:"ko-kr",PT_BR:"pt-br",AAA:"aaa",AAL:"aal"},a=[i.EN,i.JA,i.FR,i.DE,i.ES_ES,i.ES_LA,i.KO_KR,i.PT_BR,i.AAA,i.AAL],o=i.EN,s=[i.EN,i.JA,i.ES_ES],l=[i.FR,i.DE,i.ES_ES,i.ES_LA,i.KO_KR,i.PT_BR];i.ES_ES;let c=[i.AAA,i.AAL]},525763:(e,r,n)=>{n.d(r,{A:()=>h});var i=n(772841),a=n(683224),o=n(866206),s=n(798867),l=n(356388),c=n(344301),d=n(444390),u=n(250763),m=n(560512),p=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.DISCONNECTED=1]="DISCONNECTED",e[e.RECONNECTING=2]="RECONNECTING",e))(p||{});class h{constructor(e,r,n,i,o,s={},c){this.args=e,this.viewRegistry=n,this.clientOptions=s,this.session=new a.A(e,r,n,this.emitter,(e,r)=>{this.requestPaginationChange(e,r)},c,s.shouldBubbleUpNonNullableResultErrors,s.errorsLoggedForAnalyticsFraction),this.connection=new l.A(i,o,e,this.emitter,s),this.connection.addObserver(this),this.addEventListener(this.healthListener.bind(this));for(let e=0;e<(s?.preloadedViews?.length??0);e++){let r=s?.preloadedViews?.[e],n=s?.preloadedViewArgs?.[e]??{};this.session.subscribe(r,n,()=>{}),this.preloadViewKeys.add((0,d.J)(r._name,n))}for(let e=0;e<(s?.mismatchedViews?.length??0);e++){let r=s?.mismatchedViews?.[e],n=s?.mismatchedViewArgs?.[e]??{};this.mismatchedPreloadMsgs.push({messageType:"unsubscribe",viewName:r,args:n})}}transactionId=1;syncDelayForDebugging=0;syncRequests=new Map;pendingGlobalOptimisticUpdates=new Set;globalOptimisticUpdateResolutionCallbacks=[];session;connection;emitter=new s.b;healthListeners=new Set;pendingOptimisticMutationList=[];pendingMutationList=[];preloadViewKeys=new Set;mismatchedPreloadMsgs=[];cleanup(){this.connection.cleanup()}async connect(){await this.connection.connect()}async close(){await this.connection.closeWithoutReconnecting()}addEventListener(e){return this.emitter.addListener(e)}setOptionalMissingForView(e,r){this.session.setOptionalMissingForView(e,r)}unsetOptionalMissingForView(e){this.session.unsetOptionalMissingForView(e)}removeEventListener(e){return this.emitter.removeListener(e)}healthListener(e){if("CONNECTION_STATE"===e.type){let r=this.getHealthStatusForConnectionState(e.state);for(let e of this.healthListeners)e(r)}}getHealthStatus(){return this.getHealthStatusForConnectionState(this.connection.getState())}getHealthStatusForConnectionState(e){return"connected"===e.type?0:"connecting"===e.type?2:1}addHealthListener(e){return this.healthListeners.add(e),()=>this.removeHealthListener(e)}removeHealthListener(e){this.healthListeners.delete(e)}sendExistingSubscriptions(){for(let e of this.mismatchedPreloadMsgs)this.connection.send(e);for(let{viewRef:e,args:r,traceId:n}of(this.session.startReconnectionStateForPaginationQueries(),this.session.uniqueSubscriptions()))if(!this.preloadViewKeys.has((0,d.J)(e._name,r))){if(this.clientOptions.shouldSplayDesktopBellViewSubscription&&!this.connection.isInitial()&&("ActiveFileUsersForFileView"===e._name||"FilePresenterData"===e._name||"FileWithCommentsAndReactions"===e._name||"OrgByIdForPlanUserView"===e._name||"OrgByIdForPlanView"===e._name||"StatsigTeamsOrderView"===e._name)){let i=Math.floor(3e5*Math.random()),a=this.connection.getConnectionCount();(0,o.yy)(i).then(()=>{a===this.connection.getConnectionCount()&&this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n)})}else this.requestSubscription(e,r,this.connection.isInitial()?"initial_load":"refresh",n)}}handleMessage(e){switch(e.messageType){case"authSuccess":if(this.args.sessionId=e.sessionId,this.args.anonymousUserId=e.anonymousUserId,!this.connection.isAuthenticated()){(0,o.QI)(!1,"Expected connection to be in authenticated state");break}for(let e of this.syncRequests.values())this.requestSync(e);break;case"pendingMutations":this.hasUnresolvedGlobalOptimisticUpdates()?(this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.applyMutations(e.mutations)}),this.pendingMutationList.push(e.mutations),this.session.resolvePendingServerIdList(e.mutations)):this.session.applyMutations(e.mutations);break;case"syncFail":let r=this.syncRequests.get(e.transactionId);if(r){let n=r?.getRetryAfterMs();if(!n){this.handleAfterOptimisticUpdateResolved(e.transactionId);return}(0,o.QI)(!r.retryTimeout,"Already scheduled retry for sync request."),r.retryNumber++,r.retryTimeout=setTimeout(()=>{r.retryTimeout=null,this.requestSync(r)},n)}else(0,o.QI)(!1,"Received syncFail for unknown sync request"),this.handleAfterOptimisticUpdateResolved(e.transactionId);break;case"synced":let n=this.syncRequests.get(e.transactionId);n&&(n.successCallback(),(0,o.QI)(!n.retryTimeout,"Sync request completed successfully while having a retry scheduled. This should never happen."));break;case"viewSubscriptionFailed":this.emitter.emit({type:"ERROR",error:new i.rT(e.errorCode)}),this.session.cleanupFailedSubscribeView(e.liveViewKey)}}onConnectionOpen(){this.sendExistingSubscriptions()}requestSubscription(e,r,n,i){let a={messageType:"subscribe",viewName:e._name,viewHash:e._hash,loadType:n,args:r,traceId:i},o=this.getViewPriority(e,n);this.connection.isConnected()&&(this.connection.send(a),this.emitter.emit({type:"SUBSCRIBE_VIEW_SERVER",view:e,args:r,priority:o,traceId:i}))}requestPaginationChange(e,r){let n={messageType:"paginationChangeMessage",operationType:"LoadNext",queryId:e,count:r.count,paginationArgs:r};this.connection.isConnected()&&this.connection.send(n)}subscribeBase(e,r,n,i){let a=this.session.hasActiveSubscriptions(e._name,r),o=this.session.subscribe(e,r,n,i);return a||(this.emitter.emit({type:"SUBSCRIBE_VIEW_CLIENT",view:e,priority:this.getViewPriority(e,"initial_load"),args:r,traceId:i}),this.requestSubscription(e,r,"initial_load",i)),o}getUnsubscribeFunction(e){return()=>{e.clientUnsubscribed=!0,(0,o.VG)(()=>{e.unsubscribe(),!this.session.hasActiveSubscriptions(e.view._name,e.args)&&this.connection.isConnected()&&(this.connection.send({messageType:"unsubscribe",viewName:e.view._name,args:e.args}),this.emitter.emit({type:"UNSUBSCRIBE_VIEW_SERVER",view:e.view,args:e.args}))},2e3)}}getViewResult(e,r){return this.session.getViewResult(e,r)}viewHasStaticQueries(e){return!!this.viewRegistry.get(e._name)?.hasStaticQueries()}getViewPriority(e,r){return this.viewRegistry.get(e._name)?.getPriority(r)??i.$M}subscribe(e,r,n,i){let a=r;this.viewHasStaticQueries(e)&&!r.__requestId&&(a={...r,__requestId:(0,c.A)()});let o=this.subscribeBase(e,a,n,i);return this.getUnsubscribeFunction(o)}hasUnresolvedGlobalOptimisticUpdates(){return this.pendingGlobalOptimisticUpdates.size>0}handleBeforeOptimisticUpdateApplied(e){this.pendingGlobalOptimisticUpdates.add(e)}handleAfterOptimisticUpdateResolved(e){if(this.pendingGlobalOptimisticUpdates.delete(e),!this.hasUnresolvedGlobalOptimisticUpdates()){let e=this.globalOptimisticUpdateResolutionCallbacks;this.globalOptimisticUpdateResolutionCallbacks=[],this.emitter.emit({type:"MUTATIONS_BLOCKED_ON_OPTIMISTIC_UPDATE",count:e.length}),this.session.batchMutations(()=>{for(let r of e)r()}),this.pendingOptimisticMutationList=[],this.pendingMutationList=[]}}checkPotentiallyMissingMutations(e,r){if(this.clientOptions.checkPotentiallyMissingOptimisticMutations){if("create"===e||"update"===e)for(let[n,i]of Object.entries(r))for(let a in i){let o=i[a];if("create"===e&&!o.uuid)continue;let s=!1;for(let e of this.pendingMutationList)for(let[r,i]of Object.entries(e))if(n===r)for(let e of Object.values(i.instances))e.uuid&&o.uuid&&e.uuid===o.uuid?s=!0:e.id===a&&(s=!0);if(!s&&"update"===e){let e=o.uuid?this.session.stores[n]?.queries.instanceStatesByUuid.get(o.uuid):this.session.stores[n]?.queries.instanceStates.get(a);e&&(s=Object.keys(o).every(r=>JSON.stringify(o[r])===JSON.stringify(e.serverFields[r])))}this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:s,objectName:n,optimisticInstance:o,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}else if("delete"===e)for(let[n,i]of Object.entries(r))for(let a of Object.keys(i)){let i=!1;for(let e of this.pendingMutationList)for(let[r,o]of Object.entries(e))if(n===r)for(let e of Object.values(o.queries))"error"in e||!1!==e.results[a]||(i=!0);this.emitter.emit({type:"PENDING_MUTATION_EXISTENCE",exist:i,objectName:n,optimisticInstance:null,operationType:e,optimisticMutations:r,pendingServerMutations:this.pendingMutationList})}}}async applyMutations(e,r,n){let i;let a=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutations(a,e,n),d=new Set;for(let e of c)e instanceof m.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");this.handleBeforeOptimisticUpdateApplied(a);try{i=await r}catch(r){throw this.session.removeShadowMutations(a,e,!1),this.handleAfterOptimisticUpdateResolved(a),r}let u=!1;try{this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:a}),await this.sync(a,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:a,mutationType:n}),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.clientOptions.shouldChangeOptimisticMutationRevertOrder?this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutations(a,e,u)}):this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.session.removeShadowMutations(a,e,u)}),u&&"create"!==n&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>{this.checkPotentiallyMissingMutations(n,e)}),this.handleAfterOptimisticUpdateResolved(a)}return i}waitForServerSideObjectsWithUUIDs(e){let r=[];for(let[n,i]of Object.entries(e))for(let e of Object.keys(i))r.push(this.getIdFromUuid(n,e));return Promise.all(r)}async applyMutationsWithUUID(e,r,n){let i;let a=this.transactionId;this.transactionId++;let[s,l,c]=this.session.applyShadowMutationsWithUUID(a,e,n);this.handleBeforeOptimisticUpdateApplied(a);let d=new Set;for(let e of c)e instanceof m.Ay?d.add(e.context.viewKey):(0,o.QI)(!1,"Expected observer to be a ClientLiveViewQueryNode");try{i=await r}catch(r){throw this.session.removeShadowMutationsWithUUID(a,e,!1),this.handleAfterOptimisticUpdateResolved(a),r}let u=!1;try{"create"===n&&0===Object.keys(l).length?(this.emitter.emit({type:"WAIT_SERVER_OBJECTS_STARTED",mutations:e}),await this.waitForServerSideObjectsWithUUIDs(e),await (0,o.yy)(this.syncDelayForDebugging),this.emitter.emit({type:"WAIT_SERVER_OBJECTS_ENDED",mutations:e})):(this.emitter.emit({type:"OPTIMISTIC_MUTATION_CREATED",transactionId:a}),await this.sync(a,s,l,d),this.emitter.emit({type:"OPTIMISTIC_MUTATION_COMPLETED",transactionId:a,mutationType:"update"===n?"uuid_update":"delete"===n?"uuid_delete":"uuid_computed_create"})),u=!0}finally{this.pendingOptimisticMutationList.push(e),this.globalOptimisticUpdateResolutionCallbacks.unshift(()=>{this.session.removeShadowMutationsWithUUID(a,e,u)}),u&&this.globalOptimisticUpdateResolutionCallbacks.push(()=>this.checkPotentiallyMissingMutations(n,e)),this.handleAfterOptimisticUpdateResolved(a)}return i}getIdFromUuid(e,r){return this.session.getIdFromUuid(e,r)}requestSync(e){this.connection.isConnected()&&(this.connection.send(e.toPayload()),this.emitter.emit({type:"SYNC_STARTED",transactionId:e.transactionId,mutatedObjects:e.objectNameToQueryIds?[...e.objectNameToQueryIds.keys()]:[]}))}async sync(e=this.transactionId++,r,n,i){let[a,s]=(0,o.dS)(),l=new u.Q(e,s,r,n,i);this.syncRequests.set(e,l),this.requestSync(l),await a,this.syncDelayForDebugging&&await (0,o.yy)(this.syncDelayForDebugging),this.syncRequests.delete(e),this.emitter.emit({type:"SYNC_COMPLETED",transactionId:e})}emitEvent(e){this.emitter.emit(e)}get debug(){let e=this.session.getViewSubscriptionsForDebugging(),r={},n={};for(let[i,a]of Object.entries(e))"loading"===a.status&&(r[i]=a),"errors"===a.status&&(n[i]=a);return{subscriptions:e,loadingSubscriptions:r,failedSubscriptions:n,prettyPrintLiveViewTree:e=>this.session.prettyPrintLiveViewTree(e),setOptimisticUpdateResolutionDelay:e=>this.syncDelayForDebugging=e,setOptionalMissingForView:(e,r)=>this.setOptionalMissingForView(e,r),unsetOptionalMissingForView:e=>this.unsetOptionalMissingForView(e),...this.connection.debug}}}},786013:(e,r,n)=>{n.d(r,{Agb:()=>i.Agb,Go1:()=>i.Go1,N4S:()=>i.N4S,TOI:()=>i.TOI,W7o:()=>i.W7o,_YF:()=>i._YF,bUL:()=>i.bUL,y4I:()=>i.y4I,zRx:()=>i.zRx,zi5:()=>i.zi5});var i=n(948509)},156140:(e,r,n)=>{n.d(r,{C7:()=>o,Fh:()=>a,Jj:()=>w,KC:()=>T,OL:()=>_,QR:()=>l,Sh:()=>f,TO:()=>A,X5:()=>u,Xn:()=>h,_D:()=>i,aL:()=>s,bp:()=>p,gR:()=>v,lc:()=>d,nf:()=>m,nr:()=>g,rD:()=>c,w_:()=>C,yo:()=>S,zx:()=>I});var i=(e=>(e.IS_GUEST="ORG::IS_GUEST",e.IS_MEMBER="ORG::IS_MEMBER",e.IS_ADMIN="ORG::IS_ADMIN",e.CAN_SELF_UPGRADE="ORG::CAN_SELF_UPGRADE",e.CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED="ORG::CANNOT_JOIN_ORG_USER_EXTERNAL_CONTENT_RESTRICTED",e.CANNOT_JOIN_ORG_GUESTS_BANNED="ORG::CANNOT_JOIN_ORG_GUESTS_BANNED",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="ORG::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="ORG::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="ORG::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="ORG::CAN_USE_FIGMA_AI",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="ORG::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(i||{}),a=(e=>(e.CAN_VIEW="TEAM::CAN_VIEW",e.CAN_EDIT="TEAM::CAN_EDIT",e.CAN_ADMIN="TEAM::CAN_ADMIN",e.IS_OWNER="TEAM::IS_OWNER",e.EDIT_ROLE_ACCESS="TEAM::EDIT_ROLE_ACCESS",e.ADMIN_ROLE_ACCESS="TEAM::ADMIN_ROLE_ACCESS",e.CAN_DISCOVER="TEAM::CAN_DISCOVER",e.CAN_SELF_UPGRADE="TEAM::CAN_SELF_UPGRADE",e.CAN_VIEW_IN_ADMIN="TEAM::CAN_VIEW_IN_ADMIN",e.CAN_VIEW_LIMITED_INFO="TEAM::CAN_VIEW_LIMITED_INFO",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="TEAM::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="TEAM::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="TEAM::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_USE_FIGMA_AI="TEAM::CAN_USE_FIGMA_AI",e.HOST_PLAN_HAS_FIGMA_AI_ENABLED="TEAM::HOST_PLAN_HAS_FIGMA_AI_ENABLED",e))(a||{}),o=(e=>(e.CAN_VIEW="FOLDER::CAN_VIEW",e.CAN_EDIT="FOLDER::CAN_EDIT",e.IS_OWNER="FOLDER::IS_OWNER",e.CAN_DISCOVER="FOLDER::CAN_DISCOVER",e.CAN_CREATE_FIGJAM_FILE="FOLDER::CAN_CREATE_FIGJAM_FILE",e.CAN_CREATE_DESIGN_FILE="FOLDER::CAN_CREATE_DESIGN_FILE",e.CAN_CREATE_SLIDES_FILE="FOLDER::CAN_CREATE_SLIDES_FILE",e.CAN_MODIFY_ROLES="FOLDER::CAN_MODIFY_ROLES",e.CAN_MOVE="FOLDER::CAN_MOVE",e.CAN_TRANSFER_EXTERNALLY="FOLDER::CAN_TRANSFER_EXTERNALLY",e.CAN_TRASH="FOLDER::CAN_TRASH",e.CAN_RESTORE="FOLDER::CAN_RESTORE",e.CAN_PERMANENTLY_DELETE="FOLDER::CAN_PERMANENTLY_DELETE",e.SHOULD_USE_CONNECTED_PLAN_USER_DESIGN="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DESIGN",e.SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_FIGJAM",e.SHOULD_USE_CONNECTED_PLAN_USER_SLIDES="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_SLIDES",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FOLDER::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e.CAN_CONNECT="FOLDER::CAN_CONNECT",e.CAN_VIEW_LIMITED_INFO="FOLDER::CAN_VIEW_LIMITED_INFO",e))(o||{}),s=(e=>(e.CAN_VIEW_PROTOTYPE="REPO::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="REPO::CAN_VIEW",e.CAN_EDIT="REPO::CAN_EDIT",e.CAN_ADMIN="REPO::CAN_ADMIN",e.IS_OWNER="REPO::IS_OWNER",e.CAN_MANAGE="REPO::CAN_MANAGE",e.CAN_MOVE="REPO::CAN_MOVE",e.CAN_VIEW_LINK_ACCESS="REPO::CAN_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="REPO::CAN_EDIT_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="REPO::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_ORG_EDIT_LINK_ACCESS="REPO::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="REPO::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_DISCOVER="REPO::CAN_DISCOVER",e.SHOULD_USE_CONNECTED_PLAN_USER="REPO::SHOULD_USE_CONNECTED_PLAN_USER",e))(s||{}),l=(e=>(e.CAN_VIEW_PROTOTYPE="FILE::CAN_VIEW_PROTOTYPE",e.CAN_VIEW="FILE::CAN_VIEW",e.CAN_EDIT="FILE::CAN_EDIT",e.CAN_EDIT_CANVAS="FILE::CAN_EDIT_CANVAS",e.CAN_PUBLISH_TEMPLATE="FILE::CAN_PUBLISH_TEMPLATE",e.CAN_INSERT_TEMPLATE="FILE::CAN_INSERT_TEMPLATE",e.CAN_ADMIN="FILE::CAN_ADMIN",e.IS_OWNER="FILE::IS_OWNER",e.CAN_BECOME_EDITOR="FILE::CAN_BECOME_EDITOR",e.CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT="FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT",e.CAN_MANAGE="FILE::CAN_MANAGE",e.HAS_ROLE_ACCESS="FILE::HAS_ROLE_ACCESS",e.CAN_BE_MENTIONED_IN_COMMENT="FILE::CAN_BE_MENTIONED_IN_COMMENT",e.CAN_DOWNLOAD_FILE="FILE::CAN_DOWNLOAD_FILE",e.CAN_EXPORT="FILE::CAN_EXPORT",e.CAN_ACCESS_FILE_THROUGH_API="FILE::CAN_ACCESS_FILE_THROUGH_API",e.CAN_MODIFY_ROLES="FILE::CAN_MODIFY_ROLES",e.CAN_VIEW_METADATA="FILE::CAN_VIEW_METADATA",e.CAN_GAIN_VIEW="FILE::CAN_GAIN_VIEW",e.CAN_GAIN_VIEW_PROTOTYPE="FILE::CAN_GAIN_VIEW_PROTOTYPE",e.CAN_ACCESS_FRAGMENTS="FILE::CAN_ACCESS_FRAGMENTS",e.CAN_ACCESS_LIBRARY="FILE::CAN_ACCESS_LIBRARY",e.CAN_RENAME="FILE::CAN_RENAME",e.CAN_DELETE="FILE::CAN_DELETE",e.CAN_TRASH="FILE::CAN_TRASH",e.CAN_RESTORE="FILE::CAN_RESTORE",e.CAN_RESTORE_TO_OTHER_FOLDERS="FILE::CAN_RESTORE_TO_OTHER_FOLDERS",e.CAN_PERMANENTLY_DELETE="FILE::CAN_PERMANENTLY_DELETE",e.CAN_MOVE="FILE::CAN_MOVE",e.CAN_FAVORITE="FILE::CAN_FAVORITE",e.CAN_VIEW_AND_CREATE_COMMENTS="FILE::CAN_VIEW_AND_CREATE_COMMENTS",e.CAN_MOVE_COMMENTS="FILE::CAN_MOVE_COMMENTS",e.CAN_EDIT_IGNORE_PAID_STATUS="FILE::CAN_EDIT_IGNORE_PAID_STATUS",e.CAN_EDIT_IGNORE_EDU_GRACE_PERIOD="FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD",e.CAN_VIEW_LINK_ACCESS="FILE::CAN_VIEW_LINK_ACCESS",e.CAN_ORG_VIEW_LINK_ACCESS="FILE::CAN_ORG_VIEW_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS="FILE::CAN_EDIT_LINK_ACCESS",e.CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS="FILE::CAN_EDIT_LINK_ACCESS_IGNORE_PASSWORDS",e.CAN_ORG_EDIT_LINK_ACCESS="FILE::CAN_ORG_EDIT_LINK_ACCESS",e.CAN_VIEW_METADATA_LINK_ACCESS="FILE::CAN_VIEW_METADATA_LINK_ACCESS",e.CAN_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS="FILE::CAN_ORG_VIEW_PROTOTYPE_LINK_ACCESS",e.CAN_ACCESS_FULL_DEV_MODE="FILE::CAN_ACCESS_FULL_DEV_MODE",e.IS_ELIGIBLE_FOR_DEV_MODE_TRIAL="FILE::IS_ELIGIBLE_FOR_DEV_MODE_TRIAL",e.IS_IN_DEV_MODE_TRIAL="FILE::IS_IN_DEV_MODE_TRIAL",e.DEV_MODE_TRIAL_REQUEST_PENDING="FILE::DEV_MODE_TRIAL_REQUEST_PENDING",e.DEV_MODE_REQUEST_PENDING="FILE::DEV_MODE_REQUEST_PENDING",e.DEV_MODE_REQUEST_DENIED="FILE::DEV_MODE_REQUEST_DENIED",e.CAN_ACCESS_DEV_MODE_ENTRY_POINT="FILE::CAN_ACCESS_DEV_MODE_ENTRY_POINT",e.CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS="FILE::CAN_ACCESS_FULL_DEV_MODE_ORG_PLUS",e.CAN_ACCESS_FULL_CODE_CONNECT="FILE::CAN_ACCESS_FULL_CODE_CONNECT",e.CAN_USE_FIGMA_AI="FILE::CAN_USE_FIGMA_AI",e.CAN_USE_FIGJAM_AI="FILE::CAN_USE_FIGJAM_AI",e.CAN_USE_SLIDES_AI="FILE::CAN_USE_SLIDES_AI",e.CAN_USE_FRAGMENT_SEARCH_AI="FILE::CAN_USE_FRAGMENT_SEARCH_AI",e.CAN_USE_SLIDES_DESIGN_TOGGLE="FILE::CAN_USE_SLIDES_DESIGN_TOGGLE",e.CANNOT_PUBLISH_TO_COMMUNITY="FILE::CANNOT_PUBLISH_TO_COMMUNITY",e.CAN_SEND_WEBHOOK="FILE::CAN_SEND_WEBHOOK",e.IS_WORKSPACE_VISIBLE="FILE::IS_WORKSPACE_VISIBLE",e.CAN_PIN_TO_WORKSPACE="FILE::CAN_PIN_TO_WORKSPACE",e.CAN_VIEW_WORKSPACE_PIN="FILE::CAN_VIEW_WORKSPACE_PIN",e.SEAT_TYPE_PAID_STATUS_TEST_PERMISSION="FILE::SEAT_TYPE_PAID_STATUS_TEST_PERMISSION",e.MUST_UPGRADE_TO_SHARE_DRAFT="FILE::MUST_UPGRADE_TO_SHARE_DRAFT",e.MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT="FILE::MUST_REQUEST_ACCOUNT_UPGRADE_TO_EDIT",e.MUST_REQUEST_EDITOR_ROLE_TO_EDIT="FILE::MUST_REQUEST_EDITOR_ROLE_TO_EDIT",e.CAN_ACCESS="FILE::CAN_ACCESS",e.CAN_CREATE_BRANCH="FILE::CAN_CREATE_BRANCH",e.CAN_EDIT_OR_ACCESS_FULL_DEV_MODE="FILE::CAN_EDIT_OR_ACCESS_FULL_DEV_MODE",e.SHOULD_USE_CONNECTED_PLAN_USER="FILE::SHOULD_USE_CONNECTED_PLAN_USER",e.SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE="FILE::SHOULD_USE_CONNECTED_PLAN_USER_DEV_MODE",e))(l||{}),c=(e=>(e.CAN_VIEW="COLLECTION_PAGE::CAN_VIEW",e))(c||{}),d=(e=>(e.CAN_VIEW="HUB_FILE::CAN_VIEW",e.CAN_DUPLICATE="HUB_FILE::CAN_DUPLICATE",e.CAN_ADMIN_COMMENTS="HUB_FILE::CAN_ADMIN_COMMENTS",e))(d||{}),u=(e=>(e.CAN_VIEW="PLUGIN::CAN_VIEW",e.CAN_ADMIN_COMMENTS="PLUGIN::CAN_ADMIN_COMMENTS",e))(u||{}),m=(e=>(e.CAN_VIEW="LITMUS_PROJECT::CAN_VIEW",e))(m||{}),p=(e=>(e.CAN_VIEW="WORKSPACE::CAN_VIEW",e.CAN_ADMIN="WORKSPACE::CAN_ADMIN",e.CAN_CREATE_TEAM="WORKSPACE::CAN_CREATE_TEAM",e))(p||{}),h=(e=>(e.IS_GUEST="PLAN::IS_GUEST",e.IS_MEMBER="PLAN::IS_MEMBER",e.IS_ADMIN="PLAN::IS_ADMIN",e.CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER="PLAN::CAN_UPGRADE_AUTO_PATHWAY_DEVELOPER",e.CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR="PLAN::CAN_UPGRADE_AUTO_PATHWAY_COLLABORATOR",e.CAN_UPGRADE_AUTO_PATHWAY_EXPERT="PLAN::CAN_UPGRADE_AUTO_PATHWAY_EXPERT",e.CAN_UPGRADE_COLLABORATOR="PLAN::CAN_UPGRADE_COLLABORATOR",e.CAN_UPGRADE_DEVELOPER="PLAN::CAN_UPGRADE_DEVELOPER",e.CAN_UPGRADE_EXPERT="PLAN::CAN_UPGRADE_EXPERT",e))(h||{}),_=(e=>(e.TEAM="team",e.ORGANIZATION="organization",e))(_||{}),g=(e=>(e.CAN_ADMIN="PROFILE::CAN_ADMIN",e.CAN_SELL_RESOURCES_ON_COMMUNITY="PROFILE::CAN_SELL_RESOURCES_ON_COMMUNITY",e))(g||{}),f=(e=>(e.CAN_VIEW="RESOURCE::CAN_VIEW",e))(f||{});let E=["FILE::CAN_EDIT","FILE::CAN_MANAGE","FILE::CAN_EDIT_CANVAS","FILE::CAN_PUBLISH_TEMPLATE","FILE::CAN_RENAME","FILE::CAN_MOVE_COMMENTS","FILE::CAN_EDIT_IGNORE_PAID_STATUS","FILE::CAN_EDIT_IGNORE_EDU_GRACE_PERIOD","FILE::CAN_BECOME_EDITOR","FILE::CAN_CLICK_BUTTON_TO_UPGRADE_AND_EDIT"],y=[...E,"FILE::CAN_MODIFY_ROLES","FILE::CAN_DELETE"];[...E],[...y];var b=(e=>(e.Allow="ALLOW",e.Deny="DENY",e))(b||{});let v=100,I=300,T=900,S=999;var w=(e=>(e.ORG="ORG",e.HUB_FILE="HUB_FILE",e.TEAM="TEAM",e.FOLDER="FOLDER",e.FILE_REPO="FILE_REPO",e.FILE="FILE",e.PLUGIN="PLUGIN",e.WORKSPACE="WORKSPACE",e.PLAN="PLAN",e.COLLECTION_PAGE="COLLECTION_PAGE",e.LITMUS_PROJECT="LITMUS_PROJECT",e.PROFILE="PROFILE",e.RESOURCE="RESOURCE",e))(w||{}),A=(e=>(e.TEST_FLAG="test_flag",e.CAMPFIRE="campfire",e.CAMPFIRE_PERMISSIONS_SHUTOFF="campfire_permissions_shutoff",e.CAN_DISCOVER_PENDING_INVITE="can_discover_pending_invite",e.COMMUNITY_HUB_ADMIN="community_hub_admin",e.COMMUNITY_HUB_REVIEWER="community_hub_admin_reviewer",e.COMMUNITY_HUB_IMAGE_INSPECTION="community_hub_image_inspection",e.EXEMPT_GUESTS_FROM_MFA_REQUIREMENT="exempt_guests_from_mfa_requirement",e.EXT_PLUGIN_CAN_VIEW_PERMS_V2_REFACTOR="ext_plugin_can_view_perms_v2_refactor",e.FC_GENERAL="fc_general",e.FC_LIBRARY_SHARING_GROUPS="fc_library_sharing_groups",e.FILE_CANVAS_MENTION_CAN_ACCESS="file_canvas_mentions_can_access",e.COMMENT_MENTIONS_CAN_ACCESS="comment_mentions_can_access",e.PS_BENCHMARK="ps_benchmark",e.PS_TEAM_DRAFTS_DENY_POLICIES="ps_team_drafts_deny_policies",e.WSLP_READ_PUBLISH_SCOPE="wslp_read_publish_scope",e.SITES="sites",e.TOU_DENY_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_edits_for_restricted_drafts_folder",e.TOU_DENY_REPO_EDITS_RESTRICTED_DRAFTS="tou_pv2_deny_repo_edits_for_restricted_drafts",e.PERM_ENABLE_DEBUGGER_LOG_FOR_USER="perm_enable_debugger_log_for_user",e.PRO_TEMPLATES_FIGJAM="pro_templates_figjam",e.CAN_PUBLISH_COMMUNITY_SLIDE_TEMPLATE="can_publish_community_slide_template",e.ORG_FILE_EXPORT_SETTING="org_file_export_setting",e.STARTER_TEAM_EXEMPT_PAID_STATUS="starter_team_exempt_paid_status_permissions",e.CAN_USE_FIGMA_AI_USE_V2="can_use_figma_ai_use_v2",e.FC_CONNECTED_PLAN_USER_POLICY="fc_connected_plan_user_policy",e.FC_CONNECTED_PROJECT_INVITE="fc_connected_project_invite",e.COOPER="cooper",e.LG_STATSIG_FEATURES_FLAGS="iam_statsig_feature_flags_in_livegraph",e.SANCTIONED_TEAMS="sanctioned_teams",e.PIPER_PLUGS_IN_COMMUNITY_PUBLISH="piper_plugs_in_community_publish",e.LITMUS="dt_litmus",e.DS_STS_KIT="ds_sts_kit",e))(A||{}),C=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(C||{}),N=(e=>(e.IAM="iam",e.UNOWNED="unowned",e.WORKFLOW="workflow",e.SEARCH_CORE="search_core",e.COMMUNITY="community",e.DEVELOPER_TOOLS="developer_tools",e.SCALE="scale",e.EXTENSIBILITY="extensibility",e.BILLING="billing",e.MONETIZATION="monetization",e.SLIDES="slides",e.WAYFINDING="wayfinding",e.AI_INFRA="ai_infra",e.DS_ECOSYSTEMS="ds_ecosystems",e))(N||{})},948509:(e,r,n)=>{n.d(r,{Agb:()=>a.Ag,Go1:()=>a.Go,N4S:()=>o.N4S,TOI:()=>i.TO,W7o:()=>o.W7o,_YF:()=>a._Y,bUL:()=>a.bU,y4I:()=>a.y4,zRx:()=>o.zRx,zi5:()=>o.zi5}),n(918393),n(734122),n(781505),n(459980),n(522479),n(785925),n(376433),n(383496),n(248904),n(720592),n(609124),n(172835),n(297708),n(63505),n(904422);var i=n(156140);n(772285),n(442751),n(578103);var a=n(862241),o=n(776024);n(761390),{...i.Fh,...i.C7,...i.aL,...i.QR,...i._D,...i.lc,...i.nf,...i.X5,...i.bp,...i.Xn,...i.rD,...i.nr,...i.Sh}},44050:(e,r,n)=>{n.d(r,{u:()=>g});var i=n(411855),a=n(737947),o=n(966712),s=n(379078),l=n(888572),c=n(760640),d=n(2538),u=n(488983),m=n(776615),p=n(935757),h=n(754168),_=n(507708);function g(){(0,u.F$)("prototype-lib").then(()=>{async function e(e){if(window.androidProtoPreloadedTabStart=performance.now(),!(0,o.Ay)().user_data){a.Ay.replace(e.path,null),a.Ay.reload("preloaded tab not logged in");return}try{let{data:{meta:r}}=await h.S.getIncludeFolderTeamCanEdit({includeFolderTeamCanEdit:!0,fileKey:e.fileKey}),n=r.parent_org_id;(0,o.Hk)(r),console.log(`Opening file ${e.fileKey} in a preloaded tab at ${e.path} with org ${n}`),(0,o.Ay)().org_id=n,(0,p.Ri)(),window.startUserStateXHR(),a.Ay.replace(e.path,null),await (0,s.n)(f,()=>d.t)}catch(r){console.error("Reloading because of",r),a.Ay.replace(e.path,null),a.Ay.reload("preloaded tab error")}}window.androidProtoFsPreloaded=performance.now(),c.xK.start("androidProtoEditorPreloaded"),window.startPreloadedTab=e})}function f(){let e=(0,l.s)();return i.createElement(m.uW.Provider,{value:e},i.createElement(_.V,null))}},632376:(e,r,n)=>{n.d(r,{wZ:()=>d,xv:()=>s});var i=n(237870),a=n(121898);let o=a.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,714932)).then(e=>e.AutosaveLogOutModal),(0,i.Ij)("AutosaveLogOutModal")),s=(0,i.Ju)(o),l=a.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,714932)).then(e=>e.HasAutosaveChangesModal),(0,i.Ij)("HasAutosaveChangesModal"));(0,i.Ju)(l);let c=a.A.createLazyComponent(()=>n.e(5817).then(n.bind(n,275081)).then(e=>e.AutosaveLearnMoreModal),(0,i.Ij)("AutosaveLearnMoreModal")),d=(0,i.Ju)(c)},898211:(e,r,n)=>{n.d(r,{B7:()=>l.B,In:()=>s.I,dR:()=>d,lk:()=>m});var i=n(237870),a=n(711184),o=n(255850),s=n(252011),l=n(946612);let c=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6094),n.e(8964)]).then(n.bind(n,152495)).then(e=>e.UniversalUpgradeSequence),(0,i.Ij)("UniversalUpgradeSequence")),d=(0,i.Ju)(c,"UniversalUpgradeSequence"),u=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6094),n.e(8964)]).then(n.bind(n,271125)).then(e=>e.UpgradeContactSalesModal),(0,i.Ij)("UpgradeContactSalesModal")),m=(0,i.Ju)(u,"UpgradeContactSalesModal"),p=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6094),n.e(8964)]).then(n.bind(n,332088)).then(e=>e.OrgUpgradeMultiTeamModal),(0,i.Ij)("OrgUpgradeMultiTeamModal"));(0,i.Ju)(p,"OrgUpgradeMultiTeamModal");let h=a.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(6094),n.e(8964)]).then(n.bind(n,392201)).then(e=>e.OrgUpgradeSingleTeamModal),(0,i.Ij)("OrgUpgradeSingleTeamModal"));(0,i.Ju)(h,"OrgUpgradeSingleTeamModal"),(0,i.Ju)(o.Y)},648841:(e,r,n)=>{n.d(r,{_u:()=>_});var i=n(411855),a=n(629019),o=n.n(a);n(133537),n(966712);var s=n(946689),l=n(493323);n(355819);var c=n(163023),d=n(939863);n(67294),n(865618),n(6988);var u=n(820113);n(928491),n(665252);var m=n(516319),p=n(339290);function h(e){return i.createElement("div",{style:{height:e.height||12}})}function _(e){let r=new u.vr(e.currency);return i.createElement("div",{className:m.jg},i.createElement("div",{className:o()(m.M7,m.Et)},i.createElement("div",{className:m.cc},i.createElement(c.B,{svg:p.A,className:m.O2,useOriginalSrcFills_DEPRECATED:!0,autosize:!0,width:"32px",height:"32px"}),i.createElement("div",{className:m.W},(0,d.tx)("org_self_serve.confirmation_step.you_re_all_set"))),i.createElement("div",{className:m.Jo},i.createElement("div",{className:m.Qv},(0,d.tx)("org_self_serve.confirmation_step.order_confirmation_message")),i.createElement(h,{height:24}),i.createElement("div",{className:m.aK}),i.createElement(h,{height:24}),i.createElement("div",{className:m.N5},i.createElement("div",{className:m.I1},(0,d.tx)("org_self_serve.confirmation_step.total_amount_to_be_charged_to_card_ending_in_last4",{last4:e.orgPayment.last4}),i.createElement("span",{className:m.iv},r.formatMoney(e.totalCents,{showCents:!1}))),i.createElement(h,{height:24}),i.createElement("div",{className:m.aK}),i.createElement(h,{height:32}),i.createElement("div",{className:m.Ed},!e.orgMigrated&&i.createElement(i.Fragment,null,i.createElement(l.kt,null),i.createElement("div",{className:m.nm},(0,d.tx)("org_self_serve.confirmation_step.we_re_setting_up_your_organization"))),i.createElement(s.$$,{disabled:!e.orgMigrated,className:m.Xq,onClick:e.onFileBrowserClick,dataTestId:"go-to-file-browser-button"},(0,d.tx)("org_self_serve.confirmation_step.go_to_the_file_browser")))))))}},665252:(e,r,n)=>{n.d(r,{wW:()=>W,VE:()=>K});var i=n(411855),a=n(188507),o=n(966712),s=n(485727),l=n(103373),c=n(768137),d=n(799569),u=n(946689),m=n(355819),p=n(163023),h=n(154254),_=n(939863),g=n(501114),f=n(175290),E=n(865618),y=n(809840),b=n(237107),v=n(662275),I=n(801161),T=n(672517),S=n(988022),w=n(304769),A=n(864319),C=n(582410),N=n(720647),L=n(820113),O=n(498606),R=n(237870),P=n(928491),D=n(80332),k=n(585878),M=n(474742),F=n(828900);let x="org_self_serve_modals--modalContainer--T0ehh",U="org_self_serve_modals--modalWrapperSmall--MoMir org_self_serve_modals--modalWrapper--wPVCU",B="org_self_serve_modals--modalHeader--xK0Vj",V="org_self_serve_modals--modalText---cdj9";var G=n(265871);function H(e){return i.createElement("div",{style:{height:e.height||12}})}function K(e){return i.createElement(k.XV,{containerClassName:x,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},i.createElement("div",{className:U},i.createElement("div",{className:B},(0,_.tx)("org_self_serve.modals.invalid_email.figma_organization_only_allows_work_emails")),i.createElement("div",{className:V},(0,_.tx)("org_self_serve.modals.invalid_email.change_email_address_to_proceed")),i.createElement(H,{height:12}),i.createElement("a",{onClick:e.onFileBrowserClick},(0,_.tx)("org_self_serve.modals.invalid_email.go_to_the_file_browser"))))}function W(e){return i.createElement(k.XV,{containerClassName:x,headerSize:"hidden",isCloseHidden:!0,title:"",minWidth:349,maxWidth:349},i.createElement("div",{className:U},i.createElement("div",{className:B},(0,_.tx)("org_self_serve.modals.existing_org_admin.figma_organization_already_purchased")),i.createElement("div",{className:V},(0,_.tx)("org_self_serve.modals.existing_org_admin.if_you_need_another_organization",{contactSales:i.createElement("a",{onClick:e.onContactSales},(0,_.tx)("org_self_serve.modals.existing_org_admin.contact_sales"))})),i.createElement(H,{height:4}),i.createElement(H,{height:12}),i.createElement("a",{onClick:e.onFileBrowserClick},(0,_.tx)("org_self_serve.modals.existing_org_admin.go_to_the_file_browser"))))}(0,R.Ju)(function(e){let r=e.isProTeam?C.H5.exclude([N.PE]):C.H5,[n,a]=(0,i.useState)(r.dict(r=>e.seatDataByLicenseType[r]?.currentSeats||0)),[c,d]=(0,i.useState)(null),u=e=>{let r=n[e];void 0!==r&&r<99&&a({...n,[e]:r+1})},m=r=>{let i=e.seatDataByLicenseType[r],o=n[r];null!=i&&null!=o&&o>i.minSeats&&a({...n,[r]:o-1})},h=(e,r)=>{if(""===e.target.value){r(0);return}let n=parseInt(e.target.value);isNaN(n)||r(n)},g=new L.vr(e.currency),f=n[N.tL],E={[N.vu]:{headerString:(0,_.t)("all_carts.figma_design_editors.seat_rename"),totalSeatCount:n[N.vu],shouldShowDevModeIncludedText:!0},[N.tL]:{headerString:(0,_.t)("all_carts.figjam_editors.seat_rename"),totalSeatCount:f,shouldShowDevModeIncludedText:!1},[N.PE]:{headerString:(0,_.t)("all_carts.dev_mode_only_seats"),totalSeatCount:n[N.PE]??0,shouldShowDevModeIncludedText:!1}};return i.createElement(k.Eo,{onSubmit:()=>{let i=!1;if(r.forEach(r=>{let a=n[r],o=e.seatDataByLicenseType[r]?.minSeats||0;void 0!==a&&!1===i&&(a<o||a>99)&&(d(r),i=!0)}),i)return;let a=r.reduce((e,r)=>e+(n[r]||0),0);e.minTotalSeats&&a<e.minTotalSeats?d("total"):(e.dispatch(v.Ce()),e.updateAdditionalSeats(n))},confirmText:(0,_.t)("all_carts.save"),cancelText:(0,_.t)("all_carts.cancel"),title:(0,_.t)("all_carts.add_additional_editors.seat_rename")},i.createElement("div",{className:"org_self_serve_modals--bannerContainer--pW9ZX"},c&&i.createElement("div",{className:"org_self_serve_modals--errorBanner--QbvRM"},i.createElement(p.B,{className:"org_self_serve_modals--errorSvg--Lf9lD",svg:G.A}),i.createElement("div",{className:"org_self_serve_modals--errorBannerText--EV-xZ org_self_serve_modals--headerModalText--u9znR"},c===N.vu&&(0,_.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.vu].minSeats}),c===N.tL&&(0,_.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:e.seatDataByLicenseType[N.tL].minSeats}),c===N.PE&&(0,_.tx)("all_carts.you_need_a_minimum_n_dev_mode_seats",{minSeatsCount:e.seatDataByLicenseType[N.PE]?.minSeats||0}),"total"===c&&!!e.minTotalSeats&&((0,o.kc)().org_checkout_min_seat_info_copy?(0,_.tx)("all_carts.minimum_seats",{minTotalSeats:e.minTotalSeats,minDesignSeats:e.seatDataByLicenseType[N.vu].minSeats,seatsText:(0,_.tx)("checkout.seats_text",{numOfSeats:e.minTotalSeats}),designSeatsText:(0,_.tx)("checkout.seats_text",{numOfSeats:e.seatDataByLicenseType[N.vu].minSeats})}):(0,_.tx)("all_carts.you_need_a_minimum_n_editors.seat_rename",{minSeatsCount:e.minTotalSeats}))))),r.sort(C.AG).map(r=>{let o=E[r],c=e.seatDataByLicenseType[r],d=n[r];return void 0===o||void 0===c||void 0===d?i.createElement(i.Fragment,null):i.createElement("div",{key:r},i.createElement(H,{height:16}),i.createElement("div",{className:"org_self_serve_modals--headerModalBoldText--Fk6Q7 org_self_serve_modals--headerModalText--u9znR"},o.headerString),o.shouldShowDevModeIncludedText&&i.createElement(i.Fragment,null,i.createElement(H,{height:4}),i.createElement(s.G,null)),i.createElement(H,{height:12}),i.createElement(l.s,{"data-testid":r+"-seat_counter",billableProductKey:(0,A.Zx)(r),incrementSeats:()=>u(r),decrementSeats:()=>m(r),numSeats:d,minSeatsCount:c.minSeats,headerText:g.formatMoney(o.totalSeatCount*c.seatUnitCostInCents*(e.showAnnualPrice?12:1)),headerSubText:(0,b.mx)(e.showAnnualPrice,o.totalSeatCount,!0,c.seatUnitCostInCents,e.currency),updateAdditionalSeatsText:e=>h(e,e=>{a({...n,[r]:e})})}))}),i.createElement(H,{height:18}),i.createElement("div",{className:"org_self_serve_modals--divider--FjEW2"}))},"AdditionalEditorsModal");var $=(e=>(e[e.NONE=0]="NONE",e[e.DESIGN=1]="DESIGN",e[e.WHITEBOARD=2]="WHITEBOARD",e[e.TOTAL=3]="TOTAL",e))($||{});function Y({userData:e,checkboxHandler:r}){let[n,o]=(0,i.useState)(0),s=(0,a.wA)(),l=({rect:e,designChecked:i,...a})=>{if(r(a),a.newVal&&n<3){o(e=>e+1);let r=i?(0,_.t)("checkout.switch_seat_from_design_to_devmode"):(0,_.t)("checkout.enabled_devmode");s(I.eB({target:{kind:O.Ui.TEXT,text:r},targetRect:{top:e.top,right:e.right+8,bottom:e.bottom,left:e.left+8,width:e.width,height:e.height},textAlign:"left",position:O.Zj.RIGHT,hideAfterDelay:1e3}))}};return i.createElement(i.Fragment,null,e.map((n,a)=>i.createElement("div",{"data-testid":"user-data-row",key:n.user.id},i.createElement(z,{rowType:"data"},i.createElement(P.az,{entity:n.user,includeUserEmailAddress:!0,size:24}),i.createElement(Z,{userInfo:n}),i.createElement(E.S,{checked:n.designEditor,onChange:e=>{r({userId:n.user.id,type:"designEditor",newVal:e.currentTarget.checked})}}),i.createElement(u.tB,{checked:n.devMode,className:"org_self_serve_modals--devModeCheckbox--nDoay",onChange:e=>{l({designChecked:n.designEditor,userId:n.user.id,type:"devMode",newVal:e.currentTarget.checked,rect:e.currentTarget.getBoundingClientRect()})}}),i.createElement(u.tB,{checked:n.figjamEditor,className:"org_self_serve_modals--figjamCheckbox--Cv6Bs",onChange:e=>{r({userId:n.user.id,type:"figjamEditor",newVal:e.currentTarget.checked})}})),a!==e.length-1&&i.createElement(j,null))))}function z({rowType:e,children:r}){let n="footer"===e?["55%","15%","15%","15%"]:["35%","20%","15%","15%","15%"];return i.createElement(f.Y,{dataTestId:"seat-table-row",verticalAlignItems:"center",horizontalAlignItems:"start",padding:{top:"data"===e?14:16,right:16,bottom:"data"===e?14:16,left:16},backgroundColor:"header"===e?"hover":"default",spacing:0},r.map((e,r)=>i.createElement(f.Y,{key:r,width:n[r],horizontalAlignItems:"start",verticalAlignItems:"center",padding:{right:16}},e)))}function j(){return i.createElement("div",{className:h.cx.wFull.colorBgTertiary.h1.$})}function q({teamId:e}){return i.createElement("div",{className:h.cx.w8.h8.bRadius2.minW8.$,style:g.sx.add({backgroundColor:(0,D.$L)(e,D.us)}).$})}function Z({userInfo:e}){return e.teams.length>1?i.createElement("div",{"data-tooltip-show-immediately":!0,"data-tooltip-type":O.Ib.SPECIAL,"data-tooltip":F.l,"data-tooltip-team-names":e.teams.map(e=>e.name).join(","),"data-tooltip-team-ids":e.teams.map(e=>e.id).join(","),"data-tooltip-show-right":!0,"data-tooltip-light-mode":!0},i.createElement(y.E,{color:"default"},(0,_.tx)("all_carts.editor_table.multiple_teams"))):i.createElement(f.Y,{spacing:8,verticalAlignItems:"center",horizontalAlignItems:"start"},i.createElement(q,{teamId:e.teamIds[0]}),i.createElement("div",{className:h.cx.noWrap.ellipsis.overflowHidden.$},i.createElement(y.E,{color:"default"},e.teams[0]?.name)))}(0,R.Ju)(function({users:e,updateSelectedEditors:r,updateAdditionalEmptySeats:n,currency:a,minTotalSeats:o,dispatch:s,seatInfo:p,monthlyPriceByProduct:h}){let[g,E]=(0,i.useState)(e),[b,I]=(0,i.useState)({design:p.design.additionalSeatCount,figjam:p.figjam.additionalSeatCount,dev_mode:p.dev_mode.additionalSeatCount}),A=(0,i.useMemo)(()=>{let e=0,r=0,n=0;for(let i of Object.values(g))i.designEditor&&e++,i.devMode&&n++,i.figjamEditor&&r++;return(e+=b.design,n+=b.dev_mode,r+=b.figjam,o&&e+r+n<o)?3:e<p.design.minCount||e>99?1:r<p.figjam.minCount||r>99?2:0},[b,g,o,p]),C=e=>{b[e]>=99||I(r=>({...r,[e]:r[e]+1}))},O=e=>{b[e]<=0||I(r=>({...r,[e]:r[e]-1}))},R=(e,r)=>{let n=""===e.target.value?0:parseInt(e.target.value);isNaN(n)||I(e=>({...e,[r]:n}))},P=new L.vr(a),D=()=>{s(v.Ce())};return i.createElement(T.fu,{name:"Select Editors Modal"},i.createElement(M.Nb,{size:864,maxHeight:672,hide:()=>s(v.Ce()),className:"org_self_serve_modals--selectEditorsModal--Hxi5q"},i.createElement("div",{className:"org_self_serve_modals--selectEditorModalHeader--wsqXY org_self_serve_modals--headerModalText--u9znR"},(0,_.tx)("checkout.add_or_remove_editors"),i.createElement(d.s_,{customStyle:{position:"initial"},dispatch:s,onClose:D})),i.createElement(j,null),i.createElement(z,{rowType:"header"},i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("all_carts.editor_table.Name")),i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("all_carts.editor_table.Teams")),i.createElement(f.Y,{direction:"vertical",spacing:0,horizontalAlignItems:"start",verticalAlignItems:"center"},i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("general.figma_design")),i.createElement("div",null,i.createElement(y.E,{color:"handoff",fontWeight:"medium"},(0,_.tx)("general.dev_mode")),"\xa0",i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("checkout.dev_mode_included_text_formatted.included")))),i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("general.dev_mode")),i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("general.figjam"))),i.createElement(j,null),i.createElement(m.P,{maxHeight:426},i.createElement(Y,{userData:Object.values(g),checkboxHandler:({userId:e,type:r,newVal:n})=>{let i={...g[e],[r]:n};"devMode"===r&&n&&(i.designEditor=!1),"designEditor"===r&&n&&(i.devMode=!1),E(r=>({...r,[e]:i})),(0,S.Cu)({name:"org_checkout_select_editors_checkbox",licenseType:r,checked:n})}})),i.createElement(j,null),i.createElement(z,{rowType:"footer"},i.createElement(f.Y,{spacing:0,direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center"},i.createElement(y.E,{color:"default",fontWeight:"medium"},(0,_.tx)("all_carts.add_additional_editors.seat_rename")),i.createElement(y.E,{fontWeight:"regular",color:"secondary"},(0,_.tx)("all_carts.add_additional_editors_description.seat_rename"))),i.createElement(l.s,{billableProductKey:w.ud.DESIGN,incrementSeats:()=>C(N.G_.DESIGN),decrementSeats:()=>O(N.G_.DESIGN),numSeats:b.design,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>R(e,N.G_.DESIGN)}),i.createElement(l.s,{billableProductKey:w.ud.DEV_MODE,incrementSeats:()=>C(N.G_.DEV_MODE),decrementSeats:()=>O(N.G_.DEV_MODE),numSeats:b.dev_mode,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>R(e,N.G_.DEV_MODE)}),i.createElement(l.s,{billableProductKey:w.ud.FIGJAM,incrementSeats:()=>C(N.G_.FIGJAM),decrementSeats:()=>O(N.G_.FIGJAM),numSeats:b.figjam,minSeatsCount:0,headerText:"",headerSubText:"",updateAdditionalSeatsText:e=>R(e,N.G_.FIGJAM)})),i.createElement("div",{className:"org_self_serve_modals--selectEditorModalActions--SUzT9 org_self_serve_modals--selectEditorModalFooter--1hQ0p"},0!==A?(()=>{switch(A){case 0:default:return;case 1:return i.createElement(y.E,{color:"danger"},(0,_.tx)("all_carts.you_need_a_minimum_n_design_editors.seat_rename",{minSeatsCount:p.design.minCount}));case 2:return i.createElement(y.E,{color:"danger"},(0,_.tx)("all_carts.you_need_a_minimum_n_whiteboard_editors.seat_rename",{minSeatsCount:p.figjam.minCount}));case 3:return i.createElement(y.E,{color:"danger"},(0,_.tx)("org_self_serve.purchase_summary.the_organization_plan_requires_at_least_count_editor_seats.seat_rename",{minCount:o}))}})():i.createElement(y.E,{fontWeight:"regular",color:"secondary"},(0,_.tx)("all_carts.new_total",{total:P.formatMoney(function(e,r,n){let i=r.design,a=r.figjam,o=r.dev_mode;for(let r in e)e[r].designEditor?i++:e[r].devMode&&o++,e[r].figjamEditor&&a++;return i*n[w.ud.DESIGN]*12+a*n[w.ud.FIGJAM]*12+o*n[w.ud.DEV_MODE]*12}(g,b,h),{showCents:!0})})),i.createElement("div",{className:"org_self_serve_modals--buttonGroup--sI5ub"},i.createElement(c.nR,{onClick:D},(0,_.t)("general.cancel")),i.createElement(u.$$,{onClick:()=>{0===A&&(n(b),r(g),s(v.Ce()))},disabled:0!==A},(0,_.t)("checkout.update_seats"))))))},"SelectEditorsModal")},237107:(e,r,n)=>{n.d(r,{Um:()=>u,mx:()=>l});var i=n(411855);n(188507),n(629019),n(281381),n(485727);var a=n(946689),o=n(939863);n(101505),n(176824),n(99506);var s=n(820113);function l(e,r,n,i,a){let l=new s.vr(a).formatMoney(i,{showCents:!n}),c=(0,o.t)("all_carts.num_editors.seat_rename",{numEditors:r}),d=(0,o.t)("all_carts.plural_months",{months:e?12:1});return(0,o.t)("all_carts.cost_equation",{money:l,editors:c,billingTime:d})}function c({isAnnual:e,numEditors:r,noCents:n,unitCost:i,monthlyUnitCostForStrikethrough:a,currency:o}){let s=new LocalizeCurrency(o),l=s.formatMoney(i,{showCents:!n}),c=t("all_carts.num_editors.seat_rename",{numEditors:r}),d=t("all_carts.plural_months",{months:e?12:1});return"number"==typeof a&&e?tx("all_carts.cost_equation_strikethrough_unit_price",{strikethroughUnitPrice:React.createElement("span",{className:styles.strikethrough},s.formatMoney(a,{showCents:!n})),money:l,editors:c,billingTime:d}):tx("all_carts.cost_equation",{money:l,editors:c,billingTime:d})}function d({currentBillingPeriod:e,numEditors:r,noCents:n,shouldStrikethroughMonthlyUnitCostIfAnnual:i,currency:a}){let{getWhiteboardUnitCost:o}=useTeamUpgradeBillingPrices({currency:a});return React.createElement(c,{isAnnual:e===BillingPeriod.ANNUAL,numEditors:r,unitCost:o(e),noCents:n,currency:a,monthlyUnitCostForStrikethrough:i?o(BillingPeriod.MONTHLY):void 0})}n(622139),n(486184);function u(){return(0,o.tx)("pro_cart.review.agree_with_privacy_and_cancellation",{termsOfServiceLink:i.createElement(m,null),privacyLink:i.createElement(p,null),cancellationLink:i.createElement(h,null)})}function m(){return i.createElement(a.Us,{href:"/tos",target:"_blank",trusted:!0},(0,o.tx)("pro_cart.review.tos"))}function p(){return i.createElement(a.Us,{href:"/privacy",target:"_blank",trusted:!0},(0,o.tx)("pro_cart.review.privacy_policy"))}function h(){return i.createElement(a.Us,{href:"/pricing-faq/#how-do-i-cancel-my-paid-plan",target:"_blank",trusted:!0},(0,o.tx)("pro_cart.review.cancellation_policy"))}},929101:(e,r,n)=>{n.d(r,{Px:()=>g,jB:()=>E,yH:()=>_,zS:()=>f});var i=n(411855),a=n(716034),o=n(915440),s=n(939863),l=n(845263),c=n(720647),d=n(99506),u=n(279453),m=n(466816),p=n(606678);let h={[d.G_.DESIGN]:1,[d.G_.WHITEBOARD]:2,[d.G_.SLIDES]:3,[d.G_.DEV_MODE]:4},_=(0,a.eU)([]);function g(e){let{destinationPlan:r,requiresManualUpgrade:n,upgradeRequested:i}=e;return!!r&&r.type===d.OL.ORG&&!!n&&!!i}function f(e){let{destinationPlan:r,requiresManualUpgrade:n,upgradeRequested:i}=e;if(r&&r.type===d.OL.ORG&&n)return i?(0,s.t)("upgrades.request_sent"):(0,s.t)("upgrades.request")}function E({files:e,repos:r,destinationFolderId:n,isDestinationDrafts:a}){let s=(0,l.RR)(),{hasPendingRequest:_,getUpgradePathway:g,getUpgradeEligibility:f,getPlanAndPlanUser:E}=(0,p.wH)({folderId:n,isDraftsMove:!0}),y=function(e,r){let n=e.filter(e=>null!=e).map(e=>({projectId:e})),a=(0,o.p)(u.NI1,n,{enabled:r});return(0,i.useMemo)(()=>a.reduce((e,r)=>(r.args.projectId&&e.set(r.args.projectId,r?.result?.data?.project?.path??null),e),new Map),[a])}([...new Set([...e,...r].map(e=>e.folder_id).filter(e=>null!==e))],s);return function({files:e,repos:r,isDestinationDrafts:n,isBillingRemodelEnabled:i,originFolderIdToPath:a,hasPendingRequest:o,getUpgradePathway:s,getUpgradeEligibility:l,getPlanAndPlanUser:u}){let p={requiresUpgrade:!1,requiresManualUpgrade:!1,upgradeRequested:!1};if(!i||n)return p;let _=function(e,r,n){let i=e=>""===n.get(String(e.folder_id)),a=e.filter(i).map(e=>(0,c.wR)(e.editor_type));return r.filter(i).length>0&&a.push(d.G_.DESIGN),a.reduce((e,r)=>null===e||h[r]<h[e]?r:e,null)}(e,r,a);if(!_||l(_)===m.q.UPGRADE_NOT_NEEDED)return p;let{plan:g,planUser:f}=u(_)||{},E=s(_)!==m.J.AUTO_PATHWAY;return{requiresUpgrade:!0,requiresManualUpgrade:E,upgradeRequested:E&&l(_)===m.q.CANNOT_UPGRADE&&o(_),destinationPlan:g,destinationPlanUser:f,licenseType:_}}({files:e,repos:r,isDestinationDrafts:a,isBillingRemodelEnabled:s,originFolderIdToPath:y,hasPendingRequest:_,getUpgradePathway:g,getUpgradeEligibility:f,getPlanAndPlanUser:E})}},709217:(e,r,n)=>{n.d(r,{$s:()=>a,AN:()=>o,BW:()=>P,Be:()=>E,CM:()=>h,GN:()=>D,Gr:()=>O,HB:()=>y,I9:()=>u,ID:()=>m,IG:()=>i,Ie:()=>k,JC:()=>S,Mn:()=>p,Rj:()=>C,Rp:()=>T,Rx:()=>s,SI:()=>_,Xt:()=>d,YL:()=>N,_T:()=>R,a$:()=>l,ft:()=>c,hH:()=>A,j2:()=>w,kj:()=>g,lO:()=>L,tI:()=>I,xN:()=>v,y2:()=>f,yo:()=>b}),n(318735).r3;let i=n(318735).IG;n(318735).ir;let a=n(318735).$s,o=n(318735).AN,s=n(318735).Rx,l=n(318735).a$,c=n(318735).ft,d=n(318735).Xt,u=n(318735).I9,m=n(318735).ID,p=n(318735).Mn,h=n(318735).CM,_=n(318735).SI,g=n(318735).kj;n(318735).s7,n(318735).HT,n(318735).Tm,n(318735).to,n(318735).c;let f=n(318735).y2,E=n(318735).Be,y=n(318735).HB,b=n(318735).yo,v=n(318735).xN;n(318735).qp,n(318735).JT,n(318735).PP,n(318735).Q9,n(318735).ku,n(318735).ii,n(318735).Pf,n(318735).nf,n(318735).V5;let I=n(318735).tI;n(318735).mb,n(318735).Qi,n(318735).SR,n(318735).BO;let T=n(318735).Rp,S=n(318735).JC,w=n(318735).j2,A=n(318735).A4,C=n(318735).Rj,N=n(318735).YL,L=n(318735).lO,O=n(318735).Gr,R=n(318735)._T,P=n(318735).BW,D=n(318735).GN,k=n(318735).Ie},411045:(e,r,n)=>{n.d(r,{RR:()=>i,nB:()=>a});let i=n(845263).RR,a=n(845263).nB;n(845263).xy,n(845263).Vx,n(845263).jl,n(845263).Ul,n(845263).Gu,n(845263).XT},303345:(e,r,n)=>{n.d(r,{C1:()=>o,HG:()=>u,QX:()=>a,VB:()=>d,Y9:()=>l,dF:()=>m,fm:()=>c,iO:()=>i,wH:()=>s}),n(459279),n(466816),n(529924).b_,n(529924).Ji,n(529924).sH;let i=n(529924).iO,a=n(663111).QX,o=n(606678).C1,s=n(606678).wH,l=n(606678).Y9,c=n(606678).fm;n(606678).Cf,n(673886).S,n(673886).d,n(53258).Up;let d=n(566301).VB,u=n(53258).HG;n(700141).rK,n(735251).E;let m=n(333820).d;n(529924).TF,n(529924).iA,n(529924).PS,n(529924).IM},320108:(e,r,n)=>{n.d(r,{PlanComparisonModal:()=>i}),n(669431).Js,n(669431).mC,n(669431).yG,n(374626).T,n(280776).Uq,n(786483).X,n(920173).z,n(294161).j,n(261882).x,n(106352).i;let i=n(974453).w;n(974453).P,n(980681).q,n(381252).GJ,n(457140).j,n(669431).XQ},404090:(e,r,n)=>{n.d(r,{Y:()=>a});var i=n(716034);let a=(0,i.eU)({});(0,i.eU)({})},396147:(e,r,n)=>{n.d(r,{Bk:()=>C,L8:()=>g,Lv:()=>E,MI:()=>y,OL:()=>_,V7:()=>v,Xv:()=>T,ZY:()=>O,Zm:()=>N,k_:()=>f,ps:()=>b,r1:()=>I,uH:()=>S,wF:()=>A,z7:()=>L});var i=n(411855),a=n(140593);n(966712);var o=n(915440),s=n(711525),l=n(647899),c=n(493323),d=n(154254),u=n(939863);n(175290),n(896474);var m=n(720647),p=n(99506),h=n(279453);let _="UPGRADE_REQUESTS_BILLING_GROUP_DROPDOWN",g="UPGRADE_REQUESTS_USER_TYPE_DROPDOWN",f="request",E="\u2013",y=50;var b=(e=>(e.TEAM="Team",e.ORG="Org",e))(b||{}),v=(e=>(e.ALL_UNASSIGNED_REQUESTS="all_unassigned_requests",e.ALL_MANAGED_REQUESTS="all_managed_requests",e.ALL_ORG_REQUESTS="all_org_requests",e.INDIVIDUAL_BILLING_GROUP_REQUESTS="individual_billing_group_requests",e))(v||{}),I=(e=>(e.MEMBERS="members",e.GUESTS="guests",e))(I||{}),T=(e=>(e.APPROVE_ALL="APPROVE_ALL",e.BULK_SELECT="BULK_SELECT",e.SINGLE="SINGLE",e.EMAIL="EMAIL",e.DEEPLINK="DEEPLINK",e))(T||{});let S="admin_requests_dashboard";var w=(e=>(e.NEWEST_FIRST="NEWEST_FIRST",e.OLDEST_FIRST="OLDEST_FIRST",e))(w||{});function A(e){switch(e){case p.G_.DESIGN:return m.oM.DESIGN;case p.G_.WHITEBOARD:return m.oM.WHITEBOARD;case p.G_.DEV_MODE:return m.oM.DEV_MODE;case p.G_.SLIDES:return m.oM.SLIDES;default:(0,a.xb)(e)}}function C(e){return e.trim().slice(0,y)}function N({text:e,showSpinner:r}){return i.createElement("div",{className:d.cx.flex.itemsCenter.justifyCenter.$},i.createElement("span",{className:r?d.cx.invisible.$:""},e),r&&i.createElement(c.kt,{className:d.cx.absolute.$,shouldMatchTextColor:!0,size:"small"}))}function L({planType:e,planId:r,filterParams:n,processedRequestIds:a}){let l=(0,o.Rs)(h.FuG,{planType:e,planId:r,filterParams:n});return(0,i.useMemo)(()=>{let e="loaded"===l.status&&l.data?.adminDashboardRequestIds?.status===s.tT.Loaded?l.data?.adminDashboardRequestIds?.data?.map(e=>e.id)??[]:null;return null!==e?e.filter(e=>!a.has(e)):null},[l,a])}function O({isIntendedAudience:e}){let r=(0,l.I7)("exp_billing_group_admin_request_dash");return void 0!==e&&e&&r.getConfig().get("enabled",!1)}m.Te.DESIGN,m.Te.WHITEBOARD,m.Te.DEV_MODE,()=>(0,u.t)("admin_dashboard.requests.devmode_seat")},829147:(e,r,n)=>{n.d(r,{lJ:()=>l});var i=n(411855);n(188507),n(133537),n(966712),n(96328),n(281381);var a=n(163023);n(939863),n(720647),n(99506),n(606137);var o=n(498606);n(303159),n(467703);var s=n(750933);function l(e){return i.createElement("div",{className:s.cG,"data-testid":"locked-cell"},e.label,i.createElement(a.B,{className:s.hz,svg:e.icon,"data-tooltip-type":o.Ib.TEXT,"data-tooltip":e.tooltipText,"data-tooltip-show-below":!0,"data-tooltip-timeout-delay":50,"data-tooltip-max-width":220}))}},151109:(e,r,n)=>{n.d(r,{BZ:()=>a,OW:()=>s,xo:()=>o});var i=n(155367);i.J7.DASHBOARD,i.J7.WORKSPACES,i.J7.TEAMS,i.J7.MEMBERS,i.J7.ACTIVITY,i.J7.BILLING,i.J7.RESOURCES,i.J7.SETTINGS,i.J7.CONTENT;let a={[i.SN.ABANDONED_DRAFTS]:"org_admin_unassigned_drafts_onboarding_key",[i.SN.TEAMS]:"org_admin_settings_teams_tab_onboarding_key",[i.SN.WORKSPACES]:"",[i._d.APPROVED_PLUGINS]:"",[i._d.APPROVED_WIDGETS]:"",[i._d.LIBRARIES]:"",[i._d.SHARED_FONTS]:"",[i.G_.OVERVIEW]:"",[i.G_.INVOICES]:"",[i.G_.BILLING_GROUPS]:"org_admin_settings_billing_groups_secondary_tab_onboarding_key",[i.SN.CONNECTED_PROJECTS]:"org_admin_connected_projects_tab_onboarding_key",[i.P9.SEAT_REQUESTS]:""},o="admin_request_dashboard_onboarding_key",s="org_admin_request_dashboard_onboarding_key"},314247:(e,r,n)=>{n.d(r,{nj:()=>i});let i="admin_view_resource_tab"},785750:(e,r,n)=>{n.d(r,{Ki:()=>T,f9:()=>A});var i=n(411855),a=n(786013);n(358145);var o=n(966712),s=n(915440),l=n(711525),c=n(586459),d=n(179940),u=n(837378),m=n(694687),p=n(99506),h=n(279453),_=n(463592),g=n(916525),f=n(833030),E=n(851363),y=n(231959),b=n(791435),v=n(553405);let I=new _.Ef([],{threshold:.1,matchAllTokens:!0,tokenize:!1,distance:300,keys:[{name:"name",weight:1},{name:"owner.handle",weight:1},{name:"owner.email",weight:1}]});function T({searchQuery:e,filters:r,sortConfig:n,enabled:a=!0,membersMap:o,firstPageSize:d,isEndUserSurface:p=!1,orgId:_}){let{optimisticIds:g,addOptimisticIds:f,setServerData:E}=(0,u.K)(),{subscription:y,status:v}=function({searchQuery:e,filters:r,sortConfig:n,enabled:i=!0,firstPageSize:a,extraTeamIds:o=[],isEndUserSurface:l=!1,orgId:d}){let u=(0,m.dq)(),p=(0,s.Rs)(h.jl4,{orgId:d??u,firstPageSize:a||25,queryParams:A(e,r,n,l),extraTeamIds:o},{enabled:i}),_=c.r.LOADING;return"loaded"===p.status?_=c.r.SUCCESS:"errors"===p.status&&(_=c.r.FAILURE),{subscription:p,status:_}}({searchQuery:e,filters:r,sortConfig:n,enabled:a,firstPageSize:d,extraTeamIds:g,isEndUserSurface:p,orgId:_}),T=v===c.r.SUCCESS&&!y.data?.orgTeams?.isLoadingNextPage,C=T&&y.data?.orgTeams&&y.data.orgTeams.hasNextPage()?()=>{y.data.orgTeams.loadNext(d||25)}:void 0;i.useEffect(()=>{v===c.r.SUCCESS&&E((y.data?.orgTeams||[]).filter(e=>!!e.teamId).map(e=>({id:e.teamId})))},[v,y.data,E]);let N=i.useMemo(()=>{var e,n,i;return y.data?(e=y.data,n=o,i=r,(e.orgTeams||[]).filter(e=>!!e.team).map(e=>w(e.team,n,e.memberCount?Number(e.memberCount):null)).filter(e=>S(e,i))):[]},[y.data,o,r]),L=i.useMemo(()=>y.data?function(e,r,n,i){let a=(0,l.oA)(e.org),o=(a&&a.teamsByIdInAdmin.status===l.tT.Loaded?((0,l.oA)(a.teamsByIdInAdmin)||[]).map(e=>e.team):l.oA(e.org)?.teamsById||[]).map(e=>w(e,r)).filter(e=>S(e,n));return i?(I.set(o),I.search(i)):o}(y.data,o,r,e):[],[y.data,o,r,e]),{trackPerformanceEvent:O}=(0,b.S)("teams_table_fetch_performance","livegraph");return(0,i.useEffect)(()=>{O("fetch_end")},[O,N.length]),(0,i.useEffect)(()=>{v===c.r.FAILURE&&O("fetch_error")},[O,v]),(0,i.useEffect)(()=>{O("fetch_start")},[O]),{status:v,teams:N,optimisticTeams:L,fetchMore:C,allTeamsFetched:T&&!C,addOptimisticIds:f}}function S(e,r){let n=(0,o.kc)().teams_table_disable_fe_filters;return!(!n&&r?.orphanedTeamFilter&&e.owner||!n&&r?.teamMembershipFilter&&r.teamMembershipFilter!==e.userTeamMembership||!n&&r?.orgAccessFilter&&r.orgAccessFilter!==e.org_access||!n&&r?.discoverabilityFilter&&(r.discoverabilityFilter===E.Fb.ORG_BROWSABLE&&e.org_access!==a.bUL.PRIVATE||r.discoverabilityFilter===E.Fb.HIDDEN&&e.org_access!==a.bUL.SECRET)||r?.workspaceFilter&&(r.workspaceFilter===y.O&&null!==e.workspace_id||r.workspaceFilter!==y.O&&r.workspaceFilter!==e.workspace_id))}function w(e,r,n){let i=r[e.id]??0,a=l.oA(e.ownerRole)?.user??null;return{...e,id:e.id,created_at:e.createdAt?.toISOString(),img_url:e.imgUrl||void 0,org_id:e.orgId,name:e.name,description:e.description||"",hidden:e.hidden,org_browsable:e.orgBrowsable,license_group_id:e.licenseGroupId,workspace_id:e.workspaceId,org_access:e.orgAccess||null,projects:Number(e.projectsCount)||0,editors:Number(e.editorsCount)||0,restrictions_list:e.restrictionsList||null,subscription:e.subscription||null,subscription_raw:e._subscriptionRaw||null,stripe_customer_id:e.stripeCustomerId||null,student_team_at:e.studentTeamAt?.toISOString()||null,student_team_state:e.studentTeamState||p.kU.STUDENT_TEAM_NULL,student_autoverifying_team_at:e.studentAutoverifyingTeamAt?.toISOString()||null,student_team:!!e.studentTeamAt,pro_team:!1,org_team:!0,starter_team:e.isStarterTeam||!1,grace_period_end:e.gracePeriodEnd?.toISOString()||null,grace_period_type:e.gracePeriodType||null,last_upgraded_at:null,deleted_at:e.deletedAt?.toISOString()||null,license_group:null,default_permission:e.defaultPermission,vat_gst_id:e.vatGstId||void 0,tax_id_verification_status:e.taxIdVerificationStatus||void 0,ai_features_disabled:!!e.aiFeaturesDisabledAt,legal_name:e.legalName||null,sharing_audience_control:e.sharingAudienceControlComputed||void 0,orphaned:!a,member_count:"number"==typeof n?Math.max(n+i,0):void 0,owner:a&&{id:a.id,name:a.name||void 0,handle:a.handle||"",img_url:a.imgUrl||"",email:a.email||void 0,description:a.description,org_id:e.orgId||void 0},experiment_assignments:[],userTeamMembership:null===e.roleOnObjectTeamForUser?f.ig.NOT_JOINED:f.ig.JOINED,sanctioned_at:l.oA(e.sanctionedAt)?.toISOString()||null}}function A(e,r,n,i){let a=(0,v.R)(r?.orgAccessFilter,r?.discoverabilityFilter);return String((0,d.lF)({...n&&{sort_by:n.columnName},...n&&{order_by:n.isReversed?g.dy.DESC:g.dy.ASC},...e&&{search_query:e},...a&&{org_access:a},...r?.orphanedTeamFilter&&{teams_without_owners:r.orphanedTeamFilter},...r?.teamMembershipFilter&&{member_of_filter:null!==r.teamMembershipFilter},...r?.teamMembershipFilter&&{teams_member_of:r.teamMembershipFilter===f.ig.JOINED},...r?.workspaceFilter&&{workspace_id:r.workspaceFilter},...i&&{is_end_user_surface:i}}))}},908140:(e,r,n)=>{n.d(r,{I:()=>u}),n(411855),n(188507),n(629019),n(858977),n(154254),n(939863),n(175290);var i=n(809838);n(738269);var a=n(349410),o=n(611978),s=n(556261),l=n(56099),c=n(186828);n(172981),n(155367),n(567088),n(668526);var d=n(352898);function u(){var e,r;let n=(0,a.Cv)(),u=(0,o._6)(),m=(0,i.E)(),p=(0,s.gI)({migrationGroup:l.L.GROUP_9,component:"WorkspaceAdminBreadcrumbs"});return!!n()&&(m||(e=u,r=p,"teamAdminConsole"!==e.view&&"orgAdminSettings"!==e.view&&("licenseGroup"===e.view&&e.subView===c.GN.ADMIN&&!!r||"workspace"===e.view&&e.subView===d.V0.ADMIN&&!!r||"orgDomainManagement"===e.view||"abandonedDraftFiles"===e.view)))}},687918:(e,r,n)=>{n.d(r,{B:()=>o});var i=n(411855);let a=(0,i.createContext)(null);function o(){let e=(0,i.useContext)(a);if(!e)throw Error("useLayoutRef must be used within LayoutRefProvider");return e}},796933:(e,r,n)=>{n.d(r,{RQ:()=>a,cm:()=>o,jU:()=>i}),n(464704),n(896026);let i="organize-favorite-menu",a="team-link-context-menu";var o=(e=>(e.PENDING_ASSET_TRANSFER="pending_asset_transfer",e.PENDING_RESOURCE_CONNECTION="pending_resource_connection",e.ACTIVE_RESOURCE_CONNECTION="active_resource_connection",e))(o||{})},27182:(e,r,n)=>{n(411855).createContext({canGoBack:!1,canGoForward:!1,goBack:()=>{},goForward:()=>{}})},809838:(e,r,n)=>{n.d(r,{E:()=>o}),n(411855);var i=n(627776),a=n(517333);function o(){return!!a.eD||(0,i.ce)()}n(164377),n(27182)},471115:(e,r,n)=>{n.d(r,{y:()=>b});var i=n(411855),a=n(188507);n(320063),n(966712);var o=n(154254);n(939863);var s=n(279151),l=n(903486),c=n(225266),d=n(662275),u=n(672517);n(963067);var m=n(988022),p=n(215822),h=n(671653),_=n(180881),g=n(927625),f=n(793781),E=n(234136);n(865803);var y=n(189095);function b({plugins:e,renderPluginDropdownButton:r}){return i.createElement(u.QE.Consumer,null,n=>i.createElement(v,{plugins:e,trackingContext:n.name,renderPluginDropdownButton:r}))}function v({plugins:e,trackingContext:r,renderPluginDropdownButton:n}){let u=(0,a.wA)(),g=(0,E.x2)(),f=(0,s.B)(),{showing:b,show:v,data:S}=(0,E.Di)();i.useEffect(()=>{u(c.Xt())},[u]);let w=i.useMemo(()=>e.map(e=>({plugin:e,version:(0,p.uF)(e)})),[e]),A=i.useCallback(({version:e})=>e.name??"",[]),C=i.useCallback(({plugin:e},n)=>{(0,m.Cu)({context:r,text:"Plugin Tile",pluginId:e.id}),f(e,n)},[f,r]),N=i.useCallback(e=>{if(1!==e.length)return;let r=e[0].plugin;u((0,d.to)({type:_.H,data:{plugin:r},showModalsBeneath:!0}))},[u]),L=i.useCallback((e,r,n)=>{1===e.length&&v({data:{publishedResource:e[0].plugin,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[v]),O=i.useCallback(({plugin:e})=>i.createElement(T,{plugin:e,renderPluginDropdownButton:n}),[n]);return i.createElement(i.Fragment,null,i.createElement(l.A,{items:w,getAriaLabel:A,viewType:h.XU.GRID,handleOpenItem:C,handleContextMenu:L,handleDeleteKey:g?N:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{tileClassName:y.i1,containerClassName:o.cx.px32.pb32.$,renderTile:I,renderTileFooter:O}}),b&&S&&i.createElement(E.ii,{dropdownData:S}))}function I({plugin:e}){return i.createElement(g.Ce,{plugin:e,isPublishing:!1,showNewBadge:!1,isPublicOverride:!1})}function T({plugin:e,renderPluginDropdownButton:r}){return i.createElement(g.Xg,{showInstallCount:!0,plugin:e,isPublicOverride:!1,dropdown:r?i.createElement(f.r,{resource:e}):void 0})}n(662673)},452578:(e,r,n)=>{n.d(r,{N:()=>g});var i=n(411855),a=n(188507);n(966712);var o=n(154254);n(939863);var s=n(617482),l=n(903486),c=n(225266),d=n(662275);n(697551);var u=n(215822),m=n(671653),p=n(39954),h=n(180881);n(927625);var _=n(234136);function g({widgets:e}){let r=(0,a.wA)(),n=(0,_.x2)();i.useEffect(()=>{r(c.gI())},[r]);let p=(0,s.s)(),{showing:g,show:y,data:b}=(0,_.Di)(),v=i.useMemo(()=>e.map(e=>({widget:e,version:(0,u.uF)(e)})),[e]),I=i.useCallback(({version:e})=>e.name??"",[]),T=i.useCallback(({widget:e},r)=>p(e,r),[p]),S=i.useCallback(e=>{if(1!==e.length)return;let n=e[0].widget;r((0,d.to)({type:h.H,data:{plugin:n},showModalsBeneath:!0}))},[r]),w=i.useCallback((e,r,n)=>{1===e.length&&y({data:{publishedResource:e[0].widget,targetRect:{top:r.clientY,right:r.clientX,bottom:r.clientY,left:r.clientX,width:1,height:1},index:n}})},[y]);return i.createElement(i.Fragment,null,i.createElement(l.A,{items:v,getAriaLabel:I,viewType:m.XU.GRID,handleOpenItem:T,handleContextMenu:w,handleDeleteKey:n?S:void 0,multiselectDisabled:!0,isDraggable:!1,gridViewProps:{containerClassName:o.cx.px32.pb32.$,renderTile:E,renderTileFooter:f}}),g&&b&&i.createElement(_.ii,{dropdownData:b}))}function f({widget:e,version:r}){return i.createElement("div",{className:o.cx.flex.flexRow.h48.selectNone.$},i.createElement(p.aA,{widget:e,version:r,viewContext:"OrgWidgetsView"}))}function E({widget:e,version:r}){return i.createElement(p.Ke,{widget:e,version:r,isInItemsView:!0})}n(865803),n(662673)},865803:(e,r,n)=>{n(411855),n(215822)},896026:(e,r,n)=>{n.d(r,{x:()=>i});let i="FILE_CREATION_OMNICREATE_DROPDOWN";var a=(e=>(e.DESIGN="RESOURCE_CREATION_DESIGN_OPTION",e.WHITEBOARD="RESOURCE_CREATION_WHITEBOARD_OPTION",e.SLIDES="RESOURCE_CREATION_SLIDES_OPTION",e.SITES="RESOURCE_CREATION_SITES_OPTION",e.IMPORT="RESOURCE_IMPORT_OPTION",e.COOPER="RESOURCE_CREATION_COOPER_OPTION",e))(a||{})},827294:(e,r,n)=>{n.d(r,{S:()=>g});var i=n(411855),a=n(188507),o=n(946689),s=n(493323),l=n(939863),c=n(392592),d=n(63397),u=n(746058),m=n(237870),p=n(603234),h=n(474742),_=n(966688);function g(e){let{profileId:r,profileHandle:n,emptyStateText:m}=e,h=(0,a.wA)(),[g,f]=i.useState([]),[E,y]=i.useState(!1);i.useEffect(()=>{y(!0),u.s.getRestrictedProfiles({profileId:r}).then(({data:e})=>{f(e.meta),y(!1)})},[r]);let b=(e,r)=>{f(g.map(n=>n.id===e?{...n,is_restricted_by_current_user:r}:n))},v=(e,r)=>{b(e,r),h(c.F.enqueue({message:r?(0,l.t)("community.comments.restricted_this_user_s_comments"):(0,l.t)("community.comments.unrestricted_this_user_s_comments"),type:"profile-restricted-change",button:{text:(0,l.t)("community.undo"),action:()=>{r?T(e):I(e)}}}))},I=r=>{h(d._8({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!0)}))},T=r=>{h(d.dL({profileId:e.profileId,blockedProfileId:r,onSuccess:()=>v(r,!1)}))},S=g&&g.length>0;if(!m&&!S)return i.createElement(i.Fragment,null);if(E)return i.createElement(s.kt,null);let w=S?i.createElement(i.Fragment,null,n?(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_profile_handles_community_files_and_plugins",{profileHandle:n}):(0,l.t)("community.comments.these_people_can_t_comment_on_any_of_your_community_files_and_plugins")):i.createElement(i.Fragment,null,m," ",(0,l.tx)("community.comments.learn_more_about_managing_comments_on_your_files_and_plugins_in_community",{learnMoreLink:i.createElement(o.Us,{href:"https://help.figma.com/hc/articles/1500002628062",target:"_blank",trusted:!0},(0,l.tx)("general.learn_more"))})," "),A=i.createElement("div",{className:e.wrapperClassName?e.wrapperClassName:""},i.createElement("div",{className:_.tB},g.map(e=>i.createElement(p.y,{profile:e,key:e.profile_handle,rightSide:e.is_restricted_by_current_user?i.createElement(o.nR,{onClick:T.bind(null,e.id)},(0,l.tx)("community.comments.unrestrict")):i.createElement(o.$$,{onClick:I.bind(null,e.id)},(0,l.tx)("community.comments.restrict"))}))));return i.createElement(i.Fragment,null,i.createElement("div",{className:_.bV},(0,l.tx)("settings_tab.community_commenters_label")),w,A)}(0,m.Ju)(function(e){return i.createElement(h.aF,{className:_.Iy,popStack:!0},i.createElement(g,{profileId:e.profileId,profileHandle:e.profileHandle,emptyStateText:e.emptyStateText}))},"ProfilesBlockedFromCommentingModal")},119735:(e,r,n)=>{n.d(r,{AH:()=>E,GI:()=>v,J_:()=>f,KR:()=>T,pH:()=>b});var i=n(411855),a=n(188507),o=n(915440),s=n(391388),l=n(647899),c=n(881388),d=n(939863),u=n(635344),m=n(662275);n(477782);var p=n(860178),h=n(801387),_=n(764151),g=n(279453);function f(){let{getConfig:e}=(0,l.I7)("exp_file_browser_workspace_pinning");return i.useCallback(()=>!!e().getValue("enabled",!1),[e])}let E="workspace";function y(e,r){let n=Array.from(e.keys()),i=Array.from(r.keys());return n.length===i.length&&n.every(n=>(0,a.bN)(e.get(n),r.get(n)))}function b(e,r={}){let n=function(e,r={}){let n=(0,p.TA)(),l=(0,a.d4)(e=>e.currentUserOrgId),c=i.useMemo(()=>e.map(e=>({fileKey:e,orgId:l})),[e,l]),d=(0,o.p)(g.PG0,c,r),u=(0,h.Au)(l),m=s.Qw.all([u,...d.map(e=>e.result)]);return s.Qw.useTransform(m,([r,...i])=>{let a=new Map;return i.forEach((i,o)=>{let{file:s}=i,c=e[o],d=s?.team?.workspace??null;if(!l||!s||!d){a.set(c,null);return}let u=d.pinnedFiles,m=u?.find(e=>e.file?.key===c),p=!!u&&u.length>=I,h=!!r&&r===d.id,_=d.canAdmin,g=m?.creator?.id===n,f=!m&&(h||_)&&(s.canPinToWorkspace||s.canEdit),E=f&&!p,y=m&&(g||_);if(f){a.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:p});return}if(y){a.set(c,{shouldShowPinFileToWorkspaceAction:f,canPinFileToWorkspace:E,canEditPin:!0,existingFilePinId:m.id,workspaceHasMaxPins:p});return}a.set(c,{shouldShowPinFileToWorkspaceAction:!1,canPinFileToWorkspace:!1,canEditPin:!1,existingFilePinId:null,workspaceHasMaxPins:p})}),a},y)}(i.useMemo(()=>e?[e]:[],[e]),r);return s.Qw.useTransformShallowEqual(n,r=>r.get(e??""))}function v(e){let r=(0,a.wA)();return i.useCallback((n,i)=>{if(i){r(c.s.error((0,d.t)("file_browser.pinning.add_pin_error_max_pins",{maxNumWorkspacePins:I})));return}r(m.to({type:(0,u.a)(),data:{fileKey:n,source:e}}))},[r,e])}let I=8;function T(e){return{..._.F.toSinatra(e),created_at:e.createdAt.toDateString(),deleted_at:e.deletedAt?.toDateString()??null,trashed_at:e.trashedAt?.toDateString()??null,updated_at:e.updatedAt.toDateString()}}},743905:(e,r,n)=>{n.d(r,{De:()=>u.D,G4:()=>D.G,v2:()=>f,U2:()=>P.U2,T1:()=>S,LK:()=>m.L,Hl:()=>C,hO:()=>i.h,d3:()=>E,eQ:()=>y,SW:()=>w,ni:()=>R,G1:()=>i.G,uZ:()=>v,yt:()=>A,m1:()=>I,cN:()=>P.cN});var i=n(230047),a=n(140593),o=n(776250),s=n(418956),l=n(743282),c=n(572206),d=n(719624),u=n(720241),m=n(398029),p=n(931770),h=n(516703),_=n(967409),g=n(725902);let f="FRAGMENT_SEARCH_PEEK_MODAL";function E(e,r,n,i,o,s,l){return i?{entry_point:e,session_id:r,search_id:n,query_type:function(e){switch(e.type){case"input-text":return"text";case"input-selection":return"selection";case"input-image":return"image";default:(0,a.xb)(e)}}(i),query_text:"input-text"===i.type?i.value:void 0,query_node_id:"input-selection"===i.type?i.node.guid:void 0,query_is_image_selection:function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return(0,h.A)(e.node)||1===e.node.childrenNodes.length&&(0,h.A)(e.node.childrenNodes[0]);default:(0,a.xb)(e)}}(i),query_file_key:i.file_key,...function(e){switch(e.type){case"input-text":case"input-image":return;case"input-selection":return{query_width:e.node.absoluteBoundingBox.w,query_height:e.node.absoluteBoundingBox.h};default:(0,a.xb)(e)}}(i),...b(s),is_in_preview:o,is_community_fragment_search:!!l}:{entry_point:e,session_id:r,search_id:n,is_in_preview:o,...b(s),is_community_fragment_search:!!l}}function y(e){switch(e){case"percent_match":return"relevance";case"last_modified":return"last_modified";case void 0:return;default:(0,a.xb)(e)}}function b(e){return e&&e.searchModelType===_.uH.FILES?{filterFolderIds:e.folderIds,filterTeamIds:e.teamIds,filterCreatorIds:e.creatorIds}:null}function v(e){return e?.type===f}function I(e,r=378){let n=Math.min(e.x,e.y);if(n>r){let i=r/n;return new c.Mi(e.x*i,e.y*i)}return e}var T=(e=>(e.FragmentSearch="fragment-search",e.GPT="gpt-vision",e))(T||{});function S(e,r="fragment-search"){let n;n="fragment-search"===r?I(new c.Mi(e.size.x,e.size.y)):I(function(e,r){let n=Math.max(e.x,e.y);if(n>2048){let r=2048/n;return new c.Mi(e.x*r,e.y*r)}return e}(new c.Mi(e.size.x,e.size.y),0),768);let i=(0,p._G)(n,e.guid,!0,void 0,!1,!0);return i&&i.pixels&&i.pixelSize&&i.displaySize&&(0,p.Pv)(i.pixels,i.pixelSize).split(";base64,").pop()||null}async function w(e,r,n){return r.x!==e.width||r.y!==e.height?{type:"image",value:function(e,r){let n=document.createElement("canvas"),i=n.getContext("2d");n.width=r.x,n.height=r.y,i?.drawImage(e,0,0,r.x,r.y);let a=n.toDataURL("image/png").split(",");if(a.length>=2)return a[1];throw Error("Invalid data URL format")}(e,r)}:{type:"image",value:await (0,g.t)(n)}}function A(e){return new Promise((r,n)=>{let i=document.createElement("img"),a=URL.createObjectURL(e);i.onload=()=>{r(i),URL.revokeObjectURL(a)},i.onerror=e=>{n(e),URL.revokeObjectURL(a)},i.src=a})}async function C(e,r,n,c,u,m,p){let h=(0,l.g)(),_=Date.now(),g=s.zl.get(d.dd),f=E(r,g,h,e,!1,n,m),y="input-selection"===e.type?function(e){let r=e.editInfo;return{query_is_top_level_node:e.isTopLevelFrame(),query_num_descendant_nodes:e.getVisibleDescendantIds().length,query_is_component:e.isComponentish,query_depth_from_top_level_frame:e.depthFromTopLevelFrame,query_created_at:r?.createdAt,query_last_edited_at:r?.lastEditedAt,query_last_edited_by:r?.userId,query_edit_info_valid:!!r,query_node_type:e.type}}(e.node):{};i.h.setFragmentSearchLoading(h,e,c,m,u),(0,o.sx)("Fragment search query",{...y,...f},{forwardToDatadog:!0});let b={session_id:g,search_id:h,node_id:"input-selection"===e.type?e.node.guid:""};try{let s=[];switch(e.type){case"input-image":s=await L(e,b,n,u,m);break;case"input-text":s=await O(e,b,n,u,m);break;case"input-selection":s=await N(e,b,n,u,m);break;default:(0,a.xb)(e)}let l=[];if(l=m?s.map(e=>({...e,type:"hub-file-fragment"})):s.map(e=>({...e,type:"fig-file-fragment"})),i.h.getSearchId(m)!==h)return;(0,o.sx)("Fragment search time to load",{...f,elapsed_time:Date.now()-_}),(0,o.sx)("Fragment search result",{...f,count:s.length}),i.h.setFragmentSearchResults(h,l,r,m),p&&p()}catch(e){if(i.h.getSearchId(m)!==h)return;i.h.setFragmentSearchError(h,e,m)}}async function N(e,r,n,i,a){let{node:o,file_key:s}=e,l=S(o);if(!l)throw Error("Failed to export thumbnail");return(await u.D.postFragmentSearch({type:"image",value:l},s,r,n,i,a)).data.meta.results}async function L(e,r,n,i,a){let o=await A(e.imageFile),s=I(new c.Mi(o.width,o.height)),l=await w(o,s,e.imageFile);return(await u.D.postFragmentSearch(l,e.file_key,r,n,i,a)).data.meta.results}async function O(e,r,n,i,a){return(await u.D.postFragmentSearch({type:"text",value:e.value},e.file_key,r,n,i,a)).data.meta.results}async function R(e,r){let n=(await u.D.getFragmentData({file_key:r,node_id:e.guid})).data.meta.results;m.L.setIndexedFragmentData(n)}var P=n(657123),D=n(456827)},396040:(e,r,n)=>{n.d(r,{l1:()=>eh.l}),n(362871),n(198565);var i=n(411855),a=n(188507),o=n(140593),s=n(821910),l=n(563706),c=n(481373),d=n(445092),u=n(336599),m=n(967409),p=n(671653),h=n(201462),_=n(629019),g=n.n(_),f=n(966712),E=n(915440),y=n(135876),b=n(163023),v=n(154254),I=n(939863),T=n(90898),S=n(234242),w=n(723245),A=n(279453),C=n(294662),N=n(83427),L=n(925292),O=n(378124),R=n(935529),P=n(673730),D=n(969859),k=n(116231),M=n(927092),F=n(117688),x=n(236705),U=n(83958),B=n(505422);let V={[m.uH.HUB_FILES]:F.A,[m.uH.PUBLIC_PLUGINS]:x.A,[m.uH.PRIVATE_PLUGINS]:null,[m.uH.PUBLIC_PROFILES]:M.A,[m.uH.FILES]:null,[m.uH.PROJECTS]:null,[m.uH.TEAMS]:null,[m.uH.USERS]:null,[m.uH.PUBLIC_WIDGETS]:U.A,[m.uH.PRIVATE_WIDGETS]:null},G={[m.uH.PUBLIC_PLUGINS]:O.Of,[m.uH.PRIVATE_PLUGINS]:L.Of,[m.uH.PUBLIC_PROFILES]:k.hP,[m.uH.PUBLIC_WIDGETS]:R.nD.listStyle,[m.uH.PRIVATE_WIDGETS]:R.uB.listStyle};class H extends i.Component{componentDidMount(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),C.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}componentDidUpdate(){!this.props.isLoading&&this.props.search.queryId!==this.props.search.lastAckedQueryId&&this.props.search.parameters.query.length>0&&(this.props.setSearchLastAckedQueryId(this.props.search.queryId),this.props.setLastLoadedQuery(this.props.search.sessionId,this.props.search.parameters.query,this.props.search.queryId),C.vj.Session.trackClientResult(this.props.search,this.props.selectedView))}renderContent(){let e;if(this.props.viewMode===p.XU.LIST)e=G[this.props.searchModelType]??k.p_;else if(this.props.viewMode===p.XU.GRID)switch(this.props.searchModelType){case m.uH.FILES:break;case m.uH.TEAMS:(0,f.kc)().teams_in_items_view||(e=k.Vg);break;case m.uH.PROJECTS:(0,f.kc)().projects_in_items_view||(e=k.Vg);break;case m.uH.PUBLIC_PLUGINS:case m.uH.PRIVATE_PLUGINS:case m.uH.PUBLIC_WIDGETS:case m.uH.PRIVATE_WIDGETS:(0,f.kc)().file_browser_widgets_items_view||(e=k.Vg);break;case m.uH.USERS:(0,f.kc)().users_to_itemsview||(e=k.Vg);break;case m.uH.PUBLIC_PROFILES:case m.uH.HUB_FILES:case m.uH.PUBLIC_PROFILES:e=k.Vg;break;default:(0,o.xb)(this.props.searchModelType)}else(0,o.xb)(this.props.viewMode);e+=this.props.isLoggedIn?` ${k.Vz}`:"";let r=this.props.didSucceed&&0===this.props.searchResults.length;return i.createElement(y.x,{isLoading:this.props.isLoading,className:k.g4},()=>this.props.didFail?i.createElement(W,{illustration:B.A,resourceTypeDisplayString:this.props.failureMessage||(0,I.t)("search.search_model_type.search_error"),searchModelType:this.props.searchModelType,query:null,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):r?i.createElement(W,{illustration:V[this.props.searchModelType],resourceTypeDisplayString:(0,m.hf)(this.props.searchModelType),searchModelType:this.props.searchModelType,query:this.props.query,activePlan:this.props.activePlan,activeWorkspaceFilter:this.props.activeWorkspaceFilter,onResetWorkspaceFilter:this.props.onResetWorkspaceFilter}):i.createElement("div",{className:k.sb},i.createElement("div",{className:e},i.createElement(P.L,{searchModelType:this.props.searchModelType,searchResults:this.props.searchResults,viewMode:this.props.viewMode,planFilter:this.props.planFilter}))))}renderProjectContextMenu(){let e=(0,T.H)(this.props.dropdownShown);return(0,w.D6)(this.props.currentOrgId)&&e&&i.createElement(S.p,{folder:e,useLGPerms:!0})}render(){let e=this.props.searchModelType===m.uH.FILES?void 0:this.props.viewMode===p.XU.LIST?k.UL:k.G2;return i.createElement(N.Q0,{isDropdown:!1,...this.props},i.createElement("div",{className:e},this.renderContent()),this.props.searchModelType===m.uH.PROJECTS&&this.renderProjectContextMenu())}}H.displayName="SearchResultView";let K=(0,a.Ng)((e,r)=>({viewMode:(0,D.z[r.searchModelType])(e.search.parameters,e.viewBarViewModeOptionByView).viewMode,isLoggedIn:!!e.user,search:e.search,activeWorkspaceFilter:e.search.parameters.workspaceFilter,activePlan:e.search.parameters.planFilter,dropdownShown:e.dropdownShown,currentOrgId:e.currentUserOrgId,selectedView:e.selectedView}),(e,r)=>({onResetWorkspaceFilter:()=>{e(d.HI({}))},setSearchLastAckedQueryId:r=>{e(d.ej({lastAckedQueryId:r}))},setLastLoadedQuery:(r,n,i)=>{e(d.w2({sessionId:r,query:n,queryId:i}))}}))(H);function W(e){let{query:r,resourceTypeDisplayString:n}=e,o=(0,a.d4)(e=>e.currentUserOrgId),s="NON_ORG_TEAMS"!==e.activePlan&&e.activePlan||o,l=(0,E.Rs)(A.N63,{orgId:s??null}),c=i.useMemo(()=>"loaded"===l.status?l.data?.org?.workspaces:[],[l]),d=c?.find(r=>null!=e.activeWorkspaceFilter&&r.id===e.activeWorkspaceFilter),u=e.onResetWorkspaceFilter,m=i.useMemo(()=>i.createElement(i.Fragment,null,n,null!==r?i.createElement(i.Fragment,null,"\xa0",i.createElement("span",{className:k.xV},r)):null,null!=d&&i.createElement(i.Fragment,null," in the ",i.createElement("span",{className:k.xV},d.name)," workspace",i.createElement("div",{className:g()(v.cx.pt16.$,k.YF),onClick:()=>{u&&u()},role:"button",tabIndex:0},(0,I.tx)("search.empty_state.try_searching_whole_org")))),[r,u,d,n]);return i.createElement("div",{className:k.p$},e.illustration&&i.createElement(b.B,{className:k.IC,svg:e.illustration,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("div",{className:k.jI},i.createElement("span",{className:k.q6},m)),e.cta?i.createElement("div",{className:k.Ki},e.cta):null)}W.displayName="SearchResultEmptyState";class $ extends i.Component{constructor(e){super(e),this.onScroll=e=>{this.updateIsTop(e.target)},this.updateIsTop=e=>{this.props.setScrollTop(window.pageYOffset)},this.shouldScroll=()=>0!==this.props.searchScrollTop,this.getLoadingKey=()=>d.$P.loadingKeyForPayload({parameters:this.props.parameters}),this.isLoading=()=>u.VP(this.props.loadingState,this.getLoadingKey()),this.didSucceed=()=>u.GH(this.props.loadingState,this.getLoadingKey()),this.didFail=()=>u.aF(this.props.loadingState,this.getLoadingKey()),this.getFailedReason=()=>u.Fl(this.props.loadingStateFailureReasons,this.getLoadingKey());let r=this.getFilteredResults(e.searchResults??[],e.sortFilterConfig);this.state={showContainer:!this.shouldScroll(),filteredFileResults:r}}componentDidMount(){window.addEventListener("scroll",this.onScroll,!0),this.shouldScroll()?setTimeout(()=>{window.scrollTo(0,this.props.searchScrollTop),this.setState({showContainer:!0})},0):this.updateIsTop({})}componentWillUnmount(){window.removeEventListener("scroll",this.onScroll,!0)}componentDidUpdate(e){if(this.props.searchModelType===m.uH.FILES){let r=e.searchResults??Y,n=this.props.searchResults??Y,i=r.length!==n.length;if(!i)for(let e=0;e<r.length;e++)(0,s.c2)(r[e],n[e])||(i=!0);if(i){let e=this.getFilteredResults(n,this.props.sortFilterConfig);this.setState({...this.state,filteredFileResults:e})}}}getFilteredResults(e,r){return this.props.searchModelType===m.uH.FILES?e.filter(e=>{let n=e.model;switch(r.filters.fileType){case p.t2.ANY:return!0;case p.t2.DESIGN:return"design"===n.editor_type;case p.t2.FIGJAM:return"whiteboard"===n.editor_type;case p.t2.SITES:return"sites"===n.editor_type;case p.t2.SLIDES:return"slides"===n.editor_type;case p.t2.PROTOTYPE:return!1;default:(0,o.xb)(r.filters.fileType)}}):e}render(){let e=this.props.searchResults??Y,r=this.getFilteredResults(e,this.props.sortFilterConfig);return i.createElement(c.r,{key:"unified-search",toolbar:l.Ay.mobile?i.createElement(h.o,null):void 0,viewbar:i.createElement(D.Z,{sortControlsDisabled:0===e.length}),viewBarSticky:!0,content:i.createElement(K,{searchResults:r,searchScope:this.props.parameters.searchScope,searchModelType:this.props.searchModelType,sortState:this.props.parameters.sortState,onChangeSortState:this.props.onChangeSortState,isLoading:this.isLoading(),didSucceed:this.didSucceed(),didFail:this.didFail(),failureMessage:this.getFailedReason(),query:this.props.completedQuery,planFilter:this.props.parameters.planFilter})})}}$.displayName="SearchPageView";let Y=[];(0,a.Ng)((e,r)=>{let n=e.search.parameters,i=e.search.responses[r.searchModelType];return{parameters:n,completedQuery:e.search.completedQueries[r.searchModelType],searchResults:i?.results||null,loadingState:e.loadingState,loadingStateFailureReasons:e.loadingStateFailureReasons,searchScrollTop:e.search.searchScrollTop,sortFilterConfig:e.tileSortFilterStateByView.search}},e=>({onChangeSortState:r=>{e(d.qv({sortState:r}))},setScrollTop:r=>{e(d.PP({top:r}))}}))($),n(320063),n(564577),n(642822);var z=n(723325);n(452441),n(32863),n(676967),n(56691),n(944682),n(586459),n(112235),n(132135),n(767553).uQ;var j=n(91408);n(896474),n(743905),n(662275),n(611978);var q=n(607851);n(234363);var Z=n(522027),X=n(418956),J=n(355819),Q=n(582064),ee=n(237870),et=n(474742),er=n(259018),en=n(588370),ei=n(626206),ea=n(452836),eo=n(893451),es=n(915995),el=n(550163),ec=n(4508),ed=n(837746),eu=n(712335);let em=(0,j.jz)(ed.RAo),ep=(0,j.jz)(ed.aIx);(0,ee.Ju)(function(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.modalShown),n=(0,a.d4)(e=>e.search.sessionId),o=(0,X.md)(el.Q),[s,l]=(0,X.fp)(q.z5),c=(0,X.md)(q.L8),d=(0,es.A)();i.useEffect(()=>()=>{n&&C.vj.Session.searchModalExit(n)},[n]);let u=i.useCallback(()=>{e(Q.ky()),s&&(l(null),d(m.uR.DROPDOWN,s))},[e,l,s,d]);if(!r)return null;let p=r.data.width?{width:`${r.data.width-2*em}px`}:void 0;return i.createElement(et.aF,{absolutePosition:{top:r.data.top,left:r.data.left},padding:`0 0 ${em}px 0`,size:r.data.width??ep,tintedModalBackground:!1,useModalViewScroll:!1,maxHeight:"90vh",onHide:u,popStack:!0,"data-testid":"facetedSearchModal"},i.createElement(z.dP,null,i.createElement(ea.a3.Provider,{value:ea.Vm.PREVIEW},i.createElement("div",{className:eu.PP,style:p},i.createElement(Z.Y,{hideSearchPreview:r.data?.hideSearchPreview})),i.createElement(J.P,{className:eu.xx},s&&i.createElement("div",{className:eu.v$},i.createElement(er.s,{facetType:s,id:"facet-panel",path:[3]})),i.createElement(eo.L,{id:"suggestions",path:[4]}),r.data.hideSearchPreview?null:o||c.length>0?i.createElement(ei.j,{id:"search-results",path:[5]}):i.createElement(en.n,{id:"recents",path:[5]})))))},ec.r),n(207202),(0,j.jz)(ed.RAo),n(268537),n(738269),n(128751),n(860178),n(99506),n(298543),n(715621),n(611768),n(347299);var eh=n(30676)},30676:(e,r,n)=>{n.d(r,{l:()=>T});var i=n(411855),a=n(188507),o=n(418956),s=n(163023),l=n(154254),c=n(939863),d=n(607851),u=n(267177),m=n(259018),p=n(190256),h=n(915995),_=n(85840),g=n(738269),f=n(128751),E=n(318812),y=n(967409),b=n(609714),v=n(112512);let I=e=>{switch(e){case y.WY.RESOURCE:return(0,c.tx)("search.preview_section.all_files");case y.WY.CREATOR:return(0,c.tx)("search.facets.created_by",{creator:(0,c.t)("search.facets.anyone")});case y.WY.SPACE:return(0,c.tx)("search.facets.space",{space:(0,c.t)("search.facets.all_spaces")});default:return""}};function T({dropdownId:e,facetType:r,containerRef:n,hasQuickActionsStyling:c,contentTargetRef:T}){let S=(0,a.wA)(),w=i.useRef(null),A=T||w,C=(0,E.Um)(),N=C?.type===e,L=(0,o.md)((0,d.l4)(r??null)),O=(0,p.f)(),R=(0,h.A)(),P=y.uR.DROPDOWN,D=c?l.cx.relative.lhNormal.flex.h24.bRadius4.px8.py4.b1.colorBorder.fontMedium.$:b.P2,k=c?l.cx.ml8.flex.itemsCenter.$:b.dN,M=n&&n.current?n.current.getBoundingClientRect().right:void 0;return i.createElement("div",{className:D,onMouseDown:n=>{n.stopPropagation(),S(f.an()),N?(S(g.oB()),R(P,r)):A.current&&(n.preventDefault(),S(g.j7({type:e,data:{facetType:r,targetRect:A.current.getBoundingClientRect()}})),O(P,r))},onClick:e=>e.stopPropagation(),role:"button",tabIndex:-1},i.createElement("span",{ref:A,className:l.cx.noWrap.$},!L||(0,u.II)(L)?I(r):(0,u.yA)(L)),i.createElement("div",{className:k},i.createElement(s.B,{svg:v.A,className:`${b.OW} ${N?b.iw:""}`})),N&&i.createElement(_.G,{dropdownId:e,dropdownChild:i.createElement(m.s,{facetType:r,id:"",path:[]}),containerRefRight:M,limitHeight:c}))}},207202:(e,r,n)=>{n(411855),n(188507),n(445092),n(697551),n(428467),n(967409)},362871:(e,r,n)=>{n.d(r,{lV:()=>L,ye:()=>M,wA:()=>R,D$:()=>O});var i=n(411855),a=n(188507),o=n(140593),s=n(776250),l=n(966712),c=n(268537),d=n(163023),u=n(154254),m=n(939863);n(67294);var p=n(30676),h=n(539293),_=n(85840),g=n(738269),f=n(445092),E=n(128751);n(988022),n(161325),n(860178),n(99506),n(935938);var y=n(967409),b=n(671653),v=n(298543),I=n(170588),T=n(127391);n(269135);var S=n(234587),w=n(388327),A=n(112512);let C=c.wv;class N extends i.PureComponent{render(){let e="deletedFiles"===this.props.selectedView.view,r=this.props.options.tileSortFilterConfig.viewMode===b.XU.LIST;return i.createElement("div",{className:"tile_sort_filter--dropdownCollectionContainer--Dnyyh"},e&&i.createElement(D,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),i.createElement(M,{config:this.props.options.tileSortFilterConfig}),!r&&!this.props.hideSortMenu&&i.createElement(F,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu}),r&&i.createElement(I.z,{query:"(max-width: 1120px)"},i.createElement(F,{dispatch:this.props.dispatch,options:this.props.options,selectedView:this.props.selectedView,hideSortMenu:this.props.hideSortMenu})))}}function L(e){let r=(0,a.d4)(e=>e.teams),n=(0,a.d4)(e=>e.orgById);if(!e.planOption?.plan_id)return null;let o="org"===e.planOption.plan_type&&e.planOption.plan_id?n[e.planOption.plan_id]?.img_url:r[e.planOption.plan_id]?.img_url;return i.createElement("div",{className:u.cx.flex.itemsCenter.$},i.createElement(T.H,{entityId:e.planOption.plan_id,entityName:e.planOption.label,imgUrl:o}))}N.displayName="TileSortFilter";let O={values:[b.ue.ASC,b.ue.DESC],valuesToDisplayText:(e,r)=>{switch(e){case b.ue.ASC:switch(r){case b.rR.TIME:return(0,m.t)("tile.sort_filter.sort_direction_oldest_first");case b.rR.ALPHABETICAL:return(0,m.t)("tile.sort_filter.sort_direction_a_to_z");default:return(0,m.t)("tile.sort_filter.sort_direction_ascending")}case b.ue.DESC:switch(r){case b.rR.TIME:return(0,m.t)("tile.sort_filter.sort_direction_newest_first");case b.rR.ALPHABETICAL:return(0,m.t)("tile.sort_filter.sort_direction_z_to_a");default:return(0,m.t)("tile.sort_filter.sort_direction_descending")}default:(0,o.xb)(e)}}};function R(e){let r=(0,a.wA)(),n=(0,i.useRef)(null),o=(0,a.d4)(e=>e.dropdownShown),l=o?.type===e.dropdownId,u=(0,a.d4)(e=>e.selectedView),p=e=>{e.stopPropagation()},f=i=>{r(E.an()),l?r(g.oB()):n.current&&r(g.j7({type:e.dropdownId,data:{targetRect:n.current.getBoundingClientRect()}})),p(i)},y=()=>{l&&r(g.oB())},I=r=>e.includeSortDirection,T=e.disabled?"tile_sort_filter--dropdownContainerDisabled--lYOaX tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd":"tile_sort_filter--dropdownContainer--443h- text--fontPos11--2LvXf text--_fontBase--QdLsd",S=(r,n)=>{(0,s.sx)("Sort Changed - Dropdown",{oldValueString:`${e.checkedValue}`,newValueString:`${r}`,model:`${e.searchModelType}`,dir:n===b.ue.ASC?"asc":n===b.ue.DESC?"desc":void 0}),e.onChange(r,n)},N=i.createElement(_.G,{dropdownId:e.dropdownId,dropdownChild:i.createElement(h.j,{checkedValue:e.checkedValue,currentDirection:e.includeSortDirection?e.currentDirection:null,tileSortValues:e.includeSortDirection?e.tileSortValues:[],dirValuesToDisplayText:O.valuesToDisplayText,values:e.values,valuesToDisplayText:e.valuesToDisplayText,onChange:e.onChange})}),L=l?i.createElement(v.Cf,{targetRect:o.data.targetRect,minWidth:162,showPoint:e.isMobile,lean:"right",leanPadding:0,maxHeight:e.maxHeight},!e.hideSortOptionLabel&&i.createElement(c.MM,{checked:!1,disabled:!0},(0,m.tx)("tile.sort_filter.sort_by_label")),e.values.map(r=>i.createElement(c.rr,{key:r,checked:r===e.checkedValue,onClick:()=>{y(),S(r)},children:e.valuesToDisplayText[r]})),e.includeSortDirection&&i.createElement(i.Fragment,null,i.createElement(C,null),i.createElement(c.MM,{checked:!1,disabled:!0},(0,m.tx)("tile.sort_filter.order_label")),e.tileSortValues.map(r=>I(e.checkedValue)&&i.createElement(c.rr,{key:O.valuesToDisplayText(r,(0,w.E)(e.checkedValue)),checked:e.currentDirection===r,onClick:()=>{y(),S(e.checkedValue,r)},children:O.valuesToDisplayText(r,(0,w.E)(e.checkedValue))})))):null;return e.isMobile?L:i.createElement("div",{className:`${T} ${e.className||""}`,onClick:e=>{p(e),f(e)}},i.createElement("span",{ref:n},e.textWhenClosedPrefix,e.hideValueWhenClosed||e.valuesToDisplayText[e.checkedValue]),i.createElement("div",{className:"tile_sort_filter--caretContainer--kkZQq"},i.createElement(d.B,{svg:A.A,className:`tile_sort_filter--caret--AJHA9 ${l?"tile_sort_filter--caretDown--hIOid":""}`})),l?"search"===u.view?N:L:null)}let P={dropdownId:"tile-filter-creator-dropdown",values:[b.rJ.ANY,b.rJ.SELF,b.rJ.OTHER],textWhenClosedPrefix:"",valuesToDisplayText:{[b.rJ.ANY]:(0,m.tx)("tile.sort_filter.created_by_anyone"),[b.rJ.SELF]:(0,m.tx)("tile.sort_filter.created_by_you"),[b.rJ.OTHER]:(0,m.tx)("tile.sort_filter.created_by_others")}};class D extends i.PureComponent{constructor(){super(...arguments),this.onChange=e=>{let r=this.props.options.tileSortFilterConfig,n={...r,filters:{...r.filters,creator:e}};this.props.dispatch(g.JF({selectedView:this.props.selectedView,config:n}))}}render(){return i.createElement(R,{dropdownId:P.dropdownId,values:P.values,textWhenClosedPrefix:P.textWhenClosedPrefix,valuesToDisplayText:P.valuesToDisplayText,includeSortDirection:!1,checkedValue:this.props.options.tileSortFilterConfig.filters.creator,onChange:this.onChange,hideSortOptionLabel:!0})}}D.displayName="TileFilterCreatorDropdown",b.Jh.CAN_BE_RESTORED_DELETED,b.Jh.CAN_BE_VIEWED,b.Jh.CAN_BE_RESTORED_DELETED,(0,m.tx)("tile.sort_filter.can_be_restored_permanently_deleted"),b.Jh.CAN_BE_VIEWED,(0,m.tx)("tile.sort_filter.can_be_viewed");let k={dropdownId:"tile-filter-file-type-dropdown",values:[b.t2.ANY,b.t2.DESIGN,b.t2.FIGJAM],valuesToDisplayText:{[b.t2.ANY]:(0,m.tx)("tile.sort_filter.filter_by_all_files"),[b.t2.DESIGN]:(0,m.tx)("tile.sort_filter.filter_by_design_files"),[b.t2.FIGJAM]:(0,m.tx)("tile.sort_filter.filter_by_figjam_files"),[b.t2.PROTOTYPE]:(0,m.tx)("tile.sort_filter.filter_by_prototype_files"),[b.t2.SITES]:(0,m.tx)("tile.sort_filter.filter_by_sites_files"),[b.t2.SLIDES]:(0,m.tx)("tile.sort_filter.filter_by_slides_files")}};function M(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.selectedView),o="search"===n.view,s=(0,S.oz)(),c="sharedWithYou"===n.view||"recentsAndSharing"===n.view,d=k.values;return(d=(0,l.kc)().piper?d.concat([b.t2.SLIDES]):d,d=c?d.concat([b.t2.PROTOTYPE]):d,d=s?d.concat([b.t2.SITES]):d,"search"===n.view)?i.createElement(p.l,{dropdownId:"full-search-results-resource-facet-dropdown",facetType:y.WY.RESOURCE}):i.createElement(R,{dropdownId:k.dropdownId,values:d,valuesToDisplayText:k.valuesToDisplayText,includeSortDirection:!1,checkedValue:e.config.filters.fileType,onChange:i=>{let a={...e.config,filters:{...e.config.filters,fileType:i}};o&&r(f.Rz({fileTypeFilter:i})),r(g.JF({selectedView:n,config:a,tab:e.tab}))},hideSortOptionLabel:!0,disabled:e.filterControlsDisabled,isMobile:e.isMobile})}class F extends i.PureComponent{constructor(){super(...arguments),this.getDefaultSortOrder=e=>({[b.C0.NAME]:b.ue.ASC,[b.C0.CREATED_AT]:b.ue.DESC,[b.C0.TOUCHED_AT]:b.ue.DESC,[b.C0.TRASHED_AT]:b.ue.DESC,[b.C0.SEARCH_RELEVANCE]:b.ue.DESC,[b.C0.PROJECT_NAME]:b.ue.ASC,[b.C0.ACCESSED_AT]:b.ue.DESC,[b.C0.SHARED_AT]:b.ue.DESC,[b.C0.OWNER]:b.ue.DESC})[e]||b.ue.ASC,this.onChange=(e,r)=>{let n=this.props.options.tileSortFilterConfig,i=void 0===r?this.getDefaultSortOrder(e):r,a={...n,sort:{key:e,dir:i}};this.props.dispatch(g.JF({selectedView:this.props.selectedView,config:a,tab:this.props.tab}))}}componentDidMount(){this.props.options.sortKeys.some(e=>e===this.props.options.tileSortFilterConfig.sort.key)||this.onChange(this.props.options.sortKeys[this.props.options.sortKeys.length-1],this.props.options.tileSortFilterConfig.sort.dir)}render(){return i.createElement(R,{...function(e={}){return{dropdownId:"tile-sort-dropdown",textWhenClosedPrefix:"",valuesToDisplayText:{[b.C0.CREATED_AT]:(0,m.tx)("tile.sort_filter.sort_date_created"),[b.C0.TOUCHED_AT]:(0,m.tx)("tile.sort_filter.sort_last_modified"),[b.C0.ACCESSED_AT]:(0,m.tx)("tile.sort_filter.sort_last_viewed"),[b.C0.NAME]:(0,m.tx)("tile.sort_filter.sort_alphabetical"),[b.C0.TRASHED_AT]:(0,m.tx)("tile.sort_filter.sort_date_trashed"),[b.C0.SEARCH_RELEVANCE]:(0,m.tx)("tile.sort_filter.sort_relevance"),[b.C0.SHARED_AT]:(0,m.tx)("tile.sort_filter.date_shared"),...e}}}(),values:this.props.options.sortKeys,includeSortDirection:!0,tileSortValues:O.values,currentDirection:this.props.options.tileSortFilterConfig.sort.dir,checkedValue:this.props.options.tileSortFilterConfig.sort.key,onChange:this.onChange,isMobile:this.props.isMobile})}}F.displayName="TileSortDropdown"},715621:(e,r,n)=>{var i=n(411855);n(362871),n(671653),n(611768);var a=n(786343);class o extends i.PureComponent{render(){return i.createElement("div",{className:`${a.kL} ${this.props.className||""}`},i.createElement("div",{className:a.zu},this.props.leftSide),!!this.props.center&&i.createElement("div",{className:a.gX},this.props.center),i.createElement("div",{className:a.ok},this.props.rightSide))}}o.displayName="BasicViewBar"},234242:(e,r,n)=>{n.d(r,{p:()=>Z});var i=n(411855),a=n(188507),o=n(776250),s=n(91408),l=n(72933),c=n(320063),d=n(966712),u=n(915440),m=n(711525),p=n(752553),h=n(154254),_=n(881388),g=n(939863),f=n(796849),E=n(871280),y=n(686125),b=n(381635),v=n(701404),I=n(318987),T=n(519692),S=n(329254),w=n(320664),A=n(970516),C=n(270056),N=n(662275),L=n(672517),O=n(10648),R=n(988022),P=n(396226),D=n(688083),k=n(611978),M=n(99506),F=n(279453),x=n(428467),U=n(417512),B=n(984968),V=n(300874),G=n(451e3),H=n(668860),K=n(851363),W=n(564517),$=n(858212),Y=n(728587),z=n(449731),j=n(714728),q=n(837746);function Z({className:e,folder:r,useLGPerms:n,onRenameClick:Z}){let X=(0,a.d4)(e=>e.dropdownShown),J=(0,a.wA)(),[Q,ee]=i.useState(void 0),et=(0,k.z3)();(0,c.h)(()=>{er()});let er=()=>{if("trashedFolders"===et){ee(void 0);return}W.S.getFolderTransfer({folderId:r.id}).then(({data:e})=>{ee(e.meta)},e=>{ee(void 0)})},en=(0,u.Rs)(F.vhY,{folderId:r.id},{enabled:(0,d.kc)().lg_query_asset_transfer_request}),ei=(0,m.oA)(m.oA(en.data)?.project?.pendingAssetTransferRequest),ea=ei&&{id:ei.id,source_user_email:ei.sourceUser?.email,destination_user_email:ei.destinationUser?.email,is_transfer_copy:ei.isTransferCopy}||void 0,eo=(0,L.j6)(),es=function(e){let r=(0,a.d4)(e=>(0,x.getPermissionsState)(e)),n=(0,a.d4)(e=>e.currentUserOrgId),i=(0,a.d4)(e=>e.orgById[e.currentUserOrgId]),c=(0,a.d4)(e=>e.currentTeamId),u=(0,a.d4)(e=>e.loadedFolders),m=(0,$.S)(),L=(0,p.n_)(D.Ct),O=(0,p.n_)(D.k4),R=n||c,k=n?M.OL.ORG:M.OL.TEAM,F=(0,a.d4)(e=>e.teams),W=(0,l.YO)(e),Y=(0,a.wA)();return({folder:e,onRenameClick:a,shouldShowJoinButton:l,getPendingInfo:c,pendingTransfer:p})=>{let M=e.teamId,x=e&&M?F[M]:void 0,$=x?x.org_id:e.orgId;if("loaded"!==W.status)return[];let Z=!!W.data?.canEdit,X=!!W.data?.canDelete,J=!!W.data?.canTrash,Q=!!W.data?.canShare,ee=!!W.data?.canMove,et=!!W.data?.canRestore,er=!!W.data?.canPermanentlyDelete,en=(0,d.kc)().fc_general&&(0,d.kc)().fc_connected_project_invite&&!!W.data?.canConnect,ei=e.teamId?r.teams[e.teamId]:void 0,ea=!!W.data?.canSeeTransferOption,eo=!!W.data?.canEditDescription,es=!!W.data?.canTransferExternally,el=()=>{Y((0,D.jl)({folderId:e.id,loadedFolders:u})),Y(N.to({type:j.W,data:{folderId:e.id}}))},ec=()=>{Y(C.ZJ({folderId:e.id,teamId:e.teamId,isSubscribed:!e.isSubscribed}))},ed=()=>{let r=(0,G.EE)(e.id,n);Y(A.S({url:r}))},eu=()=>{Y(N.to({type:(0,I.C)(),data:{folder:e}}))},em=()=>{Y((0,D.jl)({folderId:e.id,loadedFolders:u})),Y(N.to({type:T.J,data:{folderId:e.id}}))},ep=({canAccessPaidFeatures:e,shouldTransferCopy:r,team:n})=>{let i=(0,d.kc)().enable_starter_project_transfers;if(!n||!es){e_();return}if(e||i){eh(r);return}Y(N.to({type:z.DV,data:{team:n,resource:V.Bi.PROJECT_TRANSFER,currentPlan:P.F.Plan.STARTER,upsellPlan:P.F.Plan.PRO,editorType:null}}))},eh=r=>{e.teamId&&c&&Y(N.to({type:(0,E.Lg)(),data:{folderId:e.id,teamId:e.teamId,entryPoint:E.Lq.PROJECT_SETTINGS,onRequestClose:c,shouldTransferCopy:r}}))},e_=()=>{e.teamId&&Y(N.to({type:(0,y.Y)(),data:{planId:R,planType:k,planName:(i?i.name:F[e.teamId]?.name)||"",entryPoint:E.Lq.PROJECT_SETTINGS,resourceType:"folder",resourceIdOrKey:e.id}}))},eg=()=>{p&&Y(N.to({type:(0,S.d)(),data:{pending:p,canTransferProject:es}}))},ef=(r,n)=>({displayText:r,disabled:(0,d.kc)().asset_transfer_admin_list?!ea:!es,callback:()=>ep({canAccessPaidFeatures:!!(ei&&(0,B.PS)(ei)),shouldTransferCopy:n,team:ei}),trackingEventName:n?"Folder Transfer Copy Click":"Folder Transfer Click",trackingProperties:{folderId:e.id,canUserAccessProFeature:!!(ei&&(0,B.PS)(ei)),entryPoint:"Folder Context Menu"}}),eE=window.innerWidth<=(0,s.hG)(q.tgj),ey=!Q||!eE,eb=(0,d.kc)().folder_settings_modal,ev=[];return e.trashedAt?(et&&ev.push({displayText:(0,g.t)("project_menu.restore"),callback:()=>{(0,o.sx)("Folder Restore Click",{folderId:e.id,teamId:M,orgId:$}),x&&!(0,B.rR)(x,{type:B.sK.ADD_PROJECT})?Y(N.to({type:z.DV,data:{team:x,resource:V.vL.FOLDER,action:K.ZN.CREATE_FOLDER,currentPlan:P.F.Plan.STARTER,upsellPlan:P.F.Plan.PRO,editorType:null}})):O({folderId:e.id,team:x}).catch(()=>{Y(_.s.error((0,g.t)("file_browser.api_folder.error_when_restoring")))})},disabled:!et}),er&&ev.push({displayText:(0,g.t)("project_menu.permanently_delete"),callback:()=>{(0,o.sx)("Folder Permanently Delete Click",{folderId:e.id,teamId:e.teamId,orgId:$}),Y(N.to({type:(0,v.U)(),data:{folder:e,folderOrgId:$}}))},disabled:!er})):eb?(ev.push({displayText:(0,g.t)("file_browser.copy_link"),callback:ed}),l||(ey||ev.push({displayText:(0,g.t)("sidebar.share"),callback:el}),($===R||M===R)&&ev.push({displayText:(0,g.t)("sidebar.move_project"),callback:em,disabled:!ee}),m||ev.push({displayText:e.isSubscribed?(0,g.t)("sidebar.remove_from_favorites"):(0,g.t)("sidebar.add_to_favorites"),callback:ec}),ev.push({displayText:"",separator:!0}),ev.push({displayText:(0,g.t)("project_menu.settings"),callback:()=>{Y(N.to({type:w.l,data:{folderId:e.id}}))},trackingEventName:"Folder Settings Click",trackingProperties:{folderId:e.id,entryPoint:"Folder Context Menu"}}))):(e.description&&(ev.push({displayText:(0,g.t)("project_menu.description"),disabled:!0},{displayText:e.description,displayTextClassName:h.cx.colorTextMenuSecondary.preWrap.$,disabled:!0},{displayText:"",separator:!0}),eo&&ev.push({displayText:(0,g.t)("project_menu.edit_description"),callback:eu},{displayText:"",separator:!0})),!e.description&&eo&&ev.push({displayText:(0,g.t)("project_menu.add_description"),callback:eu}),ev.push({displayText:(0,g.t)("file_browser.copy_link"),callback:ed}),l||(ey||ev.push({displayText:(0,g.t)("sidebar.share"),callback:el}),($===R||M===R)&&ev.push({displayText:(0,g.t)("sidebar.move_project"),callback:em,disabled:!ee}),a&&ev.push({displayText:(0,g.t)("sidebar.rename"),callback:()=>{a&&a(e)},disabled:!Z}),m||ev.push({displayText:e.isSubscribed?(0,g.t)("sidebar.remove_from_favorites"):(0,g.t)("sidebar.add_to_favorites"),callback:ec}),ev.push({displayText:"",separator:!0}),en&&ev.push({displayText:(0,g.t)("project_menu.connect"),callback:()=>{Y(N.to({type:f.C,data:{folder:e,entryPoint:f.hr.PROJECT_SETTINGS}}))},disabled:!1}),ea&&!p&&(ev.push(ef((0,g.t)("project_menu.transfer"),!1)),ev.push(ef((0,g.t)("project_menu.send_a_copy"),!0))),p&&ea&&ev.push({displayText:"",separator:!0},{displayText:(0,g.t)("project_menu.pending_transfer_request"),disabled:!0},{displayText:(0,g.t)("project_menu.view_transfer_details"),callback:()=>eg()},{displayText:"",separator:!0}),ev.push({displayText:(0,g.t)("project_menu.move_to_trash"),callback:()=>{(0,o.sx)("Folder Trash Click",{folderId:e.id,teamId:e.teamId,orgId:$,entryPoint:"Folder Context Menu"}),e.folderPerms?.canSkipDeletionConfirmation?L({folderId:e.id}).catch(()=>{Y(_.s.error((0,g.t)("file_browser.api_folder.error_when_moving_to_trash")))}):Y(N.to({type:(0,b.V)(),data:{folder:e}}))},disabled:!J}),(0,d.kc)().remove_leave_shared_project||X||e.teamId||ev.push({displayText:(0,g.t)("sidebar.leave_shared_project"),callback:()=>{Y((0,U.lP)({role:r.roles.byFolderId[e.id][r.user.id],level:H.e6.NONE}))}}))),ev}}(r.id),el=X?.data?.targetRect;if(!el)return null;let ec=es({folder:r,useLGPerms:n,onRenameClick:Z,getPendingInfo:er,pendingTransfer:(0,d.kc)().lg_query_asset_transfer_request?ea:Q});return i.createElement(L.fu,{trackingTargets:O.K.RCS,name:"Folder Context Menu"},i.createElement(Y.j,{className:e,items:ec,parentRect:el,showPoint:!1,lean:"right",dispatch:J,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},J,r),e.trackingProperties&&(0,R.Cu)({...eo.properties,trackingContext:e.trackingEventName||eo.name,...e.trackingProperties})},shouldUsePortal:(0,d.kc)().projects_in_items_view,autofocusPrevOnDismount:!0}))}},167480:(e,r,n)=>{n.d(r,{Z:()=>o});var i=n(875847),a=n(668860);function o(e,r){let n=r.team_id&&e.teams[r.team_id],o=e.roles.byFolderId[r.id]||{},s=Object.keys(o).map(e=>o[e]).find(e=>e.level===a.e6.OWNER);return{folderName:(0,i.CI)(r),folderTeamName:n?n.name:null,folderOwnerName:s?s.user.handle:null,folderLastUpdated:new Date(r.touched_at),folderSharedAt:r.shared_at?new Date(r.shared_at):null}}},132186:(e,r,n)=>{n.d(r,{W:()=>R});var i=n(411855),a=n(188507),o=n(91408),s=n(881388),l=n(939863),c=n(874109),d=n(981911),u=n(970516),m=n(738269),p=n(662275),h=n(492379),_=n(377090),g=n(688083),f=n(99506),E=n(937294),y=n(147206),b=n(428467),v=n(451e3),I=n(668860),T=n(851363),S=n(845213),w=n(728587),A=n(997016),C=n(725470),N=n(590564),L=n(837746),O=n(472784);function R({className:e,team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P,canDeleteTeam:D}){let k=(0,a.d4)(e=>e.dropdownShown),M=(0,a.wA)(),F=(function(){let e=(0,a.d4)(e=>(0,b.getPermissionsState)(e)),r=(0,a.d4)(e=>e.selectedView),n=(0,a.d4)(e=>e.teamRoleRequests),w=(0,a.wA)();return({team:a,onRenameClick:R,onChangeTeamIconClick:P,teamRoleRequests:D,canDeleteTeam:k})=>{let M=()=>{w(m.oB()),w(p.to({type:N.p,data:{teamId:a.id}}))},F=(0,_.GR)(w,a.id),x=e=>{w(p.to({type:A.$,data:{team:e}}))},U=(0,_.GR)(w,a.id,I.e6.ADMIN),B=(0,_.GR)(w,a.id,I.e6.OWNER),V=e=>{if(!D)return;let r=D[e.id].id;w(h.lT({requestId:r}))},G=e=>{w(p.to({type:N.p,data:{teamId:e.id}}))},H=()=>{w(m.oB());let e=!!a.org_id,r=e=>{w(p.to({type:C.H,data:{team:a,subscriptionStatus:e}}))};e?r(!0):S.$.getSubscriptionStatus({teamId:a.id}).then(({data:e})=>{r(e.meta&&e.meta.subscription_will_renew)}).catch(e=>{e.data?.message&&w(s.s.error(e.data.message))})},K=e.roles.byTeamId[a.id]||{},W=Object.keys(K).filter(e=>!K[e].pending).length,$=(0,b.canAdminTeam)(a.id,e),Y=a?.org_access===f.bU.PUBLIC||W>1,z=k??(0,b.hasAdminRoleAccessOnTeam)(a.id,e),j=(0,y.R$)(e.user,e.currentUserOrgId),q=window.innerWidth<=(0,o.hG)(L.tgj),Z=[{displayText:(0,l.t)("file_browser.copy_link"),callback:()=>{let e=(0,T.bL)(a.id,a.org_id);w(u.S({url:e}))}}];return"search"===r.view&&a.org_id!==e.currentUserOrgId||(a.canEditTeamContents&&q&&!j&&Z.push({displayText:(0,l.t)("file_browser.team.new_project"),callback:()=>{w((0,g.SX)({where:v.Ah.FolderListView,team:{...a,canAdmin:$}}))}}),q&&Z.push({displayText:(0,l.t)("file_browser.team.invite"),callback:()=>{w(p.to({type:(0,c.T)(),data:{teamId:a.id,notifyOnSuccess:!0}}))}}),$&&Z.push({displayText:(0,l.t)("team_view.toolbar.rename"),callback:()=>{w(m.oB()),R&&R(a)}}),$&&P&&Z.push({displayText:(0,l.t)("team_view.toolbar.change_icon"),callback:()=>{w(m.oB()),P&&P(a)}}),Z.push(...(()=>{let r=[];return((0,b.hasViewerRoleAccessOnTeam)(a.id,e)?Y&&r.push({displayText:(0,l.t)("team_view.toolbar.leave_team"),callback:M}):a.org_id&&(0,E.YP)(a,n[a.id],e,a.org_id)!==E.gO.CLICK_JOIN&&r.push({displayText:"",render:()=>i.createElement(d.m,{key:"main-cta",className:O.M,onBypassRequestOverride:B,onJoin:F,onJoinRequestOverride:x,onJoinAsAdmin:U,onLeave:G,onWithdrawRequestForTeamOverride:V,team:a,useLinks:!0,isCardActive:!1})}),z&&r.push({displayText:(0,l.t)("team_view.toolbar.delete_team"),callback:H}),0===r.length)?[]:[{displayText:"",separator:!0},...r]})())),Z}})()({team:r,onRenameClick:n,onChangeTeamIconClick:R,teamRoleRequests:P,canDeleteTeam:D});return i.createElement(w.j,{className:e,items:F,parentRect:k?.data?.targetRect,showPoint:!1,lean:"right",dispatch:M,onSelectItem:(e,r)=>{e.callback&&e.callback("",{},M,r)},autofocusPrevOnDismount:!0})}},114950:(e,r,n)=>{n.d(r,{c:()=>a}),n(411855),n(268853),n(922827),n(966712);var i=n(716034);n(776621),n(239349),n(29680),n(335682),n(37112),n(371399),n(798305);let a=(0,i.eU)(!1)},371399:(e,r,n)=>{n.d(r,{O:()=>i}),n(411855),n(966712);let i=(0,n(716034).eU)(!1)},484525:(e,r,n)=>{n.d(r,{_:()=>l});var i=n(411855),a=n(163023),o=n(42259),s=n(256127);function l({is24x24:e}){return i.createElement(a.B,{svg:s.A,className:o.K,svgClassName:e?o.B:void 0})}},175420:(e,r,n)=>{n.d(r,{C2:()=>d,Gx:()=>u});var i=n(411855),a=n(939863),o=n(295867),s=n(802536),l=n(882225),c=n(13326);function d({badges:e},r,n){return e.some(e=>e===l.s.FIGMA_PARTNER)?i.createElement(o.c,{showBorder:r,is24x24:n}):null}function u(e){let r=i.createElement("a",{href:"https://www.figma.com/partners/",target:"_blank",className:c.RL,onClick:e=>{e.stopPropagation()}},(0,a.tx)("community.detail_view.figma_partner_this_creator_is"),i.createElement("span",{className:c.kz},(0,a.tx)("community.learn_more")));return i.createElement(s.m_,{preview:r},e.children)}},408552:(e,r,n)=>{n.d(r,{$3:()=>y,QP:()=>E,V6:()=>h,op:()=>f});var i=n(411855),a=n(188507),o=n(939863);n(654923);var s=n(466636),l=n(697551),c=n(555328),d=n(483327),u=n(178787),m=n(365292);function p(e){let r=(0,s.bV)(e.resource.monetized_resource_metadata);return i.createElement(m.Ex,{background:"light",height:e.height},r)}function h({resource:e,showPrice:r=!1,height:n,isPaymentAnnualSubscription:a=!1,backgroundColor:l,border:c}){if(e&&(0,u.Uv)(e.monetized_resource_metadata)){let d=a?(0,s.bV)(e.monetized_resource_metadata,!0):(0,s.bV)(e.monetized_resource_metadata);return i.createElement(m.Ex,{height:n,background:l||"light",border:c},r?(0,o.tx)("community.buyer.subscribed_with_price",{priceString:d}):(0,o.tx)("community.buyer.subscribed"))}return i.createElement(m.Ex,{height:n,background:l||"light",border:c},(0,o.tx)("community.buyer.purchased"))}function _(e){return i.createElement(m.Ex,{background:"light",height:e.height},(0,o.tx)("community.detail_view.third_party_badge.off_platform"))}function g(e){return i.createElement(m.Ex,{background:"light",height:e.height},(0,o.tx)("community.buyer.in_app_purchases"))}var f=(e=>(e.PURCHASED="purchased",e.OFF_PLATFORM="off_platform",e.FREEMUM="freemium",e.PRICE="price",e))(f||{});function E({resource:e,height:r,validBadges:n=Object.values(f)}){return y({resource:e,height:r,validBadges:n,authedActiveCommunityProfile:(0,a.d4)(e=>"authedActiveCommunityProfile"in e?e.authedActiveCommunityProfile:null)})}function y({resource:e,height:r,validBadges:n=Object.values(f),authedActiveCommunityProfile:a}){return e?!(a&&(0,l.cs)(a))&&(0,d.t)(e)&&e.community_resource_payment&&(0,s.QQ)(e.community_resource_payment)?n.includes("purchased")?i.createElement(h,{resource:e,height:r}):null:(0,c.PM)(e)?n.includes("freemium")?i.createElement(g,{height:r}):null:(0,c.m3)(e)?n.includes("price")?i.createElement(p,{resource:e,height:r}):null:(0,c.zF)(e)&&n.includes("off_platform")?i.createElement(_,{height:r}):null:null}},472353:(e,r,n)=>{n.d(r,{w5:()=>c,mG:()=>l});var i=n(411855);n(629019);var a=n(776250);n(493323),n(154254);var o=n(939863),s=n(837324);function l(e,r,n,i){(0,a.sx)("cmty_purchase_button_click",{context:r,resource_type:(0,s.Dl)(e),resource_id:e.id,user_id:n,profile_id:i})}function c({metadata:e,condensed:r}){return i.createElement("span",{className:r?"purchase_button_view--freeTrialCondensed--zoo-d text--fontPos9--naThA text--_fontBase--QdLsd":"purchase_button_view--freeTrial--KSIhj text--fontPos13--xW8hS text--_fontBase--QdLsd"},r?(0,o.tx)("community.resource.free_trial_days",{days:e.trial_length_in_days}):(0,o.tx)("community.resource.includes_free_trial_days",{days:e.trial_length_in_days}))}n(466636),n(672517),n(99506),n(555328),n(178787),n(376485),n(498606),n(143678)},203008:(e,r,n)=>{n.d(r,{$O:()=>l,Jv:()=>s,TI:()=>a,rc:()=>o});var i=n(411855);function a(){return i.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 7.75L7 10V1H1V10L4 7.75ZM0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625Z",fill:"var(--color-icon, black)"}))}function o(){return i.createElement("svg",{viewBox:"0 0 8 12",height:"100%",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 0.5625C0 0.25184 0.25184 0 0.5625 0H7.4375C7.74816 0 8 0.25184 8 0.5625V11.4375C8 11.6693 7.73541 11.8016 7.55 11.6625L4 9L0.45 11.6625C0.26459 11.8016 0 11.6693 0 11.4375V0.5625Z",fill:"var(--color-icon, black)"}))}function s(){return i.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 9.98876L9 13.2775V1.02772H1V13.2775L5 9.98876ZM0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148Z",fill:"var(--color-icon, black)"}))}function l(){return i.createElement("svg",{height:"100%",viewBox:"0 0 10 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M0 0.770787C0 0.345093 0.335786 0 0.75 0H9.25C9.66421 0 10 0.345093 10 0.770787V14.6139C10 14.937 9.63628 15.1167 9.39074 14.9148L5 11.3049L0.609261 14.9148C0.363725 15.1167 0 14.937 0 14.6139V0.770787Z",fill:"var(--color-icon, black)"}))}},447227:(e,r,n)=>{n.d(r,{r5:()=>d});var i=n(411855);n(188507);var a=n(460845);n(776250),n(27087);var o=n(154254);n(939863);var s=n(296045),l=n(988932);n(749949),n(837324),n(198181);var c=n(417659);function d({authors:e}){return i.createElement("div",null,e.map(e=>i.createElement(a.N_,{className:"author_dropdown_preview--authorPreviewListRow--XiWec text--fontPos12--YsUAh text--_fontBase--QdLsd",to:new c.xn({profileHandle:e.profile_handle}).to,key:e.id},i.createElement(s.e,{entity:e}),i.createElement("div",{className:"author_dropdown_preview--authorPreviewListName--sVzBY"},i.createElement("span",{className:o.cx.ellipsis.noWrap.overflowHidden.$},e.name),i.createElement(l.l,{profile:e})))))}n(672517),n(712121)},802536:(e,r,n)=>{n.d(r,{So:()=>c,m_:()=>d});var i=n(411855),a=n(629019),o=n.n(a);n(776621);let s=(()=>{let e=[];return["scroll","resize"].forEach(r=>{window.addEventListener(r,()=>{e=e.filter(e=>l(e.el,!1,e.initialHPosition,e.initialVPosition))})}),{set:(r,n,i)=>{e.push({el:r,initialHPosition:n,initialVPosition:i})}}})(),l=(e,r=!1,n,i)=>{if(!e||!("true"===e.parentNode.getAttribute("show-dropdown")||e.parentNode===document.activeElement||e.parentNode?.firstChild===document.activeElement||e===document.activeElement)&&!r)return!1;if(e.parentNode instanceof HTMLElement&&"true"===e.parentNode.dataset.disableRepositioning)return!0;e.dataset.vPosition=i||"below",e.dataset.hPosition="";let a=e.getBoundingClientRect();return a.bottom>window.innerHeight-20?e.dataset.vPosition="above":a.top<20&&(e.dataset.vPosition="below"),a.right>window.innerWidth-100?e.dataset.hPosition="right":a.left<20?e.dataset.hPosition="left":e.dataset.hPosition!==n&&(e.dataset.hPosition=n),!0};function c({children:e,preview:r,className:n,dropdownClassName:a,horizontalPosition:c,verticalPosition:d,disableRepositioning:u,borderRadius:m,allowHoverOnDropdownContents:p=!0}){let h=i.useRef(null),[_,g]=i.useState(!1),[f,E]=i.useState(0),y=e=>{window.innerWidth<500||(E(setTimeout(()=>{let r=h.current;r&&r.parentNode&&(r.parentNode.setAttribute("show-dropdown",e+""),!1===e?setTimeout(()=>{g(e)},150):(s.set(r,c,d),g(e)))},150)),clearTimeout(f))};return i.useLayoutEffect(()=>{_&&!u&&l(h.current,!0,c,d)},[_]),i.createElement("div",{className:n||"dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd","show-dropdown":"false",onMouseEnter:()=>y(!0),onMouseLeave:()=>y(!1),tabIndex:0,"data-disable-repositioning":u,"data-hover-dropdown":!0},i.createElement("div",{onMouseLeave:p?void 0:()=>y(!1)},e),i.createElement("div",{className:o()("dropdown--dropdownContents--BqcL5",a),style:m?{borderRadius:`${m}px`}:{},"data-v-position":d||"below","data-h-position":c||"",ref:h,"data-dropdown-contents":!0},_&&r))}function d({preview:e,children:r}){return i.createElement(c,{className:o()({"dropdown--tooltip--Sh4Vu dropdown--dropdown--IX0tU text--fontPos14--OL9Hp text--_fontBase--QdLsd":!0}),preview:e,horizontalPosition:"center"},r)}},674694:(e,r,n)=>{n.d(r,{O7:()=>l,Xy:()=>c});var i=n(411855),a=n(999021),o=n(319905),s=n(487386),l=(e=>(e.DETAIL="detail",e.UNIVERSAL_INSERT="universal_insert",e))(l||{});function c(e){let r={onLoad:e.onLoad,loading:"lazy",draggable:e.draggable};return i.createElement(a.c,{sizes:function(e){switch(e){case"universal_insert":return;case"detail":r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DETAIL;break;default:r=s.a.COMMUNITY_HUB_FILE_THUMBNAIL_DEFAULT}var r,n=Object.entries(r).map(([e,r],n)=>`(min-width: ${e}px) ${r}vw`);return n.push("100vw"),n.join(", ")}(e.thumbnailContext),srcSet:function(e,r,n,i){let a;if(!e||!r)return"";let o=Object.entries(n||{});if(!n){let n=function(e){if(!e)return;let r=e.lastIndexOf("/"),n=e.indexOf(".",r);return e.substring(r+1,n)}(r);o=Object.keys(s.B.COMMUNITY_HUB_FILE_THUMBNAIL).map(r=>[r,`/community/file/${e}/thumbnail/${r}?signature=${n}`])}return(o.push(["1600",r]),"universal_insert"===i?o.map(([e,r])=>{let n=Math.round(parseInt(e)/80*10)/10;return`${r} ${n}x`}):o.map(([e,r])=>`${r} ${e}w`)).join(", ")}(e.hubFileId,e.image,e.resizedThumbnailUrls,e.thumbnailContext),src:e.image,image_type:o.y.COMMUNITY_HUB_FILE_THUMBNAIL,alt:e.alt,className:e.className,imageProps:r})}},546856:(e,r,n)=>{n.d(r,{Cv:()=>S,Mr:()=>T});var i=n(411855),a=n(629019),o=n.n(a);n(96328);var s=n(428322),l=n(348425);n(154254),n(939863);var c=n(535e3),d=n(408552);n(988932);var u=n(674694),m=n(206144),p=n(749949),h=n(837324),_=n(612776),g=n(545941);n(417659),n(672517);var f=n(99506),E=n(555328);n(978527);var y=n(37637);n(447227);var b=n(619351),v=n(313507),I=n(851750);function T({resource:e}){let r=(0,d.QP)({resource:e,height:"24"});if(r)return i.createElement("div",{className:v.BQ},r);let n=(0,c.n)({badges:e.badges});return n?i.createElement("div",{className:v.BQ},i.createElement(c.v,null,n)):null}function S({resource:e,isMetaHidden:r,onIntersectionChange:n,onClickOverride:a,index:c,subView:d}){let S=(0,p.J)(),w=(0,_.X5)(),A=(0,h.qD)(e),C=e.client_meta&&JSON.parse(e.client_meta)?.background_color,N=e.thumbnail_is_set;e.viewer_mode===f.y4.WHITEBOARD&&(C={r:1,g:1,b:1});let L=i.createElement(u.Xy,{image:e.thumbnail_url,hubFileId:e.id,onLoad:e=>e.target.style.opacity="1",alt:A.name,resizedThumbnailUrls:e.resized_thumbnail_urls}),O=N?v.zA:e.viewer_mode===f.y4.WHITEBOARD?v.ZW:v.XO;return i.createElement("div",{className:v.Sl,"data-testid":"hub-file-tile"},i.createElement(s.a,{onIntersectionChange:e=>n?.(e)}),i.createElement(m.A6,{to:(0,h._t)({resource:e}),onClick:r=>{(0,g.cB)("hub_file",e.id,c,S,d)},onClickOverride:a,className:w?v.nJ:v.BN},i.createElement("div",{className:o()(O,{[v.$c]:w}),style:{backgroundColor:C&&`rgb(${255*C.r}, ${255*C.g}, ${255*C.b})`}},L,e.viewer_mode===f.y4.PROTOTYPE&&i.createElement(l.t,{svg:I.A,className:v.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:I.A}),i.createElement("div",{className:v.JM},i.createElement(y.dn,{editorType:(0,h.JJ)(e.viewer_mode)})),!r&&i.createElement(T,{resource:e}))),!r&&i.createElement(b.my,{resource:e,type:E.vt.HUB_FILE}))}},442898:(e,r,n)=>{n(411855),n(843540),n(776250);var i=n(697170);n(737947);var a=n(966712),o=n(716034);n(195847),n(50458),n(879319);var s=(e=>(e[e.CLOSED=0]="CLOSED",e[e.PRELOAD=1]="PRELOAD",e[e.OPEN=2]="OPEN",e))(s||{});let l=(0,a.kc)().iframe_triggered_one_tap?`/login_iframe?with_community_header=true&type=fixedmodal&one_tap_origin=${i.DT.COMMUNITY}`:"/login_iframe?with_community_header=true&type=fixedmodal";(0,o.eU)({state:0,url:l,mounted:!1}),(0,o.eU)(!1)},843540:(e,r,n)=>{n(411855);var i=n(716034);n(195847),n(163023),n(672517),n(307780),n(442898),n(50458),n(879319),(0,i.eU)(null)},869963:(e,r,n)=>{n(411855),n(629019),n(563706),n(163023),n(154254),n(939863),n(466636),n(498606),n(802536)},206144:(e,r,n)=>{let i;n.d(r,{A6:()=>p});var a=n(411855),o=n(737947),s=n(913270),l=n(123130),c=n(198181);n(798099);let d=e=>({type:"SELECT_VIEW",payload:e}),u=/^\/community\/(file|widget|plugin)\/(\d+)/,m=/^\/@(.+)/;function p({to:e,onClickTracking:r,onClick:n,onClickOverride:p,className:h,children:_,style:g,onRef:f,target:E}){return a.createElement("a",{href:e,onClick:a=>{if(r?.(a),!a.ctrlKey&&!a.metaKey){if(n&&n(a),p){a.preventDefault(),p(a);return}if(function(e){let r=(0,s.gV)(window.location.pathname),n=(0,s.gV)(e);return r.reactRouterHandled&&n.reactRouterHandled}(e)){a.preventDefault(),o.Ay.push(e);return}(0,c.M)()&&function(e,r){let n=!1,{pathname:a}=window.location;if(!(/^\/community/.test(a)&&(0,c.M)())||u.test(e)||m.test(e)){if(u.test(e)){n=!0;let[r,a,o]=e.match(u);i(d((0,l.p)(a,o)))}else if(m.test(e))n=!0,i(d({view:"communityHub",subView:"handle",handle:e.match(m)[1]}));else{n=!0;let[r,a]=e.split("?");a=a?`?${a}`:"",i(d({data:(0,s.wl)(r,a),subView:"searchAndBrowse",view:"communityHub"}))}n&&r&&(r.preventDefault(),r.stopPropagation())}}(e,a);return}},style:g,className:h,ref:e=>{f?.(e)},target:E},_)}},335666:(e,r,n)=>{n.d(r,{X:()=>a});var i=n(411855);function a(e){let[r,n]=i.useState(!0);return i.useEffect(()=>{let r=new Image;r.onload=()=>{let e=r.width/r.height;n(!(Math.abs(e-2)<Math.abs(e-16/9)))},r.src=e||""},[e]),r}n(837324),n(629521)},654923:(e,r,n)=>{n.d(r,{I:()=>l});var i=n(915440),a=n(466636),o=n(279453),s=n(555328);function l(e){let r=e&&(0,s.m3)(e)?e.monetized_resource_metadata.id:"-1",n=(0,i.Rs)(o.oro,{monetizedResourceMetadataId:r},{enabled:!0});if("loaded"!==n.status||n.errors?.length)return e?.community_resource_payment;{let{communityResourcePayment:e}=n.data;if(!e)return;return(0,a.xs)(e)}}},349804:(e,r,n)=>{n.d(r,{aZ:()=>l}),n(966712);var i=n(939863),a=n(815063),o=n(742580);let s={[o.LJ.visualAssets]:()=>(0,i.t)("community.categories.visual_assets"),[o.LJ.development]:()=>(0,i.t)("community.categories.development"),[o.LJ.accessibility]:()=>(0,i.t)("categories.accessibility"),[o.LJ.brainstorming]:()=>(0,i.t)("categories.brainstorming"),[o.LJ.classroomActivities]:()=>(0,i.t)("categories.classroom_activities"),[o.LJ.designTemplates]:()=>(0,i.t)("community.categories.design_templates"),[o.LJ.designTools]:()=>(0,i.t)("community.categories.design_tools"),[o.LJ.desktopAppsWebsites]:()=>(0,i.t)("categories.desktop_apps_websites"),[o.LJ.diagramming]:()=>(0,i.t)("categories.diagramming"),[o.LJ.editingEffects]:()=>(0,i.t)("categories.editing_effects"),[o.LJ.education]:()=>(0,i.t)("community.categories.education"),[o.LJ.fileOrganization]:()=>(0,i.t)("categories.file_organization"),[o.LJ.fontsTypography]:()=>(0,i.t)("categories.fonts_typography"),[o.LJ.funGames]:()=>(0,i.t)("categories.fun_games"),[o.LJ.icons]:()=>(0,i.t)("community.categories.icons"),[o.LJ.illustrations]:()=>(0,i.t)("categories.illustrations"),[o.LJ.importExport]:()=>(0,i.t)("categories.import_export"),[o.LJ.libraries]:()=>(0,i.t)("categories.libraries"),[o.LJ.mobileApps]:()=>(0,i.t)("categories.mobile_apps"),[o.LJ.portfolios]:()=>(0,i.t)("categories.portfolios"),[o.LJ.calendarTemplates]:()=>(0,i.t)("categories.calendar_templates"),[o.LJ.presentations]:()=>(0,i.t)("categories.presentations"),[o.LJ.prototypingAnimation]:()=>(0,i.t)("categories.prototyping_animation"),[o.LJ.resumes]:()=>(0,i.t)("categories.resumes"),[o.LJ.shapesColors]:()=>(0,i.t)("categories.shapes_colors"),[o.LJ.stockPhotography]:()=>(0,i.t)("categories.stock_photography"),[o.LJ.strategicPlanning]:()=>(0,i.t)("categories.strategic_planning"),[o.LJ.teamMeetings]:()=>(0,i.t)("categories.team_meetings"),[o.LJ.tutorials]:()=>(0,i.t)("categories.tutorials"),[o.LJ.uiKits]:()=>(0,i.t)("categories.ui_kits"),[o.LJ.wireframes]:()=>(0,i.t)("categories.wireframes"),[o.LJ.whiteboarding]:()=>(0,i.t)("community.categories.whiteboarding")};function l(e){if("title"in e.i18n_meta)return(0,i.Yd)(e.i18n_meta.title,e.title);let r=(0,a.S)(e.url_slug,o.LJ);return r?s[r]?.()??e.title:e.title}},886133:(e,r,n)=>{n.d(r,{y$:()=>l,Lj:()=>s});var i=n(411855);n(629019),n(563706);var a=n(939863);n(447227),n(802536),n(417659),n(672517);var o=n(313507);function s(e){let r=e.community_publishers.accepted;return 0===r.length?"":1===e.community_publishers.accepted.length?r[0].name:(0,a.t)("community.publisher_with_suffix",{publisherName:r[0].name,publishersSuffix:(0,a.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r.length-1})})}function l(){return i.createElement("svg",{className:o.u1,viewBox:"0 0 50 50"},i.createElement("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"}))}},837324:(e,r,n)=>{n.d(r,{Cg:()=>V,Co:()=>T,DV:()=>F,Dl:()=>R,HD:()=>S,JJ:()=>C,KH:()=>W,ME:()=>H,N6:()=>G,QU:()=>K,UI:()=>M,Uu:()=>B,_t:()=>k,cX:()=>O,lW:()=>x,nF:()=>$,qD:()=>A,r7:()=>L,rk:()=>N,ss:()=>P,uv:()=>z,vC:()=>U});var i=n(140593),a=n(841563),o=n.n(a),s=n(737947);n(22332),n(966712);var l=n(96328),c=n(709495),d=n(357611),u=n(971120);n(675665),n(835476);var m=n(592597),p=n(97128);n(107877);var h=n(259927),_=n(99506),g=n(540019),f=n(555328),E=n(137459);n(813408);var y=n(622139),b=n(376485);n(629521);var v=n(583894);n(566083);var I=n(158996);n(930269);let T=new RegExp(/^[\w.]{0,30}$/),S=new RegExp(/^\w{0,15}$/);function w(e){return"current_hub_file_version_id"in e?e.versions[e.current_hub_file_version_id]:"current_plugin_version_id"in e&&e.current_plugin_version_id?e.versions[e.current_plugin_version_id]:void 0}function A(e){return w(e)}function C(e){switch(e){case _.y4.SLIDE_TEMPLATE:return E.LE.SLIDES;case _.y4.WHITEBOARD:return E.LE.FIGJAM;case _.y4.SITE_TEMPLATE:return E.LE.SITES;case _.y4.CANVAS:case _.y4.PROTOTYPE:default:return E.LE.FIGMA}}function N(e){switch(e){case _._Y.DESIGN:return E.LE.FIGMA;case _._Y.WHITEBOARD:return E.LE.FIGJAM;case _._Y.SLIDES:return E.LE.SLIDES;case _._Y.SITES:return E.LE.SITES;case _._Y.COOPER:return null;default:(0,i.xb)(e)}}function L(e){return"viewer_mode"in e&&e.viewer_mode===_.y4.LIBRARY}function O(e){return null!==e&&"viewer_mode"in e&&e.viewer_mode===_.y4.SLIDE_TEMPLATE}function R(e){return function(e){switch(e){case f.vt.HUB_FILE:return p.Uo.FILE;case f.vt.PLUGIN:return p.Uo.PLUGIN;case f.vt.WIDGET:return p.Uo.WIDGET}}((0,I.Vm)(e))}function P(e,{plural:r=!1}={}){let n=(0,I.Vm)(e);return r?n===f.vt.HUB_FILE?p.UF.FILE:n===f.vt.WIDGET?p.UF.WIDGET:p.UF.PLUGIN:n===f.vt.HUB_FILE?p.Uo.FILE:n===f.vt.WIDGET?p.Uo.WIDGET:p.Uo.PLUGIN}var D=(e=>(e.HUB_FILES="hub_files",e.PLUGINS="plugins",e.WIDGETS="widgets",e))(D||{});function k({resource:e}){return M({path:R(e),id:e.id,name:w(e)?.name??""})}function M({path:e,id:r,name:n}){let i=(0,l.fs)(n||"");return`/community/${e}/${r}${""===i?"":"/"}${i}`}function F(e){return`${location.origin}${k({resource:e})}`}function x(e){var r=document.createElement("input");r.style.position="fixed",r.style.top="-1000px",r.value=e,r.classList.add(h.Dm),document.body.appendChild(r),r.select(),document.execCommand("copy"),r.parentNode.removeChild(r)}function U(e,r){if(r)return r+" | Figma";if("/community"===s.Ay.location.pathname||!e)return"Add a little magic to your files";if("/community/plugins"===s.Ay.location.pathname)return"Powerful Plugins Made Just For Figma";if("/community/widgets"===s.Ay.location.pathname)return"Customize your space with Widgets";let n=[];return e.sort_by===c.e.Browse.PUBLISHED_AT?n.push("Newest"):e.sort_by===c.e.Browse.ALL_TIME?n.push("Top"):e.sort_by===c.e.Browse.POPULAR&&n.push("Trending"),e.editor_type===b.FW.FIGJAM?n.push("FigJam"):e.editor_type===b.FW.FIGMA&&n.push("Figma"),e.resourceType===u.L.BrowseResourceTypes.FILES?n.push("Files"):e.resourceType===u.L.BrowseResourceTypes.WIDGETS?n.push("Widgets"):e.resourceType===u.L.BrowseResourceTypes.PLUGINS?n.push("Plugins"):n.push("Resources"),e.tags?.length>0&&n.push(`tagged as ${e.tags.join(", ")}`),e.query&&n.push(`matching "${e.query}"`),n.join(" ")+" | Figma"}function B(e){return e?.stripe_account_status&&e.stripe_account_status!==v.P5.NONE&&e.stripe_account_status!==v.P5.ACCEPTED}function V(e){return o()(e,(0,y.EB)())}function G(e){let r={},n=(0,I.XW)(e)?e.carousel_media.images:e.carousel_media_urls,i=(0,I.XW)(e)?e.carousel_media.videos:"carousel_videos"in e&&e?.carousel_videos;return n&&Object.entries(n).forEach(([e,n])=>{r[e]={...n,type:"image"}}),i&&Object.entries(i).forEach(([e,n])=>{r[e]={...n,type:"video"}}),Object.entries(r).sort(([e],[r])=>parseInt(e)-parseInt(r)).map(([e,r])=>r)}function H(e,r){if(e===_._Y.DESIGN){if(r===_.y4.PROTOTYPE)return d.k.Editors.PROTOTYPE}else if(e===_._Y.WHITEBOARD||e===b.FW.FIGJAM)return d.k.Editors.FIGJAM;else if(e===_._Y.SLIDES)return d.k.Editors.SLIDES;else if(e===_._Y.SITES)return d.k.Editors.SITES;else if(e===b.FW.DEV)return d.k.Editors.DEV_MODE;return d.k.Editors.FIGMA}function K(...e){return g.M4.fetch((0,m.iB)(H(...e)))}function W(e,{pluralized:r,capitalized:n}={}){return function(e,{pluralized:r,capitalized:n}={}){return Y((()=>{switch(e){case f.vt.PLUGIN:return"plugin";case f.vt.WIDGET:return"widget";case"comment":return"comment";case f.vt.HUB_FILE:return"hub file";default:throw Error("Unsupported Type")}})(),{pluralized:r,capitalized:n})}((0,I.Vm)(e),{pluralized:r,capitalized:n})}function $(e,{pluralized:r,capitalized:n}={}){return e?Y(f.bD.WIDGET,{pluralized:r,capitalized:n}):Y(f.bD.PLUGIN,{pluralized:r,capitalized:n})}function Y(e,{pluralized:r,capitalized:n}={}){return e+=r?"s":"",n&&void 0!==e[0]&&(e=e[0].toUpperCase()+e.substr(1)),e}function z(e){let r=new Date("2025-01-01T00:00:00Z"),n=w(e)?.created_at;return!!n&&new Date(n)<r}},612776:(e,r,n)=>{n.d(r,{Dw:()=>E,GM:()=>_,Oh:()=>m,Su:()=>y,Tg:()=>g,X5:()=>u,aA:()=>f,uY:()=>p});var i=n(411855),a=n(966712),o=n(418956),s=n(647899);n(226055),n(696673);var l=n(106757),c=n(99506),d=n(813408);function u(){let{getConfig:e}=(0,s.I7)("cmty_resource_tile_and_row_redesign");return e().get("enabled",!1)}function m(){return(0,a.kc)().community_category_filter__by}function p(){let{getConfig:e}=(0,s.I7)("cmty_slides_publishing"),r=!!(0,a.kc)().piper_community_templates_publish;return(0,i.useCallback)(()=>e().get("enabled",!1)||r,[r,e])}var h=(e=>(e.ASSET_PANEL_ONLY="asset_panel_only",e.ASSET_PANEL_AND_TOOLBAR="asset_panel_and_toolbar",e))(h||{});function _(){let{getConfig:e}=(0,s.I7)("exp_cmty_visual_assets"),r=(0,o.md)(l.UQ),n=(0,a.kc)().cmty_visual_assets;return(0,i.useCallback)(()=>n&&r?e().get("entrypoint",null):null,[e,r,n])}function g(){return!!(0,a.kc)().cmty_rdp_resource_platform}function f(e,r){return[d.k2.RESOURCE_PAGE,d.k2.EDITOR,d.k2.UNIVERSAL_POSTING].includes(e)&&void 0!==r&&[null,c._Y.DESIGN,c._Y.WHITEBOARD,c._Y.SITES].includes(r)&&!!(0,a.kc)().cmty_file_publishing_rearch}function E(e,r){return(0,i.useCallback)(()=>f(e,r),[r,e])}function y(){return!!(0,a.kc)().cmty_sites_full_file_publishing}},957956:(e,r,n)=>{n.d(r,{M:()=>o});var i=n(330654),a=(e=>(e.by_creator="by_creator",e.by_tags="by_tags",e))(a||{});function o(e){return i.object({types:i.array(i.nativeEnum(a)),content:i.array(e)})}},913270:(e,r,n)=>{n.d(r,{Gu:()=>T,MU:()=>p,gV:()=>S,sT:()=>_,wl:()=>m}),n(411855);var i=n(157663);n(737947);var a=n(566083),o=n(709495),s=n(910764),l=n(580857),c=n(357611),d=n(971120),u=n(944452);function m(e,r){return _(e,r)||(0,u.J5)(e,r)||function(e,r){let n=decodeURIComponent(e||location.pathname);if(!g.test(n)||f.test(n)||E.test(n))return;let i=("/"===n[0]?n.slice(1):n).split("/"),u={resourceType:d.L.BrowseResourceTypes.MIXED,tags:[],editor_type:c.k.Editors.ALL,sort_by:(0,o.H)(),price:a.C.ALL,category:null,following:!1,pagination:null,creators:l.Z.ALL};for(let e=0;e<b.length&&0!==i.length;e++){let r=b[e](i,u);r&&r[0]&&(i=r[1],u={...u,...r[0]})}u.editor_type=(0,s.G)(u.editor_type,u.resourceType),u.resourceType=(0,s.l)(u.editor_type,u.resourceType);let m=new URLSearchParams(location.search),p=!!m.get("following"),h=(()=>{let e=m.get("creators");return e&&e===l.Z.FOLLOWING?e:u.creators})();return{...u,following:p,creators:h}}(e)}function p(e){return"query"in e?function(e){let r=new URLSearchParams({resource_type:e.resourceType,sort_by:e.sort_by,query:e.query,editor_type:(0,s.G)(e.editor_type,e.resourceType),price:e.price,creators:e.creators&&l.Z.isSearchType(e.creators)?e.creators:l.Z.ALL}).toString();return`/community/search?${r}`}(e):"category"in e&&null!==e.category?(0,u.iB)(e):function(e){let r="/community";e.tags?.length&&(r+=`/tag/${e.tags.join(",")}`),e.resourceType=(0,s.l)(e.editor_type,e.resourceType),e.resourceType!==d.L.BrowseResourceTypes.MIXED&&(r+=`/${e.resourceType}`),"all"!==(0,s.G)(e.editor_type,e.resourceType)&&(r+=`/${e.editor_type}`),e.price&&a.C.FOR_URL_SLUG.indexOf(e.price)>-1&&(r+=`/${e.price}`),e.creators===l.Z.FIGMA_PARTNER&&(r+=`/${e.creators}`),e.sort_by&&e.sort_by!==(0,o.H)()&&(e.sort_by===o.e.Browse.PUBLISHED_AT?r+="/new":e.sort_by===o.e.Browse.POPULAR&&(r+="/trending")),v[r]&&(r=v[r]);let n={};!0===e.following&&(n.following=e.following),e.creators===l.Z.FOLLOWING&&(n.creators=e.creators);let i=Object.keys(n).length>0?new URLSearchParams(n).toString():void 0;return i&&(r+=`?${i}`),r}(e)}let h=/^\/community\/search$/;function _(e,r){if(!(e||=location.pathname).match(h))return null;let n=new URLSearchParams(r||=location.search),i=n.get("query");if(!i)return null;let c=n.get("resource_type");if(!c)return null;let d=n.get("sort_by")||o.e.Search.RELEVANCY,u=(0,s.G)(n.get("editor_type"),c);return{resourceType:c,sort_by:d,editor_type:u,query:i,price:n.get("price")||a.C.ALL,creators:(()=>{let e=n.get("creators");return l.Z.isSearchType(e)?e:l.Z.ALL})()}}let g=/^\/community/,f=/^\/community\/collections?\/?/,E=/^\/community\/(file|plugin|widget)\//;var y=(e=>(e.NEW="new",e.POPULAR="popular",e.TRENDING="trending",e.TAG="tag",e.COMMUNITY="community",e))(y||{});let b=[function(e){return"community"===e[0]&&[{},e.slice(1)]},function(e){return"tag"===e[0]&&!!e[1]&&[{tags:e[1].split(",")},e.slice(2)]},function(e){let r=e[0];return Object.values(d.L.BrowseResourceTypes).indexOf(r)>-1&&[{resourceType:r},e.slice(1)]},function(e,r){let n=e[0];return Object.values(c.k.Editors).indexOf(n)>-1&&[{editor_type:(0,s.G)(n,r.resourceType)},e.slice(1)]},function(e){let r=e[0];return a.C.FOR_URL_SLUG.indexOf(r)>-1&&[{price:r},e.slice(1)]},function(e){let r=e[0];return r===l.Z.FIGMA_PARTNER&&[{creators:r},e.slice(1)]},function(e){let r=null;return"new"===e[0]&&(r=o.e.Browse.PUBLISHED_AT),"popular"===e[0]&&(r=o.e.Browse.ALL_TIME),"trending"===e[0]&&(r=o.e.Browse.POPULAR),!!r&&[{sort_by:r},e.slice(1)]}],v={"/community/mixed":"/community"};var I=(e=>(e.SEARCH="/community/search",e))(I||{});function T(){return{resourceType:d.L.BrowseResourceTypes.MIXED,sort_by:(0,o.H)(),editor_type:c.k.Editors.ALL,price:a.C.ALL,tags:[],pagination:null,category:null,creators:l.Z.ALL}}function S(e){return/\/community\/(file|plugin|widget)\/\d+/.test(e)?{reactRouterHandled:!0,subView:"resourcePage"}:/^\/@/.test(e)?{reactRouterHandled:!0,subView:"handle"}:/\/community*/.test(e)?{reactRouterHandled:!0,subView:"searchAndBrowse"}:(i.k.warn(`If this is firing, it means you're trying to use logged-out Community routing on a non-Community URL.
url: ${e}`),{reactRouterHandled:!1,subView:!1})}d.L.BrowseResourceTypes.MIXED,o.e.Search.RELEVANCY,c.k.Editors.ALL,a.C.ALL,l.Z.ALL},815063:(e,r,n)=>{n.d(r,{S:()=>i});function i(e,r,n){return Object.values(r).includes(e)?e:n}},466636:(e,r,n)=>{n.d(r,{F8:()=>_,Lt:()=>L,Mj:()=>f,QQ:()=>w,UO:()=>C,V4:()=>N,WD:()=>g,X2:()=>I,XR:()=>v,Yp:()=>E,ae:()=>h,bV:()=>b,mZ:()=>u,up:()=>T,vf:()=>p,vi:()=>S,wF:()=>m,xs:()=>O,zt:()=>y});var i=n(527735),a=n(939863),o=n(61057),s=n(820113),l=n(555328),c=n(401730),d=n(178787);let u=2,m=1e3;function p(e){if(e?.price){let{price:r}=e;return .01*r}}function h(e){return e?100*e:0}function _(e){return e%1!=0}function g(e,r){return r>e}function f(e,r){return r/e>1.5}function E(e){return e<u||e>=m}function y(e,r){if(!e||!r)return"";let n=1200*e*(1-r/100);return(0,a.t)("community.buyer.price_per_year",{priceString:T(n,n%100!=0)})}function b(e,r=!1){let{price:n,is_subscription:i}=e;if(!i)return T(n,!1);if(r){let r=e.annual_price||0;return(0,a.t)("community.buyer.price_per_year",{priceString:T(r,r%100!=0)})}return(0,a.t)("community.buyer.price_per_month",{priceString:T(n,n%100!=0)})}function v(e){let r=b(e),n=(0,d.Uv)(e)?(0,a.t)("community.buyer.subscribe"):(0,a.t)("community.buyer.buy");return`${n} ${r}`}function I(e){let{price:r,is_subscription:n}=e,i=T(r,r%100!=0);return n?(0,a.t)("community.buyer.price_per_month_subscription",{priceString:i}):(0,a.t)("community.buyer.price_one_time_payment",{priceString:i})}function T(e,r=!1){return new s.vr("usd").formatMoney(e,{showCents:r})}function S(e){switch(e){case d.bG.DOESNT_MEET_NEEDS:return(0,a.t)("community.buyer.refund_reason.doesnt_meet_needs");case d.bG.TECHNICAL_ISSUES:return(0,a.t)("community.buyer.refund_reason.technical_issues");case d.bG.TOO_EXPENSIVE:return(0,a.t)("community.buyer.refund_reason.too_expensive");case d.bG.FOUND_ALTERNATIVE:return(0,a.t)("community.buyer.refund_reason.found_alternative");case d.bG.OTHER:return(0,a.t)("community.buyer.refund_reason.other")}}function w(e){return!!e&&(e.subscription_expires_at&&!isNaN(Date.parse(e.subscription_expires_at))?new Date(e.subscription_expires_at).getTime()+864e5>new Date().getTime()&&!A(e,c.G3.DISPUTED):A(e,c.G3.SUCCEEDED))}function A(e,r){return!!e.status&&e.status===r}function C(e){return e.status===c.G3.SUBSCRIPTION_PAYMENT_FAILED||e.status===c.G3.INVOICE_FINALIZATION_FAILED}function N(e,r){if((0,l.I0)(r)||(0,l.xQ)(r)){let n=(r.plugin_publishers?.accepted||[]).map(e=>e.id),a=(r.plugin_publishers?.pending||[]).map(e=>e.id),o=new Set(n.concat(a)),{pass:s,fail:l}=(0,i.j)(e,e=>o.has(e.id)||e.id===r.creator.id);return{usersCanPurchase:l,publishers:s}}{let n=new Set((0,o.D)(r)),{pass:a,fail:s}=(0,i.j)(e,e=>n.has(e.id));return{usersCanPurchase:s,publishers:a}}}function L({resource:e,payment:r}){let n=e.monetized_resource_metadata;return!!(n&&(0,d.Uv)(n))&&!!n.trial_length_in_days&&(!r||!r.subscription_expires_at)}function O(e){return{status:c.QK[e.status],purchased_at:e.purchasedAt?new Date(e.purchasedAt).toISOString():null,subscription_expires_at:e.subscriptionExpiresAt?new Date(e.subscriptionExpiresAt).toISOString():null,subscription_canceled_at:e.subscriptionCanceledAt?new Date(e.subscriptionCanceledAt).toISOString():null,refund_reason:e.refundReason,monetized_resource_metadata_id:e.monetizedResourceMetadataId,subscription_interval:e.subscriptionInterval}}},22863:(e,r,n)=>{n.d(r,{c:()=>a});var i=n(813408);function a(e){return!!(e&&(e.entity_type===i.o1.ORG||e.entity_type===i.o1.TEAM))}},545941:(e,r,n)=>{n.d(r,{AC:()=>y,G8:()=>f,K2:()=>h,Pg:()=>v,Ul:()=>b,X_:()=>_,cB:()=>I,mk:()=>E});var i=n(140593),a=n(891721),o=n.n(a),s=n(776250),l=n(939863),c=n(835476),d=n(99506);n(555328);var u=n(967409),m=n(837324),p=n(158996);function h(e){return(0,p.XW)(e)?e.name:m.qD(e)?.name}function _(e){switch(e){case c.vt.WIDGET:case c.vt.PLUGIN:return(0,l.tx)("community.using.open_in");case c.vt.FIGJAM_TEMPLATE:return(0,l.tx)("community.duplicate.open_in_figjam");case c.vt.SLIDE_TEMPLATE:return(0,l.tx)("community.use_slide_template");case c.vt.SITE_TEMPLATE:case c.vt.UI_KIT:case c.vt.DESIGN_TEMPLATE:case c.vt.PROTOTYPE:return(0,l.tx)("community.duplicate.open_in_figma");default:(0,i.xb)(e)}}function g(e){let r=document.createElement("div");return r.innerHTML=o().sanitize(e),r.innerText}function f(e,r,n){if(e.tagline)return e.tagline;if(!e.description)return"";let i=(r=r||g)(e.description);return n?function(e){let r=e?.match(/[^.!?\r\n]+[.!?\r\n]+/);return r?r[0].trim():e??""}(i):i}function E(e){return"user_count"in e?e.user_count??0:"unique_run_count"in e?e.unique_run_count:"duplicate_count"in e?e.duplicate_count:0}function y(e){return!!e.publishing_status&&[d.KB.PENDING_PUBLIC,d.KB.PENDING_USER_VISUAL_COMPLIANCE,d.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishing_status)}function b(e){return e.publishing_status===d.KB.APPROVED_PUBLIC}function v(e){return!!e.publishing_status&&[d.KB.DELISTED,d.KB.DELISTED_CREATOR_STRIPE_DISABLED].includes(e.publishing_status)}function I(...e){let{trackingEventName:r,trackingProperties:n}=function(e,r,n,i,a="feed"){return{trackingEventName:"Community Resource Clicked",trackingProperties:{resource_type:e,community_resource_id:r,subView:a,scope:u.Rx.COMMUNITY,index:n,searchSessionId:i}}}(...e);(0,s.sx)(r,n)}},158996:(e,r,n)=>{n.d(r,{Vm:()=>o,XW:()=>l,ws:()=>s});var i=n(140593);n(268853),n(776621),n(835476),n(830445),n(99506);var a=n(555328);function o(e){return s(e)?e.resource_type:(0,a.U)(e)?a.vt.HUB_FILE:(0,a.xQ)(e)?a.vt.WIDGET:(0,a.I0)(e)?a.vt.PLUGIN:void(0,i.xb)(e)}function s(e){return"resource_type"in e}function l(e){return"content"in e}n(137459)},62589:(e,r,n)=>{n.d(r,{nS:()=>o,pO:()=>s}),n(411855);var i=n(753178),a=n(179940);n(776621);class o{get params(){return this._params}get search(){return this._search}get state(){return this._state}constructor(...e){let[r,n,i]=e;this._params=r??{},this._search=n??{},this._state=i??{}}copyWith(e,r,n){return new this.constructor({...this._params,...e},{...this._search,...r},{...this._state,...n})}get pathname(){let e=this.constructor;return(0,i.tW)(e.path,"serializeParams"in e?e.serializeParams(this._params):this._params)}get queryString(){let e=Object.fromEntries(Object.entries(this._search).filter(([,e])=>void 0!==e));if(0===Object.keys(e).length)return"";let r=this.constructor,n="encodeQueryString"in r?r.encodeQueryString??a.lF:a.lF;return`?${n(e)}`}get href(){return`${this.pathname}${this.queryString}`}get to(){return{pathname:this.pathname,search:this.queryString,state:this._state}}}function s(e){return function(r,n={}){let a=(0,i.B6)(r,{...n,path:e.path});return a?{...a,params:"deserializeParams"in e?e.deserializeParams(a.params):a.params}:null}}},709595:(e,r,n)=>{n.d(r,{c9:()=>o,oW:()=>l,tx:()=>s});var i=n(262896);let a="8065774696727";function o(e,r){(0,i.ny)({name:e.name,email:e.email},{ticketForms:["community"],fields:r,suppressAnswerBot:!0})}function s(e){return o(e,[{id:a,value:"community_product_question"}])}function l(e){return o(e,[{id:a,value:"community_refund"}])}},675665:(e,r,n)=>{n.d(r,{S:()=>s,to:()=>c});var i=n(330654),a=n(555328),o=n(835476),s=(e=>(e.file="hub_files",e.plugin="plugins",e.widget="widgets",e))(s||{});let l=i.object({model:o.UL,score:i.number()}),c=i.object({results:i.array(l),total_hits:i.number().optional()});i.object({comments:i.array(a.KS).nullable(),total_count:i.number().optional()});var d=(e=>(e.DescriptionView="descriptionViewSection",e.CommentsView="commentsViewSection",e))(d||{})},742580:(e,r,n)=>{function i(e){return!!e&&void 0!==e.query}n.d(r,{LJ:()=>a,OE:()=>i});var a=(e=>(e.accessibility="accessibility",e.brainstorming="brainstorming",e.classroomActivities="classroom-activities",e.dataTemplates="data-templates",e.designInspirations="design-inspirations",e.designTemplates="design-templates",e.designTools="design-tools",e.desktopAppsWebsites="desktop-apps-websites",e.development="development",e.deviceMockups="device-mockups",e.diagramming="diagramming",e.editingEffects="editing-effects",e.education="education",e.fileOrganization="file-organization",e.fontsTypography="fonts-typography",e.funGames="fun-games",e.icons="icons",e.illustrations="illustrations",e.importExport="import-export",e.instagramTemplates="instagram-templates",e.laptopMockups="laptop-mockups",e.lessonPlans="lesson-plans",e.libraries="libraries",e.mobileApps="mobile-apps",e.portfolios="portfolio-templates",e.calendarTemplates="calendar-templates",e.presentations="presentations",e.prototypingAnimation="prototyping-animation",e.resumes="resume-templates",e.shapesColors="shapes-colors",e.stockPhotography="stock-photography",e.strategicPlanning="strategic-planning",e.teamMeetings="team-meetings",e.tutorials="design-tutorials",e.uiKits="ui-kits",e.visualAssets="visual-assets",e.whiteboarding="whiteboarding",e.wireframes="wireframes",e.workshopTemplates="workshop-templates",e))(a||{}),o=(e=>(e.LANDING="landing",e.NAV="nav",e))(o||{})},592597:(e,r,n)=>{n.d(r,{iB:()=>l});var i=n(540019),a=n(555328),o=n(28567),s=n(222085);let l=i.M4.Query({fetch:async e=>(await o.c.getAll({editorType:e})).data.meta});i.M4.Query({fetch:async e=>(await o.c.getCategoryBySlug({slug:e.categorySlug,tagSlug:e.tagSlug})).data.meta}),i.M4.Query({fetch:async e=>(await s.A.getCommunityShelves({categorySlug:e,shelfType:a.cS.CATEGORY_PAGE})).data.meta[0]})},944452:(e,r,n)=>{n.d(r,{J5:()=>_,iB:()=>g});var i=n(737947),a=n(179940),o=n(566083),s=n(815063),l=n(62589),c=n(709495),d=n(910764),u=n(580857),m=n(357611),p=n(971120),h=n(742580);function _(e,r){let n;let a=decodeURIComponent(e||i.Ay.location.pathname);try{let e=(0,l.pO)(f)(a);if(!e)return null;n=e.params}catch(e){return null}let s=f.parseQueryString(r||i.Ay.location.search),_=n.categorySlug,g=n.tagSlug,E={category:_,resourceType:s.resource_type||p.L.BrowseResourceTypes.MIXED,editor_type:m.k.Editors.ALL,price:s.price||o.C.ALL,creators:u.Z.ALL,sort_by:(0,c.H)(),following:!1,tags:g?[g]:[],pagination:null};E.editor_type=_!==h.LJ.presentations||s.editor_type?(0,d.G)(s.editor_type,E.resourceType):m.k.Editors.SLIDES,E.resourceType=(0,d.l)(E.editor_type,E.resourceType);let y=s.sort_by;y&&[c.e.Browse.ALL_TIME,c.e.Browse.PUBLISHED_AT,c.e.Browse.POPULAR].includes(y)&&(E.sort_by=y);let b=s.creators;return b&&[u.Z.FIGMA_PARTNER,u.Z.FOLLOWING].includes(b)&&(E.creators=b),E}function g(e){let r=(0,s.S)(e.category,h.LJ);return void 0===r?"/community":new f({categorySlug:r,tagSlug:e.tags[0]},{resource_type:(0,d.l)(e.editor_type,e.resourceType),editor_type:(0,d.G)(e.editor_type,e.resourceType),price:e.price,sort_by:e.sort_by,creators:e.creators}).href}class f extends l.nS{}f.path="/community/:categorySlug/:tagSlug?",f.deserializeParams=e=>{let r=(0,s.S)(e.categorySlug,h.LJ);if(void 0===r)throw Error(`CategoryRoute: Invalid category slug ${e.categorySlug}`);return{...e,categorySlug:r}},f.serializeParams=e=>e,f.parseQueryString=e=>{let r=(0,a.xL)(e);return{resource_type:(0,s.S)(r.resource_type,p.L.BrowseResourceTypes),editor_type:(0,s.S)(r.editor_type,m.k.Editors),price:(0,s.S)(r.price,o.C.Price),sort_by:(0,s.S)(r.sort_by,c.e.Browse),creators:(0,s.S)(r.creators,u.Z.Browse)}},Array.from(Object.values(h.LJ)).map(e=>new f({categorySlug:e}).href)},97128:(e,r,n)=>{n.d(r,{Tg:()=>h,UF:()=>u,Uo:()=>d});var i=n(179940),a=n(62589),o=n(637590),s=Object.getPrototypeOf,l=Reflect.get,c=(e,r,n)=>l(s(e),n,r),d=(e=>(e.FILE="file",e.WIDGET="widget",e.PLUGIN="plugin",e))(d||{}),u=(e=>(e.FILE="files",e.WIDGET="widgets",e.PLUGIN="plugins",e))(u||{});class m extends a.nS{constructor(e,r){super(e,r)}}m.deserializeParams=e=>({...e,apiResourceType:e.apiResourceType}),m.serializeParams=e=>e,m.parseQueryString=e=>{let r=(0,i.xL)(e);return{comment:r.comment,checkout:r.checkout,rating:r.rating}};let p=class extends m{constructor(e,r){super({...e,apiResourceType:"file"},r)}};p.path="/community/:apiResourceType(file)/:resourceId/:urlSlug?",p.serializeParams=e=>c(p,p,"serializeParams").call(void 0,{...e,apiResourceType:"file"}),p.parseQueryString=e=>{let r=(0,i.xL)(e);return{...c(p,p,"parseQueryString").call(void 0,e),preview:(()=>{let e=r.preview;if(void 0!==e)return parseInt(e)===o.G4.DEFAULT?o.G4.DEFAULT:e})(),freemium_preview:r.freemium_preview}};let h=p},570999:(e,r,n)=>{n.d(r,{ge:()=>i,qx:()=>a});let i=function(){return!1},a=function(){return!1}},952593:(e,r,n)=>{n.d(r,{U9:()=>i,hZ:()=>a});let i=function(){return!1},a=function(){return!1}},181849:(e,r,n)=>{n.d(r,{U5:()=>o});var i=n(411855);n(572304),n(939683),n(966712);var a=n(716034);n(559036),n(45775),n(29680),n(335682),n(656839),n(37112);let o=(0,a.eU)(!0);i.createContext({connectedInstancesByTlf:new Map,connectedInstancesByTlfGroupedSiblings:new Map,connectedInstancesByGuid:new Map,connectedInstanceTree:void 0,analyticsByComponentKey:new Map})},409272:(e,r,n)=>{n.d(r,{rZ:()=>V,yT:()=>G});var i=n(411855),a=n(188507),o=n(561546),s=n(75395),l=n(615925),c=n(629019),d=n.n(c),u=n(716034),m=n(418956),p=n(153234),h=n(580893),_=n(206316),g=n(46481),f=n(964389),E=n(939863),y=n(175290),b=n(87816),v=n(308977),I=n(855473),T=n(962645),S=n(31225),w=n(152820),A=n(970516),C=n(738269),N=n(259927),L=n(498606),O=n(507956),R=n(788612),P=n(7959),D=n(610462),k=n(451295),M=n(346572),F=n(619826),x=n(522157);let U=(0,u.eU)(!1),B=(e,r={})=>(0,o.WI)(e.map(e=>e.lines.length>0?(0,T.kt)(e.lines,!0):null)).join("\n\n").replace(I.Z4,"").replace(I.M$,"").replace(w.G6,"").replace(w.P1,"").replace(b.k,e=>{let n=r[e];return n?"INSTANCE"===n.type?`/* ${n.name} */`:`/* ${n.message} */`:"/* unknown instance */"});function V({source:e,title:r,selectedAll:n,...a}){let o=(0,O.ks)(),l=(0,v.v4)(),c=(0,i.useMemo)(()=>({name:"Copy code button",type:"code connect"!==e?l.type:void 0,pluginId:"code connect"!==e?l.id:void 0,selectedAll:n,source:e,title:r,isDevMode:o}),[o,l.id,l.type,n,e,r]);return e?i.createElement(f.e6,{...a,className:d()(F.AF,F.cL),trackingProperties:c}):i.createElement(s.E,{...a,className:d()(F.AF,F.cL)})}function G(e){let{code:r,section:n,hasCodeDiff:o,collapseLongSections:s=!0,bottomPadding:c=!1,copyActionEnabled:u=!0,copyAllActionEnabled:h=!0,hideHints:_=!1,recordingKey:f,additionalHeaderActions:b=null,footerActions:v=null,type:I="default",leftHeaderActions:S=null}=e;n.collapseAfterIndex||(n={...n,collapseAfterIndex:15});let w=(0,a.d4)(e=>Object.keys(e.mirror.sceneGraphSelection)[0]),O=(0,a.wA)(),P=function(e){let r=(0,a.wA)();return(0,k.IG)(e.lines,e.language,e.pills,r)}(n),[D,M]=i.useState(s),[G,Y]=i.useState(!1),[z,j]=(0,m.fp)(U),q=h&&z;i.useEffect(()=>{M(s)},[w,s]);let Z=i.useMemo(()=>D&&n.collapseAfterIndex?P.slice(0,n.collapseAfterIndex):P,[P,n.collapseAfterIndex,D]),X=n.collapseAfterIndex?P.length-n.collapseAfterIndex:0,J=e.codeToCopy||r,Q=e.sectionToCopy||n,ee=i.useCallback(()=>{if(!q)return B([Q],Q.pills);{let e=J.reduce((e,r)=>Object.assign(e,r.pills),{});return B(J,e)}},[J,Q,q]),et=i.useCallback(()=>{let e=ee();e&&O(A.lW({stringToCopy:e,ignoreLineBreaks:!1}))},[O,ee]),er=p.rf(p.Pt(f,"copy"),"click",et),en=i.useCallback(()=>{O(A.lW({stringToCopy:window.getSelection()?.toString()||ee(),ignoreLineBreaks:!1}))},[O,ee]),ei=i.useCallback(e=>{e.stopPropagation(),e.preventDefault();let{clientX:r,clientY:n}=e;O(C.j7({type:N.Sl,data:{clientX:r,clientY:n,onCopyText:en}}))},[en,O]),ea=i.useCallback(e=>{h&&j(e.shiftKey),Y(!0)},[j,h]),eo=p.rf(p.Pt(f,"copy"),"mouseenter",ea),es=i.useCallback(e=>{j(!1),Y(!1)},[j]),el=i.useCallback(e=>{j(G&&h&&e.shiftKey)},[G,j,h]);i.useEffect(()=>(document.addEventListener("keydown",el),document.addEventListener("keyup",el),()=>{document.removeEventListener("keydown",el),document.removeEventListener("keyup",el)}),[el]);let ec=function(e){switch(e){case"Modifier":return(0,E.t)("inspect_panel.code.modifier");case"Code":return(0,E.t)("inspect_panel.code.code");case"Style":return(0,E.t)("inspect_panel.code.style");case"Variables":return(0,E.t)("inspect_panel.code.variables");case"Layout":return(0,E.t)("inspect_panel.properties.layout");case"Position":return(0,E.t)("inspect_panel.code.position");case"Other":return(0,E.t)("inspect_panel.code.other");case"Typography":return(0,E.t)("inspect_panel.typography.title");default:return e}}(n.name),ed=G||q,eu=i.useRef(null);return i.createElement(R.VZ,{hideHeader:!0,noPadding:!c,noBorder:!0,recordingKey:`code:${n.name}`},i.createElement(k.GM.Provider,{value:{ref:eu}},i.createElement($,{type:I,header:i.createElement(K,{type:I,rowRef:eu,muted:n.isTextSegment,actions:i.createElement(i.Fragment,null,b||i.createElement(y.M,null),u&&i.createElement(V,{onClick:er,"aria-label":(0,E.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip":h?(0,E.t)("inspect_panel.code.copy_all_shift"):"","data-tooltip-type":L.Ib.TEXT,onMouseEnter:eo,onMouseLeave:es},source:"codegen",title:n.name,selectedAll:q},i.createElement(g.U,{svg:x.A},i.createElement(l.X,null)))),title:ec,leftActions:S}),content:i.createElement(H,{code:n,lines:Z,hideHints:_||ed,hasCodeDiff:o,isCopyHighlightActive:ed,onInstancePillClick:e.onInstancePillClick}),shouldShowMore:D&&X>0,showMoreLinesCount:X,onShowMore:()=>M(!1),copyHoverClassName:u&&ed?F.TJ:void 0,leftGutter:o?function(e,r=!1){return i.createElement("div",{className:d()(F.x4,{[F.R]:r})},e.map((e,r)=>i.createElement("div",{className:d()({[F.BJ]:!0,[F.L6]:e.diff===T.j5.ADDED,[F.pG]:e.diff===T.j5.REMOVED}),key:r},e.diff===T.j5.ADDED?"+":e.diff===T.j5.REMOVED?"-":null)))}(Z,ed):i.createElement("div",{className:F.BA},Z.map((e,r)=>i.createElement("div",{className:F.eT,key:r},r+1))),onContextMenu:ei,footer:v?i.createElement(W,{type:I},v):void 0})))}function H({code:e,lines:r,hideHints:n,hasCodeDiff:a,isCopyHighlightActive:o=!1,onInstancePillClick:s}){let l=i.useCallback(e=>{let r;let n=e.target;n.classList.contains("instance-pill")?r=n:n.parentElement?.classList.contains("instance-pill")&&(r=n.parentElement),r&&s?.(r.dataset.id||"")},[s]),c=({index:s})=>{let c=r[s],u=8*(0,T.Gj)(c).length+16+8,m=i.createElement("span",{style:{display:"inline-block",paddingLeft:u,paddingRight:8,textIndent:-16,flexGrow:1},key:"code","data-testid":`${e.name}${s}`,onClick:l},c.code),p=c.hint,h=void 0!==p&&p.type===S.bv.Tooltip?i.createElement(D.A,{hint:(0,D.x)(p),hidden:n}):null,_=e.lines[s]?.diff;return i.createElement("div",{key:s,className:d()({[F.n8]:!0,[F.vN]:_===T.j5.ADDED&&!o,[F.rq]:_===T.j5.REMOVED&&!o,[F.R0]:a&&_!==T.j5.ADDED&&_!==T.j5.REMOVED&&!o,[F.r9]:a&&_===T.j5.REMOVED&&o})},m,h)};return i.createElement("code",{className:d()(F.Zh,M.y),"data-lang":e.language,style:{minWidth:"100%",whiteSpace:"normal"}},r.map((e,r)=>c({index:r})))}function K({title:e,muted:r,actions:n,type:a,leftActions:o,rowRef:s}){return i.createElement("div",{className:F.Tw,ref:s},i.createElement("div",{className:d()({[F.S7]:!0,[F.aW]:"connected"===a,[F.jW]:"manual"===a})},o,i.createElement(P.xw,{className:r?F.fH:F.Cq,"data-testid":"devHandoffFocusPanelTitle"},e),i.createElement("div",{className:F.zB},n)))}function W({children:e,type:r}){return i.createElement("div",{className:F.p4},i.createElement("div",{className:d()({[F.I$]:!0,[F.aW]:"connected"===r,[F.jW]:"manual"===r})},e))}function $({header:e,content:r,leftGutter:n,footer:a,type:o,shouldShowMore:s,showMoreLinesCount:l,onShowMore:c,onContextMenu:u,copyHoverClassName:m}){let[p,g]=i.useState(null),f=p&&p.value?F.Lo:F.ZP,y=i.useCallback(e=>{g({value:e})},[]),b=!!n,v=!!a,I=i.useRef(null);return i.createElement("div",{className:d()(F._X)},e,i.createElement("div",{className:d()(F.is,m,{[F.Eu]:b,[F.xP]:v,[F.aW]:"connected"===o,[F.jW]:"manual"===o})},b&&n,i.createElement("div",{className:F.jJ},i.createElement(h.Z,{onCanScrollChanged:y,className:d()(f),scrollBarAlways:!0,childRef:I},i.createElement("div",{onContextMenu:u,style:{width:"fit-content",minWidth:"100%"},ref:I},r)),s&&i.createElement("div",{className:F.cH},i.createElement(_.d,{label:(0,E.t)("dev_handoff.code.show_more",{count:l}),onClick:c})))),v&&a)}},308977:(e,r,n)=>{n.d(r,{A0:()=>E,AC:()=>w,Ap:()=>y,LK:()=>f,MT:()=>h,NU:()=>b,Pt:()=>S,S8:()=>I,XP:()=>T,cg:()=>v,p:()=>g,uz:()=>_,v4:()=>C,xv:()=>A});var i=n(411855),a=n(188507),o=n(966712),s=n(418956),l=n(986291),c=n(939863),d=n(756085),u=n(215822),m=n(239671),p=n(638311);let h="FIGMA_PROPERTIES",_="WEB",g="IOS",f="ANDROID",E="CSSBUILDER",y="IOS_UIKIT",b="ANDROID_XML",v="MULTI_NODE",I={[_]:{type:"first-party",id:_},[g]:{type:"first-party",id:g},[y]:{type:"first-party",id:y},[f]:{type:"first-party",id:f},[b]:{type:"first-party",id:b},[v]:{type:"first-party",id:v}};function T(e){let r="string"==typeof e?{type:"first-party",id:e}:e;return r&&r.id&&("first-party"!==r.type||I[r.id])?r:{type:"first-party",id:_}}function S(e){let r=(0,d.$1)(),n=(0,d.j8)();return(0,i.useMemo)(()=>({format(i){if(i?.type==="first-party")switch(i?.id){case E:return"CssBuilder";case _:return(0,c.t)("dev_handoff.code.lang_css");case g:return(0,c.t)("dev_handoff.code.lang_swiftui");case y:return(0,c.t)("dev_handoff.code.lang_uikit");case f:return(0,c.t)("dev_handoff.code.lang_compose");case b:return(0,c.t)("dev_handoff.code.lang_android_xml");case h:return(0,c.t)("dev_handoff.code.lang_figma");case v:return(0,o.kc)().dt_multi_node?(0,c.t)("dev_handoff.code.lang_multi_node"):""}if(e){let a=i?.type==="local-plugin"?r[i.id]:i?.type==="published-plugin"&&e.plugin_id===i?.id?n[i.id]??e:null;if(a)return 1===(0,p.m)(a).length?a.name:(0,p.X)(a,i?.pluginLanguage??"").label??a.name}return""}}),[n,r,e])}function w(e){let r=(0,a.d4)(e=>e.selectedView),n="fullscreen"===r.view?r.editorType:null,i=(0,d.S0)("first-party"!==e.type?e.id:"",{searchLocalPlugins:!0,searchPublishedPlugins:!0}),{plugin:o}=(0,d._P)("published-plugin"===e.type?e.id:"0","published-plugin"===e.type);if("orgAdminSettings"!==r.view&&n!==m.nT.DevHandoff)return null;let s=i||o;return s&&(0,u.M5)(s)?s:null}function A(e,r){if(!e||!e.codeSyntax)return null;switch(r){case _:case E:return e.codeSyntax[0]??null;case f:case b:return e.codeSyntax[1]??null;case g:case y:return e.codeSyntax[2]??null}return null}function C(){let e=(0,s.md)(l.D),r=(0,a.d4)(e=>e.mirror.appModel.devHandoffCodeLanguage),n=(0,a.d4)(e=>e.selectedView),o=r;return"orgAdminSettings"===n.view&&e&&(o=e),(0,i.useMemo)(()=>T(o),[o])}(0,o.kc)().dt_lego_ext_plugins&&(I[E]={type:"first-party",id:E})},19741:(e,r,n)=>{n.d(r,{BT:()=>o,Ju:()=>l,q$:()=>s});var i=n(922827);let a=[];function o(e){a.push(e),a.length&&i.w3z.setIsNodeChangeCallbackRegistered(!0)}function s(e){(a=a.filter(r=>r!==e)).length||i.w3z.setIsNodeChangeCallbackRegistered(!1)}function l(){}},393812:(e,r,n)=>{function i(e){return!!e?.mirror&&1===Object.keys(e.mirror.sceneGraphSelection).length}n.d(r,{Mx:()=>i}),n(922827),n(572304),n(915440),n(335682),n(279453),n(279702)},45775:(e,r,n)=>{n(457630)},591494:(e,r,n)=>{n.d(r,{JW:()=>s});var i=n(411855);n(188507);var a=n(75395);n(922827),n(794272);var o=n(153234);function s({text:e,isActive:r,onClick:n,recordingKey:s,isSingle:l}){return i.createElement(a.E,{recordingKey:o.Pt(s,"tab"),onClick:n,actionOnPointerDown:!0,className:l?"dev_handoff_panel_tab_group--tabsHeaderSingle--G5OnU dev_handoff_panel_tab_group--tabFocus--f8Y7h":r?"dev_handoff_panel_tab_group--tabActive--Ex7NX legacy_pages_panel--tabActive--hmo0j legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h":"dev_handoff_panel_tab_group--tab--Y0iYX legacy_pages_panel--tab--inhND dev_handoff_panel_tab_group--tabFocus--f8Y7h",htmlAttributes:{"data-label":e}},e)}n(154254),n(939863),n(175290),n(809840),n(5605),n(931828),n(226055),n(561004),n(554294),n(118658),n(978527),n(157147),n(252828),n(785315),n(320986)},86538:(e,r,n)=>{n.d(r,{HT:()=>c,RB:()=>d});var i=n(716034),a=n(627472),o=n(529928);let s=(0,i.eU)(void 0),l=(0,o.bt)(e=>e.universalInsertModal.initialFdView),c=(0,a.t_)(e=>{let r=e(l),n=e(s);return r||n||"recents_and_saved"}),d=(0,i.eU)(!1)},603689:(e,r,n)=>{n.d(r,{lz:()=>p,sX:()=>h}),n(411855);var i=n(922827),a=n(91408);n(966712);var o=n(716034),s=n(617453),l=n(837746);let c=(0,a.jz)(l.QBm),d=300+c,u=640+c;function m(e){return Math.max(d,Math.min(u,e||0))}function p(){return m((0,s.UX)())}function h(){return m(i.Ez5?.editorPreferences().devHandoffInspectSplitPosition.getCopy()??0)}(0,o.eU)(!1)},870505:(e,r,n)=>{var i=n(91408),a=n(716034),o=n(837746);let s=(0,i.jz)(o.YI7),l=(0,i.jz)(o.Qhc);(0,a.eU)(s+l)},85304:(e,r,n)=>{n.d(r,{e:()=>l}),n(411855);var i=n(716034),a=n(418956);n(30637);var o=n(507956);let s=(0,i.eU)(!1);function l(){let e=(0,o.LS)(),[r]=(0,a.fp)(s);return r&&e}},256975:(e,r,n)=>{n.d(r,{Nc:()=>l,U4:()=>d,_I:()=>c,tn:()=>s});var i=n(188507);n(915440);var a=n(335682);n(279453);var o=n(479296);let s=(0,o.n)(e=>{let r=(0,a.tB)({openFile:e.openFile??null});return r?.canAccessFullDevMode??!0}),l=(0,o.n)(e=>{let r=(0,a.tB)({openFile:e.openFile??null});return r?.canAccessDevModeEntryPoint??!0});function c(){return(0,i.d4)(s)}function d(){return(0,i.d4)(l)}},400181:(e,r,n)=>{n.d(r,{O:()=>W});var i=n(411855),a=n(188507),o=n(343887),s=n(593961),l=n(101165),c=n(183686),d=n(143984),u=n(922827),m=n(340818),p=n(629019),h=n.n(p);n(758271);var _=n(776250),g=n(91408),f=n(966712),E=n(268537);n(910769);var y=n(163023),b=n(939863),v=n(118830),I=n(444736),T=n(239349),S=n(46415),w=n(738269),A=n(696673);n(617453),n(779709);var C=n(843495);n(335682),n(100197),n(147206);var N=n(471224);n(793485);var L=n(279702),O=n(498606),R=n(620722);n(788612);var P=n(297281),D=n(78479),k=n(227795),M=n(538697),F=n(343827),x=n(930269),U=n(782895),B=n(139387),V=n(968109);let G=4*(0,g.jz)(x.devHandoffAssetPreviewMaxWidth),H=4*(0,g.jz)(x.devHandoffAssetPreviewMaxHeight),K=e=>e.stopPropagation(),W={format:e=>e};i.memo(({assetInfo:e,openFileKey:r,disabled:n,media:p,showGuids:g,saveAsState:x,dropdownShown:$,isSelected:Y})=>{let{assetId:z,assetName:j,thumbnailVersion:q}=e,Z=e.instancesGUIDs?.[0]??e.duplicateGUIDs?.[0]??z,X=(0,v.O)({assetId:Z,thumbnailVersion:q,width:G,height:H,scale:4}),J=function(e,r){let{exportSettings:n}=(0,T.mJ)(e)??{exportSettings:null};return n?.[0]?.imageType??(r&L.PW.ASSET_ICON?"SVG":"PNG")}(z,e.type),Q=(0,I.aT)(e),ee=(0,a.wA)(),et=i.useCallback(async e=>{e.stopPropagation(),(0,_.sx)("Asset Panel Export Clicked"),await (0,N.Dc)(N.hV.Export,x,ee,"export-assets-handoff",[Z],"export-assets-handoff",{[Z]:J}),ee(S.rg()),ee(w.oB())},[Z,ee,J,x]),er=i.useCallback(e=>{p.length>0&&r?ee(w.j7({type:"save-media-select",data:{assetId:Z}})):et(e),e.stopPropagation()},[ee,et,p,Z,r]),en=(0,F.d)(!1,void 0,Z),ei=i.useCallback(e=>{en?.(),e.stopPropagation()},[en]),ea=e?.instancesGUIDs??e?.duplicateGUIDs??[z],eo=i.useCallback(e=>{m.l7.user("image-type-change",()=>{u.glU.setDevHandoffAssetExport(z,e)})},[z]),es=!!(e.type&L.PW.ASSET_COMPONENT),el=!!(e.type&L.PW.ASSET_ICON),ec=!!(e.type&L.PW.ASSET_IMAGE),ed=!!(e.type&L.PW.ASSET_GIF),eu=!!(e.type&L.PW.ASSET_VIDEO),em=ed||eu,ep=(el||ec)&&!em,eh=p.length>0&&null!==r?k.DK:k.K0,e_=(0,f.kc)().ds_publish_file_deprecation?e.isFromLibrary:e.libraryKey,eg=!!e.libraryFileKey&&(0,A.wJ)(e.libraryFileKey),ef=i.useMemo(()=>[i.createElement(D.N5,{key:"png",value:"PNG"}),i.createElement(D.N5,{key:"jpeg",value:"JPEG"}),...el?[i.createElement(D.N5,{key:"svg",value:"SVG"})]:[],i.createElement(D.N5,{key:"pdf",value:"PDF"})],[el]),eE=e=>{let r=e.split(".");if(!r||!(r.length>0))return{name:e,extension:""};{let e=r[r.length-1];return{name:r.slice(0,r.length-2).join("."),extension:e}}};return i.createElement("div",{className:U.s,onMouseEnter:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set(ea),onMouseLeave:()=>u.Ez5.canvasViewState().temporarilyHoveredNodes.set([]),onClick:()=>C.tJ([e?.instancesGUIDs?.[0]??z]),role:"link",tabIndex:0},i.createElement("div",{className:h()(U.Re,$?.type==="save-media-select"&&$.data.assetId===Z?U.Lq:void 0)},i.createElement("div",{className:U.ZE,style:X.backgroundStyle},X&&i.createElement(R.J,{className:U.Wb,src:X.url})),i.createElement("div",{className:U.DE},i.createElement("div",{className:U.SM},g?`${j} (${z})`:j),es&&!Y?i.createElement("div",{className:U._w},i.createElement(y.B,{svg:V.A}),i.createElement("div",{className:U.R5},(0,b.tx)("dev_handoff.assets.instance"))):i.createElement("div",{className:U.Rn},i.createElement(I.$R,{assetInfo:e,media:ep?p:[],dataTestId:"assetPanel",shouldShowTypeLabel:!0}))),i.createElement("div",{className:U.Uo},ep&&i.createElement(i.Fragment,null,i.createElement(D.SV,{id:`asset-image-type-${z}`,property:J,formatter:D.A3,onChange:eo,dispatch:ee,dropdownShown:$,onMouseDown:K,dropdownWidth:150},ef),i.createElement("div",{className:U.yL},i.createElement(eh,{svg:B.A,onClick:er,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":n?(0,b.t)("fullscreen.properties_panel.export_disabled"):(0,b.t)("fullscreen.export.export"),disabled:n,className:U.x6,containerClassName:U.Li,isBackgroundTransparent:!0}),$?.type==="save-media-select"&&i.createElement(i.Fragment,null,i.createElement("div",{className:U.Vx}),i.createElement(E.ms,{className:U.Yw},p.map(e=>{let{name:n,extension:a}=eE(e.name);return i.createElement(E.gS,{onClick:e=>{e.stopPropagation(),ee(w.oB())},href:(0,P.ij)(r,e.hash),target:"_blank",key:e.hash,className:U.cu,"data-tooltip-type":O.Ib.TEXT,"data-dropdown-tooltip":e.name},i.createElement("div",null,(0,b.t)("fullscreen.export.source")),i.createElement("div",{className:U.Mo},i.createElement(I.yP,{pxWidth:e.width,pxHeight:e.height,dataTestId:"assetPanel"}),i.createElement("div",{className:U.Om},"\xb7"),i.createElement("div",{className:U.VZ,"data-content-start":n,"data-content-end":`.${a}`},e.name)))}),i.createElement(E.gS,{key:"export",className:U.HL,onClick:et},i.createElement("div",null,(0,b.t)("fullscreen.export.layer_export")),i.createElement("div",{className:U.Mo},i.createElement(I.$R,{assetInfo:e,dataTestId:"assetPanel",hideDot:!0}),i.createElement("div",{className:U.Om},"\xb7"),i.createElement("div",{className:U.VZ},D.A3.format(J)))))))),em&&i.createElement(i.Fragment,null,i.createElement(M.uQ,{property:ed?"GIF":"MP4",formatter:W,isDisabled:!0}),i.createElement("a",{href:Q??"",target:"_blank"},i.createElement(o.K,{"aria-label":(0,b.t)("fullscreen.export.export"),disabled:!Q,htmlAttributes:{"data-tooltip":(0,b.t)("fullscreen.export.export"),"data-tooltip-type":O.Ib.TEXT}},i.createElement(s.b,null)))),es&&!Y&&i.createElement(o.K,{onClick:ei,"aria-label":eg?(0,b.t)("design_systems.instance_panel.view_library_in_community"):e_?(0,b.t)("dev_handoff.library.view"):(0,b.t)("design_systems.instance_panel.go_to_main_component"),htmlAttributes:{"data-tooltip":eg?(0,b.t)("design_systems.instance_panel.view_library_in_community"):e_?(0,b.t)("dev_handoff.library.view"):(0,b.t)("design_systems.instance_panel.go_to_main_component"),"data-tooltip-type":O.Ib.TEXT}},eg?i.createElement(l.c,null):e_?i.createElement(c.l,null):i.createElement(d.K,null)))))})},615549:(e,r,n)=>{n.d(r,{MW:()=>M});var i=n(411855),a=n(188507);n(268853),n(922827),n(776250),n(181912);var o=n(966712),s=n(716034);n(776621),n(286640),n(281381),n(449124),n(163023);var l=n(299986),c=n(939863);n(175290),n(114950);var d=n(409272);n(308977),n(239349),n(320063),n(358145),n(151283),n(807197),n(662275),n(843495),n(441088),n(318812),n(29680),n(335682),n(860178),n(985945),n(540019),n(234945),n(173454);var u=n(498606);n(788612),n(832637),n(7959),n(538697);var m=n(503457);n(277e3),m.H4.NONE,n(37112),n(593400);var p=n(862350),h=n(951792),_=n(288006),g=n(75395),f=n(463033),E=n(615925),y=n(939683),b=n(46481),v=n(970516),I=n(677664),T=n(237870),S=n(128909),w=n(522157),A=(e=>(e[e.REACT=0]="REACT",e[e.SWIFTUI=1]="SWIFTUI",e[e.COMPOSE=2]="COMPOSE",e[e.HTML=3]="HTML",e))(A||{});function C({language:e}){switch(e){case 0:return i.createElement(N,null);case 1:return i.createElement(L,null);case 2:return i.createElement(O,null);case 3:return i.createElement(R,null);default:return null}}function N(){let e=(0,a.wA)();return i.createElement(i.Fragment,null,i.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_react")),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"1")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npm install @figma/code-connect"),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"react-step1"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"2")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npx figma connect"),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"react-step2"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"3")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npx figma connect publish "),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"react-step3"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))))}function L(){let e=(0,a.wA)();return i.createElement(i.Fragment,null,i.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_swiftui")),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"1")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npm install -g @figma/code-connect"),i.createElement("div",{className:S.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step1"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"2")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.swift.add_snippet")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.as},'dependencies: [\n\u2003\u2003...,\n\u2003\u2003.package(url: "https://github.com/figma/code-connect", from: "1.0.0"),\n]'),i.createElement("div",{className:S.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:`dependencies: [
		...,
		.package(url:"https://github.com/figma/code-connect", from: "1.0.0"),
]`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step2"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"3")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},'figma connect create "<url_to_node>"'),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step3"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"4")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:S.G5},i.createElement("div",null,"figma connect publish "),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"swift-step4"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))))}function O(){let e=(0,a.wA)();return i.createElement(i.Fragment,null,i.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_compose")),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"1")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npm install -g @figma/code-connect"),i.createElement("div",{className:S.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install -g @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step1"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"2")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.compose.add_plugin_snippet")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.as},'plugins { \n\u2003\u2003...\n\u2003\u2003id("com.figma.code.connect") version "1.+"\n} \n\ndependencies { \n\u2003\u2003...\n\u2003\u2003implementation("com.figma.code.connect:plugin:1.+")\n}'),i.createElement("div",{className:S.fq},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:`plugins {
		...
		id("com.figma.code.connect") version "1.+"
}

dependencies {
		...
		implementation("com.figma.code.connect:plugin:1.+")
}`,ignoreLineBreaks:!1})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step2"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"3")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},'figma connect create "<url_to_node>"'),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect create"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step3"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"4")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:S.G5},i.createElement("div",null,"figma connect publish "),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"compose-step4"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))))}function R(){let e=(0,a.wA)();return i.createElement(i.Fragment,null,i.createElement("div",{className:S.DD},(0,c.t)("dev_handoff.code.lang_html")),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"1")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_install_package")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npm install @figma/code-connect"),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npm install @figma/code-connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"html-step1"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"2")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_run_command")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npx figma connect"),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"html-step2"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))),i.createElement("div",{className:S.gY}," ",i.createElement("div",{className:S.YN},i.createElement("div",{className:S.v_},"3")),i.createElement("div",{className:S.M7},i.createElement("div",{className:S.uw},(0,c.tx)("dev_handoff.code_connect.modal_publish")),i.createElement("div",{className:S.G5},i.createElement("div",{className:S.jt},"npx figma connect publish "),i.createElement("div",{className:S.cL},i.createElement(d.rZ,{"aria-label":(0,c.t)("inspect_panel.copy"),onClick:()=>e(v.lW({stringToCopy:"npx figma connect publish"})),htmlAttributes:{"data-tooltip":(0,c.t)("inspect_panel.copy"),"data-tooltip-type":u.Ib.TEXT},source:"code connect",title:"html-step3"},i.createElement(b.U,{svg:w.A},i.createElement(E.X,null))))))))}(0,T.Ju)(function(e){let[r,n]=(0,i.useState)(0),s=(0,y.hC)(),d=(0,a.wA)(),u=p.hS({...e,onClose:()=>{s("code_connect.connect_to_codebase.popup_closed"),e.onClose()}});return i.createElement(h.bL,{htmlAttributes:{"data-testid":"upgrade_choose_plan_modal"},manager:u,width:800},i.createElement(_.Wk,null,i.createElement("div",{className:S.kL},i.createElement("div",{className:S.pz},i.createElement("h1",{className:S.tb},(0,c.tx)("dev_handoff.code_connect.title")),i.createElement("h2",{className:S.J$},(0,c.tx)("dev_handoff.code_connect.modal_text")),i.createElement(g.E,{className:0===r?S.xR:S.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"react"}),n(0)}},(0,c.t)("dev_handoff.code.lang_react")),i.createElement(g.E,{className:1===r?S.xR:S.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"swiftui"}),n(1)}},(0,c.t)("dev_handoff.code.lang_swiftui")),i.createElement(g.E,{className:2===r?S.xR:S.s6,onClick:()=>{s("code_connect.connect_to_codebase.language_selected",{language:"compose"}),n(2)}},(0,c.t)("dev_handoff.code.lang_compose")),(0,o.kc)().dt_code_connect_modal_updates&&i.createElement(g.E,{className:3===r?S.xR:S.s6,onClick:()=>n(3)},i.createElement("div",{className:S.Sd},(0,c.t)("dev_handoff.code.lang_html"),i.createElement("span",{className:S.X4},(0,c.t)("dev_handoff.code.lang_html_examples")))),i.createElement("div",{className:S.jH}),i.createElement("span",{className:S.Iw},i.createElement(f.IK,{variant:"primary",onClick:()=>{s("code_connect.connect_to_codebase.view_docs_github_clicked"),d((0,I.RK)({rawInput:"https://github.com/figma/code-connect"}))},iconPrefix:i.createElement("div",{className:S.F9},i.createElement(l.f,null))},(0,c.tx)("dev_handoff.code_connect.modal_github_button")))),i.createElement("div",{className:S.Qs},i.createElement(C,{language:r})))))},"CodeConnectModal",T.ZU.YES);let P={Swift:"swift",TypeScript:"jsx"};function D({updatedAt:e}){let r=React.useMemo(()=>e?dayjs(e).fromNow():"",[e]);return React.createElement(Badge,{color:BadgeColor.DEFAULT,text:t("dev_handoff.figmadocs.connected"),icon:React.createElement(Icon16ApprovedCheckmark,null),className:styles.connectedBadge,dataTooltipType:TooltipType.TEXT,dataTooltip:t("dev_handoff.figmadocs.connected_last_published_at",{lastPublishedAt:r}),dataTooltipShowAbove:!0,dataTooltipMaxWidth:160,dataTooltipTimeout:50})}function k(e){try{let{url:r}=e,n=new URL(r).pathname.split("/"),i="",a=-1;if(r.includes("github")||r.includes("gitlab")){let e=n.indexOf("blob");-1===e&&(e=n.indexOf("tree"));let r=n.slice(e+2).join("/");i=r.length>0?r:n[n.length-1]}else if(r.includes("bitbucket")){a=n.indexOf("src");let e=n.slice(a+2).join("/");i=e.length>0?e:n[n.length-1]}else r.includes("dev.azure");return React.createElement("span",{className:styles.linkFilePath},i)}catch(e){return null}}let M=(0,s.eU)(!1)},301854:(e,r,n)=>{n.d(r,{X:()=>S});var i=n(411855),a=n(188507),o=n(343887),s=n(463033),l=n(615925),c=n(922827),d=n(629019),u=n.n(d),m=n(468794);n(794272);var p=n(966712),h=n(939863),_=n(780761),g=n(970516),f=n(60088),E=n(788612),y=n(538697),b=n(564092),v=n(712685),I=n(364216);let T={format:()=>(0,h.t)("inspect_panel.copy_as")};function S(e){let{basisContent:r="",changeContent:n=""}=e,a=i.useMemo(()=>(0,m.pR)(r,n).map(e=>{let r=e.added?I.Qs:e.removed?I.Tk:"";return i.createElement("span",{key:e.value,className:r},e.value)}),[r,n]);return i.createElement(w,{content:i.createElement(i.Fragment,null,a),contentToCopy:n,showVariable:!1})}function w({content:e,contentToCopy:r,showVariable:n=!0}){let{value:d,eventHandlers:m,isHovered:S}=(0,E.ZQ)(I.O7,I.O7),[w,A]=i.useState(!1),C=i.useRef(null),N=(0,a.wA)(),{Dropdown:L,toggleDropdown:O,dropdownTargetRef:R,isDropdownShown:P}=(0,f.B)("CONTENT_COPY_DROPDOWN"),D=(0,E.SV)("inspection_panel_copy_text_variable"),k=(0,b.oU)("TEXT_DATA",{type:c.Z_n.STRING,resolvedType:c.rXF.STRING,value:r}),M=k.variableDisplayName,F=!!M&&n,x=(e,r)=>{N(g.lW({stringToCopy:e,ignoreLineBreaks:!1})),D({value:e,valueType:r})},U=[{displayText:(0,h.t)("inspect_panel.copy_variable_name"),callback:()=>{M&&x(M,"name")}},{displayText:(0,h.t)("inspect_panel.copy_variable_content"),callback:()=>{x(r,"value")}}],B=S||w,V=F?i.createElement(i.Fragment,null,i.createElement(y.uQ,{ref:R,containerClassName:u()(I.$1,(P||(0,p.kc)().dt_dev_view_variables||(0,p.kc)().dt_inferred_vars_modal)&&I.zv),formatter:T,property:null,onClick:O}),i.createElement(L,{items:U,showPoint:!0})):(0,p.kc)().dt_dev_view_variables||(0,p.kc)().dt_inferred_vars_modal?i.createElement(i.Fragment,null,i.createElement(_.$Q,{matchingVars:k?.matchingVars,rowRef:C,isHovered:B,recordingKey:"content_panel"}),i.createElement(o.K,{htmlAttributes:m,onClick:()=>x(r,"value"),"aria-label":(0,h.t)("inspect_panel.copy")},i.createElement(l.X,null))):i.createElement("span",{className:I.cL},i.createElement(s.$n,{variant:"link",htmlAttributes:m,onClick:()=>x(r,"value")},(0,h.tx)("inspect_panel.copy")));return i.createElement(E.VZ,{title:(0,h.t)("inspect_panel.property.content"),hideHeader:!0,noPadding:!0,recordingKey:"content"},i.createElement("div",{className:I.Om,onMouseEnter:()=>A(!0),onMouseLeave:()=>A(!1)},i.createElement(E.SH,{title:(0,h.t)("inspect_panel.property.content"),isHovered:B||P,recordingKey:"contentHeader",additionalHeaders:V}),i.createElement("div",{className:I.eR,ref:C},F&&i.createElement("div",{className:I.Zn},i.createElement(v.wG,{text:M,isInferred:k.isSuggested,disableHover:!0,dataTestId:"textVariableName",tooltip:k.isSuggested?(0,h.t)("dev_handoff.variables.inferred_text"):r}),i.createElement(_.$Q,{variableId:k?.variable?.node_id,rowRef:C,isHovered:B,recordingKey:"content_panel"})),i.createElement("div",{className:u()(I.P_,d),dir:"auto","data-testid":"textContent"},e))))}},5605:(e,r,n)=>{n.d(r,{xb:()=>b,Rk:()=>y,FO:()=>I,ev:()=>v});var i=n(411855),a=n(188507),o=n(966712),s=n(418956),l=n(299986),c=n(939863),d=n(785315),u=n(931828),m=n(507956),p=n(832637),h=n(812505);let _="hint_panels--hintPanel--MUqNV",g="hint_panels--icon--EMIdH",f=(0,o.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),E=(0,o.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),y="dev_handoff_dismissed_vscode_extension_hint",b="dev_handoff_dismissed_inspect_panel_plugins_hint";function v(){return(0,m.LS)()?null:i.createElement(p.u,{className:_,idForTests:"hintVSCodeForFigma",userFlag:y,title:(0,c.t)("dev_handoff.vscode.hint.title"),iconComponent:i.createElement("div",{className:"hint_panels--iconContainer--R8QBk"},i.createElement(h.M,null)),hintText:(0,c.t)("dev_handoff.vscode.hint"),hintLinkText:(0,c.t)("dev_handoff.vscode.hint.link"),hintLinkUrl:"https://marketplace.visualstudio.com/items?itemName=figma.figma-vscode-extension",hintLinkOnNewLine:!0})}function I(){let e=(0,m.LS)(),[r,n]=(0,s.fp)(d.H),o=(0,a.wA)(),h=i.useCallback(()=>{n(d._.PLUGIN),o(u.b({[b]:!0}))},[n,o]);return e?i.createElement(p.u,{className:_,idForTests:"hintInspectPlugins",userFlag:b,title:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.title"),hintText:i.createElement(i.Fragment,null,i.createElement("div",{className:"hint_panels--iconRow--SXq7J"},i.createElement("img",{alt:"",className:g,src:f}),i.createElement("div",{className:g},i.createElement(l.f,null)),i.createElement("img",{alt:"",className:g,src:E})),(0,c.tx)("dev_handoff.inspect_panel.plugins_hint")),hintLinkText:(0,c.t)("dev_handoff.inspect_panel.plugins_hint.link"),hintLinkOnClick:h,hintLinkOnNewLine:!0}):null}},118830:(e,r,n)=>{n.d(r,{O:()=>c});var i=n(411855),a=n(922827),o=n(275725),s=n(15859);let l={};function c({assetId:e,thumbnailVersion:r,width:n,height:c,scale:d}){let u=function({assetId:e,width:r,height:n,scale:i}){return`${e}-${r}x${n}@${i}x`}({assetId:e,width:n,height:c,scale:d}),[m,p]=i.useState(l[u]?.url),h=(0,o.c6)(e);return(i.useEffect(()=>{let i=async()=>{await (0,s.Jr)().loadAllImagesUnder([e],a.MoD.NON_ANIMATED_ONLY,"handoff.assetPreview");let[i,o]=a.Vzr.generateThumbnailForNode(e,n,c,d,{});if(o.length>0){let e=l?.[u]?.url;e&&URL.revokeObjectURL(e);let n=URL.createObjectURL(new Blob([o]));l[u]={url:n,version:r,error:null},p(n)}},o=!!l?.[u],m=o&&l[u].version!==r,h=o&&!!l[u].error;o&&(!m||h)||i().catch(e=>{l[u]={error:e},console.error(e)})},[e,c,d,n,u,r]),m)?{url:m,backgroundStyle:h}:{backgroundStyle:h}}},444736:(e,r,n)=>{n.d(r,{$R:()=>f,aT:()=>y,yP:()=>g});var i=n(411855),a=n(188507),o=n(922827),s=n(939863);n(393812);var l=n(945099),c=n(92597),d=n(618056),u=n(29680),m=n(335682),p=n(279702),h=n(297281),_=n(239349);function g({pxWidth:e,pxHeight:r,dataTestId:n}){let{unit:a}=(0,c.gc)(),s=(0,l.sQ)()&&a===o.tKW.SCALED,d=e=>(e??0).toLocaleString("en",{maximumFractionDigits:2}),u=d(e),m=d(r),p=i.createElement("span",{"data-testid":`${n}Width`},u),h=i.createElement("span",{"data-testid":`${n}Height`},m);return i.createElement(i.Fragment,null,p,"\u2009x\u2009",h,i.createElement("span",{"data-testid":`${n}Unit`},s?" (px)":""))}function f({assetInfo:e,media:r,dataTestId:n,shouldShowTypeLabel:a,hideDot:o}){let s=(0,_.mJ)(e.instancesGUIDs?.[0]??e.assetId),l=s?.size?.x??0,c=s?.size?.y??0;if(r&&r.length>0){let e=r[0];l=e.width,c=e.height}return i.createElement(E,{assetType:e.type,pxWidth:l,pxHeight:c,dataTestId:n,hideDot:o,shouldShowTypeLabel:a})}function E({assetType:e,pxWidth:r,pxHeight:n,dataTestId:a,hideDot:o,shouldShowTypeLabel:l}){let c=e&p.PW.ASSET_VIDEO?(0,s.t)("dev_handoff.assets.video"):e&p.PW.ASSET_GIF?(0,s.t)("dev_handoff.assets.gif"):e&p.PW.ASSET_IMAGE?(0,s.t)("dev_handoff.assets.image"):e&p.PW.ASSET_ICON?(0,s.t)("dev_handoff.assets.icon"):e&p.PW.ASSET_COMPONENT?(0,s.t)("dev_handoff.assets.instance"):void 0;return i.createElement("span",null,l&&c,!o&&i.createElement(i.Fragment,null,"\xa0","\xb7 "),i.createElement(g,{pxWidth:r,pxHeight:n,dataTestId:a}))}function y(e){let r=(0,a.d4)(m.sS),n=(0,u.eY)(),[o,s]=i.useState(null);if(o)return o;if(!(e.type&(p.PW.ASSET_GIF|p.PW.ASSET_VIDEO)))return null;let l=n.get(e.assetId);if(!l)return null;let c=d.N9(l?.fills)?.filter(e=>e.opacity>0&&e.visible);if(!c)return null;for(let e of c)if(e.animatedImage||e.video){if(!r)return null;(0,h.tW)({paint:e,fileKey:r}).then(e=>{s(e)});break}return o}},275725:(e,r,n)=>{n.d(r,{c6:()=>g});var i=n(411855),a=n(188507),o=n(922827),s=n(776250),l=n(344780),c=n(568214),d=n(168039),u=n(416095),m=n(284321),p=n(49116),h=n(173454),_=n(32067);function g(e){let r=function(e,r){let n=function(e){let r=(0,_.jY)(),n=(0,a.d4)(m.FZ),i=(0,a.d4)(p.c5);return(0,u.NY)(e,r,n,i)}(e),g=(0,d.DP)(),f=n?.containing_frame?.backgroundColor??"";return n?.type===h.PW.STATE_GROUP&&n.fill_color&&(f=n.fill_color),i.useCallback(()=>{let r=g&&("light"===g||"dark"===g)?g:"dark";if(!e)return f&&!(0,c.ty)(f)?(0,c.HD)(f)?"dark":"light":r;l.sn.start("dev_mode_calculate_component_color");let n=o.w3z.getApproximateNodeColor(e),i=l.sn.stop("dev_mode_calculate_component_color");return i&&(0,s.sx)("dev_mode_calculate_component_color",{elapsedMs:i},{forwardToDatadog:!0}),(0,c.HD)(n)?"light":"dark"},[f,e,void 0,g])}(e);return"dark"===(0,i.useMemo)(r,[r])?f:E}let f={background:"#383838"},E={background:"#f5f5f5"}},115941:(e,r,n)=>{n.d(r,{X:()=>c});var i=n(922827),a=n(568214),o=n(617453),s=n(393062),l=n(564092);function c({color:e,colorVar:r,encodedPaint:n,opacity:c,valueFormatter:d}){let{variable:u,variableDisplayName:m,isSuggested:p}=(0,l._B)({color:e,colorVar:r,opacity:c}),h=(0,o.Ku)(),_=()=>{i.Osy.highlightOnlySamePaintInSublayers(n)},g=()=>i.Osy.highlightOnlySamePaintInSublayers(""),{value:f,copyValue:E}=function(e,r,n,i=1){let{a=1}=e;return(0,s.q)({...e,a:a*i},r,n,{alphaInPercent:!0})}(e??a.FN,h,d,c),y=(0,s.q)(e??a.FN,h,d).value;return u&&m&&e?{copyValue:E,isSoftDeleted:u?.subscriptionStatus==="LOCAL"&&u?.isSoftDeleted,isSuggested:p,isVariableRow:!0,onMouseEnter:_,onMouseLeave:g,value:f,valueWithoutOpacity:y,variable:u,variableDisplayName:m}:{copyValue:E,isSuggested:p,isVariableRow:!1,onMouseEnter:_,onMouseLeave:g,value:f,valueWithoutOpacity:y}}},666930:(e,r,n)=>{n.d(r,{Bv:()=>_,wS:()=>h,x9:()=>g});var i=n(411855);n(188507),n(177131);var a=n(922827);n(572304);var o=n(298455);n(752553),n(939863);var s=n(44892);n(848661);var l=n(29680);n(335682);var c=n(540019),d=n(656012),u=n(273226);n(510879);var m=n(107244);n(958317),n(835808),n(731262),n(239349),c.M4.Query({fetch:async({componentKey:e})=>{try{let r=await d.Z.getLibraryComponentV2Destination({componentKey:e});if(!r||!r.data||!r.data.meta)return null;return{nodeId:r.data.meta.node_id,fileKey:r.data.meta.file_key,component:r.data.meta.component,componentSet:r.data.meta.component_set}}catch(e){return null}},enabled:e=>e.enabled}),c.M4.Query({fetch:async({statusResult:e})=>{if(!e||!e.componentKey||!e.canvasUrl)return{};let r=e.isVariant?e.dataStateGroupId:e.dataComponentId,n=e.dataStateGroupId??null,i=e.dataStorageKey,o=await s.Eo.getCanvas({canvas_url:e.canvasUrl});if(!o)return{};let l=a.glU.loadDetachedComponent(r??"",i,o,n);return l?{result:{...e,dataLocation:"temp-scene",dataComponentId:l}}:{}},enabled:e=>e.enabled});let p=i.createContext({status:"loading"});function h(){return i.useContext(p)||{status:"errors"}}function _(e,r){let n=h(),i=(0,l.eY)();if("loaded"===n.status){let e="temp-scene"===n.result.dataLocation,r=n.result.dataComponentId??"",a=e?n.result.dataStateGroupId:(0,u.Yi)([r],i)??(0,m.nM)(i,[r]),o=e?g(r):i.get(r);return n.result.isVariant&&a?{backingSymbol:o,backingStateGroup:e?g(a):i.get(a)}:{backingSymbol:o,backingStateGroup:null}}return{backingSymbol:e,backingStateGroup:r}}function g(e){return new o.qo(a.juq.DETACHED_COMPONENTS).get(e)}},187796:(e,r,n)=>{n.d(r,{$G:()=>_,Cs:()=>g,I9:()=>f,Ud:()=>E,oz:()=>p}),n(411855),n(188507);var i=n(561546),a=n(922827);n(704513);var o=n(794272),s=n(939863),l=n(848661);n(618056),n(335682);var c=n(998905),d=n(239349);function u(e){return(0,l.gl)(e)?0:e??0}function m(e){return"NONE"!==e&&"GRID"!==e}function p(e){return m(e.stackMode)||!!e.inferredAutoLayoutResult&&m(e.inferredAutoLayoutResult.stackMode)}function h(e,r,n){return m(e.stackMode)?e[r]:e.inferredAutoLayoutResult?.[n]}function _(e){let r;let{selectionProperties:n,sceneGraph:i,sceneGraphSelection:a}=(0,o.R)(e=>({selectionProperties:e.mirror.selectionProperties,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection}));if(e)return{distance:{top:{distance:0,type:"distance"},bottom:{distance:0,type:"distance"},left:{distance:0,type:"distance"},right:{distance:0,type:"distance"}},border:{top:0,bottom:0,left:0,right:0},radius:{topLeft:0,topRight:0,bottomLeft:0,bottomRight:0},padding:{top:0,bottom:0,left:0,right:0},width:0,height:0};let s=(0,d.Zl)(i,(0,d.RJ)(a)),m=s?.parentNode||null,_=function(e){let r=e?.borderStrokeWeightsIndependent;if((0,l.hS)(r)&&r){let{borderTopVisible:r,borderBottomVisible:n,borderLeftVisible:i,borderRightVisible:a,borderTopWeight:o,borderBottomWeight:s,borderLeftWeight:l,borderRightWeight:c}=e;return{top:r?u(o):0,bottom:n?u(s):0,left:i?u(l):0,right:a?u(c):0}}let n=e?.strokePaints;if((0,l.hS)(n)&&Array.isArray(n)&&n.length>0){let r=(n?.filter(e=>e?.visible&&(e?.opacity??0>0))||[]).length>0?u(e?.strokeWeight):0;return{top:r,bottom:r,left:r,right:r}}return{top:0,bottom:0,left:0,right:0}}(n),g=(0,c.AF)(n),f={topLeft:u(g.topLeft),topRight:u(g.topRight),bottomRight:u(g.bottomRight),bottomLeft:u(g.bottomLeft)},E=p(n);r=E?{top:u(h(n,"stackVerticalPadding","stackPaddingTop")),bottom:u(h(n,"stackPaddingBottom","stackPaddingBottom")),left:u(h(n,"stackHorizontalPadding","stackPaddingLeft")),right:u(h(n,"stackPaddingRight","stackPaddingRight"))}:{top:0,bottom:0,left:0,right:0};let y=E&&n.bordersTakeSpace?{top:r.top+_.top,bottom:r.bottom+_.bottom,left:r.left+_.left,right:r.right+_.right}:{...r},b=u(n.width)-y.left-y.right,v=u(n.height)-y.top-y.bottom;return{distance:m&&("HORIZONTAL"===m.stackMode||"VERTICAL"===m.stackMode)&&s?.stackPositioning!=="ABSOLUTE"?function(e,r){if(!e||!r||"NONE"===r.stackMode||"GRID"===r.stackMode)return{};let n=r.childrenNodes.filter(e=>e?.stackPositioning!=="ABSOLUTE").map(e=>e?.guid),i=n.indexOf(e.guid),a=0===i,o=i===n.length-1;return"HORIZONTAL"===r.stackMode?{top:{distance:r.stackTopPadding,type:"padding"},bottom:{distance:r.stackBottomPadding,type:"padding"},left:a?{distance:r.stackLeftPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},right:o?{distance:r.stackRightPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"}}:{top:a?{distance:r.stackTopPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},bottom:o?{distance:r.stackBottomPadding,type:"padding"}:{distance:r.stackSpacing,type:"spacing"},left:{distance:r.stackLeftPadding,type:"padding"},right:{distance:r.stackRightPadding,type:"padding"}}}(s,m):function(e,r){if(!e||!r||"CANVAS"===r.type||"DOCUMENT"===r.type||"SECTION"===r.type)return{};let n=r.absoluteBoundingBox.w,i=r.absoluteBoundingBox.h,a=r.absoluteBoundingBox.y,o=r.absoluteBoundingBox.x,s=e.absoluteBoundingBox.w,l=e.absoluteBoundingBox.h,c=e.absoluteBoundingBox.y,d=e.absoluteBoundingBox.x;return{top:{distance:c-a,type:"distance"},bottom:{distance:a+i-(l+c),type:"distance"},left:{distance:d-o,type:"distance"},right:{distance:n+o-(d+s),type:"distance"}}}(s,m),border:_,radius:f,padding:r,width:b,height:v}}let g=(e="NONE")=>"HORIZONTAL"===e||"VERTICAL"===e;function f(e=0,r,n){if(!n||(0,l.gl)(r))return e;let i={[a.mKm.FILL_CONTAINER]:(0,s.t)("inspect_panel.properties.fill"),[a.mKm.HUG_CONTENT]:(0,s.t)("inspect_panel.properties.hug"),[a.mKm.FIXED]:(0,s.t)("inspect_panel.properties.fixed")}[r||a.mKm.FIXED],o=(e||0).toLocaleString("en",{maximumFractionDigits:2});return`${i} (${o}px)`}function E(...e){let[r=0,n=0,a=0,o=0]=e;return(0,i.Ef)(e)?0!==r?[r]:void 0:[r,n,a,o]}},843245:(e,r,n)=>{n.d(r,{M4:()=>d,lA:()=>c});var i=n(188507);n(922827),n(29680);var a=n(234945),o=n(32067),s=n(666930),l=n(239349);function c(){let e=(0,o.jY)(),r=(0,s.wS)(),n=(0,i.d4)(e=>e.mirror.selectionProperties.symbolGUIDsBackingSelectionContainer),a=(0,i.d4)(e=>e.mirror.selectionProperties.numSelected);if("loaded"===r.status&&r.result.dataComponentId)return"temp-scene"===r.result.dataLocation&&r.result.componentKey?(0,s.x9)(r.result.dataComponentId):(0,l.Zl)(e,r.result.dataComponentId);if(1!==a||!n)return null;let c=Object.keys(n)[0];return(0,l.Zl)(e,c)}function d(){let e=(0,o.jY)(),r=(0,s.wS)();return function e(r,n,i){let a=(0,l.Zl)(r,n);return a?"SYMBOL"===a.type||"INSTANCE"===a.type||a.isStateGroup||a.detachedInfo?a:a.parentGuid?e(r,a.parentGuid):null:null}(e,(0,i.d4)(a.$J),r)}},470669:(e,r,n)=>{n.d(r,{V0:()=>v,ls:()=>I});var i=n(411855),a=n(109388),o=n(188507),s=n(939863),l=n(308977);n(979385);var c=n(256975),d=n(544818),u=n(225266),m=n(738269),p=n(318812),h=n(694687),_=n(376485),g=n(498606),f=n(978527),E=n(728587),y=n(538697),b=n(193519);function v({codeLanguage:e,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:i,showAddInsteadOfBrowse:a,addCodegenPluginCallback:s,currentSavedCodeLanguage:c}){let u=(0,l.AC)(e),m=(0,l.Pt)(u),p=(0,h.sZ)(),g=(0,o.d4)(e=>e.whitelistedPlugins),f=(0,_.ow)(u,g,p)?e:{type:"first-party",id:"WEB"},E=(0,d.Z)({codeLanguage:f,onChange:r,shouldHideLanguagesWithNoAltUnitSupport:n,onlyShowFirstPartyLanguages:i,formatter:m,showAddInsteadOfBrowse:a,addCodegenPluginCallback:s,currentSavedCodeLanguage:c});return{codeLanguage:f,onCodeLanguageChange:r,codeLanguageOptions:E,activeCodegenPlugin:u,formatter:m}}function I({dropdownId:e,disabled:r,codeLanguageApi:n,onDropdownHidden:l,parentElementId:d}){let h=(0,c._I)(),{codeLanguage:_,activeCodegenPlugin:v,formatter:I,codeLanguageOptions:T}=n,S=v&&"first-party"!==_.type?i.createElement(f.d,{plugin:v}):null,w=(0,o.wA)();i.useEffect(()=>w(u.aq()),[w]);let A=(0,p.Um)(),C=i.useRef(null),N=A?.type===e;return i.createElement("div",{className:b.aD,"data-tooltip":(0,s.t)("dev_handoff.code.language"),"data-tooltip-type":g.Ib.TEXT,"data-tooltip-show-above":!0},i.createElement("div",{className:b.lj},i.createElement(y.uQ,{formatter:I,property:_,icon:S,onClick:()=>{N?w(m.oB()):h&&w(m.j7({type:e}))},inputClassName:b.UD,ref:C,dataTestId:"code_language_dropdown",isDisabled:r})),N&&!r&&C.current&&(0,a.createPortal)(i.createElement("div",{className:b.aD},i.createElement(E.j,{items:T,onSelectItem:e=>{e.callback&&e.callback("",null,w)},dispatch:w,parentRect:C.current.getBoundingClientRect(),showPoint:!1,lean:"right",leanPadding:8,alwaysShowCheckMarkOffset:!0,onDropdownHidden:l,activatePathOnMount:"local-plugin"!==_.type?[I.format(_)]:[T[0].displayText]})),document.getElementById(d||"dev-handoff-inspect-panel")))}},945099:(e,r,n)=>{n.d(r,{$h:()=>c,Ar:()=>u,a9:()=>l,hq:()=>s,sQ:()=>d});var i=n(418956),a=n(939863),o=n(594901);let s=(0,i.E3)("dev-mode-code-or-properties","code"),l=new class{format(e){switch(e){case"code":return(0,a.t)("inspect_panel.code.code");case"properties":return(0,a.t)("fullscreen.properties_panel.properties")}}};function c(){return(0,i.fp)(s)}function d(){return"code"===(0,i.md)(s)}function u(){return(0,o.AF)()?["code","properties"]:["properties"]}},426299:(e,r,n)=>{n.d(r,{n2:()=>N});var i=n(411855),a=n(109388),o=n(188507),s=n(196367),l=n(688009),c=n(221768),d=n(243742),u=n(922827),m=n(860601),p=n(153234),h=n(939863),_=n(591494),g=n(256975),f=n(470669),E=n(945099),y=n(738269),b=n(226055),v=n(779709),I=n(318812),T=n(498606),S=n(728587),w=n(788612),A=n(538697);n(581250);var C=n(682113);function N({dropdownPrefix:e,inspectionModeLayout:r="drop-down",preferencesApi:n,parentElementId:l}){let p=(0,g._I)(),_=e?`${e}_DEV_HANDOFF_PREFERENCES_DROPDOWN`:"DEV_HANDOFF_PREFERENCES_DROPDOWN",b=e?`${e}_DEV_HANDOFF_LANGUAGE_DROPDOWN`:"DEV_HANDOFF_LANGUAGE_DROPDOWN",N=(0,o.wA)(),{inspectionMode:O,setInspectionMode:R,inspectionModes:P,supportsAlternativeUnits:D,preferenceOptions:k,preferences:M,codeLanguageApi:F}=n,x=(0,I.Um)(),U=i.useRef(null),B=x?.type===_,V=v.z4.getIsExtension(),G=P.includes("code")&&void 0!==k&&void 0!==M&&void 0!==F,H=(V||"code"===O)&&G,K=i.useMemo(()=>P.map(e=>i.createElement(A.c$,{key:e,value:e,recordingKey:e})),[P]),W="ui3"===(0,d.DP)().version;return i.createElement(i.Fragment,null,i.createElement(w.VZ,{hideHeader:!0,noPadding:!0,noBorder:!0,recordingKey:"preferences"},i.createElement("div",{className:C.NR},!V&&("drop-down"===r?i.createElement(A.l6,{id:`${e}_dev_handoff_inspection_mode`,property:O,formatter:E.a9,onChange:R,dispatch:N,dropdownShown:x,className:C.VM,dropdownWidth:W?"120px":"auto",onShowDropdownOverride:p?void 0:m.lQ,recordingKey:"dev_handoff_inspection_mode"},K):i.createElement(L,{onTabClick:R,selectedTabKey:O,tabs:P.map(e=>({key:e,label:E.a9.format(e)})),recordingKey:"preferences-tabs"})),G&&i.createElement("div",{className:C.d2},H&&i.createElement(f.ls,{dropdownId:b,codeLanguageApi:F,parentElementId:l}),i.createElement("div",{ref:U},i.createElement(s.d,{onClick:()=>{B?N(y.oB()):p&&N(y.j7({type:_}))},"aria-label":(0,h.t)("dev_handoff.inspect_settings"),toggled:B,disabled:!H||0===k.length,recordingKey:"preferencesDropdownButton",htmlAttributes:{"data-tooltip":(0,h.t)("dev_handoff.inspect_settings"),"data-tooltip-type":T.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(c.A,null)))))),B&&G&&U.current&&(0,a.createPortal)(i.createElement(S.j,{items:k,onSelectItem:e=>{e.callback&&e.callback("",null,N)},recordingKey:"preferencesDropdown",dispatch:N,parentRect:U.current.getBoundingClientRect(),showPoint:!1,alwaysShowCheckMarkOffset:!0,activatePathOnMount:D?M.unit===u.tKW.PIXEL?[k[1].displayText]:[k[2].displayText]:void 0}),document.getElementById(l||"dev-handoff-inspect-panel")))}function L({tabs:e,onTabClick:r,selectedTabKey:n,recordingKey:a}){let o=(0,b.GS)(),s=e.reduce((e,r)=>(e[r.key]=!0,e),{}),[c,,d]=l.t.useManagedTabs(s,n,r,{recordingKey:"devHandoffPanelTabs"});return i.createElement("div",{className:C.rb},o?i.createElement(l.t.TabStrip,{manager:d},e.map(e=>i.createElement(l.t.Tab,{key:e.key,...c[e.key]},e.label))):e.map(o=>i.createElement(_.JW,{key:o.key,text:o.label,isActive:n===o.key,onClick:()=>r(o.key),recordingKey:p.Pt(a,o.key)||"",isSingle:1===e.length})))}},909999:(e,r,n)=>{n.d(r,{j6:()=>L});var i=n(411855),a=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(140686),d=n(256296),u=n(368832),m=n(860601),p=n(939863),h=n(308977),_=n(470669),g=n(92597),f=n(973149),E=n(318812),y=n(237870),b=n(205135),v=n(538697),I=n(893606),T=n(879717);let S=new f.KD({min:.1}),w=[3,2,1,.5,1/3],A=new class{parse(e){return"1/3"===e?3:"1/2"===e?2:"2"===e||"3"===e?1/Number.parseInt(e):1}format(e=1){return"0.3"===e.toFixed(1)?"3":"0.5"===e.toFixed(1)?"2":2===e||3===e?`1/${e}`:(0,p.t)("dev_handoff.alternative_units.no_scale")}};function C({scaleFactor:e,onChange:r,onDropdownHidden:n,className:o,inputClassName:s,autoFocus:l}){let c=(0,a.wA)(),d=(0,E.Um)(),u=(0,I.R)();return i.createElement(v.l6,{dispatch:c,property:e,id:"SCALE_FACTOR",onChange:r,formatter:A,dropdownShown:d,className:o,inputClassName:s,dropdownWidth:u?"120px":"auto",autoFocus:l,onDropdownHidden:n},w.map(r=>i.createElement(v.c$,{key:r,value:r,selected:r===e,fullWidth:!0})))}function N({codeLanguage:e}){let r=(0,g.$s)(e);switch(e.id){case h.p:case h.Ap:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_ios");case h.LK:case h.NU:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_android");case h.uz:return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_web")}return(0,p.tx)("dev_handoff.alternative_units.description_scale_factor_third_party",{unitName:r})}let L=(0,y.Ju)(function(e){let r=(0,h.v4)(),[n,a]=i.useState(r),f=(0,g.aq)(n),E=(0,g.gc)(n.id),y=(0,g.Bs)(),v=(0,I.R)(),w=o.hS(e),A=i.useCallback(e=>{e&&y(n,f,{scaleFactor:e})},[n,y,f]),L="first-party"===n.type&&(n.id===h.LK||n.id===h.NU||n.id===h.p||n.id===h.Ap),O="first-party"===n.type&&(n.id===h.uz||n.id===h.A0),R=(0,u.A)(()=>{O&&y(n,f,{customSettings:{onlyText:"true"===(E.customSettings?.onlyText||"false")?"false":"true"}})},250),P=E?.scaleFactor??1,D=(0,_.V0)({onChange:a,codeLanguage:n,shouldHideLanguagesWithNoAltUnitSupport:!0});return i.createElement(s.bL,{manager:w,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,p.t)("dev_handoff.alternative_units.unit_settings_modal_title")),i.createElement(l.jk,null,i.createElement(_.ls,{dropdownId:"DEV_HANDOFF_MODAL_CODE_LANGUAGE_DROPDOWN",codeLanguageApi:D}))),i.createElement(l.nB,null,L?i.createElement("div",{className:T.iF},i.createElement(C,{scaleFactor:P,onChange:A,onDropdownHidden:m.lQ,className:T.j8,autoFocus:!0}),i.createElement("div",{className:T.rc})):i.createElement("div",{className:T.hq},i.createElement(b.Q7,{className:T.IC,property:P,formatter:S,onChange:A,autoFocus:!0})),i.createElement("div",{className:T.A3},i.createElement(N,{codeLanguage:n})),O&&(v?i.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:i.createElement(d.J,null,(0,p.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:i.createElement("span",{className:T.D0},(0,p.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}):i.createElement("div",{className:T.sM},i.createElement(c.S,{checked:E.customSettings?.onlyText==="true",label:i.createElement(d.J,null,(0,p.tx)("dev_handoff.alternative_units.only_apply_rem_on_text",{rem:i.createElement("span",{className:T.D0},(0,p.tx)("dev_handoff.alternative_units.rem_unit"))})),onChange:R}))))))},"SCALE_FACTOR_MODAL")},92597:(e,r,n)=>{n.d(r,{$s:()=>w,Bs:()=>v,Em:()=>T,SF:()=>L,aq:()=>I,b1:()=>A,gc:()=>y,lX:()=>b,wA:()=>N,wQ:()=>C});var i=n(411855),a=n(188507),o=n(922827),s=n(212046),l=n.n(s),c=n(38329),d=n(939683),u=n(939863),m=n(308977),p=n(370934),h=n(756085);n(779709);var _=n(960628),g=n(376485),f=n(638311);let E={scaledWeb:"rem",scaledIOS:"pt",scaledAndroid:"dp",pixel:"px"};function y(e){let r=(0,m.v4)().id,n=(0,a.d4)(e=>e.mirror.appModel.devHandoffPreferences),o=e??r;return(0,i.useMemo)(()=>n.codeExtensionPreferences?.[o]??{},[n,o])}function b(){let e=c.D.getState()?.mirror?.appModel,r=e?.devHandoffCodeLanguage?.id??"";return e?.devHandoffPreferences?.codeExtensionPreferences?.[r]??{}}function v(){let e=(0,a.d4)(e=>e.mirror.appModel.devHandoffPreferences),r=(0,d.U)();return(0,i.useCallback)((n,i,a)=>{let{customSettings:s,...c}=a;l()(c)||(void 0!==c.unit&&(c.unit=c.unit===o.tKW.PIXEL?E.pixel:S(n,i)),r("Dev Mode Preference Changed",{languageType:n.type,languageId:n.id,...c})),(0,p.D8)(e,n,a)},[e,r])}function I(e){let{id:r,type:n}=e;return(0,h.S0)(r,{searchLocalPlugins:"local-plugin"===n,searchPublishedPlugins:"published-plugin"===n})}function T(e){let r=(0,m.v4)(),n=I(e??r);return(0,p.ZA)(e??r,n)}function S(e,r){let{id:n,type:i,pluginLanguage:a}=e;if("first-party"!==i&&r){let e=(0,f.X)(r,a),n=(0,p.K6)(r,e);if(n)return n.scaledUnit}switch(n){case m.uz:return E.scaledWeb;case m.p:case m.Ap:return E.scaledIOS;case m.LK:case m.NU:return E.scaledAndroid;default:return E.scaledWeb}}function w(e){let r=I(e);return S(e,r)}function A(e){switch(e){case m.uz:return(0,u.t)("dev_handoff.alternative_units.rem_unit");case m.LK:case m.NU:return(0,u.t)("dev_handoff.alternative_units.dp_unit");case m.p:case m.Ap:return(0,u.t)("dev_handoff.alternative_units.pt_unit");default:return(0,u.t)("dev_handoff.alternative_units.rem_unit")}}function C(e){let r=(0,m.v4)();return N(e??r)}function N(e){let r=w(e);return"first-party"===e.type?A(e.id):r}function L({localCodeLanguage:e,includeActions:r=!0,includeSelectSettings:n=!0}={}){let a=(0,m.v4)(),o=e??a,s=(0,m.AC)(o),l=y(o.id),c=v();return i.useMemo(()=>(function({includeActions:e=!1,includeSelectSettings:r=!0,codeLanguage:n,plugin:i,codeExtensionPreferences:a,onChangePreferences:o}){let s=[];if(!i||"first-party"===n.type||(0,p.GL)(i)!==n.id)return s;for(let l of(0,p.zZ)(i,(0,f.X)(i,n.pluginLanguage)))e&&(0,g.Wt)(l)&&s.push({name:l.propertyName,displayText:l?.label||l.propertyName,callback:()=>_.d1.codegenPreferencesChange({propertyName:l.propertyName}),recordingKey:l.propertyName}),r&&(0,g.ZV)(l)&&s.push({name:l.propertyName,recordingKey:l.propertyName,displayText:l?.label??l.propertyName,children:l.options.map((e,r)=>({name:e.value,displayText:e.label,isChecked:a?.customSettings?.[l.propertyName]?a?.customSettings?.[l.propertyName]===e.value:0===r,callback:()=>o(n,i,{customSettings:{...a?.customSettings,[l.propertyName]:e.value}}),recordingKey:e.value}))});return s})({includeActions:r,includeSelectSettings:n,codeLanguage:o,plugin:s,codeExtensionPreferences:l,onChangePreferences:c}),[r,n,o,s,l,c])}},621856:(e,r,n)=>{n.d(r,{q:()=>h});var i=n(411855),a=n(188507),o=n(922827),s=n(939863),l=n(308977),c=n(370934),d=n(909999),u=n(92597),m=n(662275),p=n(656399);function h(e){let r=(0,u.SF)(),n=function(e){let r=(0,l.v4)(),n=e??r,p=(0,l.AC)(n),h=(0,u.wQ)(n),_=(0,u.Em)(n),g=(0,u.gc)(n.id),f=(0,u.Bs)(),E=(0,a.wA)();return i.useMemo(()=>{let e=[];if(!_)return e;let r=g?.unit||o.tKW.PIXEL;return e.push({displayText:(0,s.t)("dev_handoff.alternative_units.dimension_unit"),header:!0},...c.zq.map(e=>{let i=e===o.tKW.PIXEL?(0,s.t)("dev_handoff.alternative_units.pixel_unit"):h;return{name:e.toString(),displayText:i,isChecked:r===e,callback:()=>f(n,p,{unit:e}),recordingKey:e===o.tKW.PIXEL?"pixel":"scaled"}}),{displayText:(0,s.t)("dev_handoff.alternative_units.unit_settings_menu_option"),callback:()=>E((0,m.to)({type:d.j6})),recordingKey:"setScaleFactor"}),e},[_,g?.unit,h,f,n,p,E])}(e),{updateDefaultCodegenSettings:h,isSetToDefault:_}=(0,p.Q)();return i.useMemo(()=>{let e=[];return n.length>0&&e.push(...n),r.length>0&&e.length>0&&e.push({displayText:"",separator:!0}),e.push(...r),e.length>0&&e.push({separator:!0,displayText:""}),e.push({displayText:(0,s.t)("dev_handoff.code.settings.set_as_default"),callback:()=>{h()},isChecked:_}),e},[r,_,n,h])}},208186:(e,r,n)=>{n.d(r,{Co:()=>R,Iy:()=>A,Me:()=>L,SD:()=>w,TU:()=>T,WV:()=>O});var i=n(268853),a=n(572304),o=n(640783),s=n(38329),l=n(456772),c=n(776621),d=n(96328),u=n(743282),m=n(27087),p=n(330654),h=n(988022),_=n(985945),g=n(540019),f=n(173454),E=n(754168),y=n(882698),b=n(273226);let v=p.object({id:p.string(),node_id:p.string(),file_key:p.string(),link_name:p.string(),link_url:p.string(),is_user_override:p.boolean(),link_preview_json:p.any()}),I=p.object({meta:p.array(v)});async function T({fileKey:e,nodeId:r,includeInheritedLinks:n}){let i=(await E.S.getRelatedLinks({nodeId:r,fileKey:e})).data,a=I.safeParse(i);if(!a.success)throw Error("Invalid response from server");let o=a.data.meta.map(e=>({id:e.id,nodeId:e.node_id,linkName:e.link_name,linkUrl:e.link_url,fileKey:e.file_key,isUserOverride:!!e.is_user_override,linkPreviewJson:e.link_preview_json}));if(!n)return o;let l=s.D.getState().mirror.sceneGraph,c=(0,b.k4)([r],l),d=(0,b.Yi)([r],l),u=await S(e,c),m=await S(e,d);return[...o,...u.map(e=>({...e,nodeId:r,mainComponentId:c})),...m.map(e=>({...e,nodeId:r,mainComponentId:d}))]}async function S(e,r){let n=s.D.getState().mirror.sceneGraph;if(!r)return[];let i=n.get(r);if(!i)return[];let{publishID:o}=i,l=a.fn(a.sH(o)),c=i.sourceLibraryKey,d=(await g.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:[c],subscriptionFileKey:s.D.getState().openFile?.key??null,orgId:s.D.getState().currentUserOrgId})))[0],u=null;return d&&((0,f.ZA)(d)&&(0,f.xA)(d)?u=d.hub_file_id:"library_file_key"in d&&(u=d.library_file_key)),await T({fileKey:u??e,nodeId:l?o??"":r,includeInheritedLinks:!1})}async function w(e){let r=new Set([e]),n=new Map,i=new Map,o=s.D.getState().mirror.sceneGraph,l=(s,l,c)=>{if(!l)return;let d=o.get(l);if(!d)return;let{publishID:u,guid:m}=d,p=c.find(e=>e.library_key===d.sourceLibraryKey),h=null;if(p&&((0,f.ZA)(p)&&(0,f.xA)(p)?h=p.hub_file_id:"library_file_key"in p&&(h=p.library_file_key)),!h||!u||!a.fn(a.sH(u))||h===e){n.set(m,s),i.set(m,l);return}n.set(u,s),i.set(u,l),r.add(h)},c=o.get("0:0")?.findAllWithCriteria({types:["INSTANCE"]}).map(([e])=>e);if(c&&c.length>0){let e=new Set;for(let r of c){let n=o.get(r);if(!n||"INSTANCE"!==n.type)continue;let i=n.symbolId;if(!i)continue;let a=o.get(i);a?.sourceLibraryKey&&e.add(a?.sourceLibraryKey)}let r=await g.M4.fetch(_.Cs.LibrariesByLibraryKeysQuery({libraryKeys:Array.from(e),subscriptionFileKey:s.D.getState().openFile?.key??null,orgId:s.D.getState().currentUserOrgId}));for(let e of c){let n=o.get(e);if(!n||"INSTANCE"!==n.type)continue;l(e,n.symbolId,r);let i=(0,b.Yi)([e],o);l(e,i,r)}}let d=await m.Ay.post("/api/files/related_links",{file_keys:Array.from(r.values())}),u=[];return d.data.meta.forEach(r=>{let a=e===r.file_key&&!!o.get(o.guidFromDeveloperFriendlyId(r.node_id)),s={id:r.id,linkName:r.link_name,linkUrl:r.link_url,fileKey:r.file_key,isUserOverride:!!r.is_user_override,linkPreviewJson:r.link_preview_json};a&&u.push({...s,nodeId:r.node_id,mainComponentId:void 0}),n.has(r.node_id)&&u.push({...s,nodeId:n.get(r.node_id),mainComponentId:i.get(r.node_id)})}),u}async function A({fileKey:e,nodeId:r,url:n,name:i,nodeType:a,pluginId:o,source:s}){if((await T({fileKey:e??"",nodeId:r??""})).find(e=>e.linkUrl===n))throw Error(`Link already exists on node ${r} with url ${n}`);return N({fileKey:e,nodeId:r,url:n,name:i,nodeType:a,pluginId:o,source:s})}async function C(e){let r;try{let n=await y.E.getLinkMetadata({text:e}),i=n?.data?.meta;i?.title&&(r=decodeURIComponent(i?.title))}catch(e){}finally{if(!r){let n=(0,o.Gw)(e);r=n?(0,d.Zr)(n):"N/A"}}return r}async function N({url:e,nodeId:r,fileKey:n,name:i,onPost:a,nodeType:c,pluginId:d,source:p}){let _="";if(i)_=i;else{let r=(0,o.FB)(e);if(r?.toLowerCase()==="github.com")_="Github";else if(r?.toLowerCase()==="jira.com"||r?.toLowerCase()==="atlassian.net"){_="Jira";let r=function(e){for(let r of k){let n=e.match(r);if(n?.[1])return n[1]}return null}(e);r&&(_=`Issue ${r}`)}else _=await C(e)}let g={node_id:r??"",link_name:_,link_url:e},f=m.Ay.post(`/api/files/${n}/related_links`,g);return a&&a(),l.WB()?.optimisticallyCreate({DeveloperRelatedLink:{[`optimistic-link-${u.g()}`]:{nodeId:r??"",fileKey:n??"",linkName:_,linkUrl:e,isUserOverride:!1,linkPreviewJson:null}}},f),f.then(e=>((0,h.ds)("Dev Handoff Related Links Added New Link Success",n,s.D.getState(),{nodeId:r,nodeType:c,source:p,pluginId:d}),e))}async function L({fileKey:e,nodeId:r,currentUrl:n,newValue:i,nodeType:a,pluginId:o,source:c}){let d=(await T({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return d||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,name:i,url:a,isUserOverride:o,clearLinkPreview:c,nodeType:d,pluginId:u,source:p}){let _={node_id:r,link_id:n,new_link_name:i,new_link_url:a};void 0!==o&&(_.is_user_override=o),c&&(_.link_preview_json=null);let g=m.Ay.put(`/api/files/${e}/related_links`,_);return l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[n]:{linkName:i,linkUrl:a,isUserOverride:o,linkPreviewJson:c?"":void 0}}},g),g.then(n=>((0,h.ds)("Dev Handoff Related Links Edit Link Success",e,s.D.getState(),{nodeId:r,nodeType:d,source:p,pluginId:u}),n))}({fileKey:e,nodeId:r,linkId:d.id,name:i.name||d.linkName,url:i.url||d.linkUrl,isUserOverride:!1,clearLinkPreview:!0,nodeType:a,pluginId:o,source:c})}async function O({fileKey:e,nodeId:r,url:n,nodeType:i,pluginId:a,source:o}){let c=(await T({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return c||D({nodeId:r,url:n}),function({fileKey:e,nodeId:r,linkId:n,nodeType:i,pluginId:a,source:o}){let c=m.Ay.del(`/api/files/${e}/related_links`,{node_id:r,link_id:n});return l.WB()?.optimisticallyDelete({DeveloperRelatedLink:{[n]:null}},c),c.then(n=>((0,h.ds)("Dev Handoff Related Links Delete Link Success",e,s.D.getState(),{nodeId:r,nodeType:i,source:o,pluginId:a}),n))}({fileKey:e,nodeId:r,linkId:c.id,nodeType:i,pluginId:a,source:o})}async function R({fileKey:e,nodeId:r,url:n,linkPreviewJson:i}){let a=(await T({fileKey:e,nodeId:r})).find(e=>e.linkUrl===n);return a||D({nodeId:r,url:n}),P({link:a,linkPreviewJson:i})}async function P({link:e,linkPreviewJson:r}){try{let n=m.Ay.put(`/api/files/${e.fileKey}/related_links/link_preview`,{node_id:e.nodeId,link_id:e.id,link_preview_json:r});l.WB()?.optimisticallyUpdate({DeveloperRelatedLink:{[e.id]:{linkPreviewJson:JSON.stringify(r)}}},n),await n}catch(n){(0,c.$D)(i.e.DEVELOPER_TOOLS,n,{extra:{link:e,linkPreviewJson:r}})}}function D({nodeId:e,url:r}){throw Error(`url ${r} and nodeId ${e} not found`)}p.object({node_id:p.string(),link_name:p.string(),link_url:p.string()}),p.object({meta:v});let k=[/\/browse\/([A-Z]+-\d+)/,/selectedIssue=([A-Z]+-\d+)/,/issues\/([A-Z]+-\d+)/]},598393:(e,r,n)=>{n.d(r,{VI:()=>d}),n(411855),n(188507);var i=n(83783),a=n(939863),o=n(154483);n(666930);var s=n(843245),l=n(555074);n(416095),n(540019),n(601607);var c=n(32067);function d(){let e=(0,l.kl)("numSelected"),r=(0,c.VW)(),n=(0,s.lA)();return 1===e&&r&&r.isAlive?function(e,r){let n=e.isState?e.parentNode:null,o=n?.name||e.name,s=r?.isState?r?.parentNode?.name:r?.name,l="SYMBOL"===e.type||"INSTANCE"===e.type;return{id:e.guid,name:o,backingSymbolName:s,type:function(e,r,n=null){if(!e?.isAlive)return null;let o=e.type;if((0,i.GI)(e)&&(o="STAMP"),n?.status==="loaded"&&"SYMBOL"!==o&&"INSTANCE"!==o)return(0,a.tx)("inspect_panel.node_type.detached_component");if("BOOLEAN_OPERATION"===o)switch(e.booleanOperation){case"UNION":return(0,a.tx)("inspect_panel.node_type.union");case"INTERSECT":return(0,a.tx)("inspect_panel.node_type.intersect");case"SUBTRACT":return(0,a.tx)("inspect_panel.node_type.subtract");case"XOR":return(0,a.tx)("inspect_panel.node_type.exclude")}switch(o){case"VECTOR":return(0,a.tx)("inspect_panel.node_type.vector");case"STAR":return(0,a.tx)("inspect_panel.node_type.star");case"LINE":return(0,a.tx)("inspect_panel.node_type.line");case"ELLIPSE":return(0,a.tx)("inspect_panel.node_type.ellipse");case"RECTANGLE":case"ROUNDED_RECTANGLE":return(0,a.tx)("inspect_panel.node_type.rectangle");case"REGULAR_POLYGON":return(0,a.tx)("inspect_panel.node_type.polygon");case"TEXT":return(0,a.tx)("inspect_panel.node_type.text");case"SLICE":return(0,a.tx)("inspect_panel.node_type.slice");case"GROUP":case"FRAME":if(e.isStateGroup)return(0,a.tx)("inspect_panel.node_type.main_component_set");if("HORIZONTAL"===e.stackMode)return(0,a.tx)("inspect_panel.node_type.horizontal_al");if("VERTICAL"===e.stackMode)return(0,a.tx)("inspect_panel.node_type.vertical_al");if(e.resizeToFit)return(0,a.tx)("inspect_panel.node_type.group");else return(0,a.tx)("inspect_panel.node_type.frame");case"SYMBOL":if(e.isState||r?.isStateGroup)return(0,a.tx)("inspect_panel.node_type.main_variant");return(0,a.tx)("inspect_panel.node_type.main_component");case"INSTANCE":return(0,a.tx)("inspect_panel.node_type.instance");case"STICKY":case"SHAPE_WITH_TEXT":case"CONNECTOR":case"STAMP":return(0,a.tx)("inspect_panel.node_type.figjam");case"SECTION":return(0,a.tx)("inspect_panel.node_type.section");case"WIDGET":return(0,a.tx)("inspect_panel.node_type.widget");case"CANVAS":return(0,a.tx)("inspect_panel.node_type.page");case"TABLE":return(0,a.tx)("inspect_panel.node_type.table")}return null}(e,n,null),isSymbol:e.isStateGroup||l,isFrame:"FRAME"===e.type,isSection:"SECTION"===e.type}}(r,n):null}(0,o.fv)()},812505:(e,r,n)=>{n.d(r,{M:()=>a});var i=n(411855);function a(){return i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},i.createElement("g",{clipPath:"url(#a)"},i.createElement("mask",{id:"b",width:16,height:16,x:0,y:0,maskUnits:"userSpaceOnUse",style:{maskType:"alpha"}},i.createElement("path",{fill:"#fff",fillRule:"evenodd",d:"M11.346 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.14.14a.996.996 0 0 0-1.137.193L4.697 6.087 1.95 4.002a.666.666 0 0 0-.85.037l-.882.802a.667.667 0 0 0 0 .986L2.6 8 .217 10.173a.667.667 0 0 0 .001.986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.656-11.522L7.217 8l4.785 3.632V4.368Z",clipRule:"evenodd"})),i.createElement("g",{mask:"url(#b)"},i.createElement("path",{fill:"#0065A9",d:"M15.434 1.727 12.137.14A.997.997 0 0 0 11 .333L.208 10.173a.667.667 0 0 0 0 .986l.882.802a.667.667 0 0 0 .851.037L14.938 2.14A.662.662 0 0 1 16 2.667v-.039a1 1 0 0 0-.566-.9Z"}),i.createElement("g",{filter:"url(#c)"},i.createElement("path",{fill:"#007ACC",d:"m15.434 14.273-3.297 1.587A.996.996 0 0 1 11 15.667L.208 5.827a.667.667 0 0 1 0-.986l.882-.802a.667.667 0 0 1 .851-.037l12.997 9.859A.662.662 0 0 0 16 13.333v.039a1 1 0 0 1-.566.9Z"})),i.createElement("g",{filter:"url(#d)"},i.createElement("path",{fill:"#1F9CF0",d:"M12.137 15.86A.997.997 0 0 1 11 15.667a.586.586 0 0 0 1-.415V.747a.586.586 0 0 0-1-.414c.3-.3.755-.377 1.137-.193l3.296 1.585a1 1 0 0 1 .567.901v10.748a1 1 0 0 1-.567.901l-3.296 1.585Z"})),i.createElement("path",{fill:"url(#e)",fillRule:"evenodd",d:"M11.336 15.89c.252.099.54.093.794-.03l3.294-1.585a1 1 0 0 0 .566-.901V2.626a1 1 0 0 0-.566-.901L12.13.14a.996.996 0 0 0-1.137.193L4.687 6.087 1.94 4a.666.666 0 0 0-.85.038l-.882.802a.667.667 0 0 0 0 .986L2.59 8 .208 10.173a.667.667 0 0 0 0 .986l.881.802a.666.666 0 0 0 .851.037l2.747-2.085 6.306 5.754c.1.1.217.175.343.224Zm.657-11.522L7.208 8l4.785 3.632V4.368Z",clipRule:"evenodd",opacity:.25,style:{mixBlendMode:"overlay"}}))),i.createElement("defs",null,i.createElement("filter",{id:"c",width:32.676,height:28.759,x:-8.343,y:-4.467,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:4.167}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),i.createElement("filter",{id:"d",width:21.667,height:32.584,x:2.667,y:-8.292,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},i.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:4.167}),i.createElement("feColorMatrix",{values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),i.createElement("feBlend",{in2:"BackgroundImageFix",mode:"overlay",result:"effect1_dropShadow_0_3"}),i.createElement("feBlend",{in:"SourceGraphic",in2:"effect1_dropShadow_0_3",result:"shape"})),i.createElement("linearGradient",{id:"e",x1:7.99,x2:7.99,y1:.041,y2:15.959,gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"#fff"}),i.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),i.createElement("clipPath",{id:"a"},i.createElement("path",{fill:"#fff",d:"M0 0h16v16H0z"}))))}},786110:(e,r,n)=>{n.d(r,{Ib:()=>U,Zy:()=>V,q1:()=>G,vY:()=>H});var i=n(411855),a=n(75395),o=n(201140),s=n(130735),l=n(922827),c=n(340818),d=n(298455),u=n(629019),m=n.n(u),p=n(38329),h=n(794272),_=n(966712),g=n(716034),f=n(418956),E=n(860601),y=n(163023),b=n(939863),v=n(118830),I=n(444736),T=n(988022),S=n(617453),w=n(843495),A=n(29680),C=n(698993),N=n(100197),L=n(601607),O=n(279702),R=n(498606),P=n(319882),D=n(620722),k=n(371591),M=n(965736),F=n(949207),x=n(432023);let U=(0,g.eU)(new Map);function B(e){let{isHovered:r,selection:n}=(0,h.R)(r=>({isHovered:r.mirror.appModel.hoveredNode===e.guid,selection:r.mirror.sceneGraphSelection})),[a,o]=i.useState(!1),s=i.useRef(null);i.useEffect(()=>{s.current&&e.isSelected&&s.current.scrollIntoView({block:"nearest"})},[e.isSelected]);let c="SYMBOL"===e.type||"INSTANCE"===e.type||e.isInstanceSublayer||e.isSymbolSublayer||G.includes(e.type),d=[M.nM,e._className];e.isSelected&&d.push(M.wH),r&&d.push(M.yo),c&&d.push(M.HR),e.isExpanded(e.guid)&&d.push(M.sz),e.isAncestorSelected&&d.push(M.bx),0!==e.indentation&&d.push(M.BT);let u=Array.from({length:e.indentation},(e,r)=>r+1);return i.createElement("div",{onMouseDown:r=>{(0,C.S)("html_tree"),e.didSelectRow(e.guid);let i=Object.keys(n);if(f.zl.set(P.J,!1),r.metaKey){var a;n[a=e.guid]?w.D$([a]):w.Dh([a])}else r.shiftKey&&i.length>0?w.GL(i[i.length-1],e.guid):l.w3z.selectAndPanToNode(e.guid)},onDoubleClick:r=>e.isExpandable&&e.toggleExpanded(r,e.guid),onContextMenu:r=>e.openContextMenu(r,e.guid),onMouseEnter:()=>{o(!0),w.Uc(e.guid)},onMouseLeave:()=>{o(!1),w.Uc(w.Hr)},role:"button",tabIndex:0,className:m()(d),ref:s,"data-fullscreen-intercept":!0},i.createElement("div",{className:M.M4},u.map(e=>i.createElement("div",{key:e,className:M.Mh})),e.children),i.createElement(Y,{name:e.name,guid:e.guid,isRowHovered:a}))}function V(e){return i.createElement(y.B,{onMouseDown:e.visible?r=>{r.preventDefault(),r.stopPropagation(),e.onMouseDown?.(r)}:void 0,className:m()(M.GE,e.visible&&M.RK),svg:e.expanded?F.A:x.A,dataTestId:`devHandoffLayersRow.toggle-${e.name}`})}let G=["TABLE","TABLE_CELL","WASHI_TAPE","STAMP","STICKY","SHAPE_WITH_TEXT","WIDGET"];function H(e,r){let n=e?.type??O.PW.NOT_ASSET,i=n&(O.PW.ASSET_IMAGE|O.PW.ASSET_ICON);return r?i:n&O.PW.ASSET_IMAGE}function K(e){return"SYMBOL"===e||"INSTANCE"===e}function W({guid:e}){let r=(0,f.md)(U).get(e);if(!r)return null;let n=r.state;return"added"===n?i.createElement("div",{className:M.vN}):"changed"===n?i.createElement("div",{className:M.tD}):"removed"===n?i.createElement("div",{className:M.rq}):null}function $(e){return i.createElement(B,{...e,_className:e.hasChildren?M.aw:void 0},i.createElement(V,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),i.createElement(k.Bf,{className:M.V3,guid:e.guid}),i.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement(W,{guid:e.guid}))}function Y({isRowHovered:e,guid:r,name:n}){let l=(0,L.Fk)((e,r)=>e.get(r)?.isLockedInDevMode,r);return(0,_.kc)().dt_locking&&(l||e)?i.createElement(a.E,{actionOnPointerDown:!0,onClick:()=>{let e=(0,d.UN)().get(r);e&&c.l7.user("set-locked-in-dev-mode",()=>{e.isLockedInDevMode=!e.isLockedInDevMode;let r=p.D.getState(),n=r.openFile?.key;n&&(0,T.GS)("dev_mode.set_node_locked",n,r,{locked:e.isLockedInDevMode,nodeId:e.guid,nodeType:e.type,isLockedInDesignMode:e.locked,opacity:e.opacity,fillOpacity:e.fills[0]?.opacity})})},"aria-label":(0,b.t)("dev_handoff.layers_panel.locked_tooltip"),className:M.hz,"aria-pressed":l,htmlAttributes:{"data-testid":`devHandoffLayersRow.lockIcon-${n}`,"data-tooltip":(0,b.t)("dev_handoff.layers_panel.locked_tooltip"),"data-tooltip-type":R.Ib.TEXT,"data-tooltip-show-right":!0}},l?i.createElement(o.s,null):i.createElement(s.r,null)):null}function z(e){return i.createElement(B,{...e,_className:M.aw},i.createElement(V,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(e.guid),onMouseDown:r=>e.toggleExpanded(r,e.guid),name:e.name}),i.createElement(k.Bf,{className:M.V3,guid:e.guid}),i.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement(W,{guid:e.guid}))}function j(e){var r,n;let a;let o=(0,A.eY)(),s=e.inheritedTextStyle;if(s){let e=l.Pt4.getStyleNodeId(s.key,s.version);a=o.get(e)?.name}let c=e.isInstanceSublayer?(r=e.name,n=e.textContent,r===n?.trim().replace(/\s+/gm," ")):e.autoRename;return i.createElement(B,{...e,_className:M.yL},i.createElement(V,{visible:!1,expanded:!1,name:e.name}),i.createElement(k.Bf,{className:M.V3,guid:e.guid}),c?null:i.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement("span",{className:M.P_},e.textContent),i.createElement("span",{className:M.bT}," \xb7 ",a),i.createElement(W,{guid:e.guid}))}function q(e){return i.createElement(i.Fragment,null,i.createElement(k.Bf,{className:m()(M.V3,M.MS,{[M.hR]:!e.figJam}),guid:e.guid}),i.createElement("span",{className:m()(M.Hn,M.MS)},e.name,e.showGuids&&` (${e.guid})`))}function Z(e){let r=e.guid;return i.createElement(B,{...e},i.createElement(V,{visible:e.isExpandable&&e.hasChildren,expanded:e.isExpanded(r),onMouseDown:n=>e.toggleExpanded(n,r),name:e.name}),i.createElement(q,{guid:r,name:e.name,showGuids:e.showGuids}),i.createElement(W,{guid:e.guid}))}function X(e){let r=e.guid;return i.createElement(B,{...e},i.createElement(V,{visible:!1,expanded:!1,onMouseDown:E.lQ,name:e.name}),i.createElement(q,{guid:r,name:e.name,showGuids:e.showGuids,figJam:!0}),i.createElement(W,{guid:e.guid}))}function J(e){let{assetInfo:r}=e;return r?i.createElement(ee,{...e,assetInfo:r}):i.createElement($,{...e})}function Q({guid:e,assetInfo:r,hasEnabledStaticImagePaint:n}){let a=r.type&O.PW.ASSET_IMAGE||n,o=(0,v.O)({assetId:e,thumbnailVersion:r.thumbnailVersion,width:64,height:64,scale:2});return i.createElement(D.J,{className:m()(M.ZE,a?M.Ym:M.ye),style:o.backgroundStyle,src:o.url})}function ee(e){let{assetInfo:r}=e;return i.createElement(B,{...e,_className:M.Re},i.createElement(V,{visible:!1,expanded:!1,name:e.name}),i.createElement(Q,{guid:e.guid,assetInfo:r,hasEnabledStaticImagePaint:e.hasEnabledStaticImagePaint}),i.createElement(i.Fragment,null,K(e.type)?i.createElement(q,{guid:e.guid,name:e.name,showGuids:!1}):i.createElement(i.Fragment,null,i.createElement("span",{className:M.Hn},e.name," ",e.showGuids&&` (${e.guid})`),i.createElement("span",{className:M.UZ},i.createElement(I.$R,{assetInfo:r,dataTestId:"layerPanelAsset"})))))}i.memo(e=>{let r=(0,N.J2)((0,S.UK)().showGuids),n=(0,N.J2)(l.Ez5.devHandoffState().automaticIconDetection),a=i.useMemo(()=>l.w3z.getOrAddAssetInfo(e.guid),[e.guid]),o=(0,A.eY)().get(e.guid);if(!o)return null;let s=o.devToolsOrderedVisibleChildren,c=function(e,r,n){return G.includes(e.type)?X:n&&H(n,r)?J:K(e.type)?Z:"FRAME"===e.type&&e.isStack?z:"TEXT"===e.type?j:$}(o,n,a);if(!c)return null;let d=s.length>0&&!(a&&H(a,n));return i.createElement(c,{toggleExpanded:e.toggleExpanded,isExpanded:e.isExpanded,openContextMenu:e.openContextMenu,indentation:e.indentation,hasChildren:d,isSelected:e.isSelected,isAncestorSelected:e.isAncestorSelected,didSelectRow:e.didSelectRow,guid:o.guid,type:o.type,name:o.name,textContent:o.textContent,absoluteBoundingBox:o.absoluteBoundingBox,hasEnabledStaticImagePaint:o.hasEnabledStaticImagePaint,inheritedTextStyle:o.inheritedTextStyle,autoRename:o.autoRename,stackMode:o.inferredAutoLayoutResult?o.inferredAutoLayoutResult.stackMode:o.stackMode,isInstanceSublayer:o.isInstanceSublayer,isSymbolSublayer:o.isSymbolSublayer,isExpandable:!e.isRoot&&d,showGuids:r,assetInfo:a})})},693897:(e,r,n)=>{n.d(r,{Ym:()=>u});var i=n(966712),a=n(256975),o=n(988022),s=n(99506),l=n(239671),c=n(520425);let d="Enter Inspect Mode";function u(e,r,n,m,p={}){let h=r===l.nT.DevHandoff?d:"Enter Design Mode",_={source:n,hasSeatForDevMode:(0,a.tn)(e),...p},g=e.openFile?.key;if((0,o.ds)(h,g,e,_,{forwardToDatadog:m}),(0,i.Ay)().org_id&&g&&"init"!==n){let e=h===d?s.Mr.DEV_MODE_FILE_SEEN:s.Mr.DESIGN_FILE_SEEN;c.L.postRecentActivity({fileKey:g,activityType:e})}}},812890:(e,r,n)=>{n.d(r,{d:()=>a});var i=n(582947);(0,i.Fu)("dev_mode_should_see_paywall_reminder");let a=(0,i.Fu)("dev_mode_seen_paywall_reminder")},321961:(e,r,n)=>{n(188507),n(335682),n(243987),n(428467),n(984968),n(668860)},103339:(e,r,n)=>{n.d(r,{DK:()=>T,MO:()=>C,q9:()=>S});var i=n(411855);n(188507);var a=n(268853),o=n(922827),s=n(776250),l=n(716034),c=n(418956),d=n(776621),u=n(572206),m=n(877432),p=n(939863),h=n(154483);n(666930);var _=n(44892),g=n(15859),f=n(927657),E=n(931770),y=n(335682),b=n(933342);n(234945);var v=n(173454),I=(e=>(e.GENERIC="GENERIC",e.OFFLINE="OFFLINE",e.THUMBNAIL_TIMEOUT="THUMBNAIL_TIMEOUT",e))(I||{});function T(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail")}}function S(e){switch(e){case"GENERIC":return(0,p.t)("design_systems.playground.unable_to_load_help_text");case"OFFLINE":return(0,p.t)("design_systems.playground.unable_to_load_while_offline_help_text");case"THUMBNAIL_TIMEOUT":return(0,p.t)("design_systems.playground.unable_to_load_thumbnail_help_hext")}}let w=(0,l.eU)(!1),A=(0,h.fv)();function C({canViewPlaygroundQueryResult:e,canvasAsset:r,onLoaded:n,onError:l,thumbnailOptions:p}){let[h,I]=i.useState(r),{setPlaygroundNodeData:T,onSetPercentImagesLoaded:S,onResetTracker:C,thumbnailData:N,playgroundNodeData:L,hasChangesToReset:O,hasThumbnailErrors:R,setHasChangesToReset:P}=function(e){let[r,n]=i.useState(),[a,s]=i.useState(),[l,d]=i.useState(!1),[m,p]=i.useState(!1),[h,_]=i.useState(!1),[g,y]=(0,c.fp)(w),b=i.useCallback(()=>{let r=o.glU.generatePlaygroundThumbnail(e??null),i=o.glU.getPlaygroundNodeData();r.pixels?.length>0?(n({src:(0,E.Pv)(r.pixels,new u.Mi(r.width,r.height)),width:r.width/r.scale,height:r.height/r.scale}),s(i),p(!1),y(!0)):p(!0)},[y,e]),v=i.useCallback(e=>{d(e),_(!0)},[_]),{onSetPercentImagesLoaded:I,onResetTracker:T}=function(e){let[r,n]=i.useState(0),[a,o]=i.useState(0),[s,l]=i.useState(null),c=i.useCallback(()=>{n(0),o(0),l(null)},[]);return i.useEffect(()=>{function n(n,i){if(r>n&&r<i&&a<=n){let n=Date.now();(null===s||n-s>1e3)&&(l(n),o(r),e())}}n(.25,.5),n(.5,.75),n(.75,1)},[a,s,e,r]),i.useEffect(()=>{1===r&&(e(),o(1))},[e,r]),i.useMemo(()=>({onSetPercentImagesLoaded:n,onResetTracker:c}),[n,c])}(b);return i.useEffect(()=>(0,f.k)(v),[v]),i.useEffect(()=>()=>o.glU.clearPlaygroundScene(),[]),i.useEffect(()=>{h&&setTimeout(()=>{b(),_(!1)},0)},[h,_,b]),i.useMemo(()=>({setPlaygroundNodeData:s,onSetPercentImagesLoaded:I,onResetTracker:T,thumbnailData:r,playgroundNodeData:a,hasChangesToReset:l,hasThumbnailErrors:m,setHasChangesToReset:d}),[s,I,T,r,a,l,m,d])}(p),D=(0,y.tS)(),k=h!==r||!L||"loading"===e.status,[M,F]=i.useState(null),x=i.useCallback(()=>{o.glU.clearPlaygroundScene(),T(void 0)},[T]),U=i.useCallback(async(e=!0)=>{let n;if(r.type!==v.PW.COMPONENT&&r.type!==v.PW.STATE_GROUP&&r.type!==v.PW.MODULE){x();return}let i=Date.now();if(F(null),r.isLocal)n=null;else try{let e=_.Eo.getCanvas({canvas_url:r.canvas_url});await Promise.race([e,(0,m.fm)(100)])||(I(r),T(void 0),P(!1)),n=await e}catch(e){0===e.status?F("OFFLINE"):F("GENERIC"),x(),I(r),(0,d.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,e,{tags:{openFileKey:D,libraryKey:r.library_key,type:r.type}});return}let l=r.type!==v.PW.STATE_GROUP||r.isLocal?null:r.default_state_key;if(n?o.glU.setPlaygroundSceneFromBuffer(r.node_id,n,e,l,A(r)):o.glU.setPlaygroundSceneFromLocalAsset(r.node_id)){P(!1),T(o.glU.getPlaygroundNodeData()),I(r),s.az.trackDefinedEvent("playground.set_scene",{duration:Date.now()-i,assetType:r.type,isLocal:r.isLocal??!1,assetKey:(0,b.u2)(r)}),C(),(0,g.Jr)().loadAllImagesUnder(["0:0"],o.MoD.NON_ANIMATED_ONLY,"playground.initialLoad",(e,r)=>{S((r-e)/r)},o.glU.getPlaygroundScene());return}if(e){I(r),T(void 0),P(!1),setTimeout(()=>{U(!1)},50);return}F("GENERIC"),x()},[D,x,C,S,r,T,P]);return i.useEffect(()=>{"loaded"===e.status&&(e.data?U():I(r))},[e,T,r,x,U]),i.useMemo(()=>{let e=R?"THUMBNAIL_TIMEOUT":M;return!e&&k?{state:"LOADING",previousAssetData:{thumbnailData:N,hasChangesToReset:O,refetchAndResetScene:U,nodeData:L,asset:h}}:(n(),e)?(l(),{state:"ERROR",errorType:e,previousAssetData:{thumbnailData:N,hasChangesToReset:O,refetchAndResetScene:U,nodeData:L,asset:h}}):{state:"LOADED",currentAssetData:{hasChangesToReset:O,refetchAndResetScene:U,nodeData:L,thumbnailData:N,asset:h}}},[k,n,R,M,L,N,l,O,U,h])}},807197:(e,r,n)=>{(0,n(716034).eU)([])},806595:(e,r,n)=>{n.d(r,{a:()=>Q});var i=n(411855),a=n(188507),o=n(966664),s=n(268853),l=n(343887),c=n(75395),d=n(13583),u=n(166842),m=n(73150),p=n(367061),h=n(922827),_=n(629019),g=n.n(_),f=n(358145),E=n(966712),y=n(498750),b=n(192437),v=n(355819),I=n(154254),T=n(89398),S=n(939863),w=n(392592),A=n(257624),C=n(341993),N=n(749229),L=n(720833),O=n(865401),R=n(733169),P=n(617453),D=n(869156),k=n(441088),M=n(318812),F=n(200889),x=n(498606),U=n(922358),B=n(603634),V=n(32067),G=n(673867),H=n(788612),K=n(393062),W=n(428877),$=n(538697),Y=n(759932),z=n(564092),j=n(533573),q=n(712685),Z=n(875157),X=n(422237),J=n(480873);function Q({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:a,surface:o,entryPoint:s,maxHeight:l,canOpenLibrary:c}){let d=(0,D.u)(e),u=(0,k.T)()?"vscode":"dev_mode",m=d?.subscriptionStatus==="LOCAL"&&d.isSoftDeleted,p=i.useMemo(()=>({entrypoint:s,variableType:d?.resolvedType!==void 0?(0,j.Hr)(d.resolvedType):void 0,variableOrigin:d?.subscriptionStatus==="LOCAL"?"local":"library",product:u,isDeleted:m,surface:o}),[s,m,d?.resolvedType,d?.subscriptionStatus,o,u]);return i.createElement(O.gs,{name:"details",enabled:!!d,trackingProps:p},i.createElement(v.P,{maxHeight:l,className:J.PM},i.createElement(ee,{variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:a,canOpenLibrary:c})))}function ee({variableId:e,onClose:r,isDetailsModal:n,inlineCloseButton:o,canOpenLibrary:s=!0}){let c=(0,a.wA)(),u=(0,O.ON)(),m=function({variableId:e,isDetailsModal:r}){let n=(0,D.u)(e),i=(0,D.G6)(n?.variableSetId),a=(0,D.Kd)(n?.node_id),o=i?.modes.find(e=>e.id===i?.defaultModeID),s=(0,z.yK)(n?.node_id);return{variable:n??void 0,variableSet:i,variableSetKey:a??void 0,modeForModal:r?s?.modeId.guid:o?.id}}({variableId:e,isDetailsModal:n}),p=(0,f.ZC)(e),h=m.variable?.variableSetId,_=(0,f.ZC)(h),[g,b]=i.useState(null);i.useEffect(()=>{n?p&&p!==e&&b(null):_&&_!==h&&b(null)},[n,p,e,_,h]);let v=!!m.variable&&!!m.variableSet&&!!m.variableSetKey&&!!m.modeForModal;i.useEffect(()=>{v||(c(w.F.enqueue({message:"Variable details could not be loaded"})),r())},[v,c,r]);let I=i.useCallback(e=>{e.event.keyCode===y.Uz.ESCAPE&&(u("escape_pressed"),e.event.preventDefault(),e.accept(),r())},[u,r]),T=i.useCallback(()=>{u("description_expanded")},[u]);if(!v)return null;let{variable:C,variableSet:N,variableSetKey:L,modeForModal:R}=m,P=g??R,k="LOCAL"===C.subscriptionStatus&&C.isSoftDeleted;return i.createElement(U.vL,{handleKeyDown:I,name:"dev-mode-variable-details",focusOnMount:!0},i.createElement(H.VZ,{title:"variable-info",hideHeader:!0,recordingKey:"dev-var-details-header",noPadding:!0},i.createElement("div",{className:J.Ct},o&&(0,E.kc)().dt_variables_fast_follows?i.createElement("div",{className:J.h6},i.createElement(et,{variable:C}),i.createElement(l.K,{onClick:r,"aria-label":(0,S.t)("dev_handoff.variables.details_button_close_aria_label")},i.createElement(d.L,null))):i.createElement(et,{variable:C}),n&&!k&&i.createElement(er,{variableId:e,libraryKey:C?.subscriptionStatus==="SUBSCRIBED"?C.library_key:void 0,isLocal:C?.subscriptionStatus==="LOCAL",onClose:r,canOpenLibrary:s}),i.createElement(A.X,{description:C.description,containerClassName:J.h_,onExpand:T,dataTestId:"var-details-description"}))),i.createElement(H.VZ,{title:"variable-value",hideHeader:!0,recordingKey:"dev-var-details-value",noPadding:!0},i.createElement("div",{className:J.Ct},i.createElement(ea,{name:(0,S.t)("dev_handoff.variables.details_collection"),value:N?.name,copyValue:null,trackingName:"collection"}),i.createElement(ei,{setSelectedMode:b,selectedMode:P,modeOptions:N?.modes??[]}),i.createElement(ed,{variableId:C.node_id,currentVarSetKey:L,currentlySelectedModeId:P,expandByDefault:!n}),i.createElement(eu,{variableId:C.node_id}))),i.createElement(em,{codeSyntax:C.codeSyntax}))}function et({variable:e}){let r=(0,V.Cj)(e.name),n=(0,O.ON)(),a="LOCAL"===e.subscriptionStatus&&e.isSoftDeleted,{ref:o,...s}=(0,G.X)(e.name),l=a?{"data-tooltip":(0,S.t)("variables.variable_was_deleted"),"data-tooltip-type":x.Ib.TEXT}:void 0,d=i.useCallback(()=>{r&&(n("row_copied",{type:"name"}),r())},[r,n]);return i.createElement(c.E,{className:J.L$,onClick:d,htmlAttributes:s??l},a&&i.createElement(q.B3,null),i.createElement("span",{className:J.cG,ref:o,"data-testid":"var-details-name"},e.name))}function er({variableId:e,libraryKey:r,isLocal:n,onClose:a,canOpenLibrary:o}){let l=(0,O.KP)("full_table",N.Nh.VariableDetailsModal),c=(0,R.bL)({libraryKey:r,isDevHandoff:!0,isDevModeOverview:!1,isDevModeVarsTable:!0,devModeVarsTableSelection:e,devModeFocusId:void 0}),d=(0,F.B)(r||"",{enabled:!!r}),u=(0,L.g)({onShow:a,entryPoint:N.Nh.VariableDetailsModal,variableId:e});return n||"loaded"===c.status&&"loaded"===d.status?(0,E.kc)().dt_dev_variables_table&&o?i.createElement(b.tH,{boundaryKey:"varsTable_detailsEntry",fallback:b.H4.NONE_I_KNOW_WHAT_IM_DOING,team:s.e.DEVELOPER_TOOLS,sentryTags:{area:s.e.DEVELOPER_TOOLS}},i.createElement(C.J,{libraryName:d?.data,containerClassName:J.Yv,link:c.data,isLocal:n,localFallback:(0,S.t)("dev_handoff.variables.details_local"),onClickLocalFallback:u,onTrackClickName:l,dataTestId:"var-details-library",recordingKey:"library_name"})):i.createElement(C.J,{libraryName:d?.data,containerClassName:J.Yv,isLocal:n,dataTestId:"var-details-library"}):i.createElement(C.J,{containerClassName:J.Yv,loading:!0})}let en=new class{format(e){return e.name}};function ei({selectedMode:e,setSelectedMode:r,modeOptions:n}){let o=(0,a.wA)(),s=(0,O.ON)(),l=(0,M.Um)(),c=i.useMemo(()=>n.find(r=>r.id===e),[e,n]),d=i.useCallback(n=>{s("change_mode",{previous:e,current:n.id}),r(n.id)},[e,r,s]);return c&&n&&!(n.length<2)?i.createElement(H._p,{className:J.VL},i.createElement("span",{className:J.xZ},(0,S.tx)("dev_handoff.variables.details_mode")),i.createElement("span",{className:J.IZ,"data-testid":"var-details-mode"},i.createElement($.l6,{id:"mode_dropdown",dispatch:o,dropdownShown:l,property:c,onChange:d,formatter:en},n.map(e=>i.createElement($.c$,{key:`${e.id}`,value:e},e.name))))):null}function ea({name:e,trackingName:r,trackingProps:n={},value:a,copyValue:o,children:s}){let l=(0,O.ON)(),c=i.useCallback(()=>{null!==o?l("row_copied",{type:r,...n}):l("row_clicked",{type:r,...n})},[o,l,r,n]);return s?i.createElement(H._p,{className:J.k$,copyValue:o,onCopy:c,disableVariableInspection:!0,showTooltipAbove:!0},s):i.createElement(H._p,{className:J.k$,name:e,value:a,copyValue:o,onCopy:c,disableVariableInspection:!0,showTooltipAbove:!0})}let eo=(0,X.ex)("variable_value_from_other_mode",function({modeName:e,collectionName:r}){return i.createElement("div",{className:I.cx.cursorDefault.colorTextTooltip.wFitContent.$},(0,S.tx)("dev_handoff.variables.details_value_from_other_mode",{modeName:i.createElement("span",{className:I.cx.fontSemiBold.$},e),collectionName:i.createElement("span",{className:I.cx.fontSemiBold.$},r)}))},e=>({modeName:e.getAttribute("data-tooltip-mode"),collectionName:e.getAttribute("data-tooltip-collection")}));function es({variableData:e,varSetKeyToModeID:r,originalSetID:n,showArrow:a,showDotDotDot:s,numberOfAliases:l,showCollapsedTooltip:d,onToggle:_}){let f=(0,D.u)(e.value),E=(0,D.BQ)(e.value,r),y=(0,D.G6)(f?.variableSetId),b=(0,D.Kd)(f?.node_id),v=(0,V.Cj)(f?.name),I=(0,O.ON)(),T=i.useCallback(()=>{v&&(v(),I("row_copied",{type:"alias"}))},[v,I]),w=i.useMemo(()=>{if(f?.variableSetId===n||!b||!y)return null;let e=r?.[b]??y?.defaultModeID,i=y?.modes.find(r=>r.id===e);return i?{modeName:i.name,collectionName:y.name}:null},[n,y,r,f,b]),A=(0,S.t)("dev_handoff.variables.details_value_show_more",{count:l-2}),{ref:C,...N}=(0,G.X)(A),L="MIXED"!==E&&E?.type!==h.Z_n.COLOR;return i.createElement(i.Fragment,null,i.createElement("div",{className:J.To},i.createElement(q.wG,{thumbnailValue:(0,o.Vq)(E)&&"MIXED"!==E?E:void 0,text:f?.name??(0,S.t)("variables.missing_name"),onClick:T,isDeleted:f?(0,j.eF)(f):void 0}),w&&i.createElement(u.B,{"data-tooltip-type":x.Ib.SPECIAL,"data-tooltip":eo,"data-tooltip-mode":w.modeName,"data-tooltip-collection":w.collectionName,className:J.LU})),a?i.createElement("div",{className:g()(J.aI,L&&J.S5)},i.createElement(m.Q,null)):s?i.createElement("div",{className:g()(J.my,L&&J.mH)},i.createElement(c.E,{onClick:_,"aria-label":(0,S.t)("dev_handoff.variables.details_value_expand_aria_label"),className:J.X1,htmlAttributes:N},i.createElement(p.f,{className:J.Kk}),i.createElement("div",{className:J.Pn,ref:C},A)),d&&i.createElement(u.B,{"data-tooltip-type":x.Ib.TEXT,"data-tooltip":(0,S.t)("dev_handoff.variables.details_values_not_all_from_same_mode"),className:J.Kk})):null)}function el({value:e}){let r=e?.value?.toLocaleString(),n=(0,V.Cj)(r),a=(0,O.ON)(),{ref:o,...s}=(0,G.X)(r),l=i.useCallback(()=>{n&&(n(),a("row_copied",{type:"value"}))},[n,a]);switch(e.type){case h.Z_n.STRING:case h.Z_n.BOOLEAN:case h.Z_n.FLOAT:return i.createElement(c.E,{onClick:l,className:g()(J.Uq,e.type===h.Z_n.STRING&&J.TQ),htmlAttributes:{...s,"data-testid":"var-details-value"},ref:o},r);case h.Z_n.COLOR:return i.createElement(ec,{value:e});default:return null}}function ec({value:e}){let r=(0,P.Ku)(),n=(0,W.Ig)(),a=(0,K.q)(e.value,r,n,{alphaInPercent:!0}).value,o=(0,V.Cj)(a),s=(0,O.ON)(),l=i.useCallback(()=>{o&&(o(),s("row_copied",{type:"value"}))},[o,s]),{ref:d,...u}=(0,G.X)(a);return i.createElement(c.E,{onClick:l,className:J.du,htmlAttributes:{...u,"data-testid":"var-details-value"}},i.createElement(B.J,{color:e.value}),i.createElement("div",{className:J.qn,ref:d},a))}function ed({variableId:e,currentVarSetKey:r,currentlySelectedModeId:n,expandByDefault:a}){let[o,s]=i.useState(!1),l=a||o,c=function(e,r){let n=(0,z.Px)();return i.useMemo(()=>e&&r?{...n,[e]:r}:n,[n,e,r])}(r,n),d=(0,D.u)(e),u=(0,D.Xv)(e,c),m=(0,D.hg)((u??[]).map(e=>e.type===h.Z_n.ALIAS?e.value:void 0)),p=(0,O.ON)(),_=i.useCallback(()=>{p("toggle_alias_chain",{type:l?"collapse":"expand"}),s(e=>!e)},[l,p]);if(!d||!u||0===u.length)return null;let f=m.some((e,r)=>!!e&&r>0&&e?.variableSetId!==d?.variableSetId),E=u.length>2,y=u[0],b=u[u.length-1],v=u.length>1?l?u:[y,b]:[b];if(1===u.length&&(b.type===h.Z_n.STRING||b.type===h.Z_n.BOOLEAN||b.type===h.Z_n.FLOAT)){let e=b.value.toString();return i.createElement(ea,{trackingName:"value",name:(0,S.t)("dev_handoff.variables.details_value"),value:e,copyValue:e})}return i.createElement("div",{className:J.e9},i.createElement("span",{className:J.xZ},(0,S.tx)("dev_handoff.variables.details_value")),i.createElement("div",{className:g()(J.n8,b.type!==h.Z_n.COLOR&&J.jl)},v.map((e,r)=>{let n=r===v.length-1;return e.type===h.Z_n.ALIAS?i.createElement(es,{key:r,variableData:e,varSetKeyToModeID:c,originalSetID:d?.variableSetId,showArrow:E?!n&&l:!n,showDotDotDot:!!E&&!n&&!l,showCollapsedTooltip:E&&!l&&f,numberOfAliases:u.length,onToggle:_}):i.createElement(el,{key:r,value:e})})))}function eu({variableId:e}){let r=(0,D.u)(e),n=(0,O.ON)(),a=(0,S.t)("dev_handoff.variables.details_scope"),o=(0,G.X)(a);return r?.scopes&&r.scopes.length>0&&r.scopes[0]!==h.j0r.ALL_SCOPES?i.createElement(T.c,{className:J.e9,onClick:()=>n("row_clicked",{type:"scopes"})},i.createElement("span",{className:J.xZ},i.createElement("span",{className:J.qg,...o},a),i.createElement("div",{"data-tooltip":(0,S.t)("dev_handoff.variables.details_scope_info"),"data-tooltip-type":x.Ib.TEXT,className:J.Kk},i.createElement(u.B,null))),i.createElement("div",{className:J.Wu},r.scopes.map(e=>i.createElement("div",{key:e.toString(),className:J.qg,"data-testid":`var-details-scope-${e.toString()}`},(0,Z.Us)(e,{devMode:!0}))))):null}function em({codeSyntax:e}){return e&&Object.keys(e).length>0?i.createElement(i.Fragment,null,i.createElement("div",{className:I.cx.h8.$}),i.createElement(H.VZ,{title:(0,S.t)("dev_handoff.variables.details_code_syntax"),recordingKey:"dev-var-details-code-syntax"},Object.entries(e).map(([e,r])=>{let n=(0,Y.ov)(e);return null===n?null:i.createElement(ea,{key:n,trackingName:"code_syntax",trackingProps:{codeSyntaxPlatform:(0,Y.r8)(n)},name:(0,Y.lo)(n),value:r,copyValue:r})}))):null}},939900:(e,r,n)=>{n.d(r,{A8:()=>m,eT:()=>p});var i=n(411855),a=n(188507),o=n(358145),s=n(418956),l=n(716034),c=n(239349);n(738269);var d=n(662275),u=n(869156);function m(){let e=(0,a.d4)(e=>"devModeVariablesTableSelectedVariable"in e.selectedView?e.selectedView.devModeVariablesTableSelectedVariable:void 0),r=(0,u.u)(e),n=(0,u.Rb)(),o=!!r,s=i.useMemo(()=>o||!e?null:n.find(r=>e.includes(r.keyForPublish)),[o,e,n]);return s?s.node_id:r?.node_id??null}function p(){let e=(0,c.uQ)(),r=(0,o.ZC)(e),n=(0,a.wA)();i.useEffect(()=>{r&&e!==r&&n(d.AS())},[n,r,e])}n(611978),n(15270),(0,s.E3)("last-used-dev-mode-variable-set",null),(0,l.eU)("ALL_VARIABLES")},865401:(e,r,n)=>{n.d(r,{KP:()=>p,ON:()=>m,gs:()=>h});var i=n(411855),a=n(939683),o=n(308977),s=n(945099),l=n(672517);let c=i.createContext({}),d="dev_mode.variables.",u={};function m(){let e=(0,a.hC)(),{name:r,enabled:n=!0,trackingProps:o}=i.useContext(c);return i.useCallback((i,a=u)=>{r&&n&&e(d+r,{action:i,...o,...a})},[o,n,r,e])}function p(e,r){let n=(0,a.hC)();return i.useCallback((i=u)=>{n(d+e,{action:"click_on_entry_point",entrypoint:r,...i})},[r,e,n])}function h({children:e,enabled:r=!0,skipOpenAndClose:n=!1,name:m,trackingProps:p=u}){let h=(0,a.hC)(),_=(0,o.v4)().id,[g]=(0,s.$h)(),f=i.useMemo(()=>({codeLanguage:_,inspectView:g,...p}),[p,_,g]),E=i.useMemo(()=>({name:m,enabled:r,trackingProps:f}),[m,r,f]);return(i.useEffect(()=>{if(m&&r&&!n)return h(d+m,{action:"view_opened",...f}),()=>{h(d+m,{action:"view_closed",...f})}},[]),m)?i.createElement(l.fu,{name:m,enabled:r,properties:f},i.createElement(c.Provider,{value:E},e)):i.createElement(i.Fragment,null,e)}},40987:(e,r,n)=>{n.d(r,{cR:()=>l,d:()=>s,hv:()=>d,pc:()=>c});var i=n(716034),a=n(582947),o=n(147723);(0,i.eU)(void 0);let s=(0,i.eU)(!1),l=(0,i.eU)(!1),c=(0,i.eU)(!1),d=(0,a.Fu)(o.Ih)},165514:(e,r,n)=>{n.d(r,{D0:()=>s,zi:()=>o});var i=n(922827),a=n(939863);function o(e){switch(e){case i.zIx.BUILD:return(0,a.t)("dev_handoff.status.ready_for_dev");case i.zIx.COMPLETED:return(0,a.t)("dev_handoff.status.completed");case i.zIx.NONE:return null}}function s(e){if(e.length>0){let r=e[0].metadata;return{status:r?.status??null,nodes:e.map(e=>({id:e.node_id,name:e.node_name}))}}return{status:null,nodes:[]}}},964881:(e,r,n)=>{n.d(r,{Wl:()=>s,hA:()=>l,l7:()=>o,s4:()=>c}),n(411855);var i=n(188507);n(922827),n(900956),n(939683),n(794272),n(256975),n(17604),n(693897),n(738269),n(493862),n(29680),n(100197),n(239671);var a=n(507956);function o(){return(0,i.d4)(e=>s(e.selectedView))}function s(e){return!!e&&e?.view==="fullscreen"&&e?.showOverview===!0}function l(){return(0,i.d4)(e=>c(e.selectedView)??null)}function c(e){if(e)return(0,a.$A)(e)?e.devModeFocusId:void 0}n(40987),n(282741)},263581:(e,r,n)=>{n.d(r,{L:()=>O});var i=n(966664),a=n(268853),o=n(922827),s=n(340818),l=n(38329),c=n(418956),d=n(130097),u=n(776621),m=n(939863),p=n(784309),h=n(256975),_=n(40987),g=n(165514),f=n(988022),E=n(356390),y=n(52610),b=n(99506),v=n(279453),I=n(973131),T=n(647786),S=n(43923),w=n(331972);function A({status:e,prevStatus:r,source:n,numNodesUpdated:i,nodeId:a,nodeType:o,isReadOnly:s,description:c,isEdited:d}){let u=l.D.getState();(0,f.ds)("dev_handoff_edit_status",u.openFile?.key,u,{status:e,prevStatus:r,source:n,numNodesUpdated:i,nodeId:a,nodeType:o,isViewOnly:s,hasDescription:""!==c,description:c,isEdited:d},{forwardToDatadog:!0})}async function C(e,r,n,i,d){let m;let p=l.D.dispatch,h=l.D.getState(),E=h.openFile?.key||"",y=d??void 0,b=performance.now();if(c.zl.set(_.pc,!0),r===o.zIx.BUILD||r===o.zIx.COMPLETED)try{let e=await (0,I.m)(E,(0,g.zi)(r)??void 0,y,p,!0);m=e?.id,E&&!m&&(0,u.$D)(a.e.DEVELOPER_TOOLS,Error("[Dev mode activity] createSavepoint returned no id"))}catch(e){(0,u.$D)(a.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating version on status change: "+e.stack))}let v=!1;(0,s.l7)(s.zk.SYSTEM,"store-status-activity",()=>{T.e.recordStatusChange({fileKey:E,nodes:e,status:r,description:y,versionId:m}).then(()=>{v=!0}).catch(e=>{(0,u.$D)(a.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error creating activity: "+e.stack))}).finally(()=>{let r=performance.now()-b;(0,f.ds)("dev_handoff_status_activity",E,h,{elapsedMs:r,status:n,source:i,savedVersion:!!m,savedActivity:v,nodeIds:e.map(e=>e.id)},{forwardToDatadog:!0}),c.zl.set(_.pc,!1)})})}function N(e){switch(e){case o.zIx.BUILD:return"ready_for_dev";case o.zIx.COMPLETED:return"completed";default:return"none"}}async function L(e,r){let n=e.map(({id:e,isUpdated:n})=>n?{fileKey:r,nodeId:e}:null).filter(i.Vq);if(0===n.length)return{};let a=await (0,d.S8)(v.WND,n),o={};return a.forEach(({result:e},r)=>{if(e.data?.file.status==="loaded"){let i=e.data.file.data?.devModeActivity.filter(e=>e.activityType===b.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime())||[],a=n[r],s=i[0];a&&s&&(o[a.nodeId]=s.id)}}),o}async function O({nodeIds:e,status:r,description:n,sourceForLogging:i,editScopeType:a}){let d=l.D.getState(),u=d.mirror.sceneGraph,g=d.openFile?.key??"",b=d.user?.id??"",v=o.w3z.isReadOnly(o.SES.NODE_STATUS),I=N(r),T=new Map,O=new Map,R=[];for(let n of e){let e=u.get(n);if(e){let i=e.getStatusInfo().status;T.set(n,e.hasBeenEditedSinceLastStatusChange),O.set(n,N(i));let a=(0,w.S7)(u,n,e.containingCanvas||""),s=i===o.zIx.BUILD&&r===o.zIx.BUILD,l="";if(e.containingCanvas){let r=u.get(e.containingCanvas);r&&(l=r.name)}R.push({id:n,name:e.name,type:e.type,pageName:l,prevStatus:i,previewBackground:a,isUpdated:s})}}if(v){let s=d.openFile,l={status:I,canAccessDevModeRaw:s?.canAccessFullDevMode,canAccessDevModeEntryPoint:s?.canAccessDevModeEntryPoint,canAccessDevMode:(0,h.tn)(d),fileRepoId:s?.fileRepoId,userOrgId:d.user?.org_id,currentTeamId:d.currentTeamId,currentUserOrgId:d.currentUserOrgId,source:i,numNodes:e.length,editScopeType:a,userIdForMultiplayer:b,linkAccess:s?.linkAccess,fileCanEdit:s?.canEdit,fileCanEditCanvas:s?.canEditCanvas,fileCanEditIgnoreEduGracePeriod:s?.canEditIgnoreEduGracePeriod,canManage:s?.canManage,canView:s?.canView,isTeamTemplate:s?.isTeamTemplate,isTryFile:s?.isTryFile,viewerExportRestricted:s?.viewerExportRestricted,fileHasPartialOrgUser:!!s?.currentPartialOrgUser,fileHasCurrentTeamUser:!!s?.currentTeamUser,hasEditRole:s?.hasEditRole?.data};(0,f.ds)("temp_debug_set_status_view_only",s?.key,d,l);let c=!1;setTimeout(()=>{c||(0,f.ds)("temp_debug_set_status_view_only_failed",s?.key,d,l)},2e3),o.h3O.sendSetNodeStatus(e,r,n??"",b);let[u]=await Promise.all([L(R,g),(0,y.n)()]);if(c=!0,(0,h.tn)(d))for(let{id:e,name:i,type:a,pageName:o,prevStatus:s,previewBackground:l}of R)S.f.recordStatusChange({fileKey:g,nodeId:e,nodeName:i,nodeType:a,status:r,prevStatus:s,description:n||void 0,pageName:o,previewBackground:l,prevActivityId:u[e]||null});for(let{id:a,type:o}of(C(R,r,I,i,n),R))A({status:I,source:i,numNodesUpdated:e.length,nodeId:a,nodeType:o,isReadOnly:v,description:n??"",prevStatus:O.get(a)??I,isEdited:T.get(a)??!1})}else{if(!navigator.onLine){(0,p.j)("offlineSettingNodeStatus",(0,m.t)("dev_handoff.status.offline"),!0);return}(0,s.l7)(a,"set-nodes-status",()=>{for(let{id:e}of R){let i=u.get(e);i&&i.setStatus(r,b,n??void 0)}E.Y5.triggerAction("commit")});let o=await L(R,g);for(let{id:e,name:i,type:a,pageName:s,prevStatus:l,previewBackground:c}of R)(0,h.tn)(d)&&S.f.recordStatusChange({fileKey:g,nodeId:e,nodeName:i,nodeType:a,status:r,prevStatus:l,description:n||void 0,pageName:s,previewBackground:c,prevActivityId:o[e]||null});for(let{id:a,type:o}of(C(R,r,I,i,n),R))A({status:I,source:i,numNodesUpdated:e.length,nodeId:a,nodeType:o,isReadOnly:v,description:n??"",prevStatus:O.get(a)??I,isEdited:T.get(a)??!1})}!function(e){let r=c.zl.get(_.d),n=c.zl.get(_.cR),i=c.zl.get(_.hv)?.data;e!==o.zIx.BUILD||r||n||i||c.zl.set(_.d,!0)}(r)}},282741:(e,r,n)=>{n(411855),n(188507),n(268853),n(776250),n(939683),n(320063);var i=n(716034);n(776621),n(256975),(0,n(940596).Wh)(()=>(0,i.eU)(!1),{preserveValue:!1}),(0,i.eU)(""),(0,i.eU)("");var a=(e=>(e.ALL="ALL",e.RECENTLY_VIEWED="RECENTLY_VIEWED",e.BUILD="BUILD",e.COMPLETED="COMPLETED",e))(a||{}),o=(e=>(e.RECENT="RECENT",e.PAGE="PAGE",e.ALPHABETICAL="ALPHABETICAL",e))(o||{})},203264:(e,r,n)=>{n.d(r,{E1:()=>l,ei:()=>s});var i=n(794272),a=n(966712);n(29680);var o=n(601607);function s(e,r=!1,n){return(0,o.Fk)((e,r,i)=>r&&function(e,r,n){let i=e.get(r)?.editInfo;return!i||n&&i.userId===a.Ay().user_data?.id||0===i.lastEditedAt?null:(i.lastEditedAt=1e3*i.lastEditedAt,i.createdAt=1e3*i.createdAt,i)}(n??e,r,i)||null,e,r)}function l(){let{lastViewedStamp:e,lastEditedStamp:r}=(0,i.R)(e=>({fileKey:e.openFile?.key,lastViewedStamp:e.versionHistory.lastViewed,lastEditedStamp:e.versionHistory.lastEdited}));return function(e,r){if(!e)return r?new Date(r):void 0;if(!r)return e?new Date(e):void 0;let n=new Date(e),i=new Date(r);return n>i?n:i}(e,r)}var c=(e=>(e.NOT_RECENT="NOT_RECENT",e.RECENTLY_EDITED="RECENTLY_EDITED",e.RECENTLY_CREATED="RECENTLY_CREATED",e))(c||{})},597192:(e,r,n)=>{n.d(r,{t:()=>E});var i=n(411855),a=n(109388),o=n(188507),s=n(966712),l=n(860601),c=n(939863),d=n(796933),u=n(54552),m=n(738269),p=n(723245),h=n(397844),_=n(728587);let g=(e,r,n,i={})=>e?[{displayText:r||"",callback:n,...i}]:[],f=()=>{let e=(0,o.d4)(e=>e.dropdownShown);return e&&e?.type===d.jU?e:null};function E(e){let r=(0,o.wA)(),n=(0,o.d4)(e=>e.currentTeamId),d=(0,o.d4)(e=>e.currentUserOrgId),E=(0,o.d4)(e=>e.mobileNavShown),y=(0,o.d4)(e=>e.favorites.collapsedCustomSections),b=i.useMemo(()=>(0,p.t$)(e.sections,e.customSectionOrdering),[e.sections,e.customSectionOrdering]),v=f();if(null==v)return null;let{updateFavorite:I,resourceId:T,resourceType:S,isFavorited:w,currentSectionId:A}=e,C=function(e){let{dispatch:r,currentOrgId:n,currentTeamId:i,collapsedCustomSections:a,updateFavorite:o,resourceId:d,resourceType:p,isFavorited:_,currentSectionId:f,sections:E}=e,y=(e,i)=>{o(e,i),r(m.oB()),e&&i&&(a.delete(i),r(u.U6({collapsedCustomSections:a})),h.Fp({type:"topLevel",id:"custom",orgId:n,sectionId:i},!0))},b=E.map(e=>({displayText:""===e.name?(0,c.t)("sidebar.starred"):e.name,isChecked:_&&f===e.id,alwaysShowCheckMarkOffset:!0,callback:()=>y(!(_&&f===e.id),e.id)})),v=[...g(_,null,l.lQ,{separator:!0}),...g(_,(0,c.t)("favorited_resources.remove_from_sidebar"),()=>y(!1))],I=i&&(0,s.kc)().ps_benchmark,T=[...g(!e.showFavoriteOptionsOnly&&!I,(0,c.t)("favorited_resources.create_a_new_section"),()=>{void 0===e.mobileNavShown||e.mobileNavShown||r(m.PY());let n=f?E.findIndex(e=>e.id===f):0;p&&r(u.to({movingResource:{resourceId:d,isFavorited:!0,resourceType:p}})),r(u.pS({newCustomSectionIndex:n})),r(m.oB())})],S=[{displayText:"",separator:!0}],w=E.find(e=>e.id===f),A=_?`${(0,c.t)("favorited_resources.indicate_section_prefix")}: ${w?.name||(0,c.t)("sidebar.starred")}`:(0,c.t)("favorited_resources.add_to_sidebar");return E.length>4?[{displayText:A,children:[...b,...S,...T]},...v]:[...g(!0,(0,c.t)("favorited_resources.add_to_sidebar"),l.lQ,{disabled:!0}),...b,...S,...v,...S,...T]}({dispatch:r,currentOrgId:d,currentTeamId:n,collapsedCustomSections:y,updateFavorite:I,resourceId:T,resourceType:S,isFavorited:w,currentSectionId:A,sections:b,mobileNavShown:E}),N=i.createElement(_.j,{autofocusPrevOnDismount:!0,items:C,parentRect:v.data.targetRect,showPoint:!!e.showPoint,lean:"right",recordingKey:"organize-favorited-dropdown",dispatch:r,onSelectItem:(e,n)=>{e.callback?.("",{},r,n)}});return(0,a.createPortal)(N,document.body)}},46415:(e,r,n)=>{n.d(r,{E:()=>_,ce:()=>p,cv:()=>g,hZ:()=>f,rg:()=>h});var i=n(167249),a=n(38329),o=n(27087),s=n(881388),l=n(980820),c=n(156367),d=n(988022),u=n(239318);let m=e=>{let r=a.D.getState();if(!r.openFile)return;let n=r.openFile;n&&n.parentOrgId&&o.Ay.post(`/api/activity_logs/${n.key}`,{event_name:e})};function p(){m("fig_file_save_as")}let h=(0,l.nF)((e,r)=>{m("fig_file_export")}),_=(0,i.N)("GET_ACTIVITY_LOGS");(0,l.nF)((e,r)=>{let{newQuery:n,teamId:i,emails:a,eventName:o,date:l}=r,m=e.getState();u.J.getActivityLogs({pageSize:"30",orgId:m.currentUserOrgId,startTime:l.start,endTime:(0,c.H3)(l.end),...i?{teamId:i}:null,...o?{eventName:JSON.stringify(o)}:null,...a?{emails:a.join()}:null,...n?null:{after:m.activityLogs.cursor.after}}).then(({data:r})=>{let s=r.meta,u=s[0],p=s[1],h=n?u:e.getState().activityLogs.logs.concat(u);e.dispatch(f({logs:h,cursor:p})),(0,d.Fr)("Activity Logs Fetched",m.currentUserOrgId,m,{teamIdFilter:i,eventNamesFilter:o,startDateFilter:l.start,endDateFilter:(0,c.H3)(l.end),filtersOnActorEmail:!!a&&a.length>0,filtersOnActedOnEmail:!!a&&a.length>0,isNewQuery:n,numberOfResults:u.length})}).catch(r=>{let n=r.data?.message||"An error occurred while fetching activity logs.";e.dispatch(s.s.flash(n))}),e.dispatch(_(r))});let g=(0,i.N)("CLEAR_CURSOR_ACTIVITY_LOGS"),f=(0,i.N)("SET_ACTIVITY_LOGS")},362252:(e,r,n)=>{n.d(r,{ZH:()=>c,_M:()=>s,r$:()=>l,r5:()=>d});var i=n(167249),a=n(511617),o=n(517333);let s=(0,n(980820).nF)(e=>{a.R7.fullscreen&&(e.getState().appWindow.inFullScreenMode?(o.eD?.setFullScreen(!1),a.R7.getFullscreenElement()?a.R7.exitFullscreenFunc():e.dispatch(c())):(o.eD?.setFullScreen(!0),a.R7.requestFullscreenFunc.call(document.documentElement)))}),l=(0,i.N)("WINDOW_DID_ENTER_FULL_SCREEN"),c=(0,i.N)("WINDOW_DID_EXIT_FULL_SCREEN");function d(e){a.R7.fullscreen&&(document.addEventListener(a.R7.fullscreenChangeEventName,function(r){let n=e.getState();a.R7.getFullscreenElement()&&!n.appWindow.inFullScreenMode?e.dispatch(l()):n.appWindow.inFullScreenMode&&e.dispatch(c())}),document.addEventListener(a.R7.fullscreenErrorEventName,function(r){console.warn("failed to enter fullscreen:",r),e.getState().appWindow.inFullScreenMode&&e.dispatch(c())}))}},955066:(e,r,n)=>{n.d(r,{DF:()=>g,TP:()=>f,Y3:()=>y,h0:()=>b,vv:()=>h,zE:()=>E});var i=n(167249),a=n(776250),o=n(517333),s=n(418956),l=n(980820),c=n(738269),d=n(154823),u=n(788811),m=n(132367),p=n(540019);let h=(0,l.nF)(async(e,r)=>{let n=e.getState()?.user?.id;if(!n)return;let i=Object.keys(r);await (0,u.wI)(n,i),m.hp.sendToAllTabs(m.c6,i),(0,a.sx)("Delete New Autosave Files",{deletedCount:i.length})}),_=(0,l.nF)(async e=>{let r=e.getState(),n=r.user?.id;if(!n)return;await (0,u.JI)(n);let i=await (0,u.kl)(n);e.dispatch(y({filesWithChangesInIDB:i.unsyncedFiles,filesCreatedOffline:i.newFiles})),e.dispatch(f(i.nextGarbageCollectionTimestamp))}),g=(0,i.N)("SET_AUTOSAVE_ONBOARDING_TOOLTIP_VISIBLE"),f=(0,i.N)("SET_AUTOSAVE_NEXT_GARBAGE_COLLECTION_TIMESTAMP"),E=(0,i.N)("SET_AUTOSAVE_SNOOZE"),y=(0,i.N)("SET_UNCLAIMED_FILES");function b(e){m.hp.register(m.ec,()=>(function(e){let r=e.getState().user?.id??null;p.M4.fetch((0,u.OL)({userId:r}),{policy:"networkOnly"})})(e)),m.hp.register(m.c6,r=>(function(e,r){let n=s.zl.get(d.h);n&&r.includes(n)&&(o.eD?o.eD.close({suppressReopening:!0,shouldForceClose:!0}):e.dispatch(c.$T({view:"recentsAndSharing"}))),e.dispatch(_())})(e,r)),m.hp.register(m.m6,({localFileKey:e,realFileKey:r})=>(0,u.Gc)(e,r))}},113853:(e,r,n)=>{n.d(r,{AY:()=>v,PI:()=>y,_E:()=>f,nx:()=>E,pI:()=>I,s6:()=>T});var i=n(922827),a=n(167249),o=n(1844),s=n(27087),l=n(881388),c=n(939863),d=n(392592),u=n(980820),m=n(99403),p=n(902957),h=n(196495);n(931770);var _=n(731078),g=n(56342);function f(e,r,n,i){let a=document.createElement("canvas"),o=a.getContext("2d");return a.width=a.height=r,o.fillStyle="image/png"===i?"transparent":"#FFF",o.fillRect(0,0,r,r),o.drawImage(a,0,0),o.drawImage(e,n.x,n.y,n.width,n.height),"image/png"===i?a.toDataURL():a.toDataURL("image/jpeg",.92)}function E(e){let r=atob(e.slice(e.indexOf(",")+1)),n=[];for(let e=0;e<r.length;e++)n.push(r[e].charCodeAt(0));return new Uint8Array(n)}let y=(0,a.N)("AVATAR_EDITOR_RESET"),b=(0,u.nF)((e,r)=>{if(r.entityType===_.ck.CURRENT_USER)s.Ay.put("/api/user",{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;n?.img_url&&i.h3O?.setImgUrl(n.img_url),e.dispatch(h.yJ({user:n,userInitiated:!1})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"))),console.error((0,c.t)("avatar_actions.editor_uploaded.an_error_occurred_while_setting_your_profile_photo"),r),e.dispatch(y())});else if(r.entityType===_.ck.TEAM){let n=r.entity.id;s.Ay.put(`/api/teams/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(p.yJ({team:n,userInitiated:!1})),e.dispatch(y()),e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.team_icon_updated")}))},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon"))),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_team_icon")),e.dispatch(y())})}else if(r.entityType===_.ck.ORG){let n=r.entity.id;s.Ay.put(`/api/orgs/${n}`,{img_url:r.smallUrl,img_url_500_500:r.largeUrl}).then(function({data:r}){let n=r.meta;e.dispatch(m.yJ({org:n})),e.dispatch(y())},r=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred")+r.data?.message)),console.error((0,c.t)("avatar_actions.an_error_occurred_while_setting_the_organization_icon"),r),e.dispatch(y())})}else if(r.entityType===_.ck.WORKSPACE){let n=r.entity.id;g.u.updateImage({workspaceId:n,img_url:r.smallUrl,img_url_500_500:r.largeUrl,onfulfilled:()=>{e.dispatch(d.F.enqueue({message:(0,c.t)("avatar_actions.workspace_icon_updated")}))},onrejected:r=>{let n=(0,c.t)("avatar_actions.an_error_occurred_while_setting_the_workspace_icon");e.dispatch(l.s.error(n)),console.error(n),e.dispatch(y())}})}}),v=(0,a.N)("AVATAR_EDITOR_UPLOAD"),I=(0,u.nF)((e,r)=>{Promise.all([(0,o.Q)("profile",r.small,r.contentType),(0,o.Q)("profile",r.large,r.contentType)]).then(function(n){let i=n[0].data.meta.url,a=n[1].data.meta.url;e.dispatch(b({entity:r.entity,entityType:r.entityType,smallUrl:i,largeUrl:a}))},()=>{e.dispatch(l.s.error((0,c.t)("avatar_actions.an_error_occurred_while_uploading_the_image"))),e.dispatch(y())}),e.dispatch(v(r))}),T=(0,a.N)("AVATAR_EDITOR_INIT")},772167:(e,r,n)=>{n.d(r,{DI:()=>c,NY:()=>d,V2:()=>o,cL:()=>u,dY:()=>s,sV:()=>a,zx:()=>l});var i=n(167249);let a=(0,i.N)("CANVAS_SEARCH_SET_MODE"),o=(0,i.N)("CANVAS_SEARCH_SET_SCOPE"),s=(0,i.N)("CANVAS_SEARCH_CLEAR_CATEGORY_FILTERS"),l=(0,i.N)("CANVAS_SEARCH_SWITCH_CATEGORY_FILTER_EXCLUSIVE"),c=(0,i.N)("CANVAS_SEARCH_TOGGLE_CATEGORY_FILTER"),d=(0,i.N)("CANVAS_SEARCH_SET_QUERY"),u=(0,i.N)("CANVAS_SEARCH_RESET")},975350:(e,r,n)=>{n.d(r,{$0:()=>ei,$M:()=>eC,AY:()=>G,At:()=>q,C:()=>x,CX:()=>ea,Df:()=>eF,F8:()=>eo,Fm:()=>eh,Jc:()=>ek,Mv:()=>W,NJ:()=>ep,Oo:()=>em,PB:()=>eA,Q8:()=>el,QD:()=>eP,QY:()=>V,Qe:()=>e_,RI:()=>eE,RO:()=>eS,RP:()=>ed,Tb:()=>H,U3:()=>ew,UU:()=>en,We:()=>ef,Z5:()=>eO,_B:()=>er,_v:()=>j,a$:()=>es,bB:()=>X,cL:()=>eW,dB:()=>U,gi:()=>Q,hY:()=>Y,hx:()=>$,i4:()=>eg,js:()=>e$,k7:()=>eD,l5:()=>Z,lI:()=>et,lV:()=>ee,li:()=>eU,nL:()=>ey,nb:()=>eL,on:()=>eR,pD:()=>J,pI:()=>eG,q4:()=>eN,rW:()=>z,sQ:()=>eb,uy:()=>eM,uz:()=>ex,vV:()=>ec,wJ:()=>eB,wg:()=>eu,xH:()=>eI,y3:()=>eV,yH:()=>eH,z$:()=>K});var i=n(922827),a=n(572304),o=n(167249),s=n(776250),l=n(609494),c=n(934480),d=n(966712),u=n(418956),m=n(456772),p=n(746746),h=n(776621),_=n(553716),g=n(877432),f=n(27087),E=n(881388),y=n(939863),b=n(392592),v=n(980820),I=n(738269),T=n(792608),S=n(988022),w=n(277810),A=n(294167),C=n(356390),N=n(707465),L=n(440535),O=n(319882),R=n(917701),P=n(406457),D=n(662275),k=n(37943),M=n(801161),F=n(931828);async function x(e,r,n,i,a){await B(a.messageMeta,e,r,n,i).then(r=>{e(j({comment:a.comment,messageMeta:a.messageMeta,attachmentUpdates:a.attachmentUpdates,forceWithInvite:r,forceMention:r,onCommentValidationFailure:void 0}))}).catch(()=>{})}async function U(e,r,n,i,a,o,s,l){return await B(o.messageMeta,r,n,i,a).then(n=>{r(ek({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}})),r(ee({commentsWriteApi:e,threadId:o.threadId,threadUuid:o.threadUuid,uuid:s,forceWithInvite:n,forceMention:n,onCommentValidationFailure:void 0,commentsConfiguration:l}))}).catch(()=>{r(eN({threadId:o.threadId,resetStatusOnly:!0})),r(ek({threadId:o.threadId,reply:{messageMeta:o.messageMeta,attachments:o.attachments}}))})}function B(e,r,n,i,a){return new Promise(o=>{r((0,D.to)({type:P.VB,data:{messageMeta:e,dispatch:r,usersWithoutAccess:n,externalUsersWithoutAccess:i,uninvitableUsers:a,onConfirm:()=>o(!0),onCancel:()=>o(!1)}}))})}let V=(0,v.nF)((e,r)=>{let{receiptsAPI:n,comment:i}=r;n.markAsUnread(i.id).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_unread");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),G=(0,v.nF)((e,r)=>{let{receiptsAPI:n,thread:i}=r;n.markAsRead(i.comments.map(e=>e.id)).catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})}),H=(0,v.nF)((e,r)=>{let{commentReceiptsAPI:n,canvasMentionReceiptsAPI:i}=r;n.markAllAsRead().catch(r=>{let n=(0,y.t)("comments.an_error_occurred_while_marking_a_comment_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}}),i.markAllAsRead().catch(r=>{let n=(0,y.t)("whiteboard.an_error_occurred_while_marking_a_canvas_mention_as_read");try{r=JSON.parse(r),e.dispatch(E.s.error((0,y.Jv)(r,n)))}catch(r){e.dispatch(E.s.error(n))}})});(0,v.nF)((e,r)=>{let{reactionsApi:n,id:i,emoji:a}=r,o=n.removeReaction(i,a),s=(0,y.t)("comments.an_error_occurred_while_removing_a_comment_reaction");e.dispatch((0,E.Q)({promise:o,fallbackError:s}))}),(0,v.nF)((e,r)=>{let n=e.getState(),{reactionsApi:i,id:a,emoji:o}=r,s=i.addReaction(a,o,{prototype_mode:"prototype"===n.selectedView.view,selectedView:n.selectedView.view,quickReply:!1}),l=(0,y.t)("comments.an_error_occurred_while_adding_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))});let K=(0,v.nF)((e,r)=>{let{reactionsApi:n,id:i}=r,{emoji:a}=r,o=e.getState();(0,c.uD)(a)&&null!==(0,c.$f)()&&(a=(0,c.Kh)(a)[0]+(0,c.$f)());let s=n.toggleReaction(i,a,{prototype_mode:"prototype"===o.selectedView.view,selectedView:o.selectedView.view,quickReply:r.quickReply}),l=(0,y.t)("comments.an_error_occurred_while_toggling_a_comment_reaction");e.dispatch((0,E.Q)({promise:s,fallbackError:l}))}),W=(0,v.nF)((e,r)=>{let n;let{comment:i}=r,{key:a,id:o,uuid:l,parent_id:c}=i,d=f.Ay.del(`/api/file/${a}/comments/${o}`),u=(0,y.t)("comments.an_error_occurred_while_deleting_this_comment");e.dispatch((0,E.Q)({promise:d,fallbackError:u})),T.O.remove(o),n=l?(0,m.WB)().optimisticallyDeleteWithUUID({Comment:{[l]:null}},d):(0,m.WB)().optimisticallyDelete({Comment:{[o]:null}},d),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setDeleted",isOptimistic:!!l}),(0,p.f)(n,e.dispatch,eH({comment:{id:o,parent_id:c}}))}),$=(0,v.nF)((e,{thread:{key:r,id:n,uuid:i},resolved:a})=>{let o=e.getState();if(a&&o.comments.activeThread?.id===n&&!o.comments.showResolved&&e.dispatch(en()),(0,d.kc)().comments_undo_resolve&&a){let a={text:(0,y.t)("comments.undo"),action:()=>{e.dispatch($({thread:{key:r,id:n,uuid:i},resolved:!1}))}};e.dispatch(b.F.enqueue({message:(0,y.t)("comments.comment_resolved"),type:"comment-resolved",button:a,onDismiss:()=>{}}))}T.O.remove(n);let c=a?"true":"false",u=a?(0,y.t)("comments.an_error_occurred_while_resolving_this_comment"):(0,y.t)("comments.an_error_occurred_while_unresolving_this_comment");if(i&&(0,l.L4)(n)){let n=(0,m.WB)().getIdFromUuid("Comment",i).then(n=>{let i=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});return e.dispatch((0,E.Q)({promise:i,fallbackError:u})),i});(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:a?new Date:null}}},n),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolvedUsingGetIdFromUUID",isOptimistic:!0})}else{let o=f.Ay.put(`/api/file/${r}/comments/${n}`,{resolved_at:c});e.dispatch((0,E.Q)({promise:o,fallbackError:u})),i?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,resolvedAt:a?new Date:null}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{resolvedAt:a?new Date:null}}},o),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setResolved",isOptimistic:!!i})}}),Y=(0,v.nF)((e,{thread:{key:r,id:n,uuid:i},clientMeta:a})=>{let o;i&&(0,l.L4)(n)?(o=(0,m.WB)().getIdFromUuid("Comment",i).then(e=>f.Ay.put(`/api/file/${r}/comments/${e}`,{client_meta:a})),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMetaWithGetIdFromUUID",isOptimistic:!0})):(o=f.Ay.put(`/api/file/${r}/comments/${n}`,{client_meta:a}),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"setClientMeta",isOptimistic:!!i}));let c=(0,y.t)("comments.an_error_occurred_while_moving_this_comment");e.dispatch((0,E.Q)({promise:o,fallbackError:c})),i?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[i]:{uuid:i,clientMeta:{x:a.x,y:a.y,pageId:void 0===a.page_id?null:a.page_id,nodeId:void 0===a.node_id?null:a.node_id,nodeOffset:void 0===a.node_offset?null:a.node_offset,inFrame:void 0===a.in_frame?null:a.in_frame,selectionBoxAnchor:a.selection_box_anchor?a.selection_box_anchor:null,stablePath:a.stable_path?a.stable_path:null}}}},o):(0,m.WB)().optimisticallyUpdate({Comment:{[n]:{clientMeta:{x:a.x,y:a.y,pageId:void 0===a.page_id?null:a.page_id,nodeId:void 0===a.node_id?null:a.node_id,nodeOffset:void 0===a.node_offset?null:a.node_offset,inFrame:void 0===a.in_frame?null:a.in_frame,selectionBoxAnchor:a.selection_box_anchor?a.selection_box_anchor:null,stablePath:a.stable_path?a.stable_path:null}}}},o)}),z=(0,o.N)("COMMENTS_SET_COMMENT_CONTENT"),j=(0,v.nF)((e,r)=>{let n=r.comment.key;if(!n||(0,l.I)(r.messageMeta)){e.dispatch(z());return}let i=(0,l.cs)(r.messageMeta),a=f.Ay.put(`/api/file/${n}/comments/${r.comment.id}`,{message_meta:r.messageMeta,attachment_updates:(0,L.Gq)(r.attachmentUpdates),share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,pending_mentions:i}).then(({data:r})=>{r.message?.warning_message&&0!==r.message.warning_message.length&&e.dispatch(b.F.enqueue({type:"at-mention-error",message:r.message.warning_message}))}).catch(e=>{let n=e.data?.reason?.failure_info;e.data?.reason?.reason!=="comment_validation_failure"||void 0===n||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite||r.onCommentValidationFailure(n.users_without_view,n.ext_users_without_view,n.uninvitable_users,{comment:r.comment,messageMeta:r.messageMeta})}),o=(0,y.t)("comments.an_error_occurred_while_editing_this_comment");e.dispatch((0,E.Q)({promise:a,fallbackError:o}));let c=r.comment.uuid,d=(0,l.Rc)(r.messageMeta);if(c?(0,m.WB)().optimisticallyUpdateWithUUID({Comment:{[c]:{uuid:c,messageMeta:d,messageMetaStylized:d}}},a):(0,m.WB)().optimisticallyUpdate({Comment:{[r.comment.id]:{messageMeta:d,messageMetaStylized:d}}},a),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"updateCommentContent",isOptimistic:!!c}),r.attachmentUpdates){let e=(0,w.LO)(r.attachmentUpdates.deleted);e?(0,m.WB)().optimisticallyDelete({CommentAttachment:e},a):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_delete"});let n=(0,w.Mu)(Object.values(r.attachmentUpdates.attachments),r.comment.key,r.comment.id);n?(0,m.WB)().optimisticallyCreate({CommentAttachment:n},a):(0,m.WB)().emitEvent({type:"EMPTY_SYNC",source:"comment_create"})}e.dispatch(z())}),q=(0,v.nF)(async(e,r)=>{let n=e.dispatch(Z(r));if(!n||r.thread.isPendingFromSinatra)return;let o=r.thread.comments[0];if(!o)return;let l=e.getState(),c=o.client_meta?.node_id,d=o.client_meta?.stable_path?o.client_meta.stable_path:a.EP;!d&&c&&(d=[c]);let u=r.thread.id,m=r.source;o.client_meta?.page_id&&"communityHub"===l.selectedView.view&&(u!==l.selectedView.commentThreadId&&e.dispatch(I.$T({...l.selectedView,commentThreadId:u})),l.selectedView.commentThreadId&&(0,s.sx)("Comment Thread Read",{commentThreadId:u,threadType:"community_preview"})),await n,e.dispatch(eh({threadId:u,source:m})),r.thread.comments.some(e=>e.isUnread)&&r.receiptsAPI&&!r.thread.isPendingFromSinatra&&!r.thread.isCanvasMention&&(e.dispatch(G({receiptsAPI:r.receiptsAPI,thread:r.thread})),(0,s.sx)("Comment Thread Read",{commentThreadId:u})),"fullscreen"===l.selectedView.view&&i.glU.setActiveCommentAnchorData({stablePath:`[${d.join(",")}]`})}),Z=(0,v.nF)((e,r)=>{let n=e.getState();if(n.comments.activeThread&&n.comments.activeThread.id!==r.thread.id&&!r.skipDeactivatingExistingActiveComment&&!e.dispatch(en()))return null;n=e.getState();let{thread:a,viewport:o,config:s,navigate:l,isOrphanedComment:c}=r,{setCurrentPageIdAsync:d,pageIdForNodeId:u}=o;if(!o.getViewportInfo())return null;let m=a.comments[0];if(!m)return null;let p=m.client_meta?.node_id,h=a.page||p&&u(p)||m.client_meta?.page_id,_=[],f=n.mirror?.appModel?.currentPage,E=!1;h&&(E=f!==h,_.push(d(h).then(async()=>{E&&await (0,g.yQ)()})));let y=n.mirror.appModel.currentTool===i.NLJ.COMMENTS;if(!c&&s.repositionViewportOnCommentSelection){let e=l((0,A.E)(a,o,n.selectedView,E,y),{jump:E,jumpOnAbort:!0});e&&_.push(e)}return Promise.all(_).then()}),X=(0,v.nF)((e,r)=>{let n=e.getState();n.comments.activeThread?.id===r.thread.id?e.dispatch(en()):(r.skipDeactivatingExistingActiveComment||e.dispatch(en()),(0,l.H3)(n.comments)&&(e.dispatch(q(r)),u.zl.set(O.J,!1)))}),J=(0,o.N)("COMMENTS_STOP_EDITING"),Q=(0,o.N)("COMMENTS_SUBMIT_REPLY"),ee=(0,v.nF)((e,r)=>{let n=e.getState(),{commentsWriteApi:a,commentsConfiguration:o}=r,s=n.comments.threads[r.threadId],[l,c]=a.reply({threadId:r.threadId,threadUuid:r.threadUuid,uuid:r.uuid,messageMeta:s.reply.messageMeta,attachments:Object.values(s.reply.attachments||{})},{forceMention:r.forceMention||!1,forceWithInvite:r.forceWithInvite||!1,prototypeMode:"prototype"===n.selectedView.view,trackingContext:r.trackingContext});(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid})),e.dispatch(ek({threadId:r.threadId,reply:{messageMeta:[],attachments:{}}})),l.then(r=>{if(!r)return;let{data:a}=r;if(a.message?.warning_message&&0!==a.message.warning_message.length&&e.dispatch(b.F.enqueue({type:"at-mention-error",message:a.message.warning_message})),a.message&&a.message.is_new_file_follower){let r=o.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(en()),r.mirror.appModel.showUi||C.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&C.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:R.a}))})}}:void 0;e.dispatch(b.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:r,onDismiss:()=>{}}))}let s=a.meta;e.dispatch(eK({comment:s,userInitiated:!1})),S.ds("Comment Submitted",s.key,n,{commentId:s.id,parentCommentId:s.id,selectedView:n.selectedView.view,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),(0,d.kc)().comments_faster_saving_ux_v2&&s.id&&s.uuid&&e.dispatch(eV({commentId:s.id,commentUuid:s.uuid})),e.getState().userFlags.has_created_comment||e.dispatch(F.b({has_created_comment:!0}))}).catch(n=>{let i=n.data?.reason?.failure_info;if(n.data?.reason?.reason!=="comment_validation_failure"||void 0===i||!r.onCommentValidationFailure||r.forceMention||r.forceWithInvite){let i=(0,y.Jv)(n,(0,y.t)("comments.an_error_occurred"));e.dispatch(E.s.error(i)),e.dispatch(eN({threadId:r.threadId,resetStatusOnly:!0})),e.dispatch(ek({threadId:r.threadId,reply:s.reply}));return}r.onCommentValidationFailure(i.users_without_view,i.ext_users_without_view,i.uninvitable_users,{threadId:r.threadId,messageMeta:s.reply.messageMeta,attachments:s.reply.attachments})}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eB({commentUuid:r.uuid}))}),e.dispatch(Q(r))}),et=(0,o.N)("COMMENTS_SUBMIT_NEW_COMMENT"),er=(0,v.nF)((e,r)=>{(0,s.sx)("New comment starting dispatched action",{uuid:r.uuid});let n=e.getState(),a=(0,N.U2)(n.selectedView);if(!a)return Promise.resolve();let o=r.newCommentState||n.comments.newComment,{canvasPosition:l,nodeId:c,nodeOffset:u,inFrame:m,pageId:p,viewport:h,stablePath:_}=r.destination,g=o.selectionBoxAnchor?o.selectionBoxAnchor:void 0;e.dispatch(en({force:!0})),e.dispatch(eC({resetStatusOnly:!1}));let{messageMeta:f,attachments:E}=o;(0,s.sx)("New comment creating promise",{uuid:r.uuid});let[v,T]=r.commentsWriteApi.create({fileKey:a,messageMeta:f,attachments:Object.values(E),pageId:p,uuid:r.uuid,clientMeta:{x:l.x,y:l.y,node_id:c,node_offset:u,page_id:p,viewport:h,in_frame:m,selection_box_anchor:g,stable_path:_}},{prototypeMode:"prototype"===n.selectedView.view,onValidationError:async(r,n,i)=>{if(await B(o.messageMeta,e.dispatch,r,n,i))return{forceMentions:!0,forceWithInvite:!0};if(0!==e.getState().comments.newComment.messageMeta.length){e.dispatch(eC({resetStatusOnly:!0}));let r={text:(0,y.t)("comments.view"),action(r,n){if(e.getState().comments.activeThread?.id===L.hm&&e.getState().comments.newComment.messageMeta.length>0)return e.dispatch(eT()),e.dispatch(b.F.update({id:n,message:(0,y.t)("comments.finish_or_clear_your_active_comment_then_hit_view")})),!1;e.dispatch(eA(o)),e.dispatch(ea())}};e.dispatch(b.F.enqueue({type:`comment-creation-failure: ${T}`,error:!1,message:(0,y.t)("comments.oops_one_of_your_comments_never_posted"),onDismiss:()=>{},button:r,timeoutOverride:1/0}));return}e.dispatch(eA(o)),e.dispatch(ea()),e.dispatch(eT())}});return(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eU({commentUuid:r.uuid})),e.dispatch(et(r)),v.then(m=>{if((0,s.sx)("New comment promise resolved",{uuid:r.uuid}),!m)return;let{data:h}=m;if((0,N.U2)(e.getState().selectedView)!==a)return;if(h.message?.warning_message&&0!==h.message.warning_message.length&&e.dispatch(b.F.enqueue({type:"at-mention-error",message:h.message.warning_message})),h.message&&h.message.is_new_file_follower){let n=r.commentsConfiguration.showNotificationSettings?{text:(0,y.t)("comments.manage"),action:()=>{let r=e.getState();e.dispatch(en({force:!0})),r.mirror.appModel.showUi||C.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&C.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(I.j7({type:R.a}))})}}:void 0;e.dispatch(b.F.enqueue({message:(0,y.t)("comments.you_will_be_notified_about_replies"),type:"comments-opted-in",button:n,onDismiss:()=>{}}))}let g=h.meta,f=e.getState().comments.newComment!==o;e.dispatch(eC({resetStatusOnly:f})),(0,d.kc)().comments_faster_saving_ux_v2&&g.id&&g.uuid&&e.dispatch(eV({commentId:g.id,commentUuid:g.uuid})),S.ds("Comment Submitted",a,n,{commentId:g.id,locationX:l&&l.x,locationY:l&&l.y,nodeId:c,pageId:p,nodeOffsetX:u&&u.x,nodeOffsetY:u&&u.y,selectedView:n.selectedView.view,stablePath:_,isDevModeFocusView:!!e.getState().selectedView?.devModeFocusId}),e.getState().userFlags.has_created_comment||e.dispatch(F.b({has_created_comment:!0})),e.dispatch((0,k.zq)({lastCreatedCommentId:g.id}))}).catch(n=>{if(e.dispatch(eC({resetStatusOnly:!0})),!(n?.data?.status>=400&&n?.data?.status<500&&n?.data?.message))return e.dispatch(b.F.enqueue({type:`comment-creation-failure: ${T}`,message:(0,y.t)("comments.couldn_t_post_your_comment"),error:!0,button:{text:(0,y.t)("comments.retry"),action(){(0,s.sx)("New comment dispatching retry submission",{uuid:r.uuid}),e.dispatch(er({...r,newCommentState:o}))}}}));{let r=(0,y.Jv)(n);if(r)return e.dispatch(b.F.enqueue({type:`comment-creation-failure: ${T}`,message:r,error:!0}))}}).finally(()=>{(0,d.kc)().comments_faster_saving_ux&&!(0,d.kc)().comments_faster_saving_ux_v2&&e.dispatch(eB({commentUuid:r.uuid}))})}),en=(0,v.nF)((e,r)=>{let n=e.getState(),o=r instanceof Object&&r.force,{newComment:s}=n.comments,c=n.comments.activeThread?.id,d=(0,l.Kx)(s.messageMeta)&&0===Object.keys(s.attachments).length;if(!o&&!d&&!(0,l.H3)(n.comments))return e.dispatch(eT()),!1;let u=c&&n.comments.threads[c],m=u&&(0,l.Kx)(u.reply.messageMeta)&&0===Object.keys(u.reply.attachments||{}).length;if(!o&&c&&u&&!m&&(!u.discardAttempts||u.discardAttempts<1))return e.dispatch(ev(c)),!1;let p=n.comments.editingComment;return!o&&p?(e.dispatch(ev(p.id)),!1):("fullscreen"===n.selectedView.view&&i.glU.setActiveCommentAnchorData({stablePath:a.x7}),"communityHub"===n.selectedView.view&&e.dispatch(I.$T({...n.selectedView,commentThreadId:void 0})),e.dispatch(eW()),e.dispatch(e$()),e.dispatch(eC({resetStatusOnly:!1})),n.tooltip&&e.dispatch(M.jD()),!0)}),ei=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ACTIVE"),ea=(0,v.nF)((e,r)=>{let n=e.getState();if("fullscreen"===n.selectedView.view){if(n.comments.newComment.anchorPosition){let{x:e,y:a}=n.comments.newComment.anchorPosition,o=r?.stablePath;o?i.glU.setActiveCommentAnchorData({stablePath:`[${o.join(",")}]`}):i.glU.setActiveCommentAnchorData(i.glU.getCommentAnchorDataAtPosition(e,a))}else i.glU.setActiveCommentAnchorData({stablePath:a.x7})}e.dispatch(ei(r))}),eo=(0,o.N)("COMMENTS_SET_NEW_SELECTION_BOX_ANCHOR_POSITION"),es=(0,v.nF)((e,r)=>{e.getState().userFlags.has_created_selection_comment||e.dispatch(F.b({has_created_selection_comment:!0})),e.dispatch(eo(r))}),el=(0,o.N)("COMMENTS_SET_NEW_ANCHOR_POSITION"),ec=(0,v.nF)((e,r)=>{if("fullscreen"===e.getState().selectedView.view){let{x:e,y:n}=r.anchorPosition;i.glU.setActiveCommentAnchorData(i.glU.getCommentAnchorDataAtPosition(e,n))}e.dispatch(el(r))}),ed=(0,o.N)("COMMENTS_REMOVE_HOVERED_PIN"),eu=(0,o.N)("COMMENTS_ADD_HOVERED_PIN"),em=(0,o.N)("COMMENTS_REMOVE_EMPHASIZED_PIN"),ep=(0,o.N)("COMMENTS_ADD_EMPHASIZED_PIN"),eh=(0,o.N)("COMMENTS_SET_ACTIVE"),e_=(0,v.nF)(e=>{let r=e.getState(),n=r.selectedView;"subView"in n&&("hubFile"===n.subView||"plugin"===n.subView)&&(0,s.sx)("at_mention_search_started",{comment_type:r.comments.activeThread?.id?"community_pinned":"community_general",profile_id:r.user?.community_profile_id,resource_id:"hubFile"===n.subView?n.hubFileId:n.publishedPluginId,resource_type:"hubFile"===n.subView?"hub_file":"plugin"})}),eg=(0,o.N)("COMMENTS_SET_TYPEAHEAD_POSITION_OFFSET"),ef=(0,o.N)("COMMENTS_SET_TYPEAHEAD"),eE=(0,o.N)("COMMENTS_SHOW_EMOJI_PICKER"),ey=(0,o.N)("COMMENTS_SET_ACTIVE_SORT"),eb=(0,o.N)("COMMENTS_DISCARD_COMMENT_REPLY_ATTEMPT"),ev=(0,v.nF)((e,r)=>{let n=e.getState().comments,i=n.activeThread?.id,a=i&&n.threads[i];if(a&&a.discardAttempts===l.B2){let e=(0,l._Z)(a.reply.messageMeta),r=(0,l.Kx)(a.reply.messageMeta);(0,_.Lo)("Comment discard active thread attempt","comment info",{threadId:i,messageLength:e.length,isMessageDiscardable:r}),(0,h.kF)("isMessageDiscardable",String(r)),(0,h.kF)("messageType","reply"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eb(r))}),eI=(0,o.N)("COMMENTS_DISCARD_NEW_COMMENT_ATTEMPT"),eT=(0,v.nF)(e=>{let r=e.getState().comments.newComment;if(r.discardAttempt===l.B2){let e=(0,l._Z)(r.messageMeta),n=(0,l.Kx)(r.messageMeta);(0,_.Lo)("Comment discard new comment attempt","comment info",{messageLength:e.length,isMessageDiscardable:n}),(0,h.kF)("isMessageDiscardable",String(n)),(0,h.kF)("messageType","new"),(0,h.us)("User attempted to close comments more than max attempt times")}e.dispatch(eI())}),eS=(0,o.N)("COMMENTS_SET_SHOW_ONLY_MY_COMMENTS"),ew=(0,o.N)("COMMENTS_SET_SHOW_RESOLVED_COMMENTS"),eA=(0,o.N)("COMMENTS_REVERT_NEW_COMMENT"),eC=(0,o.N)("COMMENTS_RESET_NEW_COMMENT"),eN=(0,o.N)("COMMENTS_RESET_THREAD"),eL=(0,o.N)("COMMENTS_SET_NEW_COMMENT_ATTACHMENT"),eO=(0,o.N)("COMMENTS_SET_NEW_COMMENT_MESSAGE"),eR=(0,o.N)("COMMENTS_SET_NEW_COMMENT"),eP=(0,o.N)("COMMENTS_SET_REPLY_ATTACHMENT"),eD=(0,o.N)("COMMENTS_SET_REPLY_MESSAGE"),ek=(0,o.N)("COMMENTS_SET_REPLY"),eM=(0,o.N)("COMMENTS_SET_EDITING_ATTACHMENT"),eF=(0,o.N)("COMMENTS_SET_EDITING"),ex=(0,o.N)("COMMENTS_SET_ACTIVE_DRAG_TARGET"),eU=(0,o.N)("COMMENTS_SET_SAVING"),eB=(0,o.N)("COMMENTS_CLEAR_SAVING"),eV=(0,o.N)("COMMENTS_STORE_SERVER_ID_FOR_LG_PENDING_UUID"),eG=(0,o.N)("COMMENTS_CLEAR_LG_PENDING_UUID"),eH=(0,o.N)("COMMENTS_DEL"),eK=(0,v.nF)((e,r)=>{let n=e.dispatch,i=e.getState(),{comment:a}=r;if(i.user&&i.user.id===a.user_id&&!r.userInitiated){if(a.parent_id){let e=i.comments.threads[a.parent_id];if(e&&e.state===L.EB.BUSY){let i=!function(e,r){if(!e)return!r;if(!r)return!e;if(e.length!==r.length)return!1;for(var n=0;n<e.length;n++){let i=e[n],a=r[n],o=new Set(Object.keys(i)),s=Object.keys(a);if(o.size!==s.length||!s.every(e=>!!o.has(e)&&i[e]===a[e]))return!1}return!0}(r.comment.message_meta,e.reply.messageMeta);n(eN({threadId:a.parent_id,resetStatusOnly:i}))}}else{let e=i.comments.newComment;e&&e.state===L.EB.BUSY&&n(en({force:!0})),n(eC({resetStatusOnly:!1}))}}}),eW=(0,o.N)("COMMENTS_RESET"),e$=(0,o.N)("COMMENTS_RESET_ACTIVE_ID")},63397:(e,r,n)=>{n.d(r,{Ad:()=>F,Ch:()=>O,Dg:()=>D,Hx:()=>H,LO:()=>W,RS:()=>k,Rx:()=>M,X2:()=>er,Zj:()=>B,_8:()=>$,_F:()=>G,aP:()=>X,cO:()=>x,cR:()=>P,d6:()=>en,dL:()=>z,dv:()=>Q,e6:()=>ee,eg:()=>et,gT:()=>j,h1:()=>Z,ig:()=>V,oB:()=>J,qo:()=>Y,r1:()=>U,rO:()=>R,vQ:()=>q});var i=n(167249),a=n(776250),o=n(183297),s=n(27087),l=n(881388),c=n(939863),d=n(123026),u=n(392592),m=n(837324),p=n(913270),h=n(980820),_=n(975350),g=n(738269),f=n(507877),E=n(994988),y=n(99403),b=n(506513),v=n(697551),I=n(147206),T=n(320741),S=n(935757),w=n(440535),A=n(555328),C=n(66037),N=n(746058),L=n(651705);let O=(0,i.N)("COMMUNITY_HUB_SHOW_ADMIN_PROFILE_BANNER"),R=(0,i.N)("COMMUNITY_HUB_HIDE_ADMIN_PROFILE_BANNER"),P=d.cR,D=(0,h.nF)((e,r)=>{let n;let{user:i,authedUsers:o,orgUsersByOrgId:s,authedTeamsById:l,teamAdminRolesForAuthedUsers:d,authedProfilesById:m,selectedView:h,currentUserOrgId:_}=e.getState(),E=r.profileId?m[r.profileId]:null,y=r.view&&(!E||(0,v.UK)(E,r.view))?r.view:{view:"communityHub",subView:"searchAndBrowse",data:(0,p.Gu)()};if(!E){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_not_found"),type:"COMMUNITY_PROFILE_ERROR"})),e.dispatch(g.$T(y));return}let b=_;if(E.org_id){b=E.org_id;let e=s[E.org_id];n=Object.keys(o.byId).find(r=>{let n=e[r];if(n&&(0,I.Ay)(n.permission)>=C.jh.ADMIN)return n.user_id})}else E.team_id?(b=l[E.team_id]?.org_id||null,n=Object.keys(o.byId).find(e=>{let r=d[e];return r?.find(e=>e.team_id===E.team_id)?.user_id})):n=E.primary_user_id===i?.id?i?.id:o.orderedIds.find(e=>E.associated_users?.find(r=>r.user_id===e)?.user_id);if((0,S.Il)(E.id),(0,a.sx)("Community profile IA switched",{profileId:E.id,view:h.view}),e.dispatch(P(E)),e.dispatch(O()),n&&(n!==i?.id||_!==b)){let r={userId:n,orgId:b};e.dispatch(f._l({workspace:r,view:y}))}else e.dispatch(g.$T(y))}),k=(0,i.N)("COMMUNITY_HUB_ADD_FOLLOW"),M=(0,i.N)("COMMUNITY_HUB_DELETE_FOLLOW"),F=(0,i.N)("COMMUNITY_HUB_SAVE_PAGE_STATE"),x=(0,i.N)("COMMUNITY_HUB_RESET_COMMENT_STATE"),U=(0,i.N)("COMMUNITY_HUB_SET_COMMENTS"),B=(0,i.N)("COMMUNITY_HUB_SET_COMMENTS_ACTIVE_FEED_TYPE"),V=(0,i.N)("COMMUNITY_HUB_SET_COMMENT_REPLIES"),G=(0,i.N)("COMMUNITY_HUB_FLUSH_NEW_COMMENTS_QUEUE"),H=(0,i.N)("COMMENTS_INSERT_COMMUNITY_MENTION"),K=(e,r)=>{let n=/\?/.test(e)?"&":"?";return e+`${n}${r}`};(0,h.nF)((e,r)=>{if(!(0,o.u9)(r))return;let n=`/api/${(0,v.n)(r.resourceType)}/${r.resourceId}/comments`;r.selectedCommentId&&r.selectedCommentId!==w.hm&&!r.pagination?.selected_comment&&(n=K(n,`selected_comment_id=${r.selectedCommentId}`)),r.activeFeedType===A.Qv.ME&&(n=K(n,`feed_type=${r.activeFeedType}`),void 0===r.numCommentsForResource&&(n=K(n,"include_total_count=true"))),(0,o.En)(n,r.pageSizeOverride??o.vs,r,o.AS).then(e=>{let n=!e.selected_comment||e.comments.find(r=>r.id===e.selected_comment?.id),{commentsById:i,authorsById:a,feed:o}=(0,v.HR)(n?e.comments:[...e.comments,e.selected_comment]),s=e.pagination;e.selected_comment&&(s.selected_comment=e.selected_comment);let l={...e,pagination:e.pagination,totalNumberOfComments:e.total_count,commentsById:i,authorsById:a,feed:o,activeFeedType:r.activeFeedType,type:r.resourceType,id:r.resourceId,mentionedProfiles:e.mentioned_profiles};e.selected_comment&&(l.selectedCommentId=e.selected_comment.id),r.onSuccess&&r.onSuccess(l)}).catch(n=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_fetch_comments"))),r.onError&&r.onError()})});let W=(0,i.N)("COMMUNITY_HUB_RESTRICT_PROFILE"),$=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:i})=>{s.Ay.post(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{i&&i()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_restrict_profile_error",{error:n}),type:"RESTRICT_PROFILE_ERROR"}))}),e.dispatch(W({profileId:r,blockedProfileId:n,onSuccess:i}))}),Y=(0,i.N)("COMMUNITY_HUB_UNRESTRICT_PROFILE"),z=(0,h.nF)((e,{profileId:r,blockedProfileId:n,onSuccess:i})=>{s.Ay.del(`/api/profile/${n}/block`,{block_type:"restrict",profile_id:r}).then(()=>{i&&i()}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.couldnt_unrestrict_profile_error",{error:n}),type:"UNRESTRICT_PROFILE_ERROR"}))}),e.dispatch(Y({profileId:r,blockedProfileId:n,onSuccess:i}))}),j=(0,i.N)("COMMUNITY_HUB_SET_COMMENT_STATE");(0,h.nF)((e,r)=>{let{id:n,type:i}=r;(n!==e.getState().communityHub.comments.id||i!==e.getState().communityHub.comments.type)&&e.dispatch(x()),e.dispatch(U(r)),e.dispatch(j(r))}),(0,h.nF)((e,{profileId:r,on404Redirect:n},{loadingKey:i})=>{let a=N.s.getProfile({profileId:r});(0,T.N)(a,e,i),a.then(({data:r})=>{e.dispatch(L.Oo(r.meta.profile)),e.dispatch(g.$T(e.getState().selectedView))}).catch(r=>(404===r.status&&n?n():e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information"))),null))}),(0,h.nF)((e,{handle:r,on404Redirect:n},{loadingKey:i})=>{let a=e.getState().currentUserOrgId,o=N.s.getHandle({currentOrgId:a||void 0,handle:r});(0,T.N)(o,e,i),o.then(({data:r})=>{e.dispatch(L.Oo(r.meta.profile))}).catch(({data:r})=>{r?.status===404&&n&&n(),e.dispatch(l.s.error((0,c.t)("community.actions.error_fetching_profile_information")))})},({handle:e})=>`COMMUNITY_HUB_GET_PROFILE_BY_HANDLE_${e}`);let q=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:i,description:a,location:o,profileHandle:d,onSuccess:u,userId:m,teamId:p,orgId:h}=r,_=s.Ay.post("/api/profile",{website:i,description:a,location:o,profile_handle:d,primary_user_id:m,team_id:p,org_id:h});(0,T.N)(_,e,n),_.then(({data:r})=>{e.dispatch(L.HZ(r.meta)),e.dispatch(L.Oo(r.meta));let{currentUserOrgId:n,orgById:i}=e.getState(),a=n&&i[n];n&&a&&n===h&&e.dispatch(y.F6({id:n,community_profile_handle:r.meta.profile_handle,community_profile_id:r.meta.id})),u&&u(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({userId:e})=>`COMMUNITY_HUB_CREATE_PROFILE_${e}`),Z=(0,h.nF)((e,r)=>{s.Ay.post("/api/profile/generate_handle").then(({data:n})=>{e.dispatch(L.HZ(n.meta)),e.dispatch(L.Oo(n.meta)),r.onSuccess&&r.onSuccess(e)}).catch(({data:r})=>{e.dispatch(l.s.error(r.message))})}),X=(0,h.nF)((e,r,{loadingKey:n})=>{let{website:i,twitter:a,instagram:o,pronouns:d,description:p,location:h,profileId:_,profileHandle:f,onSuccess:E}=r,b=e.getState().communityHub.currentProfile;if(_===b?.id&&Object.entries(r).every(([e,r])=>void 0===r||e in b&&b[e]===r))return;let I=a?.trim(),S=o?.trim();if(I&&b?.twitter!==I&&!m.HD.test(I)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_twitter_handle_is_not_valid",{handle:I}),error:!0}));return}if(S&&b?.instagram!==S&&!m.Co.test(S)){e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_instagram_handle_is_not_valid",{handle:S}),error:!0}));return}let w=s.Ay.put(`/api/profile/${_}`,{website:i,twitter:I,instagram:S,pronouns:d,description:p,location:h,profile_handle:f});(0,T.N)(w,e,n);let A=e.getState().user?.community_profile_handle;w.then(({data:n})=>{let{communityHub:i,currentUserOrgId:a,orgById:o}=e.getState();i.currentProfile?.id===n.meta.id&&e.dispatch(L.Oo(n.meta));let s=o[a];if(s&&"string"==typeof s.id&&s.id===n.meta.org_id&&e.dispatch(y.F6({id:n.meta.org_id,community_profile_handle:n.meta.profile_handle})),f){let r=e.getState().selectedView;(0,v.Cj)(r)&&r?.handle===A&&e.dispatch(g.$T({view:"communityHub",subView:"handle",handle:f})),n.meta.primary_user_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_profile_handle_was_set_to_profile_handle",{profileHandle:f}),type:"profile-handle"})):n.meta.team_id?e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_team_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"team-handle"})):n.meta.org_id&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.your_organization_s_handle_was_set_to_profile_handle",{profileHandle:f}),type:"org-handle"}))}["twitter","location","instagram","website","description"].forEach(i=>{if(i in n.meta&&i in r){let r={twitter:(0,c.t)("community.actions.your_twitter_handle_was_updated"),location:(0,c.t)("community.actions.your_location_was_updated"),instagram:(0,c.t)("community.actions.your_instagram_handle_was_updated"),website:(0,c.t)("community.actions.your_website_url_was_updated"),description:(0,c.t)("community.actions.your_description_was_updated")};e.dispatch(u.F.enqueue({message:r[i],type:"profile-updated"}))}}),E&&E(e)}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(l.s.error(n))})},({profileId:e})=>`COMMUNITY_HUB_UPDATE_PROFILE_${e}`),J=(0,h.nF)((e,r,{loadingKey:n})=>{let{profileId:i,handle:a}=r;s.Ay.del(`/api/profile/${i}`).then(()=>{e.dispatch(L.cr(a));let{currentUserOrgId:r,orgById:n}=e.getState(),o=r&&n[r];r&&o&&o.community_profile_id===i&&e.dispatch(y.F6({id:r,community_profile_handle:void 0,community_profile_id:void 0})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.profile_deleted")}))}).catch(()=>{e.dispatch(l.s.error((0,c.t)("community.actions.unable_to_delete_profile_please_try_again_later")))})});(0,h.nF)(async(e,{file:r,profileId:n,onSuccessCallback:i},{loadingKey:a})=>{let o=(0,b.c)(r).then(e=>(function(e,r,n,i){return r?s.Ay.post(e).then(({data:e})=>e.meta).then(async({cover_image_path:e,signature:r,fields:n})=>{let a=new FormData;return n&&Object.entries(n).forEach(([e,r])=>a.append(e,r)),a.set("content-type",i.type),a.append("file",i),await fetch(e,{method:"POST",body:a}),{cover_image_path:e,signature:r}}):Promise.resolve({cover_image_path:"",signature:""})})(`/api/profile/${n}/upload`,e,r.type,r));(0,T.N)(o,e,a),await o.then(({signature:e})=>s.Ay.put(`/api/profile/${n}`,{signature:e})).then(({data:r})=>{e.dispatch(L.Oo(r.meta)),i()}).catch(r=>{e.dispatch(l.s.error(r?(0,c.t)("community.actions.an_error_occurred_with_error",{error:r}):(0,c.t)("community.actions.an_error_occurred")))})},({profileId:e})=>`COMMUNITY_HUB_UPLOAD_PROFILE_COVER_IMAGE_${e}`);let Q=(0,i.N)("COMMUNTY_HUB_FOLLOW_ENTITY"),ee=(0,h.nF)(async(e,r,{loadingKey:n})=>{let i=s.Ay.put("/api/follows",{followed_profile_id:r});(0,T.N)(i,e,n),await i.then(({data:n})=>{e.getState().user?.community_profile_id&&(e.dispatch(k({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.followed_profile_name",{profileName:n.meta.followed_profile.name}),type:"COMMUNITY_HUB_FOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unable_to_follow_this_profile_profile_name",{profileName:n}),type:"COMMUNITY_HUB_FOLLOW_FAILED",error:!0}))}),e.dispatch(Q(r))},e=>`COMMUNTY_HUB_FOLLOW_ENTITY_${e}`),et=(0,i.N)("COMMUNTY_HUB_UNFOLLOW_ENTITY"),er=(0,h.nF)((e,r,{loadingKey:n})=>{let i=s.Ay.del("/api/follows",{followed_profile_id:r});(0,T.N)(i,e,n),i.then(()=>{e.getState().user?.community_profile_id&&(e.dispatch(M({followedProfileId:r,currentUserProfileId:e.getState().user?.community_profile_id})),e.dispatch(u.F.enqueue({message:(0,c.t)("community.actions.unfollowed_profile"),type:"COMMUNITY_HUB_UNFOLLOW"})))}).catch(r=>{let n=(0,c.Jv)(r);n&&e.dispatch(u.F.enqueue({message:`Unable to unfollow this profile: ${n}`,type:"COMMUNITY_HUB_UNFOLLOW_FAILED",error:!0}))}),e.dispatch(et(r))},e=>`COMMUNTY_HUB_UNFOLLOW_ENTITY_${e}`);function en(e){return{updateStatus:(0,i.N)(`${e}_UPDATE_PUBLISH_STATUS`),updateMetadata:(0,i.N)(`${e}_UPDATE_PUBLISH_METADATA`),clearMetadata:(0,i.N)(`${e}_CLEAR_PUBLISH_METADATA`),clearMetadataAndStatus:(0,i.N)(`${e}_CLEAR_PUBLISHING`)}}(0,h.nF)(async(e,r)=>{let n;let{thread:i,resolved:a}=r,o=e.getState();a&&o.comments.activeThread?.id===i.id&&!o.comments.showResolved&&e.dispatch(_.UU()),n=a?s.Ay.put(`/api/community_comments/${i.id}/resolve`):s.Ay.put(`/api/community_comments/${i.id}/unresolve`),await n.then(({data:r})=>{e.dispatch(E.kE({comment:{id:i.id,resolved_at:r.meta.resolved_at}}))}).catch(r=>{e.dispatch(u.F.enqueue({error:!0,message:a?(0,c.t)("community.actions.failed_to_resolve_comment"):(0,c.t)("community.actions.failed_to_unresolve_comment")}))})})},609219:(e,r,n)=>{n.d(r,{M2:()=>h,Sp:()=>m,k3:()=>p});var i=n(167249),a=n(553716),o=n(286640),s=n(466636),l=n(980820),c=n(320741),d=n(596578);(0,l.nF)((e,r)=>{let{payments:n,source:i}=r,l=e.getState().user?.id;if(!l||!n)return;let c=n.filter(s.QQ),d=`${u}_${l}`,m=o.TQ()?.getItem(d);if(m){let e=JSON.parse(m);if(Array.isArray(e)){let r=new Set(c.map(e=>e.monetized_resource_metadata_id)),o=e.map(e=>e.monetized_resource_metadata_id).filter(e=>!r.has(e));o.length&&(0,a.x1)("community","[ActivePayments] mismatch detected",{source:i,userId:l,revoked:o,previousPayments:e,currentPayments:n},{reportAsSentryError:!0})}}let p=JSON.stringify(c);o.TQ()?.setItem(d,p)});let u="debug_succeeded_payments";(0,l.nF)((e,r,{loadingKey:n})=>{let i=d.C.getBuyerActivePayments();(0,c.N)(i,e,n),i.then(({data:r})=>{e.dispatch(h(r.meta))}).catch(()=>{})});let m=(0,i.N)("M10N_DEL_ACTIVE_USER_PAYMENT"),p=(0,i.N)("M10N_REALTIME_ACTIVE_USER_PAYMENT"),h=(0,i.N)("M10N_SET_ACTIVE_USER_PAYMENTS")},384162:(e,r,n)=>{n.d(r,{wJ:()=>p});var i=n(167249),a=n(553716),o=n(868389),s=n(84336),l=n(980820),c=n(697551),d=n(320741),u=n(555328),m=n(222085);let p=(0,i.N)("COMMUNITY_SET_SHELVES_FOR_SHELF_TYPE");function h(e,r){let n=[],i=[],a=[];r.forEach(e=>{let r=(0,c.x1)(e);r===u.Ug.HUB_FILE?n.push(e):r===u.Ug.PLUGIN?i.push(e):r===u.Ug.WIDGET&&a.push(e)}),e((0,o.Sb)({hubFiles:n,src:"fetchShelvesForShelfType"})),e((0,s.Qi)({publishedPlugins:[...i,...a],src:"fetchShelvesForShelfType"}))}(0,l.nF)((e,{shelfType:r,limit:n},{loadingKey:i})=>{let o={shelfType:r,limitShelfContent:n},s=m.A.getCommunityShelves(o);(0,d.N)(s,e,i),s.then(({data:n})=>{let i=n.meta;i.forEach(r=>h(e.dispatch,r.shelf_content)),e.dispatch(p({shelfType:r,shelves:i}))}).catch(e=>{(0,a.x1)("collections","error fetching collections",{...o,error:e.toString()})})},({shelfType:e,limit:r})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_${e}_${r}`),(0,l.nF)((e,{shelfType:r,filterLabel:n,limit:i},{loadingKey:a})=>{let o=m.A.getCommunityShelves({shelfType:r,filterLabel:n,limitShelfContent:i});(0,d.N)(o,e,a),o.then(({data:n})=>{let i=n.meta;i.forEach(r=>h(e.dispatch,r.shelf_content)),e.dispatch(p({shelfType:r,shelves:i}))})},({shelfType:e,filterLabel:r,limit:n})=>`COMMUNITY_FETCH_SHELVES_FOR_SHELF_TYPE_AND_FILTER_LABEL_${e}_${r}_${n}`)},410424:(e,r,n)=>{n.d(r,{Af:()=>eu,D3:()=>w.D3,FO:()=>em,L1:()=>w.L1,N4:()=>eN,QA:()=>ep,Ri:()=>ed,Sb:()=>w.Sb,VS:()=>eI,ax:()=>eL,bk:()=>ew,eq:()=>e_,i9:()=>eA,oO:()=>eS,p7:()=>ef,rH:()=>eb,ts:()=>ey,wO:()=>ev,yh:()=>eO});var i=n(268853),a=n(922827),o=n(258214),s=n(167249),l=n(776250),c=n(511617),d=n(737947),u=n(404843),m=n(966712),p=n(418956),h=n(456772),_=n(752553),g=n(563706),f=n(776621),E=n(553716),y=n(27087),b=n(761870),v=n(881388),I=n(939863),T=n(392592),S=n(749949),w=n(868389),A=n(776397),C=n(980820),N=n(63397),L=n(944682),O=n(738269),R=n(837900),P=n(662275),D=n(404717),k=n(986270),M=n(936500),F=n(107877),x=n(453909),U=n(988022),B=n(697551),V=n(782501),G=n(661060),H=n(820642),K=n(132135),W=n(99506),$=n(540019),Y=n(962155),z=n(320741),j=n(973131),q=n(284321),Z=n(984968),X=n(813408),J=n(809073),Q=n(637590),ee=n(851363),et=n(596578),er=n(955617),en=n(301400),ei=n(880671),ea=n(474062),eo=n(953289),es=n(662268),el=n(651705);let ec=n(876401).ZS,ed=(0,s.N)("PUT_FIG_FILE_PUBLISHED_AS_HUB_FILE"),eu=(0,s.N)("UPDATE_HUB_FILE_PAGE_TITILE"),em=(0,s.N)("DEL_FIG_FILE_PUBLISHED_AS_HUB_FILE"),ep=(0,s.N)("PUT_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),eh=(0,s.N)("DEL_FIG_FILE_DUPLICATE_FROM_HUB_FILE"),e_=(0,s.N)("HUB_FILE_PUT_HUB_FILE_REMIX"),eg=e=>{let r=(0,I.t)("community.actions.log_in_or_create_an_account_to_duplicate_this_file");if(g.rr){window.location.href="/login";return}e.dispatch(b.Ts({origin})),e.dispatch(P.to({type:ei.x,data:{headerText:r}}))},ef=(0,C.nF)((e,r,{loadingKey:n})=>{let i=e.getState();if(!i.user){eg(e);return}let a={headers:{...y.Ay.defaults.headers,"X-Figma-User-ID":r.workspace.userId}},o=y.Ay.post(`/api/hub_files/v2/${r.hubFileId}/copy`,{org_id:r.workspace.orgId},a);(0,z.N)(o,e,n),o.then(({data:n})=>{let a=n.meta;(0,l.sx)(F.M5.HUB_FILE_DUPLICATED,{hubFileId:r.hubFileId,figFileKey:a.key,searchSessionId:(0,S.w)(i)}),"whiteboard"===a.editor_type&&e.dispatch(k.Hx({storeInRecentsKey:J.$A.FigJam,id:r.hubFileId,type:J.vt.CommunityResource}));let o=(0,K.to)(a);o=(0,c.dR)(o,{[H.pt.KEY]:H.pt.VALUE,fuid:r.workspace.userId}),d.Ay.redirect(o,g.rr?void 0:"_blank"),e.dispatch(O.oB())}).catch(r=>{e.dispatch(T.F.enqueue({error:!0,message:(0,I.t)("community.actions.failed_to_duplicate_file_error",{error:(0,I.Jv)(r,(0,I.t)("community.actions.try_again_or_contact_support_figma_com"))})}))})},({hubFileId:e})=>`DUPLICATE_HUB_FILE_${e}`),eE=(0,C.nF)((e,r)=>{let{canRetry:n=!0}=r,i=e.getState(),a=i.currentUserOrgId,o=(0,m.kc)().ps_benchmark?i.currentTeamId:null;if(r.folderId){let n=i.folders[r.folderId]?.team_id,a=n?i.teams[n]:null,o=(0,x.N)(i.hubFiles[r.hubFileId].viewer_mode),s=function(e){switch(e){case W._Y.WHITEBOARD:return{type:Z.sK.ADD_FIGJAM_FILE};case W._Y.SLIDES:return{type:Z.sK.ADD_SLIDES_FILE};default:return{type:Z.sK.ADD_DESIGN_FILE}}}(o);if(a&&!(0,Z.rR)(a,s)){e.dispatch(P.to({type:ea.Y,data:{teamId:a.id,createInDrafts:()=>{e.dispatch(eE({...r,folderId:void 0}))},teamName:a.name,editorType:o,dispatch:e.dispatch,action:ee.ZN.CREATE_FILE_FROM_TEMPLATE}}));return}}return y.Ay.post(`/api/hub_files/template/${r.hubFileId}/copy`,{folder_id:r.folderId,org_id:a,team_id:o||void 0}).then(({data:n})=>{let a=n.meta;(0,U.f5)("File Created",a,{selectedView:i.selectedView},{source:r.source}),r.callback&&r.callback(a?.key),"whiteboard"===a.editor_type&&e.dispatch(k.Hx({storeInRecentsKey:J.$A.FigJam,id:r.hubFileId,type:J.vt.CommunityResource}));let o=(0,K.to)(a);d.Ay.redirect(o,r.openInNewTab&&!g.rr?"_blank":void 0)}).catch(i=>{let a={error:!0,message:(0,I.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:r.hubFileName})};n&&(a.button={text:(0,I.t)("community.actions.retry"),action:()=>e.dispatch(eE({...r,canRetry:!1}))}),e.dispatch(T.F.enqueue(a))})}),ey=(0,C.nF)(async(e,{hubFileId:r,callback:n},{loadingKey:i})=>{let a=null,o=Promise.resolve(null),s=en.H.getVersions({id:r});o=s;try{a=(await s).data.meta}catch(e){return}(0,z.N)(o,e,i);let{fig_file_metadata:l,remixed_from_metadata:c,...d}=a,u=d.related_content,m=d.remixed_to_metadata,p=[...u?u.content:m||[],d];c&&p.push(c),e.dispatch((0,w.Sb)({hubFiles:p,src:"getHubFileVersions"})),l&&(e.dispatch(ed({hubFileId:d.id,fileKey:l.key})),l.file&&e.dispatch(L.yJ({file:l.file})),l.roles&&e.dispatch(M.uo({roles:l.roles}))),e.dispatch(eu({hubFileId:d.id}));let h=new Set(m?.map(e=>e.id));e.dispatch(e_({hubFileId:d.id,from:c?c.id:null,to:h})),n?.(d)},({hubFileId:e})=>`HUB_FILE_GET_VERSIONS_${e}`),eb=(0,C.nF)(async(e,{fileKey:r})=>{(0,m.Ay)().user_data&&await er.D.getHubFileMetadata({fileKey:r}).then(({data:n})=>{let i=n.meta.published_as;i?.id?e.dispatch(ed({hubFileId:i.id,fileKey:r})):e.dispatch(em({fileKey:r}));let a=n.meta.remixed_from_metadata,o=n.meta.is_preview;a?.id?e.dispatch(ep({hubFileId:a.id,fileKey:r,isPreview:!!o})):e.dispatch(eh({fileKey:r}));let s=[i,a].filter(e=>!!e);s.length>0&&e.dispatch((0,w.Sb)({hubFiles:s,src:"getHubFileMetadata"}))}).then(()=>{(0,m.kc)().ce_new_missing_fonts_logging&&(0,G.DI)()}).catch(e=>{console.error(e)}).finally(()=>{p.zl.set(u.x,!0)})}),ev=(0,N.d6)("HUB_FILE"),{updateMetadata:eI,updateStatus:eT,clearMetadataAndStatus:eS,clearMetadata:ew}=ev,eA=(0,C.nF)((e,r)=>{let n=[],i=r.viewerMode===W.y4.SLIDE_TEMPLATE;if(i){n=(0,q.AC)(e.getState());let i=(0,q.x6)(e.getState()),a=!!r.hubFileId&&n.length>0&&(0,Y.aB)(Object.values(i),new Set(n));if(!r.hubFileId&&0===n.length||a){(0,es.Dl)(e.dispatch);return}p.zl.set(eo.UM,{state:eo.F4.PUBLISH_HUB_FILE_INITIATED})}e.dispatch(eT({id:r.fileKey,status:{code:X.aP.UPLOADING}})),eC(e,r).then(({hubFile:n,actingProfile:i,profileCreated:a})=>(e.dispatch((0,w.Sb)({hubFiles:[n],src:"createHubFile"})),e.dispatch(ed({hubFileId:n.id,fileKey:r.fileKey})),a&&(i.profile_created=a,e.dispatch(el.HZ(i))),e.dispatch(el.Oo(i)),e.dispatch(eT({id:r.fileKey,status:{code:X.aP.SUCCESS}})),r.suggestedCategory&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:n.id,categoryId:n.category_id,suggestedCategory:r.suggestedCategory},{forwardToDatadog:!0}),{hubFile:n})).then(({hubFile:n})=>{if(!i||null===ec)return;let s=(0,q.AC)(e.getState()),l=Object.values((0,q.x6)(e.getState())).map(e=>e.node_id),c=a.Ez5.slideThemeLibBindings().renameThemeForTemplatePublish(r.name)?l:s;if(c.length>0){n.library_key&&a.Ez5?.slideDeck().updateSourceLibraryKey(o.l(n.library_key));let{onPublishSuccess:r,onPublishProgress:i,onPublishError:s}=(0,R.u)(W._Y.SLIDES);requestAnimationFrame(()=>{e.dispatch(ec({savepointDescription:"Community slide template publish",itemsToPublish:new Set(c),hubFileId:n.id,onPublishSuccess:r,onPublishProgress:i,onPublishError:s}))})}else p.zl.set(eo.UM,{state:eo.F4.PUBLISH_HUB_FILE_COMPLETED})}).catch(n=>{i&&p.zl.set(eo.UM,{state:eo.F4.PUBLISH_HUB_FILE_ERRORED}),e.dispatch(T.F.enqueue({message:n.message,type:"hub-file-created-error",error:!0})),e.dispatch(eT({id:r.fileKey,status:{code:X.aP.FAILURE,error:n.message}}))})});async function eC(e,r){let n;let{fileKey:o,name:s,description:l,categoryId:c,publisherIds:d,tags:u,creatorPolicy:m,thumbnailBuffer:p,viewerMode:h,scalingMode:_,authorOrgId:g,authorTeamId:E,hasCustomUploadedThumbnail:y,validPrototype:b,commentsSetting:v,agreedToTos:T,isPaid:S,price:w,supportContact:A,carouselMedia:C,customCarouselThumbnail:N}=r;if(g&&E)throw Error((0,I.t)("community.actions.attempting_to_set_both_author_org_id_and_author_team_id_while_publishing"));if(h===W.y4.PROTOTYPE&&a.X3B.firstPagePrototypeStatus()!==a.bOM.VALID)throw Error((0,I.t)("community.actions.attempting_to_publish_an_invalid_prototype_as_a_prototype"));let L=await (0,j.m)(o,"Published to Community hub",l,e.dispatch).then(e=>e.id).catch(e=>{throw(0,f.$D)(i.e.COMMUNITY,e),Error(e.data?.message||(0,I.t)("community.actions.could_not_connect_to_the_server"))});try{n=await (0,V.R1)(p,C||[],L)}catch(e){throw(0,f.$D)(i.e.COMMUNITY,e),Error((0,I.t)("community.actions.error_uploading_images_e"))}let O=(0,V.Z2)(n?.carousel_images||[],N),R={file_version_id:L,name:s,description:l,tags:u,category_id:c,creator_policy:m,signature:n?.cover_image.signature,cover_image_uploaded:n?.cover_image.cover_image_uploaded,publisher_ids:d,viewer_mode:h,scaling_mode:_,author_org_id:g,author_team_id:E,has_custom_uploaded_thumbnail:y,valid_prototype:b,comments_setting:v,agreed_to_tos:T,is_paid:S,price:w,support_contact:A,carousel_images:n?.carousel_images,cover_image_carousel_image:n?.carousel_images[O]};try{let e=await en.H.publishHubFile(R);return{hubFile:e.data.meta.hub_file,actingProfile:e.data.meta.acting_profile,profileCreated:e.data.meta.profile_created}}catch(e){throw(0,f.$D)(i.e.COMMUNITY,e),Error((0,I.Jv)(e,(0,I.t)("community.actions.could_not_publish_hub_file",{error:e.message})))}}let eN=(0,C.nF)(async(e,{payload:r,onSuccess:n})=>{let a;let{hubFileId:o,name:s,description:c,categoryId:d,suggestedCategory:u,creatorPolicy:m,publisherIds:p,tags:h,viewerMode:_,scalingMode:g,commentsSetting:E,price:y,supportContact:b,carouselMedia:S,customCarouselThumbnail:A,hasCustomUploadedThumbnail:C,thumbnailBuffer:N}=r;try{a=await (0,V.R1)(N,S||[],void 0,o)}catch(r){throw(0,f.$D)(i.e.COMMUNITY,r),e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.error_uploading_images_publish_update_from_editor"),type:"hub-file-updated-error",error:!0})),Error(r)}let L=(0,V.Z2)(a?.carousel_images||[],A),O={name:s,description:c,category_id:d,creator_policy:m,publisher_ids:p,tags:h,viewer_mode:_,scaling_mode:g,comments_setting:E,price:y,support_contact:b,carousel_images:a?.carousel_images,cover_image_carousel_image:a?.carousel_images[L],has_custom_uploaded_thumbnail:C,cover_image_uploaded:a?.cover_image.cover_image_uploaded,signature:a?.cover_image.signature};try{let r=(await en.H.updateHubFile(o,O)).data.meta;e.dispatch((0,w.Sb)({hubFiles:[r],src:"updateHubFile"})),u&&(0,l.sx)("community_category_suggestion",{resourceType:"hub_file",resourceId:r.id,categoryId:r.category_id,suggestedCategory:u},{forwardToDatadog:!0}),n?.(r)}catch(n){let r=(0,I.Jv)(n,(0,I.t)("community.actions.an_error_occurred_while_updating_please_refresh_and_try_again"));throw e.dispatch(v.s.error(r)),(0,f.$D)(i.e.COMMUNITY,n),Error(`Error updating file ${n}`)}}),eL=(0,C.nF)((e,{hubFileId:r,redirectLink:n,onSuccess:a,onError:o})=>{y.Ay.del(`/api/hub_files/${r}`).then(({data:r})=>{let n=r.meta;e.dispatch((0,w.Sb)({hubFiles:[n],src:"unpublishHubFile"}))}).then(()=>{n&&d.Ay.redirect(n),a?.()}).catch(e=>{(0,f.$D)(i.e.COMMUNITY,e),console.error(Error(`Error unpublishing file ${e}`)),o?.()})}),eO=(0,C.MM)("OPTIMISTIC_DUPLICATE_HUB_FILE",(e,{hubFileId:r,viewContext:n},{optimistId:i})=>{y.Ay.post(`/api/hub_files/v2/${r}/copy`).then(({data:a})=>{e.dispatch(D.c(i));let o=a.meta,s=(0,K.to)(o);s=(0,c.dR)(s,{[H.pt.KEY]:H.pt.VALUE}),d.Ay.redirect(s,g.rr?void 0:"_blank"),(0,l.sx)(F.M5.HUB_FILE_DUPLICATED,{hubFileId:r,figFileKey:o.key,viewContext:n,searchSessionId:(0,S.w)(e.getState())})}).catch(r=>{e.dispatch(D.r(i)),e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_duplicate",{error:(0,I.Jv)(r,r.data.message)}),type:"HUB_FILE_DUPLICATE_FAILED",error:!0}))})}),eR=$.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,A.m)({apiResourceType:"file",id:e}),e=>{e.like_count+=1}),en.H.likeHubFile({id:e})));(0,C.nF)((e,{hubFileId:r},{loadingKey:n})=>{let i=(0,_.Jl)(eR)({id:r});(0,z.N)(i,e,n),i.catch(r=>{e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_like_this_file_error",{error:(0,I.Jv)(r,r.data?.message)}),type:"HUB_FILE_LIKE_FAILED",error:!0}))});let a=e.getState().user,o=a&&(0,B.sD)(a,e.getState().authedProfilesById);a?.id&&o&&(0,h.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${o.id}`]:{pluginId:null,hubFileId:r,profileId:o.id,resourceId:null,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},i)},e=>`LIKE_HUB_FILE_${e}`);let eP=$.M4.Mutation(({id:e},{query:r})=>(r.mutate((0,A.m)({apiResourceType:"file",id:e}),e=>{e.like_count-=1}),en.H.unlikeHubFile({id:e})));(0,C.nF)((e,{hubFileId:r,likeId:n},{loadingKey:i})=>{let a=(0,_.Jl)(eP)({id:r});(0,z.N)(a,e,i),a.catch(r=>{e.dispatch(T.F.enqueue({message:(0,I.t)("community.actions.unable_to_unlike_this_file_error",{error:(0,I.Jv)(r,r.data.message)}),type:"HUB_FILE_UNLIKE_FAILED",error:!0}))}),e.getState().user?.id&&n&&(0,h.WB)().optimisticallyDelete({CommunityHubLike:{[n]:null}},a)},e=>`UNLIKE_HUB_FILE_${e}`),(0,C.nF)((e,{hubFileId:r})=>y.Ay.post(`/api/hub_files/${r}/view`,{hubFileId:r}));let eD={};(0,C.nF)(async(e,{hubFileId:r})=>{let n=e.getState(),i=n.user?.id;i&&((0,l.sx)(F.M5.SLIDE_TEMPLATE_USED,{hubFileId:r}),eD[i]?.includes(r)||await et.C.updateSlideTemplateCommunityUsageCount({hubFileId:r}).then(()=>{eD[i]||(eD[i]=[]),eD[i].includes(r)||eD[i].push(r)}).catch(e=>{(0,E.x1)("Error updating Community Slide Template usage count",e,{hubFileId:r},{reportAsSentryError:!0})}))}),(0,C.nF)((e,r)=>{(r===Q.G4.FULLSCREEN||r===Q.G4.FULLSCREEN_WITH_COMMENTS)&&((0,l.sx)("Context Viewed",{name:"hub-file-canvas-enter-fullscreen"}),r===Q.G4.FULLSCREEN_WITH_COMMENTS&&(0,l.sx)("CTA Clicked",{name:"community_hub_preview_comments_viewed"}));let n={...e.getState().selectedView,fullscreenState:r};r===Q.G4.FULLSCREEN&&n.commentThreadId&&delete n.commentThreadId,e.dispatch(O.$T(n))})},71425:(e,r,n)=>{n.d(r,{JZ:()=>b,QF:()=>v,qR:()=>I});var i=n(776250),a=n(939863),o=n(392592),s=n(980820),l=n(164185),c=n(986270),d=n(441088),u=n(4564),m=n(215822),p=n(555328),h=n(809073),_=n(707033),g=n(867795),f=n(76158),E=n(74021);let y=(0,u.M)(),b=(0,s.nF)(async(e,{resourceType:r,localFileIdToRemove:n})=>{let s=null;if(!y)return;let{added:u,existed:E}=await y.createMultipleNewLocalFileExtensions({title:(0,a.t)("community.actions.pick_extension_manifest_file"),filters:[{name:"Manifests",extensions:["json"]}],properties:["openFile"]},0);if(null!=(s=u&&u[0]||E&&E[0]))try{let u=await (0,m.c2)(s,{resourceType:r,isPublishing:!1});if("unknown"===r&&(r=u.containsWidget?"widget":"plugin"),(0,i.sx)("Added new plugin",{how:"loaded",pluginId:u.id,version:u.api,isWidget:"widget"===r,productType:"figma"===(0,m.T)()?"design":"whiteboard",isVsCode:(0,d.T)()}),e.dispatch(v({localFileId:s,resourceType:r})),e.dispatch(o.F.enqueue({message:u.name?(0,a.t)("community.actions.manifest_name_has_been_imported",{manifestName:u.name}):"widget"===r?(0,a.t)("community.actions.widget_has_been_imported"):(0,a.t)("community.actions.plugin_has_been_imported")})),(0,l.s)({initialX:0,initialY:0,initialTab:"figjam"===(0,m.T)()?"widget"===r?g.p.WIDGETS:g.p.PLUGINS:void 0,initialFdResourceTab:"figma"===(0,m.T)()?"widget"===r?f.s.WIDGET:f.s.PLUGIN:void 0,initialFdView:"figma"===(0,m.T)()?"development":void 0,scrollDevelopmentSectionIntoView:"figjam"===(0,m.T)(),source:"extension-import"}),n){let r=e.getState().localPlugins[n],i=r?.lastKnownPluginId??r.plugin_id??r.manifest.id;i!==u.id&&i||e.dispatch(I(n))}let E=u.editorType;E?.forEach(n=>{let i="figjam"===n?h.$A.FigJam:h.$A.Design;r===p.bD.PLUGIN?e.dispatch(c.gU({storeInRecentsKey:i,id:u.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()})):r===p.bD.WIDGET&&e.dispatch(c.RH({storeInRecentsKey:i,id:u.id||"",version:"",isDevelopment:!0,currentUserId:_.o8()}))})}catch(r){e.dispatch(o.F.enqueue({message:r.message,error:!0}))}}),v=(0,s.nF)(async(e,{localFileId:r,resourceType:n})=>{let i=await (0,m.t3)(r,{resourceType:n});e.dispatch((0,E.Po)(i))}),I=(0,s.nF)((e,r)=>{void 0!=r&&(y&&y.removeLocalFileExtension(r),e.dispatch((0,E.Zy)(r)))})},853799:(e,r,n)=>{n.d(r,{C:()=>m});var i=n(456772),a=n(27087),o=n(939863),s=n(392592),l=n(980820),c=n(697551),d=n(320741),u=n(555328);let m=(0,l.nF)((e,{id:r,resourceType:n},{loadingKey:l})=>{let m=a.Ay.post(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(m,e,l),m.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_like_this_plugin_error",{error:(0,o.Jv)(r,r.data.message)}):(0,o.t)("community.actions.unable_to_like_this_widget_error",{error:(0,o.Jv)(r,r.data.message)}),type:`${n.toUpperCase()}_LIKE_FAILED`,error:!0}))});let p=e.getState().user,h=p&&(0,c.sD)(p,e.getState().authedProfilesById);p?.id&&h&&(0,i.WB)().optimisticallyCreate({CommunityHubLike:{[`optimistic-${r}-${h.id}`]:{pluginId:r,hubFileId:null,resourceId:null,profileId:h.id,hiddenAt:null,createdAt:new Date,updatedAt:new Date,canRead:!0}}},m)},({id:e})=>`LIKE_RESOURCE_${e}`);(0,l.nF)((e,{id:r,resourceType:n,likeId:l},{loadingKey:m})=>{let p=a.Ay.del(`/api/${(0,c.n)(n)}/${r}/like`,{orgId:e.getState().currentUserOrgId});(0,d.N)(p,e,m),p.catch(r=>{e.dispatch(s.F.enqueue({message:n===u.vt.PLUGIN?(0,o.t)("community.actions.unable_to_unlike_this_plugin_error",{error:r.data.message}):(0,o.t)("community.actions.unable_to_unlike_this_widget_error",{error:r.data.message}),type:`${n.toUpperCase()}_UNLIKE_FAILED`,error:!0}))}),e.getState().user?.id&&l&&(0,i.WB)().optimisticallyDelete({CommunityHubLike:{[l]:null}},p)})},74021:(e,r,n)=>{n.d(r,{Ob:()=>y,Po:()=>b,Zy:()=>v});var i=n(838516),a=n(167249),o=n(881388),s=n(980820),l=n(113237),c=n(4564),d=n(428467),u=n(215822),m=n(384792),p=n(262151),h=n(561004),_=n(376485),g=n(249436),f=n(951982),E=n(941381);let y=(0,a.N)("PLUGIN_INITIALIZE_LOCAL"),b=(0,a.N)("PLUGIN_UPDATE_LOCAL"),v=(0,a.N)("PLUGIN_DELETE_LOCAL"),I=!1,T=(0,c.M)();(0,s.nF)(async e=>{if(T){if(T.isCompatibleWith({desktopVersion:59})){let r=await T.getLocalManifestFileExtensionIdsToCachedMetadataMap()??{},n=Object.keys(r).map(e=>parseInt(e)),i=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};i.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId].cachedContainsWidget,e.lastKnownPluginId=r[e.localFileId].lastKnownPluginId||"",a[e.localFileId]=e}),e.dispatch(y(a))}else if(T.isCompatibleWith({desktopVersion:58})){let r=await T.getLocalManifestFileExtensionIdsToCachedContainsWidgetMap(),n=Object.keys(r).map(e=>parseInt(e)),i=await Promise.all(n.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),a={};i.forEach(e=>{e.cachedContainsWidget=!!r[e.localFileId],a[e.localFileId]=e}),e.dispatch(y(a))}else{let r=await T.getAllLocalFileExtensionIds(),n=await Promise.all(r.map(e=>(0,u.t3)(e,{resourceType:"unknown"}))),i={};n.forEach(e=>{i[e.localFileId]=e}),e.dispatch(y(i))}if(!I){I=!0,T.registerManifestChangeObserver(r=>{if("added"===r.type||"changed"===r.type){let n;let i=r.id,a=(0,u.mm)(i,r.localLoadResult,{resourceType:"unknown"}),s=e.getState().localPlugins[i]?.plugin_id;e.dispatch(b(a));let l=e.getState(),{publishingPlugins:c,localPlugins:m,publishedPlugins:p,publishedWidgets:h,currentUserOrgId:_,authedProfilesById:g,modalShown:y}=l,v=c[i];a.plugin_id!==s&&y?.type!==f.o.type&&e.dispatch((0,E.Ij)({id:i}));try{n=(0,u.mI)({...(0,d.getPermissionsState)(l),currentUserOrgId:_,localPlugins:m,publishedPlugins:p,publishedWidgets:h,authedProfilesById:g},i)}catch(r){e.dispatch(o.s.error(r.message));return}v&&v.metadata&&(0,u.L1)(v.metadata)&&!a.error&&e.dispatch((0,E.fy)({id:i,metadata:n}))}else"removed"===r.type&&e.dispatch(v(r.id))});let r=(0,i.s)(r=>{if("added"===r.type||"changed"===r.type){let n=e.getState().mirror?.selectionProperties?.selectedWidgetInfo;n&&n.pluginID&&l.x.mountWidget(n.pluginID,n.widgetID,"hot-reloading re-render");let i=m.SH()?.plugin,a=m.SH()?.triggeredFrom,o=e.getState();"manifestFileId"in r&&i&&(0,_.ZQ)(i)&&o.mirror.appModel.hotReloadPluginDev&&r.manifestFileId===i.localFileId&&(0,p.hM)()&&(async()=>{await (0,h.wY)(),"codegen"!==a&&(0,p.A9)({newTriggeredFrom:null}),(0,g.c)()})()}});T.registerCodeChangeObserver(r),T.registerManifestChangeObserver(r),T.registerUiChangeObserver(r)}}})},941381:(e,r,n)=>{n.d(r,{$Z:()=>W,Cf:()=>j,Dl:()=>ei,GV:()=>g.GV,Ij:()=>er,KJ:()=>Q,L4:()=>F,LP:()=>q,O8:()=>z,Qi:()=>g.Qi,R8:()=>es,Vp:()=>ea,Vx:()=>g.Vx,W9:()=>$,a8:()=>Z,b6:()=>V,et:()=>el,f1:()=>Y,fd:()=>B,fs:()=>H,fy:()=>ee,gD:()=>et,l5:()=>g.l5,l7:()=>g.l7,pm:()=>en,se:()=>U,uF:()=>x,uV:()=>g.uV,uX:()=>G,uw:()=>K,wx:()=>ec,zn:()=>eo});var i=n(268853),a=n(167249),o=n(776250),s=n(38329),l=n(966712),c=n(717037),d=n(776621),u=n(27087),m=n(881388),p=n(939863),h=n(392592),_=n(837324),g=n(84336),f=n(545941),E=n(980820),y=n(63397),b=n(651705),v=n(182976),I=n(506513),T=n(782501),S=n(540019),w=n(428467),A=n(272794),C=n(215822),N=n(320741),L=n(555328),O=n(813408),R=n(646624),P=n(93623),D=n(492330),k=n(825413),M=n(56714);let F=(0,a.N)("PLUGIN_REPLACE_FEATURED"),x=(0,E.nF)((e,r,{loadingKey:n})=>{if(!e.getState().user)return;let i=P.V.getPlugins(),a=D.U.getWidgets();i.then(({data:r})=>{let n=r.meta;e.dispatch((0,g.Qi)({publishedPlugins:n,src:"initializeUserPublishedPlugins"}))}),a.then(({data:r})=>{let n=r.meta;e.dispatch((0,g.Qi)({publishedPlugins:n,src:"initializeUserPublishedWidgets"}))}),(0,N.N)(a,e,n)}),U=S.M4.Query({fetch:async e=>(await P.V.getUnpublishedPlugins()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),B=S.M4.Query({fetch:async e=>(await D.U.getUnpublishedWidgets()).data.meta,output:({data:e})=>{let r={};if(e)for(let n of e)r[n.id]=n;return r}}),V=(0,E.nF)((e,{widgetIDToVersions:r})=>{let{publishedCanvasWidgetVersions:n,currentUserOrgId:i}=e.getState();for(let[e,a]of Object.entries(r))a.forEach(a=>{let o=n[e]?.[a];o&&new Set(r[e]).forEach(e=>{A.F.getAndCache({...o,id:e},i??void 0)})})}),G=(0,E.nF)(async(e,{resourceId:r,resourceType:n})=>{let i=n===L.bD.WIDGET?D.U.getWidgets({id:r}):P.V.getPlugins({id:r}),{data:a}=await i,o=a.meta.find(e=>e.id===r);o&&e.dispatch((0,g.Qi)({publishedPlugins:[o],src:"getPublishedResource"}))}),H=(0,a.N)("UPDATE_PUBLISHED_CANVAS_WIDGET_VERSIONS"),K=(0,a.N)("UPDATE_FETCHED_CANVAS_WIDGET_VERSIONS");async function W(e,r,n){let i=await $({[e]:[r]},n);return i[e]?.[r]}async function $(e,r){let n=s.D.getState(),i=n.openFile?.key,a=await u.Ay.post("/api/widgets/v2/versions",{ids_to_versions:e,org_id:r,file_key:i}),o=a?.data?.meta||{};return s.D.dispatch(H(o)),s.D.dispatch(K(Object.fromEntries(Object.entries(e).map(([e,r])=>[e,Object.fromEntries(r.map(e=>[e,!0]))])))),o}let Y=(0,E.nF)(async(e,{pluginIds:r})=>{let{currentUserOrgId:n,publishedPlugins:i}=e.getState(),a=r.filter(e=>!i[e]);if(a.length)try{let e=await P.V.postPluginsBatch(a,n),r=e.data?.meta??[];s.D.dispatch((0,g.Qi)({publishedPlugins:r,src:"fetchPublishedPlugins",overrideInstallStatus:!0}))}catch{return}}),z=(0,E.nF)(async(e,{widgetIds:r})=>{let{currentUserOrgId:n,publishedWidgets:i}=e.getState(),a=r.filter(e=>!i[e]);if(a.length)try{let e=await u.Ay.post("/api/widgets/batch",{ids:a,org_id:n}),r=e.data?.meta??[];s.D.dispatch((0,g.Qi)({publishedPlugins:r,src:"fetchPublishedWidgets",overrideInstallStatus:!0}))}catch{return}}),j=(0,E.nF)(async(e,{widgetIDAndVersions:r})=>{let{currentUserOrgId:n}=e.getState(),i=[],a={};r.forEach(({widgetID:e,widgetVersionID:r})=>{a[e]?a[e].includes(r)||a[e].push(r):(i.push(e),a[e]=[r])}),0!==i.length&&(await $(a,n),e.dispatch(V({widgetIDToVersions:a})),e.dispatch(z({widgetIds:Object.keys(a)})))});(0,E.nF)((e,r,{loadingKey:n})=>{let i=P.V.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),a=(0,M.UM)(r.profileId);return(0,N.N)(i,e,n),i.then(async({data:r})=>{let n=[...await a,...r.meta];return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getCommunityProfilePlugins"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_PLUGINS_${e}`),(0,E.nF)((e,r,{loadingKey:n})=>{let i=D.U.getProfile({profileId:r.profileId,currentOrgId:e.getState().currentUserOrgId||void 0}),a=(0,M.Jr)(r.profileId);return(0,N.N)(i,e,n),i.then(async({data:r})=>{let n=[...await a,...r.meta];return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getCommunityProfileWidgets"})),n})},({profileId:e})=>`GET_COMMUNITY_PROFILE_WIDGETS_${e}`);let q=(0,E.nF)((e,r,{loadingKey:n})=>{let i=P.V.getOrg({orgId:r});return(0,N.N)(i,e,n),i.then(({data:r})=>{let n=r.meta;return e.dispatch((0,g.Qi)({publishedPlugins:n,src:"getOrgPublishedPlugins"})),n})},e=>`GET_ORG_PUBLISHED_PLUGINS_${e}`),Z=(0,E.nF)(async(e,r,{loadingKey:n})=>{try{e.dispatch(v.Cx({key:n}));let i=await D.U.getOrg({orgId:r}),a=i?.data?.meta||[];return e.dispatch((0,g.Qi)({publishedPlugins:a,src:"getOrgPublishedWidgets"})),e.dispatch(v.x2({key:n})),a}catch(r){return m.s.flash(r.message||(0,p.t)("community.actions.an_error_occurred_while_trying_to_fetch_the_org_widgets_list")),e.dispatch(v.of({key:n})),[]}},e=>`GET_ORG_PUBLISHED_WIDGETS_${e}`);async function X(e,r,n){if(null===e.current_plugin_version_id||!e.id)throw Error((0,p.t)("community.actions.resource_is_invalid"));let a=0;r.iconBlob&&(a=(0,C.wf)(r.iconBlob));let s=0;r.coverBlob&&(s=(0,C.oD)(r.coverBlob));let l=r.carouselMedia,{uploadImages:c,uploadVideos:m,allMedia:h}=(0,T.Kg)(l),g=await R.w.postPluginImagesUpload(e.id,e.is_widget,c),f=Promise.resolve(!1),E=r.iconBlob;void 0!==E&&(f=(0,I.c)(E).then(e=>(0,T.Ac)(g.iconUploadUrl,E,e)).then(()=>!0).catch(r=>{(0,d.$D)(i.e.COMMUNITY,r);let n=(0,p.Jv)(r,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error((0,L.xQ)(e)?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:n}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:n}))}));let y=Promise.resolve(!1),b=r.coverBlob;void 0!==b&&(y=(0,I.c)(b).then(e=>(0,T.Ac)(g.coverImageUploadUrl,b,e)).then(()=>!0).catch(r=>{throw(0,d.$D)(i.e.COMMUNITY,r),Error((0,L.xQ)(e)?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:(0,p.Jv)(r,r.data?.message||"unknown error")}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:(0,p.Jv)(r,r.data?.message||"unknown error")}))}));let{snapshotBlob:v}=r,S=Promise.resolve(!1);void 0!==v&&(S=(0,I.c)(v).then(e=>{if(!g.snapshotUploadUrl)throw Error("Snapshot upload url is missing");return(0,T.Ac)(g.snapshotUploadUrl,v,e)}).then(()=>!0).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}));let w=(0,T.Rd)(g.carouselImages,l),[A,N,O]=await Promise.all([f,y,S,...w]),P=m.map(r=>(0,T.Gf)((0,_.KH)(e,{pluralized:!0}),e.id,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1).then(e=>{h.push({carousel_position:r.carousel_position,sha1:e.sha1,video_file_uuid:e.videoFileUuid,video_thumbnail_sha1:e.videoThumbnailSha1})}).then(()=>!0).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}));await Promise.all(P);let{data:D}=await u.Ay.put(`/api/${(0,_.KH)(e,{pluralized:!0})}/${e.id}/versions/${r.id}`,{icon_uploaded:A,cover_image_uploaded:N,snapshot_uploaded:O,carousel_media:h,name:r.name,description:r.description,tagline:r.tagline,creator_policy:r.creatorPolicy,release_notes:r.releaseNotes,comments_setting:e.comments_setting,category_id:e.category_id,image_upload_nonce:g.imageUploadNonce,playground_fig_file_key:r.playground_fig_file_key,playground_file_publish_type:n}).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}),k=D.meta,M=k.plugin;if(M.id!==e.id)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Update Version",{pluginId:e.id,isWidget:e.is_widget,iconFileSize:a,coverFileSize:s}),{publishedPlugin:M,profile:k.profile}}async function J(e,r,n,a,s,c,m,h,g,f){let E;if(!e)throw Error((0,p.t)("community.actions.plugin_id_is_invalid"));let[y,b]=await Promise.all([(0,C.c2)(r,{resourceType:(0,_.nF)(g),isPublishing:!0}),(0,C.MB)(r)]),v=(0,C.ZT)(b),S=0;n.iconBlob&&(S=(0,C.wf)(n.iconBlob));let w=0;n.coverBlob&&(w=(0,C.oD)(n.coverBlob));let A=c.tokens.map(e=>e.content),N=n.carouselMedia,{uploadImages:L,uploadVideos:O,allMedia:P}=(0,T.Kg)(N),D={manifest:y,release_notes:n.releaseNotes,name:n.name,description:n.description,tagline:n.tagline,creator_policy:n.creatorPolicy,tags:A,category_id:s,images_sha1:L};try{E=await R.w.postPluginUpload(D,e,g)}catch(e){throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server")))}let{codeUploadUrl:k,iconUploadUrl:M,coverImageUploadUrl:F,snapshotUploadUrl:x,signature:U,versionId:B,imageUploadNonce:V,carouselImages:G}=E,H=e=>{let r=e.data;if(!r||"string"!=typeof r)return;let n=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Code");if(n&&n[0]&&"EntityTooLarge"===n[0].textContent)return(0,p.t)("community.actions.file_too_large")},K=Promise.resolve(!1);b&&(K=(e=>{let{fields:r,codePath:n,signedCloudfrontUrl:i}=e,a=new FormData;return(Object.entries(r).forEach(([e,r])=>a.append(e,r)),a.set("Content-Type","text/javascript"),a.append("file",b),i&&(0,l.kc)().ext_s3_url_use_figma_domains)?u.Ay.crossOriginPut(i,b,{raw:!0,headers:{"Content-Type":"text/javascript","Cache-Control":"private, max-age=86400","x-amz-acl":"bucket-owner-full-control"}}):u.Ay.crossOriginPost(n,a,{raw:!0,headers:{"Content-Type":"multipart/form-data","Cache-Control":"private, max-age=86400"}})})(k).then(()=>!0).catch(e=>{(0,d.$D)(i.e.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error(g?(0,p.t)("community.actions.error_uploading_widget_code_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_code_error",{error:r}))}));let W=Promise.resolve(!1),$=n.iconBlob;null!=$&&(W=(0,I.c)($).then(e=>(0,T.Ac)(M,$,e)).then(()=>!0).catch(e=>{(0,d.$D)(i.e.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,e.data?.message||"unknown error");throw Error(g?(0,p.t)("community.actions.error_uploading_widget_icon_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_icon_error",{error:r}))}));let Y=Promise.resolve(!1),z=n.coverBlob;null!=z&&(Y=(0,I.c)(z).then(e=>(0,T.Ac)(F,z,e)).then(()=>!0).catch(e=>{(0,d.$D)(i.e.COMMUNITY,e);let r=H(e)??(0,p.Jv)(e,(0,p.t)("community.actions.could_not_connect_to_the_server"));throw Error(g?(0,p.t)("community.actions.error_uploading_widget_artwork_image_error",{error:r}):(0,p.t)("community.actions.error_uploading_plugin_artwork_image_error",{error:r}))}));let{snapshotBlob:j}=n,q=Promise.resolve(!1);null!=j&&x&&(q=(0,I.c)(j).then(e=>(0,T.Ac)(x,j,e)).then(()=>!0).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_widget_snapshot_image_error",{error:H(e)??(0,p.Jv)(e,e.data?.message||"unknown error")}))}));let Z=(0,T.Rd)(G,N),[X,J,Q,ee]=await Promise.all([K,W,Y,q,...Z]),et=O.map(async r=>{try{let n=await (0,T.Gf)(g?"widgets":"plugins",e,{sha1:r.sha1,bytes:r.bytes},r.video_thumbnail_buffer,r.video_thumbnail_sha1);return P.push({carousel_position:r.carousel_position,sha1:n.sha1,video_file_uuid:n.videoFileUuid,video_thumbnail_sha1:n.videoThumbnailSha1}),!0}catch(e){throw(0,d.$D)(i.e.COMMUNITY,e),Error((0,p.t)("community.actions.error_uploading_plugin_video_error",{error:(0,p.Jv)(e,e.data?.message||"unknown error")}))}});await Promise.all(et);let{data:er}=await u.Ay.put(`/api/${(0,_.nF)(!!g,{pluralized:!0})}/${e}/versions/${B}`,{icon_uploaded:J,cover_image_uploaded:Q,snapshot_uploaded:ee,carousel_media:P,code_uploaded:X,comments_setting:a,category_id:s,signature:U,image_upload_nonce:V,agreed_to_tos:m,org_id:h,playground_fig_file_key:n.playground_fig_file_key,playground_file_publish_type:f}).catch(e=>{throw(0,d.$D)(i.e.COMMUNITY,e),Error(g?(0,p.t)("community.actions.error_finalizing_widget_error",{error:(0,p.Jv)(e,e.data?.message||"")}):(0,p.t)("community.actions.error_finalizing_plugin_error",{error:(0,p.Jv)(e,e.data?.message||"")}))}),en=er.meta,ei=en.plugin;if(ei.id!==e)throw Error((0,p.t)("community.actions.the_published_resource_i_ds_do_not_match"));return(0,o.sx)("Hub Plugin Publish Version",{pluginId:e,hasUI:!!y.ui,apiVersion:y.api,codeLength:v,iconFileSize:S,coverFileSize:w,isWidget:g,editorType:y.editorType?.sort().join(", ")}),{publishedPlugin:ei,profile:en.profile}}let Q=(0,y.d6)("PLUGIN"),{updateMetadata:ee,updateStatus:et,clearMetadataAndStatus:er,clearMetadata:en}=Q,ei=(0,E.nF)(async(e,r)=>{let{pluginVersion:n,localFileId:a,pluginId:o,commentsSetting:s,categoryId:l,callback:u,agreedToTos:m,orgId:_,isWidget:f,playgroundFilePublishType:E,tags:y}=r;e.dispatch(et({id:a,status:{code:O.aP.UPLOADING}}));try{let{publishedPlugin:r,profile:i}=await J(o,a,n,s,l,y,m,_,f,E);e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"publishPluginVersion"})),i&&(e.dispatch(b.HZ(i)),e.dispatch(b.Oo(i))),e.dispatch(et({id:a,status:{code:O.aP.SUCCESS}})),e.dispatch(en({id:a})),u()}catch(n){e.dispatch(et({id:a,status:{code:O.aP.FAILURE,error:n.message}}));let r=(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.Jv)(n,n.message)});throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):n.message.includes("invalid word")||e.dispatch(h.F.enqueue({message:r,error:!0})),(0,d.$D)(i.e.COMMUNITY,n),Error(r)}}),ea=(0,E.nF)(async(e,r)=>{let{resource:n,pluginVersion:a,callback:o,playgroundFilePublishType:s,localFileIdOrPluginId:l}=r;try{e.dispatch(et({id:l,status:{code:O.aP.UPLOADING}}));let{profile:r,publishedPlugin:i}=await X(n,a,s);e.dispatch((0,g.Qi)({publishedPlugins:[i],src:"updatePublishedPluginRole"})),r&&e.dispatch(b.Oo(r)),e.dispatch(et({id:l,status:{code:O.aP.SUCCESS}})),o()}catch(n){let r=(0,p.Jv)(n,n.message);throw n instanceof c.qW?(0,k.MZ)(e.dispatch,(0,p.t)("check_network_compatibility.error_bell.video_upload.message")):e.dispatch(h.F.enqueue({message:r,error:!0})),e.dispatch(et({id:l,status:{code:O.aP.FAILURE,error:r}})),(0,d.$D)(i.e.COMMUNITY,n),Error(`Failed plugin patchVersion: ${n.message}`)}}),eo=(0,E.nF)(async(e,{pluginId:r,role:n,agreedToTos:a,isWidget:s})=>{let l;let c={org_id:n.org?n.org.id:void 0,is_public:n.is_public,agreed_to_tos:a};l=s?u.Ay.put(`/api/widgets/${r}/roles`,c):u.Ay.put(`/api/plugins/${r}/roles`,c),await l.then(({data:n})=>{let i=n.meta;(0,o.sx)("Hub Plugin Publish Role",{pluginId:r,toPublic:i.roles.is_public,toOrg:!!i.roles.org,needApproval:(0,f.AC)(i),isWidget:s}),e.dispatch((0,g.Qi)({publishedPlugins:[i],src:"updatePublishedPluginRole"}))}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(i.e.COMMUNITY,r)})}),es=(0,E.nF)(async(e,r)=>{let n;if(r.authorOrgId&&r.authorTeamId){console.error("Attempting to set both authorOrgId and authorTeamId while publishing");return}let{isWidget:a,pluginId:o}=r,s={tags:r.tags,support_contact:r.supportContact,author_org_id:r.authorOrgId,author_team_id:r.authorTeamId,publisher_ids:r.publisherIds,hide_related_content_by_others:r.hideRelatedContentByOthers,agreed_to_tos:r.agreedToTos,is_paid:r.isPaid,is_subscription:r.isSubscription,price:r.price,has_freemium_code:r.hasFreemiumCode,category_id:r.categoryId,is_public:r.isPublic,annual_discount_percentage:r.annualDiscount,is_annual_discount_active:r.isAnnualDiscountActive};n=a?u.Ay.put(`/api/widgets/${o}`,s):u.Ay.put(`/api/plugins/${o}`,s),await n.then(({data:n})=>{let i=n.meta;e.dispatch((0,g.Qi)({publishedPlugins:[i],src:"updatePublishedPlugin"})),r.onSuccess?.()}).catch(r=>{e.dispatch(h.F.enqueue({message:(0,p.t)("community.publishing.could_not_publish_plugin_error",{error:(0,p.Jv)(r,r.data?.message)}),error:!0})),(0,d.$D)(i.e.COMMUNITY,r)})}),el=(0,E.nF)((e,{resource:r})=>{u.Ay.del(`/api/${(0,_.KH)(r,{pluralized:!0})}/${r.id}`).then(({data:n})=>{let i=n.meta;e.dispatch((0,g.Qi)({publishedPlugins:[i],src:"unpublishPublishedPlugin"})),(0,o.sx)("Hub Unpublish Plugin",{pluginId:r.id,...(0,C.L8)(r)})}).catch(n=>{e.dispatch(h.F.enqueue({message:(0,L.xQ)(r)?(0,p.t)("community.actions.could_not_publish_widget_error",{error:(0,p.Jv)(n,n.data?.message)}):(0,p.t)("community.actions.could_not_publish_plugin_error",{error:(0,p.Jv)(n,n.data?.message)}),error:!0})),(0,d.$D)(i.e.COMMUNITY,n)})});(0,E.nF)((e,{id:r,resourceType:n},{loadingKey:i})=>{let a=r=>e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"getResourceVersions",overrideInstallStatus:!0})),o=n===L.bD.WIDGET?D.U.getVersions({widgetId:r}):P.V.getVersions({pluginId:r});(0,N.N)(o,e,i),o.then(({data:e})=>{a(e.meta.plugin)}).catch(e=>{console.log(`Versions of ${n} with id ${r} cannot be fetched at this time:`,e.data?.message)})},({id:e})=>`GET_PLUGIN_VERSIONS_${e}`);let ec=(0,E.nF)(async(e,r)=>{let{role:n,userId:a,resource:o}=r;try{let r=(o.is_widget?await u.Ay.put(`/api/widgets/${o.id}/publishers/${a}`,{role:n}):await u.Ay.put(`/api/plugins/${o.id}/publishers/${a}`,{role:n})).data.meta.plugin,i=e.getState().user;n===O.kM.NONE&&a===i?.id&&(r.plugin_publishers={accepted:[],pending:[]}),e.dispatch((0,g.Qi)({publishedPlugins:[r],src:"setPluginPublisherRole"}));let s=e.getState(),{publishingPlugins:l,localPlugins:c,publishedPlugins:d,publishedWidgets:m,currentUserOrgId:p,authedProfilesById:h}=s,_=Object.values(c).find(e=>e.plugin_id===o.id),f=_?.localFileId??o.id,E=(0,C.mI)({...(0,w.getPermissionsState)(s),currentUserOrgId:p,localPlugins:c,publishedPlugins:d,publishedWidgets:m,authedProfilesById:h},_?.localFileId),y={...l[f].metadata,author:E.author,publishers:E.publishers,creators:E.creators,blockPublishingOnToS:E.blockPublishingOnToS};e.dispatch(ee({id:f,metadata:y}))}catch(r){throw e.dispatch(h.F.enqueue({message:(0,p.Jv)(r,r.message),error:!0})),(0,d.$D)(i.e.COMMUNITY,r),Error(r.message)}})},727749:(e,r,n)=>{n.d(r,{d6:()=>T,g3:()=>v,oj:()=>C,s1:()=>S,uR:()=>I});var i=n(167249),a=n(776250),o=n(456772),s=n(743282),l=n(27087),c=n(939863),d=n(392592),u=n(980820),m=n(941381),p=n(404717),h=n(107877),_=n(756085),g=n(697551),f=n(555328),E=n(93623),y=n(492330),b=n(479296);let v=(0,i.N)("SET_SAVED_PLUGIN_VERSIONS");(0,u.nF)((e,r)=>{let n={};Object.keys(r).forEach(e=>{n[e]=[r[e].id]}),e.dispatch(m.b6({widgetIDToVersions:n}))});var I=(e=>(e.COMMUNITY_HUB="community_hub",e.INSERTS_MODAL="inserts_modal",e))(I||{});let T=(0,b.n)((0,u.MM)("SAVE_EXTENSION",(e,{id:r,resourceType:n,versionId:i,orgId:u,onSuccess:E,hideSuccessVisualBell:y,onFail:b,source:v,optimisticData:I},{optimistId:T})=>{let S=e.getState(),w={plugin_version_id:i,org_id:u,current_org_id:S.currentUserOrgId};w.can_handle_first_time_install=!0,w.use_upgraded_version=!0,w.profile_id=e.getState().authedActiveCommunityProfile?.id,n===f.vt.WIDGET&&(w.current_org_id=void 0);let A=`/api/${(0,g.n)(n)}/${r}/install`,C=l.Ay.post(A,w);if(S.user&&I?.resource){let e=`optimistic-plugin-install-${(0,s.g)()}`,r=(0,_.N3)(I.resource,{userId:u?null:S.user.id,orgId:u??null});r&&(0,o.WB)().optimisticallyCreate({PluginInstall:{[e]:r}},C)}C.then(({data:r})=>{e.dispatch(p.c(T));let i=r.meta,o=n===f.vt.WIDGET?{publishedPlugins:[i],src:"installResource",isWidget:!0}:{publishedPlugins:[i],src:"installResource"};if(e.dispatch(m.Qi({...o,overrideInstallStatus:!0})),E?.(),!y){let r=(()=>{if("inserts_modal"===v)return n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_saved"):(0,c.t)("community.saves.widget_saved");if(u){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===u);return(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_saved_for_everyone_at":"community.saves.widget_saved_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_saved_for_your_account_and_profile":"community.saves.widget_saved_for_your_account_and_profile"):n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_saved_for_your_account"):(0,c.t)("community.saves.widget_saved_for_your_account")})();e.dispatch(d.F.enqueue({message:r,type:"plugin-installed"}))}(0,a.sx)((0,f.xQ)(i)?h.M5.WIDGET_INSTALLED:h.M5.PLUGIN_INSTALLED,{communityHubEntity:(0,f.xQ)(i)?h.ZO.WIDGETS:h.ZO.PLUGINS,communityHubEntityId:i.id,source:v})}).catch(r=>{b?.(),e.dispatch(p.r(T)),403===r.data.status?e.dispatch(d.F.enqueue({message:n===f.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_error",{error:(0,c.Jv)(r,r.data?.message)}):(0,c.t)("community.actions.unable_to_save_widget_error",{error:(0,c.Jv)(r,r.data?.message)}),type:"PLUGIN_INSTALL_FAILED",error:!0})):e.dispatch(d.F.enqueue({message:n===f.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_please_try_again"):(0,c.t)("community.actions.unable_to_save_widget_please_try_again"),type:"PLUGIN_INSTALL_FAILED",error:!0}))})})),S=(0,u.MM)("UNSAVE_EXTENSION",(e,{id:r,resourceType:n,orgId:i,hideSuccessVisualBell:s,source:u,optimisticData:_},{optimistId:E})=>{let y={org_id:i,current_org_id:e.getState().currentUserOrgId};y.use_upgraded_version=!0,y.profile_id=e.getState().authedActiveCommunityProfile?.id,n===f.vt.WIDGET&&(y.current_org_id=void 0);let b=`/api/${(0,g.n)(n)}/${r}/install`,v=l.Ay.del(b,y);_?.pluginInstallId&&(0,o.WB)().optimisticallyDelete({PluginInstall:{[_.pluginInstallId]:null}},v),v.then(({data:o})=>{let l=o.meta,_=n===f.vt.WIDGET?{publishedPlugins:[l],src:"uninstallResource",isWidget:!0}:{publishedPlugins:[l],src:"uninstallResource"};if(e.dispatch(m.Qi({..._,overrideInstallStatus:!0})),e.dispatch(p.c(E)),!s){let a={message:(()=>{if("inserts_modal"===u)return n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_removed_from_your_account"):(0,c.t)("community.saves.widget_removed_from_your_account");if(i){let r=Object.values(e.getState().authedProfilesById).find(e=>e.org_id===i);return(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_removed_for_everyone_at":"community.saves.widget_removed_for_everyone_at",{orgName:r?.name||"your org"})}return e.getState().user?.community_profile_id?(0,c.t)(n===f.vt.PLUGIN?"community.saves.plugin_removed_from_your_account_and_profile":"community.saves.widget_removed_from_your_account_and_profile"):n===f.vt.PLUGIN?(0,c.t)("community.saves.plugin_removed_from_your_account"):(0,c.t)("community.saves.widget_removed_from_your_account")})(),type:"PLUGIN_UNINSTALL_SUCCESS",button:{text:(0,c.t)("community.undo"),action:()=>{e.dispatch(d.F.dequeue({matchType:"PLUGIN_UNINSTALL_SUCCESS"})),e.dispatch(T({id:r,resourceType:n,orgId:i,hideSuccessVisualBell:!0,source:u}))}}};e.dispatch(d.F.enqueue(a))}(0,a.sx)((0,f.xQ)(l)?h.M5.WIDGET_UNINSTALLED:h.M5.PLUGIN_UNINSTALLED,{communityHubEntity:(0,f.xQ)(l)?h.ZO.WIDGETS:h.ZO.PLUGINS,communityHubEntityId:l.id,source:u})}).catch(r=>{e.dispatch(p.r(E)),console.error(r)})}),w={[f.bD.PLUGIN]:function(e){return E.V.getInstallStatus({orgId:e})},[f.bD.WIDGET]:function(e){return y.U.getInstallStatus({orgId:e})}},A=(0,u.nF)((e,r)=>{let n={plugin_id:r.id};r.orgId&&(n.org_id=r.orgId);let i=w[r.resourceType];i&&i(r.orgId).then(({data:e})=>{r.callback(!e.meta.previously_installed_plugin)}).catch(n=>{e.dispatch(d.F.enqueue({type:"plugin-save-error",message:r.resourceType===f.vt.PLUGIN?(0,c.t)("community.actions.unable_to_save_plugin_error",{error:(0,c.Jv)(n,n.data.message||"unknown error")}):(0,c.t)("community.actions.unable_to_save_widget_error",{error:(0,c.Jv)(n,n.data.message||"unknown error")}),error:!0}))})}),C=(0,u.nF)((e,r)=>{let{orgId:n,id:i,resourceType:a,communityProfile:o}=r;e.dispatch(A({orgId:n,id:i,resourceType:a,callback:()=>{e.dispatch(T({id:i,resourceType:a,orgId:n,communityProfile:o,source:"community_hub"}))}}))})},162895:(e,r,n)=>{n.d(r,{aI:()=>W,cx:()=>K});var i=n(268853),a=n(776250),o=n(966712),s=n(315044),l=n(563706),c=n(776621),d=n(761870),u=n(939863),m=n(392592),p=n(934533),h=n(351226),_=n(749949),g=n(291861),f=n(980820),E=n(662275),y=n(986270),b=n(697551),v=n(655215),I=n(935308),T=n(411916),S=n(750668),w=n(428467),A=n(215822),C=n(935757),N=n(555328),L=n(239671),O=n(567088),R=n(809073),P=n(379791),D=n(237870),k=n(740164),M=n(474742),F=n(372069),x=n(109226),U=n(685121);let B=()=>async e=>{let r="org-admin-team-creation";e(m.F.enqueue({message:(0,u.t)("resources_tab.create_team_modal.team_creation_loading"),type:r,icon:p.zX.SPINNER}));try{let n=(await P.G.createStarterTeam()).data.meta;return e(m.F.dequeue({matchType:r})),e(E.Lo()),n}catch(n){return e(m.F.dequeue({matchType:r})),e(E.Lo()),e(m.F.enqueue({message:(0,u.t)("general.an_error_occurred"),error:!0})),Promise.reject()}},V=(0,D.Ju)(M.Rw),G=(e,r,n)=>i=>{i(E.to({type:V,data:{confirmationTitle:(0,u.t)("resources_tab.create_team_modal.modal_title",{extensionName:e}),content:(0,u.t)("resources_tab.create_team_modal.content",{orgName:r}),confirmText:(0,u.t)("general.continue"),onConfirm:()=>{i(B()).then(n)},hideCancel:!0}}))},H=(0,f.nF)(async(e,r)=>{let{workspaces:n,plans:i}=r,a=e.getState(),{authedUsers:o,orgById:s}=a,l=n.map(e=>({...e,workspaceName:(0,T.HE)(a,e),user:o.byId[e.userId]})),c=await Promise.all(l.map(async e=>{let n=e.orgId&&s[e.orgId],o=!0,l=!0;if(n&&(o=await (0,v.hb)(r.resource,n),l=(0,v.VT)(r.resource,n)),(0,A.Rt)(r.resource)&&!(0,w.canMemberOrg)(e.orgId,a,e.userId))return;let c=(0,g.y)(e,(0,L.wN)(r.editorType),a,i);return c.publicPluginsOrWidgetDisabled=!o,c.extensionRequestsAllowed=l,c})),d=[];if(c.forEach(e=>{void 0!==e&&d.push(e)}),d.length<=1){let e=d.length?d[0]:void 0;r.onSelectWorkspace(e);return}e.dispatch(E.to({type:h._,data:{payload:{extension:r.resource,workspaces:d,onSelectWorkspace:r.onSelectWorkspace,mode:"new_file"}}}))}),K=(0,f.nF)((e,r)=>{if(l.rr){window.location.href="/login";return}let n=r.isWidget?(0,u.t)("community.logged_out.sign_up_modal_widget_header"):(0,u.t)("community.logged_out.sign_up_modal_plugin_header");e.dispatch(d.Ts({origin:"plugin_try_signed_out"})),e.dispatch(E.to({type:k.l,data:{headerText:n,icon:r.isWidget?U.A:x.A,dispatch:e.dispatch,redirectPath:r.redirectPath}}))});(0,f.nF)((e,r)=>{let n=e.getState().user,i=!!r.extension.isWidget,a=r.extension.currentPluginVersion;if(!a||!n)return;let o=a.hasPlaygroundFile,s=r.fullscreenEditorType===L.nT.DevHandoff,l={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:a.id,tryPluginName:a.name??"",isWidget:i,isPlaygroundFile:!!(o||s),fuid:n.id,tryPluginParams:void 0};(0,C.Y9)(n.id,!1,null),(0,F.j)(l,null,null,n.id),(()=>{let o={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:a.id,currentUserId:n.id};i?e.dispatch(y.RH(o)):e.dispatch(y.gU(o))})()}),(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user,a=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!i)return;let l=()=>{let n={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:o.id,currentUserId:i.id};a?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},c=o.hasPlaygroundFile,d=r.fullscreenEditorType===L.nT.DevHandoff,u={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(c||d),fuid:i.id,tryPluginParams:void 0},m=n.plans.filter(e=>e.plan_type===O.O.TEAM).map(e=>{let r=(0,s.O)(e,i.id);return{...r,workspaceName:(0,T.HE)(n,r),user:i}});if(0===m.length){e.dispatch(G(o.name,n.orgById[n.currentUserOrgId].name,e=>{(0,C.Y9)(i.id,!1,null,void 0,e.id),(0,F.j)(u,null,e.id,i.id),l()}));return}1===m.length?((0,C.Y9)(i.id,!1,null,void 0,m[0].teamId??null),(0,F.j)(u,null,m[0].teamId??null,i.id),l()):e.dispatch(E.to({type:h._,data:{payload:{workspaces:m,onSelectWorkspace:e=>{(0,C.Y9)(i.id,!1,null,void 0,e?.teamId??null),(0,F.j)(u,null,e?.teamId??null,i.id),l()},mode:"new_file"}}}))}),(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user,a=!!r.extension.isWidget,o=r.extension.currentPluginVersion;if(!o||!i)return;let s=o.hasPlaygroundFile,l=r.fullscreenEditorType===L.nT.DevHandoff,c={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.extension.id,tryPluginVersionId:o.id,tryPluginName:o.name??"",isWidget:a,isPlaygroundFile:!!(s||l),fuid:i.id,tryPluginParams:void 0},d=n.plans.find(e=>e.plan_type===O.O.ORG&&e.plan_id===n.currentUserOrgId);(0,C.Y9)(i.id,!1,d.plan_id,void 0,null),(0,F.j)(c,d.plan_id,null,i.id),(()=>{let n={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.extension.id,version:o.id,currentUserId:i.id};a?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))})()});let W=(0,f.nF)(async(e,r)=>{let n=e.getState(),{user:s,authedActiveCommunityProfile:l}=n,d=(0,_.w)(n),p=(0,N.xQ)(r.resource),h=(0,A.uF)(r.resource);if(!s){e.dispatch(K({isWidget:p}));return}let g=()=>{let n={storeInRecentsKey:r.fullscreenEditorType===L.nT.Whiteboard?R.$A.FigJam:R.$A.Design,id:r.resource.id,version:h.id,currentUserId:s.id};p?e.dispatch(y.RH(n)):e.dispatch(y.gU(n))},f=(0,b.Gg)(n).length>1,E=(0,b.cs)(l),w=!!(s?.id&&(0,T.Tt)([s.id],n)),O=[],P=null;if((0,o.kc)().ps_benchmark)try{P=await e.dispatch((0,I.nm)(!0)),O=(0,S.F)(n,r.resource,P)}catch(n){let r=n?.data?.message||(0,u.t)("file_browser.error_try_again");e.dispatch(m.F.enqueue({message:r,type:"error"}))}else O=(0,S.F)(n,r.resource,{plansByUserId:{},teams:[],orgs:[]});let D=(f||w)&&!E&&!r.fileKey;(0,o.kc)().ps_benchmark&&(D=O.length>1&&!r.fileKey);let k={fullscreenEditorType:r.fullscreenEditorType,tryPluginId:r.resource.id,tryPluginVersionId:h.id,tryPluginName:h.name,tryPluginEditorType:(0,A.iz)(h.manifest.editorType),isWidget:p,isPlaygroundFile:!!r.isPlaygroundFile,tryPluginParams:void 0,fileKey:r.fileKey};if((0,a.sx)("CTA Clicked",{name:"Try it out",pluginId:r.resource.id,isWidget:p,editorType:r.fullscreenEditorType,isMonetized:(0,N.m3)(r.resource),fileKey:r.fileKey,searchSessionId:d}),D)(0,a.sx)("try_it_out_drafts_picker_menu_opened",{pluginId:r.resource.id,isWidget:p,searchSessionId:d}),e.dispatch(H({plans:P,workspaces:O,resource:r.resource,editorType:(0,L.oD)(r.fullscreenEditorType),onSelectWorkspace:e=>{e?(k.fuid=e.userId,(0,C.Y9)(e.userId,!1,e.orgId,void 0,e.teamId??null),(0,F.j)(k,e.orgId,e.teamId??null,e.userId)):(0,F.j)(k,null,null,s.id),g()}}));else{if((0,o.kc)().ps_benchmark){if(r.fileKey)k.fuid=r.userId??s.id,(0,F.j)(k,null,null,k.fuid);else if(1===O.length){let i=O[0];if(i.orgId&&!(0,v.VT)(r.resource,n.orgById[i.orgId])&&!await (0,v.hb)(r.resource,n.orgById[i.orgId])){e.dispatch(G(h.name,(0,T.HE)(n,i),e=>{(0,C.Y9)(s.id,!1,null,void 0,e.id),(0,F.j)(k,null,e.id,s.id),g()}));return}(0,C.Y9)(i.userId,!1,i.orgId,void 0,i.teamId??null),(0,F.j)(k,i.orgId,i.teamId??null,i.userId)}else(0,c.$D)(i.e.COMMUNITY,Error("No workspaces found")),e.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.error_try_again"),error:!0}))}else r.userId?(k.fuid=r.userId,(0,C.Y9)(r.userId,!1),(0,F.j)(k,null,null,r.userId)):(0,F.j)(k,null,null,s.id);g()}})},225266:(e,r,n)=>{n.d(r,{MZ:()=>E,Nn:()=>g,Xt:()=>v,aq:()=>b,dx:()=>f,gI:()=>I});var i=n(27087),a=n(881388),o=n(939863),s=n(868389),l=n(980820),c=n(941381),d=n(164185),u=n(988022),m=n(215822),p=n(772192),h=n(867795),_=n(76158),g=(e=>(e.INVITE_TILE="invite_tile",e.COMMUNITY_PAGE="community_page",e))(g||{});(0,l.nF)((e,r)=>{i.Ay.put("/api/community_publishers/accept",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let f=(0,l.nF)((e,r)=>{let{src:n,plugin_id:s,widget_id:l}=r;i.Ay.put("/api/plugin_publishers/accept",{plugin_id:s,widget_id:l}).then(({data:r})=>{let i=y(r.meta);i&&e.dispatch(i),(0,u.ye)("plugin_publisher_invite_accepted",{src:n,userId:e.getState().user?.id,pluginId:s??l,isWidget:!!l});let a=(0,m.T)();s?(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===a?h.p.PLUGINS:void 0,initialFdResourceTab:"figma"===a?_.s.PLUGIN:void 0,scrollDevelopmentSectionIntoView:"figjam"===a,initialFdView:"figma"===a?"development":void 0,source:`extension-publisher-invite-${n}`}):l&&(0,d.s)({initialX:0,initialY:0,initialTab:"figjam"===a?h.p.WIDGETS:void 0,initialFdResourceTab:"figma"===a?_.s.WIDGET:void 0,scrollDevelopmentSectionIntoView:"figjam"===a,initialFdView:"figma"===a?"development":void 0,source:`extension-publisher-invite-${n}`})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_accepting_invite_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});(0,l.nF)((e,r)=>{i.Ay.del("/api/community_publishers/remove",r).then(({data:r})=>{let n=y(r.meta);n&&e.dispatch(n)}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});let E=(0,l.nF)((e,r)=>{i.Ay.del("/api/plugin_publishers/remove",r).then(({data:n})=>{let i=n.meta;if(n.meta.plugin){let{plugin_publishers:e}=n.meta.plugin;n.meta.plugin.plugin_publishers=e??{accepted:[],pending:[]}}else if(n.meta.widget){let{plugin_publishers:e}=n.meta.widget;n.meta.widget.plugin_publishers=e??{accepted:[],pending:[]}}let a=y(i);a&&e.dispatch(a),(0,u.ye)("plugin_publisher_invite_removed",{src:r.src,userId:e.getState().user?.id,pluginId:r.plugin_id||r.widget_id,isWidget:!!r.widget_id})}).catch(r=>{let n=(0,o.Jv)(r);throw e.dispatch(a.s.error((0,o.t)("community.actions.an_error_occurred_while_removing_publisher_please_refresh_and_try_again"))),Error(`Error updating resource ${n}`)})});function y(e){return e.hub_file?(0,s.Sb)({hubFiles:[e.hub_file],src:"removeCommunityPublisher"}):e.plugin?c.Qi({publishedPlugins:[e.plugin],src:"removeCommunityPublisher"}):e.widget?c.Qi({publishedPlugins:[e.widget],src:"removeCommunityPublisher"}):void 0}let b=(0,l.nF)(e=>{p.R.loadPluginsPublishedByUser(e),p.R.loadPluginsAuthoredByCurrentOrg(e)}),v=(0,l.nF)(e=>{p.R.loadPluginsAuthoredByCurrentOrg(e)}),I=(0,l.nF)(async e=>{await p.R.loadWidgetsAuthoredByCurrentOrg(e)})},57879:(e,r,n)=>{n.d(r,{r:()=>E});var i=n(922827),a=n(939863),o=n(392592),s=n(545941),l=n(980820),c=n(662275),d=n(988022),u=n(428467),m=n(215822),p=n(555328),h=n(951982),_=n(749449),g=n(530498),f=n(941381);let E=(0,l.nF)((e,{localFileId:r,publishedPluginId:n,entryPoint:l,initialTab:E,initialAllowedTabs:y,localSnapshotUrl:b,localSnapshotBlob:v})=>{let I=e.getState(),{localPlugins:T,publishedPlugins:S,publishedWidgets:w,publishingPlugins:A,currentUserOrgId:C,authedProfilesById:N,user:L}=I,O=n&&S[n]||n&&w[n],R=null!=r&&T[r];if(O&&!(0,p.m3)(O)&&(0,s.Ul)(O)&&R&&R.manifest.permissions?.includes("payments")&&L&&!L.has_passed_visual_compliance){e.dispatch(c.$O({type:g.O.type}));return}if(null==r||A[r]){if(null!=r&&A[r])try{if(b&&A[r].metadata.widgetSnapshotImageSrc!==b){let{metadata:n}=A[r];n.widgetSnapshotImageSrc=b,n.widgetSnapshotImageBlob=v,e.dispatch((0,f.fy)({id:r,metadata:n}))}}catch(r){e.dispatch(o.F.enqueue({message:(0,a.Jv)(r)||r.message,error:!0}));return}else if(void 0===r&&n&&O)try{let r=(0,m.mI)({...(0,u.getPermissionsState)(I),currentUserOrgId:C,localPlugins:T,publishedPlugins:S,publishedWidgets:w,authedProfilesById:N},void 0,n,b);e.dispatch((0,f.fy)({id:O.id,metadata:r}))}catch(r){e.dispatch(o.F.enqueue({message:(0,a.Jv)(r)||r.message,error:!0}));return}}else try{let i=(0,m.mI)({...(0,u.getPermissionsState)(I),currentUserOrgId:C,localPlugins:T,publishedPlugins:S,publishedWidgets:w,authedProfilesById:N},r,n,b,v);e.dispatch((0,f.fy)({id:r,metadata:i}))}catch(r){e.dispatch(o.F.enqueue({message:(0,a.Jv)(r)||r.message,error:!0}));return}i.glU&&i.glU.triggerAction("set-tool-default",null),(0,d.uE)("show_publish_plugin_modal",I,{entryPoint:l,userId:I.user?.id,orgId:I.currentUserOrgId,resourceType:O?O.is_widget?"widget":"plugin":void 0,publishedResourceId:O?O.id:void 0,initialTab:E??_.KM.PUBLISH}),e.dispatch(c.to({type:h.o,data:{localFileId:r,entryPoint:l,initialTab:E,initialAllowedTabs:y??_.x5,publishedPluginId:O?O.id:void 0,existingSecurityFormResponse:null}}))})},970516:(e,r,n)=>{n.d(r,{Pv:()=>_,S:()=>h,TH:()=>m,lW:()=>u,le:()=>p});var i=n(686759),a=n(939863),o=n(392592),s=n(662275),l=n(707465),c=n(558356),d=n(980820);let u=(0,d.nF)((e,r)=>{let n=r.stringToCopy,s={withLineBreaks:!(r.ignoreLineBreaks??!0),successText:r.successText};(0,i.Dk)(n,s).then(()=>{e.dispatch(o.F.enqueue({type:"copied_to_clipboard",message:s.successText??(0,a.t)("fullscreen_actions.copied_to_clipboard")}))})});function m(e){return(0,d.nF)((e,r)=>{let n=r.selector.selectedViewToPath(r.selectedView,r.data);if(!n)return;let i=new URL(n,document.baseURI).href;e.dispatch(h({url:i}))})(e)}(0,d.nF)((e,r)=>{let n=r.emailList,s=n.length,l=n.join("; ");(0,i.Dk)(l).then(()=>{e.dispatch(o.F.enqueue({message:(0,a.t)("copy_to_clipboard.emails_copied_to_clipboard",{numEmails:s,emailText:l}),type:"emails-copied"}))})});let p=(0,d.nF)((e,r)=>{let n=new URL((0,l.Np)(e.getState(),r),document.baseURI).href;e.dispatch(h({url:n}))}),h=(0,d.nF)(async(e,r)=>{let n=r.url;try{await (0,i.Dk)(n),e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:(0,a.t)("copy_to_clipboard.link_to_selection_copied_to_clipboard")}))}catch{e.dispatch(s.to({type:c.o,data:{link:n}}))}}),_=(0,d.nF)((e,r)=>{let n=r.url,l="plugin"===r.extensionType?(0,a.t)("copy_to_clipboard.link_to_plugin_copied_to_clipboard"):(0,a.t)("copy_to_clipboard.link_to_widget_copied_to_clipboard");(0,i.Dk)(n).then(()=>{e.dispatch(o.F.enqueue({type:"link_copied_to_clipboard",message:l}))}).catch(()=>{e.dispatch(s.to({type:c.o,data:{link:n}}))})})},56691:(e,r,n)=>{n.d(r,{Ri:()=>O,c3:()=>P,j3:()=>L,mg:()=>N,on:()=>R});var i=n(838516),a=n(167249),o=n(776250),s=n(627776),l=n(517333),c=n(737947),d=n(315044),u=n(738269),m=n(119198),p=n(974105),h=n(788811),_=n(99506),g=n(623746),f=n(428467),E=n(707465),y=n(776615),b=n(239671),v=n(945020),I=n(967409),T=n(294662),S=n(637590),w=n(980820),A=n(445092);let C=(0,w.nF)((e,{viewport:r})=>{let{selectedView:n}=e.getState();if("fullscreen"===n.view){e.dispatch(u.$T({...n,viewport:r}));let i=h.ZG()?.fileKey||n.fileKey;i&&l.eD?.updateViewport(i,r)}});(0,w.nF)(e=>{let r=e.getState(),n=function(e){let r=(0,f.getPermissionsStateMemoized)(e);return r.currentUserOrgId?(0,f.canMemberOrg)(r.currentUserOrgId,r)?I.Rx.ORG:I.Rx.ORG_GUEST:I.Rx.PERSONAL}(r);e.dispatch(A.Rz({query:r.desktopNewTab.searchQuery,searchScope:n,searchModelType:I.uH.FILES})),e.dispatch(A.r0({entryPoint:"desktop_new_tab"})),r=e.getState();let i=(0,E.xS)(r,{view:"search",entryPoint:"desktop_new_tab",previousView:r.selectedView&&((0,S.QB)(r.selectedView)||(0,S.bN)(r.selectedView))?r.selectedView:void 0});c.Ay.redirect(i)});let N=(0,a.N)("DESKTOP_NEW_TAB_SET_LOADING_BACKGROUND_COLOR"),L=(0,a.N)("DESKTOP_NEW_TAB_SET_IS_SEARCH_BAR_FOCUSED"),O=(0,a.N)("DESKTOP_NEW_TAB_SET_SEARCH_QUERY");function R(e,r){return null==r?"#00000000":"whiteboard"===r?"#ffffff":`#${(0,y.w2)(e)}`}(0,w.nF)((e,r)=>{let n=e.getState(),i=r.result,a=i.model,o={position:r.index,resource_id:a.key,resource_type:i.search_model_type.toString(),matched_queries:i.matched_queries,result:i},s={plan:(0,d.S)(n)};new T.vj.Analytics(n.search,o,s).click(i.search_model_type,n.selectedView,{action:r.clickAction}),e.dispatch(A.ky()),e.dispatch(u.$T({view:"fullscreen",fileKey:a.key,editorType:(0,b.wN)(a.editor_type??_._Y.DESIGN)}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey);(0,o.sx)("Desktop New Tab Open Recent",{itemType:"prototype",fileKey:i.key}),e.dispatch(u.$T({view:"prototype",file:(0,g.ge)(i),nodeId:r.pageId,pageId:r.pageId}))}),(0,w.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey);(0,o.sx)("Desktop New Tab Open Recent",{itemType:"file",fileKey:i.key}),e.dispatch(u.$T({view:"fullscreen",fileKey:i.key,editorType:(0,b.wN)(i.editor_type??_._Y.DESIGN)}))}),(0,w.nF)((e,r)=>{let n=e.getState();if(!n.desktopNewTab.isCreatingFile){let i=(0,s.ce)()?v.ai.SAME_TAB:v.ai.NEW_TAB,a=(0,p.xA)(e.getState(),i,r.projectId?{folderId:r.projectId}:"drafts",{from:v.f6.DESKTOP_NEW_TAB_BUTTON,selectedView:n.selectedView},r.editorType,void 0);e.dispatch(m.uM(a))}});let P=(0,i.s)((e,r)=>{e.dispatch(C({viewport:r}))},1e3)},244673:(e,r,n)=>{n.d(r,{A3:()=>W,CE:()=>V,Cs:()=>z,HS:()=>R,I4:()=>eh,Ir:()=>P,N9:()=>J,NL:()=>$,Np:()=>X,OC:()=>en,OJ:()=>O,Ox:()=>U,Pg:()=>er,Qv:()=>ed,UX:()=>q,V9:()=>F,VV:()=>eu,Vk:()=>ep,WA:()=>L,_1:()=>em,bA:()=>ec,e9:()=>es,g6:()=>N,h8:()=>ea,he:()=>k,iy:()=>G,k1:()=>ee,ks:()=>H,lV:()=>et,lu:()=>ei,mI:()=>el,n0:()=>Q,ne:()=>e_,oI:()=>C,ot:()=>B,wk:()=>K});var i=n(838516),a=n(922827),o=n(167249),s=n(157663),l=n(966712),c=n(939863),d=n(392592),u=n(988022),m=n(974105),p=n(420576),h=n(355513),_=n(960628),g=n(239671),f=n(518261),E=n(846456),y=n(587467),b=n(411189),v=n(728406),I=n(368702),T=n(980820);function S(e){return e.multiplayer.allUsers.length}function w(e){return e?e.isPaused?e.lastReceivedSongTimestampMs:e.lastReceivedSongTimestampMs+(performance.now()-e.timeOrigin):0}async function A(e,r){let n=e;return await (0,b._s)({songID:e,onSuccess:()=>{},onNotFound:()=>{r.dispatch(j({selectedSongID:"",musicStartTimeMs:0})),n="",r.dispatch(Z()),r.dispatch(d.F.enqueue({message:(0,c.t)("whiteboard.timer.song_not_available_error"),error:!0,type:"active-song-not-found"}))}}),n}let C=(0,o.N)("SET_SELECTED_SONG_ID_MUSIC");(0,T.nF)((e,r)=>{let{music:n}=e.getState().music,i=!r.dontTransmitWhenPaused;if(n&&!n.isStopped&&(!n.isPaused||i)){let i=e.getState().music.activeSongs.find(e=>e.song_id===r.selectedSongID);e.dispatch(x({eventName:"update-music-song-id",isPaused:!n||n.isPaused,selectedSongID:r.selectedSongID,lastReceivedSongTimestampMs:i?.start_at_ms||0,isStopped:!n||n.isStopped}))}e.dispatch(C(r))});let N=(0,T.nF)(e=>{e.dispatch(L()),(0,b.I8)(),(0,b.om)()}),L=(0,o.N)("RESET_LOCAL_MUSIC"),O=(0,T.nF)((e,r)=>{if(e.dispatch(R(r)),r.isPaused||r.isStopped||!r.selectedSongID)(r.isPaused||r.isStopped)&&(0,b.c4)()&&(0,b.I8)();else{let n=M(r.selectedSongID,e.getState().music.activeSongs);(0,b.$_)(n,()=>{e.dispatch(D())})}}),R=(0,o.N)("SET_MUSIC_STATE"),P=(0,o.N)("RESUME_MUSIC");(0,T.nF)(async(e,r)=>{let n=w(r),i=e.getState(),a=i.music.music?.selectedSongID;a&&(a=await A(a,e)),e.dispatch(x({eventName:"resume-music",isPaused:!1,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1})),e.dispatch(P(r))}),(0,T.nF)((e,r)=>{let n=w(r),i=e.getState(),a=i.music.music?.selectedSongID;e.dispatch(x({eventName:"pause-music",isPaused:!0,selectedSongID:a||"",lastReceivedSongTimestampMs:n,isStopped:!1}))});let D=(0,T.nF)(e=>{let r=e.getState(),n=r.music.music?.selectedSongID;e.dispatch(x({eventName:"stop-music",isPaused:!0,selectedSongID:n||"",lastReceivedSongTimestampMs:0,isStopped:!0}))}),k=(0,o.N)("START_MUSIC");(0,T.nF)(async(e,{musicStartTimeMs:r=0})=>{let{music:n}=e.getState().music,i="";n&&(i=n.selectedSongID),i&&(i=await A(i,e)),e.dispatch(x({eventName:"start-music",isPaused:!1,selectedSongID:i,lastReceivedSongTimestampMs:r,isStopped:!1})),e.dispatch(k({musicStartTimeMs:r}))});let M=(e,r)=>r.find(r=>r.song_id===e),F=(0,o.N)("SEND_MUSIC_MESSAGE"),x=(0,T.nF)((e,r)=>{let n=e.getState().music;a.h3O.sendMusic(r.isPaused,(n?.music?.musicMessageID||0)+1,r.selectedSongID||"",r.lastReceivedSongTimestampMs||0,r.isStopped),e.dispatch(F(r))});(0,T.nF)((e,r)=>{"open"===r.state&&(0,I.D)(()=>{e.getState().music?.modalState==="open"&&e.dispatch(U({state:"closed",userInitiated:!1}))}),e.dispatch(U(r))});let U=(0,o.N)("SET_MUSIC_MODAL"),B=(0,o.N)("RESET_LOCAL_TIMER"),V=(0,o.N)("SET_MUSIC_STANDALONE_VOLUME");(0,T.nF)((e,r)=>{Y(e.getState(),r),e.dispatch(V(r))});let G=(0,o.N)("SET_MUSIC_IS_MUTED");(0,T.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(G({isMuted:r,userInitiated:n}))});let H=(0,o.N)("SET_TIMER_AND_MUSIC_ARE_MUTED");(0,T.nF)((e,{isMuted:r,userInitiated:n})=>{n&&(0,y.ym)(e.getState(),r),e.dispatch(H({isMuted:r,userInitiated:n}))});let K=(0,o.N)("SET_STANDALONE_MUSIC_PLAYER"),W=(0,o.N)("SET_MAIN_MUSIC_PLAYER"),$=(0,o.N)("SET_MUSIC_VOLUME");(0,T.nF)((e,r)=>{Y(e.getState(),r),e.dispatch($(r))});let Y=(0,i.s)((e,r)=>(0,y.qV)(e,r),1e3,!1),z=(0,o.N)("SET_SELECTED_SONG_ID"),j=(0,T.nF)((e,r)=>{let{time:n}=e.getState().timer;if(n&&n.totalTimeMs>0){let i=(0,v.P$)(n);e.dispatch(eo({eventName:"update-timer-song-id",totalTimeMs:n.totalTimeMs,timeRemainingMs:i,isPaused:n.isPaused,songID:r.selectedSongID,lastReceivedSongTimestampMs:r.musicStartTimeMs})),_.d1.timerChange("timerupdatesongid")}e.dispatch(z(r))}),q=(0,o.N)("GET_ACTIVE_SONGS_SUCCESS"),Z=(0,T.nF)(async e=>{try{let r=await f.N.getSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw s.k.warn("Failed to fetch active songs"),Error("Api error while fetching active songs");e.dispatch(q(r.data.meta))}catch(e){throw s.k.warn("Failed to fetch active songs"),e}}),X=(0,o.N)("GET_ALL_SONGS_SUCCESS");(0,T.nF)(async e=>{if(!(0,l.kc)().figjam_more_tracks_listen)throw Error("Fetching all songs disabled");try{let r=await f.N.getAllSongs();if(!r||200!==r.status||!r.data||!r.data.meta)throw s.k.warn("Failed to fetch all songs"),Error("Api error while fetching all songs");e.dispatch(X(r.data.meta))}catch(e){throw s.k.warn("Failed to fetch all songs"),e}});let J=(0,o.N)("SET_SHOWING_FILE_FOOTER"),Q=(0,o.N)("SET_SELECTED_TYPED_PROP_DEF_ID"),ee=(0,o.N)("SET_START_CHIME_PLAYED"),et=(0,o.N)("SET_TIMER_NOTIFICATION"),er=(0,o.N)("SET_TIMER_AUDIO_ENABLED"),en=(0,o.N)("SET_TIMER_MODAL"),ei=(0,T.nF)((e,r)=>{if("open"===r.state&&(0,v.FR)()&&(0,I.D)(()=>{let r=(0,v.FR)();e.getState().timer?.modalState==="open"&&r&&e.dispatch(ei({state:"closed",userInitiated:!1}))}),r.userInitiated){let n=e.getState(),i=n.timer.time?.timeRemainingMs>0;(0,u.ds)(`timer-modal-${r.state}`,n.openFile?.key,n,{"multiplayer-users":S(n),"timer-active":i,source:r.source})}e.dispatch(en(r))}),ea=(0,o.N)("SEND_TIMER"),eo=(0,T.nF)((e,r)=>{let n=e.getState(),i=n.timer,o=i.setBy;if("start-timer"===r.eventName){let e=n.multiplayer.allUsers.find(e=>e.sessionID===n.multiplayer.sessionID);o=e?e.name:l.Ay().user_data?.handle||"anonymous user"}if(a.h3O.sendTimer(r.totalTimeMs||0,r.timeRemainingMs||0,!!r.isPaused,(i?.time?.timerID||0)+1,o,r.songID||"",r.lastReceivedSongTimestampMs||0),r.eventName){let e={"multiplayer-users":S(n)};if("adjust-timer"===r.eventName){let i=Math.round((r.totalTimeMs-n.timer.time.totalTimeMs)/1e3);e["time-added-s"]=i}else"start-timer"===r.eventName&&(e["duration-s"]=Math.round(r.totalTimeMs/1e3));(0,u.ds)(r.eventName,n.openFile?.key,n,e,{forwardToDatadog:!0})}e.dispatch(ea(r))}),es=(0,o.N)("SET_TIMER"),el=(0,T.nF)((e,r)=>{if(0===r.totalTimeMs){let r=e.getState(),n=(0,m.d1)(r);if(n){let e=(0,p.L8)(n,r.repos);!function(e,r,n){if(!e)return;let i=new E.a().selectedViewNameHelper(e,r);(0,h.hL)(i,(0,g.wN)(e.editor_type),"")}(n,e)}}e.dispatch(es(r))}),ec=(0,o.N)("START_TIMER"),ed=(0,T.nF)(async(e,{totalTimeMs:r,musicStartTimeMs:n=0})=>{let i=e.getState().timer.selectedSongID;i&&(i=await A(i,e)),e.dispatch(eo({eventName:"start-timer",totalTimeMs:r,timeRemainingMs:r,isPaused:!1,songID:i,lastReceivedSongTimestampMs:n})),_.d1.timerChange("timerstart"),e.dispatch(ec({totalTimeMs:r,musicStartTimeMs:n}))}),eu=(0,T.nF)((e,r)=>{let n=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"adjust-timer",totalTimeMs:r.timer.totalTimeMs+r.deltaMs,timeRemainingMs:(0,v.P$)(r.timer)+r.deltaMs,isPaused:r.timer.isPaused,songID:n,lastReceivedSongTimestampMs:r.timer.lastReceivedSongTimestampMs})),_.d1.timerChange("timeradjust")}),em=(0,T.nF)((e,r)=>{let n=(0,v.P$)(r),i=w(r),a=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"pause-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:n,isPaused:!0,songID:a,lastReceivedSongTimestampMs:i})),_.d1.timerChange("timerpause")}),ep=(0,T.nF)(e=>{let r=e.getState().timer.selectedSongID;e.dispatch(eo({eventName:"stop-timer",totalTimeMs:0,timeRemainingMs:0,isPaused:!0,songID:r,lastReceivedSongTimestampMs:0})),_.d1.timerChange("timerstop")}),eh=(0,o.N)("RESUME_TIMER"),e_=(0,T.nF)(async(e,r)=>{let n=e.getState().timer.selectedSongID;n&&(n=await A(n,e)),e.dispatch(eo({eventName:"resume-timer",totalTimeMs:r.totalTimeMs,timeRemainingMs:r.timeRemainingMs,isPaused:!1,songID:n,lastReceivedSongTimestampMs:r.lastReceivedSongTimestampMs})),_.d1.timerChange("timerresume"),e.dispatch(eh(r))})},54552:(e,r,n)=>{n.d(r,{DN:()=>R,EX:()=>N,Fb:()=>F,Mv:()=>L,N9:()=>w,U6:()=>I,X7:()=>P,dy:()=>A,gG:()=>M,iN:()=>D,jv:()=>C,lF:()=>v,ox:()=>O,pS:()=>S,qP:()=>k,to:()=>T});var i=n(140593),a=n(167249),o=n(722138),s=n(456772),l=n(286098),c=n(547807),d=n(27087),u=n(881388),m=n(939863),p=n(392592),h=n(980820),_=n(420576),g=n(723245),f=n(477782),E=n(99506),y=n(225868),b=n(404717);let v=(0,a.N)("SET_FAVORITES_COUNT"),I=(0,a.N)("UPDATE_EXPANDED_CUSTOM_SECTIONS"),T=(0,a.N)("SET_MOVING_RESOURCE"),S=(0,a.N)("SET_NEW_SECTION_INDEX");(0,h.nF)((e,r)=>{let{name:n,orderedFavoriteIds:i}=r,a=d.Ay.put(`/api/user_sidebar_sections/${r.sectionId}`,{ordered_favorited_resource_ids:i,name:n}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))});(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{...n?{name:n}:{},...i?{orderedFavoritedResourceIds:i}:{}}}},a),r.name&&(0,o.K2)(r.sectionId,r.name)}),(0,h.nF)((e,r)=>{let n=d.Ay.del(`/api/user_sidebar_sections/${r.sidebarSectionId}`).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))});(0,o.Pe)(r.sidebarSectionId),(0,s.WB)().optimisticallyDelete({UserSidebarSection:{[r.sidebarSectionId]:null}},n)}),(0,h.nF)((e,r)=>{let n={favorited_resource_ids:r.favoriteIds,team_id:r.teamId};(0,o.Dr)(r.favoriteIds,r.teamId),d.Ay.put("/api/planless_favorited_resource_plan_id",n).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))})}),(0,h.nF)((e,r)=>{let n={section_id:r.sectionId,ordered_favorite_ids:r.orderedFavoriteIds},i=d.Ay.put(`/api/favorited_resources/${r.favoriteId}`,n).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))});r.sectionId&&(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:r.orderedFavoriteIds}}},i);let a={[r.favoriteId]:{sidebarSectionId:r.sectionId}};switch(r.resourceType){case E.bk.TEAM:(0,s.WB)().optimisticallyUpdate({FavoritedTeam:a},i);break;case E.bk.FOLDER:(0,s.WB)().optimisticallyUpdate({FavoritedProject:a},i);break;case E.bk.FILE:(0,s.WB)().optimisticallyUpdate({FavoritedFile:a},i);break;case E.bk.PROTOTYPE:(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:a},i);break;case E.bk.WORKSPACE:(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:a},i)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,i={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},a=d.Ay.post("/api/user_sidebar_sections",i).then(n=>{if(!n?.data.meta){e.dispatch(T({movingResource:void 0}));return}U(e.dispatch,r.newResourceForSection.resourceType,r.newResourceForSection.isFavorited,r.newResourceForSection.resourceId,void 0,n.data.meta),e.dispatch(T({movingResource:void 0}))}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))});if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[V]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},a),r.prefs&&r.currentOrderedSections){let i=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),V,...r.currentOrderedSections.slice(r.insertAtIndex,i)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,y.ah)(s,e.getState().user?.id,n,null,a)}}),(0,h.nF)((e,r)=>{let n=e.getState().currentUserOrgId??null,i={name:r.name,org_id:n,insert_at_index:r.insertAtIndex,ordered_sections:r.currentOrderedSections},a=d.Ay.post("/api/user_sidebar_sections",i).then(e=>{(0,o.SX)(e?.data.meta,r.name)}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.msg}`}))}),l="optimistic-id-custom-section-id";if((0,s.WB)().optimisticallyCreate({UserSidebarSection:{[l]:{userId:e.getState().user?.id??"",orgId:n,teamId:"",name:r.name,createdAt:new Date,orderedFavoritedResourceIds:[]}}},a),r.prefs&&r.currentOrderedSections){let i=r.currentOrderedSections.length,o=[...r.currentOrderedSections?.slice(0,r.insertAtIndex),l,...r.currentOrderedSections.slice(r.insertAtIndex,i)],s={id:r.prefs?.id,orderedFavoritedResourceIds:r.prefs?.orderedFavoritedResourceIds,orderedTeamIds:r.prefs?.orderedTeamIds,orderedLicenseGroupIds:r.prefs?.orderedLicenseGroupIds,orderedSidebarSections:o};(0,y.ah)(s,e.getState().user?.id,n,null,a)}});let w=(0,h.MM)("BULK_RESOURCE_SET_FAVORITE",(e,r,{optimistId:n,liveStore:i})=>{let{files:a,repos:c,prototypes:m,orgId:h,teamId:_,selectedView:g,entrypoint:f}=r,v=e.getState().currentTeamId,I=e.getState().currentUserOrgId,T=v??I,S=a.filter(e=>!e.is_favorited&&(e.team_id===T||e.parent_org_id===T)),w=S.map(e=>e.key),A=c.filter(e=>!e.is_favorited&&(e.team_id===T||e.parent_org_id===T)).filter(Boolean),C=A.map(e=>e.default_file_key),N=m.filter(e=>!e.is_favorited&&(e.parent_team?.id===T||e.parent_org?.id===T)),L=N.map(e=>e.file_key+","+e.page_id),O={files:C.concat(w),org_id:h,team_id:_,prototypes:L,insert_at_index:r.insertAtIndex,ordered_favorites:r.orderedFavorites,section_id:r.sectionId};a.forEach(e=>{(0,o.gB)(e.key,g,f,E.bk.FILE,e.editor_type,!0)}),c.forEach(e=>{(0,o.gB)(e.default_file_key??void 0,g,f,E.bk.FILE,"design",!0)}),m.forEach(e=>{(0,o.gB)(e.file_key,g,f,E.bk.PROTOTYPE,"design",!0)});let R=d.Ay.put("/api/bulk_favorite_resources",O).then(()=>{e.dispatch(b.c(n))}).catch(r=>{e.dispatch(b.r(n));try{e.dispatch(p.F.enqueue({message:r.message}))}catch(r){e.dispatch(u.s.error("An error occurred while favoriting these items"))}}),P=e.getState().user?.id;if(!P)return;let D={},k={},M=[];if(N.forEach(e=>{M.push(`optimistic-id-${e.fig_file.key}`),k[`optimistic-id-${e.fig_file.key}`]=(0,l.XJ)(e,P,h,r.sectionId)}),A.forEach(e=>{let n=e.default_file_key;if(n){let e=i.readCachedFile(n);e&&(M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId))}}),S.forEach(e=>{M.push(`optimistic-id-${e.key}`),D[`optimistic-id-${e.key}`]=(0,l.f2)(e,P,h,r.sectionId)}),(0,s.WB)().optimisticallyCreate({FavoritedFile:D,FavoritedPrototype:k},R),null===r.insertAtIndex)return;let F=[...r.orderedFavorites.slice(0,r.insertAtIndex),...M,...r.orderedFavorites.slice(r.insertAtIndex)];if(r.sectionId)(0,s.WB)().optimisticallyUpdate({UserSidebarSection:{[r.sectionId]:{orderedFavoritedResourceIds:F}}},R);else{let e={id:r.fileBrowserPrefs?.id||"optimistic-id",orderedFavoritedResourceIds:F,orderedTeamIds:r.fileBrowserPrefs?.orderedTeamIds,orderedLicenseGroupIds:r.fileBrowserPrefs?.orderedLicenseGroupIds};(0,y.ah)(e,P,h,null,R)}}),A=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:a,entrypoint:o,favoriteId:s,fileBrowserEntryPoint:l}=r;switch(a.type){case f.nb.FILE:e.dispatch(k({entrypoint:o,favoriteId:s,file:a.file,fileBrowserEntryPoint:l}));return;case f.nb.PINNED_FILE:let c=await n.fetchFile(a.file.key);e.dispatch(k({entrypoint:o,favoriteId:s,file:c,fileBrowserEntryPoint:l}));return;case f.nb.PROTOTYPE:e.dispatch(P({entrypoint:o,favoriteId:s,prototype:a.prototype,fileBrowserEntryPoint:l}));return;case f.nb.REPO:e.dispatch(k({entrypoint:o,favoriteId:s,file:(0,_.mr)(a.repo,a.branches,{}),repoId:a.repo.id,fileBrowserEntryPoint:l}));return;case f.nb.OFFLINE_FILE:return;default:(0,i.xb)(a)}}),C=(0,h.MM)("REMOVE_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:i,sectionId:a}=r;(0,o.to)(i.id,e.getState().selectedView.view,r.entrypoint,E.bk.FOLDER);let l=U(e.dispatch,E.bk.FOLDER,!1,i.id,n,a);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedProject:{[r.favoriteId]:null}},l)}),N=(0,h.nF)(async(e,r,{liveStore:n})=>{let{tile:a,entrypoint:o,favoriteId:s,sectionId:l,fileBrowserEntryPoint:c}=r;switch(a.type){case f.nb.FILE:e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:a.file,fileBrowserEntryPoint:c}));return;case f.nb.PINNED_FILE:let d=await n.fetchFile(a.file.key);e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:d,fileBrowserEntryPoint:c}));return;case f.nb.PROTOTYPE:e.dispatch(D({entrypoint:o,favoriteId:s,sectionId:l,prototype:a.prototype,fileBrowserEntryPoint:c}));return;case f.nb.REPO:e.dispatch(F({entrypoint:o,favoriteId:s,sectionId:l,file:(0,_.mr)(a.repo,a.branches,e.getState().selectedBranchKeyByRepoId),repoId:a.repo.id,fileBrowserEntryPoint:c}));return;case f.nb.OFFLINE_FILE:return;default:(0,i.xb)(a)}}),L=(0,h.MM)("ADD_FOLDER_FAVORITE",(e,r,{optimistId:n})=>{let{folder:i,sectionId:a}=r;(0,o.gB)(i.id,e.getState().selectedView.view,r.entrypoint,E.bk.FOLDER);let c=U(e.dispatch,E.bk.FOLDER,!0,i.id,n,a),d=e.getState().user?.id,u=e.getState().currentUserOrgId;d&&(r.favoriteId&&r.sectionId&&(0,s.WB)().optimisticallyUpdate({FavoritedProject:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c),"is_favorited"in i&&(r.favoriteId||(0,s.WB)().optimisticallyCreate({FavoritedProject:{[`optimistic-id-${i.id}`]:(0,l.ad)(i,d,u,a)}},c)))});(0,h.nF)((e,r)=>{let{workspace:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.WORKSPACE);let i=U(e.dispatch,E.bk.WORKSPACE,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedWorkspace:{[r.favoriteId]:null}},i)}),(0,h.nF)((e,r)=>{let{workspace:n,sectionId:i}=r,a=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.WORKSPACE);let c=U(e.dispatch,E.bk.WORKSPACE,!0,n.id,void 0,i),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedWorkspace:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedWorkspace:{[`optimistic-id-${n.id}`]:(0,l.Nc)(n,d,a,i)}},c))});let O=(0,h.nF)((e,r)=>{let{team:n}=r;(0,o.to)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.TEAM);let i=U(e.dispatch,E.bk.TEAM,!1,n.id,void 0);r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedTeam:{[r.favoriteId]:null}},i)}),R=(0,h.nF)((e,r)=>{let{team:n,sectionId:i}=r,a=e.getState().currentUserOrgId;(0,o.gB)(n.id,e.getState().selectedView.view,r.entrypoint,E.bk.TEAM);let c=U(e.dispatch,E.bk.TEAM,!0,n.id,void 0,i),d=e.getState().user?.id;d&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedTeam:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},c):(0,s.WB)().optimisticallyCreate({FavoritedTeam:{[`optimistic-id-${n.id}`]:(0,l.zb)(n,d,a,i)}},c))}),P=(0,h.MM)("REMOVE_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:i,entrypoint:a,fileBrowserEntryPoint:l}=r;(0,o.to)(i.file_key,e.getState().selectedView.view,a,E.bk.PROTOTYPE,void 0,l);let c=U(e.dispatch,E.bk.PROTOTYPE,!1,i.file_key,n,void 0,i.page_id);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedPrototype:{[r.favoriteId]:null}},c)}),D=(0,h.MM)("ADD_PROTOTYPE_FAVORITE",(e,r,{optimistId:n})=>{let{prototype:i,entrypoint:a,sectionId:c,fileBrowserEntryPoint:d}=r,u=e.getState().currentUserOrgId;(0,o.gB)(i.file_key,e.getState().selectedView.view,a,E.bk.PROTOTYPE,"prototype",d);let m=U(e.dispatch,E.bk.PROTOTYPE,!0,i.fig_file.key,n,c,i.page_id),p=e.getState().user?.id;p&&(r.favoriteId&&r.sectionId?(0,s.WB)().optimisticallyUpdate({FavoritedPrototype:{[r.favoriteId]:{sidebarSectionId:r.sectionId}}},m):(0,s.WB)().optimisticallyCreate({FavoritedPrototype:{[`optimistic-id-${i.fig_file.key}`]:(0,l.XJ)(i,p,u,c)}},m))}),k=(0,h.MM)("REMOVE_FILE_FAVORITE",(e,r,{optimistId:n})=>{let i=e.getState().selectedView.view,{file:a,entrypoint:l,fileBrowserEntryPoint:c}=r;(0,o.to)(a.key,i,l,E.bk.FILE,a.editor_type??"design",c);let d="fullscreen"===i?x(e.dispatch,E.bk.FILE,!1,a.key,(0,g.D6)(e.getState().currentUserOrgId)):U(e.dispatch,E.bk.FILE,!1,a.key,n);e.getState().user?.id&&r.favoriteId&&(0,s.WB)().optimisticallyDelete({FavoritedFile:{[r.favoriteId]:null}},d)}),M=(0,a.N)("ADD_FILE_FAVORITE"),F=(0,h.nF)((e,r)=>{let{optimistId:n}=e.optimisticDispatch(M(r)),{file:i,entrypoint:a,sectionId:c,fileBrowserEntryPoint:d}=r;(0,o.gB)(i.key,e.getState().selectedView.view,a,E.bk.FILE,i.editor_type??"design",d);let u=U(e.dispatch,E.bk.FILE,!0,i.key,n,c,void 0,(0,g.D6)(e.getState().currentUserOrgId)),m=e.getState().user?.id;if(m){if(r.favoriteId&&r.sectionId)(0,s.WB)().optimisticallyUpdate({FavoritedFile:{[r.favoriteId]:{sidebarSectionId:r.sectionId,orgId:e.getState().currentUserOrgId??null,resourceType:E.bk.FILE,userId:m}}},u);else if(e.getState().currentTeamId&&e.getState().currentTeamId===r.file.team_id||e.getState().currentUserOrgId&&r.file.parent_org_id){let n=(0,l.h7)(i);(0,s.WB)().optimisticallyCreate({FavoritedFile:{[`optimistic-id-${i.key}`]:{userId:m,orgId:e.getState().currentUserOrgId??null,teamId:e.getState().currentTeamId??null,sidebarSectionId:r.sectionId??null,createdAt:new Date,updatedAt:new Date,resourceId:i.key,resourceType:E.bk.FILE,readableFile:n}}},u)}}}),x=(e,r,n,i,a)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,file_key:i}).then(()=>{let r=a?(0,m.t)("tile.favoriting.file_removed_from_sidebar"):(0,m.t)("tile.favoriting.file_removed_from_favorites"),i=a?(0,m.t)("tile.favoriting.file_added_to_sidebar"):(0,m.t)("tile.favoriting.file_added_to_favorites");e(p.F.enqueue({message:n?i:r}))}).catch(r=>{let n=(0,m.Jv)(r);if(n)try{e(p.F.enqueue({message:n}))}catch(r){e(u.s.error("An error occurred while favoriting this item"))}}),U=(e,r,n,i,a,o,s,l)=>d.Ay.put("/api/favorited_resources",{resource_type:r,is_favorited:n,resource_id_or_key:i,page_id:s,section_id:o}).then(()=>{if(a&&e(b.c(a)),l||r!==E.bk.FILE){let r=n?(0,m.t)("sidebar.item_added_bell_message"):(0,m.t)("sidebar.item_removed_bell_message");e(p.F.enqueue({message:r}))}}).catch(r=>{let i=(0,m.Jv)(r);if(i){a&&e(b.r(a));try{e(p.F.enqueue({message:i}))}catch(i){let r=n?"favoriting this item":"removing this favorite";e(u.s.error(`An error occurred while ${r}`))}}}),B=e=>((0,o.j4)(e.favorited_resource_ids),d.Ay.del("/api/favorited_resources",c.td.toAPIParameters(e)));(0,h.nF)((e,r)=>{B({favorited_resource_ids:r.favoriteIds}).catch(r=>{e.dispatch(p.F.enqueue({message:`${r.data.message}`}))})});let V="optimistic-id-custom-section-id"},738274:(e,r,n)=>{n.d(r,{EG:()=>l,Ji:()=>a,lr:()=>o,qC:()=>s});var i=n(167249);let a=(0,i.N)("FIGJAM_SET_IS_MAKE_SOMETHING_V2_ACTIVE"),o=(0,i.N)("FIGJAM_SET_DELIGHTFUL_TOOLBAR_OVERFLOW_MENU"),s=(0,i.N)("FIGJAM_SET_IMAGE_DIALOG"),l=(0,i.N)("FIGJAM_SET_QUICK_ACCESS_TOOL")},753643:(e,r,n)=>{n.d(r,{fC:()=>p,o2:()=>u,s7:()=>m});var i=n(167249),a=n(980820),o=n(410424),s=n(941381),l=n(182976),c=n(336599),d=n(288813);let u=(0,i.N)("UPDATE_FACE_STAMPS"),m=(0,i.N)("PUT_DEFAULT_FIGJAM_INSERT_ITEMS");(0,a.nF)(e=>{let r=e.getState().selectedView;r&&"fullscreen"===r.view&&h(e)});let p="FETCH_FIGJAM_DEFAULT_INSERTS";async function h(e){let r=e.getState();if((0,c.Sc)(r.loadingState,p)){e.dispatch(l.Cx({key:p}));try{let n=await d.d.getDefaultInserts({orgId:r.currentUserOrgId||void 0}),i=[...n.data.meta.plugins,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&!e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],a=[...n.data.meta.widgets,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"is_widget"in e&&e.is_widget&&r.push(e);return r}(n.data.meta.use_cases)],c=[...n.data.meta.templates,...function(e){let r=[];for(let n of e)for(let e of n.resources)e&&"viewer_mode"in e&&e.viewer_mode&&r.push(e);return r}(n.data.meta.use_cases)];e.dispatch((0,o.Sb)({hubFiles:c,src:"figjam-inserts"})),e.dispatch(m(n.data.meta)),e.dispatch(s.Vx(i)),e.dispatch(s.uV(a));let u={},h={};a.forEach(e=>{let n=e.current_plugin_version_id;!(n&&r.publishedCanvasWidgetVersions[e.id]?.[n])&&(u[e.id]=Object.keys(e.versions),e.current_plugin_version_id&&(h[e.id]={[e.current_plugin_version_id]:e.versions[e.current_plugin_version_id]}))}),e.dispatch((0,s.fs)(h)),e.dispatch((0,s.b6)({widgetIDToVersions:u})),e.dispatch(l.x2({key:p}))}catch(r){e.dispatch(l.of({key:p}))}}}},944682:(e,r,n)=>{n.d(r,{$m:()=>Y,FE:()=>U,GZ:()=>$,Ip:()=>z,Lk:()=>eu,Nw:()=>er,P6:()=>Z,PB:()=>eo,PF:()=>J,Rh:()=>W,S:()=>et,SQ:()=>Q,U2:()=>ei,VK:()=>X,YF:()=>j,YK:()=>q,YW:()=>G,Yn:()=>ee,Yp:()=>en,ZN:()=>H,bE:()=>ea,c3:()=>ed,jO:()=>x,og:()=>B,rA:()=>K,sF:()=>V,uo:()=>es,yJ:()=>el});var i=n(723069),a=n(838516),o=n(922827),s=n(167249),l=n(517333),c=n(686759),d=n(737947),u=n(966712),m=n(456772),p=n(130097),h=n(711525),_=n(179940),g=n(553716),f=n(27087),E=n(881388),y=n(939863),b=n(392592),v=n(980820),I=n(662275),T=n(988022),S=n(420576),w=n(132135),A=n(892542),C=n(279453),N=n(623746),L=n(540019),O=n(401352),R=n(694517),P=n(754168),D=n(558356),k=n(479296),M=n(938908),F=n(31913);function x(e){return void 0!==e.file_repo}function U(e,r){return f.Ay.put(`/api/files/${e}/thumbnail_guid`,{thumbnail_guid:r}).then(()=>{o.Ez5.canvasViewState().thumbnailNodeId.set(r)})}let B=(0,v.nF)((e,r)=>{r.file.created_at&&console.error("It looks like you are PUT-ting to the API with the entire file object; please only pass the key and file permission attributes");let n=P.S.putFile(r).then(()=>{r.onSuccess?.()}).catch(n=>{if(r.onError?.(),e.dispatch(b.F.enqueue({message:(0,y.t)("file_permissions.generic_error"),error:!0})),(0,u.b5)())throw n}),i=r.file,a={...(0,N.Ns)(i,i.key),...(0,N.yT)(i,r.linkExpirationConfigId,r.currentUser)},o=(0,N.TP)(i,r.linkExpirationConfigId,r.currentUser);Object.keys(a).length>0&&(0,m.WB)().optimisticallyUpdate(a,n),o&&(0,m.WB)().optimisticallyCreate(o,n)}),V=(0,s.N)("FILE_PERMISSIONS_PUT"),G=(0,v.nF)(async(e,r)=>{let n=e.getState(),a={},o=r.file,s=o.folderId,c=!1;if(s){let e="design"===o.editorType?C.RmP:C.JkW;c=!!h.oA((await p.Ek(e,{id:s})).project)?.hasPermission}c&&(a.folder_id=s),r.versionId&&(a.version_id=r.versionId),e.dispatch(b.F.enqueue({type:"file_duplicating",message:(0,y.t)("visual_bell.duplicating")})),f.Ay.post(`/api/multiplayer/${o.key}/copy?${(0,_.lF)(a)}`).then(a=>{e.dispatch(b.F.dequeue({}));let s=!!n.openFile;if(!a.data.error&&a.data.meta&&s){let s=a.data.meta;if((0,T.ds)("File Duplicated",o.key,e.getState(),{duplicatedFileKey:s.key,duplicatedContainingFolderId:s.folder_id,duplicatedFileTeamId:s.team_id}),r.checkOssSalesExperiment&&(0,O.Lb)(s.key),l.eD){l.eD.openFile({fileKey:s.key,title:s.name,fileEditorType:s.editor_type,target:i.a.FOCAL_TAB,isBranch:(0,S.Xm)(s),isLibrary:!!s.last_published_at,isTeamTemplate:!1,userId:n.user?.id});return}d.Ay.redirect((0,w.to)(s),"_blank")}}).catch(()=>{e.dispatch(b.F.dequeue({})),e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.file_copy_error")))})}),H=(0,v.nF)((e,r)=>{let n=r.file_key;n&&(e.getState().fileByKey[n]||P.S.getFiles({fileKey:n}).then(r=>e.dispatch(el({file:r.data.meta}))))}),K=(0,v.nF)(async(e,r)=>{try{await f.Ay.del(`/api/files/${r.file_key}/workshop`)}catch(e){}}),W=(0,v.nF)(async(e,r,{liveStore:n})=>{let i=await n.fetchFile(r.fileKey),a=f.Ay.post(`/api/files/${r.fileKey}/workshop`).then(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_started_notification"),button:{text:(0,y.t)("whiteboard.open_sessions.open_session_started_notification_copy_link"),action:()=>{e.dispatch(et({fileKey:r.fileKey,url:(0,w.to)(i),source:A.d.WORKSHOP_VISUAL_BELL}))}}}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("whiteboard.open_sessions.open_session_start_failed_notification"),error:!0}))}),o=e.getState().user?.id;if(o){let e=new Date;e.setDate(e.getDate()+1),(0,m.WB)().optimisticallyCreate({FigFileWorkshopMode:{[`optimistic-${r.fileKey}`]:{fileKey:r.fileKey,expiresAt:e,userId:o}}},a)}}),$=(0,v.nF)(async(e,r)=>{await f.Ay.post(`/api/files/${r.fileKey}/view`).then(({data:n})=>{let{last_view_at:i,last_edit_at:a}=n.meta;e.dispatch(F.FB({lastViewed:i,lastEdited:a})),e.dispatch((0,R.Ul)({openFileKey:r.fileKey,versionHistory:e.getState().versionHistory}))}).catch(e=>{(0,g.x1)("recent files","Error marking file view / retrieving last seen times",{error:e})})}),Y=(0,v.nF)((e,r)=>{U(r.file_key,r.thumbnail_guid).then(()=>{let n=r.thumbnail_guid?(0,y.t)("file_browser.file_browser_actions.thumbnail_set"):(0,y.t)("file_browser.file_browser_actions.default_thumbnail_restored");e.dispatch(b.F.enqueue({message:n}))}).catch(()=>{e.dispatch(b.F.enqueue({message:(0,y.t)("file_browser.error_try_again"),error:!0}))})}),z=L.M4.Mutation((e,{objects:r})=>{e.forEach(e=>{r.File.update(e,e=>{e.trashed_at=null})})}),j=(0,s.N)("RESTORE_TRASHED_FILES"),q=(0,s.N)("DELETE_FILES_PERMANENTLY"),Z=(0,s.N)("DELETE_FILES"),X=(0,v.nF)((e,r)=>{e.dispatch(Z(r)),e.dispatch((0,M.sM)({fileKeys:Object.keys(r.fileKeys)}))}),J=(0,s.N)("FILE_RESTORE"),Q=(0,v.nF)((e,r)=>{let{fileKey:n,version:i}=r,a=e.getState().versionHistory.versions.filter(e=>e.created_at).sort((e,r)=>e.created_at<r.created_at?-1:1),o=a.findIndex(e=>e.id===i.id);if(-1===o||0===o){e.dispatch(E.s.error("Unable to find version to restore"));return}let s=a[o-1];s?e.dispatch(J({fileKey:n,versionId:s.id})):e.dispatch(E.s.error("Unable to find version to restore"))}),ee=(0,v.nF)((e,r)=>{(0,c.Dk)(r.embedCode).then(()=>{(0,T.ds)("Embed Code Copied",r.fileKey,e.getState()),e.dispatch(b.F.enqueue({type:"embeded_code_copied_to_clipboard",message:(0,y.t)("file_browser.file_browser_actions.embed_code_copied")}))}).catch(()=>{e.dispatch(E.s.error((0,y.t)("file_browser.file_browser_actions.embed_code_copy_error")))})}),et=(0,k.n)((0,v.nF)((e,r)=>{let n;let i=r.url,a=r.label;if(a){let e=document.createElement("a");e.href=i,e.innerText=a;let r=e.outerHTML;n=(0,c.wY)(r,i)}else n=(0,c.Dk)(i);n.then(()=>{(0,T.ds)("File Share Link Copied",r.fileKey,e.getState(),{copyLinkSource:A.d[r.source],...r.trackingProperties}),r.skipVisualBell||e.dispatch(b.F.enqueue({type:"link_copied_to_clipboard",message:r.visualBellMessageOverride??(0,y.t)("copy_to_clipboard.link_copied_to_clipboard"),button:r.visualBellButton}))}).catch(()=>{e.dispatch(I.to({type:D.o,data:{link:i}}))})})),er=(0,v.nF)((e,r)=>{if(r.name.length<=100){let n={key:r.file.key,name:r.name,updated_at:new Date().toISOString()};e.dispatch(el({file:n,userInitiated:!0})),(0,T.ds)("File Renamed",n.key,e.getState(),{fileName:n.name})}}),en=(0,s.N)("FILE_REMOVE_FROM_PROJECT"),ei=(0,s.N)("FILE_MOVE"),ea=(0,s.N)("FILE_POST"),eo=(0,s.N)("FILE_BATCH_SUBSCRIBE_TO_REALTIME"),es=(0,s.N)("FILE_BATCH_PUT"),el=(0,s.N)("FILE_PUT"),ec=(0,a.s)((e,r)=>{let n=r.getState();n.activeFileUsers&&(e=e.filter(e=>!(e in n.activeFileUsers))),e.length&&f.Ay.post("/api/active_file_users",{keys:e}).then(({data:e})=>{!function(e,r,n=!1){let i=r.getState();for(let a in e){if(n&&i.activeFileUsers&&a in i.activeFileUsers)continue;let o=e[a],s=[];if(o)for(let e in o){let r=JSON.parse(o[e]);s.push(r)}r.dispatch(eu({fileKey:a,users:s}))}}(e.meta.active_file_users,r,!0)}).catch(e=>{})},1e3);(0,v.nF)((e,r)=>{ec(r.fileKeys,e)});let ed=(0,s.N)("FILE_CLEAR_ACTIVE_USERS"),eu=(0,s.N)("FILE_SET_ACTIVE_USERS")},225868:(e,r,n)=>{n.d(r,{ah:()=>l});var i=n(966712),a=n(456772),o=n(27087),s=n(980820);function l(e,r,n,i,o){e.id&&"optimistic-id"!==e.id?a.WB()?.optimisticallyUpdate({FileBrowserPreferences:{[e.id]:{orderedTeamIds:e.orderedTeamIds,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds,orderedSidebarSections:e.orderedSidebarSections,orgId:n,teamId:i,orderedLicenseGroupIds:e.orderedLicenseGroupIds}}},o):null!=r&&a.WB()?.optimisticallyCreate({FileBrowserPreferences:{"optimistic-id":{userId:r,migratedToSections:!0,sidebarMigrationStatus:null,orderedTeamIds:e.orderedTeamIds||null,orderedFavoritedResourceIds:e.orderedFavoritedResourceIds||null,orderedSidebarSections:e.orderedSidebarSections||null,updatedAt:new Date,createdAt:new Date,orgId:n,teamId:i,orderedLicenseGroupIds:e.orderedLicenseGroupIds||null}}},o)}(0,s.nF)((e,r)=>{let n=e.getState().user?.id,a=e.getState().currentUserOrgId,s=(0,i.kc)().ps_benchmark?e.getState().currentTeamId:null,c=o.Ay.put("/api/file_browser_preferences",{ordered_team_ids:r.prefs.orderedTeamIds,ordered_favorites:r.prefs.orderedFavoritedResourceIds,org_id:a,team_id:s,ordered_license_group_ids:r.prefs.orderedLicenseGroupIds,ordered_sidebar_sections:r.prefs.orderedSidebarSections});l(r.prefs,n,a,s,c)}),(0,s.nF)((e,r)=>{let n=e.getState().user?.id,i=e.getState().currentTeamId,a=r.teamUser,s=r.prefs.orderedFavoritedResourceIds,c=[];if(s)for(var d of s)(a.favoritedFiles?.some(e=>e.id===d)||a.favoritedPrototypes?.some(e=>e.id===d))&&c.push(d);let u=a.favoritedProjects?.filter(e=>r.orderedFolderSubscriptions.includes(e.resourceId)).map(e=>e.id)??[];c.push(...u);let m=o.Ay.put("/api/file_browser_preferences",{ordered_favorites:c,team_id:i});l({id:"optimistic-id",orderedFavoritedResourceIds:c},n,null,i,m)})},507877:(e,r,n)=>{n.d(r,{Dl:()=>ee,Dw:()=>X,Ef:()=>j,Fs:()=>q,UN:()=>z,V3:()=>W,Z8:()=>Q,_l:()=>H,dm:()=>Y,gN:()=>$,gR:()=>K,hm:()=>V,kg:()=>Z,q0:()=>G,qj:()=>B});var i=n(776250),a=n(511617),o=n(517333),s=n(737947),l=n(966712),c=n(187623),d=n(647899),u=n(877432),m=n(27087),p=n(939863),h=n(392592),_=n(794174),g=n(349410),f=n(988022),E=n(697551),y=n(369870),b=n(441088),v=n(540019),I=n(320741),T=n(707465),S=n(935757),w=n(349719),A=n(696915),C=n(451e3),N=n(622139),L=n(644344),O=n(637590),R=n(540351),P=n(52571),D=n(241136),k=n(159518),M=n(757406),F=n(980820),x=n(738269),U=n(662275);let B=(0,F.nF)((e,r)=>{e.getState().modalShown?.type!=null&&e.dispatch((0,U.Ce)()),e.getState().dropdownShown?.type!=null&&e.dispatch((0,x.oB)()),e.dispatch((0,x.DE)({show:!0})),r?.until.then(()=>{e.dispatch(x.DE({show:!1}))}),_.q.addDependency("FILE_BROWSER_SET_LOADING",r?.until||"pending")}),V=(0,F.nF)(e=>{P.H.getState().then(r=>{e.dispatch((0,x.os)(r.data.meta)),e.dispatch(G(r.data.meta))}).catch(r=>{let n=r.data?.message||(0,p.t)("file_browser.file_browser_actions.error_on_data_update");e.dispatch(h.F.enqueue({error:!0,message:n}))})}),G=(0,F.nF)((e,r)=>{new c.P().sendToOtherTabs(R.y,r)}),H=(0,F.nF)((e,r)=>{let n=e.getState(),i=r.view||{view:"recentsAndSharing"},l=(0,T.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},i),c=!(0,E.d9)(n.selectedView)&&(0,E.d9)(i);if(o.eD&&c){o.eD.openCommunity(l,r.workspace.userId);return}function d(){let e=(0,E.d9)(n.selectedView)&&!(0,E.d9)(i);o.eD&&e&&s.Ay.redirect((0,a.dR)((0,T.Np)({...n,currentUserOrgId:r.workspace.orgId,currentTeamId:r.workspace.teamId||null},n.selectedView),{fuid:r.workspace.userId}))}if(e.dispatch(B()),r.path){(0,f.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,teamId:n.currentTeamId,newTeamId:r.workspace.teamId,view:n.selectedView.view,newPath:r.path}),s.Ay.redirect((0,a.dR)(r.path,{fuid:r.workspace.userId})),d();return}(0,f.uE)("account_switched",n,{newUserId:r.workspace.userId,orgId:n.currentUserOrgId,newOrgId:r.workspace.orgId,view:n.selectedView.view,newView:i.view,newTeamId:r.workspace.teamId,teamId:n.currentTeamId}),(r.workspace.orgId&&!l.includes(r.workspace.orgId)||r.workspace.teamId&&!l.includes(r.workspace.teamId)||(0,E.d9)(i)&&!r.workspace.orgId&&n.currentUserOrgId)&&(0,S.Y9)(r.workspace.userId,(0,E.d9)(i),r.workspace.orgId,void 0,r.workspace.teamId),(0,y.ck)()?M.m({action:"reloadPage",payload:{fuid:r.workspace.userId}}):(s.Ay.redirect((0,a.dR)(l,{fuid:r.workspace.userId})),d())});(0,F.nF)(e=>{m.Ay.post("/api/session/app_auth",{app_type:"desktop"}).then(({data:r})=>{let n=r.meta.id,i=`/app_auth/${n}/grant`,a=e.getState().authedUsers.orderedIds;a.length>0&&(i+=`?authed_ids=${a.join(",")}`),o.eD?.startAppAuth(i),e.dispatch(h.F.enqueue({message:(0,p.t)("file_browser.file_browser_actions.desktop_go_to_your_browser")}))}).catch(r=>{console.error(r),e.dispatch(h.F.enqueue({message:(0,p.t)("file_browser.error_try_again"),error:!0}))})}),(0,F.nF)((e,r)=>{e.getState().dropdownShown||e.dispatch((0,x.j7)(r))});let K=(0,F.nF)((e,r)=>{let n=e.getState().dropdownShown;n?.type===r.type?e.dispatch((0,x.oB)()):e.dispatch((0,x.j7)(r))}),W=(0,F.nF)((e,r)=>{(0,b.T)()?(0,w.Qn)(r.url):s.Ay.redirect(r.url,"_blank")});function $(e,r={}){return(0,x.$T)({view:"folder",folderId:e,...r})}function Y(e,r={},n){return(0,x.$T)({view:"team",teamId:e,...r,teamViewTab:n})}(0,F.nF)((e,{index:r})=>{(0,i.sx)("Recent File Clicked",{index:r},{forwardToDatadog:!0})});let z=(0,F.nF)((e,{fileKey:r,entrypoint:n,currentPlanFilter:i,currentSharedByFilter:a,viewMode:o})=>{(0,f.k1)(r,{state:e.getState(),entrypoint:n,planFilterId:i?.planId,planFilterType:i?.planType,sharedByFilter:a,viewMode:o})}),j=(0,F.nF)(e=>{(0,f.uE)("Font Installer Downloaded",e.getState())}),q=(0,F.nF)(e=>{(0,f.uE)("Font Uninstaller Downloaded",e.getState())}),Z=(0,F.nF)((e,{clickedResourceType:r,resourceIdOrKey:n})=>{(0,f.uE)("File Browser Nav Tree Clicked",e.getState(),{clickedResourceType:r,resourceIdOrKey:n})});v.M4.Query({fetch:async e=>(await D.p.getTrashedFilesV2(e)).data.meta,schema:e=>e.object({files:e.array(A.L.nullable()),repos:e.array(e.object({repo:L.z.nullable(),main_file:A.L.nullable()}))}),output:({data:e})=>({files:e.files.filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1),repos:e.repos.filter(e=>!!e.repo&&!!e.repo.trashed_at&&!e.repo.deleted_at).sort((e,r)=>new Date(e.repo.trashed_at)<new Date(r.repo.trashed_at)?1:-1)})}),v.M4.Query({fetch:async e=>(await k.V.getTrashedFolders(e)).data.meta,schema:e=>e.object({folders:e.array(C.lH.extend({touched_at:e.string()}))}),output:({data:e})=>({folders:e.folders.map(e=>({...e,touched_at:""})).filter(e=>!!e&&!!e.trashed_at&&!e.deleted_at).sort((e,r)=>new Date(e.trashed_at)<new Date(r.trashed_at)?1:-1)})}),(0,F.nF)((e,{orgId:r,teamId:n},{loadingKey:i})=>{let a=D.p.getTrashedFilesV2({orgId:r||"",teamId:n||""});(0,I.N)(a,e,i),a.then(r=>{let n=JSON.parse(r.response);e.dispatch((0,x.pB)({deletedFiles:n.meta.files})),e.dispatch((0,x.pg)({deletedRepos:n.meta.repos}))})});let X=(0,F.nF)(async(e,{previousView:r,openInNewTab:n,onSubmitReturnToPrevView:i,isEduTeam:a,ignoreCurrentPlan:o})=>{let s=e.getState();if(n){let r=(0,T.xS)(s,{view:"teamCreation",ignoreCurrentPlan:o});e.dispatch(W({url:r}));return}if(s.user&&(0,l.kc)().close_starter_team_loophole){let n=(0,d.hW)("starter_team_loophole_experiment_m0"),i=(0,d.hW)("starter_team_loophole_experiment_m1"),[l,c]=await Promise.all([n,i]);if((0,g.e5)({userId:s.user.id,teams:Object.values(s.teams),rolesByTeamId:s.roles.byTeamId,getM0Config:()=>l,getM1Config:()=>c})){e.dispatch((0,x.$T)({view:"teamUpgrade",teamFlowType:O.SC.CREATE_AND_UPGRADE,teamId:null,paymentStep:N.tn.PLAN_COMPARISON,previousView:r,isEduTeam:a,ignoreCurrentPlan:o}));return}}s.user&&(0,g.Mk)(s.user.id,Object.values(s.teams),s.roles.byTeamId)?e.dispatch((0,x.$T)({view:"teamUpgrade",teamFlowType:O.SC.CREATE,teamId:null,paymentStep:N.tn.CREATE_TEAM,previousView:r,isEduTeam:a,ignoreCurrentPlan:o})):e.dispatch((0,x.$T)({view:"teamCreation",previousView:r,onSubmitReturnToPrevView:i,isEduTeam:a,ignoreCurrentPlan:o}))}),J=null,Q=(0,F.nF)((e,r)=>{var n;J&&(n=r.selectedView,(0,O.QB)(n))&&s.Ay.reload("Handling pending reload",J.metadata)}),ee=(0,F.nF)(async(e,r)=>{let n=r.now?2e3:Math.random()*r.maxWaitTime;await (0,u.fm)(n);let i=e.getState().selectedView;"orgSelfServe"===i.view?e.dispatch((0,x.$T)({view:i.view,step:i.step,orgMigrated:!0,upsellSource:i.upsellSource})):(0,O.QB)(i)?s.Ay.reload("Reloading when convenient",r.metadata):J={metadata:r.metadata}})},270056:(e,r,n)=>{n.d(r,{$l:()=>k,$o:()=>T,HA:()=>A,IU:()=>N,Kc:()=>P,MR:()=>w,Q2:()=>v,TI:()=>F,WC:()=>x,ZJ:()=>O,bE:()=>M,gO:()=>S,ub:()=>b,vt:()=>L,y2:()=>R,yH:()=>C,yJ:()=>D,z6:()=>I});var i=n(167249),a=n(790724),o=n(27087),s=n(881388),l=n(939863),c=n(392592),d=n(738269),u=n(662275),m=n(988022),p=n(875847),h=n(99506),_=n(416618),g=n(668860),f=n(344950),E=n(980820),y=n(936500);let b=(0,E.nF)((e,r)=>o.Ay.put(`/api/folders/${r.folderId}/description`,{description:r.description}).then(({data:r})=>{e.dispatch(D({folder:r.meta}))}).catch(r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_subscription_error")))})),v=(0,i.N)("FOLDER_UNPIN_FILE"),I=(0,E.nF)((e,r)=>{let n=e.optimisticDispatch(v(r));return o.Ay.del(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit()}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_unpin_error")))})}),T=(0,i.N)("FOLDER_PIN_FILE"),S=(0,E.nF)(async(e,r)=>{let n=e.optimisticDispatch(T(r));(0,m.xr)("file_browser_folder_pin_file",r.folderId,null,e.getState(),{fileKey:r.fileKey}),await o.Ay.post(`/api/folders/${r.fileKey}/pin`).then(()=>{n.commit(),e.dispatch(c.F.enqueue({error:!1,message:(0,l.t)("file_browser.file_browser_actions.file_pinned_to_project")}))}).catch(()=>{n.revert(),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.file_pin_error")))})}),w=(0,i.N)("FOLDER_SET_PINNED_FILE"),A=(0,i.N)("FOLDER_DELETE_LG_SHIM"),C=(0,i.N)("FOLDER_DELETE"),N=(0,i.N)("FOLDER_CLEAR"),L=(0,E.nF)((e,r)=>{let n=(0,p.SS)(r.name);if(n)return e.dispatch(s.s.error(n)),null;if(e.dispatch(u.Lo()),e.dispatch(d.bx()),void 0===r.isInviteOnly&&void 0===r.isViewOnly&&void 0===r.teamAccess)return e.dispatch(s.s.error("inviteOnly and viewOnly fields or teamAccess field must be defined")),null;let i={id:(0,p.d)(),name:r.name,description:null,path:r.name,team_id:r.teamId,is_subscribed:!1,is_favorited:!1,created_at:`${new Date}`,updated_at:`${new Date}`,is_invite_only:!1,is_view_only:!1,settings:{webhooks:{}},deleted_at:null,sharing_audience_control:null,team_access:null,trashed_at:null,trashed_user_id:null,is_abandoned_drafts:!1},c=o.Ay.post("/api/folders",{team_id:r.teamId,path:r.name,is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly,sharing_audience_control:r.sharingAudienceControl,team_access:r.teamAccess}).then(({data:n})=>{e.dispatch(C({folderIds:[i.id]}));let a=n.meta;for(let n of a)if(n.name===r.name){e.dispatch(M(n)),r.onFolderCreated&&r.onFolderCreated(n.id,n.name),(0,m.xr)("Folder Created",n.id,n.team_id,e.getState(),{sharingAudienceControl:r.sharingAudienceControl,teamAccess:r.teamAccess});let i=e.getState().user;r.inviteEmails?.length&&r.teamAccess&&e.dispatch((0,_.rq)({emails:r.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:h.vt.FOLDER,resourceIdOrKey:n.id,level:r.inviteLevel||g.e6.VIEWER,source:"new_project_creation_modal"})),f.G.getRoles({resourceId:n.id,resourceType:h.vt.FOLDER}).then(({data:r})=>{for(let n of r.meta)e.dispatch(y.bE({role:n}))}),r.shouldRedirect&&e.dispatch(d.$T({view:"folder",folderId:n.id}));break}return a});return(0,a.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.create_project_error"),next:e.dispatch,action:M(i)})}),O=(0,E.nF)((e,{folderId:r,teamId:n,isSubscribed:i})=>{let s=i?"Folder Subscriber Added":"Folder Subscriber Deleted";(0,m.xr)(s,r,n,e.getState());let c=o.Ay.put(`/api/folders/${r}`,{is_subscribed:i});(0,a.Q)({store:e,requestPromise:c,fallbackError:(0,l.t)("file_browser.file_browser_actions.update_project_error"),next:e.dispatch,action:D({folder:{id:r,is_subscribed:i}})})});(0,i.N)("FOLDER_LOAD");let R=(0,i.N)("FOLDER_PUT_UPDATED_AT"),P=(0,i.N)("FOLDER_LOADED"),D=(0,i.N)("FOLDER_PUT"),k=(0,i.N)("FOLDER_BATCH_POST"),M=(0,i.N)("FOLDER_POST"),F=(0,i.N)("FOLDER_STOP_RENAME"),x=(0,i.N)("FOLDER_BEGIN_RENAME")},293017:(e,r,n)=>{n.d(r,{Bs:()=>ei,CN:()=>ey,D9:()=>H,Dr:()=>J,FP:()=>V,Gm:()=>U,J4:()=>ef,JM:()=>G,Jt:()=>M,Kx:()=>Y,M3:()=>eN,Mt:()=>j,OB:()=>eO,PQ:()=>D,QA:()=>O,Ql:()=>X,Qm:()=>eI,R5:()=>x,Rw:()=>P,ST:()=>R,U8:()=>W,UC:()=>eL,UM:()=>eg,Uv:()=>q,VB:()=>el,Wk:()=>eo,XE:()=>er,XQ:()=>ep,Y:()=>z,Y6:()=>eh,Z1:()=>eb,Z_:()=>e_,aK:()=>ev,bO:()=>eA,bS:()=>Z,eH:()=>eC,fG:()=>$,fk:()=>ed,fy:()=>ec,ho:()=>eR,il:()=>K,kP:()=>em,lp:()=>eT,lz:()=>F,nA:()=>ew,nN:()=>ea,p5:()=>eu,pj:()=>k,re:()=>eE,sx:()=>B,u1:()=>en,vg:()=>es,yv:()=>eS});var i=n(922827),a=n(167249),o=n(776250),s=n(511617),l=n(517333),c=n(737947),d=n(966712),u=n(712366),m=n(47506),p=n(939863),h=n(738269),_=n(662275),g=n(626783),f=n(259927),E=n(988022),y=n(356390),b=n(630331),v=n(573955),I=n(643067),T=n(707465),S=n(984968),w=n(945020),A=n(567088),C=n(723127),N=n(553841),L=n(980820);let O=(0,a.N)("SET_SHOW_EDIT_BUTTON"),R=(0,a.N)("CLEAR_SELECTED_VIEW_COMMENT_ID"),P=(0,a.N)("UPDATE_RECENTLY_USED_QUICK_COMMAND"),D=(0,a.N)("RECENTLY_USED_QUICK_COMMANDS"),k=(0,a.N)("FULLSCREEN_UPDATE_CANVAS_MENTION_POPUP_POSITION"),M=(0,a.N)("FULLSCREEN_SET_CANVAS_MENTION_POPUP"),F=(0,a.N)("FULLSCREEN_UPDATE_HYPERLINK_POPUP_POSITION"),x=(0,a.N)("FULLSCREEN_SET_HYPERLINK_POPUP"),U=(0,a.N)("FULLSCREEN_SET_EYEDROPPER"),B=(0,L.nF)((e,r)=>{let n=e.getState(),i=r.params||{},{fileKey:a}=n.selectedView;(0,E.ds)(r.name,a??null,n,i)}),V=(0,a.N)("FULLSCREEN_SET_LEFT_PANEL_TAB"),G=(0,a.N)("FULLSCREEN_SHOW_FILE_CREATION_FAILURE_BANNER"),H=(0,a.N)("FULLSCREEN_HIDE_UPGRADE_BANNER"),K=(0,a.N)("FULLSCREEN_SHOW_UPGRADE_BANNER"),W=(0,a.N)("FULLSCREEN_SET_PREFERRED_VALUES_PICKER_LIST_LAYOUT"),$=(0,a.N)("FULLSCREEN_SET_INSTANCE_SWAP_PICKER_LIST_LAYOUT"),Y=(0,a.N)("FULLSCREEN_SET_PICKER_LIST_LAYOUT"),z=(0,L.nF)((e,r)=>{(0,o.sx)("Style Picker View Changed",{styleType:"FILL",oldViewMode:r.isListLayout?"GRID":"LIST",newViewMode:r.isListLayout?"LIST":"GRID"}),e.dispatch(Y(r))}),j=(0,a.N)("FULLSCREEN_SHOULD_SHOW_STACK_ALIGNMENT_PICKER"),q=(0,a.N)("FULLSCREEN_HIDE_STYLE_PICKER"),Z=(0,a.N)("FULLSCREEN_SHOW_STYLE_PICKER"),X=(0,a.N)("FULLSCREEN_HIDE_PICKER"),J=(0,a.N)("FULLSCREEN_SHOW_PICKER");function Q(e){return e&&e.startsWith(f.F7)}function ee(e){return e&&e.startsWith(f.yJ)}function et(e,r,n){let a=e&&e.id,s=r&&r.id,l=a!==f.k8&&s===f.k8,c=a===f.k8&&s!==f.k8,d=a!==f.$T&&s===f.$T,u=a===f.$T&&s!==f.$T,m=a!==f.AB&&a!==f.h2&&(s===f.AB||s===f.h2),p=(a===f.AB||a===f.h2)&&s!==f.AB&&s!==f.h2,h=a!==f._V&&s===f._V,_=a===f._V&&s!==f._V,E=!Q(a)&&Q(s),b=Q(a)&&!Q(s),v=!ee(a)&&ee(s),I=ee(a)&&!ee(s);l?i.Ez5.uiState().backgroundPickerOpen.set(!0):c?i.Ez5.uiState().backgroundPickerOpen.set(!1):d?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!0}):u?y.Y5.updateAppModel({prototypeBackgroundPickerOpen:!1}):m?(i.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!0),(0,o.sx)("Type Details Panel Opened")):p&&i.Ez5.propertiesPanelState().typeDetailsPanelOpen.set(!1),E?i.Osy.setIsPaintPickerOpen(!0):b&&i.Osy.setIsPaintPickerOpen(!1),v?i.Osy.setIsStylePickerOpen(!0):I&&i.Osy.setIsStylePickerOpen(!1),h?i.Ez5.uiState().minMaxModalShown.set(!0):_&&i.Ez5.uiState().minMaxModalShown.set(!1),b&&n(g.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))}let er=(0,L.nF)(e=>{let r=e.getState().pickerShown;e.dispatch(X()),et(r,e.getState().pickerShown,e.dispatch)}),en=(0,L.nF)((e,r)=>{let n=e.getState().pickerShown;e.dispatch(J(r)),et(n,e.getState().pickerShown,e.dispatch)}),ei=(0,a.N)("FULLSCREEN_UPDATE_LOCAL_FONT_AGENT_VERSION"),ea=(0,a.N)("FULLSCREEN_UPDATE_FONT_LIST"),eo=(0,a.N)("FULLSCREEN_STOP_RENAMING"),es=(0,a.N)("FULLSCREEN_BEGIN_RENAMING"),el=(0,L.nF)((e,r)=>{let n=e.getState(),a=r.newSelectedView;if(n.saveStatus&&n.saveStatus.hasUnsavedChanges&&n.saveStatus.tabCloseText!==i.E63.SUPPRESS_UNSAVED_CHANGES_UI){if(!(0,v.Ed)(()=>e.dispatch(eC()))){let r=(0,p.t)("autosave.unable_to_leave_document.unsaved_changes_save_in_background");e.dispatch(_.to({type:N.v,data:{message:r}}))}c.Ay.push((0,T.Np)(n,a),{...e.getState().selectedView,previousSelectedView:r.oldSelectedView,jsCommitHash:(0,d.tl)().release_manifest_git_commit}),e.dispatch(h.$T(r.oldSelectedView))}else n.saveStatus&&n.saveStatus.tabCloseText===i.E63.SUPPRESS_UNSAVED_CHANGES_UI&&(0,o.sx)("suppress_unsaved_changes_ui",{},{forwardToDatadog:!0}),e.dispatch(h.$T({...a,fromPopstate:!0}))}),ec=(0,a.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_THUMBNAIL_URL"),ed=(0,a.N)("FULLSCREEN_UPDATE_SELECTED_STYLE_PROPERTIES"),eu=(0,a.N)("FULLSCREEN_UPDATE_MIRROR"),em=(0,a.N)("FULLSCREEN_SET_NEEDS_UPGRADE"),ep=(0,a.N)("FULLSCREEN_SET_FILE_VERSION"),eh=(0,a.N)("FULLSCREEN_SET_PROGRESS_BAR_STATE"),e_=(0,a.N)("FULLSCREEN_STOP_OBSERVING_OTHER_USER"),eg=(0,a.N)("FULLSCREEN_UPDATE_MULTIPLAYER_STATE"),ef=(0,L.nF)((e,r)=>{void 0!==r.allUsers&&(b.k6(r.allUsers.length,r.presenterSessionID),(0,m.YQ)({id:w.M8})),e.dispatch(eg(r))}),eE=(0,a.N)("FULLSCREEN_SHOW_DOWNTIME_BANNER"),ey=(0,a.N)("FULLSCREEN_HIDE_DOWNTIME_BANNER"),eb=(0,a.N)("FULLSCREEN_HIDE_OPEN_DESKTOP_APP_MODAL"),ev=(0,a.N)("FULLSCREEN_SHOW_OPEN_DESKTOP_APP_MODAL"),eI=(0,a.N)("FULLSCREEN_RECONNECTING_SUCCEEDED"),eT=(0,L.nF)(e=>{b.Dg(),e.dispatch(eI())}),eS=(0,a.N)("FULLSCREEN_RECONNECTING_STARTED"),ew=(0,L.nF)(e=>{b.Ug(),e.dispatch(eS())}),eA=(0,a.N)("FULLSCREEN_ATTEMPT_CLOSE"),eC=(0,L.nF)((e,r)=>{if(l.eD){l.eD.showFileBrowser(),r?.closeCurrentDesktopTab&&l.eD.close({suppressReopening:!0,shouldForceClose:!0});return}if(s.GZ()){if((0,d.kc)().integ_zoom_allow_file_switching&&(0,u.LR)())return;c.Ay.redirect("/","_blank");return}let n=e.getState(),{openFile:a,selectedView:o}=n,m=a?.project?.id,p=(0,d.kc)().ps_benchmark,_={view:"recentsAndSharing"};if(a&&o){let e=a.parentOrgId||C.P;if(p&&"fullscreen"===o.view&&n.lastVisitedPlan&&n.lastVisitedPlan.planId!==(n.lastVisitedPlan.planType===A.O.ORG?a?.parentOrgId:a?.teamId)){let e=(0,T.xS)(n,_);o.prevSelectedView&&(e=(0,T.xS)(n,o.prevSelectedView));let r=(0,I.nX)(e),i=(0,S.Eq)(e);(r||i)&&(e=(0,T.Tk)(e,r?A.O.ORG:A.O.TEAM,r||i,n.lastVisitedPlan.planType,n.lastVisitedPlan.planId)),c.Ay.redirect(e);return}if(!p&&"fullscreen"===o.view&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==e){let e=(0,T.xS)(n,_);o.prevSelectedView&&(e=(0,T.xS)(n,o.prevSelectedView));let r=(0,I.nX)(e);if(!r&&n.lastVisitedPlanId&&n.lastVisitedPlanId!==C.P){let r=e.split("files/");e=r[0]+`files/${n.lastVisitedPlanId}/`+r[1]}else if(r&&r!==n.lastVisitedPlanId){let i=n.lastVisitedPlanId===C.P?"":n.lastVisitedPlanId,a=n.lastVisitedPlanId===C.P?`/${r}`:r;e=e.replace(a,i)}c.Ay.redirect(e);return}"fullscreen"===o.view&&o.prevSelectedView?_=o.prevSelectedView:a&&m&&(_={view:"folder",folderId:m})}if(i.Ez5?.uiState().isRecovery.getCopy()){let e=(0,T.xS)(n,_);c.Ay.redirect(e)}y.Y5.dispatchIfSaved(h.$T(_)),b.V(),e.dispatch(eA(r))}),eN=(0,a.N)("FILE_SELECTED_SHARE_MODAL_TAB"),eL=(0,a.N)("UPDATE_OPEN_FILE"),eO=(0,a.N)("NEW_FILE_LOADED"),eR=(0,a.N)("FULLSCREEN_OPEN")},994988:(e,r,n)=>{n.d(r,{HF:()=>h,QA:()=>E,TW:()=>g,Zv:()=>p,kE:()=>m,mH:()=>_,tG:()=>u,zs:()=>f});var i=n(167249),a=n(27087),o=n(939863),s=n(392592),l=n(980820),c=n(404717),d=n(440535);let u=(0,i.N)("GENERIC_COMMENT_COMMIT_CREATED_COMMENT"),m=(0,i.N)("GENERIC_COMMENT_COMMIT_EDITED_COMMENT"),p=(0,i.N)("GENERIC_COMMENT_COMMIT_DELETED_COMMENT"),h=(0,i.N)("GENERIC_COMMENT_COMMIT_HIDE_COMMENT");(0,l.nF)(async(e,r)=>{let{authorId:n,removeCommentsCallback:i}=r,a=e.getState().communityHub.comments,{activeFeedType:o,commentsById:s,id:l,type:c}=a;if(!l||!c||!a.feeds[o]?.feed)return;let d=[];for(let e in s)s[e]?.author.id===n&&d.push(s[e]);await i(d),e.dispatch(p({resourceType:c,resourceId:l,comments:d}))});let _=(0,i.N)("GENERIC_COMMENT_SET_SHOW_RESOLVED");(0,i.N)("GENERIC_COMMENT_SAVE_PAGE_SCROLL_POSITION");let g=(0,i.N)("GENERIC_COMMENT_RESET_COMMENT_STATUS"),f=(0,i.N)("GENERIC_COMMENT_SUBMIT");(0,l.nF)(async(e,r)=>{let{messageMeta:n,resourceId:i,resourceType:l,onSuccess:c,onError:m,clientMeta:p,pageId:h,parentId:_,isReply:E}=r;await a.Ay.post("/api/community_comments",{message_meta:n,resource_id:i,resource_type:l,client_meta:p,page_id:h,parent_id:_}).then(({data:r})=>{e.dispatch(u({comment:r.meta,resourceId:i,resourceType:l,isReply:E})),c&&c(r.meta)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_create_comment",{errorMessage:n})})),_?e.dispatch(g({commentId:_})):e.dispatch(g({commentId:d.hm})),m&&m())}),e.dispatch(f(r))},({resourceId:e})=>`GENERIC_COMMENT_SUBMIT_${e}`);let E=(0,l.MM)("GENERIC_COMMENT_EDIT",async(e,r,{optimistId:n})=>{let{commentId:i,messageMeta:l,callback:d,clientMeta:u}=r;await a.Ay.put(`/api/community_comments/${i}`,{message_meta:l,client_meta:u}).then(({data:r})=>{e.dispatch(c.c(n)),d(r.meta),e.dispatch(m({comment:r.meta}))}).catch(r=>{e.dispatch(c.r(n)),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_edit_comment"),error:!0}))})});(0,l.nF)((e,r,{loadingKey:n})=>{let{commentId:i,onFinish:l}=r,{type:c,id:d}=e.getState().communityHub.comments;if(null===c||null===d)return;let u=e.getState().communityHub.comments.commentsById[i];a.Ay.del(`/api/community_comments/${i}`).then(()=>{e.dispatch(p({resourceType:c,resourceId:d,comments:[u]})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_deleted")})),l?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({error:!0,message:(0,o.t)("community.comments.failed_to_delete_comment",{errorMessage:n})})),l?.(!0))})},({commentId:e})=>`GENERIC_COMMENT_DELETE_${e}`),(0,l.nF)((e,r)=>{let n;let{commentId:i,userIsAdmin:l,onFinish:c}=r,{type:d,id:u}=e.getState().communityHub.comments;null!==d&&null!==u&&(l&&(n={hide:!0}),a.Ay.post(`/api/community_comments/${i}/report`,n).then(()=>{e.dispatch(h({commentId:i,resourceId:u,resourceType:d})),e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.comment_reported_and_hidden"),type:"COMMENT_REPORTED"})),c?.(!1)}).catch(r=>{let n=(0,o.Jv)(r);n&&(e.dispatch(s.F.enqueue({message:(0,o.t)("community.comments.failed_to_report_comment",{errorMessage:n}),type:"COMMENT_REPORT_ERROR"})),c?.(!0))}))})},950949:(e,r,n)=>{n.d(r,{f:()=>m});var i=n(881388),a=n(939863),o=n(392592),s=n(662275),l=n(320741),c=n(280945),d=n(661239),u=n(980820);let m=(0,u.nF)((e,{fileKey:r,emailAddress:n,isResentEmail:s,onSuccess:d},{loadingKey:u})=>{let m=c.L.setClaimEmail({fileKey:r,emailAddress:n});(0,l.N)(m,e,u),m.then(()=>{if(s){e.dispatch(o.F.enqueue({message:(0,a.t)("google_device_try_file_modal.resent_email.visual_bell")}));return}d?.(n)}).catch(r=>{if(r.data?.message==="Hit Claim Email Job timeout lock"){e.dispatch(o.F.enqueue({message:(0,a.t)("google_device_try_file_modal.resent_email.email_resent")}));return}e.dispatch(i.s.error((0,a.t)("google_device_try_file_modal.enter_email.failed_to_send")))})});(0,u.nF)((e,{fileKey:r},{loadingKey:n})=>{let o=c.L.claimDeviceFile({fileKey:r});(0,l.N)(o,e,n),o.then(()=>{e.dispatch(s.to({type:d.$,data:{}}))}).catch(r=>{e.dispatch(i.s.error((0,a.t)("google_device_try_file.save_board.generic_error")))})})},22774:(e,r,n)=>{n.d(r,{FU:()=>s,v6:()=>c,yu:()=>l});var i=n(167249),a=n(47506),o=n(980820);let s=(0,i.N)("SET_KEYBOARD_SHORTCUT_PANEL_TAB"),l=(0,i.N)("USED_KEYBOARD_SHORTCUT"),c=(0,o.nF)((e,r)=>{"paste"===r.key&&(0,a.YQ)({id:"Used Keyboard Shortcut Paste"}),e.dispatch(l(r))})},271245:(e,r,n)=>{n.d(r,{QC:()=>G,fi:()=>U,zK:()=>V});var i=n(966664),a=n(268853),o=n(966712),s=n(418956),l=n(776621),c=n(27087),d=n(154483),u=n(868389),m=n(980820),p=n(944682),h=n(395281),_=n(632430),g=n(182976),f=n(453681),E=n(416095),y=n(220499),b=n(933342),v=n(666068),I=n(336599),T=n(707465),S=n(935757),w=n(239671),A=n(173454),C=n(809073),N=n(656012),L=n(705129);let O=new Map,R=(0,d.fv)();async function P(e,r){let n=(0,T.zg)(e.getState().selectedView),i=!(0,o.Ay)().user_data;if(i&&!n)return;if((O.get(r)||0)>20){(0,E.LC)();return}let c=(0,L.yD)(r);if(!(0,I.Sc)(e.getState().loadingState,c)){(0,E.LC)();return}e.dispatch(g.Cx({key:c}));let d=e.getState();try{let n=d.selectedView.editorType,m=function(e){switch(e){case w.nT.Whiteboard:return"figjam";case w.nT.Slides:return"slides";default:return"design"}}(n),_=N.Z.getLibrarySubscribedComponentsEditorType({key:r,editorType:m}),[y]=await Promise.all([_]);i||await S.kb.promise,e.dispatch(p.uo({files:y.data.meta.files,subscribeToRealtime:!0})),y.data.meta.files.forEach(e=>{(0,E.Ve)(e.key)});let v=e.getState().fileByKey,I=s.zl.get(f.qp),T=y.data.meta.hub_files;T&&(T.forEach(e=>{(0,E.Ve)(e.id)}),e.dispatch((0,u.D3)(T)));let C=y.data.meta.state_groups.map(e=>({...e,team_id:(0,o.kc)().ds_use_lib_keys?I[e.library_key]?.team_id:v[R(e)]?.team_id})),L=y.data.meta.components.map(e=>({...e,team_id:(0,o.kc)().ds_use_lib_keys?I[e.library_key]?.team_id:v[R(e)]?.team_id}));if(e.dispatch(h.uo({items:C,type:A.PW.STATE_GROUP})),e.dispatch(h.uo({items:L,type:A.PW.COMPONENT})),(0,o.kc)().dse_lk_realtime_audit){let e=L.filter(e=>!e.library_key),r=C.filter(e=>!e.library_key);(e.length>0||r.length>0)&&(0,l.$D)(a.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("Missing library keys for components or state groups"),{tags:{numComponentsWithMissingLibraryKeys:e.length,numStateGroupsWithMissingLibraryKeys:r.length}})}(0,E.LC)(),e.dispatch(g.x2({key:c})),b.YG.queryDidChange(e)}catch(n){(0,E.LC)(),O.set(r,(O.get(r)||0)+1),e.dispatch(g.of({key:c}))}}async function D(e){let r=e.getState().openFile;if(!r)return;let n=(0,E.iw)(r.key),a=e.getState().loadingState;if(!((0,I.D2)(a,n)||(0,I.VP)(a,n))){e.dispatch(g.Cx({key:n}));try{let r=e.getState().selectedView;if("fullscreen"!==r.view)return;let a=await N.Z.getDefaultLibraries({editorType:(0,w.Bu)(r.editorType)});M(e,a.data.meta.components,A.PW.COMPONENT),M(e,a.data.meta.state_groups,A.PW.STATE_GROUP),a.data.meta.files.forEach(r=>{r.team_id=A.Yu,e.dispatch(p.yJ({file:r}))});let s=a.data.meta.files.map(e=>e.key),l=a.data.meta.files.map(y.l).filter(i.Vq);if(e.dispatch(h.Vk({fileKeys:s})),e.dispatch(h.lx({libraryKeys:l})),r.editorType===w.nT.Whiteboard&&(0,o.kc)().figjam_diagramming_improvements_v1){let r=await N.Z.getDefaultLibraries({editorType:"whiteboard_shapes"});F(e,r.data.meta.components,A.PW.COMPONENT),F(e,r.data.meta.state_groups,A.PW.STATE_GROUP),r.data.meta.files.forEach(r=>{r.team_id=A.Yu,e.dispatch(p.yJ({file:r}))});let n=r.data.meta.files.map(e=>e.key),a=r.data.meta.files.map(y.l).filter(i.Vq);e.dispatch(h.MI({shapeFileKeys:n})),e.dispatch(h.yi({libraryKeys:a}))}(0,E.kG)(),e.dispatch(g.x2({key:n}))}catch(r){(0,E.kG)(),e.dispatch(g.of({key:n})),b.YG.queryDidChange(e)}}}let k=(0,d.fv)(),M=(e,r,n)=>{let i={[A.Yu]:{}},a={};r.forEach(e=>{let r=k(e=(0,v.aV)(e));i[A.Yu][r]=i[A.Yu][r]||{},i[A.Yu][r][e.node_id]=e,(a[e.library_key]??={})[e.node_id]=e}),e.dispatch(h.Ho({publishedItemsByTeamId:i,publishedItemsByLibraryKey:a,type:n}))},F=(e,r,n)=>{let i={[A.Yu]:{}},a={};r.forEach(e=>{let r=k(e=(0,v.aV)(e));i[A.Yu][r]=i[A.Yu][r]||{},i[A.Yu][r][e.node_id]=e,(a[e.library_key]??={})[e.node_id]=e}),e.dispatch(h.g9({publishedItemsByTeamId:i,publishedItemsByLibraryKey:a,type:n}))};(0,m.nF)(e=>{let r=e.getState(),n=!!r.user;if(!r.openFile?.key)return;let i=e.getState().selectedView;i&&"fullscreen"===i.view&&(i.editorType===w.nT.Whiteboard||i.editorType===w.nT.Slides?D(e):(0,E.kG)(),n&&B(e,i.editorType===w.nT.Whiteboard?C.$A.FigJam:C.$A.Design)),n&&(e.dispatch(_.tg()),_.xZ(e))});let x=(0,d.fv)(),U="FETCH_RECENTLY_USED_LIBRARY_ITEMS";async function B(e,r){let n;if((0,I.VP)(e.getState().loadingState,U))return;e.dispatch(g.Cx({key:U})),(0,o.kc)().dse_instance_swap_perf||await E.NW;let i=e.getState();if("fullscreen"!==i.selectedView.view){e.dispatch(g.x2({key:U}));return}let a=new Set,l=new Set;for(let e of i.recentlyUsed.libraryItems[r]){let r=x(e);e.type!==A.PW.COMPONENT||!e.key||(e.library_key?i.library.publishedByLibraryKey.components[e.team_id]?.[e.library_key]?.[e.node_id]:i.library.published.components[e.team_id]?.[r]?.[e.node_id])?e.type!==A.PW.STATE_GROUP||!e.key||(e.library_key?i.library.publishedByLibraryKey.stateGroups[e.team_id]?.[e.library_key]?.[e.node_id]:i.library.published.stateGroups[e.team_id]?.[r]?.[e.node_id])||l.add(e.key):a.add(e.key)}if(0===a.size&&0===l.size){e.dispatch(g.x2({key:U}));return}try{n=await c.Ay.post("/api/design_systems/components_state_groups",{component_keys:Array.from(a),state_group_keys:Array.from(l),org_id:i.openFile?.parentOrgId})}catch(r){e.dispatch(g.of({key:U}));return}e.dispatch(g.x2({key:U})),e.dispatch(p.uo({files:n.data.meta.files,subscribeToRealtime:!1})),e.dispatch(h.dC({subscribedOldKeyToNewKey:n.data.meta.move_remappings,localOldGuidToNewKey:{}}));let d=e.getState().fileByKey,u=s.zl.get(f.qp);_.VF(n.data.meta.components,A.PW.COMPONENT,d,u,e.dispatch),_.VF(n.data.meta.state_groups,A.PW.STATE_GROUP,d,u,e.dispatch)}let V=(0,m.nF)(e=>{let r=e.getState().openFile;r&&P(e,r.key)});function G(e){e.dispatch(V())}},632430:(e,r,n)=>{n.d(r,{$h:()=>eH,AV:()=>e5,As:()=>e0,BK:()=>eU,Bs:()=>ej,D6:()=>tT,EY:()=>tz,Ee:()=>e$,Kd:()=>ts,Kk:()=>tY,Ky:()=>tI,NW:()=>tV,Oe:()=>ti,PI:()=>tG,Qn:()=>e7,Tn:()=>tL,VF:()=>tJ,YD:()=>tF,Yb:()=>tN,Yf:()=>eK,Yi:()=>tn,Yx:()=>tB,Z:()=>tA,Zn:()=>tZ,_K:()=>te,a9:()=>tf,b$:()=>eY,e$:()=>td,ff:()=>tt,fv:()=>tw,g1:()=>tD,jD:()=>ek,jR:()=>eq,n8:()=>t$,nh:()=>e6,nz:()=>tU,rX:()=>e2,t5:()=>e4,tL:()=>tm,tg:()=>tu,u7:()=>tg,uO:()=>eB,uP:()=>eF,x:()=>tj,xZ:()=>tS,zn:()=>tv});var i=n(411855),a=n(188507),o=n(3360),s=n(268853),l=n(177131),c=n(922827),d=n(901981),u=n(340818),m=n(370927),p=n(572304),h=n(258214),_=n(298455),g=n(89865),f=n.n(g),E=n(167249),y=n(776250),b=n(522205),v=n(38329),I=n(737947),T=n(358145),S=n(966712),w=n(418956),A=n(915440),C=n(752553),N=n(535972),L=n(776621),O=n(553716),R=n(27087),P=n(47506),D=n(881388),k=n(939863),M=n(154483),F=n(392592),x=n(934533),U=n(980820),B=n(944682),V=n(395281),G=n(182976),H=n(662275),K=n(846018),W=n(931828),$=n(298527),Y=n(988022),z=n(974105),j=n(378905),q=n(696673),Z=n(44892),X=n(453681),J=n(405273),Q=n(415875),ee=n(742621),et=n(151283),er=n(356390),en=n(567245),ei=n(560286),ea=n(416095),eo=n(279453),es=n(540019),el=n(336599),ec=n(830524),ed=n(946778),eu=n(320741),em=n(388094),ep=n(984968),eh=n(935757),e_=n(551534),eg=n(610267),ef=n(173454),eE=n(246680),ey=n(656012),eb=n(755515),ev=n(909279),eI=n(776018),eT=n(252430),eS=n(372291),ew=n(705129),eA=n(479296),eC=n(229055),eN=n(672474),eL=n(308509),eO=n(760421),eR=n(479984),eP=n(866072);let eD=(0,M.fv)();async function ek(e,r=c.ZiZ.ACTIVE_SCENE){let n;if(!e.canvas_url&&r===c.ZiZ.PLAYGROUND_SCENE)return{newSymbolOrStateGroupGuid:c.BXd.upsertLocalProductComponentToPlaygroundScene(e.node_id)};let i=await Z.Eo.getCanvas(e);if(e.type===ef.PW.COMPONENT){let a=u.l7.system("upsert-shared-symbol",()=>c.BXd.upsertSharedSymbol(e.component_key??l.ii.INVALID,e.content_hash??l.F7.INVALID,eD(e),c.zol.NO,i,r));if(!a||(0,o.Im)(a)||a.fileUpdateRequired)return;a.localGUID||(0,O.x1)(s.e.DESIGN_SYSTEMS_EDITOR,"no local GUID in response",{response:JSON.stringify(a)},{reportAsSentryError:!0}),n=a.localGUID}else if(e.type===ef.PW.STATE_GROUP){let a=u.l7.system("upsert-shared-state-group",()=>c.BXd.upsertSharedStateGroup(e.key,e.version,eD(e),c.zol.NO,i,r));if(!a||(0,o.Im)(a)||a.fileUpdateRequired)return;if(!a.localGUID)throw Error("Swap to Shared Component Error, no local GUID");if(a.C2)throw Error(a.C2);n=a.localGUID}else throw Error(`Unexpected type for dragging library item: ${e.type}`);return{newSymbolOrStateGroupGuid:n,buffer:i}}let eM=(0,M.fv)(),eF=(0,U.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:o,alwaysFetch:l,targetUpsertScene:d=c.ZiZ.ACTIVE_SCENE}=r,u=(0,z.d1)(e.getState());if(u){if(!(0,j.N2)(n,u)||l){let r=async()=>{try{let e=await ek(n,d);e&&(i?.(e.newSymbolOrStateGroupGuid),e.buffer&&a?.(e.buffer))}catch(r){e.dispatch(D.s.error("An error occurred while retrieving the component or state group.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eN.vQ)({assetResourceId:eM(n),onInsertAsset:r,source:eN.jE.LOAD_COMPONENT}))}else i?.(n.node_id)}}),ex=(0,M.fv)(),eU=(0,E.N)("SWAP_TO_SHARED_COMPONENT_OR_STATE_GROUP"),eB=(0,U.nF)((e,r)=>{let{item:n,instanceGUIDs:i,usedSwapInstanceKeyboardShortcut:a,storeInRecentsKey:o,queryId:l}=r,d=(0,ew.Ml)(n,i);e.dispatch(G.Cx({key:d}));let m=e.getState(),p=(0,ei.s)(m);e.dispatch(tG({storeInRecentsKey:o,item:n,userId:p}));let h=(0,z.d1)(m);if(!h){e.dispatch(G.of({key:d}));return}let _=async()=>{try{let r=await ek(n);if(r){let o=n.type===ef.PW.STATE_GROUP?c.glU.getSimilarStates(i,r.newSymbolOrStateGroupGuid,n.default_state_key):{[r.newSymbolOrStateGroupGuid]:i};u.l7.user("replace-symbol-backing-instances",()=>{c.glU.replaceSymbolBackingInstances(o,a)}),e.dispatch(G.x2({key:d})),(0,eC.V)(h.key,n,!0,!!e.getState().userFlags.apple_eula_accepted)}}catch(r){e.dispatch(G.of({key:d})),e.dispatch(D.s.error("An error occurred while adding an instance of this component.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),(0,eC.V)(h.key,n,!1,!!e.getState().userFlags.apple_eula_accepted)}(0,Y.ds)("Instance Swapped To Shared Component",h.key,e.getState(),{componentFileKey:ex(n),componentLibraryKey:n.library_key,componentId:n.id,source:r.sourceForTracking,queryId:l})};e.dispatch((0,eN.vQ)({assetResourceId:ex(n),onInsertAsset:_,source:eN.jE.SWAP_TO_COMPONENT})),e.dispatch(eU(r))});function eV(e){return e(F.F.enqueue({type:"insert_instance",message:(0,k.t)("design_systems.subscriptions.inserting_instance"),icon:x.zX.SPINNER,delay:1e3})),function(){e(F.F.dequeue({matchType:"insert_instance"}))}}let eG=(0,M.fv)(),eH=(0,E.N)("INSERT_SHARED_COMPONENT"),eK=(0,U.nF)((e,r)=>{e.dispatch(eH(r));let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,isFromDoubleClick:d,useSmartPositioning:m,insertionCallback:h,storeInRecentsKey:g,fromPlayground:f,insertLogArgsOverride:E,isClick:y}=r,b=e.getState(),v=(0,q.wJ)(eG(n))&&!!(0,S.kc)().presets_baseline,I=async()=>{let r=(0,ei.s)(b);e.dispatch(tG({storeInRecentsKey:g,item:n,userId:r}));let I=(0,z.d1)(b);if(!I)return;let T=(r,n)=>{let s=u.l7.user("insert-component",()=>f?c.glU.insertPlaygroundInstance({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},v):c.glU.insertInstance(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},n,o,m??!1,v));if(h?.([s],i,y),e.dispatch(H.ES({type:eI.V})),(0,S.kc)().presets_baseline&&s!==p.AD){let n=(0,ec.C$)((0,_.UN)().get(r)),i=b.mirror.sceneGraph.get(s),a=Object.keys(i&&"INSTANCE"===i.type&&i.componentProperties()||{}).length>0;n&&a?(e.dispatch(K.E({nodeId:s})),(0,P.YQ)({id:eE.sh})):n?(e.dispatch(K.E({nodeId:s})),(0,P.YQ)({id:eE.Sp})):a?(0,P.YQ)({id:eE.An}):(0,P.YQ)({id:eE.fe})}er.Y5.triggerAction("commit"),er.Y5.triggerAction("set-tool-default")};if((0,j.N2)(n,I)){let r=b.library.local.components[n.node_id];if(!r||!b.mirror.sceneGraph.get(r.node_id)){e.dispatch(H.to({type:eT.Q}));return}try{T(r.node_id,E),(0,Y.ds)("Component Local Symbol Inserted",I.key,e.getState(),{componentFileKey:eG(n),componentLibraryKey:n.library_key,componentId:n.id,ComponentCanvasPositionX:i.x,ComponentCanvasPositionY:i.y}),(0,eC.V)(I.key,r,!0,!!e.getState().userFlags.apple_eula_accepted),e.dispatch(tq())}catch(n){e.dispatch(D.s.error("An error occurred while adding an instance of this component.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),(0,eC.V)(I.key,r,!1,!!e.getState().userFlags.apple_eula_accepted)}}else{let r=performance.now();if(tp&&tp===n.component_key&&th){let e=(await th).component;e&&e.updated_at>n.updated_at&&(n=e)}let a=eV(e.dispatch);Z.Eo.getCanvas(n).then(e=>{let r=u.l7.system("upsert-shared-symbol",()=>c.BXd.upsertSharedSymbol(n.component_key??l.ii.INVALID,n.content_hash??l.F7.INVALID,eG(n),c.zol.NO,e,c.ZiZ.ACTIVE_SCENE));if(!r)throw(0,O.x1)("design-systems","response from upsertSharedSymbol was nullish",{componentKey:n.component_key??l.ii.INVALID,contentHash:n.content_hash??l.F7.INVALID},{reportAsSentryError:!0}),Error("An error occurred while adding an instance of this component.");if(r.fileUpdateRequired||!r.localGUID)throw Error("An error occurred while adding an instance of this component.");T(r.localGUID,E)},e=>{let r=c.glU.getSymbolNodeId(n.component_key,n.content_hash);if(!r){if(e?.status===403)throw Error("A 403 error occurred while adding an instance of this component.");throw Error("An error occurred while adding an instance of this component.")}T(r,E)}).then(()=>{let a=performance.now()-r;(0,Y.ds)("Component Shared Symbol Inserted",I.key,e.getState(),{elapsedMs:a,componentFileKey:eG(n),componentLibraryKey:n.library_key,componentId:n.id,componentName:n.name,ComponentCanvasPositionX:i.x,ComponentCanvasPositionY:i.y,isFromDefaultLibrary:(0,ea.td)(b.library,n.library_key),isFromDoubleClick:!!d,useSmartPositioning:!!m}),(0,eC.V)(I.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:a}),e.dispatch(tq())}).catch(i=>{e.dispatch(D.s.error(i.message)),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,i),(0,eC.V)(I.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_component.insert_time",duration:performance.now()-r})}).finally(()=>{a()})}};e.dispatch((0,eN.vQ)({assetResourceId:eG(n),onInsertAsset:I,source:eN.jE.INSERT_SHARED_COMPONENT}))}),eW=(0,M.fv)(),e$=(0,E.N)("INSERT_SHARED_STATE_GROUP"),eY=(0,U.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,isFromDoubleClick:d,useSmartPositioning:m,insertionCallback:h,storeInRecentsKey:_,fromPlayground:g,insertLogArgsOverride:f,isClick:E}=r,y=e.getState(),b=(0,q.wJ)(eW(n))&&!!(0,S.kc)().presets_baseline,v=async()=>{let r=(0,ei.s)(y);e.dispatch(tG({storeInRecentsKey:_,item:n,userId:r}));let v=(0,z.d1)(y);if(!v)return;let I=(r,n,s)=>{let l=u.l7.user("insert-state-group",()=>g?c.glU.insertPlaygroundInstance({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},b):c.glU.insertStateGroup(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},s,o,m??!1,n,b));return h?.([l],i,E),e.dispatch(H.ES({type:eI.V})),er.Y5.triggerAction("commit"),er.Y5.triggerAction("set-tool-default"),l};if((0,j.N2)(n,v)){let r=y.library.local.stateGroups[n.node_id];if(!r||!y.mirror.sceneGraph.get(r.node_id)){e.dispatch(H.to({type:eT.Q}));return}I(r.node_id,"",f),(0,Y.ds)("State Group Local Symbol Inserted",v.key,e.getState(),{stateGroupFileKey:eW(n),stateGroupLibraryKey:n.library_key,stateGroupId:n.id,StateGroupCanvasPositionX:i.x,StateGroupCanvasPositionY:i.y}),e.dispatch(tq())}else{let r=performance.now();if(tE&&tE===n.key&&ty){let e=await ty;e&&e.updated_at>n.updated_at&&(n=e)}let a=eV(e.dispatch);Z.Eo.getCanvas(n).then(r=>{let i=u.l7.system("upsert-shared-state-group",()=>c.BXd.upsertSharedStateGroup(n.key??l.q.INVALID,n.version,eW(n),c.zol.NO,r,c.ZiZ.ACTIVE_SCENE));if(!i||i.fileUpdateRequired||!i.localGUID)throw Error("An error occurred while adding an instance of this component.");let a=I(i.localGUID,n.default_state_key,f);if((0,S.kc)().presets_baseline){let r=y.mirror.sceneGraph.get(i.localGUID)?.childrenNodes[0];r&&((0,ec.C$)(r)&&a!==p.AD?(e.dispatch(K.E({nodeId:a})),(0,P.YQ)({id:eE.sh})):(0,P.YQ)({id:eE.An}))}},e=>{let r=c.glU.getStateGroupNodeId(n.key,n.version);if(!r)throw Error("An error occurred while adding an instance of this component.");I(r,"",f)}).then(()=>{(0,Y.ds)("State Group Shared Symbol Inserted",v.key,e.getState(),{stateGroupFileKey:eW(n),stateGroupLibraryKey:n.library_key,stateGroupId:n.id,stateGroupName:n.name,StateGroupCanvasPositionX:i.x,StateGroupCanvasPositionY:i.y,isFromDefaultLibrary:(0,ea.td)(y.library,n.library_key),isFromDoubleClick:!!d}),(0,eC.V)(v.key,n,!0,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r}),e.dispatch(tq())}).catch(i=>{e.dispatch(D.s.error(i.message)),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,i),(0,eC.V)(v.key,n,!1,!!e.getState().userFlags.apple_eula_accepted,{metricName:"design_systems.subscribed_state_group.insert_time",duration:performance.now()-r})}).finally(()=>{a()})}};await e.dispatch((0,eN.vQ)({assetResourceId:eW(n),onInsertAsset:v,source:eN.jE.INSERT_SHARED_STATE_GROUP})),e.dispatch(e$(r))}),ez=(0,M.fv)(),ej=(0,U.nF)(async(e,r)=>{let{item:n}=r;if(!(0,eS.RX)(n))return;let{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:d,insertionCallback:m,storeInRecentsKey:p,fromPlayground:h,selectAfterInsert:_,isClick:g,shouldShowVisualBell:f=!0,errorCallback:E}=r,y=e.getState(),b=(0,ei.s)(y);e.dispatch(tG({storeInRecentsKey:p,item:n,userId:b}));let v=(r,n)=>{let s=u.l7.user("insert-module",()=>h?c.glU.insertPlaygroundModuleUsage({x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y}):c.glU.insertModule(r,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},n,o,l??!1,_??!0));return m?.(s,i,g),e.dispatch(H.ES({type:eI.V})),er.Y5.triggerAction("set-tool-default"),s},I=(0,z.d1)(y);if((0,j.N2)(n,I))v(n.node_id,d),e.dispatch(tq());else{let r=()=>{};f&&(r=function(e){return e(F.F.enqueue({type:"insert_template",message:(0,k.t)("design_systems.subscriptions.inserting_template"),icon:x.zX.SPINNER,delay:1e3})),function(){e(F.F.dequeue({matchType:"insert_template"}))}}(e.dispatch));try{let e=await eZ(n);v(e.localGUID,d)}catch(r){e.dispatch(D.s.error(r.message)),E?E(r):(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}finally{f&&r()}}});(0,U.nF)(async(e,r)=>{let{modules:n,canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,afterSlideModulesInsertion:l,useSmartPositioning:d,insertLogArgsOverride:m,storeInRecentsKey:p,selectAfterInsert:h,errorCallback:_}=r;if(n.some(e=>e.moduleSource!==c.QjO.SLIDES_TEMPLATE||!(0,eS.RX)(e)))return;let g=e.getState(),f=(0,ei.s)(g),E=(e,r)=>u.l7.user("insert-module",()=>c.glU.insertModule(e,{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y},r,o,d??!1,h??!0));try{let r=(await Promise.all(n.map(eZ))).map(e=>E(e.localGUID,m));n.forEach(r=>{e.dispatch(tG({storeInRecentsKey:p,item:r,userId:f}))}),l(n,r),er.Y5.triggerAction("set-tool-default")}catch(e){_?_(e):(0,L.$D)(s.e.SLIDES,e)}});let eq=(0,U.nF)(async(e,r)=>{let{item:n}=r,{canvasPosition:i,percentageOffset:a,insertAsChildOfCanvas:o,useSmartPositioning:l,insertLogArgsOverride:d,selectAfterInsert:m,errorCallback:p}=r,h=i?{x:i.x,y:i.y,percentOffsetX:a.x,percentOffsetY:a.y}:null;(0,J.e)(n);let _=(r,n)=>{let i=u.l7.user("insert-responsive-set",()=>c.glU.insertResponsiveSet(r,h,n,o,l??!1,m??!0));return e.dispatch(H.ES({type:eI.V})),er.Y5.triggerAction("commit"),er.Y5.triggerAction("set-tool-default"),i};if("LIBRARY"!==n.subscriptionStatus)_(n.assetId,d);else try{let e=await eX(n);_(e,d)}catch(r){e.dispatch(D.s.error(r.message)),p?p(r):(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}});async function eZ(e){let r=await Z.Eo.getCanvas(e),n=u.l7.system("upsert-shared-module",()=>c.BXd.upsertSharedModule(e.key??l.mW.INVALID,e.version??l.Pg.INVALID,ez(e),c.zol.NO,r,c.ZiZ.ACTIVE_SCENE));if(!n||n.fileUpdateRequired||!n.localGUID)throw Error("An error occurred while inserting this template.");return n}async function eX(e){if("LIBRARY"!==e.subscriptionStatus)return e.assetId;let r=await Z.Eo.getCanvas({canvas_url:e.canvasUrl});if(!u.l7.system("upsert-shared-library-asset",()=>c.BXd.upsertSharedLibraryAsset((0,e_.Hk)(e.type),e.key,e.version,e.fileKey__UPSERT_ONLY,c.zol.NO,r,c.ZiZ.ACTIVE_SCENE)).success)throw Error("An error occurred while inserting this asset.");return e.assetId}function eJ(e,r,n){return(0,b.a)(r,n,{batchSize:5,onBatchFinish(r,n){e(eR.qB({delta:n}))}})}let eQ=(0,M.fv)(),e0=(0,U.nF)(async(e,r)=>{let{stateGroups:n,usedItemsByKey:i,instanceIdsToUpdate:a,updateStartTime:o}=r,l=e.getState(),m=l.openFile;if(m)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set;await eJ(e.dispatch,n,(e,n)=>{let p=r[n];if(u.l7.user("update-shared-state-group",()=>{c.BXd.updateSharedStateGroup(e.key,eQ(e),e.newStateKeyToOutdatedItems,a.map(d.v.toString),p,o)}),Object.keys(e.newStateKeyToOutdatedItems).length)for(let r of Object.values(e.newStateKeyToOutdatedItems)){let{localIdsToUpdate:n,oldSubscribedKeysToUpdate:a}=r;if((0,ea.GA)(l.library,m,n,a,i)){s.add(eQ(e));break}}}),er.Y5.triggerAction("commit");let p=n.map(e=>e.id);(0,Y.ds)("Components Updated",m.key,e.getState(),{stateGroups:p,isSgShimFFEnabled:!0}),s.size&&tH(e,s)}catch(r){e.dispatch(D.s.error("An error occurred while updating the instances of this component.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e1=(0,M.fv)(),e2=(0,U.nF)(async(e,r)=>{let{components:n,usedItemsByKey:i,instanceIdsToUpdate:a,updateStartTime:o}=r,m=e.getState(),p=m.openFile;if(p)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),s=new Set;await eJ(e.dispatch,n,(e,n)=>{let h=r[n];u.l7.user("update-shared-symbol",()=>{c.BXd.updateSharedSymbol(e.component_key??l.ii.INVALID,e1(e),e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,a.map(d.v.toString),h,o)}),(e.localIdsToUpdate.length||e.oldSubscribedKeysToUpdate.length)&&(0,ea.GA)(m.library,p,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,i)&&s.add(e1(e))}),er.Y5.triggerAction("commit");let h=n.map(e=>e.id);(0,Y.ds)("Components Updated",p.key,e.getState(),{components:h,isShimFFEnabled:!0}),s.size&&tH(e,s)}catch(r){e.dispatch(D.s.error("An error occurred while updating the instances of this component.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e5=(0,U.nF)((e,r)=>{let{style:n,inheritStyleKeyField:i,fromSearch:a,targetGuids:o}=r,s=e.getState(),l=(0,z.d1)(s),d=l&&!(0,j.N2)(n,l),m=s.openFile,p=(0,ee.ZR)((0,ee.cO)(n,d??!1),m),h=(0,et.X)(p);e.dispatch(e6({style:n,callback:(r,s)=>{if(s){e.dispatch(F.F.enqueue({type:"missing-font",message:(0,k.t)("design_systems.missing_font_cant_make_changes"),button:{text:(0,k.t)("design_systems.missing_font_learn_more"),action:()=>{I.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/360039956894-Add-a-font-to-Figma-design","_blank")}}}));return}o?u.l7.user("apply-style-to-nodes",()=>c.glU.applyStyleToNodes(i,r,!0,o)):u.l7.user("apply-style-to-selection",()=>{(0,ev.f)(c.VD3.STYLE_ATTACH,c.e0R.DIRECT,()=>{c.glU.applyStyleToSelection(i,r,!0)})}),(0,y.sx)("Style Applied",{styleType:n.style_type,isShared:!!d,viewMode:e.getState().stylePickerListLayout?"LIST":"GRID",fromSearch:!!a,nonInteraction:0,styleKey:n.key,consumedVariableIds:c.CWU.getConsumedVariableIDs(n.node_id),styleLibraryKey:p,consumingFileKey:m?.key,fileTeamId:m?.teamId,fileParentOrgId:m?.parentOrgId,partnerType:h,success:!0,appleEulaAccepted:!!e.getState().userFlags.apple_eula_accepted},{forwardToDatadog:!0})},errorCallback:()=>{(0,y.sx)("Style Applied Error",{partnerType:h},{forwardToDatadog:!0})}}))}),e3=(0,M.fv)(),e6=(0,U.nF)((e,r)=>{let n=e.getState(),{style:i}=r,a=(0,z.d1)(n);if(!a)return;let o=!(0,j.N2)(i,a),d="GRID"===i.style_type&&!c.Ez5.editorPreferences().showFrameGrids.getCopy();if(o){let n=async()=>{try{let n=await Z.Eo.getCanvas(i);r.bufferCallback?.(n);let a=u.l7.system("ensure-style-is-loaded",()=>c.BXd.getOrCreateSubscribedStyleNodeId(i.key,i.content_hash??l.IA.INVALID,e3(i),n));if(a?.fileUpdateRequired)return;r.omitFullscreenCommit||er.Y5.triggerAction("commit"),d&&((0,en.c6)(),c.Ez5.editorPreferences().showFrameGrids.set(!0));let o=!1;if("TEXT"===i.style_type&&a&&a.localGUID){let r=e.getState().mirror.sceneGraph.get(a.localGUID),n=r&&r.fontName;n&&await (0,m.VC)(n.family,n.style).catch(()=>{console.error(`Text style font did not load: ${n.family} ${n.style}`),o=!0})}r.callback?.(a.localGUID,o)}catch(n){e.dispatch(D.s.error("An error occurred while applying the style to the selection.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,n),r.errorCallback?.()}};e.dispatch((0,eN.vQ)({assetResourceId:e3(i),onInsertAsset:n,source:eN.jE.LOAD_STYLE}))}else d&&((0,en.c6)(),c.Ez5.editorPreferences().showFrameGrids.set(!0)),r.callback?.(i.node_id,!1),r.bufferCallback?.(void 0)}),e8=(0,M.fv)(),e4=(0,U.nF)(async(e,r)=>{let{styles:n,updateStartTime:i}=r,a=e.getState().openFile;if(a)try{let r=await Promise.all(n.map(e=>Z.Eo.getCanvas(e))),o=new Set,s=e.getState();await eJ(e.dispatch,n,(e,n)=>{let d=r[n];u.l7.user("update-shared-style",()=>{c.BXd.updateSharedStyle(e.key,e8(e),e.content_hash??l.IA.INVALID,e.oldSubscribedKeysToUpdate,e.localIdsToUpdate,d,i)}),(0,ea.GA)(s.library,a,e.localIdsToUpdate,e.oldSubscribedKeysToUpdate,s.library.used__LIVEGRAPH.styles)&&o.add(e8(e))}),er.Y5.triggerAction("commit");let d=n.map(e=>e.id);(0,Y.ds)("Styles Updated",s.openFile?.key,e.getState(),{styles:d}),o.size&&tH(e,o)}catch(r){e.dispatch(D.s.error("An error occurred while updating this style.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)}}),e9=(0,M.fv)(),e7=(0,U.nF)((e,r)=>{let n=c.BXd.getTimestampForLibraryUpdateStart(),{styleUpdateInfo:i,oldStyleGUID:a,consumerGUIDsToUpdate:o}=r,{updateAsset:l}=i;Z.Eo.getCanvas(l).then(r=>{let i=e.getState(),{content_hash:s}=l;if(!a)throw Error("guid to update can not be empty");if(!s)throw Error("content_hash not specified on style");let d=u.l7.user("update-selected-shared-style-consumers",()=>c.BXd.updateSelectedSharedStyleConsumers(l.key,e9(l),s,l.oldSubscribedKeysToUpdate,l.localIdsToUpdate,o,a,r,n));if(er.Y5.triggerAction("commit"),!d)throw Error("unable to update");(0,Y.ds)("Styles Updated",i.openFile?.key,e.getState(),{styles:[l.id]})}).catch(r=>{e.dispatch(D.s.error("An error occurred while updating this style.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})}),te=(0,U.nF)((e,r)=>{let{variableSets:n,updateStartTime:i}=r;if(e.getState().openFile)return Promise.all(n.map(e=>Z.Eo.getCanvas(e))).then(r=>eJ(e.dispatch,n,(e,n)=>{let a=r[n];u.l7.user("update-shared-variable-set",()=>{c.BXd.updateSharedVariableSet(e.node_id,(0,ef.GI)(e)?[]:e.libraryVariableIdsForUpdate,a,i)})})).then(()=>{er.Y5.triggerAction("commit")}).catch(r=>{e.dispatch(D.s.error("An error occurred while updating this variable collection")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r)})});async function tt(e){let r=await Z.Eo.getCanvas(e);if(!u.l7.system("upsert-shared-variable",()=>c.BXd.upsertSharedVariable(e.node_id,c.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let tr=(0,M.fv)(),tn=(0,U.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:o}=r;if(!(0,z.d1)(e.getState())){o?.(Error("editing file not found"));return}if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await tt(n);e&&(i?.(n.node_id),a?.(e.buffer))}catch(r){e.dispatch(D.s.error("An error occurred while retrieving the variable.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),y.az.trackDefinedEvent("variables.variable_load.error",{partnerType:(0,et.X)(n.library_key)}),o?.(r)}};e.dispatch((0,eN.vQ)({assetResourceId:tr(n),onInsertAsset:r,source:eN.jE.LOAD_VARIABLE}))}else i?.(n.node_id)}),ti=(0,U.nF)((e,r)=>new Promise((n,i)=>{e.dispatch(tn({item:r,callback:n,errorCallback:i}))}));async function ta(e){let r=await Z.Eo.getCanvas(e);if(!u.l7.system("upsert-shared-variable-set",()=>c.BXd.upsertSharedVariableSet(e.node_id,c.zol.NO,r)).fileUpdateRequired)return{buffer:r}}let to=(0,M.fv)();(0,U.nF)((e,r)=>{let{item:n,callback:i,bufferCallback:a,errorCallback:o}=r;if((0,z.d1)(e.getState())){if("LIBRARY"===n.subscriptionStatus){let r=async()=>{try{let e=await ta(n);e&&(i?.(n.node_id),a?.(e.buffer))}catch(r){e.dispatch(D.s.error("An error occurred while retrieving the variable collection.")),(0,L.$D)(s.e.DESIGN_SYSTEMS_EDITOR,r),o?.()}};e.dispatch((0,eN.vQ)({assetResourceId:to(n),onInsertAsset:r,source:eN.jE.LOAD_VARIABLE_SET}))}else i?.(n.node_id)}});let ts=(0,U.nF)((e,r)=>{e.dispatch(G.yH({key:(0,ew.yD)(r.openFileKey)})),e.dispatch(G.yH({key:(0,ea.iw)(r.openFileKey)}))}),tl=new Set,tc=new Set;function td(){tl=new Set,tc=new Set}let tu=(0,U.nF)(async e=>{let r=e.getState();r.user&&(await ed.gi,tm((0,em.OQ)(r),(0,em.LL)(r),e))}),tm=async(e,r,n,i)=>{if(0===e.length&&0===r.length)return;let a=n.getState().openFile;if(!a)return;let o=(i=i??(0,ea.lG)(n)).loadingKey;(0,el.VP)(n.getState().loadingState,o)&&await i.promise,n.dispatch(G.Cx({key:o})),"whiteboard"===a.editorType&&await ea.kw;let s=n.getState(),l=[];if(e.length>0){let r=new Set([...(0,ea.vu)(s.library.publishedByLibraryKey.components).map(e=>e.component_key),...(0,ea.kD)(s.library.defaultPublished.components).map(e=>e.component_key),...(0,ea.kD)(s.library.defaultShapes.components).map(e=>e.component_key)]);l=e.filter(e=>!r.has(e)&&!tl.has(e))}let c=[];if(r.length>0){let e=new Set([...(0,ea.vu)(s.library.publishedByLibraryKey.stateGroups).map(e=>e.key),...(0,ea.kD)(s.library.defaultPublished.stateGroups).map(e=>e.key),...(0,ea.kD)(s.library.defaultShapes.stateGroups).map(e=>e.key)]);c=r.filter(r=>!e.has(r)&&!tc.has(r))}try{if(l.length>0||c.length>0){let e=await R.Ay.post("/api/design_systems/components_state_groups",{component_keys:l,state_group_keys:c,org_id:a.parentOrgId});l.forEach(e=>{tl.add(e)}),c.forEach(e=>{tc.add(e)});let r=e.data.meta.components,i=e.data.meta.state_groups,o=e.data.meta.files;n.dispatch(B.uo({files:o,subscribeToRealtime:!0})),n.dispatch(V.dC({subscribedOldKeyToNewKey:e.data.meta.move_remappings,localOldGuidToNewKey:{}}));let s=n.getState().fileByKey,d=w.zl.get(X.qp);tJ(r,ef.PW.COMPONENT,s,d,n.dispatch),tJ(i,ef.PW.STATE_GROUP,s,d,n.dispatch)}i.callbackForComponent?.(!0)}catch(e){i.callbackForComponent?.(!1)}i.resetPromise(),n.dispatch(G.yH({key:o})),i.callback()},tp=null,th=null,t_=(0,M.fv)();async function tg(e,r,n){try{let i=await ey.Z.getLibraryComponentV2({componentKey:r,source:n}),a=i.data.meta.file;a&&e.dispatch(B.yJ({file:a}));let o=i.data.meta.component||null,s=i.data.meta.component_set||null,l=e.getState().fileByKey,c=w.zl.get(X.qp);if(o&&(o.team_id=(0,S.kc)().ds_use_lib_keys?c[o.library_key]?.team_id:l[t_(o)]?.team_id),s&&(s.team_id=(0,S.kc)().ds_use_lib_keys?c[s.library_key]?.team_id:l[t_(s)]?.team_id),a){let r={};r[o.node_id]=o,i.data.meta.state_components.forEach(e=>{r[e.node_id]=e}),e.dispatch((0,eP.vP)({itemsById:r,fileKey:a.key,libraryKey:(0,h.l)(a.library_key),teamId:a.team_id,type:ef.PW.COMPONENT})),i.data.meta.component_set&&e.dispatch((0,eP.vP)({itemsById:{[i.data.meta.component_set.key]:i.data.meta.component_set},fileKey:a.key,libraryKey:(0,h.l)(a.library_key),teamId:a.team_id,type:ef.PW.STATE_GROUP})),o&&Z.Eo.getCanvas(o)}return{component:o,parentStateGroup:i.data.meta.component_set||null}}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/component_v2/key");(0,N.t)("component"),console.error(e)}return{component:null,parentStateGroup:null}}}let tf=(0,U.nF)((e,r)=>{tp=r.componentKey,th=tg(e,r.componentKey,r.callsite)}),tE=null,ty=null,tb=(0,M.fv)();async function tv(e,r){try{let n=(await ey.Z.getLibraryStateGroup({stateGroupKey:r})).data.meta,i={[n.node_id]:n},a=w.zl.get(X.qp),o=(0,S.kc)().ds_use_lib_keys?a[n.library_key]:e.getState().fileByKey[tb(n)];if(!o)return n;return n.team_id=o.team_id,e.dispatch((0,eP.vP)({itemsById:i,fileKey:o.key,libraryKey:(0,h.l)(o.library_key),teamId:o.team_id,type:ef.PW.STATE_GROUP})),Z.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/state_group/key");(0,N.t)("state"),console.error(e)}return null}}async function tI(e,r){try{let{style:n,file:i}=(await ey.Z.getLibraryStyleByKey({styleKey:r})).data.meta;return i&&e.dispatch(B.yJ({file:i})),Z.Eo.getCanvas(n),n}catch(e){if(e?.status===403){let e=Error("Permissions error for /api/design_systems/library/styles/key");(0,N.t)("style"),console.error(e)}return null}}let tT=(0,U.nF)((e,r)=>{tE=r.stateGroupKey,ty=tv(e,r.stateGroupKey)});async function tS(e){let{loadingState:r}=e.getState(),n=e.getState().openFile;if(null==n)return;let i=(0,ea.Mb)(n.key,(0,h.l)(n.libraryKey));if(!(0,el.Sc)(r,i))return;let a=ey.Z.getLibraryPublishedAndMovedComponents({openFileKey:n.key});(0,eu.N)(a,{dispatch:e.dispatch},i),ea.Ys.add(i);try{let r=await a;e.dispatch(B.uo({files:r.data.meta.files,subscribeToRealtime:!0})),(0,ea.Ve)(n.key);let i=e.getState().fileByKey,o=w.zl.get(X.qp);tJ(r.data.meta.state_groups,ef.PW.STATE_GROUP,i,o,e.dispatch),tJ(r.data.meta.components,ef.PW.COMPONENT,i,o,e.dispatch),e.dispatch(V.dC({subscribedOldKeyToNewKey:{},localOldGuidToNewKey:r.data.meta.move_remappings}))}catch(e){console.warn("Failed to get published and moved components for editing file")}(0,ea._B)()}let tw=es.M4.Query({fetch:async e=>(await eb.PT.getOrgMigrationStatus({orgId:e})).data.meta,enabled:e=>!!e}),tA=es.M4.Query({fetch:async e=>await tC(v.D.dispatch,e),key:"libraryStats"}),tC=async(e,r)=>{let n=eb.PT.getLibraries({orgId:r,fv:eg.O}),i=function(e){return`LIBRARY${e?"_"+e:""}'_STATS'`}(r);(0,eu.N)(n,{dispatch:e},i);try{let r=await n,i=r&&r.data&&r.data.meta||[],a=0,o=0,s=0,l=0,c=0,d=0,u=0,m=0,p=[],h=[],_=new Set,g={};for(let e of i)(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(e.team_id&&!_.has(e.team_id)&&(_.add(e.team_id),u++),p.push(e),h.push(e.file),e.thumbnail_url&&(g[e.library_key]=e.thumbnail_url),a+=e.num_components,s+=e.num_styles,l+=e.num_variable_collections,c+=e.num_variables,e.num_state_groups=0,o+=e.num_state_groups,d+=e.num_module_assets,m++);return h.length>0&&e(B.uo({files:h,subscribeToRealtime:!1})),{totalComponents:a,totalStateGroups:o,totalStyles:s,totalVariableCollections:l,totalVariables:c,totalModuleAssets:d,teamsWithLibraries:u,totalLibraries:m,files:p,libraryThumbnailByLibraryKey:g}}catch(e){return ef.wg}},tN=es.M4.Query({fetch:e=>tO(e),key:"libraryInfo"});function tL(e,r={}){let n=(0,es.IT)(tN(e),r),i=(0,a.wA)(),[o]=n;return(0,C.DC)(o,e=>{let r=e.files.map(e=>e.file);r.length>0&&i(B.uo({files:r,subscribeToRealtime:!1}))}),n}let tO=(0,eA.D)(async({currentOrgId:e,excludeDrafts:r,subscriptionFileKey:n,includeThumbnails:i})=>{let a=ey.Z.getLibraries({orgId:e,subscriptionFileKey:n||void 0,includeThumbnails:i});try{let e=await a,n=e&&e.data&&e.data.meta||[],o=0,s=0,l=0,c=0,d=0,u=0,m=0,p=0,h=[],_=[],g=new Set,f={};for(let e of n)e.num_state_groups=0,(0!==e.num_components||0!==e.num_styles||0!==e.num_variable_collections||0!==e.num_variables||0!==e.num_module_assets)&&(!r||e.team_id)&&(e.team_id&&!g.has(e.team_id)&&(g.add(e.team_id),m++),h.push(i?{...e,thumbnail_url:e.file.thumbnail_url}:e),_.push(e.file),e.thumbnail_url&&(f[e.library_key]=e.thumbnail_url),o+=e.num_components,l+=e.num_styles,c+=e.num_variable_collections,d+=e.num_variables,s+=e.num_state_groups,u+=e.num_module_assets,p++);return{totalComponents:o,totalStateGroups:s,totalStyles:l,totalVariableCollections:c,totalVariables:d,totalModuleAssets:u,teamsWithLibraries:m,totalLibraries:p,files:h,libraryThumbnailByLibraryKey:f}}catch(e){return{...ef.wg}}});function tR(e){let r=e.communityLibrary?.hubFileId,n=e.library?.fileKey;return r??n}function tP(e){return!!e.communityLibrary?.hubFileId}function tD(e,r){let n=r?.ignoreCommunitySubs??!1;e=e.filter(e=>e.library||e.communityLibrary);let i={};for(let r of e)tP(r)&&n||(i[tR(r)]={design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed});return i}function tk(e,r,n){if(!r||!n)return;r=r.filter(e=>e.library||e.communityLibrary),n=n.filter(e=>e.library||e.communityLibrary);let i=f()(r,tR);for(let r of n){let n=tR(r),a=i[n];a&&a.isSubscribed===r.isSubscribed&&a.figJamSubscribed===r.figJamSubscribed&&a.slidesSubscribed===r.slidesSubscribed||e.dispatch((0,eO.F$)({libraryFileKey:n,subscriptions:{design:!!r.isSubscribed,figjam:!!r.figJamSubscribed,slides:!!r.slidesSubscribed},isCommunityLibrary:tP(r)}))}}function tM(e,r,n){tk(e,r?.map(tF),n?.map(tF))}let tF=e=>({...e}),tU=function(){let e=(0,a.wA)(),r=(0,a.Pj)(),n=(0,$.Ck)(),o=(0,ea.LH)(),{data:s}=(0,A.Rs)(eo.Lew,{});(0,i.useEffect)(()=>{let r=s?.currentUser?.libraryUserSubscriptions;if(!r)return;let i=tD(r.map(tF),{ignoreCommunitySubs:!n()});e(eL.O.initializeUserSubscriptions({subscriptions:i}))},[n,s,e]);let l=(0,T.ZC)(s);(0,i.useEffect)(()=>{if(!l||!s)return;let e=s?.currentUser?.libraryUserSubscriptions;tM(r,l?.currentUser?.libraryUserSubscriptions,e)},[r,s,l]);let c=(0,Q.EM)();(0,i.useEffect)(()=>{c&&e(eL.O.initializePresetSubscriptions({subscriptions:c}))},[c,e]);let d=(0,T.ZC)(c);(0,i.useEffect)(()=>{if(!c||!d)return;let e=(0,Q.sj)(c);tk(r,(0,Q.sj)(d),e)},[r,c,d]);let{data:u}=(0,A.Rs)(eo.AXx,{orgId:o},{enabled:!!o});(0,i.useEffect)(()=>{let r=u?.orgLibrarySubscriptions;if(!r)return;let i=tD(r.map(tF),{ignoreCommunitySubs:!n()});e(eL.O.initializeOrgSubscriptions({subscriptions:i}))},[n,u,e]);let m=(0,T.ZC)(u);(0,i.useEffect)(()=>{if(!m||!u)return;let e=u?.orgLibrarySubscriptions;tM(r,m?.orgLibrarySubscriptions,e)},[r,u,m]);let p=(0,ep.cD)(),h=(0,A.Rs)(eo.f19,{}),{data:_}=(0,i.useMemo)(()=>h.transform(e=>{let r=(e.allTeamRoles||[]).filter(e=>e.team&&!e.team.deletedAt&&(e.team.orgId===o||e.team.id===p)).map(e=>e.team),i={};for(let e of r){let r=e.libraryTeamSubscriptionOverrides.map(tF).filter(e=>n()||!tP(e));i[e.id]=r}return i}),[n,o,p,h]);(0,i.useEffect)(()=>{if(!_)return;let r={};for(let[e,i]of Object.entries(_)){let a=tD(i,{ignoreCommunitySubs:!n()});r[e]=a}e(eL.O.initializeTeamSubscriptions({fileSubscriptionsByTeamId:r}))},[n,_,e]);let g=(0,T.ZC)(_);(0,i.useEffect)(()=>{g&&_&&tk(r,Object.values(g).flat(),Object.values(_).flat())},[r,_,g])},tB=(0,U.nF)(async e=>{if(await eh.kb.promise,!e.getState().user)return;let r=Promise.resolve(null),n=Promise.resolve(null),i=Promise.resolve(null);try{await Promise.all([r,i,n])}catch(e){}});async function tV(e){if(!e)return 0;try{return(await eb.PT.getNumTeams({orgId:e})).data.meta.num_teams}catch(e){}return 0}let tG=(0,E.N)("ADD_ASSET_TO_RECENTS"),tH=(e,r)=>{let n=e.getState(),i=n.openFile?.key||null;i&&r.forEach(r=>{r!==i&&e.dispatch((0,eO.am)({libraryFileSubscription:{file_key:i,library_file_key:r,is_subscribed:!0},userInitiated:!0}))})},tK="LIBRARY_REMAPPING_PROGRESS_VISUAL_BELL",tW=null,t$=(0,U.nF)((e,r)=>{tW={done:0,total:r.total},e.dispatch(F.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connecting_fraction",{current:0,total:r.total}),type:tK,icon:x.zX.SPINNER,timeoutOverride:1/0}))}),tY=(0,U.nF)((e,r)=>{tW&&(tW.done+=r.done,e.dispatch(F.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connecting_fraction",{current:tW.done,total:tW.total}),type:tK,icon:x.zX.SPINNER,timeoutOverride:1/0})))}),tz=(0,U.nF)(e=>{tW=null,e.dispatch(F.F.dequeue({matchType:tK})),e.dispatch(F.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connected"),type:tK,icon:x.zX.CHECK}))}),tj=(0,U.nF)(e=>{tW=null,e.dispatch(F.F.enqueue({message:(0,k.t)("design_systems.subscriptions.remap_connection_failed"),type:tK,error:!0}))}),tq=(0,U.nF)(e=>{e.getState().userFlags.has_inserted_component||e.dispatch(W.b({has_inserted_component:!0}))}),tZ=(0,U.nF)(e=>{e.getState().userFlags.has_opened_libraries_modal||e.dispatch(W.b({has_opened_libraries_modal:!0}))}),tX=(0,M.fv)();function tJ(e,r,n,i,a){let o=(e=e.map(e=>({...e,team_id:(0,S.kc)().ds_use_lib_keys?i[e.library_key].team_id:n[tX(e)].team_id}))).reduce((e,r)=>(tX(r)in e?e[tX(r)].push(r):e[tX(r)]=[r],e),{}),s=new Map;for(let r of e){let e=r.library_key;s.has(e)?s.get(e).push(r):s.set(e,[r])}if((0,S.kc)().ds_use_lib_keys)for(let[e,n]of s.entries())a((0,eP.vP)({itemsById:n.reduce((e,r)=>(e[r.node_id]=r,e),{}),fileKey:tX(n[0]),libraryKey:e,teamId:i[e].team_id,type:r}));else for(let[e,i]of Object.entries(o))a((0,eP.vP)({itemsById:i.reduce((e,r)=>(e[r.node_id]=r,e),{}),fileKey:e,libraryKey:i[0].library_key,teamId:n[e].team_id,type:r}))}},487981:(e,r,n)=>{n.d(r,{c:()=>E});var i=n(966712),a=n(572206),o=n(939863),s=n(588666),l=n(392592),c=n(980820),d=n(632430),u=n(974105),m=n(356390),p=n(457630),h=n(416095),_=n(220499),g=n(663897);let f="\x3c!--(figcomponent)";(0,c.nF)((e,r)=>{let n=r.dataTransfer?.getData("text/html");if(n){let i=n.indexOf(f)+f.length,o=n.indexOf("(/figcomponent)--\x3e");if(i>=0&&o>=0&&i<o){let s=n.substring(i,o).trim();try{let n=JSON.parse(s);if("object"==typeof n){let i=n.fileKey,o=n.nodeId;if(i&&o){let n=m.Y5.getViewportInfo(),s=new a.Mi(n.x,n.y),l=new a.Mi(r.clientX,r.clientY).subtract(s),c=(0,p.$$)(n,l);e.dispatch(E({fileKey:i,nodeId:o,canvasX:c.x,canvasY:c.y}))}}}catch(e){}}}});let E=(0,c.nF)(async(e,r)=>{let{fileKey:n,nodeId:c,canvasX:m,canvasY:p}=r,f=e.getState(),E=(0,u.d1)(f),y=null;if(E&&E.key===n)y=f.library.local.components[c]??null;else{f.fileByKey[n]||((0,i.kc)().dse_lk_published_components?await e.dispatch((0,g.nb)({libraryKey:(0,s.$)(n)})):await (0,g.iG)(e,n),f=e.getState());let r=f.fileByKey[n],a=r?(0,_.l)(r):void 0;!a||(y=(0,h.HK)(f.library.publishedByLibraryKey.components,a)[c]??null)||((0,i.kc)().dse_lk_published_components?await e.dispatch((0,g.nb)({libraryKey:(0,s.$)(n)})):await (0,g.iG)(e,n),f=e.getState(),y=(0,h.HK)(f.library.publishedByLibraryKey.components,a)[c]??null)}y?e.dispatch(d.Yf({item:y,canvasPosition:new a.Mi(m,p),percentageOffset:new a.Mi(.5,.5),insertAsChildOfCanvas:!1})):e.dispatch(l.F.enqueue({type:"insert_component_error",message:(0,o.t)("design_systems.subscriptions.this_component_is_not_available"),error:!0}))})},760421:(e,r,n)=>{n.d(r,{F$:()=>S,am:()=>w,fR:()=>A,nE:()=>C});var i=n(268853),a=n(922827),o=n(776250),s=n(966712),l=n(456772),c=n(776621),d=n(939863),u=n(588666),m=n(392592),p=n(980820),h=n(182976),_=n(404717),g=n(974105),f=n(416095),E=n(173454),y=n(735974),b=n(981765),v=n(705129),I=n(663897),T=n(308509);let S=(0,p.nF)((e,{libraryKey:r,libraryFileKey:n,subscriptions:i,isCommunityLibrary:o=!1})=>{if(!i||(0,f.td)(e.getState().library,r??(0,u.$)(n)))return;let l=(0,g.d1)(e.getState());if(l){let c=l.editor_type??"design";(!0===i||"design"===c&&i.design||"whiteboard"===c&&i.figjam)&&(e.getState().leftPanel.activeTab===a.xae.ASSETS||e.getState().universalInsertModal.showing?(0,s.kc)().dse_lk_published_components?e.dispatch((0,I.nb)({libraryKey:r??(0,u.$)(n)})):(0,I.iG)(e,n,o):e.dispatch(h.yH({key:(0,v.yD)(l.key)})))}}),w=(0,p.nF)(async(e,r)=>{let{libraryFileSubscription:n,userInitiated:a,isCommunityLibrary:s,publishedLibrary:u}=r,{file_key:p,library_file_key:h,is_subscribed:g,id:f,library_key:v}=n,I=e.getState().openFile?.key||null;I===p&&e.dispatch(S({libraryFileKey:h,subscriptions:g,isCommunityLibrary:s}));let w=e.getState().library.subscriptions.byFile[p];if(w&&h in w&&w[h]===g||!a)return;let{optimistId:A}=e.optimisticDispatch(T.O.postFileSubscription(r)),C=s?y.f.createCommunityLibraryFileSubscription({fileKey:p,libraryHubFileId:h,isSubscribed:g}):b.A.postFileSubscription({fileKey:p,libraryFileKey:h,isSubscribed:g});f?l.WB()?.optimisticallyUpdate({LibraryFileSubscription:{[f]:{isSubscribed:g}}},C):g&&u&&l.WB()?.optimisticallyCreate({LibraryFileSubscription:{[`optimistic-id-${h}`]:{isSubscribed:g,fileKey:p,hubFileId:s?h:null,libraryKey:v??null,libraryFileKey:h,canRead:!0,library:{updatedAt:new Date,createdAt:new Date,numComponents:u.num_components,numStateGroups:u.num_state_groups??0,numStyles:u.num_styles,numStylesFill:0,numStylesText:0,numStylesEffect:0,numStylesGrid:0,numVariables:u.num_variables,numVariablesBoolean:0,numVariablesColor:0,numVariablesFloat:0,numVariablesString:0,numLibraryAssets:0,numVariableSets:u.num_variable_collections,numModuleAssets:u.num_module_assets,fileKey:h,file:{_id:`optimistic-id-${h}`,_name:null,key:h,name:u.library_name,libraryKey:u.library_key,signedThumbnailUrl:u.thumbnail_url,signedThumbnailUrlOverride:null,thumbnailUrl:u.thumbnail_url,thumbnailUrlOverride:null,parentOrgId:null,thumbnailGuid:E.Nf(u)?u.thumbnail_guid:null},hubFileId:s?h:null,canRead:!0},communityLibrary:null}}},C);try{await C,e.dispatch(_.c(A)),s&&o.az.trackDefinedEvent("library_preferences_modal.community_library_file_subscription_toggle.outcome",{isSubscribed:g,fileKey:p,libraryFileKey:h,outcome:"success"})}catch(r){e.dispatch(_.r(A)),e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedEvent("library_preferences_modal.community_library_file_subscription_toggle.outcome",{isSubscribed:g,fileKey:p,libraryFileKey:h,outcome:"error"}),(0,c.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{openFileKey:I,fileKey:p,libraryFileKey:h,isSubscribed:g,isCommunityLibrary:s}})}}),A=(0,p.nF)(async(e,r)=>{let{optimistId:n}=e.optimisticDispatch(T.O.postUserSubscription(r)),{libraryUserSubscription:a,isCommunityLibrary:s,userInitiated:l}=r,{file_key:u,subscriptions:p}=a;if(e.dispatch(S({libraryFileKey:u,subscriptions:p,isCommunityLibrary:s})),l)try{await b.A.postUserSubscription({fileKey:u,subscriptions:p,isCommunityLibrary:!!s}),e.dispatch(_.c(n)),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"user",libraryType:s?"community":"file",outcome:"success"})}catch(r){e.dispatch(_.r(n)),e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"user",libraryType:s?"community":"file",outcome:"error"}),(0,c.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:u,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,isCommunityLibrary:s}})}}),C=(0,p.nF)(async(e,r)=>{let{optimistId:n}=e.optimisticDispatch(T.O.postTeamSubscription(r)),{libraryTeamSubscription:a,userInitiated:s,isCommunityLibrary:l}=r,{file_key:u,subscriptions:p,team_id:h}=a;if(e.dispatch(S({libraryFileKey:u,subscriptions:p,isCommunityLibrary:l})),!s)return;let g=l?y.f.createCommunityLibraryTeamSubscription({libraryHubFileId:u,subscriptions:p,teamId:h}):b.A.postTeamSubscription({fileKey:u,subscriptions:p,teamId:h});try{await g,e.dispatch(_.c(n)),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"team",libraryType:l?"community":"file",outcome:"success"})}catch(r){e.dispatch(_.r(n)),e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,subscriptionType:"team",libraryType:l?"community":"file",outcome:"error"}),(0,c.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{fileKey:u,designSubscribed:p.design,figjamSubscribed:p.figjam,slidesSubscribed:p.slides,isCommunityLibrary:l}})}});(0,p.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=r,{libraryKey:o,isCommunityLibrary:c,resourceId:u,subscriptions:p,workspaceId:h}=n,_=(0,s.kc)().dse_lk_post_subscriptions?b.A.postWorkspaceSubscriptionByLibraryKey({libraryKey:o,subscriptions:p,workspaceId:h}):b.A.postWorkspaceSubscription({resourceId:u,subscriptions:p,workspaceId:h,isCommunityLibrary:!!c});n.id?(0,l.WB)().optimisticallyUpdate({LibraryWorkspaceSubscription:{[n.id]:{isSubscribed:p.design,figJamSubscribed:p.figjam,slidesSubscribed:p.slides}}},_):(0,l.WB)().optimisticallyCreate({LibraryWorkspaceSubscription:{[`library-workspace-sub-${performance.now()}`]:{fileKey:u,workspaceId:h,libraryKey:o,isSubscribed:p.design,figJamSubscribed:p.figjam,slidesSubscribed:p.slides,canRead:!0,hubFileId:c?u:null}}},_);try{await _,e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(r){e.dispatch(m.F.enqueue({message:r?.message??(0,d.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,p.nF)(async(e,r)=>{let{libraryWorkspaceSubscription:n,libraryName:i,workspaceName:a}=r,{isCommunityLibrary:o,libraryKey:c,resourceId:u,workspaceId:p}=n,h=(0,s.kc)().dse_lk_post_subscriptions?b.A.deleteWorkspaceSubscriptionByLibraryKey({libraryKey:c,workspaceId:p}):b.A.deleteWorkspaceSubscription({resourceId:u,workspaceId:p,isCommunityLibrary:!!o});n.id&&(0,l.WB)().optimisticallyDelete({LibraryWorkspaceSubscription:{[n.id]:null}},h);try{await h,e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.settings_updated_for",{libraryName:i,orgOrWorkspaceName:a})}))}catch(r){e.dispatch(m.F.enqueue({message:r?.message??(0,d.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0}))}}),(0,p.nF)(async(e,r)=>{let{optimistId:n}=e.optimisticDispatch(T.O.postOrgSubscription(r)),{libraryOrgSubscription:a,libraryTeamId:l,userInitiated:u}=r,{isCommunityLibrary:p,orgId:h,resourceId:g,subscriptions:f,libraryKey:E}=a;if(e.dispatch(S({libraryFileKey:g,libraryKey:E,subscriptions:f,isCommunityLibrary:p})),u){if(r.currentSubscription){let e=a.subscriptions.design;!(r.currentSubscription?.design||r.currentSubscription?.figjam)&&e?(0,o.sx)("Org Library File Enabled",{orgId:h,fileKey:g,libraryKey:E,fileTeamId:l}):(0,o.sx)("Org Library File Disabled",{orgId:h,fileKey:g,libraryKey:E,fileTeamId:l}),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle",{designSubscribed:a.subscriptions.design,figjamSubscribed:a.subscriptions.figjam,slidesSubscribed:a.subscriptions.slides,subscriptionType:"org",libraryType:p?"community":"file"})}try{(0,s.kc)().dse_lk_post_subscriptions?await b.A.postOrgSubscriptionByLibraryKey({libraryKey:a.libraryKey,subscriptions:f,orgId:h}):await b.A.postOrgSubscription({resourceId:g,subscriptions:f,orgId:h,isCommunityLibrary:!!p}),e.dispatch(_.c(n)),e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.settings_updated_for",{libraryName:r.libraryName,orgOrWorkspaceName:r.orgName})})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:a.subscriptions.design,figjamSubscribed:a.subscriptions.figjam,slidesSubscribed:a.subscriptions.slides,subscriptionType:"org",libraryType:p?"community":"file",outcome:"success"})}catch(r){e.dispatch(_.r(n)),e.dispatch(m.F.enqueue({message:(0,d.t)("design_systems.subscriptions.unable_to_change_setting"),error:!0})),o.az.trackDefinedMetric("library_preferences_modal.library_subscription_toggle.outcome",{designSubscribed:a.subscriptions.design,figjamSubscribed:a.subscriptions.figjam,slidesSubscribed:a.subscriptions.slides,subscriptionType:"org",libraryType:p?"community":"file",outcome:"error"}),(0,c.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,r,{tags:{libraryKey:a.libraryKey,designSubscribed:f.design,figjamSubscribed:f.figjam,slidesSubscribed:f.slides,isCommunityLibrary:p}})}}})},866072:(e,r,n)=>{n.d(r,{Nf:()=>u,aW:()=>p,vP:()=>m});var i=n(268853),a=n(966712),o=n(776621),s=n(980820),l=n(395281),c=n(416095),d=n(173454);let u=(0,s.nF)(e=>{(0,c.KQ)(e)}),m=(0,s.nF)((e,r)=>{e.dispatch(l.$I(r)),e.getState().openFile&&e.dispatch(u()),!r.libraryKey&&(0,a.kc)().dse_lk_realtime_audit&&(0,o.$D)(i.e.DESIGN_SYSTEMS_ECOSYSTEM,Error("putProductComponents called without a libraryKey"),{tags:{libraryFileKey:r.fileKey,openFileKey:e.getState().openFile?.key,teamId:r.teamId,type:r.type}})}),p=(0,s.nF)((e,r)=>{let{stateGroups:n,components:i,fileKeyOrHubFileId:a,libraryKey:o,teamId:s}=r;if(0!==n.length){let r=n.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(m({itemsById:r,fileKey:a,libraryKey:o,teamId:s??null,type:d.PW.STATE_GROUP}))}if(0!==i.length){let r=i.reduce((e,r)=>(e[r.node_id]=r,e),{});e.dispatch(m({itemsById:r,fileKey:a,libraryKey:o,teamId:s??null,type:d.PW.COMPONENT}))}})},876401:(e,r,n)=>{n.d(r,{De:()=>$,Sb:()=>H,TS:()=>Y,WM:()=>W,ZS:()=>Q,df:()=>K,sb:()=>q});var i=n(140593),a=n(966664),o=n(268853),s=n(922827),l=n(636149),c=n.n(l),d=n(167249),u=n(776250),m=n(966712),p=n(742808),h=n(717037),_=n(776621),g=n(553716),f=n(47506),E=n(939863),y=n(265746),b=n(696808),v=n(934533),I=n(980820),T=n(395281),S=n(662275),w=n(931828),A=n(974105),C=n(151283),N=n(599280),L=n(642481),O=n(416095),R=n(962155),P=n(973131),D=n(284321),k=n(984968),M=n(998612),F=n(173454),x=n(656012),U=n(776047),B=n(114721),V=n(765431),G=n(866072);let H=(0,d.N)("START_PUBLISH"),K=(0,d.N)("PUBLISH_PROGRESS"),W=(0,d.N)("PUBLISH_REQUEST_FINISHED"),$=(0,d.N)("SAVE_PUBLISH_DESCRIPTION"),Y=(0,I.nF)(e=>{e.dispatch(b.Q.dequeue({type:y._.MOVE_COMPONENTS_PROMPT})),(0,f.YQ)({id:"Finished publishing components"}),e.dispatch(W())}),z="library publish SSP";var j=(e=>(e.PublishStart="publish_start",e.CreateSavepoint="create_savepoint",e.GetPresignedPost="get_presigned_post",e.UploadThumbnails="upload_thumbnails",e.UploadParams="upload_params",e.AssetValidation="asset_validation",e.NonS3Error="non_s3_error",e.GenericError="generic_error",e))(j||{});let q=(0,I.nF)((e,{hubFileId:r})=>{let n=e.getState(),i=(0,m.kc)().ds_remove_redux_library_status;if(!i){let r=e=>{for(let r in e={...e})(0,O.HF)(e[r].status)?e[r].status=F.E8.DELETED:e[r].status===F.E8.NEW&&(e[r].status=F.E8.NOT_STAGED);return e},i=r(n.library.local.components),a=r(n.library.local.stateGroups),o=r(n.library.local.styles);e.dispatch(T.I0({local:i,type:F.PW.COMPONENT})),e.dispatch(T.I0({local:a,type:F.PW.STATE_GROUP})),e.dispatch(T.I0({local:o,type:F.PW.STYLE}))}e.dispatch(K({state:F.Qx.NONE})),e.dispatch(Q({unpublishAll:i,hubFileId:r}))});async function Z(e,r,n,i){let a=performance.now();if(!e.length)return{s3Paths:[],failedThumbnailNodeIds:[],styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let s=e.length,l=0,c=()=>{!function(e,r,n){e.dispatch(K({state:F.Qx.ASSEMBLING_COMPONENTS,progress:r,publishType:n,publishStartMs:X(e.getState().library.publishProgress)}))}(i,(l+=1)/s,r?F.M$.UNPUBLISH:F.M$.PUBLISH)},d=Object.create(null),m=[],f=[];if(await Promise.all(e.map(async e=>{try{let r=await scheduler.postTask(()=>(0,B.I6)(e,n),{priority:"user-blocking"});if(!r||0===r.length)throw Error("Unable to generate thumbnail");let[i,a]=e.node_id.split(":").map(e=>Number(e));if(isNaN(i))throw Error("Unable to parse sessionId");if(isNaN(a))throw Error("Unable to parse localId");f.push({sessionId:i,localId:a,thumbnail:r}),e.type===F.PW.STYLE&&(d[e.node_id]=JSON.stringify((0,B.fn)(e,n)))}catch(r){(0,g.x1)("publish","Failed to upload thumbnail for asset",{guid:e.node_id},{reportAsSentryError:!0}),m.push(e.type===F.PW.COMPONENT&&e.containing_frame?.containingStateGroup?.nodeId||e.node_id)}finally{c()}})),0===f.length)return{s3Paths:[],failedThumbnailNodeIds:m,styleMetaByNodeId:{},uploadDurationMs:0,encounteredNonS3PresignedPostError:!1};let E=[];for(;f.length;)E.push(f.splice(0,F.v$));let y=U.b.getThumbnailsBufferPresignedPostUrl(E.length),b=E.map(e=>e.reduce(({buffer:e,offset:r,guids:n},{sessionId:i,localId:a,thumbnail:o})=>(e.set([(0xff000000&i)>>24,(0xff0000&i)>>16,(65280&i)>>8,255&i,(0xff000000&a)>>24,(0xff0000&a)>>16,(65280&a)>>8,255&a,(0xff000000&o.byteLength)>>24,(0xff0000&o.byteLength)>>16,(65280&o.byteLength)>>8,255&o.byteLength],r),r+=12,e.set(o,r),r+=o.byteLength,n.push(`${i}:${a}`),{buffer:e,offset:r,guids:n}),{buffer:new Uint8Array(e.reduce((e,{thumbnail:r})=>e+r.byteLength+12,0)),offset:0,guids:[]})),v=[],I=(await y).data.meta.presigned_posts,T=!1;await Promise.allSettled(I.map(async({url:e,fields:r})=>{let n=b.shift();if(!n){(0,_.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Popped a concatenated buffer that does not exist"));return}try{v.push(await (0,h.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"uploadThumbnails",e,r,n.buffer,"application/octet-stream")),(0,p.S3)("publish.thumbnails_buffer.bytes",n.buffer.byteLength)}catch(e){e instanceof h.qW&&(T=!0),m.push(...n.guids)}})),T&&(0,_.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("uploadThumbnails: encountered non-S3 presigned POST error"));let S=performance.now()-a;return(0,u.sx)("Library generate and upload thumbnails",{duration:S}),{s3Paths:v,styleMetaByNodeId:d,failedThumbnailNodeIds:m,uploadDurationMs:S,encounteredNonS3PresignedPostError:T}}function X(e){return e.state===F.Qx.NONE?((0,g.x1)(z,"Attempted to update progress while not assembling components",e),null):e.publishStartMs}function J(e,r,n,i){let a=X(e);if(a){let e=performance.now()-a;(0,u.sx)(r,{duration:e}),(0,p.S3)(n,e,{error:i})}else(0,g.x1)(z,"Publish start time was null")}let Q=(0,I.nF)(async(e,r={})=>{let n,l,d,f,y,b,I;let T=e.getState(),U=r.onPublishSuccess??V.cc,W=r.onPublishProgress??V.UN,j=r.onPublishError??V.tZ,q=r.localAssetsWithDenormalizedPublishInfo??{};if(T.library.publishProgress.state!==F.Qx.NONE){e.dispatch(Y());return}let Q=(0,A.d1)(T);if(!Q){console.error("library publishChanges: file is null"),j({error:V.jO.NoFile,dispatch:e.dispatch}),e.dispatch(Y());return}let ee=r.itemsToPublish;if(void 0!==ee&&0===ee.size){console.error("No items selected to publish"),j({error:V.jO.NoItemsToPublish,dispatch:e.dispatch}),e.dispatch(Y());return}let et=r.unpublishAll||(0,R.aB)(Object.values((0,D.MH)(T)),ee)&&(0,R.aB)(Object.values((0,D.dM)(T)),ee)&&(0,R.aB)(Object.values((0,D.cM)(T)),ee)&&(0,R.aB)(Object.values((0,D.bh)(T)),ee)&&(!(0,M.O)(F.PW.MODULE)||(0,R.aB)(Object.values((0,D.x6)(T)),ee))&&(!(0,M.O)(F.PW.RESPONSIVE_SET)||(0,R.aB)(Object.values(q).filter(e=>e.type===F.PW.RESPONSIVE_SET),ee));if(!navigator.onLine){j({error:V.jO.Offline,publishType:et?F.M$.UNPUBLISH:F.M$.PUBLISH,dispatch:e.dispatch}),e.dispatch(Y());return}(0,p.Rh)(`${et?F.M$.UNPUBLISH:F.M$.PUBLISH}.start`),e.dispatch(H({unpublishAll:!!et})),e.dispatch(w.b({has_published_library_items:!0}));let er=(n,i,a,o)=>{e.dispatch((0,G.Nf)());let l=o?.encounteredNonS3PresignedPostError?"non_s3_error":i;J(e.getState().library.publishProgress,n,`${et?F.M$.UNPUBLISH:F.M$.PUBLISH}.error.duration`,l);let c=o?.error;(0,g.x1)(z,n,{...r,name:c?.name,message:c?.message,stack:c?.stack},{logToConsole:s.NUh.ALWAYS,reportAsSentryError:!0,forwardToDatadog:!0}),null!==a&&(0,u.sx)("Publish ended",{savepointId:a,hadException:!0}),function(e,r,n,i,a,o,s,l){0===r?function(e,r,n,i){if(r.state===F.Qx.UPLOADING){let e=X(r);if(e){let i=performance.now(),a=i-e,o=n?{totalDurationMs:a}:{totalDurationMs:a,uploadBuffersDurationMs:i-r.commitUpdatesDurationMs,clientPreWorkDurationMs:r.clientPreWorkDurationMs,createSavePointDurationMs:r.createSavePointDurationMs};for(let[e,n]of((0,u.sx)(`Client perceived ${r.publishType} duration`,o),Object.entries(o))){let i=`${r.publishType}.success.${e}`;(0,p.S3)(i,n)}}else(0,g.x1)(z,"Publish start time was null")}i({publishProgress:r,publishType:n?F.M$.UNPUBLISH:F.M$.PUBLISH,dispatch:e}),e($(""))}(i,e,n,a):function(e,r,n,i,a,o,s){let l=i?F.M$.UNPUBLISH:F.M$.PUBLISH;if(o&&e($(o)),s){a({error:V.jO.NonS3PresignedPost,publishType:l,dispatch:e});return}"number"!=typeof n?a({error:V.jO.GenericError,publishType:l,dispatch:e}):(J(r,"Partial publish failure",`${l}.partial_error.duration`,"asset_validation"),a({error:V.jO.PartialPublish,publishType:l,dispatch:e,numPublishSkippedDueToError:n}))}(i,e,r,n,o,s,l)}(e.getState().library.publishProgress,o?.numSkippedDueToError??{__tag:"UNKNOWN"},et,e.dispatch,U,j,r.savepointDescription,o?.encounteredNonS3PresignedPostError),e.dispatch(Y()),e.dispatch(S.Ce())},en=performance.now(),ei="slides"===Q.editor_type,ea=ei?(0,E.t)("design_systems.publish_actions.savepoint_for_unpublish_slides"):(0,E.t)("design_systems.publish_actions.savepoint_for_unpublish"),eo=ei?(0,E.t)("design_systems.publish_actions.savepoint_for_publish_slides"):(0,E.t)("design_systems.publish_actions.savepoint_for_publish");try{n=await (0,P.m)(Q.key,et?ea:eo,r.savepointDescription,e.dispatch,!0)}catch(e){er("Unable to create savepoint during library publish","create_savepoint",null,{error:e});return}if(!n){er("Created savepoint is null","create_savepoint",null);return}let es=performance.now()-en;(0,u.sx)("Publish start: savepoint successfully created",{savepointId:n.id});let el=c()(Object.values(T.library.local.components).filter(e=>e.isLocal),e=>(0,O.E2)(e)||F.Nv),ec=(0,k.H7)(T),{orderedUpdates:ed}=function(e){let r=[],n=e=>{e.assets.length&&r.push(e)},i=e[F.PW.VARIABLE_SET][F.M$.PUBLISH];n({publishType:F.M$.PUBLISH,assetType:F.PW.VARIABLE_SET,assets:i}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.VARIABLE_SET,assets:e[F.PW.VARIABLE_SET][F.M$.UNPUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.VARIABLE,assets:e[F.PW.VARIABLE][F.M$.UNPUBLISH]});let a=e[F.PW.STATE_GROUP][F.M$.PUBLISH],o=e[F.PW.COMPONENT][F.M$.UNPUBLISH].filter(e=>null===(0,O.E2)(e));return n({publishType:F.M$.PUBLISH,assetType:F.PW.STATE_GROUP,assets:a}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.STATE_GROUP,assets:e[F.PW.STATE_GROUP][F.M$.UNPUBLISH]}),n({publishType:F.M$.PUBLISH,assetType:F.PW.COMPONENT,assets:e[F.PW.COMPONENT][F.M$.PUBLISH].filter(e=>!(0,O.E2)(e))}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.COMPONENT,assets:o}),n({publishType:F.M$.PUBLISH,assetType:F.PW.STYLE,assets:e[F.PW.STYLE][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.STYLE,assets:e[F.PW.STYLE][F.M$.UNPUBLISH]}),(0,M.O)(F.PW.MODULE)&&(n({publishType:F.M$.PUBLISH,assetType:F.PW.MODULE,assets:e[F.PW.MODULE][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.MODULE,assets:e[F.PW.MODULE][F.M$.UNPUBLISH]})),(0,M.O)(F.PW.RESPONSIVE_SET)&&(n({publishType:F.M$.PUBLISH,assetType:F.PW.RESPONSIVE_SET,assets:e[F.PW.RESPONSIVE_SET][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.RESPONSIVE_SET,assets:e[F.PW.RESPONSIVE_SET][F.M$.UNPUBLISH]})),(0,M.O)(F.PW.CODE_COMPONENT)&&(n({publishType:F.M$.PUBLISH,assetType:F.PW.CODE_COMPONENT,assets:e[F.PW.CODE_COMPONENT][F.M$.PUBLISH]}),n({publishType:F.M$.UNPUBLISH,assetType:F.PW.CODE_COMPONENT,assets:e[F.PW.CODE_COMPONENT][F.M$.UNPUBLISH]})),{orderedUpdates:r}}((0,R.jx)((0,D.dM)(T),(0,D.MH)(T),(0,D.cM)(T),(0,D.tK)(T),(0,D.bh)(T),(0,D.x6)(T),q,Q,T.teams,{overridePublishPermissions:!!r.hubFileId,moveRemappings:r.moveInformation?.moveRemappings??{},itemsToPublish:ee,forcePublish:r.forcePublish,unpublishAll:r.unpublishAll})),eu=ed.reduce((e,{publishType:r,assetType:n,assets:a})=>{let o="";switch(n){case F.PW.COMPONENT:o="numComponentBuffers";break;case F.PW.STATE_GROUP:o="numStateGroupBuffers";break;case F.PW.STYLE:o="numStyleBuffers";break;case F.PW.VARIABLE_SET:o="numVariableSetBuffers";break;case F.PW.MODULE:o="numTemplateBuffers";break;case F.PW.VARIABLE:case F.PW.VARIABLE_OVERRIDE:break;case F.PW.RESPONSIVE_SET:o="numResponsiveSetBuffers";break;case F.PW.CODE_LIBRARY:case F.PW.CODE_FILE:case F.PW.CODE_COMPONENT:case F.PW.CONSTRAINED_TEMPLATE:break;default:(0,i.xb)(n)}r===F.M$.UNPUBLISH&&(o=`${o}Unpublished`);let s=o;return s in e&&(e[s]=a.length),e},{numComponentBuffers:0,numStateGroupBuffers:0,numStyleBuffers:0,numVariableSetBuffers:0,numTemplateBuffers:0,numResponsiveSetBuffers:0,numComponentBuffersUnpublished:0,numStateGroupBuffersUnpublished:0,numStyleBuffersUnpublished:0,numVariableSetBuffersUnpublished:0,numTemplateBuffersUnpublished:0,numResponsiveSetBuffersUnpublished:0});(0,u.sx)("Library publish upload",{fileKey:Q.key,publishMode:(0,C.z)((0,D.Io)(T)),publishScope:r.publishScope,libraryModalSessionId:r.libraryModalSessionId,orgId:ec?.org_id,workspaceId:ec?.workspace_id,teamId:ec?.id,...eu});let em=ed.flatMap(e=>e.publishType===F.M$.PUBLISH?e.assets:[]).reduce((e,r)=>r.type!==F.PW.VARIABLE&&r.type!==F.PW.VARIABLE_SET&&(0,M.O)(r.type)?r.type===F.PW.MODULE?e.concat(r):e.concat(r).concat(el[r.node_id]||[]):e,[]);try{l=await Z(em,et,T.library.local.thumbnails,e)}catch(e){er("Unable to upload thumbnails during library publish","upload_thumbnails",n.id,{error:e});return}let{failedThumbnailNodeIds:ep,s3Paths:eh,styleMetaByNodeId:e_,uploadDurationMs:eg,encounteredNonS3PresignedPostError:ef}=l,eE=ed.flatMap(e=>e.assets).length;if(ep.length===eE){er("All thumbnails failed to upload"+(ef?" (non-s3 error)":""),"upload_thumbnails",n.id,{numSkippedDueToError:eE,encounteredNonS3PresignedPostError:ef});return}let ey=ed.map(({publishType:e,assetType:r,assets:n})=>{let i=n.filter(e=>!ep.includes(e.node_id));return i.length>0?{publishType:e,assetType:r,assets:i}:null}).filter(a.Vq);if((0,m.kc)().first_draft_publish_ux&&r.publishAsFirstDraftKit){let e=s.XJn.getLocalDesignSystemKits();e.length>1?(0,g.xi)("first_draft","Attempting to publish a file with multiple kits",{kitNames:e.map(e=>e.name)}):1===e.length&&(I=await (0,N.Hj)(e[0].pageId,e[0].name,{publishType:L.tf.LIBRARY_PUBLISH,localComponents:(0,D.MH)(T),localStateGroups:(0,D.dM)(T),localVariableSets:(0,D.bh)(T)},r.firstDraftVariablesForTheme))}let eb={updates:ey.map(e=>({publishType:e.publishType,assetType:e.assetType,guids:e.assets.map(e=>{let r=(0,B.p$)(e);return r||(console.warn("Asset with null nodeId:",e),(0,_.$D)(o.e.DESIGN_SYSTEMS_EDITOR,Error("Asset with null node ID found during publish"))),r}).filter(a.Vq)})),moveRemappings:r.moveInformation?.moveRemappings??{},s3ThumbnailBufferPaths:eh,styleMetaByNodeId:e_,clientProtocolVersion:window.mpGlobal.version,themeMetaData:r.themePublishData??{},...I?{kitMetaData:I}:{}};try{let e=(await x.Z.postUploadPublishParams()).data.meta;d=e.url,f=e.fields}catch(e){er("Unable to get presigned post url for params","get_presigned_post",n.id,{error:e});return}try{let e=new TextEncoder;y=await (0,h.ET)(o.e.DESIGN_SYSTEMS_EDITOR,"publishChanges.params",d,f,e.encode(JSON.stringify(eb)),"application/json")}catch(r){let e=r instanceof h.qW;er("Unable to upload publishing params"+(e?" (non-s3 error)":""),"upload_params",n.id,{error:r,encounteredNonS3PresignedPostError:e});return}try{b=(await x.Z.postLibraryPublish({fileKey:Q.key,checkpointKey:n.checkpoint_key,paramsPath:y,publishToCommunity:!!r.hubFileId,publishScope:r.publishScope})).data.meta.library_publish_id}catch(e){er("Unable to publish","generic_error",n.id,{error:e});return}try{!function(e,r,n,i,a,o,s,l){let c=performance.now(),d=r?F.M$.UNPUBLISH:F.M$.PUBLISH;e.dispatch(K({state:F.Qx.UPLOADING,publishType:d,progress:0,libraryPublishId:n,savepoint:i,numSkippedPriorToPublish:a,publishStartMs:X(e.getState().library.publishProgress),commitUpdatesDurationMs:c,clientPreWorkDurationMs:o,createSavePointDurationMs:s})),l({publishType:d,dispatch:e.dispatch,icon:v.zX.SPINNER})}(e,et,b,n,ep.length,eg,es,W)}catch(e){er("Unable to notify publish start","generic_error",n.id,{error:e});return}})},145519:(e,r,n)=>{n.d(r,{F6:()=>h,Ho:()=>m,K6:()=>u,PU:()=>g,V9:()=>f,mu:()=>_,sm:()=>d,sp:()=>E,yc:()=>p});var i=n(922827),a=n(167249),o=n(988022),s=n(805286),l=n(301922),c=n(980820);let d=(0,a.N)("MULTIPLAYER_EMOJI_UPDATE_EMOJI_WHEEL_POSITION"),u=(0,a.N)("MULTIPLAYER_EMOJI_CLEAR_STATE"),m=(0,c.nF)(e=>{i.glU.setIsInCursorChat(!1),e.dispatch(u())}),p=(0,a.N)("MULTIPLAYER_EMOJI_START_CHATTING"),h=(0,c.nF)((e,r)=>{let n=e.getState();0>[i.NLJ.HAND,i.NLJ.SELECT,i.NLJ.HAND_SELECT].indexOf(n.mirror.appModel.currentTool)&&i.glU.triggerAction("set-tool-default",null),(0,l.q)().then(e=>{e||(i.glU.setIsInCursorChat(!0),(0,o.ds)("Started chatting",n.openFile?.key,n,{source:r.source}))}),e.dispatch(p(r))}),_=(0,a.N)("MULTIPLAYER_EMOJI_STOP_REACTING"),g=(0,a.N)("MULTIPLAYER_EMOJI_START_REACTING");(0,c.nF)((e,r)=>{s.R9.resetReactions(),e.dispatch(g(r))});let f=(0,a.N)("MULTIPLAYER_EMOJI_TOGGLE_EMOJI_WHEEL"),E=(0,c.nF)((e,r)=>{let n=e.getState();(0,o.ds)("Toggled emoji wheel",n.openFile?.key,n,{wheelType:r.wheelType,...r.source&&{source:r.source}}),e.dispatch(f(r))})},492379:(e,r,n)=>{n.d(r,{Jd:()=>w,QC:()=>T,UF:()=>A,aJ:()=>v,kN:()=>I,lT:()=>S});var i=n(776250),a=n(456772),o=n(27087),s=n(881388),l=n(939863),c=n(392592),d=n(980820);n(662275);var u=n(99403),m=n(982957),p=n(964258),h=n(935757),_=n(657193),g=n(668860),f=n(410436),E=n(679892),y=n(738269),b=n(936500);let v="team_join_request_submitted",I="permission_request_submitted",T=(0,d.nF)(async(e,r)=>{let n={team_id:r.teamId,level:r.level,message:r.message},a=e.getState().user?.id,c=e.getState().roles.byTeamId,d=a&&c&&c[r.teamId]?c[r.teamId][a]?.level:null,u={level:r.level,team_id:r.teamId,team_type:r.teamOrgAccess,source:r.source,folder_id:r.folderId};r.actionType===I?(0,i.sx)(I,u):(0,i.sx)(v,u),await o.Ay.post("/api/team_role_requests",n).then(({data:n})=>{let i=n.meta;i.status===f.c.APPROVED?e.dispatch((0,p.vr)({teamId:i.team_id})):r.level===g.e6.EDITOR&&d===g.e6.VIEWER?e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_edit_files_in_this_team"))):e.dispatch(s.s.flash((0,l.t)("org_actions.you_ve_requested_to_join_this_team")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),S=(0,d.nF)((e,r)=>{o.Ay.del(`/api/team_role_requests/${r.requestId}`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_withdrawn")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})}),w=(0,d.nF)((e,r)=>{o.Ay.post(`/api/team_role_requests/${r.requestId}/approve`,{level:`${r.level}`}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_approved"))),e.dispatch(b.bE({role:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})}),A=(0,d.nF)((e,r)=>{o.Ay.post(`/team_role_requests/${r.requestId}/deny`).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.request_denied")))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r.message)||(0,l.t)("org_actions.an_error_occurred")))})});(0,d.nF)((e,{orgId:r})=>{o.Ay.put(`/api/orgs/${r}`,{public_plugins_allowed:!0}).then(({data:r})=>{e.dispatch(u.yJ({org:r.meta}))})}),(0,d.nF)((e,{payload:r,successMessage:n})=>{let i=e.getState().currentUserOrgId;o.Ay.put(`/api/orgs/${i}`,r).then(r=>{e.dispatch(u.yJ({org:r.data.meta})),n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,googleSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{google_sso_only:n}).then(({data:r})=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,samlSsoOnly:n})=>{o.Ay.put(`/api/orgs/${r}`,{saml_sso_only:n}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_authentication_settings"))),e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{orgId:r,attribute:n})=>{o.Ay.put(`/api/orgs/${r}`,{featured_scim_metadata:n}).then(r=>{e.dispatch(u.yJ({org:r.data.meta}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))})}),(0,d.nF)((e,{onFailure:r,onSuccess:n,orgId:i,timeoutDurationInSecs:a})=>{o.Ay.put(`/api/orgs/${i}`,{idle_timeout_duration_in_secs:a}).then(r=>{e.dispatch(s.s.flash((0,l.t)("org_actions.updated_idle_session_timeout"))),e.dispatch(u.yJ({org:r.data.meta})),n()}).catch(n=>{r(),e.dispatch(s.s.error((0,l.Jv)(n)||(0,l.t)("org_actions.an_error_occurred")))})}),(0,d.nF)((e,{orgId:r,ipAllowlistEnabled:n,ipAllowlistRanges:i,onSuccess:a})=>o.Ay.put(`/api/orgs/${r}/ip_allowlist_ranges`,{ip_ranges:n?i:void 0,ip_allowlist_enabled:n}).then(i=>{let o={...e.getState().orgById[r].shared_org_license_group_settings,ip_allowlist:n};e.dispatch(u.F6({id:r,shared_org_license_group_settings:o})),e.dispatch(s.s.flash("Updated IP allowlist settings")),a()}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred")))})),(0,d.nF)((e,{orgId:r})=>{o.Ay.post(`/api/org/${r}/deletion_request`).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.deletion_request_submitted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{let n=r.successMessage,i=r.autogenPasswordControl,o=r.settingsId,d=E.Eh.apiAutogenControls({orgId:r.orgId,autogen_password_controls:i});d.then(()=>{n&&e.dispatch(c.F.enqueue({message:n,type:"orgs.update",error:!1}))}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}),o?(0,a.WB)().optimisticallyUpdate({SharedOrgLicenseGroupSetting:{[o]:{autogenPasswordControls:i}}},d):(0,a.WB)().optimisticallyCreate({SharedOrgLicenseGroupSetting:{[`optimistic-id-${r.orgId}`]:{autogenPasswordControls:i,externalCollaborationControls:!1,publicLinkControlsSetting:null,teamCreationControls:null,publicLinkControlsMaxExpiration:null,resourceType:"Org",resourceId:r.orgId}}},d)}),(0,d.nF)((e,r)=>{o.Ay.post(`/api/org/${r.orgId}/delete_org_users`,{org_user_ids:r.orgUserIds}).then(r=>{e.dispatch(s.s.flash((0,l.t)("orgs_middleware.user_data_deleted")))}).catch(r=>{e.dispatch(s.s.error(r.data?.message||(0,l.t)("orgs_middleware.an_error_occurred_while_enqueeing_deletion_request"),5e3)),console.error(r)})}),(0,d.nF)((e,r)=>{(0,_.yP)(e.getState(),r.selectedView)?((0,h.nt)(r.orgId),(0,i.sx)("file-browser-hydrate",{location:"selectViewAndLoadItsResources"}),(0,h._X)("orgSelectViewAndLoadItsResources").then(n=>{e.dispatch(m.cL()),e.dispatch(y.Qv(n.data.meta)),e.dispatch(y.$T(r.selectedView))})):(r.actionsIfNotHydrating&&r.actionsIfNotHydrating.forEach(e.dispatch),e.dispatch(y.$T(r.selectedView)))}),(0,d.nF)((e,{orgId:r,slidesDisabled:n,successMessage:i})=>{E.Eh.putToggleSlidesDisabled({orgId:r,slidesDisabled:n}).catch(r=>{e.dispatch(s.s.error((0,l.Jv)(r)||(0,l.t)("org_actions.an_error_occurred"),5e3))}).then(()=>{e.dispatch(u.F6({id:r,is_slides_disabled:n})),i&&e.dispatch(s.s.flash(i))})})},783162:(e,r,n)=>{n.d(r,{hZ:()=>p,wc:()=>u,yH:()=>m});var i=n(167249),a=n(27087),o=n(881388),s=n(939863),l=n(392592),c=n(980820),d=n(662275);(0,c.nF)((e,r)=>{let{idpUser:n}=r,i=e.getState();a.Ay.put(`/api/org_invites/${n.id}`,{org_id:i.currentUserOrgId,account_type:n.account_type}).then(({data:r})=>{e.dispatch(p([r.meta])),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_update_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_update_error");e.dispatch(o.s.flash(n))})}),(0,c.nF)((e,r)=>{let n=e.getState(),{emails:i,accountType:o,isResentInvite:c,licenseGroupId:m,workspaceId:h,billableProductKey:_}=r;e.dispatch(u({creating:!0})),a.Ay.post("/api/org_invites",{org_id:n.currentUserOrgId,emails:i,account_type:o,billable_product_key:_,license_group_id:m,workspace_id:h}).then(({data:r})=>{let n=r.meta;e.dispatch(p(n)),e.dispatch(u({creating:!1})),e.dispatch(d.Lo());let a=(0,s.t)("org_invite.invite_resent");if(!c){let e=(0,s.t)("org_invite.new_members_message",{numInvites:n.length}),r=i.length-n.length,o=(0,s.t)("org_invite.existing_members_message",{numExisting:r});n.length>0?(a=e,r>0&&(a=[a,o].join(" "))):a=o}e.dispatch(l.F.enqueue({message:a}))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_creation_error");e.dispatch(u({creating:!1})),e.dispatch(l.F.enqueue({message:n,error:!0}))})}),(0,c.nF)((e,r)=>{let{idpUser:n}=r,i=e.getState();a.Ay.del(`/api/org_invites/${n.id}`,{org_id:i.currentUserOrgId}).then(r=>{e.dispatch(m({org_invite_id:n.id})),e.dispatch(o.s.flash((0,s.t)("org_invite.org_invite_deletion_success",{email:n.email})))}).catch(r=>{let n=r.data?.message||(0,s.t)("org_invite.org_invite_deletion_error");e.dispatch(o.s.flash(n))})});let u=(0,i.N)("IS_CREATING_ORG_INVITES"),m=(0,i.N)("DELETE_ORG_INVITE"),p=(0,i.N)("SET_ORG_INVITES")},731723:(e,r,n)=>{n.d(r,{E:()=>l,hZ:()=>c});var i=n(167249),a=n(881388),o=n(980820),s=n(210397);let l=(0,i.N)("ORG_SAML_CONFIG_GET");(0,o.nF)(e=>{let r=e.getState().currentUserOrgId;s.P.getOrgSamlConfig({orgId:r}).then(r=>{e.dispatch(c({orgSamlConfig:r.data.meta}))}).catch(r=>{e.dispatch(a.s.flash(r.data?.message||"An error occurred while fetching org saml config.",5e3)),console.error(r)}),e.dispatch(l())});let c=(0,i.N)("ORG_SAML_CONFIG_SET")},377090:(e,r,n)=>{n.d(r,{E:()=>y,GR:()=>T,Lx:()=>b,MT:()=>v,hZ:()=>I}),n(411855),n(188507);var i=n(88823),a=n.n(i),o=n(167249),s=n(27087),l=n(881388),c=n(939863),d=n(980820),u=n(902957),m=n(964258),p=n(937294),h=n(320741),_=n(679892),g=n(56342),f=n(182976);(0,d.nF)(async(e,r)=>{let n=r.team.id;try{let i=(await s.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess})).data.meta;e.dispatch(I({teams:[i]}))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_changing_team_s_org_access"))))}}),(0,d.nF)(async(e,r)=>{let n={};if(r.teams.forEach(e=>{let r=e.workspace_id;r&&(r in n||(n[r]=[]),n[r].push(e.id))}),Object.keys(n).length)try{let r=Object.keys(n).map(e=>{let r=n[e];return s.Ay.del(`/api/workspace/${e}/teams`,{team_ids:r})}),i=await Promise.all(r),a=[].concat(...i.map(e=>e.data.meta));e.dispatch(I({teams:a})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_unassigned",{numTeams:a.length})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_unassigning_team_s_from_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.teams.map(e=>e.id),i=r.workspaceId;try{let a=(await s.Ay.post(`/api/workspace/${i}/teams`,{team_ids:n})).data.meta;e.dispatch(I({teams:a})),e.dispatch(l.s.flash((0,c.t)("org_team_actions.teams_were_assigned_to_workspace",{numTeams:a.length,workspaceName:r.workspaceName})))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_assigning_team_s_to_a_workspace"))))}}),(0,d.nF)(async(e,r)=>{let n=r.workspaceId;e.dispatch(b("loading"));try{let r=(await g.u.getTeams({includeSecretTeams:!0,workspaceId:n})).data.meta;e.dispatch(I({teams:r})),e.dispatch(b("loaded"))}catch(r){e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_fetching_teams")))),e.dispatch(b("errors"))}}),(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,i=r.teamIds,a={team_ids:i};r.level&&(a.level=r.level);let o=(0,p.n1)(i);e.dispatch(f.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,a).then(()=>{e.dispatch((0,m.UM)({teamIds:i,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining_teams")))),e.dispatch(f.of({key:o}))})});let E=(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,i=r.teamId,a={team_ids:[i]};r.level&&(a.level=r.level);let o=(0,p.p9)(i);e.dispatch(f.Cx({key:o})),s.Ay.post(`/api/orgs/${n}/teams/join`,a).then(()=>{e.dispatch((0,m.vr)({teamId:i,level:r.level}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_joining")))),e.dispatch(f.of({key:o}))})});(0,d.nF)((e,r,{loadingKey:n})=>{let i=e.getState().currentUserOrgId,{teamId:a,disableFlashError:o}=r,s=_.Eh.getTeam({orgId:i,teamId:a});(0,h.N)(s,e,n),s.then(r=>{let n=r.data.meta;e.dispatch(u.yJ({team:n,userInitiated:!1}))}).catch(r=>{o||e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_this_team"))))})},({teamId:e})=>`ORG_FETCH_TEAM_${e}`);let y=(0,o.N)("ORG_FETCH_DISCOVERABLE_TEAMS");(0,d.nF)((e,r)=>{let n=e.getState().currentUserOrgId,{includeProjectCount:i,includeMemberCount:a,includeTopMembers:o,includeSecretTeams:s}=r||{};_.Eh.getTeams({orgId:n,includeMemberCount:a,includeProjectCount:i,includeTopMembers:o,includeSecretTeams:s}).then(r=>{let n=r.data.meta;e.dispatch(I({teams:n}))}).catch(r=>{e.dispatch(l.s.error((0,c.Jv)(r,(0,c.t)("org_team_actions.an_error_occurred_while_trying_to_fetch_teams_within_the_organization"))))}),e.dispatch(y(r))});let b=(0,o.N)("SET_ORG_TEAMS_STATUS"),v=(0,o.N)("RESET_ORG_TEAMS"),I=(0,o.N)("ORGS_SET_DISCOVERABLE_TEAMS");function T(e,r,n){return a()(()=>e(E({teamId:r,level:n})),500,{leading:!0,trailing:!1})}},995852:(e,r,n)=>{n.d(r,{$h:()=>O,Ay:()=>C,Az:()=>V,Bq:()=>Y,Ef:()=>R,I2:()=>x,Je:()=>U,Lj:()=>N,Lo:()=>H,M2:()=>B,MN:()=>T,Mv:()=>$,Nj:()=>D,Qe:()=>P,Qg:()=>M,Ts:()=>W,WG:()=>S,WX:()=>j,Wc:()=>k,XS:()=>A,bJ:()=>L,eK:()=>I,i:()=>w,js:()=>G,pv:()=>z,qU:()=>K,yy:()=>F});var i=n(167249),a=n(181912),o=n(966712),s=n(988261),l=n(27087),c=n(881388),d=n(939863),u=n(738269),m=n(243987),p=n(707465),h=n(622139),_=n(637590),g=n(668526),f=n(980820),E=n(507877),y=n(662275),b=n(902957),v=n(114961);(0,f.nF)((e,{teamId:r,showBreadcrumbs:n,onCloseOrComplete:i})=>{e.dispatch(u.$T({view:"eduReview",teamId:r,showBreadcrumbs:n,onCloseOrComplete:i})),e.dispatch(H({billingPeriod:h.tY.STUDENT}))});let I=(0,i.N)("PAYMENT_RESTORE_SAVED_CART"),T=(0,i.N)("PAYMENT_SET_CURRENCY"),S=(0,i.N)("PAYMENT_SET_TOKEN"),w=(0,i.N)("PAYMENT_SET_TAXES"),A=(0,i.N)("PAYMENT_SET_PROMO"),C=(0,f.nF)((e,r)=>{r.promo||(0,s._H)(),e.dispatch(A(r))}),N=(0,i.N)("PAYMENT_SET_SUBMIT_PUT_ANNUAL_QUANTITY_PENDING"),L=(0,i.N)("PAYMENT_PUT_ANNUAL_QUANTITY");(0,f.nF)((e,r)=>{let{teamId:n,annualQuantity:i,annualWhiteboardQuantity:a}=r;l.Ay.put(`/api/subscriptions-2018-11-08/team/${n}`,{annual_quantity:i,annual_whiteboard_quantity:a||0}).then(()=>{e.dispatch(v.Be({teamId:n})),e.dispatch(y.Ce()),e.dispatch(N({submitPending:!1})),e.dispatch(c.s.flash((0,d.t)("flash.updated_annual_seats")))}).catch(r=>{(0,m.UE)(r,e.dispatch),e.dispatch(N({submitPending:!1}))}),e.dispatch(L())});let O=(0,i.N)("PAYMENT_SET_VAT_GST_ID"),R=(0,i.N)("PAYMENT_SET_REGIONAL_VAT_GST_ID"),P=(0,i.N)("PAYMENT_MAKE_STUDENT_TEAM"),D=(0,f.nF)((e,r)=>{let n=e.getState(),i=n.user?.id,a=(0,o.kc)().ps_benchmark;l.Ay.put(`/api/teams/${r.teamId}/student_team`,{student_team:!0}).then(()=>{a&&i?e.dispatch(E._l({workspace:{userId:i,teamId:r.teamId,orgId:null},view:{view:"allProjects"}})):e.dispatch(u.$T({view:"team",teamId:r.teamId})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_upgraded_to_an_education_team"))),e.dispatch(x({submitPending:!1})),r.onCloseOrComplete?.()}).catch(r=>{(0,m.UE)(r,e.dispatch),e.dispatch(x({submitPending:!1}))}),e.dispatch(P())}),k=(0,f.nF)((e,{teamId:r})=>{let n=e.getState().teams[r];n.student_team?l.Ay.put(`/api/teams/${r}/student_team`,{student_team:!1}).then(()=>{e.dispatch(v.Be({teamId:r})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_downgraded_to_a_starter_team")))}).catch(r=>(0,m.UE)(r,e.dispatch)):l.Ay.del(`/api/subscriptions-2018-11-08/team/${r}`).then(({data:i})=>{let o=i.meta&&i.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(v.Be({teamId:r}));let{annual_subscription:s,monthly_subscription:l}=e.getState().teamBilling.summary,u=s?.quantity?s.current_period_end:null,m=l?.quantity?l.current_period_end:null,p=u&&m?(0,a.A)(u).isAfter((0,a.A)(m))?u:m:u||m;e.dispatch(c.s.flash(p?(0,d.t)("flash.team_will_become_free_starter_team_on_date",{teamName:n.name,cancelDate:(0,a.A)(p).toDate()}):(0,d.t)("flash.team_will_be_downgraded_at_the_end_of_the_current_subscription_period",{teamName:n.name}),8e3))}).catch(r=>(0,m.UE)(r,e.dispatch))}),M=(0,i.N)("PAYMENT_SHOW_ERROR");(0,f.nF)((e,{teamId:r})=>{let n=e.getState(),i=n.user?.id,a=(0,o.kc)().ps_benchmark,s={annual_quantity:n.payment.numDesignEditors||0,annual_whiteboard_quantity:n.payment.numWhiteboardEditors||0};l.Ay.put(`/api/subscriptions-2018-11-08/team/${r}`,s).then(({data:n})=>{let o=n.meta&&n.meta.team;o&&e.dispatch(b.yJ({team:o,userInitiated:!1})),e.dispatch(v.Be({teamId:r})),a&&i?e.dispatch(E._l({workspace:{userId:i,teamId:r,orgId:null},view:{view:"teamAdminConsole",teamId:r,teamAdminConsoleViewTab:g.Iv.BILLING}})):e.dispatch(u.$T({view:"team",teamId:r,teamViewTab:g.A$.BILLING})),e.dispatch(c.s.flash((0,d.t)("flash.successfully_added_an_annual_plan"))),e.dispatch(x({submitPending:!1}))}).catch(r=>{e.dispatch(x({submitPending:!1})),(0,m.UE)(r,e.dispatch)})});let F=(0,i.N)("PAYMENT_SET_COMPANY_DETAILS"),x=(0,i.N)("PAYMENT_SET_SUBMIT_PENDING"),U=(0,i.N)("PAYMENT_SET_EDITOR_STATUS_CHANGES"),B=(0,i.N)("PAYMENT_SET_NUM_FIGMA_EMAIL_TEAM_USERS"),V=(0,i.N)("PAYMENT_SET_NUM_WHITEBOARD_EDITORS"),G=(0,i.N)("PAYMENT_SET_NUM_EDITORS"),H=(0,i.N)("PAYMENT_SET_BILLING_PERIOD"),K=(0,i.N)("PAYMENT_SET_CAMPFIRE_SEATS"),W=(0,i.N)("PAYMENT_INIT"),$=(0,i.N)("PAYMENT_START_ORG_UPGRADE_FLOW"),Y=(0,f.nF)((e,r)=>{let{openInNewTab:n,newTeamProps:i,upsellSource:a}=r;if(n){let r=e.getState(),n=new URL((0,p.Np)(r,{view:"orgSelfServe",upsellSource:a}),document.baseURI).href;e.dispatch(E.V3({url:n}))}else e.dispatch(u.$T({view:"orgSelfServe",newTeamProps:i,upsellSource:a}));e.dispatch($({currency:r.currency}))}),z=(0,i.N)("PAYMENT_START_PRO_UPGRADE_FLOW"),j=(0,f.nF)((e,r)=>{let{teamId:n,billingPeriod:i,onBillingCompleteRedirectInfo:a}=r,o={view:"teamUpgrade",teamFlowType:_.SC.UPGRADE_EXISTING_TEAM,teamId:n,paymentStep:h.tn.CHOOSE_PLAN,billingPeriod:i,planType:_.Sc.TEAM,...a?{searchParams:{onCompleteRedirectFileKey:a.fileKey,onCompleteRedirectNodeId:a.nodeId}}:{}};if(r.openInNewTab){let r=e.getState(),n=new URL((0,p.Np)(r,o),document.baseURI).href;e.dispatch(E.V3({url:n}))}else o.previousView=r.selectedView,e.dispatch(u.$T(o));e.dispatch(z({newTeam:r.newTeam,currency:r.currency}))})},758259:(e,r,n)=>{n.d(r,{S_:()=>O,gk:()=>R});var i=n(268853),a=n(776250),o=n(737947),s=n(966712),l=n(988261),c=n(776621),d=n(650322),u=n(27087),m=n(881388),p=n(939863),h=n(303345),_=n(980820),g=n(738269),f=n(662275),E=n(988022),y=n(964258),b=n(243987),v=n(888870),I=n(239671),T=n(622139),S=n(637590),w=n(50292),A=n(507877),C=n(995852),N=n(902957),L=n(114961);(0,_.nF)((e,{teamId:r,teamName:n,previousView:i})=>{e.dispatch(g.$T({view:"promoReview",teamId:r,teamName:n,previousView:i}))});let O=(0,_.nF)((e,r)=>{let{promoCode:n,teamId:i,teamName:a,onSuccess:o,onError:s}=r;u.Ay.post("/api/teams/redeem_promo",{promo_code:n,team_id:i}).then(()=>{o(),e.dispatch(m.s.flash((0,p.t)("flash.redeem_promo.success",{teamName:a})))}).catch(r=>{s(),e.dispatch(m.s.error((0,p.t)("flash.redeem_promo.failure")))})});(0,_.nF)((e,r)=>{let{teamId:n,surveyResult:i}=r,a=e.getState(),o=a.user?.id,l=(0,s.kc)().ps_benchmark;u.Ay.post(`/api/teams/${n}/pro_trial`).then(()=>{l&&o?e.dispatch(A._l({workspace:{userId:o,orgId:null,teamId:n},view:{view:"allProjects"}})):e.dispatch(g.$T({view:"team",teamId:n})),e.dispatch(m.s.flash((0,p.t)("payments.pro_trial.start_pro_trial_success"))),v.R_.trackInitiationSubmit(i,!0)}).catch(r=>{l&&o?e.dispatch(A._l({workspace:{userId:o,orgId:null,teamId:n},view:{view:"recentsAndSharing"}})):e.dispatch(g.$T({view:"recentsAndSharing"})),e.dispatch(m.s.error((0,p.t)("payments.pro_trial.start_pro_trial_error"))),v.R_.trackInitiationSubmit(i,!1)})});let R=(0,_.nF)((e,{teamName:r,invites:n,teamId:_,selectedCurrency:v,hasSelectedStudentTeam:O,displayedCostBreakdown:R,teamFlowType:P,onSuccess:D})=>{let k;let M=e.getState(),F=(0,s.kc)().ps_benchmark,x=(0,s.kc)().pro_onboarding_launch,U=(0,s.kc)().campfire_cart,B=M.user?.id,V=(e,r)=>({annual_quantity:(0,b.fD)(e,r),monthly_quantity:(0,b.Rq)(e,r)}),G=(0,b.ne)(M.payment.billingPeriod);if(!G){e.dispatch(m.s.error((0,p.t)("payments.invalid_billing_interval_error")));return}let H=null,K=null;if(U){let r=M.payment.cartSelections?.selectedUserSeatTypes,n=Object.values(_?M.teamUserByTeamId[_]:{}).map(e=>e.user_id??"");if(r&&(0,h.HG)(r,n))K=(0,h.VB)(r)??null,H=M.payment.cartSelections?.countBySeatType??null;else{e.dispatch(m.s.error((0,p.t)("payments.errors.error_processing_upgrade_request"))),(0,c.$D)(i.e.MONETIZATION_UPGRADES,Error("Unable to retrieve valid selectedUserSeatTypes while submitting Pro upgrade request"),{extra:{teamId:_,selectedUserSeatTypes:r}});return}}else H={design:M.payment.numDesignEditors,figjam:M.payment.numWhiteboardEditors};let W={...V(M.payment.billingPeriod,M.payment.numDesignEditors),annual_whiteboard_quantity:V(M.payment.billingPeriod,M.payment.numWhiteboardEditors).annual_quantity,monthly_whiteboard_quantity:V(M.payment.billingPeriod,M.payment.numWhiteboardEditors).monthly_quantity,editor_status_changes:M.payment.editorStatusChanges,subscription_monthly_quantity_figjam:V(M.payment.billingPeriod,M.payment.numWhiteboardEditors).monthly_quantity,subscription_annual_quantity_figjam:V(M.payment.billingPeriod,M.payment.numWhiteboardEditors).annual_quantity,vat_gst_id:M.payment.vatGstId||null,regional_vat_gst_id:M.payment.regionalVatGstId||null,legal_name:M.payment.legalName||null,display_name:M.payment.displayName||null,selected_user_seat_types:K,count_by_billable_product:H,billing_interval:G,displayed_cost_breakdown:R};if(null===_){let e=M.payment.promo,i=!!M.user&&(0,d.cn)(M.user);if(null!=e)k={...W,team_name:r,invite_emails:n,promo_code:e.code};else if(i&&O)k={...W,team_name:r,invite_emails:n,student_team:!0};else{let e=(0,s.DC)();k={...W,team_name:r,invite_emails:n,subscribe_to_pro:!0,address:e?.address,payment_method_id:e?.payment_method_id,selected_currency:v}}}else k={...W,selected_currency:v};let $=_?`/api/subscriptions-2018-11-08/team/${_}`:"/api/teams/create",Y=M.selectedView,z=M.payment.upgradingNewTeam;u.Ay.post($,k).then(({data:r})=>{let i="team"in r.meta?r.meta.team:r.meta,s=()=>{if(F&&B){let r={userId:B,teamId:i.id,orgId:null};e.dispatch(A._l({workspace:r,view:{view:"allProjects",isProUpgrade:x||void 0}}))}else e.dispatch(g.$T({view:"team",teamId:i.id})),x?e.dispatch(f.to({type:w.C,data:{teamId:i.id}})):e.dispatch(m.s.flash((0,p.t)("flash.successfully_upgraded_to_a_professional_team")))};_||(0,y.P8)(i,e,{dontRedirect:!0,inviteEmails:n,teamFlowType:P}),e.dispatch(C.I2({submitPending:!1})),e.dispatch(C.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]}}})),i&&e.dispatch(N.yJ({team:i,userInitiated:!1})),i.student_team&&e.dispatch(C.Lo({billingPeriod:T.tY.UNSPECIFIED})),M.payment.promo&&((0,l._H)(),e.dispatch(C.Ay({promo:null})));let c=new URLSearchParams(o.Ay.location.search);if(z){if(c.get("onCompleteRedirectFileKey")){let r=decodeURIComponent(c.get("onCompleteRedirectFileKey")),n=decodeURIComponent(c.get("onCompleteRedirectNodeId")),a={view:"fullscreen",fileKey:r,...n?{nodeId:n}:{}};e.dispatch(g.$T({...a,teamToMoveFileToOnNavigate:i.id,editorType:I.nT.Design}))}else s()}else if(e.dispatch(L.Be({teamId:i.id})),c.get("onCompleteRedirectFileKey")){let r=decodeURIComponent(c.get("onCompleteRedirectFileKey")),n=decodeURIComponent(c.get("onCompleteRedirectNodeId")),a={view:"fullscreen",fileKey:r,...n?{nodeId:n}:{}};e.dispatch(g.$T({...a,teamToMoveFileToOnNavigate:i.id,editorType:I.nT.Design}))}else s();(0,a.sx)("Pro Team Purchased (GTM)"),D&&D()}).catch(r=>{let n=(r,n={})=>{let i=new URLSearchParams(o.Ay.location.search),a=i.get("onCompleteRedirectFileKey"),s=i.get("onCompleteRedirectNodeId");e.dispatch(g.$T({...Y,view:"teamUpgrade",teamFlowType:r?S.SC.UPGRADE_EXISTING_TEAM:S.SC.CREATE_AND_UPGRADE,teamId:r||n.freeTeamId||null,paymentStep:T.tn.PAYMENT_AND_ADDRESS,previousView:Y.previousView,planType:S.Sc.TEAM,...a?{searchParams:{onCompleteRedirectFileKey:a,onCompleteRedirectNodeId:s}}:{}}))};e.dispatch(C.I2({submitPending:!1}));let i=r.data?.message||r.message;null!==_?(0,E._J)("Pro Checkout Error",_,M,{error_message:i}):(0,a.sx)("Pro Checkout Error"),((r,i)=>{let a=(0,p.Jv)(r);a&&("PROMO_CODE"===r.data.reason?(e.dispatch(C.Ay({promo:null})),n(i,{}),e.dispatch(C.Qg({error:a}))):"CARD_ERROR"===r.data.reason?(e.dispatch(C.WG({token:null})),n(i,{}),e.dispatch(C.Qg({error:a}))):e.dispatch(m.s.error(a)))})(r,_)})})},986270:(e,r,n)=>{n.d(r,{F9:()=>v,Hx:()=>N,KA:()=>E,Kq:()=>x,Ks:()=>S,QN:()=>k,RH:()=>M,TN:()=>V,Vg:()=>R,Vu:()=>w,WR:()=>I,ay:()=>y,cu:()=>L,f0:()=>O,fR:()=>B,gU:()=>D,jS:()=>T,jX:()=>P,lD:()=>F,nM:()=>A,pj:()=>C,v8:()=>b});var i=n(167249),a=n(157663),o=n(27087),s=n(939863),l=n(667231),c=n(980820),d=n(941381),u=n(233675),m=n(697551),p=n(72274),h=n(215822),_=n(331626),g=n(555328),f=n(809073);let E=(0,i.N)("SET_RECENT_WHITEBOARD_TOOLS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.WHITEBOARD_TOOL);e.dispatch(E({storeInRecentsKey:r.storeInRecentsKey,recentWhiteboardTools:n}))});let y=(0,i.N)("ADD_WHITEBOARD_TOOL_TO_RECENTS"),b=(0,i.N)("SET_RECENT_FACE_STAMPS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,f.dB.FACE_STAMP);e.dispatch(b({storeInRecentsKey:r.storeInRecentsKey,recentFaceStamps:n}))});let v=(0,i.N)("ADD_FACE_STAMP_TO_RECENTS"),I=(0,i.N)("SYNC_RECENT_PLUGINS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.PLUGIN);e.dispatch(S({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let i=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:i})),e.dispatch(I(r))});let T=(0,i.N)("SYNC_RECENT_WIDGETS");(0,c.nF)((e,r)=>{let n=(0,_.gJ)(r.storeInRecentsKey,g.bD.WIDGET);e.dispatch(w({storeInRecentsKey:r.storeInRecentsKey,recentResources:n}));let i=n.map(e=>e.id);e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:i})),e.dispatch(T(r))});let S=(0,i.N)("SET_RECENT_PLUGINS"),w=(0,i.N)("SET_RECENT_WIDGETS"),A=l.nM,C=l.pj,N=l.Hx,L=(0,i.N)("ADD_FETCHED_PLUGIN_VERSION"),O=(0,i.N)("ADD_FETCHED_WIDGET_VERSION"),R=(0,c.nF)((e,r)=>{V(e,r)}),P=(0,i.N)("ADD_PLUGIN_TO_RECENTS"),D=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.PLUGIN,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedPlugins[r.id],e.getState().recentlyUsed.plugins[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(P(r))}),k=(0,i.N)("ADD_WIDGETS_TO_RECENTS"),M=(0,c.nF)((e,r)=>{e.dispatch(R({resourceType:g.bD.WIDGET,resourceIds:[r.id]})),r.skipPluginRun||U(r.id,r.currentUserId,e.getState().currentUserOrgId,e.getState().publishedWidgets[r.id],e.getState().recentlyUsed.widgets[r.storeInRecentsKey],!!r.isDevelopment,e.dispatch),e.dispatch(k(r))}),F=(0,i.N)("REMOVE_RECENTLY_USED_PLUGIN"),x=(0,i.N)("REMOVE_RECENTLY_USED_WIDGET"),U=(e,r,n,i,l,c,d)=>{if(i&&i.current_user_has_run||!r||(0,p.Vi)(e)||c)return;let m=l.find(r=>r.id===e);m?.run_by_user_ids?.includes(r)||o.Ay.post(`/api/plugin_runs/${e}`,{org_id:n}).then(({data:r})=>{d(u.R({resourceId:e,userFirstRanAt:r.meta.created_at}))}).catch(e=>{a.k.error((0,s.Jv)(e))})},B=(e,r)=>n=>{let i=(0,h.uF)(e),a=(i.manifest?.editorType??[]).map(e=>"figma"===e?f.$A.Design:f.$A.FigJam),o=(0,g.xQ)(e)?M:D;a.forEach(a=>n(o({storeInRecentsKey:a,id:e.id,version:i.id,currentUserId:r})))};function V(e,r){let n={},i=({id:i,version:a,status:o})=>{let s=r.resourceType===g.bD.PLUGIN?L:O;return a&&(n[i]=a),e.dispatch(s({id:i,version:a,status:o}))},a=[];if(r.resourceIds.forEach(o=>{let s=r.resourceType===g.bD.PLUGIN?e.getState().installedPluginVersions.plugins[o]:void 0;if(s){i({id:o,version:s,status:f.Lx.FETCHED});return}let l=r.resourceType===g.bD.PLUGIN?e.getState().recentlyUsed.plugins.fetchedResources[o]:e.getState().recentlyUsed.widgets.fetchedResources[o];l&&l.status!==f.Lx.NOT_FETCHED&&(l.status!==f.Lx.FETCHED||l.version)?l.version&&(n[o]=l.version):a.push(o)}),!a.length)return Promise.resolve(n);a.forEach(e=>{i({id:e,status:f.Lx.FETCHING})});let s={ids:a,org_id:e.getState().currentUserOrgId,include_pending:!0};return o.Ay.post(`/api/${(0,m.n)(r.resourceType)}/batch`,s).then(({data:r})=>(e.dispatch(d.Qi({publishedPlugins:r.meta,src:"fetchExtensionVersions",overrideInstallStatus:!0})),a.forEach(e=>{let n;let a=r.meta.find(r=>r.id===e);a&&(n=(0,_.ul)(a)),i({id:e,version:n,status:f.Lx.FETCHED})}),n)).catch(()=>(a.forEach(e=>{i({id:e,status:f.Lx.NOT_FETCHED})}),{}))}},650769:(e,r,n)=>{n.d(r,{MV:()=>E,N:()=>g,Xk:()=>u,cq:()=>p,hh:()=>_,lX:()=>f,q0:()=>h,zT:()=>y,zU:()=>m});var i=n(922827),a=n(167249),o=n(686759),s=n(286640),l=n(980820),c=n(707465),d=n(442617);let u="seen_try_onboarding",m=(0,a.N)("SET_WORKSHOP_USER_NAME"),p=(0,l.nF)((e,r)=>{let n=r.name.trim().substring(0,170),a=e.getState(),o="fullscreen"===a.selectedView.view&&a.selectedView.workshopModeInfo;if(o)i.h3O.setName(n),(0,d.Vv)(o.id,n),e.dispatch(m(r))}),h=(0,a.N)("SET_STARTER_KIT_HAS_BEEN_HIDDEN"),_=(0,a.N)("SET_FIGJAM_EDITOR_ONBOARDING_FINISHED_OR_DISMISSED"),g=(0,a.N)("SET_FIGJAM_EDITOR_ONBOARDING_STARTED");(0,l.nF)(e=>{(0,s.DN)().set(u,!0),e.dispatch(g())});let f=(0,a.N)("SET_WORKSHOP_MODE_UNTIL"),E=(0,a.N)("CLEAR_TRY_PLUGIN"),y=(0,l.nF)((e,r)=>{let n=e.getState();return(0,o.Dk)((0,c.xS)(n,r))})},906899:(e,r,n)=>{n.d(r,{Ev:()=>g,FL:()=>_,nH:()=>E,rk:()=>f,sw:()=>p});var i=n(966664),a=n(167249),o=n(966712),s=n(418956),l=n(154483),c=n(980820),d=n(453681),u=n(754168),m=n(944682);let p=(0,a.N)("FULLSCREEN_HIDE_STYLE_PREVIEW");(0,c.nF)(e=>{let r=e.getState().stylePreviewShown;r.isShown&&!r.isCreating&&e.dispatch(p())}),(0,c.nF)((e,r)=>{let{rowTop:n,rowLeft:i,styleType:a,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}=r;e.dispatch(_({rowTop:n,rowLeft:i,styleType:a,inheritStyleKeyField:o,styleNameInputPrefix:s,nodeId:l}))});let h=(0,l.fv)(),_=(0,a.N)("SHOW_CREATE_STYLE_PREVIEW"),g=(0,a.N)("FULLSCREEN_SHOW_STYLE_PREVIEW"),f=(0,c.nF)((e,r)=>{if(!(0,o.kc)().dse_lk_go_to_source){let n=h(r.style),a=s.zl.get(d.qp);((0,o.kc)().ds_use_lib_keys?(0,i.Vq)(a[r.style.library_key]):null!=e.getState().fileByKey[n])||u.S.getFiles({fileKey:n}).then(r=>e.dispatch(m.yJ({file:r.data.meta})))}e.dispatch(g(r))}),E=(0,a.N)("STYLE_FILE_PUT_STYLE_SET");(0,a.N)("STYLE_FILE_GET_STYLE_SET")},902957:(e,r,n)=>{n.d(r,{$I:()=>O,$V:()=>y,$w:()=>N,Jt:()=>k,TI:()=>I,WC:()=>T,_E:()=>f,aB:()=>A,bE:()=>D,bQ:()=>C,ii:()=>b,m$:()=>E,mw:()=>v,n9:()=>w,r1:()=>S,uo:()=>L,yH:()=>P,yJ:()=>R});var i=n(167249),a=n(737947),o=n(27087),s=n(881388),l=n(939863),c=n(123026),d=n(392592),u=n(980820),m=n(446297),p=n(99506),h=n(320741),_=n(845213),g=n(404717);let f=(0,u.MM)("BATCH_DEL_TEAM_MEMBERS",(e,{teamId:r,userIds:n},{optimistId:i})=>{o.Ay.del(`/api/teams/${r}/users`,{user_ids:n}).then(()=>{e.dispatch(g.c(i))}).catch(r=>{e.dispatch(g.r(i))})});(0,u.nF)(async(e,r)=>{let{teamId:n}=r;await o.Ay.put(`/api/teams/${n}/restore`).then(()=>{let r=`/files/team/${n}`;a.Ay.redirect(r),e.dispatch(s.s.flash((0,l.t)("file_browser.file_browser_actions.restore_team_success")))}).catch(r=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.restore_team_error",{errorMsg:r.data.message||(0,l.t)("file_browser.file_browser_actions.unknown_error")})))})}),(0,u.nF)(async(e,r)=>{await o.Ay.put(`/api/teams/${r.teamId}`,{description:r.description}).then(()=>{e.dispatch(R({team:{id:r.teamId,description:r.description},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.update_description_error")))})}),(0,u.nF)(async(e,r)=>{let n=r.figma_provided_libraries_disabled;await _.$.updatePresetsDisabled({teamId:r.teamId,presetsDisabled:n}).then(()=>{e.dispatch(d.F.enqueue({message:n?(0,l.t)("settings_tab.ui_kits_disabled"):(0,l.t)("settings_tab.ui_kits_enabled"),type:"team.ui_kit_toggle",error:!1})),e.dispatch(R({team:{id:r.teamId,figma_provided_libraries_disabled:n},userInitiated:!0}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})}),(0,u.nF)((e,{teamId:r},{loadingKey:n})=>{let i=_.$.getTeam({teamId:r});(0,h.N)(i,e,n),i.then(({data:r})=>{e.dispatch(R({team:r.meta,userInitiated:!1}))}).catch(()=>{e.dispatch(s.s.error((0,l.t)("file_browser.error_try_again")))})});let E=(0,u.nF)((e,{teamId:r,userInitiated:n=!0},{loadingKey:i})=>{let a=_.$.getMembers({teamId:r});n&&(0,h.N)(a,e,i),a.then(({data:n})=>{let i={};n.meta.forEach(e=>{i[e.email]=e}),e.dispatch(y({members:i,teamId:r}))},r=>{console.error(r),e.dispatch(s.s.error((0,l.t)("file_browser.file_browser_actions.team_member_fetch_error")))})},e=>`TEAM_FETCH_MEMBERS_LIST::teamId::${e.teamId}`),y=(0,i.N)("TEAM_SET_MEMBERS"),b=(0,i.N)("TEAM_BATCH_JOIN"),v=(0,i.N)("TEAM_JOIN"),I=(0,i.N)("TEAM_STOP_RENAME"),T=(0,i.N)("TEAM_BEGIN_RENAME"),S=(0,i.N)("TEAM_CREATION_SET_LOADING"),w=(0,i.N)("TEAM_CHANGE_DEFAULT_PERMISSION"),A=(0,i.N)("TEAM_CHANGE_SHARING_SETTINGS"),C=(0,i.N)("TEAM_CHANGE_ORG_ACCESS");(0,i.N)("TEAM_LOADED");let N=(0,i.N)("TEAM_RENAME"),L=(0,i.N)("TEAM_BATCH_PUT"),O=c.RF,R=(0,u.nF)((e,r)=>{let n=r.team.id,i=e.getState().teams[n];e.dispatch(O(r));let a=e.getState(),o=e.getState().teams[n];!r.userInitiated&&o.subscription&&o.subscription!==p.Qh.INCOMPLETE&&i&&(null==i.subscription||i.subscription===p.Qh.INCOMPLETE)&&"teamUpgrade"===a.selectedView.view&&a.selectedView.teamId===o.id&&e.dispatch(m.zn({teamId:o.id}))}),P=c.Nh,D=(0,i.N)("TEAM_POST"),k=(0,i.N)("TEAM_GET")},114961:(e,r,n)=>{n.d(r,{Be:()=>m,OP:()=>_,l0:()=>h,tp:()=>p});var i=n(167249);n(27087);var a=n(881388),o=n(939863);n(392592);var s=n(980820);n(662275);var l=n(336599);n(820113);var c=n(320741),d=n(659969);let u=(0,s.nF)((e,{teamId:r},{loadingKey:n})=>{let i=d.T.getTeamInvoices({teamId:r});(0,c.N)(i,e,n),i.then(({data:r})=>{r.meta.forEach(e=>{e.design_quantity||(e.design_quantity=e.quantity)}),e.dispatch(p({invoices:r.meta}))}).catch(()=>{e.dispatch(a.s.error((0,o.t)("flash.team_invoices_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_INVOICES::teamId::${e.teamId}`),m=(0,s.nF)((e,{teamId:r},{loadingKey:n})=>{let i=d.T.getTeamSummary({teamId:r});(0,c.N)(i,e,n),i.then(({data:r})=>{e.dispatch(h({summary:r.meta}))}).catch(()=>{e.dispatch(a.s.error((0,o.t)("flash.team_billing_summary_fetching_error")))})},e=>`TEAM_ADMIN_FETCH_BILLING_SUMMARY::teamId::${e.teamId}`);(0,s.nF)((e,{teamId:r,shouldForceFetch:n})=>{let i=m.loadingKeyForPayload({teamId:r}),a=e.getState();(0,l.VP)(a.loadingState,i)||!n&&(0,l.D2)(a.loadingState,i)||e.dispatch(m({teamId:r}));let o=u.loadingKeyForPayload({teamId:r});(0,l.VP)(a.loadingState,o)||!n&&(0,l.D2)(a.loadingState,o)||e.dispatch(u({teamId:r}))});let p=(0,i.N)("TEAM_ADMIN_POST_INVOICE"),h=(0,i.N)("TEAM_ADMIN_SET_SUMMARY"),_=(0,i.N)("TEAM_ADMIN_UPDATE_INVOICE_RECEIVER")},569172:(e,r,n)=>{n.d(r,{BC:()=>y,EF:()=>N,FJ:()=>S,Oy:()=>A,Y9:()=>_,au:()=>g,cx:()=>b,gX:()=>v,hK:()=>E,t9:()=>I,v6:()=>O,yu:()=>f});var i=n(167249),a=n(776250),o=n(609494),s=n(966712),l=n(456772),c=n(743282),d=n(27087),u=n(980820),m=n(320741),p=n(440535),h=n(888592);let _=(0,i.N)("REFRESH_FEED"),g=(0,u.nF)((e,r,{loadingKey:n})=>{if(!(0,s.kc)().xr_debounce_threshold)return;let i=h.K.getFeedBellStates();(0,m.N)(i,e,n),i.then(r=>{e.dispatch(E({bellStates:r.data.meta}))})}),f=(0,i.N)("TEAM_FEED_SET_BELL_STATE"),E=(0,i.N)("TEAM_FEED_SET_INITIAL_BELL_STATES"),y=(0,u.nF)((e,r)=>{let n=e.getState().user,i=(0,l.WB)(),a=r.uuid;if(!n||!i||!a||r.commentId.startsWith(O))return;let o=i.getIdFromUuid("FeedComment",a).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}`));i.optimisticallyDeleteWithUUID({FeedComment:{[a]:null}},o)}),b=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,i=(0,l.WB)(),s=r.uuid;if(!n||!i||!s)return;let c=i.getIdFromUuid("FeedComment",s).then(e=>d.Ay.put(`/api/feed_posts/comments/${e}`,{message_meta:r.messageMeta,attachment_updates:(0,p.Gq)(r.attachmentUpdates)}));(0,a.sx)("Team Feed Comment Edited",{text:(0,o._Z)(r.messageMeta)});let u=(0,o.Rc)(r.messageMeta);i.optimisticallyUpdateWithUUID({FeedComment:{[s]:{messageMeta:u}}},c)}),v=(0,u.nF)((e,r)=>{r.messageMeta=(0,o.Pq)(r.messageMeta);let n=e.getState().user,i=(0,l.WB)();if(!n||!i)return;let s=(0,c.g)(),u=d.Ay.post(`/api/feed_posts/${r.postUuid}/comments`,{message_meta:r.messageMeta,uuid:s,attachment_ids:r.attachmentIds}),m=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EMOJI),p=!!r.messageMeta.find(e=>(0,o.l5)(e)===o.vj.EDITOR_MENTION);(0,a.sx)("Team Feed Comment Added",{emojiUsed:m,mentionUsed:p,text:(0,o._Z)(r.messageMeta),postUuid:r.postUuid});let h=(0,o.Rc)(r.messageMeta);i.optimisticallyCreateWithUUID({FeedComment:{[s]:{feedPostPublicUuid:r.postUuid,uuid:s,userId:n.id,user:{id:n.id,handle:n.handle,imgUrl:n.img_url},messageMeta:h,createdAt:new Date,reactions:[]}}},u)}),I=(0,u.nF)((e,r)=>{let{commentUuid:n,emoji:i,reactionId:a}=r,o=T(n,i);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),T=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.del(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),S=(0,u.nF)((e,r)=>{let{commentUuid:n,commentId:i,emoji:o}=r,s=e.getState().user;if(!s||i.startsWith(O))return;let c=w(n,o);(0,a.sx)("Team Feed Reaction Added",{commentId:i,type:o});let d=`optimistic-id-comment-${i}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:i,feedResourceType:"FeedComment",userId:s.id}}},c)}),w=(e,r)=>(0,l.WB)().getIdFromUuid("FeedComment",e).then(e=>d.Ay.post(`/api/feed_posts/comments/${e}/reactions`,{emoji:r})),A=(0,u.nF)((e,r)=>{let{feedPostUuid:n,emoji:i,reactionId:a}=r,o=C(n,i);e.getState().user&&(0,l.WB)().optimisticallyDelete({FeedReaction:{[a]:null}},o)}),C=(e,r)=>d.Ay.del(`/api/feed_posts/${e}/reactions`,{emoji:r}),N=(0,u.nF)((e,r)=>{let{feedPostUuid:n,feedPostId:i,emoji:o}=r,s=e.getState().user;if(!s)return;let c=L(n,o);(0,a.sx)("Team Feed Reaction Added",{postUuid:n,type:o});let d=`optimistic-id-${n}-${o}-${s.id}`;(0,l.WB)().optimisticallyCreate({FeedReaction:{[d]:{createdAt:new Date,emoji:o,feedResourceId:i,feedResourceType:"FeedPost",userId:s.id,user:{id:s.id,handle:s.handle,imgUrl:s.img_url}}}},c)}),L=(e,r)=>d.Ay.post(`/api/feed_posts/${e}/reactions`,{emoji:r}),O="pending-feed-comment"},495481:(e,r,n)=>{n.d(r,{m:()=>h});var i=n(27087),a=n(881388),o=n(939863),s=n(392592),l=n(784151),c=n(662275),d=n(36816),u=n(980820),m=n(404717),p=n(229403);(0,u.nF)((e,{members:r,team:n,teamUsers:i,usersWithNoTeamUserIds:a=[],paidStatusType:u,paidStatus:m,entryPoint:p,showModalsBeneath:_=!1,costMessaging:g})=>{e.dispatch((0,c.to)({type:(0,l.j)(),data:{onConfirm:()=>{let l;e.dispatch(h({teamId:n.id,teamUsers:i,usersWithNoTeamUserIds:a,paidStatus:m,paidStatusType:u,userInitiated:!0,entryPoint:p}));let c=r.length,_={productName:u===d.j4.WHITEBOARD?(0,o.t)("general.figjam"):(0,o.t)("general.figma_design"),nameOrEmail:r[0].name||r[0].email,numTeamMembers:c};switch(m){case d.Zf.FULL:l=(0,o.t)("team_user.actions.team_members_upgraded.seat_rename",_);break;case d.Zf.STARTER:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer.seat_rename",_);break;case d.Zf.RESTRICTED:l=(0,o.t)("team_user.actions.team_members_downgraded_to_viewer_restricted.seat_rename",_)}e.dispatch(s.F.enqueue({type:"team-paid-status-updated",message:l}))},members:r,team:n,paidStatusType:u,paidStatus:m,costMessaging:g},showModalsBeneath:_}))});let h=(0,u.MM)("TEAM_USER_UPDATE_DESIGN_PAID_STATUS",async(e,{teamId:r,teamUsers:n,usersWithNoTeamUserIds:s,paidStatus:l,paidStatusType:c,userInitiated:u,entryPoint:h},{optimistId:_})=>{if(u){let u=n.map(e=>e.user_id).concat(s||[]);await i.Ay.put(`/api/teams/${r}/team_user_batch`,{team_user_deltas:u.map(e=>{let r={user_id:e};return c===d.j4.WHITEBOARD?r.whiteboard_paid_status=l:r.design_paid_status=l,r}),entry_point:h}).then(function({data:n}){e.dispatch(m.c(_)),e.dispatch((0,p.yJ)({teamUsers:n.meta,teamId:r}))}).catch(function(r){e.dispatch(m.r(_));let n=(0,o.t)("team_user.actions.an_error_occurred_while_changing_a_team_member_s_billing_status");e.dispatch(a.s.error(n)),console.error(r)})}},e=>`$TEAM_USER_UPDATE_DESIGN_PAID_STATUS::teamId::${e.teamId}`)},340159:(e,r,n)=>{n.d(r,{c0:()=>p});var i=n(167249),a=n(27087),o=n(330654),s=n(868389),l=n(980820),c=n(540019),d=n(696915),u=n(754168),m=n(301400);let p=(0,i.N)("ONBOARDING_TEMPLATES_PUT_ALL");(0,l.nF)(e=>{m.H.getTemplates({type:"onboarding"}).then(({data:r})=>{let n=r.meta;Object.keys(n).forEach(r=>{e.dispatch((0,s.Sb)({hubFiles:n[r],src:"getOnboardingTemplates"}))}),e.dispatch(p(n))})}),(0,l.nF)((e,r)=>a.Ay.post("/api/files/first_template_type",{template_type:r.type})),c.M4.Query({fetch:async e=>{let r=await u.S.getTaggedUserFiles({...e});return 200!==r.status||r.data.meta.files.length<1?[]:r.data.meta.files},key:"starter_files",schema:o.array(d.L)}),c.M4.Query({fetch:async()=>{let e=await m.H.getStartingPointsTemplates();if(200!==e.status)throw Error("Failed to fetch starting points templates");return e.data.meta},key:"starting_points_templates"})},196495:(e,r,n)=>{n.d(r,{C$:()=>R,S5:()=>w,WJ:()=>O,hz:()=>L,yJ:()=>P});var i=n(268853),a=n(167249),o=n(776250),s=n(517333),l=n(737947),c=n(187623),d=n(776621),u=n(27087),m=n(939863),p=n(123026),h=n(392592),_=n(743905),g=n(738269),f=n(662275),E=n(988022),y=n(788811),b=n(697551),v=n(540351),I=n(52571),T=n(980820),S=n(507877);(0,T.nF)(async()=>{try{await u.Ay.post("/api/user/migrate_personal_drafts")}catch(r){let e=r?.data?.message||"undefined";(0,d.$D)(i.e.SHARING_AND_ACCESS,Error(`Failed to migrate starter drafts for user: ${e}`))}});let w=(0,T.nF)(async e=>{try{let r=e.getState();for(let i of r.authedUsers.orderedIds)if(await (0,y.z$)(i)){C();let i=n(632376).xv;e.dispatch(f.to({type:i,data:{users:Object.values(r.authedUsers.byId),onLogOut:()=>{e.dispatch(A())}}}));return}}catch(e){(0,d.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user"))}e.dispatch(A())}),A=(0,T.nF)(e=>{if(s.eD){l.Ay.redirect("/logout");return}let r=(0,b.d9)(e.getState().selectedView);I.H.logoutAllUsers().then(()=>{(0,E.Pg)(),_.U2.clear(),new c.P().sendToAllTabs(v.y,v.J),l.Ay.redirect(`${r?"/community":""}/?fuid=`)}).catch(r=>{let n=r.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_without_email");e.dispatch(h.F.enqueue({error:!0,message:n}))})});(0,T.nF)(async(e,r)=>{try{if(await (0,y.z$)(r.user.id)){C();let i=n(632376).xv;e.dispatch(f.to({type:i,data:{users:[r.user],onLogOut:()=>{e.dispatch(N(r))}}}))}else e.dispatch(N(r))}catch(n){(0,d.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Failed to get autosave files for user")),e.dispatch(N(r))}});let C=()=>{try{(0,o.sx)("autosave_modal_shown",{},{forwardToDatadog:!0,batchRequest:!0})}catch(e){}},N=(0,T.nF)((e,r)=>{I.H.logoutOneUser(r.user.id).then(n=>{e.dispatch(g.os(n.data.meta)),e.dispatch(S.q0(n.data.meta)),n.data?.meta?.users?.length===0&&((0,E.Pg)(),_.U2.clear());let i=n.data?.meta?.redirect_url;i?l.Ay.redirect(i):e.dispatch(h.F.enqueue({message:(0,m.t)("file_browser.file_browser_actions.successfully_logged_out",{emailAddress:r.user.email})}))}).catch(n=>{let i=n.data?.message||(0,m.t)("file_browser.file_browser_actions.logout_error_with_email",{emailAddress:r.user.email});e.dispatch(h.F.enqueue({error:!0,message:i}))})}),L=(0,a.N)("DELETE_USER_LOADING"),O=(0,a.N)("USER_ERASE_SECRETS"),R=(0,a.N)("USER_TOGGLE_TWO_FACTOR"),P=p.vv},725561:(e,r,n)=>{n.d(r,{Q$:()=>b,uR:()=>y});var i=n(922827),a=n(167249),o=n(27087),s=n(939863),l=n(265746),c=n(696808),d=n(392592),u=n(980820),m=n(974105),p=n(356390),h=n(917701),_=n(975350),g=n(738269);let f=e=>{let r=e.getState();e.dispatch(_.UU({force:!0})),r.mirror.appModel.showUi||p.Y5.triggerAction("toggle-ui"),r.mirror.appModel.currentTool!==i.NLJ.COMMENTS&&p.Y5.triggerAction("set-tool-comments"),requestAnimationFrame(()=>{e.dispatch(g.j7({type:h.a}))})};(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,m.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n={text:(0,s.t)("comments.manage"),action:()=>f(e)},i="all"===r.preference?(0,s.t)("comments.you_will_be_notified_about_file_comments"):(0,s.t)("comments.you_will_be_notified_about_replies_and_at_mentions");e.dispatch(d.F.enqueue({message:i,type:"comments-opted-in",button:n,onDismiss:()=>{},timeoutOverride:15e3}))}});let E=(e,r)=>{let n;return"exp_notification_catfile"===r?n=`/api/user_notifications/catfile_optin/${e}`:"exp_notification_catfic"===r&&(n=`/api/user_notifications/catfic_optin/${e}`),e=>{o.Ay.post(n,{opted_in:e})}};(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,m.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName),i={text:(0,s.t)("comments.turn_on"),action:()=>{n(!0)}};setTimeout(()=>{e.dispatch(d.F.enqueue({message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),type:"get_notified_about_all_comments_prompt",button:i,onDismiss:()=>n(!1),timeoutOverride:15e3}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,m.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let n=E(r.fileKey,r.experimentName);setTimeout(()=>{e.dispatch(c.Q.enqueue({notification:{type:l._.SUBSCRIBED_TO_COMMENT_NOTIFICATIONS,message:(0,s.t)("comments.get_notified_about_all_comments_prompt"),acceptCallback:()=>n(!0),dismissCallback:()=>n(!1)}}))},5e3)}}),(0,u.nF)((e,r)=>{let n=e.getState(),i=(0,m.d1)(n);if(i&&r.fileKey===i.key&&n?.user?.id===r.userId){let r={text:(0,s.t)("comments.manage"),action:()=>f(e)},n=(0,s.t)("dev_mode.you_will_be_notified_about_status_changes");e.dispatch(d.F.enqueue({message:n,type:"dev-mode-opted-in",button:r,onDismiss:()=>{},timeoutOverride:15e3}))}});let y=(0,a.N)("USER_NOTIFICATIONS_SET_BELL"),b=(0,a.N)("USER_NOTIFICATIONS_SET_COMMUNITY_PROFILE_BELL")},625651:(e,r,n)=>{n.d(r,{D6:()=>R,H1:()=>A,Ho:()=>P,U6:()=>C,Vw:()=>b,au:()=>N,cx:()=>T,gA:()=>y,hL:()=>O,rT:()=>v,w9:()=>I});var i=n(922827),a=n(138020),o=n(167249),s=n(776250),l=n(418956),c=n(456772),d=n(746746),u=n(27087),m=n(881388),p=n(939863),h=n(392592),_=n(980820),g=n(843495),f=n(900073),E=n(182976);let y=(0,o.N)("UNSET_HOVERED_IN_MODAL_VOTE_PIN"),b=(0,o.N)("SET_HOVERED_IN_MODAL_VOTE_PIN"),v=(0,o.N)("DESELECT_VOTE_PIN"),I=(0,o.N)("SELECT_VOTE_PIN"),T=(0,o.N)("INITIATED_VOTING_SESSION");(0,_.nF)(async(e,{uiSurface:r})=>{let n=e.getState(),{fileKey:i}=n.selectedView,a=n.mirror.appModel.votingSessionInfo.sessionId;if(!i||!a)return;let o=S(i),s="end-voting-session-failed",c=()=>{e.dispatch(E.of({key:o})),e.dispatch(h.F.enqueue({type:s,message:(0,p.t)("voting.visual_bell.end_voting_session_failed")}))};e.dispatch(E.Cx({key:o})),e.dispatch(h.F.dequeue({matchType:s})),await u.Ay.put(`/api/file/${i}/voting_sessions/${a}`,{in_progress:!1}).then(({status:n})=>{200===n?(e.dispatch(E.x2({key:o})),"MeetingsPanel"===r&&l.zl.set(f.Qs,{type:"SET_VIEW",payload:f.iN.PAST_VOTES})):c()}).catch(e=>{throw c(),e})});let S=e=>`end_voting_session_${e}`;(0,_.nF)((e,{source:r,usedCustomTitle:n,requestBody:i,uiSurface:a})=>{let{fileKey:o}=e.getState().selectedView;if(!o)return;let c=w(o),d=()=>{e.dispatch(E.of({key:c})),e.dispatch(h.F.enqueue({type:"start-voting-session-failed",message:(0,p.t)("voting.visual_bell.start_voting_session_failed")}))};e.dispatch(E.Cx({key:c})),e.dispatch(h.F.dequeue({matchType:"start-voting-session-failed"})),u.Ay.post(`/api/file/${o}/voting_sessions`,i).then(i=>{200===i.status?(e.dispatch(T({votingSessionId:i.data.meta.id})),"MeetingsPanel"===a&&l.zl.get(f.Qs).activeToolModal===f.sx.VOTING&&l.zl.set(f.Qs,{type:"SET_TOOL",payload:null}),e.dispatch(E.x2({key:c})),(0,s.sx)("start_voting_session",{source:r,usedCustomTitle:n,votingSessionId:i.data.meta.id,fileKey:o})):d()}).catch(e=>{throw d(),e})});let w=e=>`create_voting_session_${e}`;(0,_.nF)((e,{votingSessionId:r})=>{let n=e.getState().selectedView;if(!n.fileKey)return null;let i=u.Ay.del(`/api/file/${n.fileKey}/voting_sessions/${r}`);e.dispatch((0,m.Q)({promise:i,fallbackError:(0,p.t)("voting.modal.delete_voting_session_error")})),e.dispatch(h.F.enqueue({message:(0,p.t)("voting.modal.delete_voting_session_visual_bell")})),(0,d.f)(i,e.dispatch,L({votingSessionId:r})),(0,c.WB)().optimisticallyDelete({VotingSession:{[r]:null}},i)});let A=(0,_.nF)((e,r)=>{let n;let o=r.votingStage,s=e.getState(),l=s?.mirror?.appModel?.currentPage;if(o===i.W8Y.NO_SESSION){i.ofk.setVotingSessionInfo("",i.W8Y.NO_SESSION,0,l);return}let c=s?.openFile?.votingSessions;if(o===i.W8Y.ENDED){let e=r.sessionId;n=c?.find(r=>r.id===e&&!r.inProgress)}else n=c?.find(e=>e.inProgress);if(!n)return;let d=(0,a.oA)(n.pageNodeId);d&&(i.ofk.setVotingSessionInfo(n.id,o,n.userVoteLimit,d),o===i.W8Y.JOINED&&(e.dispatch(C()),s.mirror.selectionProperties.whiteboardNumSelectedByType?.STAMP&&(0,g.wr)()))}),C=(0,o.N)("DISMISS_JOIN_CONFIRMATION"),N=(0,o.N)("HIDE_JOIN_VOTING_SESSION_MODAL"),L=(0,o.N)("DELETE_VOTING_SESSION"),O=(0,o.N)("SET_VOTES_PER_USER_LIMIT"),R=(0,o.N)("SET_TITLE"),P=(0,o.N)("CLEAR_STATE")},103907:(e,r,n)=>{n.d(r,{$J:()=>s.qZS,AK:()=>g,H5:()=>l,I_:()=>E,Le:()=>h,Tv:()=>f,j9:()=>c,jp:()=>m,n6:()=>y,qN:()=>p,wq:()=>_});var i=n(411855),a=n(934480),o=n(711525),s=n(279453);let l="You are trying to use comments functionality but didn't wire a provider for comments",c=(0,i.createContext)(void 0);function d(){return(0,i.useContext)(c)}let u={};function m(){return function(e,r){let n=(0,i.useMemo)(()=>e?.status!=="loaded"?u:r(e.data),[e,r]),a=e?.status||"loading",s=e?.errors||[];return(0,i.useMemo)(()=>n===u||"loading"===a?(0,o.Xm)():"errors"===a?{status:a,data:null,errors:s}:{status:"loaded",errors:s,data:n},[a,s,n])}((0,i.useContext)(c),e=>e.file?.currentUserFileFollower||null)}function p(){let e=d();return!!e&&e.isUnresolvedLoaded}function h(){let e=d();return!!e&&e.isUnresolvedLoaded&&e.isResolvedLoaded}function _(){let e=d();return e?e.threads:(0,o.Xm)()}function g(e){let r=(0,i.useContext)(c);return(0,i.useMemo)(()=>{if(!r)throw Error(l);if("loaded"!==r.status||!r.data||!r.api.reactionsApi)return 0;let n=r.api.reactionsApi?.getReactions(e);return n?.length||0},[e,r])}function f(e,r){let n=(0,i.useContext)(c);return(0,i.useMemo)(()=>{if(!n)throw Error(l);return"loaded"===n.status&&n.data?{status:"loaded",data:function(e,r){if(!r)return{typed:[],users:[],yours:0,total:0};let n={};return r.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()).reduce((r,i)=>{let[o,s]=(0,a.Kh)(i.emoji);r.total++;let l=n[o];if(!l){let e={count:0,selected:!1,users:[],emoji:o,skinTonesToUsers:{}};r.typed.push(e),l=e,n[o]=e}let c={id:i.user.id,handle:i.user.handle,img_url:i.user.imgUrl};return null!==s&&(void 0===l.skinTonesToUsers[s]&&(l.skinTonesToUsers[s]=[]),l.skinTonesToUsers[s].push(c)),l.count++,l.users.push(c),l.selected=l.selected||i.userId===e,r},{typed:[],yours:0,total:0,users:[]})}(r,n.api.reactionsApi?.getReactions(e)),errors:n.errors}:(0,o.Xm)()},[e,r,n])}function E(){let e=(0,i.useContext)(c);if(!e)throw Error(l);return e.api}function y(){return function(e){if("loaded"!==e.status)return 0;let r=0;for(let n of e.data)if((n.anchored||n.isCanvasMention)&&!n.comments[0].resolved_at)for(let e of n.comments)e.isUnread&&r++;return r}(_())}},696097:(e,r,n)=>{n.d(r,{NX:()=>K});var i=n(411855),a=n(188507),o=n(821910),s=n(776250),l=n(609494),c=n(358145),d=n(966712),u=n(456772),m=n(915440),p=n(711525),h=n(886653),_=n(776621),g=n(437304),f=n(553716),E=n(743282),y=n(455396),b=n(27087),v=n(975350),I=n(309249),T=n(809831),S=n(277810),w=n(654034),A=n(661843),C=n(912924),N=n(860178),L=n(279453),O=n(239671),R=n(860007),P=n(103907),D=n(736239),k=n(859624),M=n(297586),F=n(792608);class x{constructor(e){this.client=e}toggleReaction(e,r,n){if("loaded"!==this.client.subscription.status)throw Error("Unable to toggle reactions for unloaded subscription");return this.getReactions(e).find(n=>n.emoji===r&&n.fileCommentId===e&&n.userId===this.client.user.id)?this.removeReaction(e,r):this.addReaction(e,r,n)}async addReaction(e,r,n){let i=b.Ay.post(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r,prototype_mode:n?.prototype_mode||!1,selected_view:n?.selectedView||"",quick_reply:n?.quickReply||!1});return this.client.optimistically(async(n,a,o)=>{let s=new Date,l=`${e}_${r}_${o.id}`;await a.optimisticallyCreate({CommentReaction:{[l]:{fileCommentId:e,emoji:r,fileKey:n.file.id,userId:o.id,user:{id:o.id,handle:o.handle,imgUrl:o.img_url},createdAt:s,sortTimestamp:s}}},i)}),await i}async removeReaction(e,r){let n=b.Ay.del(`/api/file/${this.client.fileKey}/comments/${e}/reactions`,{emoji:r});return this.client.optimistically(async(i,a,o)=>{let s=o.id,l=this.getReactions(e).filter(e=>e.emoji===r&&e.userId===s).map(e=>e.id),c=l?.reduce((e,r)=>({...e,[r]:null}),Object.create(null));await a.optimisticallyDelete({CommentReaction:c},n)}),await n}getReactions(e){if("loaded"!==this.client.subscription.status)throw Error("Unable to get reaction for unloaded subscription");let r=this.client.subscription.data.file;if(!r)throw Error("Unable to get reaction for unloaded subscription");if("reactions"in r)return r.reactions.filter(r=>r.fileCommentId===e);{let n=r.mobileCommentThread.find(r=>r.id===e);return n?n.reactions:[]}}}function U(e){return e.map(e=>({...e,id:e.id.toString()}))}class B{constructor(e){this.client=e}trackMissingCommentData(e,r,n,i,a,o){let s=!1;F.O.records[n.id]={parentId:n.parent_id,report:(r,l)=>{if(!s&&(s=!0,(0,_.kF)("comments_optimistic_updates","true"),(0,_.kF)("isLoadedComments",a.isLoadedComments?"true":"false"),(0,_.kF)("commentType",e),(0,f.x1)(r,l,{id:n.id,fileKey:this.client.fileKey,parentId:n.parent_id,pageId:n.client_meta?.page_id,userId:this.client.user.id,clientMeta:n.client_meta,...o}),this.client.livegraphClient)){let e=i(),n=null,a=null,o=null;for(let i of e)if("VIEW_QUERY_NODE.REMOVE_RESULT"===i.type||"STORE.ADD_INSTANCE"===i.type||"STORE.REMOVE_INSTANCE"===i.type||"SESSION.APPLY_MUTATIONS"===i.type||"SESSION.APPLY_SHADOW_MUTATIONS"===i.type||"SESSION.REMOVE_SHADOW_MUTATIONS"===i.type||"REQUEST_MESSAGE"===i.type&&"sync"===i.message.messageType||"RESPONSE_MESSAGE"===i.type&&"synced"===i.message.messageType||"RESPONSE_MESSAGE"===i.type&&"pendingMutations"===i.message.messageType)(0,f.Lo)(r,JSON.stringify(i));else if("VIEW_QUERY_NODE.ADD_RESULT"===i.type||"VIEW_QUERY_NODE.UPDATE_RESULT"===i.type){if(i.type===n&&i.queryId===a&&i.instance===o)continue;(0,f.Lo)(r,JSON.stringify(i)),n=i.type,a=i.queryId,o=i.instance}else"SESSION.NOTIFY_OBSERVERS"===i.type&&i.view._name.includes("Comments")&&(0,f.Lo)(r,JSON.stringify({type:"SESSION.NOTIFY_OBSERVERS",viewName:i.view._name}));(0,f.x1)(r,l)}}},setTimeout(()=>{let a=F.O.records[n.id];if(a||i(),delete F.O.records[n.id],"loaded"!==this.client.subscription.status)return;let o=this.client.loadedComments.some(e=>e.id===n.id||e.id===r);a&&!o?a.report(`${e} Never Appeared`,"Comment failed to appear within ten seconds of creation"):i()},1e4)}create(e,r){let n=(0,u.S6)(),{fileKey:i,messageMeta:a,attachments:o,clientMeta:c,pageId:m,uuid:p}=e;(0,s.sx)("New comment API create",{uuid:p});let h=(0,d.kc)().show_at_mention_invited_users?[...new Set((0,l.cs)(a))]:[],_=async e=>{let n=e.data?.reason;if(!n||"comment_validation_failure"!==n.reason||!r?.onValidationError)throw e;let l=n.failure_info,d=await r.onValidationError(U(l.users_without_view),U(l.ext_users_without_view),U(l.uninvitable_users));return d?((0,s.sx)("New comment API handling validation",{uuid:p}),b.Ay.post(`/api/file/${i}/comments`,{file_key:i,message_meta:a,attachments:o.map(e=>e.id),client_meta:c,page_id:m,prototype_mode:r?.prototypeMode,share_to_mentions:d.forceWithInvite,force:d.forceMentions,uuid:p,pending_mentions:h}).catch(_)):null},g=(0,k.e)(this.client.subscription),f=this.client.subscription.data?.file?.currentUserCommentReadStatus,E=b.Ay.post(`/api/file/${i}/comments`,{file_key:i,message_meta:a,attachments:o.map(e=>e.id),client_meta:c,page_id:m,prototype_mode:r?.prototypeMode,share_to_mentions:null===r.onValidationError,force:null===r.onValidationError,pending_mentions:h,uuid:p,...!f&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically((e,r)=>{let n=this.client.loadedComments.map(e=>e.orderId||0),s=n.length>0?Math.max(...n):0,d=(0,l.Rc)(a);r.optimisticallyCreateWithUUID({Comment:{[p]:{uuid:p,key:i,userId:this.client.user.id,parentId:null,orderId:s+1,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:{x:c.x,y:c.y,nodeId:c.node_id||null,pageId:c.page_id||null,nodeOffset:c.node_offset||null,inFrame:c.in_frame||null,selectionBoxAnchor:c.selection_box_anchor||null,stablePath:c.stable_path||null},messageMeta:d,messageMetaStylized:d,user:{id:this.client.user.id,handle:this.client.user.handle,imgUrl:this.client.user.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null}}},E);let u=(0,S.Mu)(o,i,p);if(u&&r.optimisticallyCreate({CommentAttachment:u},E),!e.file.currentUserCommentReadStatus){let e=new Date;r.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${e.getTime()}`]:{userId:this.client.user.id,fileKey:this.client.fileKey,createdAt:e,allReadAt:w.gj.allReadAt,readComments:{},unreadComments:{}}}},E)}}),[E.catch(_).then(e=>{if(!e)return null;try{let i=e.data.meta;this.trackMissingCommentData("New Comment",p,i,n,{isLoadedComments:g},r)}catch{}return e}),p]}reply(e,r){let n=(0,u.S6)(),{threadId:i,threadUuid:a,messageMeta:o,attachments:c,uuid:d}=e,{fileKey:m}=this.client,p=(0,l.cs)(o),h=b.Ay.post(`/api/file/${m}/comments/${e.threadId}`,{file_key:m,uuid:d,message_meta:o,attachments:c.map(e=>e.id),prototype_mode:r?.prototypeMode,share_to_mentions:r.forceWithInvite||!1,force:r.forceMention||!1,tracking_context:r.trackingContext,pending_mentions:p}),_=(0,l.Rc)(o),g=(0,k.e)(this.client.subscription),{user:f}=this.client;return this.client.optimistically((e,r)=>{a?r.optimisticallyUpdateWithUUID({Comment:{[a]:{uuid:a,resolvedAt:null}}},h):r.optimisticallyUpdate({Comment:{[i]:{resolvedAt:null}}},h),(0,s.sx)("Livegraph Optimistic Comment Update",{flow:"reply",isOptimistic:!!a}),r.optimisticallyCreateWithUUID({Comment:{[d]:{uuid:d,key:m,userId:f.id,parentId:i,orderId:null,createdAt:new Date,resolvedAt:null,deletedAt:null,authorMeta:null,clientMeta:null,messageMeta:_,messageMetaStylized:_,user:{id:f.id,handle:f.handle,imgUrl:f.img_url},reactions:[],thumbnailUrl:null,isCanvasMention:!1,commentPin:null,attachments:c.map(e=>(0,S.QG)(e,m,d))}}},h);let n=(0,S.Mu)(c,m,d);n&&r.optimisticallyCreate({CommentAttachment:n},h)}),[h.then(e=>{if(!e)return null;let i=e.data.meta;return this.trackMissingCommentData("Reply Comment",d,i,n,{isLoadedComments:g},r),e}),d]}}class V{constructor(e){this.client=e}get commentReceipts(){return this}async markAsUnread(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=b.Ay.post(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:[e],...!r&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically(async(r,i,a)=>{let o=r.file.currentUserCommentReadStatus,s=new Date;if(o){let{[e]:r,...a}=o.readComments;await i.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,allReadAt:w.gj.allReadAt,readComments:a,unreadComments:{...o.unreadComments,[e]:"true"}}}},n)}else await i.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:w.gj.allReadAt,readComments:{},unreadComments:{[e]:"true"}}}},n)}),await n}async markAllAsRead(){let e=this.client.subscription.data?.file?.currentUserCommentReadStatus,r=b.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{...!e&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically(async(e,n,i)=>{let a=e.file.currentUserCommentReadStatus,o=new Date;a?await n.optimisticallyUpdate({CommentReadStatus:{[a.id]:{...a,allReadAt:o,readComments:{},unreadComments:{}}}},r):await n.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${o.getTime()}`]:{userId:i.id,fileKey:this.client.fileKey,createdAt:o,allReadAt:o,readComments:{},unreadComments:{}}}},r)}),await r}async markAsRead(e){let r=this.client.subscription.data?.file?.currentUserCommentReadStatus,n=b.Ay.del(`/api/file/${this.client.fileKey}/unread_comments`,{comment_ids:e,...!r&&{all_read_at:w.gj.allReadAt}});return this.client.optimistically(async(r,i,a)=>{let o=r.file.currentUserCommentReadStatus,s=new Date,l=e.reduce((e,r)=>({...e,[r]:s.toUTCString()}),{});o?await i.optimisticallyUpdate({CommentReadStatus:{[o.id]:{...o,readComments:{...o.readComments,...l},unreadComments:Object.keys(o.unreadComments).filter(r=>!e.includes(r)).reduce((e,r)=>(e[r]="true",e),{})}}},n):await i.optimisticallyCreate({CommentReadStatus:{[`pending-comment-read-status-${s.getTime()}`]:{userId:a.id,fileKey:this.client.fileKey,createdAt:s,allReadAt:w.gj.allReadAt,readComments:l,unreadComments:{}}}},n)}),await n}}let G=(0,h.xx)(e=>{let r=e=>(e.hasOwnProperty("transform")||Object.defineProperty(e,"transform",{get:function(){return{filter:n=>r(e.filter(n)),map:n=>r(e.map(n)),join:n=>r([...e,...n||[]])}}}),e);return r(e)});function H(e,r,n){let a=i.useMemo(()=>{if("loaded"!==n.status)return new Set([]);let e=n.data.file;return new Set(e?"comments"in e?e.comments.map(e=>e.id):e.resolvedComments.map(e=>e.id):[])},[n]),o=(0,c.ZC)(a),{removed:s}=i.useMemo(()=>(0,g.Zv)(a,o),[a,o]),l=i.useCallback(e,r);i.useEffect(()=>{s.forEach(e=>{l(e)})},[l,s])}function K(e){let{userId:r,file:n,activeId:s,anchorPositions:l,boundingBoxPositions:c,DEPRECATED_updateWatchedNodeIds:u,updateWatchedStablePaths:h,getPageIdsForNodes:_,children:g}=e,f=i.useRef({}),b=(0,T.E3)()===O.nT.Whiteboard,S=!!(0,d.kc)().xr_debounce_threshold,w=!!(0,d.kc)().async_spotlight,U=n?.key,K=!!U,W=i.useMemo(()=>({fileKey:U??""}),[U]),$=i.useMemo(()=>(0,E.g)(),[W]),Y=(0,m.Rs)(P.$J,W,{enabled:K,traceId:$}),z=(0,m.Rs)(L.ZBn,W,{enabled:K}),j=(0,m.Rs)(L.qRE,W,{enabled:S&&K}),q=(0,m.Rs)(L.bCq,W,{enabled:w&&K}),Z=(0,m.Rs)(L.gkf,W,{enabled:b&&K}),X=(0,a.d4)(e=>e.comments.lgPendingUuidToServerIdMap),J=(0,a.wA)(),Q=i.useMemo(()=>{if("loaded"!==Y.status||!Y.data.file)return Y;let e=G(Y.data.file.comments).transform.filter(e=>null===e.resolvedAt);if("loaded"===z.status){let r=z.data.file?.resolvedComments;e=e.transform.join(r)}let r={...Y.data.file,comments:e};return{...Y,data:{...Y.data,file:r}}},[Y,z]);i.useMemo(()=>{"loaded"===Q.status&&Q.data?.file?.comments?.forEach(e=>{e.id in X?(f.current[e.id]=e,e.id=X[e.id]):e.uuid&&e.uuid in X&&f.current[e.uuid]&&f.current[e.uuid]!==e&&(J(v.pI({commentUuid:e.uuid})),delete f.current[e.uuid])})},[J,Q,X]);let ee=(0,a.d4)(e=>e.mirror.appModel.pagesList),{commentsAttachedToNodes:et,commentThreadNodeIds:er,commentThreadStablePaths:en}=i.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file)return{commentThreadsNodeIds:[],commentsAttachedToNodes:[]};let e=[],r=new Set,n=new Set;return Q.data.file.comments.forEach(i=>{if(null===i.parentId){let a=i.clientMeta?.nodeId,o=i.clientMeta?.stablePath;o&&h?(e.push(i),n.add(`[${o.join(",")}]`)):a&&u&&(e.push(i),r.add(a))}}),{commentsAttachedToNodes:e,commentThreadNodeIds:r,commentThreadStablePaths:n}},[Q,u,h]),ei=i.useMemo(()=>{if("loaded"!==Q.status||!Q.data.file||S&&!j.data?.file)return[];let e=new Set(er);return S&&(0,C.N)(j.data.file.feedPosts).forEach(r=>{e.add(r)}),Array.from(e)},[Q,j,S,er]),ea=i.useMemo(()=>"loaded"===Q.status&&Q.data.file?Array.from(new Set(en)):[],[Q,en]);i.useEffect(()=>{u&&u(ei),h&&h(ea)},[u,ei,h,ea]);let eo=(0,A.W9)(r,Q,s,l,_,ee),es=(0,A.gu)(r,Z,e.activeId),el=(0,R.i)(j,e.activeId,_,c),ec=(0,y.Z)(q),ed=i.useMemo(()=>{if("loaded"!==Q.status||S&&"loaded"!==j.status||b&&"loaded"!==Z.status)return(0,p.gB)([]);let e=[];return eo.data&&(e=e.concat(eo.data)),es.data&&(e=e.concat(es.data)),el.data&&(e=e.concat(el.data)),ec.data&&(e=e.concat(ec.data)),(0,p.gB)(e)},[Q.status,S,j.status,b,Z.status,eo.data,es.data,el.data,ec.data]),eu=function(e){let r=(0,m.ZA)(),n=(0,N.iZ)(),{args:a,subscription:s}=e,[l,c]=i.useState(()=>{if(n)return new k.I(a,s,n)});return i.useEffect(()=>{if(!n){c(void 0);return}if(!l||!(0,o.c2)(l.args,a)){c(new k.I(a,s,n));return}},[l,a,s,n,r]),l&&(n&&(l.user=n),l.subscription=s,l.livegraphClient=r),i.useMemo(()=>l?{commentReceipts:new V(l),reactionsApi:new x(l),writeAPI:new B(l),pinApi:new M.xI(l)}:{},[l])}({args:W,subscription:Q}),em=(0,D.r)({args:W,subscription:j});eu.canvasMentionReceipts=(0,I.pf)({canvasMentionArgs:W,canvasMentionSubscription:Z}),(0,A.Hu)(et,{enabled:!!(0,d.kc)().comments_absolute_positioning}),H(e=>{F.O.records[e]?.report?.("New Comment Missing","Comment disappeared within ten seconds of creation")},[],Y),H(e=>{F.O.records[e]?.report?.("New Resolved Comment Missing","Resolved comment disappeared within ten seconds of creation")},[],z);let ep=i.useMemo(()=>K?{...Q,api:eu,feedApi:em,threads:ed,isUnresolvedLoaded:"loaded"===Y.status,isResolvedLoaded:"loaded"===z.status}:{status:"loading",data:null,errors:null,threads:(0,p.Xm)(),api:{},isUnresolvedLoaded:!1,isResolvedLoaded:!1},[K,Q,eu,em,ed,Y.status,z.status]);return i.createElement(P.j9.Provider,{value:ep},g)}},465201:(e,r,n)=>{n.d(r,{t:()=>o});var i=n(966712),a=n(939863);function o(){let e=(0,i.kc)().ce_tv_fill_hug_suggest?[{separator:!0},{action:"set-selection-hug-horizontal",displayText:(0,a.t)("fullscreen_actions.set-hug-width")},{action:"set-selection-hug-vertical",displayText:(0,a.t)("fullscreen_actions.set-hug-height")},{action:"set-selection-fill-horizontal",displayText:(0,a.t)("fullscreen_actions.set-fill-width")},{action:"set-selection-fill-vertical",displayText:(0,a.t)("fullscreen_actions.set-fill-height")}]:[];return{name:"multi-stack-selection-submenu",featureFlags:["auto_auto_layout"],flags:["design","edit","slides"],children:[{action:"run-multi-stack-auto-layout",displayText:(0,a.t)("fullscreen_actions.run-multi-stack-auto-layout")},{action:"destroy-all-auto-layout",displayText:(0,a.t)("fullscreen_actions.destroy-all-auto-layout")},{separator:!0},{action:"resize-to-fit",displayText:(0,a.t)("fullscreen_actions.resize-to-fit")},...e]}}},107877:(e,r,n)=>{n.d(r,{E2:()=>y,M5:()=>a,Tb:()=>f,W_:()=>s,XG:()=>c,ZO:()=>i,_O:()=>E,aY:()=>g,eg:()=>u,s0:()=>o,vY:()=>_,xB:()=>p});var i=(e=>(e.USERS="users",e.TEAMS="teams",e.ORGS="orgs",e.PLUGINS="plugins",e.WIDGETS="widgets",e.HUB_FILES="hub_files",e.PROFILES="profiles",e.CATEGORIES="community_categories",e))(i||{}),a=(e=>(e.HUB_FILE_DUPLICATED="Hub File Duplicated",e.PLUGIN_INSTALLED="Hub Plugin Installed",e.PLUGIN_UNINSTALLED="Hub Plugin Uninstalled",e.WIDGET_INSTALLED="Hub Widget Installed",e.WIDGET_UNINSTALLED="Hub Widget Uninstalled",e.SLIDE_TEMPLATE_USED="slide_template_used",e.RESOURCE_LIKE="resource_like",e.RESOURCE_UNLIKE="resource_unlike",e.SEARCH_QUERY_RESULT="search_query_result",e))(a||{}),o=(e=>(e.PLUGIN_INSTALL="community_hub_plugin_install",e.PLUGIN_UNINSTALL="community_hub_plugin_uninstall",e.PROFILE_FOLLOW="community_hub_follow",e.PROFILE_UNFOLLOW="community_hub_unfollow",e.HUB_FILE_LIKE="community_hub_file_like",e.HUB_FILE_UNLIKE="community_hub_file_unlike",e.PLUGIN_LIKE="community_plugin_like",e.PLUGIN_UNLIKE="community_plugin_unlike",e.WIDGET_LIKE="community_widget_like",e.WIDGET_UNLIKE="community_widget_unlike",e.SHARE_TWITTER="community_hub_share_twitter",e.LANDING_PAGE_TO_CURATED_PAGE_BUTTON="landing_page_to_curated_page_button",e.SHARE_FACEBOOK="community_hub_share_facebook",e.SHARE_LINK="community_hub_share_link",e.CREATE_PROFILE="community_hub_create_profile",e.COMMUNITY_OPT_IN="community_hub_opt_in",e.UPDATE_PROFILE_HANDLE="community_hub_update_handle",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_SHOWN="community_hub_plugin_install_warning_shown",e.PLUGIN_INSTALL_CONFIRMATION_MODAL_CANCEL="community_hub_plugin_install_warning_cancel",e.SEE_MORE_IN_COMMUNITY="see_more_in_community",e.FIND_MORE_PLUGINS="find_more_plugins",e))(o||{}),s=(e=>(e.PROFILE_ADMIN_MENU_OPEN="Community browse menu opened",e))(s||{}),l=(e=>(e.FIGJAM="figjam",e))(l||{}),c=(e=>(e.PLUGINS="plugins",e.FILES="files",e.CREATORS="creators",e.FIGJAM_PLUGINS="figjam_plugins",e.FIGMA_DESIGN_PLUGINS="figma_design_plugins",e.WIDGETS="widgets",e.FIGJAM_WIDGETS="figjam_widgets",e.FIGMA_DESIGN_WIDGETS="figma_design_widgets",e))(c||{}),d=(e=>(e.HAS_RESTORED="has_restored",e.RESTORE_SMOOTH="restore_smooth",e.RESTORE="restore",e))(d||{}),u=(e=>(e.POPULAR="popular",e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e.INSTALLS_DESC="installs",e.RUNS_DESC="runs",e.LAST_UPDATED_DESC="updated_at",e.INSTALLS_ASC="installs_asc",e.RUNS_ASC="runs_asc",e.LAST_UPDATED_ASC="updated_at_asc",e))(u||{}),m=(e=>(e.CREATED_AT="created_at",e.FOLLOWING_FEED="feed",e))(m||{}),p=(e=>(e.DESC="desc",e.ASC="asc",e))(p||{});let h={resourceIds:{},unmergedResourceIds:[],loading:!1};({...h});var _=(e=>(e.NAME="name",e.PUBLISHER="publisher",e.INSTALLS="installs",e.RUNS="runs",e.CREATED_AT="created_at",e.LAST_UPDATED="last_updated",e))(_||{}),g=(e=>(e.FREE_HUB_FILE_LICENSE="https://creativecommons.org/licenses/by/4.0/",e.FREE_PLUGIN_LICENSE="https://www.figma.com/community-resource-license/",e.FREE_RESOURCE_LICENSE="https://www.figma.com/community-free-resource-license/",e.PAID_RESOURCE_LICENSE="https://www.figma.com/community-paid-resource-license/",e))(g||{});let f="checkout",E="freemium_preview",y="1"},992271:(e,r,n)=>{n.d(r,{BG:()=>S,Fh:()=>C,LM:()=>v,L_:()=>A,UV:()=>b,WT:()=>I,hY:()=>d,ln:()=>w,qt:()=>T});var i=n(966664),a=n(630372),o=n(969468),s=n(831474),l=n(45259);let c=[{deviceName:"Slide 16:9",framePresetSize:{x:1920,y:1080}},{deviceName:"Slide 4:3",framePresetSize:{x:1024,y:768}}],d=Object.create(null);for(let e of[o.eo,s.o,l.t,a.E])for(let r of e)d[r.presetIdentifier]=r;function u(e,r){let n=new Set,i=[];for(let a of e)n.has(a.deviceName)||(n.add(a.deviceName),a.archived?r?.push(a.deviceName):i.push(a.deviceName));return i}let m=[],p=u(o.eo,m),h=u(s.o,m),_=u(l.t,m),g=u(a.E,m),f=Object.create(null);for(let e in d){let r=d[e],n=r.deviceName;n in f||(f[n]=[]),f[n].push(r)}let E=(e,r)=>{for(let n of[o.eo,s.o,l.t,a.E])for(let i of n)if(i.framePresetSize.x===e&&i.framePresetSize.y===r)return i;return null};var y=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.PHONE=1]="PHONE",e[e.TABLET=2]="TABLET",e[e.WATCH=3]="WATCH",e[e.DESKTOP=4]="DESKTOP",e))(y||{});let b={1:p,2:h,3:_,4:g,0:[]},v={1:u(o.eo.filter(function(e){return!0===e.isSuggested})).slice(0,5),2:u(s.o).slice(0,5),3:u(l.t).slice(0,5),4:u(a.E).slice(0,5),0:[]};function I(e,r){let n=d[r.presetIdentifier];return e.map(e=>e===n.deviceName?null:C(e,r)).filter(i.Vq)}function T(e){let r=d[e];if(null==r)return 0;let n=r.deviceName;return -1!==p.indexOf(n)?1:-1!==h.indexOf(n)?2:-1!==_.indexOf(n)?3:-1!==g.indexOf(n)?4:0}function S(e,r){for(let n of c)if(n.framePresetSize.x===e&&n.framePresetSize.y===r)return{type:"PRESENTATION",presetIdentifier:"",portraitDeviceSize:{x:0,y:0},rotation:"NONE"};let n=E(e,r);return null!=n?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"NONE"}:null!=(n=E(r,e))&&function(e,r){if("NONE"===e||"PRESENTATION"===e)return!1;if("CUSTOM"===e)return!0;if("PRESET"===e&&null!=r){let e=d[r];if(null!=e){let r=-1!==_.indexOf(e.deviceName),n=-1!==g.indexOf(e.deviceName);return!r&&!n}}return!1}("PRESET",n.presetIdentifier)?{type:"PRESET",presetIdentifier:n.presetIdentifier,portraitDeviceSize:n.framePresetSize,rotation:"CCW_90"}:null}function w(e){let r=T(e||"");return 4!==r&&0!==r}let A=e=>!!function(e){let r=d[e];return r?.inlinePreviewInfo||null}(e);function C(e,r){let n=d[e]||f[e][0];if(r&&"PRESET"===r.type){let i=d[r.presetIdentifier],a=i.hideUnlessActive&&!i.archived&&n.framePresetSize.x===i.framePresetSize.x&&n.framePresetSize.y===i.framePresetSize.y;if(i&&i.deviceName===e)n=i;else if(!a&&n.hideUnlessActive&&!n.archived)return null}else if(n.hideUnlessActive&&!n.archived)return null;return n}},457858:(e,r,n)=>{n.d(r,{$W:()=>u,fS:()=>m});var i=n(939863);let a=[{name:"Android Compact",width:412,height:917,i18nName:()=>(0,i.t)("presets.android_compact")},{name:"Android Medium",width:700,height:840,i18nName:()=>(0,i.t)("presets.android_medium")},{name:"iPhone 16",width:393,height:852,i18nName:()=>(0,i.t)("presets.i_phone_16")},{name:"iPhone 16 Pro",width:402,height:874,i18nName:()=>(0,i.t)("presets.i_phone_16_pro")},{name:"iPhone 16 Pro Max",width:440,height:956,i18nName:()=>(0,i.t)("presets.i_phone_16_pro_max")},{name:"iPhone 16 Plus",width:430,height:932,i18nName:()=>(0,i.t)("presets.i_phone_16_plus")},{name:"iPhone 14 & 15 Pro Max",width:430,height:932,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro_max")},{name:"iPhone 14 & 15 Pro",width:393,height:852,i18nName:()=>(0,i.t)("presets.i_phone_14_and_15_pro")},{name:"iPhone 13 & 14",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_and_14")},{name:"iPhone 14 Plus",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_14_plus")},{name:"iPhone 13 mini",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_13_mini")},{name:"iPhone SE",width:320,height:568,i18nName:()=>(0,i.t)("presets.i_phone_se")}],o=[{name:"Android Expanded",width:1280,height:800,i18nName:()=>(0,i.t)("presets.android_expanded")},{name:"Surface Pro 8",width:1440,height:960,i18nName:()=>(0,i.t)("presets.surface_pro_8")},{name:"iPad mini 8.3",width:744,height:1133,i18nName:()=>(0,i.t)("presets.i_pad_mini_8_3")},{name:'iPad Pro 11"',width:834,height:1194,i18nName:()=>(0,i.t)("presets.i_pad_pro_11")},{name:'iPad Pro 12.9"',width:1024,height:1366,i18nName:()=>(0,i.t)("presets.i_pad_pro_12_9")}],s=[{name:"MacBook Air",width:1280,height:832,i18nName:()=>(0,i.t)("presets.mac_book_air_m2")},{name:'MacBook Pro 14"',width:1512,height:982,i18nName:()=>(0,i.t)("presets.mac_book_pro_14")},{name:'MacBook Pro 16"',width:1728,height:1117,i18nName:()=>(0,i.t)("presets.mac_book_pro_16")},{name:"Desktop",width:1440,height:1024,i18nName:()=>(0,i.t)("presets.desktop")},{name:"Wireframe",width:1440,height:1024,i18nName:()=>(0,i.t)("community.categories.wireframe")},{name:"TV",width:1280,height:720,i18nName:()=>(0,i.t)("presets.tv")}],l=[{name:"Slide 16:9",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.slide_16_9")},{name:"Slide 4:3",width:1024,height:768,i18nName:()=>(0,i.t)("presets.slide_4_3")}],c=[{name:"A4",width:595,height:842,i18nName:()=>(0,i.t)("presets.a_4")},{name:"A5",width:420,height:595,i18nName:()=>(0,i.t)("presets.a_5")},{name:"A6",width:297,height:420,i18nName:()=>(0,i.t)("presets.a_6")},{name:"Letter",width:612,height:792,i18nName:()=>(0,i.t)("presets.letter")},{name:"Tabloid",width:792,height:1224,i18nName:()=>(0,i.t)("presets.tabloid")}],d=p(Object.values({phonePresets:a,tabletPresets:o,desktopPresets:s,presentationPresets:l,watchPresets:[{name:"Apple Watch Series 10 42mm",width:187,height:223,i18nName:()=>(0,i.t)("presets.apple_watch_series_10_42_mm")},{name:"Apple Watch Series 10 46mm",width:208,height:248,i18nName:()=>(0,i.t)("presets.apple_watch_series_10_46_mm")},{name:"Apple Watch 41mm",width:176,height:215,i18nName:()=>(0,i.t)("presets.apple_watch_41_mm")},{name:"Apple Watch 45mm",width:198,height:242,i18nName:()=>(0,i.t)("presets.apple_watch_45_mm")},{name:"Apple Watch 44mm",width:184,height:224,i18nName:()=>(0,i.t)("presets.apple_watch_44_mm")},{name:"Apple Watch 40mm",width:162,height:197,i18nName:()=>(0,i.t)("presets.apple_watch_40_mm")}],paperPresets:c,socialMediaPresets:[{name:"Twitter post",width:1200,height:675,i18nName:()=>(0,i.t)("presets.twitter_post")},{name:"Twitter header",width:1500,height:500,i18nName:()=>(0,i.t)("presets.twitter_header")},{name:"Facebook post",width:1200,height:630,i18nName:()=>(0,i.t)("presets.facebook_post")},{name:"Facebook cover",width:820,height:312,i18nName:()=>(0,i.t)("presets.facebook_cover")},{name:"Instagram post",width:1080,height:1080,i18nName:()=>(0,i.t)("presets.instagram_post")},{name:"Instagram story",width:1080,height:1920,i18nName:()=>(0,i.t)("presets.instagram_story")},{name:"Dribbble shot",width:400,height:300,i18nName:()=>(0,i.t)("presets.dribbble_shot")},{name:"Dribbble shot HD",width:800,height:600,i18nName:()=>(0,i.t)("presets.dribbble_shot_hd")},{name:"LinkedIn cover",width:1584,height:396,i18nName:()=>(0,i.t)("presets.linked_in_cover")}],figmaPresets:[{name:"Plugin icon",width:128,height:128,i18nName:()=>(0,i.t)("presets.plugin_icon")},{name:"Profile banner",width:1680,height:240,i18nName:()=>(0,i.t)("presets.profile_banner")},{name:"Plugin / file cover",width:1920,height:1080,i18nName:()=>(0,i.t)("presets.plugin_file_cover")}],archivedPresets:[{name:"iPhone 13 Pro Max",width:428,height:926,i18nName:()=>(0,i.t)("presets.i_phone_13_pro_max")},{name:"iPhone 13 / 13 Pro",width:390,height:844,i18nName:()=>(0,i.t)("presets.i_phone_13_13_pro")},{name:"iPhone 11 Pro Max",width:414,height:896,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_max")},{name:"iPhone 11 Pro / X",width:375,height:812,i18nName:()=>(0,i.t)("presets.i_phone_11_pro_x")},{name:"iPhone 8 Plus",width:414,height:736,i18nName:()=>(0,i.t)("presets.i_phone_8_plus")},{name:"iPhone 8",width:375,height:667,i18nName:()=>(0,i.t)("presets.i_phone_8")},{name:"Android Small",width:360,height:640,i18nName:()=>(0,i.t)("presets.android_small")},{name:"Android Large",width:360,height:800,i18nName:()=>(0,i.t)("presets.android_large")},{name:"Google Pixel 2",width:411,height:731,i18nName:()=>(0,i.t)("presets.google_pixel_2")},{name:"Google Pixel 2 XL",width:411,height:823,i18nName:()=>(0,i.t)("presets.google_pixel_2_xl")},{name:"iPad mini 5",width:768,height:1024,i18nName:()=>(0,i.t)("presets.i_pad_mini_5")},{name:"Surface Pro 4",width:1368,height:912,i18nName:()=>(0,i.t)("presets.surface_pro_4")},{name:"MacBook",width:1152,height:700,i18nName:()=>(0,i.t)("presets.mac_book")},{name:"MacBook Pro",width:1440,height:900,i18nName:()=>(0,i.t)("presets.mac_book_pro")},{name:"Surface Book",width:1500,height:1e3,i18nName:()=>(0,i.t)("presets.surface_book")},{name:"Apple Watch 42mm",width:156,height:195,i18nName:()=>(0,i.t)("presets.apple_watch_42_mm")},{name:"Apple Watch 38mm",width:136,height:170,i18nName:()=>(0,i.t)("presets.apple_watch_38_mm")},{name:"iMac",width:1280,height:720,i18nName:()=>(0,i.t)("presets.i_mac")},{name:"Macintosh 128k",width:512,height:342,i18nName:()=>(0,i.t)("presets.mac_128k")}]})),u=p([a,s,l]);function m(e,r=d){let n=null;for(let i of Object.values(r)){if(e.width===i.width&&e.height===i.height)return i;e.width!==i.height||e.height!==i.width||n||(n=i)}return n}function p(e){return e.reduce((e,r)=>{for(let n of r)e[n.name]=n;return e},{})}p([a,o,c])},259927:(e,r,n)=>{n.d(r,{$O:()=>C,$T:()=>u,AB:()=>m,C9:()=>g,DT:()=>x,Dm:()=>i,F:()=>c,F7:()=>f,J6:()=>_,K9:()=>w,LO:()=>L,Pr:()=>p,Qx:()=>a,Sl:()=>N,Uu:()=>o,VJ:()=>M,Vl:()=>U,WJ:()=>D,W_:()=>A,XX:()=>k,Yr:()=>y,Z7:()=>P,ZR:()=>l,_V:()=>v,aN:()=>T,h2:()=>h,k8:()=>d,ku:()=>O,o$:()=>I,s4:()=>s,si:()=>F,t4:()=>R,vu:()=>b,wi:()=>S,yJ:()=>E});let i="js-fullscreen-prevent-event-capture",a="js-fullscreen-prevent-event-capture-keys",o="js-fullscreen-wheel-event-passthrough",s="js-fullscreen-wheel-event-capture",l="js-fullscreen-no-mod-wheel-event-capture",c=0x7fffffff,d="background-panel-color-picker",u="prototype-background-panel-color-picker",m="type-settings",p="text-decoration-paint-picker",h="style-preview-type-settings",_="font-picker",g="export-picker",f="selection-paint-item",E="selection-style-item",y=`${f}-slides`,b="slides-rewrite-text-picker",v="stacking-advanced-sizing",I="prototype-interaction-settings",T="accessible-reading-order",S="DROPDOWN_TYPE_SELECT_LAYER_CONTEXT_MENU",w="DROPDOWN_TYPE_SELECTION_CONTEXT_MENU",A="DROPDOWN_TYPE_CANVAS_CONTEXT_MENU",C="DROPDOWN_TYPE_SAVEPOINT_CONTEXT_MENU",N="DROPDOWN_TYPE_DEV_HANDOFF_CODE_CONTEXT_MENU",L="DROPDOWN_TYPE_PLUGIN_RUN_CONTEXT_MENU",O="DROPDOWN_TYPE_TEXT_EDIT_MODE_CONTEXT_MENU",R="DROPDOWN_TYPE_RULER_GUIDE_CONTEXT_MENU",P="DROPDOWN_TYPE_COMMENT_CONTEXT_MENU",D="DROPDOWN_TYPE_READY_STATUS_CONTEXT_MENU",k="DROPDOWN_TYPE_ANNOTATIONS_BUTTON_CONTEXT_MENU",M="DROPDOWN_TYPE_THREAD_COMMENT_OVERFLOW_MENU",F="DROPDOWN_TYPE_SECTION_PRESET_PICKER_CONTEXT_MENU",x="DROPDOWN_TYPE_COMMENT_ATTACHMENT_CONTEXT_MENU",U="DROPDOWN_TYPE_GRADIENT_STOP_CONTEXT_MENU"},324597:(e,r,n)=>{function i(e){return"children"in e||"childDropdown"in e}function a(e){return"action"in e||"callback"in e}function o(e){return"separator"in e}function s(e){return"header"in e}function l(e){return"render"in e}function c(e,r){var n;return!!r.checked||null!=r.property&&("string"==typeof(n=r.property)?e[n]:n.getCopy())===r.propertyValue}function d(e,r){return"string"==typeof r?e[r]:r.getCopy()}function u(e){return e.action||e.name}n.d(r,{Dz:()=>u,M3:()=>h,MH:()=>g,TV:()=>i,WJ:()=>c,_o:()=>a,_p:()=>p,f4:()=>d,gN:()=>s,hV:()=>y,id:()=>l,k$:()=>o,lW:()=>E,pn:()=>f,rH:()=>m,u2:()=>_});let m="edit-menu",p="view-menu",h="object-menu",_="vector-menu",g="text-menu",f="arrange-menu",E="preferences-menu",y="figma-account-menu"},349410:(e,r,n)=>{n.d(r,{CS:()=>L,CT:()=>B,Cv:()=>z,FC:()=>$,Gm:()=>G,LQ:()=>J,Mh:()=>U,Mk:()=>A,Mx:()=>R,Ns:()=>q,Xs:()=>Z,Xt:()=>W,Yz:()=>V,cK:()=>K,e5:()=>S,fh:()=>Y,fn:()=>x,ih:()=>F,jb:()=>O,ji:()=>M,kO:()=>C,kX:()=>D,tk:()=>X,uL:()=>P,vm:()=>k,y:()=>T,yq:()=>j,zq:()=>H});var i=n(411855);n(188507);var a=n(786013);n(268853),n(181912);var o=n(966712);n(314866);var s=n(418956),l=n(563706);n(776621);var c=n(647899),d=n(411045),u=n(750293),m=n(226055),p=n(385326);n(723239),n(875847);var h=n(106757),_=n(335682);n(694687),n(860178);var g=n(99506);n(243987);var f=n(556261),E=n(56099),y=n(984968),b=n(668860),v=n(36816),I=n(463546);function T(){let{getConfig:e}=(0,c.I7)("exp_at_mention_invited_users");return(0,i.useCallback)(r=>!!function({showExpAtMentionInvite:e,isDraftFile:r,isFigmaDesign:n,inOrg:i,isMobile:a}){return!(r||a||!e||!n||i)}(r)&&"variant"===e().get("treatment",""),[e])}function S({userId:e,teams:r,rolesByTeamId:n,getM0Config:i,getM1Config:a}){if(!(0,o.kc)().close_starter_team_loophole)return!1;let s=w(e,r,n);return 0!==s&&(1===s?i().get("should_block_second_starter_team",!1):a().get("should_block_more_than_one_starter_team",!1))}function w(e,r,n){let i=0,a={};for(let o of(r.forEach(e=>a[e.id]=e),Object.keys(n))){let r=a[o],s=n[o][e];r&&s&&s.level===b.e6.OWNER&&r.starter_team&&!r.org_team&&!r.student_team&&null===r.subscription&&null===r.deleted_at&&i++}return i}function A(e,r,n){return!!(0,o.kc)().close_starter_team_loophole&&0===w(e,r,n)&&(0,o.kc)().close_starter_loophole_team_one}function C(){let{getConfig:e}=(0,c.I7)("exp_pro_tier_onboarding");return(0,i.useCallback)(()=>e().get("show_pro_onboarding",!1),[e])}let N={component:"useGetExpDevModeGraceDays",migrationGroup:E.L.GROUP_2};function L(){let e=(0,f.yN)({...N,attribute:"isCurrentOrg",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===g.OL.ORG}),r=(0,f.FR)(N),n=(0,f.wy)({...N,attribute:"currentPaidPlanUserType",legacy:(n,i)=>e&&i?g.h4.ORG_USER:r&&n?g.h4.TEAM_USER:null,migrated:e=>e?.key.type??null}),{getConfig:o}=(0,c.I7)("exp_dev_mode_grace_period_v2_org"),{getConfig:s}=(0,c.I7)("exp_dev_mode_grace_period_v2_team");return(0,i.useCallback)(()=>{let i=!e&&r?a.zi5:a.W7o;switch(n){case g.h4.ORG_USER:return i=o().get("dev_mode_grace_day",a.W7o),{inExperiment:o().get("in_experiment",!1),devModeGraceDays:i};case g.h4.TEAM_USER:return i=s().get("dev_mode_grace_day",a.zi5),{inExperiment:s().get("in_experiment",!1),devModeGraceDays:i};default:return{inExperiment:!1,devModeGraceDays:a.W7o}}},[n,o,s,e,r])}function O(){let{getConfig:e}=(0,c.I7)("exp_pro_viewer_to_editor_v1");return(0,i.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function R(){let{getConfig:e}=(0,c.I7)("exp_in_product_sales_contact_form");return!!e().getValue("has_updated_sales_contact_form",!1)}function P(){let{getConfig:e}=(0,c.I7)("exp_org_viewer_to_editor_v1");return(0,i.useCallback)(()=>e().get("show_viewer_editor_nudge",!1),[e])}function D(e){return e().get("switch_button_hierarchy",!1)}function k(e){return e().get("hide_toolbar_request_cta",!1)}function M(e){return!!(0,o.tl)().org_id&&e().get("hide_toolbar_request_cta",!1)}var F=(e=>(e.CONTROL="control",e.VARIANT_A="variantA",e.VARIANT_B="variantB",e))(F||{});function x(){let{getConfig:e}=(0,c.I7)("exp_fbg_navigation_updates"),r=(0,f.tJ)({unwrapResult:!0}),n=r?.key.type===g.OL.TEAM&&(0,o.kc)().ps_benchmark,i=r?.tier===g.Ag.STARTER;return n&&i?e().getValue("treatment","control"):"control"}function U(){let{getConfig:e}=(0,c.I7)("exp_separate_billing_and_shipping_addresses");return!!e().getValue("is_enabled",!1)}function B(){let{getConfig:e}=(0,c.I7)("seat_billing_terms");return!!e().getValue("enabled",!1)}function V(){let{getConfig:e}=(0,c.I7)("exp_resurrect_locked_teams"),r=(0,y.cD)();return(0,i.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_locked_state_redesign",!1),[e,r])}function G(){let e=(0,c.I7)("slides_starter_team_limits_exp");return!!e?.getConfig().getValue("is_frontend_on",!1)}function H(){let{getConfig:e}=(0,c.I7)("exp_viewer_upgrade_awareness");return(0,i.useCallback)(()=>!!e().getValue("enabled",!1),[e])}async function K(){return(await (0,c.hW)("exp_viewer_upgrade_awareness")).get("enabled",!1)}function W(e){let{getConfig:r}=(0,c.I7)(e?"exp_drafts_copy_link_org":"exp_drafts_copy_link_team"),n=Y();return(0,o.kc)().statsig_aa_flag_plan_key_web,(!!e||!n)&&!!r().getValue("has_drafts_copy_link_experience",!1)}function $(){let e=(0,_.q5)(),r=(0,m.GS)(),n=(0,s.md)(p.D),a={component:"useIsInAskToEditRedesignExp",migrationGroup:E.L.GROUP_2},o=(0,f.yN)({...a,attribute:"isCurrentOrg",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===g.OL.ORG}),l=(0,f.FR)(a),d=(0,f.wy)({...a,attribute:"currentPaidPlanUserType",legacy:(e,r)=>o&&r?g.h4.ORG_USER:l&&e?g.h4.TEAM_USER:null,migrated:e=>o||l?e?.key.type??null:null}),u=(0,f.wy)({...a,attribute:"isDesignViewerRestricted",legacy:(e,r)=>r?.design_paid_status===g.El.RESTRICTED||e?.design_paid_status===v.Zf.RESTRICTED,migrated:e=>e?.designPaidStatus===g.dQ.RESTRICTED}),h=(0,f.wy)({...a,attribute:"isWhiteboardViewerRestricted",legacy:(e,r)=>r?.whiteboard_paid_status===g.El.RESTRICTED||e?.whiteboard_paid_status===v.Zf.RESTRICTED,migrated:e=>e?.whiteboardPaidStatus===g.dQ.RESTRICTED}),y=Y(),{getConfig:b}=(0,c.I7)("exp_ask_to_edit_redesign_team"),{getConfig:T}=(0,c.I7)("exp_ask_to_edit_redesign_org");return(0,i.useCallback)(()=>{if(!e||e.editorType!==g._Y.DESIGN&&e.editorType!==g._Y.WHITEBOARD||!r||n===I.dvJ.id||e.editorType===g._Y.DESIGN&&!u||e.editorType===g._Y.WHITEBOARD&&!h||d===g.h4.TEAM_USER&&y)return!1;switch(d){case g.h4.ORG_USER:return T().getValue("is_redesigned",!1);case g.h4.TEAM_USER:return b().getValue("is_redesigned",!1);default:return!1}},[d,T,b,e,r,u,h,y,n])}function Y(){return!!(0,o.kc)().pro_cost_messaging&&!!(0,o.tl)().cohorted_in_pro_team_cost_messaging_xp}function z(){let e=(0,f.nW)({component:"useIsAdminNavRevampEnabled",migrationGroup:E.L.GROUP_2});return(0,i.useCallback)(()=>!e&&(0,o.kc)().admin_revamp_rollout,[e])}function j(){let e=(0,d.RR)();return(0,i.useCallback)(()=>e||!!(0,o.kc)().new_invoices_ui,[e])}function q(e){let{getConfig:r}=(0,c.I7)("exp_slides_audience_google_sso");return(0,i.useCallback)(()=>!(0,l.C8)()&&!l.rr&&null==e&&r().get("should_see_google_sso",!1),[r,e])}function Z(){let{getConfig:e}=(0,c.I7)("exp_locked_pro_team_revamp_ui"),r=(0,y.cD)();return(0,i.useCallback)(n=>!!r&&!!n&&!!e().getValue("show_content",!1),[e,r])}function X(e){let r=(0,s.md)(h.UQ),{getConfig:n}=(0,c.I7)("exp_dev_mode_one_click_request");return(0,i.useCallback)(()=>!r&&e!==u.i$.Upsell&&"variant"===n().getValue("treatment","control"),[r,e,n])}function J(){let{getConfig:e}=(0,c.I7)("exp_update_dev_mode_prop_panel_upsell");return(0,i.useCallback)(()=>e().get("enabled",!1),[e])}},140908:(e,r,n)=>{n.d(r,{S$:()=>p,U6:()=>d,k3:()=>m,wN:()=>c,yo:()=>u}),n(517333);var i=n(133537),a=n(966712),o=n(716034);n(563706);var s=n(647899),l=n(99506);function c(e){return!1}function d(){return!!(0,a.kc)().rollout_pinned_comments_ff}function u({user:e,file:r,numPinnedCommentThreads:n}={}){return!!d()&&!!e&&!!r&&r.editorType===l._Y.DESIGN&&(!!n&&n>0||!!((0,a.b5)()&&(0,i.jm)(e.email))||!!r.team&&!r.parentOrgId)}function m(){let{getConfig:e}=(0,s.I7)("rollout_pinned_comments_ff");return e().getValue("can_pin_comments",!1)}function p(){return(0,a.kc)().google_federated_cm??!1}var h=(e=>(e.DEFAULT="default",e.PZ_THEN_PRODUCT="pz_then_product",e.PRODUCT_THEN_PZ="product_then_pz",e))(h||{});(0,o.eU)(null)},325469:(e,r,n)=>{n.d(r,{d:()=>l});var i=n(411855),a=n(188507);n(647899);var o=n(335682),s=n(643067);function l({file:e}){let{currentOrg:r,currentTeam:n}=function(){let e=(0,a.d4)(e=>(0,s.wA)(e)),r=(0,o.q5)();return{currentOrg:e,currentTeam:r?.team??null,currentFile:r}}();(0,i.useEffect)(()=>{if(r||!n||e?.editor_type!=="design")return},[r,n,e])}},672517:(e,r,n)=>{n.d(r,{$z:()=>v,L0:()=>T,QE:()=>_,T8:()=>E,fu:()=>g,h3:()=>b,j6:()=>S,jm:()=>I,kp:()=>f,tf:()=>y});var i=n(411855),a=n(188507),o=n(460845),s=n(776250),l=n(553716),c=n(47506),d=n(939863),u=n(10648),m=n(988022);let p=null;function h(){p=null}let _=i.createContext({properties:{},trackEvent:()=>null});function g({name:e,properties:r={},trackingTargets:n=u.K.ALL,enabled:o=!0,ignoreParent:d=!1,children:h}){let{name:g,properties:f}=(0,i.useContext)(_),E=(0,i.useRef)({}),y=(0,i.useRef)(null);E.current&&(0,a.bN)(E.current,r)||(E.current=r),r=E.current;let b=(0,i.useMemo)(()=>{let n=g&&!d?`${g} > ${e}`:e,i={...f,...r};return{name:n,properties:i,trackEvent:(e,r)=>(0,s.sx)(e,{trackingContext:n,...i,...r})}},[e,r,g,f,d]);return(0,i.useEffect)(()=>{if(!o||n===u.K.NONE)return;let e=b.name,r=b.properties;if(y.current&&y.current.name===e&&(0,a.bN)(y.current.properties,r))return;if(n===u.K.RCS){let n={};for(let e of Object.keys(r))null!==r[e]&&void 0!==r[e]&&(n[e]=r[e]);(0,c.YQ)({id:e,properties:n});return}let i={name:e,...null!=p&&{ctaClickedReferrer:p},...r};(0,l.ED)("Context Viewed",e,i),(0,m.qD)(i),y.current=b},[n,b,o]),i.createElement(_.Provider,{value:b},h)}function f(e,r){var n;return(n=class extends i.PureComponent{render(){return i.createElement(g,{name:r||e.displayName},i.createElement(e,{...this.props}))}}).displayName=e.displayName,n}function E(e,r,n={},a=!0){return i.createElement(g,{name:r,properties:n,enabled:a},e)}function y(e,r){let n=i.forwardRef((n,a)=>i.createElement(_.Consumer,null,o=>{let s=e=>{if(n.disabled)return;let a={...o.properties,...n.trackingProperties};o.name&&(a.trackingContext=o.name);let s=function(e,r){if(r)return r;if(e&&"string"==typeof e)return e;{let r=i.Children.map(e,e=>{if(e?.type!==d.qD)return e;{let{id:r,options:n}=e.props;return(0,d.t)(r,n)}});if(r?.every(e=>"string"==typeof e))return r.join("")}}(n.children,n.innerText);s&&(a.text=s),(0,m.Cu)(a,n.trackingEventName,r),p=`${a.trackingContext} : ${a.text}`,n.onClick?.(e),setTimeout(h,150)},{trackingProperties:l,innerText:c,useMouseDown:u,trackingEventName:_,...g}=n;return i.createElement(e,{ref:a,...g,...n.useMouseDown?{onMouseDown:s}:{onClick:s}})}));return n.displayName=`Tracked(${e.displayName||e.name})`,n}function b(e){return class extends i.Component{render(){return i.createElement(_.Consumer,null,r=>{let{trackingProperties:n,trackingPopulationLevel:a,trackingFieldName:o,...s}=this.props;return i.createElement(e,{...s,onBlur:e=>{let n={...r.properties,...this.props.trackingProperties,fieldName:this.props.trackingFieldName,populationLevel:this.props.trackingPopulationLevel};r.name&&(n.trackingContext=r.name),(0,m.fy)(n),this.props.onBlur&&this.props.onBlur(e)}})})}}}let v=y(({dataTestId:e,...r})=>i.createElement("button",{...r,"data-testid":e})),I=y(e=>i.createElement("div",{...e})),T=y(e=>i.createElement("a",{...e},e.children),!0);function S(){return(0,i.useContext)(_)}y(e=>i.createElement(o.N_,{...e})),y(e=>i.createElement("input",{...e}))},138369:(e,r,n)=>{n.d(r,{Fy:()=>l,Kf:()=>s,iR:()=>o,ll:()=>c});var i=n(411855),a=n(647899);function o(){let{getConfig:e}=(0,a.I7)("exp_signup_optimization_deferred_password");return(0,i.useCallback)(()=>!!e().getValue("enabled",!1),[e])}function s({isUnauth:e,isDesign:r}){let{getConfig:n}=(0,a.I7)("exp_logged_out_desktop_revamp");return(0,i.useCallback)(()=>!!e&&!!r&&!!n().getValue("enabled",!1),[n,e,r])}function l(){let{getConfig:e}=(0,a.I7)("exp_one_tap_prototype_desktop");return(0,i.useCallback)(()=>!!e().getValue("show_one_tap",!1),[e])}function c(){let{getConfig:e}=(0,a.I7)("exp_login_deferred_password");return!!e().getValue("enabled",!1)}},617524:(e,r,n)=>{n.d(r,{EO:()=>m});var i=n(411855),a=n(188507),o=n(922827),s=n(776250),l=n(737947),c=n(761870),d=n(662275),u=n(880671);function m(){let e=(0,a.wA)();return(0,i.useCallback)(r=>{(0,s.sx)("show_auth_for_logged_out_file",{actionType:function(e){switch(e){case o.rcl.SET_TOOL_DEFAULT:return"SET_TOOL_DEFAULT";case o.rcl.SET_TOOL_COMMENTS:return"SET_TOOL_COMMENTS";case o.rcl.FOLLOW_PRESENTER:return"CLICK_SIDEBAR_AVATAR";case o.rcl.ENTER_INSPECT_MODE:return"CLICK_SIDEBAR_PROPERTIES";case o.rcl.SET_TOOL_DEFAULT_DEV_HANDOFF:return"CLICK_TOGGLE_DEV_MODE";case o.rcl.PRESENT_AS_PROTOTYPE:return"CLICK_SIDEBAR_PROTOTYPE";case o.NLJ.COMMENTS:return"CLICK_TOOLBELT_COMMENTS";case o.NLJ.FRAME:return"CLICK_TOOLBELT_FRAME";case o.NLJ.SHAPE_RECTANGLE:return"CLICK_TOOLBELT_RECTANGLE";case o.NLJ.VECTOR_PEN:return"CLICK_TOOLBELT_PEN";case o.NLJ.TYPE:return"CLICK_TOOLBELT_TEXT";case"SELECT_COMMENT_SIDEBAR":return"SELECT_COMMENT_SIDEBAR";case"TOOLGROUP_CHEVRON":return"TOOLGROUP_CHEVRON";case"SHARE_BUTTON":return"SHARE_BUTTON";case"GOOGLE_SSO_BUTTON":return"GOOGLE_SSO_BUTTON";case"SIGN_UP_BUTTON_BANNER":return"SIGN_UP_BUTTON_BANNER";case"QUICK_ACTIONS_TOOL":return"QUICK_ACTIONS_TOOL";case"SIGN_UP_CTA_COMMENTS_PANEL":return"SIGN_UP_CTA_COMMENTS_PANEL";case"COMPONENT_INSERT":return"COMPONENT_INSERT";case"LEFT_PANEL_FILE_NAME_CHEVRON":return"LEFT_PANEL_FILE_NAME_CHEVRON";case"LEFT_PANEL_FIGMA_LOGO":return"LEFT_PANEL_FIGMA_LOGO";case"COMMENT_PIN_CLICK":return"COMMENT_PIN_CLICK";default:return"UNKNOWN_ACTION"}}(r)}),e(c.Ts({origin:"signed_out_edit",redirectUrl:l.Ay.location.pathname})),e((0,d.to)({type:u.x,data:{actionOrTool:r}}))},[e])}},921472:(e,r,n)=>{n.d(r,{Nh:()=>l,S3:()=>c,bf:()=>d,pI:()=>s});var i=n(384775),a=n(781267);function o(e){let r="insert-local-widget"===e.menuAction.type,n="run-local-plugin"===e.menuAction.type;return(0,a.qs)(e)?r?"Widgets Development":"Widgets":n?"Plugins Development":"Plugins"}function s(){return(0,i.gn)()}function l(e,r){let n=e.path;if("plugin-name"!==e.name.type)return"";let i=o(e);return s()&&r?[...n.slice(1),e.name.plugin].join(" "):[i,...n,e.name.plugin].join(" ")}function c(e){return e.submenu.find(e=>"run-menu-action"===e.type)}function d(e){let r=c(e);return r?[o(r),e.name].join(" "):e.name}},124271:(e,r,n)=>{n.d(r,{NG:()=>m,UK:()=>function e(r){let{item:n,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:m,isItemSubmenu:p}=r,h=[];if("run-menu-action"===n.type){if(n.disabled&&!l)return h;if("plugin-name"===n.name.type){if(!s.userCanRunPlugins)return h;let e=(0,d.qs)(n)?(0,a.t)("widgets.insert_widget",{widgetName:n.name.plugin}):n.name.plugin,r=[...n.path,e],i=("run-installed-plugin"===n.menuAction.type||"run-local-plugin"===n.menuAction.type)&&n.menuAction.parameterOnly,o={name:"plugins-menu-item",extensionSearchString:(0,u.Nh)(n,m),itemPath:r,itemParameterArgs:(0,c.o0)(n.menuAction),callback:()=>(0,d.Im)(s,"quick-actions",n.menuAction),menuActionType:n.menuAction.type,pluginId:"run-installed-plugin"===n.menuAction.type||"insert-installed-widget"===n.menuAction.type?n.menuAction.pluginId:void 0,pluginLocalFileId:"run-local-plugin"===n.menuAction.type||"insert-local-widget"===n.menuAction.type?n.menuAction.localFileId:void 0,disabled:n.disabled,flags:["edit"],parametersRequired:i};h.push(o)}else{if(o&&n.disabled)return h;let e={name:n.name.key,callback:()=>(0,d.Im)(s,"filemenu",n.menuAction),disabled:n.disabled,iconType:n.iconType,property:n.property,propertyValue:n.propertyValue};h.push(e)}}else if("submenu"===n.type){if((0,u.pI)()&&!m&&"manifest"===n.subtype){let r={name:"plugins-menu-item",extensionSearchString:(0,u.bf)(n),itemPath:[n.name],callback:i.lQ,submenu:n.submenu.map(r=>e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isItemSubmenu:!0})).flat()},a=(0,u.S3)(n);a&&(r.menuActionType=a.menuAction.type,"pluginId"in a.menuAction&&(r.pluginId=a.menuAction.pluginId),"localFileId"in a.menuAction&&(r.pluginLocalFileId=a.menuAction.localFileId)),h.push(r)}if(p)return h;for(let r of n.submenu){let n=e({item:r,isReadOnly:o,extensionMenuProps:s,includeDisabled:l,isSubmenuChild:!0});h.push(...n)}}return h}});var i=n(860601),a=n(939863),o=n(620604),s=n(780700),l=n(376485),c=n(875571),d=n(781267),u=n(921472);function m(e){let{extension:r,canRun:n}=e;return r.manifest.menu&&r.manifest.menu.length>0?{type:"submenu",subtype:"manifest",name:r.name,submenu:(0,o.z)(r.manifest.menu,r)}:{type:"run-menu-action",name:{type:"plugin-name",plugin:r.name},menuAction:(0,s.IK)(r),disabled:!n,isWidget:(0,l.k0)(r),path:[]}}},775664:(e,r,n)=>{n.d(r,{C1:()=>d,TI:()=>m,rC:()=>c,z5:()=>u});var i=n(568214),a=n(939863),o=n(848661),s=n(571326);class l extends s.A{constructor(e={}){super(),this.options=e}parse(e,r){let n=r?.a??1,a=(0,i.H0)(e,this.options.parseAlpha?n:void 0);if(!a)throw Error("Could not parse hex");return this.options.parseAlpha?a:(0,i.X9)(a,n)}format(e){if(!e)return"";let r=this.floatToHex(e.r),n=this.floatToHex(e.g),i=this.floatToHex(e.b);if(this.options.formatAlpha&&1!==e.a){let a=this.floatToHex(e.a);return`#${r}${n}${i}${a}`.toUpperCase()}return`#${r}${n}${i}`.toUpperCase()}formatForAndroid(e){if(1===e.a)return this.format(e);let r=this.floatToHex(e.a),n=this.floatToHex(e.r),i=this.floatToHex(e.g),a=this.floatToHex(e.b);return`#${r}${n}${i}${a}`.toUpperCase()}getIncrementTargets(e,r){let{start:n,end:i}=r,a=n===i,o={};return(n<=2||a&&3===n)&&(o.r=!0),(n<=4&&i>3||a&&5===n)&&(o.g=!0),(n<=6&&i>5||a&&7===n)&&(o.b=!0),o}getSelection(e,r){let n={start:1,end:1};return r.r?n.start=1:r.g?n.start=3:n.start=5,r.b?n.end=7:r.g?n.end=5:n.end=3,n}floatToHex(e){let r=this.normalize255(e).toString(16);return 1===r.length&&(r="0"+r),r}}class c extends l{constructor(e={}){super(e)}format(e,{withAlpha:r=!1,showDot:n=!1}={}){let i=this.floatToHex(e.r),a=this.floatToHex(e.g),o=this.floatToHex(e.b),s=this.floatToHex(e.a),l=(100*e.a).toLocaleString("en",{maximumFractionDigits:2})+"%";return r?n?`${i}${a}${o} \xb7 ${l}`.toUpperCase():`${i}${a}${o}${s}`.toUpperCase():`${i}${a}${o}`.toUpperCase()}getIncrementTargets(e,r){let{start:n,end:i}=r,a=n===i,o={};return(n<=1||a&&2===n)&&(o.r=!0),(n<=3&&i>2||a&&4===n)&&(o.g=!0),(n<=5&&i>4||a&&6===n)&&(o.b=!0),o}getSelection(e,r){let n={start:1,end:1};return r.r?n.start=1:r.g?n.start=3:n.start=5,r.b?n.end=7:r.g?n.end=5:n.end=3,n.start-=1,n.end-=1,n}}class d extends c{constructor(e={}){super(e)}parse(e,r){return"auto".startsWith(e.toLowerCase())?o.Q8:super.parse(e,r)}format(e){return e?(0,o.gl)(e)?(0,a.t)("fullscreen.mixed"):(0,o.SX)(e)?(0,a.t)("fullscreen.properties_panel.stack_panel.auto"):super.format(e):""}clamp(e){return(0,o.SX)(e)?e:super.clamp(e)}}let u=new l;new l({parseAlpha:!0,formatAlpha:!0});let m=new c;new d},973149:(e,r,n)=>{n.d(r,{GW:()=>T,KD:()=>h,LN:()=>v,LS:()=>p,Lk:()=>_,NB:()=>E,PZ:()=>f,X9:()=>w,cu:()=>S,f0:()=>b,h7:()=>C,k$:()=>g,mz:()=>L,o1:()=>A,t6:()=>I,wf:()=>N});var i=n(561546),a=n(543509),o=n(3360),s=n(776250),l=n(127285),c=n(553716),d=n(939863),u=n(848661),m=n(287010);class p extends Error{constructor(e,r){super(`${e}: ${JSON.stringify(r)}`),this.errorInfo=r}}class h{constructor(e={}){this.options=e,this.allowedUnits=""}format(e){return`${e}`}parse(e,r){e=this.preProcessForExpressionEvaluation(e);let n=(0,l.O4)(e,r);if(null!==n.value&&isFinite(n.value))return n.value;throw(0,c.Lo)("NumberFormatter::parse","Could not parse input",{str:e,currentValue:r}),new p("Could not parse input",n.error)}onParseThrow(e,r){if(e instanceof p&&e.errorInfo)return this.options.onEvaluateExpressionError?.(e.errorInfo,r)}getNudgeAmount(e){return e?this.bigNudgeAmount():this.smallNudgeAmount()}incrementBy(e,r){return e+r}clamp(e){return(0,a.KY)(e,this.min(),this.max())}min(){return this.options.min??this.defaultMin}max(){return this.options.max??this.defaultMax}smallNudgeAmount(){return this.options.smallNudgeAmount??m.bA}bigNudgeAmount(){return this.options.bigNudgeAmount??m._q}preProcessForExpressionEvaluation(e){return e.replace(RegExp(this.allowedUnits,"g"),"").replace(/[\u0660-\u0669]/g,e=>"\u0660\u0661\u0662\u0663\u0664\u0665\u0666\u0667\u0668\u0669".indexOf(e).toString()).replace(/[\u06F0-\u06F9]/g,e=>"\u06F0\u06F1\u06F2\u06F3\u06F4\u06F5\u06F6\u06F7\u06F8\u06F9".indexOf(e).toString()).replace(/\u066B/g,",").replace(/\u066C/g,",").replace(/\u060C/g,",")}}class _ extends h{constructor(e){super(e),this.floatingPointFormat=e.floatingPointFormat}format(e){if(null==e)return"";let r=String(parseFloat(e.toFixed(2))),n=r.includes(".");return this.floatingPointFormat&&n&&r.length-1>this.floatingPointFormat.maxNumDigits?String(parseFloat(e.toFixed(1))):r}parse(e,r){return/[0-9]+\,[0-9]+/g.test(e)&&(0,s.sx)("editor-parsing-float-input-with-comma",{input:e}),super.parse(e,r)}}class g extends h{format(e){return null==e?"":String(new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0,currencyDisplay:"code"}).format(e).replace("USD","").trim())}parse(e,r){return parseFloat(super.parse(e,r).toFixed(0))}}class f{constructor(e){this.pixelFormatter=new _(e),this.allowEmpty=!!e.allowEmpty,this.allowUnformatted=!!e.allowUnformatted}parse(e,r){e=e.trim().toLocaleLowerCase();let n=(0,d.t)("fullscreen.auto").toLocaleLowerCase();return(!this.allowEmpty||e.length)&&n.startsWith(e)?u.Q8:this.pixelFormatter.parse(e,r)}format(e){if((0,u.SX)(e))return(0,d.t)("fullscreen.properties_panel.stack_panel.auto");if(this.allowUnformatted)try{return this.pixelFormatter.format(e)}catch{return e}return this.pixelFormatter.format(e)}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.incrementBy(e,r)}clamp(e){return(0,u.SX)(e)?u.Q8:this.pixelFormatter.clamp(e)}}class E{constructor(e){this.pixelFormatter=new _(e)}parse(e,r){let n=new RegExp(/[^\,\s]*(\s*[+\-*\/\^]\s*[^\,\s]*)*/g),i=e.match(n);return i?i.filter(e=>e.length).map((e,n)=>{let i=this.pixelFormatter.parse(e,r&&r[n]);if(!isFinite(i))throw Error("could not parse padding input");return i}).map(e=>Math.max(e,0)):[]}format(e){return null==e?"":(0,i.Ef)(e)?this.pixelFormatter.format(e[0]):e.map(e=>this.pixelFormatter.format(e)).join(", ")}getNudgeAmount(e){return this.pixelFormatter.getNudgeAmount(e)}incrementBy(e,r,n){return e.map((e,i)=>!n||n[i]?this.pixelFormatter.incrementBy(e,r):e)}clamp(e){return e.map(e=>this.pixelFormatter.clamp(e))}snap(e,r){return e.map(e=>(0,a.YE)(e,r))}isEqual(e,r){return(0,i.lu)(e,r)}getIncrementTargets(e,{start:r,end:n}){let i={};if(0===r&&n>=e.length)return null;let a=r===n;if(a&&r>=e.length)return{[e.split(",").length-1]:!0};let o=0;for(let s=0,l=e.length;s<l;++s){let l=","===e[s];if(a){if(s===r)return{[o]:!0};l&&++o}else if(l&&++o,r<=s&&s<n&&(i[o]=!0),s>=n)break}return i}getSelection(e,r){let n;let i=Object.keys(r).map(Number),a=e.length,o=0;for(let r=0,s=e.length;r<s;++r){if(","===e[r]){++o;continue}if(i.includes(o)){if(null==n){if(/[\s,]/.test(e[r]))continue;n=r}for(;r<s&&/[^,]/.test(e[r]);)++r;a=r,--r}}return{start:n??0,end:a}}}var y=(e=>(e[e.SECONDS=0]="SECONDS",e[e.MILLISECONDS=1]="MILLISECONDS",e))(y||{});class b extends h{constructor(e,r=!1,n=!0){super({min:0,max:e,smallNudgeAmount:1,bigNudgeAmount:10}),this.allowedUnits="s",this.displayFractions=!1,this.padMinutes=!0,this.displayFractions=r,this.padMinutes=n}parse(e,r){if(e.includes(":")){let n=e.split(":");if(n.length>3)throw Error("Format must match HH:MM:SS");let[i,a,o]=n.reverse().map(e=>e.trim()),s=i?super.parse(i,r):0,l=a?super.parse(a,r):0,c=o?super.parse(o,r):0,d=![l,c].every(Number.isInteger),u=!this.displayFractions&&!Number.isInteger(s);if(d||u)throw Error("Cannot have fractional parts in timestamp");return 3600*c+60*l+s}let[n,i]=e.split(".",2),a=`${n.slice(-6,-4)}:${n.slice(-4,-2)}:${n.slice(-2)}`,o=i?`${a}.${i}`:a;return this.parse(o)}format(e){if(null==e)return"";let r=Math.floor(e/3600);e%=3600;let n=`${Math.floor(e/60)}`;this.padMinutes&&(n=n.padStart(2,"0")),e%=60;let i=this.displayFractions?e:Math.floor(e),a=Number.isInteger(i)?i:i.toFixed(2),o=Number.isInteger(i)?`${i}`.padStart(2,"0"):`${a}`.padStart(5,"0");return r?`${r}:${n}:${o}`:`${n}:${o}`}}class v extends h{constructor({decimals:e,hidePercentSign:r,...n}={}){super(n),this.allowedUnits="%|px",this.defaultMin=0,this.defaultMax=1,this.decimals=2,this.hidePercentSign=!1,null!=e&&(this.decimals=e),null!=r&&(this.hidePercentSign=r)}format(e){if(null==e)return"";let r=`${parseFloat((100*e).toFixed(this.decimals))}`;return this.hidePercentSign||(r+="%"),r}parse(e,r){return super.parse(e,null!=r?100*r:void 0)/100}getNudgeAmount(e){return e?.1:.01}}class I extends h{constructor(){super(...arguments),this.defaultMin=0,this.defaultMax=1}format(e){return null==e?"":`${parseFloat(e.toFixed(2))}`}}class T extends h{constructor(){super(...arguments),this.allowedUnits="%",this.defaultMin=1,this.defaultMax=95}format(e){return null==e?"":`${e}%`}}class S extends h{constructor(e={}){super((0,o.b$)({smallNudgeAmount:-1,bigNudgeAmount:-15},e)),this.allowedUnits="\xb0|px"}format(e){return null==e?"":(-180==(e=(e+180+360)%360-180)&&(e=180),`${parseFloat(e.toFixed(2))}\xb0`)}}class w extends h{constructor(){super(...arguments),this.allowedUnits="px"}parse(e,r){return Math.round(super.parse(e,r))}}class A extends h{constructor(e={}){super(e),this.normalizeFactor=e.normalizeFactor||1}parse(e,r){return super.parse(e,r)/this.normalizeFactor}format(e){let r=e*this.normalizeFactor;return`${Math.round(r)}`}getNudgeAmount(e){return e?10/this.normalizeFactor:1/this.normalizeFactor}}class C{constructor(e){this.min=e.min,this.max=e.max,this.bigPixelNudgeAmount=e.bigPixelNudgeAmount||m._q,this.smallPixelNudgeAmount=e.smallPixelNudgeAmount||m.bA,this.bigPercentageNudgeAmount=e.bigPercentageNudgeAmount||10,this.smallPercentageNudgeAmount=e.smallPercentageNudgeAmount||1}static parse(e){let r=-1!==e.indexOf("%")?"PERCENT":-1!==e.indexOf("px")?"PIXELS":void 0;e=(e=e.toLowerCase()).replace(RegExp("%|px","g"),"");let n=(0,l.O4)(e,NaN);if(null!==n.value&&isFinite(n.value))return[n.value,r]}parse(e,r){let n=C.parse(e);if(void 0===n)throw Error("Could not parse input");let[i,a]=n;return void 0===a&&(a=null==r?"PERCENT":r.units),{value:i,units:a}}format(e){if(null==e||e.value!=e.value)return"";let r=parseFloat(e.value.toFixed(2));return"PERCENT"===e.units?`${r}%`:`${r}px`}getNudgeAmount(e,r){return e?"PIXELS"===r.units?this.bigPixelNudgeAmount:this.bigPercentageNudgeAmount:"PIXELS"===r.units?this.smallPixelNudgeAmount:this.smallPercentageNudgeAmount}incrementBy(e,r){return{value:e.value+r,units:e.units}}clamp(e){return{value:(0,a.KY)(e.value,this.min,this.max),units:e.units}}snap(e,r){return{value:(0,a.YE)(e.value,r),units:e.units}}isEqual(e,r){return e.units===r.units&&e.value===r.value}}let N=new C({bigPixelNudgeAmount:m._q,smallPixelNudgeAmount:m.bA});class L{constructor(){this.MAX_SCALE=1024,this.MAX_SIZE=32768}parse(e){let r=(e=e.toLowerCase()).includes("w")?"CONTENT_WIDTH":e.includes("h")?"CONTENT_HEIGHT":"CONTENT_SCALE";e=e.replace(/x|w|h/g,"");let n=(0,l.O4)(e);if(null!==n.value&&isFinite(n.value))return{value:n.value,type:r};throw new p("Could not parse input",n.error)}format(e){if(null==e)return"";let r=parseFloat(e.value.toFixed(2));switch(e.type){case"CONTENT_SCALE":return`${r}x`;case"CONTENT_WIDTH":return`${r}w`;case"CONTENT_HEIGHT":return`${r}h`}}getNudgeAmount(e){return e?1:.5}incrementBy(e,r){return{value:(0,a.YE)(e.value+r,r),type:e.type}}clamp(e){let r=e.value;return(r=Math.min(r,"CONTENT_SCALE"===e.type?this.MAX_SCALE:this.MAX_SIZE))<=0&&(r=1),{value:r,type:e.type}}snap(e,r){return{value:(0,a.YE)(e.value,r),type:e.type}}isEqual(e,r){return e.type===r.type&&e.value===r.value}}},723081:(e,r,n)=>{n.d(r,{D:()=>m,VG:()=>v,Xi:()=>E,ZB:()=>u,_r:()=>c,cP:()=>h,el:()=>_,js:()=>f,mj:()=>g,qj:()=>p,ro:()=>d});var i=n(140593),a=n(572304);n(157663);var o=n(966712),s=n(939863),l=n(848661);n(973149);class c{constructor(){this.format=e=>e?e.replace(/_/g," ").toLowerCase().replace(/^./g,e=>e.toUpperCase()):""}}class d{constructor(){this.format=e=>{switch(e){case"PASS_THROUGH":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.pass_through");case"NORMAL":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.normal");case"DARKEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.darken");case"MULTIPLY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.multiply");case"LINEAR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_burn");case"COLOR_BURN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_burn");case"LIGHTEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.lighten");case"SCREEN":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.screen");case"LINEAR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.linear_dodge");case"COLOR_DODGE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color_dodge");case"OVERLAY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.overlay");case"SOFT_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.soft_light");case"HARD_LIGHT":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hard_light");case"DIFFERENCE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.difference");case"EXCLUSION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.exclusion");case"HUE":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.hue");case"SATURATION":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.saturation");case"COLOR":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.color");case"LUMINOSITY":return(0,s.t)("fullscreen.properties_panel.color_picker.blend_mode_select.luminosity");default:return""}}}}class u{constructor(e){this.getPaint=e,this.format=e=>{switch(e){case"SOLID":return(0,s.t)("fullscreen.properties_panel.solid");case"VIDEO":return(0,s.t)("fullscreen.properties_panel.video");case"IMAGE":return null!=this.getPaint().animatedImage?(0,s.t)("fullscreen.properties_panel.gif"):(0,s.t)("fullscreen.properties_panel.image");case"GRADIENT_LINEAR":return(0,s.t)("fullscreen.properties_panel.linear");case"GRADIENT_RADIAL":return(0,s.t)("fullscreen.properties_panel.radial");case"GRADIENT_ANGULAR":return(0,s.t)("fullscreen.properties_panel.angular");case"GRADIENT_DIAMOND":return(0,s.t)("fullscreen.properties_panel.diamond");default:return""}}}}class m{constructor(){this.format=e=>{switch(e){case"FILL":return(0,s.t)("fullscreen.properties_panel.image_scale.fill");case"FIT":return(0,s.t)("fullscreen.properties_panel.image_scale.fit");case"STRETCH":return(0,s.t)("fullscreen.properties_panel.image_scale.crop");case"TILE":return(0,s.t)("fullscreen.properties_panel.image_scale.tile");default:return""}}}}class p{constructor(){this.format=e=>{switch(e){case"INNER_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.inner_shadow");case"DROP_SHADOW":return(0,s.t)("fullscreen.properties_panel.effects.drop_shadow");case"FOREGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.layer_blur");case"BACKGROUND_BLUR":return(0,s.t)("fullscreen.properties_panel.effects.background_blur");case"REPEAT":return(0,s.t)("fullscreen.properties_panel.effects.repeat");case"SYMMETRY":return(0,s.t)("fullscreen.properties_panel.effects.symmetry");default:return""}}}}class h{constructor(e){this.scene=e}hasNameForNode(e){return e===a.AD||null==e||!!this.scene.get(e)}format(e){if((0,l.gl)(e))return(0,s.t)("fullscreen.mixed");if(e===a.AD||null==e)return(0,s.t)("proto.node_name_formatter.none");let r=this.scene.get(e);return r?r.stateAbbreviatedName||r.name:(0,s.t)("proto.node_name_formatter.missing")}}class _{constructor(e){this.useNoneInsteadOfInstant=!1,this.format=e=>{if(null==e)return"";switch(e){case"INSTANT":return this.useNoneInsteadOfInstant?(0,s.t)("slides.properties_panel.slide_transition.option.none"):(0,s.t)("proto.transition_behavior.instant");case"DISSOLVE":return(0,s.t)("proto.transition_behavior.dissolve");case"PUSH":return(0,s.t)("proto.transition_behavior.push");case"MOVE":return(0,s.t)("proto.transition_behavior.move_in");case"MOVE_OUT":return(0,s.t)("proto.transition_behavior.move_out");case"SLIDE":return(0,s.t)("proto.transition_behavior.slide_in");case"SLIDE_OUT":return(0,s.t)("proto.transition_behavior.slide_out");case"SMART_ANIMATE":return(0,s.t)("proto.transition_behavior.smart_animate");case"SCROLL_ANIMATE":return(0,s.t)("proto.transition_behavior.animate")}return""},e&&(this.useNoneInsteadOfInstant=e)}}function g(e){if(!e)return"NONE";if("URL"===e.connectionType)return"OPEN_URL";if("BACK"===e.connectionType)return"GO_BACK";if("CLOSE"===e.connectionType)return"CLOSE_OVERLAY";if("INTERNAL_NODE"===e.connectionType)switch(e.navigationType){case void 0:case null:case"NAVIGATE":return"NAVIGATE_TO";case"SCROLL_TO":return"SCROLL_TO";case"OVERLAY":return"OPEN_OVERLAY";case"SWAP":return"SWAP_WITH";case"SWAP_STATE":return"SWAP_STATE_TO"}if("SET_VARIABLE"===e.connectionType)return"SET_VARIABLE";if("SET_VARIABLE_MODE"===e.connectionType)return"SET_VARIABLE_MODE";if("UPDATE_MEDIA_RUNTIME"===e.connectionType)switch(e.mediaAction){case void 0:case"PLAY":return"UPDATE_MEDIA_PLAY";case"PAUSE":return"UPDATE_MEDIA_PAUSE";case"TOGGLE_PLAY_PAUSE":return"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE";case"MUTE":return"UPDATE_MEDIA_MUTE";case"UNMUTE":return"UPDATE_MEDIA_UNMUTE";case"TOGGLE_MUTE_UNMUTE":return"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE";case"SKIP_FORWARD":return"UPDATE_MEDIA_SKIP_FORWARD";case"SKIP_BACKWARD":return"UPDATE_MEDIA_SKIP_BACKWARD";case"SKIP_TO":return"UPDATE_MEDIA_SKIP_TO"}return"CONDITIONAL"===e.connectionType?"CONDITIONAL":("NONE"===e.connectionType||console.warn("Unknown connection type",e.connectionType),"NONE")}class f{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to");case"GO_BACK":return(0,s.t)("proto.action_back");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay");case"OPEN_URL":return(0,s.t)("proto.action_open_link");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_component_property");return(0,s.t)("proto.action_set_variable");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_only");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_only");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_only");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_only");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_jump_forward");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_jump_backward");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_to_specific_time");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_video");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_video");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_forward_backward");case"CONDITIONAL":return this.isUI3&&!(0,o.kc)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else"):(0,s.t)("proto.action_conditional");default:return""}}}class E{constructor(e,r){this.isUI3=!1,this.selectionIsComponentOrInstance=!1,this.isUI3=!!e,this.selectionIsComponentOrInstance=!!r}format(e){switch(e){case"NONE":return(0,s.t)("proto.action_none_interaction");case"NAVIGATE_TO":return(0,s.t)("proto.action_navigate_to_interaction");case"OPEN_OVERLAY":return(0,s.t)("proto.action_open_overlay_interaction");case"SCROLL_TO":return(0,s.t)("proto.action_scroll_to_interaction");case"SWAP_WITH":return(0,s.t)("proto.action_swap_overlay_interaction");case"SWAP_STATE_TO":return(0,s.t)("proto.action_change_to_interaction");case"GO_BACK":return(0,s.t)("proto.action_back_interaction");case"CLOSE_OVERLAY":return(0,s.t)("proto.action_close_overlay_interaction");case"OPEN_URL":return(0,s.t)("proto.action_open_link_interaction");case"SET_VARIABLE":if((0,o.kc)().ds_variable_props_proto&&this.selectionIsComponentOrInstance)return(0,s.t)("proto.action_set_variable_or_property_interaction");return(0,s.t)("proto.action_set_variable_interaction");case"SET_VARIABLE_MODE":return(0,s.t)("proto.action_set_variable_mode_interaction");case"UPDATE_MEDIA_PLAY":return(0,s.t)("proto.action_update_media_play_interaction");case"UPDATE_MEDIA_PAUSE":return(0,s.t)("proto.action_update_media_pause_interaction");case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return(0,s.t)("proto.action_update_media_toggle_interaction");case"UPDATE_MEDIA_MUTE":return(0,s.t)("proto.action_update_media_mute_interaction");case"UPDATE_MEDIA_UNMUTE":return(0,s.t)("proto.action_update_media_unmute_interaction");case"UPDATE_MEDIA_SKIP_FORWARD":return(0,s.t)("proto.action_update_media_forward_interaction");case"UPDATE_MEDIA_SKIP_BACKWARD":return(0,s.t)("proto.action_update_media_backward_interaction");case"UPDATE_MEDIA_SKIP_TO":return(0,s.t)("proto.action_update_media_set_time_interaction");case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":return(0,s.t)("proto.action_update_media_play_pause_interaction");case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":return(0,s.t)("proto.action_update_media_mute_unmute_interaction");case"UPDATE_MEDIA_SKIP_BY_OPTIONS":return(0,s.t)("proto.action_update_media_jump_time_interaction");case"CONDITIONAL":return this.isUI3&&!(0,o.kc)().exp_proto_rename_conditional?(0,s.t)("proto.action_check_if_else_interaction"):(0,s.t)("proto.action_conditional_interaction");default:return""}}}let y=()=>(0,s.t)("proto.interaction.type.mouse_enter_deprecated"),b=()=>(0,s.t)("proto.interaction.type.mouse_leave_deprecated");class v{constructor(){this.format=e=>{if(null==e)return(0,s.t)("proto.interaction.type.none");switch(e){case"NONE":return(0,s.t)("proto.interaction.type.none");case"ON_CLICK":return(0,s.t)("proto.interaction.type.on_click");case"ON_HOVER":return(0,s.t)("proto.interaction.type.while_hovering");case"ON_PRESS":return(0,s.t)("proto.interaction.type.while_pressing");case"DRAG":return(0,s.t)("proto.interaction.type.on_drag");case"MOUSE_IN":return y();case"MOUSE_OUT":return b();case"MOUSE_ENTER":return(0,s.t)("proto.interaction.type.mouse_enter");case"MOUSE_LEAVE":return(0,s.t)("proto.interaction.type.mouse_leave");case"MOUSE_DOWN":return(0,s.t)("proto.interaction.type.mouse_down");case"MOUSE_UP":return(0,s.t)("proto.interaction.type.mouse_up");case"AFTER_TIMEOUT":return(0,s.t)("proto.interaction.type.after_delay");case"ON_KEY_DOWN":return(0,s.t)("proto.interaction.type.key_gamepad");case"ON_VOICE":return(0,s.t)("proto.interaction.type.on_voice");case"ON_MEDIA_HIT":return(0,s.t)("proto.interaction.type.when_video_hits");case"ON_MEDIA_END":return(0,s.t)("proto.interaction.type.when_video_ends");default:(0,i.xb)(e)}}}}},798099:(e,r,n)=>{n.d(r,{UE:()=>o,dG:()=>l,ft:()=>s,wo:()=>c});var i=n(563706),a=n(259927);function o(e){return e?.nodeType===1&&function(e){for(;e;){if(e.classList&&e.classList.contains(a.Dm))return!0;e=e.parentElement}return!1}(e)}function s(){return(!!i.Ay.isIpadNative||!!i.Ay.ios&&!!i.Ay.isInNativeApp)&&!!window.FigmaMobile.shouldHandleMultiTouchInFullscreen||!!i.Ay.isMeetDevice||!!i.Ay.isIpad}function l(e){e.stopPropagation()}function c(e){e.preventDefault()}},453909:(e,r,n)=>{n.d(r,{N:()=>a});var i=n(99506);function a(e){switch(e){case i.y4.WHITEBOARD:return i._Y.WHITEBOARD;case i.y4.SLIDE_TEMPLATE:return i._Y.SLIDES;default:return i._Y.DESIGN}}},13379:(e,r,n)=>{n.d(r,{i:()=>o});var i=n(563706),a=(e=>(e[e.LEFT=0]="LEFT",e[e.MIDDLE=1]="MIDDLE",e[e.RIGHT=2]="RIGHT",e[e.BACK=3]="BACK",e[e.FORWARD=4]="FORWARD",e))(a||{});function o(e){return"which"in e?3===e.which||i.Ay.mac&&1===e.which&&e.ctrlKey:"button"in e&&(2===e.button||i.Ay.mac&&0===e.button&&e.ctrlKey)}},297336:(e,r,n)=>{n.d(r,{mc:()=>o,vx:()=>a});var i=n(821910);function a(e,r){return null!==e[r]&&e[r]>0}function o(e,r){return Object.keys(e).some(n=>n in e&&!(0,i.c2)(r[n],e[n],!1))}n(848661)},74930:(e,r,n)=>{n.d(r,{B:()=>c}),n(411855);var i=n(83783),a=n(298455),o=n(178323);class s{constructor(){this.allTemplateInfo=new Set,this.nodeGUIDsToTemplate=new Map,s.instance=this}static removeInstance(){s.instance=void 0}trackNodesAsTemplate(e,r,n,i){let o=(0,a.UN)();if(Array.from(r).forEach(e=>{l(o.get(e))||r.delete(e)}),0===r.size)return;let s=Math.floor(.1*r.size),c={templateId:e,fileKey:n,nodeGUIDs:r,trackedNodeCount:r.size,deletionThreshold:s,creationMethod:i};this.allTemplateInfo.add(c),r.forEach(e=>this.nodeGUIDsToTemplate.set(e,c))}checkForTemplateNodesDeletion(e){0!==this.allTemplateInfo.size&&e.forEach(e=>this.checkForTemplateNodeDeletion(e))}checkForTemplateNodeDeletion(e){let r=this.nodeGUIDsToTemplate.get(e);if(!r)return;this.nodeGUIDsToTemplate.delete(e);let n=r.nodeGUIDs;n.delete(e),n.size<=r.deletionThreshold&&(this.stopTrackingTemplate(r),(0,o._)("template_deleted",{templateId:r.templateId,fileKey:r.fileKey,productType:"figjam",trackedNodeCount:r.trackedNodeCount,creationMethod:r.creationMethod}))}stopTrackingTemplate(e){this.allTemplateInfo.delete(e),e.nodeGUIDs.forEach(e=>this.nodeGUIDsToTemplate.delete(e))}}let l=e=>!!e&&("CANVAS"===e.type?e.visible:l(e.parentNode));async function c(e,r,n,a,{enableTracking:o=!0}={}){let l=s.instance;if(!o||!l)return await a();let d=(0,i.UP)(),u=await a(),m=new Set((0,i.UP)());return d.forEach(e=>m.delete(e)),r||="null",l.trackNodesAsTemplate(e(),m,r,n),u}},550273:(e,r,n)=>{n(572304),n(298455),n(92566)},710667:(e,r,n)=>{n.d(r,{Fq:()=>g,I8:()=>E,Ln:()=>M,SK:()=>C,cw:()=>y,ic:()=>O,jv:()=>k,vK:()=>L,vu:()=>F,yF:()=>A});var i=n(411855),a=n(966664),o=n(268853),s=n(675551),l=n.n(s),c=n(966712),d=n(391388),u=n(776621),m=n(13513),p=n(978779),h=n(540019),_=n(248361),g=(e=>(e.ADMIN_SETTINGS="admin-settings",e.FIGMA_ADMIN="figma-admin",e.ORG_CART="org-cart",e.PRO_CART="pro-cart",e.UPSELL_MODALS="upsell-modals",e.UPSELL_MODALS_CONTRACT="upsell-modals-contract",e))(g||{});function f(e){(0,u.$D)(o.e.BILLING,e,r=>(r.setExtras({error:e}),r))}h.M4.Query({fetch:()=>_.n.getCampfireRates().then(e=>e.data.meta).catch(e=>{throw f(e),e}),key:"billing_prices_campfire_rates"});let E=h.M4.Query({fetch:()=>_.n.getRates().then(e=>e.data.meta).catch(e=>{throw f(e),e}),key:"billing_prices_active_rates"}),y=h.M4.Query({fetch:e=>_.n.getContractRates(e).then(e=>e.data.meta).catch(e=>{throw f(e),e}),key:"billing_prices_contract_rates"}),b=h.M4.Query({fetch:async({planKey:e})=>{try{return(await _.n.getContractRates({planType:e.type,planParentId:e.parentId||""})).data.meta}catch(e){throw f(e),e}},enabled:({planKey:e})=>null!==e.parentId,key:"billing_prices_current_contract_rates"}),v=(h.M4.Query({fetch:async e=>{try{return(await _.n.getAdminContractRates(e)).data.meta}catch(e){throw f(e),e}},key:"billing_prices_admin_contract_rates"}),e=>{switch(e){case"admin-settings":return"billing_price_loading_admin_settings";case"figma-admin":return"billing_price_loading_figma_admin";case"org-cart":return"billing_price_loading_org_cart";case"pro-cart":return"billing_price_loading_pro_cart";case"upsell-modals":return"billing_price_loading_upsell_modals";case"upsell-modals-contract":return"billing_price_loading_upsell_modals_contract";default:return(0,u.us)(`No price loading feature flag mapped to price context "${e}". Price data will not be loaded.`),null}}),I=e=>{switch(e){case"admin-settings":return"billing_price_serving_admin_settings";case"figma-admin":return"billing_price_serving_figma_admin";case"org-cart":return"billing_price_serving_org_cart";case"pro-cart":return"billing_price_serving_pro_cart";case"upsell-modals":return"billing_price_serving_upsell_modals";case"upsell-modals-contract":return"billing_price_serving_upsell_modals_contract";default:return(0,u.us)(`No price serving feature flag mapped to price context "${e}". Price data will not be loaded.`),null}},T=e=>{let r=v(e);if(!r)return!1;let n=!!(0,c.kc)()[r];return!!(0,c.kc)().billing_price_loading_web&&n},S=e=>{let r=I(e);if(!r)return!1;let n=!!(0,c.kc)()[r];return!!(0,c.kc)().billing_price_serving_web&&n};function w(e,r){try{return e.transform(e=>l()(r,r=>(0,p.y8)(e,r)))}catch(e){return(0,u.$D)(o.e.BILLING,e),d.Qw.errorSuspendable(e,{release:()=>{}})}}function A(e,r,n,a={}){return function(e,r,n,a){let{isPriceLoadingOn:s=!1}=n,c=s&&(n.isPriceServingOn||!1);s||(a.enabled=!1);let[_]=(0,h.IT)(e,a),g=w(_,r),f=function(e){try{let r=l()(e,e=>{let r=(0,p.RI)(e);return{tier:e.tier,billable_product_key:e.billableProductKey,renewal_term:e.renewalTerm,unit:e.unit,currency:e.currency,amount:r}});return d.Qw.loadedSuspendable(r,[],{release:()=>{}})}catch(e){return(0,u.$D)(o.e.BILLING,e),d.Qw.errorSuspendable(e,{release:()=>{}})}}(r),E=f.data;return((0,i.useEffect)(()=>{if("loaded"===g.status){if(null===g.data){(0,u.$D)(o.e.BILLING,Error("Could not parity check prices. BillingPrices loaded but data was null."));return}if(null===E){(0,u.$D)(o.e.BILLING,Error("Could not parity check prices. Legacy query result data was null."));return}Object.keys(r).forEach(e=>{if(!m.dk.has(e))return;let n=r[e];if(n){let r=g.data[e],i=E[e],a=r?.amount??null,o=i?.amount??null;(0,p.ww)({serverPrice:a,legacyPrice:o,priceQuery:n})}})}},[g.status,g.data,E,r]),c)?g:f}(n,r,{isPriceLoadingOn:T(e),isPriceServingOn:S(e)},a)}function C(e,r,n={}){let i=E(null),[a]=(0,h.IT)(i,n);return w(a,e)}function N(e){let{planParentId:r,planType:n}=e;return""!==r&&!(0,a.uy)(n)}function L(e,r={}){N(e)||(r.enabled=!1),(0,c.kc)().billing_price_serving_web&&(0,c.kc)().billing_price_serving_contract_rates_currency||(r.enabled=!1);let[n]=(0,h.IT)(y(e),r);return n.transform(({product_prices:e})=>e[0]?.currency??null)}function O(e,r,n,a={}){return function(e,r,n,a,s={}){let l=N(n);return l||(s.enabled=!1),(0,i.useEffect)(()=>{l||(0,u.$D)(o.e.BILLING,Error("Invalid contract price args"),e=>(e.setExtras({args:n,priceQueries:r}),e))},[n,l,r]),A(a,r,e(n),s)}(y,e,r,n,a)}class R extends Error{}function P(e,r){let n=e[0]?.[r];if(n&&e.every(e=>e[r]===n))return n;throw new R(`Could not infer value for ${r} from price data`)}function D(e,r,n,i){try{return e.transform(e=>{if(i&&0===e.product_prices.length)return null;let a="currency"in n?n.currency:P(e.product_prices,"currency"),o="tier"in n?n.tier:P(e.product_prices,"tier");return r.dict(r=>{let i={billableProductKey:r,...n,currency:a,tier:o};return(0,p.y8)(e,i)})})}catch(e){return(0,u.$D)(o.e.BILLING,e),d.Qw.errorSuspendable(e,{release:()=>{}})}}function k(e,r,n={}){let i=E(null),[a]=(0,h.IT)(i,n);return D(a,e,r)}function M(e,r,n,i={}){let a=b({planKey:e}),[o]=(0,h.IT)(a,i);return D(o,r,n,!0)}function F(e){if("loaded"===e.status)return e;if("errors"===e.status){let r=[e.errors].flat()[0];if(r)throw r}throw Error(`Unexpected result status: ${JSON.stringify(e)}`)}},521033:(e,r,n)=>{n.d(r,{J:()=>p});var i=n(411855),a=n(188507),o=n(136880),s=n(922827),l=n(568214),c=n(428654),d=n(809831),u=n(144119),m=n(168039);function p(){let e=(0,d.ow)(),r=(0,u.sO)(),n=(0,a.d4)(e=>e.mirror.appModel.currentPage),p=(0,a.d4)(e=>e.mirror.sceneGraph?.get(n)?.backgroundColor),h=(0,m.DP)(),_=(0,i.useMemo)(()=>c.F.format(p),[p]);if(e){let e=s.DV9?.getWhiteboardCanvasColor();return e?c.F.format((0,o.aH)(e)):"#ffffff"}return r&&s.Ez5?c.F.format((0,o.aH)((0,o.R0)(s.Ez5.getFSCanvasDefaultFill()))):p?_:(0,l.Bx)(h)}},289104:(e,r,n)=>{n.d(r,{JT:()=>d});var i=n(188507),a=n(915440),o=n(30637),s=n(99506),l=n(279453),c=n(137459);function d(){let e=(0,i.d4)(e=>e.openFile?.key);if((0,o.lZ)())return(0,i.d4)(r=>{let{hubFiles:n,figFilePublishedAsHubFile:i}=r,a=e&&i[e];return a?(0,c.B4)(n[a]):null});let r=(0,a.Rs)(l.ehp,{fileKey:e||""},{enabled:!!e});if("loaded"!==r.status)return null;let n=r.data.file?.publishedHubFile;return n?.publishingStatus!==s.KB.APPROVED_PUBLIC?null:n}},835036:(e,r,n)=>{n(411855),n(188507),n(922827);var i,a=n(91408);n(44948),n(489604),n(964881),!function(e){e.CLOCKWISE="CLOCKWISE",e.COUNTERCLOCKWISE="COUNTERCLOCKWISE",e.COLLINEAR="COLLINEAR"}(i||(i={}));var o=(e=>(e.TOP="TOP",e.RIGHT="RIGHT",e.BOTTOM="BOTTOM",e.LEFT="LEFT",e.UNKNOWN="UNKNONWN",e))(o||{}),s=(e=>(e.TOP_LEFT="TOP_LEFT",e.TOP="TOP",e.TOP_RIGHT="TOP_RIGHT",e.RIGHT="RIGHT",e.BOTTOM_RIGHT="BOTTOM_RIGHT",e.BOTTOM="BOTTOM",e.BOTTOM_LEFT="BOTTOM_LEFT",e.LEFT="LEFT",e.OVERLAP="OVERLAP",e))(s||{});n(617453),n(100197),n(507956);var l=n(930269);(0,a.jz)(l.leftNavLeftMarginUI3),(0,a.jz)(l.propertiesPanelRightMarginUI3)},809831:(e,r,n)=>{n.d(r,{E3:()=>h,Em:()=>p,HW:()=>d,JV:()=>f,XE:()=>c,iq:()=>u,lg:()=>l,my:()=>g,ow:()=>m,pQ:()=>_,u8:()=>E});var i=n(188507),a=n(529928),o=n(99506),s=n(239671);function l(){return(0,i.d4)(e=>{var r;return(r=e.selectedView)&&"fullscreen"===r.view?(0,s.oD)(r.editorType):o._Y.DESIGN})}function c(e){return e&&"fullscreen"===e.view?e.editorType:s.nT.Design}function d(){return(0,i.d4)(e=>"prototype"===e.selectedView.view)}function u(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view)}function m(){return l()===o._Y.WHITEBOARD}function p(){return l()===o._Y.DESIGN}function h(){return(0,i.d4)(_)}function _(e){let r=e.selectedView;return"fullscreen"!==r.view?s.nT.Design:r.editorType}function g(){return(0,i.d4)(e=>f(e.selectedView))}function f(e){return"fullscreen"!==e.view?null:e.editorType}let E=(0,a.bt)(e=>f(e.selectedView))},984472:(e,r,n)=>{n.d(r,{Ol:()=>l,xy:()=>s});var i=n(411855);n(86538);var a=n(809831),o=n(215822);function s(e,r){let n=(0,a.my)();return(0,i.useMemo)(()=>(0,o.NW)(n,e,r),[n,r,e])}function l(e){let r=(0,a.my)();return(0,i.useMemo)(()=>(0,o.AG)(r,e),[r,e])}n(507956)},151166:(e,r,n)=>{n(188507),n(511617),n(737947),n(761870),n(939863),n(662275),n(880671),n(601538)},198371:(e,r,n)=>{n.d(r,{$D:()=>p,DG:()=>m,dk:()=>h});var i=n(411855),a=n(188507),o=n(716034),s=n(418956),l=n(915440),c=n(279453),d=n(479296);let u=(0,o.eU)(null),m=(0,d.D)((e,r=!1)=>{let n=(0,l.Rs)(c.JKh,{fileKey:e},{enabled:!!e});return(0,i.useMemo)(()=>"loaded"!==n.status?r?{enabled:!0,until:new Date,id:"fallback"}:{enabled:!1}:n.data.figFileWorkshopMode&&new Date<n.data.figFileWorkshopMode.expiresAt?{enabled:!0,until:n.data.figFileWorkshopMode.expiresAt,id:n.data.figFileWorkshopMode.id}:{enabled:!1},[n,r])});function p(e=!1){return function(e=!1){let r=(0,a.d4)(e=>e.openFile);return m(r?.key||"",e)}(e).enabled}function h(e){let r=s.zl.get(u);return!!e&&!!r&&new Date<r&&!e.isTryFile}},480952:(e,r,n)=>{n.d(r,{V:()=>m}),n(411855),n(188507);var i=n(302245);n(794272),n(845263),n(103907);var a=n(950255),o=n(12493);n(678340);var s=n(335682);n(417908);var l=n(428467);n(284321);var c=n(984968),d=n(279145);n(636227),n(963067),n(261607);let u=(0,i.Mz)([s.tB,l.getPermissionsStateMemoized,e=>e.selectedView.editorType,e=>e.mirror.appModel.topLevelMode,e=>e.mirror.appModel.multiplayerSessionState,e=>(0,c.ZT)(e)||null,(e,r)=>r],(e,r,n,i,a,s,l)=>(0,o.gW)(e,r,n,l.warningLevel,i,a,l.isRecovery,s,l.isUserInLimitedSpace,l.isBillingRemodelEnabled));function m(e,{fullscreenMemoryWarningLevel:r,unreadCommentCount:n,pluginAndWidgetMenuArgs:i,isRecovery:u,isUserInLimitedSpace:m,isPublishingModalDisabled:p,isBillingRemodelEnabled:h}){let _=(0,c.ZT)(e)||null;return(0,a.p)({fileMenuArgs:{branchingActionsStatus:(0,o.gW)((0,s.tB)(e),(0,l.getPermissionsState)(e),e.selectedView.editorType,r,e.mirror.appModel.topLevelMode,e.mirror.appModel.multiplayerSessionState,u,_,m,h),saveAsState:e.saveAsState,topLevelMode:e.mirror.appModel.topLevelMode,unreadCommentCount:n,isOrgMember:(0,l.canMemberOrg)(e.currentUserOrgId,e),shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:i,theme:e.theme.themePreference,backToFileArgs:{shouldShowBackToFiles:!1},zoomArgs:{canZoomIn:(0,d.Yh)(e.mirror.appModel,"zoom-in"),canZoomOut:(0,d.Yh)(e.mirror.appModel,"zoom-out")},publishingModalArgs:{isPublishingModalDisabled:p}})}(0,i.Mz)([u,e=>e.saveAsState,e=>e.mirror.appModel.topLevelMode,(e,r)=>r],(e,r,n,i)=>({branchingActionsStatus:e,saveAsState:r,topLevelMode:n,unreadCommentCount:i.unreadCommentCount,isOrgMember:i.isOrgMember,shouldShowSlideConversionEntrypoint:i.shouldShowSlideConversionEntrypoint}))},818:(e,r,n)=>{n.d(r,{b:()=>c}),n(411855);var i=n(138369);n(617453);var a=n(860178),o=n(69961),s=n(239671),l=n(809831);function c(){let e=(0,l.my)(),r=e===s.nT.Design||e===s.nT.Illustration,n=e===s.nT.DevHandoff,c=e===s.nT.Slides,d=e===s.nT.Sites,u=e===s.nT.Cooper,m=(0,a.iZ)(),p=(0,i.Kf)({isDesign:r,isUnauth:!m}),h=(0,o.o3)(o.nt.ui3InsetEditor)&&!p();return(!!r||!!n||!!c||!!d||!!u)&&h}},877645:(e,r,n)=>{n.d(r,{v:()=>c});var i=n(411855);n(841563);var a=n(915440),o=n(420576),s=n(279453),l=n(971646);function c(e){let r=(0,a.Rs)(s.ZzU,{figFileKey:null!=e?(0,o.Kz)(e)?e.sourceFileKey:e.key:""},{enabled:null!=e});return i.useMemo(()=>{if("loaded"!==r.status)return;let e=r.data?.figFileLinkExpirationConfig,n=r.data?.file;if(!e)return;let i=(0,l.d4)(e);return{file:n,accessReverted:!!e.accessReverted,expiresAt:e.expiresAt?.toISOString(),activeExpiration:i?.toISOString()}},[r])}},475820:(e,r,n)=>{n.d(r,{cQ:()=>a}),n(268853),n(711525),n(776621),n(864319),n(99506),n(709290),n(679892);let i=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,9})?Z?$/;function a(e,r,n=()=>!1,i){let o=[],l=[],c={},d=r.reduce((e,r)=>(e.set(r[i],r),e),new Map),u=e.reduce((e,r)=>(e.set(r[i],r),e),new Map);for(let r of e){let e=r[i],a=d.get(e);if(a){let o=s(r,a,n,[],"",e);o.length&&(c[r[i]]=o)}else o.push(e);d.delete(r[i])}for(let e of d.values()){let r=e[i],a=u.get(r);if(a){let i=s(a,e,n,[],"",r);i.length&&(c[r]=i)}else l.push(r)}return{lgMissingIds:o,lgExtraIds:l,differences:c}}function o(e){return"object"==typeof e&&null!==e}function s(e,r,n,a,l,c){if(Array.isArray(e)||Array.isArray(r)){if(!Array.isArray(e)||!Array.isArray(r))return a.push({id:c,key:l,sinatraValue:e,lgValue:r}),a;let i=Math.max(e.length,r.length);for(let d=0;d<i;d++){let i=e[d],u=r[d];if(o(i)&&o(u)){s(i,u,n,a,`${l}[${d}]`,c);continue}i!==u&&a.push({id:c,key:`${l}[${d}]`,sinatraValue:i,lgValue:u})}return a}for(let d of new Set([...Object.keys(e),...Object.keys(r)])){if(n(d))continue;let u=e[d],m=r[d],p=l?`${l}.${d}`:d;if(o(u)&&o(m)){s(u,m,n,a,p,c);continue}d.endsWith("_at")&&"string"==typeof u&&"string"==typeof m&&i.test(u)&&i.test(m)&&u?.substring(0,17)===m?.substring(0,17)||u===m||a.push({id:c,key:p,sinatraValue:u,lgValue:m})}return a}},731130:(e,r,n)=>{n(411855),n(188507),n(776250),n(966712),n(915440),n(743282),n(279453),n(643067)},892677:(e,r,n)=>{n(38329);var i=n(418956),a=n(716034),o=n(915440);n(711525),n(195847);var s=n(335682);n(860178);var l=n(279453),c=n(479296);n(151166),(0,c.D)(()=>{let e=(0,i.md)(s.ze);return(0,o.Rs)(l.jmg,{fileKey:e||""},{enabled:!!e})}),(0,a.eU)(!1)},529982:(e,r,n)=>{n.d(r,{z:()=>o});var i=n(411855),a=n(561546);function o(e,r,n){let[o,s]=i.useState(e),l=i.useCallback(e=>{s({columnName:e,isReversed:o.columnName===e&&!o.isReversed})},[o.columnName,o.isReversed]),c=i.useMemo(()=>{let e=[...r],i=n.find(e=>e.name===o.columnName);return i&&i.getSortValue&&function(e,r,n){if(!r.getSortValue)return;let i=n.isReversed,o=i;r.sortReversed&&(i=!i),r.sortSecondaryReversed&&(o=!o),r.sortNumerically?(0,a.hR)(e,r.getSortValue,i,r.getSecondarySortValue,o):(0,a.v7)(e,r.getSortValue,{isDescending:i,isSecondaryDescending:o},r.getSecondarySortValue)}(e,i,o),e},[n,r,o]);return[o,l,c]}},963067:(e,r,n)=>{n.d(r,{Cb:()=>l,U5:()=>c,Yo:()=>s.Yo,yy:()=>d});var i=n(188507);n(207286);var a=n(694687),o=n(99506),s=n(697551);function l(){let e=(0,a.sZ)();return(0,i.d4)(r=>{let n=e&&r.orgUsersByOrgId[e.id];return n&&n[r.user.id]?.permission===o._D.GUEST})}function c(){let e=(0,a.sZ)(),r=(0,i.d4)(r=>e&&r.orgUsersByOrgId[e.id][r.user.id]?.permission);return r&&r!==o._D.GUEST}function d(){return(0,i.d4)(e=>e.openFile?.parentOrgId&&e.orgById[e.openFile.parentOrgId]||void 0)}},6949:(e,r,n)=>{n.d(r,{LQ:()=>s,ar:()=>o}),n(411855),n(188507),n(841563),n(776250),n(966159),n(157663),n(358145),n(733556),n(456772),n(130097),n(915440),n(711525),n(586459),n(743282),n(881388),n(939863),n(411045),n(581063),n(783162),n(193360),n(582410),n(720647),n(99506),n(279453),n(296796),n(912458),n(227544);var i=n(596607);n(916525),n(66037),n(679892),n(475820);class a extends null{}function o(e,r){return!!(e&&r)}function s(e){var r;let n=(0,i.xw)(e);return!!((r=e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null)&&r.are_custom_templates_allowed&&n)}},884484:(e,r,n)=>{n.d(r,{NV:()=>S,OX:()=>T,Pt:()=>w,qi:()=>N,qu:()=>C,x2:()=>A});var i=n(188507),a=n(140593),o=n(939863),s=n(545941),l=n(71425),c=n(57879),d=n(662275),u=n(483990),m=n(813648),p=n(860178),h=n(4564),_=n(215822),g=n(555328),f=n(813408),E=n(376485),y=n(749449),b=n(180881),v=n(562432),I=n(774620);function T(e){let r;let n=(0,i.wA)(),a=(0,p.TA)();if(!e||a!==e.creator.id)return null;if((0,s.AC)(e))r=(0,o.t)("community.plugins.cancel_review");else if((0,g.m3)(e)){if((0,s.Pg)(e))return null;r=(0,o.t)("community.resource.delist")}else r=(0,o.t)("community.resource.unpublish");return{displayText:r,callback:()=>{n((0,d.to)({type:b.H,data:{plugin:e},showModalsBeneath:!0}))}}}function S(e,r){let n=(0,i.wA)(),a=(0,m.LR)(),{close:s}=(0,v.cq)(),l=e&&!e.error?r?(0,o.t)("community.plugins.publish_new_version"):(0,o.t)("community.resource.publish"):r?r.is_widget?(0,o.t)("community.plugins.edit_resource_details.widget"):(0,o.t)("community.plugins.edit_resource_details.plugin"):void 0;return l?{displayText:l,callback:()=>{a(),s(),n((0,c.r)({localFileId:e?.localFileId,publishedPluginId:r?.id,entryPoint:f.k2.EDITOR}))}}:null}function w(e,r){let n=(0,i.wA)();if(!e||!r)return null;switch(e){case E.ho.LOAD:return{action:()=>{let e=r.localFileId;n((0,l.JZ)({resourceType:(0,E.k0)(r)?"widget":"plugin",localFileIdToRemove:e}))},msg:(0,o.t)("universal_insert.missing_manifest"),buttonText:(0,o.t)("universal_insert.locate"),displayText:(0,o.t)("universal_insert.locate_missing_manifest")};case E.ho.VALIDATE:case E.ho.PARSE:return{action:()=>{n((0,d.to)({type:I.K,data:{localPlugin:r}}))},msg:(0,o.t)("universal_insert.manifest_error"),buttonText:(0,o.t)("universal_insert.see_details"),displayText:(0,o.t)("universal_insert.manifest_error_view")};default:(0,a.xb)(e)}}function A(e,r,n){let a=(0,i.wA)(),{close:s}=(0,v.cq)();return{displayText:(0,o.t)("universal_insert.manage_permissions"),callback:()=>{n&&n(),s();let i=e&&(0,E.ZQ)(e)?e.localFileId:void 0;a((0,c.r)({localFileId:i,publishedPluginId:r?.id,initialTab:y.KM.PERMISSIONS,entryPoint:f.k2.EDITOR}))}}}function C(e){let r=(0,h.M)();return e?{displayText:(0,u.A)((0,_.YQ)()),callback:()=>{r&&r.openExtensionDirectory(e.localFileId)}}:null}function N(e,r){return{displayText:e?(0,o.t)("universal_insert.remove_local_version"):(0,o.t)("universal_insert.remove"),callback:r}}},964197:(e,r,n)=>{n.d(r,{a:()=>l});var i=n(411855),a=n(915440),o=n(279453);let s=(e,r,n)=>{let s=(0,a.Rs)(o.i1D,{orgId:e},{enabled:!!e});return i.useMemo(()=>{if("loaded"===s.status){let e=s.data?.currentUser?.baseOrgUser?.pluginRequests;if(e)return e.filter(e=>{let i=n?e.workspaceId===n:!!e.workspaceId==!!n;return e.pluginId===r&&i})}return[]},[s,n,r])};function l(e,r,n){return s(e,r,n).filter(e=>"pending"===e.status).length>0}},780700:(e,r,n)=>{n.d(r,{Bi:()=>O,Gt:()=>N,IK:()=>R,RK:()=>A,dR:()=>D,ee:()=>L,hN:()=>P});var i=n(411855),a=n(188507),o=n(268853),s=n(794272),l=n(418956),c=n(776621),d=n(979385),u=n(785315),m=n(370934),p=n(693897),h=n(738269),_=n(750425),g=n(781267),f=n(809831),E=n(697551),y=n(147206),b=n(215822),v=n(239671),I=n(376485),T=n(16774),S=n(756085);function w(){let e=(0,f.E3)(),{orgEntity:r,org:n,openFile:a,isReadOnly:o,userCanRunPlugins:l,activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}=(0,s.R)(e=>({orgEntity:(0,E.Jl)(e),org:e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null,openFile:e.openFile,isReadOnly:e.mirror.appModel.isReadOnly,userCanRunPlugins:(0,y.GP)(e),activeTextReviewPlugin:e.mirror.appModel.activeTextReviewPlugin,publishedPlugins:e.publishedPlugins,publishedWidgets:e.publishedWidgets})),m=(0,S.$1)();return i.useMemo(()=>({openFile:a,localExtensions:m,orgEntity:r,org:n,isReadOnly:o,userCanRunPlugins:l,editorType:e,allSavedPlugins:{},activeTextReviewPlugin:c,publishedPlugins:d,publishedWidgets:u}),[a,m,r,n,o,l,e,c,d,u])}function A(e){let r=(0,S.Be)(),n=r.plugins[e]||r.orgPlugins[e],i=(0,S.cW)()[e];return n||(i?(0,b.Ar)(i):null)}function C(e){return{type:"run-installed-plugin",pluginId:e.plugin_id,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function N(e,r){let n=A(e),s=w(),p=(0,T.b)(),h=(0,d.gB)(),_=(0,a.Pj)(),[f,E]=(0,l.fp)(u.H);return i.useCallback(e=>{if(!n){console.error("Plugin version not found"),(0,c.$D)(o.e.EXTENSIBILITY,Error("Plugin version not found"));return}let i=C(n);if((0,b.YG)(n)&&k(_),(0,b.mx)(n)){h((0,m.$n)(n)),k(_),E(u._.PRIMARY);return}(0,g.Im)({...s,allSavedPlugins:{[n.plugin_id]:n}},r,e||i),p()},[n,s,r,p,_,h,E])}function L(e){return{type:"insert-local-widget",localFileId:e.localFileId,command:void 0}}function O(e){return{type:"insert-installed-widget",pluginId:e.plugin_id,command:void 0}}function R(e){return(0,I.ZQ)(e)?(0,I.k0)(e)?L(e):P(e):(0,I.k0)(e)?O(e):C(e)}function P(e){return{type:"run-local-plugin",localFileId:e.localFileId,command:void 0,parameterOnly:e.manifest.parameters&&!1!==e.manifest.parameterOnly,parameterEntry:(0,_.c)(e.manifest.parameters,e.name)}}function D(e,r){let n=w(),o=Object.values((0,S.$1)()).find(r=>r.plugin_id===e),s=(0,T.b)(),c=(0,d.gB)(),p=(0,a.Pj)(),[h,_]=(0,l.fp)(u.H);return i.useCallback(e=>{if(!o){console.error("Plugin not found");return}let i=P(o);if((0,b.YG)(o)&&k(p),(0,b.mx)(o)){c((0,m.$n)(o)),k(p),_(u._.PRIMARY);return}(0,g.Im)(n,r,e||i),s()},[o,n,r,s,p,c,_])}function k(e){let{selectedView:r}=e.getState();"fullscreen"===r.view&&r.editorType===v.nT.Design&&(e.dispatch(h.$T({...r,view:"fullscreen",editorType:v.nT.DevHandoff})),(0,p.Ym)(e.getState(),v.nT.DevHandoff,"plugin_run"))}},756085:(e,r,n)=>{n.d(r,{$1:()=>M,B7:()=>V,Be:()=>j,F1:()=>ep,JI:()=>eu,N3:()=>H,S0:()=>es,U6:()=>eo,Ud:()=>G,WK:()=>F,YN:()=>ed,YW:()=>Z,ZT:()=>U,_P:()=>q,b4:()=>et,cW:()=>x,j1:()=>eh,j8:()=>el,ll:()=>ea,mf:()=>K,op:()=>e_,qr:()=>J,tB:()=>er});var i=n(411855),a=n(188507),o=n(821910),s=n(268853),l=n(889012),c=n.n(l);n(776250);var d=n(794272),u=n(966712),m=n(915440);n(395900);var p=n(776621);n(553716);var h=n(939863),_=n(321476),g=n(392592);n(545941),n(971120);var f=n(956143),E=n(941381),y=n(809831);n(258237);var b=n(641638),v=n(29680);n(737499);var I=n(335682),T=n(694687),S=n(860178),w=n(99506),A=n(279453),C=n(336599),N=n(147206),L=n(215822),O=n(239671),R=n(376485);n(508567);var P=n(507956),D=n(984472),k=n(720289);function M(e){let r=(0,a.d4)(e=>e.localPlugins);return(0,D.xy)(r,e)}function F(e){return Object.values(M()).find(r=>r.plugin_id===e)}function x(){let e=(0,a.d4)(e=>e.publishedPlugins),r=(0,y.my)();return(0,i.useMemo)(()=>(0,L.xC)(r,e),[e,r])}function U(){let e=(0,a.d4)(e=>e.publishedWidgets),r=em(),n=(0,i.useMemo)(()=>({}),[]);return r?e:n}function B({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=x();return(0,i.useMemo)(()=>{if(!r)return[];let i=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(i,r,e))},[n,r,e])}function V(e){return Object.values(B({includePendingPublishers:!1})).find(r=>r.id===e)}function G(e){return Object.values(function({includePendingPublishers:e=!0}={}){let r=(0,S.TA)(),n=U();if(!r)return[];let i=(0,L.i8)(Object.values(n));return(0,L.Q4)((0,L.ky)(i,r,e))}({includePendingPublishers:!1})).find(r=>r.id===e)}function H(e,r){if(null===e.current_plugin_version_id)return null;let n=e.versions[e.current_plugin_version_id],i={id:e.current_plugin_version_id,pluginId:e.id,resourceStagingSignature:null,updatedAt:new Date(Date.now()),iconUrl:n.redirect_icon_url,coverImageUrl:n.redirect_cover_image_url,name:n.name,version:n.version,releaseNotes:n.release_notes,description:n.description,tagline:n.tagline,creatorPolicy:n.creator_policy,manifest:JSON.stringify(n.manifest),createdAt:new Date(n.created_at),iconPath:n.redirect_icon_url,coverImagePath:n.redirect_cover_image_url,codePath:n.redirect_code_url,plugin:{currentPluginVersionId:n.id},playgroundFigFileKey:n.playground_fig_file_key??null,hasPlaygroundFile:!!n.playground_fig_file_key,playgroundFileVersionId:n.playground_file_version_id??null,userId:"",snapshotPath:""},a={id:e.id,currentPluginVersionId:e.current_plugin_version_id,publishingStatus:e.publishing_status,isWidget:e.is_widget,orgId:e.org_id,thumbnailUrl:"",userId:"",updatedAt:new Date(Date.now()),createdAt:new Date(e.created_at),unpublishedAt:null,supportContact:e.support_contact,approvedAt:new Date(Date.now()),installCount:e.install_count,likeCount:0,viewCount:e.view_count,blockedAt:null,profileId:"",commentCount:e.comment_count,hideRelatedContentByOthers:e.hide_related_content_by_others??null,isPublic:e.publishing_status===w.KB.APPROVED_PUBLIC,isInspect:"inspect"===e.editor_type,isSlides:n?.manifest.editorType?.includes(R.FW.SLIDES)||!1,widgetsWhitelistEnforced:null,pluginsWhitelistEnforced:null,monetizedResourceMetadataId:e.monetized_resource_metadata?.id??null,thirdPartyM10nStatus:e.third_party_m10n_status??null,monetizationStatus:e.monetization_status??null,canRead:!0,categoryId:"",uniqueRunCount:0,pluginEditorType:0,commentsSetting:"",currentUserFirstRanAt:"",profileInstallStatus:2,redirectThumbnailUrl:"",communityPublishers:e.community_publishers?.accepted.map(r=>({id:r.id,isPending:!1,role:w.un.CREATOR,userId:r.primary_user_id,profileId:r.id,pluginId:e.id,hubFileId:null,profile:{id:r.id,profileHandle:r.profile_handle,team:"team"===r.entity_type?{id:r.id,name:r.name}:null,org:"org"===r.entity_type?{id:r.id,name:r.name}:null,user:"user"===r.entity_type?{id:r.primary_user_id,name:r.name}:null,teamId:"team"===r.entity_type?r.id:null,orgId:"org"===r.entity_type?r.id:null,primaryUserId:"user"===r.entity_type?r.primary_user_id:null,publicAt:new Date(Date.now()),website:null,description:null,location:null,twitter:null,instagram:null,createdAt:new Date(Date.now()),updatedAt:new Date(Date.now()),followerCount:0,followingCount:0,coverImagePath:null,pronouns:null,badges:[],communityUserIsFollowing:r.current_user_is_following,communityUserIsFollowed:r.current_user_is_followed,entityType:r.entity_type,currentUserIsFollowing:!1,currentUserIsFollowed:!1,name:r.name,imgUrl:null,imgUrls:{}}}))||[],currentPluginVersion:i,viewableInEditor:!0,publishingStatusUpdatedAt:null,isSeoIndexingAllowed:null};return{pluginId:e.id,createdAt:new Date(Date.now()),userId:r.userId,orgId:r.orgId,pluginVersionId:e.current_plugin_version_id,plugin:a,pinnedStatus:w.hM.UNPINNED}}function K(e,r,n,i){if(!e||e.publishingStatus&&[w.KB.ORG_PRIVATE,w.KB.ORG_PRIVATE_PENDING_PUBLIC].includes(e.publishingStatus)&&(!e.orgId||e.orgId!==r)&&!(0,u.kc)().community_hub_admin)return;let a=e.currentPluginVersion;if(!a)return;if(!a.manifest){(0,p.$D)(s.e.EXTENSIBILITY,Error("manifest missing"),{extra:{plugin:e}});return}let o=e.isWidget?"widget":"plugin",l=function(e){try{let r="string"==typeof e?JSON.parse(e):e;"dynamic-page"!==r.documentAccess&&delete r.documentAccess;let n=R.pL.safeParse(r);if(!n.success)return(0,p.$D)(s.e.EXTENSIBILITY,Error("manifest schema parse error"),{extra:{jsonParsedResult:JSON.stringify(r,null,2),rawManifest:JSON.stringify(e,null,2),errors:n.error.format()}}),r;return n.data}catch(r){(0,p.$D)(s.e.EXTENSIBILITY,Error("manifest JSON parse error"),{extra:{rawManifest:e}});return}}(a.manifest);if(!l)return;let c=`?resource_type=${o}&resource_id=${e.id}`;n&&(c+=`&fuid=${n}`);let d={id:a.id,plugin_id:e.id,name:a.name||"",current_plugin_version_id:a.plugin?.currentPluginVersionId||void 0,version:a.version||"",release_notes:a.releaseNotes||"",is_private:!!e.orgId,description:a.description||"",creator_policy:a.creatorPolicy??"",manifest:l,installed_by:i,tagline:a.tagline||"",created_at:a.createdAt.toString(),redirect_icon_url:`/community/icon${c}`,redirect_cover_image_url:`/community/thumbnail${c}`,redirect_code_url:`/community/${o}/${e.id}/code`};return e.communityPublishers&&(d.community_publishers=e.communityPublishers),e.isWidget&&(d.redirect_snapshot_url=`/community/snapshot${c}`),e.orgId&&(d.org_id=e.orgId),d}let W=(e,r,n)=>{let i={},a={},o={},s={},l={},c={};if("loaded"!==e.status)return{plugins:{},widgets:{},orgPlugins:{},orgWidgets:{},userPlugins:{},userWidgets:{}};let d=e.data;for(let e of[{source:"org",savedExtensions:d.org?.installedPlugins},{source:"user",savedExtensions:d.currentUser?.installedPlugins}]){let{source:d,savedExtensions:u}=e;if(u)for(let e of u){let{plugin:u}=e;if(!u||!u.viewableInEditor)continue;let m=K(u,r,n,d);m&&(u.isWidget?(a[e.pluginId]=m,"org"===d?s[e.pluginId]=m:"user"===d&&(c[e.pluginId]=m)):(i[e.pluginId]=m,"org"===d?o[e.pluginId]=m:"user"===d&&(l[e.pluginId]=m)))}}return{plugins:i,widgets:a,orgPlugins:o,orgWidgets:s,userPlugins:l,userWidgets:c}},$=new Set,Y=new Set,z=c()(e=>{$.size>0&&(e(E.f1({pluginIds:Array.from($)})),$.clear()),Y.size>0&&(e(E.O8({widgetIds:Array.from(Y)})),Y.clear())},300);function j(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.currentUserOrgId),n=(0,m.Rs)(A.BB3,{orgId:r}),o=(0,S.TA)(),s=em();return i.useMemo(()=>{if("loaded"!==n.status)return{loaded:!1,plugins:{},widgets:{},orgWidgets:{},orgPlugins:{},userWidgets:{},userPlugins:{}};let{plugins:i,widgets:a,orgPlugins:l,orgWidgets:c,userPlugins:d,userWidgets:u}=W(n,r,o);return!function(e,r,n){let i=Object.keys(r),a=Object.keys(n);i.forEach(e=>$.add(e)),a.forEach(e=>Y.add(e)),z(e)}(e,i,s?a:{}),{loaded:!0,plugins:i,widgets:s?a:{},orgPlugins:l,orgWidgets:s?c:{},userPlugins:d,userWidgets:s?u:{}}},[e,n,r,o,s])}function q(e,r){let n=T.sZ()?.id??null,a=(0,S.TA)(),o=(0,m.Rs)(A.k_1,{orgId:n,pluginId:e},{enabled:r}),s=o.data?.plugin,l=o.status;return i.useMemo(()=>"loaded"!==l?{loaded:!1,plugin:null}:{loaded:!0,plugin:s?K(s,n,a,null)??null:null},[l,s,n,a])}function Z(e,r){return e.name.localeCompare(r.name)}let X={loaded:!0,plugins:{}};function J(){return ee(function(){let e=(0,a.d4)(e=>e.recentlyUsed.widgets),r=function(){let e=M();return(0,i.useMemo)(()=>{let r={};for(let n in e){let i=e[n];(0,R.k0)(i)&&(r[n]=i)}return r},[e])}(),n=(0,k.o)(),o=(0,S.TA)(),s=em();return(0,i.useMemo)(()=>{let i=[];return s&&n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let a=e.fetchedResources[n.id];if(a&&a.version){i.push(a.version);return}if(r[n.id]){i.push(r[n.id]);return}}),i},[n,r,e,o,s])}())}function Q(){let e=(0,a.d4)(e=>e.recentlyUsed.plugins),r=function(e){let r=M(void 0);return(0,i.useMemo)(()=>{let e={};for(let n in r){let i=r[n];(0,R.k0)(i)||(e[n]=i)}return e},[r])}(),n=(0,k.o)(),o=(0,S.TA)(),s=(0,i.useMemo)(()=>{let i=[];return n&&o&&e[n].forEach(n=>{if(o&&!n.run_by_user_ids?.includes(o))return;let a=e.fetchedResources[n.id];if(a&&a.version){i.push(a.version);return}if(r[n.id]){i.push(r[n.id]);return}}),i},[n,e,r,o]);return(0,D.Ol)(s)}function ee(e){let r={};return e.filter(e=>!r[e.plugin_id]&&(r[e.plugin_id]=!0,!0))}function et(){let e=ee(Q());return i.useMemo(()=>{let r={};return e.forEach(e=>r[e.plugin_id]=e),r},[e])}function er(){let e=(0,a.d4)(e=>e.recentlyUsed.plugins),r=(0,a.d4)(e=>e.recentlyUsed.widgets),n=(0,S.TA)(),o=(0,k.o)();return(0,i.useMemo)(()=>{let i={};return o&&n&&(e[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(i[e.id]=r)}),r[o].forEach(e=>{let r=e.last_added_at_by_user_id?.[n];r&&(i[e.id]=r)})),i},[o,n,e,r])}function en(e,r,n){let i=Object.keys(e).reduce((e,n)=>{if(r[n]){let i=r[n],a=(0,L.Ar)(i);if(!a)return e;e[n]=a}return e},{});return(0,L.NW)(n,i)}function ei(e){let r=T.sZ()?.id??"",n=(0,a.wA)(),i=(0,a.d4)(r=>"plugin"===e?r.whitelistedPlugins:r.whitelistedWidgets),s=!!r,l=function(e,r=!0){let n=T.sZ()?.id??"",i=(0,I.tS)(),a=(0,b.CR)(e,r&&!!i),o=(0,b.kA)(n??"",e,r&&!!n&&!i);return i?a:o}(e,s),c=l.loaded?l.data:[];if(!s)return i;if(!l.loaded)return{};let d={};return c.forEach(e=>{e&&(d[e]=!0)}),(0,o.c2)(d,i)||n(("plugin"===e?_.P:_.o)(d)),d}function ea(){let e=(0,y.my)(),r=(0,T.sZ)(),n=x(),o=!!(r&&r.plugins_whitelist_enforced),s=ei("plugin"),l=(0,a.wA)(),c=(0,I.tS)(),d=(0,R.Gb)(r?.id??"",c),u=(0,a.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));return i.useEffect(()=>{o&&!u&&l(f.Vl({}))},[o,l,u]),i.useMemo(()=>en(s,n,e),[e,s,n])}function eo(){let e=(0,y.my)(),r=(0,T.sZ)(),n=U(),o=!!(r&&r.widgets_whitelist_enforced),s=ei("widget"),l=(0,a.wA)(),c=(0,I.tS)(),d=(0,R.n_)(r?.id??"",c),u=(0,a.d4)(e=>!!r&&(0,C.mn)(e.loadingState,d));i.useEffect(()=>{o&&!u&&l(f.mV({}))},[o,l,u]);let m=i.useMemo(()=>en(s,n,e),[s,n,e]),p=em(),h=(0,i.useMemo)(()=>({}),[]);return p?m:h}function es(e,{searchLocalPlugins:r,searchPublishedPlugins:n}){let a=M(),o=x();return i.useMemo(()=>(0,L.DM)({idToSearch:e,localExtensionsByFileId:r?a:void 0,publishedExtensions:n?o:void 0}),[e,r,n,a,o])}function el(){let e=function(){let e=(0,a.d4)(e=>e.selectedView),r=(0,a.d4)(e=>e.installedPluginVersions);if("fullscreen"!==e.view)return X;let n=(0,L.GX)(e.editorType);if(!r.loaded)return r;let i={};for(let a of Object.values(r.plugins))(0,L.EK)(n,a.manifest.editorType)?i[a.plugin_id]=a:((0,P.$A)(e)&&(0,L.M5)(a)||"figma"===n&&(0,L.M5)(a))&&(i[a.plugin_id]=a);let o="fullscreen"===e.view?e.editorType:null;return{loaded:!0,plugins:(0,L.NW)(o,i)}}(),r=B(),n=Q(),i={};return Object.values(e.plugins).forEach(e=>{i[e.plugin_id]||(i[e.plugin_id]=e)}),Object.values(r).map(L.uF).forEach(e=>{i[e.plugin_id]||(0,R.ZQ)(e)||(i[e.plugin_id]=e)}),n.forEach(e=>{i[e.plugin_id]||(0,R.ZQ)(e)||(i[e.plugin_id]=e)}),i}function ec(e){let r={};return Object.keys(e).forEach(e=>{r[e]=!0}),r}function ed(){let e=(0,y.E3)(),r=ec(ea()),n=ec(eo()),a=(0,d.R)(e=>({currentUserOrgId:e.currentUserOrgId,orgById:e.orgById,selectedView:e.selectedView,openFile:e.openFile})),o=(0,v.p8)("isReadOnly");return i.useCallback(i=>{let{canRun:s}=(0,L.JT)({plugin:i,editorType:e,canRunPluginState:{...a,mirror:{appModel:{isReadOnly:o}},whitelistedPlugins:r,whitelistedWidgets:n}});return s},[e,a,r,n,o])}function eu(){return(0,a.d4)(N.GP)}function em(){let e=(0,y.E3)();return e!==O.nT.Slides&&e!==O.nT.Sites}function ep(e){let r=(0,y.pQ)(e);return r!==O.nT.Slides&&r!==O.nT.Sites}function eh(e){let r=(0,a.wA)(),n=(0,T.sZ)(),o=!!(n&&n.plugins_whitelist_enforced),s=(0,a.d4)(e=>e.whitelistedPlugins)[e],l=M(),c=i.useMemo(()=>Object.values(l).find(r=>r.plugin_id===e),[l,e]),d=(0,a.d4)(r=>r.publishedPlugins[e]),u=!o||c||d?.org_id,m=!s&&!u;return{validatePublishedPluginInOrgAllowlist:i.useCallback(()=>!m||(r(g.F.enqueue({message:(0,h.t)("universal_insert.plugin_not_in_allowlist"),error:!0})),!1),[m,r]),isPluginBlockedByAllowlist:m}}function e_(){let{filterByAllowlist:e,filterByPublicResourcesAllowed:r}=function(e){let r=(0,T.sZ)(),n=!!(r&&r.plugins_whitelist_enforced),a=!!(r&&r.widgets_whitelist_enforced),o=!!r&&!r.public_plugins_allowed,s=ea(),l=eo(),c=e?l:s,d=e?a:n,u=r?.id??"",m=(0,I.tS)(),p=(0,C.oh)(e?(0,R.n_)(u,m):(0,R.Gb)(u,m)),h=i.useCallback(e=>d?e.filter(e=>!(0,R.LR)(e)||!!c[e.plugin_id]):e,[c,d]),_=i.useCallback(e=>o?e.filter(e=>!(0,R.LR)(e)):e,[o]);return{publicExtensionsDisallowed:o,allowList:c,hasAllowList:d,allowListIsLoading:p,hasPluginAllowList:n,hasWidgetAllowList:a,filterByPublicResourcesAllowed:_,filterByAllowlist:h}}(!1);return e(r(ee(Q())))}},108975:(e,r,n)=>{n.d(r,{Yk:()=>p}),n(411855);var i=n(188507),a=n(243742);n(922827);var o=n(91408);n(966712);var s=n(716034);n(111538);var l=n(85304);n(964881);var c=n(809831);n(617453),n(457630),n(441088),n(737499),n(100197),n(258159);var d=n(693348);n(202232);var u=n(712546);n(206645);var m=n(837746);function p(){let e=(0,u.FF)(),r=(0,u.bz)(),n=(0,u.oV)(),s=(0,u.rD)(),p=(0,d.N)(),h=(0,l.e)(),_=(0,i.d4)(e=>!!e.prototype?.isFooterVisible),g="ui3"===(0,a.DP)().version,f=(0,c.ow)(),E=(0,i.d4)(e=>e.mirror?.appModel.showUi),y=g?m.LQy:m.IuL,b=64+p;return f?e&&(r||n||s)?(0,o.jz)(y)+(0,o.jz)(m.jl4):e?(0,o.jz)(y):0:h?g?b+40:(0,o.jz)(m.ZB$):_?(0,o.jz)(m.P4e):g&&E?b:0}(0,o.hG)(m.xEX),(0,s.eU)(0)},506599:(e,r,n)=>{n.d(r,{iT:()=>m});var i=n(411855),a=n(188507),o=n(922827);n(358145),n(438741),n(843495);var s=n(29680),l=n(100197),c=n(187882);n(144119);var d=n(809831),u=n(226055);function m(){let e=(0,u.GS)(),r=!(0,l.ut)(o.Ez5?.uiState()?.showPropertiesPanel,!0),n=function(){let e=(0,u.GS)(),r=(0,d.ow)(),n=(0,c.Ye)(),i=(0,s.aV)(),l=(0,s.ax)(),m=(0,s.dH)(),p=m===o.NLJ.FRAME||m===o.NLJ.COMMENTS||m===o.NLJ.VECTOR_PENCIL,h=(0,a.d4)(e=>e.mirror.appModel.activeUserAction===o.QOV.DEFAULT);return!!e&&!!h&&!!n&&!i&&!r&&!l&&!p}(),m=e&&(r||n),p=(0,i.useCallback)(e=>{r!==e&&o.Ez5?.uiState().showPropertiesPanel.set(!e)},[r]),h=(0,i.useCallback)(()=>{p(!m)},[m,p]);return{isPropertiesPanelCollapsed:m,setPropertiesPanelCollapsed:p,togglePropertiesPanelCollapsed:h}}},763223:(e,r,n)=>{n.d(r,{w:()=>o,y:()=>s});var i=n(966712),a=n(963067);function o(){let e=(0,a.U5)();return(0,i.kc)().xr_debounce_threshold&&e}function s(){return(0,i.kc)().xr_debounce_threshold}},965480:(e,r,n)=>{n.d(r,{Et:()=>C,J3:()=>T,JU:()=>S,UF:()=>w,b2:()=>N,kD:()=>A,kN:()=>E,mZ:()=>I,tS:()=>v}),n(411855);var i=n(188507),a=n(140593);n(436408),n(794272);var o=n(966712),s=n(716034);n(915440),n(752553);var l=n(875847),c=n(335682),d=n(694687),u=n(99506);n(279453),n(643067);var m=n(243987),p=n(556261),h=n(56099);n(284321);var _=n(984968);n(694517),n(106112),n(383986),n(576144);var g=n(809831),f=n(6949),E=(e=>(e.NOT_ENABLED="NOT_ENABLED",e.CAN_PUBLISH="CAN_PUBLISH",e.FILE_IN_DRAFTS="FILE_IN_DRAFTS",e.FILE_IN_DRAFTS_CANNOT_MOVE="FILE_IN_DRAFTS_CANNOT_MOVE",e.DISABLED_IN_SETTINGS="DISABLED_IN_SETTINGS",e.CANNOT_PUBLISH="CANNOT_PUBLISH",e))(E||{});function y(e){let r=(0,g.lg)(),n=(0,p.bv)(e);return(0,p.yN)({...e,attribute:"canBrowseOrgTemplates",legacy:(e,i)=>i?(0,f.ar)(i?.are_custom_templates_allowed,n):!!(e&&r&&("student_team"in e?(0,m.w5)(e):(0,m.XX)(e)))&&(r===u._Y.SLIDES||r===u._Y.WHITEBOARD&&!!(0,o.kc)().pro_templates_figjam),migrated:(e,i)=>i?.key.type===u.OL.ORG?(0,f.ar)(!!i?.customTemplatesAllowed,n):i?.key.type===u.OL.TEAM&&!!i&&!!r&&i.tier!==u.Ag.STARTER&&(r===u._Y.SLIDES||r===u._Y.WHITEBOARD&&!!(0,o.kc)().pro_templates_figjam)})}function b(){let e=(0,d.sZ)(),r=(0,_.ol)();if(y({component:"useCurrentEntityForTemplates",migrationGroup:h.L.GROUP_5})){if(e)return{type:"org",entity:e,name:e.name};if(r)return{type:"team",entity:r,name:r.name}}return null}function v(){return!!b()}function I(e){let r=y({component:"useFileEntityCanAccessTemplates",migrationGroup:h.L.GROUP_5});return!!e&&r}function T(){let e=(0,c.q5)(),r=function(){let e=b(),r=(0,c.q5)();return(0,i.d4)(n=>!!r&&!!r.folderId&&(e?.type==="team"?(0,l.ye)(n.folders[r.folderId]):e?.type==="org"&&(0,l.Gi)(n.folders[r.folderId])))}(),n={component:"usePublishTemplateStatus",migrationGroup:h.L.GROUP_5},a=(0,p.UP)(n),o=y(n),s=!!e?.canPublishTemplate,d=!!e?.canEdit;return(a===u.OL.ORG||o)&&e?.editorType!==u._Y.DESIGN?s?"CAN_PUBLISH":d?a!==u.OL.ORG||o?r?e?.canDelete?"FILE_IN_DRAFTS":"FILE_IN_DRAFTS_CANNOT_MOVE":"CANNOT_PUBLISH":"DISABLED_IN_SETTINGS":"CANNOT_PUBLISH":"NOT_ENABLED"}function S(e){switch(e){case"CAN_PUBLISH":case"FILE_IN_DRAFTS":return!0;case"DISABLED_IN_SETTINGS":case"NOT_ENABLED":case"CANNOT_PUBLISH":case"FILE_IN_DRAFTS_CANNOT_MOVE":return!1;default:(0,a.xb)(e)}}function w({fileCanEdit:e,editor_type:r,team_id:n,state:i}){let a=i.currentUserOrgId&&i.orgById[i.currentUserOrgId];return!!(a&&e&&r===u._Y.WHITEBOARD&&a.are_custom_templates_allowed&&n)}function A(){let e=(0,c.q5)(),r=C(e);return e?.template&&r?e?.template:null}function C(e){let r=I(e);return!!e&&!!e.template&&!e.template.unpublishedAt&&r}let N=(0,s.eU)(null)},777078:(e,r,n)=>{n.d(r,{Fz:()=>G,_R:()=>Y,dT:()=>U,eE:()=>H,jd:()=>W});var i=n(411855),a=n(188507),o=n(140593),s=n(922827),l=n(340818),c=n(776250),d=n(737947);n(436408);var u=n(733556),m=n(586459),p=n(395900),h=n(27087),_=n(939863),g=n(392592),f=n(980820),E=n(182976),y=n(875458),b=n(986270),v=n(931828),I=n(74930),T=n(178323),S=n(128765),w=n(267701),A=n(946413),C=n(335682),N=n(860178),L=n(132135),O=n(336599);n(556261),n(56099);var R=n(106112),P=n(809073);n(576144);let D=(e,r)=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${M(e)}/${r}/prepare_insert`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${M(e)}/${r}/prepare_insert`}},k=e=>{switch(e.type){case R.n.HubFile:return`/api/hub_files/${M(e)}/template_canvas`;case R.n.TeamTemplate:case R.n.TeamTemplateLg:return`/api/templates/${M(e)}/template_canvas`}},M=({type:e,template:r})=>{switch(e){case R.n.HubFile:return r.id;case R.n.TeamTemplate:return r.file_key;case R.n.TeamTemplateLg:return r.fileKey;default:(0,o.xb)(e)}},F=({template:e,type:r})=>{switch(r){case R.n.HubFile:return{type:P.vt.CommunityResource,id:e.id};case R.n.TeamTemplate:return{type:P.vt.TeamTemplate,file_key:e.file_key};case R.n.TeamTemplateLg:return{type:P.vt.TeamTemplate,file_key:e.fileKey};default:(0,o.xb)(r)}};async function x({insert:e,dispatch:r,fileKey:n,template:i,onSuccess:a,onFailure:o,userTriggered:s=!0,isPreview:l=!1,triggeredFrom:d}){let u=new p.jk(`template_insert.${d}`,{key:n??""});u.start();let m=e=>{let r=u.stop();(0,c.sx)(e,{elapsedMs:r,triggeredFrom:d,isPreview:l},{forwardToDatadog:!0,batchRequest:!0})},h=M(i);try{await (0,I.B)(()=>h,n,T.T.STANDARD,async()=>{await e()&&(a&&a(),m("template_insert_success"),(0,T._)(l?"resource_previewed":"resource_inserted",{fileKey:n,resourceType:"template",resourceName:(0,S.gY)(i),resourceId:h,triggeredFrom:d,templateType:i.type,templateCategory:i.type===R.n.HubFile?i.category:void 0}),s)&&(r(v.b({inserted_figjam_template:!0})),i.type===R.n.TeamTemplate&&r(y.D([i.template])),"section-preset"!==d&&r(b.Hx({storeInRecentsKey:P.$A.FigJam,...F(i)})))},{enableTracking:!l})}catch(e){r(g.F.enqueue({message:(0,_.t)("whiteboard.inserts.insert_template_failed_v2"),error:!0})),o&&o(),m("template_insert_failure")}}async function U({template:e,fileKey:r,fileVersion:n}){if(!r)throw Error("Missing file key");if(!n)throw Error("Missing file version");let i=D(e,r),a=k(e),o=e.type===R.n.HubFile?{fv:`${n}`}:void 0,s=(0,w.n)(a,(e,r)=>h.Ay.post(e,{fv:`${r}`},{responseType:"arraybuffer"}).then(({data:e})=>e)),[[l]]=await Promise.all([s,h.Ay.post(i,o)]);return l}async function B(e){let{userTriggered:r=!0,templateInsertionDirection:n=s.hKj.RIGHT,templateCustomPosition:i,selectTemplateAfterInsertion:a}=e,o=e.editScopeType;o||(o=r?s.zkO.USER:s.zkO.SYSTEM),await x({insert:async()=>await U(e).then(e=>((0,l.l7)(o,"insert-figjam-template",()=>s.glU.insertTemplateInCanvas(e,n,a??r,!i,i?i.x:null,i?i.y:null)),!0)),...e})}function V(e,r){return`INSERT_FIGJAM_TEMPLATE_${e}_${r}`}function G(){let e=(0,a.wA)(),r=(0,C.tS)(),n=(0,a.d4)(e=>e.fileVersion),i=(0,a.d4)(e=>e.loadingState);return{insertTemplate:async({onSuccess:a,onFailure:o,...s})=>{let l=V(r,M(s.template));(0,O.VP)(i,l)||(e(E.Cx({key:l})),await B({dispatch:e,fileKey:r,fileVersion:n,...s,onSuccess:()=>{e(E.yH({key:l})),a&&a()},onFailure:()=>{e(E.yH({key:l})),o&&o()}}))},isInsertingTemplate:e=>{let n=V(r,e);return(0,O.VP)(i,n)}}}function H(e){let r=(0,a.d4)(e=>e.recentlyUsed.templates),n=(0,a.d4)(e=>e.hubFiles),s=(0,a.d4)(e=>e.recentCustomTemplates);return(0,i.useMemo)(()=>r[e].map(e=>{let{type:r}=e;switch(r){case P.vt.CommunityResource:return{type:R.n.HubFile,template:n[e.id]};case P.vt.TeamTemplate:return{type:R.n.TeamTemplate,template:s[e.key]};default:(0,o.xb)(r)}}).filter(({template:e})=>!!e),[r,n,s,e])}async function K({dispatch:e,templateIdentifier:r,onSuccess:n,onFailure:i,templateName:a,openInNewTab:o,folderId:s}){await h.Ay.post(`/api/templates/${r.file_key}/duplicate`,{folder_id:s}).then(({data:i})=>{let{fig_file:a,template:s}=i.meta;n(),e(y.D([s])),e(b.Hx({storeInRecentsKey:P.$A.FigJam,...r})),d.Ay.redirect((0,L.to)(a),o?"_blank":void 0)}).catch(()=>{let r={error:!0,message:(0,_.t)("community.actions.failed_to_create_a_new_file_from_hub_file_name",{hubFileName:a})};e(g.F.enqueue(r)),i()})}let W=(0,f.nF)((e,r)=>{var n;let i=(n=r.templateIdentifier.file_key,`DUPLICATE_FIGJAM_TEMPLATE_${n}`),{dispatch:a}=e,{loadingState:o}=e.getState();(0,O.VP)(o,i)||(a(E.Cx({key:i})),K({...r,dispatch:a,onSuccess:()=>{a(E.yH({key:i})),r.onSuccess&&r.onSuccess()},onFailure:()=>{a(E.yH({key:i})),r.onFailure&&r.onFailure()}}))}),$={url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAA1JREFUGFdj+P///38ACfsD/QVDRcoAAAAASUVORK5CYII="};function Y(e){let r=(0,N.iZ)(),n=(0,u.J)(()=>r?(0,A.$)(e,r):Promise.reject(Error("User not logged in")),[e,r]),[a,o]=(0,i.useState)($);return(0,i.useEffect)(()=>{n.status===m.r.SUCCESS&&o(n.value),n.status===m.r.FAILURE&&o($)},[n]),a}},226055:(e,r,n)=>{n.d(r,{GS:()=>a}),n(411855);var i=n(243742);function a(){return"ui3"===(0,i.DP)().version}n(922827),n(878227),n(737947),n(966712),n(259829),n(563706),n(776621),n(138369),n(809831),n(779709),n(114716),n(860178),n(69961),n(239671),n(144119)},73629:(e,r,n)=>{n(411855);var i=n(716034);n(798099),(0,i.eU)(null),(0,i.eU)(null)},298527:(e,r,n)=>{n.d(r,{Ck:()=>_,MJ:()=>g,Pp:()=>f,n1:()=>b,rM:()=>y});var i=n(411855),a=n(188507),o=n(138020),s=n(966712),l=n(418956),c=n(279453),d=n(556261),u=n(56099),m=n(984968),p=n(773610),h=n(479296);function _(){let e=b();return i.useCallback(()=>e,[e])}let g=(0,h.n)((e,r,n)=>{let i=e?.figma_provided_libraries_disabled||r?.figma_provided_libraries_disabled;return!!(!(0,s.sL)()&&!n&&!i)}),f=(0,h.n)((e,r,n)=>!((0,s.sL)()||n||e?.figmaProvidedLibrariesDisabledAt&&(0,o.oA)(e.figmaProvidedLibrariesDisabledAt)||r?.canAccessProFeature&&r.figmaProvidedLibrariesDisabledAt&&(0,o.oA)(r.figmaProvidedLibrariesDisabledAt))),E=(0,h.n)((e,r)=>!((0,s.sL)()||r||e?.figmaProvidedLibrariesEnabled));function y(e){if("loaded"!==e.status)return!1;let r=e.data.team,n=e.data.org;return(!r||"loaded"===r.figmaProvidedLibrariesDisabledAt.status)&&(!n||"loaded"===n.figmaProvidedLibrariesDisabledAt.status)}function b(){let e=(0,m.cD)(),r=(0,m.jv)(e)?e:null,n=(0,a.d4)(({openFile:e,currentUserOrgId:r})=>e?e.parentOrgId:r),i=(0,l.md)(c.U8U.Query(r||n?{teamId:r||"-1",orgId:n}:null)),o=(0,l.md)(p.AS).enabled,s=(0,d.yN)({component:"useDsePresetsEnabled",migrationGroup:u.L.GROUP_4,attribute:"isDsePresetsEnabled",legacy:(e,r)=>g(r,e,o),migrated:(e,r)=>E(r,o)});return"loaded"===i.status&&y(i)?f(i.data.org,i.data.team,o):s}},137463:(e,r,n)=>{n(411855),n(457630),n(73629)},837378:(e,r,n)=>{n.d(r,{K:()=>o});var i=n(411855);function a(e,r){if(!r)return e;let n=new Set(r.map(e=>e.id)),i=e.filter(e=>!n.has(e));return i.length===e.length?e:i}function o(e,r=50){let[n,s]=i.useState([]),l=i.useMemo(()=>a(n,e),[e,n]);return i.useEffect(()=>{s(l)},[l]),{optimisticIds:l,addOptimisticIds:i.useCallback(e=>s(n=>{let i=[...n,...e];return i.length>r?i.slice(i.length-r):i}),[r]),setServerData:i.useCallback(e=>{s(r=>a(r,e))},[])}}},835156:(e,r,n)=>{function i(e){return e?.file?.activeFileUsers?.map(e=>e)??[]}function a(e){return!!e.imageUrl&&!!e.id&&!!e.handle}function o(e){return{id:e.id,handle:e.handle,img_url:e.imageUrl}}n.d(r,{ZF:()=>i,q3:()=>a,rR:()=>o})},156367:(e,r,n)=>{n.d(r,{H3:()=>a});var i=n(181912);function a(e){return e?(0,i.A)(e).add(1,"day").subtract(1,"second").format():null}n(133537)},988022:(e,r,n)=>{n.d(r,{Cu:()=>K,Dc:()=>p,E9:()=>w,FE:()=>N,Fr:()=>M,GS:()=>S,Nb:()=>b,OH:()=>L,PB:()=>O,Pg:()=>v,WL:()=>j,Ws:()=>H,Yg:()=>z,_J:()=>k,_R:()=>W,ak:()=>P,ds:()=>I,f5:()=>T,fy:()=>$,k1:()=>C,oP:()=>V,pf:()=>R,pi:()=>h,qD:()=>Y,uE:()=>F,v5:()=>_,xr:()=>D,ye:()=>B,ys:()=>E,z_:()=>U});var i=n(922827),a=n(776250),o=n(776621),s=n(553716),l=n(99506),c=n(239671),d=n(935938),u=n(479296),m=n(140047);function p(e){switch(e){case c.nT.Design:return"design";case c.nT.Whiteboard:return"figjam";case c.nT.DevHandoff:return"dev_handoff";case c.nT.Slides:return"slides";case c.nT.Sites:return"sites";default:return"unknown"}}function h(e){switch(e&&e.editorType){case l._Y.DESIGN:return"design";case l._Y.WHITEBOARD:return"figjam";case l._Y.SLIDES:return"slides";case l._Y.SITES:return"sites";default:return"unknown"}}function _(e,r){return e?.view==="fullscreen"?p(e.editorType):r?h({editorType:r}):"unknown"}let g=(e,r)=>{switch(r?.selectedView?.view){case"prototype":case"mobileViewer":if(r.selectedView.file?.key===e)return r.selectedView.file||null;return null;default:return e&&r.fileByKey[e]||null}},f=null;function E(e){f=e}let y=(e,r,n,a={})=>{let o=_(n?.selectedView,r&&r.editor_type),s={...a,...b(o,n?.selectedView?.view)};return s.productType=o,s.fileKey=e||"new",s.fileParentOrgId=r&&r.parent_org_id,s.fileTeamId=r&&r.team_id,r&&r.file_repo_id&&(s.fileRepoId=r.file_repo_id),s.fileTeamId=r&&r.team_id,s.containingFolderId=r&&r.folder_id,s.entrypoint=a.entrypoint,s.figmaBasicsExperiment=r?.track_tags?.figma_basics_experiment,f&&(s.loadID=f),s.fileIsIncremental=!!i.h3O?.isIncrementalSession(),s.fileIsValidatingIncremental=!!i.h3O?.isValidatingIncremental(),s};function b(e,r){return e===l._Y.SLIDES&&"fullscreen"===r?{slide_view:i.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()?"ssv":"grid"}:{}}function v(){(0,a.Pg)()}let I=(0,u.n)((e,r,n,i={},o)=>{let s=g(r,n),l=y(r,s,n,i);(0,a.sx)(e,l,o)}),T=(0,u.n)((e,r,n,i={},o)=>{let s=y(r.key,r,n,i);(0,a.sx)(e,s,o)}),S=(0,u.n)((e,r,n,i)=>{let o=g(r,n),s=y(r,o,n,i);a.az.trackDefinedEvent(e,s)});function w(e,r,n={},i){n.productType=r&&h(r),n.fileKey=r?.key||"new",n.fileParentOrgId=r?.parentOrgId,n.fileTeamId=r?.teamId,n.containingFolderId=r?.folderId,r&&r.fileRepoId&&(n.fileRepoId=r.fileRepoId),(0,a.sx)(e,n,i)}let A="File Browser File Clicked";function C(e,r,n){if(r.state){var i;I(A,e,r.state,{selectedView:"recentsAndSharing"===(i=r.state).selectedView.view?i.selectedView.tab||d.G.RECENTLY_VIEWED:"folder"===i.selectedView.view&&i.selectedView.folderId===i.user?.drafts_folder_id?"drafts":i.selectedView.view,entrypoint:r.entrypoint,planFilterId:r.planFilterId,planFilterType:r.planFilterType,sharedByFilter:r.sharedByFilter,viewMode:r.viewMode},n)}else r.selectedViewName?(0,a.sx)(A,{fileKey:e,selectedView:r.selectedViewName,entrypoint:r.entrypoint},n):(0,a.sx)(A,{fileKey:e,entrypoint:r.entrypoint},n)}function N(e,r,n){(0,a.sx)("file_browser_plan_filter_selected",{planId:e,entryPoint:r,planType:n})}function L(e,r,n={},i){n.fileKeys=r.map(e=>e.key),n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileParentOrgIds.push(e.parent_org_id),n.fileTeamIds.push(e.team_id),n.containingFolderIds.push(e.folder_id)}),(0,a.sx)(e,n,i)}function O(e,r,n,i={},o){let s=r.map(e=>n.fileByKey[e]);i.fileKeys=r,i.fileParentOrgIds=[],i.fileTeamIds=[],i.containingFolderIds=[],s.forEach(e=>{i.fileParentOrgIds.push(e.parent_org_id),i.fileTeamIds.push(e.team_id),i.containingFolderIds.push(e.folder_id)}),(0,a.sx)(e,i,o)}function R(e,r,n={},i){n.fileKeys=[],n.fileParentOrgIds=[],n.fileTeamIds=[],n.containingFolderIds=[],r.forEach(e=>{n.fileKeys.push(e.key),n.fileParentOrgIds.push(e.parentOrgId),n.fileTeamIds.push(e.teamId),n.containingFolderIds.push(e.folderId)}),(0,a.sx)(e,n,i)}function P(e,r,n,i){let a=e.map(e=>e.key),o=[],s=[],l=[];a.forEach((e,n)=>{let i=r[n];o.push(i.key),s.push(i.folder_id),l.push(i.team_id)}),O("File Copied",a,n,{copiedFileKeys:o,copiedContainingFolderIds:s,copiedFileTeamIds:l},i)}function D(e,r,n,i,o={},s){let l=i.folders[r];o.folderId=l?.id||r,o.folderTeamId=l?.team_id||n,(0,a.sx)(e,o,s)}function k(e,r,n,i={},o){let s=(0,m._)(r,n);i.teamId=s?.id,i.teamName=s?.name,(0,a.sx)(e,i,o)}function M(e,r,n,i={},o){let s=n.orgById[r];i.orgId=s.id,i.orgName=s.name,(0,a.sx)(e,i,o)}function F(e,r,n={},i){n.userId=r.user&&r.user.id,(0,a.sx)(e,n,i)}let x={[l.vt.FILE]:"fileKey",[l.vt.FILE_REPO]:"fileRepoId",[l.vt.FOLDER]:"folderId",[l.vt.TEAM]:"teamId"};function U(e,r,n={},i){let o=x[r.resource_type];n.roleId=r.id,n[o]=r.resource_id_or_key,r.user_id&&(n.roleUserId=r.user_id),(0,a.sx)(e,n,i)}function B(e,r){(0,a.sx)(e,r)}function V(e){return{canEdit:e.canEdit,fileKey:e.key,productType:h(e)}}var G=(e=>(e.DESIGN="DESIGN",e.WHITEBOARD="WHITEBOARD",e))(G||{});let H="CTA Clicked";function K(e,r,n){let i=r||H;(0,s.Lo)(i,e.text||"",e,{logToConsole:o.NU.NEVER});let l={...e,nonInteraction:0};(0,a.sx)(i,l,{forwardToDatadog:!0,sendAsBeacon:n})}var W=(e=>(e.NOT_POPULATED="not_populated",e.POPULATED_INCOMPLETE="populated_incomplete",e.POPULATED_COMPLETE="populated_complete",e))(W||{});function $(e,r){let n={...e,nonInteraction:0};(0,a.sx)("Input Blurred",n,r)}function Y(e,r={}){(0,a.sx)("Context Viewed",e,{forwardToDatadog:!0,...r})}let z="User Submits Reupgrade Request",j=5e3},128765:(e,r,n)=>{n.d(r,{fG:()=>h,gY:()=>p,gp:()=>m});var i=n(411855),a=n(140593),o=n(258214),s=n(99506),l=n(556261),c=n(56099),d=n(106112),u=n(820642);function m(e){switch(e.type){case d.n.HubFile:return e.template.id;case d.n.TeamTemplate:return e.template.file_key;case d.n.TeamTemplateLg:return e.template.fileKey;default:return(0,a.xb)(e)}}function p(e){switch(e.type){case d.n.HubFile:return(0,u.a6)(e.template).name;case d.n.TeamTemplate:case d.n.TeamTemplateLg:return e.template.name;default:return(0,a.xb)(e)}}function h(){let e=(0,l.yN)({migrationGroup:c.L.GROUP_3,component:"useGetGenericTemplateDisplayProps",attribute:"imgUrl",legacy:(e,r)=>r?.img_url,migrated:(e,r)=>r?.imgUrl||void 0}),r=(0,l.dh)({migrationGroup:c.L.GROUP_3,component:"useGetGenericTemplateDisplayProps"});return(0,i.useCallback)(n=>{let i=m(n),l=p(n),c=function(e){switch(e.type){case d.n.HubFile:return(0,u.a6)(e.template).description;case d.n.TeamTemplate:case d.n.TeamTemplateLg:return e.template.description;default:return(0,a.xb)(e)}}(n),{type:h,template:_}=n;switch(h){case d.n.HubFile:return{imageUrl:_.thumbnail_url||void 0,clientMeta:_.client_meta,thumbnailIsSet:!!_.thumbnail_is_set,isWhiteboard:_.viewer_mode===s.y4.WHITEBOARD,name:l,description:c,hubFileId:_.id,publishers:_.community_publishers?.accepted||[],primaryKey:i,duplicateLink:`${window.location.origin}/community/file/${_.id}/duplicate`,viewSourceFileUrl:null,resizedThumbnailUrls:_.resized_thumbnail_urls,libraryKey:_.library_key};case d.n.TeamTemplate:{let n=_.published_by_user?[{name:_.published_by_user.handle,img_url:_.published_by_user.img_url}]:r?[{name:r,img_url:e}]:[];return{imageUrl:_.signed_thumbnail_url,clientMeta:_.client_meta,thumbnailIsSet:!!_.has_custom_thumbnail,isWhiteboard:!0,name:l,description:c,publishers:n,primaryKey:i,duplicateLink:`${window.location.origin}/new/template/${_.file_key}`,viewSourceFileUrl:`/file/${_.file_key}`,libraryKey:_.library_key}}case d.n.TeamTemplateLg:{let n=_.publishedByUserNullable?[{name:_.publishedByUserNullable.handle,img_url:_.publishedByUserNullable.imgUrl}]:r?[{name:r,img_url:e}]:[];return{imageUrl:_.coverImagePath??_.signedThumbnailUrl,clientMeta:_.checkpointClientMeta,thumbnailIsSet:_.hasCustomThumbnail,isWhiteboard:_.editorType===s._Y.WHITEBOARD,name:l,description:c,publishers:n,primaryKey:i,duplicateLink:`${window.location.origin}/new/template/${_.fileKey}`,viewSourceFileUrl:`/file/${_.fileKey}`,libraryKey:(0,o.l)(_.libraryKey)}}default:(0,a.xb)(h)}},[e,r])}},788811:(e,r,n)=>{n.d(r,{$3:()=>el,GT:()=>eP,Gc:()=>eF,Gg:()=>eU,JI:()=>et,OL:()=>eC,Oz:()=>ex,Ww:()=>em,ZG:()=>eI,ZW:()=>er,bD:()=>j,b_:()=>eL,dm:()=>ek,go:()=>ed,gp:()=>eA,kl:()=>en,lu:()=>eR,mu:()=>eT,oE:()=>eN,t:()=>eS,wI:()=>ec,yn:()=>ew,z$:()=>ea});var i=n(411855),a=n(188507),o=n(843407),s=n(561546),l=n(966664),c=n(268853),d=n(922827),u=n(340818),m=n(194812),p=n(776250),h=n(224857),_=n(38329),g=n(966712),f=n(418956),E=n(716034),y=n(915440),b=n(391388),v=n(395900),I=n(563706),T=n(776621),S=n(553716),w=n(825871),A=n(47506),C=n(939863),N=n(265746),L=n(696808),O=n(944682),R=n(988022),P=n(106757),D=n(493862),k=n(314809),M=n(760640),F=n(279453),x=n(540019),U=n(973131),B=n(565167),V=n(546312),G=n(786701),H=n(154823),K=n(823699),W=n(63104),$=n(132367),Y=n(153297);function z(e,r){let n="unknown";e?"string"==typeof e?n=e:"message"in e&&(n=e.message):n="no error message",(0,S.x1)("Autosave",n,{message:r})}function j(){return 7776e6}async function q(e,r,n,i){let a=i.objectStore(K.Sp),o=await a.index(K.SW).get([e,r,n]);return o&&o.id?{id:o.id,...o}:void 0}async function Z(e,r,n,i){let a=await q(e,r,n,i);return a?.id}async function X(e,r,n){let i=e.objectStore(K.Sp),a=e.objectStore(K.jP),o=e.objectStore(K.DV),s=e.objectStore(K.w8),l=[];for(let e of n){let r=await i.index(K.SW).get([e.userID,e.fileKey,e.sessionID]);r&&r.id&&l.push(r)}if(0===l.length)return await e.done,{changesByNode:new Map,referencedNodeMap:new Map,fileVersion:-1};l.sort((e,r)=>r.fileVersion-e.fileVersion);let c=l[0],u=new Map,m=new Map;for(let e of(await a.getAll((0,K.iM)(c.id))))u.set(e.nodeID,[e.changes,e.snapshots]);for(let e of(await s.getAll((0,K.iM)(c.id))))m.set(e.nodeID,e.buffer);let p=c.lastUpdatedAt;for(let e of l.slice(1)){let r=e.fileVersion===c.fileVersion;if(r){for(let r of(await a.getAll((0,K.iM)(e.id)))){let e=u.get(r.nodeID),n=r.changes,i=r.snapshots;if(e){let[a,o]=e;n=d.i6g.mergeMultiplayerMessages(a,r.changes,c.fileVersion),i={...o,...r.snapshots}}u.set(r.nodeID,[n,i]),a.put({editorSessionID:c.id,nodeID:r.nodeID,changes:n,snapshots:i}).catch(e=>z(e,"mergeAndClaimChanges: updating session IDs"))}for(let r of(await s.getAll((0,K.iM)(e.id))))m.set(r.nodeID,r.buffer),s.put({editorSessionID:c.id,nodeID:r.nodeID,buffer:r.buffer}).catch(e=>z(e,"mergeAndClaimChanges: merge referenced nodes"));p=Math.max(p,e.lastUpdatedAt)}a.delete((0,K.iM)(e.id)).catch(e=>z(e,"mergeAndClaimChanges: node changes for session")),s.delete((0,K.iM)(e.id)).catch(e=>z(e,"mergeAndClaimChanges: referenced nodes for session"));let n=await o.openCursor((0,K.iM)(e.id));for(;n;)r&&o.put({...n.value,editorSessionID:c.id}).catch(e=>z(e,"mergeAndClaimChanges: merge images")),n.delete().catch(e=>z(e,"mergeAndClaimChanges: remove old image")),n=await n.continue();i.delete(e.id).catch(e=>z(e,"mergeAndClaimChanges: delete old session id"))}return await i.put({...c,sessionID:r,lastUpdatedAt:p}),(0,K.dU)(e),await e.done,(0,S.Lo)("Autosave",`Found claimed autosave changes from ${l.length} sessions`,void 0,{logToConsole:d.NUh.ALWAYS}),{changesByNode:u,referencedNodeMap:m,fileVersion:c.fileVersion}}async function J(e,r){let n=(0,K.Zt)(e,r),i=[];return await M.xK.timeAsync("checkForAutosave",async()=>{let e=await (0,K.Z4)();if(!e)return;let r=e.transaction(K.Sp),a=r.objectStore(K.Sp),o=await a.index(K.SW).openCursor(n);for(;o;)i.push(o.value),o=await o.continue();await r.done}),i.length>0&&(0,S.ED)("Autosave","Found auto-saved data for this file",void 0,{logToConsole:d.NUh.ALWAYS}),i}async function Q(e){return await M.xK.timeAsync("filterAutosaveSessions",async()=>{let r=await Promise.all(e.map(e=>(0,Y.mc)(e))),n=Date.now()-j(),i=e.filter((e,i)=>!r[i]&&e.lastUpdatedAt>n);return 0===i.length&&(0,S.Lo)("Autosave","Changes not available or already claimed by another tab",void 0,{logToConsole:d.NUh.ALWAYS}),i})}let ee=null;async function et(e){async function r(){for(let e of["figma-autosave-v2","figma-autosave-darklaunch-v2"])(0,m.MR)(e).catch(()=>{});try{let r=await ed((0,K.cu)(e),e=>Date.now()-e.lastUpdatedAt<j());if(r.length>0){let e=r.map(e=>e.lastUpdatedAt);(0,p.sx)("autosave garbage collect",{numSessions:r.length,localSessionCount:r.reduce((e,r)=>e+(r.isLocalFile?1:0),0),nodeCount:r.reduce((e,r)=>e+r.nodeCount,0),imageCount:r.reduce((e,r)=>e+r.imageCount,0),referencedNodeCount:r.reduce((e,r)=>e+r.referencedNodeCount,0),oldestSession:Math.min(...e),newestSession:Math.max(...e)})}}catch(e){(0,W.Lf)("Failed to garbage collect autosave changes",e)}(0,V.L_)()}ee||(ee=r()),await ee}async function er(e){let r={};for(let n of e){let e=await en(n);(e.unsyncedFiles.length>0||e.newFiles.length>0)&&(r[n]=e)}return r}async function en(e){let r=await (0,K.Z4)();if(!r)return{unsyncedFiles:[],newFiles:[],nextGarbageCollectionTimestamp:-1};let{editorSessionRowsWithChanges:n,newFilesByKey:i,newFilesWithChanges:a}=await ei(r,e),s=new Set,l=new Map,c=-1,d=[];for(let r of n)s.has(r.fileKey)||d.push((0,Y.mc)({userID:e,fileKey:r.fileKey,sessionID:r.sessionID}).then(e=>{if(!e){s.add(r.fileKey);let e=Math.max(l.get(r.fileKey)||0,r.lastUpdatedAt);l.set(r.fileKey,e),c=-1===c?r.lastUpdatedAt:Math.min(c,r.lastUpdatedAt)}}));return await Promise.all(d),{unsyncedFiles:Array.from(s).filter(e=>!(0,o.T)(e)).map(e=>({type:"autosave-file",fileKey:e,lastUpdatedAt:l.get(e)})),newFiles:Array.from(s).filter(e=>(0,o.T)(e)&&i.has(e)).map(e=>{let r=i.get(e);return es(r,l,a.has(r.fileKey))}).filter(({hasChanges:e})=>e),nextGarbageCollectionTimestamp:c}}async function ei(e,r){let n=e.transaction([K.Sp,K.jP,K.JR]),i=Error("original async stack");n.done.catch(e=>{e.cause=i,(0,T.$D)(c.e.UNOWNED,e)});let a=n.objectStore(K.Sp),o=await a.index(K.SW).getAll((0,K.cu)(r)),s=[],l=n.objectStore(K.jP);for(let e of o)if(await l.count((0,K.iM)(e.id))>0){for(let r of(await l.getAll((0,K.iM)(e.id))))if(!((0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation)||d.i6g&&!d.i6g.changesAreOnlyNewFileSystemChanges(r.changes,e.fileVersion)){s.push(e);break}}let u=new Map,m=n.objectStore(K.JR),p=new Set;for(let e of(await m.getAll((0,K.cu)(r)))){u.set(e.fileKey,e);let r=o.find(r=>r.fileKey===e.fileKey);if(r){let n=await l.getAll((0,K.iM)(r.id));(e_(e.fileKey,n)||e.hasChangedMetadata)&&p.add(e.fileKey)}}return{editorSessionRowsWithChanges:s,newFilesByKey:u,newFilesWithChanges:p}}async function ea(e){let r=await en(e);return r.unsyncedFiles.length>0||r.newFiles.length>0}async function eo(e){if((0,W.rQ)())return[];let r=await (0,K.Z4)();if(!r)return[];let{editorSessionRowsWithChanges:n,newFilesByKey:i,newFilesWithChanges:a}=await ei(r,e),o=new Set,s=new Map;for(let e of n)o.add(e.fileKey),s.set(e.fileKey,Math.max(s.get(e.fileKey)||0,e.lastUpdatedAt));let c=Array.from(o).map(e=>{let r=i.get(e);return r?es(r,s,a.has(r.fileKey)):null}).filter(l.Vq);return ev?.fileCreationManager?.updateNewFileInfoFromFiles(c),c}function es(e,r,n){return{type:"new-autosave-file",fileKey:e.fileKey,editorType:e.editorType,name:e.name,creatorId:e.userID,createdAt:e.createdAt,lastUpdatedAt:r.get(e.fileKey),orgId:e.orgID??null,hasChanges:n,hasChangedMetadata:e.hasChangedMetadata??!1}}async function el(e,r){if((0,W.rQ)())return;let n=async(e,n)=>{let i=n.objectStore(K.jP);return e_(r,await i.getAll((0,K.iM)(e.id)))};await ed((0,K.Zt)(e,r),n)}async function ec(e,r){await ed((0,K.cu)(e),e=>!r.includes(e.fileKey))}async function ed(e,r){let n=await (0,K.Z4)();if(!n)return[];let i=n.transaction([K.Sp,K.jP,K.DV,K.w8,K.JR],"readwrite"),a=Error("original async stack");i.done.catch(e=>{e.cause=a,(0,T.$D)(c.e.UNOWNED,e)});let s=i.objectStore(K.Sp),l=i.objectStore(K.jP),d=i.objectStore(K.DV),u=i.objectStore(K.w8),m=i.objectStore(K.JR),p=!1,h=await s.index(K.SW).getAll(e),_=[],g=[];for(let e of h)if(!(r&&await r(e,i))){let[r,n,i]=await Promise.all([l.count((0,K.iM)(e.id)),d.count((0,K.iM)(e.id)),u.count((0,K.iM)(e.id))]);g.push({userID:e.userID,fileKey:e.fileKey,sessionID:e.sessionID,isLocalFile:(0,o.T)(e.fileKey),nodeCount:r,imageCount:n,referencedNodeCount:i,lastUpdatedAt:e.lastUpdatedAt}),s.delete(e.id).catch(e=>z(e,"deleteAutosaveDataForSessions: delete editor session")),l.delete((0,K.iM)(e.id)).catch(e=>z(e,"deleteAutosaveDataForSessions: delete node changes")),d.delete((0,K.iM)(e.id)).catch(e=>z(e,"deleteAutosaveDataForSessions: delete images")),u.delete((0,K.iM)(e.id)).catch(e=>z(e,"deleteAutosaveDataForSessions: delete referenced nodes")),p=!0,(0,o.T)(e.fileKey)&&_.push({localFileKey:e.fileKey,userID:e.userID})}for(let{localFileKey:e,userID:r}of _)0===await s.index(K.SW).count((0,K.Zt)(r,e))?await m.delete((0,K.Zt)(r,e)):(0,W.W6)("Local file has remaining sessions");return await s.count()===0&&(await l.count()>0&&((0,W.W6)("Found leftover node changes in IDB"),l.delete((0,K.BE)()).catch(e=>z(e,"deleteAutosaveDataForSessions: delete leftover node changes"))),await d.count()>0&&((0,W.W6)("Found leftover images in IDB"),d.delete((0,K.IE)()).catch(e=>z(e,"deleteAutosaveDataForSessions: delete leftover images"))),await u.count()>0&&((0,W.W6)("Found leftover referenced node buffers in IDB"),u.delete((0,K.Ab)()).catch(e=>z(e,"deleteAutosaveDataForSessions: delete leftover referenced nodes")))),(0,K.dU)(i),await i.done,p&&(0,$.HZ)(),g}async function eu(e,r){await r.objectStore(K.jP).count((0,K.iM)(e))===0&&await r.objectStore(K.DV).count((0,K.iM)(e))===0&&await r.objectStore(K.w8).count((0,K.iM)(e))===0&&r.objectStore(K.Sp).delete(e).catch(e=>z(e,"deleteEditorSessionRowIfUnused: delete editor session"))}async function em(e,r){let n=await (0,K.Z4)();if(!n)throw Error("Could not open autosave data");let i=n.transaction([K.Sp,K.jP,K.DV,K.w8]),a=i.objectStore(K.Sp),o=i.objectStore(K.jP),s={};for(let e of(await a.getAll()))s[e.id]=e,s[e.id].changes={},s[e.id].snapshotsByNodeField__DEPRECATED={};for(let n of(s.unknown={changes:{},snapshotsByNodeField__DEPRECATED:{}},(await o.getAll()).slice(0,e)))n.editorSessionID in s?(s[n.editorSessionID].changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,s[n.editorSessionID].fileVersion,!!r)),s[n.editorSessionID].snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots):(s.unknown.changes[n.nodeID]=JSON.parse(d.i6g.encodeChangesAsJson(n.changes,1,!!r)),s.unknown.snapshotsByNodeField__DEPRECATED[n.nodeID]=n.snapshots);return await i.done,s}async function ep(e){let{transaction:r,commitPolicy:n,userID:i,fileKey:a,fileVersion:s,sessionID:l,oldSessionID:c,pendingChanges:u,pendingImages:m,pendingReferencedNodes:p,reason:h,isFirstCommitOfAutosaveSession:_}=e,f=r.objectStore(K.Sp),E=r.objectStore(K.jP),y=r.objectStore(K.DV),b=r.objectStore(K.w8),v=await q(i,a,c,r),I=0;v&&(I=(v.offlineEditingTime||0)+(_?0:Date.now()-v.lastUpdatedAt));let T=v?.id,S={userID:i,fileKey:a,sessionID:l,lastUpdatedAt:Date.now(),releaseTag:(0,g.Ay)().release_git_tag||"",fileVersion:s,lastCommitReason:h,offlineEditingTime:I,originalTrackingSessionId:(0,w.f)()};for(let e of(null==T?T=await f.add(S):(n===d.W2B.REPLACE_CHANGES&&(E.delete((0,K.iM)(T)).catch(e=>z(e,"commitChanges: replace node changes")),b.delete((0,K.iM)(T)).catch(e=>z(e,"commitChanges: replace referenced nodes"))),f.put({id:T,...S}).catch(e=>z(e,"commitChanges: update session"))),u))e.changes?E.put({editorSessionID:T,nodeID:e.nodeID,changes:e.changes}).catch(e=>z(e,"commitChanges: put node changes")):E.delete([T,e.nodeID]).catch(e=>z(e,"commitChanges: clear node changes"));for(let e of m)if(await y.count([T,e])===0){let r=d.Bko.getCompressedImage(e);r&&y.add({editorSessionID:T,hash:e,blob:r}).catch(e=>z(e,"commitChanges: add images"))}for(let e of p)b.add({editorSessionID:T,nodeID:e.nodeID,buffer:e.buffer}).catch(e=>z(e,"commitChanges: add referenced nodes"));let A=await E.count((0,K.iM)(T));return 0===A&&(await y.delete((0,K.iM)(T)),await b.delete((0,K.iM)(T))),await eu(T,r),(0,K.dU)(r),await r.done,(0,o.T)(a)&&(0,$.HZ)(),A}async function eh(e,r,n){(0,S.Lo)("Autosave","assigning file key for new file",{localFileKey:r,newFileKey:n}),await (0,K.DB)([K.Sp,K.JR],async i=>{let a=i.objectStore(K.Sp);(await a.index(K.SW).getAll((0,K.Zt)(e,r))).map(e=>{e.fileKey=n,a.put(e)}),i.objectStore(K.JR).delete((0,K.Zt)(e,r))},"readwrite"),(0,$.HZ)()}function e_(e,r){if(!(0,o.T)(e))return r.length>0;if(r.length>2)return!0;for(let{nodeID:e}of r)if(!["0:0","0:1"].includes(e))return!0;return!1}class eg{constructor(){this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}onCommitEvent(){this.nextEventPromiseResolve(),this.nextEventPromise=new Promise(e=>{this.nextEventPromiseResolve=e})}waitForNextCommit(){return this.nextEventPromise}}class ef{constructor(e,r){this.userID=e,this._state={type:"connecting"},this._fileKey="",this._hasReportedError=!1,this.fileCreationManager=null,this.fileKey=r,(0,W.rQ)()?(this._sessionsToRestore=Promise.resolve([]),this._state={type:"terminated"}):(0,o.T)(r)?this._sessionsToRestore=J(e,r):this._sessionsToRestore=J(e,r).then(e=>Q(e))}get fileKey(){return this._fileKey}get managerState(){return this._state.type}session(){return"connected"===this._state.type?this._state.session:null}set fileKey(e){this._fileKey=e;let r=(0,o.T)(e)?e:null;f.zl.set(H.h,r)}async assignFileKeyForLocalFile(e){if("connected"!==this._state.type){"connecting"===this._state.type&&(0,W.W6)("Still connecting");return}try{await this._state.session.enqueueAssignFileKeyForLocalFile(e,()=>{this.fileKey=e,this.fileCreationManager=null})}catch(e){this.terminateDueToError("unable to update file key",!0)}}async terminateAndWaitForCleanup(){let e="connected"===this._state.type?this._state.session:null;this._state={type:"terminated"},f.zl.set(H.h,null),await e?.destroy().catch(()=>W.W6("Failed to destroy autosave session"))}terminateDueToError(e,r){(0,S.xi)("Autosave","autosave disabled",{message:e}),r&&(0,W.W6)(e);let n="connected"===this._state.type;this._hasReportedError||((0,p.sx)("autosave_disabled",{message:e,hasSessionInProgress:n},{forwardToDatadog:!0}),this._hasReportedError=!0),this.terminateAndWaitForCleanup().catch(r=>(0,W.W6)("Failed to terminate autosave",{message:e,error:r.message}))}async onConnect(e){if("connecting"!==this._state.type)return;try{await (0,K.Fy)()}catch(e){(0,S.Lo)("Autosave","IDB is not available in the current browser session.",void 0,{logToConsole:d.NUh.ALWAYS}),(0,p.sx)("autosave_db_failure",{message:e.message}),this.terminateDueToError("unable to open DB",!1);return}let r=new v.M4;r.start();let n=await this._sessionsToRestore;(0,o.T)(this.fileKey)&&(n.length>1?((0,W.W6)("Local file has multiple sessions",{sessionCount:n.length,sessionIds:n.map(e=>e.sessionID).slice(0,5).join(", ")}),this.terminateDueToError("Local file has multiple sessions",!1)):1===n.length&&0!==n[0].sessionID&&((0,W.W6)("Local file with changes from non-zero session",{existingSessionId:n[0].sessionID}),this.terminateDueToError("Local file with changes from non-zero session",!1)));let i=await (0,Y.A2)({userID:this.userID,fileKey:this.fileKey,sessionID:e});if(!i){this.terminateDueToError("unable to acquire lock",!0);return}this._state={type:"connected",session:new eb(e,this,r,n,i)}}async onConnectNewFile(e){let r=this.fileKey;if((0,o.T)(r))try{await (0,K.DB)([K.JR],async n=>{let i=n.objectStore(K.JR);if(await i.get((0,K.Zt)(this.userID,r)))return;let a={fileKey:r,userID:this.userID,editorType:e.editorType,name:e.fileName??(0,C.t)("fullscreen.fullscreen_view_selector.untitled"),createdAt:Date.now(),orgID:e.org_id};await i.put(a)},"readwrite"),this.fileCreationManager&&(0,W.W6)("File creation manager already exists",{fileKey:r}),this.fileCreationManager=new ey(r,e)}catch(e){this.terminateDueToError("unable to set new file info",!0);return}await this.onConnect(0)}}async function eE(e,r,n){if((0,o.T)(r)&&e)try{await (0,K.DB)([K.JR],async i=>{let a=i.objectStore(K.JR),o=await a.get((0,K.Zt)(e,r));o&&await a.put({...o,name:n,hasChangedMetadata:!0})},"readwrite"),(0,$.HZ)()}catch(e){(0,T.$D)(c.e.SCENEGRAPH_AND_SYNC,Error("unable to update new file info"))}}class ey{constructor(e,r){this._pendingRealFileKey=null,this.fileKey=e,this._newFileInfo=r}get newFileInfo(){return this._newFileInfo}updateNewFileInfo(e){this._newFileInfo={...this._newFileInfo,...e}}updateNewFileInfoFromFiles(e){let r=e.find(e=>e.fileKey===this.fileKey);if(r){let e=(0,B.B)(r,this.newFileInfo.openNewFileIn);this.updateNewFileInfo(e)}}get pendingRealFileKey(){return this._pendingRealFileKey}assignPendingRealFileKey(e){this._pendingRealFileKey=e,$.hp.sendToAllTabs($.m6,{localFileKey:this.fileKey,realFileKey:e})}}class eb{constructor(e,r,n,i,a){this.sessionID=e,this.manager=r,this.restoreTimer=n,this.changesToRestore=i,this.webLock=a,this.transactionQueue=new G.O,this.commitEventListener=new eg,this.restoring=!1,this.consecutiveCommitsAddingChanges=0,this.activityLogger=navigator.storage?.estimate?new V.hS:null,this.restoreAnalytics={hadChangesToRestore:!1,fileKey:"",time:0,timeToStartSession:0,timeToApply:0,timeToSync:0,sessionsCheckTime:0,numberOfBytes:0,numberOfNodes:0,numberOfReferencedNodes:0,numberOfRestoredReferencedNodes:0,numberOfSessions:0,numberOfImages:0,neededToMigrate:!1,persistentStorage:!1,changesAreAllDerivedData:!1,nodeFields:[],stagingDump:void 0,lastUpdatedAt:void 0,releaseTag:void 0,isLocalFile:!1,offlineEditingTime:void 0,lastCommitReason:void 0,originalTrackingSessionId:void 0,storageUsageBytes:void 0,storageQuotaBytes:void 0,isIncremental:!1},this.reportedFullQueue=!1,this.reportedStorageError=!1,this.hasCommitted=!1,this.restoreAnalytics.timeToStartSession=this.restoreTimer.getElapsedTime()}getActivityLogger(){return this.activityLogger}async destroy(){await this.webLock.release().catch(e=>z(e,"AutosaveSession.destroy: releasing session lock"))}sessionTransaction(e,r,n,i){let a=(0,K.DB)(r,n,i);return a.catch(r=>{(0,p.sx)("autosave_transaction_failure",{transactionName:e,message:r.message}),this.manager.terminateDueToError(`${e} transaction failed`,!1)}),a}readyToAcceptChanges(){let e=this.transactionQueue.length>=10;return e&&!this.reportedFullQueue&&(this.reportedFullQueue=!0,(0,W.W6)("Autosave transaction queue is backed up.")),!this.restoring&&!e}hasOngoingCommitTask(){return!this.transactionQueue.isComplete()}async tryToFlushAutosave(){this.readyToAcceptChanges()&&(d.i6g.flushAutosave(),await this.transactionQueue.waitForCompletion())}async enqueueAutosaveCommit(e){await this.transactionQueue.enqueue(()=>this.commitAutosave(e))}async commitAutosave(e){let{changes:r,commitPolicy:n,fileVersion:i,fileKey:a,newSessionID:o,numberOfUncleanRegisters:s,reason:l}=e;if(!this.readyToAcceptChanges()){this.manager.terminateDueToError("Committing, but not ready to accept changes",!0);return}if(o<0){this.manager.terminateDueToError("Unexpected sessionID < 0",!0);return}if(a&&a!==this.manager.fileKey){(0,W.W6)("Web file key out of sync with fullscreen file key",{"web file key":this.manager.fileKey,"fullscreen file key":a}),this.manager.terminateDueToError("Web file key out of sync with fullscreen file key",!1);return}this.activityLogger?.recordAutosaveCommit(this.manager.fileKey,this.manager.userID,this.sessionID,e);let c=this.sessionID,u=null;if(o!==this.sessionID){u=this.webLock,this.sessionID=o;let e=await (0,Y.A2)({userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID});if(!e){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=e}if(!(0,Y.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let m=r.changedNodes.length,p=r.changedNodes.map(e=>({nodeID:e.nodeID,changes:e.changes})).concat(r.clearedNodes.map(e=>({nodeID:e,changes:null,snapshots:null}))),h=[];for(let e of r.referencedNodes)h.push({nodeID:e.nodeID,buffer:e.changes});let g=new Set;for(let e of r.imageHashes)g.add(e);let f=await this.sessionTransaction("commit",[K.Sp,K.jP,K.DV,K.w8],async e=>await ep({transaction:e,commitPolicy:n,userID:this.manager.userID,fileKey:this.manager.fileKey,fileVersion:i,oldSessionID:c,sessionID:this.sessionID,pendingChanges:p,pendingImages:g,pendingReferencedNodes:h,reason:l,isFirstCommitOfAutosaveSession:!this.hasCommitted}),"readwrite");this.hasCommitted=!0;let E={stored_node_changes:f,unclean_registers:s,changed_nodes:m,cleared_nodes:r.clearedNodes.length,referenced_nodes:h.length,pending_images:g.size,commit_policy:d.W2B[n],session_id:this.sessionID,new_session_id:o,commit_reason:void 0!==l?d.uXP[l]:void 0,file_key:a,manager_file_key:this.manager.fileKey};if((0,S.Lo)("Autosave","commit completed",E),(0,R.ds)("autosave_commit_completed",a,_.D.getState(),E),!this.reportedStorageError&&void 0!==s&&s!==f){if(f>0&&0===s){let e=e=>{if(!(e.length>5))return e;{let r=e.slice(0,5);return r.push("..."),r}},n=await em(5,!0);(0,S.x1)("Autosave","Dumping autosave since we expect IDB to be empty",{debug:n,changedNodes:e(r.changedNodes.map(e=>e.nodeID)),clearedNodes:e(r.clearedNodes),referencedNodes:e(r.referencedNodes.map(e=>e.nodeID)),imageHashes:e(r.imageHashes),currentSessionID:d.h3O.currentSessionID(),commitQueueLength:this.transactionQueue.length}),this.manager.terminateDueToError("Expected IDB to be empty after synchronizing with multiplayer",!0)}else f>s?this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has more)",!0):f<s&&this.manager.terminateDueToError("Expected IDB to have at many node changes as registers (currently has less)",!0);this.reportedStorageError=!0}null!=u&&u.release().catch(e=>z(e,"commitAutosave: release lock")),this.commitEventListener.onCommitEvent(),n===d.W2B.ADD_CHANGES?(this.consecutiveCommitsAddingChanges++,this.consecutiveCommitsAddingChanges>=4&&(0,A.YQ)({id:$.Cr})):this.consecutiveCommitsAddingChanges=0}async restoreAutosaveIfNeeded(){if(d.i6g.fileIsReadOnly())return;this.restoreAnalytics.fileKey=this.manager.fileKey,this.restoreAnalytics.isLocalFile=(0,o.T)(this.manager.fileKey),this.restoring=!0;let e=function(){if(!I.Ay.chrome||!navigator.storage?.persist)return Promise.resolve(!1);let e=new Promise(e=>setTimeout(()=>e(!1),200));return Promise.race([navigator.storage.persist(),e])}(),r=(0,W.U4)(),n=this.changesToRestore;if(this.changesToRestore=[],this.restoreAnalytics.sessionsCheckTime=this.restoreTimer.getElapsedTime(),this.restoreAnalytics.numberOfSessions=n.length,n.length>0){let e=n[0];this.restoreAnalytics.lastUpdatedAt=e.lastUpdatedAt,this.restoreAnalytics.offlineEditingTime=e.offlineEditingTime,this.restoreAnalytics.originalTrackingSessionId=e.originalTrackingSessionId,this.restoreAnalytics.lastCommitReason=e.lastCommitReason?d.uXP[e.lastCommitReason]:void 0,this.restoreAnalytics.releaseTag=e.releaseTag,await this.restoreChangesForSessionRows(n)}this.restoreAnalytics.persistentStorage=await e;let{usageBytes:i,quotaBytes:a}=await r;this.restoreAnalytics.storageUsageBytes=i,this.restoreAnalytics.storageQuotaBytes=a,this.restoreAnalytics.isIncremental=d.h3O.isIncrementalSession(),this.restoreTimer.stop(),this.restoreAnalytics.time=this.restoreTimer.getElapsedTime(),(0,R.ds)("autosave_restore_on_load",this.restoreAnalytics.fileKey,_.D.getState(),this.restoreAnalytics,{forwardToDatadog:!0}),this.restoring=!1}async restoreChangesForSessionRows(e){if(!(0,Y.LX)(this.webLock,{userID:this.manager.userID,fileKey:this.manager.fileKey,sessionID:this.sessionID})){this.manager.terminateDueToError("lock is not for the current session",!1);return}let{changesByNode:r,referencedNodeMap:n,fileVersion:i}=await this.sessionTransaction("restore",[K.Sp,K.jP,K.DV,K.w8],async r=>await X(r,this.sessionID,e),"readwrite"),a=r.size>0;for(let e of(a?((0,o.T)(this.manager.fileKey)||await (0,U.m)(this.manager.fileKey,"Offline sync","Before syncing changes",_.D.dispatch).catch(e=>(0,W.W6)("Failed to create before savepoint",{status:e.status,message:e.data?.message})),(0,S.Lo)("Autosave","Restoring auto-saved data",void 0,{logToConsole:d.NUh.ALWAYS}),await this.restoreChanges(r,n,i)):(0,S.Lo)("Autosave","Changes are empty!",void 0,{logToConsole:d.NUh.ALWAYS}),this.commitEventListener.waitForNextCommit().then(()=>{$.hp.sendToOtherTabs($.a)}).catch(e=>z(e,"restoreChangesForSessionRows: waitForNextCommit")),this.restoreAnalytics.hadChangesToRestore=a,this.restoreAnalytics.numberOfBytes=0,this.restoreAnalytics.numberOfNodes=r.size,this.restoreAnalytics.numberOfReferencedNodes=n.size,r.values()))this.restoreAnalytics.numberOfBytes+=e.length}async restoreChanges(e,r,n){let i=Array.from(e.entries()).sort(([e,r],[n,i])=>e<n?-1:1),a=(0,g.kc)().suppress_unsaved_changes_ui&&(0,g.kc)().incremental_loading_validation&&i.every(([e,[r]])=>d.i6g.changesAreOnlyNewFileSystemChanges(r,n));for(let[e,[r,a]]of i)d.i6g.loadAutosavedNodeChanges(e,r,a,n);if(this.restoreAnalytics.changesAreAllDerivedData=d.i6g.changesAreAllDerivedData(),this.restoreAnalytics.nodeFields=d.i6g.restoredNodeFieldNames(),this.restoreAnalytics.neededToMigrate=d.i6g.currentFileVersion()>n,(0,D.Ff)()){(0,R.ds)("autosave_load_containing_pages_start",this.manager.fileKey,_.D.getState(),{node_count:e.size,fileKey:this.manager.fileKey});let r=performance.now(),n=new Set(e.keys());for(let e of d.i6g.getParentIndexChanges())n.add(e);await (0,D.Xl)(n),(0,R.ds)("autosave_load_containing_pages_end",this.manager.fileKey,_.D.getState(),{node_count:e.size,timeElapsed:performance.now()-r,fileKey:this.manager.fileKey})}let s=d.i6g.getImagesUsedInAutosavedChanges().split(" ");this.restoreAnalytics.numberOfImages=await this.restoreImagesIfAvailable(s);let l=this.restoreAvailableReferencedNodes(r);d.i6g.migrateAndSetAutosaveChanges(l,n),u.l7.autosave("autosave",()=>d.i6g.applyAutosavedChanges()),this.restoreAnalytics.timeToApply=this.restoreTimer.getElapsedTime(),(0,S.Lo)("Autosave","Successfully applied auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS});let c=()=>{_.D.dispatch(L.Q.enqueueFront({notification:{type:N._.AUTOSAVE_CHANGES_RESTORED,message:"Your offline changes were synced"}})),(0,S.Lo)("Autosave","Successfully synced auto-saved changes",void 0,{logToConsole:d.NUh.ALWAYS})};(0,o.T)(this.manager.fileKey)?(0,k.l)().then(()=>{this.manager.fileKey!==_.D.getState().openFile?.key||a||c()}):(await (0,k.l)(),this.restoreAnalytics.timeToSync=this.restoreTimer.getElapsedTime(),await (0,U.m)(this.manager.fileKey,"Offline sync","After syncing changes",_.D.dispatch).catch(e=>{(0,R.ds)("autosave_skip_after_checkpoint",this.manager.fileKey,_.D.getState(),{error:e.data?.message}),(0,W.W6)("Failed to create after savepoint",{status:e.status,message:e.data?.message})}),a||c())}async restoreImagesIfAvailable(e){let r=0;return await this.sessionTransaction("restore images",[K.Sp,K.DV],async n=>{let i=await this.currentEditorSessionID(n);if(!i)return;let a=n.objectStore(K.DV);for(let n of e){let e=await a.get([i,n]);e&&(d.i6g.restoreImageBytes(n,e.blob),r++)}await n.done}),r}restoreAvailableReferencedNodes(e){let r=[];for(let[n,i]of e)d.i6g.restoreReferencedNodeFile(n,i),r.push(n);return r}currentEditorSessionID(e){return Z(this.manager.userID,this.manager.fileKey,this.sessionID,e)}async getNodeChangesForSession(){let e=await (0,K.Z4)();if(!e)throw Error("Unable to get DB");let r=e.transaction([K.Sp,K.jP],"readonly"),n=r.objectStore(K.jP),i=await this.currentEditorSessionID(r);return i?await n.getAll((0,K.iM)(i)):[]}async getNodeChangeCount(){return(await this.getNodeChangesForSession()).length}async hasPersistedUserChanges(){let e=await this.getNodeChangesForSession();return e_(this.manager.fileKey,e)}async enqueueAssignFileKeyForLocalFile(e,r){let n=this.manager.fileKey;if(!(0,o.T)(n)){(0,W.W6)("Only local file keys can be reassigned");return}if((0,o.T)(e)){(0,W.W6)("Cannot reassign file key to a local file key");return}await this.transactionQueue.enqueue(async()=>{let i=this.webLock,a=await (0,Y.A2)({userID:this.manager.userID,fileKey:e,sessionID:this.sessionID});if(!a){this.manager.terminateDueToError("unable to acquire lock",!0);return}this.webLock=a,await eh(this.manager.userID,n,e),r(),await i?.release()})}}let ev=null;function eI(){return ev}function eT(e,r){if(ev){if(ev.fileKey===e)return(0,S.Lo)("Autosave","Autosave manager already exists"),ev;(0,W.W6)("Manager already exists. Updating file key",{"current fileKey":ev.fileKey,"new fileKey":e}),ev.terminateAndWaitForCleanup(),ev=null}return(0,S.ED)("Autosave","Create autosave manager",{fileKey:e}),ev=new ef(r,e)}function eS(){ew().catch(e=>z(e,"failed to destroy autosave manager"))}async function ew(){if((0,S.ED)("Autosave","Destroy autosave manager"),!ev){(0,S.Lo)("Autosave","No manager to destroy");return}let e=ev;ev=null,await e.terminateAndWaitForCleanup()}function eA(e,{offlineFiles:r}){let n={};for(let i in e){let e=r[i];e&&(n[i]=e)}return n}let eC=x.M4.Query({async fetch({userId:e}){if(!e)return{};let r=await eo(e),n={};for(let e of r)n[e.fileKey]=e;return n}});var eN=(e=>(e.OFFLINE_FILE_TILE="OFFLINE_FILE_TILE",e.EDITOR="EDITOR",e))(eN||{});let eL=x.M4.Mutation(({fileKey:e,name:r,source:n},{atomStore:i,query:a,reduxStore:o})=>{if(i.set(eD,null),!r)return;let s=o.getState().user?.id??null;a.mutate(eC({userId:s}),n=>{let i=n[e];i&&(i.name=r)});let l=ev?.fileCreationManager;return l&&(l.fileKey===e?(l.updateNewFileInfo({fileName:r}),l.pendingRealFileKey&&_.D.dispatch(O.yJ({file:{key:l.pendingRealFileKey,name:r},userInitiated:!0}))):(0,W.W6)("File key in rename mutation does not match current FileCreationManager file key",{mutationFileKey:e,fileCreationManagerFileKey:l.fileKey})),(0,p.sx)("Rename New Autosave File",{source:n,isOffline:!navigator.onLine}),eE(s,e,r)}),eO=(0,E.eU)(e=>{let r=e(P.kS),n={};if(r){let i=e(eC({userId:r}));for(let[e,r]of Object.entries(i?.data??{}))r.hasChanges&&(n[e]=r)}return n}),eR=(0,E.eU)(e=>{let r=e(H.h),n=e(P.kS);if(r&&n){let i=e(eC({userId:n})),a=i?.data??{};if(r in a)return a[r]}return null});function eP(){return f.zl.get(eR)}let eD=(0,E.eU)(null);function ek(e){f.zl.set(eD,e.fileKey)}let eM=(0,E.eU)({});function eF(e,r){let n=f.zl.get(eM);f.zl.set(eM,{...n,[e]:r})}function ex(e){let r=(0,a.d4)(r=>!!r.autosave.unclaimedFilesWithChangesInIDB.find(r=>r.fileKey===e)),n=(0,h.l)(F.dDF,r?e:"");return r?n:b.Qw.loaded(!1)}function eU(){let e=(0,a.d4)(e=>e.autosave.unclaimedFilesWithChangesInIDB),r=(0,a.d4)(e=>e.autosave.unclaimedFilesCreatedOffline),n=(0,y.p)(F.dDF,i.useMemo(()=>e.map(({fileKey:e})=>({key:e})),[e])),o=i.useMemo(()=>n.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[n]),l=(0,a.d4)(e=>e.fileByKey);return i.useMemo(()=>({unsyncedFiles:(0,s.WI)(e.map(({fileKey:e,lastUpdatedAt:r},n)=>{let i=l[e];return i&&!i.trashed_at&&o[n].unwrapOr(!1)?{type:"autosave-file",fileKey:e,lastUpdatedAt:r,file:i}:null})),localUnsyncedFiles:r}),[e,r,l,o])}(0,E.eU)(e=>{let r={...e(eO)},n=e(eD),i=e(eM),a={};for(let e in r)e in i||(a[e]=r[e]);if(n&&n in a){let e=a[n];a[n]={...e,isRenaming:!0}}return a})},742809:(e,r,n)=>{n.d(r,{X:()=>d});var i=n(154254),a=n(980820),o=n(113853),s=n(662275),l=n(731078),c=n(648834);let d=(0,a.nF)((e,{entity:r,entityType:n,shape:a})=>{let l=document.createElement("input");l.type="file",l.accept="image/*",l.className=i.cx.hidden.$,l.style.display="none",l.onchange=()=>{let i=l.files;null!==i&&i.length>0&&(e.dispatch(o.s6({entity:r,entityType:n,file:i[0],shape:a||"CIRCLE"})),e.dispatch(s.to({type:c._,showModalsBeneath:!0})))},document.body.appendChild(l),l.click()});(0,a.nF)((e,{team:r})=>{e.dispatch(d({entity:r,entityType:l.ck.TEAM,shape:"SQUARE"}))})},387608:(e,r,n)=>{n.d(r,{YL:()=>h});var i=n(411855);n(188507);var a=n(268853);n(207286);var o=n(181912);n(915440);var s=n(752553);n(391388);var l=n(776621);n(411045),n(108514).T;var c=n(99506),d=n(279453),u=n(622139),m=n(304769),p=n(13513);function h(e,r){let n=function(e,r){let[n]=(0,s.IT)((0,d.JRW)({planParentId:e.parentId,planParentType:e.type===c.OL.ORG?c.iX.ORG:c.iX.TEAM,billingInterval:u.NW.YEAR}));return(0,i.useMemo)(()=>n.transform(e=>(function(e,r){let n=e.pendingConfirmedRenewalSeatCounts?.filter(e=>o.A(e.billingPeriodStart).add(1,"day").toDate()>r&&o.A(e.billingPeriodStart).subtract(1,"day").toDate()<r);if(!n||!n.length)return null;let i=p.N_.dict(e=>0),s=p.N_.dict(e=>0);return n.forEach(e=>{if(!e.billableProductKey||!(0,m.dA)(e.billableProductKey)){(0,l.$D)(a.e.SCALE,Error(`Confirmed seat count with unexpected billable product key: ${e.billableProductKey}`));return}let r=e.billableProductKey;i[r]=parseInt(e.surplusSeatCount??"0"),s[r]=parseInt(e.totalSeatCount??"0")}),{surplus:i,total:s}})(e,r)),[r,n])}(e,r),[h]=(0,s.mI)(n);if("loaded"!==h.status){let e=Error("Error fetching next annual renewal confirmed seat counts");throw(0,l.$D)(a.e.SCALE,e),e}return h.data}},864319:(e,r,n)=>{n.d(r,{AG:()=>S,Aj:()=>y,KS:()=>T,NT:()=>f,TA:()=>A,Zx:()=>h,g7:()=>v});var i=n(268853),a=n(776621),o=n(807539),s=n(330654),l=n(99506),c=n(36816),d=n(304769),u=n(13513),m=n(720647);let p={design:d.ud.DESIGN,whiteboard:d.ud.FIGJAM,figjam:d.ud.FIGJAM,dev_mode:d.ud.DEV_MODE,slides:d.ud.SLIDES,collaborator:d.ud.COLLABORATOR,developer:d.ud.DEVELOPER,expert:d.ud.EXPERT};function h(e){return p[e]??e}(0,o.x)()(p);let _={design:l.ud.DESIGN,whiteboard:l.ud.WHITEBOARD,figjam:l.ud.WHITEBOARD,dev_mode:l.ud.DEV_MODE,slides:l.ud.SLIDES,collaborator:l.ud.COLLABORATOR,developer:l.ud.DEVELOPER,expert:l.ud.EXPERT};(0,o.x)()(_);let g={design:m.lM.DESIGN,whiteboard:m.lM.FIGJAM,figjam:m.lM.FIGJAM,dev_mode:m.lM.DEV_MODE,slides:m.lM.SLIDES};function f(e){return g[e]??e}(0,o.x)()(g);let E={design:m.oM.DESIGN,whiteboard:m.oM.WHITEBOARD,figjam:m.oM.WHITEBOARD,dev_mode:m.oM.DEV_MODE,slides:m.oM.SLIDES};function y(e){return E[e]??e}(0,o.x)()(E);let b={design:c.j4.DESIGN,whiteboard:c.j4.WHITEBOARD,figjam:c.j4.WHITEBOARD};function v(e){return s.object(u.dk.dict(()=>e.optional()))}(0,o.x)()(b);let I={[d.ud.DESIGN]:10,[d.ud.DEV_MODE]:20,[d.ud.FIGJAM]:30,[d.ud.SLIDES]:40,[d.ud.EXPERT]:50,[d.ud.DEVELOPER]:60,[d.ud.COLLABORATOR]:70};function T(e){return I[e]}function S(e,r){return I[e]-I[r]}let w=u.N_.dict();function A(e){if(!e)return null;let r=w[h(e.key)];return r?{key:r,license_types:e.licenseTypes.map(e=>f(e))}:((0,a.$D)(i.e.BILLING,Error(`convertLgSeatTypeProduct encountered unexpected seat type key: ${e.key}`)),null)}},6988:(e,r,n)=>{n(411855),n(188507),n(946689),n(154254),n(939863),n(738269),n(662275),n(789586),n(622139)},789586:(e,r,n)=>{var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(456772),c=n(946689),d=n(154254),u=n(881388),m=n(552985),p=n(939863),h=n(662275),_=n(995852),g=n(845213),f=n(237870),E=n(585878),y=n(626208);let b=i.memo(function(e){let r=(0,a.wA)(),{displayName:n,legalName:o}=e,[f,b]=i.useState(n||""),[v,I]=i.useState(o||""),{isLoading:T,withLoading:S}=(0,m.R)(),w=()=>{r(h.Ce())},A=async n=>{n.preventDefault(),await S(async()=>{if(e.updateNameImmediately&&e.team)try{e.canSeeBillingAddressExp?await (0,l.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:f}}},g.$.updateDisplayName({teamId:e.team.id,updatedDisplayName:f})):await (0,l.WB)().optimisticallyUpdate({Plan:{[`team::${e.team.id}`]:{name:f}}},g.$.updateTeamName({teamId:e.team.id,updatedDisplayName:f,updatedLegalName:v}))}catch(i){let n=e.canSeeBillingAddressExp?(0,p.t)("update_company_details_modal.update_display_name.error"):(0,p.t)("update_company_details_modal.update_team_name.error");throw r(u.s.error((0,p.Jv)(i)||n)),i}else r(_.yy({legalName:v,displayName:f}));w()})};return i.createElement(E.XV,{onClose:w,title:e.modalTitle,minWidth:448,maxWidth:448,fixedTop:!0},i.createElement("form",{onSubmit:A,className:d.cx.p16.$},i.createElement("div",{className:d.cx.mt4.$},i.createElement("label",{htmlFor:"teamName",className:d.cx.colorTextSecondary.$},i.createElement("strong",{className:d.cx.block.colorText.$},(0,p.tx)("pro_cart.review.edit_details.team_name_label")),(0,p.tx)("pro_cart.review.edit_details.team_name_description")),i.createElement(c.ks,{value:f,id:"teamName",onChange:e=>{b(e.target.value)},dataTestId:"company-team-name",className:d.cx.block.mt8.wFull.$})),!e.canSeeBillingAddressExp&&i.createElement("div",{className:d.cx.mt20.$},i.createElement("label",{htmlFor:"legalName",className:d.cx.colorTextSecondary.$},i.createElement("strong",{className:d.cx.block.colorText.$},(0,p.tx)("pro_cart.review.edit_details.company_name_label")),(0,p.tx)("pro_cart.review.edit_details.company_name_description")),i.createElement(c.ks,{value:v,id:"legalName",onChange:e=>{I(e.target.value)},dataTestId:"company-name",className:d.cx.block.mt8.wFull.$})),i.createElement("div",{className:s()(y.v0,y.hF)},i.createElement(c.tM,{onClick:w,disabled:T},(0,p.tx)("pro_cart.review.edit_details.cancel")),i.createElement(c.vd,{className:y.pL,disabled:T,type:"submit"},(0,p.tx)("pro_cart.review.edit_details.save")))))});(0,f.Ju)(b,"UpdateCompanyDetailsModal")},582410:(e,r,n)=>{n.d(r,{AG:()=>s,H5:()=>o});var i=n(545697),a=n(720647);let o=new i.X([a.G_.DESIGN,a.G_.FIGJAM,a.G_.DEV_MODE]);function s(e,r){let n={[a.vu]:0,[a.PE]:1,[a.Mg]:2,[a.tL]:2};return n[e]-n[r]}new i.X([a.G_.DESIGN,a.Mg,a.G_.DEV_MODE])},720647:(e,r,n)=>{n.d(r,{G_:()=>m,Mg:()=>d,PE:()=>u,Te:()=>p,_R:()=>v,if:()=>E,iy:()=>y,lM:()=>h,oM:()=>g,tL:()=>c,vc:()=>f,vu:()=>l,wR:()=>b,wk:()=>_});var i=n(140593),a=n(330654),o=n(99506),s=(e=>(e.DESIGN="design",e.FIGJAM="figjam",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.SITES="sites",e))(s||{});let l="design",c="figjam",d="whiteboard",u="dev_mode",m={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode"};a.nativeEnum(m);let p={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode"};a.nativeEnum(p);let h={DESIGN:"design",FIGJAM:"figjam",DEV_MODE:"dev_mode",SLIDES:"slides"},_=a.nativeEnum(h),g={DESIGN:"design",WHITEBOARD:"whiteboard",DEV_MODE:"dev_mode",SLIDES:"slides"};function f(e){switch(e){case o._Y.DESIGN:case o._Y.SLIDES:case o._Y.SITES:case o._Y.COOPER:case null:return p.DESIGN;case o._Y.WHITEBOARD:return p.WHITEBOARD;default:(0,i.xb)(e)}}function E(e){switch(e){case o._Y.DESIGN:case o._Y.SITES:case o._Y.COOPER:case null:return g.DESIGN;case o._Y.WHITEBOARD:return g.WHITEBOARD;case o._Y.SLIDES:return g.SLIDES;default:(0,i.xb)(e)}}function y(e){return function(e){switch(e){case"design":case"dev_mode":case"sites":return o._Y.DESIGN;case"whiteboard":case"figjam":return o._Y.WHITEBOARD;case"slides":return o._Y.SLIDES;default:(0,i.xb)(e)}}(function(e){switch(e){case o.G_.DESIGN:return h.DESIGN;case o.G_.DEV_MODE:return h.DEV_MODE;case o.G_.WHITEBOARD:return h.FIGJAM;case o.G_.SLIDES:return h.SLIDES;default:(0,i.xb)(e)}}(e))}function b(e){switch(e){case o._Y.DESIGN:case o._Y.COOPER:case o._Y.SITES:case null:return o.G_.DESIGN;case o._Y.WHITEBOARD:return o.G_.WHITEBOARD;case o._Y.SLIDES:return o.G_.SLIDES;default:(0,i.xb)(e)}}function v(e,r){return e===o._Y.WHITEBOARD?r?.whiteboardPaidStatus===o.dQ.RESTRICTED:e===o._Y.DESIGN&&r?.designPaidStatus===o.dQ.RESTRICTED}a.nativeEnum(g)},457150:(e,r,n)=>{n.d(r,{vK:()=>u}),n(268853),n(776621),n(96328);var i=n(330654);n(939863);var a=(e=>(e.ACH_DEBIT="ach_debit",e.CARD="card",e.SEPA_DEBIT="sepa_debit",e.UNKNOWN="unknown",e))(a||{}),o=(e=>(e.AMEX="amex",e.DINERS="diners",e.DISCOVER="discover",e.EFTPOS_AU="eftpos_au",e.JCB="jcb",e.MASTERCARD="mastercard",e.UNIONPAY="unionpay",e.VISA="visa",e.UNKNOWN="unknown",e))(o||{});let s=i.object({type:i.literal("ach_debit"),last4:i.string().nullable()}),l=i.object({type:i.literal("card"),brand:i.nativeEnum(o).nullable(),last4:i.string().nullable()}),c=i.object({type:i.literal("sepa_debit"),last4:i.string().nullable()}),d=i.object({type:i.literal("unknown"),stripe_type:i.string()}),u=i.union([s,l,c,d])},459279:(e,r,n)=>{n.d(r,{XS:()=>y,ar:()=>f,fA:()=>g,mR:()=>b,qH:()=>m}),n(268853),n(740222),n(181912),n(776621),n(96328);var i=n(330654);n(939863);var a=n(99506),o=n(798614),s=n(622139),l=n(304769),c=n(13513),d=n(864319),u=n(457150),m=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e))(m||{}),p=(e=>(e.MANUAL="manual",e.SUBSCRIPTION_CREATED="subscription_created",e.SUBSCRIPTION_RENEWED="subscription_renewed",e.CATCH_UP="catch_up",e.TRUE_UP="true_up",e))(p||{}),h=(e=>(e.OPEN="open",e.PAID="paid",e.CANCELED="canceled",e))(h||{});let _=i.object({status:i.nativeEnum(h),payment_method:u.vK.nullable()});var g=(e=>(e.LEGACY="legacy",e.PRORATED="prorated",e))(g||{});(0,d.g7)(i.object({net_quantity:i.number(),amount:i.number(),amount_excluding_credits:i.number()}));let f=i.object({id:i.string(),description:i.string(),issued_at:i.string(),paid_at:i.string().nullable(),period_starts_at:i.string(),period_ends_at:i.string(),past_due_at:i.string(),plan_parent_type:i.nativeEnum(a.OL),billing_interval:i.nativeEnum(s.NW),total:i.number(),state:i.nativeEnum(m),subtype:i.nativeEnum(p),currency:o.D,hosted_invoice_url:i.string().nullable(),invoice_pdf_url:i.string().nullable(),number:i.string().nullable(),total_tax_amount:i.number(),subtotal:i.number(),payments:_.array(),billing_mechanics:i.nativeEnum(g),billable_products_kind:i.nativeEnum(a.FE),org_invoice_details:i.object({is_locked:i.boolean().nullable(),is_skipped_trueup:i.boolean().nullable(),seat_floors:(0,d.g7)(i.number().nullable()).nullable(),billable_seats_now:(0,d.g7)(i.number().nullable()).nullable()}).nullish(),total_credits_amount:i.number(),net_seats_quantity:i.number(),seats_breakdown:(0,d.g7)(i.object({net_quantity:i.number(),amount:i.number(),amount_excluding_credits:i.number()}))});var E=(e=>(e.PENDING="pending",e.OPEN="open",e.PAID="paid",e.UNCOLLECTIBLE="uncollectible",e.VOID="void",e.OVERDUE="overdue",e))(E||{});function y(e){return e.billable_products_kind===a.FE.BUNDLE}function b(e){return e.plan_parent_type===a.OL.TEAM?c.Oq.exclude([l.ud.DEV_MODE]):c.Oq}var v=(e=>(e.REVIEW="review",e.LOCKED="locked",e))(v||{})},176824:(e,r,n)=>{n.d(r,{p:()=>a}),n(752553),n(710667),n(135163);var i=n(622139);function a(e,r){return"promoReview"===e.view||"teamUpgrade"===e.view&&e.paymentStep===i.tn.CONFIRM_PAY&&r.promo}n(304769),n(13513)},765521:(e,r,n)=>{n.d(r,{q:()=>d}),n(411855),n(188507);var i=n(138020);n(966712);var a=n(130097),o=n(939863),s=n(392592),l=(e=>(e.AdminUpgradeEmail="admin_upgrade_email",e.UnknownDeeplink="unknown_deeplink",e))(l||{});n(129318);var c=n(279453);async function d(e,r){try{let n=await (0,a.Ek)(c.s7T,{requestId:e}),l=(0,i.oA)(n.accountTypeRequest);if(!l){u(r,(0,o.t)("admin_dashboard.requests.not_found"));return}if("pending"!==l.status){r(s.F.enqueue({message:(0,o.t)("admin_dashboard.requests.this_request_has_already_been_handled"),type:l?.status==="approved"?"requests-approved":"requests-denied"}));return}return l}catch(e){u(r)}}n(756704);let u=(e,r)=>{e(s.F.enqueue({message:r||(0,o.t)("admin_dashboard.requests.error_generic"),error:!0}))}},870962:(e,r,n)=>{n.d(r,{jL:()=>_}),n(411855);var i=n(89865),a=n.n(i),o=n(157663),s=n(716034),l=n(418956);n(939863);var c=n(459279),d=n(540019);n(356931);var u=n(317003);let m=(0,s.eU)({});function p(e){let r=e.filter(e=>e.state===c.qH.PENDING),n=a()(r,e=>e.id);l.zl.set(m,e=>({...e,...n}))}d.M4.Query({fetch:async e=>{let r=(await u.V.getPlanInvoices(e)).data.meta.invoices;return p(r),r}});let h=d.M4.Query({fetch:async({planType:e,planId:r})=>{let n=(await u.V.getUpcomingPlanInvoices({planType:e,planId:r})).data.meta.invoices;return p(n),n}});async function _(e){await d.M4.fetch(h(e),{policy:"networkOnly"}).catch(e=>{o.k.error(e)})}},12493:(e,r,n)=>{n.d(r,{$n:()=>O,ac:()=>D,gW:()=>N});var i=n(411855),a=n(188507),o=n(786013),s=n(922827),l=n(75274),c=n(966712),d=n(418956),u=n(915440),m=n(391388),p=n(411045),h=n(420576),_=n(678340),g=n(335682),f=n(99506),E=n(279453),y=n(428467),b=n(239671),v=n(720647),I=n(594901),T=n(417908),S=n(775099),w=n(100197),A=n(147206),C=n(984968);function N(e,r,n,i,a,o,l,c,d,u){var m;return{createBranch:R(e,r,l,c,d,u,n,i),openBranchSource:e&&(0,h.Kz)(e)?{status:"enabled"}:{status:"hidden"},viewBranches:e&&e.fileRepoId?l?{status:"hidden",reason:"Recovery mode"}:{status:"enabled"}:{status:"hidden"},viewBranchDiff:(m=e?.sourceFile||null,e?(0,h.Kz)(e)?e.canView?m?.canView?l?{status:"hidden",reason:"Recovery mode"}:a!==s.lyf.BRANCHING&&i!==_.Wy.SAFE?{status:"disabled",reason:"Low memory"}:{status:"enabled"}:{status:"hidden",reason:"Can't view source"}:{status:"hidden",reason:"Can't view branch"}:{status:"hidden",reason:"Not a branch"}:{status:"hidden"}),mergeBranch:function(e,r,n,i,a,o){if(!e)return{status:"hidden"};if(!(0,h.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canManage)return{status:"hidden",reason:"Can't edit source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(o)return{status:"hidden",reason:"Recovery mode"};if(i!==s.lyf.BRANCHING){if(n!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(a!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,i,a,o,l),viewSourceDiff:function(e,r,n,i,a,o,l){if(!e)return{status:"hidden"};if(!(0,h.Kz)(e))return{status:"hidden",reason:"Not a branch"};if(!e.canView)return{status:"disabled",reason:"Can't view branch"};if(!r?.canView)return{status:"disabled",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c||!P(d,c))return{status:"disabled",reason:"No changes"};if(a!==s.lyf.BRANCHING){if(i!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,i,a,o,l),updateBranch:function(e,r,n,i,a,o,l){if(!e||!(0,h.Kz)(e))return{status:"hidden"};if(!e.canManage)return{status:"hidden",reason:"Can't edit branch"};if(!r?.canView)return{status:"hidden",reason:"Can't view source"};if(e.trashedAt)return{status:"hidden",reason:"Branch is archived"};if(l)return{status:"hidden",reason:"Recovery mode"};let c=e.sourceFileKey&&n.fileByKey[e.sourceFileKey],d=n.fileByKey[e.key];if(!c||!P(d,c))return{status:"disabled",reason:"No changes"};if(a!==s.lyf.BRANCHING){if(i!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if(o!==s.kul.JOINED)return{status:"disabled",reason:"Offline"}}return{status:"enabled"}}(e,e?.sourceFile||null,r,i,a,o,l)}}function L(){return(0,w.ut)(s.Ez5?.uiState().isRecovery,!1)}function O(){let e=(0,I.FC)(),r=(0,g.q5)(),n=(0,T.d)(),o=(0,a.d4)(e=>e.selectedView.editorType),s=L(),l=(0,d.md)(_.eE),c=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),u=(0,a.d4)(e=>e.mirror.appModel.multiplayerSessionState),m=r?.teamId??null,h=(0,p.RR)();return(0,i.useMemo)(()=>N(r,e,o,l,c,u,s,m,n,h),[r,e,o,l,c,u,s,m,n,h])}function R(e,r,n,i,a,o,s,l){if(!e)return{status:"hidden",reason:"No file"};if(n)return{status:"hidden",reason:"Recovery"};if(a)return{status:"hidden",reason:"User is in limited space"};if(s!==b.nT.Design)return{status:"hidden",reason:"Invalid editor type"};if(void 0!==l&&l!==_.Wy.SAFE)return{status:"disabled",reason:"Low memory"};if((0,A.Pe)(e))return{status:"disabled",reason:"File is copy/export restricted"};if((0,y.isOrgUserExternallyRestrictedFromState)(r))return{status:"hidden",reason:"Your organization doesn't allow you to create branches in external spaces."};if((0,S.XD)({currentTeamId:i,hasCurrentOrg:!!r.currentUserOrgId}))return{status:"upsell-org",reason:"Not in org but can upsell into it"};if(!e.parentOrgId)return{status:"hidden",reason:"File is not in org"};if(!r.currentUserOrgId)return{status:"hidden",reason:"Not in org"};let c=(0,h.up)(e,r.repos);if(c&&!(0,h.SA)(e,c))return{status:"hidden",reason:"Not the main file"};let d=r.user&&r.orgUsersByOrgId[e.parentOrgId]&&r.orgUsersByOrgId[e.parentOrgId][r.user.id]?r.orgUsersByOrgId[e.parentOrgId][r.user.id]:null,u=d&&d.design_paid_status,m=o?d?.active_seat_type?.license_types?.includes(v.vu):u===f.El.FULL;return null===u?{status:"hidden",reason:"Unknown account type"}:m?{status:"enabled"}:o||u===f.El.STARTER?{status:"hidden"}:{status:"upsell-org-seat"}}function P(e,r){return r.checkpoint_id&&e.source_checkpoint_id&&e.source_checkpoint_id!==r.checkpoint_id}function D(e){let r=(0,C.cD)(),n=(0,T.d)(),a=e?.key,s=(0,u.Rs)(E.XRI,{fileKey:a},{enabled:!!a}),d=(0,u.Rs)(E.QrR,{fileKey:a},{enabled:!!a}),h=(0,I.FC)(),_=L(),g=(0,p.RR)(),y=(0,i.useMemo)(()=>e?m.Qw.from(d).transform(e=>(function({file:e,isRecovery:r,isUserInLimitedSpace:n,isBillingRemodelEnabled:i,plan:a,planUser:s}){return e?r?{status:"hidden",reason:"Recovery"}:n?{status:"hidden",reason:"User is in limited space"}:e.editorType!==f._Y.DESIGN?{status:"hidden",reason:"Invalid editor type"}:e.canCreateBranch?{status:"enabled"}:(0,A.Pe)(e)?{status:"disabled",reason:"File is copy/export restricted"}:a&&![o.Agb.ENTERPRISE,o.Agb.ORG].includes(a.tier)?{status:"upsell-org",reason:"Not in org but can upsell into it"}:s?(i?s?.seatTypeLicenseTypes?.includes(f.G_.DESIGN):s?.designPaidStatus===f.dQ.FULL)||i||s?.designPaidStatus===f.dQ.STARTER?{status:"hidden"}:{status:"upsell-org-seat"}:{status:"hidden",reason:"Unknown account type"}:{status:"hidden",reason:"No file"}})({file:e.file,isRecovery:_,isUserInLimitedSpace:n,isBillingRemodelEnabled:g,plan:e.file?.plan,planUser:e.file?.currentPlanUser})):m.Qw.loaded({status:"hidden",reason:"No file"}),[e,_,n,g,d]),v=(0,i.useMemo)(()=>e?m.Qw.from(s).transform(i=>R(i.file&&e?{key:e.key,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,canEdit:i.file.canEdit,canExport:i.file.canExport,viewerExportRestricted:i.file.viewerExportRestricted}:null,h,!!_,r,n,g,(0,b.sL)(e.editor_type))):m.Qw.loaded({status:"hidden",reason:"No file"}),[r,_,h,n,e,s,g]),S=y.transform(e=>e.status);return(0,l.T)({oldValue:v.data?.status,newValueQueryResult:S,label:"canCreateBranch",callSite:"useCreateBranchActionStatus",args:{oldReason:v.data?.reason,newReason:y.data?.reason,fileKey:e?.key},oldValueQueryResultStatus:v.status}),(0,c.kc)().can_create_branch_pv2?y:v}},195971:(e,r,n)=>{n.d(r,{Al:()=>y,dT:()=>E,kt:()=>g,lX:()=>_,nt:()=>I,pI:()=>f});var i=n(411855),a=n(188507),o=n(821910),s=n(358145),l=n(966712),c=n(286640),d=n(99506),u=n(479296),m=n(860178),p=n(243987);let h=e=>(0,l.kc)().campfire_cart?`SAVED_CAMPFIRE_CART::${e}`:`SAVED_CART::${e}`;function _({teamId:e,userId:r}){if(!r)return null;let n=v(r);return n?.teamId===e?n:null}let g=["","",""];function f({loadingPaidEditors:e,teamId:r,teamName:n,setTeamName:l,collaborators:c,setCollaborators:u}){let h=(0,m.iZ)(),_=(0,a.d4)(e=>(r?e.teamUserByTeamId[r]:{})||{}),f=(0,a.d4)(e=>e.payment.numDesignEditors),y=(0,a.d4)(e=>e.payment.numWhiteboardEditors),b=(0,a.d4)(e=>e.payment.editorStatusChanges),I=(0,a.d4)(e=>e.payment.cartSelections),T=(0,s.ZC)(e),S=(0,p.BR)(_,h),w=(0,p.O1)(f,(0,p.Ky)(S,b,d._Y.DESIGN)),A=(0,p.O1)(y,(0,p.Ky)(S,b,d._Y.WHITEBOARD)),C=(0,i.useCallback)(()=>{let e=v(h?.id);if(!e)return null;let{createdAt:r,updatedAt:n,...i}=e;return i},[h?.id]);(0,i.useEffect)(()=>{let i=C(),a=null!==r||n?n:i?.newTeamName,s=null===r&&!c||(0,o.c2)(c,g)?i?.newCollaborators??g:c,d={teamId:r,editorStatusChanges:b,numEmptyDesignSeats:w,numEmptyWhiteboardSeats:A,newTeamName:a,newCollaborators:s,is3DS:i?.is3DS,cartSelections:I};!e&&h&&((0,o.he)(i,d)||E(h.id,d),T&&(l&&a!==n&&l(a||""),u&&!(0,o.c2)(c,s)&&u(s||g)))},[e,T,h,r,b,w,A,C,n,l,c,u,I])}let E=(0,u.D)((e,r)=>{try{let n=new Date().toISOString(),i={...r,createdAt:n,updatedAt:n};c.TQ()?.setItem(h(e),b(i))}catch(e){console.error("Failed to save cart state to Local Storage")}});function y(e){if(e)try{c.TQ()?.removeItem(h(e))}catch(e){}}let b=e=>JSON.stringify(e),v=e=>{if(!e)return null;try{let r=c.TQ()?.getItem(h(e));if(r)return JSON.parse(r);return null}catch(e){return null}};function I(e,r){let n=r.map(e=>e.id),i=e=>e?.filter(e=>n.includes(e))??[];return{upgrade:{design:i(e.upgrade.design),slides:i(e.upgrade.slides),sites:i(e.upgrade.sites),whiteboard:i(e.upgrade.whiteboard),cooper:i(e.upgrade.cooper)},downgrade:{design:i(e.downgrade.design),slides:i(e.downgrade.slides),sites:i(e.downgrade.sites),whiteboard:i(e.downgrade.whiteboard),cooper:i(e.upgrade.cooper)}}}},654034:(e,r,n)=>{n.d(r,{CR:()=>L,F$:()=>U,GV:()=>b,JG:()=>w,PK:()=>y,Zz:()=>B,eR:()=>A,gj:()=>P,hx:()=>E,k0:()=>F,mz:()=>S,o8:()=>C,rN:()=>v,ro:()=>D,t$:()=>T,us:()=>x,vl:()=>k,wB:()=>f});var i=n(140593),a=n(609494),o=n(91408),s=n(966712),l=n(711525),c=n(886653),d=n(572206),u=n(309249),m=n(226055),p=n(457630),h=n(440535),_=n(911259),g=n(837746);let f=1,E={x:16,y:-4},y={top:0,right:0,bottom:0,left:0,width:0,height:0},b={messageMeta:[],attachments:{},state:h.EB.READY,anchorPosition:null,selectionBoxAnchor:null,discardAttempt:0};function v(e,r){return!r||(0,d.gR)(r,e)}function I(e){return(0,o.jz)(e?g.NJv:g.QP5)}function T(){return I((0,m.GS)())}function S(){var e;return e=(0,m.GS)(),(0,o.jz)(e?g.oGx:g.RdL)}function w(e,r,n){let{messageMeta:i,attachments:a,anchorPosition:o,selectionBoxAnchor:s}=r;return{id:h.hm,key:h.hm,uuid:h.hm,anchored:!0,canvasPosition:o,selectionAnchorCanvasPosition:s,page:n,isActive:e===h.hm,comments:[],messageMeta:i,attachments:Object.values(a),pageName:null,isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD}}function A(e){return e===h.hm}let C=(0,c.cm)(e=>e.map(e=>e.user?{user_id:e.user.id,user_annotated:{id:e.user.id,handle:e.user.handle,img_url:e.user.imgUrl}}:{t:null!==e.t?e.t:void 0,link:e.link?e.link:void 0,styles:e.styles?e.styles:void 0,children:e.children?.length?C(e.children):void 0})),N=(0,c.cm)(e=>({x:e.x,y:e.y,...e.nodeId?{node_id:e.nodeId}:{},...e.inFrame?{in_frame:e.inFrame}:{},...e.nodeOffset?{node_offset:e.nodeOffset}:{},...e.selectionBoxAnchor?{selection_box_anchor:e.selectionBoxAnchor}:{},...e.stablePath?{stable_path:e.stablePath}:{}})),L=(0,c.cm)(e=>({id:e.id,handle:e.handle,img_url:e.imgUrl})),O=(e,r,n)=>{if("publicUuid"in e&&e.publicUuid)return!1;if(r.unreadComments[e.id])return!0;if(r.readComments[e.id])return!1;let i=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=i.getTime())&&e.user.id!==n},R=new Date,P={id:"",userId:"",fileKey:"",createdAt:R,allReadAt:R,readComments:{},unreadComments:{}};function D(e,r,n,i,o,c,d,u){if("loaded"!==r.status)return r;let m=r.data.file;if(!m)return(0,l.gB)([]);let p=m?.comments.filter(e=>!e.parentId),_=m.comments.filter(e=>e.parentId).reduce((e,r)=>{let n=e[r.parentId]||[];return n.push(r),e[r.parentId]=n,e},{}),g=m.commentAttachments.reduce((e,r)=>{if(!r.fileCommentId)return e;let n=e[r.fileCommentId]||[];return n.push(r),e[r.fileCommentId]=n,e},{}),f=o(p.filter(e=>e.clientMeta?.nodeId).map(e=>e.clientMeta.nodeId)),E=p.map(r=>{let o=r.clientMeta&&r.clientMeta.nodeId,l=i[r.id]||r.uuid&&i[r.uuid],p=null;if(l&&r.clientMeta?.selectionBoxAnchor){let e=r.clientMeta.x-r.clientMeta.selectionBoxAnchor.x,n=r.clientMeta.y-r.clientMeta.selectionBoxAnchor.y;p={x:l.x-e,y:l.y-n}}let E=o?f[o]||r.clientMeta?.pageId||null:r.clientMeta?.pageId||"0:1",y=_[r.id]||[],b=[r,...y.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime())],v=m.currentUserCommentReadStatus||P,I=b.map(n=>{let i=g[n.id]??(n.uuid&&g[n.uuid]);return function(e,r,n,i,o,l,c){let d=O(n,i,e),u=(0,a.L4)(n.id),m=n.messageMeta;n.messageMetaStylized?.length&&(m=n.messageMetaStylized);let p=(0,s.kc)().comments_faster_saving_ux?!!n.uuid&&o.has(n.uuid):void 0,h=(0,s.kc)().comments_faster_saving_ux_v2?u||!!r.uuid&&r.uuid in l:void 0;return{id:n.id,uuid:n.uuid,key:r.key,parent_id:n.parentId,user_id:n.user.id,created_at:n.createdAt.toISOString(),resolved_at:r.resolvedAt?r.resolvedAt.toISOString():null,deleted_at:null,message_meta:C(m),attachments:c,client_meta:n.clientMeta?N(n.clientMeta):null,order_id:null!==n.orderId?n.orderId.toString():null,isUnread:d,isPendingFromSinatra:u,isSaving:p,isPendingFromLg:h,user:L(n.user)}}(e,r,n,v,d,u,i)}),T=(0,a.L4)(r.id),S=(0,s.kc)().comments_faster_saving_ux?!!r.uuid&&d.has(r.uuid):void 0,w=(0,s.kc)().comments_faster_saving_ux_v2?T||!!r.uuid&&r.uuid in u:void 0;return{id:r.id,uuid:r.uuid||void 0,key:r.key,anchored:!!l,canvasPosition:l,selectionAnchorCanvasPosition:p,page:E,pageName:E&&c[E]||null,isActive:n===r.id,isPendingFromSinatra:T,isSaving:S,isPendingFromLg:w,comments:I,messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:h.kT.COMMENT_THREAD,commentPin:r.commentPin}});return(0,l.gB)(E)}function k(e,r,n,a){let{canvasPosition:o}=r,s=o&&e?(0,p.Z0)(e,o):null,l=function(e,r,n,a,o,s){if(!e||!r)return null;let l=(function(e){switch(e){case h.kT.COMMENT_THREAD:return _.XC;case h.kT.FEED_POST:return _.b1;case h.kT.WALKTHROUGH_MEDIA:return _.Yp;default:(0,i.xb)(e)}})(a).getPinSize(n).width,c=l+E.x+I(o)+25;return e.width-r.x-(s??0)<c?{x:-1*I(o)-E.x,y:-55}:{x:l+E.x,y:-55}}(e,s,new Set(r.comments.map(e=>e.user_id)).size,r.sidebarItemType,n,a),c=s&&l?d.Mi.add(s,l):null;return{...r,anchorPosition:s,threadPosition:c,threadOffset:l}}let M=(e,r,n)=>{let i=e.id;if(r.unreadCanvasMentions[i])return!0;if(r.readCanvasMentions[i])return!1;let a=r.allReadAt||r.createdAt;return!(e.createdAt.getTime()<=a.getTime())&&n!==e.id};function F(e,r,n){if("loaded"!==r.status)return r;let i=r.data.file;if(!i)return(0,l.gB)([]);let a=i.fileCanvasMentions,o=i.currentUserFileCanvasMentionReadStatus||u.ih,s=a.map(r=>(function(e,r,n,i){let a=`canvas_mention_${r.id.replace(/-/g,"_")}`,o=r.id,s=M(r,n,e);return{id:a,uuid:o,key:r.fileKey,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,page:(0,l.oA)(r.pageId,null),pageName:null,isActive:i===a,isPendingFromSinatra:void 0,comments:[{id:a,uuid:o,key:o,parent_id:null,user_id:r.fileKey,created_at:r.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:C(r.messageMeta),client_meta:null,order_id:null,isUnread:s,isPendingFromSinatra:!1,user:L(r.mentionedByUser)}],messageMeta:C(r.messageMeta),attachments:[],isCanvasMention:!0,replyCount:void 0,sidebarItemType:h.kT.COMMENT_THREAD,nodeId:r.nodeIdPath[0]}})(e,r,o,n));return(0,l.gB)(s)}function x(){return{reply:{messageMeta:[],attachments:{}},state:h.EB.READY}}function U(e){let r=[];for(let n=0;n<e.message_meta.length;n++){let i=e.message_meta[n];i.hasOwnProperty("user_id")&&r.push(i.user_id)}return r}function B(e){return e.some(e=>null!=e.commentPin&&e.comments.some(e=>e.isUnread))}},661843:(e,r,n)=>{n.d(r,{Hu:()=>w,Kq:()=>L,W9:()=>C,gu:()=>N,kx:()=>A});var i=n(411855),a=n(188507),o=n(922827),s=n(572304);n(83783);var l=n(298455),c=n(636149),d=n.n(c),u=n(776250),m=n(966712),p=n(572206),h=n(975350);n(763223),n(912924),n(356390),n(160402);var _=n(29680),g=n(514736),f=n(788256),E=n(654034),y=n(289032),b=n(114716),v=n(74505),I=n(547465);(0,m.kc)().comments_new_observer;let T=(e,r)=>({anchorPositionById:r(i.useMemo(()=>{if("loaded"!==e.status||!e.data.file)return{commentNodeInfoById:{},commentNodeIds:new Set,commentThreads:[]};let r=e.data.file,n=Object.create(null),i=new Set,a=r.comments.filter(e=>null===e.parentId);for(let e of a)if(e.clientMeta){let{x:r,y:a,nodeId:o,nodeOffset:s,stablePath:l}=e.clientMeta;n[e.id]={canvasPosition:{x:r,y:a},nodeId:o,nodeOffset:s,stablePath:l?`[${l.join(",")}]`:void 0},null!=o&&i.add(o)}return{commentNodeInfoById:n,commentNodeIds:i,commentThreads:a}},[e]).commentNodeInfoById)}),S="COMMENTS_ABSOLUTE_POSITIONING_UPDATER";function w(e,r){let n=i.useMemo(()=>d()(e,e=>e.clientMeta?.nodeId),[e]),s=i.useMemo(()=>Object.keys(n),[n]),l=i.useRef({}),c=(0,a.wA)(),u=(0,b.g)(),m=i.useCallback(e=>{let{nodeId:r,position:i,eventOrigins:a}=e,o=l.current[r],s=a.includes("LOCAL"),d=navigator.onLine;if(s&&d){if(null===i){let e=n[r]||[];o&&e.forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},i=p.Mi.add(o.position,n);(r.x!==i.x||r.y!==i.y)&&c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:i.x,y:i.y,page_id:r.pageId||void 0,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}else i&&i.page!==o?.position?.page&&(n[r]||[]).forEach(e=>{let r=e.clientMeta;if(r){let n=e.clientMeta?.nodeOffset||{x:0,y:0},a=p.Mi.add(i,n);c(h.hY({thread:{id:e.id,uuid:e.uuid||void 0,key:e.key},clientMeta:{x:a.x,y:a.y,page_id:i.page,node_id:r.nodeId||void 0,node_offset:r.nodeOffset||void 0,in_frame:r.inFrame||void 0,selection_box_anchor:r.selectionBoxAnchor||void 0,stable_path:r.stablePath||void 0}}))}})}l.current[r]=e},[n,l,c]);i.useEffect(()=>{if(r.enabled&&o.glU&&u){let{currentNodePosition:e}=(0,v.EE)(S,s,m);l.current=e}return()=>{o.glU&&u&&(0,v.lB)(S)}},[s,m,r.enabled,u])}function A(e){return i.useCallback(r=>r.reduce((r,n)=>{let i=e?.pageIdForNodeId(n)||null;return i&&l.UN().get(i)?.isInternalOnlyNode&&(i=null),r[n]=i,r},{}),[e])}function C(e,r,n,o,s,l){let c=T(r,o),d=(0,a.d4)(e=>e.comments.savingCommentUuids),m=(0,a.d4)(e=>e.comments.lgPendingUuidToServerIdMap);i.useEffect(()=>{if("errors"===r.status){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load comments: ${e}`),(0,u.sx)("Livegraph Comments Errors",{errors:e})}},[r]),(0,I.t)(e=>{if("loading"!==r.status){if("errors"===r.status){e("comments_fetched",{status:r.status});return}e("comments_fetched",{count:r.data?.file?.comments?.length,status:r.status})}},[r]);let p=i.useMemo(()=>l.filter(e=>!!("nodeId"in e?e.nodeId:e.id)).reduce((e,r)=>(e["nodeId"in r?r.nodeId:r.id]=r.name,e),{}),[l]),h=i.useMemo(()=>(0,E.ro)(e,r,n,c.anchorPositionById,s,p,d,m),[e,r,n,c.anchorPositionById,s,p,d,m]);return(0,y.E)("loaded"===h.status&&h.data||[]),h}function N(e,r,n){return i.useEffect(()=>{if(r.errors&&r.errors.length){let e=JSON.stringify(r.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load canvas mentions: ${e}`),(0,u.sx)("Livegraph Canvas Mention Comments Errors",{errors:e})}},[r.errors]),i.useMemo(()=>(0,E.k0)(e,r,n),[n,r,e])}function L(e){let r;let n=(0,g.s)(),i=(0,_.eY)();if(!(0,f.Qf)(i))return!1;switch(n.orphanedBy){case"deleted_pages":return!e.pageName;case"deleted_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!1;return!i.get(r);case"non_slide_anchors":if(0===e.comments.length||!(r=e.comments[0].client_meta?.node_id))return!0;let a=(0,l.UN)().get(r);if(!a)return!0;return a.findContainingSlideOrSelf()===s.AD;default:return!1}}},697551:(e,r,n)=>{n.d(r,{CR:()=>R,Cj:()=>eh,D:()=>et,Dp:()=>B,Gg:()=>e_,Gq:()=>Z,HE:()=>z,HN:()=>er,HR:()=>eo,Hc:()=>v,IZ:()=>ea,Jl:()=>N,Ks:()=>V,Lg:()=>$,MZ:()=>J,T9:()=>ec,Tn:()=>G,UK:()=>A,UP:()=>eu,Uc:()=>j,V4:()=>M,Wh:()=>W,Wi:()=>ee,Yo:()=>L,Yp:()=>I,ax:()=>b,b:()=>Y,c0:()=>k,cV:()=>eg,cs:()=>es,d9:()=>em,gS:()=>O,jI:()=>Q,kc:()=>el,kl:()=>U,n:()=>eE,nR:()=>ey,o:()=>x,oH:()=>T,ou:()=>w,pH:()=>X,qA:()=>ef,sD:()=>ed,uS:()=>F,vr:()=>S,x1:()=>ei,xp:()=>P,yO:()=>q,zU:()=>ep});var i=n(188507);n(821910);var a=n(776250),o=n(886653),s=n(939863),l=n(22863),c=n(107877),d=n(661976),u=n(521010),m=n(560718);n(860178);var p=n(99506),h=n(428467),_=n(23001),g=n(555328),f=n(239671),E=n(813408);n(66037);var y=n(809073);function b(e,r){return{...e&&e.versions||{},...r&&r.versions||{}}}function v(e,r,n){return e&&r&&r[e]||n}function I(e){return e&&e.trim()||""}function T(e){return e&&e.status||{code:E.aP.EDIT}}function S(e,r){let n=(0,s.t)("community.profiles.your_handle_text");return e&&0!==e.length?e.length>15?(0,s.t)("community.profiles.profile_max_15_characters_in_length",{errorStringPrefix:n}):/^[a-zA-Z0-9_]{1,15}$/.test(e)?null:(0,s.t)("community.profiles.profile_cannot_contain_special_characters",{errorStringPrefix:n}):(0,s.t)("community.publishing.profile_handle_cannot_be_empty",{errorStringPrefix:n})}function w(e,r){if(!("user"in r))return!1;let n=r.authedProfilesById[e];return n?.primary_user_id?!!r.user&&!!n.associated_users?.find(e=>e.user_id===r.user.id):n?.team_id?!!(r.user&&r.teamAdminRolesForAuthedUsers[r.user.id].some(e=>e.team_id===n.team_id))||(0,h.hasAdminRoleAccessOnTeam)(n.team_id,r):!!n?.org_id&&(0,h.canAdminOrg)(n.org_id,r)}function A(e,r){return!!e.primary_user_id||"communityHub"!==r.view||"landing"!==r.subView||r.category!==d.aH&&r.sortState!==c.eg.FOLLOWING_FEED}let C=(0,o.xx)((e,r,n,i)=>{let a=null;if(e&&r[e]){let o=(0,h.canAdminOrg)(e,{currentUserOrgId:e,user:n,orgById:r,orgUsersByOrgId:i,fileByKey:{}}),s=r[e];a={isAdmin:o,id:s.id,name:s.name}}return a});function N(e){return C(e.currentUserOrgId,e.orgById,e.user,e.orgUsersByOrgId)}function L(){let e=(0,i.d4)(e=>e.currentUserOrgId);return C(e,(0,i.d4)(e=>e.orgById),(0,i.d4)(e=>e.user),(0,i.d4)(e=>e.orgUsersByOrgId))}let O=(0,o.xx)((e,r,n)=>{let i;let a=r.plugins.fetchedResources;switch(e){case f.nT.Design:i=y.$A.Design;break;case f.nT.DevHandoff:i=y.$A.Handoff;break;case f.nT.Slides:i=y.$A.Slides;break;default:i=y.$A.FigJam}let o=[];for(let e of r.plugins[i]){let r=a[e.id];if(r&&r.version){o.push(r.version);continue}let i=n[e.id];i&&o.push(i)}return o});function R(e){return O(e.selectedView.editorType,e.recentlyUsed,e.localPlugins)}function P(e){return!!(e.plugin_install||e.plugin||e.widget||e.whitelisted_plugin||e.hub_file||e.community_comment||e.community_resource_payment)}let D=e=>e.trim().toLocaleLowerCase().replace(/^#/,"");function k(e,r){return{content:e=D(e),state:H(e)||function(e,r){for(let n=0;n<r.length;n++)if(r[n]===e)return K(e);return null}(e,r.map(e=>e.content))?_.d.ERROR:_.d.OK}}function M(e,r){let n=e.find(e=>e.id===r);return n?.tags||[]}function F(e){return(0,s.Yd)(e.i18n_meta.text,e.text)}function x(e){return new Map(e.map(e=>[e.text,F(e)]))}function U(e,r,n,i){return r.find(r=>r===e)?(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${i.get(e)??e}'`}):n.find(r=>r.text===e)?void 0:(0,s.t)("community.publishing.tag_not_in_category",{tag:`'${i.get(e)??e}'`})}function B(e,r,n){let i=[];if(e.length>Q)return(0,s.t)("community.publishing.cannot_have_more_than_5_tags");let a=x(n);for(let n=0;n<e.length;n++){let o=e[n],s=U(o,i,r,a);if(s)return s;i.push(o)}}let V=(e,r)=>(n,i)=>{let a=null;if(r.forEach((e,r)=>{0===e.toLocaleLowerCase().localeCompare(n.toLocaleLowerCase().trim())&&(a=r)}),!a)return{content:n,state:_.d.ERROR,errorMessage:(0,s.t)("community.publishing.tag_not_in_category",{tag:`'${n}'`})};let o=U(a,i.map(e=>e.content),e,r);return{content:a,state:o?_.d.ERROR:_.d.OK,errorMessage:o}};function G(e,r,n){let i=x(n),a=[];return e.tokens.forEach(e=>{let n=U(e.content,a.map(e=>e.content),r,i);a.push({...e,state:n?_.d.ERROR:_.d.OK,errorMessage:n})}),{...e,tokens:a}}function H(e){return e.match(/^[\P{Script_Extensions=Common} _\-0-9]*$/gu)?e.match(/^[\P{Script_Extensions=Common}0-9](.*[\P{Script_Extensions=Common}0-9])?$/gu)?e.toLocaleLowerCase()!==e?(0,s.t)("community.publishing.tags_can_only_contain_lowercase_characters"):e.length>25?(0,s.t)("community.publishing.tags_can_only_have_up_to_25_characters"):e.match(/[ _-]{2,}/)?(0,s.t)("community.publishing.tags_cannot_have_consecutive_dashes_underscores_or_spaces"):(e.match(/[ _-]/g)||[]).length>2?(0,s.t)("community.publishing.tags_cannot_be_longer_than_3_words"):null:(0,s.t)("community.publishing.tags_must_begin_and_end_with_a_letter_or_number"):(0,s.t)("community.publishing.tags_can_only_contain_certain_characters")}let K=e=>(0,s.t)("community.publishing.tag_is_repeated_more_than_once",{tag:`'${e}'`});function W(e){if(e.length>J)return(0,s.t)("community.publishing.cannot_have_more_than_12_tags");let r=function(e){let r={};for(let n=0;n<e.length;n++){if(r[e[n]])return K(e[n]);r[e[n]]=!0}return null}(e);if(r)return r;for(let r=0;r<e.length;r++){let n=H(D(e[r]));if(n)return n}return null}function $(e){return e.length>er?(0,s.t)("community.publishing.tagline_must_be_at_most_100_characters_long"):null}let Y={name:"",description:"",tags:{inputValue:"",errorMessage:"",tokens:[]},categoryId:null,creatorPolicy:"",viewerMode:p.y4.CANVAS,scalingMode:null,author:{user_id:""},commentsSetting:m.Ni.ENABLED,publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1},z=["Tab","Enter",","],j=5242880,q=0xf00000,Z=0x6400000,X=100,J=12,Q=5,ee=10,et=60,er=100;function en(e){return"is_widget"in e&&e.is_widget?g.vt.WIDGET:"current_plugin_version_id"in e?g.vt.PLUGIN:g.vt.HUB_FILE}function ei(e){return"profile_handle"in e?g.Ug.PROFILE:en(e)===g.vt.HUB_FILE?g.Ug.HUB_FILE:en(e)===g.vt.WIDGET?g.Ug.WIDGET:g.Ug.PLUGIN}function ea(e){return e>=ee-1?(0,s.t)("community.publishing.cannot_have_more_than_max_publishers",{MAX_PUBLISHERS_PER_RESOURCE:ee}):null}function eo(e){let r={},n={},i=e.map(e=>(r[e.id]=e,n[e.author.id]=e.author,e.id));return{commentsById:r,authorsById:n,feed:i}}c.eg.POPULAR;let es=l.c;function el(){return(0,i.d4)(e=>e.authedActiveCommunityProfile)}function ec({authedProfilesById:e,profileId:r,userId:n,orgId:i,teamId:a}){return r?e[r]:i?Object.values(e).find(e=>e.org_id===i)||null:a?Object.values(e).find(e=>e.team_id===a)||null:n&&Object.values(e).find(e=>e.associated_users?.find(e=>e.user_id===n))||null}function ed(e,r){return e&&Object.values(r).find(r=>r.associated_users?.find(n=>n.user_id===e.id&&r.public_at))||null}function eu(){return(0,i.d4)(e=>em(e.selectedView))}function em(e){return"communityHub"===e.view||ep(e)||!1}function ep(e){return"search"===e.view&&("url:community"===e.entryPoint||"community"===e.entryPoint||"community:header"===e.entryPoint)}function eh(e){return"communityHub"===e.view&&"handle"===e.subView}function e_(e){return(0,u.G)(e)}function eg(e){return e.community_publishers?.accepted.find(e=>es(e))||null}function ef(e,r){let n=eg(r);if(n)return e.authedProfilesById[n.id]||null;let i=e.user&&ed(e.user,e.authedProfilesById);return i&&r.community_publishers?.accepted.find(e=>e.id===i.id)?i:null}function eE(e){switch(e){case g.bD.PLUGIN:return"plugins";case g.bD.WIDGET:return"widgets";case g.bD.COMMENT:return"comments";case g.bD.HUB_FILE:return"hub_files";default:throw Error("Unsupported Type")}}function ey(e,r){(0,a.sx)(c.W_.PROFILE_ADMIN_MENU_OPEN,{source:e,view:r})}},61057:(e,r,n)=>{n.d(r,{D:()=>l,VH:()=>s});var i=n(96328),a=n(939863),o=n(697551);function s(e){let r=(0,o.cV)(e);if(r)return r.name;let n=e.community_publishers.accepted;return function(e,r,n){if(0===e.length)return"";if(1===e.length)return n(e[0]);let o=e.slice(0,r-1),s=e.slice(r-1);0===s.length&&(s=[o[o.length-1]],o=o.slice(0,o.length-1));let l=1===s.length?n(s[0]):(0,a.t)("community.resource.by_x_others",{numPublishers:s.length}),c=o.map(n);return l&&c.push(l),(0,i.Yx)(c)}(n,n.length,e=>e.name)}function l(e){let r=e.community_publishers.accepted;return e.community_publishers.pending&&(r=r.concat(e.community_publishers.pending)),r.reduce((e,r)=>{let n=r.associated_users?.map(e=>e.user_id)||[];return r.primary_user_id&&e.push(r.primary_user_id),e.concat(n)},[])}},258237:(e,r,n)=>{n.d(r,{Ro:()=>o,jY:()=>s,o0:()=>l});var i=n(27087),a=n(837324);function o(e,r){return!!e&&!!e.plugin_publishers?.accepted?.some(e=>e.id===r)}function s(e,r){return!!e&&!!e.plugin_publishers?.pending?.some(e=>e.id===r)||o(e,r)}async function l(e,r){let{data:n}=await i.Ay.post(`/api/${(0,a.KH)(e,{pluralized:!0})}/${e.id}/publisher_invites`,{emails:r});return{resource:n.meta.plugin,errors:n.meta.errors}}},986323:(e,r,n)=>{n(99506),n(596607);var i=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.ACCEPTED=2]="ACCEPTED",e[e.ADMIN=3]="ADMIN",e))(i||{})},782501:(e,r,n)=>{n.d(r,{$W:()=>ef,$x:()=>ei,Ac:()=>eE,CW:()=>ee,Dd:()=>M,En:()=>F,Gf:()=>ey,Gp:()=>ea,Ii:()=>q,JJ:()=>Y,Kg:()=>ec,MO:()=>G,N8:()=>eo,R1:()=>eu,Rd:()=>ed,Rv:()=>W,T$:()=>x,Tn:()=>U,UU:()=>j,Wl:()=>et,Z2:()=>em,Z7:()=>H,f7:()=>V,gO:()=>k,j4:()=>Z,jr:()=>K,kN:()=>X,l8:()=>er,mH:()=>Q,mN:()=>$,nK:()=>eh,o1:()=>J,oB:()=>D,of:()=>z,vC:()=>es,xw:()=>eg});var i=n(188507),a=n(908048),o=n(577362),s=n(268853),l=n(354703),c=n(38329),d=n(966712),u=n(717037),m=n(776621),p=n(27087),h=n(939863),_=n(815063),g=n(545941);n(158996);var f=n(646904),E=n(697551);n(411916);var y=n(428467),b=n(555328),v=n(813408),I=n(28588),T=n(376485),S=n(134608),w=n(301400),A=n(746058),C=n(506513);n(986323),n(540019);var N=n(204279),L=n(596607),O=n(837502),R=(e=>(e[e.NONE=0]="NONE",e[e.PENDING=1]="PENDING",e[e.DISPLAY_ONLY=2]="DISPLAY_ONLY",e[e.ADMIN_IN_DIFFERENT_WORKSPACE=3]="ADMIN_IN_DIFFERENT_WORKSPACE",e[e.ADMIN=4]="ADMIN",e[e.NONE_WITH_INHERITED_ADMIN=5]="NONE_WITH_INHERITED_ADMIN",e[e.PENDING_WITH_INHERITED_ADMIN=6]="PENDING_WITH_INHERITED_ADMIN",e[e.DISPLAY_ONLY_WITH_INHERITED_ADMIN=7]="DISPLAY_ONLY_WITH_INHERITED_ADMIN",e[e.EXPLICIT_ADMIN=8]="EXPLICIT_ADMIN",e))(R||{});let P=e=>!0===e.is_public||null!=e.org;function D(e,r,n,i){return(0,b.m3)(e)||i?T.Lu.PUBLIC:P(e.roles)?e.roles.is_public||(0,g.AC)(e)?T.Lu.PUBLIC:T.Lu.ORG:null!=r&&n?T.Lu.ORG:T.Lu.PUBLIC}function k(e,r,n,i){let a=W(r.team_id,n,e,r.parent_org_id||null);if(0===a.length)throw Error("Called getDefaultHubFilePublishingMetadataAuthor when no valid author exists");return B(e,a,n.authedProfilesById,n.user?.id,i)}function M(e,r){return e.creator.id===r}function F(e,r){if(e){let n=z(r,e);if(n)return n}let n=j(r,e);if(0===n.length)throw Error("Called getDefaultPluginPublishingMetadataAuthor when no valid author exists");return B(e,n,r.authedProfilesById,r.user?.id)}function x(e,r,n){return e?.id&&Object.keys(e.versions).length>0?function(e,r,n){if((e.community_publishers?.accepted||[]).length>0){let i=(0,E.cV)(e),a=i&&r[i.id];return a?.team_id?{team_id:a.team_id}:a?.org_id?{org_id:a.org_id}:{user_id:n||e.creator.id}}let i=r[e.publisher.id];return i?.org_id?{org_id:i.org_id}:i?.team_id?{team_id:i.team_id}:{user_id:i?.primary_user_id||e.creator.id}}(e,r,n):null}function U(e){let r;return e?.team_id?r={team_id:e.team_id}:e?.org_id&&(r={org_id:e.org_id}),r}function B(e,r,n,a,o){if(0===r.length)throw Error("Called getDefaultPublishingMetadataAuthor when no valid author exists");let s=x(e,n,a);if(s&&r.some(e=>V(e,s)))return s;if(o&&r.find(e=>(0,i.bN)(e,o)))return o;let l=r.find(K);if(l)return l;let c=r.find(G);return c?c:r.find(H)||r[0]}function V(e,r){return"team_id"in e?"team_id"in r&&e.team_id===r.team_id:"org_id"in e?"org_id"in r&&e.org_id===r.org_id:"user_id"in e&&"user_id"in r&&e.user_id===r.user_id}let G=e=>"org_id"in e,H=e=>"team_id"in e,K=e=>"user_id"in e;function W(e,r,n,i){let a=[];if((n?.community_publishers?.accepted||[]).length>0){if(!e&&!i)return[{user_id:r.user.id}];let a=n&&(0,E.cV)(n),o=a?r.authedProfilesById[a.id]:null;if(o?.team_id)return(0,y.hasAdminRoleAccessOnTeam)(o?.team_id,r)?[{team_id:o.team_id}]:[];if(o?.org_id)return(0,y.canAdminOrg)(o?.org_id,r)?[{org_id:o.org_id}]:[]}if(r.currentUserOrgId){let n=r.orgById[r.currentUserOrgId];if(!n)return[];if((0,y.canAdminOrg)(r.currentUserOrgId,r)&&(a.push({org_id:r.currentUserOrgId}),n.cmty_publish_as_user_enabled&&a.push({user_id:r.user.id})),e&&r.teams[e]){if(r.teams[e]?.org_access==="secret")return[];((0,O.Bg)(n.shared_org_license_group_settings)?(0,y.canAdminOrg)(r.currentUserOrgId,r):(0,y.hasAdminRoleAccessOnTeam)(e,r))&&a.push({team_id:e})}return a}return e?((0,y.hasAdminRoleAccessOnTeam)(e,r)&&a.push({team_id:e}),a.push({user_id:r.user.id}),a):[{user_id:r.user.id}]}async function $(e){let{data:r,status:n}=await A.s.getEditors({fileKey:e.key});if(200===n)return r.meta}function Y(e,r,n,i){let a;if(!r)return(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.you_do_not_have_edit_permissions"):(0,h.t)("general.error");if("is_template"in e&&e.is_template||e.trackTags?.isTemplate||"is_new_user_playground_library"in e&&e.is_new_user_playground_library||e.track_tags?.source==="default")return(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_default_files"):(0,h.t)("general.error");if(e.has_file_link_password||e.hasFileLinkPassword)return(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.cannot_publish_password_protected_files"):(0,h.t)("general.error");if(a="parent_org_id"in e?e.parent_org_id:"parentOrgId"in e?e.parentOrgId:null,0===W("team_id"in e?e.team_id:e.teamId,n,i,a||null).length)return(0,h.t)("community.permissions_modal_publish_tab.footer.publish_admins_only");let o=!!n.figFileDuplicatedFromHubFile[e.key],s=!i;return o&&s?(0,d.kc)().cmty_i18n_publishing_errors?(0,h.t)("community.publish.hub_file_error.remixes_unavailable_until_first_publish"):(0,h.t)("general.error"):null}function z(e,r){if(r.publisher.id&&e.user)switch(r.publisher.entity_type){case v.o1.ORG:{let n=Object.values(e.orgById).find(e=>e.community_profile_id===r.publisher.id);return{org_id:n?.id??e.currentUserOrgId??""}}case v.o1.TEAM:{let n=Object.values(e.teams).find(e=>e.community_profile_id===r.publisher.id);return{team_id:n?.id||""}}default:return{user_id:r.creator.id}}return null}function j(e,r,n=!0){let i=[],a=n&&r?z(e,r):null;return e.currentUserOrgId&&(0,y.canAdminOrg)(e.currentUserOrgId,e)&&i.push({org_id:e.currentUserOrgId}),Object.keys(e.teams).forEach(r=>{let n=e.teams[r];n&&"secret"!==n.org_access&&(0,y.hasAdminRoleAccessOnTeam)(r,e)&&i.push({team_id:r})}),i.push({user_id:e.user.id}),a&&!i.some(e=>V(e,a))&&i.unshift(a),i}function q(e,r){if(!e)return!1;let{team_id:n,org_id:i}=e;if("user_id"in r){let n=e.associated_users;return!!r.user_id&&r.user_id===e.primary_user_id||n?.some(e=>e.user_id===r.user_id)}return"team_id"in r&&n===r.team_id||"org_id"in r&&i===r.org_id}function Z(e){let r=c.D.getState();return"user_id"in e?r.authedUsers.byId[e.user_id]:"org_id"in e?r.orgById[e.org_id]:"team_id"in e?r.teams[e.team_id]:void 0}function X(e,r){if("org_id"in e)return r.orgById[e.org_id]?.name??null;if("team_id"in e)return r.teams[e.team_id]?.name??null;{let e=r.user&&(0,E.sD)(r.user,r.authedProfilesById);return e?.public_at&&e?.name?e.name:e?.public_at&&e?.profile_handle?`@${e.profile_handle}`:r.user?.handle||null}}function J(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?(0,h.t)("community.publishing.org_name",{org:n.name}):(0,h.t)("general.fallback_org_name")}if("team_id"in e){let n=r.teams[e.team_id];return n?(0,h.t)("community.publishing.team_name",{team:n.name}):(0,h.t)("general.fallback_team_name")}{let n=r.authedUsers.byId[e.user_id]??r.user,i=(0,E.sD)(n,r.authedProfilesById);return i?i.name:n?.name||(0,h.t)("general.fallback_user_name")}}function Q(e,r){if("org_id"in e){let n=r.orgById[e.org_id];return n?.community_profile_handle||null}if("team_id"in e){let n=r.teams[e.team_id];return n?.community_profile_handle||null}{let n=r.authedUsers.byId[e.user_id]??r.user,i=(0,E.sD)(n,r.authedProfilesById);return i?i.profile_handle:n?.handle||null}}let ee=[I.yj.PNG,I.yj.JPEG];function et(e,r="Image"){if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));let n=(0,_.S)(e.type,I.yj);if(!n||!ee.includes(n))throw Error((0,h.t)("community.publishing.error_thumbnail_image_wrong_format",{filename:r}));if(e.size>E.Uc)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(E.Uc/1e6)}));return e.size}function er(e){return new Promise((r,n)=>{let i=new Image;i.onload=()=>r(i),i.onerror=n,i.src=e})}let en=new Set;async function ei(e,r){if(null===e.files||!e.files[0])throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found_no_filename"));r&&eh(r);let n=e.files[0];et(n,(0,h.t)("community.publishing.thumbnail_image"));let[i,a]=await Promise.all([er(URL.createObjectURL(n)),(0,C.c)(n)]);return en.add(i.src),{url:i.src,buffer:new Uint8Array(a)}}async function ea(e,r,n=f.en){let i=[];for(let a of Array.from(e).slice(0,n))if(r&&a.type.startsWith("video/")){!function(e){let r=e.name;if(!e)throw Error((0,h.t)("community.publishing.error_thumbnail_image_not_found",{filename:r}));if(!I.VY.includes(e.type))throw Error((0,h.t)("community.publishing.error_video_wrong_format",{filename:r}));if(e.size>E.Gq)throw Error((0,h.t)("community.publishing.error_thumbnail_image_too_large",{filename:r,max_size:Math.floor(E.Gq/1e6)}))}(a);let e=URL.createObjectURL(a),[r,n]=await Promise.all([e_(a),(0,N.jm)(e),el(e,a.name)]),s=URL.createObjectURL(new Blob([n]));en.add(e),en.add(s),i.push({url:e,buffer:r.bytes,sha1:r.sha1,type:"video",thumbnail_url:s,thumbnail_buffer:n,thumbnail_sha1:(0,o.Et)(n)})}else{et(a,(0,h.t)("community.publishing.carousel_media_image"));let[e,r]=await Promise.all([er(URL.createObjectURL(a)),(0,C.c)(a)]);en.add(e.src);let n=new Uint8Array(r);i.push({url:e.src,buffer:n,sha1:(0,o.Et)(n),type:"image"})}return i}async function eo(e,r){return null===e.files||0===e.files.length?Promise.resolve([]):await ea(e.files,r)}function es(e){if(!e||!e.length)return(0,h.t)("community.publishing.upload_at_least_one_image")}async function el(e,r){if(await new Promise((r,n)=>{let i=document.createElement("video");i.preload="metadata",i.addEventListener("error",e=>{n(e.message)}),i.addEventListener("loadedmetadata",()=>{r(i.duration)}),i.src=e,i.currentTime=0,i.load(),setTimeout(()=>{n("Video load timeout during video length validation")},1e4)})>f.GT)throw(0,h.t)("community.publishing.error_video_too_long",{filename:r,max_length:f.GT})}function ec(e){let r=[],n=[],i=[];return e&&e.forEach((e,a)=>{if("buffer"in e){if("video"===e.type){if(!e.thumbnail_buffer)throw Error((0,h.t)("community.publishing.error_video_thumbnail_not_found"));let r={carousel_position:a,sha1:(0,o.Et)(e.buffer),bytes:e.buffer,video_thumbnail_buffer:e.thumbnail_buffer,video_thumbnail_sha1:(0,o.Et)(e.thumbnail_buffer)};n.push(r)}else{let n={carousel_position:a,sha1:(0,o.Et)(e.buffer)};r.push(n),i.push(n)}}else if("id"in e){let r="video"===e.type?{carousel_position:a,sha1:e.sha1,video_file_uuid:e.video_file_uuid,video_thumbnail_sha1:e.thumbnail_sha1}:{carousel_position:a,sha1:e.sha1};i.push(r)}}),{uploadImages:r,uploadVideos:n,allMedia:i}}function ed(e,r){return r&&r?.length&&e?.length?e.map(async({url:e,fields:n,carouselPosition:i,signedCloudfrontUrl:a})=>{let o=r[i];if(!o||!("buffer"in o)||!o.buffer)return!1;let c=new FormData;Object.entries(n).forEach(([e,r])=>c.append(e,r)),c.set("content-type",(0,l.i)(o.buffer)??"image/png");let u=new Blob([o.buffer]);try{if(a&&(0,d.kc)().ext_s3_url_use_figma_domains){let e=await (0,C.c)(u);await p.Ay.crossOriginPut(a,e,{raw:!0,headers:{"Content-Type":u.type,"x-amz-acl":"bucket-owner-full-control"}})}else{let r=new FormData;Object.entries(n).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,l.i)(o.buffer)??"image/png"),r.append("file",u),await fetch(e,{method:"POST",body:r})}}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.t)("community.actions.error_uploading_carousel_image_error",{error:(0,h.Jv)(e,e.data?.message||"unknown error")}))}return!0}):[]}async function eu(e,r,n,i){let a,o,c,d;let{uploadImages:u,allMedia:p}=ec(r);if(!e?.length&&!u?.length)return{cover_image:{cover_image_uploaded:!1,signature:null},carousel_images:p};try{let e=await w.H.setupMultiImageUploadForHubFile({file_version_id:n,hub_file_id:i,images_sha1:u});({cover_image:{cover_image_upload_url:a,signature:o,fields:c},carousel_images:d}=e.data.meta)}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.Jv)(e,(0,h.t)("community.actions.could_not_connect_to_the_server")))}let _=d.map(({url:e,fields:n,carousel_position:i})=>{let a=r[i];if(!a||!("buffer"in a)||!a.buffer)return;let o=new FormData;return Object.entries(n).forEach(([e,r])=>o.append(e,r)),o.set("content-type",(0,l.i)(a.buffer)??"image/png"),o.append("file",new Blob([a.buffer])),fetch(e,{method:"POST",body:o})});if(e?.length){let r=new FormData;Object.entries(c).forEach(([e,n])=>r.append(e,n)),r.set("content-type",(0,l.i)(e)??"image/png"),r.append("file",new Blob([e])),_.push(fetch(a,{method:"POST",body:r}))}try{return await Promise.all(_),{cover_image:{cover_image_uploaded:!!e?.length,signature:o},carousel_images:p}}catch(e){throw(0,m.$D)(s.e.COMMUNITY,e),Error((0,h.Jv)(e,(0,h.t)("community.actions.error_connecting_to_server_to_upload_file_images")))}}function em(e,r){return r?e.findIndex(e=>e.sha1===r.sha1):-1}function ep(e){en.has(e)&&(URL.revokeObjectURL(e),en.delete(e))}function eh(e){e&&(e.url&&ep(e.url),"type"in e&&"video"===e.type&&ep(e.thumbnail_url))}async function e_(e){let r=new Uint8Array(await (0,C.c)(e));return{sha1:(0,o.Et)(r),bytes:r}}function eg(e){if(!e.currentUserOrgId)return!1;let r=(0,L.xw)(e);return!(r&&r.agreed_to_community_tos_at)}function ef(e,r){return Object.entries(r).reduce((r,[n,i])=>r+Number(e.includes(n)&&!!i),0)}function eE(e,r,n){if("object"==typeof e&&"fields"in e&&"imagePath"in e){let{fields:i,imagePath:a,signedCloudfrontUrl:o}=e;if(o&&(0,d.kc)().ext_s3_url_use_figma_domains)return p.Ay.crossOriginPut(o,n,{raw:!0,headers:{"Content-Type":r.type,"x-amz-acl":"bucket-owner-full-control"}});let s=new FormData;return Object.entries(i).forEach(([e,r])=>s.append(e,r)),s.set("Content-Type",r.type),s.append("file",r),p.Ay.crossOriginPost(a,s,{raw:!0,headers:{"Content-Type":r.type}})}return"string"==typeof e?p.Ay.crossOriginPut(e,n,{raw:!0,headers:{...p.Ay.defaults.headers,"Content-Type":r.type}}):Promise.reject(Error("Invalid presigned_url"))}async function ey(e,r,n,i,s){let{video:l,videoThumbnail:c}=await S.v.getVideoUploadUrl({resourceType:e,id:r,sha1:n.sha1,thumbnail_sha1:s}),m=null;if(l){let{url:e,fields:r,signedCloudfrontUrl:i}=l;if(i&&(0,d.kc)().ext_s3_url_use_figma_domains&&(0,d.kc)().ext_s3_url_videos_use_figma_domains){let e=(0,a.lF)((0,o.aD)(n.sha1));m=p.Ay.crossOriginPut(i,n.bytes,{raw:!0,headers:{"Content-Type":"video/mp4","x-amz-acl":"bucket-owner-full-control","x-amz-checksum-sha1":e}}).then(()=>r.key||"")}else m=(0,u.VV)(e,r,n,"video/mp4")}let _=new Blob([i],{type:"image/png"}),g=eE({imagePath:c.url,fields:c.fields,signedCloudfrontUrl:c.signedCloudfrontUrl},_,i).catch(e=>{throw Error((0,h.t)("community.actions.error_uploading_plugin_video_thumbnail_error",{error:(0,h.Jv)(e,e.data?.message||"unknown error")}))}),[f]=await Promise.all([m,g]);return await eb(n.sha1,r,e,f??"",s,l?.blobUploadCommitKey||"")}async function eb(e,r,n,i,a,o){let s=new URLSearchParams;return s.append("sha1",e),s.append("uploadPath",i),s.append("resourceId",r),s.append("resourceType",n),s.append("blobUploadCommitKey",o),{videoFileUuid:(await p.Ay.post(`/api/upnode/video?${s.toString()}`)).data.meta.video_file_uuid,sha1:e,videoThumbnailSha1:a}}},696673:(e,r,n)=>{n.d(r,{$Q:()=>v,GS:()=>T,JB:()=>w,N4:()=>I,hT:()=>S,tz:()=>y,wJ:()=>b});var i=n(411855);n(188507);var a=n(258214),o=n(716034),s=n(298527),l=n(137459),c=n(173454),d=n(773610);n(875387),n(662163);var u=n(479296),m=n(378260),p=n(335682),h=n(694687),_=n(279453);n(514816);var g=n(984968);let f=["1341960932129965145","1341958841682444374","1341960613427075160"],E=["1344465555686977718","1344465264817347765","1344464949811785908"];function y(e){return f.includes(e)||E.includes(e)}let b=(0,u.D)(e=>22!==e.length&&!e.match(/\D/));function v(e){return(0,i.useMemo)(()=>e&&b(e)?e:null,[e])}function I(e){let r=(0,l.oA)(e),{id:n,thumbnail_url:i,library_key:o,publisher:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:i,library_key:o??(0,a.l)(""),author_name:s.name,author_handle:s.profile_handle}}function T(e){let{library_file_name:r,library_file_key:n,thumbnail_url:i,library_key:a,author_name:o,author_handle:s}=e;return{name:r,key:n,type:c.PP,thumbnail_url:i,library_key:a,author_name:o,author_handle:s}}function S(e){let{file:r,components:n,stateGroups:i,styles:a,variables:o,variableSets:s}=e,{name:l,key:c,type:d,thumbnail_url:u,library_key:m,author_name:p,author_handle:h}=r;return{library_file_key:c,library_file_name:l,thumbnail_url:u,num_components:n.length,num_state_groups:i.length,num_styles:a.length,num_variable_collections:s.length,num_variables:o.length,num_module_assets:0,type:d,library_key:m,author_name:p,author_handle:h}}let w=(0,o.eU)(e=>{let r=e(g.Me),n=(0,g.jv)(r?.id)?r?.id:null,i=e(h.h0),a=e(p.yV),o=a?a.parentOrgId:i,l=e(m.mQ),c=o?l[o]:null,u=e(_.U8U.Query(n||o?{teamId:n||"-1",orgId:o}:null)),f=e(d.AS).enabled;return"loaded"===u.status&&(0,s.rM)(u)?(0,s.Pp)(u.data.org,u.data.team,f):(0,s.MJ)(c,r,f)})},269167:(e,r,n)=>{n.d(r,{EO:()=>U,FP:()=>x,OY:()=>B,Qj:()=>W,Rm:()=>V,Y8:()=>j,aQ:()=>Z,ej:()=>D,gn:()=>X,kA:()=>P,lt:()=>Y,ul:()=>q,vT:()=>k,vl:()=>M,xp:()=>z,y1:()=>K,zH:()=>H});var i=n(411855),a=n(188507),o=n(776250),s=n(157663),l=n(38329),c=n(737947),d=n(966712),u=n(286640),m=n(761870);n(881388);var p=n(939863),h=n(654923),_=n(837324),g=n(466636),f=n(545941);n(376441);var E=n(662275),y=n(986270),b=n(756085),v=n(521010),I=n(555328);n(401730);var T=n(376485),S=n(880671),w=n(685436),A=n(3050),C=n(541158),N=n(479296),L=n(860178),O=n(215822);function R(e,r,n,i){return a=>{a(E.$O({type:w.h.type,data:{userId:e.id,resource:r,onSuccess:()=>{a(n=>{((0,I.I0)(r)||(0,I.xQ)(r))&&n(y.fR(r,e.id))}),n&&n()},onCancel:i}}))}}let P=(0,N.n)((e,r,n,i,a,o)=>{let l=(0,d.kc)().community_hub_admin&&n&&(0,f.AC)(n);return new Promise(d=>{let u=()=>{if(r){if(i||l){var a;e((a=()=>{W({type:"PAID"}),d()},e=>{e(E.$O({type:w.h.type,data:{userId:r.id,resource:n,localResource:i,onSuccess:a,onCancel:d,noInteractionMode:!0}}))}));return}(0,I.m3)(n)?e(R(r,n,()=>d(),()=>d())):s.k.error("Can only initiate checkout for a monetized or local resource.")}else{e(e=>{e(m.Ts({origin:"freemium_checkout_modal_in_open_session",redirectUrl:c.Ay.location.pathname,signedUpFromOpenSession:!0})),e((0,E.to)({type:S.x,data:{headerText:(0,p.t)("fullscreen.toolbar.log_in_to_do_more_with_figjam")}}))});return}};o===A.P.SKIP?u():e(E.$O({type:A.V.type,data:{type:r?o||A.P.PAID_FEATURE:A.P.LOGGED_OUT,onContinue:u,onClose:d,plugin:n&&(0,O.uF)(n)||i||a,monetizedResourceMetadata:n?.monetized_resource_metadata}}))})});function D(e){let r=(0,a.wA)(),n=(0,a.d4)(e=>e.authedActiveCommunityProfile),s=(0,a.d4)(e=>e.authedUsers),l=(0,h.I)(e);return i.useCallback(()=>{if(!e)return;let i=(0,g.QQ)(l),a=(0,I.m3)(e);if((0,o.sx)("cmty_resource_usage_action",{resourceType:(0,_.Dl)(e),resourceId:e.id,profileId:n?.id,hasActiveCommunityResourcePayment:i,isMonetizedResource:a}),!a||i||!1===function(e,r,n){if(!(0,I.m3)(n))return!1;let i=(0,v.G)({authedActiveCommunityProfile:e,authedUsers:r}),{usersCanPurchase:a,publishers:o}=(0,g.V4)(i,n);return(0!==a.length||0!==o.length)&&(0!==a.length||0===o.length)}(n,s,e))return;let c=(0,v.G)({authedActiveCommunityProfile:n,authedUsers:s}),{usersCanPurchase:d,publishers:u}=(0,g.V4)(c,e);if((0,o.sx)("Checkout Flow Entered",{resourceType:(0,_.Dl)(e),resourceId:e.id,numLoggedInAssociatedUsersThatCanPurchase:d.length,numLoggedInAssociatedPublishers:u.length}),1===d.length&&0===u.length){r(R(d[0],e));return}r((0,E.to)({type:C.I,data:{onUserSelect:n=>{(0,o.sx)("Pre Purchase User Selector Modal - User Selected",{resourceType:(0,_.Dl)(e),resourceId:e.id,userIdForPurchase:n.id}),r(R(n,e))},resource:e}}))},[e,l,n,s,r])}function k(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return(0,g.QQ)(n)}function M(e,r){let{publishers:n}=(0,g.V4)([r],e);return n.length>0}function F(e,r,n){return!(!e||!(0,I.m3)(e)||(0,I.PM)(e)||!(0,I.U)(e)&&((0,T.f5)(e)||(0,I.zF)(e))||n&&M(e,n))&&!(k(e,r)&&!function(e,r){let n=r?.[e.monetized_resource_metadata.id]||e.community_resource_payment;return n&&(0,g.UO)(n)}(e,r))}function x(){return(0,a.d4)(e=>e.communityPayments)}function U(e){return F(e,x(),(0,L.iZ)()||void 0)}function B(e){let r=x();return(0,I.m3)(e)&&k(e,r)}function V(e){return F(e,l.D&&l.D.getState().communityPayments,l.D&&l.D.getState().user||void 0)}let G="local-resource-payment";var H=(e=>(e.PAID="PAID",e.UNPAID="UNPAID",e.NOT_SUPPORTED="NOT_SUPPORTED",e))(H||{});function K(){return(0,u.DN)().get(G)}function W(e){(0,u.DN)().set(G,e)}function $(e,r){if(r&&(0,I.m3)(r))return e?.[r.monetized_resource_metadata.id]||r.community_resource_payment}function Y(e){return $(x(),e)}function z(e){let r=(0,a.d4)(r=>(0,O.my)(e,r.publishedPlugins)),n=Y(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function j({extension:e,publishedPlugins:r,publishedWidgets:n,communityPaymentsState:i}){let a=((0,T.k0)(e)?n:r)[e.plugin_id];if(!a)return;let o=$(i,a);return{...a,community_resource_payment:o}}function q(e){let r=(0,b.cW)()[e],n=Y(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function Z(e){let r=(0,a.d4)(r=>r.publishedWidgets[e]),n=Y(r);return i.useMemo(()=>r?{...r,community_resource_payment:n}:r,[n,r])}function X(e){let r=Y(e);return!!r&&(0,g.UO)(r)}},90115:(e,r,n)=>{n.d(r,{c6:()=>d,hI:()=>u,Ay:()=>c});var i,a=n(798902);!function(e){e[e.STARTING=0]="STARTING",e[e.FRONTMATTER=1]="FRONTMATTER",e[e.BODY=2]="BODY",e[e.FOOTER=3]="FOOTER"}(i||(i={}));var o=n(374228),s=n(742808),l=n(69961);let c=(0,a.yu)({onError:e=>{(0,s.Rh)("web.cortex.error",{route:e})},buildExtraHeaders:()=>{let e={};return l.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[o.H1.INTERNAL_USE_LLM_PROVIDER]="amazon-bedrock"),e}});class d{constructor(e){this.stream=e}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read(),{done:n,value:i}=await r;if(n)break;yield i}}finally{e.releaseLock()}}}class u{constructor(e,r){this.stream=e,this.timeoutMs=r}async *[Symbol.asyncIterator](){let e=this.stream.getReader();try{for(;;){let r=e.read();try{let e=new Promise((e,r)=>{setTimeout(()=>{r(Error("Timeout"))},this.timeoutMs)}),{done:n,value:i}=await Promise.race([r,e]);if(n)break;yield i}catch(e){if(e instanceof Error&&"Timeout"===e.message)break;throw e}}}finally{e.releaseLock()}}}},13520:(e,r,n)=>{n.d(r,{BQ:()=>m,Ay:()=>u,sZ:()=>p,_0:()=>h});var i=n(885659),a=n(341582),o=n(418956),s=n(825871),l=n(378260),c=n(106757),d=n(335682);function u(){return{orgId:o.zl.get(l._s)||null,teamId:o.zl.get(d.As)||null,fileKey:o.zl.get(d.ze)||null,userId:o.zl.get(c.kS)||null,trackingSessionId:(0,s.f)()}}var m=(e=>(e.RATE_LIMIT_EXCEEDED="rate_limit_exceeded",e.CONTENT_LENGTH_LIMIT="content_length_limit",e.UNSAFE_OR_HARMFUL_CONTENT="unsafe_or_harmful_content",e.GENERIC="generic",e.OFFLINE="offline",e.METER_EXCEEDED="meter_exceeded",e.NOT_IMPLEMENTED="not_implemented",e))(m||{});function p(e){if(e instanceof TypeError&&!navigator.onLine)return"offline";if(e instanceof a.CortexErrorV2){if(a.ProviderRateLimitExceededError.isInstance(e)||a.CortexRateLimitExceededError.isInstance(e))return"rate_limit_exceeded";if(a.ClientContentLengthLimitExceededError.isInstance(e)||a.ProviderContentLengthLimitExceededError.isInstance(e))return"content_length_limit";if(a.UnsafeOrHarmfulPromptError.isInstance(e)||a.ProviderUnsafeOrHarmfulContentError.isInstance(e))return"unsafe_or_harmful_content";if(a.NotImplementedError.isInstance(e))return"not_implemented";else if(a.OfflineError.isInstance(e))return"offline";else if(a.MeterExceededError.isInstance(e))return"meter_exceeded";else if(e?.statusCode===413)return"content_length_limit"}if(e instanceof i.G1)switch(e.type){case"rate_limit_exceeded":return"rate_limit_exceeded";case"content_length_limit_exceeded":case"payload_too_large":return"content_length_limit";case"unsafe_or_harmful_content":return"unsafe_or_harmful_content";case"offline":return"offline";case"meter_exceeded":return"meter_exceeded";case"generic":if(e.data&&"status"in e.data&&413===e.data.status)return"content_length_limit"}return"generic"}function h(e){return e instanceof i.G1&&"meter_exceeded"===e.type&&!!e.data.resetsAt}},683694:(e,r,n)=>{n.d(r,{PD:()=>g,wg:()=>y});var i=n(716034),a=n(408405),o=n(335682),s=n(529928),l=n(243987),c=n(746869),d=n(442617),u=n(986060),m=n(284111),p=n(378260),h=n(723239),_=n(582947);let g=(0,m.Z1)(h.Z_,(e,r)=>{let n=r(o.yV);if(null==n||null==e)return!1;let i=e.map(e=>e.team).find(e=>null!=e&&e.id===n.teamId);return null!=i&&c.ng.getProTrialStatus({grace_period_end:i.gracePeriodEnd?i.gracePeriodEnd.toISOString():null,grace_period_type:i.gracePeriodType})===u.a.IN_TRIAL});(0,m.J9)([h.Hh],([e],r)=>{let n=r(o.yV),i=r(p._s)?null:e;return!!n&&!!i&&!n.teamId&&!n.parentOrgId&&n.folderId===i}),(0,s.bt)(({openFile:e})=>{let r=e?.parentOrgId!=null,n=e?.team==null;return r&&n});let f=(0,s.bt)(({progressBarState:e})=>(0,a.T)(e?.mode));(0,i.eU)(e=>new Promise(r=>{e(f)||r(!1)})),(0,_.r1)("figjam_editor_onboarded");let E=(0,m.Z1)(h.Vm,(e,r)=>{let n=r(o.yV);return n?.teamId?e?.find(e=>e.id===n?.teamId):null});(0,m.J9)([p.KI,E],([e,r],n)=>{let i=n(o.yV),a=i?.parentOrgId?e[i.parentOrgId]:null,s=r?{id:r.id,subscription:r.subscription,student_team:!!r.studentTeamAt,grace_period_end:r.gracePeriodEnd?.toDateString()||null}:null;return(0,d.M_)({editorType:i?.editorType??null,org:a,team:s})}),(0,s.bt)(({showEditButton:e})=>e??!1),(0,i.eU)(e=>{let r=e(o.yV);if(!r)return!1;let{team:n}=r;return null!=n&&null==n.orgId&&!(0,l.w5)({subscription:n.subscription,student_team:null!=n.studentTeamAt,grace_period_end:n.gracePeriodEnd?.toISOString()??null})});let y=(0,i.eU)(e=>{let r=e(o.yV);return r?.canEdit??!1});(0,i.eU)(e=>{let r=e(o.yV);return!!r&&r.canView&&!r.canEdit})},378260:(e,r,n)=>{n.d(r,{KI:()=>u,UC:()=>_,ZS:()=>p,_s:()=>m,mQ:()=>h,rg:()=>d});var i=n(418956),a=n(529928),o=n(99506),s=n(279453),l=n(502665),c=n(284111);let d=(0,c.Z1)(s.Tej.Query({}),e=>e.currentUser.orgUsers),u=(0,c.Z1)(d,e=>{let r=e?.map(e=>e.org);if(void 0===r)return{};let n={};for(let e of r)null!=e&&(n[e.id]={...e,bigmaEnabled:!!e.bigmaEnabledAt,voiceEnabled:!e.voiceDisabledAt,widgetsWhitelistEnforced:!!e.widgetsWhitelistEnforced});return n}),m=(0,a.bt)(e=>e.currentUserOrgId),p=(0,c.J9)([u],([e],r)=>{let n=r(m);return null!=n?e[n]:null}),h=(0,a.bt)(e=>e.orgById),_=(0,i.Iz)(e=>(0,c.Z1)(s.s5h.Query({orgId:e}),e=>!!e.org?.workspaces?.length&&!!e.org?.bigmaEnabledAt));(0,c.J9)([p,d,l.N],([e,r,n],i)=>{if(!e)return!1;let a=i(h)[e.id];if(!a.bigma_enabled||!a.workspaces_nux_active_at)return!1;let s=r?.find(r=>r.orgId===e.id&&r.userId===n);return!!s&&s.permission!==o._D.GUEST}),(0,c.J9)([s.Tej.Query({}),p],([e,r])=>{let{orgUsers:n}=e.currentUser;if(null!=r){let e=n?.find(e=>e.orgId===r.id);if(e)return"full"===e.designPaidStatus?"design":"full"===e.devModePaidStatus?"dev mode":"none"}return null}),(0,c.Z1)(u,e=>!!Object.values(e).find(e=>e.k12GoogleOrg))},543312:(e,r,n)=>{n.d(r,{e:()=>l});var i=n(99506),a=n(243987),o=n(284111),s=n(723239);(0,o.Z1)(s.Vm,e=>(e??[]).some(e=>null!=e&&!(0,a.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})&&!e.orgId&&e.canEdit));let l=(0,o.Z1)(s.Vm,e=>(e??[]).filter(e=>null!=e&&e.subscription===i.Qh.OK&&null==e.gracePeriodEnd&&!e.orgId&&e.canEdit))},723239:(e,r,n)=>{n.d(r,{Fy:()=>E,Hh:()=>y,Vm:()=>I,Z_:()=>v,mp:()=>f,t:()=>w,zN:()=>b});var i=n(133537),a=n(966712),o=n(314866),s=n(716034),l=n(418956),c=n(627472),d=n(529928),u=n(279453),m=n(243987),p=n(605228),h=n(143678),_=n(284111),g=n(378260);(0,_.J9)([u.Tej.Query({}),g.ZS],([e,r])=>null!=e.currentUser.id&&r?.canRead?h.qo.ORG:h.qo.PERSONAL);let f=(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.createdAt),E=(0,_.Z1)(f,e=>e.getTime()<=Date.now()-12096e5),y=(0,_.J9)([g.rg,u.Tej.Query({})],([e,r],n)=>{let i=n(g._s);if(!i)return r.currentUser.draftsFolderId;{let r=e?.find(e=>e.orgId===i);return r?.draftsFolderId||null}});(0,_.Z1)(u.Tej.Query({}),e=>{let r=e.currentUser.email;return(0,i.jm)(r)||!!r?.endsWith("@dev.figma.com")});let b=(0,_.Z1)(u.Tej.Query({}),e=>null!=e.currentUser.studentValidatedAt);(0,_.Z1)(u.UpR.Query({}),e=>e.currentUser.eduPeriodEnd);let v=(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.teamRoles),I=(0,_.Z1)(v,e=>e?.map(e=>e.team).filter(e=>null!=e)),T=(0,d.bt)(e=>e.isFreeUser),S=(0,_.J9)([g.rg,I],([e,r])=>(!e?.length||!(e.length>0))&&(null==r||!r.some(e=>e.canEdit&&(0,m.w5)({subscription:e.subscription,student_team:!!e.studentTeamAt,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toISOString():null})))),w=(0,_.Z1)(S,(e,r)=>(0,a.kc)().ps_benchmark?r(T):e);(0,_.Z1)(g.rg,e=>!!e?.length&&e.length>0),(0,_.Z1)(u.Tej.Query({}),e=>{let r=e.currentUser.email;return null!=r?(0,i.qe)(r):void 0});let A=(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.profile?.jobTitle);(0,_.Z1)(A,e=>{let r=(0,o.HB)(e);return"designer"!==r&&"other"!==r&&"unknown"!==r}),(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.profile?.usagePurpose);let C=(0,d.bt)(e=>e.authedProfilesById);(0,s.eU)(e=>Object.values(e(C)).some(e=>!!e.org_id||!!e.team_id)),(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.email),(0,_.Z1)(u.Tej.Query({}),e=>e.currentUser.emailValidatedAt);let N=(0,d.bt)(e=>e.userAnalyticsData);(0,l.Iz)(e=>(0,c.mg)(N,r=>{if(null==r)return;let n=r[e];return p.bW.includes(e)&&n?new Date(n):n})),(0,_.J9)([u.Tej.Query({}),g.ZS],([e,r])=>{let n="loaded"===e.currentUser.externalRestrictedOrgId.status?e.currentUser.externalRestrictedOrgId.data:null;return!!(e.currentUser&&n&&r?.id!==n)})},582947:(e,r,n)=>{n.d(r,{Fu:()=>c,r1:()=>u});var i=n(418956),a=n(279453),o=n(59530),s=n(284111);let l=(0,s.Z1)(a.Tej.Query({}),e=>e.currentUser.userFlags.reduce((e,r)=>({...e,[r.name]:r}),{})),c=(0,i.Iz)(e=>(0,s.Z1)(l,r=>r[e])),d=e=>e.length>0?new Date(Math.max(...e.map(Number))):void 0;(0,s.Z1)(l,e=>d(Array.from(o.V5).map(r=>e[r]?.updatedAt).filter(e=>null!=e)));let u=(0,i.Iz)(e=>(0,s.Z1)(l,r=>null!=r[e]));u("file_browser_onboarded"),c("not_gen_0")},205548:(e,r,n)=>{function i(e,r){return!!e[r]}function a(e){return document.querySelectorAll(`[data-onboarding-key=${JSON.stringify(e)}]`).length>0}n.d(r,{KI:()=>a,mW:()=>i}),n(966712),n(99506),n(243987),n(746869),n(442617),n(986060),n(59530),n(143678)},116723:(e,r,n)=>{n.d(r,{X:()=>i});let i="curator_global_request_close";var a=(e=>(e.FigjamUniversalInsertsMenuOpen="figjam_universal_inserts_menu_open",e.FigjamDLTSubmenuOpen="figjam_DLT_submenu_open",e))(a||{})},708277:(e,r,n)=>{n.d(r,{Op:()=>a,gV:()=>o,nr:()=>s});var i=n(43538);function a(e){let r=new Map,n=new Map;for(let{id:i,...a}of e.states){if(r.has(i))throw Error(`Duplicate state ID ${i.toString()} found when building state machine`);if(r.set(i,a),null==a.transitions)continue;let e=new Map;for(let{event:r,...o}of(n.set(i,e),a.transitions)){let n=e.get(r);null==n&&(n=[],e.set(r,n)),n?.push(o)}}return{config:e,isComplete(e){let n=r.get(e);return n?.terminal??!1},isInitial:r=>r===e.initial,start:()=>e.initial,transition(e,r){let i=n.get(e)?.get(r.id);if(null==i)return null;for(let n of i)if(null==n.condition||n.condition({from:e,to:n.target,event:r}))return n.target;return null}}}function o(e){let r=new Set;for(let n of e.config.states)if(null!=n.transitions)for(let e of n.transitions)e.event===i.b&&e.meta?.userEvents!=null&&e.meta.userEvents.forEach(e=>r.add(e));return r}function s(e,r,n){var a,o;let s=new Set("string"==typeof e?[e]:e),l={userEvents:[...s]};return a=i.b,o={condition:e=>s.has(e.event.type)&&(n?.condition?.(e)??!0),meta:l},{event:a,target:r,condition:o?.condition,meta:o?.meta}}},835691:(e,r,n)=>{n.d(r,{zl:()=>o});var i=n(411855),a=n(418956);function o({_atom:e,machine:r}){let[{currentState:n,lastEvent:o,previousState:s},l]=(0,a.fp)(e),c=r.isComplete(n);return(0,i.useMemo)(()=>({completed:c,currentState:n,lastEvent:o,previousState:s,reset:l}),[c,n,o,s,l])}n(47506)},268223:(e,r,n)=>{n.d(r,{Op:()=>i.Op,nr:()=>i.nr,rn:()=>a.rn});var i=n(708277),a=n(593788);n(835691)},758431:(e,r,n)=>{n.d(r,{A3:()=>m,IK:()=>u});var i=n(268853),a=n(517333);n(737947);var o=n(456772);n(563706);var s=n(776621);n(738269),n(369351),n(273709);var l=n(36240);let c=new Map,d=new l.vY;function u(e){let r=(0,o.WB)();if(a.S8?.setListener({name:"updateRealtimeTokens",listener(n){d.updateSubscriptions(e,n,r)}}),r&&(0,l.cz)(r),a.S8){let n=a.S8.getRealtimeTokens();if(null==n&&((0,s.$D)(i.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${n} from getRealtimeTokens() on first try`),{level:"warning"}),n=a.S8.getRealtimeTokens()),null==n){(0,s.$D)(i.e.DESKTOP,Error(`initDesktopBellFeedBindings: got ${n} from getRealtimeTokens() on second try`));return}d.updateSubscriptions(e,n,r)}}function m(e){d.handleFileMessage(e)}a.S8?.setListener({name:"notificationClicked",listener(e){c.get(e)?.(),c.delete(e)}})},788744:(e,r,n)=>{n.d(r,{Ck:()=>l,Fl:()=>h,Ho:()=>c,Sd:()=>p,fV:()=>d});var i=n(411855),a=n(966712),o=n(418956),s=n(555301);function l(e,r,n){let i=function(e,r){let n=u(r);return!!e&&n.has(e)}(r,n),o=m(n);return(0,a.kc)().dse_lk_approved_libraries?!!e&&o.has(e):i}function c(e,r){let n=function(e){let r=(0,o.md)(s.j1);return!!e&&r.has(e)}(r),i=(0,o.md)(s.S0);return(0,a.kc)().dse_lk_approved_libraries?!!e&&i.has(e):n}function d(e,r,n){let i=l(e,r,n),a=c(e,r);return i||a}function u(e){return(0,o.md)(e?s.b$:s.SA)}function m(e){return(0,o.md)(e?s.Gg:s.bJ)}function p(e){let r=u(e),n=(0,o.md)(s.j1);return i.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}function h(e){let r=m(e),n=(0,o.md)(s.S0);return i.useMemo(()=>({workspaceApprovedLibraryKeys:r,orgApprovedLibraryKeys:n}),[r,n])}},756317:(e,r,n)=>{n.d(r,{FX:()=>I,KP:()=>b,L1:()=>v});var i=n(411855),a=n(902634),o=n(132361),s=n(629019),l=n.n(s),c=n(418956),d=n(46481),u=n(154254),m=n(556261),p=n(56099),h=n(788744),_=n(680681),g=n(555301),f=n(935631),E=n(109903);function y({isForSelect:e,orgNameForTooltip:r,workspaceNameForTooltip:n,tooltipDelay:s=250,tooltipLocation:c="above",size:u="small",variant:m}){let p=r||n?(0,_.wZ)({orgName:r,workspaceName:n,tooltipLocation:c,tooltipDelay:s}):{};return i.createElement(d.U,{className:l()("secondary"===m?f.Wo:f.Kk,e?f.cH:void 0),svg:E.A,...p},i.createElement("div",{className:l()("secondary"===m?f.Wo:f.Kk,e?f.cH:void 0),...p},"large"===u?i.createElement(a.U,null):i.createElement(o.x,null)))}function b({fileKey:e,libraryKey:r,...n}){let a=(0,c.md)(g.d$),o=(0,m.dh)({migrationGroup:p.L.GROUP_8,component:"ApprovedLibraryIconForFullScreen"}),s=(0,h.Ho)(r,e);return i.createElement(y,{...n,orgNameForTooltip:s?o:void 0,workspaceNameForTooltip:a?.name})}function v(e){let r=(0,c.md)(g.G7),n=(0,m.dh)({migrationGroup:p.L.GROUP_8,component:"ApprovedLibraryIconForUserDefaultSubscriptions"}),a=(0,h.Ho)(e.libraryKey,e.fileKey);return i.createElement(y,{...e,orgNameForTooltip:a?n:void 0,workspaceNameForTooltip:r?.name})}function I(){return i.createElement("div",{className:u.cx.flex.alignCenter.justifyCenter.flexShrink0.ml4.mr4.$},i.createElement(y,{isForSelect:!0}))}},680681:(e,r,n)=>{n.d(r,{HZ:()=>y,NX:()=>v,Qy:()=>_,k9:()=>h,sF:()=>b,wZ:()=>E}),n(133554);var i=n(91408),a=n(966712),o=n(418956),s=n(708389),l=n(416095),c=n(498606),d=n(109311),u=n(555301),m=n(837746);let p=(0,i.jz)(m.UEm);function h({libraries:e,approvedLibraryFileKeysByResourceType:r,approvedLibraryKeysByResourceType:n,currentTeamId:i=null,shouldSortByTeam:a=!1}){e.sort((e,o)=>_({libraryA:e,libraryB:o,approvedLibraryFileKeysByResourceType:r,approvedLibraryKeysByResourceType:n,currentTeamId:i,shouldSortByTeam:a}))}function _({libraryA:e,libraryB:r,approvedLibraryFileKeysByResourceType:n,approvedLibraryKeysByResourceType:i,currentTeamId:o=null,shouldSortByTeam:c=!1}){let{workspaceApprovedLibraryKeys:d,orgApprovedLibraryKeys:u}=(0,a.kc)().dse_lk_approved_libraries?i:n;if(c&&"file"in e&&"file"in r&&e.team_id!==r.team_id)return(0,l.r9)(e,r,o);let m=(0,a.kc)().dse_lk_approved_libraries?e.library_key??"":g(e),p=(0,a.kc)().dse_lk_approved_libraries?r.library_key??"":g(r),h=u.has(m)?1:0,_=u.has(p)?1:0;if(h!==_)return _-h;let E=d.has(m)?1:0,y=d.has(p)?1:0;return E!==y?y-E:s.f.LEXICOGRAPHICALLY(f(e),f(r))}function g(e){return"key"in e?e.key:e.library_file_key}function f(e){return"name"in e?e.name:e.library_file_name}function E({orgName:e,workspaceName:r,tooltipLocation:n,tooltipDelay:i}){let a=e??r;if(!a)return{};let o=function(e){try{if(e){let r=function(e){let r=document.createElement("span");r.textContent=e,r.style.visibility="hidden",r.style.fontWeight="bold",r.style.display="inline-block",document.body.appendChild(r);let n=r.offsetWidth;return document.body.removeChild(r),n}(e);if(r){if(r>p)return p;if(r>p/2)return Math.max(116,r);return 116}}}catch(e){console.error(e)}return p}(a);return{"data-tooltip-type":c.Ib.SPECIAL,"data-tooltip":d.A,..."below"===n?{"data-tooltip-show-below":!0}:{"data-tooltip-show-above":!0},...i?{"data-tooltip-timeout-delay":i}:{"data-tooltip-show-immediately":!0},"data-tooltip-max-width":o,"data-tooltip-workspace-name":r,"data-tooltip-org-name":e}}function y(e){if(!e)return!1;let r=o.zl.get(u.SA).has(e),n=o.zl.get(u.j1).has(e);return r||n}function b(e,r){if(!(0,a.kc)().dse_lk_approved_libraries)return y(r);if(!e)return!1;let n=o.zl.get(u.bJ).has(e),i=o.zl.get(u.S0).has(e);return n||i}function v({workspaceApprovedLibraryKeys:e,orgApprovedLibraryKeys:r}){return e.size>0||r.size>0}},555301:(e,r,n)=>{n.d(r,{G7:()=>I,Gg:()=>S,S0:()=>b,SA:()=>f,b$:()=>T,bJ:()=>E,d$:()=>g,j1:()=>y});var i=n(966664),a=n(258214),o=n(716034),s=n(684107),l=n(711525),c=n(960884),d=n(335682),u=n(279453),m=n(596607),p=n(643067),h=n(984968);let _=(0,o.eU)(e=>{let r=(()=>{let r=e(c.Z),n=e(d.yV);if(n){if(!n.canEdit||!(0,p.Oe)(r))return;let i=n.team?.workspaceId;return n.parentOrgId&&!i?e(m.LM):i}let i=e(h.Me);if((0,p.Oe)(r))return i?.workspace_id})();if(!r)return;let n=e(u.Ce_.Query({workspaceId:r}));return n.data?.workspace??void 0}),g=(0,o.eU)(e=>{let r=(()=>{let r=e(c.Z),n=e(d.yV);if(n){if(!n.canEdit||!(0,p.Oe)(r))return;let i=n.team?.workspaceId;return n.parentOrgId&&!i?e(m.LM):i}let i=e(h.Me);if((0,p.Oe)(r))return i?.workspace_id})();if(!r)return;let n=e(u.gDr.Query({workspaceId:r}));return n.data?.workspace??void 0}),f=(0,o.eU)(e=>{let r=e(_);return w(r?.approvedLibraries??[])}),E=(0,o.eU)(e=>{let r=e(g);return A(r?.approvedLibraries??[])}),y=(0,o.eU)(e=>{let r=e(c.Z);if(!r||!(0,p.Oe)(r))return new Set([]);let n=e((0,s.ip)({orgId:r.id}));return n.data?.org.status!==l.tT.Loaded?new Set([]):w(n.data.org.data?.approvedLibraries??[])}),b=(0,o.eU)(e=>{let r=e(c.Z);if(!r||!(0,p.Oe)(r))return new Set([]);let n=e(u.bEy.Query({orgId:r.id}));return A(n.data?.org?.approvedLibraries??[])}),v=(0,o.eU)(e=>{{let r=e(c.Z),n=e(m.LM);if(!n||!(0,p.Oe)(r))return;let i=e((0,s.Tb)({workspaceId:n}));return i.data?.workspace??void 0}}),I=(0,o.eU)(e=>{{let r=e(c.Z),n=e(m.LM);if(!n||!(0,p.Oe)(r))return;let i=e(u.gDr.Query({workspaceId:n}));return i.data?.workspace??void 0}}),T=(0,o.eU)(e=>{let r=e(v);return w(r?.approvedLibraries??[])}),S=(0,o.eU)(e=>{let r=e(I);return A(r?.approvedLibraries??[])});function w(e){return new Set(e.map(e=>e.fileKey))}function A(e){return new Set(e.map(e=>(0,l.oA)(e.libraryKey)).filter(i.Vq).map(a.l))}},405273:(e,r,n)=>{n.d(r,{e:()=>d});var i=n(258214),a=n(418956),o=n(330654),s=n(335682),l=n(3036);let c=(0,a.Iz)(e=>(0,l.P)(`recently-used-${e}s`,"key",o.object({type:o.literal(e),key:o.string(),libraryKey:o.string()}),{transform:(e,r)=>{let n=r(s.yV);return{type:e.type,key:"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key,libraryKey:"LOCAL"===e.subscriptionStatus?(0,i.l)(n?.libraryKey??""):e.sourceLibraryKey}}}));function d(e){a.zl.set(c(e.type),e)}},733169:(e,r,n)=>{n.d(r,{J2:()=>y,Sw:()=>b,bL:()=>f,cB:()=>E});var i=n(411855),a=n(776250),o=n(966712),s=n(418956),l=n(915440),c=n(391388),d=n(696673),u=n(335682),m=n(594901),p=n(132135),h=n(279453),_=n(243987),g=n(428467);function f({libraryKey:e,disabled:r,nodeId:n,mainComponent:i,stateGroupId:a,isDevHandoff:o,isDevModeVarsTable:s,devModeVarsTableSelection:d,isDevModeOverview:u,devModeFocusId:m}){let p=(0,l.Rs)((0,h.iAs)({libraryKey:e??""}),{enabled:!r&&!!e});return c.Qw.useTransform(p,e=>E({data:e,nodeId:n,stateGroupId:a,isDevHandoff:o,isDevModeOverview:u,isDevModeVarsTable:s,devModeVarsTableSelection:d,devModeFocusId:m,mainComponent:i}))}function E({data:e,nodeId:r,stateGroupId:n,isDevHandoff:i,isDevModeVarsTable:a,devModeVarsTableSelection:o,isDevModeOverview:s,devModeFocusId:l,mainComponent:c}){let d=e.libraryKeyToFile;return d?d.fileCanAccess?{type:"team",link:(0,p.jN)({file:{key:d.fileCanAccess.key},nodeId:r,mainComponent:c,stateGroupId:n,isDevHandoff:i,isDevModeOverview:s,isDevModeVarsTable:a,devModeVarsTableSelection:o,devModeFocusId:l})}:d.hubFile?{type:"community",link:(0,p.X$)(d.hubFile.id)}:void 0:void 0}function y({openFile:e,permissionsState:r,sourceLibraryFile:n,user:i,sourceLibraryFileKey:a,sourceFileCanEdit:o}){return!!(a&&(0,d.wJ)(a))||!!n&&(!!o||(e?.parentOrgId?e.parentOrgId===n?.parent_org_id:(0,_.XX)(e?.team)?!!(n?.team_id&&n?.team_id===e?.teamId):i?.drafts_folder_id!=null&&i.drafts_folder_id===e?.folderId&&function(e,r,n){if(!r?.team_id||!e)return!1;let i=n.teams[r.team_id];return!!(i&&(0,_.w5)(i)&&(0,g.canViewTeam)(i.id,n))}(i,n,r)))}function b(e,r){let[n,d]=i.useState(!1),p=(0,m.FC)(),_=(0,u.q5)(),g=(0,s.md)(h.pKB.Query(e?{sourceFileKey:e}:null)),f=(0,l.Rs)((0,h.iAs)({libraryKey:r??""}),{enabled:(0,o.kc)().dse_lk_go_to_source_audit&&!!r}),b=c.Qw.useTransform(g,r=>!!y({openFile:_,permissionsState:p,user:p.user,sourceLibraryFile:r.file?{parent_org_id:r.file.parentOrgId,team_id:r.file.teamId}:null,sourceLibraryFileKey:e,sourceFileCanEdit:!!r.file?.canEdit}));return i.useEffect(()=>{if(n||!(0,o.kc)().dse_lk_go_to_source_audit||!r||"loaded"!==b.status||"loaded"!==f.status)return;let e=E({data:f.data});a.az.trackDefinedEvent("assets_panel.go_to_source_audit",{oldResult:b.data,newResult:null!=e,libraryKey:r??void 0}),d(!0)},[f,g,n,r,b]),b}},957987:(e,r,n)=>{n.d(r,{P:()=>E});var i=n(411855),a=n(629019),o=n.n(a),s=n(418956),l=n(824630),c=n(335682),d=n(556261),u=n(56099),m=n(773610),p=n(662163),h=n(788744),_=n(756317),g=n(830445),f=n(291673);function E({resourceId:e,libraryKey:r,showPresetTooltip:n,tooltipDelay:a,tooltipLocation:E,compact:y,colorPrimaryOnHover:b}){let v=(0,d.wb)({migrationGroup:u.L.GROUP_5,component:"LibraryBadge"}),I=(0,c.tS)(),T=(0,h.fV)(r,e),S=(0,m.ie)(e),w=(0,s.md)(p.xL),A=!!e&&w.includes(e),C=o()(f.iE,{[f.oE]:y,[f.FT]:b});return v&&e!==I&&T?i.createElement("div",{className:C},i.createElement(_.KP,{fileKey:e,libraryKey:r,tooltipDelay:a,tooltipLocation:E})):e!==I&&((0,g.TX)(e)||S||A)?i.createElement("div",{className:C},i.createElement(l.E,{showTooltip:n,hubFileId:e,tooltipDelay:a,tooltipLocation:E})):null}},830445:(e,r,n)=>{n.d(r,{Ag:()=>C,E_:()=>w,Gb:()=>b,HA:()=>y,Os:()=>M,TX:()=>A,Xx:()=>E,ee:()=>f,fn:()=>T,ku:()=>F,lR:()=>v,nT:()=>k,p9:()=>D,qA:()=>S,xm:()=>I});var i=n(411855),a=n(258214),o=n(776250),s=n(418956),l=n(716034),c=n(130097),d=n(173748),u=n(99506),m=n(279453),p=n(540019),h=n(137459),_=n(875387),g=n(662163);function f(e,r){return"fileKey"===r?{fileKey:e,type:r}:{hubFileId:e,type:r}}function E(e,r){let{type:n,...i}=r;return{...e,...i}}function y(e,r,n){if("loaded"===e.status){let n=e.data.libraryPresetSubscriptionsV2?.find(e=>e.hubFileId===r);if(n)return n.partner_type??void 0}if(null==n)return;let i=n.publisher.profile_handle.toLowerCase(),a=(0,h.oA)(n);return"apple"===i?u.Pn.APPLE:a?.toLowerCase?.()?.includes("material")?u.Pn.GOOGLE:u.Pn.FIGMA}function b(e){return v(e,(0,s.md)(_.TG))}function v(e,r){return r.has(e.library_key)}function I(){let e=(0,s.md)(_.TG);return(0,i.useCallback)(r=>v(r,e),[e])}let T=(0,l.eU)(null),S=(0,l.eU)({value:(0,d.N)(),updateSource:"page_load"});function w(e){let r=(0,s.md)(_.qq);return!!e&&r.has((0,a.l)(e))}function A(e){return!!e&&s.zl.get(_.qq).has((0,a.l)(e))}function C(e){if(!e)return!1;let r=s.zl.get(g.dm),n=s.zl.get(g.O2);return r.includes((0,a.l)(e))||n.includes((0,a.l)(e))}let N={VariableByKey:null,VariableCollectionByKey:null,StyleByKey:null,CommunityLibraryComponentsAndStateGroups:null},L=[m.Lom,m.bsh,m.yFE,m.vsj],O=e=>L.some(r=>r._name===e),R=e=>O(e)?e:void 0,P=e=>p.M4.Query({fetch:async r=>{let n=(0,c.S8)(e,r.arguments),i=R(e._name);if(i){let n=N[i];(null===n||r.nonce.value>n)&&(o.az.trackDefinedEvent("preset_libraries.static_update_fetch",{viewName:R(e._name),batchSize:r.arguments.length,updateSource:r.nonce.updateSource}),N[i]=r.nonce.value)}return await n}}),D=P(m.Lom),k=P(m.bsh);P(m.yFE);let M=P(m.vsj);function F(e,r,n){let i=n(T),a=n(S),o=n(e({arguments:r,nonce:a}));return"loading"===o.status&&null!==i&&(o=n(e({arguments:r,nonce:i}))),o}},450225:(e,r,n)=>{n.d(r,{Ci:()=>o,WJ:()=>i,vO:()=>s,yc:()=>a}),n(939683);var i=(e=>(e.PASTE="PASTE",e.MODAL="MODAL",e.PLUGIN="PLUGIN",e))(i||{}),a=(e=>(e.ATTEMPT="figjam_link_metadata_attempt",e.ERROR="figjam_link_metadata_error",e.SUCCESS="figjam_link_metadata_success",e.EMBED_CLICK="figjam_link_embed_click",e.CONVERT_TO_TEXT="figjam_link_metadata_convert_to_text",e.OPEN_PREVIEW="figjam_link_preview_open",e.EMBED_EXPAND="figjam_link_embed_expand",e.COPY_LINK="figjam_link_metadata_copy_url",e.SWITCH_ORIENTATION_VERTICAL="figjam_link_preview_orientation_vertical",e.SWITCH_ORIENTATION_HORIZONTAL="figjam_link_preview_orientation_horizontal",e.EMBED_DEACTIVATE="figjam_embed_deactivate",e))(a||{}),o=(e=>(e.EMBED="embed",e.LINK_PREVIEW="preview",e))(o||{});function s(e){try{return new URL(e).hostname}catch(e){return"Could not parse"}}},641638:(e,r,n)=>{n.d(r,{BF:()=>h,CR:()=>m,RW:()=>_,XL:()=>p,kA:()=>u});var i=n(138020),a=n(915440),o=n(711525),s=n(763185),l=n(279453),c=n(335682);function d(e,r,n){let a=[],o=[];for(let r of e){var s;if(!r.plugin)continue;if("status"in r.plugin){if(r.plugin.status!==i.tT.Loaded)continue;s=r.plugin.data}else s=r.plugin;if(!s)continue;let e="Workspace"===r.allowlistGroupType,l=r.allowlistedWorkspace;if(e&&!l||e&&!n)continue;let c=l?.id;n&&c&&c!==n||(s.isWidget?o.push(s.id):a.push(s.id))}return"plugin"===r?a:o}function u(e,r,n=!0){let i=_(),o=(0,a.Rs)(l.M9I,{orgId:e},{enabled:n}),s=o.data?.org;return"loading"!==o.status&&i.loaded?"errors"!==o.status&&s?{loaded:!0,data:d(s.allowlistedPlugins,r,i.data?.workspaceId)}:{loaded:!0,data:[]}:{loaded:!1}}function m(e,r=!0){let n=(0,s.c)(r);if(!n.loaded)return{loaded:!1};let i=n.data;return{loaded:!0,data:d(i?.allowlistedExtensions??[],e,i?.workspace?.id)}}function p({workspace:e,hasPendingRequest:r,extension:n}){return!!(e.publicPluginsOrWidgetDisabled&&!r&&e.extensionRequestsAllowed&&!n?.roles.org)}function h({org:e,extensionVersion:r,isWidget:n,allowlistedExtensions:i}){return!!e&&!!r&&!!(function({org:e,isWidget:r}){if(!e)return!1;let n=r?e.widgets_whitelist_enforced:e.plugins_whitelist_enforced,i=r?e.widget_requests_allowed:e.plugin_requests_allowed;return n&&i}({org:e,isWidget:n})&&!r.is_private&&!i[r.plugin_id])}function _(){let e=(0,c.q5)(),r=!!e,n=(0,a.Rs)(l.iJD,{fileKey:e?.key??""},{enabled:r});return r?"loaded"!==n.status?{loaded:!1}:{loaded:!0,data:{workspaceId:n.data?.file?.workspaceId||void 0,workspaceName:o.oA(n.data?.file?.computedWorkspace)?.workspace?.name,fileKey:e.key,fileName:e.name}}:{loaded:!0,data:void 0}}},723245:(e,r,n)=>{n.d(r,{D6:()=>c,T0:()=>u,TF:()=>_,UL:()=>I,ds:()=>g,eU:()=>m,gV:()=>E,kK:()=>d,sb:()=>v,t$:()=>b,tW:()=>y});var i=n(140593),a=n(776250),o=n(966712);n(286098),n(738269);var s=n(477782),l=n(99506);function c(e){return null!=e||(0,o.kc)().ps_benchmark}function d(e){return e?1e3:(0,o.kc)().ps_benchmark?50:20}function u(e,r){return g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,e.currentUser.favoritedProjects,e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).find(e=>e.resource.resourceId===r)}function m(e,r){switch(r){case l.bk.FILE:return e.favoritedResource?.favoritedFile!=null?{id:e.favoritedResource?.id,resourceType:l.bk.FILE,resource:e.favoritedResource?.favoritedFile}:void 0;case l.bk.PROTOTYPE:return e.favoritedResource?.favoritedPrototype!=null?{id:e.favoritedResource?.id,resourceType:l.bk.PROTOTYPE,resource:e.favoritedResource?.favoritedPrototype}:void 0;case l.bk.FOLDER:return e.favoritedResource?.favoritedProject?{id:e.favoritedResource?.id,resourceType:l.bk.FOLDER,resource:e.favoritedResource?.favoritedProject}:void 0;case l.bk.TEAM:return e.favoritedResource?.favoritedTeam?{id:e.favoritedResource?.id,resourceType:l.bk.TEAM,resource:e.favoritedResource?.favoritedTeam}:void 0;case l.bk.WORKSPACE:return e.favoritedResource?.favoritedWorkspace?{id:e.favoritedResource?.id,resourceType:l.bk.WORKSPACE,resource:e.favoritedResource?.favoritedWorkspace}:void 0;default:return}}function p(e,r,n,i,o,s){(0,a.sx)("data_drift_favorited_resource_corrected",{favoritedResourceId:e,resourceType:r,resourceTeamId:n,underlyingResourceTeamId:i,resourceOrgId:o,underlyingResourceOrgId:s},{forwardToDatadog:!0})}function h(e,r){return e.has(r.resourceId)?null:(e.add(r.resourceId),r)}function _(e,r,n){if(!(0,o.kc)().ps_benchmark_favorites_data_client_side_fix||!(0,o.kc)().ps_benchmark)return{favoritedFiles:e.currentTeamUser?.favoritedFiles,favoritedProjects:e.currentTeamUser?.favoritedProjects,favoritedPrototypes:e.currentTeamUser?.favoritedPrototypes,favoritedFilesKeySet:new Set,favoritedPrototypesIdSet:new Set,favoritedFoldersIdSet:new Set};let i=new Set((n??[]).map(e=>e.plan_id)),a=new Set,s=new Set,l=new Set;return{favoritedFiles:(e?.favoritedFiles??[]).map(e=>{if(null!=r){if(r===e.file?.teamId)return e.teamId!==e.file?.teamId&&(p(e.resourceId,"file",e.teamId,e.file.teamId,null,null),e.teamId=e.file?.teamId),h(a,e);if(e.teamId===r&&!i.has(e.file?.teamId??""))return h(a,e)}}).filter(e=>null!=e),favoritedProjects:(e?.favoritedProjects??[]).map(e=>{if(null!=r){if(r===e.project?.teamId)return e.teamId!==e.project?.teamId&&(p(e.resourceId,"folder",e.teamId,e.project?.teamId,null,null),e.teamId=e.project?.teamId),h(l,e);if(e.project?.orgId===null&&e.teamId===r&&!i.has(e.project?.teamId??""))return h(l,e)}}).filter(e=>null!=e),favoritedPrototypes:(e?.favoritedPrototypes??[]).map(e=>{if(null!=r){if(r===e.prototype?.file?.teamId)return e.teamId!==e.prototype?.file?.teamId&&(p(e.resourceId,"prototype",e.teamId,e.prototype?.file?.teamId,null,null),e.teamId=e.prototype?.file?.teamId),h(s,e);if(e.prototype?.file?.parentOrgId===null&&e.teamId===r&&!i.has(e.prototype?.file?.teamId??""))return h(s,e)}}).filter(e=>null!=e),favoritedFilesKeySet:a,favoritedPrototypesIdSet:s,favoritedFoldersIdSet:l}}function g(e,r,n,i,a){return f(e?.filter(e=>e.file?.canView)??[],r??[],n?.filter(e=>e.project&&!e.project.deletedAt)??[],i?.filter(e=>e.team&&!e.team.deletedAt)??[],a??[])}let f=(e,r,n,i,a)=>{let o=e.map(e=>({id:e.id,resourceType:l.bk.FILE,resource:e})),s=r.map(e=>({id:e.id,resourceType:l.bk.PROTOTYPE,resource:e}));return[...o,...s,...n.map(e=>({id:e.id,resourceType:l.bk.FOLDER,resource:e})),...i.map(e=>({id:e.id,resourceType:l.bk.TEAM,resource:e})),...a.map(e=>({id:e.id,resourceType:l.bk.WORKSPACE,resource:e}))]};function E(e,r){let n=d(r);return g(e.currentUser.favoritedFiles,e.currentUser.favoritedPrototypes,(0,o.kc)().ps_benchmark||r?e.currentUser.favoritedProjects:[],e.currentUser.favoritedTeams,e.currentUser.favoritedWorkspaces).length>=n}function y(e){return!!e&&e>=1e3}function b(e,r){let n={};e.forEach(e=>{n[e.id]=e});let i=e.find(e=>""===e.name)?.id,a=r?.map(e=>n[e]).filter(e=>e)??[],o=e.filter(e=>!(r&&r.includes(e.id))),s=o.findIndex(e=>""===e.name);return -1!==s&&o.splice(s,1),o.sort((e,r)=>new Date(e.createdAt).getTime()-new Date(r.createdAt).getTime()),-1!==s&&i?[n[i],...a,...o]:[...a,...o]}function v(e,r){let n={};e.forEach(e=>{n[e.resource.id]=e});let i=r?.map(e=>n[e]).filter(e=>e)??[],a=e.filter(e=>!(r&&r.includes(e.resource.id)));return a.sort((e,r)=>new Date(e.resource.createdAt).getTime()-new Date(r.resource.createdAt).getTime()),[...i,...a]}function I(e){switch(e){case s.nb.FILE:case s.nb.PINNED_FILE:case s.nb.REPO:return l.bk.FILE;case s.nb.PROTOTYPE:return l.bk.PROTOTYPE;case s.nb.OFFLINE_FILE:return l.bk.FILE;default:(0,i.xb)(e)}}},912924:(e,r,n)=>{function i(e){let r=[];return e.forEach(e=>{e.content.forEach(e=>{let n=JSON.parse(e);n.nodeId&&r.push(n.nodeId)})}),r}n.d(r,{N:()=>i}),n(922827)},355513:(e,r,n)=>{let i;n.d(r,{D4:()=>G,OR:()=>x,Qr:()=>k,Tq:()=>B,Vr:()=>U,Wq:()=>H,hL:()=>F,jm:()=>K,nz:()=>V});var a=n(188507),o=n(776250),s=n(627776),l=n(517333),c=n(737947),d=n(966712),u=n(563706),m=n(939863),p=n(749949),h=n(742580),_=n(980820),g=n(738269),f=n(507877),E=n(293017),y=n(662275),b=n(296559),v=n(445092),I=n(809831),T=n(420576),S=n(356390),w=n(239671),A=n(567088),C=n(723127),N=n(347127),L=n(974105),O=n(788811),R=n(487342),P=n(860178),D=n(707465);function k(){return(0,d.Ay)().release_manifest_git_commit}function M(e,r,n=""){if((0,s.ce)()){document.title=r?`${n}${r}`:e;return}if(e!==(i?i+document.title:document.title)){if("safari"!==u.Ay.browserType){let r;let n=(0,R.AE)(e);r=document.getElementById("custom-emoji-favicon"),n?(i=n,r||((r=document.createElement("link")).id="custom-emoji-favicon",r.rel="icon",document.head.appendChild(r)),r.href="data:image/svg+xml,"+'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y=".9em" font-size="90">{text}</text></svg>'.replace("{text}",n)):(r&&r.remove(),i=void 0),n&&(e=(0,R.Nn)(e,n))}document.title=e,l.eD&&r&&l.eD.setTitle(r,n)}}function F(e,r=null,n=""){let i=function(e){switch(e){case w.nT.Whiteboard:return" \u2013 FigJam";case w.nT.Slides:return" \u2013 Figma Slides";default:return" \u2013 Figma"}}(r);M(`${n}${e}${i}`,e,n)}function x(e,r){let n=(0,D.Iu)(e,r);if(!n){M("Figma",null);return}if("fullscreen"===r.view&&r.tryPluginName){e.openFile?M(e.openFile.name,n):M((0,m.t)("community.try.plugin_name_with_community",{pluginName:r.tryPluginName}),n);return}if("prototype"===r.view){let i,a="";if((0,N.f)(r.file.editor_type))i=a=`${r.isPresenterView?(0,m.t)("slides.general.presenter"):(0,m.t)("slides.general.slide_deck")} \xb7 ${n} - ${(0,m.t)("slides.general.slides")}`;else{let r=function(e){let r=e.prototype;for(let e of r.pages)if(e.nodeId===r.currentPageId)return e.name;return""}(e);r&&e.prototype.pages.length>1?(a=`\u25B6 ${n} - ${r}`,i=`${n} - ${r}`):(a=`\u25B6 ${n}`,i=n)}M(a,i);return}if("fullscreen"===r.view&&!e.openFile){let e=(0,O.GT)();e?.name?n=e.name:r?.localFileName&&(n=r.localFileName)}let i=(0,L.yt)(e);if(i&&(0,T.Xm)(i)){M(`\u2325 ${n}`,`${n}`);return}F(n,(0,I.XE)(r))}let U=(0,_.nF)(e=>{c.Ay.listen(r=>{"POP"===r&&function(r){if(r){let n=e.getState(),i=n.selectedView,{jsCommitHash:a,searchSessionId:o,...s}=r;if("view"in s){if(void 0!==a&&a!==k()){c.Ay.reload("Navigating to a state that was pushed by an older version of this application");return}if("fullscreen"===i.view&&!S.Y5.isReady()){c.Ay.reload("User navigated before fullscreen fully initialized");return}if("fullscreen"===s.view&&!s.fileKey){window.history.back();return}if("fullscreen"===i.view&&("fullscreen"!==s.view||i.fileKey!==s.fileKey))e.dispatch(E.VB({oldSelectedView:i,newSelectedView:s}));else{if(e.dispatch(y.Ce()),"communityHub"===s.view&&"searchAndBrowse"===s.subView&&(0,h.OE)(s.data)){let r=(0,p.w)(n);r&&e.dispatch(v.NR({sessionId:r}))}e.dispatch(g.$T({...s,fromPopstate:!0})),x(n,s)}}}}(c.Ay.location.state)})});function B(e,r,n,i){e(f.UN({fileKey:r.key}));let a=n||i,o=n?A.O.ORG:A.O.TEAM;e((0,d.kc)().ps_benchmark&&a?b.c5({planId:a,planType:o}):b.p4({planId:n||C.P})),e(g.$T({view:"fullscreen",fileKey:r.key,editorType:r.editor_type?(0,w.wN)(r.editor_type):w.nT.Design}))}function V(e,r,n,i){(0,o.sx)("Open File in New Tab Click",{fileKey:r,uiSelectedView:JSON.stringify(n)}),i(f.UN({fileKey:r})),c.Ay.redirect(e,"_blank")}function G(e,r,n,i){(0,o.sx)("Open Prototype in New Tab Click",{fileKey:r,pageId:n,uiSelectedView:JSON.stringify(i)}),c.Ay.redirect(e,"_blank")}function H(e,r){r(f.V3({url:e}))}function K(e,r){let n=(0,P.TA)(),i=e||r,o=(0,a.d4)(e=>(0,d.kc)().limited_plan_spaces?e.plans:n?e.authedUsers.byId[n]?.plans:null);return!!o?.find(e=>e.plan_id===i)}},985139:(e,r,n)=>{n.d(r,{b4:()=>k,g4:()=>x,n_:()=>F});var i=n(672797),a=n(89865),o=n.n(a),s=n(966712),l=n(130097),c=n(179940),d=n(27087),u=n(881388),m=n(939863),p=n(392592),h=n(980820),_=n(660656),g=n(738269),f=n(662275),E=n(992037),y=n(128751),b=n(988022),v=n(396226),I=n(117192),T=n(838329),S=n(99506),w=n(279453),A=n(540019),C=n(147206),N=n(984968),L=n(300874),O=n(239671),R=n(851363),P=n(378356),D=n(449731);let k=(0,h.nF)(async(e,r)=>{let{fileKeys:n,repoIds:i}=r;if(n.length>0){let r=e.getState(),[i,...a]=await Promise.all([(0,N.R5)(n),...n.map(e=>A.M4.fetchFile(e))]);if(i){let o=r.teams[i],s=new Set(a.map(e=>e.editor_type)),l=s.size>1?null:s.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:o,action:R.ZN.RESTORE_FILES,editorType:l,resource:L.vL.FILE,multipleResources:n.length>1,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO}}))}else e.dispatch(_.R({fileKeys:o()(a,"key"),userInitiated:!0}))}if(i&&i.length>0){let r=await Promise.all(i.map(e=>A.M4.fetchRepo(e)));e.dispatch((0,E.i)({reposById:o()(r,"id"),userInitiated:!0}))}e.dispatch(y.an())});async function M({selectedFileKeys:e,isPlanSpacesEnabled:r,currentSpaceDraftsFolderId:n,personalDraftsFolderId:i,currentUserId:a,state:o,toDraft:s}){let c=await (0,l.S8)(w.M5e,e.map(e=>({fileKey:e}))),d=[],u=new Set;return c.forEach(({result:{data:e}})=>{let l;let{file:c}=e??{};if(!c)return;let{project:m,editorType:p,key:h}=c;null!=p&&u.add(p);let _=r?n:i;if(c.parentOrgId){let e=a&&o.orgUsersByOrgId[c.parentOrgId]?.[a];l=e?e.drafts_folder_id:_}else if(c.teamId&&r){let e=o.roles.byTeamId[c.teamId],r=a&&e&&o.teamUserByTeamId[c.teamId]?.[a];l=r?r.drafts_folder_id:_}else l=_;let g=(l||m?.id)??"",f=!s&&m&&(0,C.Jf)(m,p??S._Y.DESIGN)?m.id:g;d.push({key:h,folderId:f})}),{copyFiles:d,editorTypes:u}}let F=(0,h.nF)(async(e,r)=>{let n=(0,s.kc)().ps_benchmark,a=e.getState(),o=a.user?.id,l=a.user?.personal_drafts_folder_id,h=a.user?.drafts_folder_id,_=[l];o&&(_.push(...(0,I.x)(a.orgUsersByOrgId,o).map(e=>e.drafts_folder_id)),n&&_.push(...(0,T._)(a.teamUserByTeamId,o).map(e=>e.drafts_folder_id||void 0)));let E=Object.keys(a.tileSelect&&a.tileSelect[P.F.FILES]||{}).concat(Object.keys(a.tileSelect&&a.tileSelect[P.F.PINNED_FILES]||{})),y=Object.keys(a.tileSelect&&a.tileSelect[P.F.REPOS]||{});(await Promise.all(y.map(e=>A.M4.fetchRepo(e)))).forEach(e=>{let r=e.default_file_key;r&&E.push(r)});let{copyFiles:w,editorTypes:C}=await M({selectedFileKeys:E,isPlanSpacesEnabled:n,currentSpaceDraftsFolderId:h,personalDraftsFolderId:l,currentUserId:o,state:a,toDraft:r.toDraft}),k=await (0,N.mx)(w);if(k){let r=a.teams[k],n=C.size>1?null:C.has(S._Y.WHITEBOARD)?S._Y.WHITEBOARD:S._Y.DESIGN;e.dispatch(f.to({type:D.DV,data:{team:r,action:R.ZN.DUPLICATE_FILES,editorType:n,resource:L.vL.FILE,multipleResources:w.length>1,currentPlan:v.F.Plan.STARTER,upsellPlan:v.F.Plan.PRO}}));return}let F=w.map(({key:r,folderId:n})=>()=>{let i=d.Ay.post(`/api/multiplayer/${r}/copy?${(0,c.lF)({folder_id:n})}`);return i.catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))}),i});(0,i.Ed)(F,8).then(r=>{if(!r.some(e=>"reject"===e.type)){let n=w.filter(e=>!!e.folderId&&_.includes(e.folderId)).length,i=r=>r&&r.editor_type?{text:(0,m.t)("general.open"),action:()=>{e.dispatch(g.$T({view:"fullscreen",fileKey:r.key,editorType:(0,O.wN)(r.editor_type)})),e.dispatch(p.F.dequeue({}))}}:void 0;if(n>0&&("folder"!==a.selectedView.view||a.selectedView.folderId!==h)){let a,o="",s=1===w.length;o=s?(0,m.t)("user_view.file_duplicated_to_your_drafts"):n===w.length?(0,m.t)("user_view.files_duplicated_to_your_drafts",{intArg:n}):(0,m.t)("user_view.some_files_duplicated_to_your_drafts"),a=s?i(r[0].resolve?.data?.meta):{text:(0,m.t)("general.show"),action:()=>{h&&e.dispatch(g.$T({view:"folder",folderId:h})),e.dispatch(p.F.dequeue({}))}},e.dispatch(p.F.enqueue({type:"file_duplicated",message:o,button:a}))}else if("folder"===a.selectedView.view){let n=i(1===w.length?r[0].resolve?.data?.meta:void 0);e.dispatch(p.F.enqueue({type:"file_duplicated",message:1===w.length?(0,m.t)("user_view.file_duplicated"):(0,m.t)("user_view.files_duplicated",{intArg:w.length}),button:n}))}let o=r.map(e=>null!=e.resolve?e.resolve.data.meta:null).filter(e=>null!=e).map(e=>e);(0,b.ak)(w,o,e.getState())}})}),x=(0,h.nF)(e=>{e.dispatch(F({toDraft:!0}))});(0,h.nF)((e,r)=>{let n=e.getState(),i=n.user?.drafts_folder_id;return d.Ay.post(`/api/multiplayer/${r.file.key}/copy?${(0,c.lF)({folder_id:i})}`).then(()=>{e.dispatch(u.s.flash((0,m.t)("user_view.file_duplicated_to_your_drafts")))}).catch(({data:r})=>{r&&r.message?e.dispatch(u.s.error(r.message)):e.dispatch(u.s.error((0,m.t)("file_browser.file_browser_actions.duplicate_file_error")))})})},688083:(e,r,n)=>{n.d(r,{Ct:()=>X,LK:()=>Y,Nr:()=>en,Q3:()=>et,Q4:()=>Z,SX:()=>ea,Xg:()=>q,iT:()=>ee,jl:()=>j,k4:()=>J,mq:()=>Q,xT:()=>er});var i=n(188507),a=n(966664),o=n(456772),s=n(752553),l=n(27087),c=n(330654),d=n(881388),u=n(939863),m=n(392592),p=n(693133),h=n(980820),_=n(944682),g=n(738269),f=n(270056),E=n(662275),y=n(404717),b=n(782656),v=n(936500),I=n(988022),T=n(396226),S=n(875847),w=n(99506),A=n(279453),C=n(540019),N=n(984968),L=n(206193),O=n(178160),R=n(300874),P=n(696915),D=n(451e3),k=n(945020),M=n(644344),F=n(668860),x=n(637590),U=n(851363),B=n(290750),V=n(845213),G=n(835703),H=n(449731),K=n(915592);let W=(0,h.nF)((e,{folderId:r,folderData:n})=>{(0,i.vA)(()=>{e.getState().folders[r]?e.dispatch(f.yJ({folder:n.folder})):e.dispatch(f.bE(n.folder)),e.dispatch(_.uo({files:n.files,subscribeToRealtime:!1})),e.dispatch(b.nX({repos:n.repos})),e.dispatch(v.uo({roles:n.roles})),e.dispatch(f.Kc({folderId:r,state:"loaded"}))})}),$=C.M4.Query({fetch:async(e,{reduxStore:r})=>{let n=await B.W.getFiles({folderId:e.folderId,shouldShowOnlyTrashedFiles:!!e.shouldShowOnlyTrashedFiles});return r.dispatch(_.uo({files:n.data.meta.files})),r.dispatch(b.nX({repos:n.data.meta.repos})),r.dispatch(v.uo({roles:n.data.meta.roles})),r.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),n.data.meta},schema:e=>e.object({folder:D.lH.nullable(),files:e.array(P.L),repos:e.array(M.z)}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let i=new Date(new Date().setHours(0,0,0,0));return n.subscribe(A.m0h,{projectId:e,updatedAtTimestamp:i},n=>{r(r=>{let i=r.files;(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{i.find(r=>r.key===e.key)||r.files.unshift((0,O.W$)(e))})})})},syncObjects:!0,output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===w.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)&&!e.file_repo_id),i=e.repos.filter(e=>e.folder_id===r.folderId&&(r.shouldShowOnlyTrashedFiles&&e.trashed_at&&e.trashed_with_parent===w.Go.FOLDER||!r.shouldShowOnlyTrashedFiles&&!e.trashed_at)),o=e.repos.filter(e=>!e.trashed_at&&!e.deleted_at).map(r=>e.files.find(e=>e.key===r.default_file_key)).filter(a.Vq),s={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());s[r.id]=n}),{folder:e.folder,files:n,repos:i,previewFiles:[...n,...o],filesByRepoId:s}}});function Y(e,r=!0,n=!1){let[i]=(0,C.IT)($({folderId:e,shouldShowOnlyTrashedFiles:n}),{enabled:r});return i}let z=c.object({folder:D.lH.nullable(),files:c.array(P.L),repos:c.array(M.z),roles:c.array(F.an)});C.M4.PaginatedQuery({fetch:async(e,{pageParam:r,reduxStore:n})=>{let i;if(r)i=r;else{let{folderId:r,...n}=e,a=new URLSearchParams({...n,page_size:"50"}).toString();i=`/api/folders/${r}/paginated_files?${a}`}let a=await (0,l.GD)(i),o=a.data.meta;return n.dispatch(_.uo({files:o.files})),n.dispatch(b.nX({repos:o.repos})),n.dispatch(v.uo({roles:o.roles})),n.dispatch(f.Kc({folderId:e.folderId,state:"loaded"})),{data:a.data.meta,nextPage:a.data.pagination?.next_page,prevPage:a.data.pagination?.prev_page}},joinPages:e=>({files:e.flatMap(e=>e.data.files),repos:e.flatMap(e=>e.data.repos),roles:e.flatMap(e=>e.data.roles),folder:e.length>0?e[e.length-1].data.folder:null}),sync:({folderId:e},{mutate:r,livegraphClient:n})=>{let i=new Date(new Date().setHours(0,0,0,0));return n.subscribe(A.m0h,{projectId:e,updatedAtTimestamp:i},n=>{r(r=>{let i=r[0];i&&(n.data?.project?.fileUpdates||[]).filter(r=>r.folderId===e).forEach(e=>{r.find(r=>!!r.files.find(r=>r.key===e.key))||i.files.unshift((0,O.W$)(e))})})})},output:({data:e,args:r})=>{let n=e.files.filter(e=>e.folder_id===r.folderId&&!e.trashed_at&&!e.file_repo_id),i=e.repos.filter(e=>e.folder_id===r.folderId&&!e.trashed_at),a={};return e.repos.forEach(r=>{let n=e.files.filter(e=>e.file_repo_id===r.id).sort((e,r)=>new Date(r.touched_at).getTime()-new Date(e.touched_at).getTime());a[r.id]=n}),{folder:e.folder,files:n,repos:i,filesByRepoId:a}},schema:z,syncObjects:!0});let j=(0,h.nF)(async(e,{folderId:r,loadedFolders:n})=>{if(!n[r]){e.dispatch(f.Kc({folderId:r,state:"loading"}));try{let n=(await B.W.getFiles({folderId:r})).data.meta;e.dispatch(W({folderId:r,folderData:n}))}catch(n){404===n.status||403===n.status?e.dispatch(g.$T({view:"resourceUnavailable",resourceType:x.Ft.PROJECT})):n.status>=400&&n.status<500?e.dispatch(f.Kc({folderId:r,state:"loaded"})):e.dispatch(f.Kc({folderId:r,state:null}))}}}),q=C.M4.Query({fetch:async e=>(await V.$.getFolders({teamId:e.teamId})).data.meta.folder_rows,schema:e=>e.array(D.lH.extend({touched_at:e.string()})),syncObjects:!0,enabled:e=>!!e.teamId,output:({data:e})=>e.filter(e=>!(e.trashed_at||e.deleted_at))});C.M4.Mutation((e,{reduxStore:r})=>B.W.delete({folderId:e.folderId}).then(()=>{r.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_deleted_forever")}))}));let Z=C.M4.Mutation((e,{reduxStore:r})=>B.W.permanentlyDelete({folderId:e.folderId}).then(()=>{r.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_deleted_forever")}))})),X=C.M4.Mutation(({folderId:e},{objects:r,reduxStore:n})=>{let i=B.W.trash({folderId:e}).then(()=>{r.Folder.update(e,e=>{e.trashed_at=Date.now().toString()}),n.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_trashed")}))});n.dispatch((0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.error_when_moving_to_trash")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:new Date}}},i)}),J=C.M4.Mutation(({folderId:e,team:r},{objects:n,reduxStore:i})=>{let a=B.W.restore({folderId:e}).then(()=>{n.Folder.update(e,e=>{e.trashed_at=null}),i.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.file_browser_actions.folder_restored"),button:{text:(0,u.t)("visual_bell.show_in_toast",{destination:r?.name??"Recents"}),action:()=>{r?i.dispatch(g.$T({view:"team",teamId:r.id})):i.dispatch(g.$T({view:"recentsAndSharing"}))}}}))});i.dispatch((0,d.Q)({promise:a,fallbackError:(0,u.t)("file_browser.api_folder.error_when_restoring")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{trashedAt:null}}},a)});C.M4.Mutation(e=>B.W.batchDelete({folderIds:e.folderIds}));let Q=C.M4.Mutation(({folderId:e,folderName:r},{objects:n,reduxStore:i})=>{let a=(0,S.SS)(r);if(a){i.dispatch(d.s.error(a));return}n.Folder.update(e,e=>{e.name=r,e.path=r}),(0,I.xr)("Folder Renamed",e,null,i.getState(),{folderName:r});let s=l.Ay.put("/api/folders/rename",{folder_id:e,name:r});return i.dispatch((0,d.Q)({promise:s,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_renaming_this_project")})),(0,o.WB)().optimisticallyUpdate({Project:{[e]:{name:r,path:r}}},s),s}),ee=(0,h.MM)("FOLDER_UPDATE_FOLDER_ACCESS",(e,r,{optimistId:n})=>{let i=l.Ay.put(`/api/folders/${r.folderId}`,{is_invite_only:r.isInviteOnly,is_view_only:r.isViewOnly}).then(()=>{e.dispatch(y.c(n))}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_access")})}),et=(0,h.MM)("FOLDER_UPDATE_SHARING_AUDIENCE_CONTROLS",(e,r,{optimistId:n})=>{let i=B.W.updateFolderSharingAudienceControls({folderId:r.folder.id,sharingAudienceControl:r.sharingAudienceControl}).then(()=>{e.dispatch(y.c(n)),(0,I.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"sharing_audience",oldSharingAudienceControl:r.folder.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_sharing_audience_control")})}),er=(0,h.MM)("FOLDER_UPDATE_TEAM_ACCESS",(e,r,{optimistId:n})=>{let i=B.W.updatedFolderTeamAccess({folderId:r.folder.id,teamAccess:r.teamAccess}).then(()=>{e.dispatch(y.c(n)),(0,I.xr)("Folder Share Settings Updated",r.folder.id,r.folder.team_id,e.getState(),{share_settings_type:"team_access",oldTeamAccess:r.folder.team_access,newTeamAccess:r.teamAccess})}).catch(()=>{e.dispatch(y.r(n))});(0,d.Q)({promise:i,fallbackError:(0,u.t)("file_browser.api_folder.an_error_while_updating_the_folder_s_team_access")})}),en=(0,h.nF)(async(e,r)=>{let n=r.folder,i=r.team,a=(0,k.Ws)(i);if(n.inviteOnlyAt||n.viewOnlyAt){e.dispatch(E.to({type:G.z,data:{folder:n}}));return}try{await B.W.getCanMove({teamId:i.id,folderId:n.id})}catch(r){r.data?.failure_info?.code==="ERR_FILE_LIMIT"||r.data?.failure_info?.code==="ERR_PROJECT_LIMIT"?e.dispatch(E.to({type:H.DV,data:{team:a,resource:R.vL.FOLDER,action:U.ZN.MOVE_FOLDER,currentPlan:T.F.Plan.STARTER,upsellPlan:T.F.Plan.PRO,editorType:null,upsellSource:L.b.FOLDER_MOVE_MODAL}})):e.dispatch(d.s.error(r.data?.message));return}if(n.teamId&&a){e.dispatch(E.to({type:K.o,data:{folder:n,destinationTeam:a,onConfirm:()=>{(0,s.Jl)(ei)({folder:n,team:a})}}}));return}(0,s.Jl)(ei)({folder:n,team:a}),r.onSuccess&&r.onSuccess()}),ei=C.M4.Mutation((e,{query:r,objects:n,reduxStore:i})=>{let{folder:a,team:s}=e;(0,I.xr)("Folder Moved",a.id,null,i.getState(),{destTeamId:s.id});let c=l.Ay.put("/api/folders/move",{folder_id:a.id,team_id:s.id}).then(()=>{i.dispatch(m.F.enqueue({message:(0,u.t)("file_browser.folder_move.project_moved_toast",{folderName:a.path,teamName:s.name})}))});return i.dispatch((0,d.Q)({promise:c,fallbackError:(0,u.t)("file_browser.api_folder.an_error_occurred_while_moving_this_project")})),o.WB()?.optimisticallyUpdate({Project:{[a.id]:{teamId:s.id}}},c),a.teamId&&(r.mutate(q({teamId:a.teamId}),e=>{let r=e.findIndex(e=>e.id===a.id);-1!==r&&e.splice(r,1)}),n.Folder.update(a.id,e=>{e.team_id=s.id})),c}),ea=(0,h.nF)((e,r)=>{let n=e.getState(),i=r.where,a=r.team.id,o=n.creatingNewFolder&&n.creatingNewFolder.where===i&&n.creatingNewFolder.teamId===a,s=r.team;if(!o){if(s.canEdit)(0,N.rR)(s,{type:N.sK.ADD_PROJECT})?(e.dispatch(g.sf({where:i,teamId:a})),e.dispatch(E.to({type:(0,p.p)(),data:{teamId:s.id,modalShown:n.modalShown,onFolderCreated:r.onFolderCreated}}))):e.dispatch(E.to({type:H.DV,data:{team:s,resource:R.vL.FOLDER,action:U.ZN.CREATE_FOLDER,currentPlan:T.F.Plan.STARTER,upsellPlan:T.F.Plan.PRO,editorType:null}}));else{let r=s?(0,u.t)("file_browser.api_folder.no_create_permissions_team_name",{teamName:s.name}):(0,u.t)("file_browser.api_folder.no_create_permissions_this_team");e.dispatch(d.s.flash(r))}}})},935308:(e,r,n)=>{n.d(r,{nm:()=>h});var i=n(966712),a=n(418956),o=n(586459),s=n(980820),l=n(99403),c=n(296559),d=n(902957),u=n(389643),m=n(516056),p=n(6974);(0,s.nF)(async(e,{loadedPlans:r})=>{if(!r||!(r.length>0))try{let r=await m.k.getPlans();e.dispatch(c.uo({plans:r.data.meta.plans})),e.dispatch(d.uo({teams:r.data.meta.teams})),e.dispatch(l.uo({orgs:r.data.meta.orgs}));let n=r.data.meta.teams,a=(0,i.kc)().ps_benchmark,o=(0,i.kc)().close_starter_team_loophole;a&&o&&await Promise.all(n.map(r=>(0,u.xN)(r.id,e)))}catch(e){}});let h=(e=!1)=>async r=>{try{return await _(r,e)}catch(e){return Promise.reject(e)}};async function _(e,r=!1){if(!(0,i.kc)().ps_benchmark)return Promise.reject();let n=a.zl.get(p.g);if(!r&&n!==o.r.INIT&&n!==o.r.LOADING)return n;try{n===o.r.INIT&&a.zl.set(p.g,o.r.LOADING);let r=await m.k.getPlansForAuthedUsers();return a.zl.set(p.g,r),e(d.uo({teams:r.teams})),e(l.uo({orgs:r.orgs})),r}catch(e){return n===o.r.LOADING&&a.zl.set(p.g,o.r.INIT),Promise.reject(e)}}},964258:(e,r,n)=>{n.d(r,{IA:()=>O,KQ:()=>N,P8:()=>L,UM:()=>D,vr:()=>P,zK:()=>R});var i=n(776250),a=n(966712),o=n(456772),s=n(790724),l=n(27087),c=n(881388),d=n(939863),u=n(392592),m=n(980820),p=n(738269),h=n(507877),_=n(182976),g=n(936500),f=n(902957),E=n(816858),y=n(988022),b=n(99506),v=n(937294),I=n(416618),T=n(935757),S=n(668860),w=n(637590),A=n(344950),C=n(248970);let N=(0,m.nF)((e,r)=>{let{teamName:n,orgAccess:i,workspaceId:a,description:o,defaultPermission:s,sharingAudienceControl:u,orgBrowsable:m,hidden:p,ignoreCurrentPlan:h}=r,_=e.getState().currentUserOrgId,g={team_name:n};!_||h||(g.org_id=_,u||(g.org_access=i)),a&&(g.workspace_id=a),o&&(g.description=o),s&&!u&&(g.default_permission=s),u&&(g.sharing_audience_control=u),m&&(g.org_browsable=m),p&&(g.hidden=p),e.dispatch(f.r1({loading:!0})),l.Ay.post("/api/teams/create",g).then(({data:n})=>{let i="team"in n.meta?n.meta.team:n.meta;(0,y._J)("Team Created",i.id,e.getState(),{sharing_audience_control:u,org_browsable:m,hidden:p}),r.onSuccessNoRedirect&&r.onSuccessNoRedirect(i),L(i,e,r)}).catch(r=>{let n=(0,d.Jv)(r,r?.response?.message||(0,d.t)("team_creation.an_error_occurred_while_creating_this_team"));e.dispatch(c.s.error(n)),e.dispatch(f.r1({loading:!1}))})});function L(e,r,n){let i=r.getState().user,o=r.getState().currentUserOrgId;r.dispatch(f.bE({team:e}));let{ignoreCurrentPlan:s}=n;return o&&!s&&n.inviteEmails?.length&&n.inviteLevel?r.dispatch((0,I.rq)({emails:n.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:n.inviteLevel,source:"new_team_creation_modal"})):n.teamFlowType===w.SC.CREATE&&n.inviteEmails?.length&&r.dispatch((0,I.rq)({emails:n.inviteEmails,emailsToExclude:i?new Set([i.email]):void 0,resourceType:b.vt.TEAM,resourceIdOrKey:e.id,level:S.e6.EDITOR,source:"team_creation_flow"})),A.G.getTeam({teamId:e.id}).then(({data:o})=>{for(let e of o.meta)r.dispatch(g.bE({role:e}));let l=(0,a.kc)().ps_benchmark;l||r.dispatch(f.r1({loading:!1}));let c=r.getState().currentUserOrgId&&!s;if(n.dontRedirect)l&&r.dispatch(f.r1({loading:!1}));else if(n.onSuccess&&(l&&r.dispatch(f.r1({loading:!1})),n.onSuccess()),c||n.teamFlowType===w.SC.CREATE)l&&r.dispatch(f.r1({loading:!1})),r.dispatch(p.$T({view:"team",teamId:e.id})),r.dispatch(u.F.enqueue({type:"new_team_created",message:(0,d.t)("team_creation.you_have_created_a_new_team")}));else if(l&&i?.id){let n={view:"addCollaborators",teamId:e.id},a={userId:i.id,teamId:e.id,orgId:null};r.dispatch(h._l({workspace:a,view:n}))}else l&&r.dispatch(f.r1({loading:!1})),r.dispatch(p.$T({view:"addCollaborators",teamId:e.id}))})}let O=(0,m.nF)((e,r)=>{let n=r.team,i=n.id,a=n.name,c=r.name;(0,y._J)("Team Renamed",i,e.getState());let m=l.Ay.put(`/api/teams/${i}`,{name:r.name}).then(({data:n})=>{r.skipVisualBell||e.dispatch(u.F.enqueue({message:(0,d.t)("change_team_name_visual_bell.text",{oldTeamName:a,newTeamName:c}),button:{text:(0,d.t)("change_team_name_visual_bell.undo"),action:()=>{e.dispatch(O({team:n.meta,name:a,skipVisualBell:!0}))}}}))});return o.WB()?.optimisticallyUpdate({Team:{[i]:{name:c}}},m),(0,s.Q)({requestPromise:m,fallbackError:"An error occurred while renaming this team.",store:e,next:e.dispatch,action:f.$w(r)})}),R=(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Share Settings Updated",n,e.getState(),{share_settings_type:"share_audience",oldSharingAudienceControl:r.team.sharing_audience_control,newSharingAudienceControl:r.sharingAudienceControl,oldOrgBrowsable:r.team.org_browsable,newOrgBrowsable:r.orgBrowsable,oldHidden:r.team.hidden,newHidden:r.hidden}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{sharing_audience_control:r.sharingAudienceControl,org_browsable:r.orgBrowsable,hidden:r.hidden}),fallbackError:"An error occurred while changing the sharing settings of this team.",store:e,next:e.dispatch,action:f.aB(r)})});(0,m.nF)((e,r)=>{let n=r.team.id;return(0,y._J)("Team Org Access Changed",n,e.getState(),{oldOrgAccess:r.team.org_access,newOrgAcccess:r.orgAccess}),(0,s.Q)({requestPromise:l.Ay.put(`/api/teams/${n}`,{org_access:r.orgAccess}),fallbackError:"An error occurred while changing the org access of this team.",store:e,next:e.dispatch,action:f.bQ(r)})});let P=(0,m.nF)((e,r)=>{(0,i.sx)("file-browser-hydrate",{location:"team.onJoin"});let n=(0,v.p9)(r.teamId);(0,T._X)("onJoinTeam").then(i=>{let a=r.teamId;e.dispatch(p.Qv(i.data.meta));let o=e.getState().teams[a].name;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_owner.text",{teamName:o})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_flash.as_admin.text",{teamName:o})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_flash.text",{teamName:o})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.mw(r))}),D=(0,m.nF)((e,r)=>{(0,i.sx)("file-browser-hydrate",{location:"team.onBatchJoin"});let n=(0,v.n1)(r.teamIds);(0,T._X)("onBatchJoinTeams").then(i=>{e.dispatch(p.Qv(i.data.meta));let a=r.teamIds.length;switch(r.level){case S.e6.OWNER:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_owner.text",{teamCount:a})));break;case S.e6.ADMIN:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.as_admin.text",{teamCount:a})));break;default:e.dispatch(c.s.flash((0,d.t)("join_team_batch_flash.text",{teamCount:a})))}e.dispatch(_.x2({key:n}))}).catch(()=>{e.dispatch(_.of({key:n}))}),e.dispatch(f.ii(r))});(0,m.nF)(e=>{let r=e.getState().currentUserOrgId;C.c.getTeamRoleRequestsOrgId({orgId:r}).then(r=>{e.dispatch(E.b({teamRoleRequests:r.data.meta}))})})},411916:(e,r,n)=>{n.d(r,{HE:()=>_,O_:()=>m,Pn:()=>u,Tt:()=>g,U8:()=>h,vp:()=>d});var i=n(966712),a=n(886653),o=n(553716),s=n(939863),l=n(473624),c=n(428467);function d(e,r,n){if(!e)return null;let a={userId:e.id,orgId:r};return(0,i.kc)().ps_benchmark&&(a.teamId=n||null),a}let u=(0,a.xx)(d);function m(e,r){let n=d(e.user,e.currentUserOrgId,e.currentTeamId);return(0,i.kc)().ps_benchmark?!!n&&n.userId===r.userId&&(!!n.orgId&&n.orgId===r.orgId||!!n.teamId&&n.teamId===r.teamId):!!n&&n.userId===r.userId&&n.orgId===r.orgId}let p=l.p;function h(e,r){let n={};return r.forEach(r=>{n[r]=p(e,r)}),n}function _(e,r,n,a){let l=(0,s.t)("navbar.workspaces.default_workspace_name");if(!r)return l;if(r.orgId){let i=n?.[r.orgId]||e.orgById[r.orgId];return i?.name||(0,s.t)("navbar.workspaces.default_org_workspace_name")}let d=(0,i.kc)().ps_benchmark;if(d&&r.teamId){let n=a?.[r.teamId]||e.teams[r.teamId];return n?.name||(0,s.t)("navbar.workspaces.default_team_workspace_name")}return d&&e.user?.id!=="-1"&&(0,o.Lo)("planSpaces","User with Plan Spaces enabled saw External Teams."),(0,c.userIsAMemberOfAnOrg)(e,r.userId)?(0,s.t)("navbar.profile_switcher.external_teams"):(0,s.t)("navbar.profile_switcher.your_teams")}function g(e,r){return 0!==e.length&&(e.length>1||p(r,e[0]).length>1)}},67085:(e,r,n)=>{n.d(r,{Ad:()=>v,Ir:()=>S,Jj:()=>y,dE:()=>T,m1:()=>b,nk:()=>h});var i=n(138020),a=n(512495),o=n.n(a),s=n(181912),l=n(939863),c=n(99506),d=n(623746),u=n(239671);n(723856);var m=n(27703),p=n(875847),h=(e=>(e.fileBrowserContextMenu="file_browser_context_menu",e.fileBrowserFavoritedContextMenu="file_browser_favorited_context_menu",e.fileBrowserTileActionMenu="file_browser_tile_action_menu",e.prototypeHeader="prototype_header",e.fullscreenToolbar="fullscreen_toolbar",e.expFigJamOnboardingShareVariant="exp_figjam_onboarding_share_variant",e.fullscreenCopyLinkButtonVisualBell="fullscreen_copy_link_button_visual_bell",e.prototypeCopyLinkButtonVisualBell="prototype_copy_link_button_visual_bell",e.customTemplatePublishNudge="custom_template_publish_nudge",e.expProTrialsV3CardStackWidget="exp_pro_trials_v3_card_stack_widget",e.editRequestTooltip="edit_request_tooltip",e.editRequestExternal="edit_request_external",e.shareToGoogleClassroomOnboarding="share_to_google_classroom_onboarding",e.googleClassroomIntegration="google_classroom_integration",e))(h||{});function _(e){return{...e,canEdit:!1,canEditCanvas:!1,hasEditRole:!1,hasViewRole:!1,canView:!1,canViewPrototype:!1,canViewPrototypeLinks:!1,canMove:!1,isOwner:!1,mainFileLinkExpirationConfig:null,passwordSetAt:null,passwordSetByUser:null,isPublishedHubFile:!1,folderAccessEnabled:!0,isDraftFileLG:!1,isAbandonedDraftFile:!1,mustUpgradeToShareDraft:!1}}function g(e){return{file:_(e),repo:null,rolesByUserId:{},fileRoleRequests:[],folder:null,folderRoles:[],isInDraftsFolder:!1,orgDraftsOwner:null,org:null,orgUser:null,currentOrg:null,team:null,workspace:null,orgs:{},dataLoaded:!1,fileSeenStatesByUserId:{},currentUser:null,sharedOrgLicenseGroupSetting:null,editorType:(0,u.wN)(e.editor_type)}}function f(e){return e.fileLinkExpirationConfig||e.sourceFileLinkExpirationConfig}function E(e){return e.repo?.defaultFileKey===e.key}function y(e,r){if("loaded"!==e.status||!e.data.file)return _(r);let n=e.data.file,a=f(n),o=E(n),s=n.pwdConfig?.updatedAt||null,l=n.pwdConfig?.setByUser?(0,d.Um)(n.pwdConfig.setByUser):null;return{canEdit:n.canEdit,canEditCanvas:n.canEditCanvas,hasEditRole:n.hasEditRole,hasViewRole:n.hasViewRole,canView:n.canView,canViewPrototype:n.canViewPrototype,canViewPrototypeLinks:n.hasViewPrototypeRole,canMove:n.canMove,passwordSetAt:s,passwordSetByUser:l,isOwner:o?!!n.repo?.roleOnObjectForUser?.isOwnerOfResource:!!n.roleOnObjectForUser?.isOwnerOfResource,isPublishedHubFile:!!n.publishedHubFile&&!n.publishedHubFile.unpublishedAt,mainFileLinkExpirationConfig:(0,d.Nl)(a),folderAccessEnabled:n.folderAccessEnabled&&(0,i.oA)(n.folderAccessEnabled)||!1,isDraftFileLG:n.isDraftFile&&(0,i.oA)(n.isDraftFile)||!1,isAbandonedDraftFile:n.isAbandonedDraftFile||!1,mustUpgradeToShareDraft:(0,i.oA)(n.mustUpgradeToShareDraft)||!1,...(0,d.k9)(n)}}function b(e,r){if("loaded"!==e.status)return g(r);let n=e.data.file;if(!n)return g(r);let a=f(n),o=E(n),s=y(e,r),l={};n.repo&&n.repo.roles.forEach(e=>{e.userId&&(l[e.userId]=e)});let h={};n.project&&n.project.roles.forEach(e=>{e.userId&&(h[e.userId]=e)});let _={};n.team&&n.team.roles.forEach(e=>{e.userId&&(_[e.userId]=e)});let b={};(o?n.repo.roles:n.roles).forEach(e=>{let r=e.user?(0,d.Um)(e.user):null;if(r){let n=e.user?.orgUser||e.user?.guestOrgUser,i=l[r.id],a=_[r.id],o=h[r.id],s=e.user?.teamUser?{...e.user.teamUser,designPaidStatus:e.user.teamUser.designPaidStatus,whiteboardPaidStatus:e.user.teamUser.whiteboardPaidStatus}:null,c=(0,d.aU)(e,r,n||null,s||null);b[r.id]=c.pending?c:{...c,folderLevel:o?.level||null,teamLevel:a?.level||null,repoLevel:i?.level||null}}else e.pending&&(b[`pending-${e.id}`]=(0,d.aU)(e,null,null,null))});let v={};(0,m.zb)(r)&&n.fileSeenStates.forEach(e=>{let r=e.user?(0,d.Um)(e.user):null;if(r){let n=l[r.id],i=_[r.id],a=h[r.id],o=(0,d.WP)(e,r);v[o.user_id]={...o,folderLevel:a?.level||null,teamLevel:i?.level||null,repoLevel:n?.level||null}}});let T={};e.data.currentUser?.allBaseOrgUsers&&e.data.currentUser.allBaseOrgUsers.forEach(e=>{e.org&&(T[e.org.id]={})});let S=n.repo?{...(0,d.YT)(n.repo),canEdit:n.repo.canEdit,mainFileLinkExpirationConfig:(0,d.Nl)(a)}:null;if(I(a)){let e={link_access:a.prevPrivateLinkAccess,proto_link_access:a.prevPrivateProtoLinkAccess,org_browsable:a.prevOrgBrowsable};s={...s,...e},S&&(S={...S,...e})}let w=n.project?.orgDraftsFolderOwnerBaseOrgUser?{id:n.project.orgDraftsFolderOwnerBaseOrgUser.id,design_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.accountType,whiteboard_paid_status:n.project.orgDraftsFolderOwnerBaseOrgUser.whiteboardPaidStatus||c.El.STARTER,user_id:n.project.orgDraftsFolderOwnerBaseOrgUser.userId,user:(0,d.Um)(n.project.orgDraftsFolderOwnerBaseOrgUser.user)}:null,A=n.project;var C=void 0;n.org&&null!==n.org.imgUrl&&(C=n.org.imgUrl);let N=n.org&&n.org.k12GoogleOrg&&(0,i.oA)(n.org.k12GoogleOrg);return{file:s,repo:S,rolesByUserId:b,fileSeenStatesByUserId:v,fileRoleRequests:n.fileRoleRequests,folder:A&&{name:A.path,is_view_only:!!A.viewOnlyAt,is_invite_only:!!A.inviteOnlyAt,team_id:A.teamId,team_access:"loaded"===A.teamAccess.status?A.teamAccess.data:null,canRead:A.canRead&&(0,i.oA)(A.canRead)||!1},folderRoles:A&&A.roles||[],isInDraftsFolder:(0,p.VA)(A),orgDraftsOwner:w,org:n.org?{id:n.org.id,name:n.org.name,img_url:C,domain_capture:!!n.org.domainCapture,workshop_enabled:!n.org.workshopDisabledAt,invite_whitelist_guest_invite_setting:n.org.inviteWhitelist?.guestInviteSetting,figjam_disabled_at:n.org.figjamDisabledAt,org_domains:(0,d.vy)(n.org.orgDomains),bigma_enabled:!!n.org.bigmaEnabledAt,k12_google_org:!!N}:null,orgUser:n.org?.currentBaseOrgUser?{id:n.org.currentBaseOrgUser.id,org_id:n.org.id,user_id:e.data.currentUser?.id,permission:n.org.currentBaseOrgUser.permission,license_group_member:n.org.currentBaseOrgUser.licenseGroupMember?{license_group_id:n.org.currentBaseOrgUser.licenseGroupMember.licenseGroupId}:void 0,design_paid_status:n.org.currentBaseOrgUser.designPaidStatus,whiteboard_paid_status:n.org.currentBaseOrgUser.whiteboardPaidStatus}:null,currentOrg:e.data.org?{domain_capture:!!e.data.org.domainCapture,id:e.data.org.id,invite_whitelist_guest_invite_setting:e.data.org.inviteWhitelist?.guestInviteSetting||null,figjam_disabled_at:e.data.org.figjamDisabledAt}:null,team:n.team?{id:n.team.id,name:n.team.name,img_url:n.team.imgUrl??void 0,subscription:n.team.subscription,student_team:!!n.team.studentTeamAt,grace_period_end:n.team.gracePeriodEnd?n.team.gracePeriodEnd.toISOString():null,canRead:n.team.canRead,org_access:n.team.orgAccess}:null,workspace:n.team?.workspace??null,orgs:T,dataLoaded:!0,currentUser:e.data.currentUser,sharedOrgLicenseGroupSetting:(0,d.Td)(n.org?{id:n.org.id,bigma_enabled:!!n.org?.bigmaEnabledAt}:null,n.org?.sharedOrgLicenseGroupSetting??e.data.org?.sharedOrgLicenseGroupSetting,n.team?.workspaceSharedSetting),editorType:(0,u.wN)(s.editor_type)}}function v(e,r){let n;let i=null,a=null;return"loaded"===e.status&&"loaded"===r.status?(n="loaded",i=o()(e.data,r.data)):"errors"===e.status||"errors"===r.status?(n="errors",a=o()(e.errors||[],r.errors||[])):n="loading",{status:n,data:i,errors:a}}let I=e=>{if(!e)return!1;let{accessReverted:r,expiresAt:n}=e;return!r&&!!n&&(0,s.A)().isAfter(n)};function T({startingPointNodeId:e,startingPointsData:r}){if(r&&r.length>1&&e){let n=r.find(r=>r.id===e);if(n)return(0,l.t)("permissions.copy_link_button.visual_bell.copy_prototype_link_name",{name:n.name})}return(0,l.t)("permissions.copy_link_button.visual_bell.copy_prototype_link")}function S(e){return!!(!e.canEdit&&e.viewer_export_restricted&&e.link_access===c.PQ.INHERIT)}},749401:(e,r,n)=>{var i=n(801886);i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR,i.lu.TITLE,i.vj.BOLD,i.vj.REGULAR,i.lu.BODY,i.vj.BOLD,i.vj.MEDIUM,i.vj.REGULAR,i.lu.LABEL,i.vj.MEDIUM,i.vj.REGULAR},247368:(e,r,n)=>{n(841748),n(268853),n(922827),n(966712),n(776621),n(202655),n(747202)},503796:(e,r,n)=>{n.d(r,{hP:()=>_,zD:()=>f}),n(411855),n(885659);var i=n(577362),a=n(340818),o=n(966712),s=n(939863),l=n(90115),c=n(15859);n(198868);var d=n(118034);n(518583),n(55069);var u=n(479296);n(558409);var m=n(747202);let p=(0,o.ck)("ea5973fed84d89957eddd325cdb8549719adbc15"),h=e=>({prompt:e.description,negativePrompt:"blurry, bad",cfgScale:8,seed:Math.floor(1e4*Math.random()),height:e.size.height,width:e.size.width,numImages:1}),_=(0,u.n)(async(e,r,n=!1)=>{let i=(0,m.Lp)({clientLifecycleId:r}),a=(await l.Ay.design.generateImages({...h(e),markUserAction:n},i)).images[0];return`data:image/png;base64,${a}`});async function g({node:e,base64:r,name:n,scaleMode:o,backgroundFill:s,shouldContinueStream:l}){if(!e.isAlive)return;let u=await (0,d.xF)(r,["*"]),m=await (0,c.UD)(u,"image/png",n);if(!e.isAlive||!l())return;let p=[...e.fills];a.l7.ai("first-draft-set-image-fill",()=>{e.insertImageInFillPaint(m)});let h=e.fills[p.length],_=(0,i.B9)(h.image?.hash||[]);return a.l7.ai("first-draft-set-image-fill",()=>{h.imageScaleMode=o,e.fills=function(e,r){let n=e.findIndex(e=>"IMAGE"===e.type);return n>=0?e.map((e,i)=>i===n?r:e).flat():r}(p,s?[s,h]:[h]),e.name=n}),_}async function f({node:e,shouldContinueStream:r=()=>!0}){await g({node:e,base64:p,shouldContinueStream:r,name:(0,s.t)("ai_image_tools.blocked"),scaleMode:"FIT",backgroundFill:{type:"SOLID",color:{r:1,g:1,b:1,a:1},visible:!0,opacity:1,blendMode:"NORMAL"}})}async function E(e){let r=document.createElement("canvas"),n=r.getContext("2d");await new Promise((i,a)=>{let o=new Image;o.onload=function(){r.width=o.naturalWidth,r.height=o.naturalHeight,n.drawImage(o,0,0),i()},o.onerror=a,o.src=e});let i=r.width,a=r.height,o=n.getImageData(0,0,i,a),s=0,l=a,c=0,d=i,u=(e,r)=>0===o.data[r*i*4+4*e+3],m=e=>{for(let r=c;r<d;r++)if(!u(r,e))return!1;return!0},p=e=>{for(let r=s;r<l;r++)if(!u(e,r))return!1;return!0};for(;s<l&&m(s);)s++;for(;l-1>s&&m(l-1);)l--;for(;c<d&&p(c);)c++;for(;d-1>c&&p(d-1);)d--;let h=n.getImageData(c,s,d-c,l-s),_=r.ownerDocument.createElement("canvas");return _.width=h.width,_.height=h.height,_.getContext("2d").putImageData(h,0,0),_.toDataURL()}},207204:(e,r,n)=>{n(841748),n(885659);var i=n(268853),a=n(922827),o=n(340818);n(520887);var s=n(298455),l=n(38329);n(966712);var c=n(776621);n(553716);var d=n(27087),u=n(44892);n(457630);var m=n(707465),p=n(640209),h=n(479296);n(247368);var _=n(853069);n(503796);var g=n(747202);function f(e,r,n){let i;let s=(0,g._F)(e,["FRAME","INSTANCE"]);i="LOCAL"===r.type?{type:a.AZ4.LOCAL,key:a.XJn.getKitKey(r.pageId)||""}:{type:a.AZ4.LIBRARY,key:r.key},o.l7.ai("first-draft-set-native-field",()=>{for(let e of s)e.firstDraftData={generationId:n??"",kit:i}})}(0,h.n)(async function({dsKit:e,instanceNode:r,iconDescription:n,clientLifecycleId:l}){let d;if(!r.symbolId)return;let m=(0,s.UN)(),h=m.get(r.symbolId);if(!h)return;let{key:g,version:E}=(await p.Gh.getFirstDraftMatchGroup({kit_key:e.key,is_local:!1,group_name:_.C,description:n})).data.meta;if(!g){(0,c.$D)(i.e.AI_GENERATION,Error("first-draft: Grouped components: Could not find component for grouped component"),{extra:{dsKit:e,iconDescription:n,mainComponentId:h.guid}});return}let y=E?`/component/${g}/canvas?ver=${E}`:`/component/${g}/canvas`;if(!(d=await u.Eo.getCanvas({canvas_url:y})))return;let b=a.NfO.deserializeProductComponentFromBuffer(g,d),v=m.get(b);v&&"SYMBOL"===v.type&&o.l7.ai("first-draft-swap-grouped-component",()=>{r.swapComponent(v),f(r,e,l)})});(0,h.n)(async function(e,r){let n=(0,m.U2)(l.D?.getState().selectedView),i=await d.Ay.post(`/api/first_draft/kit_contents/${e.key}/detach_info`,{keys:r,file_key:n});return i.data?.meta?.should_detach??[]})},286374:(e,r,n)=>{n.d(r,{Py:()=>w,RI:()=>I,gZ:()=>T});var i=n(841748),a=n(353562),o=n(140593),s=n(86387),l=n(298455),c=n(966712),d=n(853069),u=n(801886),m=n(747202),p=n(198467),h=n(667507),_=n(207063);function g(e){return e.classPropName??"className"}function f(e){if("INSTANCE"===e.type&&e.symbolId){let r=(0,i.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(r?.jsxName)return r.jsxName}let r=e.getSharedPluginData("jsx","type");return r&&"HStack"!==r&&"VStack"!==r?r:null}function E(e,r){let n={};if(!r.skipNodeIds&&(!r.skipNodeIdsWithoutType||f(e))&&(n.id=(0,l.UN)().developerFriendlyIdFromGuid(e.guid)),r.includeName&&(n.name=e.name),r.includeType&&!("INSTANCE"===e.type&&!r.detachInstances)){let r=f(e);r&&(n.type=r)}if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let i=e.componentPropertyReferences();if(i&&"visible"in i){let e=i.visible,a=r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e);a&&(n.visible=`{${v(a.devFriendlyProp)}}`)}}return n}let y=["SYMBOL","INSTANCE","FRAME","GROUP","SECTION","RECTANGLE","ELLIPSE","LINE"];function b(e,r){let n=E(e,r);n.type=e.type;let i=(0,a.Ed)(e,{...u.LW,position:!0,size:!0});return i.length&&(n[g(r)]=i.join(" ")),`<Unhandled ${(0,h.d)(n)} />`}function v(e){let r="DERIVED_BOOLEAN"===e.type?e.devFriendlyProp:e,n=r.key;if("index"in r){if(!(0,c.kc)().first_draft_ts_arrays)return r.nonArrayKey;n+=`[${r.index}]`}return"DERIVED_BOOLEAN"===e.type?`!!${n}`:n}function I(e,r){if("INSTANCE"!==e.type)throw Error(`Expected INSTANCE, got ${e.type} for node ${e.guid}`);if(!e.symbolId)throw Error(`INSTANCE has no symbolId ${e.guid}`);let n=(0,i.getComponentInfoById)(e.symbolId,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!n)throw Error(`Could not get typeInfo for component ${e.symbolId}`);let o=E(e,r);if(!r.skipClassNames){let n=(0,a.Ed)(e,{...u.LW,position:!0});n.length&&(o[g(r)]=n.join(" "))}let p=(0,d.vR)(n);if(p&&e.symbolId){let r=(0,m.So)(e.symbolId,"SYMBOL");return Object.assign(o,(0,m.Kp)(p,r)),`<${(0,d.PJ)(p)} ${(0,h.d)(o)}/>`}Object.assign(o,function e(r,n,a){if(!r.symbolId)return{};let o=!!(0,c.kc)().first_draft_ts_arrays,d=(0,i.getComponentInfoById)(r.symbolId,{enableTsArrays:o});if(!d)throw Error(`Could not find mainComponent for node ${r.guid}`);if(!(0,l.UN)().get(r.symbolId))throw Error(`Could not find symbol ${r.symbolId} for node ${r.guid}`);let u=(0,m.Au)(r.guid,["INSTANCE"]),p={};u.forEach(e=>{let r=e.componentPropertyReferences();"mainComponent"in r&&(p[r.mainComponent]=e.visible)});let h={};for(let[e,n]of Object.entries(r.componentProperties()))h[(0,i.cleanComponentPropNameForUsage)(e)]=n;let _={},g={};for(let e of d.parsedDefs){if("DERIVED_BOOLEAN"===e.devFriendlyProp.type)continue;let i="ARRAY"===e.devFriendlyProp.type?e.devFriendlyProp.nonArrayKey:e.devFriendlyProp.key;if(i in h){if("SIMPLE"===e.devFriendlyProp.type){let r=h[i].value;(n||e.def.defaultValue!==r)&&(g[i]=r);continue}if("SIMPLE_CHOICE"===e.devFriendlyProp.type){let r=e.devFriendlyProp.validOptions;if("INSTANCE_SWAP"===e.def.type){let e=(0,s.c)(h[i].value);if(!e)throw Error("Could not find component for componentProp");if("SYMBOL"===e.type){let n=Object.values(e.variantProperties??{})[0];-1!==r.indexOf(n)?g[i]=n:console.error(`Could not find ${n} in ${JSON.stringify(r)}`)}continue}if("VARIANT"===e.def.type){let e=h[i].value;-1!==r.indexOf(e)?g[i]=e:console.error(`Could not find ${e} in ${JSON.stringify(r)}`)}}if("GROUPED_INSTANCE_SWAP"===e.def.type&&a){let r=h[i].value;if(n||e.def.defaultValue!==r){let n=(0,l.UN)().get(r);if(!n)throw Error(`Could not find icon symbol ${r}`);if(!p[e.rawProp])continue;let a={description:n.name};o&&"ARRAY"===e.devFriendlyProp.type?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],a]:g[i]=a}}}if("IMAGE"===e.def.type){if(a){g[i]={id:"0"};continue}let n=e.def.guidByParentComponentId[r.symbolId];if(n){let e=(0,m.uN)(r.guid,n);if(e){let r=(0,l.UN)().get(e),n=r?A(r):null;n&&(g[i]={description:n})}}}else if("NESTED_INSTANCE"===e.def.type)for(let r of Object.values(e.def.guidByParentComponentId))_[r]=e}let f=(0,l.UN)().developerFriendlyIdFromGuid(r.guid),E=f.startsWith("I")?`${f};`:`I${f};`;for(let s of(0,m.g5)(r.guid)){let r=(0,l.UN)().developerFriendlyIdFromGuid(s.guid).replace(E,"").split(";"),c=r[0];if(c&&1===r.length&&s.isBubbled&&s.symbolId){let r=e(s,n,a);if(Object.keys(r).length){let e=_[c];e&&"key"in e.devFriendlyProp?"ARRAY"===e.devFriendlyProp.type?o?g[e.devFriendlyProp.key]=[...g[e.devFriendlyProp.key]??[],r]:g[e.devFriendlyProp.nonArrayKey]=r:g[e.devFriendlyProp.key]=r:g[(0,i.cleanComponentPropNameForUsage)(s.name)]=r}}}if(o)for(let[e,r]of Object.entries((0,i.groupByCommonPrefixSorted)(Object.keys(g))))for(let n of(g[e]=r.map(e=>g[e]),r))delete g[n];return g}(e,r.includeDefaultValues??!1,r.includeCustomImageAndIconProps??!1));let _="";if("DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo){let a=e.componentPropertyReferences().mainComponent,s=r.componentDefinitionTypeInfo.parsedDefs.find(n=>{if(e.isBubbled&&"NESTED_INSTANCE"===n.def.type){for(let a of(0,i.getInstanceIdsForDef)(r.componentDefinitionTypeInfo?.componentId??"",n))if(a===e.guid)return!0}return!!a&&n.rawProp===a});if(s){if("SLOT"===s.def.type)return`{${v(s.devFriendlyProp)}}`;if(1===n.parsedDefs.length){let e=n.parsedDefs[0].devFriendlyProp.key;e in o?o[e]=`{${v(s.devFriendlyProp)} ?? ${JSON.stringify(o[e])}}`:o[e]=`{${v(s.devFriendlyProp)}}`}else _=`{...${v(s.devFriendlyProp)}}`}}return`<${[n.jsxName,(0,h.d)(o),_].filter(Boolean).join(" ")} />`}function T(e,r){return function(e,r={},n={includePropsType:!1},a){if(!("SYMBOL"===e.type||e.isStateGroup))throw Error(`Expected SYMBOL or isStateGroup, got: ${e.type}`);let s=a??(0,i.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!s)throw Error(`Could not find typeInfo for node: ${e.guid}`);let l=Object.values(s.prefixTypes),d={...r,componentUsageOrDefinition:"DEFINITION",componentDefinitionTypeInfo:s},u=new _.f,h=s.parsedDefs.map(e=>"DERIVED_BOOLEAN"===e.devFriendlyProp.type?"":"SIMPLE_CHOICE"===e.devFriendlyProp.type?"VARIANT"===e.def.type&&"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"GROUPED_INSTANCE_SWAP"===e.devFriendlyProp.type||"IMAGE"===e.devFriendlyProp.type?e.devFriendlyProp.key:"SIMPLE"===e.devFriendlyProp.type?"defaultValue"in e.def?`${e.devFriendlyProp.key} = ${JSON.stringify(e.def.defaultValue)}`:e.devFriendlyProp.key:"ARRAY"===e.devFriendlyProp.type?(0,c.kc)().first_draft_ts_arrays?0!==e.devFriendlyProp.index?"":e.devFriendlyProp.key:e.devFriendlyProp.nonArrayKey:void(0,o.xb)(e.devFriendlyProp)).filter(Boolean);if(n.includePropsType?(h.length>0&&s.propsTypeRepr.typeDefBody&&(u.append(`type ${s.jsxName}Props = `),u.append((0,p.CT)(s.propsTypeRepr.typeDefBody)),u.newline()),u.append(`function ${s.jsxName}(`),h.length>0&&(u.append(`{ ${h.join(", ")} }`),u.append(`: ${s.jsxName}Props`)),u.append(") {")):(u.append(`const ${s.jsxName}: React.FC<${s.propsTypeRepr.typeDefBody??"{}"}> = (`),h.length>0&&u.append(`{${h.join(", ")}}`),u.append(") => {")),u.newline(),"SYMBOL"===e.type)u.append(d.formatJSX?(0,p.uG)(S(e,d)):`  return ${S(e,d)}`),u.newline(),u.append("}");else if(e.isStateGroup){let r=!0;if((0,c.kc)().first_draft_serialize_all_variants){for(let n of(0,m.Au)(e.guid,["COMPONENT"])){if("SYMBOL"!==n.type)continue;let e=n.variantProperties();e&&(r&&d.formatJSX&&u.append(p.BH),r||u.append(" else "),u.append("if ("),u.append(Object.entries(e).map(([e,r])=>`${(0,i.toCamelCase)(e)} === ${JSON.stringify(r)}`).join(" && ")),u.append(") {"),d.formatJSX?(u.newline(),u.append((0,p.C5)((0,p.uG)(S(n,d)),p.BH)),u.newline(),u.append(`${p.BH}}`)):(u.append(`    return ${S(n,d)}`),u.newline(),u.append("}")),r=!1)}d.formatJSX?(u.newline(),u.append(`${p.BH}return null`)):u.append("  return null;")}else{let r=e.defaultVariant;r?u.append(d.formatJSX?(0,p.uG)(S(r,d)):`  return ${S(r,d)}`):u.append("return null")}u.newline(),u.append("}")}return{nodeId:e.guid,prefixTypes:d.formatJSX?l.map(e=>(0,p.S3)(e)):l,jsxStr:u.toString()}}(e,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",tailwindOptions:{size:!0,position:!0,flex:!0,radius:!1,color:!1,typography:!1},formatJSX:!0},{includePropsType:!0},r)}function S(e,r){if("SYMBOL"!==e.type)throw Error(`Unexpected node type: ${e.type}`);return w(e,{...r,parentComponentId:e.guid,tailwindOptions:r.tailwindOptions?{...r.tailwindOptions,position:!1}:{position:!1}})||"null"}function w(e,r){if(!1===e.visible)return null;let n={indent:"",...r},o=[];switch(e.type){case"INSTANCE":case"SYMBOL":case"SECTION":case"GROUP":case"FRAME":{if("INSTANCE"===e.type&&!n.detachInstances){o.push(`${n.indent}${I(e,n)}`);break}if("SYMBOL"===e.type&&"DEFINITION"!==n.componentUsageOrDefinition){o.push(`${n.indent}${function(e,r){if("SYMBOL"!==e.type)throw Error(`Expected SYMBOL, got ${e.type} for node ${e.guid}`);let n=E(e,r),a=(0,i.getComponentInfoById)(e.guid,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!a)throw Error(`Could not find typeInfo for component: ${e.guid}`);return n.name=a.jsxName,"variantProperties"in e&&Object.assign(n,e.variantProperties),`<ComponentType ${(0,h.d)(n)} />`}(e,n)}`);break}let[r,s,l]=function(e,r){if(-1===y.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);let n=E(e,r),o=A(e);o&&(n.description=o);let s=i.IMAGE_NAME_FORMAT.test(e.name),l=e.fills.some(e=>"IMAGE"===e.type),c=!!o||s||l,d=(0,a.Ed)(e,r.tailwindOptions);d.length&&(n[g(r)]=d.join(" "));let u=function(e,r,n,i){if(-1===y.indexOf(e.type))throw Error(`Unexpected parent node type ${e.type} for node ${e.guid}`);switch(e.type){case"SYMBOL":case"INSTANCE":case"FRAME":case"GROUP":if(n)return"Image";return r?i.autoLayoutTagName??"AutoLayout":i.frameTagName??"Frame";case"SECTION":return"Section";default:return"UNKNOWN"}}(e,-1!==d.indexOf("flex"),c,r);if(c&&"DEFINITION"===r.componentUsageOrDefinition&&r.componentDefinitionTypeInfo&&r.parentComponentId){let i=r.componentDefinitionTypeInfo,a=r.parentComponentId,o=i.parsedDefs.find(r=>"IMAGE"===r.def.type&&r.def.guidByParentComponentId[a]===e.guid);if(o){let e=`{...${v(o.devFriendlyProp)}}`;return[`<${u} ${(0,h.d)(n)} ${e}>`,`<${u} ${(0,h.d)(n)} ${e} />`,`</${u}>`]}}return[`<${u} ${(0,h.d)(n)}>`,`<${u} ${(0,h.d)(n)} />`,`</${u}>`]}(e,n),d=e.childrenNodes.map(e=>w(e,{...n,tailwindOptions:{...n.tailwindOptions,position:!0},indent:n.formatJSX?n.indent+p.BH:n.indent}));if(d.length&&d.some(e=>e)){for(let e of(o.push(`${n.indent}${r}`),d))e&&o.push(e);o.push(`${n.indent}${l}`)}else o.push(`${n.indent}${s}`);break}case"TEXT":o.push(`${n.indent}${function(e,r){if("TEXT"!==e.type)throw Error(`Expected TEXT, got ${e.type} for node ${e.guid}`);let n=E(e,r),o=(0,a.Ed)(e,r.tailwindOptions);if(o.length&&(n[g(r)]=o.join(" ")),"DEFINITION"===r.componentUsageOrDefinition){let a=e.componentPropertyReferences();if(a&&"characters"in a){let e=a.characters,o=r.componentDefinitionTypeInfo&&r.componentDefinitionTypeInfo.parsedDefs.find(r=>r.rawProp===e),s=o?v(o.devFriendlyProp):(0,i.cleanComponentPropNameForUsage)(e);return`<Text ${(0,h.d)(n)}>{${s}}</Text>`}}let s=e.characters&&e.characters.includes('"')?`{${JSON.stringify(e.characters)}}`:e.characters??"";return`<Text ${(0,h.d)(n)}>${s}</Text>`}(e,n)}`);break;case"RECTANGLE":case"ROUNDED_RECTANGLE":case"LINE":case"ELLIPSE":o.push(`${n.indent}${function(e,r){if(!("ELLIPSE"===e.type||"RECTANGLE"===e.type||"ROUNDED_RECTANGLE"===e.type||"LINE"===e.type))throw Error(`Unexpected standalone node type ${e.type} for node ${e.guid}. Expected ELLIPSE, RECTANGLE, or LINE`);let n=E(e,r),i=(0,a.Ed)(e,r.tailwindOptions);switch(i.length&&(n[g(r)]=i.join(" ")),e.type){case"ELLIPSE":return`<Ellipse ${(0,h.d)(n)}/>`;case"ROUNDED_RECTANGLE":case"RECTANGLE":return`<Rectangle ${(0,h.d)(n)}/>`;case"LINE":return`<Line ${(0,h.d)(n)}/>`;default:return b(e,r)}}(e,n)}`);break;default:o.push(`${n.indent}${b(e,n)}`)}return o.length>0?n.formatJSX?o.join("\n"):o.join(""):null}function A(e){return"fills"in e&&e.fills.some(e=>"IMAGE"===e.type)&&"true"===e.getSharedPluginData("jsx","isImage")&&e.fills.find(e=>"IMAGE"===e.type)&&(e.getSharedPluginData("jsx","description")||e.getSharedPluginData("jsx","altText"))||null}},284538:(e,r,n)=>{n.d(r,{Qy:()=>p,v$:()=>h});var i=n(140593),a=n(922827),o=n(340818),s=n(581166),l=n(368391),c=n(298455),d=n(747202),u=n(356390),m=n(202655);function p(e,r=!1){let n=e[0];if(!n||"FRAME"!==n.type||n.isInstanceSublayer)return;let s=(0,c.UN)();if(r){let r=function(e){let r=function(e){switch(e){case"buildingBlocks":return m.vh;case"icons":return d.C;case"atoms":return"Atoms";case"copiedDesigns":return"Copied Designs";default:(0,i.xb)(e)}}(e),n=c.UN().getCurrentPage()?.childrenNodes.find(e=>"SECTION"===e.type&&e.name===r);if(n)return n;{let e=g((0,c.UN)().getCurrentPage());return o.l7.user("create-section",()=>{let n=(0,c.UN)().createNode("SECTION");return n.name=r,n.relativeTransform={...n.relativeTransform,m02:e.right()+100,m12:e.top()},n})}}("icons");for(let n of e)!function(e,r){let n=a.XJn.findIcons(e.guid),i=(0,c.UN)(),o=n.map(e=>i.get(e)),s={x:g(r).right()+50,y:50},l={};for(let e of o){if(!e)continue;let n=a.XJn.findSimilarNodes(e.guid,r.guid,!1,!0,!1),o=n[0]?i.get(n[0]):null;o||((o=i.createComponentFromNode(e.clone())).visible=!0,r.appendChild(o),o.relativeTransform={...o.relativeTransform,m02:s.x,m12:s.y},s.y+=o.size.y+20),l[e.guid]=o.guid,_(e,o)}}(n,r)}let l=n.absoluteBoundingBox,u=s.createComponentFromNode(n.clone());u.visible=!0,s.getCurrentPage()?.appendChild(u),u.x=l.x+l.w+200,u.y=l.y;let f=h(e,u);return{component:u,nodeMapping:f}}function h(e,r){let n=new Map;for(let i of e){let e=_(i,r);e&&(n=new Map([...n,...e]))}return u.Y5.commit(),n}function _(e,r){let n=e.parentNode;if(!n||n.isPrimaryInstance||n.isInstanceSublayer||"SYMBOL"!==r.type)return;let i=n.childrenGuids.findIndex(r=>r===e.guid),o=r.createInstance();if(!o)return;let s=a.XJn.applyOverridesToInstanceToMatchNode(o.guid,e.guid);return n.insertChild(o,i+1),"NONE"===n.stackMode&&(o.x=e.x,o.y=e.y),o.visible=e.visible,e.removeSelfAndChildren(),s}function g(e){let r=null;for(let n of e.childrenNodes){let e=new s.r(new l.M(n.x,n.y),new l.M(n.size.x,n.size.y));r=r?r.unionWith(e):e}return r??new s.r}},599280:(e,r,n)=>{n.d(r,{Hj:()=>f});var i=n(268853),a=n(922827),o=n(966712),s=n(717037),l=n(776621),c=n(553716),d=n(999202),u=n(173454),m=n(640209),p=n(776047),h=n(642481);function _(e,r){if(!r)return{publishAssets:[],unpublishAssets:[]};let n=new Set(r.added.concat(r.modified)),i=[],a=r.removed;return e.forEach(e=>{n.has(e.key)&&i.push(e)}),{publishAssets:i,unpublishAssets:a}}function g(e){return e&&e!==u.E8.DELETED&&e!==u.E8.NOT_STAGED}async function f(e,r,n,i){let s=a.XJn.getKitKey(e);if(!s)return;let l=(0,d.LQ)(e);if(0===l.length)return;let u=n.publishType,p=u===h.tf.LOCAL_GENERATION,f=l.reduce((e,r)=>((u!==h.tf.LIBRARY_PUBLISH||g((n.localComponents[r.componentId]||n.localStateGroups[r.componentId])?.status))&&r.version&&(e[r.key]=r.version),e),{}),y=(0,d.vg)(e),b=y.reduce((e,r)=>((u!==h.tf.LIBRARY_PUBLISH||g(n.localComponents[r.defaultNodeId]?.status))&&r.version&&(e[r.key]=r.version),e),{}),v=a.XJn.getLocalExamples(e,l),I=v.reduce((e,r)=>(e[r.key]=r.version,e),{}),T=(0,d.pX)(),S={};T&&(u===h.tf.LIBRARY_PUBLISH&&g(n.localVariableSets[T.nodeId]?.status),S[T.key]=T.version);let w=await m.Gh.postFirstDraftPublishStatus({productComponentKeyToVersion:f,groupedComponentKeyToVersion:b,exampleKeyToVersion:I,variableSetKeyToVersion:S,publishType:u,kitKey:s}),{publishAssets:A,unpublishAssets:C}=_(l,w.data.meta.product_component_status),{publishAssets:N,unpublishAssets:L}=_(y,w.data.meta.grouped_component_status),{publishAssets:O,unpublishAssets:R}=_(v,w.data.meta.example_status),P=await E(O),D={};for(let e of O){let n=(0,o.kc)().first_draft_direct_gen?(0,d.fd)(e.nodeId):(0,d.Sd)(r,e);n&&(D[e.key]=n)}let{publishSets:k,unpublishSets:M}=function(e,r){if(!r)return{publishSets:[],unpublishSets:[]};let n=r.removed;return{publishSets:e.filter(e=>!n.includes(e.key)),unpublishSets:n}}(T?[T]:[],w.data.meta.variable_set_status);if(k.length>0&&!i){(0,c.x1)("First draft publish","Skipping kit publish because no theme variables were supplied");return}return{kit:{name:r,key:s,is_local:p},publish_product_components:A.map(e=>({name:e.name,jsx_name:e.jsxName,key:e.key,version:e.version,description:e.description,type_info:{jsx_name:e.jsxName,type_str:e.typeStr,jsx_component_def:e.jsxComponentDef?.jsxStr,prefix_types:e.prefixTypes,prefix_comments:e.prefixComments,description:e.description,type_info_version:(0,o.kc)().first_draft_direct_gen?h.Rd:h.Q6}})),unpublish_product_components:C,publish_grouped_components:N.map(e=>({name:e.name,key:e.key,version:e.version,description:e.description,group_name:e.groupName})),unpublish_grouped_components:L,publish_examples:O.map(e=>({key:e.key,version:e.version,example_info:{componentKeys:e.componentKeys,componentJsxNames:e.componentJsxNames,nodeId:e.nodeId,name:e.name,jsxInfo:D[e.key]??null},thumbnail_url:P[e.key]})),unpublish_examples:R,publish_variable_sets:i?k.map(e=>({key:e.key,name:e.name,version:e.version,theme_info:{theme_info_version:h.$5,customizable_variables:i,modes:e.modes}})):[],unpublish_variable_sets:M}}async function E(e){let r={};if(0===e.length)return r;let n={};for(let r of e){let[e,i]=a.Vzr.generateThumbnailForNode(r.nodeId,768,768,1,{});n[r.key]=i}let o=(await p.b.getUploadThumbnailsPresignedPostUrls(Object.keys(n).length)).data.meta.presigned_posts;return o.length<Object.keys(n).length?(0,l.$D)(i.e.AI_GENERATION,Error("Mismatch between number of thumbnails and presigned URLs")):await Promise.allSettled(Object.entries(n).map(async([e,n],a)=>{let{url:c,fields:d}=o[a];try{let a=await (0,s.ET)(i.e.AI_GENERATION,"uploadThumbnails",c,d,n,"application/octet-stream");r[e]=a}catch(e){(0,l.$D)(i.e.AI_GENERATION,Error("Unable to upload example thumbnail to S3"))}})),r}},104064:(e,r,n)=>{n(340818),n(298455),n(568214),n(809058);var i=(e=>(e[e.XXXS=4]="XXXS",e[e.XXS=8]="XXS",e[e.XS=12]="XS",e[e.S=16]="S",e[e.M=24]="M",e[e.L=32]="L",e[e.XL=48]="XL",e[e.XXL=64]="XXL",e[e.XXXL=96]="XXXL",e))(i||{})},850213:(e,r,n)=>{n.d(r,{Cr:()=>o,ZO:()=>a,k_:()=>i}),n(268853),n(922827),n(340818),n(370927),n(520887),n(298455),n(776621),n(202655),n(207204),n(747202),n(356390),n(931770),n(763764),n(33604);let i=6,a={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/content-primary",cornerRadius:"\u2726/cornerRadius/small",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"},o={fontFamilyTitle:"\u2726/font/title/bold/family",fontFamilyBody:"\u2726/font/body/regular/family",fontFamilyLabel:"\u2726/font/label/medium/family",textColor:"\u2726/color/1/text-default",cornerRadius:"\u2726/cornerRadius/medium",cornerRadiusFallback:"\u2726/cornerRadius/large",bgBrandColor:"\u2726/color/1/bg-brand",bgColor:"\u2726/color/2/bg-primary"}},277080:(e,r,n)=>{var i=(e=>(e.LIGHT="light",e.DARK="dark",e))(i||{}),a=(e=>(e.DEFAULT="default",e.BRAND="brand",e))(a||{}),o=(e=>(e.BG="bg",e.CONTENT="content",e.BORDER="border",e))(o||{}),s=(e=>(e.PRIMARY="primary",e.SECONDARY="secondary",e.TERTIARY="tertiary",e))(s||{})},763764:(e,r,n)=>{n(879441),n(568214),n(138392),n(553716),n(277080)},33604:(e,r,n)=>{n(340818),n(370927),n(568214),n(708389),n(749401),n(801886),n(104064),n(277080),n(763764);var i=(e=>(e.Mobile="mobile",e.Website="website",e))(i||{})},801886:(e,r,n)=>{n.d(r,{GS:()=>c,LW:()=>g,lu:()=>d,u7:()=>l,vj:()=>u});var i=n(330654);let a=i.object({type:i.literal("LOCAL"),pageId:i.string()}),o=i.object({type:i.literal("LIBRARY"),key:i.string()});i.union([a,o]),i.object({dsKitKey:i.union([a,o]).optional(),pageChildrenName:i.string().optional(),includeSelection:i.boolean().optional()}).optional();let s=i.object({type:i.string(),props:i.record(i.any())}).extend({children:i.lazy(()=>i.union([i.string().array(),s.array()]))});i.union([i.object({status:i.literal("success"),key:i.string(),version:i.string(),guid:i.string(),jsxName:i.string()}),i.object({status:i.literal("error")})]);var l=(e=>(e.SPACING="spacing",e.CORNER_RADIUS="cornerRadius",e.FONT="font",e.COLOR="color",e.DARK_MODE="dark",e))(l||{}),c=(e=>(e.DEFAULT="default",e.SERIF="serif",e))(c||{}),d=(e=>(e.TITLE="title",e.BODY="body",e.LABEL="label",e))(d||{}),u=(e=>(e.BOLD="bold",e.MEDIUM="medium",e.REGULAR="regular",e))(u||{});let m=i.object({value:i.number(),units:i.enum(["RAW","PIXELS","PERCENT"])}),p=i.object({fontName:i.object({family:i.string(),style:i.string()}),letterSpacing:m.optional()}),h=i.object({r:i.number(),g:i.number(),b:i.number(),a:i.number()}),_=i.object({colorVariableMap:i.record(i.string(),h),numberVariableMap:i.record(i.string(),i.number()),fontVariableMap:i.record(i.string(),p).optional()});i.object({accentColor:h.optional(),darkMode:i.boolean(),variableMaps:_.optional()}),i.object({position:i.boolean(),size:i.boolean(),flex:i.boolean(),color:i.boolean(),radius:i.boolean(),typography:i.boolean()});let g={position:!1,size:!1,flex:!1,color:!1,radius:!1,typography:!1};i.object({nodeId:i.string().nullable(),jsxStr:i.string(),prefixTypes:i.array(i.string())});let f=i.object({children:i.string().optional(),className:i.string().optional()});i.object({componentName:i.string().optional(),overrides:i.record(f)}),i.object({key:i.string(),nodeId:i.string(),version:i.string(),descriptionLegacy:i.string(),componentKeys:i.array(i.string()),componentJSXNames:i.array(i.string())})},999202:(e,r,n)=>{n.d(r,{LQ:()=>f,Sd:()=>S,_:()=>b,fd:()=>I,pX:()=>v,vg:()=>g});var i=n(841748),a=n(212273),o=n(268853),s=n(922827),l=n(298455),c=n(966712),d=n(776621),u=n(553716),m=n(202655),p=n(853069),h=n(286374),_=n(747202);function g(e){let{info:r}=E({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},pageChildrenName:p.C},includeJSX:!1});return r.filter(e=>(0,i.isPartOfGroup)(e.componentGroupPath,p.C))}function f(e){let{info:r}=E({rootNodes:{dsKitKey:{type:"LOCAL",pageId:e},pageChildrenName:m.vh},includeJSX:!!(0,c.kc)().first_draft_direct_gen&&!!(0,c.kc)().first_draft_full_component_def});return r.filter(e=>(0,i.isPartOfGroup)(e.componentGroupPath,m.vh)).concat(y((0,m.VN)(e),!0))}function E(e){let r=(0,m.__)(e);return{info:y((0,m.tJ)([...r],{followInstances:!1}),e.includeJSX)}}function y(e,r){return(0,i.resetTypeInfoCache)(),e.map(e=>{try{let n=(0,i.getTypeInfoCached)(e,{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!r)return n;let a=(0,h.gZ)(e,n);return{...n,jsxComponentDef:a}}catch(r){(0,d.$D)(o.e.AI_GENERATION,r,{extra:{nodeId:e.guid}})}}).filter(Boolean)}function b(){return s.CWU.getLocalVariableSetsInfo().filter(e=>!e.isSoftDeleted&&(0,_.n6)(e.name,m.i2)).map(e=>({key:e.keyForPublish,name:e.name,version:e.userFacingVersion,nodeId:e.id,defaultModeId:e.defaultModeID,modes:e.modes}))}function v(){let e=b().sort((e,r)=>e.nodeId.localeCompare(r.nodeId));if(0!==e.length&&!(e.length>1))return e[0]}function I(e){let r=(0,l.UN)().get(e);if(!r||"FRAME"!==r.type)return null;let n=(0,h.Py)(r,{skipNodeIds:!0,autoLayoutTagName:"div",frameTagName:"div",formatJSX:!0});return n?{jsx:n,buildingBlockToRegion:{}}:null}function T(e){let{layoutName:r,header:n,mainContent:i,footer:a,sidebar:o}=e,s={};for(let e of(s[n.name]="header",i))s[e.name]="mainContent";if(o)for(let e of o.blocks)s[e.name]="sidebarContent";return s[a.name]="footer",{jsx:`<${r} header={${n.tag}} mainContent={[${i.map(e=>e.tag).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tag).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${a.tag}} />`,jsxWithProps:`<${r} header={${n.tagWithProps}} mainContent={[${i.map(e=>e.tagWithProps).join(", ")}]}${o?` sidebarContent={[${o.blocks.map(e=>e.tagWithProps).join(", ")}]} sidebarWidth={${o.width}}`:""} footer={${a.tagWithProps}} />`,buildingBlockToRegion:s}}function S(e,r){let n=e=>{let r=(0,i.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!r||r.componentType!==a.J.BUILDING_BLOCK)throw Error("Expected building block");return{name:r.jsxName,tag:`<${r.jsxName} />`,tagWithProps:(0,h.RI)(e,{skipNodeIds:!0,includeDefaultValues:!0,includeCustomImageAndIconProps:!0})}},o=e=>"FRAME"===e.type&&((0,_.n6)(e.name,"spacer")||(0,_.n6)(e.name,"filler"));try{let s=function(e){let r=e.toLowerCase();return r.includes("mobile")||r.includes("app")?"mobile":r.includes("site")?"website":"vstack-only"}(e);if("vstack-only"===s)return null;let d=(0,l.UN)().get(r.nodeId);if(!d||"FRAME"!==d.type)return null;for(let e of function e(r){if(r.isPrimaryInstance)return[r];if(r.isInstanceSublayer)return[];let n=[];for(let i of r.childrenNodes)n.push(...e(i));return n}(d)){let r=(0,i.getComponentInfoById)(e.symbolId??"",{enableTsArrays:!!(0,c.kc)().first_draft_ts_arrays});if(!r||r.componentType!==a.J.BUILDING_BLOCK)return null}if("VERTICAL"===d.stackMode&&d.childrenNodes.filter(e=>"INSTANCE"===e.type).length>=3&&d.childrenNodes.every(e=>"INSTANCE"===e.type||o(e))){let e=d.childrenNodes.filter(e=>"INSTANCE"===e.type).map(n);return T({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:e[0],mainContent:e.slice(1,e.length-1),footer:e[e.length-1]})}if("VERTICAL"===d.stackMode&&3===d.childrenNodes.length&&"INSTANCE"===d.childrenNodes[0].type&&"FRAME"===d.childrenNodes[1].type&&"VERTICAL"===d.childrenNodes[1].stackMode&&d.childrenNodes[1].childrenNodes.every(e=>"INSTANCE"===e.type||o(e))&&"INSTANCE"===d.childrenNodes[2].type){let e=n(d.childrenNodes[0]),r=n(d.childrenNodes[2]),i=d.childrenNodes[1].childrenNodes.filter(e=>"INSTANCE"===e.type).map(n);return T({layoutName:"website"===s?"DesktopSingleCol":"MobileSingleCol",header:e,mainContent:i,footer:r})}if("website"===s&&"VERTICAL"===d.stackMode&&3===d.childrenNodes.length&&"INSTANCE"===d.childrenNodes[0].type&&"FRAME"===d.childrenNodes[1].type&&"HORIZONTAL"===d.childrenNodes[1].stackMode&&2===d.childrenNodes[1].childrenNodes.length&&d.childrenNodes[1].childrenNodes.every(e=>"FRAME"===e.type&&"VERTICAL"===e.stackMode&&e.childrenNodes.every(e=>"INSTANCE"===e.type))&&"INSTANCE"===d.childrenNodes[2].type){let e=n(d.childrenNodes[0]),r=n(d.childrenNodes[2]),i=d.childrenNodes[1].childrenNodes[0],a=d.childrenNodes[1].childrenNodes[1];if(!i||!a)return null;let o=i.absoluteRenderBounds.w<a.absoluteRenderBounds.w,s=o?a:i,l=o?i:a,c=l.absoluteRenderBounds.w,u=s.childrenNodes.map(n),m=l.childrenNodes.map(n);return T({layoutName:o?"DesktopTwoColWithLeftSidebar":"DesktopTwoColWithRightSidebar",header:e,mainContent:u,footer:r,sidebar:{width:c,blocks:m}})}}catch(n){(0,u.xi)("getNodeJSXFromExample","unhandled error",{error:n,kitName:e,example:r})}return null}},599015:(e,r,n)=>{n.d(r,{Gs:()=>a});var i=n(330654);function a(e){return"INSTANCE"===e.type&&"true"===e.getSharedPluginData("first_draft_make_kit","is_kit_instance")}i.object({componentPropertyDefinitions:i.array(i.object({name:i.string(),type:i.string()})),componentPropertyReferences:i.record(i.string(),i.record(i.string(),i.string()))})},747202:(e,r,n)=>{n.d(r,{Au:()=>m,C:()=>f,Kp:()=>E,Lp:()=>b,Ny:()=>_,Sn:()=>y,So:()=>v,_F:()=>I,g5:()=>p,lI:()=>h,n6:()=>g,uN:()=>T}),n(922827);var i=n(520887),a=n(298455),o=n(418956),s=n(553716),l=n(825871),c=n(378260),d=n(106757),u=n(335682);function m(e,r,n,i){if(!e)return[];let o=i??(0,a.UN)(),s=o.get(e);if(!s)return[];let l=s.findAllWithCriteriaGUIDs({types:r,...n}),c=[];for(let e of l){let r=o.get(e);r&&c.push(r)}return c}function p(e){let r=(0,i.NT)().get(e);return r?m(r.guid,["INSTANCE"]):[]}function h(){return(0,a.UN)().getCurrentPage()}function _(e){return(0,a.UN)().get(e)}function g(e,r){return(e=e.replace(/[^0-9a-z]/gi,"").toLowerCase())===(r=r.replace(/[^0-9a-z]/gi,"").toLowerCase())}let f="Icons";function E(e,r){return{description:r.name||""}}function y(e,r){return e=(e=e.replace(/[^0-9a-z]/gi,"")).charAt(0).toUpperCase()+e.substr(1),!r||e.startsWith(r)?e:`${r}${e}`}function b({clientLifecycleId:e}){return{orgId:o.zl.get(c._s)||null,teamId:o.zl.get(u.As)||null,fileKey:o.zl.get(u.ze)||null,userId:o.zl.get(d.kS)||null,clientLifecycleId:e,trackingSessionId:(0,l.f)()}}function v(e,r){let n=_(e);if(!n||n.type!==r)throw Error(`Unexpected node type for id=${e}. Expected ${r} got: ${n?.type}`);return n}function I(e,r,n,i){let a=[];if(r.includes(e.type)){if(n){if(n.sharedPluginData){let r=e.getSharedPluginDataKeys(n.sharedPluginData.namespace),i=n.sharedPluginData.keys||[];(0===i.length&&r.length>0||r.some(e=>i.includes(e)))&&a.push(e)}}else a.push(e)}return a.push(...m(e.guid,r,n,i)),a}function T(e,r){let n=(0,a.UN)().get(r);return n?n.getSublayerIdForInstanceOfSymbol(e):((0,s.xi)("first-draft","No component sublayer found for",{symbolSublayer:n}),null)}},516398:(e,r,n)=>{n.d(r,{C_:()=>d,WU:()=>h,cw:()=>p,fB:()=>g,hx:()=>_});var i=n(411855);n(188507);var a=n(652894),o=n(121913);n(38329),n(966712);var s=n(498750),l=n(563706);n(738269),n(22774),n(529906),n(239671),n(922358),n(373119),n(611978);let c=[];function d(e,r){i.useEffect(()=>{if(r)return;let n=e.current;if(n)return function(e,r){let n={element:e};if(!c.length){c.push(n);return}for(let[r,{element:i}]of c.entries()){let a=i.compareDocumentPosition(e);if(a===Node.DOCUMENT_POSITION_PRECEDING||a===Node.DOCUMENT_POSITION_CONTAINS){if(c[r-1]?.element===e)return;c.splice(r,0,n);return}}c.push(n)}(n),()=>{(function(e){let r=c.findIndex(r=>r.element===e);c.splice(r,1)})(n)}},[e,r])}function u(e){var r;if(e.focus)return e.focus();let n=((r=e.element)?(0,a.Kr)(r,{getShadowRoot:!0})[0]:null)||e.element;return n?.focus(),n}function m(e){for(let[r,{element:n}]of c.entries())if(n.contains(document.activeElement)){let n=c.length,i=c[(n+r+("forward"===e?1:-1))%n],a=i&&u(i);if(a)return a}let r="forward"===e?c[0]:c[c.length-1];return r?u(r):null}function p(e){m("backward"),(0,o.f)(o.h.FOCUS_CYCLE_PREVIOUS_AREA,{key:e})}function h(e){m("forward"),(0,o.f)(o.h.FOCUS_CYCLE_NEXT_AREA,{key:e})}function _(e){let{e:r,onClickHandler:n,onEscapeHandler:i}=e;n&&r.keyCode===s.Uz.ENTER&&n(r),i&&r.keyCode===s.Uz.ESCAPE&&i(r)}function g(e){return function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&0===(0,s.sN)(e)||r&&"ArrowRight"===e.key}(e)||function(e){let r=l.Ay.mac&&(0,s.vN)(e,s.xH.CONTROL|s.xH.META);return"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT|s.xH.CONTROL)||l.Ay.mac&&"F6"===e.key&&(0,s.vN)(e,s.xH.SHIFT)||r&&"ArrowLeft"===e.key}(e)}},875847:(e,r,n)=>{n.d(r,{B_:()=>h,CI:()=>f,D:()=>c,Gi:()=>u,N5:()=>E,SS:()=>b,T9:()=>d,VA:()=>p,cU:()=>v,d:()=>m,gj:()=>_,jd:()=>T,oq:()=>y,sp:()=>g,ye:()=>I});var i=n(966712);n(915440),n(391388),n(279453);var a=n(428467),o=n(451e3),s=n(173454),l=n(668860);function c(e,r){return u(e[r])}function d(e){let r=!!e&&""===e.path;return(0,i.kc)().ps_benchmark?r:r&&!e.teamId}function u(e){let r=!!e&&""===e.path;return(0,i.kc)().ps_benchmark?r:r&&!e.team_id}function m(){return`temp-${+new Date}`}function p(e){return(0,i.kc)().ps_benchmark?e?.path==="":e?.path===""&&!e?.teamId}function h(e){return e?.path===""&&!!e?.teamId}function _(e,r,n,i){if(!e)return null;if(i)return r[i.drafts_folder_id]||null;for(let i in r){let a=r[i],o=n[i]?n[i][e]:null;if(!a.teamId&&""===a.path&&null==a.orgId&&o&&o.level===l.e6.OWNER)return a}return null}function g(e){return e&&!e.team_id&&""!==e.path&&!!e.org_id}function f(e){return e?.path===""?(0,s.Tb)():e?.path}function E(e,r){return null!=r&&r in e}function y(e,r){let n=r.folders[e];if(n&&n.org_id)return n.org_id;if(n&&n.team_id){let e=r.teams[n.team_id];if(e&&e.org_id)return e.org_id}}function b(e){return e.length<=0?"Please provide a name":e.length>255?"Sorry, name must be at max 255 characters.":e.match(/[\/\\:?*"|]/)?'The following characters are not allowed:  / : ? * " |':void 0}function v(e,r,n,s){if(!(0,i.kc)().ps_benchmark)return(0,o.EE)(e,r);let l=n&&(0,a.canViewTeam)(n,s);return r?`${location.origin}/files/${r}/project/${e}`:l?`${location.origin}/files/team/${n}/project/${e}`:s.user?.personal_drafts_folder_id===e?`${location.origin}/files/drafts-to-move`:`${location.origin}/files/project/${e}`}function I(e){return!!e&&!!e.team_id&&!e.path}function T(e){return!!e&&!!e.teamId&&!e.path}n(671653)},21067:(e,r,n)=>{n.d(r,{Zb:()=>f});var i=n(838516),a=n(136880),o=n(922827),s=n(566343),l=n(939863),c=n(392592),d=n(809831),u=n(279145),m=n(913964),p=(e=>(e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.DOWN=2]="DOWN",e[e.RIGHT=4]="RIGHT",e[e.LEFT=8]="LEFT",e[e.UP_RIGHT=5]="UP_RIGHT",e[e.UP_LEFT=9]="UP_LEFT",e[e.DOWN_RIGHT=6]="DOWN_RIGHT",e[e.DOWN_LEFT=10]="DOWN_LEFT",e))(p||{}),h=(e=>(e[e.NONE=0]="NONE",e[e.HORIZONTAL=1]="HORIZONTAL",e[e.VERTICAL=2]="VERTICAL",e[e.BOTH=3]="BOTH",e))(h||{}),_=(e=>(e[e.NONE=0]="NONE",e[e.DECREASED=1]="DECREASED",e[e.INCREASED=2]="INCREASED",e))(_||{});class g{constructor(e){this.store=e,this.store=e,this.debounceNodeResizeUpdate=(0,i.s)(e=>{this.announceDomChange(o.x8F.NODE_RESIZED,e);let r=o.AlE.getActiveDocument();o.yGz.resetStoredSelectedNodeBounds(r)},200),this.debounceNodeMovementUpdate=(0,i.s)(e=>{this.announceDomChange(o.x8F.NODE_MOVED,e);let r=o.AlE.getActiveDocument();o.yGz.resetStoredSelectedNodeBounds(r)},200)}announceDomChange(e,r){let n=(0,d.XE)(this.store.getState().selectedView),i=this.store.getState();if(!i.screenreader.enabled)return;let a=function(e,r,n,i){let a=r.targetNodeType?E(r.targetNodeType,i):"";switch(e){case o.x8F.NODE_CREATED:if(r.targetNodeType===o.Z6A.STAMP&&r.stickableHostType)return(0,l.t)("fullscreen.accessibility.stamp_attached_announcement",{hostType:E(r.stickableHostType,i)});return(0,l.t)("fullscreen.accessibility.node_created_announcement",{node_type:a});case o.x8F.NODE_DELETED:return r.multiSelection?(0,l.t)("fullscreen.accessibility.multiple_node_deleted_announcement"):(0,l.t)("fullscreen.accessibility.node_deleted_announcement",{node_type:a});case o.x8F.TEXT_SELECTION:return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:a});case o.x8F.TOOL:if(r.targetNodeType===o.Z6A.STAMP)return;return r.targetNodeType!==o.Z6A.NONE?(0,l.t)("fullscreen.accessibility.tool_selected",{nodeType:a,shortcut:(0,u.c1)(n,"toggle-menu")}):(0,l.t)("fullscreen.accessibility.tool_unselected");case o.x8F.TABLE_CELL_TEXT_SELECTION:if(null!=r.tableCellCol&&null!=r.tableCellRow)return(0,l.t)("fullscreen.accessibility.next_table_cell_announcement",{r:r.tableCellRow,c:r.tableCellCol});return(0,l.t)("fullscreen.accessibility.next_text_node_announcement",{nodeType:a});case o.x8F.NODE_RESIZED:let s,c,d;let m=r.nodeSizeDelta;if(!m)return;let p=0,h=0,_=0;switch(0!==m.x&&(p|=1,h=m.x>0?2:1),0!==m.y&&(p|=2,_=m.y>0?2:1),p){case 0:return;case 1:s=(0,l.t)("fullscreen.accessibility.node_resize_horizontal"),c=y(h),d=Math.abs(m.x);break;case 2:s=(0,l.t)("fullscreen.accessibility.node_resize_vertical"),c=y(_),d=Math.abs(m.y);break;default:let g=Math.abs(m.x),f=y(h),b=Math.abs(m.y),v=y(_);return(0,l.t)("fullscreen.accessibility.node_resize_bidirectional",{nodeType:a,resizedComparisonX:f,nodeResizeXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:g}),resizedComparisonY:v,nodeResizeYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:b})})}return(0,l.t)("fullscreen.accessibility.node_resize_unidirectional",{nodeType:a,nodeSizeDelta:d,resizeComparison:c,nodeDirection:s});case o.x8F.NODE_MOVED:let I,T,S=0,w=r.nodeMovementDelta;if(!w)return;switch(w.x>0?S|=4:w.x<0&&(S|=8),w.y<0?S|=1:w.y>0&&(S|=2),S){case 0:return;case 1:I=(0,l.t)("fullscreen.accessibility.node_movement_up"),T=Math.abs(w.y);break;case 2:I=(0,l.t)("fullscreen.accessibility.node_movement_down"),T=Math.abs(w.y);break;case 4:I=(0,l.t)("fullscreen.accessibility.node_movement_right"),T=Math.abs(w.x);break;case 8:I=(0,l.t)("fullscreen.accessibility.node_movement_left"),T=Math.abs(w.x);break;default:let A=(4&S)==4?(0,l.t)("fullscreen.accessibility.node_movement_right"):(0,l.t)("fullscreen.accessibility.node_movement_left"),C=Math.abs(w.x),N=(1&S)==1?(0,l.t)("fullscreen.accessibility.node_movement_up"):(0,l.t)("fullscreen.accessibility.node_movement_down"),L=Math.abs(w.y);return(0,l.t)("fullscreen.accessibility.node_movement_bidirectional",{nodeType:a,nodePositionXDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:C}),nodeDirectionX:A,nodePositionYDelta:(0,l.t)("fullscreen.accessibility.node_unit",{numUnits:L}),nodeDirectionY:N})}return(0,l.t)("fullscreen.accessibility.node_movement_unidirectional",{nodeType:a,nodePositionDelta:T,nodeDirection:I});default:return}}(e,r,i.mirror.appModel.keyboardShortcuts,n),s=function(e){switch(e){case o.x8F.NODE_CREATED:case o.x8F.NODE_DELETED:return"creation-deletion";case o.x8F.NODE_RESIZED:return"resize";case o.x8F.NODE_MOVED:return"movement";case o.x8F.TEXT_SELECTION:case o.x8F.TABLE_CELL_TEXT_SELECTION:return"selection";case o.x8F.TOOL:return"tool";default:return}}(e);a&&s&&this.store.dispatch(c.F.enqueue({type:`accessibility-screen-reader-announcement-${s}`,message:a,role:"status",timeoutOverride:500}))}debounceNodeResizeUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedResizeUpdate(e)}debounceNodeMovementUpdate(e){this.store.getState().screenreader.enabled&&this.debouncedMovementUpdate(e)}prefersReducedMotion(){return matchMedia("(prefers-reduced-motion: reduce)").matches}getWCAG2Contrast(e,r){return(0,s.f)((0,a.aH)(e),(0,a.aH)(r))}}function f(e){new g(e)}function E(e,r){let n=o.Z6A[e];return(0,m.r)(n,r)}function y(e){switch(e){case 1:return(0,l.t)("fullscreen.accessibility.node_resize_decrease");case 2:return(0,l.t)("fullscreen.accessibility.node_resize_increase");default:return(0,l.t)("fullscreen.accessibility.node_resize_none")}}},605522:(e,r,n)=>{n.d(r,{tO:()=>p});var i=n(177131),a=n(922827),o=n(716034),s=n(418956),l=n(356390),c=n(173454);let d={[c.PW.CODE_COMPONENT]:{idl:a.PWo.CODE_COMPONENT,key:(0,i.Sm)(""),version:(0,i.j6)("")}};c.PW.CODE_COMPONENT,function(e){let r=d[e].idl,n=(0,o.eU)({}),i=(0,s.FZ)(n,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.key]={sourceLibraryKey:r.sourceLibraryKey,pagesByVersion:{...e[r.key]?.pagesByVersion,...function(e){let r={};for(let{version:n,consumingPages:i}of e)r[n]=i;return r}(r.pagesByVersion)}},e),{})}}return"reset"in r?{}:e}),c=`consumedAssetVersionsByKey(${a.PWo[r]})`;i.debugLabel=c,i.onMount=e=>{var n;let i=()=>{e({changed:a.IXA?.getAllSubscribedAssetConsumptions(r)??[]})};l.Y5.isReady()?i():l.Y5.onReady().then(i);let o=(n=r=>{e(r)},u[r]=n,()=>{u[r]=null});return()=>{o(),e({reset:!0})}}}(c.PW.CODE_COMPONENT);let u={[a.PWo.CODE_COMPONENT]:null};class m{syncChangedSubscribedConsumptions(e,r){u[e]?.({changed:r})}resetMirrorCache(){for(let e of Object.values(u))e?.({reset:!0})}}function p(){new m}},951546:(e,r,n)=>{n.d(r,{Mk:()=>f,WY:()=>v});var i=n(922827),a=n(802691),o=n.n(a),s=n(716034),l=n(418956),c=n(553716),d=n(356390),u=n(404109),m=n(820904),p=n(788193),h=n(999198),_=n(173454);_.PW.RESPONSIVE_SET,i.PWo.RESPONSIVE_SET,_.PW.CODE_LIBRARY,i.PWo.CODE_LIBRARY,_.PW.CODE_FILE,i.PWo.CODE_FILE,_.PW.CODE_COMPONENT,i.PWo.CODE_COMPONENT;let g={[i.PWo.RESPONSIVE_SET]:{[i.Ocq.LOCAL]:h.X1,[i.Ocq.SUBSCRIBED]:h._t},[i.PWo.CODE_LIBRARY]:{[i.Ocq.LOCAL]:p.V,[i.Ocq.SUBSCRIBED]:p.Q},[i.PWo.CODE_FILE]:{[i.Ocq.LOCAL]:m.y,[i.Ocq.SUBSCRIBED]:m.d},[i.PWo.CODE_COMPONENT]:{[i.Ocq.LOCAL]:u.r,[i.Ocq.SUBSCRIBED]:u.I}},f={[_.PW.RESPONSIVE_SET]:{local:E(i.PWo.RESPONSIVE_SET,i.Ocq.LOCAL),subscribed:E(i.PWo.RESPONSIVE_SET,i.Ocq.SUBSCRIBED)},[_.PW.CODE_LIBRARY]:{local:E(i.PWo.CODE_LIBRARY,i.Ocq.LOCAL),subscribed:E(i.PWo.CODE_LIBRARY,i.Ocq.SUBSCRIBED)},[_.PW.CODE_FILE]:{local:E(i.PWo.CODE_FILE,i.Ocq.LOCAL),subscribed:E(i.PWo.CODE_FILE,i.Ocq.SUBSCRIBED)},[_.PW.CODE_COMPONENT]:{local:E(i.PWo.CODE_COMPONENT,i.Ocq.LOCAL),subscribed:E(i.PWo.CODE_COMPONENT,i.Ocq.SUBSCRIBED)}};function E(e,r){let n=g[e][r],a=(0,s.eU)({}),c=(0,l.FZ)(a,(e,r)=>{if("changed"in r){let n=r.changed;return{...e,...n.reduce((e,r)=>(e[r.assetId]=r,e),{})}}if("removed"in r){let n=new Set(r.removed);return o()(e,e=>e&&!n.has(e.assetId))}return"reset"in r?{}:e}),u=`assetByKeyAtom(${i.PWo[e]}, ${i.Ocq[r]})`;return c.debugLabel=u,c.onMount=a=>{var o;let s=()=>{a({changed:i.P5M.getAllAssets(e,r).map(n).filter(e=>null!==e)})};d.Y5.isReady()?s():d.Y5.onReady().then(s);let l=(o=e=>{a(e)},y[e][r]=o,()=>{y[e][r]=null});return()=>{l(),a({reset:!0})}},c}let y={[i.PWo.RESPONSIVE_SET]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.CODE_LIBRARY]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.CODE_FILE]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null},[i.PWo.CODE_COMPONENT]:{[i.Ocq.LOCAL]:null,[i.Ocq.SUBSCRIBED]:null}};class b{syncAddedOrChangedAssets(e,r,n){if(r===i.Ocq.SUBSCRIBED){let a=g[e]?.[i.Ocq.SUBSCRIBED];if(!a){(0,c.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[i.Ocq.SUBSCRIBED]?.({changed:n.map(a).filter(e=>null!==e)})}else if(r===i.Ocq.LOCAL){let a=g[e]?.[i.Ocq.LOCAL];if(!a){(0,c.x1)("design-systems",`No parser found for ${e} and ${r}`);return}y[e]?.[i.Ocq.LOCAL]?.({changed:n.map(a).filter(e=>null!==e)})}else(0,c.x1)("design-systems",`Invalid subscription status for AssetMirror: ${r}`)}syncRemovedAssets(e,r,n){y[e]?.[r]?.({removed:n})}resetMirrorCache(){for(let e of Object.values(y))for(let r of Object.values(e))r?.({reset:!0})}}function v(){new b}},960884:(e,r,n)=>{n.d(r,{Z:()=>o});var i=n(694687),a=n(529928);let o=(0,a.bt)(({currentUserOrgId:e,orgById:r})=>(0,i.td)(e,r));(0,a.bt)(({orgUsersByOrgId:e})=>e)},106757:(e,r,n)=>{n.d(r,{UQ:()=>l,kS:()=>s,p9:()=>o});var i=n(716034),a=n(529928);let o=(0,a.bt)(e=>e.user),s=(0,i.eU)(e=>e(o)?.id);(0,i.eU)(e=>e(o)?.created_at),(0,a.bt)(e=>e.userStateLoaded);let l=(0,a.bt)(e=>e.isStarterUser)},752353:(e,r,n)=>{n.d(r,{gh:()=>N});var i=n(922827),a=n(298455),o=n(776250),s=n(38329),l=n(966712),c=n(716034),d=n(418956),u=n(553716),m=n(47506),p=n(939863),h=n(392592),_=n(988022),g=n(149992),f=n(978757),E=n(809444),y=n(434507),b=n(198868);let v=(0,c.eU)(new Set),I=(0,c.eU)(new Set),T=(0,c.eU)("");function S(e){let r=e=>{let n=0;for(let i of e)"FRAME"===i.type&&(n+=1),"children"in i&&(n+=r(i.children));return n};return r(e)}function w(e,r=1){let n=JSON.parse(JSON.stringify(e));return n.length<1?n:r<1&&"opacity"in n[0]?n.map(e=>({...e,opacity:e.opacity*r})):n}function A(e,r,n,i=!0,a=1){if(Array.isArray(e[n])&&Array.isArray(r[n])){let o=i?[...w(r[n]),...w(e[n],a)]:[...w(e[n],a),...w(r[n])];r[n]=o}}class C{async autoSegmentNodesByRegion(e,r){let n=(0,b.D)(),i=[],a=[];for(let n of e){let{rootNode:e,newNodes:o}=await this.autoSegmentNodes(n,r);e&&a.push(e),o.forEach(e=>i.push(e))}d.zl.set(v,new Set(i.map(({id:e})=>e))),d.zl.set(I,new Set(a.map(({id:e})=>e))),(0,g.z)(a,i);let o=n.currentPage;return o.selection=o.selection.concat(a),!0}async autoSegmentNodes(e,r){let n;let c=(0,b.D)();try{var d;let u=performance.now(),m=(await Promise.all(e.map(e=>c.getNodeByIdAsync(e)))).filter(e=>e),_=S(m),g=function(e){let r=[...e],n=[];for(;r.length;){let e=r.pop();if(!e)break;n.push(e.id),"children"in e&&e.children.forEach(e=>{r.push(e)})}return n}(m),b=(n=await (0,f.N7)(m,c,r))?S([n]):0;if(d=b-_,(0,s.D.dispatch)(h.F.enqueue({type:"msal-frames-created",message:(0,p.t)("fullscreen.properties_panel.stack_panel.msal_crated_frames_count",{count:d})})),(0,l.kc)().ce_al_track_msal_duration&&(0,o.sx)("autolayout_auto_segment_selection",{duration_ms:performance.now()-u,selectionSizeBeforeMSAL:_,selectionSizeAfterMSAL:b},{forwardToDatadog:!0}),n){!function e(r,n){if(!r||"FRAME"!==r.type)return;for(let i of r.children)e(i,n);let a=i.Qa7.getBackgroundNodeCandidatesByGUID(r.id);if(0===a.backgroundNodes.length)return;let o=n.getNodeById(a.backgroundNodes[0]);if(r.resize(o.width,o.height),o.absoluteBoundingBox&&r.absoluteBoundingBox){let e=o.absoluteBoundingBox.x-r.absoluteBoundingBox.x,n=o.absoluteBoundingBox.y-r.absoluteBoundingBox.y;r.x+=e,r.y+=n}for(let e of a.backgroundNodes){let i=n.getNodeById(e);i&&function(e,r,n=!0,i="transferAndMaybeRemoveBackgroundNode",a=!0){if((0,E.Rm)(`${i}`,`Merging background node (${e.id}) into: ${r}`,3),e.removed)return;let o=1;a&&"opacity"in e&&(o=e.opacity),A(e,r,"fills",n,o),A(e,r,"effects",n,o),A(e,r,"strokes",n,o),"strokes"in e&&e.strokes.length>0&&(r.strokeWeight=e.strokeWeight,r.strokeJoin=e.strokeJoin,r.dashPattern=e.dashPattern,r.strokeAlign=e.strokeAlign,"strokeCap"in e&&!r.strokeCap&&(r.strokeCap=e.strokeCap),"strokeMiterLimit"in e&&(r.strokeMiterLimit=e.strokeMiterLimit),"strokeLeftWeight"in e&&"number"==typeof e.strokeLeftWeight&&0===r.strokeLeftWeight&&(r.strokeLeftWeight=e.strokeLeftWeight),"strokeRightWeight"in e&&"number"==typeof e.strokeRightWeight&&0===r.strokeRightWeight&&(r.strokeRightWeight=e.strokeRightWeight),"strokeTopWeight"in e&&"number"==typeof e.strokeTopWeight&&0===r.strokeTopWeight&&(r.strokeTopWeight=e.strokeTopWeight),"strokeBottomWeight"in e&&"number"==typeof e.strokeBottomWeight&&0===r.strokeBottomWeight&&(r.strokeBottomWeight=e.strokeBottomWeight)),"cornerRadius"in e&&"number"==typeof e.cornerRadius&&0===r.cornerRadius&&(r.cornerRadius=e.cornerRadius),"topLeftRadius"in e&&"number"==typeof e.topLeftRadius&&0===r.topLeftRadius&&(r.topLeftRadius=e.topLeftRadius),"bottomLeftRadius"in e&&"number"==typeof e.bottomLeftRadius&&0===r.bottomLeftRadius&&(r.bottomLeftRadius=e.bottomLeftRadius),"topRightRadius"in e&&"number"==typeof e.topRightRadius&&0===r.topRightRadius&&(r.topRightRadius=e.topRightRadius),"bottomRightRadius"in e&&"number"==typeof e.bottomRightRadius&&0===r.bottomRightRadius&&(r.bottomRightRadius=e.bottomRightRadius),"ELLIPSE"===e.type&&(0,y.n4)(e.width,e.height)&&(r.cornerRadius=r.width),function(e,r){if(!e||!e.boundVariables)return;let n=e.boundVariables;for(let e of["width","height","paddingLeft","paddingRight","paddingTop","paddingBottom","topLeftRadius","topRightRadius","bottomLeftRadius","bottomRightRadius","minWidth","maxWidth","minHeight","maxHeight","counterAxisSpacing","strokeWeight","strokeTopWeight","strokeRightWeight","strokeBottomWeight","strokeLeftWeight"]){let i=n[e];i&&r.setBoundVariable(e,i.id)}}(e,r),a&&e.remove()}(i,r,!0,"recursivelyMergeBackgroundFillToTLF")}}(n,c);let e=(0,a.UN)().get(n.id);return!e||e.isTopLevelFrame()||e.isState||(n.name="Frame"),{rootNode:n,newNodes:function e(r,n){let i=[];return n.has(r.id)||i.push(r),"children"in r&&r.children.forEach(r=>{let a=e(r,n);i=i.concat(a)}),i}(n,new Set(g))}}}catch(n){(0,u.x1)("auto-layout","Error running AAL segmentation",{e:n});let r=s.D.dispatch;"GraphResolutionError"===n.name?((0,_.ds)("msal_error_try_again",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(h.F.enqueue({type:"msal-failure-graph-resolution",message:(0,p.t)("fullscreen.visual_bell.try_again_msal")}))):(c.commitUndo(),c.triggerUndo(),(0,_.ds)("msal_error_couldnt_suggest_auto_layout",s.D.getState().openFile?.key,s.D.getState(),{error:n,nodeIds:e}),r(h.F.enqueue({type:"msal-failure-other",message:(0,p.t)("fullscreen.visual_bell.could_not_suggest_auto_layout")})))}return{rootNode:null,newNodes:[]}}async makeResponsive2(e){let r=(0,b.D)();for(let n of e)for(let e of n)await (0,f.cx)(e,r);return r.commitUndo(),!0}shouldRunSimpleStackDetection(e){let r=(0,b.D)();return(0,f.sg)(e,r)}runMakeResponsiveHeuristics(e){let r=(0,b.D)();(0,f.cx)(e,r)}trackShouldShowMSALOnboarding(e){d.zl.set(T,e),(0,m.YQ)({id:"would-have-used-msal-onboarding-event"})}async destroyAllAutoLayout(e){let r=(0,b.D)(),n=await (0,f.vk)(e,r),i=s.D.dispatch,a=n>0?(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast",{numAutoLayoutsRemoved:n}):(0,p.t)("fullscreen_actions.destroy-all-auto-layout-result-visual-bell-toast-zero");return i(h.F.enqueue({message:a})),(0,o.sx)("action_destroy_all_auto_layout",{numAutoLayoutsRemoved:n}),r.commitUndo(),!0}}function N(){new C}},81766:(e,r,n)=>{n.d(r,{z4:()=>d});var i=n(922827),a=n(38329),o=n(553716),s=n(788811),l=n(63104);class c{readyToAcceptAutosaveChanges(){return!!s.ZG()?.session()?.readyToAcceptChanges()}hasOngoingCommitTask(){return!!s.ZG()?.session()?.hasOngoingCommitTask()}async enqueueAutosaveCommit(e,r,n,a,o,c){let d=(0,s.ZG)();if(!d)return(0,l.W6)("AutosaveManager should not be null when committing"),!0;let u=d.session();return!u||(await u.enqueueAutosaveCommit({changes:e,commitPolicy:r,fileVersion:n,fileKey:a,newSessionID:i.h3O.currentSessionID(),numberOfUncleanRegisters:o,reason:c}),!0)}createAutosaveManager(e){let r=a.D.getState().user;if(!r){(0,o.Lo)("Autosave","Not creating manager for logged out user");return}(0,s.mu)(e,r.id)}destroyAutosaveManager(){(0,s.t)()}isConnected(){return s.ZG()?.managerState==="connected"}}function d(){new c}},536650:(e,r,n)=>{n.d(r,{$W:()=>l});var i=n(966712),a=n(239737),o=n(415936);class s{isEnabled(){return(0,a.W7)()&&!!(0,i.kc)().aip_magnolia}async getSuggestion(e){return{text:await (0,o.O)(e)}}}function l(){new s}},356390:(e,r,n)=>{let i,a,o;n.d(r,{$q:()=>h,BI:()=>a,XT:()=>c,Y5:()=>i,Zi:()=>p,_W:()=>u,fT:()=>m,lQ:()=>s,s$:()=>l,uF:()=>d});let s=new Promise(e=>{o=e});function l(e){i=e,window._fullscreen_=i,o()}function c(e){a=e}function d(e){u=e}let u=null;function m(e){}function p(e){}function h(e){}},160402:(e,r,n)=>{n.d(r,{Iu:()=>s}),n(922827);let i=new Set;class a{nodeBoundsChanged(){for(let e of i)e()}}let o=null;function s(){return o||(o=new a),o}},478556:(e,r,n)=>{n.d(r,{n:()=>a}),n(961034),n(922827),n(632001);var i=n(173292);function a(e){(0,i.o)()}n(456363),n(939863),n(392592),n(772167),n(776726),n(179536)},541524:(e,r,n)=>{n.d(r,{C4:()=>g,D2:()=>m,Er:()=>u,FJ:()=>l,H3:()=>d,cB:()=>_,cu:()=>p,fG:()=>E,fb:()=>h,gU:()=>c,l7:()=>y,yH:()=>f});var i=n(55253),a=n(908048),o=n(922827),s=n(96328);let l="\x3c!--(figma)",c="(/figma)--\x3e",d='<span data-buffer="'+l,u=c+'"></span>',m="\x3c!--(figmeta)",p="(/figmeta)--\x3e",h='<span data-metadata="'+m,_=p+'"></span>';function g(e,r,n){let i='<meta charset="utf-8">'+d+(0,a.lF)(r)+u+(0,s.hX)(n);try{e.setData("text/html",i)}catch(e){console.warn("DataTransfer failed in clipboard event")}}function f(e){let r;try{r=e.getData("text/html")}catch(e){return console.warn("DataTransfer failed in clipboard event"),null}return function(e){let r=e.indexOf(l),n=e.indexOf(c);return r>=0&&n>=0&&r<n?(0,a.D4)(e.slice(r+l.length,n)):null}(r)}function E(e,r){let n=i.w.encodeMessage({type:"STYLE",pasteFileKey:null!=e?e:void 0,sessionID:0,ackID:0,nodeChanges:[{guid:{sessionID:0,localID:0},phase:"CREATED",...r}]});return o.glU.encodeClipboardData(n)}function y(e){return i.w.decodeMessage(o.glU.decodeClipboardData(e))}},399512:(e,r,n)=>{n.d(r,{l:()=>d});var i=n(922827),a=n(38329),o=n(356390),s=n(239671),l=n(665723),c=n(585575);let d=new class{constructor(){this.canvasColorProfile=i.RYP.SRGB}getDefaultDocumentColorProfile(){if((a.D?.getState()?.selectedView).editorType===s.nT.Whiteboard)return i.ywP.SRGB;switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return i.ywP.SRGB;case c.M.DISPLAY_P3:return i.ywP.DISPLAY_P3}}getCanvasColorProfile(){return this.canvasColorProfile}setCanvasColorProfile(e){this.canvasColorProfile=e,i.glU?.updateImageColorspaceConversions(),o.Y5?.triggerAction("redraw-canvas",{})}getUserColorProfile(){switch((0,l.YN)().colorProfilePreference){case c.M.DEFAULT:case c.M.SRGB:return i.RYP.SRGB;case c.M.DISPLAY_P3:return i.RYP.DISPLAY_P3}}}},601978:(e,r,n)=>{n.d(r,{Eh:()=>c,dM:()=>u,dX:()=>m});var i=n(966712),a=n(553716),o=n(460187),s=(e=>(e[e.Unknown=0]="Unknown",e[e.No=1]="No",e[e.Yes=2]="Yes",e))(s||{});let l=0;function c(e,r){if("srgb"===r)return e.getContext("2d");{let n=(0,o.p3)();return e.getContext("2d",{colorSpace:n?"srgb":r})}}let d=document.createElement("canvas").getContext("2d",{colorSpace:"srgb",willReadFrequently:!0})?.canvas;function u({canvas:e,canvasWidth:r,canvasHeight:n,renderCanvas:c,value:u,colorSpace:m,initializeCanvasColorSpace:p=!1}){if(p&&e.getContext("2d",{colorSpace:m}),((0,i.kc)().ee_color_management_force_canvas||(0,o.p3)())&&1!==l){if(d){d.width=r,d.height=n,c(d,u);let m=d.getContext("2d"),p=e.getContext("2d");if(m&&p)try{!function(e,r){if(e.canvas.width!==r.canvas.width||e.canvas.height!==r.canvas.height)throw Error("source ctx and target ctx dimensions don't match");if("getContextAttributes"in e&&"srgb"!==e.getContextAttributes().colorSpace)throw Error("source ctx is not srgb");if("getContextAttributes"in r&&"display-p3"!==r.getContextAttributes().colorSpace&&!((0,i.kc)().ee_color_management_force_canvas&&"srgb"===r.getContextAttributes().colorSpace))throw Error("target ctx is not display-p3");let[n,a]=[r.canvas.width,r.canvas.height],o=e.getImageData(0,0,n,a),s=new ImageData(o.data,o.width,o.height,{colorSpace:"getContextAttributes"in e?r.getContextAttributes().colorSpace:"srgb"});r.clearRect(0,0,n,a),r.putImageData(s,0,0)}(m,p),0===l&&(l=2)}catch{(0,a.Lo)("color management","polyfill failed",{ee_color_management_force_canvas:(0,i.kc)().ee_color_management_force_canvas,shouldUseCssColorLevel4Polyfill:(0,o.p3)(),is2dCanvasPolyfillSupportedByBrowser:s[l]}),c(e,u),l=1}}}else c(e,u)}function m(e){switch(e){case"fullscreen":case"mobile-viewer":return document.querySelector("#fullscreen-root canvas");case"prototype":return document.querySelector("#viewerContainer canvas");case"mirror":return document.querySelector("#mobileAppView canvas")}}},794950:(e,r,n)=>{n.d(r,{q:()=>c});var i=n(922827),a=n(944381),o=n(966712),s=n(553716),l=n(399512);let c=new class{constructor(){this.onFrameCb=null,this.switchWebglColorSpace=(e,r,n)=>{let a=e.drawingBufferColorSpace;switch(r){case i.RYP.SRGB:if("srgb"===a)return;(0,o.kc)().viewer_p3_fix&&("mirror"===n||"prototype"===n)?(l.l.setCanvasColorProfile(i.RYP.SRGB),e.drawingBufferColorSpace="srgb"):(e.drawingBufferColorSpace="srgb",l.l.setCanvasColorProfile(i.RYP.SRGB));break;case i.RYP.DISPLAY_P3:if("display-p3"===a)return;(0,o.kc)().viewer_p3_fix&&("mirror"===n||"prototype"===n)?(l.l.setCanvasColorProfile(i.RYP.DISPLAY_P3),e.drawingBufferColorSpace="display-p3"):(e.drawingBufferColorSpace="display-p3",l.l.setCanvasColorProfile(i.RYP.DISPLAY_P3));break;default:(0,s.x1)("color management","unsupported color space",{targetColorSpace:r})}}}onFrame(){let e=!1;i.fZb&&(e=i.fZb?.startProfile(a.B3,100)),this.onFrameCb&&this.onFrameCb(),this.onFrameCb=null,i.fZb&&e&&i.fZb?.stopProfile(a.B3,100)}queueSwitchWebglColorSpace(e,r,n){"mirror"===n?this.switchWebglColorSpace(e,r,n):this.onFrameCb=()=>{this.switchWebglColorSpace(e,r,n)}}}},285381:(e,r,n)=>{n.d(r,{ZH:()=>S,il:()=>L,Ep:()=>I,R6:()=>T});var i=n(411855),a=n(922827),o=n(966712),s=n(418956),l=n(15220),c=n(192437),d=n(356390),u=n(399512),m=n(488983),p=n(100197),h=n(601978),_=n(436576),g=n(162620),f=n(794950);let E=(0,n(716034).eU)(!1);function y(e){let[r,n]=(0,s.fp)(E);return i.useEffect(()=>{r&&n(!1)},[r,n]),r?null:i.createElement(i.Fragment,null,e.children)}var b=n(665723);let v=i.createContext({canvasColorProfile:a.RYP.SRGB,documentColorProfile:a.ywP.LEGACY,documentExportColorProfile:a.RYP.SRGB});function I(){return i.useContext(v).canvasColorProfile}function T(){return i.useContext(v).documentColorProfile}let S=v.Consumer;function w(e){let{children:r,colorManagementStateJs:n}=e,o=(0,p.ut)(n?.documentColorProfile(),a.ywP.LEGACY),s=(0,_.H)(o),{colorProfilePreference:l}=(0,b.jK)(),c=i.useMemo(()=>({documentColorProfile:o,documentExportColorProfile:(0,g.j)(o,l),canvasColorProfile:s}),[l,o,s]);return i.createElement(v.Provider,{value:c},r)}function A(e){return(0,b.jK)(),i.createElement(w,{colorManagementStateJs:a.H4l},e.children)}function C({target:e,viewer:r}){let[n,s]=i.useState(null),c=i.useCallback(()=>{if(o.kc()?.fullscreen_use_threaded_rendering)return!1;if(n)return!0;if(a.PcT?.usingWebGPU())return!1;let r=(0,h.dX)(e);if(r){let n=null;switch(e){case"fullscreen":case"mobile-viewer":n=(0,l.ap)()?r.getContext("webgl2"):r.getContext("webgl");break;case"prototype":case"mirror":n=(0,l.WQ)()?r.getContext("webgl2"):r.getContext("webgl")}return s(n),!0}return!1},[e,n]);i.useEffect(()=>{if(!c())switch(e){case"fullscreen":case"mobile-viewer":d.Y5.onReady().then(()=>{c()});break;case"prototype":case"mirror":r&&r.on("documentIsLoaded",()=>{c()})}},[c,e,r]);let m=I();return i.useEffect(()=>{if(a.PcT?.usingWebGPU()){u.l.setCanvasColorProfile(m);return}n&&f.q.queueSwitchWebglColorSpace(n,m,e)},[m,e,n]),null}function N({viewer:e,target:r}){return i.createElement(c.tH,{boundaryKey:"color-management",fallback:c.H4.DEFAULT_FULL_PAGE,hasCustomWASMBuild:m.y4},i.createElement(s.An,null,i.createElement(y,null,i.createElement(A,null,i.createElement(C,{target:r,viewer:e})))))}function L({viewer:e}){return i.createElement(N,{target:"prototype",viewer:e})}},460187:(e,r,n)=>{n.d(r,{Av:()=>v,Pv:()=>p,VG:()=>l,p3:()=>_,tK:()=>f});var i=n(411855),a=n(922827),o=n(517333),s=n(479296);function l(e){switch(e){case a.RYP.SRGB:return"srgb";case a.RYP.DISPLAY_P3:return"display-p3";default:throw Error(`unrecognized color profile: ${e}`)}}let c=e=>{try{if(e===a.RYP.SRGB)return!0;let r=document.createElement("canvas").getContext("webgl");if(!r)throw Error("failed to create webgl canvas context to determine support");if(!("drawingBufferColorSpace"in r))throw Error("webgl context does not contain drawingBufferColorSpace attribute");let n=l(e);if(r.drawingBufferColorSpace=n,r.drawingBufferColorSpace!==n)throw Error(`webgl context does not support color space: ${n}`);return!0}catch(e){return!1}},d=new Map,u=(0,s.n)(e=>{if(d.has(e))return d.get(e);let r=c(e);return d.set(e,r),r}),m=(0,s.n)(e=>{try{if(e===a.RYP.SRGB)return!0;let r=document.createElement("canvas"),n=l(e),i=r.getContext("2d",{colorSpace:n});if(i){if("getContextAttributes"in i){if(i.getContextAttributes().colorSpace!==n)throw Error("2d canvas context does not match the desired color space")}else throw Error("2d canvas context does not support getContextAttributes")}else throw Error("failed to create 2d canvas context to determine support");if(_()){let e=new ImageData(new Uint8ClampedArray([0,0,0,0]),1,1,{colorSpace:n});if(!("colorSpace"in e)||e.colorSpace!==n)throw Error(`image does not support color space: ${n}`)}return!0}catch(e){return!1}}),p=()=>"undefined"!=typeof CSS&&"function"==typeof CSS.supports&&CSS.supports("color","color(display-p3 1 1 1)"),h=()=>window.matchMedia("(color-gamut: p3)").matches,_=()=>!p();async function g(){if(!o.eD)return;let e=await o.eD.getActiveNSScreens();if(e){for(let r of e)if(!r.isCurrentWindow&&r.canRepresentDisplayGamutP3)return r.localizedName}}function f(e){switch(e.status){case"SupportedNatively":case"SupportedWithPolyfill":return!0;case"MonitorNotSupported":case"ClientNotSupported":return!1}}let E=()=>{let[e,r]=i.useState();return i.useEffect(()=>{g().then(r)},[]),e},y=()=>{let[e,r]=i.useState(h());return i.useEffect(()=>{let e=setInterval(()=>{r(h())},5e3);return()=>{clearInterval(e)}},[]),e},b=()=>o.eD&&"unmanaged"===o.eD.getColorSpace();function v(){let e=i.useMemo(()=>u(a.RYP.DISPLAY_P3),[]),r=i.useMemo(()=>m(a.RYP.DISPLAY_P3),[]),n=i.useMemo(()=>p(),[]),s=b(),l=E(),c=y();return e&&r?s?{status:"ClientNotSupported",diagnostics:{client:"desktop-app",shouldRestartDesktopAppInManagedColorSpace:!0}}:c?n?{status:"SupportedNatively",diagnostics:null}:{status:"SupportedWithPolyfill",diagnostics:null}:{status:"MonitorNotSupported",diagnostics:{alternativeMonitorName:l}}:{status:"ClientNotSupported",diagnostics:{client:o.eD?"desktop-app":"browser"}}}},665723:(e,r,n)=>{n.d(r,{YN:()=>y,eu:()=>g,hP:()=>E,it:()=>v,jK:()=>b}),n(411855);var i=n(922827),a=n(167249),o=n(38329),s=n(716034),l=n(418956),c=n(684107),d=n(456772),u=n(27087),m=n(988022),p=n(99506),h=n(585575);let _={colorProfilePreference:p.E9.DEFAULT,id:""},g=(0,a.N)("USER_UPDATE_COLOR_PROFILE"),f=(0,s.eU)(e=>{let r=e((0,c.Zx)({})),n=_.colorProfilePreference;"loading"===r.status&&void 0!==o.D&&o.D?.getState()?.user?.color_profile?n=o.D.getState().user?.color_profile:r.data?.userColorProfilePreference?.colorProfilePreference&&(n=r.data?.userColorProfilePreference?.colorProfilePreference);let i={colorProfilePreference:function(e){switch(e){case p.E9.DEFAULT:return h.M.DEFAULT;case p.E9.SRGB:return h.M.SRGB;case"display-p3":case p.E9.DISPLAY_P3:return h.M.DISPLAY_P3}}(n),id:r.data?.userColorProfilePreference?.id??_.id};return void 0!==o.D&&o.D?.getState()?.user?.color_profile!==i.colorProfilePreference&&o.D.dispatch(g({color_profile:i.colorProfilePreference})),i});function E(e){switch(e){case h.M.DEFAULT:case h.M.SRGB:return i.RYP.SRGB;case h.M.DISPLAY_P3:return i.RYP.DISPLAY_P3}}function y(){return l.zl.get(f)}function b(){return(0,l.md)(f)}function v({colorProfilePreference:e,id:r,eventName:n="user_manual_change",additionalDataToLog:i}){if(e===_.colorProfilePreference)return;!function(e){let r=o.D.getState();(0,m.uE)("color_profile_preference",r,{userColorProfile:e.userColorProfilePreference.colorProfilePreference,userColorProfileId:e.userColorProfilePreference.id,eventName:e.eventName,...e.additionalDataToLog??{}})}({userColorProfilePreference:{colorProfilePreference:e,id:r},eventName:n,additionalDataToLog:i});let a=u.Ay.put("/api/user",{color_profile:e});if(r)d.WB()?.optimisticallyUpdate({UserColorProfilePreference:{[r]:{colorProfilePreference:e}}},a);else{let r=o.D.getState().user?.id;if(!r)return;d.WB()?.optimisticallyCreate({UserColorProfilePreference:{"optimistic-id":{colorProfilePreference:e,userId:r,createdAt:new Date,updatedAt:new Date}}},a)}}},496201:(e,r,n)=>{n.d(r,{YL:()=>s});var i=n(136880),a=n(138392);class o{calculateColorWithRampValue(e,r){let n=(0,a.jA)((0,i.aH)(e),r);return n?(0,i.oU)(n):null}calculateColorWithRelativeAdjustment(e,r){let n=(0,a.Hd)((0,i.aH)(e),r);return n?(0,i.oU)(n):null}getRampValueForColor(e){return(0,a.Wn)((0,i.aH)(e))}}function s(){new o}},498083:(e,r,n)=>{let i;n.d(r,{AU:()=>c,T6:()=>m,lS:()=>i,on:()=>l});var a=n(38329),o=n(975350);let s={mousedown:new Set,mousemove:new Set,mouseup:new Set};function l(e,r){s[e].add(r)}function c(e,r){s[e].delete(r)}function d(e){return(r,n)=>{for(let i of s[e])i({x:r,y:n})}}function u(e,r,n){a.D.dispatch(o.vV({anchorPosition:{x:r,y:n}})),a.D.dispatch(o.CX({stablePath:e}))}function m(){i={handleMouseDown:d("mousedown"),handleMouseMove:d("mousemove"),handleMouseUp:d("mouseup"),createNewCommentAtPosition:u}}},968783:(e,r,n)=>{n.d(r,{vk:()=>m});var i=n(3360),a=n(83783),o=n(980820),s=n(402603),l=n(279145),c=n(378762);class d{constructor(){this.indexer={}}next(e){return null==this.indexer[e]?this.indexer[e]=0:this.indexer[e]++,this.indexer[e]}}let u={PNG:".png",JPEG:".jpg",SVG:".svg",PDF:".pdf"};function m(e,r,n,i){let a,o;if("CANVAS"===e)""===(a=n).trim()&&(a="Untitled"),o=a=a.replace(/\//g,"_");else{(a=r).endsWith("/")&&(a=a.substr(0,a.length-1));let e=a.lastIndexOf("/");for(let r of(o=-1!==e?a.substr(e+1,a.length):a,i)){let e=r.substr(0,r.lastIndexOf("/"));e.length>0&&(a=e+"/"+a)}}return{name:a,title:o}}function p(e){return("FRAME"===e.type||"SYMBOL"===e.type)&&!e.resizeToFit}(0,o.nF)(e=>{let r=e.getState(),n=[],o=[],h=r.mirror,_=h.sceneGraph,g=e=>{(null!=e.exportSettings&&e.exportSettings.length>0||p(e))&&n.push(e)};if((0,i.Im)(h.sceneGraphSelection)){let e=_.get((0,l.Nf)(h.appModel));e&&((0,a.hV)(e,g),(0,a.hV)(e,e=>{let r=e.parentNode;p(e)&&null!=r&&"CANVAS"===r.type&&o.push({nodeID:e.guid,name:e.name})}))}else(0,c.y2)(_,h.sceneGraphSelection,g),(0,c.YI)(_,h.sceneGraphSelection,e=>{p(e)&&o.push({nodeID:e.guid,name:e.name})});let f="Untitled";r.openFile&&(f=r.openFile.name);let E=[],y=new d,b=new d;for(let e of n){let r=(0,a.DS)(h.sceneGraph,e.guid).filter(e=>!e.visible);if(!e.visible||r.length>0)continue;let n=e.exportSettings;if(null!=n)for(let r of n){if(null==r.imageType)continue;let n=(0,a.DS)(h.sceneGraph,e.guid).map(e=>e.name),{name:i,title:o}=m(e.type,e.name,f,n),s=function(e,r,n,i){let a=`${e}-${r}-${n.imageType}-${n.suffix}`;return`${a}-${i.next(a)}`}(e.guid,i,r,b),{filename:l,isDuplicate:c}=function(e,r,n,i){let a;let o=!1;""===e.trim()&&(e="Untitled"),a=`${e}${r}${n}`;let s=i.next(`${a}`);return s>0&&(a=`${e}${r}-${s}${n}`,o=!0),{filename:a,isDuplicate:o}}(i,r.suffix||"",u[r.imageType],y);E.push({itemID:s,nodeID:e.guid,title:o,filename:l,exportSetting:r,warning:c?"Name duplicated":void 0,warningTooltip:c?`Renamed to ${l}`:void 0})}}e.dispatch(s.j({items:E,frames:o}))})},927871:(e,r,n)=>{n.d(r,{pH:()=>d});var i=n(776250),a=n(966712),o=n(27087),s=n(99506),l=n(755515);class c{constructor(e){this.store=e}trackComponentInstanceInsertion(e){let r=this.state.openFile?.key,n=!!this.state.user;if(null==r||!n||this.state.openFile?.editorType===s._Y.SLIDES||(0,a.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile())return;let i=[];for(let r in e){let n={component_key:r,count:e[r]};i.push(n)}try{o.Ay.post(`/api/component/${r}/insertions`,{insertions:i})}catch(e){}}trackComponentInstanceDetachment(e){let r=this.state.openFile,n=r?.key,l=!!this.state.user;if(null==r||null==n||!l)return;let c=r.editorType;if(c===s._Y.SLIDES||(0,a.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){i.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:n,componentKey:e,editorType:c||void 0});return}try{o.Ay.post(`/api/component/${n}/detachment/${e}`)}catch(e){}}trackComponentAction(e,r,n){let o=this.state.openFile,c=o?.key,d=!!this.state.user;if(null==o||null==c||!d)return;let u=o.editorType;if(u===s._Y.SLIDES||(0,a.kc)().dsa_restrict_actions_to_design&&!this.isInDesignFile()){e===l.Wc.DETACHMENT&&i.az.trackDefinedEvent("design_systems_analytics.non_design_component_detached",{fileKey:c,componentKey:Object.keys(r??{})[0],editorType:u||void 0});return}let m=Object.entries(r).map(([e,r])=>({key:e,count:r}));try{l.PT.recordComponentAction({action:e,action_source:n,fileKey:c,components:m})}catch(e){}}trackStyleAction(e,r,n){if(!(0,a.kc)().dsa_styles_variables_data_collection)return;let i=!!this.state.user;if(!this.isInDesignFile()||!i)return;let o=[];for(let[e,n]of Object.entries(r))o.push({key:e,count:n});if(0!==o.length)try{l.PT.recordStylesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,styles:o})}catch(e){}}trackVariableAction(e,r,n){if(!(0,a.kc)().dsa_styles_variables_data_collection)return;let i=!!this.state.user;if(!this.isInDesignFile()||!i)return;let o=[];for(let[e,n]of Object.entries(r))o.push({key:e,count:n});if(0!==o.length)try{l.PT.recordVariablesAction({action:e,action_source:n,fileKey:this.state.openFile?.key,variables:o})}catch(e){}}isInDesignFile(){let e=this.state.openFile,r=e?.key;return null!=e&&null!=r&&e.editorType===s._Y.DESIGN}get state(){if(!this.store)throw Error("Calling _state without a valid store");return this.store.getState()}}function d(e){new c(e)}},559040:(e,r,n)=>{n.d(r,{zs:()=>a}),n(30637),n(392592);class i{constructor(e){this.store=e}showErrorBellInLocalDev(e){}onMissingEditScope(){this.showErrorBellInLocalDev("No edit scope is active")}onGuardrailViolation(){this.showErrorBellInLocalDev("Edit scope guardrail violated")}}function a(e){new i(e)}},350428:(e,r,n)=>{n.d(r,{A0:()=>b,Mc:()=>E,R4:()=>y});var i=n(411855),a=n(786013),o=n(922827),s=n(298455),l=n(966712),c=n(418956),d=n(335682),u=n(239737),m=n(222478),p=n(709731),h=n(30075),_=n(384775),g=n(41398),f=n(895083);function E(e,r=!1){let n=[];r?e.map(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&n.push(r)}):e.forEach(e=>{let r=(0,s.UN)().get(e);r&&r.visible&&0!==r.opacity&&function e(r,n){if(r.visible&&0!==r.opacity)for(let i of(n.push(r),r.childrenNodes??[]))e(i,n)}(r,n)});let i=n.length>f.NB,a=[];return n.map(e=>{if((0,f.jX)(e,!1))return a.push(e.guid)}),{detectedUnnamedLayers:a.length>0,exceedingLayerLimit:i,renamableNodeGuids:a}}function y(e){let{detectedUnnamedLayers:r,exceedingLayerLimit:n,renamableNodeGuids:a}=E(e);r&&!n&&(0,_.$I)({moduleToOpen:{type:"custom",module:i.createElement(g.A,{source:o.uQ6.READY_FOR_DEV,numRenamableNodesForHandoff:a.length}),beforeModuleOpen:()=>{(0,p.B3)(m.JT.AUTO_RENAME_LAYERS)},name:h.Sn.RENAME_LAYERS_TOAST},trackingData:{source:"ready_for_dev_auto_rename_layers"}})}function b(e){if(!(0,u.W7)())return!1;let r=c.zl.get(d.yV);if(!r?.canEdit||r.editorType!==a._YF.DESIGN)return!1;switch(e){case o.uQ6.READY_FOR_DEV:return!!(0,l.kc)().aip_rename_layers_ready_for_dev;case o.uQ6.EXPORT_FRAME:case o.uQ6.EXPORT_PICKER:return!!(0,l.kc)().ai_prod_rename_layers_dev_export;case o.uQ6.CREATE_COMPONENT:case o.uQ6.CREATE_FRAME:case o.uQ6.DRAW_FRAME_AROUND_NODES:case o.uQ6.STACK_SELECTION:return!!(0,l.kc)().ai_prod_rename_layers_moments;case o.uQ6.LAYERS_PANEL_ACTION_ROW:return!!(0,l.kc)().aip_lpe;default:return!1}}},617453:(e,r,n)=>{n.d(r,{EU:()=>b,Ku:()=>_,RU:()=>y,UK:()=>h,UX:()=>f,W_:()=>S,dP:()=>g,lK:()=>I,qw:()=>E,sT:()=>v});var i=n(922827),a=n(966712),o=n(939863),s=n(287010),l=n(396697),c=n(100197),d=n(507956),u=n(949632),m=n(567245),p=n(652051);function h(){return i.Ez5.editorPreferences()}function _(){let e=(0,d.ks)(),r=(0,c.J2)(h().colorFormat);return r===i.NVY.CSS&&e||r===i.NVY.UIColor&&!e?i.NVY.RGB:r}function g(){return(0,c.ut)(i.Ez5?.editorPreferences()?.sidebarSplitPosition,l.R.sidebarSplitPosition)}function f(){return(0,c.ut)(i.Ez5?.editorPreferences()?.devHandoffInspectSplitPosition,320)}function E(){return(0,c.ut)(i.Ez5?.editorPreferences()?.propertiesPanelSplitPosition,l.R.propertiesPanelSplitPosition)}function y(){return(0,c.ut)(i.Ez5?.editorPreferences().bigNudgeAmount,s._q)}function b(){return(0,c.ut)(i.Ez5?.editorPreferences().smallNudgeAmount,s.bA)}function v(){return{smallNudgeAmount:b(),bigNudgeAmount:y()}}function I(){return(0,c.ut)(i.Ez5?.editorPreferences().renderRulers,!1)}let T=[{getObservable:()=>h().activeCanvasPixelPreview,getMessage:e=>({message:e?(0,o.t)("visual_bell.pixel_preview_enabled",{scaling:(0,u.d)().activeCanvasRetinaMode.getCopy()?"2x":"1x"}):(0,o.t)("visual_bell.pixel_preview_disabled")})},{getObservable:()=>h().renderGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.render_grid_visible"):(0,o.t)("visual_bell.render_grid_hidden")})},{getObservable:()=>h().snapToPixelGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_pixel_grid_enabled"):(0,o.t)("visual_bell.snap_to_pixel_grid_disabled")})},{getObservable:()=>h().showMasks,getMessage:e=>({message:e?(0,o.t)("visual_bell.show_masks_visible"):(0,o.t)("visual_bell.show_masks_hidden")})},{getObservable:()=>(0,a.kc)().figjam_snap_to_dot_grid_reset?h().snapToDotGridStagingReset:h().snapToDotGrid,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_dot_grid_enabled"):(0,o.t)("visual_bell.snap_to_dot_grid_disabled")})},{getObservable:()=>h().snapToGeometry,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_geometry_enabled"):(0,o.t)("visual_bell.snap_to_geometry_disabled")})},{getObservable:()=>h().snapToObjects,getMessage:e=>({message:e?(0,o.t)("visual_bell.snap_to_objects_enabled"):(0,o.t)("visual_bell.snap_to_objects_disabled")})},{getObservable:()=>h().showFrameGrids,getMessage:e=>(0,m.jH)()?((0,m.Gk)(),{message:(0,o.t)("visual_bell.show_frame_grids_visible"),button:{text:(0,o.t)("visual_bell.show_frame_grids_hide_button"),action:e=>{e.stopPropagation(),i.Ez5.editorPreferences().showFrameGrids.set(!1)}}}):{message:e?(0,o.t)("visual_bell.show_frame_grids_visible"):(0,o.t)("visual_bell.show_frame_grids_hidden")}}];function S(){(0,p.Mo)(T)}},326069:(e,r,n)=>{n.d(r,{XR:()=>c});var i=n(377750),a=n(418956),o=n(531827),s=n(883211);class l{convertEmojiNameToString(e){let r=e.toLocaleLowerCase(),n=i.dN.searchSynchronized(r).filter(e=>e.id===r);return 0===n.length?"":function(e){let r=i.il.getDefaultSkin()||1;return String.fromCodePoint(...(e.skins[r-1]?e.skins[r-1].unified:e.skins[0].unified).split("-").map(e=>parseInt(e,16)))}(n[0])}setEmojiTypeaheadQuery(e){let r=e&&e.length>1?(0,o.oQ)(e):null;a.zl.set(s.ph,r)}clearEmojiTypeaheadQuery(){a.zl.set(s.ph,null)}isShowingEmojiTypeaheadResults(){let e=a.zl.get(s.ph);return!!e?.emojis?.length}setEmojiTypeaheadImageSet(e){a.zl.set(s.KG,e)}setEmojiTypeaheadTargetRect(e,r,n){a.zl.set(s.kh,{x:e,y:r,height:n,width:0})}}function c(){new l}},812821:(e,r,n)=>{let i;n.d(r,{CB:()=>i,eY:()=>m});var a=n(922827),o=n(38329),s=n(145519),l=n(460289),c=n(239671),d=n(301922);class u{constructor(){this._wheelActivatedAtMs=-1,this._triggerActiveWheelButtonListeners=[]}startChat(e,r,n){(0,d.q)().then(i=>{i||o.D.dispatch(s.F6({position:{x:e,y:r},source:n}))})}closeWheel(){o.D.dispatch(s.Ho())}handleShortcutPressWithType({viewportX:e,viewportY:r,source:n,openedViaHover:i,wheelType:d}){let u=o.D.getState();if("fullscreen"!==u.selectedView.view||u.selectedView.editorType!==c.nT.Whiteboard||this._wheelActivatedAtMs>0)return;this._wheelActivatedAtMs=window.performance.now();let m=u.multiplayerEmoji;"WHEEL"===m.type?(e=m.viewportX,r=m.viewportY,i=i??m.openedViaHover):i||a.glU.triggerAction("set-tool-default",null),o.D.dispatch(s.sp({wheelType:d&&("STAMP"===d?"STAMP2":"REACTION1"),isReadonly:u.mirror.appModel.isReadOnly,isJoinedToActiveVotingSession:(0,l.gR)(u),viewportX:e,viewportY:r,source:n,openedViaHover:i}))}handleShortcutPress(e,r,n){this.handleShortcutPressWithType({viewportX:e,viewportY:r,source:n})}addTriggerActiveWheelButtonListener(e){this._triggerActiveWheelButtonListeners.push(e)}removeTriggerActiveWheelButtonListener(e){let r=this._triggerActiveWheelButtonListeners.indexOf(e);r>=0&&this._triggerActiveWheelButtonListeners.splice(r,1)}handleShortcutRelease(e,r){if(this._wheelActivatedAtMs<0)return;let n=window.performance.now()-this._wheelActivatedAtMs;if(this._wheelActivatedAtMs=-1,n>300)for(let n of this._triggerActiveWheelButtonListeners)n({x:e,y:r})}updateEmojiWheelPosition(e,r){let n=o.D.getState();"fullscreen"===n.selectedView.view&&n.selectedView.editorType===c.nT.Whiteboard&&o.D.dispatch(s.sm({viewportX:e,viewportY:r}))}}function m(){i=new u}},283942:(e,r,n)=>{n.d(r,{BI:()=>f,W0:()=>m,f7:()=>E,jr:()=>g,nB:()=>_});var i=n(922827),a=n(498750),o=n(588169),s=n(860601),l=n(563706),c=n(946689),d=n(551608);n(801161);var u=n(356390),m=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(m||{}),p=(e=>(e[e.YES=0]="YES",e[e.NO=1]="NO",e))(p||{});let h=s.lQ;function _(e){h=e}function g(e,r=0,n=1){return!!function(e,r=0,n=1){return!!(u.Y5&&u.Y5.isRootElementVisible())&&!f(e,r,n)}(e,r,n)&&E(e,!0)}function f(e,r=1,n=1){let i=e.keyCode,o=(0,a.Fo)(e);if(i===a.Uz.TAB&&(0,a.sC)(e,a.xH.SHIFT));else if(l.Ay.mac&&e.ctrlKey&&(i===a.Uz.A||i===a.Uz.B||i===a.Uz.D||i===a.Uz.E||i===a.Uz.F||i===a.Uz.H||i===a.Uz.K||i===a.Uz.L||i===a.Uz.N||i===a.Uz.O||i===a.Uz.P||i===a.Uz.T||i===a.Uz.V));else if(i===a.Uz.DELETE||i===a.Uz.BACKSPACE||i===a.Uz.NUMPAD_DELETE||i===a.Uz.SPACE||i===a.Uz.ENTER||i===a.Uz.HOME||i===a.Uz.END||i===a.Uz.PAGE_UP||i===a.Uz.PAGE_DOWN||i===a.Uz.A&&1===n);else if(o&&i===a.Uz.Z&&1===r);else if(o||e.ctrlKey)return!1;return!0}function E(e,r=!1){let n;if("keydown"===e.type)n=i.Bx4.KEY_PRESS,h();else{if("keyup"!==e.type)return console.error("Invalid event passed to forwardKeyboardEvent"),!1;n=i.Bx4.KEY_RELEASE}let s=(0,o.v7)(),l={type:n,which:e.which,modifierKeys:(0,a.sN)(e),isRepeat:e.repeat,code:e.code??e.nativeEvent?.code,shouldUseLayoutAndCode:s!==i.aTn.UNKNOWN,layout:s},c=i.glU.handleKeyboardShortcut(l);return c&&e.preventDefault(),c}(0,c.ny)(g),(0,d.n)(g)},718083:(e,r,n)=>{n.d(r,{jx:()=>a});class i{constructor(e){this._store=e}get _state(){if(!this._store)throw Error("Calling _state without a valid store");return this._store.getState()}isInOrg(){return!!this._state.currentUserOrgId}}function a(e){new i(e)}},457025:(e,r,n)=>{n.d(r,{U2:()=>l,mr:()=>o});var i=n(365514);let a=new i.b("action");function o(e){a.trigger("action",e)}let s=new i.b("action");function l(e,r){s.trigger("action",[e,r])}},544949:(e,r,n)=>{n.d(r,{f:()=>_});var i=n(980820),a=n(662275),o=n(974105),s=n(396226),l=n(681655),c=n(984968),d=n(300874),u=n(851363),m=n(830114),p=n(449731),h=n(836479);(0,i.nF)(e=>{if(!l.F)return;let r=e.getState(),n=(0,o.e9)(r),i=n&&n.team_id&&r.teams[n.team_id];!i||(0,c.rR)(i,{type:c.sK.ADD_DESIGN_FILE})||(0,c.rR)(i,{type:c.sK.ADD_FIGJAM_FILE})||(0,c.rR)(i,{type:c.sK.ADD_SLIDES_FILE})?e.dispatch(a.to({type:m.O})):e.dispatch(a.to({type:p.DV,data:{team:i,resource:d.vL.FILE,action:u.ZN.CREATE_FILE,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO,editorType:null}}))});let _=(0,i.nF)(e=>{l.F&&e.dispatch((0,h.u)({multiple:!1,accept:".sketch"}))})},769977:(e,r,n)=>{n.d(r,{Aq:()=>w,Ax:()=>l,Ay:()=>L,Bb:()=>v,E_:()=>h,Fx:()=>E,H0:()=>p,IM:()=>C,JT:()=>s,NY:()=>S,QU:()=>T,Re:()=>_,Ub:()=>d,Yc:()=>A,ZG:()=>N,_t:()=>u,bH:()=>y,co:()=>b,iL:()=>I,ju:()=>c,kO:()=>g,pA:()=>m,xe:()=>f});var i=n(298455),a=n(939863),o=n(113237);let s=[],l=8,c=436,d=36,u=524,m=4,p=24,h=24,_=6,g=18,f=12,E="#C4C4C4",y=4,b=[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:1},blur:3},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:3},blur:8},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.18},offset:{x:0,y:0},blur:.5}],v={fontFamily:"Inter",fontSize:14,fontWeight:400,lineHeight:24,letterSpacing:-.084,width:436},I=8*v.fontSize/14,T={fontFamily:"Roboto Mono",fontSize:11,fontWeight:400,lineHeight:24,width:c};class S{static copySummaryDataToClipboard(e,r){let n=w(e,r);navigator.clipboard.writeText(n)}}function w(e,r){let n="";return n+=`${C(r)}

`,e.forEach(e=>{switch("h2"===e.type&&(n+="\n"),e.type){case"p":case"h1":case"h2":default:n+=e.content+"\n";break;case"li":n+=`\u2022 ${e.content}
`}}),n+=`
${(0,a.t)("whiteboard.ai.summary.summary_footer_disclaimer")}`}function A(e){return e.endsWith("...")?N():e+"."}function C(e){let r=new Date,n=parseInt(e,10);return n?(r.setTime(n),(0,a.t)("whiteboard.ai.summary.summary_header_disclaimer",{summaryGenerationDate:r})):(0,a.t)("whiteboard.ai.summary.summary_header_disclaimer_no_date")}function N(){return(0,a.t)("whiteboard.ai_summary.loading_text")}function L(e,r,n){let a=r.length>0,s=n&&n.length>0;if(!a||s)return!1;let l=(0,i.UN)().get(e);return!!l&&(!function(e,r,n=!0){e.isAlive&&(e.setWidgetSyncedState("syncedState:ai-summary-items",JSON.stringify(r)),n&&o.x.renderFirstPartyWidget(e.widgetId,e.guid))}(l,function(e){let r=JSON.parse(e),n=[{type:"p",context:"tldr",content:r.summary}];return r.supporting_points.forEach(({header:e,two_to_five_supporting_points:r})=>{n.push({type:"h2",content:e,context:"main_theme"}),r.forEach(e=>{n.push({type:"li",content:e,context:"supporting_point"})})}),n}(r)),!0)}},128803:(e,r,n)=>{n.d(r,{HP:()=>g,Nd:()=>A});var i=n(922827),a=n(323762),o=n(38329),s=n(939863),l=n(677664),c=n(988022),d=n(974105),u=n(450225),m=n(476560),p=n(306133),h=n(616121);function _(e,r){let n=d.d1(o.D.getState())?.key??"";(0,c.ds)(e,n,o.D.getState(),{domain:null!=r?(0,u.vO)(r):"",linkRenderType:u.Ci.LINK_PREVIEW,userId:o.D.getState().user?.id})}var g=(e=>(e.OPEN="open",e.VERTICAL="vertical",e.HORIZONTAL="horizontal",e.CONVERT_TO_TEXT="convert_to_text",e))(g||{});let f=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M12 12H16V13H13V27H27V24H28V27V28H13H12V27V13V12ZM27.0001 13H26.9913L27.0001 13.0088V13ZM20.0001 13H26.2999L17.0251 22.2747L17.7323 22.9818L27.0001 13.714V20H28.0001V12.5V12H27.5001H20.0001V13Z" fill="white" fill-opacity="0.8"/>
</svg>
`,E=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17.7072 14L20.3536 16.6465L19.6465 17.3536L16.1465 13.8536L15.793 13.5L16.1465 13.1465L19.6465 9.64648L20.3536 10.3536L17.7072 13H21.5001C25.0762 13 28.0001 15.9239 28.0001 19.5C28.0001 21.3202 27.167 22.5686 26.3445 23.35C25.9353 23.7387 25.5272 24.0141 25.2208 24.1929C25.0671 24.2825 24.9377 24.3486 24.8448 24.393C24.7983 24.4153 24.7608 24.4322 24.7339 24.444C24.7204 24.4499 24.7095 24.4545 24.7014 24.4579L24.6914 24.462L24.688 24.4634L24.6868 24.4639L24.6862 24.4641C24.686 24.4642 24.6858 24.4643 24.5001 24C24.3144 23.5358 24.3142 23.5359 24.314 23.536L24.316 23.5351L24.3337 23.5275C24.3506 23.5201 24.3776 23.508 24.4131 23.491C24.4843 23.457 24.5893 23.4035 24.7169 23.3291C24.9729 23.1797 25.3148 22.9489 25.6557 22.625C26.3332 21.9814 27.0001 20.9799 27.0001 19.5C27.0001 16.4762 24.5239 14 21.5001 14H17.7072Z" fill="white" fill-opacity="0.8"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 20H12V21H16.5V29H17.5V21H22V20H17.5H16.5Z" fill="white" fill-opacity="0.8"/>
</svg>
`,y=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white"/>
</svg>
`,b=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M13 29V22H27V29H13ZM12 11C12 10.4477 12.4477 10 13 10H27C27.5523 10 28 10.4477 28 11V29C28 29.5523 27.5523 30 27 30H13C12.4477 30 12 29.5523 12 29V11Z" fill="white" fill-opacity="0.8"/>
</svg>
`,v=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<rect width="40" height="40" fill="#9747FF"/>
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white"/>
</svg>
`,I=`
<svg width="40" height="40" viewBox="0 0 40 40" fill="none" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M17 16H31V24H17V16ZM8 16C8 15.4477 8.44772 15 9 15H31C31.5523 15 32 15.4477 32 16V24C32 24.5523 31.5523 25 31 25H9C8.44772 25 8 24.5523 8 24V16Z" fill="white" fill-opacity="0.8"/>
</svg>
`,T=`
<svg width="16" height="16" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
<path fill-rule="evenodd" clip-rule="evenodd" d="M5.52518 13.6568L8.17683 11.0052L8.88394 11.7123L6.23229 14.3639C4.96308 15.6331 2.9053 15.6331 1.63609 14.3639C0.366889 13.0947 0.366889 11.0369 1.63609 9.76772L4.28774 7.11607L4.99485 7.82317L2.3432 10.4748C1.46452 11.3535 1.46452 12.7781 2.3432 13.6568C3.22188 14.5355 4.6465 14.5355 5.52518 13.6568ZM11.7124 8.88383L11.0053 8.17673L13.6569 5.52508C14.5356 4.6464 14.5356 3.22177 13.6569 2.34309C12.7782 1.46441 11.3536 1.46442 10.4749 2.34309L7.82328 4.99475L7.11617 4.28764L9.76782 1.63599C11.037 0.366784 13.0948 0.366784 14.364 1.63599C15.6332 2.90519 15.6332 4.96298 14.364 6.23218L11.7124 8.88383ZM6.26175 10.5043L10.5044 6.26164L9.73836 5.49561L5.49572 9.73825L6.26175 10.5043Z" fill="black" fill-opacity="0.5"/>
</svg>
`;function S(e,r){let n=(0,m.l)(r,e,"thumbnailImageHash"),[i]=e.useSyncedState("thumbnailImageWidth",null),[a]=e.useSyncedState("thumbnailImageHeight",null);return{thumbnailImageHash:n,thumbnailAspectRatio:i&&a?i/a:void 0}}function w(e,r){let{thumbnailImageHash:n}=S(e,r),[i]=e.useSyncedState("url",null),a=i?decodeURIComponent(i):"null",[o]=e.useSyncedState("title",null),[s]=e.useSyncedState("description",null),[l]=e.useSyncedState("provider",""),c=!!o,d=!!n,u=!!s;return{url:a,rawTitle:o,rawDescription:s,rawProvider:l,hasTitle:c,hasThumbnail:d,hasTitleOrDescription:c||u,hasUrlOnly:!(c||u||d),hasTitleXorDescription:c!==u,isTwitterLinkPreview:"Twitter"===l||"X (formerly Twitter)"===l}}function A({figma:e}){let{widget:r}=e,{Frame:n,AutoLayout:c,Text:d,SVG:g}=r;r.register(function(){let A=r.useWidgetId(),{url:C,hasTitle:N,hasThumbnail:L,hasTitleXorDescription:O,hasUrlOnly:R,hasTitleOrDescription:P}=w(r,e),{thumbnailImageHash:D,thumbnailAspectRatio:k}=S(r,e),M=(0,m.l)(e,r,"faviconImageHash"),F=480-(L?112:8)-32-16,[x,U]=r.useSyncedState("orientation",R?"horizontal":"vertical"),{title:B,description:V,fullUrlProvider:G}=function({figma:e,widget:r,titleFontSize:n,titleLineHeight:i,descriptionFontSizeWithTitle:a,descriptionFontSizeWithoutTitle:o,descriptionLineHeight:s,verticalTextWidth:l,horizontalTextWidth:c,faviconDimension:d,hasTitleXorDescription:u,orientation:m}){let{hasTitleOrDescription:h,isTwitterLinkPreview:_}=w(r,e),g=(0,p.H)(r,"title",{name:"Inter Medium",size:n,lineHeight:i},"vertical"===m?l:c,("vertical"===m?2:1)+(u?1:0)+(_?4:0),!1),f=(0,p.H)(r,"description",{name:"Inter",size:g?a:o,lineHeight:s},"vertical"===m?l:c,("vertical"===m?2:1)+(u?1:0),!1);return{title:g,description:f,fullUrlProvider:(0,p.H)(r,"url",{name:"Inter",size:n,lineHeight:i},("vertical"===m?l:c)-(d+8),1+(h?0:1),!0)}}({figma:e,widget:r,titleFontSize:16,titleLineHeight:22,descriptionFontSizeWithTitle:13,descriptionFontSizeWithoutTitle:14,descriptionLineHeight:20,verticalTextWidth:240,horizontalTextWidth:F,hasTitleXorDescription:O,faviconDimension:16,orientation:x}),H=P?(0,a.Js)(C):G,K=()=>{_(u.yc.OPEN_PREVIEW,C),o.D.dispatch((0,l.RK)({rawInput:C}))};r.usePropertyMenu([{itemType:"action",propertyName:"open",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.open_link"),icon:f},{itemType:"separator"},{itemType:"action",propertyName:"vertical",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_vertical"),icon:"vertical"===x?y:b},{itemType:"action",propertyName:"horizontal",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.display_horizontal"),icon:"horizontal"===x?v:I},{itemType:"separator"},{itemType:"action",propertyName:"convert_to_text",tooltip:(0,s.t)("whiteboard.embeds.inline_menu.change_back_to_text"),icon:E}],({propertyName:e})=>{switch(e){case"open":K();break;case"convert_to_text":_(u.yc.CONVERT_TO_TEXT,C),i.glU.replaceNodeWithText(A,C);break;case"vertical":_(u.yc.SWITCH_ORIENTATION_VERTICAL,C),U("vertical");break;case"horizontal":_(u.yc.SWITCH_ORIENTATION_HORIZONTAL,C),U("horizontal");break;default:console.error("Unhandled property name for LinkPreview widget: %s",e)}});let W={fontFamily:"Inter",horizontalAlignText:"left",verticalAlignText:"bottom",width:"fill-parent",fill:{type:"solid",color:{r:0,g:0,b:0,a:.8},blendMode:"normal"}},$=r=>{let i=r?e.widget.h(n,{name:"container-frame",width:16,height:16,fill:{type:"image",imageHash:r,scaleMode:"fill"},cornerRadius:3}):e.widget.h(g,{src:T});return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"start",verticalAlignItems:"start",padding:{left:0,right:0,top:P?0:3,bottom:0}},i)},Y=(r,i,a)=>e.widget.h(n,{name:"container-frame",width:r,height:i,fill:a?{type:"image",imageHash:a,scaleMode:"fill"}:h.De,effect:[{type:"inner-shadow",color:{r:0,g:0,b:0,a:.1},offset:"vertical"===x?{x:0,y:-1}:{x:-1,y:0},blur:0}],onClick:K}),z=r=>{if(r)return e.widget.h(d,{fontSize:16,fontWeight:500,lineHeight:22,...W},r)},j=(r,n)=>{if(n)return e.widget.h(d,{fontSize:r?13:14,lineHeight:20,fontWeight:400,...W,fill:{...W.fill,color:{r:0,g:0,b:0,a:r?.5:.8}}},n)},q=(r,n)=>e.widget.h(d,{fontSize:r?13:16,lineHeight:r?20:22,fontWeight:400,textDecoration:"underline",...W,fill:{...W.fill,color:{r:0,g:0,b:0,a:.5}},onClick:K},n);return"vertical"===x?function(...r){return e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"center",width:"hug-contents",height:"hug-contents",fill:h.Vm,cornerRadius:12,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6}]},...r)}(!L&&e.widget.h(n,{width:304,height:.01}),L&&Y(304,k?Math.max(Math.min(304/k,608),160):160,D),P&&((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:{left:24,right:24,bottom:0,top:r?16:24}},...n))(L,z(B),j(N,V)),((r,...n)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:r?"center":"start",horizontalAlignItems:"start",width:"fill-parent",spacing:8,padding:r?{left:24,right:24,top:8,bottom:24}:20},...n))(P,$(M),q(P,H))):"horizontal"===x?function(r,...n){return e.widget.h(c,{direction:"horizontal",horizontalAlignItems:"center",verticalAlignItems:"start",width:480,height:"hug-contents",fill:h.Vm,cornerRadius:12,spacing:r?16:0,stroke:{type:"solid",color:{r:0,g:0,b:0,a:.2},blendMode:"normal"},effect:[{type:"drop-shadow",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:2},blur:6},{type:"drop-shadow",color:{r:0,g:0,b:0,a:.08},offset:{x:0,y:0},blur:2}]},...n)}(L,!L&&e.widget.h(n,{width:.01,height:.01}),L&&Y(112,112,D),((r,...n)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"center",verticalAlignItems:"start",width:"fill-parent",height:"fill-parent",fill:h.Vm,spacing:r?4:8,padding:r?{left:0,right:0,bottom:16,top:16}:20},...n))(L,P&&((...r)=>e.widget.h(c,{direction:"vertical",horizontalAlignItems:"start",verticalAlignItems:"start",width:"fill-parent",height:"hug-contents",fill:h.Vm,spacing:4,padding:0},...r))(z(B),j(N,V)),((...r)=>e.widget.h(c,{name:"service-name-autolayout",direction:"horizontal",verticalAlignItems:P?"center":"start",horizontalAlignItems:"center",width:"fill-parent",spacing:8},...r))($(M),q(P,H)))):void 0})}},884656:(e,r,n)=>{n.d(r,{Z:()=>s}),n(922827),n(776250);var i=n(38329);n(966712);var a=n(153808),o=n(578730);let s={fetchFontFile:(e,r,n)=>(0,o.M1)({source:e,id:r,postscriptName:n,fileKey:a.hk()?.openFileKey()||null,teamId:null,orgId:null}),fetchFontFileWithoutPickerInfo(e,r,n){var s;let l=a.hk()?.openFileKey();return l?(0,o.co)(e,r,n,l,!(s=i.D.getState())||!s.openFile||!!s.openFile.parentOrgId):Promise.reject()}}},876840:(e,r,n)=>{n.d(r,{qb:()=>o});var i=n(630331);class a{onFrameDistributionTrackedEvent(e){i.jp(e)}}function o(){new a}},856107:(e,r,n)=>{n.d(r,{_v:()=>o,kJ:()=>s});var i=n(647899);let a=class e{logFeatureGateExposure(e,r){i.w$.logExposureForFeatureGate(e,r)}getDynamicConfigNumberAsRoundedInt(r,n,a){return Math.round(i.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString))}getExperimentNumberAsRoundedInt(r,n,a){return Math.round(i.w$.getExperimentNumber(r,n,a,e.SourceLoggingString))}getDynamicConfigNumberAsFloat(r,n,a){return i.w$.getDynamicConfigNumber(r,n,a,e.SourceLoggingString)}getExperimentNumberAsFloat(r,n,a){return i.w$.getExperimentNumber(r,n,a,e.SourceLoggingString)}getDynamicConfigString(r,n,a){return i.w$.getDynamicConfigString(r,n,a,e.SourceLoggingString)}getExperimentString(r,n,a){return i.w$.getExperimentString(r,n,a,e.SourceLoggingString)}getDynamicConfigBoolean(r,n,a){return i.w$.getDynamicConfigBoolean(r,n,a,e.SourceLoggingString)}getExperimentBoolean(r,n,a){return i.w$.getExperimentBoolean(r,n,a,e.SourceLoggingString)}};a.SourceLoggingString="fullscreen";let o=a;function s(){new o}},369870:(e,r,n)=>{n.d(r,{MP:()=>s,U1:()=>o,ck:()=>a,pb:()=>l});var i=n(966712);function a(){return i.Ay().frame_context?.type==="integration"}function o(){return a()&&"google-meet"===(0,i.Ay)().integration_host&&!!(0,i.Ay)().is_meet_hardware}function s(){return a()&&"zoom"===(0,i.Ay)().integration_host}class l{static isGoogleClassroomIntegration(){return a()&&"google-classroom"===(0,i.Ay)().integration_host}}},62098:(e,r,n)=>{n.d(r,{Yq:()=>s,u1:()=>l,zi:()=>c}),n(268853);var i=n(922827),a=(n(298455),n(776250),n(38329),n(966712),n(776621),n(553716),n(988022),n(627592));n(760640),n(855031);let o=null;function s(){return o?.bufferedAmount||0}function l(){if(o){let e=o.url;(function(e){if(null!==o){o.onopen=null,o.onmessage=null,o.onclose=null,o.onerror=null;try{o.close()}catch(e){}o=null,(0,a.II)(),i.cgc.disconnect(e)}})("breakMultiplayerWebsocketForTesting"),console.log(`breakMultiplayerWebsocketForTesting: disconnected from ${e}`)}}function c(e=!1){o||(i.h3O.reconnect(e),console.log(`unbreakMultiplayerWebsocketForTesting: reconnected to ${o?o.url:null}`))}},217071:(e,r,n)=>{n.d(r,{F:()=>s});var i=n(852438),a=n(47506);let o=new Set;function s(e,r,n){let s=function(e){let r=Object.keys(e);return 0===r.length?new Set:new Set(r)}(r),l=!(0,i.yZ)(s,o);(0,a.YQ)({id:"Selection Changed",properties:{...n,numSelectedTextNodes:n.numSelectedByType&&n.numSelectedByType.TEXT||0,didSelectedNodeIdsChange:l}}),o=s}},327736:(e,r,n)=>{n.d(r,{bJ:()=>l});var i=n(418956),a=n(779709),o=n(52610),s=n(869156);function l(){new c}class c{constructor(){this.developerRelatedLinksManager=new a.GK}submitDeveloperRelatedLinks(e){this.developerRelatedLinksManager.addLinks(e)}didGetNodeStatusChange(){(0,o.Q)()}isVariableAvailableInLibraryAsset(e){let r=i.zl.get(s.e3);return r?.status==="loaded"&&r.data.some(r=>r.node_id===e)}}},581880:(e,r,n)=>{n.d(r,{_I:()=>p,eE:()=>m});var i=n(922827),a=n(776250),o=n(517333),s=n(737947),l=n(286640),c=n(939863),d=n(392592);let u="hardware_acceleration_disabled_warning_shown";function m(){if(o.eD)return null;let e=i.CeL.getDeviceInfo();return e?e.vendor.includes("Google Inc.")&&e.renderer.includes("SwiftShader"):null}function p(e,r){if(null!==e){if(!e){l.x4&&l.x4.getItem(u)&&((0,a.sx)("Hardware Acceleration Turned On"),delete l.x4[u]);return}if(!l.x4||!l.x4.getItem(u)){let e=()=>{l.x4.setItem(u,"1")};(0,a.sx)("Hardware Acceleration Warning Bell"),r(d.F.enqueue({type:"hardware_acceleration_disabled_warning",message:(0,c.t)("hardware_acceleration_detector.message"),button:{text:(0,c.t)("hardware_acceleration_detector.learn_more"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/articles/360039828614-Configure-your-browser-for-Figma#Advanced","_blank"),r(d.F.dequeue({})),e(),(0,a.sx)("Hardware Acceleration Warning Clicked",{dismissed:!1})}},timeoutOverride:1/0,onDismiss:()=>{(0,a.sx)("Hardware Acceleration Warning Clicked",{dismissed:!0}),e()}}))}}}},114716:(e,r,n)=>{n.d(r,{g:()=>s});var i=n(411855),a=n(627472),o=n(356390);function s(){let[e,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(o.Y5.isReady()){r(!0);return}let e=!1;return o.Y5.onReady().then(()=>{e||r(!0)}),()=>{e=!0}},[r]),e}(0,a.t_)(()=>o.Y5.isReady()||o.Y5.onReady())},409430:(e,r,n)=>{n.d(r,{T:()=>a});var i=n(604978);async function a(e,r){if(e in r){let n=r[e];switch(n.type){case"bytes":return Promise.resolve(n.bytes);case"promise":return n.promise}}let n=(0,i.Nd)(e);r[e]={type:"promise",promise:n};let a=await n;return r[e]={type:"bytes",bytes:a},a}},604978:(e,r,n)=>{n.d(r,{B0:()=>U,DK:()=>k,Dl:()=>x,EC:()=>D,Nd:()=>M,d$:()=>g,w6:()=>F});var i=n(908048),a=n(922827),o=n(953723),s=n(323591),l=n(966712),c=n(563706),d=n(553716),u=n(27087),m=n(355992),p=n(94429),h=n(719867);let _=document.createElement("canvas"),g=4096,f=_.getContext("2d"),E=document.createElement("canvas"),y=function(){try{return E.getContext("2d",{colorSpace:"display-p3"})}catch{return null}}();async function b(e,r,n,i){let o=a.RYP.SRGB;if("image/png"===r){let r=(0,p.Ll)(e);if(e=r.withoutColorSpace,r.iccProfileRawData)try{o=(0,m.Y)(r.iccProfileRawData)}catch(e){}}let l=null;if("image/jpeg"===r){try{let r=(0,p.yy)(e);r&&(o=(0,m.Y)(r)??a.RYP.SRGB)}catch(e){}l=s.f.getOrientation(e),O&&(l=null)}let c=!1;"image/gif"===r&&(c=(0,p.fB)(e));let d=URL.createObjectURL(new Blob([e],{type:r}));try{let e=await F({url:d,height:null,width:null});return{...v(e,n,i,l,c),colorProfile:o}}finally{URL.revokeObjectURL(d)}}function v(e,r,n,i,a){let{width:o,height:l,originalWidth:c,originalHeight:d,isRotated:u}=function(e,r,n,i,a){let o=s.f.angleFromOrientation(a),l=s.f.orientationIsFlipped(a),c=e,d=r,u=e,m=r;if(90===o||270===o){let n=r;r=e,e=n,n=m,m=u,u=n}return n>0&&i>0&&(e>n&&(r=Math.round(r*n/e),e=n),r>i&&(e=Math.round(e*i/r),r=i),e=Math.max(1,e),r=Math.max(1,r)),_.width=e,_.height=r,f.translate(e/2,r/2),f.scale(e/u,r/m),l&&f.scale(-1,1),f.rotate(Math.PI/180*o),f.translate(-c/2,-d/2),{originalHeight:m,originalWidth:u,width:e,height:r,isRotated:0!==o}}(e.width,e.height,r,n,i);return f.drawImage(e,0,0),{width:o,height:l,originalWidth:c,originalHeight:d,isMultiFrameGIF:a,isRotated:u,bitmap:null,rgba:new Uint8Array(f.getImageData(0,0,o,l).data.buffer)}}function I(e){return Uint8Array.from(atob(e),e=>e.charCodeAt(0))}async function T(){let e="/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z";if(!L.works)return 16==(await F({url:`data:image/jpeg;base64,${e}`,height:null,width:null})).width;{let r=new Blob([I(e)],{type:"image/jpeg"});return 16==(await createImageBitmap(r)).width}}async function S(){if(!L.works)return!1;let e=document.createElement("canvas");e.width=16,e.height=8;let r=e.getContext("2d"),n=new Blob([Uint8Array.from(atob("/9j/4AAQSkZJRgABAgEASABIAAD/4QBiRXhpZgAATU0AKgAAAAgABQESAAMAAAABAAYAAAEaAAUAAAABAAAASgEbAAUAAAABAAAAUgEoAAMAAAABAAMAAAITAAMAAAABAAEAAAAAAAAAAAAcAAAAAQAAABwAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wAARCAAQAAgDAREAAhEBAxEB/8QASwABAQAAAAAAAAAAAAAAAAAAAAsQAQAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAARAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhEDEQA/AJ/4AP/Z"),e=>e.charCodeAt(0))],{type:"image/jpeg"});r.drawImage(await createImageBitmap(n),0,0);let i=r.getImageData(0,0,16,8);r.clearRect(0,0,e.width,e.height);let a=URL.createObjectURL(n),o=new Image;await new Promise(e=>{o.onload=e,o.src=a}),r.drawImage(await createImageBitmap(o),0,0);let s=r.getImageData(0,0,16,8);if(i.data.length!==s.data.length)return!1;for(var l=0;l<i.data.length;++l)if(i.data[l]!==s.data[l])return!1;return!0}async function w(e,r){if(!e)return!1;try{let i=await createImageBitmap(r),a=i.width,o=i.height,s=!1,l=e.getParameter(e.ACTIVE_TEXTURE);e.activeTexture(e.TEXTURE0);let c=e.getParameter(e.FRAMEBUFFER_BINDING),d=e.getParameter(e.TEXTURE_BINDING_2D),u=null,m=null;try{if(m=e.createTexture(),e.bindTexture(e.TEXTURE_2D,m),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,i),e.bindTexture(e.TEXTURE_2D,null),u=e.createFramebuffer(),e.bindFramebuffer(e.FRAMEBUFFER,u),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,m,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,null),e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE){var n=new Uint8Array(4*a*o);e.readPixels(0,0,a,o,e.RGBA,e.UNSIGNED_BYTE,n),255===n[0]&&(s=!0)}}catch{}return e.bindFramebuffer(e.FRAMEBUFFER,c),e.bindTexture(e.TEXTURE_2D,d),e.deleteTexture(m),e.deleteFramebuffer(u),e.activeTexture(l),s}catch{return!1}}async function A(){O=await T(),c.Ay.webkit&&await S()}async function C(e){let r=new Blob([(0,i.D4)("iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQBAMAAAAlsQiEAAAALVBMVEX///////////////////////////////////////////////////////8AAACgbBYXAAAAD3RSTlPx5NXDsJ2Ic19LOCgYDQAksqQSAAAAJklEQVQI12MAAQEGBQYDBgeGAIYEhgKGBoYJDAsYNjAcYHjAcAEAP7AGkQT7krEAAAAASUVORK5CYII=")],{type:"image/png"});try{try{return await createImageBitmap(r,{premultiplyAlpha:"none"}),{works:!0,allowsOptions:!0}}catch(n){return{works:await w(e,r),allowsOptions:!1}}}catch{return{works:!1,allowsOptions:!1}}}async function N(e){let r;r=await n.e(160).then(n.t.bind(n,60160,23));let i=await r.default({blob:new Blob([e],{type:"image/heic"}),toType:"image/png"}),a=Array.isArray(i)?i[0]:i;return e=new Uint8Array(await a.arrayBuffer())}let L={works:!1,allowsOptions:!1},O=!1,R=null,P=null,D={init(e){P=(async()=>{if(e===a.UF0.YES)L={works:!0,allowsOptions:!0};else{let e=(0,o.iL)().ctx;if(!e)throw Error("Cannot find GL context");L=await C(e)}await A()})()},reset(){null!==R&&R.forgetCallbacks()},encode(e,r,n,o,s,l,c=a.RYP.SRGB,d=!1){let u,m=_,p=f;c===a.RYP.DISPLAY_P3&&E&&y&&(m=E,p=y);let h=e*r*4,g=p.createImageData(e,r);l&&(n=function(e,r){let n=new Uint8Array(r);for(let i=0;i<r;i+=4){let r=e[i+3|0],a=255.999/r;n[i]=e[i]*a,n[i+1|0]=e[i+1|0]*a,n[i+2|0]=e[i+2|0]*a,n[i+3|0]=r}return n}(n,h)),d&&(n=function(e,r){let n=new Uint8Array(r);return e.forEach((r,i)=>{i%4==3?n[i]=255:n[i]=e[i]}),n}(n,h)),new Uint8Array(g.data.buffer).set(n),m.width=e,m.height=r,p.putImageData(g,0,0),u=o?m.toDataURL("image/jpeg",s):m.toDataURL();let b=";base64,";return(0,i.D4)(u.slice(u.indexOf(b)+b.length))},async decodeAsync(e,r,n,i,a){if(await P,!L.works)return await b(e,r,n,i);R??=new h.o,"image/heic"!==r||(0,l.kc)().heic_use_libheif||(e=await N(e),r="image/png");let o=null,{bitmap:d,isMultiFrameGIF:u,colorProfile:m}=await R.sendMessage({type:r,array:e,supportsCreateBitmapOptions:L.allowsOptions});if(!d)return console.warn("Something wrong in createImageBitmap thread.  Bitmap is null ... falling back to decode using image"),await b(e,r,n,i);let p=!1;"image/jpeg"===r&&(p=o!==s.a.ROTATE_0,null!==o&&o!==s.a.ROTATE_0&&O&&c.Ay.chrome&&0>c.Ay.compareVersions([c.Ay.version.toString(),"86"])&&(a=!1),O&&(o=null));let _=d.width,g=d.height;return a&&(null===o||o===s.a.ROTATE_0)&&(0===n||_<=n)&&(0===i||g<=i)?{width:_,height:g,originalWidth:_,originalHeight:g,isMultiFrameGIF:u,isRotated:p,bitmap:d,colorProfile:m}:{...v(d,n,i,o,u),colorProfile:m}},thumbnailSize(e,r){let n=Math.max(e,r),i=0;for(;n>512;)i++,n=Math.floor((n+1)/2);let a=D.dropMips(e,r,i);return{w:a[0],h:a[1],mipsToDrop:i}},dropMips(e,r,n){if(0===e||0===r)return(0,d.x1)("images","Width and height should not be zero"),[e,r];for(let i=0;i<n;++i)e=Math.floor((e+1)/2),r=Math.floor((r+1)/2);return[e,r]},scaleImageBitmap(e,r,n,i){_.width=r,_.height=n,f.translate(0,0),f.scale(1,1),f.rotate(0),f.drawImage(e,0,0,r,n);let a=_.toDataURL(i),o=a.indexOf(",");return I(a.slice(o+1))},async createCanvasAndDrawImage(e,r,n,i){let a,o;"undefined"!=typeof OffscreenCanvas?a=new OffscreenCanvas(e,r):a=x(e,r);let s=a.getContext("2d");if(!s)throw Error("Failed to get 2D context");return n(s),a instanceof OffscreenCanvas?o=await a.convertToBlob({type:i}):o=await new Promise((e,r)=>a.toBlob(n=>{n?e(n):r(Error("Failed to create blob from canvas"))},i)),{canvas:a,blob:o}},async generateThumbnail(e,r,n){if(e.bitmap){let{canvas:i,blob:a}=await this.createCanvasAndDrawImage(r,n,i=>{i.drawImage(e.bitmap,0,0,r,n)},e.mimeType),o=await a.arrayBuffer(),s=await createImageBitmap(i);return{compressedData:new Uint8Array(o),bitmap:s}}{let i=e.rgba;if(!i)throw Error("Failed to decode image");let a=new ImageData(new Uint8ClampedArray(i),e.width,e.height),{canvas:o}=await this.createCanvasAndDrawImage(e.width,e.height,i=>{i.putImageData(a,0,0),i.drawImage(i.canvas,0,0,e.width,e.height,0,0,r,n)},e.mimeType),s=o.getContext("2d");if(!s)throw Error("Failed to get context");let l=new Uint8Array(s.getImageData(0,0,r,n).data);return{compressedData:this.encode(r,n,l,"image/jpeg"===e.mimeType,60,!1),decompressedData:l}}}},k=128;async function M(e){return new Uint8Array((await u.Ay.crossOriginGet(e,void 0,{responseType:"arraybuffer",retryCount:3})).data)}function F(e){return new Promise((r,n)=>{let i=new Image;e.height&&(i.height=e.height),e.width&&(i.width=e.width),i.crossOrigin="";let a=Error();i.onerror=e=>{e.cause=a,n(e)},i.onload=()=>r(i),i.src=e.url})}function x(e,r){let n=document.createElement("canvas");return n.width=e,n.height=r,n}function U(e){return`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(e)))}`}},15859:(e,r,n)=>{n.d(r,{Jr:()=>P,UD:()=>D,xY:()=>O});var i=n(838516),a=n(268853),o=n(519558),s=n(922827),l=n(788922),c=n(776250),d=n(77909),u=n(966712),m=n(994190),p=n(776621),h=n(553716),_=n(27087),g=n(604978),f=n(356390);let E=new Uint8Array([171,75,84,88,32,50,48,187,13,10,26,10]).toString();var y=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(y||{});async function b(e,r,n,i){let a="figFile"===r.type?`/file/${r.fileKey}/image/batch`:`/community/file/${r.hubFileId}/image/batch`;try{let r=await _.Ay.post(a,{sha1s:e,max_size:n,needs_compressed_textures:i},{retryCount:1/0});if(200!==r.status||r.data.error)throw Error("api error while resolving images");return{s3_urls:r.data.meta.s3_urls,compressed_texture_s3_urls:r.data.meta.compressed_texture_s3_urls}}catch(r){throw console.warn(`Couldn't download image(s) with hashes ${e}`),r}}class v extends Error{constructor(e="IMAGE_MISSING"){super(e),Object.setPrototypeOf(this,v.prototype)}}class I extends Error{constructor(e="FILE_KEY_MISSING"){super(e),Object.setPrototypeOf(this,I.prototype)}}class T extends Error{constructor(e="IMAGE_EXPIRED"){super(e),Object.setPrototypeOf(this,T.prototype)}}var S=(e=>(e[e.AWAITING_SINATRA_LOOKUP=0]="AWAITING_SINATRA_LOOKUP",e[e.LOOKUP=1]="LOOKUP",e[e.AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP=2]="AWAITING_COMPRESSED_TEXTURE_AVAILABILITY_LOOKUP",e[e.LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY=3]="LOOKING_UPCOMPRESSED_TEXTURE_AVAILABILITY",e[e.UPLOADING=4]="UPLOADING",e[e.READY=5]="READY",e[e.MISSING=6]="MISSING",e[e.FAILED=7]="FAILED",e[e.PRESENT=8]="PRESENT",e))(S||{});let w=class e{constructor(e,r){this.hash=e,this._priority=r,this.compressedTextureS3Path=null,this.shouldDownloadCompressedTexture=null,this.retries=0,this.state=0,this._downloadPromise=null,this._imageIsReady=()=>{},this._readyPromise=new Promise(e=>{this._imageIsReady=e})}set priority(r){this._priority!==e.MAX_PRIORITY&&(this._priority=r)}get priority(){return this._priority}imageIsReady(){this._imageIsReady()}readyPromise(){return this._readyPromise}isExpired(){let e=null;try{if(!(e=new URL(this.s3Path).searchParams.get("Expires")))return!1;e=parseInt(e,10)}catch{return!1}return e<Date.now()/1e3}downloadFromS3(){if(!this.shouldDownloadCompressedTexture&&null==this.s3Path)throw Error("Called downloadFromS3 without s3Path");if(this.shouldDownloadCompressedTexture&&null==this.compressedTextureS3Path)throw Error("Called downloadFromS3 without compressedTextureS3Path when downloading compressed texture");return _.Ay.crossOriginGetAny(this.shouldDownloadCompressedTexture?this.compressedTextureS3Path:this.s3Path,null,{responseType:"arraybuffer"}).then(e=>e.data).catch(e=>{if(this.isExpired())throw new T;if(0!==e.status&&e.status<500){let r=this.s3Path?.includes("resize")?"Can't load image! Make sure Pixie service is running locally":"Image is missing from S3!";(0,h.x1)("image",r,{hash:this.hash,status:e.status}),(0,p.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Image missing from S3"))}throw e})}download(e){if(!this._downloadPromise){let e=this.downloadFromS3();e.finally(()=>{this._downloadPromise=null}).catch(e=>{}),this._downloadPromise=e}return this._downloadPromise}};w.MAX_PRIORITY=Number.MAX_SAFE_INTEGER;class A{constructor(){this.queue=[],this.byHash=new Map,this.needsSort=!1}get length(){return this.queue.length}ensureSorted(){this.needsSort&&(this.queue.sort((e,r)=>r.priority-e.priority),this.needsSort=!1)}numEligible(e){this.ensureSorted();let r=this.queue.findIndex(r=>r.priority<e);return r<0?this.queue.length:r}push(...e){for(let r of(this.queue.push(...e),e))this.byHash.set(r.hash,r);this.needsSort=!0}updatePriority(e,r){let n=this.byHash.get(e);return null!=n&&(n.priority=r,this.needsSort=!0,!0)}pop(e){if(this.ensureSorted(),0===this.queue.length||this.queue[0].priority<e)return null;let r=Date.now(),n=1/0;for(let e=0;e<this.queue.length;e++){let i=this.queue[e].retryTime;if(null==i||r>=i){let[r]=this.queue.splice(e,1);return this.byHash.delete(r.hash),{found:!0,image:r}}n=i<n?i:n}return{found:!1,retryDelay:n-r}}find(e){return this.byHash.get(e)??null}erase(e){let r=this.byHash.get(e);if(r){this.byHash.delete(e);let n=this.queue.findIndex(e=>e===r);n>=0&&this.queue.splice(n,1)}}debugString(){return this.queue.map(e=>`${e.hash}(${e.priority})`).join(",")}}function C(){return f.Y5.openFilePromise()}class N extends Error{constructor(e,r){super(e),this.lookupImages=r}}let L=class e{constructor(){this.pendingPasteRequests={},this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={},this.imagesNeedingDirectUpload=new Set,this.imageTimingLog=new Map,this.MAX_REQUESTS=3,this.SINATRA_BATCH_SIZE=100,this.verbose=(0,u.kc)().image_verbose,this.incomingImages=new Map,this.pendingLookupCallback=null,this.downloadQueue=new A,this.minPriority=0,this.downloadsPaused=!1,this.allImages=new Map,this.pendingDecodes=new Set,this.pendingDownloads=new Set,this.cancelDownloads=new Set,this.alreadyDownloaded=new Set,this.pendingUploads=new Set,this.uploadedImagesNeedingUrl=new Set,this.pendingImagesCallback=null,this.imageQueueEmpty=null,this.incomingImagesLookedUp=null,this.allImagesUploaded=null,this.progressCallbacks=[],this.imageMaxSize=void 0,this.compressedTextureLookupQueue=[],this.compressedTextureRetryCount=new Map,this.LOGGING_RATE=.1,this.flushPendingRecordImages=(0,i.s)(async()=>{let r=this.pendingImagesToRecord,n=this.pendingRecordImagesTasks,i=this.pendingImagesToRecordByLibraryKey,a=this.pendingRecordImagesTasksByLibraryKey,o=Object.keys(r),l=Object.keys(i),d=o.map(e=>({fileKey:e,type:"fileKey"})).concat(l.map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingImagesToRecord={},this.pendingRecordImagesTasks={},this.pendingImagesToRecordByLibraryKey={},this.pendingRecordImagesTasksByLibraryKey={};let u=await this.getEditingFileKey();d.forEach(async o=>{if("fileKey"===o.type&&u===o.fileKey){n[o.fileKey].resolve();return}if("fileKey"===o.type&&!o.fileKey){n[o.fileKey].reject("Invalid originFileKey");return}let l=1,d="fileKey"===o.type?r[o.fileKey]:i[o.libraryKey];for(;;){try{let r=await _.Ay.put(`/api/files/${u}`,{image_sha1s:d,image_origin_file_key:"fileKey"===o.type?o.fileKey:void 0,image_origin_library_key:"libraryKey"===o.type?o.libraryKey:void 0}),{success:i,failed:l}=e.parseFileUpdateResponseForImages(d,r);for(let e of(s.Bko.imagePermissionsCopied(i),l))this.markImageMissing(e);for(let e of(l.length>0&&(0,c.sx)("image_permission_copy_failed",{shas:l.join(",")}),d))delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():a[o.libraryKey].resolve();return}catch(e){if(e.status>=400&&e.status<500){for(let e of((0,m.Jj)(),(0,c.sx)("image_permission_copy_failed",{shas:d.join(",")}),d))this.markImageMissing(e),delete this.pendingPasteRequests[e];("fileKey"===o.type?n[o.fileKey]:a[o.libraryKey]).reject(`4xx error when pasting images ${e}`);return}}let r=1e3*l*Math.random();await new Promise(e=>setTimeout(e,r)),l=Math.min(2*l,64)}})},100)}static shouldUseCompressedTextures(){return e._shouldUseCompressedTextures}getEditingFileKey(){return f.Y5.openFileKeyPromise()}getOrCreateImageLogData(e){let r=this.imageTimingLog.get(e);return r||(r={},this.imageTimingLog.set(e,r)),r}recordImagesFromLibraryKey(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originLibraryKey specified");if(this.pendingImagesToRecordByLibraryKey[e]??=[],this.pendingImagesToRecordByLibraryKey[e].push(...r),!this.pendingRecordImagesTasksByLibraryKey[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordImagesTasksByLibraryKey[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasksByLibraryKey[e].promise;let n=this.pendingRecordImagesTasksByLibraryKey[e].promise;return this.flushPendingRecordImages(),n}recordImages(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingImagesToRecord[e]=this.pendingImagesToRecord[e]||[],this.pendingImagesToRecord[e].push(...r),!this.pendingRecordImagesTasks[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordImagesTasks[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordImagesTasks[e].promise;let n=this.pendingRecordImagesTasks[e].promise;return this.flushPendingRecordImages(),n}static parseFileUpdateResponseForImages(e,r){try{if(r?.data?.meta?.missing_shas){let n=new Set(r.data.meta.missing_shas);return{success:e.filter(e=>!n.has(e)),failed:Array.from(n)}}}catch{}return{success:e,failed:[]}}async resolveImageUrls(r){let n=await C(),i=await b(r,n,this.imageMaxSize,e.shouldUseCompressedTextures()),a=r.filter(e=>!(e in i.s3_urls));if(a.length>0){let r=await f.Y5.sourceFileKeyPromise();if(r){let n=await b(a,{type:"figFile",fileKey:r},void 0,e.shouldUseCompressedTextures());return{s3_urls:{...i.s3_urls,...n.s3_urls},compressed_texture_s3_urls:{...i.compressed_texture_s3_urls,...n.compressed_texture_s3_urls}}}}return{s3_urls:i.s3_urls,compressed_texture_s3_urls:i.compressed_texture_s3_urls}}queueImageForLookup(e){let r=e.hash;this.verbose&&(0,h.Lo)("image","incoming",{hash:r}),e.state=0,this.incomingImages.set(r,e),null==this.pendingLookupCallback&&(this.pendingLookupCallback=setTimeout(()=>{this.pendingLookupCallback=null,this.lookupImages().catch(e=>(0,p.$D)(a.e.SCENEGRAPH_AND_SYNC,e))},0))}setExternalSource(e,r){let n=new w(e,w.MAX_PRIORITY);n.s3Path=r,this.allImages.set(e,n),this.downloadQueue.push(n),this.imagesNeedingDirectUpload.add(e),this.maybeDownloadMoreImages()}triggerCompressedTextureAvailabilityLookup(e,r){let n=this.allImages.get(e);n&&2===n.state&&new Promise((e,n)=>{let i=this.compressedTextureLookupQueue.splice(0,this.SINATRA_BATCH_SIZE);if(0===i.length)return null;for(let e of i)this.markImageLookingUpCompressedTextureAvailability(e);try{_.Ay.post(`/file/${r}/compressed_texture_available/batch`,{sha1s:i}).then(r=>{e(r)}).catch(e=>{n(new N(e.message,i))})}catch(e){n(new N(e.message,i))}}).then(e=>{if(!e)return;let n=e.data.meta.results;for(let e of Object.keys(n))this.resolveCompressedTextureAvailabilityLookup(e,r,n[e])}).catch(e=>{for(let n of e.lookupImages)this.resolveCompressedTextureAvailabilityLookup(n,r,null)})}resolveCompressedTextureAvailabilityLookup(e,r,n){let i=this.allImages.get(e),a=this.compressedTextureRetryCount.get(e)||0;if("generating"===n&&a<20){let n=500*(1<<Math.min(a,4));this.compressedTextureLookupQueue.push(e),this.markImageNeedsCompressedTextureAvailabilityLookup(e),this.compressedTextureRetryCount.set(e,a+1),setTimeout(()=>this.enqueueImageToCheckCompressedTextureAvailability(e,r),n)}else{this.markImagePresent(e),this.downloadQueue.push(i);let r=this.getOrCreateImageLogData(e);switch(r.compressedTextureRetryCount=a,r.compressedTextureResult=n,n){case"generated":i.shouldDownloadCompressedTexture=!0;break;case"failed":case null:case"generating":this.compressedTextureRetryCount.delete(e),i.shouldDownloadCompressedTexture=!1}this.maybeDownloadMoreImages()}}enqueueImageToCheckCompressedTextureAvailability(e,r){setTimeout(()=>{this.triggerCompressedTextureAvailabilityLookup(e,r)},0)}setImageDownloadPriority(e,r){let n=this.getOrCreateImageLogData(e);if(n.downloadPriority=r,n.downloadPriorityTimestamp=performance.now(),!e){(0,h.xi)("setImageDownloadPriority","invalid hash");return}let i=this.allImages.get(e);if(null==i){i=new w(e,r),this.allImages.set(e,i),this.queueImageForLookup(i);return}4===i.state&&(0,h.x1)("image","Got download request for currently uploading image",{hash:e},{reportAsSentryError:!0}),i.priority=r,this.downloadQueue.updatePriority(e,r)&&this.maybeDownloadMoreImages()}setMinimumImagePriority(e){this.minPriority=e,this.maybeDownloadMoreImages()}pauseImageDownloads(){this.downloadsPaused=!0}resumeImageDownloads(){this.downloadsPaused=!1,this.maybeDownloadMoreImages()}maybeDownloadMoreImages(){for(;this.pendingDownloads.size<this.MAX_REQUESTS&&this.downloadQueue.length>0&&!this.downloadsPaused;){let r=this.downloadQueue.pop(this.minPriority);if(null==r)break;if(!r.found){let e=r.retryDelay;!Number.isFinite(e)||e<=0?(0,p.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("Logic error in download queue, cannot compute next retry")):setTimeout(()=>this.maybeDownloadMoreImages(),e);break}let n=r.image,i=this.getOrCreateImageLogData(n.hash);if(n.hash){this.verbose&&(0,h.Lo)("image","download start",{hash:n.hash,ok:!this.pendingDownloads.has(n.hash)});let e=performance.now();i.downloadStartedTimestamp=e,this.pendingDownloads.add(n.hash)}n.download(this.imageMaxSize).then(r=>{if(this.cancelDownloads.delete(n.hash))return;this.verbose&&((0,h.Lo)("image","download done",{hash:n.hash,ok:!this.alreadyDownloaded.has(n.hash)}),this.getOrCreateImageLogData(n.hash).downloadFinishedTimestamp=performance.now()),this.alreadyDownloaded.add(n.hash);let i=null;if(this.imagesNeedingDirectUpload.has(n.hash))s.Bko.imageDownloadedForPaste(n.hash,r),this.imagesNeedingDirectUpload.delete(n.hash);else{let a=r;if(e.shouldUseCompressedTextures()&&r.slice(0,12).toString()===E){let e=(0,l.LF4)(r);i={width:e.pixelWidth,height:e.pixelHeight},s.Bko.setCompressedTextureMetadata(n.hash,i),a=e.levels[0].levelData,this.clearImageDecodePending(n.hash,!0)}s.Bko.imageDownloaded(n.hash,a)}i||this.pendingDecodes.has(n.hash)||((0,h.xi)("ImageManager","missing pending decode after download",{hash:n.hash}),(0,p.$D)(a.e.SCENEGRAPH_AND_SYNC,Error("missing pending decode after image marked as downloaded")),n.imageIsReady())},e=>{if(this.pendingDecodes.delete(n.hash)&&this.maybeResolveImageQueueEmptyAndPendingImages(),this.cancelDownloads.delete(n.hash))return;if(e instanceof v)this.markImageMissing(n.hash);else if(e instanceof I)(0,p.$D)(a.e.SCENEGRAPH_AND_SYNC,e),this.markImageFailed(n.hash);else if(e instanceof T)this.queueImageForLookup(n);else{if(e instanceof _.Dr&&403===e.status){this.markImageFailed(n.hash);return}let r=5e3*(1<<Math.min(n.retries,4));r+=r*Math.random(),n.retries+=1,(429===e.status||503===e.status)&&(r*=4),n.retryTime=Date.now()+r,this.downloadQueue.push(n)}let r=this.getOrCreateImageLogData(n.hash),i=this.allImages.get(n.hash);i&&(r.decodedImageState=i.state),r.errorOccurredTimestamp=performance.now()}).finally(()=>{this.pendingDownloads.delete(n.hash),this.maybeDownloadMoreImages()})}this.pendingImagesCallback?.(this.pendingImages),this.maybeResolveImageQueueEmptyAndPendingImages()}forceDownloadImage(e){this.setImageDownloadPriority(e,w.MAX_PRIORITY)}setImageDecodePending(e){this.verbose&&(0,h.Lo)("image","decode start",{hash:e,ok:!this.pendingDecodes.has(e)}),this.getOrCreateImageLogData(e).downloadFinishedTimestamp=performance.now(),this.pendingDecodes.add(e)}getSignedUrls(e){let r=new Map;for(let n of e){let e=this.allImages.get(n);e&&e.s3Path&&r.set(n,e.s3Path)}return r}clearImageDecodePending(e,r){this.verbose&&(0,h.Lo)("image","decode done",{hash:e,ok:this.pendingDecodes.has(e)});let n=this.getOrCreateImageLogData(e);n.decodeFinishedTimestamp=performance.now(),this.pendingDecodes.delete(e)&&this.maybeResolveImageQueueEmptyAndPendingImages(),r?(this.markImageReady(e),n.decodedImageState=5):(this.markImageFailed(e),n.decodedImageState=7),(0,u.kc)().image_log_timing&&Math.random()<this.LOGGING_RATE&&(0,c.sx)("image_log_timing",{hash:e,...n})}markImagePresent(e){let r=this.allImages.get(e);r&&(r.state=8,s.Bko.imageIsPresent(e))}markImageMissing(e){let r=this.allImages.get(e);r&&(r.state=6,s.Bko.imageIsMissing(e),r.imageIsReady())}markImageFailed(e){let r=this.allImages.get(e);r&&(r.state=7,r.imageIsReady())}markImageReady(e){let r=this.allImages.get(e);r&&(r.state=5,r.imageIsReady())}markImageNeedsCompressedTextureAvailabilityLookup(e){let r=this.allImages.get(e);r&&(r.state=2,this.lookupCompressedTextureAvailabilities(e))}markImageLookingUpCompressedTextureAvailability(e){let r=this.allImages.get(e);r&&(r.state=3)}async lookupImages(){let r=[];for(let e of this.incomingImages.values())0===e.state&&(r.push(e),e.state=1,this.verbose&&(0,h.Lo)("image","lookup",{hash:e.hash}));try{for(;r.length>0;){let n=r.splice(0,this.SINATRA_BATCH_SIZE);for(let e of n){let r=this.pendingPasteRequests[e.hash];if(r)try{await r}catch(r){(0,h.x1)("lookupImages","pastePromise failed",{hash:e.hash})}}let i=await this.resolveImageUrls(n.map(e=>e.hash));for(let r of n){let n=i.s3_urls[r.hash],a=null;e.shouldUseCompressedTextures()&&(a=i.compressed_texture_s3_urls[r.hash]),n?(r.s3Path=n,a?(r.compressedTextureS3Path=a,this.compressedTextureLookupQueue.push(r.hash),this.markImageNeedsCompressedTextureAvailabilityLookup(r.hash),this.lookupCompressedTextureAvailabilities(r.hash)):(this.markImagePresent(r.hash),this.downloadQueue.push(r)),this.verbose&&(0,h.Lo)("image","enqueued-batch",{hash:r.hash})):(this.markImageMissing(r.hash),this.verbose&&(0,h.Lo)("image","missing",{hash:r.hash})),this.incomingImages.delete(r.hash)}}}finally{for(let e of r)this.incomingImages.delete(e.hash)&&(0,h.xi)("image","incoming fallback delete",{hash:e.hash});null!=this.incomingImagesLookedUp&&this.incomingImagesLookedUp.resolve()}e.shouldUseCompressedTextures()||this.maybeDownloadMoreImages()}lookupCompressedTextureAvailabilities(e){C().then(r=>{"figFile"===r.type&&this.enqueueImageToCheckCompressedTextureAvailability(e,r.fileKey)})}forgetImage(e){if(this.imagesNeedingDirectUpload.has(e))return;this.verbose&&(0,h.Lo)("image","forget",{hash:e}),this.incomingImages.delete(e),this.downloadQueue.erase(e),this.pendingDownloads.has(e)&&this.cancelDownloads.add(e),this.alreadyDownloaded.delete(e),this.pendingDecodes.delete(e),this.imageTimingLog.delete(e),this.maybeResolveImageQueueEmptyAndPendingImages(),this.maybeResolveImagesLookedUp();let r=this.allImages.get(e);r&&(this.allImages.delete(e),5!==r.state&&r.imageIsReady())}getNumEligibleForDownload(){return this.downloadQueue.numEligible(this.minPriority)}get pendingImages(){let e=this.getNumEligibleForDownload();return this.verbose&&(0,h.Lo)("image","pendingImages",{incoming:this.incomingImages.size,eligible:e,downloads:this.pendingDownloads.size,decode:this.pendingDecodes.size}),this.incomingImages.size+e+this.pendingDownloads.size+this.pendingDecodes.size}setPendingImagesCallback(e){this.pendingImagesCallback=e}imageQueueEmptyPromise(){if(!this.imageQueueEmpty){let e=performance.now();this.imageQueueEmpty=(0,d.v)(),this.verbose&&(0,h.Lo)("image","queue empty defer installed",{start:e}),this.imageQueueEmpty.promise.finally(()=>{this.imageQueueEmpty=null;let r=performance.now()-e;this.verbose?(0,h.Lo)("image","queue empty defer cleared",{start:e,elapsed:r}):r>1e4&&(0,h.xi)("image","queue empty finished after a long time",{start:e,elapsed:r})}),this.emptyQueueCheck(this.imageQueueEmpty,e,3e4)}let e=this.imageQueueEmpty.promise;return this.maybeResolveImageQueueEmptyAndPendingImages(),e}imageLookupPromise(){this.incomingImagesLookedUp||(this.incomingImagesLookedUp=(0,d.v)(),this.incomingImagesLookedUp.promise.finally(()=>{this.incomingImagesLookedUp=null}));let e=this.incomingImagesLookedUp.promise;return this.maybeResolveImagesLookedUp(),e}emptyQueueCheck(e,r,n){setTimeout(()=>{if(e===this.imageQueueEmpty){let i=Math.round(.001*(performance.now()-r));(0,h.xi)("image","queue empty is taking a long time",{elapsedSec:i,pending:this.pendingImages,downloads:this.pendingDownloads.size,decodes:this.pendingDecodes.size}),this.verbose&&(0,h.Lo)("image","slow",{downloads:this.pendingDownloads,decodes:this.pendingDecodes});let a=Math.min(2*n,9e5);this.emptyQueueCheck(e,r,a)}},n)}maybeResolveImageQueueEmptyAndPendingImages(){let e=this.pendingImages;for(let r of this.progressCallbacks)r(e);this.imageQueueEmpty&&0===e&&(this.verbose&&(0,h.Lo)("image","resolve queue empty!"),this.imageQueueEmpty.resolve(),this.progressCallbacks=[]),this.maybeResolveImagesLookedUp()}maybeResolveImagesLookedUp(){0===this.incomingImages.size&&this.incomingImagesLookedUp?.resolve()}unresolvedImagesUnder(e,r,n){let i=n??s.AlE.getMutableActiveDocument();return s.Bko.findImagesUnder(i,e,r).map(e=>this.allImages.get(e)).filter(e=>void 0!==e&&5!==e.state&&4!==e.state)}loadAllImagesUnder(e,r,n,i=null,a){return this.loadAllImages(e,r,n,i,!0,a)}waitForImagesUnder(e,r,n,i=null,a){return this.loadAllImages(e,r,n,i,!1,a)}async loadAllImages(e,r,n,i=null,a,o){let s=performance.now();this.verbose&&(0,h.Lo)("image","loadAllImagesUnder",{reason:n,guids:e,start:s}),e.includes("0:0")&&"playground.initialLoad"!==n&&(0,h.x1)("image","loadAllImagesUnder called with full document",{reason:n});let l=0,c=new Promise(n=>{let s=this.unresolvedImagesUnder(e,r,o);if(0===(l=s.length))n({totalImages:l});else{var c;let e=l;for(let r of(c=e,i&&i(c,l),s))a&&this.setImageDownloadPriority(r.hash,w.MAX_PRIORITY),r.readyPromise().finally(()=>{var r;r=--e,i&&i(r,l),0===e&&n({totalImages:l})})}});return await c}async loadImageByHash(e){this.verbose&&(0,h.Lo)("image","loadImageByHash",{hash:e});let r=this.allImages.get(e);if(r)switch(r.state){case 4:case 5:case 6:case 7:return}this.setImageDownloadPriority(e,w.MAX_PRIORITY),await this.imageQueueEmptyPromise()}setImageMaxSize(e){this.imageMaxSize=e}setShouldUseCompressedTextures(r){e._shouldUseCompressedTextures=r}markImageUploading(e){this.pendingUploads.add(e)}markImageUploaded(e){this.pendingUploads.has(e)||(0,h.xi)("image","markImageUploaded called for unknown image",{imageHash:e}),this.pendingUploads.delete(e),this.uploadedImagesNeedingUrl.add(e),this.maybeResolveImagesUploaded()}startUploadingImage(e,r,n,i){if(this.pendingUploads.has(i))return;this.pendingUploads.add(i);let a=new w(i,0);a.state=4,this.allImages.set(i,a);let o=`/api/upnode/image?purpose=canvas&sha1=${i}&fileKey=${e}`,l=0;_.Ay.post(o,r,{retryCount:1/0,headers:{..._.Ay.defaults.headers,"Content-Type":n},rawBody:!0,uploadEvents:{loadstart:()=>{a.retries=l,l+=1}}}).then(e=>{if(200!==e.status){(0,h.x1)("image","unexpected status code from image upload",{hash:i,status:e.status},{reportAsSentryError:!0});return}(0,h.Lo)("image","uploaded new image",{hash:i}),this.pendingUploads.delete(i),s.Bko.imageUploadFinished(i,s.d8m.SUCCESS),a.state=5,this.uploadedImagesNeedingUrl.add(i),this.maybeResolveImagesUploaded()},e=>{let r;415===e.status?((0,h.x1)("image","image upload failed, removing invalid image",{hash:i}),r=s.d8m.UNSUPPORTED_MEDIA):r=s.d8m.OTHER_FAILURE,this.pendingUploads.delete(i),s.Bko.imageUploadFinished(i,r),this.maybeResolveImagesUploaded()})}pendingUploadStats(){let e=new Set;for(let r of this.pendingUploads){let n=this.allImages.get(r);n&&n.retries>0&&e.add(r)}return[this.pendingUploads,e]}async maybeResolveImagesUploaded(){if(0===this.pendingUploads.size){let e=Array.from(this.uploadedImagesNeedingUrl);this.uploadedImagesNeedingUrl.clear();for(let r=0;r<e.length;r+=this.SINATRA_BATCH_SIZE){let n=e.slice(r,r+this.SINATRA_BATCH_SIZE),i=await this.resolveImageUrls(n);for(let e of n){let r=i.s3_urls[e];if(r){let n=this.allImages.get(e);if(n)n.s3Path=r;else{let n=new w(e,0);n.s3Path=r,n.state=5,this.allImages.set(e,n)}}}}this.allImagesUploaded?.resolve()}}imageUploadPromise(){this.allImagesUploaded||(this.allImagesUploaded=(0,d.v)(),this.allImagesUploaded.promise.finally(()=>{this.allImagesUploaded=null}));let e=this.allImagesUploaded.promise;return this.maybeResolveImagesUploaded(),e}logDebugInfo(e){for(let r of e){let e=this.allImages.get(r),n=new Set;for(let e of Object.values(this.pendingImagesToRecord))for(let r of e)n.add(r);(0,h.Lo)("ImageManager","Blocking image info",{hash:r,state:e?e.state:"NO IMAGE",inIncoming:r in this.incomingImages,inQueue:null!=this.downloadQueue.find(r),inPending:r in this.pendingDownloads,inFinished:r in this.alreadyDownloaded,inPendingRecord:r in n})}let[r,n]=this.pendingUploadStats(),i=Array.from(this.incomingImages.values()).map(e=>e.hash).join(","),a=Array.from(this.pendingDownloads).join(","),o=Array.from(this.alreadyDownloaded).join(","),s=this.downloadQueue.debugString(),l=Array.from(r).join(","),c=Array.from(n).join(",");(0,h.Lo)("ImageManager","ImageManager debug info",{incomingImages:i,downloadQueue:s,pendingDownloads:a,alreadyDownloaded:o,pendingUploads:l,uploadBackoffs:c,pendingImagesToRecord:this.pendingImagesToRecord})}getDebugState(){let e=s.Bko.getImageResourceDebugInfo(),r=new Map;return e.forEach(e=>{r.set(e.hash,{...e,tsState:this.allImages.get(e.hash)?.state})}),this.allImages.forEach((e,n)=>{r.has(n)||r.set(n,{hash:n,tsState:e.state})}),r}static includeOutsideContents(e){return e.some(e=>!1===e.contentsOnly)}};L._shouldUseCompressedTextures=!1;let O=L,R=new class{constructor(){this.imageManager=new O}copyImagePermissions(e,r){return this.imageManager.recordImages(e,r)}copyImagePermissionsFromLibraryKey(e,r){return this.imageManager.recordImagesFromLibraryKey(e,r)}setImageDownloadPriority(e,r){this.imageManager.setImageDownloadPriority(e,r)}forceDownloadImage(e){this.imageManager.forceDownloadImage(e)}setMinimumImagePriority(e){this.imageManager.setMinimumImagePriority(e)}forgetImage(e){this.imageManager.forgetImage(e)}setImageDecodePending(e){this.imageManager.setImageDecodePending(e)}clearImageDecodePending(e,r){this.imageManager.clearImageDecodePending(e,r)}async downloadEmoji(e){return(await _.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"})).data}markImageUploading(e){this.imageManager.markImageUploading(e)}markImageUploaded(e){this.imageManager.markImageUploaded(e)}startUploadingImage(e,r,n,i){this.imageManager.startUploadingImage(e,r,n,i)}pendingUploadStats(){return this.imageManager.pendingUploadStats()}logDebugInfo(e){this.imageManager.logDebugInfo(e)}pauseImageDownloads(){this.imageManager.pauseImageDownloads()}resumeImageDownloads(){this.imageManager.resumeImageDownloads()}getSignedUrls(e){return this.imageManager.getSignedUrls(e)}getImageHostDomain(){return window.location.hostname}setExternalSource(e,r){this.imageManager.setExternalSource(e,r)}staticAssetWithPath(e){return(0,u.CZ)(e)}};function P(){return R.imageManager}async function D(e,r,n){if(!s.Bko.imageTypeDecodeSupported(r))throw Error(`Image type ${r} is not supported and cannot be decoded`);let i=await g.EC.decodeAsync(e,r,g.d$,g.d$,(0,u.kc)().image_decode_bitmap_ts_api??!1),a=await crypto.subtle.digest("SHA-1",e),o={width:i.width,height:i.height,compressedData:e,hash:new Uint8Array(a),bitmap:i.bitmap?i.bitmap:void 0,mimeType:r,rgba:i.rgba?i.rgba:new Uint8Array,name:n},l=g.EC.thumbnailSize(i.width,i.height),c=await g.EC.generateThumbnail(o,l.w,l.h),d=await crypto.subtle.digest("SHA-1",c.compressedData);return{fullResolution:o,thumbnail:{width:l.w,height:l.h,compressedData:c.compressedData,hash:new Uint8Array(d),bitmap:c.bitmap,mimeType:r,rgba:c.decompressedData,name:n}}}async function k(e,r){let n=!!O.includeOutsideContents(r);await P().loadAllImagesUnder([n?e.containingCanvas||"-1:-1":e.guid],s.MoD.NON_ANIMATED_ONLY,"plugins.loadImagesAndExport")}(0,o.c)(k)},855418:(e,r,n)=>{n.d(r,{ZI:()=>eD,c3:()=>eP}),n(411855);var i=n(842700),a=n(763293),o=n(774844),s=n(10640),l=n(971015),c=n(138712),d=n(146085),u=n(694568),m=n(359419),p=n(583087),h=n(973332),_=n(353341),g=n(335125),f=n(143984),E=n(470370),y=n(163011),b=n(210163),v=n(704327),I=n(398781),T=n(341987),S=n(631437),w=n(897379),A=n(599741),C=n(921211),N=n(977750),L=n(766503),O=n(416580),R=n(826785),P=n(583602),D=n(593961),k=n(304173),M=n(841368),F=n(737834),x=n(516371),U=n(891326),B=n(975798),V=n(710752),G=n(914756),H=n(205478),K=n(615777);n(922827);var W=n(387504),$=n(923e3),Y=n(353598),z=n(279207),j=n(770184),q=n(348119),Z=n(615780),X=n(931853),J=n(390497),Q=n(704728),ee=n(661865),et=n(400232),er=n(805869),en=n(732431),ei=n(638157),ea=n(721935),eo=n(809586),es=n(206186),el=n(963563),ec=n(713122),ed=n(342811),eu=n(309620),em=n(396090),ep=n(805538),eh=n(394757),e_=n(297745),eg=n(457272),ef=n(338659),eE=n(81297),ey=n(507721),eb=n(403203),ev=n(527920),eI=n(952545),eT=n(91521),eS=n(593865),ew=n(607055),eA=n(577777),eC=n(416799),eN=n(733715),eL=n(964854),eO=n(199409),eR=n(969537);Q.A,i.V,er.A,a.V,ee.A,o.c,ew.A,s.i,ew.A,s.i,ea.A,i.V,ec.A,l.U,ed.A,c.R,eu.A,d.A,em.A,u.N,ep.A,m.n,eE.A,p.y,eA.A,i.V,h.p,_.E,eC.A,i.V,eN.A,i.V,eL.A,i.V,eO.A,i.V,Y.A,i.V,z.A,i.V,j.A,i.V,q.A,i.V,Z.A,i.V,X.A,i.V,en.A,i.V,ei.A,i.V,eo.A,g.p,et.A,f.K,ey.A,E.N,$.A,y.m,eh.A,b.P,es.A,v.a,J.A,I.O,es.A,v.a,eI.A,T.i,eI.A,S.A,el.A,w.r,eb.A,i.V,e_.A,A.H,C.K,ef.A,A.H,C.K,eT.A,W.V,C.K,eS.A,W.y,C.K,eg.A,N.O,ef.A,N.O,N.O,eR.A,L.F,O.U,R.m,P.m,D.b,k.n,M.J,F._,x.U,U.a,B.E,V.e,G.U,H.V,K.x,ev.A;let eP=new Path2D("M5 0C2.23857 0 0 2.23857 0 5V35C0 37.7614 2.23857 40 5 40H35C37.7614 40 40 37.7614 40 35V5C40 2.23857 37.7614 0 35 0H5ZM16.2875 29.6971L21.2875 9.69726L23.7127 10.3035L18.7127 30.3034L16.2875 29.6971ZM11.6163 14.1165L6.61626 19.1165L5.73251 20.0005L6.61626 20.8843L11.6163 25.8843L13.384 24.1165L9.268 20.0005L13.384 15.8843L11.6163 14.1165ZM28.384 14.1165L33.384 19.1165L34.268 20.0005L33.384 20.8843L28.384 25.8843L26.6163 24.1165L30.7326 20.0005L26.6163 15.8843L28.384 14.1165Z"),eD=40},22837:(e,r,n)=>{n.d(r,{fG:()=>b});var i=n(662072),a=n(654140),o=n(88334),s=n(633291),l=n(206215),c=n(691501),d=n(759664),u=n(652087),m=n(497538),p=n(814489),h=n(148483),_=n(204347),g=n(219066),f=n(172982);let E={ArrangeAsListBehavior:l.b,ConnectorToolBehavior:c.a,TableBehavior:h.H,TemplatePreviewBehavior:g.Z,VideoBehavior:f.s,SectionPresetBehavior:p.V,DevHandoffAnnotationsMouseBehavior:a.l,ResponsiveSetBehavior:u.j,SitesBlockBehavior:m.Y,SlideDeckAddBehavior:o.w,SlideDeckReorderRowBehavior:s.M,CooperNodeStatusBehavior:i.$,FrameQuickAddBehavior:d._};class y{createMouseBehavior(e){if(e in E)return new E[e];throw Error("unexpected mouse behavior name: "+e)}tableUiReorderHandleHoveredLength(){return _.Ro.reorderHandleHoveredLength}tableUiAddButtonHoveredRadius(){return _.Ro.addButtonHoveredRadius}}function b(){new y}},154979:(e,r,n)=>{n.d(r,{_p:()=>_});var i=n(623738),a=n(966712),o=n(97631),s=n(324597),l=n(480952),c=n(261607),d=n(678340),u=n(69961),m=n(631378),p=n(126911);class h{constructor(e){this.getFullscreenMenuItem=e=>{let r=this.store?.getState();if(!r){console.warn("[CustomKeyboardShortcuts] no state found");return}if("fullscreen"!==r.selectedView.view){console.warn("[CustomKeyboardShortcuts] attempted to dispatch an action outside of fullscreen");return}let i=(0,c.b)(r),o=!!(0,a.Ay)().campfire_model_enabled,s=(0,l.V)(r,{isRecovery:!1,isUserInLimitedSpace:!1,fullscreenMemoryWarningLevel:d.Wy.SAFE,unreadCommentCount:void 0,pluginAndWidgetMenuArgs:i,isPublishingModalDisabled:!1,isBillingRemodelEnabled:o}),u=n(586281).M({isReadOnly:r.mirror.appModel.isReadOnly,extensionMenuProps:i,includeDisabled:!1});return new m.xm(r.mirror.appModel,r.selectedView,[...s,...u]).getItem(r.mirror.appModel,e)},this.getCallback=e=>{let r=this.getFullscreenMenuItem(e);return r&&r.callback&&this.store?.dispatch?(console.log("[CustomKeyboardShortcut] found action and running callback",{menuItem:r,itemDisplayText:e}),()=>r.callback((0,s.Dz)(r),r.args,this.store.dispatch)):(console.warn("[CustomKeyboardShortcut] could not find item for given action",{menuItem:r,itemDisplayText:e}),null)},this.store=e.store}getCustomKeyboardShortcuts(){if(!this.store||!u.nt.customKeyboardShortcuts.getValue())return[];let e=(0,i.Uc)(),r=[];return Object.entries(e).forEach(([e,{type:n,action:a}])=>{let o;try{o=this.getKeyboardShortcutFromText(e,null)}catch(e){o=null}let s=i.iZ.get(n);if(null===o||void 0===s){console.warn("[CustomKeyboardShortcuts] unable to parse shortcut or shortcutActionType",{actionType:s,text:e});return}r.push({keyboardShortcut:o,type:s,action:a})}),console.log("[CustomKeyboardShortcuts] received request to fetch custom keyboard shortcuts",{shortcutsStorage:e,shortcuts:r}),r}dispatchAction(e){console.log("[CustomKeyboardShortcuts] received request to dispatch",{action:e});let r=this.getCallback(e);return!!r&&(r(),!0)}getDisplayStringFromKey(e){let r=p.y.isApple();switch(e.toUpperCase()){case"'":return"\u2032";case"-":return"\u2013";case"ESCAPE":return"\u238B";case"ENTER":return"\u21A9";case"RETURN":return"\u23CE";case"TAB":return"\u21E5";case"LEFT":return"\u2190";case"RIGHT":return"\u2192";case"UP":return"\u2191";case"DOWN":return"\u2193";case"DELETE":return"\u2326";case"BACKSPACE":return"\u232B";case"CAPS LOCK":return"\u21EA";case"CONTROL":return r?"\u2303":"Ctrl";case"ALT":case"RIGHTALT":return r?"\u2325":"Alt";case"SHIFT":return r?"\u21E7":"Shift";case"META":return r?"\u2318":p.y.isWindows()?"Win":"Meta";default:return e}}getKeyboardShortcutFromText(e,r){let n=o.NF,i=0,a=e.split("+");for(let e of(a.length>0&&""===a[a.length-1]&&(a.pop(),a.length>0&&(a[a.length-1]=a[a.length-1]+"+")),a)){if(""===e)continue;let r=o.cy[e.toUpperCase()];if(e===o.NF||r&&(i&r)>0)return null;if(r&&(r&o.QI)!=0)i|=r;else{if(n!==o.NF)return null;n=e}}return n===o.NF&&0===i?null:{key:n,modifierMask:i,originalText:e,displayName:r}}getTextFromKeyboardShortcut(e){let r=p.y.isApple(),n=(e.displayName?this.getKeyboardShortcutFromText(e.displayName,null):null)??e,i=[];return n.modifierMask&o.pP&&i.push(this.getDisplayStringFromKey("Control")),n.modifierMask&o.xC&&i.push(this.getDisplayStringFromKey("Alt")),n.modifierMask&o.IL&&i.push(this.getDisplayStringFromKey("Shift")),n.modifierMask&o.No&&i.push(this.getDisplayStringFromKey("Meta")),n.modifierMask&o.eb&&i.push(this.getDisplayStringFromKey("RightAlt")),n.key!==o.NF&&i.push(this.getDisplayStringFromKey(n.key)),r?i.join(""):i.join("+")}}function _(e){new h({store:e})}},692609:(e,r,n)=>{n.d(r,{$K:()=>o,F0:()=>g,Fx:()=>m,GN:()=>N,QI:()=>E,Qu:()=>k,RG:()=>O,Te:()=>l,ax:()=>d,cQ:()=>S,ck:()=>A,db:()=>P,hu:()=>b,lR:()=>I,uN:()=>h}),n(411855),n(188507),n(922827),n(966712),n(632430);var i=n(529928);n(416095),n(100197);let{action:a,reducer:o}=(0,i.B5)("SYNC_PUBLISHABLE_SYMBOLS",[]),{action:s,reducer:l}=(0,i.B5)("SYNC_PUBLISHABLE_STATE_GROUPS",[]),{action:c,reducer:d}=(0,i.B5)("SYNC_PUBLISHABLE_STYLES",[]),{action:u,reducer:m}=(0,i.B5)("SYNC_PUBLISHABLE_MODULES",[]),{action:p,reducer:h}=(0,i.B5)("SYNC_SUBSCRIBED_SYMBOLS",[]),{action:_,reducer:g}=(0,i.B5)("SYNC_SUBSCRIBED_SYMBOLS_ON_CURRENT_PAGE",[]),{action:f,reducer:E}=(0,i.B5)("SYNC_SUBSCRIBED_STATE_GROUPS",[]),{action:y,reducer:b}=(0,i.B5)("SYNC_SUBSCRIBED_STATE_GROUPS_ON_CURRENT_PAGE",[]),{action:v,reducer:I}=(0,i.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES",[]),{action:T,reducer:S}=(0,i.B5)("SYNC_DIRECTLY_SUBSCRIBED_STYLES_ON_CURRENT_PAGE",[]),{action:w,reducer:A}=(0,i.B5)("SYNC_INDIRECTLY_SUBSCRIBED_STYLES",[]),{action:C,reducer:N}=(0,i.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES",[]),{action:L,reducer:O}=(0,i.B5)("SYNC_LOCAL_SYMBOLS_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[]),{action:R,reducer:P}=(0,i.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES",[]),{action:D,reducer:k}=(0,i.B5)("SYNC_LOCAL_STYLES_THAT_HAVE_USAGES_ON_CURRENT_PAGE",[])},514916:(e,r,n)=>{n.d(r,{LC:()=>o});var i=n(73950);class a{updateViolationsForNodes(e,r){let n=(0,i.r8)();return n?n.updateViolationsForNodes(e,r):Promise.reject()}}function o(){new a}},860707:(e,r,n)=>{n.d(r,{F4:()=>h,Yc:()=>b,aW:()=>y,bM:()=>f,cF:()=>d,dn:()=>p,le:()=>E,o_:()=>c});var i=n(922827),a=n(737947),o=n(966712),s=n(553716),l=n(356390);let c=1048576,d=0x40000000,u=(0,o.kc)().wasm_4gb&&a.Ay.location&&"1"===new URLSearchParams(a.Ay.location.search).get("wasm-4gb"),m=a.Ay.location&&"true"===new URLSearchParams(a.Ay.location.search).get("recovery"),p=u?i.rCR.MAXIMUM:m?i.rCR.RECOVERY:i.rCR.DEFAULT;function h(e){let r=i.hMR.setHeapMemoryMode(e);return(0,s.Lo)("memory",`setHeapMemoryMode(${e}) ${r?"success":"failed"}`),r}let _=null,g=null;function f(e,r){"fullscreen-app"===e?_=r:g=r}function E(e){return"fullscreen-app"===e?_?.()??0:"prototype-lib"===e?g?.()??0:_?.()||g?.()||0}function y(){if(window.performance){let e=window.performance.memory;if(e)return e.usedJSHeapSize}return 0}function b(){return(i.hMR?.getTotalUsedHeapMemory()||0)+l.Y5.memorySpikeOnFileLoadBytes()}(0,o.kc)().memory_profiling_local&&(0,o.b5)()&&(window.startMemoryProfile=async()=>{let e=await window.showSaveFilePicker(),r=await e.createWritable({keepExistingData:!0});window.memoryProfileOperationsWritable=r}),(0,o.b5)()&&(window.getTopMemoryFunctions=()=>{let e=i.YyC.getAll(),r=new Map,n=new Map,a=new Map;for(let o of e)o.includes("allocCallCount")?r.set(o,i.YyC.getCount(o)):o.includes("allocMaxDelta")?n.set(o,i.YyC.getCount(o)):o.includes("allocTotalDelta")&&a.set(o,i.YyC.getCount(o));console.log("call count events",Array.from(r).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("max delta events",Array.from(n).sort((e,r)=>r[1]-e[1]).slice(0,10)),console.log("total delta events",Array.from(a).sort((e,r)=>r[1]-e[1]).slice(0,10))},window.resetPerformanceEventCounters=()=>{i.YyC.resetAll()})},5092:(e,r,n)=>{n.d(r,{qZ:()=>p});var i=n(922827),a=n(418956),o=n(939863),s=n(582064),l=n(392592),c=n(112084),d=n(863670),u=n(356390);class m{setMentionsTypeaheadQuery(e){a.zl.set(d.h1,e)}clearMentionsTypeaheadQuery(e,r){if(e){let e=a.zl.get(d.h1),n=a.zl.get(d.LQ)?.index||null,i=a.zl.get(d.wm);(0,c.W)(e,r,n,i)}a.zl.set(d.h1,null),this.endSearchSession()}isShowingMentionsTypeaheadResults(){let e=a.zl.get(d.LQ);return!!e?.mentions?.length}setMentionsTypeaheadTargetRect(e,r,n){a.zl.set(d.MX,{x:e,y:r,height:n,width:0})}startSearchSession(){let e=(0,s.MZ)();return a.zl.set(d.wm,e),e}endSearchSession(){let e=a.zl.get(d.wm);return a.zl.set(d.wm,""),e}showVisualBellForPastedMentions(e,r){u.Y5.dispatch(l.F.enqueue({message:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions",{numUsers:r}),button:{text:(0,o.t)("whiteboard.visual_bell.canvas_at_mentions_send_notifications_from_pasted_mentions_action"),action:()=>{i.fp8.allowSendNotificationsForPastedMentions(e)}}}))}}function p(){new m}},213190:(e,r,n)=>{n.d(r,{LZ:()=>l,qM:()=>s});var i=n(411855),a=n(922827);n(358145);var o=n(7860);function s(){let{isRightPanelCollapsed:e,isLeftPanelCollapsed:r}=i.useContext(o.t);return r||e}let l=new class{isMinimizedInUI3(){var e,r;return!!a.Ez5&&(e=a.Ez5.uiState().leftPanelCollapsedUI3.getCopy(),r=!a.Ez5.uiState().showPropertiesPanel.getCopy(),e||r)}}},843495:(e,r,n)=>{n.d(r,{Br:()=>M,D$:()=>b,Dh:()=>y,G9:()=>w,GL:()=>T,Hr:()=>E,NT:()=>k,T8:()=>x,Uc:()=>L,XP:()=>K,aB:()=>P,aY:()=>D,bw:()=>R,dH:()=>O,gX:()=>N,hq:()=>C,i:()=>S,iT:()=>A,n_:()=>H,tJ:()=>v,wr:()=>I});var i=n(55253),a=n(140593),o=n(838516),s=n(922827),l=n(572304),c=n(776250),d=n(344780),u=n(517333),m=n(585654),p=n(744939),h=n(38329);n(83909);var _=n(356390),g=n(848661),f=n(279702);let E=l.dI(l.Hr);function y(e){s.Egt.addToSelection(e)}function b(e){s.Egt.removeFromSelection(e)}function v(e,r=!0){s.Egt.replaceSelection(e,r)}function I(){s.Egt.clearSelection()}function T(e,r){s.Egt.selectNodesInRange(e,r)}function S(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.name=r)}function w(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isSymbolPublishable=r)}function A(e,r){let n=h.D?.getState().mirror.sceneGraph.get(e);n&&(n.isPublishable=r)}function C(e){s.Egt.expandUpToRoot(e)}function N(e){s.glU?.updateAppModel(e)}function L(e){N({hoveredNode:e})}function O(e){s.Ez5.uiState().hoveredComponentPropDef.set(e)}function R(e){N({devHandoffCodeLanguage:e})}function P(e){N({devHandoffPreferences:e})}function D(){return s.Ez5?.propertiesPanelState()?.propertiesPanelTab}function k(e){return D()?.set(e)}function M(e){N({activeTextReviewPlugin:e})}let F=["x","y","width","height","minWidth","minHeight","maxWidth","maxHeight","angle","canBecomeFrame","canBecomeGroup","canBecomeSection","aspectRatioLockToggled","miterLimitAngle","terminalCap","dashCap","availableOTFeaturesForSelection","availableOTFeaturesForFonts","toggledOnOTFeaturesForSelection","toggledOffOTFeaturesForSelection","mixedStateOTFeaturesForSelection","detectedList","destinationOverlayPositionType","destinationOverlayBackgroundInteraction","destinationOverlayBackgroundType","destinationOverlayBackgroundColor","name","numSelected","numSelectedByType","arcStart","arcSweep","arcRadius","fontFamily","previewFontFamily","fontStyle","fontVariations","intrinsicLineHeight","textContent","prototypeInteractions","prototypeInheritedInternalInteractions","isValidPrototypingSourceSelected","selectionIsHyperlink","whiteboardControls","whiteboardColor","whiteboardDividedSwatchColors","whiteboardStrokeColor","whiteboardFontFamilies","whiteboardFontSizes","whiteboardTextAlignHorizontal","whiteboardTextAlignVertical","whiteboardStrokeStyle","whiteboardNumSelected","whiteboardNumSelectedByType","whiteboardSelectionCanSummarize","whiteboardSelectionCanCluster","whiteboardSelectionCanShowAiOnboardingBadge","whiteboardStickyAIControlsShown","whiteboardMindmapAIControlsShown","nodeSelectedValidForQuickAdd","whiteboardStrokeWeight","washiTapePaint","washiTapePaintIsMixed","connectorLineStyleForSelection","connectorStartCapForSelection","connectorEndCapForSelection","connectorTextBackgroundTransparent","codeBlockLanguage","codeBlockTheme","leftEndCap","rightEndCap","maxStrokeWeight","shapeWithTextTypeForSelection","shapeWithTextFillType","shapeWithTextOpacityOverride","platformShapeFillType","platformShapeOpacityOverride","authorVisibility","imageAspectRatio","imageHasNoStroke","imageOverlayPaint","sectionContentsHidden","isSection","variableConsumptionInfo","borderTopVisible","borderRightVisible","borderBottomVisible","borderLeftVisible","borderSharedWeight","stackCounterSpacing","directlySubscribedAssetKeys","numVideosSelected","videoAutoplay","videoMediaLoop","videoMuted","themeId","objectAnimationType","objectAnimationDirection","objectAnimationDuration","shadow","blur","htmlWidgetYouTubeVideoURL","htmlWidgetGoogleMapLocation","htmlWidgetGoogleMapZoom","htmlWidgetMailchimpFormURL","htmlWidgetMailchimpInputPlaceholder","htmlWidgetMailchimpSubmitButtonLabel","htmlWidgetMailchimpLayoutIsVertical","htmlWidgetGenericEmbedUrl","htmlWidgetGenericEmbedCodeType","htmlWidgetGenericEmbedIframeHtml","link","appear","hover","press","focus","scrollParallax","scrollTransform","cursor","marquee"];function x(e,r,n,o,l){d.rH.start("update-selection-properties");try{!function(e,r,n,o,l){let c={...e},d=function(e){let r=Object.create(null);for(let n of F)if(n in e){let i=e[n];i!==g.oV&&(r[n]=i),delete e[n]}return r}(c),u=function(e){let r={guid:{sessionID:0,localID:0}};for(let n in e){let i=e[n];i!==g.oV&&(r[n]=i)}return r}(c);if(o=function(e){switch(e){case f.zk.YES:case f.zk.YES_FORCE_TRACKING_AS_EDIT:case f.zk.YES_WITHOUT_TRACKING_AS_EDIT:return f.zk.YES;default:return f.zk.NO}}(o),r?.guid){if(d){let e=d.fontFamily&&d.fontStyle;if((0,a.KF)(!e,"UI should never simultaneously update font family and style"),d.fontFamily&&r.fontStyle&&(u.fontName={family:d.fontFamily,style:r.fontStyle,postscript:""}),r.fontFamily&&d.fontStyle&&(u.fontName={family:r.fontFamily,style:d.fontStyle,postscript:""}),d.fontVariations&&(u.fontVariations=d.fontVariations),d.variableConsumptionInfo?.variableConsumptionMap){let e=d.variableConsumptionInfo.variableConsumptionMap;u.variableConsumptionMap=(0,f.w3)(e)}}let e=i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.glU?.updateSelectedStyleProperties(e,n,o===f.zk.YES),(0,a.KF)(null!=r.styleType,"unknown style type"),U(r.styleType)}else{let e=i.w.encodeMessage({type:"NODE_CHANGES",sessionID:0,ackID:0,nodeChanges:[u]});s.Egt.updateSelectionProperties(d,n,l,o===f.zk.YES,e)}}(e,r,n,o,l)}catch(e){throw e}finally{d.rH.stop("update-selection-properties")}}let U=(0,o.s)(e=>{(0,c.sx)("Style Edited",{styleType:e})},500),B=Object.create(null);var V=(e=>(e[e.SceneGraph=0]="SceneGraph",e[e.AppModel=1]="AppModel",e[e.Selection=2]="Selection",e[e.SelectionProperties=3]="SelectionProperties",e))(V||{});let G=new Set([0,1,2,3]);function H(e=G){e.has(0)&&_.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",W),e.has(2)&&(_.Y5.fromFullscreen.on("selection:addSelectors",Y),_.Y5.fromFullscreen.on("selection:removeSelectors",z),_.Y5.fromFullscreen.on("selection:replaceSelectors",j)),e.has(1)&&_.Y5.fromFullscreen.on("updateAppModel",q),e.has(3)&&_.Y5.fromFullscreen.on("selectionPropertiesUpdate",Z)}function K(){let e=B;return B=Object.create(null),e}function W(e){(0,a.KF)(!B.invalidateSceneGraph,"We should get at most one sceneGraphMirrorUpdate per frame. We got two."),B.invalidateSceneGraph={rebuildRows:!e||e.rebuildRows}}function $(e,r){return e[r]|e[r+1]<<8|e[r+2]<<16|e[r+3]<<24}function Y(e){(0,a.KF)(!B.selection?.replace,"addSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.add||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=$(r,e),i=$(r,e+4),a=l.dI({sessionID:n,localID:i});B.selection.add[a]=!0}}function z(e){(0,a.KF)(!B.selection?.replace,"removeSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.remove||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=$(r,e),i=$(r,e+4),a=l.dI({sessionID:n,localID:i});B.selection.remove[a]=!0}}function j(e){(0,a.KF)(!B.selection?.add,"addSelectors and replaceSelectors called on the same frame"),(0,a.KF)(!B.selection?.remove,"removeSelectors and replaceSelectors called on the same frame"),B.selection||=Object.create(null),B.selection.replace||=Object.create(null),B.selection.userTriggered||=e.userTriggered;let r=e.buffer;if(r)for(let e=0;e<r.length;e+=8){let n=$(r,e),i=$(r,e+4),a=l.dI({sessionID:n,localID:i});B.selection.replace[a]=!0}}function q({changes:e,shouldIgnoreUserPrefs:r}){if(u.eD){let r;let n={},i={},a="actionEnabled__";for(let r of Object.keys(e))if(r.startsWith(a))n[r.substr(a.length)]=e[r].value;else{let n=(0,m.m)(r);if(void 0!==n){let a=e[r].value;for(let{name:e,propertyValue:r}of n.actions)i[e]=a===r}}e.keyboardShortcuts&&(r=(0,p.K)(e.keyboardShortcuts.value));let o=Object.keys(n).length>0,s=Object.keys(i).length>0,l=void 0!==r;(o||s||l)&&u.eD.updateFullscreenMenuState({actionEnabledState:o?n:void 0,actionCheckedState:s?i:void 0,actionShortcuts:r})}let n=Object.create(null),i=Object.create(null);for(let a in e)n[a]=e[a].value,i[a]=r?.[a];B.appModelChanges={...B.appModelChanges,...n},B.appModelChangesShouldIgnoreUserPrefs={...B.appModelChangesShouldIgnoreUserPrefs,...i}}function Z(e){let r=e.buffer&&e.buffer.length>0?i.w.decodeMessage(e.buffer):null;delete e.buffer,(0,a.KF)(!B.selectionProperties,"Updating selectionProperties multiple times on a frame"),B.selectionProperties={message:r,derivedProperties:e}}},661060:(e,r,n)=>{n.d(r,{DI:()=>u,Ds:()=>g,e8:()=>m,vS:()=>p});var i=n(922827),a=n(38329),o=n(988022);let s=!1,l=!1,c=!1,d=!1;function u(){l=!0,h()}function m(){s=!1,l=!1,c=!1,d=!1}function p(e,r){let n=a.D.getState(),i=n.openFile?.key;i&&!d&&((0,o.ds)("Show Missing Fonts Popover",i,n,{fontListLoaded:e,counts:r,timeNow:performance.now()}),d=!0)}function h(){if(s&&l&&!c){let e=a.D.getState(),r=new Set(Object.values(e.fonts).map(e=>Object.values(e)).flat().map(e=>e.source)),n=e.openFile?.key,s=e.figFileDuplicatedFromHubFile,l=!1;void 0!==n&&void 0!==s&&(l=null!=s[n]),(0,o.ds)("has_missing_font",n,e,{has_google_fonts:r.has(i.jXp.GOOGLE),has_local_fonts:r.has(i.jXp.LOCAL),has_shared_fonts:r.has(i.jXp.SHARED),is_community_duplicated_file:l}),c=!0}}class _{markMissingFontScannerAsComplete(){s=!0,h()}}function g(){new _}},493862:(e,r,n)=>{n.d(r,{AW:()=>f,Ak:()=>T,Cd:()=>E,Ff:()=>b,IL:()=>C,Ki:()=>S,LD:()=>g,PV:()=>w,W5:()=>y,WA:()=>N,Xk:()=>A,Xl:()=>L});var i=n(922827);n(298455),n(966712);var a=n(418956),o=n(553716),s=n(30637),l=n(356390),c=n(554294),d=n(479296),u=n(730956);let m=null,p=0,h=!1,_=!1;function g(e){switch(e){case i.kul.UNJOINED:return"unjoined";case i.kul.UNJOINED_FROM_ERROR:return"unjoined_from_error";case i.kul.UNJOINED_FROM_VALIDATION_FAILURE:return"unjoined_from_validation_failure";case i.kul.GOT_SCHEMA:return"got_schema";case i.kul.JOINING_INITIAL_LOAD:return"joining_initial_load";case i.kul.JOINING_RECONNECT:return"joining_reconnect";case i.kul.JOINING_RECONNECT_AWAITING_QUERY_REPLY:return"joining_reconnect_awaiting_query_reply";case i.kul.JOINED:return"joined";case i.kul.SHOULD_UPGRADE:return"should_upgrade";case i.kul.UPGRADING:return"upgrading";case i.kul.WAITING_FOR_RELOAD:return"waiting_for_reload";case i.kul.DETACHED:return"detached";default:return"unknown"}}function f(){_||(_=!0,setInterval(()=>l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!1),250),window.addEventListener("online",()=>{navigator.onLine&&l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!0)}),window.addEventListener("visibilitychange",()=>{"visible"===document.visibilityState&&l.Y5.isReady()&&i.h3O.updateConnectionStateIfNeeded(!0)}))}function E(e){m||(m=function(){try{let e=new Blob(["("+function(){onmessage=e=>setTimeout(()=>self.postMessage(""),e.data)}+")()"],{type:"text/javascript"}),r=new Worker(URL.createObjectURL(e));return(e,n)=>{r.onmessage||(r.onmessage=()=>{r.onmessage=null,e()},r.postMessage(n))}}catch(e){return console.error(e),(e,r)=>{setTimeout(e,r)}}}()),p=e,h||function e(){p&&(h=!0,m(function(){h=!1,p&&i.h3O.flush(),e()},p))}()}function y(e){let r=T(),n=S(r);return i.h3O.startLoadingAllPages(r,e),n.then(()=>{a.zl.set(c.nc,!1)}),n}let b=(0,d.n)(()=>i.h3O.isIncrementalSession()||i.h3O.isValidatingIncremental()),v=1,I=new Map,T=()=>v++;function S(e){return new Promise((r,n)=>{I.set(e,[r,n])})}function w(e){let r=I.get(e);if(r){let[n,i]=r;n(),I.delete(e)}}function A(){I.forEach((e,r)=>{let[n,i]=e;i()}),I.clear()}function C(e,r,n=i.DPQ.CONTAINING_PAGE){(0,s.nl)();let a=T(),o=S(a),l=n===i.DPQ.PLUGIN;return i.h3O.subscribeToContainingPage__DO_NOT_USE_DIRECTLY(e,a,r,l),o}function N(e,r,n=i.DPQ.CONTAINING_PAGE){if(0===e.length)return Promise.resolve();(0,s.nl)();let a=T(),o=S(a),l=n===i.DPQ.PLUGIN;return i.h3O.subscribeToContainingPages__DO_NOT_USE_DIRECTLY(e,a,r,l),o}function L(e){let r=()=>{let n=T();return new Promise(async(r,a)=>{e.delete("0:0"),(0,o.Lo)("Autosave",`Requesting dependencies for ${e.size} nodes while loading incrementally`,void 0,{logToConsole:i.NUh.ALWAYS}),await (0,u.oJ)(i.kul.JOINED),I.set(n,[r,a]),i.h3O.autosaveSubscribeToContainingPages(e,n)}).catch(()=>r())};return r()}},74505:(e,r,n)=>{n.d(r,{EE:()=>o,Om:()=>l,lB:()=>s});var i=n(922827);let a={};function o(e,r,n){return a[e]=n,i.glU.addNodePositionSubscription(e,r)}function s(e){delete a[e],i.glU.removeNodePositionSubscription(e)}function l(e,r){let n=a[e];n&&n(r)}},177505:(e,r,n)=>{n.d(r,{$P:()=>T,dh:()=>S,i:()=>b,uS:()=>v}),n(411855),n(188507);var i=n(922827);n(340818);var a=n(572304),o=n(298455),s=n(966712),l=n(392592),c=n(331972);n(662275);var d=n(31913);n(349410),n(83909);var u=n(929715);n(396226),n(356390),n(843495),n(493862);var m=n(457630);n(29680);var p=n(678340);n(335682),n(99506);var h=n(243987),_=n(301462),g=n(601607),f=n(694517);n(300874),n(851363);var E=n(286723);function y(e){return e.match(/^\s+$/)?null:e.match(/^[-\u2013\u2014\*\s]+([^-\u2013\u2014\*]+?)[-\u2013\u2014\*\s]*$/)}function b(e,r){if(!e)return!1;let n=!!y(r),i=e.parentNode?.childrenNodes.find(r=>r?.guid!==e.guid&&r?.isPageDivider&&!!y(r?.name))!==void 0;return!!r.match(/^(-+|\u2013+|\u2014+|\*+|\s+)$/)||((0,s.kc)().ce_page_separators_titles||i)&&!(0,s.O_)()&&n}function v({openFile:e,loadedPageNode:r,pageName:n}){return!!(!(!(0,s.kc)().ce_page_separators||!r||!e||(0,h.KI)(e))&&b(r,n))&&r?.childrenGuids.length===0}n(449731);let I=0;async function T(e,r,n,s,h,g,y,b,v,T){let S;if(T&&(0,c._$)(s,T,"overview_set_current_page"),e===r)return;let w=performance.now(),A=I+=1;g("action_page_switch_initiated",{pageSwitchId:I,oldPageNodeId:r,newPageNodeId:e,isIncremental:i.h3O.isIncrementalSession(),isAlreadyLoaded:h,currentNodeCount:i.CeL?.getFileNodeCount()},{forwardToDatadog:!0});let C=new Promise(e=>{S=e});i.Ez5.currentPageState().requestedPageChange.set(e),requestAnimationFrame(()=>{(0,u.J)(async()=>{if(await (0,o.UN)().setCurrentPageFromNodeAsync(e),r!==e){let o=(0,f.vw)(n),c=(0,p.P3)()>=75,u=c?new Set:n.fetchedPageIds||new Set;if(o&&(c&&s((0,d.EB)({fetchedPageIds:u})),s((0,d.SR)({isLoadingPage:!0})),s((0,f.yH)({version:o,currentPageNodeId:e,fetchedPageIds:u,eventType:"INCREMENTALLY_LOAD_NEW_PAGE"}))),v&&y&&b){let r=i.glU.navigateToFirstVisibleOrClosestChangeForPage(e);r===a.AD?s(l.F.dequeue({matchType:"view_changes"})):(i.Egt.setSelectedNodeAndCanvas(r,!0),y((0,m.QZ)({nodeId:r,...E.ob}),E.kh),b(r))}_.F.trackFromFullscreen("action_page_switch",{oldPageNodeId:r,newPageNodeId:e,pageSwitchIdForTracking:A,duration:performance.now()-w,currentNodeCount:i.CeL?.getFileNodeCount()},!0)}i.Ez5.currentPageState().requestedPageChange.set(""),S()})}),await C}function S(e=!0){return(0,g.Fk)(r=>{if(!e)return"0:1";let n=r.getCurrentPage();return n?n.guid:"0:1"})}},618056:(e,r,n)=>{n.d(r,{E3:()=>C,JX:()=>D,Lt:()=>U,N9:()=>O,OO:()=>k,Ou:()=>w,Tm:()=>M,XE:()=>P,bn:()=>A,c4:()=>V,iC:()=>B,n_:()=>x,qg:()=>R,rC:()=>E,sb:()=>N,x$:()=>S,y7:()=>L});var i=n(55253),a=n(140593),o=n(966664),s=n(136880),l=n(922827),c=n(258600),d=n(689136),u=n.n(d),m=n(568214),p=n(38329),h=n(988022),_=n(356390),g=n(247908),f=n(848661);let E={r:196/255,g:196/255,b:196/255,a:1},y=[{position:0,color:{r:1,g:1,b:1,a:1}},{position:1,color:{r:1,g:1,b:1,a:0}}],b=y.map(g.Ug),v=e=>{let r=c.s.identity();return r.translate(.5,.5),e&&(I(e.leftEndCap)||I(e.rightEndCap))&&(e.angle>=90||e.angle<-90)?r.rotate(Math.PI):!e||e.height>0&&e.width/e.height<=3?(r.rotate(-Math.PI/2),e&&(e.angle<-45&&e.angle>=-135?r.rotate(Math.PI/2):e.angle<-135||e.angle>135?r.rotate(Math.PI):e.angle>45&&e.angle<=135&&r.rotate(-Math.PI/2))):(e.angle>45||e.angle<-135)&&r.rotate(Math.PI),e&&e.hasReflection&&r.rotate(Math.PI),r.translate(-.5,-.5),r.toFigMatrix()};function I(e){if(!e)return!1;switch(e){case"ARROW_LINES":case"ARROW_EQUILATERAL":case"TRIANGLE_FILLED":case"CIRCLE_FILLED":case"DIAMOND_FILLED":return!0;case"ROUND":case"SQUARE":case"NONE":case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return!1}}let T=null;function S(e){if(!A(e.type))return null;if(0===e.stops.length){let r=p.D.getState();(0,h.ds)("zero_stop_gradient_detected",r.openFile?.key,r),e.stops.push({color:m.FN,position:0})}return e}function w(e){return N(e.type)?e:null}function A(e){return null!=e&&-1!==["GRADIENT_LINEAR","GRADIENT_RADIAL","GRADIENT_ANGULAR","GRADIENT_DIAMOND"].indexOf(e)}function C(e){return null!=e&&-1!==["IMAGE","VIDEO"].indexOf(e)}function N(e){return null!=e&&"SOLID"===e}function L(e){return"IMAGE"!==e.type&&"VIDEO"!==e.type?null:e}function O(e){return!e||(0,f.gl)(e)?null:e.map(L).filter(o.Vq)}function R(e){return Array.from(e.hash).map(e=>(e<16?"0":"")+e.toString(16)).join("")}function P(e){return"PATTERN"!==e.type?null:e}function D(e){return"CENTER"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_CENTER:"START"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_LEFT:"END"===e.horizontalAlignment&&"CENTER"===e.verticalAlignment?l.eVK.MIDDLE_RIGHT:"CENTER"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_CENTER:"START"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_LEFT:"END"===e.horizontalAlignment&&"START"===e.verticalAlignment?l.eVK.TOP_RIGHT:"CENTER"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_CENTER:"START"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_LEFT:"END"===e.horizontalAlignment&&"END"===e.verticalAlignment?l.eVK.BOTTOM_RIGHT:l.eVK.TOP_LEFT}function k(e){switch(e){case l.eVK.TOP_LEFT:return{horizontalAlignment:"START",verticalAlignment:"START"};case l.eVK.TOP_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"START"};case l.eVK.TOP_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"START"};case l.eVK.MIDDLE_LEFT:return{horizontalAlignment:"START",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"CENTER"};case l.eVK.MIDDLE_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"CENTER"};case l.eVK.BOTTOM_LEFT:return{horizontalAlignment:"START",verticalAlignment:"END"};case l.eVK.BOTTOM_CENTER:return{horizontalAlignment:"CENTER",verticalAlignment:"END"};case l.eVK.BOTTOM_RIGHT:return{horizontalAlignment:"END",verticalAlignment:"END"}}}let M=new class{constructor(){this.clearCache=e=>{null!=e?delete this.cache[e]:this.cache={}},this.getId=(e,r,n)=>`${n}-${r}-${e}`,this.initPaint=(e,r,n,i,a,o)=>this.initPaintWithDefaultImagePaint(e,r,n,i,T,o??!1,a),this.getPaintStopsAndStopsVar=(e,r,n,i)=>{let a=i?[{position:0,color:n},{position:1,color:e}]:[{position:0,color:e},{position:1,color:n}],o=a.map(g.Ug);return r&&(o[i?1:0].colorVar=r),{stops:a,stopsVar:o}},this.initPaintWithDefaultImagePaint=(e,r,n,i,a,o,s)=>{let l={type:e,opacity:1,visible:!0,blendMode:"NORMAL"};if("SOLID"===e?l.color=r:A(e)?(l.stops=y,l.stopsVar=b,l.transform=v(s)):C(e)&&a&&("VIDEO"===e?this.transferVideoAttributes(a,l):this.transferImageAttributes(a,l)),!n)return l;let c=this.cachePaint(n,i);if(this.transferGeneralAttributes(c,l),"SOLID"===e)c.color?this.transferColorAttributes(c,l):c.stops&&c.stops.length&&this.transferColorAttributes(c.stops[0],l);else if(A(e)){if(c.stops)this.transferGradientAttributes(c,l);else if(c.color){let e=V(c.color,o),r=(s&&I(s.rightEndCap))??!1,{stops:n,stopsVar:i}=this.getPaintStopsAndStopsVar({...c.color,a:1},c.colorVar,e,o?!r:r);l.stops=n,l.stopsVar=i}}else"IMAGE"===e?c.image&&c.imageThumbnail&&(this.transferImageAttributes(c,l),l.transform=c.imageTransform):"VIDEO"===e&&c.video&&this.transferVideoAttributes(c,l);return l},this.cachePaint=(e,r)=>(this.cache[r]=this.cache[r]||u()(e),A(e.type)?this.transferGradientAttributes(e,this.cache[r]):"SOLID"===e.type?this.transferColorAttributes(e,this.cache[r]):"IMAGE"===e.type?(this.transferImageAttributes(e,this.cache[r]),this.cache[r].imageTransform=e.transform):"VIDEO"===e.type&&this.transferVideoAttributes(e,this.cache[r]),this.cache[r]),this.transferGeneralAttributes=(e,r)=>{r.opacity=e.opacity,r.blendMode=e.blendMode,r.visible=e.visible},this.transferColorAttributes=(e,r)=>{r.color=e.color},this.transferGradientAttributes=(e,r)=>{r.stops=e.stops,r.stopsVar=e.stopsVar,r.transform=e.transform},this.transferImageAttributes=(e,r)=>{r.image=e.image,r.imageThumbnail=e.imageThumbnail,r.animatedImage=e.animatedImage,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.imageShouldColorManage=e.imageShouldColorManage,r.video=void 0},this.transferVideoAttributes=(e,r)=>{r.imageThumbnail=e.imageThumbnail,r.animationFrame=e.animationFrame,r.imageScaleMode=e.imageScaleMode,r.rotation=e.rotation,r.scale=e.scale,r.paintFilter=e.paintFilter,r.video=e.video,r.image=void 0},this.clearCache()}},F=!1;function x(){F||(F=!0,_.Y5.onReady().then(()=>{let e=l.glU.requestDefaultImageStyle(),r=i.w.decodeMessage(e);r.nodeChanges&&r.nodeChanges.length>0&&r.nodeChanges[0].fillPaints&&(T=r.nodeChanges[0].fillPaints[0])}))}function U(e,r){let n=L(e);if(!n)return e;if("STRETCH"===n.imageScaleMode){let e=c.s.identity();return e.translate(.5,.5),e.rotate(-(Math.PI/180*r)),e.translate(-.5,-.5),e.multiply(c.s.fromFigMatrix(n.transform)),{...n,transform:e.toFigMatrix()}}return{...n,rotation:n.rotation+r}}function B(e,r){let n=S(e);if(n){let e=n.stops;return r.index<e.length?e[r.index].color:n.stops[0].color}{let r=w(e);return(0,a.KF)(!!r,"paint is neither a gradient nor a solid"),{...r.color,a:r.opacity??1}}}function V(e,r=!1){var n={...e,a:0};if(!r){let r=(0,s.qN)(e),i=r.v>=.5?r.v-.4:r.v+.4;n=(0,s.kE)({...r,v:i})}return n}},379202:(e,r,n)=>{n.d(r,{Q:()=>a,r:()=>i});var i,a,o=n(838516),s=n(922827),l=n(776250),c=n(966712),d=n(563706),u=n(153808),m=n(860707);class p{constructor(e){for(let r of(this.reported=!1,this.initializationStart=null,this.events={},["applyNodeChanges","multiplayerMessageSize","initializePrototypeLib","viewerSceneDidCompleteInitialLoad","transferSentToWorker","transferMemory","transferMemorySize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.events={}}start(e){this.logTime(e+"Start"),"initializePrototypeLib"===e&&(this.initializationStart=performance.now())}end(e){this.logTime(e+"End")}logValue(e,r){this.events[e]=r}logTime(e){this.events[e]=Math.round(performance.now())}report(){this.logTime("reportedAt");let e={version:2,firstReport:!this.reported,totalUsedHeapMemory:s.hMR?.getTotalUsedHeapMemory(),maxUsedHeapMemory:s.hMR?.getMaxUsedHeapMemory(),fileKey:u.hk()?.openFileKey(),...this.events};setTimeout(()=>{(0,l.sx)("Prototype Lib Loaded",e),this.reported=!0})}}class h{constructor(e){for(let r of(this.startTimes={},this.meta={},this.track=(0,o.s)(e=>{(0,c.kc)().prototype_lib_perf_report&&(0,l.sx)("Prototype Lib Function",e)},200),["applyNodeChanges","getNodeChangesForSwap","multiplayerMessageSize"]))e[r]=e[r]||[],e[r].push(this)}reset(){this.startTimes={},this.meta={}}logValue(e,r){this.meta[e]=r}start(e){this.startTimes[e]=performance.now()}end(e){if(void 0!==this.startTimes[e]){let r=s.hMR.getTotalUsedHeapMemory(),n=s.hMR.getMaxUsedHeapMemory(),i={name:e,start:this.startTimes[e],end:performance.now(),totalUsedHeapMemory:r,maxUsedHeapMemory:n,...this.meta};this.track(i),this.reset()}}}(e=>{let r={},n=new h(r);e.loadTimer=new p(r);let i=[n,e.loadTimer];e.reset=function(){for(let e of i)e.reset()},e.start=function(e){r[e]?.forEach(r=>r.start(e))},e.end=function(e){r[e]?.forEach(r=>r.end(e))},e.logValue=function(e,n){r[e]?.forEach(r=>r.logValue(e,n))};let a=!0;e.reportOOM=function(r){if(!a)return;a=!1;let n=e.loadTimer.initializationStart?Math.round(performance.now()-e.loadTimer.initializationStart):0,i={totalMemoryInBytes:(0,m.le)(),failedSize:r,currentAllocatedBytes:s.hMR.getTotalUsedHeapMemory(),maxAllocatedBytes:s.hMR.getMaxUsedHeapMemory(),timeSinceInitialization:n,is64BitBrowser:d.Ay.is64BitBrowser};(0,l.sx)("Prototype Lib Out Of Memory",i)}})(i||(i={})),(e=>{let r=null;e.setLoadTimeTracker=function(e){r=e},e.getLoadTimeTracker=function(){return r}})(a||(a={}))},630331:(e,r,n)=>{n.d(r,{Ad:()=>z,B8:()=>W,Cd:()=>er,Cr:()=>ec,Dd:()=>K,Dg:()=>Y,E7:()=>ea,H0:()=>X,HF:()=>Z,JA:()=>et,LH:()=>ee,P2:()=>en,PY:()=>eu,Ts:()=>eb,Ug:()=>$,V:()=>H,Zp:()=>es,fl:()=>eE,iW:()=>j,jp:()=>ep,k6:()=>G,kq:()=>el,o3:()=>em,p7:()=>Q,se:()=>J,sl:()=>eo,vK:()=>q,w4:()=>ei,wl:()=>ed,ye:()=>L,zw:()=>O});var i=n(966664),a=n(3360),o=n(922827),s=n(776250),l=n(344780),c=n(513654),d=n(269584),u=n(966712),m=n(574705),p=n(84917),h=n(964172),_=n(988022),g=n(356390),f=n(122983),E=n(15859);let y={"frame.react-render":.1,"frame.scene-render":.2,"frame.scene-render.render-tree-generation":.2},b=["react","frame","frame.react-render","frame.scene-render","frame.scene-render.render-tree-generation","frame.style-updater","frame.symbol-updater","frame.trigger-action","fullscreen-handle-event","fullscreen-handle-event.trigger-action","frame.comments-render"],v=1,I=!1,T=null,S=0,w=null,A=0,C=-1/0,N=0,L=null,O=null,R=null,P=null,D=new d.zF,k=new d.zF,M=new d.zF,F=new d.zF,x=new d.zF,U=new d.xV,B={},V=!1;function G(e,r){v=e,I=(0,i.Vq)(r),L&&L.setMultiplayerPerfInfo({multiplayerUserCount:v,ongoingSpotlight:I})}function H(){T=null,w=null,L?.stopRecordingAndLog("closing-file"),L?.setFileInfo(null,"unknown")}function K(e,r){L&&(L.setFileInfo(e,(0,_.Dc)(r)),L.startRecording(!0),(0,E.Jr)().setPendingImagesCallback(L.pendingImagesChanged)),T=e,w=performance.now(),S++;let n=(0,u.tl)().editing_file;1===S&&n&&(0,s.sx)("Cold Boot Document Load",{fileKey:T,fileVersion:o.i6g.currentFileVersion(),loadedTime:w,fileNodeCount:o.CeL.getFileNodeCount(),fileTeamId:n.team_id,fileParentOrgId:(0,u.tl)().org_id})}function W(e){L?.setFileInfo(T,_.Dc(e))}function $(){L?.stopRecordingAndLog("about-to-rebuild-scene")}function Y(){L?.startRecording(!1)}function z(){L?.recordSingleFrameNamedEvent("tileRenderingActive")}function j(){L?.recordSingleFrameNamedEvent("createTableActive")}function q(){L?.recordSingleFrameNamedEvent("editTableTextActive")}function Z(){L?.recordSingleFrameNamedEvent("reorderTableSpanActive")}function X(){L?.recordSingleFrameNamedEvent("connectDiagramShapeWithConnectorActive")}function J(){L?.onNodeDragStart()}function Q(){L?.onNodeDragEnd()}function ee(e){L?.onTileRendererChanged(e)}function et(){L?.onContextRestored()}function er(e){L?.updateMaxRenderLayerCount(e)}function en(e){L?.updateMaxRenderedTileBytesUsed(e)}function ei(){L?.incrementNumAnimationsFromCpp()}function ea(){L?.incrementNumAnimationsFromTs()}function eo(){D.setIsActive()}function es(){k.setIsActive()}function el(){M.setIsActive()}function ec(){F.setIsActive()}function ed(){x.setIsActive()}function eu(){L?.recordSingleFrameNamedEvent("createStickyActive")}function em(){L?.recordSingleFrameNamedEvent("differentSectionClicked")}function ep(e){L?.recordSingleFrameNamedEvent(c.jY(e))}let eh=["ALT","META","SHIFT","CONTROL","RIGHT_ALT"];function e_(e){let{fileKey:r,fileNodeCount:n,multiplayerUserCount:i,ongoingSpotlight:o,recentInteractions:s,secondsSinceLoaded:l,version:c,randomID:d}=e,u={fileKey:r,fileNodeCount:n,multiplayerUserCount:i,ongoingSpotlight:o,secondsSinceLoaded:l,version:c,randomID:d,reportCount:A};for(let e=0;e<s.length;e++)u[`recentInteractions.${e}`]=JSON.stringify(s[e]);return(0,m.U)(e.deviceInfo,u),(0,a.Dy)(e.nodeTypeHistogram,u,"nodeTypeHistogram"),u}function eg(e){(0,s.sx)("Slow Editor Interaction",e),C=performance.now(),N=e.duration}function ef(...e){}function eE(){if(!g.Y5?.isReady())return;let e={},r=l.rH.report(),n=0;for(let i of r)!function r(n,i=""){let a=i.length>0?`${i}.${n.name}`:n.name,o=B[a]||n.hitCount,s=n.hitCount-o;s>n.elapsedTimes.length&&(V||(console.warn(`Too many elapsed hits of ${a} since last report`),V=!0),s=n.elapsedTimes.length);let l=0,c=n.elapsedTimes.length;for(let e=c-s;e<c;e++)l+=n.elapsedTimes[e];for(let i of(e[a]=l,B[a]=n.hitCount,n.children))r(i,a)}(i),n+=e[i.name];!function(){if(n/1e3<.2)return;let[r,i]=null===T||null===w?[null,[]]:[{deviceInfo:(0,m.N)(),fileKey:T,fileNodeCount:o.CeL.getFileNodeCount(),multiplayerUserCount:v,ongoingSpotlight:I,nodeTypeHistogram:o.CeL.getNodeTypeHistogram(),recentInteractions:o.CeL.getRecentInteractions(),secondsSinceLoaded:(performance.now()-w)/1e3,version:1,randomID:(0,f.ds)(),reportCount:A},o.CeL.getSlowInteractions()];if(null==r)return;let s={};for(let r in e)-1!==b.indexOf(r)&&(s[r]=e[r]/1e3);let l=i.map(e=>{let n=e.interaction,i={kind:"interaction",type:n.type,subtype:n.subtype,frame:e.frame,collapsed:!1,duration:e.duration,...e_(r)};if(eh.forEach(e=>i["modifier."+e]=null),"MOUSE"===n.type)for(let e of(i.collapsed=n.collapsed,eh))i["modifier."+e]=-1!==n.modifiers.indexOf(e);return(0,a.Dy)(s,i,"timer"),i});for(let n in e){let i=e[n]/1e3,o=y[n];if("number"==typeof o&&i>=o){let e={kind:"timer",type:n,subtype:null,frame:null,collapsed:!1,duration:i,...e_(r)};(0,a.Dy)(s,e,"timer"),eh.forEach(r=>e["modifier."+r]=null),l.push(e)}}if(0===l.length)return;let c=[],d=l,u=60-(performance.now()-C)/1e3;if(0===(d=d.filter(e=>u<=0||e.duration>=2*N)).length&&c.push(`we're in the report cooldown period (${u}s to go) and no reports were long enough to override it (the last report duration was ${N}s)`),u>0&&d.length,null===w)return;let p=60-(performance.now()-w)/1e3;p>0&&c.push(`we're in the document loading cooldown period (${p}s to go)`),c.length>0?function(e){if(1===e.length)return e[0];if(2===e.length)return e[0]+" and "+e[1];let r=e.slice(0,e.length-1).join(", ");return r+=", and ",r+=e[2]}(c):((d=d.sort((e,r)=>e.duration-r.duration)).forEach(eg),A++)}(),o.CeL.clearNodeTypeHistogram(),o.CeL.clearSlowInteractions()}function ey(e){let r=0,n=0,i=[];for(let a of e)1===a.path.length&&"frame"===a.path[0]?(n=a.elapsedTime,i.push(a)):a.path.length>1&&"frame"===a.path[0]?(r+=a.elapsedTime,i.push(a)):1===a.path.length&&i.push(a);if(r>0){let e=n-r;i.push({path:["frame","unaccounted-time"],elapsedTime:e})}return i}function eb(){if(!L&&(0,u.kc)().frame_distribution_tracker_edit){let e=e=>{let r=o.AiE.getAndClearHistogramBatchFields(),n=new Map;r.forEach((e,r)=>{n.set(r,e>0)}),e.optimizationExposures=JSON.stringify(Object.fromEntries(n))};(L=new c.AH("editor_frame_distributions",ey,2,!0,new h.s,r=>{e(r)},!1,(e,r=!1)=>{let n=o.AiE.getAndClearSlowFrameTrackerFields(),i=new Map;n.forEach((e,r)=>{i.set(r,e>0)}),e[p.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(i));let a=o.yuz.getFullscreenCurrentFrameGpuMetricsJSON();e[p.N.gpuMetricsCurrentFrameKey]=a.toString();let s=o.fZb.getCurrentFrameCpuTimerTreeJSON();if(e[p.N.cpuTimerTreeCurrentFrameKey]=s.toString(),r){let r=o.yuz.getFullscreenPreviousFrameGpuMetricsJSON();e[p.N.gpuMetricsPreviousFrameKey]=r.toString();let n=o.fZb.getPreviousFrameCpuTimerTreeJSON();e[p.N.cpuTimerTreePreviousFrameKey]=n.toString()}let l=o.Ez5.activeRunningAnimations();e[p.N.activeAnimationsKey]=l},e=>{o.AiE.clearSlowFrameTrackerFields(),o.yuz.nextFrame(e),o.fZb?.nextFrame(e)})).addEventTracker("zoomActive",new d.vu),L.addEventTracker("panActive",new d.H0),L.addEventTracker("viewportHasGaps",new d.as(o.pWM.DEFINITELY_COVERED_ONLY)),L.addEventTracker("viewportIncludingOutdatedHasGaps",new d.as(o.pWM.DEFINITELY_COVERED_AND_OUTDATED)),L.addEventTracker("multipleMultiplayerUsersInFile",new d.nc(2,()=>v)),L.addEventTracker("multipleMultiplayerUsersInFileAndPanningOrZooming",new d.Pn(2,()=>v)),L.addEventTracker("viewportHasBlurryRegions",new d.eO(1)),L.addEventTracker("viewportHasVeryBlurryRegions",new d.eO(.5)),L.addEventTracker("viewportIsBlurry",new d.I7(1)),L.addEventTracker("viewportIsVeryBlurry",new d.I7(.5)),L.addEventTracker("timeSlicedEditRenderingActive",new d.t8),L.addEventTracker("stalenessIsHigh",new d.bF(1e3)),L.addEventTracker("stalenessIsVeryHigh",new d.bF(2e3)),L.addEventTracker("moveCursorActive",new d.vw),O=new d.Ti,L.addEventTracker("cursorChatActive",O),R=new d.W,L.addEventTracker("cursorReactionActive",R),L.trackOtherUserCursorMoved(),P=new d.Fy,L.addEventTracker("devModeAnnotationsVisible",P),L.addEventTracker("independentLayerAnimationActive",D),L.addEventTracker("nonIndependentLayerAnimationActive",k),L.addEventTracker("independentLayerActive",M),L.addEventTracker("independentLayerAdded",F),L.addEventTracker("independentLayerRemoved",x),L.addEventTracker("isTypingTextActive",U)}}},46878:(e,r,n)=>{n.d(r,{av:()=>S});var i=n(411855),a=n(318381),o=n(265241),s=n(387644),l=n(615777),c=n(897379),d=n(773959),u=n(821498),m=n(468242),p=n(599741),h=n(533589),_=n(511960),g=n(974502),f=n(839648),E=n(473199),y=n(266011),b=n(93207),v=n(636540),I=n(583719),T=n(966712);function S(e){switch(e){case"CLOSE_OVERLAY":return i.createElement(a.r,null);case"GO_BACK":return i.createElement(o.E,null);case"NAVIGATE_TO":default:return i.createElement(s.N,null);case"OPEN_OVERLAY":return i.createElement(l.x,null);case"OPEN_URL":return i.createElement(c.r,null);case"SCROLL_TO":return i.createElement(d.M,null);case"SWAP_WITH":return i.createElement(u.M,null);case"SWAP_STATE_TO":return i.createElement(m.x,null);case"UPDATE_MEDIA_PLAY_PAUSE_OPTIONS":case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":return i.createElement(p.H,null);case"UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":return i.createElement(h.D,null);case"UPDATE_MEDIA_SKIP_BY_OPTIONS":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":return i.createElement(_.s,null);case"UPDATE_MEDIA_SKIP_TO":return i.createElement(g.C,null);case"SET_VARIABLE":if((0,T.kc)().ds_variable_props_unified_ui)return i.createElement(f.u,null);return i.createElement(E.D,null);case"SET_VARIABLE_MODE":if((0,T.kc)().ds_variable_props_unified_ui)return i.createElement(y.x,null);return i.createElement(b.E,null);case"CONDITIONAL":return i.createElement(v.$,null);case"NONE":return i.createElement(I.i,null)}}},279994:(e,r,n)=>{n.d(r,{h:()=>a});let i=[];function a(e){for(let r of i)r(e)}},990922:(e,r,n)=>{n.d(r,{$4:()=>b,jI:()=>E,up:()=>y});var i=n(776250),a=n(517333),o=n(38329),s=n(218549),l=n(988022),c=n(356390),d=n(150944),u=n(976269),m=n(109381),p=n(376142),h=n(253999),_=n(26277),g=n(264126);let f=new class{constructor(){this._suggestionsCache=new s.q(100),this._textReviewPluginRunner=new _.X,this._currentPromise=null}async setCurrentImplementation(e,r){let n=await (0,m.LJ)(),a=await (0,m.N_)(),s=(0,m.oz)();await e.initialize(r,[...n,...a,...s]),this._current=e;let c=await (0,m.LE)();console.log(`[spell-check] using implementation: ${this._current?.name}. Current language: ${r}. Supported languages: ${c}`);let d=o.D.getState().selectedView,u=(0,l.Dc)(d.editorType);(0,i.sx)("Spell Check Ready",{productType:u,language:r,implementationName:this._current?.name,userIgnoreWordsCount:(n||[]).length})}get current(){return this._currentPromise||(this._currentPromise=(async()=>(await this.ensureImplementationLoaded(),this._current))()),this._currentPromise}async ensureImplementationLoaded(){if(this._current)return;let e=await (0,m.x5)(),r=(0,h.up)(e),n=(0,m.Ev)(r);switch(e){case g.QC.DESKTOP:await this.setCurrentImplementation(new u.f,n);break;case g.QC.AGENT:await this.setCurrentImplementation(new d.UV,n);break;case g.QC.HUNSPELL:await this.setCurrentImplementation(new p.mz,n)}}async getSuggestionsForWord(e){return this._suggestionsCache.has(e)?Promise.resolve(this._suggestionsCache.get(e)||[]):(await this.current).getSuggestionsForWord(e).then(r=>(this._suggestionsCache.set(e,r),r))}async spellCheckText(e){return(await this.current).spellCheckText(e)}async runTextReviewPlugin(e){return _.X.shouldUsePluginForSpellChecking()?await this._textReviewPluginRunner.reviewText(e):[]}getAPIName(){return this._current?.name||"N/A"}shouldEnableWhenFirstActivated(){let e=navigator.languages||[navigator.language];return function(e,r){if(e)return!0;try{let e=r.map(e=>(e||"").toLowerCase()).map(e=>e.split("-")[0]);if(!(e.includes("en")||e.includes("ru")))return!1}catch(e){}return!0}(!!a.eD,e)}reset(){this._current=void 0,this._currentPromise=null,this._suggestionsCache.reset()}};async function E(e){return await f.ensureImplementationLoaded(),f._suggestionsCache.reset(),f._current.setLanguage(e)}async function y(e){await E((0,m.Ev)(e)),c.Y5&&c.Y5.isReady()&&c.Y5.triggerAction("redo-spell-checking")}let b=f},270271:(e,r,n)=>{n.d(r,{no:()=>c});var i=n(268853),a=n(298455),o=n(776621),s=n(769977);class l{getSummaryAsClipboardText(e){let r;let n=(0,a.UN)().get(e),l=n?.getWidgetSyncedState()["syncedState:ai-summary-items"],c=n?.getWidgetSyncedState()["syncedState:summarized-at"];try{r=JSON.parse(l)}catch(e){(0,o.$D)(i.e.AI_PRODUCTIVITY,Error(`Could not parse summary data, error: ${e}`))}return(0,s.Aq)(r,c)}}function c(){new l}},819983:(e,r,n)=>{n.d(r,{hR:()=>o});var i=n(201535);class a{rgbaToThumbhash(e,r,n){if(e>100||r>100){let i=e,a=r,o=e/r;e<r?e=Math.round((r=100)*o):r=Math.round((e=100)/o);let s=new OffscreenCanvas(i,a),l=s.getContext("2d"),c=new ImageData(new Uint8ClampedArray(n),i,a);l.putImageData(c,0,0);let d=new OffscreenCanvas(e,r).getContext("2d");d.drawImage(s,0,0,i,a,0,0,e,r),n=new Uint8Array(d.getImageData(0,0,e,r).data)}return(0,i.WB)(e,r,n)}thumbhashToRgba(e){let{w:r,h:n,rgba:a}=(0,i.Oe)(e);return{width:r,height:n,rgba:a}}}function o(){new a}},907009:(e,r,n)=>{n.d(r,{fT:()=>s});var i=n(922827),a=n(966712);class o{isUI3(){return i.Ez5?.uiState().isUI3.getCopy()??!1}showUI3Colors(){return i.Ez5?.uiState().showUI3Colors.getCopy()??!1}showUI3ColorsInitialValue(){return!!(0,a.kc)().figjam_ui3_color_palette}}function s(){new o}},424863:(e,r,n)=>{n.d(r,{nd:()=>s});var i=n(922827),a=n(47506);let o=null;function s(e,r){o&&o.pasteID===e&&o.fileKey===r?o.offset=o.offset+1:o={pasteID:e,fileKey:r,offset:1},2===o.offset&&i.glU.shouldNudgeComponentCreationForSelection()&&(0,a.YQ)({id:"Upsell Libraries Valid Paste For Nudge"})}},227944:(e,r,n)=>{n.d(r,{Zr:()=>o});var i=n(188507);n(794272);var a=n(279145);function o(e){return(0,i.d4)(r=>(0,a.Yh)(r.mirror.appModel,e))}},555074:(e,r,n)=>{n.d(r,{kl:()=>l,lJ:()=>c});var i=n(411855),a=n(794272),o=n(356390),s=n(279702);function l(e){return(0,a.R)(r=>r.mirror.selectionProperties[e])}function c(e){return[l(e),i.useCallback((r,n=s.zk.YES)=>{o.Y5.updateSelectionProperties({[e]:r},{shouldCommit:n})},[e])]}},289124:(e,r,n)=>{n.d(r,{_:()=>h});var i=n(922827),a=n(776250),o=n(38329),s=n(737947),l=n(966712),c=n(27087),d=n(939863),u=n(392592),m=n(356390);class p{async pasteVariablesWithLocalizationPopupDEPRECATED(e,r,n){let p=Array.from(e.entries()).map(([e,r])=>`${e}-${r}`).join(","),h=`/api/variables/publish_state?keys=${p}`,_=(await (0,c.GD)(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,a.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=i.CWU.performVariableLocalizationFromPopup(g,r,n);if(m.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}async pasteVariablesWithLocalizationPopup(e,r,n){let p=Array.from(e.entries()).map(([e,r])=>`${e}|${r}`).join(","),h=`/api/variables/publish_state?keysAndLibrary=${p}`,_=(await c.Ay.post(h)).data.meta,g=new Set;return Object.keys(_).forEach(e=>!1===_[e]?g.add(e):null),g.size>0&&((0,a.sx)("prototype.variables_pasted",{numPublished:e.size-g.size,numUnpublished:g.size}),(0,l.kc)().variables_paste_remap_popup?(o.D.dispatch(u.F.dequeue({matchType:"localize_unpublished_variables"})),o.D.dispatch(u.F.dequeue({matchType:"unpublished_variables_localized"})),o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable_localize"),type:"localize_unpublished_variables",button:{text:(0,d.t)("proto.paste_unpublished_variable_localize_cta"),action:()=>{let e=i.CWU.performVariableLocalizationFromPopup(g,r,n);if(m.Y5.commit(),Object.keys(e).includes("numberOfNewVariables")){let r=e.numberOfNewVariables;r>0&&o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.unpublished_variables_localized",{numberOfVariables:r}),type:"unpublished_variables_localized"}))}}}}))):o.D.dispatch(u.F.enqueue({message:(0,d.t)("proto.paste_unpublished_variable"),button:{text:(0,d.t)("proto.paste_unpublished_variable_cta"),action:()=>{s.Ay.unsafeRedirect("https://help.figma.com/hc/en-us/articles/14506821864087#copy_paste","_blank")}}}))),{}}}function h(){new p}},869156:(e,r,n)=>{n.d(r,{AZ:()=>A,BQ:()=>H,EP:()=>es,G6:()=>k,JG:()=>J,K6:()=>M,Kd:()=>W,L5:()=>el,M6:()=>ec,Pt:()=>R,Rb:()=>O,SG:()=>ea,SR:()=>N,Xv:()=>K,bL:()=>F,e3:()=>X,hg:()=>V,iC:()=>er,jI:()=>j,kf:()=>Y,lC:()=>D,nN:()=>C,nR:()=>P,pN:()=>Q,qd:()=>G,rW:()=>w,tZ:()=>U,u:()=>B,u5:()=>z,wM:()=>$,wX:()=>x,yp:()=>L});var i=n(411855),a=n(966664),o=n(177131),s=n(922827),l=n(677469),c=n.n(l),d=n(44948),u=n(966712),m=n(418956),p=n(716034),h=n(391388),_=n(154483),g=n(696673);n(335682);var f=n(200889),E=n(514816),y=n(173454),b=n(533573),v=n(875157),I=n(859703),T=n(479296),S=n(289704);function w(e){let r=(0,m.md)(I.Gc);return en(e?r[e]??[]:[])}function A(e){return(0,m.md)((0,I.A6)(e))}function C(){return(0,m.md)(I.qy)}function N(){O(),L(),(0,m.md)(I.xA),R(),P(),(0,m.md)(I.jt)}function L(){return en((0,m.md)(I.TD))}function O(){return en((0,m.md)(I.uk))}function R(){return(0,m.md)(I.bO)}function P(){return(0,m.md)(I.LC)}function D(e){return(0,m.md)((0,I.ZG)(e))}function k(e){let r=(0,i.useMemo)(()=>e?(0,I.Eo)(e):(0,p.eU)(null),[e]),n=(0,m.md)(r);if(n)return n;if(!e)return;let a=s.CWU.getSubscribedVariableSetInfo(e);if(a)return(0,y.Rn)(a)}function M(e,r){let n=function(e){let r=e?(0,I.hy)(e):(0,p.eU)(null);return(0,m.md)(r)}(e);return n?.modeValues?.[r]??void 0}function F(e,r){return B(e)?.modeValues?.[r]??void 0}function x(e){let r=(0,d.wm)(()=>e,[e]),n=(0,i.useMemo)(()=>(0,p.eU)(e=>r.map(r=>(0,a.Vq)(r)?e(I.Cg)[r]??null:null)),[r]);return(0,m.md)(n)}function U(e){return B(e)?.name||(e?s.CWU.getVariableNameInStyleSelection(e)??void 0:void 0)}function B(e){let r=(0,i.useMemo)(()=>e?(0,I.Ev)(e):(0,p.eU)(null),[e]),n=(0,m.md)(r);if(n)return n;if(!e)return null;let a=s.CWU.getSubscribedVariableInfo(e);return a?(0,y.ZI)(a):null}function V(e,r){let n=(0,d.wm)(()=>e,[e]),a=(0,i.useMemo)(()=>(0,p.eU)(e=>n.map(n=>{if(!n)return null;let i=e((0,I.Ev)(n));if(i)return i;if(r){let e=s.CWU.getSubscribedVariableInfo(n);if(e)return(0,y.ZI)(e)}return null})),[r,n]);return(0,m.md)(a)}function G(e,r){let n=(0,d.wm)(()=>e,[e]),a=(0,i.useMemo)(()=>(0,p.eU)(e=>{let i={};return n.forEach(n=>{if(!n)return;let a=(0,I.BJ)(n,r??{});if(a){i[n]=e(a);return}i[n]=null}),i}),[n,r]);return(0,m.md)(a)}function H(e,r){let n=(0,i.useMemo)(()=>e?(0,I.BJ)(e,r??{}):(0,p.eU)(null),[e,r]);return(0,m.md)(n)}function K(e,r){return(0,i.useMemo)(()=>{if(!e||!r)return null;let n=new Map(Object.entries(r));return s.CWU.getVariableChainForModes(e,n)},[e,r])}function W(e){let r=B(e),n=k(r?.variableSetId);return n?"LOCAL"===n.subscriptionStatus?n.keyForPublish:n.key:null}function $(e){let r=(0,i.useMemo)(()=>(0,I.Oj)(e),[e]),n=(0,m.md)(r);return(0,d.k9)(()=>{let e={};for(let r of Object.values(n))if("loaded"===r.status)for(let n of r.data.variableCollection?.variables??[])e[(0,o.ey)(n.key)]=n;return e},[n])}function Y(e){let r=(0,i.useMemo)(()=>!e||(0,g.wJ)(e)?(0,p.eU)(null):(0,I.cp)(e),[e]),n=(0,g.$Q)(e),a=(0,I.Ri)(n),o=(0,m.md)(r),s=(0,m.md)(a),l=(0,E.je)(),c=!!l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return h.Qw.loaded([]);if(o?.status==="loading"||o?.status==="disabled"||s?.status==="loading")return h.Qw.loading();let e=o&&h.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return h.Qw.loaded((0,S.cM)(r,!1))},[c,o,s])}function z(e){let r=(0,i.useMemo)(()=>!e||(0,g.wJ)(e)?(0,p.eU)(null):(0,I.cp)(e),[e]),n=(0,g.$Q)(e),a=(0,I.Ri)(n),o=(0,m.md)(r),s=(0,m.md)(a),l=(0,E.je)(),c=l.data?.find(r=>r.fileKey===e);return(0,d.wm)(()=>{if(!c||!o&&!s)return h.Qw.loaded([]);if(o?.status==="loading"||s?.status==="loading")return h.Qw.loading();let e=o&&h.Qw.from(o),r=e?{type:"team",value:e}:{type:"community",value:s};return h.Qw.loaded((0,S.kX)(r,!1))},[c,o,s])}function j(e={}){let r=e?.enabled??!0,n=!!(0,u.kc)().dse_lk_asset_updates_vars,i=q({enabled:r&&!n}),a=Z({enabled:r&&n});return n?a:i}let q=(0,T.n)((e={})=>{let r=!1===e.enabled,n=(0,E.je)(),a=(0,d.wm)(()=>n.data?.map(e=>e.fileKey)??[],[n.data]),o=(0,i.useMemo)(()=>r?(0,I.Jo)(a):(0,I.H2)(a),[r,a]),s=(0,m.md)(o);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(s));return"loaded"!==e.status?e:h.Qw.loaded({items:c()(Object.values(s).map(e=>(0,S.kX)({type:"team",value:e},!1)))})},[s])}),Z=(0,T.n)((e={})=>{let r=!1===e.enabled,n=(0,E.je)(),a=(0,d.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,i.useMemo)(()=>r?(0,I.Jo)(a):(0,I.wh)(a),[r,a]),s=(0,m.md)(o);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(s));return"loaded"!==e.status?e:h.Qw.loaded({items:Object.values(s).flatMap(e=>(0,S.C$)(e,!1))})},[s])}),X=(0,p.eU)(null);function J({enabled:e=!0}){let r=ei({enabled:e&&!!(0,u.kc)().dt_suggested_variables_validation}),[n,a]=(0,m.fp)(X);return(0,i.useEffect)(()=>{(null===n||n.status!==r.status)&&a(r)},[r,a,n]),"loaded"===r.status}function Q(e){let r=e?.enabled??!0,n=!!(0,u.kc)().dse_lk_asset_updates_vars,i=ee({enabled:r&&!n}),a=et({enabled:r&&n});return n?a:i}let ee=(0,T.n)(e=>{let r=(0,E.je)(),n=(0,d.wm)(()=>r.data?.filter(e=>!g.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),a=(0,d.wm)(()=>r.data?.filter(e=>g.wJ(e.fileKey)).map(e=>e.fileKey)??[],[r.data]),o=e?.enabled===!1,s=(0,i.useMemo)(()=>{if(o){let e={};return n.forEach(r=>{e[r]=h.Qw.disabled()}),(0,p.eU)(e)}return(0,I.Yt)(n)},[o,n]),l=(0,m.md)(s),u=(0,i.useMemo)(()=>{if(o){let e={};return a.forEach(r=>{e[r]=h.Qw.disabled()}),(0,p.eU)(e)}return(0,I.hz)(a)},[o,a]),_=(0,m.md)(u);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values({...l,..._}));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):h.Qw.loaded({libraryVariableSets:[...c()(Object.values(l).map(e=>(0,S.kX)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,S.kX)({type:"community",value:e},!1)))],libraryVariables:[...c()(Object.values(l).map(e=>(0,S.cM)({type:"team",value:e},!1))),...c()(Object.values(_).map(e=>(0,S.cM)({type:"community",value:e},!1)))]})},[l,_])}),et=(0,T.n)(e=>{let r=e?.enabled===!1,n=(0,E.je)(),a=(0,d.wm)(()=>n.data?.map(e=>e.libraryKey)??[],[n.data]),o=(0,i.useMemo)(()=>r?(0,I.Jo)(a):(0,I.Ho)(a),[r,a]),s=(0,m.md)(o);return(0,d.wm)(()=>{let e=h.Qw.all(Object.values(s));return"loaded"!==e.status?e.transform(()=>({libraryVariableSets:[],libraryVariables:[]})):h.Qw.loaded({libraryVariableSets:Object.values(s).flatMap(e=>(0,S.C$)(e,!1)),libraryVariables:Object.values(s).flatMap(e=>(0,S.q0)(e,!1))})},[s])});function er(e,r,n,i){if(e)return s.w3z.getIdsOfVariablesWithValue(e,r,{type:n.type,value:n.value},i)}function en(e){return i.useMemo(()=>e.filter(e=>!(0,b.eF)(e)),[e])}function ei(e){let r=O(),n=Q(e);return(0,i.useMemo)(()=>n?.status!=="loaded"?n.transform(()=>[]):h.Qw.loaded([...n.data?.libraryVariables??[],...r??[]]),[r,n])}function ea(e,r){let n=(0,v.iG)(e),a=ei(r);return(0,i.useMemo)(()=>{if("loaded"!==a.status)return a.transform(()=>[]);let r=a.data?.filter(e=>v.AQ(e,n))??[],i=[];for(let n of e){let e=b.Io[n];e&&a&&(i=i.concat(r.filter(r=>e.includes(r.resolvedType))))}return h.Qw.loaded([...i])},[e,a,n])}let eo=(0,_.fv)();function es(e){let r=e?.subscriptionStatus==="SUBSCRIBED"?eo(e):void 0,n=function(e){let r={},n=(0,E.je)();if(n.data){for(let i of e)for(let e of n.data)if(e.fileKey===i){r[i]=e.name;break}}return r}(r?[r]:[]),i=r?n[r]:void 0,a=e?.subscriptionStatus==="SUBSCRIBED"?e.library_key:void 0,o=(0,f.U)(a?[a]:[],{enabled:(0,u.kc)().dse_lk_asset_updates_vars}).data,s=a?o?.[a]:void 0;return(0,u.kc)().dse_lk_asset_updates_vars?s:i}function el(e){let r=e&&(0,y.GI)(e),n=k(r?e.rootVariableSetId:void 0);return(r?n:e)??null}function ec(){return(ea(["FONT_STYLE"]).data??[]).length>0}},281889:(e,r,n)=>{n.d(r,{RW:()=>E,Vr:()=>l,_n:()=>d,j2:()=>m,uE:()=>g,xQ:()=>v,xb:()=>h});var i=n(109388),a=n(365514),o=n(922827);let s=null;function l(e){return s=e,()=>{s=null}}let c=null;function d(e){return c=e,()=>{c=null}}let u=null;function m(e){return u=e,()=>{u=null}}let p=null;function h(e){return p=e,()=>{p=null}}let _=null;function g(e){return _=e,()=>{_=null}}let f=new a.b("VariableMirrorVariableResolvedValueEmitter");function E(e,r,n){return o.u4j.subscribeToLocalVariableResolvedValue(e,r),f.on(e,n),()=>{o.u4j.unsubscribeFromLocalVariableResolvedValue(e,r),f.removeListener(e,n)}}let y=new a.b("VariableMirrorExplicitModeEmitter");class b{localVariableSetUpdated(e){(0,i.unstable_batchedUpdates)(()=>{s?.({added:[e]})})}localVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{s?.({deleted:e}),u?.({setDeleted:e})})}subscribedVariableSetUpdated(e,r){(0,i.unstable_batchedUpdates)(()=>{c?.({added:[e]}),_?.({setDeleted:e.id}),_?.({added:r})})}subscribedVariableSetDeleted(e){(0,i.unstable_batchedUpdates)(()=>{c?.({deleted:e}),_?.({setDeleted:e})})}localVariablesUpdated(e){u?.({added:e})}localVariableOverridesUpdated(e){p?.({added:e})}localVariableOverridesDeleted(e){p?.({deleted:e})}localVariablesDeleted(e){u?.({deleted:e}),e.forEach(e=>{f.trigger(e,{})})}variableResolvedValueUpdated(e,r){f.trigger(e,r)}explicitModeUpdated(e,r){y.trigger(e,r)}resetMirrorCache(){(0,i.unstable_batchedUpdates)(()=>{s?.(null),u?.(null),p?.(null),c?.(null),_?.(null)}),f.removeAllListeners()}}function v(){new b}},794581:(e,r,n)=>{n.d(r,{tG:()=>g});var i=n(838516),a=n(922827),o=n(966712),s=n(27087),l=n(680421),c=n(754168),d=n(356390),u=n(15859),m=n(534532),p=(e=>(e.FILE_KEY="fileKey",e.LIBRARY_KEY="libraryKey",e))(p||{});class h{constructor(){this.pendingPasteRequests={},this.pendingVideosToRecordByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingRecordVideosTasksByLibraryKey={},this.allVideos={},this.flushPendingRecordVideos=(0,i.s)(async()=>{let e=this.pendingVideosToRecordByFileKey,r=this.pendingVideosToRecordByLibraryKey,n=this.pendingRecordVideosTasksByFileKey,i=this.pendingRecordVideosTasksByLibraryKey,o=Object.keys(e).map(e=>({fileKey:e,type:"fileKey"})).concat(Object.keys(r).map(e=>({libraryKey:e,type:"libraryKey"})));this.pendingVideosToRecordByFileKey={},this.pendingRecordVideosTasksByFileKey={},this.pendingVideosToRecordByLibraryKey={},this.pendingRecordVideosTasksByLibraryKey={};let l=await this.getEditingFileKey();o.forEach(async o=>{if("fileKey"===o.type&&o.fileKey===l){n[o.fileKey].resolve();return}if("fileKey"===o.type&&!o.fileKey){n[o.fileKey].reject("Invalid originFileKey");return}let c=1,d="fileKey"===o.type?e[o.fileKey]:r[o.libraryKey];for(;;){try{let e=await s.Ay.put(`/api/files/${l}`,{video_sha1s:d,image_origin_file_key:"fileKey"===o.type?o.fileKey:void 0,image_origin_library_key:"libraryKey"===o.type?o.libraryKey:void 0}),{success:r,failed:c}=u.xY.parseFileUpdateResponseForImages(d,e);for(let e of(a.tHB.markVideoPermissionsCopied(r),c))a.tHB.videoIsMissing(e);for(let e of d)delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():i[o.libraryKey].resolve(),this.getAllVideoUrls();return}catch(e){if(e.status>=400&&e.status<500){for(let e of d)a.tHB.videoIsMissing(e),delete this.pendingPasteRequests[e];"fileKey"===o.type?n[o.fileKey].resolve():i[o.libraryKey].resolve();return}}let e=1e3*c*Math.random();await new Promise(r=>setTimeout(r,e)),c=Math.min(2*c,64)}})},100)}async getAllVideoUrls(){if(!(0,o.kc)().cross_env_paste)return;let e=await c.S.getVideos({fileKey:await this.getEditingFileKey()});this.allVideos=e.data.meta.videos}getSignedUrls(e){let r=new Map;for(let n of e)r.set(n,this.allVideos[n]);return r}recordVideos(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No originFileKey specified");if(this.pendingVideosToRecordByFileKey[e]=this.pendingVideosToRecordByFileKey[e]||[],this.pendingVideosToRecordByFileKey[e].push(...r),!this.pendingRecordVideosTasksByFileKey[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordVideosTasksByFileKey[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByFileKey[e].promise;let n=this.pendingRecordVideosTasksByFileKey[e].promise;return this.flushPendingRecordVideos(),n}recordVideosFromLibraryKey(e,r){if(0===r.length)return Promise.resolve();if(!e)throw Error("No sourceLibraryKey specified");if(this.pendingVideosToRecordByLibraryKey[e]??=[],this.pendingVideosToRecordByLibraryKey[e].push(...r),!this.pendingRecordVideosTasksByLibraryKey[e]){let r,n;let i=new Promise((e,i)=>{r=e,n=i});this.pendingRecordVideosTasksByLibraryKey[e]={promise:i,resolve:r,reject:n}}for(let n of r)this.pendingPasteRequests[n]=this.pendingRecordVideosTasksByLibraryKey[e].promise;let n=this.pendingRecordVideosTasksByLibraryKey[e].promise;return this.flushPendingRecordVideos(),n}getEditingFileKey(){return d.Y5.openFileKeyPromise()}}let _=new class{constructor(){this.videoManager=new h,this.thumbnailGenerator=m.t}copyVideoPermissions(e,r){return this.videoManager.recordVideos(e,r)}copyVideoPermissionsFromLibraryKey(e,r){return this.videoManager.recordVideosFromLibraryKey(e,r)}createVideo(){return this.thumbnailGenerator.createVideo()}deleteVideo(e){this.thumbnailGenerator.deleteVideo(e)}getWidth(e){return this.thumbnailGenerator.getWidth(e)}getHeight(e){return this.thumbnailGenerator.getHeight(e)}getCoverImage(e){return this.thumbnailGenerator.getCoverImage(e)}loadVideo(e,r,n){return this.thumbnailGenerator.loadVideo(e,r,n)}getSignedUrls(e){return this.videoManager.getSignedUrls(e)}async setExternalSource(e,r){let n=await fetch(r),i=new Uint8Array(await n.arrayBuffer()),a=await d.Y5.openFileKeyPromise();(0,l.Cb)([{sha1:e,bytes:i}],a)}loadAllVideos(){return this.videoManager.getAllVideoUrls()}};function g(){return _.videoManager}},815485:(e,r,n)=>{n.d(r,{i:()=>a});let i=[];function a(e,r){for(let n of i)n(e,r)}},457630:(e,r,n)=>{let i;n.d(r,{$$:()=>b,Cj:()=>U,D6:()=>A,HD:()=>T,PD:()=>w,Pl:()=>P,QZ:()=>F,Qt:()=>y,Yb:()=>v,Z0:()=>f,_X:()=>D,gc:()=>i,kE:()=>E,lc:()=>M,ni:()=>k,qc:()=>I,th:()=>S});var a=n(411855),o=n(109388),s=n(922827),l=n(91408),c=n(886653),d=n(553716),u=n(572206),m=n(651963),p=n(433861),h=n(356390),_=n(617453),g=n(930269);function f(e,r,n=!0){let i={x:e.width/2+(r.x-e.offsetX)*e.zoomScale,y:e.height/2+(r.y-e.offsetY)*e.zoomScale};return n?u.Mi.rounded(i):i}function E(e,r){return Math.round(e/r-.5)}function y(e,r,n,i){return Math.round(i/2+(e-r)*n)}function b(e,r){return u.Mi.rounded({x:(r.x-e.width/2)/e.zoomScale+e.offsetX,y:(r.y-e.height/2)/e.zoomScale+e.offsetY})}function v(e,r,n){let i=f(e,{x:r.x,y:r.y},n);return{x:i.x,y:i.y,width:r.width*e.zoomScale,height:r.height*e.zoomScale}}function I(e){if(e.height<0||e.width<0||e.zoomScale<=0)throw(0,d.x1)("Viewport","invalid values",{info:e}),Error("Invalid Viewport");return{x:e.offsetX-e.width/e.zoomScale/2,y:e.offsetY-e.height/e.zoomScale/2,width:e.width/e.zoomScale,height:e.height/e.zoomScale}}function T(e,r){return{x:e.x+r.x,y:e.y+r.y,width:e.width,height:e.height}}function S(e){return(0,c.xx)((e,r,n,i)=>({x:e,y:r,height:n,width:i}))(e.x,e.y,e.height,e.width)}function w({subscribeToUpdates_expensive:e}){let r=D({subscribeToUpdates_expensive:e}),n=a.useContext(p.QZ).current||r,i=r.offsetX-n.offsetX,o=r.offsetY-n.offsetY,s=r.zoomScale-n.zoomScale;return{...r,deltaOffsetX:i,deltaOffsetY:o,deltaZoomScale:s}}function A(e,r){a.useEffect(()=>{h.Y5?.isReady()&&e.subscribeToUpdates_expensive&&(r(h.Y5.getViewportInfo()),(0,m.H)())},[r,e.subscribeToUpdates_expensive]),a.useEffect(()=>{if(h.Y5&&e.subscribeToUpdates_expensive){let e=e=>{(0,o.flushSync)(()=>{r(e)})};return h.Y5.viewport.on("onSetViewport",e),()=>{h.Y5.viewport.removeListener("onSetViewport",e)}}},[r,e.subscribeToUpdates_expensive])}function C(e){return a.useContext(e),a.useContext(p.HA).current||p.t4}function N(e){return C(e.subscribeToUpdates_expensive?p.k9:p.cY).x}function L(e){return C(e.subscribeToUpdates_expensive?p.lG:p.cY).y}function O(e){return C(e.subscribeToUpdates_expensive?p.Os:p.cY).width}function R(e){return C(e.subscribeToUpdates_expensive?p.zE:p.cY).height}function P(e){return C(e.subscribeToUpdates_expensive?p.zx:p.cY).zoomScale}function D(e){let r=N(e),n=L(e),i=O(e),o=R(e),s=C(e.subscribeToUpdates_expensive?p.j0:p.cY).offsetX,l=C(e.subscribeToUpdates_expensive?p.u7:p.cY).offsetY,c=P(e),d=C(e.subscribeToUpdates_expensive?p.l9:p.Vl).isPanning,u=C(e.subscribeToUpdates_expensive?p.b8:p.Vl).isZooming;return a.useMemo(()=>({x:r,y:n,width:i,height:o,offsetX:s,offsetY:l,zoomScale:c,isPanning:d,isZooming:u}),[r,n,i,o,s,l,c,d,u])}function k(){let e={subscribeToUpdates_expensive:!0},r=N(e),n=L(e),i=O(e),o=R(e);return a.useMemo(()=>({x:r,y:n,width:i,height:o}),[r,n,i,o])}function M(){i=void 0}function F(e){let r=new Promise(e=>{i=e});return s.glU.computeViewportSettingsForNode__DO_NOT_USE_DIRECTLY(e),r}let x=(0,l.jz)(g.rulerThickness);function U(){let e={subscribeToUpdates_expensive:!0},r=(0,_.lK)()?x:0,n=N(e)+r,i=L(e)+r,o=O(e)-r,s=R(e)-r;return a.useMemo(()=>({x:n,y:i,width:o,height:s}),[n,i,o,s])}},573955:(e,r,n)=>{n.d(r,{Ed:()=>p,Js:()=>m,QY:()=>d,Yu:()=>_,pi:()=>h});var i=n(268853),a=n(922827),o=n(966712),s=n(716034),l=n(418956),c=n(776621),d=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(d||{});let u=(0,s.eU)({status:1,timeoutHandle:null});function m(){return l.zl.get(u)}function p(e){return!!((0,o.kc)().wait_for_unsaved_changes&&0===m().status&&a.i6g&&a.i6g.hasOnlyNewFileSystemChanges()&&navigator.onLine)&&(function(e){let r=l.zl.get(u);r.status=2,r.timeoutHandle=e,l.zl.set(u,r)}(setTimeout(()=>{h(!0),e()},1e4)),!0)}function h(e){let r=l.zl.get(u);r.status=3,e||(r.timeoutHandle?clearTimeout(r.timeoutHandle):(0,c.$D)(i.e.SCENEGRAPH_AND_SYNC,Error("Finished waiting but no timeout handle"))),r.timeoutHandle=null,l.zl.set(u,r)}function _(e){let r=l.zl.get(u);r.status=e?0:1,r.timeoutHandle&&clearTimeout(r.timeoutHandle),r.timeoutHandle=null,l.zl.set(u,r)}},939745:(e,r,n)=>{n.d(r,{bJ:()=>c});var i=n(136880),a=n(568214),o=n(418956),s=n(225719);class l{isCustomPaletteColor(e,r){let n=o.zl.get(s.$R);if(n){let o=(0,i.aH)(e);for(let e of(0,s.Uh)(r))if(n[e].some(e=>(0,a.DA)(o,e)))return!0}return!1}}function c(){new l}},633648:(e,r,n)=>{n.d(r,{A9:()=>o});var i=n(161459);class a{constructor(){this.getDefaultPencilStrokeWeight=()=>i.wv,this.getDefaultHighlighterStrokeWeight=()=>i.g5}}function o(){new a}},72274:(e,r,n)=>{n.d(r,{Vi:()=>u,uE:()=>d});var i=n(939863),a=n(33404),o=n(609622),s=n(164782),l=n(128803),c=n(248639);let d={[c.k.EMBED_WIDGET]:s.g,[c.k.LINK_PREVIEW_WIDGET]:l.Nd,[c.k.AI_SUMMARY_WIDGET]:o.V,[c.k.HTML_WIDGET]:a.u};function u(e){return!!c.k[e]}c.k.EMBED_WIDGET,s.w.OPEN,s.w.CONVERT_TO_TEXT,c.k.LINK_PREVIEW_WIDGET,l.HP.OPEN,l.HP.VERTICAL,l.HP.HORIZONTAL,l.HP.CONVERT_TO_TEXT,c.k.AI_SUMMARY_WIDGET,c.k.HTML_WIDGET},488983:(e,r,n)=>{n.d(r,{Bz:()=>F,F$:()=>x,bY:()=>k,e3:()=>K,g4:()=>V,wl:()=>M,y4:()=>W});var i=n(672797),a=n(268853),o=n(922827),s=n(953723),l=n(776250),c=n(517333),d=n(686759),u=n(737947),m=n(966712),p=n(563706),h=n(776621),_=n(553716),g=n(30637),f=n(490768),E=n(129318),y=n(760640),b=n(860707),v=n(474985);function I(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.wasm"]:Fig.fullscreenURLs["compiled_wasm.wasm"]}function T(e){return"prototype-lib"===e?Fig.prototypeLibURLs["compiled_wasm.js"]:Fig.fullscreenURLs["compiled_wasm.js"]}async function S(e,r){await (0,d.k0)(T(r));let n={wasmBinaryFile:I(r),preRun(){(n.emscripten_realloc_buffer??n.growMemory)(0x60000000)}};window.Module=n,(0,s.jS)({callMain:(0,s.eS)(),tsApisForCpp:e,registerRefreshCallback:e=>{(0,v.vw)(r,e)},leakBindings:!0})}async function w(e){try{await y.xK.timeAsync("loadingCode",()=>window.FULLSCREEN_PRELOADS?.js||(0,d.k0)(T(e)))}catch(e){throw Error("Failed to load fullscreen JS code")}return(0,s.N4)({isProduction:!0,executeEmscriptenJS:(0,s.eS)()})}async function A(e,r){let n=y.xK.time("instantiateStreaming",async()=>{try{return await WebAssembly.instantiateStreaming(e,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiateStreaming",()=>n)}async function C(e,r){if(!e.ok)throw Error(`Downloading wasm failed with ${e.status}`);let n=await e.arrayBuffer(),i=y.xK.time("instantiate",async()=>{try{return await WebAssembly.instantiate(n,r)}catch(e){if("string"==typeof e)throw Error(e);throw e}});return await y.xK.timeAsync("awaitInstantiate",()=>i)}let N=!1,L=null;async function O(e){!L||L===e||(0,g.nl)()||M()||("fullscreen-app"===L?(0,h.$D)(a.e.CLIENT_PLATFORM,Error("Previously downloaded fullscreen wasm, but is now downloading prototype-lib")):"prototype-lib"===L&&(0,h.$D)(a.e.CLIENT_PLATFORM,Error("Previously downloaded prototype-lib wasm, but is now downloading fullscreen")));let r=I(e);y.xK.start("loadingBinaryStart");let[n,i]=await Promise.all([window.FULLSCREEN_PRELOADS?.wasm||fetch(r),w(e)]);delete window.FULLSCREEN_PRELOADS;let{imports:o,receiveInstance:s,getReservedHeapSize:l}=i;if((0,b.bM)(e,l),"true"===n.headers.get("x-figma-local-build")&&(N=!0),WebAssembly.instantiateStreaming)try{let r=await A(n,o);return L=e,{receiveInstance:s,wasmResult:r}}catch(e){if(e&&(!e.message||e.message.includes("Incorrect response MIME type")||e.message.includes("Unexpected response MIME type")))console.warn('Detected a proxy interfering with the "application/wasm" MIME type. Falling back to a slower WebAssembly instantiation method instead.'),(0,h.$D)(a.e.UNOWNED,Error(`Working around error instantiating streaming fullscreen WASM: ${e}`)),n=await fetch(r);else throw(0,_.xi)("loader","Error loading wasm",{url:r,message:e?.message}),e}let c=await C(n,o);return L=e,{receiveInstance:s,wasmResult:c}}let R=(0,i.Kt)(async()=>await O("fullscreen-app")),P=(0,i.Kt)(async()=>await O("prototype-lib")),D=async e=>{switch(e){case"fullscreen-app":return await R();case"prototype-lib":return await P()}};function k(e){let r=e||H||L;if(r){let e=I(r).split("/");if(e.length<2)return;let n=e[e.length-2];if("fullscreen-wasm"===n)return{fullscreen_variant:"wasm"};if("prototype-lib"===n)return{prototype_variant:"lib"};if(n.startsWith("fullscreen-wasm-"))return{fullscreen_variant:n.replace("fullscreen-wasm-","")};if(n.startsWith("prototype-lib-"))return{prototype_variant:n.replace("prototype-lib-","")}}return{}}function M(){let e=u.Ay.location.pathname;for(let r of["/c","/community","/@","/user","/org","/team"])if(e.startsWith(r))return!0;return!1}let F=!/Mobi/.test(navigator.userAgent)||/iPad/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent);function x(e="fullscreen-app"){return D(e).then(()=>{})}let U=document.location.pathname;function B(e){return"/preload-editor"===e||"/preload-android-proto"===e}function V(){return B(U)&&(0,p.KR)()&&p.m0||(0,f.Sh)(U)||c.eD&&c.eD.isFileBrowserTab()||c.S8||M()||B(u.Ay.location.pathname)&&!c.eD?"never":!(0,m.kc)().preload_fullscreen_on_load||"complete"===document.readyState||(0,u.Cs)()?"immediately":"eventually"}let G=null,H=null;async function K(e,r="fullscreen-app"){if(H&&H!==r&&!(0,g.nl)()&&("fullscreen-app"===H?(0,h.$D)(a.e.UNOWNED,Error("Previously initialized fullscreen wasm, but is now initializing prototype-lib")):"prototype-lib"===H&&(0,h.$D)(a.e.UNOWNED,Error("Previously initialized prototype-lib wasm, but is now initializing fullscreen"))),!I(r)||!window.WebAssembly)return location.href="/unsupported_browser",new Promise(()=>null);if((0,E.QL)("asan"))return H=r,S(e,r);try{G&&G!==e&&await u.Ay.reloadAndWaitForever("tsApisForCpp changed",{from:o.uCV[G.CommonApp().appType()],to:o.uCV[e.CommonApp().appType()]}),G=e;let{receiveInstance:n,wasmResult:i}=await D(r);(0,s.jS)({callMain:()=>{y.xK.time("callMain",()=>n(i.instance,i.module))},tsApisForCpp:G,registerRefreshCallback:e=>{(0,v.vw)(r,e)}}),H=r,(0,g.nl)()&&o.msz.setIsRunningInteractionTests();let a=k(r);(0,l.sx)("Fullscreen Loaded",{...a})}catch(e){throw(0,l.sx)("Fullscreen Load Failure",{error:e+""}),!e||"Failed to fetch"===e.message||"Could not download wasm module"===e.message||e.message.includes("NetworkError")||e.message.toLowerCase().includes("network error")||(e instanceof Error||(e=Error(`Fullscreen load failure: ${e}`)),(0,h.$D)(a.e.UNOWNED,e)),e.reportedToSentry=!0,e}}function W(){if(N)return!0;let e=Fig.fullscreenURLs["compiled_wasm.js"];return!!(e&&e.startsWith("/"))}},560718:(e,r,n)=>{n.d(r,{Ni:()=>a});var i=(e=>(e.COMMUNITY="community",e))(i||{}),a=(e=>(e.ALL_DISABLED="all_disabled",e.ENABLED="enabled",e))(a||{}),o=(e=>(e.REPORT="report",e.REPORT_AND_HIDE="report_and_hide",e))(o||{})},477782:(e,r,n)=>{n.d(r,{Tf:()=>v,Y6:()=>b,YC:()=>T,fA:()=>E,hi:()=>I,nb:()=>f,yF:()=>y}),n(411855),n(188507);var i=n(140593),a=n(966712),o=n(716034),s=n(418956),l=n(711525),c=n(391388),d=n(420576),u=n(764151),m=n(99506),p=n(279453),h=n(378356),_=n(27703),g=n(132135),f=(e=>(e.FILE="FILE",e.PROTOTYPE="PROTOTYPE",e.REPO="REPO",e.PINNED_FILE="PINNED_FILE",e.OFFLINE_FILE="OFFLINE_FILE",e))(f||{});function E(e){return{type:"FILE",file:e,fileLG:u.F.toLiveGraph(e)}}function y(e){let r=(0,d.LH)(e.repo,e.branches,e.selectedBranchKey);return r?r:(e.repo.default_file_key?(0,d.LH)(e.repo,e.branches,e.repo.default_file_key):null)||e.branches[0]}let b=(0,o.eU)(null);class v{static getId(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.key;return e.file.key;case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key+","+e.prototype.page_id+","+e.prototype.id;case"REPO":return e.repo.id;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.xb)(e)}}static sameObject(e,r){if(e.type!==r.type)return!1;switch(e.type){case"FILE":if(e.fileLG&&"FILE"===r.type&&r.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.key===r.fileLG.key;return e.file.key===r.file.key;case"PINNED_FILE":return e.file.key===r.file.key;case"PROTOTYPE":return e.prototype.id===r.prototype.id;case"REPO":return e.repo.id===r.repo.id;case"OFFLINE_FILE":return e.file.fileKey===r.file.fileKey;default:(0,i.xb)(e)}}static getName(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.name;return e.file.name;case"PINNED_FILE":case"OFFLINE_FILE":return e.file.name;case"PROTOTYPE":return e.prototype.fig_file.name+" - "+e.prototype.name;case"REPO":return(0,d.oj)(e.repo);default:(0,i.xb)(e)}}static getAccessedAt(e){switch(e.type){case"FILE":return e.file.accessed_at;case"PROTOTYPE":return e.prototype.accessed_at;case"REPO":return e.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.xb)(e)}}static getSharedAt(e){switch(e.type){case"FILE":return e.file.shared_at;case"PROTOTYPE":return e.prototype.shared_at;case"REPO":return e.repo.shared_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getCreatedAt(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.createdAt.toISOString();return e.file.created_at;case"PINNED_FILE":return e.file.createdAt.toISOString();case"PROTOTYPE":return e.prototype.fig_file.created_at;case"REPO":return e.branches.reduce((e,r)=>e<r.created_at?e:r.created_at,e.repo.created_at);case"OFFLINE_FILE":return new Date(e.file.createdAt).toISOString();default:(0,i.xb)(e)}}static getTouchedAt(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.touchedAt??e.fileLG.updatedAt;return e.file.touched_at??e.file.updated_at;case"REPO":return e.branches.reduce((e,r)=>null!==e&&e>r.touched_at?e:r.touched_at,null);case"PROTOTYPE":return e.prototype.accessed_at;case"PINNED_FILE":return null;case"OFFLINE_FILE":return new Date(e.file.lastUpdatedAt).toISOString();default:(0,i.xb)(e)}}static getTrashedAt(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.trashedAt?e.fileLG.trashedAt.toISOString():null;return e.file.trashed_at;case"PROTOTYPE":return e.prototype.fig_file.trashed_at;case"REPO":return e.repo.trashed_at;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getTrashedUser(e){switch(e.type){case"FILE":return{id:e.file.trashed_user_id,handle:e.file.trashed_user?.handle};case"PROTOTYPE":case"REPO":case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getIsFavorited(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return!!e.fileLG.isFavorited;return!!e.file.is_favorited;case"PROTOTYPE":return!!e.prototype.is_favorited;case"REPO":return!!e.repo.is_favorited;case"PINNED_FILE":case"OFFLINE_FILE":return!1;default:(0,i.xb)(e)}}static getFavoritedResourceType(e){switch(e.type){case"FILE":case"PINNED_FILE":case"REPO":case"OFFLINE_FILE":return m.bk.FILE;case"PROTOTYPE":return m.bk.PROTOTYPE;default:(0,i.xb)(e)}}static getFileKey(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.key;return e.file.key;case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return e.repo.default_file_key??void 0;case"OFFLINE_FILE":return;default:(0,i.xb)(e)}}static getUrl(e,r){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return(0,g.to)(e.fileLG);return(0,g.to)(e.file);case"PINNED_FILE":return(0,g.jN)(e);case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,d.mr)(e.repo,e.branches,r);return n?(0,d.CE)(n,e.repo,"file"):"";case"OFFLINE_FILE":return"";default:(0,i.xb)(e)}}static getEditUrl(e,r){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return(0,g.rl)(e.fileLG);return(0,g.rl)(e.file);case"PINNED_FILE":return(0,g.jN)({...e,allowDefaulting:!0});case"PROTOTYPE":return e.prototype.url;case"REPO":let n=(0,d.mr)(e.repo,e.branches,r);return n?(0,g.rl)(n):"";case"OFFLINE_FILE":return"";default:(0,i.xb)(e)}}static getFavoriteResourceId(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.key;return e.file.key;case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.id;case"REPO":return e.repo.default_file_key;case"OFFLINE_FILE":return e.file.fileKey;default:(0,i.xb)(e)}}static getIsTeamTemplate(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.isTeamTemplate;return e.file.is_team_template;case"PINNED_FILE":return e.file.isTeamTemplate;case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":return!1;default:(0,i.xb)(e)}}static getOrgId(e){switch(e.type){case"FILE":return e.file.parent_org?.id??e.file.parent_org_id;case"PINNED_FILE":return e.file.parentOrgId;case"PROTOTYPE":return e.prototype.fig_file.parent_org_id??e.prototype.fig_file.parent_org_id;case"REPO":return e.repo.parent_org?.id??e.repo.parent_org_id;case"OFFLINE_FILE":return e.file.orgId;default:(0,i.xb)(e)}}static getFavoriteResourceTeamId(e){switch(e.type){case"FILE":return e.file.parent_team?.id??e.file.team_id;case"PINNED_FILE":default:return null;case"PROTOTYPE":return e.prototype.parent_team?.id??e.prototype.fig_file?.team_id;case"REPO":return e.repo.parent_team?.id??e.repo.team_id}}static getSharedBy(e){switch(e.type){case"FILE":return e.file.shared_by_user?.id??e.file.shared_by;case"PROTOTYPE":return e.prototype.shared_by_user?.id??e.prototype.shared_by;case"REPO":return e.repo.shared_by_user?.id??e.repo.shared_by;case"PINNED_FILE":case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getSharedByName(e){switch(e.type){case"FILE":return e.file.shared_by_user?.name;case"PROTOTYPE":return e.prototype.shared_by_user?.name;case"REPO":return e.repo.shared_by_user?.name;case"PINNED_FILE":return(0,i.KF)(!0,"Cannot get shared by name from a pinned file"),null;case"OFFLINE_FILE":return(0,i.KF)(!0,"Cannot get shared by name from an offline file"),null;default:(0,i.xb)(e)}}static getOwner(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.owner;return e.file.owner;case"PINNED_FILE":case"PROTOTYPE":case"REPO":case"OFFLINE_FILE":(0,i.KF)(!0,"Did not expect to render owner for non-file tiles");return;default:(0,i.xb)(e)}}static useIsRenaming(e){let r=(0,s.md)(b);return v.isRenaming(e,r)}static isRenaming(e,r){if(!r)return!1;switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return"FILE"===r.type&&r.id===e.fileLG.key;return"FILE"===r.type&&r.id===e.file.key;case"OFFLINE_FILE":return"FILE"===r.type&&r.id===e.file.fileKey;case"REPO":return"REPO"===r.type&&r.id===e.repo.id;case"PINNED_FILE":case"PROTOTYPE":return!1;default:(0,i.xb)(e)}}static getIsPasswordProtected(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return(0,_.Ph)(e.fileLG);return(0,_.i4)(e.file);case"REPO":return(0,d.yR)(e.repo);case"PROTOTYPE":return(0,_.Uj)(e.prototype.fig_file)||(0,_.i4)(e.prototype.fig_file);case"PINNED_FILE":return(0,_.i4)({has_file_link_password:e.file.hasFileLinkPassword,link_access:e.file.linkAccess});case"OFFLINE_FILE":return!1;default:(0,i.xb)(e)}}static getFolderId(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.folderId;return e.file.folder_id;case"REPO":return e.repo.folder_id;case"PROTOTYPE":return e.prototype.fig_file.folder_id;case"PINNED_FILE":return e.file.folderId;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getTeamId(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.teamId;return e.file.team_id;case"PINNED_FILE":return e.file.teamId;case"PROTOTYPE":return e.prototype.parent_team?.id??null;case"REPO":return e.repo.team_id;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getThumbnailUrl(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.thumbnailUrlOverride??e.fileLG.thumbnailUrl;return e.file.thumbnail_url_override??e.file.thumbnail_url;case"REPO":let r=y(e);return r?r.thumbnail_url_override??r.thumbnail_url:null;case"PROTOTYPE":return e.prototype.thumbnail_url;case"PINNED_FILE":return e.file.thumbnailUrlOverride??e.file.thumbnailUrl;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getIsThumbnailFullWidth(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return!!e.fileLG.thumbnailGuid;return!!e.file.thumbnail_guid;case"REPO":let r=y(e);return r?r.thumbnail_guid:null;case"PROTOTYPE":return!0;case"PINNED_FILE":return!!e.file.thumbnailGuid;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}static getEditorType(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.editorType;return e.file.editor_type;case"REPO":return m._Y.DESIGN;case"PROTOTYPE":return null;case"PINNED_FILE":case"OFFLINE_FILE":return e.file.editorType;default:(0,i.xb)(e)}}static getClientMeta(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.clientMeta;return e.file.client_meta;case"REPO":let r=y(e);return r?r.client_meta:null;case"PROTOTYPE":case"OFFLINE_FILE":return null;case"PINNED_FILE":return e.file.clientMeta;default:(0,i.xb)(e)}}static getPreviewThumbnailUrls(e){return"FILE"===e.type?e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper?e.fileLG.signedPreviewThumbnailUrls:e.file.preview_thumbnail_urls:"REPO"===e.type?y(e)?.preview_thumbnail_urls:void 0}static getFileKeyForAutosaveChanges(e){switch(e.type){case"FILE":if(e.fileLG&&(0,a.kc)().types_convergence_generic_tile_wrapper)return e.fileLG.key;return e.file.key;case"PINNED_FILE":return e.file.key;case"PROTOTYPE":return e.prototype.file_key;case"REPO":return y(e)?.key;case"OFFLINE_FILE":return null;default:(0,i.xb)(e)}}}let I=(0,s.Iz)(e=>(0,o.eU)(r=>"FILE"===e.type||"PINNED_FILE"===e.type?r(p.sMs.Query({key:e.file.key})).transform(e=>!!e.file?.hasPermission):"REPO"===e.type?r(p.cfd.Query({repoId:e.repo.id})).transform(e=>!!l.oA(e.repo)?.canView):"PROTOTYPE"===e.type?r(p.eSI.Query({prototypeId:e.prototype.id})).transform(e=>!!l.oA(e.prototype)?.canRead):"OFFLINE_FILE"===e.type?c.Qw.loaded(!0):void(0,i.xb)(e)),v.sameObject),T={FILE:h.F.FILES,PROTOTYPE:h.F.PROTOTYPES,REPO:h.F.REPOS,PINNED_FILE:h.F.PINNED_FILES,OFFLINE_FILE:h.F.OFFLINE_FILES}},297174:(e,r,n)=>{n.d(r,{H:()=>_});var i=n(411855),a=n(75395),o=n(629019),s=n.n(o),l=n(163023),c=n(154254),d=n(693707),u=n(611978),m=n(776615),p=n(155108),h=n(366370);function _({children:e,large:r,brandTextColor:n,...o}){let _=(0,u._6)(),g=i.useRef(null);(0,d.Z)("light",g);let f=(0,m.ju)(_);return i.createElement("div",{ref:g,"data-editor-theme":f},i.createElement(a.E,{className:s()(p.x6,p.zB,r?p.as:p.Hg,n&&c.cx.colorTextBrand.$),...o},i.createElement("span",{className:p._d},i.createElement(l.B,{className:p.Kk,svg:h.A,useOriginalSrcFills_DEPRECATED:!0}),i.createElement("span",{className:p.IO},e))))}},813648:(e,r,n)=>{n.d(r,{LR:()=>E,_i:()=>b,kg:()=>y,ts:()=>f});var i=n(411855),a=n(188507),o=n(838516),s=n(922827),l=n(91408),c=n(572206),d=n(727749),u=n(902139),m=n(697551),p=n(501972),h=n(231472),_=n(816460),g=n(837746);function f(e,r=552,n=320){let[a,s]=i.useState(),[d,u]=i.useState(),[m,h]=i.useState(!1);return i.useLayoutEffect(()=>{let i=()=>{let i,a;switch(e.kind){case"mountCenter":i=window.innerWidth/2,a=window.innerHeight/2;break;case"buttonTarget":let o=(0,p.Tc)(e.buttonTarget);if(!o)return;let d=o.getBoundingClientRect();i=d.x+d.width/2,a=d.y;break;case"sourceRect":i=e.sourceRect.x+e.sourceRect.width/2,a=e.sourceRect.y}let u=i-n/2,f=a-r-12;window.innerWidth-u<n?(m||h(!0),u=window.innerWidth-n-_.wR):m&&h(!1),f=Math.max((0,l.hG)(g.tui)+_.wR,f),s(new c.Mi(u,f))};setTimeout(i,0);let a=(0,o.s)(i,100);return window.addEventListener("resize",a),()=>{window.removeEventListener("resize",a)}},[e,r,n,m]),{initialModalPosition:a,modalPosition:d,setModalPosition:u,modalWasClippedByRightSide:m}}function E(){let e=(0,a.wA)();return i.useCallback(()=>{s.glU&&s.glU.triggerAction("set-tool-default",null),e(u.KE())},[e])}function y(e){return e.mirror.appModel.currentTool===s.NLJ.NONE&&e.universalInsertModal.showing&&e.universalInsertModal.pinned===h.t.NOT_PINNED}function b(e,r,n,o){let s=(0,a.wA)(),l=(0,a.d4)(e=>(0,m.T9)({authedProfilesById:e.authedProfilesById,userId:e.user?.id}));return{unsave:i.useCallback(n=>{e&&s((0,d.s1)({id:e,resourceType:r,communityProfile:l||void 0,hideSuccessVisualBell:n,source:d.uR.INSERTS_MODAL,optimisticData:{pluginInstallId:o}}))},[e,s,r,l,o]),save:i.useCallback((i,a)=>{e&&s((0,d.d6)({id:e,resourceType:r,communityProfile:l||void 0,onSuccess:i,hideSuccessVisualBell:a,source:d.uR.INSERTS_MODAL,optimisticData:{resource:n}}))},[e,s,r,l,n])}}},318812:(e,r,n)=>{n.d(r,{BK:()=>l,Um:()=>s});var i=n(411855),a=n(188507),o=n(738269);function s(){return(0,a.d4)(e=>e.dropdownShown)}function l(e){let r=(0,a.wA)(),n=s();return(0,i.useMemo)(()=>{let{type:i,...a}=n||{},s=i===e;function l(){r(o.oB())}function c(n={}){r(o.j7({...n,type:e}))}return{...a,showing:s,hide:l,show:c,toggle:function(e={}){s?l():c(e)}}},[r,n,e])}(0,n(529928).bt)(e=>e.dropdownShown)},887811:(e,r,n)=>{n.d(r,{vD:()=>i}),n(939863),n(384162),n(555328);let i=(0,n(479296).n)(e=>(function(e){if(!e)return"OTH";let r={"software-development":"ENG","user-research":"UR",design:"DES",marketing:"MKT","product-management":"PM",other:"OTH"};if(e in r)return r[e];let n={"project-manager":"PM",designer:"DES",developer:"ENG",marketer:"MKT","product-manager":"PM",consultant:"OTH",sales:"MKT","ux-researcher":"UR",student:"OTH",educator:"OTH"};return e in n?n[e]:e.endsWith("-developer")?"ENG":e.endsWith("-designer")?"DES":e.includes("Eng")||e.includes("Dev")?"ENG":e.includes("Des")?"DES":e.includes("Lead")||e.includes("Man")?"PM":"OTH"})(e?.profile?.job_title??"OTH"))},112235:(e,r,n)=>{n.d(r,{$:()=>d});var i=n(411855),a=n(642822),o=n(965480),s=n(764151),l=n(99506),c=n(239671);function d(){let e=function(){let e=(0,o.tS)();return(0,i.useCallback)(r=>r.lastPublishedAt&&r.editorType===l._Y.DESIGN?a.y1.PUBLISHED:r.fileRepoId?a.y1.REPO:r.editorType===l._Y.WHITEBOARD?e&&r.isTeamTemplate?a.y1.TEMPLATE:a.y1.WHITEBOARD:"slides"===r.editorType?e&&r.isTeamTemplate?a.y1.SLIDES_TEMPLATE:a.y1.SLIDES:r.editorType===c.oQ?a.y1.SITES:r.editorType===c.sq?a.y1.COOPER:a.y1.DESIGN,[e])}();return(0,i.useCallback)(r=>e(s.F.toLiveGraph({is_team_template:!1,...r})),[e])}},29680:(e,r,n)=>{n.d(r,{B9:()=>v,KH:()=>h,T3:()=>p,aV:()=>E,ax:()=>_,dH:()=>f,eY:()=>m,f4:()=>g,p8:()=>y,q0:()=>b});var i=n(411855),a=n(188507);n(821910);var o=n(3360),s=n(922827),l=n(298455),c=n(408405);let d=e=>e?.mirror?.sceneGraph,u=()=>(0,a.Pj)();function m(){return(0,a.d4)(d)}function p(){return i.useMemo(()=>new l.qo(s.juq.PLAYGROUND),[])}let h=()=>(0,a.d4)(e=>e.mirror.sceneGraphSelection);function _(){return!(0,a.d4)(e=>(0,o.Im)(e.mirror.sceneGraphSelection))}function g(e){let r=u(),n=h(),a=(0,i.useRef)();a.current=()=>{e(r.getState())},(0,i.useEffect)(()=>{a.current()},[n])}function f(){return(0,a.d4)(e=>e?.mirror?.appModel?.currentTool)}function E(){return(0,a.d4)(e=>(0,c.T)(e?.progressBarState?.mode))}function y(e){return(0,a.d4)(r=>r.mirror.appModel[e])}let b=(0,i.createContext)(null);function v(){let e=(0,a.d4)(e=>e.mirror.sceneGraph);return(0,i.useContext)(b)||e}},678340:(e,r,n)=>{n.d(r,{KV:()=>v,P3:()=>f,Tm:()=>g,Wy:()=>m,Zz:()=>I,eE:()=>b,rq:()=>h,xk:()=>u});var i=n(922827),a=n(716034),o=n(418956),s=n(627472),l=n(860707),c=n(529928),d=n(447402);let u=60;var m=(e=>(e[e.SAFE=0]="SAFE",e[e.WARNING=1]="WARNING",e[e.ERROR=2]="ERROR",e[e.OOM=3]="OOM",e))(m||{});let p=(0,a.eU)(null);function h(e){}(0,a.eU)(e=>!!e(p));let _=(0,o.yu)((0,s.um)({mallocLevelBytes:0,heapMemoryLimit:1/0},()=>({mallocLevelBytes:(0,l.Yc)(),heapMemoryLimit:i.hMR.getHeapMemoryLimit()})),({setSelf:e})=>{e();let r=setInterval(e,5e3);return()=>clearInterval(r)}),g=(0,a.eU)(e=>{let{mallocLevelBytes:r,heapMemoryLimit:n}=e(_),i=e(p),a=r/n*100;return i&&(a=i),a=Math.round(100*(a=Math.max(0,a=Math.min(100,a)))+Number.EPSILON)/100},(e,r)=>{r(_)});function f(){return o.zl.set(g),o.zl.get(g)}let E=(0,c.bt)(e=>e.modalShown?.type===d.Lu),y=(0,a.eU)(e=>{let r=e(g);return e(E)?3:r>=75?2:r>=u?1:0},(e,r)=>{r(g)}),b=(0,o.Hj)(y,e=>i.glU.setMemoryWarningLevel(e));function v(e,r){return(0,l.Yc)()/r*e/i.hMR.getHeapMemoryLimit()}function I(){let e=i.Hcu.getSubtreeMemoryUsage(["0:2"]);return(0,l.Yc)()/i.Hcu.getSubtreeMemoryUsage(["0:0"])*e*100/i.hMR.getHeapMemoryLimit()}},479118:(e,r,n)=>{n.d(r,{Fy:()=>b,QR:()=>f,VI:()=>y,_Z:()=>g,lH:()=>E});var i=n(411855),a=n(188507),o=n(922827),s=n(298455),l=n(716034),c=n(418956),d=n(428654),u=n(168039),m=n(848661),p=n(100197),h=n(776615),_=n(554294);function g(){return function({selectedView:e,isLoadingVersionHistory:r,theme:n}){let a=e?.view==="prototype",l=a?null:(0,s.UN)().getCurrentPage(),u=i.useMemo(()=>l?.backgroundColor,[l]),g=!!(0,p.ut)(o.Ez5?.currentPageState().requestedPageChange,""),E=(0,c.md)(_.s6),y=(0,c.md)(_.rp),b=(0,c.md)(f),v=(0,c.md)(_.nc);return i.useMemo(()=>{let e;if(a)return{isLoading:!1};let i=(0,m.E7)(u);return(e=null!==i?d.F.format(i):n&&"dark"===(0,h.i_)(n)?"rgba(30, 30, 30, 1)":"rgba(229, 229, 229, 1)",null!=i?(i.a=.7,e=d.F.format(i)):e="rgba(229, 229, 229, 0.1)",E)?{background:e,isLoading:!1}:{background:e,isLoading:!!r||g||v||y||b,isLoadingMissingFonts:b}},[a,u,n,E,r,g,v,y,b])}({selectedView:(0,a.d4)(e=>e.selectedView),isLoadingVersionHistory:a.d4(e=>e.versionHistory)?.isLoadingPage,theme:(0,u.DP)()})}let f=(0,l.eU)(!1);function E(e){return e.some(e=>e.status!==o.xal.LOADED)}function y(e){return e.every(e=>e.status===o.xal.LOADED)}function b(e,r){for(let n of e)if(n.nodeId===r)return n.status;return null}},669178:(e,r,n)=>{n.d(r,{Dq:()=>f,g5:()=>g});var i=n(411855),a=n(188507);n(358145);var o=n(966712),s=n(915440),l=n(395281),c=n(632430),d=n(298527);n(416095);var u=n(279453),m=n(173454),p=n(372291);n(335682);var h=n(694687),_=n(860178);function g(e){let r=(0,a.d4)(e=>e.library),n=(0,p.Lm)(),s=(0,_.TA)(),l=(0,a.d4)(e=>e.recentlyUsed.libraryItems);return(0,i.useMemo)(()=>{let i=[],a=[];for(let c of l[e])if(null!==s?c.last_added_at_by_user_id?.[s]:void 0){if(c.type===m.PW.COMPONENT||c.type===m.PW.STATE_GROUP){let e=c.type===m.PW.COMPONENT?r.published.components[c.team_id]?.[c.file_key]?.[c.node_id]||r.defaultPublished.components[c.team_id]?.[c.file_key]?.[c.node_id]:c.type===m.PW.STATE_GROUP?r.published.stateGroups[c.team_id]?.[c.file_key]?.[c.node_id]||r.defaultPublished.stateGroups[c.team_id]?.[c.file_key]?.[c.node_id]:void 0;e&&i.push(e)}else if(c.type===m.PW.MODULE&&(0,o.kc)().dse_editor_templates_v1&&n.data){let e=function(e,r){return r[e.file_key]?.find(r=>r.node_id===e.node_id)}(c,n.data);e&&a.push(e)}}return{productComponents:i,templates:a}},[l,e,r,n,s])}function f(e){let r=(0,a.wA)(),n=(0,h.dq)(),o=!!e&&!!n,m=(0,d.n1)(),p=(0,s.Rs)(u.X9s,{teamId:e},{enabled:o});(0,i.useEffect)(()=>{if("loaded"===p.status&&o){let e=(p.data?.team?.workspace?.librarySubscriptions||[]).map(c.YD),n=(0,c.g1)(e,{ignoreCommunitySubs:!m});r(l.ve({subscriptions:n}))}},[r,m,p,o])}},499743:(e,r,n)=>{n.d(r,{p:()=>a});var i=n(188507);function a(){return(0,i.d4)(e=>e.sharingAttributionContextKey||null)}},737499:(e,r,n)=>{n.d(r,{BI:()=>c,F4:()=>d,Jj:()=>o,Jp:()=>l,Kx:()=>u,Rf:()=>a,Yi:()=>_,e8:()=>p,h4:()=>m,m0:()=>h,sc:()=>s});var i=n(563706);function a(){return window.FigmaMobile}function o(){return window.FigmaMobile}function s(){return o()}function l(){return window.FigmaMobile}function c(){return window.FigmaMobile}function d(){return window.FigmaMobile}function u(){return d()}function m(){return window.FigmaMobile}function p(){return window.FigmaMobile}function h(){return window.FigmaMobile}function _(e){let r=window.FigmaMobile;return"prototype"===e.view?i.Ay.isMobileBrowser&&!e.commentsEnabled:"fullscreen"===e.view&&!!r?.shouldOptimizeForIpadApp&&!e.commentsEnabled}},605328:(e,r,n)=>{n.d(r,{$P:()=>v,d0:()=>b,kn:()=>I});var i=n(411855),a=n(188507),o=n(821910),s=n(358145),l=n(860601),c=n(258786),d=n(975350),u=n(103907),m=n(356390),p=n(862442),h=n(457630),_=n(440535),g=n(911259),f=n(517911),E=n(514736),y=n(737499);function b(e,r,n,o,s){let c=(0,y.h4)(),g=(0,a.wA)(),f=(0,u.I_)(),b=(0,E.s)(),v=(0,p.Z)();i.useEffect(()=>{c&&(c._select_comment=e=>{let i=r.find(r=>r.id===e);i&&g(d.At({receiptsAPI:f.commentReceipts,thread:i,viewport:n,skipDeactivatingExistingActiveComment:!0,config:b,navigate:v}))})},[c,g,r,f,n,b,v]),i.useEffect(()=>{c&&(c._add_draft_comment=e=>{let r=(0,h.$$)(n.getViewportInfo(),e);g(d.vV({anchorPosition:r})),g(d.CX())})},[c,g,n]),i.useEffect(()=>{c&&(c._deselect_comment=e=>{g(d.UU())},c._remove_draft_comment=()=>{e===_.hm&&g(d.UU())})},[c,e,g]),i.useEffect(()=>{c&&(c._submit_comment_draft=e=>{g(d.Z5({messageMeta:e})),s()})},[c,e,g,s]),i.useEffect(()=>{c&&o&&(c._set_comments_visibility=e=>{m.Y5.triggerAction("toggle-show-comments",{source:"mobile_app"})})},[c,o]),i.useEffect(()=>{c&&(c._pan_canvas=e=>{let r=n.getViewportInfo();n.navigateTo({x:r.offsetX+e.x/r.zoomScale,y:r.offsetY+e.y/r.zoomScale},r.zoomScale)})},[c,n]),i.useEffect(()=>{c&&!c._recenter_comment&&(c._recenter_comment=l.lQ),c&&!c._recenter_draft_comment&&(c._recenter_draft_comment=l.lQ)},[c])}function v(e,r,n,l,c){let d=(0,y.sc)();i.useEffect(()=>{d?.updateCommentVisibility&&!l&&d.updateCommentVisibility(null!==c)},[d,l,c]);let u=(0,a.d4)(e=>e.comments.newComment),m=i.useMemo(()=>{if(e===_.hm){if(!u.anchorPosition)return null;{let e=(0,h.Z0)(n.getViewportInfo(),u.anchorPosition);return{x:e.x,y:e.y,width:36.8,height:36.8}}}let i=r.find(r=>r.id===e);if(!i||!i.canvasPosition)return null;let a=(0,h.Z0)(n.getViewportInfo(),i.canvasPosition),o=(0,f.c4)(i.comments).length,s=g.XC.getPinSize(o);return{x:a.x,y:a.y,width:1.15*s.width,height:1.15*s.height}},[e,u,r,n]),p=(0,s.ZC)(e),E=(0,s.ZC)(m);i.useEffect(()=>{e&&m&&e===p&&E&&!(0,o.c2)(m,E)&&(e===_.hm?d?.updateDraftCommentPinPosition?.(m):d?.updateCommentPinPosition?.(e,m))},[d,e,m,E,p])}function I(e,r){let n=(0,y.sc)(),a=i.useContext(c.W);i.useEffect(()=>{n?.updateCommentVisibility&&n.updateCommentVisibility(e)},[n,e]),i.useEffect(()=>{!e&&a&&r?.current&&(a.uninstallTapGestureRecognizer(r.current),a.uninstallMultiTouchLongPressGestureRecognizer(r.current,1))},[e,a,r])}},85098:(e,r,n)=>{n.d(r,{A8:()=>g,AD:()=>b,D4:()=>y,Py:()=>w,Q2:()=>_,Wq:()=>E,_i:()=>I,pl:()=>f,uC:()=>T,wF:()=>S});var i=n(411855),a=n(188507),o=n(966664),s=n(358145),l=n(966712),c=n(915440),d=n(711525),u=n(506599),m=n(226055),p=n(279453),h=n(335682);let _=4,g=8,f=22;function E(e){let r=(0,m.GS)(),n=y(),i=function(e){let{isPropertiesPanelCollapsed:r}=(0,u.iT)(),n=(0,l.kc)().async_spotlight?2:3;return!e||r?n:Math.max(n,Math.min(Math.floor(e/f),g))}(e);return r?i:n}function y(){let[e,r]=i.useState(_);return i.useEffect(()=>{let e=()=>{window.innerWidth<786?r(2):r(_)};return window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}},[]),e}function b(e){return"sessionID"in e}let v=e=>{let{user:r,sessionID:n,presenterSessionID:i,lastObservedSessionID:a,fileCreatorID:o,mostActiveSpeakerID:s,observingSessionID:c}=e;return b(r)&&r.sessionID===n?0:b(r)&&i&&r.sessionID===i?1:b(r)&&c&&r.sessionID===c?2:(0,l.kc)().live_feedback_large_meetings&&b(r)&&a&&r.sessionID===a?3:b(r)&&r.userID===o?4:r.userID===s?5:r.name.toLocaleLowerCase().startsWith("anonymous")?Number.MAX_SAFE_INTEGER:6};function I(e,r){let n=e;return r&&(n=n.filter(e=>b(e)&&e.deviceName===r)),n=n.filter(e=>!b(e)||"editor"!==e.deviceName||void 0===e.sawMouse||!0===e.sawMouse)}function T(e,r,n,l,c){let d=(0,a.d4)(e=>e.multiplayer.sessionID),u=(0,a.d4)(e=>e.multiplayer.observingSessionID),m=(0,a.d4)(e=>e.multiplayer.presenterSessionID),p=(0,a.d4)(e=>e.multiplayer.deviceNameFilter),_=(0,h.q5)(),[g,f]=i.useState(null),E=(0,s.ZC)(u);E!==u&&(0,o.Vq)(E)&&-1!==E&&E!==g&&f(E);let y=i.useMemo(()=>({sessionID:d,observingSessionID:u,presenterSessionID:m,lastObservedSessionID:g,mostActiveSpeakerID:c,fileCreatorID:_?.creatorId,deviceNameFilter:p}),[d,u,m,g,c,_?.creatorId,p]),{users:T,overflowUsers:S}=i.useMemo(()=>(function(e,r,n,i,a){let{deviceNameFilter:o}=a,s=[],l=[...e];return l&&0!==l.length?(l.sort((e,r)=>{let n=v({...a,user:e})-v({...a,user:r});if(0!==n)return n;let i=e.name.toLocaleLowerCase(),o=r.name.toLocaleLowerCase();return b(e)&&b(r)&&i===o?e.sessionID-r.sessionID:i>o?1:-1}),(l=I(l,o)).length>=i&&(s=l.slice(i-1),l=l.slice(0,i-1)),{users:l,overflowUsers:s}):r&&!n?{users:[r],overflowUsers:[]}:{users:[],overflowUsers:[]}})(e,r,n,l,y),[e,r,n,l,y]);return{users:T,overflowUsers:S}}function S(){let e=(0,h.q5)(),r=e?.key,n=(0,c.Rs)(p.JvY,{fileKey:r??""},{enabled:!!r&&(0,l.kc)().file_view_history});return i.useMemo(()=>{if("loaded"!==n.status)return;let e=(0,d.oA)(n.data?.file?.fileViewHistory),r=e?.map(e=>({userID:e.user.id,name:e.user.name,imageUrl:e.user.imgUrl,viewedAt:e.viewedAt}))||[];return r.sort((e,r)=>r.viewedAt.getTime()-e.viewedAt.getTime()),r.slice(0,50)},[n])}function w(e){return"viewedAt"in e}},335682:(e,r,n)=>{n.d(r,{As:()=>w,Cq:()=>k,Dz:()=>b,Hu:()=>S,MY:()=>v,XJ:()=>N,_G:()=>O,_S:()=>L,bv:()=>M,q5:()=>P,sS:()=>A,tB:()=>I,tS:()=>D,vu:()=>R,yV:()=>T,ze:()=>C});var i=n(188507),a=n(258214),o=(n(776250),n(358145),n(794272)),s=n(966712),l=n(716034),c=n(627472),d=n(418956),u=n(130097),m=n(915440),p=(n(752553),n(391388)),h=n(860601),_=n(529928);n(99506);var g=n(279453),f=n(693223),E=n(945020),y=n(479296);async function b(e){let r=e.getState().selectedView,n="fullscreen"===r.view&&r.fileKey;return n&&(await (0,u.Ek)(g.ehp,{fileKey:n})).file||null}function v(){let e=(0,i.d4)(e=>e.selectedView),r=e?.view==="fullscreen"?e.fileKey:void 0,n=(0,m.Rs)(g.ehp,{fileKey:r||""},{enabled:!!r});return p.Qw.useTransform(n,({file:e})=>e)}function I(e){return e.openFile}let T=(0,_.bt)(I),S=(0,l.eU)(e=>{let r=e(T),n=e(f.m);return r?.teamId?n[r.teamId]??null:null}),w=(0,c.mg)(T,e=>e?.teamId??void 0);function A(e){return e.openFile?.key||null}(0,c.mg)(T,e=>e?.team?.workspaceId??void 0);let C=(0,_.bt)(A);function N(e){let r=I(e);return r?(0,a.l)(r.libraryKey):null}let L=(0,_.bt)(N),O=(0,y.D)(()=>(0,d.md)(L));function R(e){return e.openFile?.key&&e.fileByKey[e.openFile.key]||null}let P=(0,s.kc)().preload_open_editor_file_data?function(){return function(){let e=(0,i.d4)(e=>e.selectedView?.view==="fullscreen"?e.selectedView.fileKey:null),r=(0,m.rp)((0,g.ehp)(e?{fileKey:e}:null));return p.Qw.useTransform(r,({file:e})=>e)}().data??null}:function(){return(0,i.d4)(I)},D=(0,y.D)(()=>P()?.key||null);function k(e){return M((0,o.R)(e=>({openFile:e.openFile,fileByKey:e.fileByKey})),e)}function M(e,r){let n=R(e);return r?.useSinatraType?n:n?(0,E.UE)(n):null}(0,s.kc)().preload_open_editor_file_data||h.lQ},594901:(e,r,n)=>{n.d(r,{AF:()=>l,FC:()=>s,h:()=>c,sj:()=>d});var i=n(188507);n(915440),n(711525),n(391388),n(279453);var a=n(147206),o=n(428467);function s(){return(0,i.d4)(o.getPermissionsState,i.bN)}function l(){return(0,i.d4)(e=>(0,a.Pq)({copyExportRestrictedArgs:e.openFile}))}function c(){return(0,i.d4)(e=>!!e.openFile&&(0,a.Pe)(e.openFile))}function d(e){let r=s();return(0,o.isFileFigjamDisabled)(e,r)}},754209:(e,r,n)=>{n.d(r,{$0:()=>k,By:()=>B,D_:()=>C,HG:()=>U,Lt:()=>L,Pi:()=>x,VA:()=>F,Ww:()=>D,c3:()=>N,dR:()=>M,oW:()=>P,y:()=>V});var i=n(411855),a=n(188507),o=n(140593),s=n(966664),l=n(922827),c=n(358145),d=n(418956),u=n(563706),m=n(489604),p=n(30637),h=n(153808),_=n(939863),g=n(392592),f=n(30686),E=n(964881),y=n(980820),b=n(293017),v=n(779709),I=n(843495),T=n(460289),S=n(611978),w=n(396462);let A=(0,p.nl)()?0:6e3;var C=(e=>(e.INITIAL="initial",e.NEXT="next",e))(C||{});let N=(0,y.nF)((e,r)=>{let n=e.getState().multiplayer.allUsers.find(e=>e.sessionID===r.presenterSessionID),i=n?.name??"",a=n?(0,_.t)("collaboration.spotlight.visual_bell.user_left_the_spotlight",{userName:i}):(0,_.t)("collaboration.spotlight.visual_bell.the_presenter_left_the_spotlight");e.dispatch(g.F.enqueue({message:a,type:"presentation_stopped_alert"}))}),L=(0,y.nF)((e,r)=>{e.dispatch(g.F.dequeue({matchType:"presentation_stopped_alert"}))}),O=(e,r,n,i)=>{let a=(0,s.Vq)(r)&&e!==r,o=n===r,l=i===r;return a&&!o&&!l};function R(){let e=(0,S.z3)(),r=(0,a.wA)(),n=(0,a.d4)(e=>e.multiplayer),o=i.useCallback(e=>{r(b.J4({...n,observingSessionID:e}))},[n,r]),s=i.useCallback(e=>{l.h3O.observeUser(e)},[]);return"prototype"===e?o:s}function P(e){let{multiplayer:{observingSessionID:r,presenterSessionID:n,sessionID:l}}=e,u=(0,a.wA)(),p=(0,S.z3)(),h=(0,d.md)(m.Dv),[_,g]=i.useState("initial"),f=(0,c.ZC)(n),E=r===n,y=l===n||h,b=O(f,n,r,l),[v,T]=i.useState(null);i.useEffect(()=>{let e=null;return null!=v&&(e=setTimeout(()=>T(null),1e3)),()=>{e&&clearTimeout(e)}},[v]);let C=R(),P=i.useCallback(()=>{(0,s.Vq)(n)&&("prototype"!==p&&(0,I.wr)(),C(n))},[n,C,p]),D=i.useCallback(()=>{P(),n&&T(n)},[n,P]);v===r&&T(null);let{isActive:k,start:M,cancel:F,complete:x}=(0,w.Z)(D),U=i.useCallback(()=>{F(),T(null)},[F]),B=b&&r===f,V=b&&!B,G=(0,s.uy)(n)&&(0,s.Vq)(f)&&r===f;k&&y&&U(),i.useEffect(()=>{B&&(u(L()),M(2e3),g("next"))},[u,B,M]),i.useEffect(()=>{V&&(u(L()),M(A),g("initial"))},[u,V,M]),i.useEffect(()=>{G&&(C(-1),U(),u(N({presenterSessionID:f})))},[U,u,f,G,e.multiplayer,C]),i.useEffect(()=>{k&&E&&U()},[E,U,k]);let H=(()=>{switch(_){case"next":return 2e3;case"initial":return A;default:(0,o.xb)(_)}})();return{isAutoFollowPending:!y&&(V||B||k||null!=v),cancelAutoFollowCallback:U,completeAutoFollowCallback:x,observeCurrentPresenter:P,autoFollowType:_,autoFollowDelayMs:H}}function D(){let e=(0,a.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.sessionID)??null}function k(){let e=(0,a.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.observingSessionID)??null}function M(){let e=(0,a.d4)(e=>e.multiplayer);return e.allUsers.find(r=>r.sessionID===e.presenterSessionID)??null}function F({multiplayer:e}){let r=function(){let e=U(),r=(0,T.XM)(),n=(0,E.hA)(),i=(0,E.l7)(),a=(0,f.e)();return!!e&&!r&&!n&&!i&&!a}(),n=e.presenterSessionID===e.sessionID,a=(0,S.z3)(),o=i.useCallback(()=>{"prototype"===a?h.hk()?.stopPresenting():l.h3O.stopPresenting()},[a]);i.useEffect(()=>{!r&&n&&o()},[r,n,o])}function x({multiplayer:e}){let r=R(),n=!B(),a=-1!==e.observingSessionID;i.useEffect(()=>{!n&&a&&r(-1)},[n,a,r])}function U(){return!((0,u.o4)()&&(0,u.Q1)()&&!(0,u.wg)()||v.z4?.getIsExtension())}function B(){let e=(0,T.XM)(),r=(0,T.e2)(),n=(0,E.hA)(),i=(0,E.l7)();return!!e||!!r||!!n||!!i}function V(){let e=(0,a.d4)(e=>e.multiplayer),r=e.sessionsNominatingCurrentUser[0];return r?e.allUsers.find(e=>e.sessionID===r)??null:null}},7e3:(e,r,n)=>{n.d(r,{TN:()=>l});var i=n(188507),a=n(428467),o=n(746869),s=n(106472);function l(e){let r=!!(0,s.q)({teamId:e,flag:o.uU}),n=(0,i.d4)(r=>r.teams[e]),l=(0,i.d4)(e=>(0,a.getPermissionsStateMemoized)(e));return o.ng.getProTrial(n,r,l)}},161325:(e,r,n)=>{n.d(r,{Fl:()=>b,ug:()=>I,wW:()=>E});var i=n(411855),a=n(188507),o=n(794272);n(567837);var s=n(30637),l=n(182976),c=n(337111),d=n(860178),u=n(336599),m=n(516056),p=n(547807);new class{constructor(){this.BatchedSchemaValidator=(0,p.vh)()}getBatched(e){return this.BatchedSchemaValidator.validate(async({xr:r})=>await r.get("/api/users/batched",p.td.toAPIParameters({userIds:e.userIds.join(",")})))}};let h=e=>r=>e&&r.publicUsers.byId[e]||null,_=e=>r=>{let n=r.multiplayer.allUsers.find(r=>r.userID===e);return n?v(n):null},g=e=>r=>{let n=r.user,i=_(e)(r);return n&&n.id===e?n:i||null},f=e=>r=>{let n=g(e)(r),i=h(e)(r);return n||i||null};function E(e){let r=(0,o.R)(g(e)),n=function(e){let r=(0,a.wA)(),n=`PUBLIC_USER_FETCH_${e}`,o=(0,a.d4)(e=>e.loadingState),s=(0,a.d4)(h(e)),m=function(e){let r=!!(0,d.iZ)();return!!e&&!b(e)&&r}(e),p=!!s,_=!p&&(0,u.VP)(o,n),g=!p&&(0,u.aF)(o,n),f=!p&&m&&!_&&!g;return(0,i.useEffect)(()=>{f&&(r(l.Cx({key:n})),y(e).then(e=>{r(c.yJ({user:e})),r(l.yH({key:n}))}).catch(()=>{r(l.of({key:n}))}))},[r,e,f,n]),{user:s,loading:_,hasError:g}}(r?null:e);return r?{user:r,loading:!1,hasError:!1}:n}let y=e=>m.k.getUser({userId:e}).then(e=>e.data.meta).catch(e=>{throw(0,s.Lg)()||console.warn("Failed to get public user"),e}),b=e=>e.startsWith("VISITOR-"),v=e=>({id:e.userID,name:e.name,handle:e.name,img_url:e.imageURL});async function I({state:e,dispatch:r,userId:n}){let i=f(n)(e);if(i)return i;if(b(n))return null;let a=e.user,o=b(n);if(!(!i&&!o&&a))return null;let s=await y(n);return r(c.yJ({user:s})),s}},993285:(e,r,n)=>{n.d(r,{N:()=>a});var i=n(411855);function a(e,r=!0){(0,i.useEffect)(()=>{if(!r)return;let n=!0,i=performance.now(),a=r=>{if(!n)return;let o=r-i;i=r,e(o),requestAnimationFrame(a)};return requestAnimationFrame(a),()=>{n=!1}},[r,e])}},263908:(e,r,n)=>{n.d(r,{M:()=>u});var i=n(411855),a=n(109388),o=n(629019),s=n.n(o),l=n(864089),c=n(99944),d=n(28752);function u(e){if(!e.dragState?.dragPosition||!e.dragState?.dragOffset)return null;let r=e.dragState.dragPosition.subtract(e.dragState.dragOffset),n=(0,c.AE)(e.dragState.draggingResource);return(0,a.createPortal)(void 0!==e.icon?i.createElement("div",{className:s()(d.Az,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y}},e.icon):i.createElement(l.oW,{src:n,alt:"",className:s()(d._D,{[d.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:r.x,top:r.y,width:e.dragState.draggingThumbSize?.x,height:e.dragState.draggingThumbSize?.y},draggable:!1}),document.getElementById("fullscreen-root"))}},14494:(e,r,n)=>{n.d(r,{V7:()=>s});var i=n(140593);let a=["Table","CodeBlock","MindMap","Text","Section"],o=["Timer","Image","Link"];function s(e){return"string"==typeof e&&a.includes(e)||"string"==typeof e&&o.includes(e)?e:"object"==typeof e&&e.id&&e.name&&e.img?"FaceStamp":void(0,i.xb)(e)}},99944:(e,r,n)=>{n.d(r,{AE:()=>_,E:()=>g,Ik:()=>f});var i=n(140593),a=n(966712),o=n(964937),s=n(153234),l=n(939863),c=n(809831),d=n(867795),u=n(161405),m=n(626510),p=n(57150),h=n(14494);function _(e){switch(e){case"Table":return(0,a.ck)("ac41ded88c50f0359c02ec3927394b7b33e210b6");case"CodeBlock":return(0,a.ck)("8a035152916712353b045f442c2c6c5879ef3e17");case"MindMap":return(0,a.ck)("1dd4c6f9e1fbf269895ee58e7be79d9f9ee79b9e");default:return""}}function g(e){switch(e){case"Table":return(0,l.t)("whiteboard.inserts.table_title");case"CodeBlock":return(0,l.t)("whiteboard.inserts.code_block_title");case"MindMap":return(0,l.t)("whiteboard.inserts.mind_map_title");case"Text":return(0,l.t)("whiteboard.inserts.text_title");case"Section":return(0,l.t)("whiteboard.inserts.section_title");default:(0,i.xb)(e)}}function f(e){let r="whiteboard"===(0,c.lg)(),n=(0,u.F5)(),i=(0,h.V7)(e.resource),a=async a=>(e.insertAction(a),r&&(0,u.oM)({type:d.p.MORE,id:i,source:e.triggeredFrom,options:{...n,query:e.searchQuery}}),await Promise.resolve());return(0,m.t)(e,{insertAction:a,dragPreviewPointerPosition:p.N.CENTERED,getDragPreviewSrc:e.icon?()=>"data:image/svg+xml;utf8,"+(0,o.F)(e.icon):()=>_(e.resource),recordingKey:s.Pt(e.triggeredFrom,"whiteboardResource",i)})}},698993:(e,r,n)=>{n.d(r,{S:()=>i}),n(411855),n(188507),n(922827),n(83783),n(794272),n(256975),n(964881),n(988022),n(507956),n(335682);function i(e){}},102310:(e,r,n)=>{n.d(r,{B:()=>s});var i=n(794272),a=n(507877),o=n(594901);function s(e){let r=(0,o.FC)(),n=(0,i.R)(r=>({selectedView:e?a.gN(e).payload:r.selectedView,currentOrgId:r.currentUserOrgId,orgById:r.orgById,currentTeamId:r.currentTeamId,teams:r.teams}));return{...r,...n}}},499777:(e,r,n)=>{n.d(r,{Xo:()=>l}),n(411855);var i=n(188507),a=n(418956),o=n(716034);n(293017);let s=(0,n(529928).bt)(e=>e.pickerShown);function l(){return(0,i.d4)(e=>e.pickerShown)}(0,a.Iz)(e=>(0,o.eU)(r=>{let n=r(s);return n?.id===e}))},193212:(e,r,n)=>{n.d(r,{U3:()=>s,aq:()=>o});var i=n(411855),a=n(821910);function o(){let e=i.useRef(!1);return i.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),i.useCallback(()=>e.current,[])}function s(e,r,n){let o=function(e,r){let n=i.useRef(null),a=r(e,n.current);return i.useEffect(()=>{a||(n.current=e)}),a?n.current:e}(n,a.c2);i.useEffect(()=>(window.addEventListener(e,r,o),()=>{window.removeEventListener(e,r,o)}),[e,r,o])}},801387:(e,r,n)=>{n.d(r,{Au:()=>p,LM:()=>g,P:()=>h,eO:()=>m,z4:()=>_});var i=n(411855);n(561546);var a=n(915440),o=n(711525),s=n(391388),l=n(99506),c=n(279453),d=n(139961),u=n(231959);function m(e){let r=e?.baseOrgUser?.workspaceUsers,n=r?.find(e=>e.isMainWorkspace);return n?.workspaceId??null}function p(e){let r=(0,a.Rs)(c.TKM,{orgId:e});return s.Qw.useTransform(r,e=>m(e.currentUser))}function h(e,r){let n=(0,a.Rs)(c.aON,{orgId:e??"",workspaceId:r??""},{enabled:!!e&&!!r});return null===r?(0,o.gB)(u.O):n.transform(e=>e.workspace)}var _=(e=>(e[e.IS_GUEST=1]="IS_GUEST",e[e.WRONG_WORKSPACE=2]="WRONG_WORKSPACE",e[e.TEAM_CREATION_CONTROL=3]="TEAM_CREATION_CONTROL",e[e.LG_LOADING=4]="LG_LOADING",e))(_||{});function g(e,r){let n=(0,a.Rs)(c.Pn8,{orgId:e?.id??null}),{permission:o,workspaceMember:s,canCreateTeamInWorkspace:u,teamCreationControls:m,loading:p}=i.useMemo(()=>{if("loaded"!==n.status)return{permission:l._D.GUEST,workspaceMember:null,canCreateTeamInWorkspace:!1,loading:!0};let e=n.data?.currentUser?.baseOrgUser,i=e?.permission;return{permission:i,workspaceMember:e?.workspaceUsers?.find(e=>e.isMainWorkspace),canCreateTeamInWorkspace:!!n.data?.org?.workspaces?.find(e=>e.canCreateTeam&&e.id===r),teamCreationControls:n.data?.org?.sharedOrgLicenseGroupSetting?.teamCreationControls,loading:!1}},[n,r]);if(p)return{canCreateTeam:!1,cannotCreateTeamReason:4};let h=m===d.$q.TEAM_CREATION_CONTROLS_ADMIN_ONLY;return o===l._D.GUEST?{canCreateTeam:!1,cannotCreateTeamReason:1}:o===l._D.ADMIN?{canCreateTeam:!0,cannotCreateTeamReason:null}:o!==l._D.MEMBER?{canCreateTeam:!1,cannotCreateTeamReason:null}:r?u?{canCreateTeam:!0,cannotCreateTeamReason:null}:s?.workspaceId!==r?{canCreateTeam:!1,cannotCreateTeamReason:2}:h?{canCreateTeam:!1,cannotCreateTeamReason:3}:{canCreateTeam:!1,cannotCreateTeamReason:null}:s?{canCreateTeam:!1,cannotCreateTeamReason:2}:h?{canCreateTeam:!1,cannotCreateTeamReason:3}:{canCreateTeam:!0,cannotCreateTeamReason:null}}},820642:(e,r,n)=>{n.d(r,{HF:()=>x,M3:()=>w,Rj:()=>P,Vz:()=>B,a6:()=>A,al:()=>D,bH:()=>M,cU:()=>k,cp:()=>L,ow:()=>N,pt:()=>T,re:()=>I,t0:()=>F,vK:()=>R,x0:()=>C,yS:()=>O,zv:()=>U});var i=n(140593),a=n(922827),o=n(133537),s=n(737947),l=n(498750),c=n(96328),d=n(939863),u=n(837324),m=n(466636),p=n(782501),h=n(99506),_=n(23001),g=n(813408),f=n(637590),E=n(501256),y=n(697551),b=n(132135);let v={id:"",hub_file_id:"",fig_file_version_id:"",name:"",version:"",release_notes:"",description:"",creator_policy:"",created_at:"",valid_prototype:!0,thumbnail_guid:null},I={id:"",category_id:null,creator:{id:"",handle:"",img_url:""},publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:g.o1.USER,badges:[],description:""},community_publishers:{accepted:[],pending:[]},versions:{},current_hub_file_version_id:"",redirect_canvas_url:"",thumbnail_url:"",created_at:"",unpublished_at:null,duplicate_count:0,like_count:0,view_count:0,comment_count:0,viewer_mode:h.y4.CANVAS,scaling_mode:null,realtime_token:"",client_meta:"",tags:[],thumbnail_is_set:!1,comments_setting:null,publishing_status:h.KB.APPROVED_PUBLIC,badges:[]};var T=(e=>(e.KEY="is-community-duplicate",e.VALUE="1",e))(T||{}),S=(e=>(e.CURRENT_FILE="currentFile",e.NEW_FILE="newFile",e))(S||{});function w(e,r){return(0,y.Hc)(e,r,I)}function A(e,r){let n=r||e.current_hub_file_version_id;return(0,y.Hc)(n,e.versions,v)}function C(e){if(!e)return h.y4.CANVAS;switch(e){case h._Y.DESIGN:return h.y4.CANVAS;case h._Y.WHITEBOARD:return h.y4.WHITEBOARD;case h._Y.SLIDES:return h.y4.SLIDE_TEMPLATE;case h._Y.SITES:return h.y4.SITE_TEMPLATE;case h._Y.COOPER:return h.y4.CANVAS;default:(0,i.xb)(e)}}function N(e,r,n,i){let o;let s=e.figFilePublishedAsHubFile[r],l=w(s,e.hubFiles),c=A(l),g=y.b,f=e.fileByKey[r];!i&&!n&&(e.authedActiveCommunityProfile?.team_id||e.authedActiveCommunityProfile?.org_id)&&(o=(0,p.Tn)(e.authedActiveCommunityProfile));let b=(0,p.gO)(l,f,e,o),v=n?l.viewer_mode:C(f.editor_type);!n&&l.viewer_mode===h.y4.PROTOTYPE&&i&&a.X3B?.firstPagePrototypeStatus()===a.bOM.VALID&&(v=h.y4.PROTOTYPE);let I=[];s&&l?.tags?I=l.tags:f?.editor_type==="whiteboard"&&(I=["figjam"]);let T={...(0,E.Rs)(),tokens:I.map(e=>({state:_.d.OK,content:e}))},S={...(0,E.Rs)(),tokens:(l.community_publishers?[...l.community_publishers.accepted,...l.community_publishers.pending||[]]:[]).reduce((r,n)=>{let i=e.authedProfilesById[n.id];return(0,p.Ii)(i,b)?r:r.concat([{state:_.d.OK,content:n}])},[])};return{name:c.name||(f.name===(0,d.t)("fullscreen.fullscreen_view_selector.untitled")?"":f.name),description:c.description||g.description,categoryId:l.category_id,creatorPolicy:c.creator_policy||g.creatorPolicy,tags:T,viewerMode:v,scalingMode:l.scaling_mode,author:b,publishers:S,commentsSetting:l.comments_setting||g.commentsSetting,blockPublishingOnToS:(0,p.xw)(e),price:(0,m.vf)(l.monetized_resource_metadata),isPaid:!!l.monetized_resource_metadata,supportContact:l.support_contact||e.user?.email,carouselMedia:(0,u.N6)(l),coverImageCarouselMediaId:l.cover_image_carousel_media_id}}function L(e,r){return e?r?(0,m.Yp)(r)?r<m.mZ?(0,d.t)("community.seller.paid_resource_minimum_err"):(0,d.t)("community.seller.paid_resource_maximum_err"):(0,m.F8)(r)?(0,d.t)("community.seller.prices_must_follow_format"):void 0:(0,d.t)("community.publishing.price_is_required_for_paid_resources"):void 0}function O(e){let r=(0,y.Yp)(e||null).length;return 0===r?(0,d.t)("community.publishing.name_must_not_be_empty"):r<4?(0,d.t)("community.publishing.name_must_be_4_characters_long"):r>100?(0,d.t)("community.publishing.name_must_be_at_most_100_characters_long"):void 0}function R(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.description_must_be_at_most_10000_characters_long")}function P(e){if((0,y.Yp)(e||null).length>1e4)return(0,d.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")}function D(e,r){return e&&!r?(0,d.t)("community.publishing.support_contact_must_not_be_empty"):!r||(0,o.xf)(r)||(0,c.gU)(r)?void 0:(0,d.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")}function k(e){if(!e)return(0,d.t)("community.publishing.category_cant_be_empty")}function M(e,r){let n={name:O(e.name),description:R(e.description),creatorPolicy:P(e.creatorPolicy)};e.tags&&(r?n.tags=(0,y.Dp)(e.tags,(0,y.V4)(r,e.categoryId??""),r.flatMap(e=>e.tags)):n.tags=(0,y.Wh)(e.tags)??void 0),e.publisherIds&&(n.publisherIds=(0,y.IZ)(e.publisherIds.length)||void 0),n.carouselMedia=(0,p.vC)(e.carouselMedia),n.categoryId=k(e.categoryId);let i="isPaid"in e&&!!e.isPaid;return n.price=L(i,e.price),n.supportContact=D(i,e.supportContact),Object.keys(n).forEach(e=>!n[e]&&delete n[e]),n}function F(e){return e===f.G4.FULLSCREEN||e===f.G4.FULLSCREEN_WITH_COMMENTS}function x(e){return!!e&&!e.unpublished_at}function U(e){return!!e&&e.publishing_status===h.KB.APPROVED_PUBLIC}function B(e){let r=(0,b.X$)(e);return(0,l.Gc)(e=>{e?.preventDefault(),s.Ay.redirect(r,"_blank")})}},889973:(e,r,n)=>{n.d(r,{Z:()=>a});var i=n(126911);function a(e,r=!1){let n=e.deltaY,o=e.ctrlKey&&!r&&(i.y.isChrome()||i.y.isFirefox());return o?n/=-100:0!==n&&(n=n/Math.abs(n)*Math.min(Math.abs(n),10*Math.cbrt(Math.abs(n)))),o?Math.pow(4,n):Math.pow(.995,n)}},593803:(e,r,n)=>{n.d(r,{FB:()=>l,UA:()=>i,W4:()=>o,Wg:()=>s,s3:()=>c,sf:()=>a});let i=[["Afghanistan","AF"],["\xc5land Islands","AX"],["Albania","AL"],["Algeria","DZ"],["American Samoa","AS"],["Andorra","AD"],["Angola","AO"],["Anguilla","AI"],["Antarctica","AQ"],["Antigua and Barbuda","AG"],["Argentina","AR"],["Armenia","AM"],["Aruba","AW"],["Australia","AU"],["Austria","AT"],["Azerbaijan","AZ"],["Bahamas","BS"],["Bahrain","BH"],["Bangladesh","BD"],["Barbados","BB"],["Belarus","BY"],["Belgium","BE"],["Belize","BZ"],["Benin","BJ"],["Bermuda","BM"],["Bhutan","BT"],["Bolivia (Plurinational State of)","BO"],["Bonaire, Sint Eustatius and Saba","BQ"],["Bosnia and Herzegovina","BA"],["Botswana","BW"],["Bouvet Island","BV"],["Brazil","BR"],["British Indian Ocean Territory","IO"],["Brunei Darussalam","BN"],["Bulgaria","BG"],["Burkina Faso","BF"],["Burundi","BI"],["Cabo Verde","CV"],["Cambodia","KH"],["Cameroon","CM"],["Canada","CA"],["Cayman Islands","KY"],["Central African Republic","CF"],["Chad","TD"],["Chile","CL"],["China","CN"],["Christmas Island","CX"],["Cocos (Keeling) Islands","CC"],["Colombia","CO"],["Comoros","KM"],["Congo","CG"],["Congo (Democratic Republic of the)","CD"],["Cook Islands","CK"],["Costa Rica","CR"],["C\xf4te d'Ivoire","CI"],["Croatia","HR"],["Cuba","CU"],["Cura\xe7ao","CW"],["Cyprus","CY"],["Czechia","CZ"],["Denmark","DK"],["Djibouti","DJ"],["Dominica","DM"],["Dominican Republic","DO"],["Ecuador","EC"],["Egypt","EG"],["El Salvador","SV"],["Equatorial Guinea","GQ"],["Eritrea","ER"],["Estonia","EE"],["Eswatini","SZ"],["Ethiopia","ET"],["Falkland Islands (Malvinas)","FK"],["Faroe Islands","FO"],["Fiji","FJ"],["Finland","FI"],["France","FR"],["French Guiana","GF"],["French Polynesia","PF"],["French Southern Territories","TF"],["Gabon","GA"],["Gambia","GM"],["Georgia","GE"],["Germany","DE"],["Ghana","GH"],["Gibraltar","GI"],["Greece","GR"],["Greenland","GL"],["Grenada","GD"],["Guadeloupe","GP"],["Guam","GU"],["Guatemala","GT"],["Guernsey","GG"],["Guinea","GN"],["Guinea-Bissau","GW"],["Guyana","GY"],["Haiti","HT"],["Heard Island and McDonald Islands","HM"],["Holy See","VA"],["Honduras","HN"],["Hong Kong","HK"],["Hungary","HU"],["Iceland","IS"],["India","IN"],["Indonesia","ID"],["Iran (Islamic Republic of)","IR"],["Iraq","IQ"],["Ireland","IE"],["Isle of Man","IM"],["Israel","IL"],["Italy","IT"],["Jamaica","JM"],["Japan","JP"],["Jersey","JE"],["Jordan","JO"],["Kazakhstan","KZ"],["Kenya","KE"],["Kiribati","KI"],["Korea (Democratic People's Republic of)","KP"],["Korea (Republic of)","KR"],["Kuwait","KW"],["Kosovo","XK"],["Kyrgyzstan","KG"],["Lao People's Democratic Republic","LA"],["Latvia","LV"],["Lebanon","LB"],["Lesotho","LS"],["Liberia","LR"],["Libya","LY"],["Liechtenstein","LI"],["Lithuania","LT"],["Luxembourg","LU"],["Macao","MO"],["Macedonia (the former Yugoslav Republic of)","MK"],["Madagascar","MG"],["Malawi","MW"],["Malaysia","MY"],["Maldives","MV"],["Mali","ML"],["Malta","MT"],["Marshall Islands","MH"],["Martinique","MQ"],["Mauritania","MR"],["Mauritius","MU"],["Mayotte","YT"],["Mexico","MX"],["Micronesia (Federated States of)","FM"],["Moldova (Republic of)","MD"],["Monaco","MC"],["Mongolia","MN"],["Montenegro","ME"],["Montserrat","MS"],["Morocco","MA"],["Mozambique","MZ"],["Myanmar","MM"],["Namibia","NA"],["Nauru","NR"],["Nepal","NP"],["Netherlands","NL"],["New Caledonia","NC"],["New Zealand","NZ"],["Nicaragua","NI"],["Niger","NE"],["Nigeria","NG"],["Niue","NU"],["Norfolk Island","NF"],["Northern Mariana Islands","MP"],["Norway","NO"],["Oman","OM"],["Pakistan","PK"],["Palau","PW"],["Palestine, State of","PS"],["Panama","PA"],["Papua New Guinea","PG"],["Paraguay","PY"],["Peru","PE"],["Philippines","PH"],["Pitcairn","PN"],["Poland","PL"],["Portugal","PT"],["Puerto Rico","PR"],["Qatar","QA"],["R\xe9union","RE"],["Romania","RO"],["Russian Federation","RU"],["Rwanda","RW"],["Saint Barth\xe9lemy","BL"],["Saint Helena, Ascension and Tristan da Cunha","SH"],["Saint Kitts and Nevis","KN"],["Saint Lucia","LC"],["Saint Martin (French part)","MF"],["Saint Pierre and Miquelon","PM"],["Saint Vincent and the Grenadines","VC"],["Samoa","WS"],["San Marino","SM"],["Sao Tome and Principe","ST"],["Saudi Arabia","SA"],["Senegal","SN"],["Serbia","RS"],["Seychelles","SC"],["Sierra Leone","SL"],["Singapore","SG"],["Sint Maarten (Dutch part)","SX"],["Slovakia","SK"],["Slovenia","SI"],["Solomon Islands","SB"],["Somalia","SO"],["South Africa","ZA"],["South Georgia and the South Sandwich Islands","GS"],["South Sudan","SS"],["Spain","ES"],["Sri Lanka","LK"],["Sudan","SD"],["Suriname","SR"],["Svalbard and Jan Mayen","SJ"],["Sweden","SE"],["Switzerland","CH"],["Syrian Arab Republic","SY"],["Taiwan","TW"],["Tajikistan","TJ"],["Tanzania, United Republic of","TZ"],["Thailand","TH"],["Timor-Leste","TL"],["Togo","TG"],["Tokelau","TK"],["Tonga","TO"],["Trinidad and Tobago","TT"],["Tunisia","TN"],["Turkey","TR"],["Turkmenistan","TM"],["Turks and Caicos Islands","TC"],["Tuvalu","TV"],["Uganda","UG"],["Ukraine","UA"],["United Arab Emirates","AE"],["United Kingdom of Great Britain and Northern Ireland","GB"],["United States of America","US"],["United States Minor Outlying Islands","UM"],["Uruguay","UY"],["Uzbekistan","UZ"],["Vanuatu","VU"],["Venezuela (Bolivarian Republic of)","VE"],["Viet Nam","VN"],["Virgin Islands (British)","VG"],["Virgin Islands (U.S.)","VI"],["Wallis and Futuna","WF"],["Western Sahara","EH"],["Yemen","YE"],["Zambia","ZM"],["Zimbabwe","ZW"]],a=["CU","IR","KP","SY"],o=[["Alabama","AL"],["Alaska","AK"],["Arizona","AZ"],["Arkansas","AR"],["California","CA"],["Colorado","CO"],["Connecticut","CT"],["Delaware","DE"],["Florida","FL"],["Georgia","GA"],["Hawaii","HI"],["Idaho","ID"],["Illinois","IL"],["Indiana","IN"],["Iowa","IA"],["Kansas","KS"],["Kentucky","KY"],["Louisiana","LA"],["Maine","ME"],["Maryland","MD"],["Massachusetts","MA"],["Michigan","MI"],["Minnesota","MN"],["Mississippi","MS"],["Missouri","MO"],["Montana","MT"],["Nebraska","NE"],["Nevada","NV"],["New Hampshire","NH"],["New Jersey","NJ"],["New Mexico","NM"],["New York","NY"],["North Carolina","NC"],["North Dakota","ND"],["Ohio","OH"],["Oklahoma","OK"],["Oregon","OR"],["Pennsylvania","PA"],["Rhode Island","RI"],["South Carolina","SC"],["South Dakota","SD"],["Tennessee","TN"],["Texas","TX"],["Utah","UT"],["Vermont","VT"],["Virginia","VA"],["Washington","WA"],["West Virginia","WV"],["Wisconsin","WI"],["Wyoming","WY"],["District of Columbia","DC"],["American Samoa","AS"],["Guam","GU"],["Northern Mariana Islands","MP"],["Puerto Rico","PR"],["United States Minor Outlying Islands","UM"],["Virgin Islands, U.S.","VI"],["Armed Forces (AA)","AA"],["Armed Forces (AE)","AE"],["Armed Forces (AP)","AP"]].sort((e,r)=>e[1].localeCompare(r[1])),s=[["Alberta","AB"],["British Columbia","BC"],["Manitoba","MB"],["New Brunswick","NB"],["Newfoundland and Labrador","NL"],["Nova Scotia","NS"],["Nunavut","NU"],["Ontario","ON"],["Prince Edward Island","PE"],["Quebec","QC"],["Saskatchewan","SK"],["Northwest Territories","NT"],["Yukon","YT"]].sort((e,r)=>e[1].localeCompare(r[1])),l=[["Andhra Pradesh","AP"],["Arunachal Pradesh","AR"],["Assam","AS"],["Bihar","BR"],["Chhattisgarh","CT"],["Goa","GA"],["Gujarat","GJ"],["Haryana","HR"],["Himachal Pradesh","HP"],["Jharkhand","JH"],["Karnataka","KA"],["Kerala","KL"],["Madhya Pradesh","MP"],["Maharashtra","MH"],["Manipur","MN"],["Meghalaya","ML"],["Mizoram","MZ"],["Nagaland","NL"],["Odisha","OR"],["Punjab","PB"],["Rajasthan","RJ"],["Sikkim","SK"],["Tamil Nadu","TN"],["Telangana","TG"],["Tripura","TR"],["Uttar Pradesh","UP"],["Uttarakhand","UT"],["West Bengal","WB"],["Andaman and Nicobar Islands","AN"],["Chandigarh","CH"],["Dadra and Nagar Haveli and Daman and Diu","DH"],["Delhi","DL"],["Jammu and Kashmir","JK"],["Ladakh","LA"],["Lakshadweep","LD"],["Puducherry","PY"]].sort((e,r)=>e[1].localeCompare(r[1])),c=["AT","BE","BG","HR","CY","CZ","DK","EE","FI","FR","DE","GR","HU","IE","IT","LV","LT","LU","MT","NL","PL","PT","RO","SK","SI","ES","SE"].concat(["GF","GP","MQ","ME","YT","RE","MF","GI","AX","IS","NO","AD","LI","MC","SM","VA","GB","GG","JE","PM","GL","BL","SX","AW","CW","WF","PF","NC","TF","AI","BM","IO","VG","KY","FK","MS","PN","SH","GS","TC"])},940596:(e,r,n)=>{n.d(r,{Wh:()=>c,rt:()=>u});var i=n(38329),a=n(418956),o=n(716034),s=n(335682);let l={preserveValue:!1};function c(e,r=l){let n=(0,a.Iz)(e);return(0,o.eU)(e=>{let a=i.D?e(s.ze):"FILE_KEY";return r.preserveValue||n.setShouldRemove((e,r)=>r!==a),e(n(a))},(e,r,...i)=>r(n(e(s.ze)),...i))}let d=[];function u(e){let r=(0,o.eU)(e);return d.push({atomRef:new WeakRef(r),initialValue:e}),r}},272042:(e,r,n)=>{n.d(r,{ZN:()=>s,dO:()=>o});var i=n(517333),a=n(245389);async function o(e){try{let e=null;if(i.eD&&(e=await i.eD.getKeyboardLayout()),!window.isSecureContext)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in secure context, no navigator.keyboard object"};if(window.top!==window.self)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"Not in top-level browser context, navigator.keyboard not available"};let r=navigator.keyboard;if(!r||!r.getLayoutMap)return{detectedLayouts:[],layoutJSON:{},desktopLayout:e,errorMessage:"No keyboard in navigator object"};let n=await r.getLayoutMap(),{detectedLayoutsWeb:o,layoutJSON:s}=function(e){let r={};return e.forEach((e,n)=>{r[n]=e}),{layoutJSON:r,detectedLayoutsWeb:a.WH.map(r=>{let n=Object.entries(r.list).map(([r,n])=>null==n?!(r in e):e.get(r)===n).filter(e=>!e).length;return{name:r.name,isValid:0===n}}).filter(e=>e.isValid).map(e=>e.name)}}(n);return{desktopLayout:e,detectedLayouts:o,layoutJSON:s}}catch(e){return console.error("Keyboard layout detection logging failed:",e),{detectedLayouts:[],layoutJSON:{},desktopLayout:null,errorMessage:"Unknown failure"}}}function s(e){return(e.desktopLayout?(0,a.pB)(e.desktopLayout):null)||(1===e.detectedLayouts.length&&a.g7[e.detectedLayouts[0]]?a.g7[e.detectedLayouts[0]]:null)}},315329:(e,r,n)=>{n.d(r,{n:()=>a}),n(411855),n(188507);var i=n(133537);function a(e,r){return!!(e?.is_ipad_user||(0,i.jm)(r))}n(38329),n(915440),n(563706),n(743282),n(939863),n(572900),n(265746),n(809831),n(99506),n(279453),n(988022),n(193212)},622896:(e,r,n)=>{n.d(r,{Bh:()=>g,SS:()=>E,bO:()=>f,oz:()=>y,z5:()=>b});var i=n(411855);n(188507);var a=n(966664),o=n(258214);n(695956),n(89865),n(184058),n(966712);var s=n(915440),l=n(711525),c=n(886653);n(395281),n(866072);var d=n(298527),u=n(335682);n(416095);var m=n(279453),p=n(623746);n(756159),n(372291);var h=n(696673);n(869156);let _=i.createContext(null);function g(e){let{subscriptions:r,requestLibraryItems:n,releaseLibraryItems:o}=(0,a.sR)(i.useContext(_),"Must call `useLibraryData` from within <LibraryDataProvider>");return i.useEffect(()=>{if(e)return n(e),()=>o(e)},[n,o,e]),e&&r[e]||(0,l.Xm)()}function f(){let{subscriptions:e}=(0,a.sR)(i.useContext(_),"Must call `useLibraryDataSubscriptions` from within <LibraryDataProvider>");return e}function E({fileKey:e}){return g(e),null}function y(e,r){let n=[];for(let i of e.libraryHierarchyPaths)for(let e of i.styles)r?e.style_type===r&&n.push(e):n.push(e);return n}function b(e,r){return y(e.data,r)}i.memo(function({fileKey:e,onChange:r}){let n=e!==(0,u.tS)(),a=(0,h.wJ)(e),o=(0,d.Ck)(),{view:l,args:c,options:p}=a?{view:m.Acj,args:{hubFileId:e},options:{enabled:o()}}:{view:n?m.tIY:m.s5n,args:{fileKey:e},options:void 0},_=(0,s.Rs)(l,c,p);return i.useEffect(()=>{r(e,_)},[r,e,_]),null}),(0,c.cm)(function(e){if("loaded"!==e.status)return e;let r=e.data;if("communityLibraryByHubFileId"in r){let e=r.communityLibraryByHubFileId;if(!e)return(0,l.e1)([]);let n=e.libraryHierarchyPaths.map(r=>{let n=r.styles.map(r=>(0,p.KC)(r,{type:"hubFile",file:{id:e.hubFileId,libraryKey:e.libraryKey}}));return{pageName:r.pageName??void 0,containingFrameName:r.containingFrameName??void 0,nameHierarchyPath:r.nameHierarchyPath??void 0,components:[],stateGroups:[],styles:n}});return(0,l.gB)({fileKey:e.hubFileId,libraryKey:(0,o.l)(e.libraryKey),name:e.name,numComponents:0,numStateGroups:0,numStyles:e.numStyles??0,libraryHierarchyPaths:n})}let n=r.file;if(!n)return(0,l.e1)([]);let i=n.libraryHierarchyPaths.map(e=>{let r="components"in e?e.components.map(e=>(0,p.Qp)(e,{type:"team",file:n})):[],i="stateGroups"in e?e.stateGroups.map(e=>(0,p.SS)(e,{type:"team",file:n})):[],a=e.styles.map(e=>(0,p.KC)(e,{type:"team",file:n}));return{pageName:e.pageName??void 0,containingFrameName:e.containingFrameName??void 0,nameHierarchyPath:e.nameHierarchyPath??void 0,components:r,stateGroups:i,styles:a}});return(0,l.gB)({fileKey:n.key,libraryKey:(0,o.l)(n.libraryKey),name:n.name,numComponents:n.library&&"numComponents"in n.library&&n.library.numComponents||0,numStateGroups:n.library&&"numStateGroups"in n.library&&n.library.numStateGroups||0,numStyles:n.library?.numStyles??0,libraryHierarchyPaths:i})})},985945:(e,r,n)=>{n.d(r,{Cs:()=>i,bj:()=>f});var i,a=n(411855),o=n(188507),s=n(966664),l=n(418956),c=n(716034),d=n(437304),u=n(656012),m=n(335682),p=n(416095),h=n(540019);let _=(0,l.Iz)(()=>(0,c.eU)(null)),g=(0,l.Iz)(e=>(0,c.eU)(r=>e.map(e=>r(_(e))),(e,r,n)=>{n.filter(s.Vq).forEach(e=>{r(_(e.library_key),e)})}),o.bN);function f(e,r){let n=(0,l.md)(g(e)).filter(s.Vq),o=a.useMemo(()=>new Set(n.map(e=>e.library_key)),[n]),c=a.useMemo(()=>e.filter(e=>!o.has(e)),[e,o]),u=function(e){let r=a.useMemo(()=>new Set(e),[e]),n=a.useRef(r),i=n.current;return a.useMemo(()=>(0,d.Bq)(r,i),[r,i])||(n.current=r),a.useMemo(()=>Array.from(i),[i])}(c),_=(0,p.LH)(),f=(0,m.tS)(),[E]=(0,h.IT)(i.LibrariesByLibraryKeysQuery({libraryKeys:r?.revalidateOnMount?e:u,subscriptionFileKey:f,orgId:_}),{enabled:r?.revalidateOnMount||c.length>0,revalidateOnMount:r?.revalidateOnMount});return"loading"===E.status?{status:"loading",data:n}:{status:"loaded",data:n}}(e=>{e.LibrariesByLibraryKeysQuery=h.M4.Query({fetch:async({libraryKeys:e,subscriptionFileKey:r,orgId:n})=>{if(0===e.length)return[];let i=await u.Z.getLibrariesByLibraryKeys({libraryKeys:e,subscriptionFileKey:r,orgId:n});return i.data.meta.forEach(e=>{l.zl.set(_(e.library_key),e)}),i.data.meta},stalenessPolicy:"never"}),e.TeamDiscoverableLibrariesQuery=h.M4.Query({fetch:async e=>{let r=await u.Z.getTeamDiscoverableLibraries({teamId:e});return r.data.meta.forEach(e=>{l.zl.set(_(e.library_key),e)}),r.data.meta},stalenessPolicy:"never"}),e.WorkspaceDiscoverableLibrariesQuery=h.M4.Query({fetch:async e=>{let r=await u.Z.getWorkspaceDiscoverableLibraries({workspaceId:e});return r.data.meta.forEach(e=>{l.zl.set(_(e.library_key),e)}),r.data.meta},stalenessPolicy:"never"})})(i||(i={}))},416095:(e,r,n)=>{n.d(r,{$N:()=>ep,A0:()=>ev,Av:()=>en,CG:()=>tK,Cj:()=>tV,Dg:()=>ea,E2:()=>tW,ET:()=>tc,El:()=>e8,FS:()=>tZ,Fl:()=>tq,G$:()=>tF,GA:()=>eU,Gd:()=>ec,Gg:()=>te,Gj:()=>re,Gp:()=>th,HF:()=>ee,HK:()=>em,Hb:()=>tU,IW:()=>eo,J1:()=>e3,Jc:()=>Q,K3:()=>eD,KQ:()=>ej,LB:()=>eJ,LC:()=>tv,LH:()=>rr,LI:()=>tG,LT:()=>tj,LX:()=>eH,Lk:()=>eG,MA:()=>tz,ME:()=>eh,MF:()=>er,Mb:()=>e2,NW:()=>tI,NY:()=>tY,OR:()=>t3,QO:()=>tS,QT:()=>eA,Q_:()=>rl,Qb:()=>eg,Qg:()=>eC,RQ:()=>tb,T4:()=>tX,Tz:()=>t2,UB:()=>e9,VO:()=>tB,Ve:()=>e4,Vk:()=>tg,WV:()=>tf,X0:()=>ey,X7:()=>ei,Ys:()=>e5,_B:()=>tT,_Q:()=>tM,aD:()=>J,ad:()=>t$,ah:()=>t4,bd:()=>tR,bp:()=>tE,cU:()=>ti,cd:()=>to,dG:()=>eR,dx:()=>tH,eD:()=>rn,eS:()=>tu,f2:()=>ta,gA:()=>eK,gi:()=>tk,iP:()=>eu,i_:()=>eX,iw:()=>e7,jk:()=>eF,kD:()=>ef,kG:()=>tN,kw:()=>tL,lG:()=>tC,lg:()=>et,nJ:()=>rc,nn:()=>ro,oH:()=>tO,og:()=>eS,ov:()=>tl,pD:()=>rs,pq:()=>ts,qB:()=>eM,r9:()=>tD,rC:()=>ez,rt:()=>eT,sv:()=>ri,t$:()=>ra,td:()=>tm,th:()=>t0,ti:()=>eb,uH:()=>t_,uJ:()=>eW,v2:()=>t6,vu:()=>e_,w$:()=>t9,w8:()=>eQ,xl:()=>es,yW:()=>tJ,yh:()=>ed,yt:()=>eO,zE:()=>ty});var i=n(411855),a=n(188507),o=n(561546),s=n(140593),l=n(838516),c=n(268853),d=n(177131),u=n(922827),m=n(258214);n(617691);var p=n(758271),h=n.n(p),_=n(776250),g=n(38329),f=n(794272),E=n(966712),y=n(886653),b=n(364898),v=n(776621),I=n(437304),T=n(553716),S=n(96328),w=n(27087),A=n(47506),C=n(939863),N=n(154483),L=n(572900),O=n(265746),R=n(944682),P=n(395281),D=n(452246),k=n(182976),M=n(974105),F=n(44892),x=n(875847),U=n(237929),B=n(666068),V=n(173454),G=n(333370),H=n(479296),K=n(267701),W=n(335682),$=n(694687),Y=n(99506),z=n(540019),j=n(872712),q=n(388094),Z=n(514816),X=n(694517),J=(e=>(e.CURRENT="current",e.ALL="all",e))(J||{});let Q=i.createContext(null);function ee(e){return e===V.E8.CURRENT||e===V.E8.CHANGED||e===V.E8.DELETED}function et(e){return e===V.E8.NEW||e===V.E8.CHANGED||e===V.E8.DELETED}function er(e){switch(e.type){case V.PW.COMPONENT:return{type:e.type,key:e.component_key,version:e.content_hash};case V.PW.STATE_GROUP:return{type:e.type,key:e.key,version:e.version};case V.PW.STYLE:return{type:e.type,key:e.key,version:e.content_hash};case V.PW.VARIABLE_SET:case V.PW.VARIABLE:case V.PW.MODULE:return{type:e.type,key:e.key,version:e.version};case V.PW.RESPONSIVE_SET:case V.PW.CODE_COMPONENT:if("LOCAL"===e.subscriptionStatus)return{type:e.type,key:e.keyForPublish,version:e.version};return{type:e.type,key:e.key,version:e.version};default:(0,s.xb)(e,`Unknown type ${e?.type}`)}}function en(e){let{key:r}=er(e);return(0,s.KF)(void 0!==r,"Asset had no key",{asset:e}),r}function ei(e){return e.map(en)}function ea(e){return er(e).version}function eo(e){return!e.isShown||e.isCreating?null:e.style.isLocal?null:e.style}function es(e,r){return`/file/${e}?node-id=${encodeURIComponent(r)}&main-component=1`}let el=(0,N.fv)();function ec(e){return es(el(e),e.node_id)}function ed(e,r,n){for(let n of Object.values(r))if("loaded"===n.status&&n.data.key===e)return n.data;for(let r of Object.values(n))if(r.key===e)return r;return null}function eu(e,r){let n=Object.create(null);if(!r||!r.library_key)return n;let i=(0,m.l)(r.library_key),a=r.team_id||V.Yu,o=e[a]?.[i]??Object.create(null);for(let e in o)null==o[e].unpublished_at&&(n[e]=o[e]);return n}function em(e,r){return r?eh(e)[r]??{}:{}}function ep(e,r){return Object.values(em(e,r))}function eh(e){let r={};for(let n of Object.values(e))for(let[e,i]of Object.entries(n))r[(0,m.l)(e)]=i;return r}function e_(e){let r=[];return eg(e,(e,n,i,a)=>{r.push(a)}),r}function eg(e,r){for(let[n,i]of Object.entries(e))for(let[e,a]of Object.entries(i)){let i=(0,m.l)(e);for(let[e,o]of Object.entries(a))r(n,i,e,o)}}function ef(e){let r=[];return eE(e,(n,i,a)=>{r.push(e[n][i][a])}),r}function eE(e,r){Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(i=>{Object.keys(e[n][i]).forEach(e=>{r(n,i,e)})})})}function ey(e){return Object.keys(e).map(r=>e[r]).filter(e=>!e.deletedFromSceneGraph)}function eb(e,r){let n=[];for(let i in e){let a=e[i];a.style_type!==r||a.deletedFromSceneGraph||n.push(a)}return n}function ev(e,r,n,i){let a=[];for(let o in r)for(let s in r[o])if(eM(e,n,{team_id:o,key:s},i))for(let e in r[o][s]){let n=r[o][s][e];a.push(n)}return a}let eI=new Set;async function eT(e){let r=new Map((e=e.filter(e=>e.canvas_url&&!F.Eo.hasKeyInCache((0,K.P)(e.canvas_url).url)&&!eI.has(e.key))).map(e=>[e.key,e.canvas_url])),n=e.map(e=>e.key);if(n.forEach(e=>eI.add(e)),(0,E.kc)().ds_file_proxy_for_style_assets)await Promise.all(n.map(e=>F.Eo.getCanvas({canvas_url:r.get(e)})));else{if(0===n.length)return;try{let e=await w.Ay.post("/style/canvases",{style_keys:n});for(let[n,i]of Object.entries(e.data.meta.urls))w.Ay.crossOriginGetAny(i,null,{responseType:"arraybuffer"}).then(({data:e})=>{let i=r.get((0,d.n3)(n));if(i){let r=(0,K.P)(i).url;F.Eo.putCanvas(r,e)}eI.delete((0,d.n3)(n))}).catch(()=>{eI.delete((0,d.n3)(n))})}catch(e){n.forEach(e=>eI.delete(e))}}}let eS=["TEXT","FILL","EFFECT","GRID"],ew=(e,r)=>{let n=r?1:2;switch(e){case"TEXT":return(0,C.t)("design_systems.styles.text_style",{numStyles:n});case"FILL":return(0,C.t)("design_systems.styles.color_style",{numStyles:n});case"EFFECT":return(0,C.t)("design_systems.styles.effect_style",{numStyles:n});case"GRID":return(0,C.t)("design_systems.styles.grid_style",{numStyles:n});case"EXPORT":return(0,C.t)("design_systems.styles.export_style");case"STROKE":return(0,C.t)("design_systems.styles.stroke_style");default:return(0,_.sx)("Unknown style type",{styleType:e}),(0,C.t)("design_systems.styles.styles",{numStyles:n})}};function eA(e){return ew(e,!1)}function eC(e,r){return r in e?{design:!!e[r]?.design,figjam:!!e[r]?.figjam,slides:!!e[r]?.slides}:{design:null,figjam:null,slides:null}}let eN=e=>null!==e.design&&null!==e.figjam&&null!==e.slides;function eL(e,r){var n;if(!r)return{design:!1,figjam:!1,slides:!1};let i=(n=e.subscriptions.forPresets,r?{...eC(n,r.key),isPresetSubscription:!0}:{design:!1,figjam:!1,slides:!1}),a=eC(e.subscriptions.forCurrentOrg,r.key);return eN(a)?a:i}function eO(e,r){if(!r)return{design:!1,figjam:!1,slides:!1};let n=eL(e,r),i=eC(e.subscriptions.forCurrentWorkspace,r.key);return eN(i)?i:n}function eR(e,r,n){if(!n)return{design:!1,figjam:!1,slides:!1};let i=eO(e,n),a=eC(e.subscriptions.byTeam[r]||{},n.key);return eN(a)?a:i}let eP=(e,r)=>{if(!r)return{design:!1,figjam:!1,slides:!1};let n=eL(e,r),i=eC(e.subscriptions.forCurrentUser,r.key);return eN(i)?i:n};function eD(e,r){let n=eP(e,r);if(eN(n))return n;for(let i in e.subscriptions.byTeam){let a=eR(e,i,r);a.design&&(n.design=!0),a.figjam&&(n.figjam=!0),a.slides&&(n.slides=!0)}return n}let ek=(e,r)=>e.key===r.key||e.source_file_key===r.key||e.key===r.source_file_key;function eM(e,r,n,i){let a;if(!r||!n||ek(r,n))return!1;a=(0,E.kc)().ps_benchmark?r.team_id?i?function(e,r,n){let i=eP(e,n);return eN(i)&&!i.isPresetSubscription?i:eR(e,r,n)}(e,r.team_id,n):eR(e,r.team_id,n):eD(e,n):r.team_id?eR(e,r.team_id,n):eD(e,n);let o=null;switch(r.editor_type){case"design":default:o=a.design;break;case"whiteboard":o=a.figjam;break;case"slides":o=a.slides}let s=e.subscriptions.byFile;return r.key in s&&n.key in s[r.key]?s[r.key][n.key]:!function(e,r){let n=e.defaultPublished.fileKeys.includes(r),i=e.defaultShapes.fileKeys.includes(r);return!!n||!!i}(e,n.key)?o:o||null===o}function eF(e,r,n,i){return eM(e,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},n,i)}let ex=(0,N.fv)();function eU(e,r,n,i,a){if(n.length)return!0;for(let n of i){let i;let o=a[n];if(!o)continue;i="file_key"in o?ex(o):"loaded"===o.status&&ex(o.data);let s=(0,x.T9)(r.project);if(i&&eM(e,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:i},s))return!0}return!1}let eB=(e,r)=>e.style_type===r.style_type?0:eS.indexOf(e.style_type)<eS.indexOf(r.style_type)?-1:1,eV=(e,r)=>-(0,b.Ez)(e.sort_position||"",r.sort_position||"");function eG(e,r){let n=eB(e,r);return 0===n?eV(e,r):n}function eH(e){e.sort(eV)}function eK(e,r){let n=e=>e&&e.toLowerCase?e.toLowerCase():"",i=e.containing_frame||{},a=r.containing_frame||{};return i.pageId!==a.pageId?n(i.pageName)<n(a.pageName)?-1:1:i.nodeId!==a.nodeId?n(i.name)<n(a.name)?-1:1:n(e.name)<n(r.name)?-1:1}function eW(e){let r=[...e];return eH(r),{stylesByPrefix:r.reduce((e,r)=>{let n=(0,U.In)(r.name);return e[n]=e[n]||[],e[n].push(r),e},Object.create(null)),sortedPrefixes:(0,G.wM)(r)}}let e$=!0;function eY(e,r){if(!e||!r)return!0;for(let n in e){if(!(n in r))return!0;let i=e[n],a=r[n];for(let e in i)if(i[e]!==a[e])return!0;for(let e in a)if(!(e in i))return!0}for(let n in r)if(!(n in e))return!0;return!1}function ez(e,r,n,i,a,o,s,l,c,d){let u=Object.create(null),m=0;for(let p in r.forEach(r=>{let c=r.nodeId,p=i[c];o[c]=e1(a[c]),u[c]=e(p,n[c],r,s,l,d);let h=u[c];h.status===V.E8.NEW&&h.type===V.PW.COMPONENT&&(m+=1)}),i)if(!(p in u)){let e=a[p];e&&e.url&&(0,F.qv)(e.url);let r=i[p];if(r.type===V.PW.COMPONENT||r.type===V.PW.STATE_GROUP){let e=(r.type,V.PW.COMPONENT,r);e.old_key&&c.add(e.node_id)}}for(let r in n)r in u||(o[r]=e1(a[r]),u[r]=e(i[r],n[r],null,s,l,d));return{newLocal:u,numNewComponents:m}}function ej(e){let r=e.getState();if(r.versionHistory.activeId&&r.versionHistory.activeId!==X.V_||!r.mirror?.sceneGraph)return;let n=(0,M.d1)(r),i=n?n.key:"",a=n?.library_key?(0,m.l)(n.library_key):(0,m.l)(""),o=new Set,s={},{newLocal:l,numNewComponents:c}=ez(eX,r.library.publishableSymbols,r.library.openFilePublished__LIVEGRAPH.components,r.library.local.components,r.library.local.thumbnails,s,i,a,o,V.PW.COMPONENT),{newLocal:d}=ez(eJ,r.library.publishableStateGroups,r.library.openFilePublished__LIVEGRAPH.stateGroups,r.library.local.stateGroups,r.library.local.thumbnails,s,i,a,o,V.PW.STATE_GROUP),{newLocal:u}=ez(eQ,r.library.publishableStyles,r.library.openFilePublished__LIVEGRAPH.styles,r.library.local.styles,r.library.local.thumbnails,s,i,a,o,V.PW.STYLE),{newLocal:p}=ez(e0,r.library.publishableModules,r.library.openFilePublished__LIVEGRAPH.modules,r.library.local.modules,r.library.local.thumbnails,s,i,a,o,V.PW.MODULE);if(eY(r.library.local.components,l)&&e.dispatch(P.I0({local:l,type:V.PW.COMPONENT})),eY(r.library.local.stateGroups,d)&&e.dispatch(P.I0({local:d,type:V.PW.STATE_GROUP})),eY(r.library.local.styles,u)&&e.dispatch(P.I0({local:u,type:V.PW.STYLE})),eY(r.library.local.modules,p)&&(0,E.kc)().dse_module_publish&&e.dispatch(P.I0({local:p,type:V.PW.MODULE})),function(e,r){if(!e&&!r)return!1;if(!e||!r||Object.keys(e).length!==Object.keys(r).length)return!0;for(let n in e)if(!r[n]||e[n].url!==r[n].url||e[n].content_hash!==r[n].content_hash)return!0;return!1}(r.library.local.thumbnails,s)&&e.dispatch(D.xp({thumbnails:s})),c>0&&e$&&((0,A.YQ)({id:"Parsed first components"}),e$=!1),o.size>0){let n=r.notifications.filter(e=>e.type===O._.MOVE_COMPONENTS_PROMPT);if(n.length>0){let r=n[0].type===O._.MOVE_COMPONENTS_PROMPT&&n[0].movableItemIds;r&&(0,I.Bq)(r,o)&&e.dispatch(L.$.dequeue({type:O._.MOVE_COMPONENTS_PROMPT}))}}}let eq="Generating a local library item that is neither in the library nor in the scene graph. Why.",eZ=(e,r,n,i,a,o)=>{var s;if(!n){if(r)return{...r,status:V.E8.DELETED,deletedFromSceneGraph:!0};throw Error(eq)}let l=r&&null==r.unpublished_at,c=!!n.isPublishable,d=V.E8.NOT_STAGED;l&&!c?d=V.E8.DELETED:!l&&c?d=V.E8.NEW:l||c||(d=V.E8.NOT_STAGED);let{description:u,description_rt:m}=(s=n.description,{description:n.descriptionPlain??"",description_rt:s??""});return{node_id:n.nodeId,name:n.name,description:u,description_rt:m,file_key:i,file_key_source:N.Ps.LOCAL_FILE,library_key:a,isPublishable:c,deletedFromSceneGraph:!1,meta:e?e.meta:void 0,isLocal:!0,status:d,type:o,thumbnail_url:r&&r.thumbnail_url||void 0}};function eX(e,r,n,i,a){let o={...eZ(e,r,n,i,a,V.PW.COMPONENT),type:V.PW.COMPONENT,height:n?.height,width:n?.width,x:n?.x,y:n?.y,componentPropDefError:n?.componentPropDefError,containing_frame:n?.containingFrame||r?.containing_frame||void 0,component_key:r?.component_key||void 0,content_hash:n?.versionHash||r?.content_hash||void 0,userFacingVersion:n?.userFacingVersion??d.F7.INVALID,old_key:n?.oldKey||void 0};if(!r)return o;let s=null==r.unpublished_at,l=!!n?.isPublishable;return s&&l&&(r&&r.content_hash===o.content_hash&&!rl(r.containing_frame,n?.containingFrame)&&rs(r.name,n?.name)&&rs(r.description,o.description)?o.status=V.E8.CURRENT:o.status=V.E8.CHANGED),o}function eJ(e,r,n,i,a){let o=eZ(e,r,n,i,a,V.PW.STATE_GROUP);if(!r){if(!n)throw Error(eq);return{...o,type:V.PW.STATE_GROUP,version:n.versionHash,userFacingVersion:n.userFacingVersion,containing_frame:n.containingFrame,width:n.width,height:n.height,stateGroupError:n.stateGroupError,componentPropDefError:n.componentPropDefError,fill_color:n.fill_color,default_state_key:n.default_state_key,old_key:n.oldKey||void 0}}let s={...o,type:V.PW.STATE_GROUP,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Rf.INVALID,containing_frame:n?.containingFrame||r.containing_frame,width:n?.width||r.min_node_width,height:n?.height||r.min_node_height,key:r.key||void 0,stateGroupError:n?.stateGroupError||u.bwI.NONE,componentPropDefError:n?.componentPropDefError||u.uXg.NONE,fill_color:n?.fill_color||r?.fill_color,default_state_key:n?.default_state_key||r?.default_state_key,old_key:n?.oldKey||void 0},l=null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!rl(r.containing_frame,n?.containingFrame)&&rs(r.name,n?.name)&&rs(r.description,s.description)?s.status=V.E8.CURRENT:s.status=V.E8.CHANGED),s}function eQ(e,r,n,i,a){let o=eZ(e,r,n,i,a,V.PW.STYLE),s=r&&null==r.unpublished_at,l=!!n?.isPublishable,c=!1;if(s&&l&&(r&&r.content_hash===n?.versionHash&&rs(r.name,n?.name)&&rs(r.description,o.description)?rs(r.sort_position,n?.sortPosition)?o.status=V.E8.CURRENT:(o.status=V.E8.CHANGED,c=!0):o.status=V.E8.CHANGED),n)return{...o,type:V.PW.STYLE,key:n.styleKey,style_type:n.styleType,is_soft_deleted:n.isSoftDeleted,sort_position:n.sortPosition,content_hash:n.versionHash,userFacingVersion:n.userFacingVersion,hasOnlyBeenReordered:c,old_key:n.oldKey||void 0};if(r)return{...o,type:V.PW.STYLE,key:r.key,style_type:r.style_type,is_soft_deleted:!0,sort_position:r.sort_position,content_hash:r.content_hash,userFacingVersion:r.userFacingVersion,hasOnlyBeenReordered:c};throw Error(eq)}function e0(e,r,n,i,a){let o=eZ(e,r,n,i,a,V.PW.MODULE);if(!r){if(!n)throw Error(eq);return{...o,type:V.PW.MODULE,moduleSource:n.moduleSource,height:n.height,width:n.width,x:n.x,y:n.y,containing_frame:n.containingFrame,version:n.versionHash,userFacingVersion:n.userFacingVersion,old_key:n.oldKey||void 0}}let s={...o,type:V.PW.MODULE,moduleSource:n?.moduleSource||r.moduleSource,height:n?.height||r.height,width:n?.width||r.width,x:n?.x,y:n?.y,containing_frame:n?.containingFrame||r.containing_frame||void 0,version:n?.versionHash||r.version,userFacingVersion:n?.userFacingVersion||d.Pg.INVALID,old_key:n?.oldKey||void 0,key:r.key},l=r&&null==r.unpublished_at,c=!!n?.isPublishable;return l&&c&&(r.version===s.version&&!rl(r.containing_frame,n?.containingFrame)&&rs(r.name,n?.name)&&rs(r.description,s.description)?s.status=V.E8.CURRENT:s.status=V.E8.CHANGED),s}function e1(e){return{kind:e&&e.kind||void 0,url:e&&e.url||void 0,content_hash:e&&e.content_hash||void 0}}function e2(e,r){return(0,E.kc)().dse_lk_published_components?`GET_PUBLISHED_COMPONENTS_FOR_${r}`:`GET_PUBLISHED_COMPONENTS_FOR_${e}`}let e5=new Set;function e3(e){for(let r of e5)e(k.yH({key:r}))}let e6=new Set;function e8(e,r){return e6.has(e)||e6.has(r)}function e4(e){e6.add(e)}function e9(){e6.clear()}let e7=e=>`GET_DEFAULT_LIBRARIES_FOR_${e}`;function te(e,r){let n={};return r.forEach(e=>{if(e.containing_frame?.containingStateGroup?.nodeId){let r=e.containing_frame?.containingStateGroup?.nodeId;n[r]||(n[r]=[]),n[r].push(e.name)}}),e.map(e=>({...e,stateNames:n[e.node_id]}))}let tt=new Set,tr=new Set,tn=(0,N.fv)();async function ti(e,r=[],n,i,a,o,s){if(!r.length)return{};let l={};for(let n of r){let r=e.get(n);r&&r.styleKeyForPublish&&0!==u.glU.getNumUsagesOfStyle(r.styleKeyForPublish,!0)&&(l[r.styleKeyForPublish]=n)}let c=Object.keys(l).map(d.n3),m=await z.M4.fetch(j._x.UnpublishedStylesQuery({styleKeys:c,orgId:a})),p=h()([...m,...Object.values(n).filter(e=>e.key in l)],e=>e.key),_=new Set(p.map(e=>e.key)),g=c.filter(e=>e&&!_.has((0,d.n3)(e))),f=await z.M4.fetch(j.qE.MissingStyleKeysQuery({styleKeys:g}));delete f[o];let E=[],y={};for(let e of p){let r=tn(e);y[r]||(y[r]=[]),y[r].push(e),i[r]||tt.has(r)||(tt.add(r),E.push(r))}for(let[r,n]of Object.entries(f))for(let i of(y[r]||(y[r]=[]),n)){let n=l[i]&&e.get(l[i]);n&&y[r].push({type:V.PW.STYLE,name:n.name,file_key:r,file_key_source:N.Ps.REST_API,key:i,thumbnail_url:`/style/${i}/thumbnail?ver=${n.styleVersionHash}`,canvas_url:`/style/${i}/thumbnail?ver=${n.styleVersionHash}`,content_hash:n.styleVersionHash||void 0,userFacingVersion:(0,d.IA)(n.userFacingVersion),node_id:n.guid,isLocal:!1,style_type:n.styleType,library_key:n.sourceLibraryKey})}return await to(E,s),y}async function ta(e,r){if(e.length>0){let i=[];async function n(e){try{let n=await w.Ay.post("/api/files/batch",{library_keys:e});n.data.meta||(0,T.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(R.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,v.$D)(c.e.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let a=e.slice(r,r+200);i.push(n(a))}await Promise.all(i)}}async function to(e,r){if(e.length>0){let i=[];async function n(e){try{let n=await w.Ay.post("/api/files/batch",{file_keys:e});n.data.meta||(0,T.x1)("designSystems","Unexpected empty API response",{data:JSON.stringify(n.data??null),numFiles:e.length,status:n.status}),r(R.uo({files:n.data.meta.files,subscribeToRealtime:!0}))}catch(e){(0,v.$D)(c.e.DESIGN_SYSTEMS_EDITOR,e)}}for(let r=0;r<e.length;r+=200){let a=e.slice(r,r+200);i.push(n(a))}await Promise.all(i)}}async function ts(e,r,n){if(0===r.length)return[];let{styles:i,files:a}=(await w.Ay.post("/api/styles",{style_keys:r,org_id:n})).data.meta;return e(R.uo({files:a,subscribeToRealtime:!0})),i}function tl(e,r=[],n=[],i,a,o,s=!1){let l={},c=r.concat(n),m=eh(i.components),p=eh(i.stateGroups),h=[];for(let r of c){let n=e.get(r);if(!n)continue;let i=tJ(n)||void 0,o=n.sourceLibraryKey,c=n.publishID;if(!c||!i||!o)continue;p[o]||m[o]||tr.has(o)||(tr.add(o),h.push(o));let _=n.isStateGroup,g=_?n.sharedStateGroupVersion:n.sharedSymbolVersion,f=_?n.stateGroupKey:n.componentKey,E=(_?p[o]??{}:m[o]??{})[c];if(E?.type===V.PW.COMPONENT){let e=E.containing_frame?.containingStateGroup?.nodeId;if(e){let r=p[o];E=r?.[e],_=!0}}if(E)l[en(E)]=E;else if(_){if(!f||l[f]||!n.reversedChildrenGuids.some(r=>{let n=e.get(r)?.componentKey;return n&&!l[n]}))continue;let o=u.glU.getDefaultStateForLocalStateGroup(r),s=e.get(o),[m,p]=s?[s.size.x,s.size.y]:[0,0];l[f]={type:V.PW.STATE_GROUP,name:n.name,file_key:i,file_key_source:N.Ps.PUBLISH_FILE,library_key:n.sourceLibraryKey,key:f,thumbnail_url:`/state_group/${f}/thumbnail?ver=${g}&fv=${a}`,canvas_url:`/state_group/${f}/canvas?ver=${g}&fv=${a}`,node_id:c||"",isLocal:!1,version:g||d.Rf.INVALID,userFacingVersion:(0,d.Rf)(n.userFacingVersion),containing_frame:{},min_node_width:p,min_node_height:m,default_state_key:""}}else{if(!f||l[f]||n.isState&&!s||null===a)continue;l[f]={type:V.PW.COMPONENT,name:n.name,file_key:i,file_key_source:N.Ps.PUBLISH_FILE,library_key:n.sourceLibraryKey,component_key:f,thumbnail_url:`/component/${f}/thumbnail?ver=${g}&fv=${a}`,canvas_url:`/component/${f}/canvas?ver=${g}&fv=${a}`,node_id:c||"",content_hash:n.sharedSymbolVersion||void 0,userFacingVersion:(0,d.F7)(n.userFacingVersion),isLocal:!1,min_node_height:n.size.x,min_node_width:n.size.y}}}return ta(h,o),Object.values(l)}function tc(e,r){return new Set(tl(e.mirror.sceneGraph,(0,q.C9)(e),(0,q.jf)(e),e.library.publishedByLibraryKey,e.fileVersion,r).map(e=>en(e)))}let td=(e,r,n,i,a,o)=>tl(e,r,n,i,a,o,!0).reduce((e,r)=>(r.type===V.PW.COMPONENT?r.component_key&&(e[r.component_key]=r):e[r.key]=r,e),Object.create(null));function tu(e){let r=(0,a.wA)(),{library:n,sceneGraph:o,fileVersion:s,subscribedComponents:l,subscribedStateGroups:c,subscribedComponentsOnCurrentPage:d,subscribedStateGroupsOnCurrentPage:u}=(0,f.R)(e=>({library:e.library,sceneGraph:e.mirror.sceneGraph,fileVersion:e.fileVersion,subscribedComponents:(0,q.C9)(e),subscribedStateGroups:(0,q.jf)(e),subscribedComponentsOnCurrentPage:(0,q.J5)(e),subscribedStateGroupsOnCurrentPage:(0,q.EY)(e)})),[m,p]="current"===e?[d,u]:[l,c];return i.useMemo(()=>td(o,m,p,n.publishedByLibraryKey,s,r),[o,m,p,n.publishedByLibraryKey,s,r])}function tm(e,r){let n=e.defaultPublished.libraryKeys.includes(r),i=e.defaultShapes.libraryKeys.includes(r);return!!n||!!i}let tp=(0,y.xx)(e=>{let r={},n=e.local.styles;for(let e in n){let i=n[e];r[i.key]=i}return r});function th(e,r,n){let i=tp(n)[e];if(i)return{kind:V.AT.LOCAL,value:i};let a=n.used__LIVEGRAPH.styles[e];return a?.status==="loaded"?{kind:V.AT.LIBRARY,value:a.data}:r&&r.length?{kind:V.AT.DANGLING,value:{key:e,node_id:r[0]}}:void 0}function t_(e,r){if(!e)return"";if(e.kind!==V.AT.DANGLING)return e.value.name;{let n=r.get(e.value.node_id);return n?n.name:""}}let tg=(0,y.xx)(e=>{let r={};return Object.keys(e).forEach(n=>{r[n]={},Object.keys(e[n]).forEach(i=>{r[n][i]=tf(e[n][i])})}),r});function tf(e){let r={};for(let n in e){let i=e[n];i.containing_frame?.containingStateGroup&&(r[n]={...i})}return r}function tE(e,r,n,i){let a=r?i[r]:null;if(!a||!e)return null;let o=a[e];return o?o[n]:null}function ty(e){let r=e.type===V.PW.STATE_GROUP&&!!(e.stateGroupError&&e.stateGroupError!==u.bwI.TOO_MANY_STATES_ERROR);return!!(e.componentPropDefError&&(e.componentPropDefError===u.uXg.CONFLICTING_NAMES_ERROR||e.componentPropDefError===u.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR||e.componentPropDefError===u.uXg.UNUSED_DEF_ERROR)||r)}function tb(e){return e.variableSetError!==u.HG$.NONE}let tv=()=>{},tI=new Promise(e=>{tv=e}),tT=()=>{},tS=new Promise(e=>{tT=e}),tw=()=>{},tA=new Promise(e=>{tw=e}),tC=e=>({callback:tw,promise:tA,resetPromise:tP,loadingKey:`GET_USED_COMPONENTS_STATE_GROUPS_FOR_${e.getState().openFile?.key}`}),tN=()=>{},tL=new Promise(e=>{tN=e}),tO=new Promise(e=>{});function tR(){tv(),tT(),tN(),tI=new Promise(e=>{tv=e}),tS=new Promise(e=>{tT=e}),tL=new Promise(e=>{tN=e}),tP()}function tP(){tw(),tA=new Promise(e=>{tw=e})}function tD(e,r,n){return e.team_id===n?-1:r.team_id===n?1:(e.team_name||"").localeCompare(r.team_name||"")}function tk(e,r,n){return e.sort((e,i)=>{var a;let o=(a=n?.groupByFolders,e.team_id!==i.team_id?tD(e,i,r):a&&e.file.folder_id!==i.file.folder_id?e.folder_name<i.folder_name?-1:1:(e.library_file_name||"").localeCompare(i.library_file_name||""));return n?.isDescending?o:-o})}function tM(e,r,n){let i;let a=e.node_id,o=r[a]||{},l=o.url||null;switch(e.type){case V.PW.COMPONENT:case V.PW.STYLE:i=e.content_hash;break;case V.PW.VARIABLE:case V.PW.VARIABLE_SET:case V.PW.STATE_GROUP:case V.PW.MODULE:case V.PW.RESPONSIVE_SET:case V.PW.CODE_COMPONENT:i=e.version;break;default:(0,s.xb)(e)}return(n||o.content_hash!==i||!(0,F.OM)(l))&&(e.type===V.PW.COMPONENT||e.type===V.PW.STATE_GROUP||e.type===V.PW.MODULE||e.type===V.PW.RESPONSIVE_SET||e.type===V.PW.CODE_COMPONENT?l=(0,F.r2)(a):e.type===V.PW.STYLE?l=(0,B.fP)(e)?(0,F.jh)():(0,F.aV)(a,e.style_type):e.type===V.PW.VARIABLE||e.type===V.PW.VARIABLE_SET?l=(0,F.jh)():(0,s.xb)(e)),l}function tF({numProductComponents:e,numStyles:r,numVariables:n,numVariableCollections:i,numModuleAssets:a}){let s=r>0?(0,C.t)("design_systems.libraries_modal.plural.num_style",{numStyles:r}):null,l=e>0?(0,C.t)("design_systems.libraries_modal.plural.num_component",{numComponents:e}):null,c=n>0?(0,C.t)("design_systems.libraries_modal.plural.num_variables",{numVariables:n}):null,d=(0,E.kc)().dse_editor_templates_v1&&a>0?(0,C.t)("design_systems.libraries_modal.plural.num_templates",{numTemplates:a}):null,u=0===n&&i>0?(0,C.t)("design_systems.libraries_modal.plural.variable_collections",{numVariableCollections:i}):null,m=(0,o.WI)([l,s,c,u,d]);return 0===m.length?(0,E.kc)().dse_editor_templates_v1?(0,C.t)("design_systems.libraries_modal.no_publishable_assets"):(0,C.t)("design_systems.libraries_modal.no_components_styles_variables"):(0,S.Yx)(m,"unit")}let tU=e=>e!==V.E8.DELETED&&e!==V.E8.NOT_STAGED;function tB(e,r,n,i){let a=r[e];if(!a)return null;let o=e_(n).find(e=>e.type===V.PW.COMPONENT?e.component_key===a:e.key===a),s="another file";if(!o)return s;let l=i[o.library_key];return l?l.name:s}function tV(e,r,n){let i=e.reduce((n,i)=>(r[i]?n[i]=r[i]:(0,s.KF)(!1,"Expected nodeIdsToMove to be a subset of movableNodeIdToOldKey",{nodeIdsToMove:e,movableNodeIdToOldKey:r}),n),Object.create(null));for(let e of n){let n=e.containing_frame?.containingStateGroup?.nodeId,a=r[e.node_id];if(!n||!a)continue;let o=!!r[n];i[n]||!o?i[e.node_id]=a:i[e.node_id]&&delete i[e.node_id]}return{moveRemappings:i,movableItemsToPublishAsNew:new Set(Object.keys(r).filter(e=>!i[e]))}}function tG(e){return e.isStateGroup||"SYMBOL"===e.type&&!e.isState||e.isCodeComponent}function tH(e){return V.YJ.includes(e.type)}function tK(e){return e.isLocal?u.Egt.getAssetKeyForPublish(e.node_id):en(e)}function tW(e){return e.containing_frame?.containingStateGroup?.nodeId??null}function t$(e){return!!tW(e)}function tY(e,r,n,i){let a;if(!e)return;let o=r.get(e);if(o&&o.containingStateGroupId&&(o=r.get(o.containingStateGroupId)),o){if(o.isSubscribedAsset){let e=o.componentKey??o.stateGroupKey;e&&(a=i?.[e])}else a=n?.[o.guid];return a}}function tz(e,r){function n(e){return e.toLowerCase()}let i=n(e.name),a=n(r.name);return i<a?-1:i>a?1:0}function tj(e){switch(e){case V.jg.THIRTY_DAYS:return(0,C.t)("design_systems.libraries_modal.30_days");case V.jg.SIXTY_DAYS:return(0,C.t)("design_systems.libraries_modal.60_days");case V.jg.NINETY_DAYS:return(0,C.t)("design_systems.libraries_modal.90_days");case V.jg.YEAR:return(0,C.t)("design_systems.libraries_modal.year");default:(0,s.xb)(e)}}function tq(e){return!!((0,E.kc)().dse_templates_proto&&e.description?.startsWith("Figma.TemporaryIsTemplate"))}function tZ(e){return!!((0,E.kc)().dse_module_publish&&"MODULE"===e.type)}function tX(e,r){return(null!==e.design||null!==e.figjam||null!==e.slides)&&(!!e.design||!!e.figjam||!!e.slides)&&(!!e.design&&!r.designSubscribed||!!e.figjam&&!r.figjamSubscribed||!!e.slides&&!r.slidesSubscribed)}function tJ(e){return(0,E.kc)().ds_publish_file_deprecation?e?e.isLooseComponent||e.isState?t0(e.componentKey):e.isStateGroup?t2(e.stateGroupKey):null:null:e?.publishFile??null}let tQ=(0,N.fv)();function t0(e,r){return e?(r||(r=t8(g.D.getState().library.published.components)),tQ(r[e])??null):null}let t1=(0,N.fv)();function t2(e,r){return e?(r||(r=t8(g.D.getState().library.published.stateGroups)),t1(r[e])??null):null}let t5=(0,N.fv)();function t3(e,r,n){return n[e]?t5(n[e])??null:r[e]?t5(r[e])??null:null}function t6(e){let r={};return Object.keys(e).forEach(n=>{Object.keys(e[n]).forEach(i=>{Object.keys(e[n][i]).forEach(a=>{r[i]=r[i]||{},r[i][a]=e[n][i][a]})})}),r}function t8(e){let r={};return eE(e,(n,i,a)=>{let o=e[n][i][a];r[en(o)]=o}),r}function t4(e){let r={};return eg(e,(e,n,i,a)=>{r[en(a)]=a}),r}function t9(e){let r=(0,a.wA)(),n=i.useMemo(()=>(0,l.s)(()=>{e&&e.value.node_id&&r(D.rb({styleNodeId:e.value.node_id,styleKind:e.kind}))}),[r,e]);i.useEffect(n)}let t7=(0,N.fv)();function re(e){return(0,E.kc)().ds_use_lib_keys?`${e.library_key}:${e.node_id}`:`${t7(e)}:${e.node_id}`}let rt=(0,H.D)((e,r)=>e?e.parentOrgId:r);function rr(){return rt((0,W.q5)(),(0,$.dq)())}function rn(e){return rt(e.openFile,e.currentUserOrgId)}function ri(){let e=rr(),r=(0,a.d4)(e=>e.orgById);return(0,$.td)(e,r)}function ra(e){let r=(0,Z.je)();return i.useMemo(()=>{if("loaded"===r.status)return r.data?.find(r=>r.fileKey===e)?.id},[e,r.data,r.status])}function ro(e){return e===Y.pk.ORG||e===Y.pk.WORKSPACE}function rs(e,r){return!e&&!r||e===r}function rl(e,r){let n=e?e.nodeId:void 0,i=e?e.name:void 0,a=e?e.backgroundColor:void 0,o=e?e.pageId:void 0,s=r?r.nodeId:void 0,l=r?r.name:void 0,c=r?r.backgroundColor:void 0,d=r?r.pageId:void 0;return(n!==s||i!==l||a!==c||!!o||!d)&&!(null==e&&null==r||null!=e&&null!=r&&rs(e.nodeId,r.nodeId)&&rs(e.name,r.name)&&rs(e.backgroundColor,r.backgroundColor)&&rs(e.pageName,r.pageName)&&rs(e.pageId,r.pageId)&&function(e,r){if(null==e&&null==r)return!0;if(null==e||null==r)return!1;for(let n of["nodeId","name"])if(!rs(e[n],r[n]))return!1;return!0}(e.containingStateGroup,r.containingStateGroup))}function rc(e,r){return!e&&!r||!!e&&!!r&&e.nodeId==r.nodeId}},933342:(e,r,n)=>{n.d(r,{BJ:()=>$,Gq:()=>ee,Ow:()=>J,QB:()=>j,Wg:()=>q,YG:()=>z,dO:()=>K,tM:()=>et,u2:()=>Q,vz:()=>H});var i=n(188507),a=n(140593),o=n(35645),s=n.n(o),l=n(776250),c=n(38329),d=n(966712),u=n(418956),m=n(716034),p=n(647899),h=n(30637),_=n(582064),g=n(980820),f=n(395281),E=n(445092),y=n(809831),b=n(974105),v=n(378905),I=n(696673),T=n(44892),S=n(146817),w=n(453681),A=n(875847),C=n(416095),N=n(336599),L=n(463592),O=n(388094),R=n(239671),P=n(173454),D=n(294662),k=n(48515),M=n(662163),F=n(705129),x=n(239737),U=n(479296),B=n(26328),V=n(567907),G=n(535257);let H=[{name:"name",weight:.6},{name:"stateNames",weight:.4},{name:"containing_frame.name",weight:.1},{name:"containing_frame.pageName",weight:.1},{name:"description",weight:.05}],K={threshold:.3,tokenize:!0,shouldSort:!0},W=new L.KH({keys:H,...K}),$=20;class Y extends V.a{constructor(){super(...arguments),this.lastUpdatedQuery=(0,h.PN)()?0:Date.now(),this.expSearchUnpublishedAssetsEnabled=void 0,this.initUnusedAssetExp=()=>{void 0===this.expSearchUnpublishedAssetsEnabled&&(0,p.hW)("exp_search_unpublished_assets").then(e=>{let r=e.get("enabled",void 0);void 0!==r&&(this.expSearchUnpublishedAssetsEnabled=r)})},this.initSources=e=>{let r=e.getState();this.initUnusedAssetExp();let n=(0,b.d1)(r);if(!n)return;let i=r.folders,a=!!n.folder_id&&(0,A.Gi)(i[n.folder_id]);((e,i,o,s)=>{let l=[],c=new Set,u=e=>{for(let r of e){let e=(0,S.V)(r);e&&c.has(e)||(e&&c.add(e),l.push({...r}))}};u((0,C.X0)(i)),r.library.assetsPanelSearch.shouldSearchDefaultLibraries&&(u((0,C.A0)(r.library,(0,T.Po)(r.library.defaultPublished.components),n,a)),u((0,C.A0)(r.library,r.library.defaultPublished.stateGroups,n,a)));let m=Object.values((0,C.WV)(r.library.local.components)),p=Object.values(r.library.local.stateGroups);u((0,C.Gg)(p,m)),this.expSearchUnpublishedAssetsEnabled||u(o.filter(e=>e.library_key!==n.library_key)),(0,d.kc)().dse_editor_templates_v1&&u(Object.values(s)),e.set(l)})(W,(0,T.Jl)(r.library.local.components),(0,C.ov)(r.mirror.sceneGraph,(0,O.C9)(r),(0,O.jf)(r),r.library.publishedByLibraryKey,r.fileVersion,e.dispatch),r.library.local.modules)},this.computeLocalResultsPromise=async(e,r,n)=>{let i=(0,G.dm)(W,e,n,r);return{normalizedSearchResults:(await i).filter(e=>(0,v.TK)(e,r)),unsubscribedSearchResults:[]}},this.computeFileResultsPromise=async(e,r,n,i,a,o,s,l,c=!1,d)=>{let u=(0,I.wJ)(r)?await (0,G.cC)(e,r,i,c):await (0,G.KK)(e,r,n??"",a??"",o,s,l,d),m=await (0,x.Ci)(!0);return{normalizedSearchResults:(0,G.AG)([],u,e,k.I.FILE,m,o),unsubscribedSearchResults:[]}},this.computeAllResultsPromise=async(e,r,n,i,a,o,s,l,c,d,u,m,p,h,_,g,f=!1,E,y)=>{if(_){let e=W.list(),r=W.list().map(e=>e.node_id);for(let n of _??[])r.includes(n.node_id)||e.push(n);W.set(e)}let b=(0,G.dm)(W,e,a?._name||void 0,a?.key||void 0),v=new Set(this.subscribedLibraryFileKeys);void 0!==g&&v.add(g);let I=(0,G.ik)(e,n,i,a,o,s,l,v,c??"",d,u,m,p,E,y),T=(0,G.hH)(e,this.subscribedLibraryFileKeys,r,d,f),S=(0,x.Ci)(!0),[w,{subscribedSearchResults:A,unsubscribedSearchResults:C},{communitySearchResults:N,unsubscribedCommunitySearchResults:L},O]=await Promise.all([b,I,T,S]),R=w,P=A;h?(P=(0,B.Yl)(A,w,N||[]),R=w.filter(e=>!e.server_score&&!e.ai_score&&!e.lexical_score||(e.score=e.lexical_score||e.ai_score||e.server_score||e.score,P.push(e),!1))):R=(0,B.Yl)(w,A,N||[]);let D=(0,G.AG)(R,P,e,k.I.ALL,O,u),M=(0,B.Yl)(N||[],D),F=(0,B.Yl)(C,R),U=(0,B.Yl)(L||[],F);return{normalizedSearchResults:[...D,...M],unsubscribedSearchResults:[...F,...U]}},this.computeResultsReduxSearchTypeHelper=async(e,r,n,i,o,s,l,m,h,_,g,f)=>{let E;let y=c.D.getState(),b=(0,C.ET)(y,c.D.dispatch),v=u.zl.get(M.xL).length>0,I=!1;switch((0,d.kc)().use_asset_search_post_routes&&(I=(await (0,p.hW)("exp_search_asset_server_reranking")).get("is_sinatra",!1)),r?.type){case k.I.LOCAL:return this.computeLocalResultsPromise(e,y.openFile?.key,y.openFile?._name||void 0);case k.I.FILE:E=this.computeFileResultsPromise(e,r.fileKey,y.selectedView?.view==="fullscreen"&&y.selectedView?.fileKey||y.openFile?.key,n,o,I,l,s,v,f);break;case k.I.RECENT:case void 0:case k.I.ALL:E=this.computeAllResultsPromise(e,n,y.fileVersion,y.openFile?.parentOrgId??null,y.openFile,y.selectedView,y.fileByKey,i,o,b,I,l,s,h,_,g,v,f,m);break;case k.I.SITE_KIT:return Promise.resolve({normalizedSearchResults:[],unsubscribedSearchResults:[]});default:return(0,a.xb)(r,"unknown search type")}let T=await (0,x.Ci)(!0),S=await E;return await z.trackTopKResults({results:S.normalizedSearchResults,sessionId:o??"",queryId:l??"",entryPoint:s??"",queryType:"text",aiResultsEnabled:T,fileKey:y.openFile?.key,query:e,searchType:r?.type??k.I.ALL}),E},this.trackTopKResults=async e=>{let{results:r,sessionId:n,queryId:i,entryPoint:a,queryType:o,aiResultsEnabled:s,fileKey:c,query:d,searchType:u}=e,m=(await (0,p.w0)("max_asset_search_results_to_log")).get("count",20);r.slice(0,m).forEach((e,r)=>{let m=e.server_score||e.ai_score||e.lexical_score?"server":"fuse";l.az.trackDefinedEvent("asset_search.top_k_results",{sessionId:n,queryId:i,entryPoint:a,fileKey:c,position:r,aiResultsEnabled:s,assetKey:Q(e),assetType:e.type,queryType:o,isInSubscribedLibrary:!!c&&this.subscribedLibraryFileKeys.has(c),query:d,source:m,score:"score"in e?e.score:void 0,scoreFuse:e.fuse_score??void 0,scoreServer:e.server_score??void 0,searchType:u})})},this.computeResultsRedux=async e=>{let r=e.getState(),n=(0,D.Ei)(),i=u.zl.get(w.qp),a=await (0,x.Ci)(!0),o=r.library.assetsPanelSearch.query,c=r.openFile?.key,d=r.openFile?.teamId,m=r.openFile?.parentOrgId;if(!o||!c){e.dispatch(f.xI()),e.dispatch((0,E.eK)({queryId:null}));return}e.dispatch((0,E.eK)({queryId:n}));let p=r.library.assetsPanelSearch.searchOptions;if(p&&!(0,B.eu)(p)){e.dispatch(f.xI()),e.dispatch((0,E.eK)({queryId:null}));return}let h=(0,y.XE)(r.selectedView)===R.nT.Design;l.az.trackDefinedEvent("assets_panel.component_search",{query:o,inDesignEditor:h,searchSessionId:r.search.sessionId??"",assetsPanelVersion:r.library.assetsPanelSearch.versionForTracking,fileKey:c,fileTeamId:d??void 0,fileOrgId:m??void 0,queryId:n}),r.search.sessionId&&e.dispatch(_.pY());let g=Date.now();if(g<=this.lastUpdatedQuery)return;let b=await this.computeResultsReduxSearchTypeHelper(o,p,h,i,r.search.sessionId,r.library.assetsPanelSearch.entryPoint,n),I={aiResultsEnabled:a,query:o,queryId:n,assetsPanelVersion:r.library.assetsPanelSearch.versionForTracking,entryPoint:r.library.assetsPanelSearch.entryPoint,fileKey:c,fileOrgId:m??void 0,fileTeamId:d??void 0,searchCameFromExtraneousDependency:u.zl.get(V.F)?.hasApprovedDependency===!1||void 0,selectedViewFileKey:"fullscreen"===r.selectedView.view&&r.selectedView.fileKey?r.selectedView.fileKey:void 0,totalShownResults:b.normalizedSearchResults.length};if(p?.type===k.I.LOCAL){e.dispatch(f.Y1({assetSearchResults:b,searchSessionId:r.search.sessionId,queryId:n})),e.dispatch((0,E.w2)({sessionId:r.search.sessionId,query:o,queryId:n})),null===r.search.sessionId&&(0,l.sx)("asset_search.missing_session_id",{previousSessionId:r.search.lastLoadedQuery.sessionId,entryPoint:r.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let i={elapsedTime:Date.now()-g,localSearchResultCount:b.normalizedSearchResults.length,searchType:p?.type};l.az.trackDefinedEvent("assets_panel.search_time",{...I,...i,searchSessionId:r.search.sessionId??""}),l.az.trackDefinedEvent("asset_search.query_result",{...I,...i,sessionId:r.search.sessionId??""}),this.lastUpdatedQuery=g;return}if(o!==e.getState().library.assetsPanelSearch.query)return;e.dispatch(f.Y1({assetSearchResults:b,searchSessionId:r.search.sessionId,queryId:n})),e.dispatch((0,E.w2)({sessionId:r.search.sessionId,query:o,queryId:r.search.queryId}));let[T,S]=s()(b.normalizedSearchResults,e=>(0,v.TK)(e,c));null===r.search.sessionId&&(0,l.sx)("asset_search.missing_session_id",{previousSessionId:r.search.lastLoadedQuery.sessionId,entryPoint:r.library.assetsPanelSearch.entryPoint},{forwardToDatadog:!0});let A={elapsedTime:Date.now()-g,localSearchResultCount:T.length,subscribedSearchResultCount:S.length,unsubscribedSearchResultsCount:b.unsubscribedSearchResults.length,searchType:p?.type??k.I.ALL},C={},N=r.selectedView;if("fullscreen"===N.view&&N.editorType===R.nT.Sites&&p?.type&&[k.I.ALL,k.I.SITE_KIT].includes(p?.type)){let e=u.zl.get(er);C={siteKitSearchResultsCount:e,totalShownResults:I.totalShownResults+e}}l.az.trackDefinedEvent("assets_panel.search_time",{...I,...A,...C,searchSessionId:r.search.sessionId??""}),l.az.trackDefinedEvent("asset_search.query_result",{...I,...A,...C,sessionId:r.search.sessionId??""}),S.slice(0,$).forEach((e,i)=>{l.az.trackDefinedEvent("assets_panel.top_k_results",{query:o,searchType:p?.type??k.I.ALL,searchSessionId:r.search.sessionId??"",fileKey:c,subscribedLibraryKeys:JSON.stringify(Array.from(this.subscribedLibraryFileKeys).slice(0,10)),scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,position:i,aiResultsEnabled:a,assetKey:Q(e),assetType:e.type,queryId:n})}),this.lastUpdatedQuery=g,u.zl.set(V.F,null)}}}let z=new Y,j=(0,g.nF)((e,{ignoreLoadingState:r=!1}={})=>{e.getState().search.sessionId||e.dispatch(_.Dy({entryPoint:"editor:assets_panel"})),q(e.getState(),{ignoreLoadingState:r})&&z.runComputeResultWithSourceChange(e)}),q=(0,U.n)((e,{ignoreLoadingState:r=!1}={})=>r?!!(e.openFile&&e.fileVersion):!!(e.openFile&&e.fileVersion&&(0,N.D2)(e.loadingState,(0,F.yD)(e.openFile.key)))),Z=e=>e.type===P.PW.COMPONENT,X=e=>e.type===P.PW.STATE_GROUP,J=e=>e.filter(e=>Z(e)||X(e));function Q(e){if((0,P.Do)(e))return"LOCAL"===e.subscriptionStatus?e.keyForPublish:e.key;switch(e.type){case P.PW.COMPONENT:return e.component_key;case P.PW.STATE_GROUP:case P.PW.MODULE:return e.key}}function ee(){let e=(0,i.d4)(e=>e.library.assetsPanelSearch.query),r=(0,i.d4)(r=>e?r.search.lastLoadedQuery?.sessionId??r.search.sessionId:null);return{query:e,searchSessionId:r}}function et(){return(0,i.d4)(e=>e.search.queryId)}let er=(0,m.eU)(0)},26328:(e,r,n)=>{n.d(r,{Yl:()=>l,eu:()=>s}),n(35645);var i=n(966712),a=n(416095);n(173454);var o=n(48515);function s(e){return e.type===o.I.ALL||e.type===o.I.LOCAL||e.type===o.I.FILE||e.type===o.I.SITE_KIT}function l(e,...r){let n={};r.forEach(e=>{e.forEach(e=>{n[(0,a.Av)(e)]=e})});let o=[];return e.forEach(e=>{let r=(0,a.Av)(e);r in n?(e.ai_score&&(n[r].ai_score=e.ai_score),e.lexical_score&&(n[r].lexical_score=e.lexical_score),(0,i.kc)().asset_search_return_file_name&&e.file_name&&!n[r].file_name&&(n[r].file_name=e.file_name),e.server_score&&(n[r].server_score=e.server_score),e.fuse_score&&(n[r].fuse_score=e.fuse_score)):o.push(e)}),o}},535257:(e,r,n)=>{n.d(r,{AG:()=>k,KK:()=>M,UR:()=>w,cC:()=>R,dm:()=>P,hH:()=>O,ik:()=>C});var i=n(35645),a=n.n(i),o=n(776250),s=n(38329),l=n(966712),c=n(418956),d=n(647899),u=n(588666),m=n(154483),p=n(378905),h=n(420576),_=n(696673),g=n(69961),f=n(416095),E=n(666068),y=n(99506),b=n(540019),v=n(173454),I=n(508567),T=n(48515),S=n(239737);let w=40,A=(0,m.fv)();async function C(e,r,n,i,c,d,m,_,E,b,v,T,L,O,R=!1){try{let C=i?.editorType===y._Y.WHITEBOARD,P=[],D=_.size<w,k=c?.view==="fullscreen"&&c?.fileKey||i?.key||"",M={query:e,openFileKey:k,fv:r||0,orgId:n||void 0,excludeAIResults:C,subscribedLibraryFileKeys:D?JSON.stringify(Array.from(_)):void 0,searchSessionId:E,logEligibility:!k&&await (0,S.Ci)(!0)||void 0,isUi3:g.nt.ui3.getValue()},F={...M,queryId:T,selectedItems:O,usedProductComponents:await N(s.D.getState()),serverRerank:v,entryPoint:L,includeOnlySubscribed:R&&D};P=((0,l.kc)().use_asset_search_post_routes?await I.$W.postComponents(F):await I.$W.getComponents(M)).data.meta;let U=i?i.key:"",B=i&&((0,h.Kz)(i)?i.sourceFileKey:""),V=P.filter(e=>{if((0,p.TK)(e,B))return!1;let r=(0,l.u4)("ds_use_lib_keys",e.library_key in m,A(e)in d);return(0,l.kc)().asset_search_return_file_name?!!e.file_name||(r&&(0,o.sx)("asset_search.missing_file_name",{openFileKey:U,guid:e.node_id,libraryKey:e.library_key,fileKey:A(e),sourcePath:"getAllServerSideSearchResults",isLocal:!1,assetKey:(0,f.Av)(e)}),!1):r}).map(e=>({...e,server_score:e.score})),G=new Set;for(let e of _)G.add((0,u.$)(e));let H=await x(b),[K,W]=a()(V,e=>((0,l.kc)().ds_use_lib_keys?G.has(e.library_key)||i?.libraryKey===e.library_key:_.has(A(e))||A(e)===U)||H(e));return{subscribedSearchResults:K,unsubscribedSearchResults:W}}catch(r){return o.az.trackDefinedEvent("assets_panel.server_search_for_all_components_failure",{query:e}),{subscribedSearchResults:[],unsubscribedSearchResults:[]}}}async function N(e){let r=e.library.subscribedSymbolsOnCurrentPage.map(e=>({key:e.key,type:v.PW.COMPONENT})),n=e.library.subscribedStateGroupsOnCurrentPage.map(e=>({key:e.key,type:v.PW.STATE_GROUP})),i=(await (0,d.w0)("max_product_components_to_log")).get("count",40),a=i/2,o=Math.min(r.length,a),s=Math.min(n.length,a);return[...r.slice(0,o),...n.slice(0,s),...r.slice(o),...n.slice(s)].slice(0,i)}let L=(0,m.fv)();async function O(e,r,n,i,s=!1){if(!n)return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};try{if(!c.zl.get(_.JB))return{communitySearchResults:null,unsubscribedCommunitySearchResults:null};let{results:n}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)([v.PW.COMPONENT,v.PW.STATE_GROUP]).join(","),includeVisualAssets:!!s||void 0})).data.meta,d=await x(i),[u,m]=a()(n,e=>r.has(L(e))||d(e));if((0,l.kc)().asset_search_return_file_name)for(let e of n)e.file_name||(0,o.sx)("asset_search.missing_file_name",{guid:e.node_id,libraryKey:e.library_key,fileKey:L(e),sourcePath:"getCommunityComponentSearchResults",isLocal:!1,assetKey:(0,f.Av)(e)});return{communitySearchResults:u,unsubscribedCommunitySearchResults:m}}catch(r){return o.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),{communitySearchResults:null,unsubscribedCommunitySearchResults:null}}}async function R(e,r,n,i=!1){if(!n)return[];try{if(!c.zl.get(_.JB))return[];let{results:n}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)([v.PW.COMPONENT,v.PW.STATE_GROUP]).join(","),hubFileIds:[r],includeVisualAssets:!!i||void 0})).data.meta;return n}catch(r){return o.az.trackDefinedEvent("assets_panel.search_for_components_from_community_libraries_error",{query:e}),[]}}function P(e,r,n,i){return e.search(r).then(e=>e.map(e=>{let r;return(0,l.kc)().asset_search_return_file_name&&((0,p.TK)(e.item,i)?r=n:(0,o.sx)("asset_search.non_local_fuse_result",{openFileKey:i,guid:e.item.node_id,libraryKey:e.item.library_key,fileKey:A(e.item),assetKey:(0,f.Av)(e.item)})),{...e.item,score:e.score,fuse_score:e.score,file_name:r}}))}function D(e,r){let n=r.split(" ").filter(e=>e.length>2),i=e.name.toLowerCase().substring(e.name.lastIndexOf("/")+1);return n.length>0&&n.every(e=>i.includes(e.toLowerCase()))}function k(e,r,n,i,o,s){if(0===r.length)return e;if(i===T.I.FILE&&!o)return r;let l=r;o&&!s&&(l=function(e,r){let n=e.filter(e=>e.lexical_score),[i,o]=a()(n,e=>D(e,r)),s=e.filter(e=>e.ai_score),l=Math.max(...i.map(e=>e.lexical_score)),c=Math.min(...i.map(e=>e.lexical_score)),d=Math.max(...o.map(e=>e.lexical_score)),u=Math.min(...o.map(e=>e.lexical_score)),m=Math.max(...s.map(e=>e.ai_score)),p=Math.min(...s.map(e=>e.ai_score));return e=(e=e.map(e=>{if(e.lexical_score){let n;return n=D(e,r)?l===c?1:.9+.09999999999999998*((e.lexical_score-c)/(l-c)):d===u?.89:.89*(e.lexical_score-u)/(d-u),{...e,score:n}}return e})).map(e=>{if(e.ai_score){let r=m===p?.89:(e.ai_score-p)/(m-p)*.89;return e.lexical_score&&(r=Math.max(r,e.score)),{...e,score:r}}return e})}(l,n));let c=Math.max(...l.map(e=>e.score));return[...e.map(e=>{let r=e.server_score||1-e.fuse_score,n=(1-e.score)*.95*c;return{...e,score:s?r:n}}),...l].sort((e,r)=>r.score-e.score)}async function M(e,r,n,i,a,c,d,u){try{let m={query:e,fileKey:r,openFileKey:n,searchSessionId:i,logEligibility:!n&&await (0,S.Ci)(!0)||void 0,isUi3:g.nt.ui3.getValue()},p={...m,queryId:c,selectedItems:u,usedProductComponents:await N(s.D.getState()),serverRerank:a,entryPoint:d},h=(0,l.kc)().use_asset_search_post_routes?await I.$W.postComponentsFromFile(p):await I.$W.getComponentsFromFile(m);if((0,l.kc)().asset_search_return_file_name)for(let e of h.data.meta)e.file_name||(0,o.sx)("asset_search.missing_file_name",{openFileKey:n,guid:e.node_id,libraryKey:e.library_key,fileKey:A(e),sourcePath:"getServerSideSearchResultsForFile",isLocal:!1,assetKey:(0,f.Av)(e)});return h.data.meta}catch(n){return o.az.trackDefinedEvent("assets_panel.server_search_for_file_failure",{query:e,fileKey:r}),[]}}b.M4.Query({fetch:async({query:e,libraryId:r,assetTypes:n})=>{let{results:i}=(await I.$W.getAssetsFromCommunityLibraries({query:e,assetTypes:(0,I.in)(n).join(","),hubFileIds:[r]}).catch(()=>({data:{meta:{results:[]}}}))).data.meta;return i},output:({data:e})=>e.map(E.aV),enabled:({query:e})=>null!=e&&e.trim().length>0});var F=(e=>(e.OPEN_FILE="OPEN_FILE",e.FILE_VERSION="FILE_VERSION",e.LOADING_STATE="LOADING_STATE",e))(F||{});async function x(e){let r=(await (0,d.hW)("exp_search_unpublished_assets")).getValue("enabled",!1);return n=>r&&e.has((0,f.Av)(n))}},207825:(e,r,n)=>{n.d(r,{u5:()=>o,vQ:()=>l});var i=n(961034);n(939863),n(186828);var a=n(155367);let o="originTab",s=[a.J7.BILLING];function l(e){let r=(0,i.K)(a.J7,e);if(r)return s.includes(r)?r:void 0}},698812:(e,r,n)=>{n.d(r,{EO:()=>l,EQ:()=>u,MX:()=>c,XY:()=>d});var i=n(411855),a=n(188507),o=n(561546);n(181912),n(881388),n(939863),n(66037),n(679892);var s=n(694687);n(594901),n(227544),n(596607),n(428467);let l=e=>`LICENSE_GROUP_GET_${e}`;function c(e){let r=(0,a.d4)(({licenseGroups:e})=>e),n=(0,s.dq)();return(0,i.useMemo)(()=>{let i=Object.values(r).filter(r=>r&&r.org_id===(e??n));return(0,o.KQ)(i,"name"),i},[r,n,e])}function d(e){return(0,a.d4)(r=>{var n;return!!e&&(n=r.orgById[e],!!(n?.bigma_enabled&&n?.license_groups_count))})}function u(e,r,n){let i=[],a=[];e.forEach(e=>{e.admin_users_metadata.length>0?e.admin_users_metadata.some(e=>e.id===r)?i.push(e):n||a.push(e):n||i.push(e)});let s=i.concat(a);return(0,o.KQ)(i,"name"),(0,o.KQ)(a,"name"),(0,o.KQ)(s,"name"),{groupsUserIsAdminOf:i,otherLicenseGroups:a,allAdminableLicenseGroups:s}}},99506:(e,r,n)=>{n.d(r,{A$:()=>eq,Ag:()=>ed,B0:()=>Q,BQ:()=>et,D8:()=>eL,Dh:()=>D,E9:()=>g,El:()=>q,FE:()=>d,Fd:()=>A,GP:()=>P,G_:()=>F,Go:()=>eV,Hi:()=>ez,Il:()=>p,JB:()=>eG,K:()=>ei,KB:()=>ey,Lb:()=>eB,Lc:()=>m,Mr:()=>a,OL:()=>eu,P4:()=>eF,P5:()=>ew,PQ:()=>x,PW:()=>s,Pn:()=>e_,Pu:()=>eg,Qh:()=>eN,R:()=>eK,R2:()=>eC,Rc:()=>_,Se:()=>ef,UX:()=>ec,Uu:()=>ee,We:()=>j,XI:()=>eH,Xn:()=>el,Zf:()=>eU,_D:()=>J,_Y:()=>w,a0:()=>U,bQ:()=>ep,bU:()=>z,bk:()=>C,bp:()=>eY,cA:()=>Z,dQ:()=>eo,eD:()=>eD,h4:()=>em,h9:()=>h,hM:()=>ea,hX:()=>eI,ho:()=>en,iS:()=>eW,iU:()=>ex,iX:()=>es,kI:()=>eR,kU:()=>eA,o6:()=>T,pk:()=>k,sC:()=>ek,sm:()=>eb,tK:()=>S,tw:()=>L,ud:()=>c,un:()=>f,vt:()=>ev,wl:()=>eh,xj:()=>o,xw:()=>l,xy:()=>eP,y4:()=>e$,zI:()=>Y,zd:()=>eM});var i=n(104180),a=(e=>(e.FILE_SEEN="file_seen",e.DESIGN_FILE_SEEN="design_file_seen",e.WHITEBOARD_FILE_SEEN="whiteboard_file_seen",e.FILE_EDIT="file_edit",e.DESIGN_FILE_EDIT="design_file_edit",e.WHITEBOARD_FILE_EDIT="whiteboard_file_edit",e.DEV_MODE_FILE_SEEN="dev_mode_file_seen",e))(a||{});let o=(0,i.fc)(a);var s=(e=>(e.RESPONSIVE_SET="responsive_set",e.CONSTRAINED_TEMPLATE="constrained_template",e.CODE_COMPONENT="code_component",e))(s||{}),l=(e=>(e.INHERIT="INHERIT",e.NONE="NONE",e.OVERRIDE="OVERRIDE",e))(l||{}),c=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e))(c||{}),d=(e=>(e.STANDALONE="standalone",e.BUNDLE="bundle",e.ADD_ON="add_on",e))(d||{}),u=(e=>(e.MONTH="month",e.YEAR="year",e))(u||{}),m=(e=>(e.ORGANIZATION="Organization",e.ENTERPRISE="Enterprise",e))(m||{}),p=(e=>(e.ORG="Org",e))(p||{}),h=(e=>(e.PUBLISHED_PLUGIN="published-plugin",e.FIRST_PARTY="first-party",e))(h||{}),_=(e=>(e.INHERIT="INHERIT",e.OVERRIDE="OVERRIDE",e))(_||{}),g=(e=>(e.DEFAULT="default",e.SRGB="srgb",e.DISPLAY_P3="display_p3",e))(g||{}),f=(e=>(e.CREATOR="creator",e.PUBLISHER="publisher",e))(f||{}),E=(e=>(e.PENDING="pending",e.SUCCEEDED="succeeded",e.CANCELED="canceled",e.REFUNDED="refunded",e.TRIALING="trialing",e.SUBSCRIPTION_PAYMENT_FAILED="subscription_payment_failed",e.INVOICE_FINALIZATION_FAILED="invoice_finalization_failed",e.DISPUTED="disputed",e))(E||{}),y=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.PROFILE="profile",e.WIDGET="widget",e))(y||{}),b=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e))(b||{}),v=(e=>(e.ALLOW="ALLOW",e.DISABLE="DISABLE",e))(v||{}),I=(e=>(e.DESKTOP="desktop",e.IPAD="ipad",e))(I||{}),T=(e=>(e.STATUS_CHANGE="status_change",e))(T||{}),S=(e=>(e.PIXEL="PIXEL",e.SCALED="SCALED",e))(S||{}),w=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.SLIDES="slides",e.SITES="sites",e.COOPER="cooper",e))(w||{});let A=(0,i.fc)(w);var C=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e.FOLDER="folder",e.TEAM="team",e.WORKSPACE="workspace",e))(C||{}),N=(e=>(e.COST_CENTER="costCenter",e.ORGANIZATION="organization",e.DIVISION="division",e.DEPARTMENT="department",e))(N||{});let L=(0,i.fc)(N);var O=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.EXTERNAL="external",e))(O||{}),R=(e=>(e.ALLOWED="allowed",e.MEMBERS_ONLY="members_only",e.BANNED="banned",e))(R||{}),P=(e=>(e.PRO_TRIAL="pro_trial",e.DOWNGRADED_ORG_TEAM="downgraded_org_team",e.PROMO_CODE="promo_code",e.ADMIN_OVERRIDE="admin_override",e))(P||{});let D=(0,i.fc)(P);var k=(e=>(e.ORG="Org",e.WORKSPACE="Workspace",e.TEAM="Team",e))(k||{}),M=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(M||{}),F=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e))(F||{}),x=(e=>(e.ORG_VIEW="org_view",e.ORG_EDIT="org_edit",e.WORKSPACE_EDIT="workspace_edit",e.WORKSPACE_VIEW="workspace_view",e.VIEW="view",e.EDIT="edit",e.INHERIT="inherit",e.INVITE_ONLY="invite_only",e))(x||{});let U=(0,i.fc)(x);var B=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(B||{}),V=(e=>(e.INCOMPLETE="incomplete",e.COMPLETE="complete",e))(V||{}),G=(e=>(e.PENDING="pending",e.NEEDS_REVIEW="needs_review",e.REVIEW_REJECTED="review_rejected",e.REVIEW_ACCEPTED="review_accepted",e.AUTO_ACCEPTED="auto_accepted",e))(G||{}),H=(e=>(e.APPROVED="approved",e.REJECTED="rejected",e.UNREVIEWED="unreviewed",e))(H||{}),K=(e=>(e.NOT_STARTED="not_started",e.MATCH="match",e.MISMATCH="mismatch",e))(K||{}),W=(e=>(e.NOT_STARTED="not_started",e.AWAITING_BUILDS="awaiting_builds",e.IN_PROGRESS="in_progress",e.COMPLETED="completed",e))(W||{}),$=(e=>(e.FIGMA_FIRST_PARTY="figma_first_party",e.FIGMA_PARTNER="figma_partner",e.OFF_PLATFORM="off_platform",e.HAS_FREEMIUM_CODE="has_freemium_code",e))($||{}),Y=(e=>(e.BUILD="build",e.COMPLETED="completed",e.NONE="none",e))(Y||{}),z=(e=>(e.PUBLIC="public",e.PRIVATE="private",e.SECRET="secret",e))(z||{});let j=(0,i.fc)(z);var q=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(q||{});let Z=(0,i.fc)(q);var X=(e=>(e.IP_ALLOWLIST="ip_allowlist",e.NETWORK_ACCESS_RESTRICTION="network_access_restriction",e))(X||{}),J=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(J||{});let Q=(0,i.fc)(J);var ee=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.ORG_INVITE_REDEEM="org_invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.RESOURCE_MOVED_TO_ORG="resource_moved_to_org",e.DRAFTS_SHARE="drafts_share",e.ACCESS_EDIT_LINK="access_edit_link",e.CREATE_TEAM="create_team",e.JOIN_TEAM="join_team",e.JOIN_TEAM_REQUEST="join_team_request",e.ADMIN_UPGRADE="admin_upgrade",e.SCIM="scim",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.RUN_PLUGIN="run_plugin",e.RESOURCE_MOVED_FROM_ORG_DRAFTS="resource_moved_from_org_drafts",e.DEFAULT_PAID_STATUS="default_paid_status",e.FJ_GA_REUPGRADE="fj_ga_reupgrade",e.EDIT_BUTTON="edit_button",e.EDIT_ACTION="edit_action",e.ACTIVE_EDIT_ACTION="active_edit_action",e.ORG_MERGE="org_merge",e.DEV_MODE_PRE_COMMIT_BETA_USE="dev_mode_pre_commit_beta_use",e.UNKNOWN="unknown",e.UNKNOWN_POPULATED_THROUGH_BACKFILL="unknown_populated_through_backfill",e.SCIM_RECOVERY="scim_recovery",e.ROLE_FALLBACK="role_fallback",e.PAID_STATUS_ON_ORG_CREATION="paid_status_on_org_creation",e.TEAM_ADDED_TO_ORG_THROUGH_FIGMA_ADMIN="team_added_to_org_through_figma_admin",e))(ee||{});let et=(0,i.fc)(ee);var er=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.ORG="org",e))(er||{});let en=(0,i.fc)(er);var ei=(e=>(e.FOLDER="Folder",e.WORKSPACE="Workspace",e))(ei||{}),ea=(e=>(e.UNPINNED="unpinned",e.PINNED="pinned",e))(ea||{}),eo=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(eo||{}),es=(e=>(e.ORG="Org",e.TEAM="Team",e))(es||{}),el=(e=>(e.ADMIN="admin",e.MEMBER="member",e.GUEST="guest",e))(el||{}),ec=(e=>(e.INCOMPLETE="incomplete",e.ACTIVE="active",e.UNPAID="unpaid",e.SUSPENDED="suspended",e.SUSPENDED_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="suspended_monthly_sub_editor_count_exceeded",e.DEACTIVATED="deactivated",e))(ec||{}),ed=(e=>(e.STARTER="starter",e.STUDENT="student",e.PRO="pro",e.ORG="org",e.ENTERPRISE="enterprise",e))(ed||{}),eu=(e=>(e.ORG="organization",e.TEAM="team",e))(eu||{}),em=(e=>(e.ORG_USER="org_user",e.TEAM_USER="team_user",e))(em||{}),ep=(e=>(e.PENDING="pending",e.APPROVED="approved",e.REJECTED="rejected",e))(ep||{}),eh=(e=>(e.DEFAULT="default",e.INTERNAL="internal",e.CONFIG24="config24",e.APPLE_ALPHA="apple_alpha",e.GOOGLE_ALPHA="google_alpha",e))(eh||{}),e_=(e=>(e.FIGMA="figma",e.APPLE="apple",e.GOOGLE="google",e))(e_||{}),eg=(e=>(e.ORG_VIEW="org_view",e.VIEW="view",e.INHERIT="inherit",e))(eg||{});let ef=(0,i.fc)(eg);var eE=(e=>(e.ACTIVE="active",e.DEACTIVATED="deactivated",e.EXPIRED="expired",e))(eE||{}),ey=(e=>(e.BLOCKED="blocked",e.ORG_PRIVATE="org_private",e.PENDING_USER_VISUAL_COMPLIANCE="pending_user_visual_compliance",e.PENDING_3P_M10N_CHECK="pending_3p_m10n_check",e.PENDING_PUBLIC="pending_public",e.ORG_PRIVATE_PENDING_PUBLIC="org_private_pending_public",e.DELISTED="delisted",e.DELISTED_CREATOR_STRIPE_DISABLED="delisted_creator_stripe_disabled",e.APPROVED_PUBLIC="approved_public",e))(ey||{}),eb=(e=>(e.PENDING="pending",e.APPROVED="approved",e.DENIED="denied",e.REVOKED="revoked",e))(eb||{}),ev=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e))(ev||{}),eI=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEV_MODE="dev_mode",e.SLIDES="slides",e.COLLABORATOR="collaborator",e.DEVELOPER="developer",e.EXPERT="expert",e.VIEW="view",e))(eI||{}),eT=(e=>(e.FILE="file",e.FILE_REPO="file_repo",e.FOLDER="folder",e.TEAM="team",e.PROTOTYPE="prototype",e))(eT||{}),eS=(e=>(e.MIGRATION_NOT_NEEDED="migration_not_needed",e.MIGRATION_NEEDED="migration_needed",e.MIGRATED="migrated",e))(eS||{}),ew=(e=>(e.NONE="NONE",e.ACCEPTED="ACCEPTED",e.STARTED_ONBOARDING="STARTED_ONBOARDING",e.ENABLED="ENABLED",e.DISABLED="DISABLED",e))(ew||{}),eA=(e=>(e.STUDENT_TEAM_NULL="not_student_team",e.STUDENT_TEAM_CURRENT="current_student_team",e.STUDENT_TEAM_EXPIRED="expired_student_team",e))(eA||{});let eC=(0,i.fc)(eA);var eN=(e=>(e.OK="ok",e.GRACE_PERIOD="grace_period",e.PAST_DUE="past_due",e.NO_MONTHLY_SUB_EDITOR_COUNT_EXCEEDED="no_monthly_sub_editor_count_exceeded",e.INCOMPLETE="incomplete",e))(eN||{});let eL=(0,i.fc)(eN);var eO=(e=>(e.MODEL_PREDICTION="model_prediction",e.USER_RECENTS_PREPENDED="user_recents_prepended",e.USER_RECENTS_POSTPENDED="user_recents_postpended",e))(eO||{}),eR=(e=>(e.UNVERIFIED="unverified",e.VERIFIED="verified",e.PENDING="pending",e.UNAVAILABLE="unavailable",e))(eR||{});let eP=(0,i.fc)(eR);var eD=(e=>(e.TEAM_ACCESS_VIEW="team_view",e.TEAM_ACCESS_EDIT="team_edit",e.TEAM_ACCESS_DISABLED="team_access_disabled",e))(eD||{}),ek=(e=>(e.VIEW="view",e.EDIT="edit",e))(ek||{});let eM=(0,i.fc)(ek);var eF=(e=>(e.LOCKED="locked",e.EDITORS_LIMITED="editors_limited",e.PROJECTS_LIMITED="projects_limited",e.FILES_LIMITED="files_limited",e.PROJECTS_LIMITED_LEGACY="projects_limited_legacy",e.FILES_LIMITED_LEGACY="files_limited_legacy",e.WHITEBOARD_FILES_LIMITED="whiteboard_files_limited",e.WHITEBOARD_FILES_LIMITED_BETA="whiteboard_files_limited_beta",e.SLIDE_FILES_LIMITED="slide_files_limited",e.SLIDE_FILES_LIMITED_BETA="slide_files_limited_beta",e))(eF||{});let ex=(0,i.fc)(eF);var eU=(e=>(e.STARTER="starter",e.FULL="full",e.RESTRICTED="restricted",e))(eU||{}),eB=(e=>(e.SEATS_MODEL_BILLING_2025="seats_model_billing_2025",e))(eB||{}),eV=(e=>(e.FOLDER="folder",e))(eV||{});let eG=(0,i.fc)(eV);var eH=(e=>(e.AUTO_APPROVED="auto_approved",e.AUTO_APPROVED_AVAILABLE_SEAT="auto_approved_available_seat",e.ADMIN_INITIATED="admin_initiated",e.FIGMA_ADMIN="figma_admin",e.MANUAL_APPROVED="manual_approved",e.MANUAL_APPROVED_NO_AVAILABLE_SEAT="manual_approved_no_available_seat",e.SCIM="scim",e))(eH||{});let eK=(0,i.fc)(eH);var eW=(e=>(e.VERIFIED="verified",e.UNVERIFIED="unverified",e.BLOCKED="blocked",e))(eW||{}),e$=(e=>(e.CANVAS="canvas",e.PROTOTYPE="prototype",e.WHITEBOARD="whiteboard",e.LIBRARY="library",e.SLIDE_TEMPLATE="slide_template",e.SITE_TEMPLATE="site_template",e))(e$||{}),eY=(e=>(e.ADMIN="admin",e.MEMBER="member",e))(eY||{});let ez=(0,i.fc)(eY);var ej=(e=>(e.SELF_SELECTED="self",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e.SCIM_GROUP="scim_group",e))(ej||{});let eq=(0,i.fc)(ej)},279453:(e,r,n)=>{n.d(r,{$kt:()=>em,AXx:()=>tu,AbW:()=>e0,Acj:()=>U,Aqu:()=>rP,BB3:()=>e9,BVX:()=>D,BXv:()=>T,B_E:()=>ry,BbB:()=>tf,Bu2:()=>tt,Ce_:()=>v,CfA:()=>x,CrP:()=>W,Csd:()=>te,D2i:()=>eI,DSh:()=>rS,DtB:()=>rT,EEx:()=>_,EW:()=>rY,EZU:()=>tC,Ej3:()=>N,EmG:()=>ro,FBc:()=>t4,FHz:()=>eo,FqP:()=>t$,Fr3:()=>e8,FuG:()=>h,G0Y:()=>c,G9Z:()=>rX,GIl:()=>eE,GgD:()=>eP,GyZ:()=>rM,H1b:()=>rF,H2R:()=>en,H5I:()=>rk,HSg:()=>tY,HdA:()=>eC,HpJ:()=>p,I2e:()=>e5,ISl:()=>rJ,IiJ:()=>tA,Ipg:()=>tE,J2w:()=>ew,JJY:()=>tQ,JKh:()=>eY,JM$:()=>rp,JRW:()=>tB,JS_:()=>rW,JgS:()=>tG,JkW:()=>eJ,JuA:()=>tK,JvY:()=>ex,KLE:()=>P,KN$:()=>ep,KiY:()=>tW,L1I:()=>eM,LD2:()=>ed,Lew:()=>t_,Lom:()=>r$,Lqr:()=>rO,M5e:()=>eD,M7X:()=>G,M9I:()=>g,M9q:()=>tk,N63:()=>ru,N8H:()=>rA,NI1:()=>t0,NLL:()=>F,NSA:()=>eh,OCJ:()=>eT,OFA:()=>tJ,OiG:()=>et,P0r:()=>K,P8Q:()=>e1,PG0:()=>ez,Pn8:()=>L,QD8:()=>ef,QEv:()=>rB,QrR:()=>C,Ra2:()=>rH,RmP:()=>eX,SMQ:()=>e_,SWF:()=>tZ,Sc8:()=>I,Sq1:()=>e7,Std:()=>tL,Stx:()=>eK,T0:()=>rd,TKM:()=>z,TNJ:()=>rN,Tej:()=>rG,Thl:()=>e6,U8U:()=>tz,UAQ:()=>rh,UpR:()=>ei,V15:()=>ra,Vny:()=>r_,WF4:()=>tO,WKb:()=>rs,WND:()=>X,X$D:()=>rE,X9s:()=>r2,XGw:()=>el,XKS:()=>rC,XRH:()=>s,XRI:()=>eH,Xw7:()=>rn,Y9I:()=>tv,YOu:()=>eL,Yh6:()=>t9,Yrz:()=>ek,Z5M:()=>J,ZBn:()=>rl,ZzU:()=>eS,_iU:()=>A,aNI:()=>eV,aON:()=>r0,aQv:()=>ts,abL:()=>w,apG:()=>e4,bCq:()=>rZ,bEy:()=>y,bUF:()=>rv,bUn:()=>r5,bel:()=>rR,bsh:()=>rz,c2_:()=>rf,cBJ:()=>eG,cQi:()=>eA,cfd:()=>rt,cmY:()=>rj,d0w:()=>eB,dA6:()=>eF,dDF:()=>eg,dTR:()=>eO,dq_:()=>tX,eHy:()=>B,eSI:()=>t3,efs:()=>tl,ehp:()=>tT,epW:()=>ev,f19:()=>th,ftA:()=>H,fy7:()=>tm,gDr:()=>b,gk5:()=>tI,gkf:()=>eb,grH:()=>tb,hCR:()=>rU,hbX:()=>rb,hj8:()=>R,hqi:()=>u,i1D:()=>rQ,iAs:()=>ta,iJD:()=>j,iL6:()=>rg,iQA:()=>tr,iY3:()=>eR,ib2:()=>eu,imP:()=>rK,jXq:()=>ty,jl4:()=>tR,jmg:()=>ee,k$m:()=>e3,kJx:()=>S,kQI:()=>rL,k_1:()=>tH,kdQ:()=>Y,lVt:()=>Q,lrh:()=>rq,m0h:()=>ej,mCn:()=>eQ,n8j:()=>eq,nD6:()=>f,nJE:()=>tP,nXJ:()=>tw,nn0:()=>e$,o27:()=>to,o6H:()=>t1,o8f:()=>tF,o9k:()=>tg,oBY:()=>eN,oGE:()=>t2,oSh:()=>tM,op7:()=>rr,oro:()=>V,pFu:()=>t5,pKB:()=>O,pMp:()=>M,qBf:()=>q,qNg:()=>eZ,qRE:()=>es,qYc:()=>t7,qZS:()=>eW,qjT:()=>ea,qn8:()=>rw,rRb:()=>rm,ruy:()=>E,rwE:()=>ri,s5h:()=>tN,s5n:()=>tn,s7T:()=>d,sBg:()=>tj,sMZ:()=>rV,sMs:()=>ey,saW:()=>r1,sdp:()=>re,sn$:()=>e2,tIY:()=>tp,tWm:()=>Z,u3q:()=>tV,u6n:()=>tc,uXs:()=>ti,vE:()=>t6,vgO:()=>er,vhY:()=>tU,vsj:()=>k,vtM:()=>tD,w2r:()=>tS,wZi:()=>ec,wj_:()=>$,wtK:()=>m,x8f:()=>t8,yFE:()=>rI,yU5:()=>rD,y_L:()=>rx,yf7:()=>eU,yrH:()=>tq,zkh:()=>td,zz3:()=>rc});var i=n(772841),a=n(394255);let o=new Set;function s(){return[...o]}function l(e,r,n){let s={_name:e,_argKeys:r,_hash:n,_data:null,_args:null};o.add(s);let l=null;return Object.assign(r=>({view:s,args:r,name:e,[i.rP]:void 0}),{...s,Query:(...e)=>(l||(l=(0,a.gc)(s)),l(...e)),_name:e})}let c=l("AccessibleFoldersV2",["orgId"],"9719a8277c1b644ee253ab1ecfdc1de3b59094dab93402f1e08675d9834b5b32"),d=l("AccountTypeRequestByIdView",["requestId"],"cfa31b2bc934478d7226768aa457a741fed4e351a10b9aad01c517b047cebb9c"),u=l("ActiveFileUsersForFileView",["fileKey"],"5f1d95341891783b9628176ec323d3e47e0cecc92f5f55840722cecc727b5af6"),m=l("AddWorkspacePinnedFileView",["fileKey"],"badaf3cd2d7bc519072667a686205c8b3e2113265581c53c751978591ac7dd62"),p=l("AdminRequestDashOrgInfo",["orgId"],"0b16a79a16b35fdba1364c79fbd65ffd81580fffa4568c0201527e75d085cae6"),h=l("AdminRequestDashboardRowIds",["filterParams","planId","planType"],"e4f080e4aa304f67d3b1e68ed9f31a5d6bef3fc6c199bda2f2b1eda0a3be5424"),_=l("AdminRequestDashboardView",["filterParams","firstPageSize","planId","planType","sortOrder"],"a0072bfd258043860fa50f0d62ce34dbf8e3f79b20836cf9faf315e8f407a895"),g=l("AllowlistPluginsSectionView",["orgId"],"80441ad85857fedcebee9dcf2e5f8c6a8c38a6819352b7e9e9c16b42b04dabf1"),f=l("AppliedColorPaletteForFile",["fileKey"],"d7bb73a2b34fc6a8b262a0d3c6a14139aabe2f321f2198e9a8f64aaad1aaa3c3"),E=l("ApprovedLibrariesForOrgView",["orgId"],"86c216fb79dcfc9f41ec49ce29444c1c9cb39655e009cb588a8c68afba43aadb"),y=l("ApprovedLibrariesForOrgViewV2",["orgId"],"7a8eef2acda75d33309cfbfa9731228c4a9ea8dcd4a7eb4ea1f7309554ccd945"),b=l("ApprovedLibrariesForWorkspaceView",["workspaceId"],"fc76c577928b56705ad939877c7a6ac45121c2acc0180f16dc524454666ef2f2"),v=l("ApprovedLibrariesView",["workspaceId"],"c01ef8751391811d63ed49aab8a70c66a78532de852d58c820986536abecdb7c"),I=l("AutoRunPluginsView",["targetOrgId","targetUserId"],"fc89e7af16595f8972a32021ef9af977866c3f9518243670e308d9c9959a4114"),T=l("BillingTrialForResource",["resourceId","resourceType"],"eae7e0970266b809811d071443b722e7cd0bcea765f60ea9ac150d6c8983076a"),S=l("BlockingPrototypeData",["fileKey"],"38621d62e96faab0a1a844202aafcefd0798d38ff3bb76d1bc5ff12758922c2e"),w=l("BlockingUserState",[],"f156dee134b054963ffc5c9cb4b70eecc8779fbb2f3248d04dbae4c7a95ae28e"),A=l("BranchOpenMergeRequest",["branchFileKey"],"f8edbf534eda2e25b28944111acba2c4a4389bdabbe3317aad41c398fada7496"),C=l("BranchingPermissionsView",["fileKey"],"f4d7b48feda889632b6e2ab254b1d303afad2a41845bbccadc469a8294f9d7a9"),N=l("BranchingSourceViewSidebarView",["branchKey"],"c6837fd457ded8e18d4fed01c544515fb9601a452eaf8e189e0ee941961b9ac8"),L=l("CanCreateTeamView",["orgId"],"624d2078031fa6e8eedaba0d89f2f014c16a4fbc07fa5fa0410d8f6bf32b3dce"),O=l("CanGoToSourceAsset",["sourceFileKey"],"efd568b2f04ef549c7cc011801d442744741b49bd3ae2b9e9677079b907aef98"),R=l("ChurnFrictionPersonalizedModalView",["teamId"],"93f3a0916c256090428e71e69914e905858fff026f9d829047ac5c664826db9c"),P=l("CommunityHubLikeForProfile",["hubFileId","pluginId","profileId"],"0b2c5247975aa8bfb0f1b20240405ca5c36298ce51f868b46e4272567df5ba7c"),D=l("CommunityHubLikeForProfileFromResourceId",["profileId","resourceId"],"748e4041b2bb2e8ca623b94ff363617e2cdc9bf7ab64c77d58a89e6a74b21110"),k=l("CommunityLibraryComponentsAndStateGroups",["hubFileId"],"1025de35293602d9b5bc0d52f100c0cf619041354375810f9f421c1bd44b0e8b"),M=l("CommunityLibraryData",["hubFileId"],"da5373f9e2f4f4a46df6c93c35118c5a3880126d0ffcb526fede02f1156d0274"),F=l("CommunityLibraryModalAssetsData",["hubFileId"],"a67cc12d7a5409feb23c54d6050703a3414addc45fa5bba39f87d584ee5f5669"),x=l("CommunityLibraryModules",["hubFileId"],"2b82591429c7b065964339a15ca7657771761258816a4fe73de1e3e959e149a4"),U=l("CommunityLibraryStyleData",["hubFileId"],"5bae87f1b7658183946477d2d400ad6eefda9bf9933412630577b7347464ffde"),B=l("CommunityLibraryVariableCollectionDataWithVariables",["hubFileId"],"980680b3d4fe4284e9e62dafda4a105609aa17eaade134c91b1410d1e273d5c1"),V=l("CommunityPayment",["monetizedResourceMetadataId"],"0fc7e090505e4843be46ef517e18e051b23d36baebf2d6a9f90897b1e630fbcb"),G=l("CommunityPaymentsForRealtimeShim",[],"a02491b1f62c14f6c9e08fa74bf1fc03a9c2aae2a73cfca70b93dfa841d38bc4"),H=l("ComponentAttribution",["key"],"ed1272a51b3a21d2a7c8e394378c34db65cc9d6929f9174c9f9740b218de4b06"),K=l("ComponentUpdatesForFile",["fileKey"],"26cf6cd3d70f25a3ba2cc1a26bb467ed0b24149bc97413b24632182f45d4c89e"),W=l("ComponentUpdatesForProject",["projectId"],"ad6048d97476b4e902b5924e45d11d3821a3121e5a7985df40ed9444d8aa445f"),$=l("ComponentUpdatesForTeam",["teamId"],"ccf996ae9069369a35254356af7bf2e3cc91b77930fbede5552cc0aa9fa7db39"),Y=l("ConfiguredUpgradeRequestModalView",["orgId","permission"],"ea3dcbd91ea890663c32046eba68800684041788311cbfda90d9132bf5fd5b42"),z=l("CurrentUserAssignedWorkspaceView",["orgId"],"728344fed7184255d8ebdfc4a58a2d0cb7c8f2e5e6a6ba163c3c6314bde44891"),j=l("CurrentWorkspaceView",["fileKey"],"589c3ff318dbc3df113a07bfb1d9d06a345a74406a351c87e1cde50d32a073d0"),q=l("DeleteWorkspacePinnedFileView",["pinnedFileId"],"400c688509ba6b5ce2cbe75bdd4f838b35f7c0b2b1219f347c559dd5b0439fdc"),Z=l("DestinationProjectsForTeam",["teamId"],"ea9f02e79eb81f5e6b7afa75932e59879fdd1e73b6597349ebafa95e8debb9e3"),X=l("DevModeActivity",["fileKey","nodeId"],"dbda44daa61bcff2c66b8956f51a3f2840847d268d0ef0b1020033db82bf68a6"),J=l("DevModeOptIn",["orgId"],"61d5df4716cb044bf5ff0c875b69f90e807db6d988bf8202e1cdc9d9113a19bb"),Q=l("DevModeOptInInfo",["orgId"],"af5cb7df243be81ed41ae4ef78269a2b8e0ec4c7abf1522f56b6fa7db1c25791"),ee=l("DeviceTryFileView",["fileKey"],"57262db6a4c99d03c727ef6e8a734ac28b5bc6fb68fcf7f7134381d122629cdc"),et=l("EditButtonView",["fileKey","orgId"],"90127e61e449869ced30ec951990d7922bf558c599d60e58c4f0553ab4b3d6d0"),er=l("EditWorkspacePinnedFileView",["pinnedFileId"],"0572ae466de9a1a6959d057ee67ae54c83468f0cb1f5cee5f4e44c474b038afe"),en=l("EduGracePeriodsForUser",["updatedAtTimestamp"],"e3ca89452e79c6af703cb3cac17d31d0f9ed3b4518a8c495f1e47ea0ca4ce9d7"),ei=l("EduOffboardingData",[],"0158a27ab01fe1c83646bf0b7a2e6fdd43d68a852172299c3bf040300d2bca41"),ea=l("FavoritesByResourceId",["orgId","resourceId","resourceType","teamId"],"aa3e6368d181cc22bf9804f687ed0aa7160e94b401a8bf354cff60d1b1dc7cdd"),eo=l("FeedPostWithDetails",["publicUuid"],"a3fef5ec20b23ae2042dd159610d48be92741843e2bdc6cb12018152d00d16fb"),es=l("FeedPostsByFileKey",["fileKey"],"bc5f7ce9b6b8037a77563f57e0ac3110cfebf1e4cef5c8c119b739361a47f794"),el=l("FileAccountTypeRequest",["key"],"793dbbdda27e844e4ba0d1ba1e96e9cca78359ff5ae35fe241cabd7321650357"),ec=l("FileBrowserRecentFilesView",[],"21fffc592ca81b13a08d98f26918f26032097e82ef1a5abdb636796356028ed1"),ed=l("FileBrowserRecentFilesViewTmp",[],"b4146080cb5272cd05b817493f2679f0a2b83e97de9f90929be0359c4cf5a68e"),eu=l("FileBrowserSearchBarData",["currentOrgId"],"38ed175c128f4f8f5bf24a9edee93e58cd7403b18b3def89b85d87194ab2a6f0"),em=l("FileBrowserSidebarData",["currentOrgId","currentTeamId"],"6886eb8ea4acfd7259b88cdc6db3391532de2feda619d4e3df94ed3ff224da85"),ep=l("FileBrowserSuggestedFilesView",[],"cca4f19fdabddedde0979013229d6e01544d0dffe935166bba36b6adf1bf0a2f"),eh=l("FileByKey",["fileKey"],"dc9f5c16fe652e3a08f7604ff7aca00782b52dca815f23099857f457656b47ac"),e_=l("FileByKeyForRealtimeShim",["fileKey"],"96682bad4a9d67e23784a0785860156f3466d0d8196235a7f14ebc7d4bd8c274"),eg=l("FileCanEdit",["key"],"94cee8957063f301090ae45312a44a680028710d425c00134f19942e8ce38132"),ef=l("FileCanManage",["key"],"246283961e7960c7be7bd6b654da8751e5b6ddd3c2162ec7ebe71e76dd5ca8f0"),eE=l("FileCanUseFigmaAi",["key"],"ea57dc893d02b5bfce6bba6572e5e8e68d19cfdad24d85302ae908d735cb7f2d"),ey=l("FileCanView",["key"],"914a954cda6128d4674d9717321742ee20290965e07c1887735178445097b0c9"),eb=l("FileCanvasMentionsByFileKey",["fileKey"],"08dde0f2074d269d13bef69135cfe0c6b7411282250ef00632a71679e548ead9"),ev=l("FileContext",["fileKey"],"8cc187b44b38fec43bdb46aa20835e670a620079611851c36642b9410213edc5"),eI=l("FileDevModeTrialRequestPending",["key"],"a5c61b0921141adc71048c1cda3bfa5a4eac655f267c39ba90883c66c3a71be0"),eT=l("FileEditRequestExistence",["fileKey"],"55b97a4e6d343306b9e53426dd411854cb998677ff56f3733553024d41bc28cd"),eS=l("FileExpirationView",["figFileKey"],"63f1f8b76ce0bf7092a474a9eb29db91e07f6414d0307424f2134a55e9b5767a"),ew=l("FileFeaturesEnabled",["fileKey"],"3e849cdd44aa88387c5f239dff61de34b50b1a524cbfd9b4c80ab5cd6dfb95fe"),eA=l("FileImport",["projectId"],"f6c6af4d4a7fb13f3b1842bcc703369552d5ddaec4fc7d572fd2b61a2bc67189"),eC=l("FileIsEligibleForDevModeTrial",["key"],"e287b51d6c2ad609915b2a150ae66ae8683f74674ed4578eaa159e6f578295c5"),eN=l("FileIsInDevModeTrial",["key"],"9c47d409f80c094280e94dd6ad27a4042b055e81b8ab9dec1e61f5f0fcce4a29"),eL=l("FileLastPublishedAt",["fileKey"],"9782734a5bbde893436055cfe9023d3fbcf2b011bd220dcce88e8439724dae61"),eO=l("FileManagePermission",["fileKey"],"267d6ad8ec4d4394aa92f0d7013ca42d5a2f85e33a907eba56356b5bc7c615af"),eR=l("FileNameViewDropdown",["branchFileKey"],"7fab62a7b61e27abc1bb8d1639d2525320ac7fad8af15d620747bbffc7d5fc13"),eP=l("FileNameViewRepoFiles",["repoId"],"b7027e0a80b4b9349ad978ce7eae759ebe7d490a55595dbf2aeefba2f179ad81"),eD=l("FileOperationsView",["fileKey"],"1804b2cde41f2c769e960f2bf7b9ff908ad05dfd6c9d28c90e4181fd2523064c"),ek=l("FileOrgExtensionSettingsView",["fileKey"],"8f268a3c9b6d35cca60e3275a2585672dabfccb3f7e1e09b3e0503a40a0f4ea2"),eM=l("FilePermissionsV2",["currentOrgId","fileKey","projectId","repoId","teamId"],"f210d533a16ac59e72a0b5211285a35b53ea7469bf66c6c60e2fb6d63a3365cb"),eF=l("FilePresenterData",["fileKey"],"0508e03c1064490b32dd1ef8d46d6c4fb0666684e8ede6c521a9b93e105b789a"),ex=l("FileRecentViewers",["fileKey"],"beffbee5cb41f1af7a6a6675342c7d0a186d674302f4361eee60cadf19936f7f"),eU=l("FileSearchResult",["projectId"],"7aec367ec7d989f848385aa24d88615661b904010261788704b616a78ebad9d6"),eB=l("FileShareModalCurrentUserPermissions",["fileKey"],"2b7c499ad38668ef23e6a577e92e5620a7ab57dd97db9a0e2d970aa2778b5cc5"),eV=l("FileShareModalPermissionsV3",["currentOrgId","fileKey","projectId","repoId","teamId"],"b6ec9f6bcc284e3daffb40e86db30329a33e618b22fe3f8943b5624f3bc43399"),eG=l("FileTemplateView",["fileKey"],"07af256a60fd0adcd20542e38051ae1f3f25a2182e1aef4328379f740dda7af7"),eH=l("FileTilePermissions",["fileKey"],"16e1042c05b100724a4456f1b6605a322bbfbc62b9bb2b24f083174a0e742104"),eK=l("FileVersions",["fileKey"],"aacbe606bf273c220e724b1ce7ec3fd780bb54542e8145d53ca721272f8e4465"),eW=l("FileWithCommentsAndReactions",["fileKey"],"320b98f9f7600fd901be2b9f44216c16660a2dbb22095278f44399f934e7cd5b"),e$=l("FileWithRoleRequests",["fileKey"],"90cffea1776cfa15881b4478aa311df28f8cf5692108cff7e7ebfe86b609445d"),eY=l("FileWorkshopMode",["fileKey"],"8e1a7b5f2c1eee980cebed68b2d38c1bf666c1f4185a414780d92a7d2a8deb50"),ez=l("FileWorkspacePinActionsView",["fileKey","orgId"],"ff1ee6ad5ffa76cdf66fdcf6239d4c3ece0c30e17159a2a939cd3529d1c58e55"),ej=l("FilesForProject",["projectId","updatedAtTimestamp"],"f73b349d1d5a7b04dc697bd894c11aaacf5c31bf48c08dbaa537e4ce4f8681f1"),eq=l("FilesForRepo",["repoId"],"a0d73a52ef398d7392a528f3bf8d6ef819b117c435fcb26b18fd1395cd6ba1b2"),eZ=l("FilesForTeam",["teamId","updatedAtTimestamp"],"da9a9ae890c72ce524994c0377ffe4e663f93463472c6d2aae6d776b41ddc7c6"),eX=l("FolderCanCreateDesignFile",["id"],"e8f7503f972e1a56b3c8b525e17dae850c4c4bb85ef8d41526b7d04c1b690bb8"),eJ=l("FolderCanCreateFigjamFile",["id"],"2b2414f681528cb92ec6370a5837d6fb3f9135acef044da93fcbf89cf8b690f0"),eQ=l("FolderCreation",["teamId"],"cdae9f5ee3529d3a9af4dc89c36508707fbb8d82de41beff1c239c595da4c697"),e0=l("FolderMoveModalView",["currentOrgId","currentTeamId"],"77d5d59f25c4f134083f70601aff085fc0b4dc73d21e7f9bc1ef07b6af27e2c8"),e1=l("FolderPermissions",["currentOrgId","projectId"],"e21f3715ed355491f775052622b2cd1457f8fd849adba23a4701c7547f5243a5"),e2=l("FolderSearchResult",["teamId"],"1c275c6f099475f4d0b36826c52c718fe51bd3d6c4f0744d4e03ed5c2cd6d9ce"),e5=l("FolderUntrashedFilesAndSitesView",["projectId"],"69584ffb5c6ec00d4f3dbc158cd142dea5a01db6be763085a0f83e0d2bf5f4ba"),e3=l("FontFileForOrgView",["orgId","updatedAtTimestamp"],"96df795c6f2b5c24fd35fdf938cbffaa6daa15858c8e08e1de28d99f0293787e"),e6=l("FontFileForTeamView",["teamId","updatedAtTimestamp"],"f45907b6cab5229de747fa0f0e33269c6eafa7af8c97988d977b20b72e1ff19b"),e8=l("FrecencyHistoryView",[],"e3324951a552925847fc51cdaab9bd476cd70549ae51403db8e38fb0c2dc2813"),e4=l("GraftingUpdateSloData",["id"],"698b0cf18e595e9d0c995d7e1648e5b69ae5ba1359aea138475c06738998829c"),e9=l("InstalledPlugins",["orgId"],"9b50f9e18626564c831404d24d65a3671e9b05c2a1b392bd73deaf2a55b0d96a"),e7=l("LibrariesViewFilterStatesView",["orgId"],"ffd0230e3004653afc81053bf43a98054b88ef978ab6d7121a1a5a52648c2ade"),te=l("LibraryAssetData",["libraryKey"],"23d67f3c07189beab6255ab87830a45bec04a75147c8a8737ef060300c99d93a"),tt=l("LibraryAssetDataOfType",["assetType","libraryKey"],"d7ecb99389a942929e8f9b9171c45c15d16b1b0ed4a74e60b39c0bdb1f7289bc"),tr=l("LibraryComponentDataByLibraryKey",["libraryKey"],"cb950b657c2498dcce1b27b3959222e1e6648df960170fc8452abe05994782db"),tn=l("LibraryData",["fileKey"],"5d782f81bacbc39479a02e41e929cb453465bc98dd47068d24d649f021758f84"),ti=l("LibraryFileSelect",["projectId"],"2efc1533087a59d375256eb54a80d19b4810c3c1e690bd43de7eb1a50885344e"),ta=l("LibraryKeyToFileLink",["libraryKey"],"f019896bcb374f7c9ec24d91a60c1458f239612d747a12048e598f8eef380509"),to=l("LibraryMetadataByLibraryKey",["libraryKey"],"22609fe82b8fdaf0a58d09eedf253c25332a5e2565f3d02f9be1e8abdf486cc8"),ts=l("LibraryModalAssetsData",["fileKey"],"83334c18f43f15d9060dfc0f19111fa474c2537f1745168a3b7bfe5fbf9a4032"),tl=l("LibraryModalVariablesData",["fileKey"],"2cc6bd48c20cb3a6b77c129fc99843877001877e27fb7937a2cae8cfd339b3d9"),tc=l("LibraryModuleData",["fileKey"],"1ff19bbb55657f0badbd04812be99149b34f7bac8200b422526703ac0af47eec"),td=l("LibraryModuleDataByLibraryKey",["libraryKey"],"b4a06ae788652824e9e96c6fe9fa730603169b8ab32b8b3448c81217c6218d3f"),tu=l("LibraryOrgSubscriptions",["orgId"],"fc756228f3eedfb155c0727a4482e35033e06035b31f5ad34bcc4b973b4e994c"),tm=l("LibraryPresetSubscriptionsV2",["group"],"f20f6eab48db105cffdd57c5d7093c23d0df93d047bd37c238dbb2a7bc30a44e"),tp=l("LibraryStyleData",["fileKey"],"d584c67731d73bb29706e1125e08b042519107a56b8918af2e54f7fc0d2f8f68"),th=l("LibraryTeamSubscriptions",[],"8c71cd9b1698bd408c22e50a34e06898161ee7e8767a5ea2c0c43bf9e4b41c75"),t_=l("LibraryUserSubscriptions",[],"0b763c1a28a17a498c836161815bc63425a01a24156ede34a3e10ff566cef857"),tg=l("LibraryVariableCollectionData",["fileKey"],"2e37eca2190d61e3cebbf599aa7a2ce92812394b5583915753c740965db2af78"),tf=l("LibraryVariableCollectionDataByLibraryKey",["libraryKey"],"a86878552241f799b448ff3374bbab645cf80bef997dc3ed09dae4a775d0eb9d"),tE=l("LibraryVariableCollectionDataByLibraryKeyWithVariables",["libraryKey"],"df7cabf302409b860cb65072190d5bfd75978c88cc4a66f81c66591a2e1bbaa0"),ty=l("LibraryVariableCollectionDataWithVariables",["fileKey"],"ec5e283ef090bbe1521b37f2fde6921019dfa0c807f68b9dc801cea07cb96f7d"),tb=l("MergeStatusRepoFiles",["repoId"],"ba665e0010cb72c441175650656e9dfd4530a6e8e23e66362bf5de93976adc6c"),tv=l("MoveFileCurrentProject",["projectId"],"119018c5f6064fb75365bbb32f9a97357ac2c1705f07c731c1a1ae93f8c2a773"),tI=l("MoveFileDestination",["projectId"],"49be001c53cdd25baabd9177941d7eaab679840b54c596ca48aac4c894907e8d"),tT=l("OpenEditorFileData",["fileKey"],"8ff5f7cc4beda58ff204df802f3df6b1294619b5320fee8eca0196819bd738fe"),tS=l("OrgAdminUserView",["firstPageSize","orgId","queryParams","refetchToken"],"58cbcd33826ae465a87c52af827dc8a99bb517fe9f7713f2ac42ee27e0082833"),tw=l("OrgByIdForPlanUserView",["orgId"],"3f237e700bec8d5e020f77331b74555ec3df334e91e837c231037c338363d2c3"),tA=l("OrgByIdForPlanView",["orgId"],"22debcfb0d026d70fa955eff4ac13ca52093dbdce529a5083798a37db6c854b9"),tC=l("OrgByIdForRealtimeShim",["orgId"],"45b44af1d000c72e420faa1f55de3950ea8ccd099c4d0aa3657e53aa60dc3a3a"),tN=l("OrgHasWorkspacesView",["orgId"],"04a21fd542b7ee3ef85f0a3c726075db2de4b464fb727c10032948d303c867d7"),tL=l("OrgJoinRequestExistence",["orgId"],"b5a651cbe35528ced6f03c9517a92b337f71e1d197f43441754b582162cf41c9"),tO=l("OrgProductTermsEligibleInfo",["orgId"],"189dc2dda2f2cd99e09e79b529884fc1098d5482ef26eeb4116d040ddfcc70dc"),tR=l("OrgTeamView",["extraTeamIds","firstPageSize","orgId","queryParams"],"e791ae6ef16e9aca5cb7ebb85cbb09e71cd97d4f9fde5dc046789247c5563f39"),tP=l("OrgUpgradeRequestView",["orgId"],"c150d9228e809b0fd949c7e748e944cb2ee56cc6ccf1e3cfb014b637afed9aee"),tD=l("OrgUserDraftFolder",["orgId"],"c3abaf4a916fc700e5019ce8f048e4bb26b0d816ae3edfac7d8e501c34557823"),tk=l("OrgUserIsMfaRestrictedView",["orgId"],"62148fbd76d84f31f79df24bee08b60eb7439f20a71c6f8e438d4525caccdd9f"),tM=l("OrgUsersByIdView",["orgId","orgUserIds"],"0310db6d7e193251cdd18792466e433c740fc895fd3ceb870587482f863e057a"),tF=l("OrgUsersForRealtimeShim",[],"94ff2f2c624d8a54178c2bc0fad30e818a6ceea62866999c7ee230e8e26634da"),tU=l("PendingAssetTransferRequestByResource",["folderId"],"cbf88519e7dfa823ab57fffc4b998ec635dc6e8f86cf86f053677043a34b67f3"),tB=l("PendingConfirmedRenewalSeatCountsView",["billingInterval","planParentId","planParentType"],"2101a66034fda586276d17524b9347ef73fc647e093a1c0ea8f1997054b1733e"),tV=l("PendingUserMentionByCommentView",["fileCommentId"],"98448f91af1f453b5b6734a0b5e8618acc07797291f479b99596c129d9a6edb9"),tG=l("PersistentUserNotificationBellData",[],"cd2c7714ef7cf543b28cb30b1774addabb15fdb8a6a1fc8fc864dd8f652ec67a"),tH=l("Plugin",["orgId","pluginId"],"e44a7d99e88ba0db4dabb24a2e274ddf81c49685b0924f4c714972d0a3432d00"),tK=l("PluginPreferencesView",["targetOrgId","targetUserId"],"33215b7caec97ed8df56998e236ebcc69f3d74e6117ee1c506775ec26de4ba78"),tW=l("PluginRequests",["orgId"],"454d04a089fae11ffe0a34d1912f610c3e449689c4c5479b4bbb0f34a75926d9"),t$=l("PluginSecurityFormResponse",["pluginId"],"ed6f9188040a98a2c1f2bf4010ff7559a4d6e6e0aec6449fd736e89f5256b763"),tY=l("PluginUpdatesForOrg",["orgId","updatedAtTimestamp"],"97f51ca7f7de806b407bc5e59cde7b601858fc18c8e3f11ff0e789d8db0cb5a8"),tz=l("PresetsDisabledView",["orgId","teamId"],"a09600f75f3368aec7e4d72abeac29662d75ca5211ca553f2bf747572cae228d"),tj=l("ProRequestUpgradeModalData",["teamId"],"b6a8627f9388310c34ee1d9bd1ac0ed3ff889f27657ce45f6b3d5dd22f7858e9"),tq=l("ProTeamPaidStatusUserData",[],"85434a3b95848ce05e1009a22b6b7782d345224e45a04304bab3bbb94159d362"),tZ=l("ProjectByIdForFolderSettings",["projectId"],"44a1349cb4dcb6eee9b1d312ebd08fb6e247b2c017260fc502398ff6075b59c8"),tX=l("ProjectByIdForRealtimeShim",["projectId"],"f944680b6c28e7b0da4d55dd3f5caf76e9646fd47fc9e456958465c115b79ef5"),tJ=l("ProjectCanCreateFile",["id"],"48cd9a0f3cae70b4519dfee12e3c4e6373f7d49c326691784d9f0307a5c99a0b"),tQ=l("ProjectFileCount",["projectId"],"732fc307d17f77dcfae14da31f010ca424e0b00693ed9ceeaea49c58737e79f9"),t0=l("ProjectNameById",["projectId"],"ee3151bba9ee23d85613bced28494720eab6754082b94067c5ed62a666aa466d"),t1=l("ProjectNameForFile",["fileKey"],"57e4beaa1055ad81abd1721b24069467dc8cf818c6f7c2da569f151a64e7911a"),t2=l("ProjectTilePermissions",["projectId"],"98d11cbce5465239f87c8891d3f608c3c2e9c24dcf32250209ab67513c426f58"),t5=l("ProjectsForTeam",["teamId"],"ddc9b538655da5dc9d57011ccd82fa559ababe99fb1b38fd4e8ab30c6093d247"),t3=l("PrototypeCanView",["prototypeId"],"020a4c68229e4d6434ea0875f966c6516845141d7edd61c5599279491e62ab80"),t6=l("PrototypeTilePermissions",["prototypeId"],"977169b7f1e74b6a39209b07d77356440fe1425c9f181465b6b94ab06d8cd6f3"),t8=l("PublishUpsellTeamRoles",[],"61829dfc33b233a837b54c3461244f810dd29c97777d2c97e7b0635e0c793225"),t4=l("PublishedHubFileForFile",["fileKey"],"f9f10ce599aba8aaacc0cce749b581ca37973d3564a97a2bde57c1d5880897ea"),t9=l("PublishingModalView",["fileKey"],"26af199a77b18e0b7cce081d274a5cb0a7c39eabbc2b9a95ada762824b088840"),t7=l("RepoByIdForRealtimeShim",["repoId"],"15d9984a198b456e92e383624bd7006828b69980be255c539a4842104b5dd221"),re=l("RepoCanMove",["id"],"93235f9bcf370a5cda86e6eb7cf3385b6c44639277789817045cbeff655a4c29"),rt=l("RepoCanView",["repoId"],"6c27c5d96e6e8e69a9a89db3e1afbf542685b6089c0aeceb04b258b7013f06f4"),rr=l("RepoFiles",["repoId"],"d9d84f09afe2dc952e07fdc661469d6cdf0cecca0d1caa6abeba5009bea5d3e3"),rn=l("RepoReviewerSuggestions",["repoId"],"94185a7fa65e3202424dc7fae7baa0a30927a7e2bae962b3821466ec9b597443"),ri=l("RepoTilePermissions",["repoId"],"089ccd9328d010393a08c592c836606d3202b848274ad2cf67b58e44d037c33b"),ra=l("ReposForFile",["fileKey"],"cd5aaa0045ebbb83512090df5cdc1797efcc0da19648e16a95e550cbdce95e7d"),ro=l("ReposForProject",["folderId","updatedAtTimestamp"],"8633cc9357adf7d07c900c8ec5b781985460d010c9bb626be838c52e6ad1818e"),rs=l("ReposForTeam",["teamId","updatedAtTimestamp"],"f203f31bfc1a8cc456dcf68faf64e47ec3ac388ff7188b861e23d4d71e42d0e6"),rl=l("ResolvedComments",["fileKey"],"7b5ece4b590e0ceeb80a1dcd7a7bba3427da3ab5e5c56e469d8d213acd73ccab"),rc=l("RoleUpdatesForTeam",["teamId","updatedAtTimestamp"],"d0f401cc590b30c148f84c8df7c07a19dd9184547c4b47e750917a424122fca4"),rd=l("RoleUpdatesForUser",["updatedAtTimestamp"],"a73dbbc5ea1dbd06f7a583a31f6e897e79e1dd72d398530c30d2ad0bc97614dd"),ru=l("SearchFilterWorkspaceView",["orgId"],"130ec2bbc72113b8e1233d4a0abd1896574662972483dee3600bdf6a98524b62"),rm=l("SeatCountDataForPlan",["planParentId","planType"],"e6c684dad9640caf8602c4648378cde9c7f61169a6cc99eae9474aa95b171533"),rp=l("SharedFontsModalOrgPermissions",["orgId"],"da9e724b9db2afa222dd079726861da793b44b08a5801fd1d7a780953a67447b"),rh=l("SharedFontsModalTeamPermissions",["teamId"],"4c09f410789665bd8657582291dadb309a0a3504d1090c3e117ab159c4683b7e"),r_=l("SiteMount",["fileKey"],"0185bb17c8a851bbc936f6fec8b1064e09ef1eb890ccccdaa77146fcb9276539"),rg=l("StateGroupAttribution",["key"],"27b016f8c329237c21ecda9585d660462fcc25fe6cf48287100dd6e5ee80761c"),rf=l("StateGroupUpdatesForFile",["fileKey"],"ea1cd6648035fd1c3dcda7977265de9bc60c9a66f604e3f4c6b2fd83cfecf1c6"),rE=l("StateGroupUpdatesForProject",["projectId"],"67cfbe70d74904ab3de5ff7e95a8ef2b4ef152dcadeedd6104456c46a26161f0"),ry=l("StateGroupUpdatesForTeam",["teamId"],"53397a869d1db6eb3156a125aeaa8baa312dc5bdd5aa5a070b70935de3d7f037"),rb=l("StatsigTeamsOrderView",["currentOrgId"],"75513768b3c4f5dd170727d4cb2c746a34fccc6cbcf648c0cb937c740905618b"),rv=l("StyleAttribution",["key"],"da54a71323b1cd8e0d95c0c38ee76d928d5c44ff6a4c27632a3fd776ed6cdc84"),rI=l("StyleByKey",["key","openFileKey"],"9fca28d73be9c6104a34aaefa126ced59feeb78c72bcb596a109dcb8fb7a54ec"),rT=l("SubscribedLibrariesForFile",["fileKey","group","orgId","teamId","workspaceId"],"84e630b7f11f6299c056c9927a1192f294c4a049652ef18e410dad34c53754c9"),rS=l("SubscriptionUpdateSloData",["id"],"3d59a15f7c562ff126324320acb8a9a3a92f095da722317665fae29b58954011"),rw=l("TeamByIdForPlanUserView",["teamId"],"f39b43bea9a753c06167d221b76b8810f53aeb1b63eb489445fe98a6c440a5eb"),rA=l("TeamByIdForPlanView",["teamId"],"b115602dd364c5a287556e6dbaa78d36e806f799a3507a2f7023507e4c0511c8"),rC=l("TeamByIdForRealtimeShim",["teamId"],"d2957a96a4dd6ce1077c1120cbf5bc5c624b68b9396a8ecb97db37baa0b154d9"),rN=l("TeamCanAdmin",["id"],"3e3501a7890c3d45c1d389d7facabebd9097ecb4ebedd019234797b5830ec048"),rL=l("TeamCanEdit",["id"],"647fb718fd02308dc586e1890f72734bf8943c769c83c39c1a0580282141d643"),rO=l("TeamCreationWorkspaceView",["orgId"],"4b495734c8ea0051ea5f3be97a956bbbea6619fc09a3409daffd50fa9c0d7023"),rR=l("TeamFileCountsByTeamId",["teamId"],"057bf801d17aa54f27a4c03ef1bcf79081fc24a12011e3a389ee2dd771846808"),rP=l("TeamFileLimitsInfo",["teamId"],"f845019ad5801fc7c1615e90af00eca250ab4833d41353c27c0083037f80d8b3"),rD=l("TeamFileLimitsInfoByProject",["projectId"],"0576e28b1614ed2868b1fe15dc584bfdad6ceac10bcdfd8dd2dd01a28b055f88"),rk=l("TeamOrphanedStatus",["teamId"],"c00352425f1fa323b0123bce3a7bd32c3fd1b4570013079c6a9b71a9f666f3ca"),rM=l("TeamPermissions",["teamId"],"5e2d5afe94e30fe1d14d76607831c5d84fa2cdfd09c3252f3fbcfdfe90143ffe"),rF=l("TeamRoles",["teamId"],"9819fcc572ef708f6253a07f96e440fe5a186b71766f2524192c51720aad06d7"),rx=l("TeamTilePermissions",["teamId"],"c722850f6e18857a80a2aa359f468725d35d86c9a376cc4a86e5545c62d89f0f"),rU=l("UpgradeEligibilityView",["fileKey","projectId"],"5f8e4fa8a805e94061c1eac9d3d04978e562460b3e0446b603cf16e608c34677"),rB=l("UserColorProfilePreferenceView",[],"216d0bed6c38dd4b9d6b5287c2398707f4b0513ada63f2fb0e62d6dc7d7c31a4"),rV=l("UserFlagByName",["name"],"cd42816fa66bc64de2dd9d1061495a885f71420bf68f6d0ade675cb082524f9d"),rG=l("UserForRcs",[],"ff9d6426f634aaad009c5aa67f5244bb05df6a1ac0efc21ed891c1303ae2d270"),rH=l("UserForRealtimeShim",[],"b1647159352134efef89e62372d3121349ec88dfad18563638157512f25d7034"),rK=l("UserPreferences",[],"4311d14222ff5a5342d3f531970281a90be090b7377c82826faa3dfa19bb8cee"),rW=l("UserTeamRoleRequestView",["updatedAtTimestamp"],"df21a854e805d7cbdb51e72eeefacfc6f7de0620e3f26242a5ede5e9aac8e750"),r$=l("VariableByKey",["key"],"5d779d98fcaece2af72cd5b8978adc4c512ebb13fb6078588c6bddcb37391f33"),rY=l("VariableCollectionAttribution",["key"],"5d401ee0e4d543c4ba8f4d9a0ec146a71f37b81887aa5282a93f88062466e2a8"),rz=l("VariableCollectionByKey",["key"],"6ba842fcc5d08769dea5f86ba00beacdc8cb2f3ebe759e1f288f67478e5df696"),rj=l("VariablesByVariableCollectionKey",["variableCollectionKey"],"baeaa6b48e5aa069c1fc8c752531102f7f21dee8a1800ca8fbf320a40f49b990"),rq=l("ViewerRestrictedDraftAccessLog",["fileKey","orgId","teamId"],"2edc48e717c6a97a0d412304f1e6fd64d8c76d3d426315ca05fe061789295636"),rZ=l("WalkthroughMediaByFileKey",["fileKey"],"b0ff9031e4e5c2f7b005a99136a4083cd162342034f0be9b43da592a0fcd334f"),rX=l("WhitelistedPluginsForOrg",["orgId"],"8b12c1fda1b3d9919eddd625f78dd71b6e535c117bc48a086fcec9d089c4d4e4"),rJ=l("WidgetUpdatesForOrg",["orgId","updatedAtTimestamp"],"526fd868484123016456ee7d0d494085f06676d26db4d6dbe2e94584f3a074e2"),rQ=l("WorkspaceModalPluginRequests",["orgId"],"58f1c2b1c207cc030538bd134a593b0dd005064421d73d4b233e4ca6b39fe66e"),r0=l("WorkspacePageView",["orgId","workspaceId"],"41579a96ec0094f2bfe823b3b19995d5d0982d6d6a3df263c4b8388e3a5b6c37"),r1=l("WorkspaceSelectorView",["orgId"],"319a12402ff14f049daaafe978f74ac04d5bfe465f6edd86807d88db4c337d0e"),r2=l("WorkspaceSubscribedLibrariesForTeam",["teamId"],"ed9dd271fe6e8012750d6f454edb506a18b052cc600e124df4413d8f1e8c831e"),r5=l("WorkspacesDirectoryView",["orgId"],"cdd0baaa07d5cb8e908e57241109feb0804fd1abac1463a790f0ba7b914ffc1b")},623746:(e,r,n)=>{n.d(r,{Bp:()=>$,GA:()=>V,J4:()=>H,KC:()=>x,Nl:()=>z,Ns:()=>y,Qp:()=>M,SS:()=>F,TP:()=>I,Td:()=>Y,U5:()=>O,U7:()=>P,Um:()=>A,V1:()=>E,WP:()=>L,WW:()=>v,YN:()=>Z,YT:()=>N,ZW:()=>R,Zt:()=>q,aU:()=>C,aX:()=>U,cE:()=>G,ge:()=>S,k9:()=>w,uW:()=>K,vy:()=>j,yT:()=>T});var i=n(140593),a=n(177131),o=n(922827),s=n(572304),l=n(258214),c=n(879441),d=n(604324),u=n(966712),m=n(96328),p=n(154483),h=n(99506),_=n(173454),g=n(279702),f=n(666068);function E(e,r){if(null===e)return null;let n={};for(let r in e)n[(0,m._5)(r)]=e[r];return Object.assign(n,r||{})}function y(e,r){let n={};return(e.link_access&&(n.linkAccess=e.link_access),"proto_link_access"in e&&(n.protoLinkAccess=e.proto_link_access),"has_file_link_password"in e&&(n.hasFileLinkPassword=e.has_file_link_password),"has_proto_link_password"in e&&(n.hasProtoLinkPassword=e.has_proto_link_password),"org_audience"in e&&(n.orgAudience=e.org_audience),"org_browsable"in e&&(n.orgBrowsable=e.org_browsable),"viewer_export_restricted"in e&&(n.viewerExportRestrictedAt=e.viewer_export_restricted?new Date:null),e.name&&(n._name=e.name,n.name=e.name),n&&r)?{File:{[r]:n}}:null}let b=e=>{let r={};return(e.link_access&&(r.linkAccess=e.link_access),"proto_link_access"in e&&(r.protoLinkAccess=e.proto_link_access),"org_audience"in e&&(r.orgAudience=e.org_audience),"org_browsable"in e&&(r.orgBrowsable=e.org_browsable),e.name&&(r.name=e.name),r&&e.id)?{Repo:{[e.id]:r}}:null};function v(e){if(!e.id)return null;let r=b(e);return r?(e.default_file_key&&Object.assign(r,y(e,e.default_file_key)),r):null}function I(e,r,n){let i=void 0!==e.default_file_key?e.default_file_key:e.key;return i&&"optimistic"===r&&e.expires_at?{FigFileLinkExpirationConfig:{[`optimistic-id-${i}`]:{figFileKey:i,expiresAt:new Date(e.expires_at),accessReverted:!1,updatedAt:new Date,prevPrivateLinkAccess:h.PQ.ORG_VIEW,prevPrivateProtoLinkAccess:null,prevOrgBrowsable:null,setByUserId:n?.id||null,setByUser:n}}}:null}function T(e,r,n){let i=e.link_access===h.PQ.VIEW||e.link_access===h.PQ.EDIT||e.proto_link_access===h.Pu.VIEW;return r&&"optimistic"!==r&&(!i||"expires_at"in e)?{FigFileLinkExpirationConfig:{[r]:{expiresAt:e.expires_at?new Date(e.expires_at):null,accessReverted:!e.expires_at,setByUserId:n?.id||null,setByUser:n}}}:null}function S(e){return{key:e.key,name:e.name,file_repo_id:e.file_repo_id,source_file_key:e.source_file_key,editor_type:e.editor_type,folder_id:e.folder_id,team_id:e.team_id,parent_org_id:e.parent_org_id,has_proto_link_password:e.has_proto_link_password,proto_link_access:e.proto_link_access,created_at:e.created_at,trashed_at:e.trashed_at,prototype_url:e.prototype_url}}function w(e){return{checkpoint_token:"",edit_url:"",prototype_url:`${window.location.origin}/proto/${e.key}/${(0,m.sy)(e.name||"")}`,track_tags:"",url:`${window.location.origin}/file/${e.key}/${(0,m.sy)(e.name||"")}`,touched_at:"",client_meta:e.clientMeta||"",created_at:e.createdAt.toString(),creator_id:e.creator.id,deleted_at:e.deletedAt?e.deletedAt.toString():null,description:e.description||"",editor_type:e.editorType,file_repo_id:e.fileRepoId,folder_id:e.folderId,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,is_template:!!e.trackTags?.isTemplate,key:e.key,license:e.license,link_access:e.linkAccess,name:e.name||"",org_audience:!!e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,proto_link_access:e.protoLinkAccess,source_file_key:e.sourceFileKey,starter_library_src_file_key:e.trackTags?.starterLibrarySrcFileKey,team_id:e.teamId,thumbnail_guid:e.thumbnailGuid,thumbnail_url:e.thumbnailUrl,thumbnail_url_override:e.thumbnailUrlOverride,trashed_at:e.trashedAt?e.trashedAt.toString():null,trashed_user:e.trashedUser,trashed_user_id:e.trashedUser?e.trashedUser.id:null,updated_at:e.updatedAt.toString(),viewer_export_restricted:e.viewerExportRestricted,is_try_file:e.isTryFile,library_key:e.libraryKey,last_published_at:e.lastPublishedAt,library_publish_scope_type:e.libraryKeyToFile?.libraryPublishScope?.publishScopeType}}function A(e){return{id:e.id,handle:e.handle,img_url:e.imgUrl,email:e.email||void 0,name:e.name||void 0}}function C(e,r,n,i){let a={id:e.id,resource_type:e.resourceType,resource_id_or_key:e.resourceId,level:e.level,created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),pending:e.pending,org_user:n?{design_paid_status:n.accountType,whiteboard_paid_status:n.whiteboardPaidStatus||h.El.STARTER,user_id:n.userId,permission:n.permission}:void 0,team_user:i?{design_paid_status:i.designPaidStatus,whiteboard_paid_status:i.whiteboardPaidStatus,user_id:i.userId,team_id:i.teamId}:void 0};return e.pending?{...a,pending:!0,user_id:null,user:{email:e.pendingEmail||""}}:{...a,pending:!1,user_id:r.id,user:r}}function N(e){return{id:e.id,name:e.name,folder_id:e.folderId,default_file_key:e.defaultFileKey,deleted_at:e.deletedAt&&e.deletedAt.toString(),trashed_at:e.trashedAt&&e.trashedAt.toString(),created_at:e.createdAt.toString(),updated_at:e.updatedAt.toString(),team_id:e.teamId,link_access:e.linkAccess,proto_link_access:e.protoLinkAccess,has_file_link_password:e.hasFileLinkPassword,has_proto_link_password:e.hasProtoLinkPassword,org_audience:e.orgAudience,org_browsable:e.orgBrowsable,parent_org_id:e.parentOrgId,has_active_branches:e.hasActiveBranches}}function L(e,r){return{id:e.id,viewed_on:e.viewedOn.toString(),user_id:e.user.id,file_key:e.fileKey,user:r}}function O(e){let r={};return e.forEach(e=>r[e.id]=e),r}function R(e){switch(e){case h.vt.FILE:return"FileRole";case h.vt.FILE_REPO:return"RepoRole";case h.vt.FOLDER:return"ProjectRole";case h.vt.TEAM:return"TeamRole"}}function P(e){if(null!=e)return{backgroundColor:e.backgroundColor??void 0,containingStateGroup:"containingStateGroup"in e?function(e){if(null!=e)return{name:e.name??void 0,nodeId:e.nodeId??void 0}}(e.containingStateGroup):void 0,name:e.name??void 0,nodeId:e.nodeId??void 0,pageId:e.pageId??void 0,pageName:e.pageName??void 0}}function D(e){return{subscriptionStatus:"LIBRARY",type:_.PW.MODULE,node_id:e.nodeId,key:(0,a.mW)(e.key),version:(0,a.Pg)(e.version),userFacingVersion:a.Pg.INVALID,canvas_url:`/api/file_proxy/module_asset/${e.key}/canvas?ver=${e.checkpoint.key}`,containing_frame:P(e.containingFrame),thumbnail_url:`/module_asset/${e.key}/thumbnail?ver=${e.checkpoint.key}`,moduleSource:W(e.moduleSource),width:parseInt(e.width),height:parseInt(e.height)}}function k(e,r){return{description:e.description??void 0,description_rt:e.description_rt??void 0,library_key:(0,l.l)(r.file.libraryKey),id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,updated_at:e.updatedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:p.Ps.LIVEGRAPH_DATA_HUB_FILE,team_id:null}:{file_key:r.file.key,file_key_source:p.Ps.LIVEGRAPH_DATA,team_id:r.file.teamId}}}function M(e,r){return{...k(e,r),type:_.PW.COMPONENT,node_id:e.nodeId,canvas_url:`/component/${e.componentKey}/canvas?ver=${e.contentHash}`,component_key:(0,a.ii)(e.componentKey),containing_frame:P(e.containingFrame),content_hash:(0,a.F7)(e.contentHash),userFacingVersion:a.F7.INVALID,min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,thumbnail_url:`/component/${e.componentKey}/thumbnail?ver=${e.contentHash}`}}function F(e,r){return{...k(e,r),type:_.PW.STATE_GROUP,node_id:e.nodeId,canvas_url:`/state_group/${e.key}/canvas?ver=${e.version}`,containing_frame:P(e.containingFrame),default_state_key:e.defaultStateKey,key:(0,a.q)(e.key),min_node_height:e.minNodeHeight??0,min_node_width:e.minNodeWidth??0,version:(0,a.Rf)(e.version),userFacingVersion:a.Rf.INVALID,thumbnail_url:`/state_group/${e.key}/thumbnail?ver=${e.version}`,fill_color:e.fillColor??void 0}}function x(e,r){return{...k(e,r),type:_.PW.STYLE,node_id:e.nodeId,canvas_url:`/style/${e.key}/canvas?ver=${e.checkpoint.key}`,checkpoint_id:e.checkpoint?.key,content_hash:(0,a.IA)(e.contentHash),userFacingVersion:a.IA.INVALID,key:(0,a.n3)(e.key),meta:e.meta?(0,f.iX)(e.meta):void 0,sort_position:e.sortPosition??"",style_type:e.styleType,thumbnail_url:`/style/${e.key}/thumbnail?ver=${e.checkpoint.key}`}}function U(e){switch(e){case"BOOLEAN":return o.rXF.BOOLEAN;case"COLOR":return o.rXF.COLOR;case"FLOAT":return o.rXF.FLOAT;case"MAP":return o.rXF.MAP;case"STRING":return o.rXF.STRING;case"SYMBOL_ID":return o.rXF.SYMBOL_ID;case"TEXT_DATA":return o.rXF.TEXT_DATA;default:(0,i.wc)(`Unhandled livegraph type: ${e}`)}}function B(e,r){return`/variable_set/${e}/canvas?ver=${r}`}function V(e,r,n){let i="",o="";return n?(i=c.wL(s.sH(e.nodeId)??s.Hr),o=d.wL(s.sH(e.variableCollection.nodeId)??s.Hr)):(i=c.Hc((0,a.ey)(e.key),(0,a.nK)(e.version)),o=d.Hc((0,a.yG)(e.variableCollection.key),(0,a.Vt)(e.variableCollection.version))),{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:_.PW.VARIABLE,node_id:i,variableSetId:o,variableCollectionKey:(0,a.yG)(e.variableCollection.key),resolvedType:U(e.variableType),version:(0,a.nK)(e.version),userFacingVersion:a.nK.INVALID,sortPosition:e.sortPosition,key:(0,a.ey)(e.key),scopes:(0,g.gK)(e.scopes),canvas_url:B(e.variableCollection.key,e.variableCollection.checkpoint.key)}}function G(e,r,n){let i="";return i=n?d.wL(s.sH(e.nodeId)??s.Hr):d.Hc((0,a.yG)(e.key),(0,a.Vt)(e.version)),{...k({...e,description_rt:null,thumbnailUrl:null},r),subscriptionStatus:"LIBRARY",type:_.PW.VARIABLE_SET,node_id:i,version:(0,a.Vt)(e.version),userFacingVersion:a.Vt.INVALID,canvas_url:B(e.key,e.checkpoint.key),key:(0,a.yG)(e.key),checkpoint_id:e.checkpoint?.key,variableThumbnailsUrl:e.variableThumbnailsUrl??void 0,modes:function(e){if(null==e)return;let r=[];for(let n of e)r.push({id:n.id,name:n.name});return r}(e.modes),isExtendable:e.isExtendable??!1}}function H(e,r){return{...{description:e.description??void 0,description_rt:e.description_rt??void 0,id:e.id,name:e.name,unpublished_at:e.unpublishedAt?.toISOString()??null,..."hubFile"===r.type?{file_key:r.file.id,file_key_source:p.Ps.LIVEGRAPH_DATA_HUB_FILE,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.currentHubFileVersion?.name||"",publisher_name:r.file.communityPublishers?.[0]?.profile?.name||"",isHubFile:!0}:"teamTemplate"===r.type?{file_key:r.file.key,file_key_source:p.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.template?.name||"",publisher_name:r.file.template?.publishedByUserNullable?.name||"",isHubFile:!1}:{file_key:r.file.key,file_key_source:p.Ps.LIVEGRAPH_DATA,library_key:(0,l.l)(r.file.libraryKey),file_name:r.file.name,isHubFile:!1,publisher_name:""}},...D(e)}}function K(e,r){return{...k({...e,description_rt:null,thumbnailUrl:null},r),...D(e)}}let W=e=>{switch(e){case"EDITOR_TEMPLATE":return o.QjO.EDITOR_TEMPLATE;case"SLIDES_TEMPLATE":return o.QjO.SLIDES_TEMPLATE;case"SITES_TEMPLATE":return o.QjO.SITES_TEMPLATE;case"LITE_TEMPLATE":return o.QjO.LITE_TEMPLATE;default:(0,i.wc)(`Unhandled livegraph module source: ${e}`)}};function $(e){return{id:e.id,path:e.path,orgId:e.org_id??null,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:e.deleted_at?new Date(e.deleted_at):null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,description:e.description}}function Y(e,r,n){return(r||n)&&e?{autogen_password_controls:r?.autogenPasswordControls||!1,external_collaboration_controls:r?.externalCollaborationControls||!1,public_link_controls_setting:n?.publicLinkControlsSetting??r?.publicLinkControlsSetting,public_link_controls_max_expiration:n?.publicLinkControlsMaxExpiration??r?.publicLinkControlsMaxExpiration}:null}function z(e){return e?{...e,prevPrivateLinkAccess:e.prevPrivateLinkAccess,prevPrivateProtoLinkAccess:e.prevPrivateProtoLinkAccess,prevOrgBrowsable:!!e.prevOrgBrowsable,setByUser:e.setByUser?A(e.setByUser):null}:null}function j(e){let r={domains:[],isFetching:!1,fetchedAt:null};return e&&e.forEach(e=>{r.domains.push({id:e.id,created_at:e.createdAt?e.createdAt.toString():"",org_id:e.orgId,domain:e.domain,google_sso_only_at:e.googleSsoOnlyAt?e.googleSsoOnlyAt.toString():null,saml_sso_only_at:e.samlSsoOnlyAt?e.samlSsoOnlyAt.toString():null,verification_method:null,verified_at:null})}),r}function q(e,r){return r?{type:"hubFile",file:r}:e?{type:"team",file:e}:void 0}function Z(e){let{currentUser:r}=e,n="recentFiles2"in r?r.recentFiles2:r.suggestedFiles;if(!n)return{recent_files:[],recent_repos:[]};let i=[],a=new Map,o=[];for(let e of n){let r=e.file;if(r&&!r.trashedAt&&!r.deletedAt&&((0,u.kc)().sites||"sites"!==r.editorType)){let n=r.trackTags?.isTemplate,s={accessed_at:"actionAt"in e?e.actionAt.toISOString():void 0,branch_checkpoint_id:r.branchCheckpointId,client_meta:r.clientMeta,created_at:r.createdAt.toISOString(),creator_id:r.creatorId,deleted_at:null,description:r.description,edit_url:r.editUrl,editor_type:r.editorType,file_repo_id:r.fileRepoId,folder_access_enabled:r.folderAccessEnabled,folder_id:r.folderId,handoff_url:r.handoffUrl,has_file_link_password:r.hasFileLinkPassword,has_proto_link_password:r.hasProtoLinkPassword,is_favorited:r.isFavorited,is_new_user_playground_library:r.newUserPlaygroundLibrary||void 0,is_team_template:r.isTeamTemplate,is_template:n||void 0,is_try_file:r.isTryFile,key:r.key,last_published_at:r.lastPublishedAt||null,license:r.license,link_access:r.linkAccess,name:r._name||"Untitled",org_audience:r.orgAudience??void 0,org_browsable:r.orgBrowsable,parent_org_id:r.parentOrgId,proto_link_access:r.protoLinkAccess,prototype_url:r.prototypeUrl,scheme:r.scheme,source_checkpoint_id:r.sourceCheckpointId,source_file_key:r.sourceFileKey,starter_library_src_file_key:r.trackTags?.starterLibrarySrcFileKey||void 0,team_id:r.teamId,thumbnail_guid:r.thumbnailGuid,thumbnail_url:r.thumbnailUrl,thumbnail_url_override:r.thumbnailUrlOverride,preview_thumbnail_urls:r.previewThumbnailUrls,touched_at:r.touchedAt,track_tags:r.trackTagsRaw?JSON.parse(r.trackTagsRaw):null,trashed_at:null,trashed_user_id:r.trashedUserId,updated_at:r.updatedAt?.toISOString(),url:r.url,viewer_export_restricted:r.viewerExportRestricted,can_edit:r.canEdit};if(r.fileRepoId&&r.repo){let n=a.get(r.fileRepoId);n?n.files.push(s):(n={repo:{created_at:r.repo.createdAt.toISOString(),default_file_key:r.repo.defaultFileKey,deleted_at:r.repo.deletedAt?.toISOString()||null,folder_id:r.repo.folderId,has_active_branches:r.repo.hasActiveBranches,has_file_link_password:r.repo.hasFileLinkPassword,has_proto_link_password:r.repo.hasProtoLinkPassword,id:r.repo.id,is_favorited:r.repo.isFavorited,link_access:r.repo.linkAccess,name:r.repo.name,org_audience:r.repo.orgAudience,org_browsable:r.repo.orgBrowsable,parent_org_id:r.repo.parentOrgId,proto_link_access:r.repo.protoLinkAccess,team_id:r.repo.teamId,trashed_at:r.repo.trashedAt?.toISOString()||null,updated_at:r.repo.updatedAt.toISOString()},files:[s],timestamp:"actionAt"in e?e.actionAt.toISOString():null},a.set(r.fileRepoId,n),o.push(n))}else i.push(s)}}return{recent_files:i,recent_repos:o}}},336599:(e,r,n)=>{n.d(r,{D2:()=>c,Fl:()=>m,GH:()=>d,Sc:()=>p,VP:()=>s,aF:()=>u,mn:()=>l,oh:()=>h});var i=n(188507),a=n(586459),o=n(479296);let s=(0,o.n)((e,r)=>e[r]===a.r.LOADING),l=(e,r)=>null!==e[r]&&void 0!==e[r],c=(e,r)=>null!==e[r]&&void 0!==e[r]&&!s(e,r),d=(e,r)=>e[r]===a.r.SUCCESS,u=(e,r)=>e[r]===a.r.FAILURE,m=(e,r)=>e[r],p=(e,r)=>null===e[r]||void 0===e[r]||e[r]===a.r.FAILURE,h=(0,o.n)(e=>s((0,i.d4)(e=>e.loadingState),e))},4564:(e,r,n)=>{n.d(r,{M:()=>c});var i=n(517333),a=n(441088),o=n(744472),s=n(442944);let l=null;function c(){return l||(i.eD&&(l=new o.k),(0,a.T)()&&(l=new s.y)),l}},820113:(e,r,n)=>{n.d(r,{B9:()=>_,JK:()=>l,LN:()=>u,_Z:()=>g,aE:()=>h,bu:()=>E,ub:()=>p,vr:()=>d,wU:()=>m}),n(411855);var i=n(966712),a=n(776621),o=n(479296);let s=["jpy","usd","gbp","cad","eur"],l=(0,o.D)(()=>{if(navigator){let e=navigator.languages;if(e&&e[0])return e[0];let r=navigator.language;if(r)return r}return"en-US"}),c={jpy:{annualFigma:1800,monthlyFigma:2250,orgFigma:6750,orgDevMode:3750,orgFigjam:750,enterprise:11250,enterpriseDevMode:5250,enterpriseFigjam:750,annualFigjam:450,monthlyFigjam:750},usd:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},eur:{annualFigma:1200,monthlyFigma:1500,orgFigma:4500,orgDevMode:2500,orgFigjam:500,enterprise:7500,enterpriseDevMode:3500,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},gbp:{annualFigma:1100,monthlyFigma:1400,orgFigma:4e3,orgDevMode:2200,orgFigjam:500,enterprise:7e3,enterpriseDevMode:3200,enterpriseFigjam:500,annualFigjam:300,monthlyFigjam:500},cad:{annualFigma:1600,monthlyFigma:2e3,orgFigma:6e3,orgDevMode:3500,orgFigjam:700,enterprise:1e4,enterpriseDevMode:5e3,enterpriseFigjam:700,annualFigjam:400,monthlyFigjam:700}};class d{constructor(e){this.fullFormat={jpy:"JPY",usd:"USD",eur:"EUR",gbp:"GBP",cad:"CAD"},null===e&&(0,a.us)("Currency should not be null. Defaulted to usd."),this.currency=e??"usd",this.hasCents="jpy"!==this.currency,this.locale=l()}formatMoney(e,r){let n={currency:this.currency,style:"currency"};this.hasCents&&r?.showCents||(n.maximumFractionDigits=0,n.minimumFractionDigits=0),this.hasCents&&(e*=.01);let i=e.toLocaleString(this.locale,n);return(i.startsWith("CA$")||i.startsWith("US$"))&&(i=i.slice(2)),r?.showFullFormat?`${i} ${this.fullFormat[this.currency]}`:i}getPrices(){return c[this.currency]}}function u(){let e=(0,i.Ay)().user_currency_from_ip;return g()?e:"usd"}function m(){return new d(u())}function p(){return g()&&"usd"!==u()&&(0,i.Ay)().iso_code||"US"}function h(){return(0,i.Ay)().iso_code||"US"}function _(){let e=new Set;return e.add("usd"),e.add(u()),Array.from(e)}function g(){let e=(0,i.Ay)().user_currency_from_ip;if(!e||!s.includes(e)||"usd"===e)return!1;let r=(0,i.Ay)().user_data;return!!r&&!!r.id}let f={usd:[],eur:["AT","BE","CZ","DK","EE","FI","FR","DE","GR","HU","IS","IT","LV","LI","LT","LU","MT","NL","NO","PL","PT","SK","SI","SM","ES","SE","CH","BG","HR","CY","IE","RO","XK"],jpy:["JP"],cad:["CA"],gbp:["GB","IM","GG","JE","GI","GS"]};function E(e,r){return"usd"===e||f[e].includes(r)}},401352:(e,r,n)=>{n.d(r,{Lb:()=>a});var i=n(286640);function a(e){let r=(0,i.DN)();r.get("CHECKED_OSS_SALES_EXPERIMENT_LOCAL_KEY")||r.set("CHECK_OSS_SALES_EXPERIMENT_LOCAL_KEY",e)}},833629:(e,r,n)=>{n.d(r,{D8:()=>o,Lh:()=>s,_q:()=>c,jO:()=>l}),n(776250),n(132135);var i=n(479296);n(335682),n(860178);var a=n(309798);(0,i.D)((e,r,n)=>null!=e&&null!=r&&function(e,r){return!!e&&!!e.track_tags&&!e.trashed_at&&!e.deleted_at&&!!e.is_template&&r.includes(e.track_tags.figma_basics_experiment)}(r,n)&&e===r.creator_id);var o=(e=>(e.PROPERTIES_PANEL_TITLE="properties-panel-title",e.SCRUBBABLE_CONTROL="scrubbable-control",e.PAINT_PANEL_ROW="paint-panel-row",e.TEXT_PANEL="text-panel",e))(o||{});function s(e,r){return e+"-"+r.toLowerCase().replace(" ","-")}function l(){let e=(0,a.f)("editor_onboarded"),r=(0,a.f)("figma_basics_tooltips_onboarding"),n=(0,a.f)("no_figma_basics_tooltips_onboarding");return c({editor_onboarded:e,figma_basics_tooltips_onboarding:r,no_figma_basics_tooltips_onboarding:n,cursor_bot_v2__basics_onboarded:(0,a.f)("cursor_bot_v2__basics_onboarded"),cursor_bot_v2__no_basics_onboarded:(0,a.f)("cursor_bot_v2__no_basics_onboarded"),seen_starting_points_tooltips_onboarding:(0,a.f)("seen_starting_points_tooltips_onboarding")})}function c(e){return!!(e.editor_onboarded||e.figma_basics_tooltips_onboarding||e.no_figma_basics_tooltips_onboarding||e.cursor_bot_v2__basics_onboarded||e.cursor_bot_v2__no_basics_onboarded||e.seen_starting_points_tooltips_onboarding)}},296796:(e,r,n)=>{n.d(r,{OA:()=>m,rT:()=>u}),n(181912);var i=n(179940);n(939863);var a=n(438120),o=n(383986),s=n(916525),l=n(720647);let c=(e,r,n)=>{switch(e){case"product":return s.SL[r];case"role":return s.qY[r];case"seatType":case"seatChanges":return r;case"accountType":return s.U9[r];case"lastEdit":return s.rk[r];case"billingGroup":let i=decodeURIComponent(r),a=Object.keys(n).find(e=>n[e]?.name===i);if("unassigned"===r||"Unassigned"===r)return o.s;if(a)return a;return null;case"newEditor":return"true"===r;default:return null}},d=(e,r,n)=>{switch(e){case"productFilter":return s.Eg[r];case"roleFilter":return s.jN[r];case"permissionFilter":case"lastEditFilter":case"newEditorFilter":case"workspaceFilter":case"idpGroupFilter":case"seatTypeFilter":case"seatChangesFilter":return r;case"licenseGroupFilter":return encodeURIComponent((0,a.CC)(r,n));default:return null}};function u(e,r){if(!e)return null;let n=(0,i.qg)(e);return function(e){let r=e?.[s.e5.productFilter],n=e?.[s.e5.roleFilter],i=r===l.Te.DEV_MODE?s.B9:s.ZL;return!n||i.includes(n)?e:{...e,roleFilter:null}}(Object.keys(n).reduce((e,i)=>{if(!(i in s.Oo))return e;{let a=s.GX[i],o=n[i],l=c(i,o,r);return{...e,...l&&{[a]:l}}}},s.J0))}function m(e,r){return Object.keys(e).reduce((n,i)=>{let a=s.cC[i],o=e[i];return{...n,...o&&{[a]:d(i,o,r)}}},{})}},227544:(e,r,n)=>{n.d(r,{CA:()=>s,WQ:()=>i}),n(181912),n(133537),n(939863),n(99506),n(963810),n(304769),n(720647);let i=1;var a=(e=>(e.OVERDUE="overdue",e.UNPAID="unpaid",e.REVIEW="review",e.LOCKED="locked",e.DEFAULT="default",e))(a||{}),o=(e=>(e.BILLING_STATUS="billing_status",e.TAX_ID_STATUS="tax_id_status",e.DEV_MODE_SUGGESTED_UPGRADES="dev_mode_suggested_upgrades",e))(o||{});function s(e){return null!==e&&null===e.value}},438120:(e,r,n)=>{n.d(r,{CC:()=>o});var i=n(939863);n(709217),n(99506),n(643067);var a=n(383986);function o(e,r){return e===a.s?(0,i.t)("license_group.unassigned"):r[e]?.name??""}n(916525)},937294:(e,r,n)=>{n.d(r,{YP:()=>c,gO:()=>l,n1:()=>u,p9:()=>d});var i=n(99506),a=n(428467),o=n(668860),s=n(410436),l=(e=>(e[e.CLICK_LEAVE=0]="CLICK_LEAVE",e[e.CLICK_WITHDRAW=1]="CLICK_WITHDRAW",e[e.CLICK_JOIN=2]="CLICK_JOIN",e[e.CLICK_REQUEST=3]="CLICK_REQUEST",e[e.BYPASS_REQUEST=4]="BYPASS_REQUEST",e[e.CLICK_JOIN_AS_ADMIN=5]="CLICK_JOIN_AS_ADMIN",e))(l||{});function c(e,r,n,l){let c=(0,a.hasViewerRoleAccessOnTeam)(e.id,n),d=function(e,r){if(!e.org_id)return!1;let n=r.orgTeams?.teams.find(r=>r.id===e.id);if(n)return!!n.orphaned;let i=r.roles.byTeamId[e.id];return!i||Object.values(i).every(e=>e.level<o.e6.ADMIN&&!e.pending)}(e,n);if(c)return 0;if(r&&r.status===s.c.PENDING)return 1;if(e.org_access===i.bU.PRIVATE&&d&&(0,a.canAdminOrg)(l,n)||e.org_access===i.bU.SECRET&&d&&(0,a.canAdminOrg)(l,n))return 4;if((0,a.canManageNonSecretOrgTeam)(e,n,n.user?.id))return 5;if(e.org_access===i.bU.PUBLIC)return 2;if(e.org_access===i.bU.PRIVATE)return 3;return null}let d=e=>`JOINING_ORG_TEAM_${e}`,u=e=>`JOINING_${e.length}_BATCH_ORG_TEAMS_${e[0]}`},724838:(e,r,n)=>{n.d(r,{Hw:()=>s});var i=n(133537);n(966712),n(931828),n(243987),n(428467),n(596607);var a=(e=>(e[e.NONE=0]="NONE",e[e.SINGLE_TEAM=1]="SINGLE_TEAM",e[e.MULTIPLE_TEAMS=2]="MULTIPLE_TEAMS",e))(a||{}),o=(e=>(e[e.NEVER=0]="NEVER",e[e.ONCE=1]="ONCE",e[e.TWICE=2]="TWICE",e[e.PERMANENTLY=3]="PERMANENTLY",e))(o||{});function s(e){return!!e&&!(0,i.qe)(e.email)}},596607:(e,r,n)=>{n.d(r,{LM:()=>d,WT:()=>p,Xy:()=>m,bC:()=>_,x9:()=>u,xw:()=>c,zR:()=>h});var i=n(561546);n(38329),n(281381),n(939863),n(720647);var a=n(99506),o=n(66037);n(498606);var s=n(117192),l=n(529928);function c(e){return e.currentUserOrgId&&e.user&&e.orgUsersByOrgId[e.currentUserOrgId]?e.orgUsersByOrgId[e.currentUserOrgId][e.user.id]:null}(0,l.bt)(c);let d=(0,l.bt)(function(e){let r=c(e);return r?.workspace_users?.find(e=>e.is_main_workspace)?.workspace_id}),u=s.x;function m(e){let r=Object.values(e).filter(e=>e.permission===a._D.ADMIN);return(0,i.KQ)(r,"created_at"),r}function p(e,r){let n=e.admin_users_metadata.map(e=>r[e.id]).filter(e=>!!e);return(0,i.KQ)(n,"created_at"),n}function h(e){return m(e).slice(0,3)}function _(e){return e.type===o.Wd.ORG_USER?!!e.scim_seat_type:!e.isOrgInvite&&!!e.scim_seat_type}},643067:(e,r,n)=>{n.d(r,{H_:()=>a,Oe:()=>h,Ts:()=>o,eE:()=>s,kA:()=>p,mg:()=>u,nX:()=>m,wA:()=>c,yK:()=>l}),n(411855),n(188507),n(181912);var i=n(133537);function a(e,r){let n=e.map(e=>e.domain.toLowerCase()),a=(0,i.zN)(r);return 0!==n.length&&!!a&&n.indexOf(a)>-1}function o(e){return e?.id!==void 0}function s(e,r){let n=o(r)?r.email:r;return!!n&&(0,i.xf)(n)&&e.domains.length>0&&!a(e.domains,n)}function l(e){return!!e.currentUserOrgId&&!!e.orgById[e.currentUserOrgId]?.template_picker_disabled}function c(e){return e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null}n(966712),n(96328),n(881388),n(939863),n(99506),n(428467),n(23001),n(802026),n(679892),n(720647),n(147206);let d=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/(\d+)/);function u(e){return d.test(e)}function m(e){let r=e.match(d);return r?r[1]:null}function p(e){return!!e?.bigma_enabled}function h(e){return p(e)}},243987:(e,r,n)=>{n.d(r,{BR:()=>j,Ht:()=>b,JV:()=>Y,Jm:()=>E,KI:()=>D,Ky:()=>z,LF:()=>I,O1:()=>q,PS:()=>k,PX:()=>w,Rq:()=>W,Rx:()=>V,S$:()=>F,SD:()=>G,UE:()=>H,WQ:()=>L,WW:()=>T,Wf:()=>v,XX:()=>P,ZZ:()=>M,cW:()=>C,dX:()=>B,f8:()=>A,fD:()=>K,h:()=>S,n0:()=>O,ne:()=>$,oc:()=>x,w5:()=>R,zZ:()=>y});var i=n(268853),a=n(181912),o=n(133537),s=n(966712),l=n(776621),c=n(650322),d=n(881388),u=n(939863),m=n(875847),p=n(99506),h=n(428467),_=n(802026),g=n(622139),f=n(36816),E=(e=>(e.FREE="free",e.PRO="pro",e.ORG="org",e.ENT="ent",e.EDU="edu",e))(E||{});let y="https://www.figma.com/pricing/#cid-20p4Q0lWSOxIWj30zTY6P2",b=2,v=1,I={[p._Y.DESIGN]:3,[p._Y.WHITEBOARD]:1,[p._Y.SLIDES]:3,[p._Y.SITES]:3,[p._Y.COOPER]:3},T=3,S=0,w=0,A=1,C=5;function N(e){return e>new Date}function L(e){let r=e&&!e.org_id&&e.grace_period_end&&a.A.utc(e.grace_period_end);return!!r&&r.valueOf()>Date.now()}function O(e){return!!e&&null!=e.subscription&&e.subscription!==p.Qh.INCOMPLETE}function R(e){return!!e&&(O(e)||e.student_team||!!e.grace_period_end&&N(new Date(e.grace_period_end)))}function P(e){if(!e)return!1;let{subscription:r,studentTeamAt:n,gracePeriodEnd:i}=e;return!!r&&r!==p.Qh.INCOMPLETE||!!n||i&&N(i)}function D(e){return function(e){let r=e.editorType,n=!!e.team&&!P(e.team),i=!e.teamId&&!e.parentOrgId,a=(0,s.kc)().ps_benchmark&&(0,m.jd)(e.project),o=I[r??p._Y.DESIGN];return r===p._Y.WHITEBOARD?n||i?o:1/0:n&&!a?o:1/0}(e)<1/0}function k(e){return Object.values(e.teams).filter(r=>(0,h.canEditTeam)(r.id,e)&&(!R(r)||r.student_team))}function M(e,r,n){var i,a,o;return i=e.team_id?r.teams[e.team_id]:null,a=r.user,o=r.userEduGracePeriods,(!!e.team_id||"org_edit"!==e.sharing_audience_control)&&!!(!e.team_id&&!(0,m.Gi)(e)||e.team_id&&(!n&&U(i,a,o)||!R(i)&&(e.is_invite_only||e.is_view_only)))}function F(e,r,n){return!(e.teamId||(0,m.VA)(e))||!!e.teamId&&(!!B(r,n)||(e.inviteOnlyAt||e.viewOnlyAt)&&!P(r))}function x(e,r){return U(r.teams[e],r.user,r.userEduGracePeriods)}function U(e,r,n){return!!e&&!!r&&(e.student_team?!((0,c.cn)(r)||(0,c.SH)(n,e.id).isInValidGracePeriod):e.restrictions_list?.includes(p.P4.LOCKED))}function B(e,r){return!!e&&!!r&&(e.studentTeamAt?!((0,c.cn)(r)||e.eduGracePeriod?.isValid):e.restrictionsList?.includes(p.P4.LOCKED))}function V(e){return Object.values(e.teams).some(r=>x(r.id,e)&&(0,h.canEditTeam)(r.id,e))}function G(e,r){let n=r.orgById[e];return n&&n.standing===_.ZG.SUSPENDED}function H(e,r){if(e.data&&e.data.message){let n=(0,u.Jv)(e);n&&r(d.s.error(n))}else{let n=(0,u.Jv)(e,(0,u.YD)("error.unknown_contact_support"));r(d.s.error(n))}}function K(e,r){return e===g.tY.MONTHLY?0:r}function W(e,r){return e===g.tY.MONTHLY?r:0}function $(e){switch(e){case g.tY.MONTHLY:return g.NW.MONTH;case g.tY.ANNUAL:return g.NW.YEAR;default:return(0,l.$D)(i.e.MONETIZATION_UPGRADES,Error(`Attempted to get BillingInterval from invalid BillingPeriod: ${e}`)),null}}function Y(e){switch(e){case g.NW.MONTH:return g.tY.MONTHLY;case g.NW.YEAR:return g.tY.ANNUAL;default:return(0,l.$D)(i.e.MONETIZATION_UPGRADES,Error(`Attempted to get BillingPeriod from invalid BillingInterval: ${e}`)),null}}function z(e,r,n){let i="whiteboard"===n?"whiteboard_paid_status":"design_paid_status";return e.filter(e=>!(0,o.nD)(e.email)&&(e[i]===f.Zf.FULL&&!r.downgrade[n].includes(e.id)||r.upgrade[n].includes(e.id))).length}function j(e,r){let n=!1,i=null!==e?Object.values(e).reduce((e,i)=>{if(!i.user)return e;let a={id:i.user.id,design_paid_status:i.design_paid_status,whiteboard_paid_status:i.whiteboard_paid_status,email:i.user.email||"",handle:i.user.handle||"",img_url:i.user.img_url||""};return i.user?.id===r?.id?(n=!0,e.unshift(a)):e.push(a),e},[]):[];return!n&&r&&i.unshift({id:r.id,design_paid_status:f.Zf.STARTER,whiteboard_paid_status:f.Zf.STARTER,email:r.email,handle:r.handle,img_url:r.img_url}),i}function q(e,r){return Math.max(e,r)-r}},257512:(e,r,n)=>{n.d(r,{OI:()=>A,Ud:()=>S});var i=n(411855),a=n(188507),o=n(776250),s=n(133537),l=n(358145),c=n(966712),d=n(27087),u=n(881388),m=n(939863),p=n(738269),h=n(182976),_=n(995852),g=n(229403),f=n(99506),E=n(622139),y=n(479296),b=n(195971),v=n(860178),I=n(336599),T=n(243987);let S=(0,y.D)(({teamId:e,canSeeBillingAddressExp:r})=>{let n=(0,a.wA)(),h=(0,a.d4)(e=>e.loadingState),y=(0,a.d4)(r=>e?r.teamUserByTeamId[e]:null),S=(0,a.d4)(e=>e.selectedView),C=(0,v.iZ)(),[N,L]=(0,i.useState)(!0),O=(0,l.ZC)(e),R=g.Xw.loadingKeyForPayload({teamId:e}),P=(0,I.GH)(h,R),D=(0,c.DC)();(0,i.useEffect)(()=>{n(g.Xw({teamId:e}))},[n,e]);let k=function(){let e=(0,a.wA)();return(0,i.useCallback)(r=>{(0,o.sx)("Loaded Saved Cart State",{teamId:r.teamId,lastSavedAt:r.updatedAt}),e(_.eK(r))},[e])}();return(0,i.useEffect)(()=>{async function i(r){try{let i=await d.Ay.post("/api/subscriptions/teams/calculate_estimate",{...r,team_id:e});n(_.i({taxes:i.data.meta.estimate}))}catch(e){n(u.s.error((0,m.t)("payments.errors.estimate_calculation_error"))),n(p.$T({...S,paymentStep:E.tn.PAYMENT_AND_ADDRESS}))}L(!1)}if(void 0===O||O===e||N||(A(n),L(!0)),(!e||P)&&N){let o=(0,T.BR)(y,C),l=Object.entries(o).map(([e,r])=>{if((0,s.nD)(r.email||""))return e}).filter(e=>!!e);n(_.M2({figmaEmailTeamUsers:l}));let c=(0,b.lX)({teamId:e,userId:C?.id});if(c){c.editorStatusChanges=(0,b.nt)(c.editorStatusChanges,o);let s=(0,T.Ky)(o,c.editorStatusChanges,f._Y.DESIGN),d=(0,T.Ky)(o,c.editorStatusChanges,f._Y.WHITEBOARD),u=s+c.numEmptyDesignSeats,m=d+c.numEmptyWhiteboardSeats;if(k({numDesignEditors:u,numWhiteboardEditors:m,editorStatusChanges:c.editorStatusChanges,teamId:e,updatedAt:c.updatedAt,cartSelections:c.cartSelections}),D){var a;let e=(a=D.billing_period,E.tY[E.tY[a]]),o=r?{billing_address:D.billing_address,shipping_address:D.shipping_address||D.billing_address}:null;n(_.Lo({billingPeriod:e})),n(_.$h({vatGstId:D.vat_gst_id})),n(_.yy({legalName:D.customer_legal_name||D.company_name,displayName:D.display_name})),n(_.Ef({regionalVatGstId:D.regional_vat_gst_id})),i({address:D.address,editor_status_changes:c.editorStatusChanges,figma_email_team_users:l,selected_currency:D.currency,annual_quantity:(0,T.fD)(e,u),monthly_quantity:(0,T.Rq)(e,u),annual_whiteboard_quantity:(0,T.fD)(e,m),monthly_whiteboard_quantity:(0,T.Rq)(e,m),vat_gst_id:D.vat_gst_id,regional_vat_gst_id:D.regional_vat_gst_id,...o})}else L(!1)}else L(!1)}},[n,P,y,O,e,C,N,D,S,k,r]),(0,i.useEffect)(()=>()=>{e&&w(n,e)},[n,e]),N}),w=(0,y.D)((e,r)=>{let n=g.Xw.loadingKeyForPayload({teamId:r});e(h.yH({key:n}))});function A(e){e(_.qU({cartSelections:{countBySeatType:{},selectedUserSeatTypes:{}}})),e(_.Je({editorStatusChanges:{upgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]},downgrade:{whiteboard:[],design:[],slides:[],sites:[],cooper:[]}}})),e(_.js({numDesignEditors:0})),e(_.Az({numWhiteboardEditors:0}))}},828527:(e,r,n)=>{n.d(r,{k:()=>o});var i=n(140593),a=n(776250);class o{constructor(e){this.eventName=e,this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1,this.logEvent=e=>{if(this.fileKey&&!this.alreadySent)switch(e.type){case"sendSceneGraphQuery":this.queries.push(s(e.queries)),this.queriesTs.push(this.now());break;case"receiveNodeChanges":this.nodeChangesSizes.push(e.size),this.nodeChangesTs.push(this.now());break;case"receiveSceneGraphReply":this.replies.push(s(e.queries)),this.repliesTs.push(this.now());break;case"finishIncrementalLoading":if(e.fileKey===this.fileKey){if(this.nodeChangesSizes.length>0){let r={version:1,fileKey:e.fileKey,nodeChangesSizes:this.nodeChangesSizes,queries:this.queries,replies:this.replies,maxNodeChangesSize:Math.max.apply(null,this.nodeChangesSizes),...l(this.queriesTs,"query",5),...l(this.nodeChangesTs,"node",5),...l(this.repliesTs,"reply",5)};(0,a.sx)(this.eventName,r),this.alreadySent=!0}}else console.error(`IncrementalLoadTimer: file key mismatch ${e.fileKey} != ${this.fileKey}`);this.reset();break;default:(0,i.xb)(e)}}}reset(){this.fileKey=null,this.nodeChangesSizes=[],this.queries=[],this.replies=[],this.queriesTs=[],this.nodeChangesTs=[],this.repliesTs=[],this.alreadySent=!1}now(){return Math.round(performance.now())}setFileKey(e){this.fileKey=e}}function s(e){return[...e].sort().join(",")}function l(e,r,n){let i={};return e.forEach((e,a)=>{a<n&&(i[`${r}.${a}`]=e)}),i}},147206:(e,r,n)=>{n.d(r,{Ay:()=>I,C1:()=>C,D8:()=>O,DN:()=>L,F1:()=>E,GP:()=>b,Hv:()=>P,Jd:()=>S,Jf:()=>N,Pe:()=>v,Pq:()=>y,R$:()=>T,XG:()=>A,qR:()=>w});var i=n(140593),a=n(966712),o=n(939863),s=n(570999),l=n(256975),c=n(420576),d=n(369870),u=n(99506),m=n(279453),p=n(540019);n(606137);var h=n(668860),_=n(36816);n(851363);var g=n(507956),f=n(234587);function E(){return(0,d.MP)()&&!(0,a.kc)().integ_zoom_allow_extensions?{canRun:!1,message:(0,o.t)("widgets.no_zoom_widgets_plugins")}:{canRun:!0}}function y({copyExportRestrictedArgs:e}){return!(e&&v(e))}function b(e){return(0,g.$A)(e.selectedView)?(0,l.tn)(e)&&y({copyExportRestrictedArgs:e.openFile}):!((0,d.MP)()&&!(0,a.kc)().integ_zoom_allow_extensions||(0,f.Vj)(e.selectedView))&&!e.mirror.appModel.isReadOnly}function v(e){return(0,a.kc)().file_export_perm_v2?!e.canExport:!e.canEdit&&e.viewerExportRestricted}let I=n(368178).A;function T(e,r){return!!(e&&e.external_restricted_org_id&&e.external_restricted_org_id!==r)}function S(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===u.El.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===u.El.RESTRICTED}function w(e,r){return"whiteboard"===r?e&&e.whiteboard_paid_status===_.Zf.RESTRICTED:"slides"!==r&&e&&e.design_paid_status===_.Zf.RESTRICTED}function A(e,r){return null===r||("whiteboard"===r?e&&e.whiteboardPaidStatus===_.Zf.RESTRICTED:"slides"!==r&&e&&e.designPaidStatus===_.Zf.RESTRICTED)}function C(e,r){switch(e){case h.e6.OWNER:return r?(0,o.t)("permissions.level_name.branch_owner"):(0,o.t)("permissions.level_name.owner");case h.e6.ADMIN:return(0,o.t)("permissions.level_name.admin");case h.e6.EDITOR:return(0,o.t)("permissions.level_name.can_edit");case h.e6.VIEWER:return(0,o.t)("permissions.level_name.can_view");case h.e6.VIEW_PROTOTYPES:return(0,o.t)("permissions.level_name.can_view_prototypes");default:return(0,o.t)("permissions.level_name.none")}}function N(e,r){switch(r){case u._Y.DESIGN:return e.canCreateDesignFile;case u._Y.WHITEBOARD:return e.canCreateFigjamFile;case u._Y.SLIDES:return e.canCreateSlidesFile;case u._Y.SITES:return e.canCreateDesignFile&&!!(0,f.oz)();case u._Y.COOPER:return e.canCreateDesignFile&&(0,s.qx)();default:(0,i.xb)(r)}}function L({role:e,file:r,folder:n=null,isInDraftsFolder:i=!1}){if(e.level!==h.e6.VIEWER&&e.level!==h.e6.VIEW_PROTOTYPES)return null;let a=(0,c.Pn)(r);switch(e.level){case h.e6.VIEWER:{if(r.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:a});if(r.link_access===u.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_edit_org_member_with_link",{noun:a});if(e.pending)break;let s=!!n&&!n.is_invite_only&&!n.is_view_only;return R(!!e.teamLevel&&!i&&e.teamLevel>h.e6.VIEWER&&(!n||s),!!e.folderLevel&&e.folderLevel>h.e6.VIEWER,!!e.repoLevel&&e.repoLevel>h.e6.VIEWER)}case h.e6.VIEW_PROTOTYPES:{if(r.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_see_and_edit_anybody_with_the_link_noun",{noun:a});if(r.link_access===u.PQ.ORG_EDIT&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_see_and_edit_allow_editing_by_org_members_with_link",{noun:a});if(e.pending)break;let i=n&&!n.is_invite_only&&!n.is_view_only;if(e.teamLevel&&e.teamLevel>h.e6.VIEWER&&(!n||i))return(0,o.t)("permissions.can_still_see_and_edit_permission_team_file_is_in",{noun:a});if(e.folderLevel&&e.folderLevel>h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_team_project_is_in",{noun:a});if(e.repoLevel&&e.repoLevel>h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_and_edit_permission_main_file",{noun:a});if(r.link_access===u.PQ.VIEW)return(0,o.t)("permissions.can_still_edit_allow_view_anybody_with_link",{noun:a});if(r.link_access===u.PQ.ORG_VIEW&&e.org_user&&e.org_user.permission!==u._D.GUEST)return(0,o.t)("permissions.can_still_edit_allow_edit_anybody_with_link",{noun:a});if(e.teamLevel&&e.teamLevel>=h.e6.VIEWER&&(!n||i))return(0,o.t)("permissions.can_still_see_permission_team_file_is_on",{noun:a});if(e.folderLevel&&e.folderLevel>=h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_permission_project_file_is_on",{noun:a});if(e.repoLevel&&e.repoLevel>=h.e6.VIEWER)return(0,o.t)("permissions.can_still_see_edit_permission_on_main_file",{noun:a})}}return null}function O({file:e,seenState:r,folder:n=null}){let i=(0,c.Pn)(e);if(e.link_access===u.PQ.EDIT)return(0,o.t)("permissions.can_still_edit_anybody_with_the_link",{noun:i});let a=!!n&&!n.is_invite_only&&!n.is_view_only;return R(!!r.teamLevel&&r.teamLevel>h.e6.VIEWER&&(!n||a),!!r.folderLevel&&r.folderLevel>h.e6.VIEWER,!!r.repoLevel&&r.repoLevel>h.e6.VIEWER)}function R(e,r,n){return e?(0,o.t)("permissions.can_still_edit_team_permissions"):r?(0,o.t)("permissions.can_still_edit_folder_permissions"):n?(0,o.t)("permissions.can_still_edit_edit_permissions"):null}async function P(e,r){let n=await p.M4.fetch(m.OFA.Query({id:e}));return!!n.project&&N(n.project,r)}},428467:(e,r,n)=>{n.d(r,{canAdminOrg:()=>z,canAdminTeam:()=>U,canEditFolder:()=>k,canEditTeam:()=>x,canEditTeamRole:()=>K,canGuestOrg:()=>$,canManageNonSecretOrgTeam:()=>Z,canMemberOrg:()=>Y,canOwnFolder:()=>M,canOwnTeam:()=>B,canUploadAndEditVideo:()=>en,canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED:()=>ei,canViewFolder_DEPRECATED:()=>D,canViewTeam:()=>F,getExplicitRoleForUserAndFile:()=>N,getPermissionsState:()=>b,getPermissionsStateMemoized:()=>v,getReadOnlyOverrideMessageForFolder:()=>er,getResourceTeamId:()=>I,getRolesForResource:()=>L,hasActiveEduTeam:()=>J,hasAdminRoleAccessOnTeam:()=>H,hasEditorRoleAccessOnTeam:()=>G,hasViewerRoleAccessOnTeam:()=>V,isFigJamDisabledForFolder:()=>et,isFigJamDisabledForOrg:()=>ee,isFileFigjamDisabled:()=>Q,isOrgUserExternallyRestrictedFromState:()=>X,isResourceOwner:()=>T,userIsAMemberOfAnOrg:()=>q});var i=n(786928),a=n(38329),o=n(966712),s=n(886653),l=n(650322),c=n(939863),d=n(875847),u=n(99506),m=n(596607),p=n(243987),h=n(140047),_=n(66037),g=n(668860),f=n(147206);function E(e,r,n,i,a,o,s,l,c,d,u,m,p,h,_){return{currentUserOrgId:e,user:r,fileByKey:n,repos:i,folders:a,teams:o,roles:s,orgById:l,orgUsersByOrgId:c,teamUserByTeamId:d,userEduGracePeriods:u,licenseGroups:m,orgTeams:p,openFile:h,currentTeamId:_}}let y=(0,s.xx)(E);function b(e){return E(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function v(e){return y(e.currentUserOrgId,e.user,e.fileByKey,e.repos,e.folders,e.teams,e.roles,e.orgById,e.orgUsersByOrgId,e.teamUserByTeamId,e.userEduGracePeriods,e.licenseGroups,e.orgTeams,e.openFile,e.currentTeamId)}function I(e,r){switch(e.resource_type){case u.vt.FILE:let n=r.fileByKey[e.resource_id_or_key];return n&&n.team_id;case u.vt.FILE_REPO:let i=r.repos[e.resource_id_or_key],a=r.folders[i?.folder_id];return a?.team_id??null;case u.vt.FOLDER:let o=r.folders[e.resource_id_or_key];return o?.team_id??null;case u.vt.TEAM:return e.resource_id_or_key}}function T(e,r,n,i){let a=function(e,r){switch(r){case u.vt.FILE:return e.byFileKey;case u.vt.FILE_REPO:return e.byRepoId;case u.vt.FOLDER:return e.byFolderId;case u.vt.TEAM:return e.byTeamId}}(i,n)[r];return!!a&&e in a&&a[e].level===g.e6.OWNER}function S(e,r){for(let n of e)if(n.level>=r)return!0;return!1}function w(e,r){let n=r.user?.id,i=r.roles;return e in i.byTeamId&&n&&n in i.byTeamId[e]?[i.byTeamId[e][n]]:[]}function A(e,r){let n=r.user&&r.user.id,i=[],a=r.roles;e in a.byFolderId&&n&&n in a.byFolderId[e]&&i.push(a.byFolderId[e][n]);let o=r.folders[e];return o&&o.team_id&&!o.is_invite_only&&(i=i.concat(w(o.team_id,r))),i}function C(e,r){let n=r.user&&r.user.id,i=r.roles,a=[];e in i.byRepoId&&n&&n in i.byRepoId[e]&&a.push(i.byRepoId[e][n]);let o=r.repos[e];return o&&(a=[...a,...A(o.folder_id,r)]),a}function N(e,r){let n=r.user&&r.user.id,i=r.roles;return e in i.byFileKey&&n&&n in i.byFileKey[e]?i.byFileKey[e][n]:null}function L(e,r,n){switch(e){case u.vt.FILE:return function(e,r){let n=[],i=N(e,r);null!==i&&n.push(i);let a=r.fileByKey[e];return a&&a.folder_id&&(n=n.concat(A(a.folder_id,r))),a&&a.file_repo_id&&(n=[...n,...C(a.file_repo_id,r)]),n}(r,n);case u.vt.FILE_REPO:return C(r,n);case u.vt.FOLDER:return A(r,n);case u.vt.TEAM:return w(r,n)}}function O(e,r,n){let i=(0,h._)(e,n);if(!i)return!1;let a=n.user?.id,s=i.org_id,l=(0,o.kc)().sc_open_team_deprecation,c=i.sharing_audience_control;if(s){let o=!l&&r<=g.e6.EDITOR&&Y(s,n)&&i.org_access===u.bU.PUBLIC&&i.default_permission===u.sC.EDIT,d=S(w(e,n),r),m=r<=g.e6.ADMIN&&(d||Z(i,n,a)),p=!l&&r<=g.e6.VIEWER&&Y(s,n)&&i.org_access===u.bU.PUBLIC,h=Y(s,n)&&(r<=g.e6.VIEWER&&c===u.PQ.ORG_VIEW||r<=g.e6.EDITOR&&c===u.PQ.ORG_EDIT);return(m||p||d||o||h)&&$(s,n)}return R(e,r,n)}function R(e,r,n){return S(w(e,n),r)&&!function(e,r,n){if(n.user&&!(0,l.cn)(n.user))return!1;let i=(0,h._)(e,n);if(!i)return!1;let a=!!n.user&&(0,l.GU)(n.userEduGracePeriods,(0,l.cn)(n.user),i.id,i.student_team).showAccessRestricted;return r>g.e6.VIEWER&&a}(e,r,n)}function P(e,r,n){let i;let a=n.user&&n.user.id,s=n.folders[e];if(!a||!s)return!1;let l=(0,d.oq)(s.id,n);if(l&&!$(l,n))return!1;let c=s.team_id&&n.teams[s.team_id],m=(0,o.kc)().sc_open_team_deprecation,p=s.sharing_audience_control;if(!m&&l&&Y(l,n)&&r<=g.e6.VIEWER&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only||!m&&l&&Y(l,n)&&r<=g.e6.EDITOR&&c&&c.org_access===u.bU.PUBLIC&&!s.is_invite_only&&!s.is_view_only&&c.default_permission===u.sC.EDIT||l&&Y(l,n)&&(r<=g.e6.EDITOR&&p===u.PQ.ORG_EDIT||r<=g.e6.VIEWER&&p===u.PQ.ORG_VIEW))return!0;let h=A(e,n);return(h.forEach(e=>{e.resource_type===u.vt.FOLDER&&(i=e)}),!s.team_id||s.is_invite_only||s.is_view_only&&r>=g.e6.EDITOR)?!!i&&i.level>=r:S(h,r)}function D(e,r){return P(e,g.e6.VIEWER,r)}function k(e,r){return P(e,g.e6.EDITOR,r)}function M(e,r){return P(e,g.e6.OWNER,r)}function F(e,r){return O(e,g.e6.VIEWER,r)}function x(e,r){return O(e,g.e6.EDITOR,r)}function U(e,r){return O(e,g.e6.ADMIN,r)}function B(e,r){return O(e,g.e6.OWNER,r)}function V(e,r){return R(e,g.e6.VIEWER,r)}function G(e,r){return R(e,g.e6.EDITOR,r)}function H(e,r){return R(e,g.e6.ADMIN,r)}function K(e,r){return e.level!==g.e6.OWNER&&(e.level===g.e6.ADMIN?U(e.resource_id_or_key,r):x(e.resource_id_or_key,r))}function W(e,r,n){return n?e.orgUsersByOrgId[r]?.[n]??(0,i.J)(e,"org_user",r):null}function $(e,r){let n=r.user;if(!e||!n)return!1;let a=r.orgById[e]??(0,i.J)(r,"org",e);return j(W(r,e,n.id),a,_.jh.GUEST)}function Y(e,r,n){if(!e)return!1;n=n||r.user?.id;let a=r.orgById[e]??(0,i.J)(r,"org",e);return j(W(r,e,n),a,_.jh.MEMBER)}function z(e,r,n){if(!e)return!1;let a=r.orgById[e]??(0,i.J)(r,"org",e);return n=n||r.user?.id,j(W(r,e,n),a,_.jh.ADMIN)}function j(e,r,n){return!!r&&!!e&&(0,f.Ay)(e.permission)>=n}function q(e,r){return(0,m.x9)(e.orgUsersByOrgId,r).some(n=>Y(n.org_id,e,r))}function Z(e,r,n){return e.org_access!==u.bU.SECRET&&function(e,r,n){if(!(n=n||r.user?.id)||!e||!r.currentUserOrgId)return!1;let a=r.currentUserOrgId&&r.user&&r.orgUsersByOrgId[r.currentUserOrgId]?r.orgUsersByOrgId[r.currentUserOrgId][n]:null;null===a&&(a=(0,i.J)(r,"org_user",r.currentUserOrgId));let o=(0,h._)(e,r);if(!o||!a||r.currentUserOrgId!==o.org_id)return!1;if(H(e,r))return!0;let s=z(r.currentUserOrgId,r,n);return o.org_access!==u.bU.SECRET&&(s||!!(o.workspace_id&&function(e,r,n){n=n||r.user?.id;let i=r.currentUserOrgId;return!!(e&&n&&i&&r.orgUsersByOrgId?.[i]?.[n].workspace_users?.find(r=>r.permission===u.bp.ADMIN&&r.workspace_id===e))}(o.workspace_id,r,n)))}(e.id,r,n)}function X(e){return(0,f.R$)(e.user,e.currentUserOrgId)}function J(e,r){return!!r&&null!=Object.entries(e.teamUserByTeamId??{}).find(([n,i])=>{let a=e.teams[n];return!!a?.student_team_at&&null!=i[r]})}function Q(e,r){return"whiteboard"===e.editorType&&!!e.parentOrgId&&!!r.orgById[e.parentOrgId]?.figjam_disabled_at}function ee(e,r){return!!e&&!!r.orgById[e]?.figjam_disabled_at}function et(e,r){return ee((0,d.oq)(e.id,r)||null,r)}function er(e,r){if(e.level!==g.e6.VIEWER&&e.level!==g.e6.VIEW_PROTOTYPES)return null;let n=r.folders[e.resource_id_or_key];if(!n)return null;let i=e.user_id&&n.team_id&&r.roles.byTeamId[n.team_id]&&r.roles.byTeamId[n.team_id][e.user_id],a=!n.is_invite_only&&!n.is_view_only;return i&&i.level>g.e6.VIEWER&&a?(0,c.t)("permissions.can_still_edit_team_project_is_in"):null}function en(e,r){return!!e&&!!e.canEdit&&(e.team?(0,p.w5)(e.teamId?r.teams[e.teamId]:void 0):!!e.parentOrgId)}function ei(){if(void 0===a.D)return!1;let e=a.D.getState(),r=b(e);return en(e.openFile,r)}},556261:(e,r,n)=>{n.d(r,{$g:()=>B,DC:()=>x,FR:()=>W,NN:()=>F,NP:()=>D,Tn:()=>K,UP:()=>U,b_:()=>k,bv:()=>G,dh:()=>P,gI:()=>H,hk:()=>M,nW:()=>$,rC:()=>O,rs:()=>R,tJ:()=>L,u3:()=>V,wb:()=>Y,wy:()=>C,yN:()=>N});var i=n(411855),a=n(188507),o=n(140593),s=n(821910),l=n(966664),c=n(776250),d=n(418956),u=n(752553),m=n(391388),p=n(742808),h=n(776621),_=n(647899),g=n(672517),f=n(694687),E=n(99506),y=n(596607),b=n(643067),v=n(243987),I=n(984968);n(36816);var T=n(88407);let S=new Map;function w(e,r,n={}){let i=[e,n.component,n.attribute,n.model].join("__________");S.has(i)||(c.az.trackDefinedEvent(e,r),S.set(i,!0))}function A(e,r,n){if(!n){window.__jestConfig__?.rolloutFlags&&(n="cutover");let i=(0,_.gP)(e);(n=i?.get(r||"group_default",void 0))||(n="passthrough")}return n}function C(e){let{name:r}=(0,g.j6)(),n=A("tou_current_plan_user_migrator_config",e.migrationGroup,e.phase),c=i.useRef(!1),u="shadowread"===n||"cutover"===n,h=(0,a.d4)(e=>{let r=e.user?.id;return r?e.teamUserByTeamId?.[I.ZT(e)]?.[r]??null:null}),_=(0,a.d4)(e=>(0,y.xw)(e)),f=(0,d.md)((0,T.gq)(u))??m.Qw.loaded(null),E="loaded"===f.status?f.data:null;(0,p.I)(u&&"loaded"===f.status,n=>{w("plans.current_plan_user_lg_load_timing",{model:"planUser",type:E?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"})});let b=e.legacy(h??null,_??null);if("passthrough"===n)return b;let v=e.migrated(E);switch(("shadowread"===n||"cutover"===n)&&!c.current&&((0,l.Vq)(h)||(0,l.Vq)(_))&&"loaded"===f.status&&!(0,s.c2)(b,v)&&(w("plans.current_plan_user_view_shadow_error",{type:E?.key.type??"",component:e.component,attribute:e.attribute,phase:n,migrationGroup:e.migrationGroup,legacyValue:JSON.stringify(b),migratedValue:JSON.stringify(v),trackingContext:r},{component:e.component,attribute:e.attribute,model:"planUser"}),c.current=!0),n){case"shadowread":return b;case"cutover":return v;default:(0,o.xb)(n)}}function N(e){let{name:r}=(0,g.j6)(),n=A("tou_current_user_plan_migrator_config",e.migrationGroup,e.phase),a=i.useRef(!1),c="shadowread"===n||"cutover"===n,u=(0,I.ol)(),h=(0,f.sZ)(),_=(0,d.md)((0,T.rQ)(c))??m.Qw.loaded(null),E=(0,d.md)((0,T.Oh)(c))??m.Qw.loaded(null),y="loaded"===_.status?_.data:null,b="loaded"===E.status?E.data:null;(0,p.I)(c&&"loaded"===_.status,n=>{w("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:y?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"planPublicInfo"})}),(0,p.I)(c&&"loaded"===E.status,n=>{w("plans.current_plan_lg_load_timing",{model:"plan",type:b?.key.type??"",duration:n,component:e.component,attribute:e.attribute,migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute,model:"plan"})});let v=e.legacy(u??null,h??null);if("passthrough"===n)return v;let S=e.migrated(y,b);switch(("shadowread"===n||"cutover"===n)&&!a.current&&((0,l.Vq)(u)||(0,l.Vq)(h))&&"loaded"===_.status&&!(0,s.c2)(v,S)&&(w("plans.current_plan_view_shadow_error",{type:y?.key.type??"",component:e.component,attribute:e.attribute,phase:n,legacyValue:JSON.stringify(v),migratedValue:JSON.stringify(S),migrationGroup:e.migrationGroup,trackingContext:r},{component:e.component,attribute:e.attribute}),a.current=!0),n){case"shadowread":return v;case"cutover":return S;default:(0,o.xb)(n)}}function L(e){let{name:r}=(0,g.j6)(),n=(0,d.md)((0,T.Oh)(!0));return((0,p.I)("loaded"===n.status,e=>{c.az.trackDefinedEvent("plans.current_plan_lg_load_timing",{model:"plan",type:n.data?.key.type??"",duration:e,component:"",attribute:"",trackingContext:r})}),e?.unwrapResult)?"loaded"===n.status?n.data:null:n}function O({reportErrorsToTeam:e}){let r=L(),[n]=(0,u.mI)(r);if("loaded"!==n.status){let r=Error("disabled"===n.status?"Plan fetching disabled":"Error fetching plan");throw(0,h.$D)(e,r),r}let i=n.data;if(!i){let r=Error("No Plan found");throw(0,h.$D)(e,r),r}return i}function R(e){let{name:r}=(0,g.j6)(),n=(0,d.md)((0,T.rQ)(!0));return((0,p.I)("loaded"===n.status,e=>{w("plans.current_plan_lg_load_timing",{model:"planPublicInfo",type:n.data?.key.type??"",duration:e,component:"",attribute:"",trackingContext:r})}),e?.unwrapResult)?"loaded"===n.status?n.data:null:n}function P(e){return N({...e,attribute:"planName",legacy:(e,r)=>r?.name||e?.name,migrated:(e,r)=>r?.name})}function D(e){return N({...e,attribute:"teamPlanId",legacy:(e,r)=>e?.org_id?void 0:e?.id,migrated:e=>{if(e?.key.type===E.OL.TEAM)return e?.key.parentId??void 0}})}function k(e){return N({...e,attribute:"orgId",legacy:(e,r)=>r?.id,migrated:e=>{if(e?.key.type===E.OL.ORG)return e?.key.parentId??void 0}})}function M(e){return N({...e,attribute:"planParentId",legacy:(e,r)=>r?.id??e?.id,migrated:e=>e?.key.parentId??void 0})}function F(e){return C({...e,attribute:"currentOrgUserUserId",legacy:(e,r)=>r?.user_id,migrated:e=>{if(e?.key.type===E.h4.ORG_USER)return e?.userId??void 0}})}function x(e){return C({...e,attribute:"isDevModeUserFull",legacy:(e,r)=>r?.dev_mode_paid_status===E.El.FULL,migrated:e=>e?.devModePaidStatus===E.dQ.FULL})}function U(e){return N({...e,attribute:"planType",legacy:(e,r)=>r?E.OL.ORG:e?E.OL.TEAM:void 0,migrated:e=>e?.key.type})}function B(e){return N({...e,attribute:"hasPlan",legacy:(e,r)=>!!e&&!r,migrated:e=>e?.key.type===E.OL.TEAM})}function V(e){return N({...e,attribute:"hasPlan",legacy:(e,r)=>!!r,migrated:e=>e?.key.type===E.OL.ORG})}function G(e){let r=U(e);return N({...e,attribute:"hasPlanUser",legacy:(e,n)=>{switch(r){case E.OL.ORG:return!!n;case E.OL.TEAM:return!!e;default:return!1}},migrated:e=>!!r&&!!e})}function H(e){return C({...e,attribute:"isOrgAdmin",legacy:(e,r)=>r?.permission===E._D.ADMIN,migrated:e=>e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.ADMIN})}function K(e){return C({...e,attribute:"isOrgGuest",legacy:(e,r)=>r?.permission===E._D.GUEST,migrated:e=>e?.key.type===E.h4.ORG_USER&&e?.permission===E.Xn.GUEST})}function W(e){return N({...e,attribute:"isProTeam",legacy:e=>(0,v.w5)(e)&&!e?.org_id,migrated:e=>!!e&&[E.Ag.PRO,E.Ag.STUDENT].includes(e.tier)})}function $(e){return N({...e,attribute:"isStudentTeam",legacy:e=>!!e?.student_team,migrated:e=>e?.tier===E.Ag.STUDENT})}function Y(e){return N({...e,attribute:"isEnterprise",legacy:(e,r)=>(0,b.kA)(r),migrated:e=>e?.tier===E.Ag.ENTERPRISE})}},344339:(e,r,n)=>{n.d(r,{LC:()=>l,OL:()=>a.OL,i5:()=>s,s$:()=>o});var i=n(330654),a=n(99506),o=(e=>(e.DISABLE_FIGJAM="disable_figjam",e.DISABLE_WORKSHOP="disable_workshop",e.VOICE="voice",e.DISABLE_AI_FEATURES="disable_ai_features",e))(o||{}),s=(e=>(e.ELIGIBLE="eligible",e.UPSELL="upsell",e.INELIGIBLE="ineligible",e))(s||{}),l=(e=>(e.ENABLED="enabled",e.DISABLED="disabled",e))(l||{});let c=i.object({supports:i.nativeEnum(s),enabled:i.nativeEnum(l)});i.object({disable_figjam:c,voice:c,disable_workshop:c,disable_ai_features:c})},846724:(e,r,n)=>{n.d(r,{Ef:()=>h,HT:()=>m,RB:()=>p,T4:()=>l});var i=n(140593);n(133537);var a=n(720647),o=n(99506),s=n(344339);function l(e,r){if(e){if(r===a.G_.DESIGN)return e.designPaidStatus;if(r===a.G_.FIGJAM)return e.whiteboardPaidStatus;(0,i.xb)(r,"Unknown license type")}}let c={[s.s$.VOICE]:{environments:{gov:s.i5.INELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.ELIGIBLE,[o.Ag.STUDENT]:s.i5.ELIGIBLE,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_WORKSHOP]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.UPSELL,[o.Ag.STUDENT]:s.i5.UPSELL,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_FIGJAM]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.UPSELL,[o.Ag.STUDENT]:s.i5.UPSELL,[o.Ag.STARTER]:s.i5.UPSELL}},[s.s$.DISABLE_AI_FEATURES]:{environments:{gov:s.i5.ELIGIBLE},tiers:{[o.Ag.ORG]:s.i5.ELIGIBLE,[o.Ag.ENTERPRISE]:s.i5.ELIGIBLE,[o.Ag.PRO]:s.i5.ELIGIBLE,[o.Ag.STUDENT]:s.i5.ELIGIBLE,[o.Ag.STARTER]:s.i5.ELIGIBLE}}};function d(e,r,n=window.INITIAL_OPTIONS.cluster_name){return"gov"===n&&c[r].environments.gov?c[r].environments.gov:e&&c[r]?.tiers[e.tier]?c[r].tiers[e.tier]:s.i5.INELIGIBLE}function u(e,r,n=window.INITIAL_OPTIONS.cluster_name){if(d(e,r,n)===s.i5.INELIGIBLE||!e)return s.LC.DISABLED;let a=d(e,r,n);switch(r){case s.s$.VOICE:if(a===s.i5.ELIGIBLE)return e.voiceEnabled?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;case s.s$.DISABLE_FIGJAM:if(a===s.i5.ELIGIBLE)return e.figjamDisabledAt?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;case s.s$.DISABLE_WORKSHOP:if(a===s.i5.ELIGIBLE)return e.workshopEnabled?s.LC.DISABLED:s.LC.ENABLED;return s.LC.DISABLED;case s.s$.DISABLE_AI_FEATURES:if(a===s.i5.ELIGIBLE)return e.aiFeaturesEnabled?s.LC.ENABLED:s.LC.DISABLED;return s.LC.DISABLED;default:(0,i.xb)(r,"Unknown plan feature")}}function m(e){return{...e,voice:{supports:d(e,s.s$.VOICE),enabled:u(e,s.s$.VOICE)},disable_figjam:{supports:d(e,s.s$.DISABLE_FIGJAM),enabled:u(e,s.s$.DISABLE_FIGJAM)},disable_workshop:{supports:d(e,s.s$.DISABLE_WORKSHOP),enabled:u(e,s.s$.DISABLE_WORKSHOP)},disable_ai_features:{supports:d(e,s.s$.DISABLE_AI_FEATURES),enabled:u(e,s.s$.DISABLE_AI_FEATURES)}}}function p(e,r){switch(e){case o.OL.TEAM:return r.team;case o.OL.ORG:return r.org;default:(0,i.xb)(e)}}function h(e,r){return{...p(e,r),planType:e}}},960628:(e,r,n)=>{let i;n.d(r,{$y:()=>Z,BT:()=>z,B_:()=>eI,Bs:()=>Q,G1:()=>el,H4:()=>eT,I2:()=>M,IM:()=>ea,It:()=>eR,KB:()=>D,LL:()=>C,ME:()=>ef,Mw:()=>K,OD:()=>em,Q4:()=>U,Ql:()=>V,Qx:()=>eo,Rp:()=>x,Sf:()=>R,Sx:()=>en,Ty:()=>k,VM:()=>B,Vb:()=>ee,W5:()=>F,Xx:()=>L,_C:()=>X,b_:()=>W,cI:()=>O,d1:()=>i,dG:()=>eO,dM:()=>et,f$:()=>eu,f2:()=>er,fS:()=>eL,fd:()=>Y,hY:()=>ev,i1:()=>q,iP:()=>$,jG:()=>eN,jS:()=>G,n4:()=>eg,nf:()=>J,o5:()=>ed,oZ:()=>es,po:()=>P,q$:()=>j,qC:()=>eD,sd:()=>ei,wk:()=>N,xi:()=>A});var a=n(838516),o=n(268853),s=n(922827),l=n(617691),c=n(298455),d=n(776621),u=n(910620);let m=[],p=[],h=[],_=[],g=[],f=[],E=[],y=[],b=[],v=[],I=[],T=[],S=null,w=new class{constructor(){this.task=null,this.eventByGuid=new Map,this.styleEventByGuid=new Map,this.nodeEventByGuid=new Map,this.timeOutMs=100,this.flush=()=>{let e=[];for(let r of this.eventByGuid.values())if("NONE"!==r.nodeType)for(let n of r.events)e.push(this.injectTypeIntoEvent(r,n));for(let r of g)r(e);let r=[];for(let e of this.styleEventByGuid.values())if("NONE"!==e.nodeType)for(let n of e.events)r.push(n);for(let e of f)e(r);let n=[];for(let e of this.nodeEventByGuid.values())if("NONE"!==e.nodeType)for(let r of e.events)n.push({...r,nodeType:e.nodeType});for(let e of E)e(n);this.eventByGuid.clear(),this.styleEventByGuid.clear(),this.nodeEventByGuid.clear(),this.task=null}}onEventFired(e){null==this.task&&(this.task=scheduler.postTask(this.flush,{delay:this.timeOutMs,priority:"user-visible"}));let r=this.eventByGuid.get(e.id)??{nodeType:this.publicNodeTypeFromEvent(e),events:[]};if(!r)return;"NONE"===r.nodeType&&(r.nodeType=this.publicNodeTypeFromEvent(e));let n=r.events.find(r=>r.type===e.type&&r.origin===e.origin);if(n)for(let r of e.properties)n.properties.add(r);else{let n=(0,c.UN)().get(e.id);n&&(e.type===s.iIc.STYLE_PROPERTY_CHANGE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_DELETE?n.styleKeyForPublish&&r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),styleKey:(0,l.nM)({key:n.styleKeyForPublish,version:n.styleVersionHash})}):r.events.push({id:e.id,origin:e.origin,type:e.type,properties:new Set(e.properties),devFriendlyId:(0,c.UN)().developerFriendlyIdFromGuid(e.id),oldContainingCanvas:e.oldContainingCanvas}))}this.eventByGuid.set(e.id,r);let i=(0,c.UN)().get(e.id);if(i){if(i.styleKeyForPublish){let n=r.events.filter(e=>e.type===s.iIc.STYLE_DELETE||e.type===s.iIc.STYLE_CREATE||e.type===s.iIc.STYLE_PROPERTY_CHANGE);this.styleEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}else{let n=r.events.filter(e=>e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE||e.type===s.iIc.DELETE).map(e=>{let r="";return e.type===s.iIc.CREATE||e.type===s.iIc.PROPERTY_CHANGE?r=i.containingCanvas||"":e.type===s.iIc.DELETE&&(r=e.oldContainingCanvas?.toString()||""),""===r&&(0,d.$D)(o.e.EXTENSIBILITY,Error("Containing canvas for nodechange event is empty")),{...e,containingCanvas:r}});this.nodeEventByGuid.set(e.id,{nodeType:this.publicNodeTypeFromEvent(e),events:n})}}}publicNodeTypeFromEvent(e){let r=(0,c.UN)().get(e.id);return r&&r?.type!=="NONE"?(0,u.w)(r):"NONE"}injectTypeIntoEvent(e,r){return r.type===s.iIc.CREATE||r.type===s.iIc.DELETE||r.type===s.iIc.PROPERTY_CHANGE?{...r,nodeType:e.nodeType}:r}};function A(){i={selectionChange(e){for(let r of m)e?r.boxSelection():r.normal()},boxSelectionEnded(){for(let e of m)e.boxSelection.flush()},currentPageChange(){for(let e of p)e()},timerChange(e){for(let r of h)r(e)},documentChange(e){w.onEventFired(e)},codegenPreferencesChange(e){for(let r of y)r(e)},slidesViewChange(e){for(let r of b)r({view:e})},stackInvariantsEnforced(e){eP?.(e)},pluginPageLoaded(e){for(let r of v)r(e)},pluginAccessibleNodeIds(){let e=new Set;for(let r of I)r().forEach(r=>e.add(r));return Array.from(e)},pluginAccessiblePages(){let e=new Set;for(let r of T)r().forEach(r=>e.add(r));return Array.from(e)}}}function C(e){m.push({normal:e,boxSelection:(0,a.s)(e,500)})}function N(e){m=m.filter(r=>r.normal!==e||(r.boxSelection.cancel(),!1))}function L(e){p.push(e)}function O(e){p=p.filter(r=>r!==e)}function R(e){h.push(e)}function P(e){h=h.filter(r=>r!==e)}function D(e){_.push(e)}function k(e){_=_.filter(r=>r!==e)}function M(e){for(let r of _)if(!1===r(e))return!1;return!0}function F(e){v.push(e)}function x(e){v=v.filter(r=>r!==e)}function U(e){I.push(e)}function B(e){I=I.filter(r=>r!==e)}function V(e){T.push(e)}function G(e){T=T.filter(r=>r!==e)}function H(){g.length||f.length||E.length?s.NfO.setIsDocumentChangeCallbackRegistered(!0):s.NfO.setIsDocumentChangeCallbackRegistered(!1)}function K(e){g.push(e),H()}function W(e){g=g.filter(r=>r!==e),H()}function $(e){f.push(e),H()}function Y(e){f=f.filter(r=>r!==e),H()}function z(e){E.push(e),H()}function j(e){E=E.filter(r=>r!==e),H()}function q(e){y.push(e)}function Z(e){y=y.filter(r=>r!==e)}function X(e){b.push(e),H()}function J(e){b=b.filter(r=>r!==e),H()}let{set:Q,remove:ee,has:et,runOrTimeout:er}=ek(),{set:en,remove:ei,has:ea,run:eo}=ek(),{set:es,remove:el,has:ec,run:ed,reset:eu}=ek(),{set:em,remove:ep,has:eh,run:e_,reset:eg}=ek(),{set:ef,remove:eE,has:ey,run:eb,reset:ev}=ek(),{set:eI,remove:eT,has:eS,run:ew,reset:eA,runOrTimeout:eC}=ek();function eN(e){S=e}function eL(){return!!S}function eO(){S=null}async function eR(){return!S||await S()}let eP=null;function eD(e){return eP=e,()=>eP=null}function ek(){let e;let r=new Promise(r=>{e=r}),n=null,i=()=>{r=new Promise(r=>{e=r}),n=null},a=async(...e)=>{let n=await r;return await n(...e)};return{set:r=>{n=r,e(r)},remove:e=>{e===n&&i()},has:()=>!!n,run:a,runOrTimeout:async(e,...r)=>{let n=!1,i=new Promise(r=>{setTimeout(()=>{n=!0,r()},e)}),o=await Promise.race([a(...r),i]);return n?{didRun:!1}:{didRun:!0,returnValue:o}},reset:i}}},215822:(e,r,n)=>{n.d(r,{$H:()=>eQ,$u:()=>tg,AG:()=>ti,Ar:()=>eS,Bw:()=>e5,CA:()=>ed,CB:()=>eN,DM:()=>t_,EK:()=>er,EY:()=>ex,GX:()=>J,Gc:()=>e1,JT:()=>e2,K$:()=>ee,L1:()=>ez,L8:()=>e3,LW:()=>tm,M5:()=>e7,MB:()=>eg,MH:()=>e0,Mi:()=>e6,Ms:()=>ep,NW:()=>tn,Oe:()=>ef,Pl:()=>ei,Q4:()=>eF,Qt:()=>eP,Qx:()=>eA,Rd:()=>eR,Rt:()=>ek,Ru:()=>tr,SW:()=>eX,T:()=>et,Th:()=>th,Tk:()=>eL,Tz:()=>el,UH:()=>te,VQ:()=>tf,W4:()=>tl,WC:()=>e4,Wg:()=>es,YG:()=>tc,YQ:()=>tE,ZB:()=>eJ,ZT:()=>eU,_H:()=>e9,_V:()=>tu,_w:()=>eD,c2:()=>q,fR:()=>e8,gv:()=>Q,i8:()=>eZ,iz:()=>eo,ky:()=>eM,lT:()=>eb,mI:()=>ej,mm:()=>eh,mx:()=>tp,my:()=>eO,nW:()=>eH,nf:()=>eq,oD:()=>eG,ou:()=>eW,pk:()=>tt,qH:()=>eu,t3:()=>e_,tH:()=>eY,u0:()=>e$,uF:()=>ew,vj:()=>eV,wf:()=>eB,xC:()=>ta}),n(661743);var i=n(188507),a=n(561546),o=n(140593),s=n(268853),l=n(157663),c=n(133537),d=n(38329),u=n(966712),m=n(563706),p=n(563042),h=n(776621),_=n(553716),g=n(96328),f=n(30637),E=n(27087),y=n(939863),b=n(392592),v=n(837324),I=n(466636),T=n(762194),S=n(545941),w=n(290796),A=n(782501),C=n(356390);n(848661);var N=n(560718),L=n(99506),O=n(147206),R=n(285334),P=n(23001),D=n(239671),k=n(813408),M=n(178787),F=n(376485),x=n(591463),U=n(13517),B=n(722416),V=n(375827),G=n(501256),H=n(507956),K=n(697551),W=n(258237),$=n(604978),Y=n(441088),z=n(410225),j=n(4564);async function q(e,{ignoreMissingEditorType:r,resourceType:n,isPublishing:i}){let a=await e_(e,{resourceType:n});if(r&&a.error?.text===ea)return a.manifest;if(a.error)throw Error((0,F.am)(a.error));return a.manifest}function Z({parameters:e,parameterOnly:r},n){if(e&&function(e,r){if(!e.length)throw Error(`Expected "${r}.parameters" to have non-empty parameter list.`);let n=new Set;e.forEach(e=>{if(n.has(e.key))throw Error(`Expected "${r}.parameters" to have unique keys, but got more than one parameter with key: "${e.key}"`);n.add(e.key)});let i=!1;for(let{key:r,optional:n}of e){if(i&&!n)throw Error(`Optional parameters must be listed last in the parameter list. ${r} not marked as optional.`);n&&(i=!0)}}(e,n),r&&!e)throw Error(`Expected parameters to be defined for "${n}" marked as parameterOnly.`)}let X={[D.nT.Design]:F.FW.FIGMA,[D.nT.DevHandoff]:F.FW.DEV,[D.nT.Whiteboard]:F.FW.FIGJAM,[D.nT.Slides]:F.FW.SLIDES,[D.nT.Sites]:F.FW.SITES,[D.nT.Cooper]:F.FW.FIGMA,[D.nT.Illustration]:F.FW.FIGMA};function J(e){return X[e]}function Q(e){switch(e){case F.FW.FIGMA:case F.FW.DEV:case F.FW.INSPECT:return L._Y.DESIGN;case F.FW.FIGJAM:return L._Y.WHITEBOARD;case F.FW.SLIDES:return L._Y.SLIDES;case F.FW.SITES:return L._Y.SITES;default:(0,o.xb)(e)}}function ee(){return(0,i.d4)(e=>"fullscreen"===e.selectedView.view?X[e.selectedView.editorType]:void 0)}function et(){let e=d.D.getState().selectedView;if("fullscreen"===e.view)return X[e.editorType]}function er(e,r){return Array.isArray(r)?r.includes(e):e===F.FW.FIGMA}F.FW.FIGMA,D.nT.Design,F.FW.DEV,D.nT.DevHandoff,F.FW.INSPECT,D.nT.DevHandoff,F.FW.FIGJAM,D.nT.Whiteboard,F.FW.SLIDES,D.nT.Slides,F.FW.SITES,D.nT.Sites;class en extends Error{constructor(e,r){super(e),this.message=e,this.manifest=r}}function ei(){return ea}let ea='Missing editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]';function eo(e){return e?e.includes(F.FW.FIGMA)&&e.includes(F.FW.FIGJAM)?F.HK.UNIVERSAL:e.includes(F.FW.FIGJAM)?F.HK.FIGJAM:e.includes(F.FW.FIGMA)&&(0,F.Pe)(e)?F.HK.FIGMA_AND_INSPECT:(0,F.Pe)(e)?F.HK.INSPECT:F.HK.FIGMA:F.HK.FIGMA}function es(e,r){switch(e){case F.HK.FIGJAM:return D.nT.Whiteboard;case F.HK.FIGMA:return D.nT.Design;case F.HK.FIGMA_AND_INSPECT:case F.HK.INSPECT:return D.nT.DevHandoff;case F.HK.UNIVERSAL:return r??(0,D.wN)((0,T.r)())}}function el(e){return e===L._Y.WHITEBOARD?D.nT.Whiteboard:D.nT.Design}function ec(e,r){let n=new Set(F.UX);return e.filter(e=>!n.has(e)||r?.has(e))}function ed(e){return F.Kd.some(r=>e.includes(r))}class eu{constructor(e,r){this.permissions=e,this.trustedPluginOrigin=r}static none(){return new eu([],void 0)}static forTest(e){return new eu(e||F.XS,void 0)}static forConsoleGlobal(){let e=[...F.pR];return(0,u.kc)().first_draft_debug&&e.push("firstdraft"),new eu(e,void 0)}static forFirstPartyPlugin(){return new eu(F.XS,void 0)}static forLocalPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for local plugin",{pluginID:e.manifest.id,requestedPermissions:r}),(0,u.kc)().plugins_internal_apis)return new eu(r,"*");let n=ec(r);return n.length<r.length&&(0,h.$D)(s.e.EXTENSIBILITY,Error("Untrusted local plugin denied internal api permissions")),new eu(n,void 0)}static forInstalledPlugin(e){let r=e.manifest.permissions||[];if((0,_.Lo)("ValidatedPluginPermissions","Validating permissions for installed plugin",{pluginID:e.plugin_id,requestedPermissions:r}),(0,R.eZ)(e.plugin_id))return new eu(ec(r,(0,R.xp)(e.plugin_id)),(0,R.HB)(e.plugin_id));let n=ec(r);return n.length<r.length&&(0,h.$D)(s.e.UNOWNED,Error("Untrusted installed plugin denied internal api permissions")),new eu(n,void 0)}}function em(e){try{return new URLPattern(e)}catch(e){return null}}function ep(e,r){let n=[],i=0;for(let[a,o]of r)n.push(e.substring(i,a)),i=o;return n.push(e.substring(i,e.length)),n.join("")}function eh(e,r,n){var i,a,o;let s,l,c,d,u;let m="widget"===n.resourceType||!!r.cachedContainsWidget;if("error"in r)l={type:F.ho.LOAD,text:r.error};else try{c=JSON.parse(r.manifest)}catch(e){l={type:F.ho.PARSE,text:e.message}}if("unknown"===n.resourceType){if(c)m=c.containsWidget;else if("manifest"in r)try{m=!!/containsWidget/.test(r.manifest)}catch{}}if(c){try{(0,B.MG)(c.editorType,x.ib,"manifest.editorType"),d=c.editorType}catch{}try{(0,B.MG)(c.capabilities,x.hb,"manifest.capabilities"),u=c.capabilities}catch{}}let p=(0,j.M)();if("manifest"in r&&p?.updateCachedContainsWidget({id:e,cachedContainsWidget:m}),!l)try{s=function(e,r){try{(0,B.MG)(e,"widget"===r.resourceType?x.Vf:x._O,"manifest")}catch(e){if(e instanceof Error)throw Error(function(e){let r="but got additional property",n=e.lastIndexOf(r);if(-1!==n){let i=e.substring(n+r.length).replace(/"/g,"").trim();return`Manifest has unexpected extra property: ${i}`}return e}(e.message));throw e}if("plugin"===r.resourceType){if(e.relaunchButtons){let r=new Set;e.relaunchButtons.forEach(n=>{if(r.has(n.command))throw new en(`Expected "manifest.relaunchButtons" to have unique commands, but got more than one button with command: "${n.command}"`,e);r.add(n.command)})}!function(e){if(Z(e,"manifest"),e.menu){if(e.parameters)throw Error("manifest.parameters should not be specified when menu items are defined");!function e(r){for(let n of r)(0,F.Av)(n)?Z(n,n.name):(0,F.xg)(n)&&e(n.menu)}(e.menu)}}(e)}if(!function(e){if(!("editorType"in e))throw new en(ea,e);if(e.editorType.some(e=>!F.Ye.includes(e))||e.editorType.length<1||e.editorType.length>F.Ye.length)throw Error('Invalid editorType in manifest.  Specify a combination of ["figma", "figjam", "dev"]')}(e),!function(e){if(e.permissions){let r=e.permissions.find(e=>!F.XS.includes(e));if(void 0!==r)throw new en(`Invalid permission specified: ${r}`,e)}}(e),!function(e){if(e.capabilities)for(let r of e.capabilities){if(F.Dk.includes(r)||function(e,r){throw new en(`Invalid capability specified: ${r}`,e)}(e,r),"panel"===r||"inspect"===r||"codegen"===r||"linkpreview"===r||"vscode"===r){if(!(0,F.Pe)(e.editorType))throw new en(`Capability "${r}" requires "editorType" to include "dev"`,e);if(e.containsWidget)throw new en(`Capability "${r}" is not supported for widgets`,e)}if((0,Y.T)()&&!e.capabilities.includes("vscode"))throw new en('Manifest must include "vscode" capability to run in Figma for VS Code Extension',e)}}(e),!function(e){if(!e.capabilities?.includes("codegen")){if(e.codegenLanguages)throw new en("codegenLanguages only supported for codegen plugins",e);if(e.codegenPreferences)throw new en("codegenPreferences only supported for codegen plugins",e);return}if(!e.codegenLanguages||0===e.codegenLanguages.length)throw new en("codegen plugins must define at least one language in codegenLanguages",e);if(!e.codegenPreferences)return;let r=e.codegenLanguages?.map(e=>e.value)??[],n=[],i=new Set;for(let a=0;a<e.codegenPreferences.length;a++){let o=e.codegenPreferences[a];for(let n of o.includedLanguages??[])if(!r.includes(n))throw new en(`Unknown language "${n}" in codegenPreferences[${a}].includedLanguages`,e);if((0,F.MP)(o)&&n.push(o),(0,F.Wt)(o)){if(i.has(o.propertyName))throw new en('codegenPreferences "action" itemType settings must have unique propertyName values',e);i.add(o.propertyName)}if((0,F.ZV)(o)){let r=0;if(o.options)for(let e of o.options)e.isDefault&&(r+=1);if(1!==r)throw new en('codegenPreferences itemType: "select" should have exactly one default option',e)}}if(n.length>1)throw new en('codegenPreferences should have at most one itemType: "unit"',e)}(e),"widget"===r.resourceType&&e.containsWidget&&(function(e){if(e.widgetApi&&e.editorType?.includes(F.FW.SLIDES))throw new en("Widgets are not supported in Figma Slides",e)}(e),"1.0.0"!==e.widgetApi))throw new en("Widgets must specify the 'widgetApi' manifest field. The latest version is '1.0.0'",e);if(e.networkAccess){let r=(0,U.pI)(e.networkAccess);if(!r.isValid)throw new en(r.validationErr,e)}if(e.relatedLinkDomains){if(!(0,F.Pe)(e.editorType))throw new en("'relatedLinkDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.relatedLinkDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new en(`Invalid domain '${r}' in 'relatedLinkDomains'. Domains must start with 'https:// or 'http://'`,e);if(!em(r))throw new en(`Invalid domain '${r}' in 'relatedLinkDomains'.`,e)}}if(e.devResourceDomains){if(!(0,F.Pe)(e.editorType))throw new en("'devResourceDomains' is only supported for plugins with 'editorType' containing 'dev'",e);for(let r of e.devResourceDomains){if(!r.startsWith("https://")||r.startsWith("http://"))throw new en(`Invalid domain '${r}' in 'devResourceDomains'. Domains must start with 'https:// or 'http://'`,e);if(!em(r))throw new en(`Invalid domain '${r}' in 'devResourceDomains'.`,e)}}return e}(c,{resourceType:m?"widget":"plugin"})}catch(e){l={type:F.ho.VALIDATE,text:e.message},e.manifest&&(s=e.manifest)}let h=m?(i=d,{...ey,editorType:i||void 0}):(a=d,o=u,{...eE,editorType:a||void 0,capabilities:o||void 0});return{plugin_id:s&&s.id||"",name:function(e,r){if(e)return e.name;if(r.lastKnownName)return r.lastKnownName;if(!r.path)return"Error";{let e=r.path.split(/\/|\\/);return e.length>=2?e[e.length-2]:r.path}}(s,r),manifest:s??h,localFileId:e,localFilePath:r.path,error:l}}async function e_(e,r){let n=(0,j.M)();try{if(!n)throw Error("desktopApp not available");let i=await n.getLocalFileExtensionManifest(e);return eh(e,i,r)}catch(n){return{plugin_id:"",name:"Error",manifest:"widget"===r.resourceType?ey:eE,localFileId:e,localFilePath:"",error:{type:F.ho.LOAD,text:n.message}}}}async function eg(e){let r;let n=(0,j.M)();try{if(!n)throw Error("desktopApp not available");r=await n.getLocalFileExtensionSource(e)}catch(e){throw Error(`Unable to load code: ${e}`)}if(r.buildErrCode)throw Error("Build error: "+r.stderr+"\nPath was: "+r.path);let i=r.source;return r.html&&(i=function(e,r){let n=e=>JSON.stringify(e).split(/(<!--|-->|\bimport)/g).map((e,r)=>1&r?e.slice(0,2)+'"+"'+e.slice(2):e).join("");if("string"==typeof r)return`const __html__ = ${n(r)};${e}`;let i=Object.entries(r).map(([e,r])=>`[${n(e)}]:${n(r)}`).join(",");return`const __uiFiles__ = {${i}};${e}`}(i,r.html)),i}function ef(e){return e.error?.text===ea?e.name:`${e.error?`\u26A0  `:""}${e.name}`}let eE={id:"",name:"",api:"",main:""},ey={id:"",name:"",api:"",main:"",containsWidget:!0,widgetApi:""},eb={id:"",plugin_id:"",manifest:{...eE},name:"",version:"",release_notes:"",installed_by:"user",description:"",tagline:"",creator_policy:"",created_at:"",redirect_icon_url:"",redirect_cover_image_url:"",redirect_code_url:"",is_private:!1,playground_fig_file_key:null},ev={id:"",publisher:{is_restricted_by_current_user:!1,id:"",name:"",img_url:"",img_urls:{},profile_handle:"",primary_user_id:null,current_user_is_following:!1,current_user_is_followed:!1,location:null,follower_count:0,following_count:0,entity_type:k.o1.USER,badges:[],description:""},creator:{id:"",handle:"",img_url:""},category_id:null,versions:{},install_count:0,unique_run_count:0,view_count:0,like_count:0,comment_count:0,unpublished_at:null,current_plugin_version_id:"",roles:{},realtime_token:"",support_contact:"",created_at:"",org_id:null,redirect_thumbnail_url:null,thumbnail_url:null,tags:[],community_publishers:{accepted:[],pending:[]},comments_setting:N.Ni.ENABLED,is_widget:!1,editor_type:"design_and_whiteboard",publishing_status:null,badges:[]},eI={...ev,is_widget:!0},eT={name:"",currentVersionReleaseNotes:"",newVersionReleaseNotes:"",description:"",tagline:"",creatorPolicy:"",categoryId:"",tags:(0,G.Rs)(),iconSrc:"",coverImageSrc:"",widgetSnapshotImageSrc:"",widgetSnapshotImageError:null,supportContact:"",iconImageError:null,coverImageError:null,author:{user_id:""},twoFactorAuthDisabledError:null,emailNotVerifiedError:null,accountDetailsChangedError:null,freemiumRequiredForMigrating:null,commentsSetting:N.Ni.ENABLED,creators:[],publishers:{inputValue:"",tokens:[],errorMessage:""},blockPublishingOnToS:!1,playgroundFigFile:null,playgroundFilePublishType:w.J.Actions.NOOP};function eS(e){if(!e||!e.versions)return null;let r=e.current_plugin_version_id;return r&&e.versions[r]||null}function ew(e){let r=eS(e);return null===r?eb:r}function eA(e,r){if((0,z.ZY)(r))return(0,z.Qx)(r);let n=e[r]??{};for(let e in n)return n[e].current_plugin_version_id}let eC=e=>e?.containsWidget?eI:ev;function eN(e,r,n,i){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}if(i){if(e&&e[i])return e[i];if(r&&r[i])return r[i]}return eC(n?.manifest)}function eL(e,r,n){if(n?.manifest?.id){if(e&&e[n?.manifest?.id])return e[n?.manifest?.id];if(r&&r[n?.manifest?.id])return r[n?.manifest?.id]}return null}function eO(e,r){return(0,K.Hc)(e,r,ev)}function eR(e,r){return(0,K.Hc)(e,r,eI)}function eP(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i];a.roles.org&&a.roles.org.id===r&&(n[a.id]=a)}),n}function eD(e,r){let n={};return Object.keys(e).forEach(i=>{let a=e[i];er(r,ew(a).manifest.editorType)&&(n[a.id]=a)}),n}function ek(e){return!!e?.roles?.org}function eM(e,r,n=!0){let i={};return Object.keys(e).forEach(a=>{let o=e[a],s=n?W.jY:W.Ro;((0,A.Dd)(o,r)||s(o,r))&&(i[a]=e[a])}),i}function eF(e){return(0,a.LN)(Object.keys(e).map(r=>ew(e[r]))).map(r=>e[r.plugin_id])}function ex(e,r){let n=e.roles,i=!r.is_public&&(0,S.AC)(e);return!!n.is_public!=!!r.is_public||n.org?.id!==r.org?.id||i}function eU(e){if(!e)throw Error("Code string cannot be empty");let r=(0,g.YH)(e).length;if(r>K.yO)throw Error(`plugin code exceeds max size of ${Math.floor(K.yO/1e6)}MB`);return r}function eB(e){return(0,A.Wl)(e,"Icon image")}async function eV(e,r){return eB(e),await eK(e,{width:$.DK,height:$.DK},r,(0,y.t)("community.publishing.error_icon_image_dimensions"))}function eG(e){return(0,A.Wl)(e,"Artwork image")}function eH(e){let r=e?.[0];if(!r)throw Error((0,y.t)("community.publishing.error_file_not_found"));return r}async function eK(e,r,n,i){let{width:a,height:o}=r,s=URL.createObjectURL(e),l=await (0,A.l8)(s);try{if(!function(e,r,n){let{width:i,height:a}=r;return e.width===i&&e.height===a||n&&e.width%i==0&&e.height%a==0&&e.width/i==e.height/a}(l,r,n))throw Error(i);if(l.width===a&&l.height===o)return e;let s=await new Promise((e,r)=>{let n=document.createElement("canvas");try{n.width=a,n.height=o,n.getContext("2d").drawImage(l,0,0,a,o),n.toBlob(n=>n?e(n):r(Error("Failed to resize image")))}catch(e){r(e)}finally{n.remove()}});return new File([s],e.name,{type:s.type})}finally{URL.revokeObjectURL(s),l.remove()}}async function eW(e){let r=(await E.Ay.post(`/api/${(0,K.n)(e)}`)).data.meta;if(!r.id)throw Error("cannot generate plugin ID");return r}function e$(e,r,n){return e.roles.org??(r&&n?{id:r.id,name:r.name,img_url:r.img_url}:null)}function eY(e,r){return r===F.Lu.ORG?e?{org:e}:(l.k.error("publishing a private plugin without a valid org entity."),null):{is_public:!0}}function ez(e){return e.name===eT.name&&e.newVersionReleaseNotes===eT.newVersionReleaseNotes&&e.supportContact===eT.supportContact&&e.description===eT.description&&e.iconSrc===eT.iconSrc&&e.coverImageSrc===eT.coverImageSrc&&null==e.iconBlob&&null==e.coverImageBlob}function ej(e,r,n,i,a){let o;let s=void 0!==r?e.localPlugins[r]:void 0,l=s&&s.manifest,c=eN(e.publishedPlugins,e.publishedWidgets,s,n),d=ew(c),u={...(0,G.Rs)(),tokens:(c.tags||[]).map(e=>({content:e,state:P.d.OK}))},m=l?.permissions?.includes("payments");try{o=(0,A.En)(c,e)}catch(e){throw Error("Unable to get Plugin Data. You might be trying to act on a personal plugin in an Org space.")}let{accepted:p,pending:h}=c.community_publishers,_={...(0,G.Rs)(),tokens:(c.community_publishers?[...p.map(e=>({...e,isPending:!1})),...h?.map(e=>({...e,isPending:!0}))||[]]:[]).reduce((r,n)=>(0,A.Ii)(e.authedProfilesById[n.id],o)?r:r.concat([{state:P.d.OK,content:n}]),[])};return{name:d.name||l&&l.name||eT.name,currentVersionReleaseNotes:d.release_notes||eT.newVersionReleaseNotes,newVersionReleaseNotes:eT.newVersionReleaseNotes,tags:u,supportContact:c.support_contact||e.user?.email||eT.supportContact,description:d.description||eT.description,tagline:d.tagline||eT.tagline,creatorPolicy:d.creator_policy??eT.creatorPolicy,iconSrc:d.redirect_icon_url||eT.iconSrc,widgetSnapshotImageSrc:i||d.redirect_snapshot_url||eT.widgetSnapshotImageSrc,widgetSnapshotImageBlob:a||eT.widgetSnapshotImageBlob,coverImageSrc:d.redirect_cover_image_url||eT.coverImageSrc,iconImageError:eT.iconImageError,coverImageError:eT.coverImageError,widgetSnapshotImageError:eT.widgetSnapshotImageError,twoFactorAuthDisabledError:eT.twoFactorAuthDisabledError,emailNotVerifiedError:eT.emailNotVerifiedError,accountDetailsChangedError:eT.accountDetailsChangedError,freemiumRequiredForMigrating:eT.freemiumRequiredForMigrating,author:o,publishers:_,creators:p.map(e=>({...e,isPending:!1})).concat((h??[]).map(e=>({...e,isPending:!0}))).filter(r=>!(0,A.Ii)(e.authedProfilesById[r.id],o)&&r.entity_type===k.o1.USER),commentsSetting:c.comments_setting||eT.commentsSetting,categoryId:c.category_id||eT.categoryId,blockPublishingOnToS:(0,A.xw)(e),playgroundFigFile:d.playground_fig_file,playgroundFilePublishType:w.J.Actions.NOOP,isPaid:!!c.monetized_resource_metadata||m,price:(0,I.vf)(c.monetized_resource_metadata),isSubscription:c.monetized_resource_metadata?.is_subscription,hasPaymentsApi:m,annualDiscount:c.monetized_resource_metadata?.annual_discount_percentage,isAnnualDiscountActive:!!c.monetized_resource_metadata?.annual_discount_active_at,carouselMedia:(0,v.N6)(c)}}function eq(e){return!!ew(e).id&&!e.unpublished_at}function eZ(e){if(!e)return{};let r={};return e.forEach(e=>{eq(e)&&(r[e.id]=e)}),r}function eX(e,r,n,i){let a={};return(e.email_validated_at||(a.emailNotVerifiedError=(0,y.t)("community.publishing.please_verify_your_email_address_to_publish")),i||(e.saml_sso_only||e.google_sso_only||e.two_factor_app_enabled||e.phone_number)&&(r.code!==k.aP.FAILURE||r.error!==(0,y.t)("community.publishing.you_must_enable_two_factor_authentication_to_publish")))?!i&&(e.plugin_publishing_blocked_at||e.community_blocked_at||r.code===k.aP.FAILURE&&r.error===(0,y.t)("community.publishing.you_must_verify_your_account_details_to_publish"))?a.accountDetailsChangedError=(0,y.t)("community.publishing.we_detected_a_change_to_your_account_details_please_contact_support_figma_com_to_publish_this_plugin"):r.code===k.aP.FAILURE&&r.error&&(a.other=r.error):a.twoFactorAuthDisabledError=n?(0,y.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_widget"):(0,y.t)("community.publishing.please_enable_two_factor_authentication_to_publish_this_plugin"),a}function eJ(e,r,n,i){if(!e)return{};let a={};0===(0,K.Yp)(e.name).length&&(a.name=(0,y.t)("community.publishing.name_must_not_be_empty")),0===(0,K.Yp)(e.tagline).length&&(a.tagline=(0,y.t)("community.publishing.add_a_tagline")),(0,p.ZB)(e.description)&&(a.description=(0,y.t)("community.publishing.add_a_description"));let o=(0,K.Yp)(e.supportContact);if(0===o.length?a.supportContact=(0,y.t)("community.publishing.support_contact_must_not_be_empty"):(0,c.xf)(o)||(0,g.gU)(o)||(a.supportContact=(0,y.t)("community.publishing.support_contact_must_be_a_valid_email_or_url")),0===(0,K.Yp)(e.iconSrc).length&&(a.iconImageError=(0,y.t)("community.publishing.icon_cant_be_empty")),a.carouselMedia=(0,A.vC)(e.carouselMedia),e.categoryId||(a.categoryId=(0,y.t)("community.publishing.category_cant_be_empty")),void 0===e.price||r.permissions?.includes("payments")||i?.third_party_m10n_status!==M.PN.FLAGGED||(a.freemiumRequiredForMigrating=(0,y.t)("community.seller.freemium_required_for_migration")),e.playgroundFigFile&&r.editorType?.length===1){let i=r.editorType[0],o=e.playgroundFigFile.editor_type;if(i===F.FW.FIGMA&&"design"!==o||i===F.FW.FIGJAM&&"whiteboard"!==o){let e=i===F.FW.FIGMA?(0,y.t)("community.publishing.playground_file.figma"):(0,y.t)("community.publishing.playground_file.figjam");a.playgroundFigFile=n?(0,y.t)("community.publishing.widget_playground_file_editor_type_error",{editorType:e}):(0,y.t)("community.publishing.plugin_playground_file_editor_type_error",{editorType:e})}}n&&0===(0,K.Yp)(e.widgetSnapshotImageSrc).length&&(a.widgetSnapshotImageError=(0,y.t)("community.publishing.snapshot_must_not_be_empty"));let s=function(e,r){if(!e.isPaid||e.hasPaymentsApi)return null;if(!e.price)return(0,y.t)("community.publishing.price_is_required_for_paid_resources");if((0,I.Yp)(e.price))return e.price<I.mZ?(0,y.t)("community.seller.paid_resource_minimum_err"):(0,y.t)("community.seller.paid_resource_maximum_err");if((0,I.F8)(e.price))return(0,y.t)("community.seller.prices_must_follow_format");if(!r||(0,S.AC)(r))return null;let n=r?.monetized_resource_metadata?.price;return e.isSubscription&&n&&(0,I.Mj)(n/100,e.price)?(0,y.t)("community.seller.price_increase_limit"):!r?.monetized_resource_metadata?.can_increase_price&&n&&(0,I.WD)(n/100,e.price)?(0,y.t)("community.seller.price_can_only_be_increased_once_every_thirty_days"):null}(e,i);s&&(a.price=s);let l=e.isPaid&&e.annualDiscount&&e.isAnnualDiscountActive?Number.isInteger(e.annualDiscount)?null:(0,y.t)("community.seller.discount_must_follow_format"):null;return l&&(a.annualDiscount=l),a}function eQ(e,r,n){if(!e)return{};let i={},a=(0,K.Yp)(e.name).length;if(a<4?i.name=(0,y.t)("community.publishing.name_must_be_4_characters_long"):a>100&&(i.name=(0,y.t)("community.publishing.name_must_be_at_most_100_characters_long")),(0,K.Yp)(e.description).length>1e4&&(i.description=(0,y.t)("community.publishing.description_must_be_at_most_10000_characters_long")),(0,K.Yp)(e.newVersionReleaseNotes).length>1e4&&(i.newVersionReleaseNotes=(0,y.t)("community.publishing.release_notes_must_be_at_most_10000_characters_long")),(0,K.Yp)(e.creatorPolicy).length>1e4&&(i.creatorPolicy=(0,y.t)("community.publishing.creator_policy_must_be_at_most_10000_characters_long")),r)i.tags=(0,K.Dp)(e.tags.tokens.map(e=>e.content),r.find(r=>r.id===e.categoryId)?.tags||[],r.flatMap(e=>e.tags??[]));else{let r=e.tags.tokens.map(e=>e.content);e.tags.inputValue&&(r=r.concat([e.tags.inputValue]));let n=(0,K.Wh)(r);n&&(i.tags=n)}let o=(0,K.Lg)(e.tagline);return o&&(i.tagline=o),(0,K.Yp)(e.supportContact).length>100&&(i.supportContact=(0,y.t)("community.publishing.support_contact_must_be_at_most_100_characters_long")),e.iconImageError&&(i.iconImageError=e.iconImageError),e.coverImageError&&(i.coverImageError=e.coverImageError),i}function e0(e){return(0,F.k0)(e.plugin)}function e1(e){let r;let{localPlugins:n,publishedCanvasWidgetVersions:i,publishedWidgets:a}=d.D.getState(),o=!e.widgetVersionId,l=e.widgetId;if(l){if(o){let e=Object.values(n).filter(e=>e.plugin_id===l);e.length>1&&e8((0,y.t)("community.publishing.found_multiple_local_widgets_with_the_same_manifest_id")),1===e.length&&(r=e[0])}else{if(!(r=i[l]?.[e.widgetVersionId]||a[l]&&ew(a[l])))return;r.id===e.widgetVersionId||(0,f.nl)()||(0,f.Lg)()||(0,h.$D)(s.e.UNOWNED,Error(`plugin versionId=${r?.id} doesn't match node.widgetVersionId=${e.widgetVersionId}`))}return r}}function e2(e){let r=e.canRunPluginState?e.canRunPluginState:d.D.getState();if(!(0,O.GP)(r))return{canRun:!1,message:"Cannot run plugin because canRunPlugins returned false"};if(!e5(r,e.plugin))return{canRun:!1,message:"Cannot run plugin within org"};let{plugin:n,editorType:i}=e;if((0,F.ZQ)(n))return(0,F.k0)(n)?{canRun:!1,message:"Cannot run local widget"}:{canRun:!0};if(i){if(!er(X[i],n.manifest.editorType))return{canRun:!1,message:"Cannot run plugin with invalid editor type"};if(i===D.nT.DevHandoff&&!e7(n))return{canRun:!1,message:"Cannot run non-devmode plugin in dev mode"};if(i===D.nT.Slides&&!ts(n))return{canRun:!1,message:"Cannot run non-slides plugin in slides mode"}}return{canRun:!0}}function e5(e,r){if(!e.currentUserOrgId)return!0;let n=e.orgById[e.currentUserOrgId];if(!n||(0,F.ZQ)(r)||(0,F.bH)(r))return!0;if(!n.public_plugins_allowed)return!1;let i=(0,F.k0)(r);return(i?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!(i?e.whitelistedWidgets:e.whitelistedPlugins)[r.plugin_id]}function e3(e){return e.roles.is_public?{role:"public"}:e.roles.org?{role:"org",roleOrgId:e.roles.org.id}:{role:"private"}}function e6(e,r){return r?r.localFileId:e.id}function e8(e){(0,V.pN)({shouldShowVisualBell:!0});let r=(0,j.M)();C.Y5.dispatch(b.F.enqueue({type:"plugins-runtime-error",message:e,button:r?{text:"Show/Hide console",action:()=>{r.toggleDevTools("bottom")}}:void 0,error:!0}))}function e4(){C.Y5.dispatch(b.F.dequeue({matchType:"plugins-runtime-error"}))}function e9(e,r){return e.plugin_id===r?.plugin_id&&e?.id===r?.id}function e7(e,r){return!!(!(0,Y.T)()||e.manifest.capabilities?.includes("vscode")||r?.allowNonVsCodePluginsInVsCode)&&(0,F.Pe)(e.manifest.editorType)&&!(0,F.k0)(e)}function te(e){return e7(e)&&tg(e.manifest.capabilities)}function tt(e){return e7(e)&&e.manifest?.capabilities?.includes("codegen")}function tr(e){return e.manifest?.capabilities?.includes("textreview")}function tn(e,r,n){return Object.fromEntries(Object.entries(r).filter(([r,i])=>to(e,i,n)))}function ti(e,r){return r.filter(r=>to(e,r))}function ta(e,r){return Object.fromEntries(Object.entries(r).filter(([r,n])=>to(e,ew(n))))}function to(e,r,n){if(!e)return!0;switch(e){case D.nT.Whiteboard:case D.nT.Design:return er(X[e],r.manifest.editorType);case D.nT.DevHandoff:return e7(r,n);case D.nT.Slides:return ts(r);case D.nT.Sites:case D.nT.Cooper:case D.nT.Illustration:return!1;default:(0,o.xb)(e)}}function ts(e){return er(F.FW.SLIDES,e.manifest.editorType)&&!(0,F.k0)(e)}function tl(e){if(!("related-link-preview"!==e&&"codegen"!==e))return!1;let r=d.D.getState().selectedView;return(0,H.$A)(r)}function tc(e){return e?.manifest.editorType?.length===1&&(0,F.Pe)(e.manifest.editorType)}function td(e){let r=function(e){let r=["vscode"];return e.filter(e=>!r.includes(e))}(e.manifest.capabilities??[]);return 1===r.length&&"codegen"===r[0]}function tu(e){return tc(e)&&td(e)}function tm(e){return(0,F.Pe)(e.manifest.editorType)&&td(e)}function tp(e){let r=d.D.getState().selectedView;return(0,H.$A)(r)&&tm(e)}function th(e,r,n){let i=d.D.getState().selectedView,a=r?.plugins_whitelist_enforced,o=a&&n&&!!n[e.plugin_id]||!a;return(0,H.$A)(i)&&!tu(e)&&o}function t_({idToSearch:e,localExtensionsByFileId:r,publishedExtensions:n}){let i=r&&r[e];if(i)return i;let a=n?.[e];return a?eS(a):null}function tg(e){return!!(e?.includes("inspect")||e?.includes("panel"))}function tf(e){let r=et(),n=e&&e?.plugin&&tu(e?.plugin);return e&&r&&er(r,e.plugin.manifest.editorType)&&("dev"!==r||e7(e.plugin))&&("slides"!==r||ts(e.plugin))&&!n}function tE(){return(0,Y.T)()?"plugins-menu-open-directory-vscode":m.Ay.mac?"plugins-menu-open-directory-mac":"plugins-menu-open-directory-win"}},384792:(e,r,n)=>{n.d(r,{C3:()=>a,SH:()=>o}),n(215822);let i=null;function a(e){i=e}function o(){return i}},772192:(e,r,n)=>{n.d(r,{R:()=>o}),n(181912);var i=n(941381),a=n(336599);let o=new class{loadPluginsPublishedByUser(e){let r=e.getState().loadingState,n=i.uF.loadingKeyForPayload();(0,a.Sc)(r,n)&&e.dispatch(i.uF())}async loadPluginsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=i.LP.loadingKeyForPayload(n);(0,a.Sc)(r,o)&&await e.dispatch(i.LP(n))}loadWidgetsAuthoredByCurrentOrg(e){let{loadingState:r,currentUserOrgId:n}=e.getState();if(!n)return;let o=i.a8.loadingKeyForPayload(n);(0,a.Sc)(r,o)&&e.dispatch(i.a8(n))}}},829632:(e,r,n)=>{n.d(r,{R:()=>_});var i=n(262151),a=n(140593),o=n(157663),s=n(38329),l=n(30637),c=n(877432),d=n(370934),u=n(960628),m=n(507956),p=n(561004);let h=class e{constructor(){this.runQueue=[],this.currentRunState=null,this.MAX_RESOLVE_ITERATIONS=10}enqueue(e){let{runPluginArgs:r,onStart:n,mode:a,reuseExistingRunState:o=!0}=e,{plugin:l}=r;if(!(0,m.$A)(s.D.getState().selectedView))return(0,i.bT)(r);if(l.manifest.containsWidget)throw Error("Cannot enqueue a plugin that contains a widget");let c=this.createTask(n),d=this.findExistingRunState(e);if(o&&d)this.log("enqueue","Found existing run state, pushing runTask onto existing runState",{existingRunState:d,runTask:c}),d.runTasks.push(c),d===this.currentRunState&&"settled"===d.status&&this.resolveAllPromises(this.currentRunState);else{let e={runPluginArgs:r,runTasks:[c],mode:a,status:"idle"};this.log("enqueue","Creating new run state and adding to queue",{runState:e}),this.addToQueue(e),this.runNextPlugin()}return c.promise}getCurrentRunStatusOrNull(){return this.currentRunState?.status??null}getRunQueueLength(){return this.runQueue.length}async runNextPlugin(){if(await this.maybeTerminatePluginBeforeRun(),(0,p.hw)())return;let e=this.runQueue.shift();if(!e)return;this.currentRunState=e,this.prepPluginForRun(e.runPluginArgs.plugin);let r=this.runPlugin(e);await this.resolveAllPromises(e),await r,this.log("runNextPlugin","Finished running plugin",{runState:e}),this.runNextPlugin()}runPlugin(e){this.log("runNextPlugin","Running plugin",{runState:e});let{runPluginArgs:r}=e;return(0,i.bT)(r)}setRunPluginForTest(e){if(!(0,l.nl)())throw Error("Cannot set run plugin for test when not running interaction tests");this.runPlugin=e}createTask(e){let r=()=>{},n=()=>{};return{promise:new Promise((e,i)=>{r=e,n=i}),resolve:r,reject:n,onStart:e}}async resolvePromise({resolve:e,reject:r,onStart:n}){try{let r=await n?.();e(r)}catch(e){r(e)}}async resolveAllPromises(e){this.log("runNextPlugin","Resolving all promises",{runState:e}),e.status="resolving";let r=0;for(;r<this.MAX_RESOLVE_ITERATIONS;){let n=e.runTasks;if(0===n.length)break;e.runTasks=[],await Promise.allSettled(n.map(e=>this.resolvePromise(e))),r++}await this.maybeTerminatePluginAfterRunSettled(e),e.status="settled",this.log("runNextPlugin","Resolved all promises",{runState:e})}addToQueue(e){switch(this.log("addToQueue","Adding to queue",{toAdd:e}),e.mode){case"run-forever":case"run-and-terminate":this.runQueue.push(e);break;default:(0,a.xb)(e.mode)}}async maybeTerminatePluginBeforeRun(){let e=(0,p.hw)();(!!e!=!!this.currentRunState||this.currentRunState?.status==="settled"&&this.currentRunState?.runPluginArgs.plugin.plugin_id===e?.plugin_id)&&(this.log("maybeTerminatePluginBeforeRun","Terminating plugin"),await this.terminatePlugin())}async maybeTerminatePluginAfterRunSettled(e){let{mode:r}=e;switch(this.log("maybeTerminatePluginAfterRunSettled","Maybe terminating plugin",{toMaybeTerminate:e}),r){case"run-forever":this.runQueue.length>0&&await this.terminatePlugin();break;case"run-and-terminate":await this.terminatePlugin();break;default:(0,a.xb)(r)}}async terminatePlugin(){this.log("terminatePlugin","Terminating plugin"),this.currentRunState=null,await (0,p.wY)(),await (0,c.yQ)()}findExistingRunState({runPluginArgs:e,mode:r}){let n=this.currentRunState?.runPluginArgs.plugin.plugin_id;return n===e.plugin.plugin_id&&p.hw()?.plugin_id===n?this.currentRunState:this.runQueue.find(n=>n.runPluginArgs.plugin.plugin_id===e.plugin.plugin_id&&n.mode===r)}isCurrentlyRunning({runPluginArgs:e,mode:r}){return!!this.findExistingRunState({runPluginArgs:e,mode:r})}prepPluginForRun(e){this.log("prepPluginForRun","Prepping plugin for run",{plugin:e}),(0,d.dW)(e,null),(0,u.f$)(),(0,u.n4)(),(0,u.hY)()}log(r,n,i={}){if(!e.debug)return;let a={currentRunState:this.currentRunState,runQueue:this.runQueue,runningPluginState:p.iu,...i};o.k.log("[PluginManager]",`[${r}]`,n,a)}};h.instance=new h,h.debug=!1;let _=h},561004:(e,r,n)=>{n.d(r,{Kd:()=>b,Mt:()=>S,XF:()=>A,XY:()=>T,et:()=>w,fD:()=>g,hw:()=>f,iu:()=>_,lM:()=>E,mv:()=>v,nT:()=>N,qR:()=>y,wY:()=>C});var i=n(268853),a=n(517333),o=n(38329),s=n(418956),l=n(776621),c=n(30637),d=n(554294),u=n(707033),m=n(479296),p=n(229531);let h=null,_={currentPluginRunID:null,stats:null,currentWidget:void 0,setMediaEnabled:!1,allowedPluginOrigin:void 0,resetGlobalPluginAPI:null};function g(){return _.currentPluginRunID}function f(){return s.zl.get(d.GR)}function E(e){(0,l.kF)("pluginId",e?.plugin_id),s.zl.set(d.GR,e)}function y(e){(0,l.kF)("pluginTriggeredFrom",e),s.zl.set(d.vT,e??null)}function b(e){s.zl.set(d.$f,e)}function v(){return Math.random().toString(36).slice(2)}function I(e){(0,c.nl)(),(0,l.$D)(i.e.EXTENSIBILITY,e)}function T(e){h&&I(Error(`Did not close the previous plugin: type=${h.type}`)),h={type:"global",closePluginFunc:e}}function S(e,r){h?.type==="plugin"&&r?.ignorePreviousCloseFunc!==h.closePluginFunc&&I(Error(`Did not close the previous plugin: type=${h.type}`)),h?.type==="global"&&I(Error(`Did not close the previous plugin: type=${h.type}`)),h=e?{type:"plugin",closePluginFunc:e}:null}function w(){return h?.type==="global"}async function A(e){if(h){let{closePluginFunc:r,type:n}=h;h=null,"global"===n?await r():await r(e)}}let C=(0,m.n)(async e=>{await A(e?{message:e+"",isError:!0}:{}),N()});function N(){if((0,p.Tj)(void 0),_.currentWidget=void 0,E(null),y(null),b(null),_.currentPluginRunID=null,_.stats=null,s.zl.set(d.d4,null),s.zl.set(d.GR,null),a.eD&&_.setMediaEnabled&&(_.setMediaEnabled=!1),a.eD&&_.allowedPluginOrigin&&(a.eD.removeAllowedPluginOrigin(_.allowedPluginOrigin),_.allowedPluginOrigin=void 0),o.D){let e=(0,u.o8)(),r=(0,u.YR)();e&&r&&_.resetGlobalPluginAPI?.({userID:e,openFileKey:r})}}},285334:(e,r,n)=>{n.d(r,{HB:()=>M,Ph:()=>p,T0:()=>v,Up:()=>x,eZ:()=>k,sA:()=>U,xp:()=>F,yb:()=>B});var i=n(966712),a=n(30637),o=n(376485);let s="1039957324840667051",l="1042072203439057981",c="1017757619521383731",d="1037692671113105119",u="1030479012894344777",m="1100947233945489758",p="1274481464484630971",h="1220512233196109878",_="1220802563996996107",g="1221187540287746170",f="1029476790898052743",E="1270487405418367065",y="1028089855820989707",b="1100944790471783866",v="1268676638869538880",I="1217135789855512677",T="1217657098906612843",S={[s]:o.Kd,[l]:o.Kd,[c]:o.Kd,[d]:o.Kd,"1096460041736534298":["analytics"],[h]:["analytics","openexternal"],[_]:["analytics","filekey","openexternal"],"1098405969270214551":["analytics","filekey","openexternal"],"1151936790942917527":["analytics","openexternal"],"1101944648482192724":["analytics","openexternal"],"1094001923188252679":["analytics","filekey","openexternal"],[u]:o.Kd,[m]:o.Kd,"1030848035996871692":["hidecursors"],"1030845409121640454":["hidecursors"],[p]:["cortex","analytics"],[g]:["filekey"],"857346721138427857":["filekey"],"745330164019088593":["filekey"],"1377781599688680355":["cortex","analytics","filekey","firstdraft"],"1340067847030742527":["cortex","analytics","filekey","firstdraft"]},w={[s]:"https://recordwidget.vimeocdn.com",[l]:"https://recordwidget.vimeocdn.com",[c]:"https://recordwidget.vimeocdn.com",[d]:"https://recordwidget.vimeocdn.com",[u]:"https://www.figma.com",[m]:"https://www.figma.com"},A={"1034777534804649640":["analytics"],"1301665612022689456":["analytics","cortex"],[I]:["analytics","openexternal"],[T]:["analytics","filekey","openexternal"],"1271502283792345209":["cortex"],"1326353654536428586":["cortex"],"1441501928920333946":["cortex"],"1094384373580076374":["analytics","filekey","openexternal"],"1149460326641202255":["analytics","openexternal"],"1101526018404272582":["analytics","openexternal"],"1131307276886895456":["analytics","filekey","openexternal"],[f]:o.Kd,[E]:o.Kd,[y]:o.Kd,[b]:o.Kd,"1256428543638612749":["cortex"],[v]:["cortex","analytics"],"1277056884710848803":["cortex","analytics"],"1265815812125155376":["hidecursors"],"1029480467793180296":["hidecursors"],"1276624117086983457":["cortex"],"1313947182028153675":["cortex","analytics","filekey","firstdraft"],"1308848962842011451":["cortex","analytics","filekey","firstdraft"],"1338915561589337295":["cortex","analytics","filekey","firstdraft"],"1342184095219254574":["cortex","analytics","filekey","firstdraft"],"1248327534194310871":["openexternal"],"1247608093818933926":["openexternal"],"1098668453462136230":["analytics"],"1098643145465550199":["analytics","filekey","openexternal"],"1159008294965494982":["analytics","openexternal"],"1105998388939381214":["analytics","openexternal"],"1098069144593389942":["analytics","filekey","openexternal"],"1065825789137646656":o.Kd,"1105998344712102365":o.Kd,"1065825795062708289":["hidecursors"],"1065825813933952067":["hidecursors"]},C={[I]:(0,i.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},N={[h]:(0,i.ck)("83e16c32f7fbe88022ff9fcff130cdd6c6423861")},L={[f]:"https://staging.figma.com",[E]:"https://staging.figma.com",[y]:"https://staging.figma.com",[b]:"https://staging.figma.com"},O=new Set([I,T]),R=new Set([h,_,g,"1220851659530313303"]),P={},D={};function k(e){return"prod"===(0,i.tl)().cluster_name?e in w||e in S:"staging"===(0,i.tl)().cluster_name?e in L||e in A:(0,a.nl)()||(0,a.Lg)()?e in P:!!(0,i.IX)()}function M(e){return"prod"===(0,i.tl)().cluster_name?e in w?w[e]:void 0:"staging"===(0,i.tl)().cluster_name?e in L?L[e]:void 0:(0,a.nl)()||(0,a.Lg)()?e in P?P[e]:void 0:(0,i.IX)()?"*":void 0}function F(e){if(!k(e))throw Error("Untrusted pluginID");return"prod"===(0,i.tl)().cluster_name?new Set(S[e]??[]):"staging"===(0,i.tl)().cluster_name?new Set(A[e]??[]):(0,a.nl)()||(0,a.Lg)()?new Set(D[e]??[]):(0,i.IX)()?new Set(o.UX):new Set}function x(){return"prod"===(0,i.tl)().cluster_name?R:"staging"===(0,i.tl)().cluster_name?O:((0,a.nl)()||(0,a.Lg)()||(0,i.IX)(),new Set)}function U(e){return"prod"===(0,i.tl)().cluster_name?N[e]:"staging"===(0,i.tl)().cluster_name?C[e]:void 0}function B(e){return"prod"===(0,i.tl)().cluster_name?"1286792998372727741"===e:"staging"===(0,i.tl)().cluster_name?"1286790870036328880"===e:!!((0,a.nl)()||(0,a.Lg)())||!!(0,i.IX)()}},212957:(e,r,n)=>{n.d(r,{S:()=>i});var i,a=n(181912),o=n(563706),s=n(96328),l=n(99506),c=n(833629);(e=>{e.getTooltipTrackingContext=function(e){return`Pro Onboarding Tooltip: ${(0,s.vE)(e)}`},e.getTrackingProperties=function(e){return{productArea:"pro_tier_onboarding",teamId:e}},e.isRecentlyUpgraded=function(e){return!!e&&!!e.last_upgraded_at&&90>=(0,a.A)().diff((0,a.A)(e.last_upgraded_at),"days",!0)},e.canSeeOnboardingInFile=function({editorType:e,selectedView:r,showStarterKit:n,userFlags:i,hasNotifications:a,isDevHandoffView:s,isAppUiShown:d,isLoading:u}){if(o.Ay.mobile||o.Ay.tablet||a||s||!d||u)return!1;let m="fullscreen"===r.view&&r.starterKitHasBeenHidden;if(e===l._Y.WHITEBOARD&&n&&!m)return!1;let p=(0,c._q)(i),h=!!i.figjam_editor_onboarded;return e===l._Y.DESIGN&&!!p||e===l._Y.WHITEBOARD&&!!h}})(i||(i={}))},746869:(e,r,n)=>{n.d(r,{ng:()=>i,uU:()=>g});var i,a=n(561546),o=n(181912),s=n(966712),l=n(140908),c=n(99506),d=n(243987),u=n(428467),m=n(986060),p=n(707465);let h="pro_trials_v3",_=c.GP.PRO_TRIAL,g="exp_pro_trials_v3_start_trial";(e=>{e.uxEnabled=()=>!!(0,s.kc)().pro_trials_v3_ux,e.entryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().exp_pro_trials_v3,e.expiryEnabled=()=>(0,e.uxEnabled)()&&!!(0,s.kc)().pro_trials_v3_expiry,e.isUserInVariant=l.wN,e.getTrackingProperties=function(e){return e?{productArea:h,text:e}:{productArea:h}},e.getProTrial=function(e,i,a){if(!e)return null;let o=n(e);if(!o)return null;let s=new Date(e.grace_period_end),l=r(s),c=e.id;return{status:o,isOwner:i,userCanEditTeam:(0,u.canEditTeam)(c,a),trialExpiresAt:s,daysLeft:l,teamId:c}},e.getUpgradableProTrials=function(r,n){let i=Object.values(n.teams),s=(0,a.WI)(i.map(i=>e.getProTrial(i,!!r[i.id]?.[g],n))),l=s.filter(e=>e.status===m.a.TRIAL_EXPIRED&&e.userCanEditTeam);l.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt));let c=s.filter(e=>e.status===m.a.IN_TRIAL&&e.userCanEditTeam);return c.sort((e,r)=>(0,o.A)(e.trialExpiresAt).diff(r.trialExpiresAt)),{ongoingTrials:c,expiredTrials:l}},e.getEligibleProTrialTeams=function(r,n,i,a){let o=(0,d.Rx)(i),s=Object.values(i.teams).filter(s=>e.canStartProTrial(r,n,o,s,i,a));return s.sort((e,r)=>(r.editors??0)-(e.editors??0)),s},e.canStartProTrial=function(r,n,i,a,s,l){return!(!r||!e.entryEnabled()||(0,d.w5)(a)||a.stripe_customer_id||!n||i||!(0,u.canEditTeam)(a.id,s)||30>(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)||(0,o.A)().utc().diff((0,o.A)(r.created_at).utc(),"days",!0)>90||e.getProTrialStatus(a)||Object.keys(l).some(e=>!!l[e][g]))&&!!e.isUserInVariant(r.id)};let r=e=>Math.max(Math.ceil((0,o.A)(e).diff((0,o.A)(),"days",!0)),0);function n(r){return(0,e.uxEnabled)()&&r.grace_period_end&&r.grace_period_type&&_===r.grace_period_type?new Date(r.grace_period_end)<new Date?m.a.TRIAL_EXPIRED:m.a.IN_TRIAL:null}function i(e){return!!e&&e.status===m.a.IN_TRIAL&&e.userCanEditTeam}e.getProTrialStatus=n,e.isEligibleTrialEntryView=function(e){return"folder"===e.view||"team"===e.view||(0,p.YJ)(e)},e.canSeeProTrialUx=i,e.canSeeProTrialUxInFile=function(e,r){return i(e)&&r?.editorType&&r?.canEdit},e.canSeeProTrialExpiryUx=function(r){if(!(0,e.expiryEnabled)()||!r||r.status!==m.a.TRIAL_EXPIRED)return!1;let n=(0,o.A)().utc().diff((0,o.A)(r.trialExpiresAt).utc(),"days",!0);return!(n<0)&&n<7},e.canSeeExpiredProTrialBanner=function(r,n,i){if(!n)return!1;let a=!!r[n.id]?.[g],o=e.getProTrial(n,a,i);return e.canSeeProTrialExpiryUx(o)}})(i||(i={}))},888870:(e,r,n)=>{n.d(r,{R_:()=>i}),n(411855);var i,a=n(776250),o=n(966712),s=n(163023),l=n(939863),c=n(809840),d=n(746869),u=n(965821),m=n(485247),p=n(569673),h=n(301834),_=n(383234),g=n(637427),f=n(236446),E=n(176694),y=(e=>(e[e.SELECT_TEAM=0]="SELECT_TEAM",e[e.SELECT_TEAM_TYPE=1]="SELECT_TEAM_TYPE",e[e.SELECT_FEATURES=2]="SELECT_FEATURES",e))(y||{}),b=(e=>(e.FREELANCER="freelancer",e.AGENCY="agency",e.PRODUCT="product",e.OTHER="other",e))(b||{}),v=(e=>(e.UNLIMITED_FILES="unlimited_files",e.COMPONENT_LIBRARIES="component_libraries",e.ORGANIZING_FILES="organizing_files",e.VOTING_WORKSHOPS="voting_workshops",e.PLAYING_VIDEOS="playing_videos",e.SHARING_FILES="sharing_files",e.INVITING_VISITORS="inviting_visitors",e.AUDIO="audio",e))(v||{});Object.keys(y).length,(0,o.ck)("06cfa92c773695fb0be0202d467640e521950e67"),(0,o.ck)("e98abc8479042db5e94f5c35bf764ad4326f892f"),(0,o.ck)("915ace9058a397e6e4ceadc221dd20a9d95898d7"),(0,o.ck)("4423aaa8499d483db2703e6cad1b4c90805e7f16"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.freelancer"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.agency"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.product"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.other_team_type"),s.B,u.A,s.B,g.A,s.B,m.A,s.B,E.A,s.B,f.A,s.B,_.A,s.B,p.A,s.B,h.A,c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.unlimited_files"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.component_libraries"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.organizing_files"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.voting_workshopping"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.playing_videos"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.sharing_files"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.inviting_visitors"),c.E,(0,l.tx)("pro_trials_v3.pro_trial_initiation_modal.using_audio"),(i||(i={})).trackInitiationSubmit=function(e,r){(0,a.sx)("pro_trial_initiation_submit",{startedTrialSuccessfully:r,...e,...d.ng.getTrackingProperties(),features:e.features?e.features.join(", "):null})}},94500:(e,r,n)=>{n.d(r,{Bx:()=>I,Cs:()=>O,Hs:()=>b,Jr:()=>C,KJ:()=>N,M9:()=>E,RL:()=>y,Rv:()=>f,Zh:()=>D,_P:()=>P,e:()=>T,eA:()=>w,fz:()=>v,mf:()=>R,qb:()=>g,ql:()=>A,t0:()=>L,yE:()=>S});var i=n(140593),a=n(268853),o=n(922827),s=n(757028),l=n(498750),c=n(563706),d=n(776621),u=n(980820),m=n(738269);n(992271);var p=n(988022);n(356390),n(848661);var h=n(99506),_=n(707465);function g(e){return e===o.bq3.PRESET||e===o.bq3.CUSTOM?"scale-down":e===o.bq3.PRESENTATION?"contain":"min-zoom"}function f(e){return"fixed"}function E(e){let r=function(e){switch(e){case"NONE":return o.bq3.NONE;case"PRESET":return o.bq3.PRESET;case"CUSTOM":return o.bq3.CUSTOM;case"PRESENTATION":return o.bq3.PRESENTATION;default:(0,i.xb)(e)}}(e.initialDevice?.type??"NONE"),n=e.scalingInfo;return c.rr?{viewportScalingMode:"fit-width",contentScalingMode:n?.contentScalingMode??"fixed"}:{viewportScalingMode:n?.viewportScalingMode??g(r),contentScalingMode:n?.contentScalingMode??f(r)}}function y(e,r){return!r?.disableDefaultKeyboardNav&&([l.Uz.LEFT_ARROW,l.Uz.PAGE_UP].includes(e.keyCode)||e.shiftKey&&e.keyCode===l.Uz.N)}function b(e,r){return!(r?.disableDefaultKeyboardNav||r?.inlinePreview&&e.keyCode===l.Uz.SPACE&&e.shiftKey)&&[l.Uz.RIGHT_ARROW,l.Uz.SPACE,l.Uz.ENTER,l.Uz.N,l.Uz.PAGE_DOWN].includes(e.keyCode)}function v(e,r){return!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.R&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey}let I=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.F&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview,T=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.Z&&!e.metaKey&&!e.ctrlKey&&!r.inlinePreview&&r?.file?.editor_type!==h._Y.SLIDES,S=(e,r)=>e.keyCode===l.Uz.SPACE&&e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!r?.inlinePreview,w=(e,r)=>!r?.disableDefaultKeyboardNav&&e.keyCode===l.Uz.C&&!e.metaKey&&!e.shiftKey&&!e.ctrlKey&&!r.inlinePreview;function A(e){return!1}let C=(0,u.nF)((e,r)=>{if(r.userInitiated){let n={scalingMode:r.viewportScalingMode,contentScalingMode:r.contentScalingMode,source:r.source};e.dispatch(P({name:"Prototype Scale Changed",params:n}))}let n=e.getState().selectedView;if("prototype"===n.view){let i=(0,s.Ay)(n,e=>{void 0===e.scalingInfo&&(e.scalingInfo={}),r.hasOwnProperty("viewportScalingMode")&&(e.scalingInfo.viewportScalingMode=r.viewportScalingMode),r.hasOwnProperty("contentScalingMode")&&(e.scalingInfo.contentScalingMode=r.contentScalingMode)});e.dispatch(m.$T(i))}}),N=(0,u.nF)((e,{showHotspots:r})=>{let n=e.getState().selectedView;if(n&&"prototype"===n.view){let i={...n,showHotspots:r};e.dispatch(m.$T(i))}}),L=(0,u.nF)((e,{showDeviceFrame:r})=>{let n=e.getState().selectedView;(0,i.B1)(n,"selectedView must be defined to show device frame"),(0,i.vA)("prototype"===n.view,"must be in the view to show device frame");let a={...n,showDeviceFrame:r};e.dispatch(m.$T(a))}),O=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,i.B1)(n,"selectedView must be defined to set initial device frame"),(0,i.vA)("prototype"===n.view,"must be in the view to set initial device frame");let a={...n,initialDevice:r,overrideDevice:void 0};e.dispatch(m.$T(a))}),R=(0,u.nF)((e,{newDevice:r})=>{let n=e.getState().selectedView;(0,i.B1)(n,"selectedView must be defined to set override device frame"),(0,i.vA)("prototype"===n.view,"must be in the view to set override device frame");let a={...n,overrideDevice:r};e.dispatch(m.$T(a))}),P=(0,u.nF)((e,r)=>{let n=e.getState(),i=r.params||{},a=(0,_.U2)(n.selectedView);p.ds(r.name,a,n,i)}),D=(()=>{let e=(0,u.nF)((e,r)=>{let n=e.getState(),i=r.params||{},o=(0,_.U2)(n.selectedView);if(!o){(0,d.$D)(a.e.PROTOTYPING,Error("No file key for prototype event"));return}p.GS(r.name,o,n,i)});return({name:r,params:n})=>e({name:r,params:n})})()},830524:(e,r,n)=>{n.d(r,{C$:()=>s,Cp:()=>d}),n(411855),n(188507);var i=n(922827),a=n(286640);n(293017),n(809831),n(106757),n(788256);var o=n(479296);function s(e){let r=[e];for(;0!==r.length;){let e=r.shift();if(!1!==e.visible){if("TEXT"===e.type)return!0;r.push(...e.childrenNodes)}}return!1}n(696673),n(335682),n(833629);let l="last-used-left-panel-tab",c="ASSETS_TAB";function d(e){a.x4&&a.x4.setItem(l,e===i.xae.ASSETS?c:"LAYERS_TAB")}(0,o.D)(()=>{if(a.x4){let e=a.x4.getItem(l);if(e)return e===c?i.xae.ASSETS:i.xae.LAYERS}return null})},316081:(e,r,n)=>{n.d(r,{H4:()=>u,Ud:()=>d,XY:()=>p,cZ:()=>h});var i=n(411855),a=n(188507),o=n(140593),s=n(629019),l=n.n(s),c=n(922358);let d=Symbol("NotVisibleRunAnyway");class u{constructor(e){this._callback=e,this._previousValue=null}render({isVisible:e,className:r,displayAs:n,valueArgs:a=[]}){let o=!0===e||e===d?this._previousValue=this._callback(...a):this._previousValue,s=!0===e;return o instanceof Array?o.map((e,a)=>e&&i.createElement(m,{key:e.key??a,isVisible:s,className:r,displayAs:n},e)):o&&i.createElement(m,{key:o.key??void 0,isVisible:s,className:r,displayAs:n},o)}}class m extends i.Component{constructor(){super(...arguments),this.ref=e=>{this.el=e}}componentDidUpdate(e){this.el&&(!e.isVisible&&this.props.isVisible&&c.F2.focusSubtreeIfNecessary(this.el),e.isVisible&&!this.props.isVisible&&c.F2.blurSubtreeIfNecessary(this.el))}getClassNameForDisplayAs(){let{displayAs:e}=this.props;switch(e){case"block":return"";case"contents":return"displayContents";default:(0,o.xb)(e)}}render(){let{isVisible:e}=this.props,r=l()(this.props.className?this.props.className:"cachedSubtree",this.getClassNameForDisplayAs());return i.createElement("div",{ref:this.ref,className:r,style:{display:e?"":"none"}},this.props.children)}}m.defaultProps={displayAs:"contents"},m.displayName="CachedSubtreeComponent";let p=(0,a.Ng)(void 0,e=>({dispatch:e}));function h(e,r){"function"==typeof e?e(r):e&&(e.current=r)}},331626:(e,r,n)=>{n.d(r,{JG:()=>h,Jl:()=>_,SO:()=>p,U_:()=>m,X2:()=>E,gJ:()=>g,ul:()=>f});var i=n(140593),a=n(286640),o=n(809831),s=n(99506),l=n(555328),c=n(239671),d=n(809073),u=n(215822);function m(){let e=(0,o.my)();return e===c.nT.Whiteboard?d.$A.FigJam:(0,c.yY)(e)?d.$A.Design:e===c.nT.DevHandoff?d.$A.Handoff:e===c.nT.Slides?d.$A.Slides:null}let p="recent-face-stamps-figjam",h="recent-whiteboard-tools-figjam";function _(e,r){if(e===d.$A.FigJam)switch(r){case l.bD.PLUGIN:return"recent-plugins-figjam";case l.bD.WIDGET:return"recent-widgets-figjam";case l.bD.HUB_FILE:return"recent-templates-figjam";case d.dB.FACE_STAMP:return p;case d.dB.WHITEBOARD_TOOL:return h;default:return null}if(e===d.$A.Design)switch(r){case l.bD.PLUGIN:return"recent-plugins-figma-design";case l.bD.WIDGET:return"recent-widgets-figma-design";default:return null}return e===d.$A.Handoff?r===l.bD.PLUGIN?"recent-plugins-handoff":null:e===d.$A.Slides&&r===l.bD.HUB_FILE?"recent-templates-piper":null}function g(e,r){if(!a.x4)return[];let n=[],i=_(e,r),o=i&&a.x4.getItem(i);try{n=o&&JSON.parse(o)||[]}catch(e){}return n.map(e=>({...e,type:e.type||d.vt.CommunityResource}))}function f(e){let r=(0,u.uF)(e),n=e.community_publishers.accepted.map(e=>({isPending:!1,profile:{id:e.id,profileHandle:e.profile_handle,user:null,team:null,org:null,[e.entity_type]:{name:e.name}},role:s.un.CREATOR}));return r.community_publishers=n,r}function E(e){switch(e.type){case d.vt.CommunityResource:return e.id;case d.vt.TeamTemplate:return e.key;default:(0,i.xb)(e)}}},496470:(e,r,n)=>{n.d(r,{Aw:()=>b,XV:()=>f,v9:()=>y}),n(561546);var i=n(922827);n(340818);var a=n(776250),o=n(418956),s=n(632430),l=n(44892),c=n(416095),d=n(237929),u=n(173454),m=n(809073);n(510879),n(731262);var p=n(378905),h=n(453681),_=n(113916);let g=e=>null==e||e.type===u.PW.STATE_GROUP?null:e?.containing_frame?.containingStateGroup?.nodeId||null;function f(e,r,n){if(!e)return{selectedItem:null,relatedItems:[]};let i=(0,_.QL)(e,n);if(!i)return function(e,r){let n=(0,l.Qx)(r),i=r.local.components[e]??r.local.stateGroups[e],a=g(i),o=a?n[a]:i,s=E(o,Object.values(n??{}));return{selectedItem:o,relatedItems:s}}(e,r);let{publishID:a,libraryKey:s}=i,d=o.zl.get(h.qp)[s],u=(0,c.iP)(r.publishedByLibraryKey.components,{library_key:s,team_id:d?.team_id??null}),m=(0,c.iP)(r.publishedByLibraryKey.stateGroups,{library_key:s,team_id:d?.team_id??null}),p={...(0,l.Jl)(u),...m},f=function(e,r){let n=g(e);return n?r[n]:e}(u[a]??m[a],p),y=E(f,Object.values(p??{}));return{selectedItem:f,relatedItems:y}}function E(e,r){if(!e||!e.containing_frame?.nodeId&&1===(0,d.ke)(e.name).length)return[];let n=(0,d.In)(e.name);return r.filter(r=>(0,c.nJ)(r.containing_frame,e?.containing_frame)&&(0,d.In)(r.name)===n)}function y(e,r,n,o,l,c,d,h){if(e){if((0,p.TK)(e,n)){if(e.type===u.PW.COMPONENT){let r=e.node_id;i.glU.replaceSymbolBackingInstances({[r]:o},c)}else{let r=i.glU.getSimilarStates(o,e.node_id,"");i.glU.replaceSymbolBackingInstances(r,c)}(0,a.sx)("Instance Swapped To Local Component",{source:l,...d,queryId:h})}else r(s.uO({item:e,instanceGUIDs:o,sourceForTracking:l,storeInRecentsKey:m.$A.Design,usedSwapInstanceKeyboardShortcut:c,queryId:h??void 0}))}}function b(e){i.glU.replaceSymbolBackingInstances(e,!1)}},939562:(e,r,n)=>{n.d(r,{wm:()=>a}),n(188507);var i=n(298455);let a=(0,n(716034).eU)((0,i.UN)())},707465:(e,r,n)=>{n.d(r,{$Z:()=>S,IE:()=>B,Iu:()=>U,Np:()=>A,Tk:()=>x,U2:()=>H,YJ:()=>K,YP:()=>M,bW:()=>D,s5:()=>G,vU:()=>F,xS:()=>w,yn:()=>k,zg:()=>V});var i=n(598002),a=n(966712),o=n(179940),s=n(687396),l=n(101231),c=n(31551),d=n(553492),u=n(687729),m=n(239671),p=n(567088),h=n(935938),_=n(124780),g=n(338880),f=n(507956),E=n(290806),y=n(799507),b=n(846456),v=n(879408),I=n(565532),T=n(935757);let S=new u.k([new s.$T,new v.f,new f.YY,new b.a,new l.m,new _.B,new c.G,new d._,new y.N,new E.u,new g.i,new I.T]);function w(e,r){return new URL(A(e,r),document.baseURI).href}function A(e,r){return S.selectedViewToPath(r,e)}let C=["drafts","fonts","libraries","search","settings","plugins","widgets","user"].concat(s.nw),N=RegExp(`^/files/([0-9]+)/(?:${C.join("|")})(.*)$`),L=RegExp("^/files/([0-9]+)/?$"),O=RegExp(`^/files/team/([0-9]+)/(?:${C.join("|")})(.*)$`),R=(e,r,n)=>{let i=e.split("/");return!i[1]||"files"!==i[1]||(0,a.kc)().ps_benchmark&&6===i.length&&"files"===i[1]&&"team"===i[2]&&"restore"===i[5]||(e.match(N)?i.splice(2,1):e.match(O)?i.splice(2,2):(i.length>=3&&r&&i[2]===r&&i.splice(2,1),i.length>=3&&n&&i[3]===n&&i.splice(2,2))),i},P=(e,r)=>{let n=e.split("/");return n[1]&&"files"===n[1]&&(e.match(N)?n.splice(2,1):n.length>=3&&r&&n[2]===r&&n.splice(2,1)),n};function D(e){let r=e.match(N);if(r)return r[1];let n=e.match(L);return n?n[1]:null}function k(e){let r=e.match(O);return r?r[1]:null}function M(e){let r=P(e,(0,T.pk)());return""===r[r.length-1]&&r.splice(r.length-1,1),r}function F(e,r,n,i){let s=[],l=(0,a.kc)().dev_mode_suggested_upgrades&&n&&!!(0,o.qg)(n).devModeSuggestions,c=n&&!!(0,o.qg)(n).dashDeepLink;return(0,a.kc)().ps_benchmark?s=R(r,e.currentUserOrgId,e.currentTeamId):l||c?(s=R(r,e.currentUserOrgId,e.currentTeamId),r.match(O)&&(s[3]=P(r,e.currentUserOrgId)[3])):s=P(r,e.currentUserOrgId),""===s[s.length-1]&&s.splice(s.length-1,1),S.pathToSelectedView(e,s,n,i)||{view:"recentsAndSharing"}}function x(e,r,n,i,a){if(r===i&&n===a)return e;let o=r===p.O.ORG?n:`team/${n}`,s=i===p.O.ORG?a:`team/${a}`;return e.replace(o,s)}function U(e,r){return S.selectedViewName(r,e)}function B(e){let r=e.modalShown;for(;r;){if("ACCOUNT_SETTINGS_MODAL"===r.type)return!0;r=r.prevModal}return!1}function V(e){return"fullscreen"===e.view&&e.workshopModeInfoLoaded&&e.workshopModeInfo&&e.editorType===m.nT.Whiteboard&&new Date<e.workshopModeInfo.until||!1}function G(e){return"fullscreen"===e.view&&e.nodeId||null}function H(e){switch(e.view){case"fullscreen":return e.fileKey||null;case"mobileViewer":return e.file?.key||null;case"prototype":return null==e.file&&i.Z({data:{selectedView:e}}),e.file.key;default:return null}}function K(e){if("recentsAndSharing"===e.view){var r;return void 0===e.tab||(r=e.tab)===h.G.RECENTLY_VIEWED||r===h.G.SUGGESTED}return!1}},416822:(e,r,n)=>{n.d(r,{j:()=>s,q:()=>l});var i=n(188507),a=n(966712),o=n(628705);function s(e){let{currentUserOrgId:r}=e;return r?`/${r}`:(0,a.kc)().ps_benchmark?(0,o.i)(e):""}function l(){return(0,i.d4)(s)}},793485:(e,r,n)=>{n.d(r,{Z:()=>E});var i=n(821910),a=n(922827),o=n(162644),s=n(716034),l=n(418956),c=n(456363),d=n(293017),u=n(626783),m=n(259927),p=n(416095),h=n(484892),_=n(656012),g=n(179243);let f=(0,s.eU)({});class E{constructor(e){this.store=e,this.dispatch=e=>{this.store.dispatch(e)}}showEyedropper(e,r,n,i,a,o,s,l,c,u){this.dispatch(d.Gm({color:e,width:r,height:n,rgba:i,grid:a,cursorPosition:o,assetId:s,variableSetModeId:l,resolvedVariableColor:c,dropperData:u}))}hideEyedropper(){this.dispatch(d.Gm(null))}getColorFromNativeEyeDropper(){return window.EyeDropper?new EyeDropper().open().then(({sRGBHex:e})=>e):Promise.reject()}updateSelectionImages(e){let r=l.zl.get(f),n=Object.keys(e).length!==Object.keys(r).length;if(!n){for(let i in r)if(!e[i]){n=!0;break}}n&&l.zl.set(f,e)}updateSelectionPaintsWithFillEncodedPaints(e,r,n,a,o,s){let l=(0,h.S)(e,r,n,a,o),c=this.store.getState().mirror.selectionPaints;(!(0,i.c2)(c.paints,l)||c.emptyDueToLimitExceeded||s)&&(this.store.dispatch(u.QA(l)),s&&this.store.dispatch(u.Xp(!0)))}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(e,r){var n=[];for(let r of e){let e=(0,h.K)(r);e?n.push(e):console.error(`Failed to decode: ${r}`)}n=n.map((e,n)=>(e.variableScopes=new Set(r?r[n]:[]),e));let a=this.store.getState().mirror.selectionPaints;(!(0,i.c2)(a.paintsDirectlyOnSingleNode,n)||a.emptyDueToLimitExceeded)&&this.store.dispatch(u.n0(n))}updatePaintStyles(e,r,n){let a=this.store.getState().library,o=this.store.getState().mirror.sceneGraph,s=r.map(e=>{let r=(0,p.Gp)(e.key,e.guids,a);return r?{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:(0,p.uH)(r,o),variableScopes:new Set(e.variableScopes)}:{styleKey:e.key,version:e.version,styleGUIDs:e.guids,count:e.count,uniqueNodesCount:e.uniqueNodesCount,styleName:"",variableScopes:new Set(e.variableScopes)}});s.sort((e,r)=>e.count>r.count?-1:e.count===r.count&&e.styleName<r.styleName?-1:1),(!(0,i.c2)(e,s)||this.store.getState().mirror.selectionPaints.emptyDueToLimitExceeded)&&this.store.dispatch(n(s))}updateSelectionPaintsWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.styles,e,u.Lh)}updateSelectionTextAndEffectStyles(e){c.gq.syncFromFullscreen({styles:e})}updatePaintsDirectlyOnSingleNodeWithStyles(e){this.updatePaintStyles(this.store.getState().mirror.selectionPaints.stylesDirectlyOnSingleNode,e,u.uQ)}clearSelectionPaintsDueToLimitExceeded(){this.store.dispatch(u.Mc())}clearSelectionTextAndEffectStylesDueToLimitExceeded(){c.gq.syncFromFullscreen({styles:[]})}updateSelectionPaintFromDropper(e){let r=this.store.getState().currentSelectionPaintInPicker;if(null==r.originalPaint)return!1;let n=(0,h.K)(e);return null==n?(console.error(`Failed to apply paint: ${e}`),!1):(a.Osy.updatePaint((0,o.GP)(r.originalPaint),e,!0,null),this.store.dispatch(u.oI({...r,updatedPaintFromDropper:n.paint})),!0)}pickerHasSelectionPaintOpen(){return null!=this.store.getState().currentSelectionPaintInPicker.originalPaint}originalPaintForCurrentSelectionPaintsPicker(){let e=this.store.getState().currentSelectionPaintInPicker.originalPaint;return null==e?"":(0,o.GP)(e)}colorPickerSelectedVariable(){let e=this.store.getState().variablePickerShown;if(e.isShown&&e.resolvedType===a.rXF.COLOR&&"variable-picker-alias"===e.type)return{varId:e.variableID,modeId:e.modeID};let r=this.store.getState().pickerShown?.id,n=r?.startsWith(m.Yr),i=l.zl.get(g.E_);return n&&i?i:{}}isPrototypingModalOpen(){return this.store.getState().pickerShown?.id===m.o$}validateCopyBuffer(e,r){let n=this.store.getState().openFile?.key;n&&_.Z.postValidateCopy({nodeIds:e,fileKey:n,copyType:r})}}},435011:(e,r,n)=>{n.d(r,{hK:()=>s});var i=n(302245),a=n(609822),o=n(352898);let s=e=>e.selectedView;(0,i.Mz)(s,e=>"workspace"===e.view&&e.subView===o.V0.DIRECTORY?e.workspaceId:void 0);let l=(0,i.Mz)(s,e=>"team"===e.view?e.teamId:void 0),c=(0,i.Mz)(s,e=>"folder"===e.view?e.folderId:void 0),d=(0,i.Mz)(s,e=>e.currentTeamId,(e,r)=>"allProjects"===e.view?r:void 0),u=(0,i.Mz)(l,d,e=>e.teams,(e,r,n)=>e&&n[e]||r&&n[r]),m=(0,i.Mz)(c,e=>e.folders,(e,r)=>e&&r[e]),p=(0,i.Mz)(m,a.D,(e,r)=>e&&e.id!==r?e:void 0);(0,i.Mz)(u,p,(e,r)=>e||r)},284321:(e,r,n)=>{n.d(r,{$c:()=>ev,AC:()=>tb,Dc:()=>e1,F9:()=>q,FZ:()=>ep,GS:()=>eC,Io:()=>M,Iy:()=>tE,JI:()=>e4,MH:()=>en,MW:()=>eH,Mh:()=>x,Pd:()=>U,Pg:()=>H,Qp:()=>ty,Wz:()=>el,bh:()=>es,cM:()=>J,dM:()=>ei,dU:()=>eA,e_:()=>k,fA:()=>e0,h3:()=>em,ju:()=>eK,oB:()=>e8,p9:()=>ew,qN:()=>tT,tK:()=>ea,x$:()=>tf,x6:()=>eu,y6:()=>ex});var i=n(561546),a=n(3360),o=n(922827),s=n(258214),l=n(636149),c=n.n(l),d=n(595977),u=n.n(d),m=n(35645),p=n.n(m),h=n(802691),_=n.n(h),g=n(302245),f=n(966712),E=n(716034),y=n(418956),b=n(97395),v=n(154483),I=n(875847),T=n(951546),S=n(335682),w=n(529928),A=n(416095),C=n(243987),N=n(49116),L=n(998612),O=n(173454),R=n(243999),P=n(234945),D=n(693223);let k=e=>e.library,M=e=>e.library.libraryPublishingMode,F=e=>e.openFile?.publishedHubFile,x=e=>e.library.openHubFilePublished__LIVEGRAPH.components,U=e=>e.library.openHubFilePublished__LIVEGRAPH.stateGroups,B=e=>e.library.openHubFilePublished__LIVEGRAPH.styles,V=e=>e.library.openHubFilePublished__LIVEGRAPH.variables,G=e=>e.library.openHubFilePublished__LIVEGRAPH.variableSets,H=(0,g.Mz)([x,B,V,G,U],(e,r,n,i,o)=>!(0,a.Im)(e)||!(0,a.Im)(r)||!(0,a.Im)(n)||!(0,a.Im)(i)||!(0,a.Im)(o)),K=(0,g.Mz)([S.XJ,N.qV],(e,r)=>e&&r[e]||{}),W=(0,g.Mz)([S.XJ,N.ZA],(e,r)=>e&&r[e]||{}),$=e=>e.library.local.thumbnails,Y=e=>e.library.openFilePublished__LIVEGRAPH.styles,z=e=>e.library.openFilePublished__LIVEGRAPH.variableSets,j=e=>e.library.openFilePublished__LIVEGRAPH.modules,q=(0,g.Mz)([K,Y,z,j],(e,r,n,i)=>!(0,a.Im)(r)||!(0,a.Im)(e)||!(0,a.Im)(n)||!(0,a.Im)(i)),Z=(0,g.Mz)([e=>e.library.local.styles,S.sS,M,e=>e.library.publishableStyles,B,F,$],(e,r,n,i,a,o,l)=>{if(n===O.o.HUBFILE&&o){let n=(0,s.l)(o.libraryKey),{newLocal:c}=(0,A.rC)(A.w8,i,a,e,l,{},r||"",n,new Set,O.PW.STYLE);return c}return e}),X=(0,g.Mz)([Y,B,M],(e,r,n)=>n===O.o.HUBFILE?r:e),J=(0,g.Mz)([Z,X],(e,r)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let n={};for(let i of Object.values(e)){let e=eL(i,r[i.node_id],eR);n[i.node_id]={...i,status:e}}return n}),Q=(0,g.Mz)([e=>e.library.local.components,S.sS,M,x,F,e=>e.library.publishableSymbols,$],(e,r,n,i,a,o,l)=>{if(n===O.o.HUBFILE&&a){let n=(0,s.l)(a.libraryKey),{newLocal:c}=(0,A.rC)(A.i_,o,i,e,l,{},r||"",n,new Set,O.PW.COMPONENT);return c}return e}),ee=(0,g.Mz)([K,x,M],(e,r,n)=>n===O.o.HUBFILE?r:e),et=(0,g.Mz)([function(e){return e.library.local.stateGroups},S.sS,M,U,F,e=>e.library.publishableStateGroups,$],(e,r,n,i,a,o,l)=>{if(n===O.o.HUBFILE&&a){let n=(0,s.l)(a.libraryKey),{newLocal:c}=(0,A.rC)(A.LB,o,i,e,l,{},r||"",n,new Set,O.PW.STATE_GROUP);return c}return e}),er=(0,g.Mz)([W,U,M],(e,r,n)=>n===O.o.HUBFILE?r:e),en=(0,g.Mz)([Q,ee,et,er],(e,r,n,i)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let a={},o=(e,r)=>{if(r?.content_hash!==e.content_hash||!(0,A.pD)(r.name,e?.name)||!(0,A.pD)(r.description,e.description)||(0,A.Q_)(r.containing_frame,e?.containing_frame))return!0;let a=(0,A.E2)(e),o=a&&n[a]||null,s=(0,A.E2)(r),l=s&&i[s]||null;return o?!l||eP(o,l):null!=l};for(let n of Object.values(e)){let e=eL(n,r[n.node_id],o);a[n.node_id]={...n,status:e}}return a}),ei=(0,g.Mz)([et,er],(e,r)=>{if(!(0,f.kc)().ds_remove_redux_library_status)return e;let n={};for(let i of Object.values(e)){let e=eL(i,r[i.node_id],eP);n[i.node_id]={...i,status:e}}return n}),ea=(0,b.P8)([e=>{let r={};return Object.entries(e.library.localVariablesById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},e=>e.library.openFilePublished__LIVEGRAPH.variables,S.tB,M,F,V],(e,r,n,i,a,o)=>{let l={},c=i===O.o.HUBFILE&&a?o:r,d=n?.key??"",u=i===O.o.HUBFILE&&a?(0,s.l)(a.libraryKey):(0,s.l)(n?.libraryKey??"");for(let[r,n]of Object.entries(c))e.hasOwnProperty(r)||(l[r]={...n,subscriptionStatus:"LOCAL",isPublishable:!1,modeValues:{},keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:d,file_key_source:v.Ps.LOCAL_FILE,library_key:u,hasOnlyBeenReordered:!1});for(let r of Object.values(e)){let e=c[r.node_id],n=eL(r,e,eD);l[r.node_id]={...r,status:n,file_key:d,file_key_source:v.Ps.LOCAL_FILE,library_key:u,key:e?.key,hasOnlyBeenReordered:r&&e&&r.version===e.version&&r.sortPosition!==e.sortPosition}}return l}),eo=(0,g.Mz)([ea],e=>c()(Object.values(e),e=>e.variableSetId)),es=(0,b.P8)([e=>{let r={};return Object.entries(e.library.localVariableSetsById).forEach(([e,n])=>{n.isSoftDeleted||(r[e]=n)}),r},z,eo,S.tB,M,F,G],(e,r,n,i,a,l,c)=>{let d=a===O.o.HUBFILE&&l?c:r,u=i?.key??"",m=a===O.o.HUBFILE&&l?(0,s.l)(l.libraryKey):(0,s.l)(i?.libraryKey??""),p={};for(let[r,n]of Object.entries(d))e.hasOwnProperty(r)||(p[r]={...n,subscriptionStatus:"LOCAL",modes:[],defaultModeID:"",isPublishable:!1,keyForPublish:n.key,status:O.E8.DELETED,deletedFromSceneGraph:!0,isSoftDeleted:!0,file_key:u,file_key_source:v.Ps.LOCAL_FILE,library_key:m,variableSetError:o.HG$.NONE});for(let r of Object.values(e)){let e=d[r.node_id],i=function(e,r,n){let i=eL(e,r,ek);if(i!==O.E8.CURRENT)return i;for(let e of n)if(e.status!==O.E8.CURRENT&&e.status!==O.E8.NOT_STAGED)return O.E8.CHANGED;return O.E8.CURRENT}(r,e,n[r.node_id]??[]);p[r.node_id]={...r,status:i,file_key:u,file_key_source:v.Ps.LOCAL_FILE,library_key:m,key:e?.key}}return p}),el=(0,g.Mz)([en],e=>{let r={};for(let n of Object.values(e)){let e=(0,A.E2)(n);null!=e&&(r[e]=r[e]??[],r[e].push(n))}return r}),ec=(0,g.Mz)([en],e=>_()(e,e=>!(0,A.ad)(e)));function ed(e,r){return!!r&&!(r.version===e.version&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description))}let eu=(0,g.Mz)([e=>e.library.local.modules,j,e=>e.library.openHubFilePublished__LIVEGRAPH.modules,F,M],(e,r,n,i,a)=>{if(!(0,f.kc)().dse_module_publish)return{};let o={};if(a===O.o.HUBFILE&&i)for(let[r,i]of Object.entries(n))Object.keys(e).includes(r)||(o[r]={...i,status:O.E8.DELETED,deletedFromSceneGraph:!0});let s=a===O.o.HUBFILE?n:r;for(let r of Object.values(e)){let e=eL(r,s[r.node_id],ed);o[r.node_id]={...r,status:e}}return o}),em=(0,g.Mz)([eu],e=>(0,f.kc)().dse_editor_templates_v1?Object.fromEntries(Object.entries(e).filter(([,e])=>e.moduleSource===o.QjO.EDITOR_TEMPLATE)):{}),ep=(0,g.Mz)([ec,ei],(e,r)=>({...e,...r})),eh=(0,g.Mz)([ep],e=>u()(e,e=>(0,A.CG)(e))),e_=(0,g.Mz)([ep],e=>Object.values(e).some(e=>(0,A.HF)(e.status))),eg=(0,g.Mz)([eu],e=>Object.values(e).some(e=>(0,A.HF)(e.status)));(0,g.Mz)([e_,eg],(e,r)=>e||r);let ef=(0,g.Mz)([ep,P.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),eE=(0,g.Mz)([eu,P.Xt],(e,r)=>Object.keys(r).reduce((r,n)=>(e[n]&&(r[n]=e[n]),r),Object.create(null))),ey=(0,g.Mz)([J,ep,es,eu],(e,r,n,i)=>Object.keys(e).length>0||Object.keys(r).length>0||Object.keys(n).length>0||Object.keys(i).length>0),eb=(0,w.bt)(ey),ev=(0,E.eU)(e=>{if(e(eb))return!0;for(let r of Object.keys(T.Mk))if((0,L.O)(r)&&T.Mk[r].local){for(let n of Object.values(e(T.Mk[r].local)))if(!n.isSoftDeleted)return!0}return!1}),eI=(e,r)=>null!=e.status&&(!!(0,A.lg)(e.status)||!!(0,A.Hb)(e.status)&&(r?r.has(e.node_id):!!e.old_key)),eT=(e,r)=>eI(e,r)&&(0,A.HF)(e.status),eS=(0,w.bt)(e=>e.userStateLoaded),ew=(0,E.eU)(e=>e(eS)&&e(S.yV)?.canEdit&&(e(tT)||e(ev))),eA=(0,g.Mz)([en,ei,J,(e,r)=>r],eN),eC=(0,g.Mz)([en,ei,J],(e,r,n)=>eN(e,r,n,void 0));function eN(e,r,n,i){let a={...e,...r,...n},o=new Set(i?Object.keys(i).filter(e=>"FORCED_COPY"!==i[e].publishType):Object.values(a).filter(e=>!!e.old_key).map(e=>e.node_id));return Array.from(o).map(r=>e[r]&&(0,A.E2)(e[r])).filter(e=>!!e).forEach(e=>{o.add(e)}),o}let eL=(e,r,n)=>{let i=r&&null==r.unpublished_at,a="isSoftDeleted"in e&&e.isSoftDeleted,o=!!e.isPublishable&&!a;return i&&!o?O.E8.DELETED:!i&&o?O.E8.NEW:i||o?n(e,r)?O.E8.CHANGED:O.E8.CURRENT:O.E8.NOT_STAGED},eO=(e,r)=>!(r&&r.content_hash===e?.content_hash&&(0,A.pD)(r.name,e.name)&&(0,A.pD)(r.description,e.description)),eR=(e,r)=>eO(e,r)||!(0,A.pD)(r.sort_position,e.sort_position),eP=(e,r)=>!(r&&r.version===e.version&&!(0,A.Q_)(r.containing_frame,e?.containing_frame)&&(0,A.pD)(r.name,e?.name)&&(0,A.pD)(r.description,e.description)),eD=(e,r)=>!e||!r||r.version!==e.version||r.sortPosition!==e.sortPosition,ek=(e,r)=>!(r&&r.version===e?.version);function eM(e,r,n,a){let[o,s]=p()(r,r=>eI(r,e)),[l,c]=p()(o,n),[d,u]=p()(s,e=>(0,A.HF)(e.status));return{modified:{erroneous:(0,i.Ul)(l,...a),wellFormed:(0,i.Ul)(c,...a)},unmodified:{published:(0,i.Ul)(d,...a),unpublished:(0,i.Ul)(u,...a)}}}function eF(e,r){return null==r?eB(e):eU(e,r)}let ex=(0,y.Iz)(e=>{let r=e?(0,w.bt)(r=>eF(r,e)):(0,w.bt)(eB),n=e?(0,w.bt)(r=>eA(r,e)):(0,E.eU)(new Set);return(0,E.eU)(e=>{let i=e(r),a=e(n),o=Object.values(e(R.t).data??{});return{...i,libraryAssets:{[O.PW.RESPONSIVE_SET]:eM(a,(0,L.O)(O.PW.RESPONSIVE_SET)?o.filter(e=>e.type===O.PW.RESPONSIVE_SET):[],()=>!1,[A.gA]),[O.PW.CODE_COMPONENT]:eM(a,(0,L.O)(O.PW.CODE_COMPONENT)?o.filter(e=>e.type===O.PW.CODE_COMPONENT):[],()=>!1,[A.gA])}}})}),eU=(0,g.Mz)([J,en,ei,ep,es,ea,eu,eA,(e,r)=>r],eV),eB=(0,g.Mz)([J,en,ei,ep,es,ea,eu,eC],(e,r,n,i,a,o,s,l)=>eV(e,r,n,i,a,o,s,l,void 0));function eV(e,r,n,i,a,o,s,l,c){let d=(e,r)=>{if(!c)return 0;let n=c[e.node_id],i=c[r.node_id];return n&&i?"FORCED_COPY"===n.publishType&&"FORCED_COPY"!==i.publishType?1:"FORCED_COPY"!==n.publishType&&"FORCED_COPY"===i.publishType?-1:0:0},u=[...new Set(Object.values(o).filter(e=>!e.isPublishable).map(e=>e.variableSetId))].map(e=>a[e]).filter(e=>!!e);return{styles:eM(l,Object.values(e),()=>!1,[A.Lk,d]),components:eM(l,Object.values(r),A.zE,[A.gA,d]),stateGroups:eM(l,Object.values(n),A.zE,[A.gA,d]),productComponents:eM(l,Object.values(i),A.zE,[A.gA,d]),variableSets:eM(l,(0,f.kc)().ds_variables_extended_sets?Object.values(a):Object.values(a).filter(e=>!(0,O.GI)(e)),A.RQ,[A.MA]),variableSetsWithHiddenVariables:eM(l,u,()=>!1,[A.MA]),variables:eM(l,Object.values(o),()=>!1,[A.MA]),modules:eM(l,(0,L.O)(O.PW.MODULE)?Object.values(s):[],()=>!1,[A.gA])}}let eG=(0,b.P8)([eo],e=>Object.fromEntries(Object.entries(e).map(([e,r])=>[e,eM(new Set,r,()=>!1,[A.MA])]))),eH=()=>(0,b.P8)([eG,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.modified.wellFormed:[]}),eK=()=>(0,b.P8)([eG,(e,r)=>r],(e,r)=>{let n=e[r];return n?n.unmodified.unpublished.filter(e=>!e.isPublishable):[]}),eW=(0,g.Mz)([eF],e=>e.styles.modified.wellFormed),e$=(0,g.Mz)([J],e=>Object.values(e).filter(e=>eT(e))),eY=(0,g.Mz)([eF],e=>e.components.modified.wellFormed),ez=(0,g.Mz)([eF],e=>e.stateGroups.modified.wellFormed),ej=(0,g.Mz)([eF],e=>e.productComponents.modified.wellFormed),eq=(0,g.Mz)([ej],e=>e.filter(e=>(0,A.HF)(e.status))),eZ=(0,g.Mz)([eF],e=>e.variableSets.modified.wellFormed),eX=(0,g.Mz)([eZ],e=>e.filter(e=>(0,A.HF)(e.status))),eJ=(0,g.Mz)([eF],e=>(0,L.O)(O.PW.MODULE)?e.modules.modified.wellFormed:[]),eQ=(0,g.Mz)([eJ],e=>e.filter(e=>(0,A.HF)(e.status))),e0=(0,g.Mz)([S.tB,D.P],(e,r)=>!!((0,f.kc)().cmty_lib_admin_publish&&e?.publishedHubFile)||!((0,f.kc)().ps_benchmark&&(0,I.jd)(e?.project))&&!!(e&&(0,C.w5)(e.teamId?r[e.teamId]:null))),e1=eW,e2=(0,g.Mz)([e1],e=>e.length>0),e5=(0,y.Iz)(e=>(0,w.bt)(r=>e2(r,e))),e3=(0,g.Mz)([e$],e=>e.length>0),e6=(0,w.bt)(e3),e8=(0,g.Mz)([eY,e0],(e,r)=>r?e:[]),e4=(0,g.Mz)([ez,e0],(e,r)=>r?e:[]),e9=(0,g.Mz)([ej,e0],(e,r)=>r?e:[]),e7=(0,g.Mz)([e9],e=>e.length>0),te=(0,y.Iz)(e=>(0,w.bt)(r=>e7(r,e))),tt=(0,g.Mz)([eq,e0],(e,r)=>r?e:[]),tr=(0,g.Mz)([tt],e=>e.length>0),tn=(0,y.Iz)(e=>(0,w.bt)(r=>tr(r,e))),ti=(0,g.Mz)([eZ],e=>e),ta=(0,g.Mz)([ti],e=>e.length>0),to=(0,y.Iz)(e=>(0,w.bt)(r=>ta(r,e))),ts=(0,g.Mz)([eX],e=>e),tl=(0,g.Mz)([ts],e=>e.length>0),tc=(0,y.Iz)(e=>(0,w.bt)(r=>tl(r,e))),td=(0,g.Mz)([eJ,e0],(e,r)=>r?e:[]),tu=(0,g.Mz)([td],e=>e.length>0),tm=(0,y.Iz)(e=>(0,w.bt)(r=>tu(r,e))),tp=(0,g.Mz)([eQ],e=>e.length>0),th=(0,y.Iz)(e=>(0,w.bt)(r=>tp(r,e))),t_=(0,y.Iz)(e=>(0,E.eU)(r=>{for(let n of Object.values(r(ex(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type))return!0;return!1})),tg=(0,y.Iz)(e=>(0,E.eU)(r=>{for(let n of Object.values(r(ex(e)).libraryAssets))if(n.modified.wellFormed.length>0&&(0,L.O)(n.modified.wellFormed[0].type)&&n.modified.wellFormed.some(e=>(0,A.HF)(e.status)))return!0;return!1})),tf=(0,y.Iz)(e=>{let r=(0,w.bt)(r=>e1(r,e)),n=(0,w.bt)(r=>e9(r,e)),i=(0,w.bt)(r=>ti(r,e)),a=(0,w.bt)(r=>td(r,e));return(0,E.eU)(o=>{let s=o(r),l=o(n),c=o(i),d=o(a),u=o(ex(e)),m=Object.keys(u.libraryAssets).flatMap(e=>(0,L.O)(e)?u.libraryAssets[e].modified.wellFormed:[]);return[...s.map(e=>e.node_id),...l.map(e=>e.node_id),...c.map(e=>e.node_id),...d.map(e=>e.node_id),...m.map(e=>e.node_id)]})}),tE=(0,y.Iz)(e=>(0,E.eU)(r=>r(e5(e))||r(te(e))||r(to(e))||r(tm(e))||r(t_(e))));(0,y.Iz)(e=>(0,E.eU)(r=>r(e6)||r(tn(e))||r(tc(e))||r(th(e))||r(tg(e)))),(0,g.Mz)([ef,e9],(e,r)=>r.some(r=>e[r.node_id])),(0,g.Mz)([eE,td],(e,r)=>r.some(r=>e[r.node_id]));let ty=(0,g.Mz)([eh,N.c5],(e,r)=>({...r,...e})),tb=(0,g.Mz)([td],e=>e.map(e=>e.node_id));(0,g.Mz)([e4],e=>e.map(e=>e.node_id));let tv=(0,E.eU)(e=>Object.values(e(R.t).data??{}).some(e=>(0,A.HF)(e.status))),tI=(0,w.bt)(q),tT=(0,E.eU)(e=>e(tI)||e(tv))},57392:(e,r,n)=>{n.d(r,{Bw:()=>$,I7:()=>ee,P1:()=>Z,S9:()=>q,WE:()=>ei,WJ:()=>Q,Yy:()=>W,bA:()=>X,cb:()=>er,ij:()=>U,j_:()=>z,jk:()=>j,lm:()=>x,mO:()=>Y,nm:()=>ea,pk:()=>et,t_:()=>en,wy:()=>eo});var i=n(177131),a=n(922827),o=n(572304),s=n(695956),l=n.n(s),c=n(302245),d=n(418956),u=n(716034),m=n(627472),p=n(97395),h=n(553716),_=n(154483),g=n(974105),f=n(420576),E=n(848661),y=n(529928),b=n(416095),v=n(173454),I=n(950919),T=n(49116),S=n(234945),w=n(388094),A=n(207584);function C(e,r,n,a,o){let s=Object.create(null);for(let{key:r,version:i}of e)if(r){if(r in n){let e=r;r=n[r],i=o?.[e]===i?i:"FAKE_VERSION_FOR_MOVED_ITEM"}s[r]=s[r]||new Set,s[r].add(i)}for(let e of r)if(e in a){let r=a[e];s[r]=s[r]||new Set,s[r].add((0,i.Xf)("FAKE_VERSION_FOR_MOVED_ITEM"))}return s}let N=(0,c.Mz)([w._Q,S.O1,I.aR,I.BE,e=>{let{styles:r,destinationStyleKeyToLegacySourceStyle:n}=e.library.used__LIVEGRAPH;return Object.values(r).reduce((e,r)=>{if("loaded"!==r.status||!n[r.data.key])return e;let{key:i,version:a}=n[r.data.key];return e[i]=a,e},Object.create(null))}],C),L=(0,c.Mz)([w.m0,S.T_,I.aR,I.BE],C),O=(0,c.Mz)([w.v3],e=>C(e,[],{},{})),R=(0,c.Mz)([w.Du],e=>Object.values(e).reduce((e,r)=>(e.has(r.key)||e.set(r.key,new Set),r.pageIds.forEach(n=>e.get(r.key)?.add(n)),e),new Map));function P(e,r,n){if(0===e.size)return!1;if(1===e.size){let i=Array.from(e)[0],a=n(r);return a?.toLowerCase()!==i.toLowerCase()}return!0}let D=(0,_.fv)();function k({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:a,getUpdateAsset:o}){let s=[];for(let l of Object.keys(r)){let c=e[(0,i.sg)(l)];!(!c||n&&(0,f.dp)(n,D(c)))&&P(r[(0,i.sg)(l)],c,a)&&s.push(o(c))}return s}let M=(0,c.Mz)([A.wi,N,g.d1,I.uB,I.tp,I.J8,w.tY,S.tX],(e,r,n,i,a,o,s,l)=>{let c=!1,d=[],u=!1;return{styleUpdatesForAllPages:k({publishedAssetsByKey:e,usedVersionsByAssetKey:r,editingFile:n,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]};if(e.key in i&&(r.oldSubscribedKeysToUpdate=Array.from(i[e.key]),!o[e.key]))for(let e of(c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(u=!0);if(e.key in a){for(let n of(r.localIdsToUpdate=Array.from(a[e.key]),o[e.key]||(c=!0),r.localIdsToUpdate))if(l.has(n)){u=!0;break}}return(s.has(e.key)||r.oldSubscribedKeysToUpdate.some(e=>s.has(e))||r.localIdsToUpdate.some(e=>l.has(e)))&&d.push(r),r}}),styleUpdatesForCurrentPage:d,includesMoveUpdatesOnAnyPage:c,includesMoveUpdatesOnCurrentPage:u}}),F=(0,p.P8)([T.Ls,L],(e,r)=>{let n=Object.keys(r),i=Object.keys(e);return l()(n,i)}),x=(0,c.Mz)([F,T.m3,w.S_,S.dK],(e,r,n,i)=>{let a=new Map;for(let o of e){let e=n[o];if(!e)continue;let s=i.get(e.nodeId),l=s?.parentNode;if(s&&l&&s.isState&&l?.stateGroupKey){let e=r[l.stateGroupKey];e&&a.set(o,e)}}return a}),U=(0,c.Mz)([T.Ls,T.ZA,L,g.d1,I.uB,I.tp,w.ty,S.BA],(e,r,n,i,a,o,s,l)=>{let c=!1,d=!1,u=k({publishedAssetsByKey:e,usedVersionsByAssetKey:n,editingFile:i,getVersion:e=>e.content_hash,getUpdateAsset:e=>{let r={...e,oldSubscribedKeysToUpdate:[],localIdsToUpdate:[]},n=e.component_key;if(n in a)for(let e of(r.oldSubscribedKeysToUpdate=Array.from(a[n]),c=!0,r.oldSubscribedKeysToUpdate))s.has(e)&&(d=!0);if(n in o){for(let e of(r.localIdsToUpdate=Array.from(o[n]),c=!0,r.localIdsToUpdate))if(l.has(e)){d=!0;break}}return r}}),m=[],p=[],h=[],_=[],g=new Set;for(let e of u){let n=e.containing_frame?.containingStateGroup?.nodeId;if(n){let i=r[e.library_key]?.[n];if(i){let r=h.find(e=>e.key===i.key);if(null==r&&(r={...i,newStateKeyToOutdatedItems:{}},h.push(r)),e.component_key){let n=e.component_key;r.newStateKeyToOutdatedItems[n]={oldSubscribedKeysToUpdate:e.oldSubscribedKeysToUpdate,localIdsToUpdate:e.localIdsToUpdate},(s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&!g.has(i.key)&&(_.push(r),g.add(i.key))}}}else m.push(e),(e.component_key&&s.has(e.component_key)||e.oldSubscribedKeysToUpdate.some(e=>s.has(e))||e.localIdsToUpdate.some(e=>l.has(e)))&&p.push(e)}return{componentUpdatesForAllPages:m,stateGroupUpdatesForAllPages:h,includesMoveUpdatesOnAnyPage:c,componentUpdatesForCurrentPage:p,stateGroupUpdatesForCurrentPage:_,includesMoveUpdatesOnCurrentPage:d}}),B=(0,_.fv)(),V=(0,c.Mz)([T.a3,T.gJ,O,g.d1,R,e=>e.mirror.appModel.currentPage],(e,r,n,o,s,l)=>{let c={},d=new Set,u=a.glU?.getInternalCanvasNodeId();for(let a of Object.keys(n)){let m=e[(0,i.ey)(a)];if(!m||o&&(0,f.dp)(o,B(m)))continue;let p=r[(0,i.yG)(m.variableCollectionKey)];if(!p)continue;let _=c[(0,i.yG)(m.variableCollectionKey)]||{...p,libraryVariableIdsForUpdate:[]};if((0,v.GI)(_)){(0,h.x1)("variables","Encountered variable bound to variable set extension");continue}let g=n[m.key];if(g&&P(g,m,e=>e.version)&&_.libraryVariableIdsForUpdate.push(m.node_id),_.libraryVariableIdsForUpdate.length>0&&(c[(0,i.yG)(p.key)]=_,s.has(p.key))){let e=s.get(p.key);(e?.has(l)||u&&e?.has(u))&&d.add(p.key)}}let m=Object.values(c),p=m.filter(e=>d.has(e.key));return{variableSetUpdatesForAllPages:m,variableSetUpdatesForCurrentPage:p}}),G=(0,y.bt)(U),H=(0,y.bt)(M),K=(0,y.bt)(V),W=(0,d.Iz)(e=>(0,u.eU)(r=>{let{componentUpdatesForAllPages:n,componentUpdatesForCurrentPage:i}=r(G);return e===b.aD.ALL?n:i})),$=(0,d.Iz)(e=>(0,u.eU)(r=>{let{stateGroupUpdatesForAllPages:n,stateGroupUpdatesForCurrentPage:i}=r(G);return e===b.aD.ALL?n:i})),Y=(0,d.Iz)(e=>(0,u.eU)(r=>{let{styleUpdatesForAllPages:n,styleUpdatesForCurrentPage:i}=r(H);return e===b.aD.ALL?n:i})),z=(0,m.mg)(H,e=>e.styleUpdatesForAllPages),j=(0,d.Iz)(e=>(0,u.eU)(r=>{let{variableSetUpdatesForAllPages:n,variableSetUpdatesForCurrentPage:i}=r(K);return e===b.aD.ALL?n:i})),q=(0,u.eU)(e=>{let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,includesMoveUpdatesOnAnyPage:i}=e(G),{styleUpdatesForAllPages:a,includesMoveUpdatesOnAnyPage:o}=e(H),{variableSetUpdatesForAllPages:s}=e(K);return{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n,styleUpdatesForAllPages:a,variableSetUpdatesForAllPages:s,includesMoveStyleUpdatesOnAnyPage:o,includesMoveComponentUpdatesOnAnyPage:i}}),Z=(0,u.eU)(e=>{let{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,includesMoveUpdatesOnCurrentPage:i}=e(G),{styleUpdatesForCurrentPage:a,includesMoveUpdatesOnCurrentPage:o}=e(H),{variableSetUpdatesForCurrentPage:s}=e(K);return{componentUpdatesForCurrentPage:r,stateGroupUpdatesForCurrentPage:n,styleUpdatesForCurrentPage:a,variableSetUpdatesForCurrentPage:s,includesMoveStyleUpdatesOnCurrentPage:o,includesMoveComponentUpdatesOnCurrentPage:i}}),X=(0,d.Iz)(e=>(0,u.eU)(r=>{let{componentUpdatesForAllPages:n,stateGroupUpdatesForAllPages:i,styleUpdatesForAllPages:a,variableSetUpdatesForAllPages:o}=r(q),{componentUpdatesForCurrentPage:s,stateGroupUpdatesForCurrentPage:l,styleUpdatesForCurrentPage:c,variableSetUpdatesForCurrentPage:d}=r(Z);return e===b.aD.ALL?{scopedComponentUpdates:n,scopedStateGroupUpdates:i,scopedStyleUpdates:a,scopedVariableSetUpdates:o}:{scopedComponentUpdates:s,scopedStateGroupUpdates:l,scopedStyleUpdates:c,scopedVariableSetUpdates:d}})),J=(0,m.mg)(q,({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:i,includesMoveStyleUpdatesOnAnyPage:a,includesMoveComponentUpdatesOnAnyPage:o})=>{let s=e.length+r.length+n.length+i.length;return{updateCount:s,hasUpdates:s>0,includesMoveStyleUpdatesOnAnyPage:a,includesMoveComponentUpdatesOnAnyPage:o}}),Q=(0,m.mg)(Z,({componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:i,includesMoveStyleUpdatesOnCurrentPage:a,includesMoveComponentUpdatesOnCurrentPage:o})=>{let s=e.length+r.length+n.length+i.length;return{updateCount:s,hasUpdates:s>0,includesMoveStyleUpdatesOnCurrentPage:a,includesMoveComponentUpdatesOnCurrentPage:o}}),ee=(0,m.mg)(J,({hasUpdates:e})=>e);(0,m.mg)(Q,({hasUpdates:e})=>e);let et=(0,d.Iz)(e=>(0,u.eU)(r=>r(e===b.aD.ALL?J:Q).hasUpdates)),er=(0,m.mg)(J,({updateCount:e})=>e);(0,m.mg)(Q,({updateCount:e})=>e);let en=(0,d.p6)([q],({componentUpdatesForAllPages:e,stateGroupUpdatesForAllPages:r,styleUpdatesForAllPages:n,variableSetUpdatesForAllPages:i})=>({componentUpdateKeys:(0,b.X7)(e),stateGroupUpdateKeys:(0,b.X7)(r),styleUpdateKeys:(0,b.X7)(n),variableSetKeys:(0,b.X7)(i)})),ei=(0,y.bt)(e=>e.library.libraryUpdatesBannerDismissed);function ea(e,r){let n=(0,S.dK)(e).get((0,o.dI)(E.E7(r)?.guid)??o.AD);if(!n)return null;let i=n.guid,a=n.styleKeyForPublish,s=n.styleVersionHash;return a&&s?{GUID:i,key:a,version:s,isLocalStyle:n.isLocalStyle}:null}let eo=(0,u.eU)(!1)},950919:(e,r,n)=>{n.d(r,{BE:()=>u,J8:()=>_,Q$:()=>g,aR:()=>d,tp:()=>h,uB:()=>p});var i=n(177131),a=n(302245),o=n(97395),s=n(529928),l=n(207584);let c=e=>e.library.movedLibraryItems,d=(0,a.Mz)([(0,o.Vh)(c,e=>e.subscribed),l.og],(e,r)=>({...e,...r})),u=(0,a.Mz)([c,l.KM],(e,r)=>({...e.local,...r}));function m(e){let r=Object.create(null);for(let n in e){let a=e[(0,i.sg)(n)];r[a]=r[a]||new Set,r[a].add((0,i.sg)(n))}return r}let p=(0,a.Mz)([d],m),h=(0,a.Mz)([u],m),_=e=>e.library.used__LIVEGRAPH.destinationStyleKeyToLegacySourceStyle,g=(0,s.bt)(_)},234945:(e,r,n)=>{n.d(r,{$4:()=>h,$J:()=>d,$u:()=>_,AF:()=>u,BA:()=>T,F4:()=>E,O1:()=>y,T_:()=>I,Xt:()=>s,dK:()=>l,dT:()=>g,f5:()=>S,qd:()=>c,rT:()=>f,t:()=>p,tX:()=>b,tn:()=>v});var i=n(302245),a=n(97395),o=n(529928);let s=e=>e.mirror.sceneGraphSelection,l=e=>e.mirror.sceneGraph,c=(0,a.Zm)(e=>Object.keys(s(e)));function d(e){let r=Object.keys(s(e));return 1===r.length?r[0]:null}let u=(0,i.Mz)([l,d],(e,r)=>r?e.get(r):null),m=()=>(e,r)=>l(e).get(r);function p(){let e=m();return(0,a.Zm)((r,n)=>{let i=e(r,n);return null==i?null:{key:i.styleKeyForPublish,version:i.styleVersionHash}})}function h(){let e=p();return(0,a.Zm)((r,n)=>new Map(n.map(n=>[n,e(r,n)])))}function _(e){return e.mirror.selectionProperties.numSelected||0}let g=(0,a.P8)([c,l],f);function f(e,r){let n=[];return e.forEach(e=>{let i=r.get(e);(i?.type==="INSTANCE"||i?.isInstanceSublayer)&&n.push(e)}),n}let E=(0,i.Mz)([l,c],(e,r)=>{let n=[];return r.forEach(r=>{let i=e.get(r);i&&n.push(i)}),n});(0,a.Zm)(e=>e.library.publishableStyles.map(e=>e.nodeId));let y=(0,a.Zm)(e=>e.library.localStylesThatHaveUsagesOnLoadedPages),b=(0,a.Zm)(e=>new Set(e.library.localStylesThatHaveUsagesOnCurrentPage)),v=(0,o.bt)(y),I=(0,a.Zm)(e=>e.library.localSymbolsThatHaveUsagesOnLoadedPages),T=(0,a.Zm)(e=>new Set(e.library.localSymbolsThatHaveUsagesOnCurrentPage));function S(e,r){let n=l(e);return!n.get(r)?.visible}},241691:(e,r,n)=>{n.d(r,{b:()=>a,e:()=>o});var i=n(572304);function a(e,r,n){if(!r)return null;let a=(()=>{let a;let o=e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey[r];if(o)return o;if(!n)return null;if("type"in n){let r=e.library.local.styles[n.node_id];if(r?.key!==n.key)return null;a=r.node_id}else a=(0,i.dI)(n.guid);return a?e.library.used__LIVEGRAPH.localNodeIdToDestinationKey[a]:null})();return e.library.used__LIVEGRAPH.styles[a??r]??null}function o(e,r){let{stylePreviewShown:n}=e;return n.isShown&&!n.isCreating&&n.style===r}},388094:(e,r,n)=>{n.d(r,{C9:()=>A,Co:()=>I,Du:()=>_,EY:()=>L,J5:()=>C,LL:()=>k,MH:()=>R,OQ:()=>P,S_:()=>g,_Q:()=>y,jf:()=>N,kc:()=>O,m0:()=>m,sm:()=>x,tY:()=>F,ty:()=>D,v3:()=>h});var i=n(89865),a=n.n(i),o=n(184058),s=n.n(o),l=n(302245),c=n(97395),d=n(529928);function u(e){return(0,c.Vh)(e=>e.library,e)}let m=u(e=>e.subscribedSymbolsFromLoadedPages),p=u(e=>e.subscribedSymbolsOnCurrentPage),h=(0,c.P8)([e=>e.library.subscribedVariablesByIdFromLoadedPages],e=>Object.values(e)),_=e=>e.library.subscribedVariableSetsByIdFromLoadedPages,g=(0,l.Mz)([m],e=>a()(e,e=>e.key)),f=u(e=>e.subscribedStateGroupsFromLoadedPages),E=u(e=>e.subscribedStateGroupsOnCurrentPage),y=u(e=>e.directlySubscribedStylesFromLoadedPages),b=u(e=>e.directlySubscribedStylesOnCurrentPage),v=u(e=>e.indirectlySubscribedStylesFromLoadedPages),I=(0,l.Mz)([v],e=>e.length>0),T=(0,l.Mz)([y,v],(e,r)=>[...e,...r]);function S(e){return e.map(e=>e.nodeId)}function w(e){return s()(e.map(e=>e.key))}let A=(0,l.Mz)([m],S),C=(0,l.Mz)([p],S),N=(0,l.Mz)([f],S),L=(0,l.Mz)([E],S),O=(0,l.Mz)([y],S);(0,l.Mz)([b],S);let R=(0,l.Mz)([T],S),P=(0,l.Mz)([m],w),D=(0,l.Mz)([p],e=>new Set(e.map(e=>e.key))),k=(0,l.Mz)([f],w),M=(0,l.Mz)([y],w),F=(0,l.Mz)([b],e=>new Set(e.map(e=>e.key))),x=(0,d.bt)(M);(0,l.Mz)([T],w)},207584:(e,r,n)=>{n.d(r,{KM:()=>l,n1:()=>c,og:()=>s,wi:()=>d});var i=n(177131),a=n(302245),o=n(529928);let s=e=>e.library.used__LIVEGRAPH.sourceAssetKeyToDestinationKey,l=e=>e.library.used__LIVEGRAPH.localNodeIdToDestinationKey,c=(0,o.bt)(e=>e.library.used__LIVEGRAPH.sourceAssetKeyToFileName),d=(0,a.Mz)([e=>e.library.used__LIVEGRAPH.styles],function(e){let r={};for(let[n,a]of Object.entries(e))"loaded"===a.status&&(r[(0,i.n3)(n)]=a.data);return r})},837502:(e,r,n)=>{n.d(r,{Bg:()=>o,Cy:()=>l,Q3:()=>s}),n(939863);var i=n(139961);function a(e){switch(e){case null:case void 0:return i.w_.ALLOWED;default:return e}}function o(e){return a(e?.public_link_controls_setting)===i.w_.BANNED}function s(e){return[i.w_.EXPIRATION_REQUIRED,i.w_.EXP_AND_PWD_REQUIRED].includes(a(e?.public_link_controls_setting))}function l(e){return[i.w_.PASSWORD_REQUIRED,i.w_.EXP_AND_PWD_REQUIRED].includes(a(e?.public_link_controls_setting))}},514816:(e,r,n)=>{n.d(r,{Qh:()=>_,Sp:()=>C,gM:()=>I,je:()=>f,Ly:()=>v,l6:()=>E,He:()=>y,fi:()=>b});var i=n(411855),a=n(561546),o=n(966664),s=n(258214),l=n(758271),c=n.n(l),d=n(44948),u=n(966712);n(915440);var m=n(711525),p=n(30637);n(963067),n(298527);var h=n(420576);n(335682),n(279453),n(773610),n(347127),n(999881),n(875847),n(556261),n(56099);var _=(e=>(e.COMMUNITY="community",e.ORGANIZATION="organization",e.WORKSPACE="workspace",e.TEAM="team",e.FILE="file",e.USER="user",e))(_||{});let g=i.createContext(null);function f(){let{subscription:e,ensureSubscription:r}=(0,o.sR)(i.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");i.useEffect(()=>{r()},[r]);let n=i.useMemo(()=>(0,m.gB)([]),[]);return(0,p.nl)()?n:e}function E(){let e=f();return(0,d.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.fileKey)),r},[e.data])}function y(){let e=f();return(0,d.k9)(()=>{let r=new Set;return e.data?.forEach(e=>r.add(e.libraryKey)),r},[e.data])}function b(){let{untransformedSubscription:e,ensureSubscription:r}=(0,o.sR)(i.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");return i.useEffect(()=>{r()},[r]),e}function v(){let{untransformedSubscription:e}=(0,o.sR)(i.useContext(g),"Must call `useSubscribedLibraries` from within <SubscribedLibrariesContext>");if("loaded"!==e.status)return{};let r={},{file:n}=e.data;return n?.libraryOrgSubscriptions.length&&(r.org=n.libraryOrgSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryTeamSubscriptions.length&&(r.team=n.libraryTeamSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryFileSubscriptions.length&&(r.file=n.libraryFileSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),n?.libraryUserSubscriptions.length&&(r.user=n.libraryUserSubscriptions.reduce((e,r)=>{let n=r.library?.file?.libraryKey;return n&&e.add((0,s.l)(n)),e},new Set)),r}function I(e,r,n,i,s,l){if("loading"===e.status||"errors"===e.status||"disabled"===e.status)return e;let d=e.data.file;if(null==d)return(0,m.gB)([]);let p=e.data.libraryPresetSubscriptionsV2,_=d.libraryOrgSubscriptions,g=d.team?.workspace?.librarySubscriptions,f=d.libraryTeamSubscriptions,E=d.libraryUserSubscriptions,y=d.libraryFileSubscriptions,b=[..._.filter(e=>i||!e.communityLibrary).filter(e=>n?null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryFileSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride)).map(e=>T(e,"organization")),...y.filter(e=>i||!e.communityLibrary).map(e=>T(e,"file"))];if(!s&&!l&&i){let e=(p??[]).filter(e=>n?!((0,u.kc)().ps_benchmark&&(d?.parentOrgId&&null!=e.libraryOrgSubscriptionOverride||d?.teamId&&null!=e.libraryTeamSubscriptionOverride))&&null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride):null==(e.libraryOrgSubscriptionOverride||e.libraryWorkspaceSubscriptionOverride||e.libraryTeamSubscriptionOverride||e.libraryFileSubscriptionOverride)).map(e=>S(e,"community"));b.push(...e)}if(n){let e=E.filter(e=>i||!e.communityLibrary).filter(e=>e.communityLibrary?null==e.libraryFileSubscriptionOverride:null==e.libraryFileSubscriptionOverride&&e.library?.file?.parentOrgId===s).map(e=>T(e,"user"));b.push(...e)}if(r){let e=f.filter(e=>i||!e.communityLibrary).filter(w).map(e=>T(e,"team")),r=(g||[]).filter(e=>i||!e.communityLibrary).filter(e=>null==(e.libraryFileSubscriptionOverride||e.libraryTeamSubscriptionOverride)).filter(e=>e.isSubscribed).map(e=>T(e,"workspace"));b.push(...e),b.push(...r)}else{let e=(function(e){let r=(0,u.kc)().ps_benchmark,n=e?.teamId;return r&&n?e?.currentUser?.orgAwareTeamRoles?.filter(e=>e.team?.id===n).map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq):e?.currentUser?.orgAwareTeamRoles?.map(e=>e.team?.libraryTeamSubscriptions).filter(o.Vq)})(d)?.map(e=>e.filter(e=>i||!e.communityLibrary).filter(A).map(e=>T(e,"team")))??[];b.push(...(0,a.Bq)(e))}let v=c()(b.filter(o.Vq),e=>e.fileKey).filter(e=>!(0,h._V)(d,e.fileKey));return(0,a.KQ)(v,"name"),(0,m.gB)(v)}function T(e,r){let n=e.communityLibrary;return n?S({communityLibrary:n,id:e.id},r):e.library&&e.library&&e.library.file?{fileKey:e.library.file.key,libraryKey:(0,s.l)(e.library.file.libraryKey),id:e.id,name:e.library.file.name,numComponents:e.library.numComponents??0,numStateGroups:e.library.numStateGroups??0,numStyles:e.library.numStyles??0,numStylesFill:e.library.numStylesFill??0,numStylesText:e.library.numStylesText??0,numStylesEffect:e.library.numStylesEffect??0,numStylesGrid:e.library.numStylesGrid??0,numVariables:e.library.numVariables??0,numVariablesBoolean:e.library.numVariablesBoolean??0,numVariablesFloat:e.library.numVariablesFloat??0,numVariablesColor:e.library.numVariablesColor??0,numVariablesString:e.library.numVariablesString??0,numModuleAssets:e.library.numModuleAssets??0,parentOrgId:e.library.file.parentOrgId,subscriptionType:r,thumbnailUrl:e.library.file.thumbnailUrl,thumbnailUrlOverride:e.library.file.thumbnailUrlOverride,thumbnailGuid:e.library.file.thumbnailGuid}:null}function S(e,r){return e?.communityLibrary?{fileKey:e.communityLibrary.hubFileId,libraryKey:(0,s.l)(e.communityLibrary.hubFile.libraryKey),id:e.id,name:e.communityLibrary.name,numComponents:e.communityLibrary.numComponents??0,numStateGroups:e.communityLibrary.numStateGroups??0,numStyles:e.communityLibrary.numStyles??0,numStylesFill:e.communityLibrary.numStylesFill??0,numStylesText:e.communityLibrary.numStylesText??0,numStylesEffect:e.communityLibrary.numStylesEffect??0,numStylesGrid:e.communityLibrary.numStylesGrid??0,numVariables:e.communityLibrary.numVariables??0,numVariablesBoolean:e.communityLibrary.numVariablesBoolean??0,numVariablesFloat:e.communityLibrary.numVariablesFloat??0,numVariablesColor:e.communityLibrary.numVariablesColor??0,numVariablesString:e.communityLibrary.numVariablesString??0,numModuleAssets:e.communityLibrary.numModuleAssets??0,parentOrgId:null,subscriptionType:r,thumbnailUrl:e.communityLibrary.hubFile.thumbnailUrl,thumbnailUrlOverride:null,thumbnailGuid:null}:null}function w(e){return null==e.libraryFileSubscriptionOverride}function A(e){return null==(e.libraryFileSubscriptionOverride||e.libraryUserSubscriptionOverride)}function C(e,r){switch(r){case"FILL":return e.numStylesFill;case"TEXT":return e.numStylesText;case"EFFECT":return e.numStylesEffect;case"GRID":return e.numStylesGrid;default:return 0}}},937890:(e,r,n)=>{n.d(r,{OL:()=>s,_M:()=>l,jx:()=>o,wZ:()=>a});var i=n(27087);function a(e,r){return i.Ay.put("/api/team_join_link",{team_id:e,level:r}).then(({data:e})=>e.meta).catch(e=>{throw e})}function o(e){return`${window.location.origin}/team_invite/redeem/${e.token}`}n(129318),n(147206);let s=e=>`RETRIEVING_TEAM_JOIN_LINK_${e}`,l=e=>`RESETTING_TEAM_JOIN_LINK_${e}`},984968:(e,r,n)=>{n.d(r,{BU:()=>L,Cl:()=>U,Ct:()=>j,Dj:()=>N,Eq:()=>B,H7:()=>$,HE:()=>x,Me:()=>W,PS:()=>D,R5:()=>T,UQ:()=>k,ZT:()=>G,_L:()=>Y,aW:()=>R,cD:()=>H,jv:()=>q,mx:()=>S,n$:()=>z,ol:()=>K,rR:()=>P,sK:()=>O});var i=n(188507);n(561546);var a=n(268853),o=n(138020),s=n(966712),l=n(130097),c=n(886653),d=n(776621),u=n(647899);n(939863);var m=n(99506),p=n(279453),h=n(243987);n(428467);var _=n(626322);n(945020);var g=n(567088),f=n(668860);n(840912),n(668526);var E=n(479296),y=n(875847),b=n(529928),v=n(540019),I=n(147206);async function T(e){let r=[],n={};return await Promise.all(e.map(async e=>{let i=await v.M4.fetchFile(e);if(!i?.trashed_at||!i?.team_id)return;r.push(i);let a=(await (0,l.Ek)(p.Aqu,{teamId:i.team_id})).team;a?.id&&(n[a.id]=a)})),await A(r,n)}async function S(e){let r=[],n={};return await Promise.all(e.map(async e=>{let i={...await v.M4.fetchFile(e.key),folder_id:e.folderId};if(i&&r.push(i),!e.folderId)return;let a=await (0,l.Ek)(p.yU5,{projectId:e.folderId}),s=a.project?.team;s?.id&&(n[s.id]={...s,teamFileCounts:{designFileCount:s.teamFileCounts?.designFileCount??0,whiteboardFileCount:s.teamFileCounts?.whiteboardFileCount??0,slideFileCount:(0,o.oA)(s.teamFileCounts?.slideFileCount)??"0"}})})),await A(r,n)}async function w(){return(await (0,u.hW)("slides_starter_team_limits_exp")).get("is_slide_restriction_on",!1)}let A=(0,E.D)(async(e,r)=>{let n={},i={},a={},s={};for(let r of e){if(!r.folder_id)continue;let e=s[r.folder_id]??await v.M4.fetchFolder(r.folder_id);s[r.folder_id]=e;let o=r?.editor_type==="design",l=r?.editor_type==="whiteboard",c=r?.editor_type==="slides",d=(0,y.ye)(e)?0:1;r.team_id&&o&&(n[r.team_id]=(n[r.team_id]||0)+d),r.team_id&&l&&(i[r.team_id]=(i[r.team_id]||0)+d),r.team_id&&c&&(a[r.team_id]=(a[r.team_id]||0)+d)}let l=Object.keys(n).find(e=>{let i=r[e];return i&&!R(i,{type:2,nDesignFilesToAdd:n[e],nCurrentDesignFiles:i.teamFileCounts?.designFileCount||0})});return l||(l=Object.keys(i).find(e=>{let n=r[e];return n&&!R(n,{type:5,nWhiteboardFilesToAdd:i[e],nCurrentWhiteboardFiles:n.teamFileCounts?.whiteboardFileCount||0})}))||!await w()?l:l=Object.keys(a).find(e=>{let n=r[e];return n&&!R(n,{type:7,nSlideFilesToAdd:a[e],nCurrentSlideFiles:parseInt((0,o.oA)(n.teamFileCounts?.slideFileCount)??"0",10)})})});function C(e,r){return!!e.edit_roles&&("whiteboard"===r&&e.edit_roles.whiteboard_files.length>0||"design"===r&&e.edit_roles.design_files.length>0)}function N(e){let r=e.team_role?.level,n=e.team_role?.pending||!1;return r&&r>=f.e6.EDITOR&&!n||!!e.edit_roles&&e.edit_roles.folders.length>0||!(0,I.qR)(e.team_user,m._Y.DESIGN)&&C(e,m._Y.DESIGN)||!(0,I.qR)(e.team_user,m._Y.WHITEBOARD)&&C(e,m._Y.WHITEBOARD)}function L(e){return!!(e.team_role||(e?.edit_roles?.design_files?.length||0)>0||(e?.edit_roles?.whiteboard_files?.length||0)>0||(e?.edit_roles?.folders?.length||0)>0||(e?.view_roles?.file_count||0)>0||(e?.view_roles?.folder_count||0)>0)}var O=(e=>(e[e.ADD_DESIGN_FILE=0]="ADD_DESIGN_FILE",e[e.ADD_PROJECT=1]="ADD_PROJECT",e[e.ADD_N_DESIGN_FILES=2]="ADD_N_DESIGN_FILES",e[e.ADD_EDITOR=3]="ADD_EDITOR",e[e.ADD_FIGJAM_FILE=4]="ADD_FIGJAM_FILE",e[e.ADD_N_FIGJAM_FILES=5]="ADD_N_FIGJAM_FILES",e[e.ADD_SLIDES_FILE=6]="ADD_SLIDES_FILE",e[e.ADD_N_SLIDES_FILES=7]="ADD_N_SLIDES_FILES",e))(O||{});function R(e,r){if(!e||e.restrictionsList?.includes(m.P4.LOCKED))return!1;if((0,h.XX)(e))return!0;switch(r.type){case 0:if(e.restrictionsList?.includes(m.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentDesignFiles&&r.nCurrentDesignFiles>=h.WW)return!1;return!e.restrictionsList?.includes(m.P4.FILES_LIMITED);case 1:return!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED)&&!e.restrictionsList?.includes(m.P4.PROJECTS_LIMITED_LEGACY);case 2:if(e.restrictionsList?.includes(m.P4.FILES_LIMITED_LEGACY))return!1;if(r.isDestinationTeamDrafts||0===r.nDesignFilesToAdd)return!0;if(r.nCurrentDesignFiles+r.nDesignFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(m.P4.FILES_LIMITED);case 3:if(e.restrictionsList?.includes(m.P4.EDITORS_LIMITED))return!1;return!0;case 4:if(e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentWhiteboardFiles&&r.nCurrentWhiteboardFiles>=h.WW)return!1;return!e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED);case 5:if(e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nWhiteboardFilesToAdd)return!0;if(r.nCurrentWhiteboardFiles+r.nWhiteboardFilesToAdd>h.WW)return!1;return!e.restrictionsList?.includes(m.P4.WHITEBOARD_FILES_LIMITED);case 6:if(e.restrictionsList?.includes(m.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts)return!0;if(r.nCurrentSlideFiles&&r.nCurrentSlideFiles>=h.WW)return!1;return!e.restrictionsList.includes(m.P4.SLIDE_FILES_LIMITED);case 7:if(e.restrictionsList?.includes(m.P4.SLIDE_FILES_LIMITED_BETA))return!1;if(r.isDestinationTeamDrafts||0===r.nSlideFilesToAdd)return!0;if(r.nCurrentSlideFiles+r.nSlideFilesToAdd>h.WW)return!1;return!e.restrictionsList.includes(m.P4.SLIDE_FILES_LIMITED)}}function P(e,r){return R({subscription:e.subscription,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team?new Date:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null},r)}function D(e){return!!e.student_team||!!e&&!!e.subscription&&[m.Qh.OK,m.Qh.GRACE_PERIOD].includes(e.subscription)}function k(e){let r=e.user?.id,n=e.openFile?.key;if(!r||!n)return null;let i=e.fileByKey?.[n]?.team_id;return i?e.teamUserByTeamId?.[i]?.[r]:null}let M=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/([A-z0-9]*)\/team\/(\d+)/),F=new RegExp(/[https?:?\/\/]?[a-z.]*figma[\-.\da-z:]*\/files\/team\/(\d+)/);function x(e){return M.test(e)}function U(e){return F.test(e)}function B(e){let r=new URL(e).pathname.match("team/([A-z0-9]*)");return r?r[1]:null}let V=["recentsAndSharing","draftsToMove","communityHub","search","user"];function G(e){try{if(e.openFile)return e.openFile.teamId||"";if("teamId"in e.selectedView)return e.selectedView.teamId||"";if("abandonedDraftFiles"===e.selectedView.view&&e.selectedView.adminPlanType===g.O.TEAM)return e.selectedView.planId;if("folder"===e.selectedView.view){let r=e.selectedView.folderId;if(!e.folders[r])return(0,s.Ay)().page_load_team_id||"";return e.folders[r]?.team_id||""}if((V.includes(e.selectedView.view)||"deletedFiles"===e.selectedView.view||"limitedTeamSharedProjects"===e.selectedView.view||"trashedFolders"===e.selectedView.view||"desktopNewTab"===e.selectedView.view)&&!e.currentUserOrgId)return e.currentTeamId||""}catch(e){(0,d.$D)(a.e.GROWTH_PLATFORM,Error(`Error getting team ID from Redux state: ${e.message}`))}return""}function H(){return(0,i.d4)(e=>G(e))||""}function K(){return(0,i.d4)(e=>""===G(e)||null==e.teams?null:e.teams[G(e)])||null}let W=(0,b.bt)(e=>e.teams[G(e)]||null);function $(e){return e.teams[G(e)]||null}function Y(e,r,n){return e?Object.keys((0,_.t)(r.byTeamId,e.id)).filter(e=>n[e]):[]}function z(e,r){let n=[],i={};for(let r of e)r&&(i[r.id]=r,n.push(r.id));return e.sort((e,n)=>{let i=r.indexOf(e.id),a=r.indexOf(n.id);return -1===i&&-1===a?e.createdAt<n.createdAt?1:-1:i-a}),e.map(e=>e.id)}function j(e,r,n){let i=0,a={};for(let o of(r.forEach(e=>a[e.id]=e),Object.keys(n))){let r=a[o],s=n[o][e];if(r&&s){if(r.pro_team||r.org_access||r.student_team)return!1;s.level===f.e6.OWNER&&i++}}return i>1}function q(e){return!!e&&!!e.match(/^[0-9]+$/)}(0,c.xx)(function(e,r,n){return e?Y(e,r,n).map(e=>n[e]):[]})},776726:(e,r,n)=>{n.d(r,{H1:()=>h,X0:()=>m,XJ:()=>d,z:()=>c});var i=n(922827),a=n(776250),o=n(38329),s=n(988022),l=n(463592);let c={includeMatches:!0,shouldSort:!1,findAllMatches:!1,ignoreLocation:!0};function d(e){return e.replace(/[\u201D\u201C\"\u2019\u2018]/g,"'")}function u(e){return e.textContent&&(e.textContent=d(e.textContent)),e}function m(e,r,n){let a=[];for(let o of e.indices){let s=o[0],l=o[1]+1,c=e.value;n.matchCase&&c.substring(s,l)!==r||n.wholeWords&&(s>0&&p(c[s-1])||l<e.value.length&&p(c[l]))||a.push({start:s,end:l,matchType:i.Ifi.TEXT_MATCH})}return a}function p(e){return/[\p{L}\p{N}\p{Pc}\p{M}]/u.test(e)}let h=new class{constructor(){this.searchLibrary=new l.CN({keys:["textContent","name","type"],exactMatch:!0,...c})}initializeIndex(){let e=performance.now(),r=i.YEY.getSearchableNodes(!0).map(u),n=o.D.getState();this.searchLibrary.set(r),(0,s.ds)("canvas_search_index_create",n.openFile?.key,n,{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}destroyIndex(){this.searchLibrary.set([])}addNode(e){this.searchLibrary.add(e)}removeNode(e){this.searchLibrary.remove("guid",e)}async search(e,r={}){let n;this.updateIndex();let a=performance.now(),o=`'"${d(e)}"`,s=[{textContent:o}];if(r.searchLayerNames&&s.push({name:o}),r.layerTypes){let e=[];r.layerTypes.forEach(r=>{e.push({type:r})}),n={$and:[{$or:s},{$or:e}]}}else n={$or:s};let l=await this.searchLibrary.search(n),c={},u=0,p=0;for(let n of l){let a=[];for(let o of n.matches){let s=m(o,e,r);if("textContent"!==o.key&&s.length){let e=s[0];e.matchType=n.item.type===i.Z6A.CANVAS?i.Ifi.PAGE_MATCH:i.Ifi.LAYER_MATCH,a=[e,...a]}else a.push(...s)}if(a.length){u+=a.length,p++;let e=n.item.pageGuid,r={guid:n.item.guid,textMatches:a};c[e]?c[e].push(r):c[e]=[r]}}return{resultsByPage:c,metrics:{queryLength:e.length,numMatchingNodes:p,numMatches:u,queryTimeMs:Math.round(performance.now()-a)}}}logIndex(){this.updateIndex(),this.searchLibrary.logIndex()}updateIndex(){let e=performance.now(),r=i.YEY.getSearchableNodes(!1).map(u);if(r.length>2e3){this.initializeIndex();return}let n=[],o=[];for(let e of r)n.push(e.guid),(e.name||e.textContent)&&o.push(e);r.length&&this.searchLibrary.updateEntries("guid",n,o),r.length>0&&(0,a.sx)("canvas_search_index_update",{timeElapsedMs:Math.round(performance.now()-e),numberOfNodes:r.length})}}},494668:(e,r,n)=>{n.d(r,{$I:()=>c,YA:()=>d});var i=n(411855),a=n(497189),o=n(11190),s=n(939863),l=n(94823);function c(e){return({light:(0,s.t)("fullscreen_actions.theme.light"),dark:(0,s.t)("fullscreen_actions.theme.dark"),system:(0,s.t)("fullscreen_actions.theme.system_theme")})[e]}function d(e){return[{name:"theme-light-mode",checked:"light"===e,displayForQuickCommand:"theme-light-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"light",userInitiated:!0}))},searchSynonyms:["theme","dark mode"],iconType:i.createElement(a.Z),hideForQuickCommand:"light"===e},{name:"theme-dark-mode",checked:"dark"===e,displayForQuickCommand:"theme-dark-mode-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"dark",userInitiated:!0}))},searchSynonyms:["theme","light mode"],iconType:i.createElement(o.a),hideForQuickCommand:"dark"===e},{name:"theme-system",checked:"system"===e,displayForQuickCommand:"theme-system-quick-command",hideCheckForQuickCommand:!0,callback:(e,r,n)=>{n(l.Qh({theme:"system",userInitiated:!0}))}}]}},783967:(e,r,n)=>{n.d(r,{w:()=>i}),n(96328);function i(){return!!window.INITIAL_OPTIONS?.user_data}},395116:(e,r,n)=>{n.d(r,{td:()=>c,uo:()=>d}),n(456772);var i=n(790724);n(286640);var a=n(27087),o=n(939863),s=n(980820),l=n(725561);n(410613);let c="-1",d=2500;(0,s.nF)((e,r)=>{if(!r.userInitiated){e.dispatch(l.Q$(r));return}return(0,i.Q)({requestPromise:a.Ay.put("/api/user_notifications_bell/community/clear"),fallbackError:(0,o.t)("user_notification.an_error_occurred_marking_all_as_read"),store:e,next:e.dispatch,action:l.Q$(r)})})},935757:(e,r,n)=>{n.d(r,{I2:()=>x,Il:()=>U,Ri:()=>v,Um:()=>D,Y9:()=>B,YH:()=>b,_X:()=>L,kb:()=>E,nt:()=>R,pk:()=>P,tb:()=>y,tp:()=>O,yk:()=>V});var i=n(689136),a=n.n(i),o=n(841563),s=n.n(o),l=n(181912),c=n(77909),d=n(517333),u=n(966712),m=n(534688),p=n(742808),h=n(286640),_=n(567088),g=n(52571),f=n(516056);let E=(0,c.v)(),y=(0,c.v)(),b=!window.EARLY_ARGS?.file_minimal_user_state;function v(){b=!0}let I=null,T=null,S={REQUESTED:"web.api_user_state.requested"},w=new class{constructor(){this.batchedCustomEvents=[],this.onVisibilityChange=async()=>{"hidden"===document.visibilityState&&await this.sendBatchedEvents()},this._currentlySendingBatchedEvents=!1,this.sendBatchedEvents=async()=>{if(this._currentlySendingBatchedEvents)return;this._currentlySendingBatchedEvents=!0;let e=this.batchedCustomEvents;this.batchedCustomEvents=[];try{await (0,p.BO)(e)}catch(e){}this._currentlySendingBatchedEvents=!1},document.addEventListener("visibilitychange",this.onVisibilityChange),window.addEventListener("pagehide",this.sendBatchedEvents),this.sendBatchedEventsInterval=setInterval(this.sendBatchedEvents,5e3)}async cleanup(){document.removeEventListener("visibilitychange",this.onVisibilityChange),window.removeEventListener("pagehide",this.sendBatchedEvents),clearInterval(this.sendBatchedEventsInterval),await (0,m.g)()}reportUserStateCall(e){this.batchedCustomEvents.push({metric:S.REQUESTED,tags:{source:e,client_visibility:document.visibilityState}})}},A=null,C=null,N=null;function L(e,r){v();let n=P(),i=D();return A&&n===C&&i===N||(w.reportUserStateCall(e),A=f.k.getState({orgId:n||void 0,teamId:i||void 0},r),C=n,C=i,A.then(()=>{A=null,C=null,N=null}).catch(()=>{A=null,C=null,N=null})),A}function O(e){return g.H.getState(e)}function R(e){e||(e="personal"),I=e}function P(){return I?"personal"===I?null:I:I=(0,u.tl)().org_id||null}function D(){return T||(T=(0,u.tl)().team_id||null),T}let k="recent_user_data",M=e=>btoa(JSON.stringify(e)),F=e=>JSON.parse(atob(e));function x(e){B(e,!0)}function U(e){let r=V(),n=a()(r),i=(0,h.UG)();if(n.communityProfileId=e,!s()(r,n))try{i.set(k,M(n))}catch(e){console.error("Failed to set community profile",e)}}function B(e,r,n,i,o,c){if(d.S8)return;let m=V(),p=a()(m),g=(0,h.UG)();if(r?p.communityUserId=e:p.fileBrowserUserId=e,void 0!==n&&(p.userIdToOrgId||(p.userIdToOrgId={}),p.userIdToOrgId[e]=n),(0,u.kc)().ps_benchmark&&(void 0!==n||void 0!==o)&&(p.userIdToPlan||(p.userIdToPlan={}),n?p.userIdToPlan[e]=[_.O.ORG,n]:o&&(p.userIdToPlan[e]=[_.O.TEAM,o])),i&&(p.communityProfileId=i),c&&(p.seenRecurringBannerIds||(p.seenRecurringBannerIds={}),p.seenRecurringBannerIds[c]=l.A.utc().toISOString()),!s()(m,p))try{g.set(k,M(p))}catch(e){console.error("Failed to set recent workspace",e)}}function V(){let e={communityUserId:null,communityProfileId:null,fileBrowserUserId:null,userIdToOrgId:{},seenRecurringBannerIds:{}},r=(0,h.UG)();try{let n=r.get(k);n&&(e=F(n))}catch(e){console.error("Failed to get recent workspace",e)}return e}},694517:(e,r,n)=>{n.d(r,{Eg:()=>ec,HF:()=>J,Ht:()=>G,Nb:()=>eu,Ul:()=>et,V_:()=>V,_b:()=>el,_h:()=>eo,_t:()=>Y,cn:()=>$,hZ:()=>ee,kT:()=>W,tP:()=>H,un:()=>er,vF:()=>ep,vw:()=>Z,w_:()=>z,yH:()=>em});var i=n(268853),a=n(922827),o=n(572304),s=n(776250),l=n(181912),c=n(38329),d=n(966712),u=n(716034),m=n(418956),p=n(218549),h=n(183297),_=n(776621),g=n(553716),f=n(743282),E=n(27087),y=n(881388),b=n(265746),v=n(696808),I=n(392592),T=n(980820),S=n(738269),w=n(293017),A=n(31913),C=n(420576),N=n(843495),L=n(239671),O=n(610267),R=n(779086),P=n(754168),D=n(597642),k=n(267701),M=n(356390),F=n(493862),x=n(467232),U=n(540019),B=n(707465);let V="current_version",G=new p.q(40),H=(0,u.eU)("");var K=(e=>(e[e.Default=0]="Default",e[e.Recording=1]="Recording",e))(K||{});let W=U.M4.Query({fetch:async e=>{let r=e.fileKey;if(!r)return null;let n=performance.now(),i=await D.W.getPaginatedVersions({...e,fileKey:r,versionIds:e.versionIds?.join(",")}),a=performance.now()-n;return(0,s.sx)("version_diffing_performance_metrics",{name:"Lego versions fetched",durationMs:a}),i.data.meta?.versions||[]},key:"fileVersionsPaginated"});function $(e,r,n,i){return`${e}-${r}-${n.id}-${i}`}function Y(e,r){let n=c.D.getState(),i=n.openFile?.key,a=[r,n.mirror.sceneGraph.getInternalCanvas()?.guid].filter(e=>!!e);if(!i||!r)return null;let o=$(i,r,e,(0,O.N)(n.fileVersion));if(G.has(o))return G.get(o);let s=new Promise((n,s)=>(0,k.n)(`${e.canvas_url}&nodes_to_extract=${a.join(",")}`).then(([a,s,l])=>{let c=$(i,r,e,l),d=Promise.resolve({canvas:a,key:c});G.delete(o),G.set(c,d),n(d)}).catch(s));return G.set(o,s),s}function z(e){let r=c.D.getState(),n=r.openFile?.key,i=r.mirror.appModel.currentPage;if(!n||!i)return null;let a=$(n,i,e,(0,O.N)(r.fileVersion));G.delete(a)}let j=async(e,r,n,i)=>{let a=new URLSearchParams;a.set("diff_version",(0,C.C2)().toString()),a.set("from_file_version_id",r),a.set("migration_version",`${n}`),i&&i.length>0&&a.set("nodes_to_diff",i.join(","));let{data:{meta:{checkpoint_diff:o}}}=await E.Ay.post(`/api/file_diff/v2/checkpoint_diff/${e}?${a.toString()}`);return o},q=async e=>{let r=new Date().getTime(),{data:n}=await E.Ay.crossOriginGetAny(e,null,{responseType:"arraybuffer"}),i=new Date().getTime();return(0,s.sx)("versioning_performance_metrics",{name:"download_diff",durationMs:i-r},{forwardToDatadog:!0}),n};function Z(e){for(let r of e.versions)if(r.id===e.activeId)return r;if(e.linkedVersion&&e.activeId===e.linkedVersion.id)return e.linkedVersion}async function X(e,r,n){let i=await j(r.getState().openFile.key,e,r.getState().fileVersion,n);if(!i.signed_url)return"Error viewing what's changed between file versions.";let o=!!r.getState().openFile?.canEdit,l=new Date().getTime(),[c]=await Promise.all([q(i.signed_url),(0,F.W5)(a._em.DEBUG_TOOL)]),d=new Date().getTime();return((0,s.sx)("versioning_performance_metrics",{name:"download_diff_and_load_pages",durationMs:d-l,isEditor:o},{forwardToDatadog:!0}),a.glU.loadHistoryChangesState(c))?"":"Error loading HistoryChangesState into memory."}function J(e,r){if(e)return r.versions.find(r=>r.id===e)}async function Q(e,r){let n=Date.now(),i=J(e,r.getState().versionHistory);if(!i)return{elapsedTime:Date.now()-n,numPagesWithChanges:0};let o=await X(i.id,r),s=Date.now()-n;if(o)throw(0,g.x1)("version diffing","error checking for visible changes",{error:o}),Error("Error checking for visible changes");return{elapsedTime:s,numPagesWithChanges:a.glU.getPagesWithChanges().length}}let ee=(0,T.nF)(async(e,r)=>{let n,i;let o=e.getState(),s=()=>{e.dispatch(S.$T({...o.selectedView,compareLatest:void 0}))},c=()=>{e.dispatch(w.Y6({mode:a.Oin.OFF})),s()},u=o.user;if(!(0,d.kc)().version_diffing||!(0,d.kc)().xr_debounce_threshold||!u||"fullscreen"!==o.selectedView.view||o.selectedView.editorType===L.nT.Whiteboard||o.mirror.appModel.topLevelMode===a.lyf.HISTORY||o.mirror.appModel.activeCanvasEditModeType===a.m1T.COMPARE_CHANGES)return c();let{openFileKey:m}=r;try{let e=await P.S.getLastInteraction({openFileKey:m});n=e.data.meta.last_view_at,i=e.data.meta.last_edit_at}catch{c()}let p=(0,l.A)(n),h=(0,l.A)(i),_=p>h?p:h;if(!_.isValid()||_<(0,l.A)().subtract(7,"days"))return c();let g=D.W.getPaginatedVersions({fileKey:m,createdAtOrBefore:_.toISOString()}),f=D.W.getPaginatedVersions({fileKey:m}),[E,y]=await Promise.all([g,f]),b=E.data.meta.versions,v=y.data.meta.versions;if(!(b.length>0&&v.length>0))return c();let I=b[0],T=v[0];if(!((0,l.A)(T.created_at)>(0,l.A)(I.created_at))||T.user_id===u.id||T.participating_users_array?.includes(u.handle))return c();e.dispatch(el()),e.dispatch(ep({fromVersionId:I.id}))}),et=(0,T.nF)(async(e,r)=>{let n=e.getState(),i=n.user;if(!(0,d.kc)().version_diffing||!i||"fullscreen"!==n.selectedView.view||n.selectedView.editorType===L.nT.Whiteboard||n.mirror.appModel.topLevelMode===a.lyf.HISTORY||n.mirror.appModel.activeCanvasEditModeType===a.m1T.COMPARE_CHANGES)return;let{openFileKey:o}=r,c=(0,l.A)(r.versionHistory.lastEdited),u=(0,l.A)(r.versionHistory.lastViewed),m=u>c?u:c;if(!m.isValid()||m<(0,l.A)().subtract(7,"days"))return;let p=Date.now(),h=D.W.getPaginatedVersions({fileKey:o,pageSize:1,createdAtOrBefore:m.toISOString()}),_=D.W.getPaginatedVersions({fileKey:o,pageSize:1}),[g,E]=await Promise.all([h,_]),y=g.data.meta.versions,b=E.data.meta.versions;if(y.length>0&&b.length>0){let r=y[0],n=b[0];if((0,l.A)(n.created_at)>(0,l.A)(r.created_at)&&n.user_id!==i.id&&!n.participating_users_array?.includes(i.handle)){let i={fileKey:o,eventId:(0,f.g)(),lastEdited:c.toISOString(),lastViewed:u.toISOString(),lastSeenVersion:r.id,lastSeenCreatedAt:r.created_at,latestVersion:n.id,latestCreatedAt:n.created_at};(0,s.sx)("Version Diffing Changed Since Last View",{...i,durationMs:Date.now()-p},{forwardToDatadog:!0}),e.dispatch(ea({lastSeenVersionId:r.id,trackingProps:i}))}}});function er(){let e=c.D,r=e.getState().versionHistory,n=Z(r),i=r.fetchedPageIds||new Set,a=e.getState().mirror.appModel.currentPage;return n&&n.id!==V?ei(n,e,i,a,o.Xy):Promise.reject("Version history inactive")}let en=null;function ei(e,r,n,i,s,l){return new Promise((c,d)=>{let u=e.canvas_url;u||d("Couldn't get canvas URL for version.");let p=s===o.Xy,h=!p&&n.size>0,_=s??i,g=r.getState().mirror.appModel.currentPage;"LOAD_NEW_VERSION"===l&&g&&!s&&(_=g);let f=!r.getState().mirror.appModel.pagesList.every(e=>n.has(e.nodeId))&&!n.has(_);if(!f)return r.dispatch(A.SR({isLoadingPage:!1})),c();u+=`&nodes_to_extract=${_}`;let E=r.getState().selectedView;x.C.markVersionHistoryLoadStart(E.fileKey,E.nodeId,l);let y=(0,k.n)(u).then(([e])=>{if(y===en){var o;en=null;let s=r.getState().selectedView.editorType;if((o=r.getState().mirror.appModel.topLevelMode)===a.lyf.HISTORY||o===a.lyf.DEV_HANDOFF){let o;if(h)a.glU.applyFileToCurrentScene(e);else if(m.zl.set(H,""),!a.glU.loadFigFileForPreview(e))return d("Error loading this version into memory.");x.C.markVersionHistoryLoadEnd();let l=r.getState().selectedView.fileKey;o=s===L.nT.Whiteboard?"figjam":s===L.nT.Design||s===L.nT.Slides?(0,L.CO)(s):"unknown";let u=r.getState().selectedView.devModeFocusId?"focus_view":"version_history";x.C.report(l,o,u),f&&(p?r.getState().mirror.appModel.pagesList.forEach(e=>n.add(e.nodeId)):n.add(_),r.dispatch(A.EB({fetchedPageIds:n})),r.dispatch(A.SR({isLoadingPage:!1})),c()),E.nodeId&&E.nodeId!==i&&N.tJ([E.nodeId]),E.devModeFocusId&&a.w3z.focusOnNode(E.devModeFocusId,!1),r.dispatch(w.Y6({mode:a.Oin.OFF}))}}});en=y})}let ea=(0,T.nF)(async(e,r)=>{let n,i;let{lastSeenVersionId:a,trackingProps:o}=r;try{let r=await Q(a,e);n=r.elapsedTime,i=r.numPagesWithChanges}catch(e){return}if(0===i){(0,s.sx)("Version Diffing Notification Skipped",{...r.trackingProps,pagesWithChanges:0,durationMs:n},{forwardToDatadog:!0});return}(0,s.sx)("Version Diffing Notification Shown",{...r.trackingProps,pagesWithChanges:i,durationMs:n},{forwardToDatadog:!0}),e.dispatch(v.Q.enqueueFront({notification:{type:b._.SEE_WHATS_CHANGED,message:"See what's changed since the last time you viewed this file",acceptCallback:()=>{(0,s.sx)("Version Diffing Notification Opened",o),e.dispatch(el()),e.dispatch(ep({fromVersionId:a}))},dismissCallback:()=>{(0,s.sx)("Version Diffing Notification Dismissed",o)}}}))}),eo=(0,T.nF)((e,{direction:r})=>{let n=e.getState(),i=(0,B.U2)(n.selectedView);i&&!n.versionHistory.loading&&(e.dispatch(A.ne({loading:!0})),(0,h.En)(`/api/versions/${i}`,30,n.versionHistory,r).then(n=>{i===(0,B.U2)(e.getState().selectedView)&&e.dispatch(A.BC({history:n,direction:r}))}))}),es=(0,T.nF)(e=>{e.dispatch(A.p0()),e.dispatch(eo({direction:h.mL}))}),el=(0,T.nF)((e,r)=>{r?.type===1?M.Y5.triggerAction("enter-history-mode-for-recording"):M.Y5.triggerAction("enter-history-mode"),M.Y5.triggerAction("deselect-all"),e.dispatch(es()),a.Ez5?.uiState().showPropertiesPanel.set(!0),(0,s.sx)("Toggle Version History",{source:r?.source||null})}),ec=(0,T.nF)(e=>{e.dispatch(ed()),e.dispatch(I.F.dequeue({matchType:"versions"})),a.glU.exitVersionHistoryMode(e.getState().openFile?.canEdit??!1)}),ed=(0,T.nF)(e=>{e.dispatch(eu({id:V})),e.dispatch(ep({fromVersionId:void 0})),a.Egt.clearSelection(),e.dispatch(I.F.dequeue({matchType:"comparing"})),e.dispatch(I.F.dequeue({matchType:"view_changes"})),e.dispatch(w.Y6({mode:a.Oin.OFF}))}),eu=(0,T.nF)(async(e,r)=>{if(r.id===V){m.zl.set(H,""),a.glU.loadFigFileForPreview(new Uint8Array);let n=e.getState();e.dispatch(S.$T({...n.selectedView,versionId:void 0,compareVersionId:void 0})),e.dispatch(A.Fm({id:r.id}));return}e.dispatch(A.Fm({id:r.id}));let n=e.getState(),o=r.versions?r.versions.find(e=>e.id===r.id):Z(n.versionHistory);if(!o)return;e.dispatch(S.$T({...n.selectedView,compareVersionId:void 0}));let s=e.getState().mirror.appModel.currentPage,l=r.eventType,c=!!e.getState().selectedView.devModeFocusId;await ei(o,e,new Set,s,r.nodeId,l).catch(r=>{if(c){let e=`[${l}] Failed load version for preview in focus view: ${r}`;(0,_.$D)(i.e.DEVELOPER_TOOLS,Error(`[LOAD_VERSION_FOR_PREVIEW] ${e}`))}e.dispatch(y.s.error(r))})}),em=(0,T.nF)((e,r)=>{let n=r.version,a=r.currentPageNodeId,o=r.fetchedPageIds,s=r.eventType;ei(n,e,o,a,void 0,s).then(()=>e.dispatch(A.ke({version:r.version}))).catch(r=>{let n=`[${s}] Failed load fig file for preview: ${r}`;(0,_.$D)(i.e.SCENEGRAPH_AND_SYNC,Error(`[VERSION_HISTORY_INCREMENTAL_LOAD] ${n}`)),e.dispatch(y.s.error(r))})}),ep=(0,T.nF)(async(e,r)=>{if(!(0,d.kc)().version_diffing){e.dispatch(A.TO(r));return}let n=r.fromVersionId;if(!n)return;let i=J(n,e.getState().versionHistory);if(!i)return;let o=new Date().getTime(),l=await X(i.id,e);if(l){e.dispatch(y.s.error(l));return}let c=new Date().getTime(),u=e.getState().selectedView.editorType,m=R.lE[R.lE.COMPARE_CHANGES];if((0,s.sx)("versioning_performance_metrics",{name:"load_diff",durationMs:c-o,fromCheckpointKey:i.checkpoint_key,nodesToDiff:"all",editorType:u,source:m},{forwardToDatadog:!0}),i.canvas_url){let e=a.glU.getChangesToCompareFromHistoryChangesState();if(e.size>0){let r=Array.from(e).join(","),n=`${i.canvas_url}&nodes_to_extract=${r}`;(0,k.n)(n).then(([e])=>{a.glU.loadPartialHistoryScene(e)})}}let p=a.glU.startComparingChanges()?"":"Error starting history compare";if(p){e.dispatch(y.s.error(p));return}let h=e.getState();e.dispatch(S.$T({...h.selectedView,compareVersionId:n,compareLatest:void 0})),(0,s.sx)("Version History Compare Start",{fromVersionId:n}),e.dispatch(A.TO(r))})},433861:(e,r,n)=>{n.d(r,{Bj:()=>R,HA:()=>N,Os:()=>y,Pe:()=>m,QZ:()=>L,Vl:()=>C,aF:()=>O,b8:()=>w,cY:()=>A,f5:()=>h,j0:()=>v,k9:()=>f,kw:()=>g,l9:()=>S,lG:()=>E,t4:()=>_,u7:()=>I,zE:()=>b,zx:()=>T});var i=n(411855),a=n(821910),o=n(77909),s=n(860601),l=n(30637),c=n(572206),d=n(993285);let u=window.matchMedia("(prefers-reduced-motion: reduce)"),m={navigationDurationMs:200,animationTimingFunction:e=>e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1,isGetViewportAtomic:!1},p=class e{constructor(e,r={}){this.getCommentDestinationForCanvasPosition=(e,r,n)=>this.viewport.getCommentDestinationForCanvasPosition(e,r,n),this.setCanvasSpaceCenter=(e,r,n)=>{this.viewport.setCanvasSpaceCenter(e,r,n)},this.setCurrentPageIdAsync=async e=>{await this.viewport.setCurrentPageIdAsync(e)},this.pageIdForNodeId=e=>this.viewport.pageIdForNodeId(e),this.getValidCommentsRect=()=>this.viewport.getValidCommentsRect(),this.viewport=e,this.config={...m,...r}}navigateTo(r,n,i={}){clearTimeout(this.delayTimeout),this.delayTimeout=void 0;let a=this.getViewportInfo();if(n||(n=a.zoomScale),u.matches||(0,l.nl)()||0===i.duration)return this.updateViewport(a,r,n),u.matches&&i.metricsCallback?.({prefersReducedMotion:!0}),Promise.resolve({cancelled:!1});let d=performance.now(),m=null,p=[],h=i.duration??this.config.navigationDurationMs;if(i.ignoreVisibleTargets){let n=c.Mi.subtract(r,{x:a.offsetX,y:a.offsetY});n=c.Mi.scale(1/a.zoomScale,n),n=c.Mi.abs(n);let o=Math.max(a.height,a.width)/2,s=e.DEFAULT_NAVIGATE_BUFFER*(1/a.zoomScale);if(c.Mi.max(n)<o-s)return i.metricsCallback?.({prefersReducedMotion:!1}),Promise.resolve({cancelled:!1})}let _=(0,o.v)(),g=!1,f=function(e){let r=document.getElementById("fullscreen-root");if(!r)return s.lQ;let n=()=>{r.addEventListener("mouseup",e),e()};return r.addEventListener("mousedown",n),()=>{r.removeEventListener("mousedown",n),r.removeEventListener("mouseup",e)}}(()=>{g=!0}),E=e=>{if(i.metricsCallback){let r=0,n=0;p.length&&(n=Math.round(p.reduce((e,n,i)=>((0===i&&e>17||n>17)&&r++,e+n))/p.length)),i.metricsCallback({numberOfSlowFrames:r,avgFrameDuration:n,animationCancelled:e,totalFrames:p.length,prefersReducedMotion:!1})}f(),_.resolve({cancelled:e})},y=n-a.zoomScale,b=c.Mi.scale(a.zoomScale,{x:a.offsetX,y:a.offsetY}),v=c.Mi.scale(n,r),I=c.Mi.subtract(v,b),T=this.getViewportInfo(),S=()=>{var e;let o=this.getViewportInfo();if(this.config.isGetViewportAtomic&&((e=T).offsetX!==o.offsetX||e.offsetY!==o.offsetY||e.zoomScale!==o.zoomScale)||g||i.signal?.aborted){E(!0);return}let s=performance.now(),l=s-d;null!=m&&p.push(Math.round(s-m)),m=s;let u=Math.min(l/h,1),_=this.config.animationTimingFunction(u);if(_>=1){E(!1),this.updateViewport(o,r,n);return}let f=a.zoomScale+y*_,v=c.Mi.add(b,c.Mi.scale(_,I)),w=c.Mi.scale(1/f,v);this.updateViewport(o,w,f),requestAnimationFrame(S),T=this.getViewportInfo()};return i.delay?this.delayTimeout=setTimeout(()=>{d=performance.now(),S()},i.delay):S(),_.promise}getViewportInfo(){return this.viewport.getViewportInfo()}getRawViewportInfo(){return this.viewport.getRawViewportInfo()}getCommentsWrapperOffset(e){return this.viewport.getCommentsWrapperOffset(e)}setZoomScale(e,r){this.viewport.setZoomScale(e,r)}setHovering(e){this.viewport.setHovering(e)}updateViewport(e,r,n){this.setZoomScale(e.zoomScale,n),this.setCanvasSpaceCenter(r,e,n)}};p.DEFAULT_NAVIGATE_BUFFER=60;let h=p,_={x:0,y:0,width:1,height:1,offsetX:0,offsetY:0,zoomScale:1,isPanning:!1,isZooming:!1},g=i.createContext(new h({getViewportInfo:()=>_,getRawViewportInfo:()=>_,getCommentsWrapperOffset:e=>({x:0,y:0}),setCanvasSpaceCenter:e=>{},setZoomScale:(e,r)=>{},setHovering:e=>{},setCurrentPageIdAsync:e=>Promise.resolve(),pageIdForNodeId:e=>"1:0",getCommentDestinationForCanvasPosition:(e,r,n)=>null,getValidCommentsRect:()=>null})),f=i.createContext(_.x),E=i.createContext(_.y),y=i.createContext(_.width),b=i.createContext(_.height),v=i.createContext(_.offsetX),I=i.createContext(_.offsetY),T=i.createContext(_.zoomScale),S=i.createContext(_.isPanning),w=i.createContext(_.isZooming),A=i.createContext(0),C=i.createContext(!1),N=i.createContext({current:_}),L=i.createContext({current:_});function O({latestViewport:e,children:r}){let n=i.useRef(e),a=i.useRef(e);return a.current=n.current,n.current=e,i.createElement(L.Provider,{value:a},i.createElement(N.Provider,{value:n},i.createElement(f.Provider,{value:e.x},i.createElement(E.Provider,{value:e.y},i.createElement(y.Provider,{value:e.width},i.createElement(b.Provider,{value:e.height},i.createElement(v.Provider,{value:e.offsetX},i.createElement(I.Provider,{value:e.offsetY},i.createElement(T.Provider,{value:e.zoomScale},i.createElement(S.Provider,{value:e.isPanning},i.createElement(w.Provider,{value:e.isZooming},r)))))))))))}function R(e){let{getViewport:r}=e,[n,o]=i.useState(r()||_),s=i.useCallback(()=>{o(e=>{let n=r()||_;return(0,a.c2)(e,n)?e:n})},[r,o]);return(0,d.N)(s),i.createElement(O,{latestViewport:n},e.children)}},902938:(e,r,n)=>{n.d(r,{AM:()=>s,qr:()=>l});var i=n(411855),a=n(188507);n(922827),n(931828);var o=n(327017);let s={MAIN_GUIDE:"https://help.figma.com/hc/articles/1500004414622",TROUBLESHOOT:"https://help.figma.com/hc/articles/4402390108951",ACCESSIBILITY:"https://help.figma.com/hc/articles/4402390110743",FEEDBACK_FORM:"https://form.asana.com?k=FPQgFCXUINQN6CmMtWiabQ&d=10497086658021"};function l(){let[e,r]=i.useState(null),n=(0,a.d4)(e=>e.voice.showWidget);return i.useEffect(()=>{n&&!e&&r(o.h.getInstance())},[n,e]),e}},866564:(e,r,n)=>{n.d(r,{_2:()=>a,w$:()=>o}),n(411855);var i=n(776250);n(439729),n(939863),n(335682),n(571232);let a="audio-paywall-key",o=(()=>{let e=!0,r=!1;return n=>{r||setTimeout(()=>{n>0&&e?(e=!1,(0,i.sx)("Context Viewed",{name:"join-call-with-others"})):e||0!==n||(r=!0,(0,i.sx)("Context Viewed",{name:"should-close-open-audio-nux"}))},200)}})()},327017:(e,r,n)=>{n.d(r,{h:()=>T,q:()=>y});var i=n(268853),a=n(776250),o=n(517333),s=n(966712),l=n(563706),c=n(36381),d=n(776621),u=n(988022),m=n(805286),p=n(301807),h=n(748207),_=n(618807),g=n(338400),f=n(636751);let E=e=>e>.1,y=.05,b=`Something there is that doesn't love a wall,
That sends the frozen-ground-swell under it,
And spills the upper boulders in the sun;
And makes gaps even two can pass abreast.
The work of hunters is another thing:
I have come after them and made repair
Where they have left not one stone on a stone,
But they would have the rabbit out of hiding,
To please the yelping dogs. The gaps I mean,
No one has seen them made or heard them made,
But at spring mending-time we find them there.
I let my neighbor know beyond the hill;
And on a day we meet to walk the line
And set the wall between us once again.
We keep the wall between us as we go.
To each the boulders that have fallen to each.
And some are loaves and some so nearly balls
We have to use a spell to make them balance:
\u2018Stay where you are until our backs are turned!\u2019
We wear our fingers rough with handling them.
Oh, just another kind of out-door game,
One on a side. It comes to little more:
There where it is we do not need the wall:
He is all pine and I am apple orchard.
My apple trees will never get across
And eat the cones under his pines, I tell him.
He only says, \u2018Good fences make good neighbors.\u2019
Spring is the mischief in me, and I wonder
If I could put a notion in his head:
\u2018Why do they make good neighbors? Isn't it
Where there are cows? But here there are no cows.
Before I built a wall I'd ask to know
What I was walling in or walling out,
And to whom I was like to give offense.
Something there is that doesn't love a wall,
That wants it down.\u2019 I could say \u2018Elves\u2019 to him,
But it's not elves exactly, and I'd rather
He said it for himself. I see him there
Bringing a stone grasped firmly by the top
In each hand, like an old-stone savage armed.
He moves in darkness as it seems to me,
Not of woods only and the shade of trees.
He will not go behind his father's saying,
And he likes having thought of it so well
He says again, \u2018Good fences make good neighbors.\u2019`.split(/\n/g).map(e=>e.trim()),v=0,I=class e{constructor(e){this.isMuted=!1,this.handlingTokenExpiration=!1,this.decryptedUserMap={},this.averageRecentVoiceLevel={},this.volumeDataInterval=null,this.micStateInterval=null,this.streamingAudioForCaptions=!1,this._microphonePermissionDenied=!0,this.captionsToggleEnabled=!1,this.volumeLevelsStore=(0,_._)({}),this.activeSpeakerIdStore=(0,_._)(null),this.recentlySpokeIdStore=(0,_._)(null),this.setMicrophone=async e=>{try{this.unpublishedLocalAudioTrack?.setDevice(e.deviceId),await this.localAudioTrack?.setDevice(e.deviceId),this.microphone=e}catch(e){throw e}},this.setPlaybackDevice=async e=>{try{this.client?.remoteUsers.forEach(r=>r.audioTrack?.setPlaybackDevice(e.deviceId)),this.playbackDevice=e}catch(e){throw e}},this.getMicrophones=e=>this.AgoraRTC.getMicrophones(e),this.getPlaybackDevices=e=>this.AgoraRTC?.getPlaybackDevices(e),this.currentMicrophone=async()=>this.microphone||(await this.getMicrophones())?.[0],this.currentPlaybackDevice=async()=>this.playbackDevice||(await this.getPlaybackDevices())?.[0],this.getParticipantIds=async()=>{if(!this.client||!this.userId)throw Error("Client not yet instantiated");let e=[];for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);n&&e.push(n)}return e.push(this.userId),e},this.startPollingMicState=()=>{o.eD&&(this.microphonePermissionDenied&&o.eD.setUsingMicrophone(!1),this.micStateInterval=setInterval(()=>{this.client&&(o.eD?.setIsInVoiceCall("DISCONNECTED"!==this.client.connectionState),o.eD?.setUsingMicrophone(!!this.isPublishingLocalTrack()))},5e3))},this.stopPollingMicState=()=>{this.micStateInterval&&(clearInterval(this.micStateInterval),this.micStateInterval=null)},this.isPublishingLocalTrack=()=>this.client?.localTracks.some(e=>e.getTrackId()===this.localAudioTrack?.getTrackId()),this.startPollingVolumeData=()=>{this.volumeDataInterval||(this.volumeDataInterval=setInterval(async()=>{if(!this.client||!this.userId)return;let e={};for(let e in this.averageRecentVoiceLevel)this.averageRecentVoiceLevel[e]*=.8;for(let r of this.client.remoteUsers){let n=await this.getDecryptedUserId(r.uid);if(!n)continue;let i=r.audioTrack?.getVolumeLevel()||0,a=this.averageRecentVoiceLevel[n];this.averageRecentVoiceLevel[n]=(a||0)+i,e[n]={isMuted:!r.audioTrack,volumeLevel:i}}let r=this.localAudioTrack?.getVolumeLevel()||0;this.averageRecentVoiceLevel[this.userId]=this.isMuted?0:(this.averageRecentVoiceLevel[this.userId]||0)+r,e[this.userId]={isMuted:this.isMuted,volumeLevel:r},this.checkLocalVolumeLevels(),this.volumeLevelsStore.set(e),this.updateActiveSpeakers(),this.updateRecentlySpoke()},200))},this.stopPollingVolumeData=()=>{this.volumeDataInterval&&(clearInterval(this.volumeDataInterval),this.volumeDataInterval=null)},this.checkLocalVolumeLevels=()=>{this.isMuted&&this.unpublishedLocalAudioTrack&&this.unpublishedLocalAudioTrack.getVolumeLevel()>.6&&this.callEventCallback?.(f.$E.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED)},this.updateActiveSpeakers=()=>{let e=Object.entries(this.averageRecentVoiceLevel).filter(e=>e[1]>y).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.activeSpeakerIdStore.set(e)},this.updateRecentlySpoke=()=>{let e=Object.entries(this.averageRecentVoiceLevel).sort((e,r)=>e[1]>r[1]?-1:1).map(e=>e[0]);this.recentlySpokeIdStore.set(e)},this.onCallDisconnect=()=>{m.R9.sendVoiceMetadata(""),this.stopPollingVolumeData(),o.eD?.setIsInVoiceCall(!1),o.eD?.setUsingMicrophone(!1),this.localAudioTrack?.setEnabled(!1),this.unpublishedLocalAudioTrack?.setEnabled(!1)},this.attachDeviceListeners=e=>{e.onMicrophoneChanged=e=>{this.microphone?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&this.getMicrophones().then(e=>{this.microphone=e.length>0?e[0]:null})},e.onPlaybackDeviceChanged=e=>{this.playbackDevice?.deviceId===e.device.deviceId&&"INACTIVE"===e.state&&l.Ay.chrome&&this.getPlaybackDevices().then(e=>{this.playbackDevice=e.length>0?e[0]:null})}},this.audioCaptionQueues=new p.b,this.audioCaptionStream=new h.T,this.AgoraRTC=e,this.AgoraRTC.setLogLevel((0,s.kc)().voice_agora_debug_level_logs?0:3),this.AgoraRTC.setArea(["OVERSEA"]),this.localAudioTrack=null,this.unpublishedLocalAudioTrack=null,this.microphone=null,this.playbackDevice=null,this.attachDeviceListeners(e),(0,s.kc)().voice_debug_captions_enabled&&setTimeout(()=>{setInterval(()=>{this.audioCaptionStream.addNewCaption(this.userId?this.userId:"dummyUserId",Date.now(),b[v++%b.length])},1501)},1500)}static createInstance(){return this.instance?Promise.resolve():new Promise((r,n)=>{let i=document.createElement("script");i.src=(0,s.ck)("0706b46bdc09a419282285b791ea1dd3c019ecd6"),i.setAttribute("nonce",(0,s.tl)().csp_nonce),i.onload=()=>{let n=window.AgoraRTC;this.instance=new e(n),r()},i.onerror=()=>{n(Error("Provider audio script load error"))},document.body.appendChild(i)})}static getInstance(){return this.instance}static leave(){this.instance?.leave()}async join({appId:r,callId:n,token:i,callUserId:s,userId:c,encryptionKey:d,userEncryptionKey:m,setParticipantIdsCallback:p,callEventCallback:h,store:_,fileKey:g}){if(await this.setMicrophonePermissions(),!this.getSystemCompatibility())throw Error("System incompatible");this.setParticipantIdsCallback=p,this.userId=c,this.userEncryptionKey=m,this.callEventCallback=h;try{let e="vp8";l.Ay.safari&&+l.Ay.version>=13&&(e="h264"),await this.client?.leave(),this.client=this.AgoraRTC.createClient({mode:"live",codec:e}),this.AgoraRTC.setParameter("AUDIO_SOURCE_VOLUME_UPDATE_INTERVAL",200),this.userId=c,this.handlingTokenExpiration=!1,this.client.setEncryptionConfig("aes-256-xts",d),this.attachClientListeners(n,i,c,d,h),await this.client.join(r,n,i,s),o.eD?.setIsInVoiceCall(!0),await this.client.setClientRole("host"),this.microphonePermissionDenied||(this.localAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId}),this.unpublishedLocalAudioTrack=await this.AgoraRTC.createMicrophoneAudioTrack({AEC:!0,AGC:!0,ANS:!0,microphoneId:this.microphone?.deviceId})),this.localAudioTrack&&await this.client.publish(this.localAudioTrack),await this.unmute()}catch(o){(0,a.sx)("Voice Call - Error",{callId:n,token:i,userId:c,encryptionKey:d,message:`${o.message}`,agora_exception:!1,agora_recovery:!1,join:!0},{forwardToDatadog:!0});let r=Error(`Error joining call: ${o.message}`);throw await e.leave(),r}finally{(0,u.ds)("voice_user_joined",g,_.getState(),{callId:n,userId:c,encryptionKey:d,captions_enabled:this.captionsToggleEnabled}),(this.client?.connectionState!=="DISCONNECTED"||this.isPublishingLocalTrack())&&this.startPollingMicState()}}get uid(){return this.client?.uid}async renewToken(e){await this.client?.renewToken(e),this.handlingTokenExpiration=!1,(0,a.sx)("Voice Call - Token Renewed",{token:e,userId:this.client?.uid&&this.decryptedUserMap[this.client?.uid]})}async leave(){await this.client?.leave(),this.stopPollingMicState(),this.audioCaptionQueues.clear(),this.audioCaptionStream.clear()}async mute(){await this.localAudioTrack?.setEnabled(!1),this.audioCaptionQueues.removeTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!1),this.isMuted=!0}async unmute(){await this.localAudioTrack?.setEnabled(!0),(0,g.WO)()&&this.streamingAudioForCaptions&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack?.getMediaStreamTrack()),o.eD?.setUsingMicrophone(!0),this.isMuted=!1}streamAudioForCaptions(e){(0,g.WO)()&&this.streamingAudioForCaptions!==e&&(this.streamingAudioForCaptions=e,this.audioCaptionQueues.clear(),this.streamingAudioForCaptions&&(this.client?.remoteUsers.forEach(async e=>{let r=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(r,e.audioTrack?.getMediaStreamTrack())}),this.localAudioTrack&&!this.isMuted&&this.audioCaptionQueues.addTrack(this.userId,this.localAudioTrack.getMediaStreamTrack())))}getSystemCompatibility(){return this.AgoraRTC.checkSystemRequirements()}isLocalUserSpeaking(){return!!this.userId&&E(this.averageRecentVoiceLevel[this.userId])}attachClientListeners(e,r,n,i,s){this.client?.removeAllListeners(),this.client?.on("user-published",async(e,r)=>{if(await this.client?.subscribe(e,r),"audio"===r){let r=e.audioTrack||null;if(r?.play(),this.playbackDevice&&r?.setPlaybackDevice(this.playbackDevice.deviceId),g.WO()&&r&&this.streamingAudioForCaptions){let n=await this.getDecryptedUserId(e.uid);this.audioCaptionQueues.addTrack(n,r.getMediaStreamTrack())}}}),this.client?.on("user-unpublished",async(e,r)=>{if(!o.eD||"audio"!==r)return;let n=await this.getDecryptedUserId(e.uid);if(!n)return;let i=new Set;for(let r of this.client?.remoteUsers||[]){let a=await this.getDecryptedUserId(r.uid),o=e.audioTrack?.getMediaStreamTrack().id;a===n&&o&&i.add(o)}this.audioCaptionQueues.removeUnpublishedTrack(n,i)});let l=!0;this.client?.on("network-quality",function(o){l&&(o.downlinkNetworkQuality>=4||o.uplinkNetworkQuality>=4)?(a.sx("Voice Call - Bad Call Quality",{callId:e,token:r,userId:n,encryptionKey:i,message:`Bad call quality detected. downlink = ${o.downlinkNetworkQuality}, uplink = ${o.uplinkNetworkQuality}`,agora_exception:!1,agora_recovery:!1,join:!1},{forwardToDatadog:!0}),l=!1):l=!0}),this.client?.on("user-joined",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_JOINED,r)}),this.client?.on("user-left",async e=>{this.setParticipantIdsCallback?.(await this.getParticipantIds());let r=await this.getDecryptedUserId(e.uid);r!==this.userId&&s(f.$E.USER_LEFT,r)}),this.client?.on("connection-state-change",async r=>{let n;switch(r){case"CONNECTED":if(m.R9.sendVoiceMetadata(e),this.setParticipantIdsCallback?.(await this.getParticipantIds()),this.startPollingVolumeData(),this._microphonePermissionDenied){n=f.$E.CONNECTED_WITH_MIC_DISABLED;break}n=f.$E.CONNECTED;break;case"DISCONNECTED":this.onCallDisconnect(),n=f.$E.DISCONNECTED;break;case"CONNECTING":n=f.$E.CONNECTING;break;case"DISCONNECTING":n=f.$E.DISCONNECTING;break;case"RECONNECTING":n=f.$E.RECONNECTING}void 0!==n&&s(n)}),this.client?.on("exception",o=>{let l;switch(o.code){case 2001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW;break;case 2002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW;break;case 2003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW;break;case 2005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED;break;case 4001:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER;break;case 4002:l=f.$E.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER;break;case 4003:if(this.microphonePermissionDenied)break;l=f.$E.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER;break;case 4005:l=f.$E.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER}l&&s(l),o.code>=3e3?(console.error(o),a.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:i,message:o.msg,code:o.code,agora_exception:!1,agora_recovery:!0,join:!1},{forwardToDatadog:!0})):a.sx("Voice Call - Error",{callId:e,token:r,userId:n,encryptionKey:i,message:o.msg,code:o.code,agora_exception:!0,agora_recovery:!1,join:!1},{forwardToDatadog:!0})}),this.client?.on("token-privilege-will-expire",()=>{if(!this.handlingTokenExpiration){if(this.handlingTokenExpiration=!0,!this.client?.remoteUsers.length){s(f.$E.CALL_INACTIVE),a.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:i,callInactive:!0});return}s(f.$E.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT),a.sx("Voice Call - Token Will Expire",{callId:e,token:r,userId:n,encryptionKey:i})}}),this.client?.on("token-privilege-did-expire",()=>{s(f.$E.TOKEN_EXPIRED),a.sx("Voice Call - Token Did Expire",{callId:e,token:r,userId:n,encryptionKey:i})})}async getDecryptedUserId(e){try{return this.decryptedUserMap[e]||(this.decryptedUserMap[e]=await (0,c.We)(this.userEncryptionKey,e.toString())),this.decryptedUserMap[e]}catch{(0,d.$D)(i.e.UNOWNED,Error(`Failed to decrypt encrypted user: ${e}`)),this.callEventCallback?.(f.$E.ERROR)}}async setMicrophonePermissions(){if(o.eD){this._microphonePermissionDenied=!await o.eD.requestMicrophonePermission();return}try{await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),this._microphonePermissionDenied=!1}catch(e){this._microphonePermissionDenied=!0}}get microphonePermissionDenied(){return this._microphonePermissionDenied}};I.instance=null;let T=I},571232:(e,r,n)=>{n.d(r,{Eo:()=>_,W5:()=>h,bF:()=>g});var i=n(411855),a=n(188507),o=n(821910),s=n(44948),l=n(358145),c=n(891093),d=n(805286),u=n(85098),m=n(860178);function p(){let e=(0,a.d4)(e=>e.multiplayer).allUsers,r=d.R9.useVoiceMetadataBySessionId();function n(e,r){return e.sessionID===r.sessionID&&e.sawMouse===r.sawMouse&&e.deviceName===r.deviceName&&e.name===r.name&&e.imageURL===r.imageURL}return{multiplayerUsersInVoiceCall:(0,s.Op)(()=>e.filter(e=>r[e.sessionID]?.connectedCallId),[e,r],n),multiplayerUsersNotInVoiceCall:(0,s.Op)(()=>e.filter(e=>!r[e.sessionID]?.connectedCallId),[e,r],n)}}function h(e,r){let n=(0,m.iZ)(),o=(0,a.d4)(e=>e.multiplayer.deviceNameFilter),s=(0,a.d4)(r=>e&&r.voice.activeCall[e]),{multiplayerUsersInVoiceCall:c,multiplayerUsersNotInVoiceCall:d}=p(),h=(0,a.d4)(e=>e.voice.userIdsInCallFromProvider),[_,g]=(0,i.useState)(new Set),[f,E]=(0,i.useState)([]),[y,b]=i.useState(),v=(0,l.ZC)(s);return i.useEffect(()=>{s&&!v&&!y&&r&&(b(!0),setTimeout(()=>{b(!1)},2e3))},[s,v,r,y]),i.useEffect(()=>{!function(){if(s&&h.length>1&&!y){let e=new Set(h);g(e);let r=[];for(let n of[...d,...c])e.has(n.userID)||r.push(n);E((0,u._i)(r,o))}else g(new Set(c.map(e=>e.userID))),E((0,u._i)(d,o))}()},[s,c,d,n,o,h,y]),{userIdsInCall:_,usersNotInCall:f}}function _(e,r){let n=(0,a.wA)(),{multiplayerUsersInVoiceCall:s,multiplayerUsersNotInVoiceCall:l}=p(),d=i.useMemo(()=>s.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[s]),u=i.useMemo(()=>l.reduce((e,r)=>({...e,[r.userID]:r.userID in e?e[r.userID].add(r):new Set([r])}),{}),[l]),m=(0,a.d4)(e=>r&&r in e.activeFileUsers?e.activeFileUsers[r]:void 0,a.bN),h=(0,a.d4)(e=>e.voice.voiceUsersById),[_,g]=(0,i.useState)([]),[f,E]=(0,i.useState)([]),[y,b]=(0,i.useState)([]);return i.useEffect(()=>{let r=[],n=[],i=[];for(let a of e)if(a in d)n.push(...d[a]);else if(a in u)n.push(...u[a]);else if(m&&a in m){let e=m[a];r.push({imageURL:e.imageUrl,name:e.handle,userID:e.id})}else a in h?r.push(h[a]):i.push(a);(0,o.c2)(y,n)||b(n),(0,o.c2)(f,r)||E(r),(0,a.bN)(_,i)||g(i)},[m,e,d,u,h,_,y,f]),i.useEffect(()=>{r&&_.length>0&&n(c.NS({fileKey:r,userIds:_}))},[_,n,r]),{voiceUsersInMultiplayer:y,voiceUsersNotInMultiplayer:f}}function g(e,r){let{voiceUsersInMultiplayer:n,voiceUsersNotInMultiplayer:a}=_(e,r);return i.useMemo(()=>[...n,...a],[n,a])}},338400:(e,r,n)=>{n.d(r,{HJ:()=>b,Lk:()=>h,Mw:()=>E,WO:()=>f,YL:()=>g,gW:()=>_,nN:()=>y});var i=n(411855),a=n(188507),o=n(517333),s=n(358145),l=n(563706);n(178466);var c=n(891093),d=n(335682),u=n(984968),m=n(636751);let p=()=>!((0,l.wg)()||(0,l.o4)());function h(){let e=(0,d.q5)(),r=(0,a.d4)(e=>e.orgById),n=(0,a.d4)(e=>e.teams),o=e?.key,l=(0,a.d4)(e=>o&&!!e.voice.activeCall[o]),[c,u]=i.useState(!1),m=(0,s.ZC)(c);return i.useEffect(()=>{let i=p()&&4===g({openFile:e,teams:n,orgById:r});!0===m&&!i&&l||u(i)},[e,r,n,m,l]),c}var _=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.DISABLED_BY_ORG=1]="DISABLED_BY_ORG",e[e.INELIGIBLE_FILE_IN_PERSONAL_SPACE=2]="INELIGIBLE_FILE_IN_PERSONAL_SPACE",e[e.ELIGIBLE_WITH_UPGRADE=3]="ELIGIBLE_WITH_UPGRADE",e[e.ELIGIBLE=4]="ELIGIBLE",e))(_||{});function g(e){if("gov"===window.INITIAL_OPTIONS.cluster_name)return 0;let r=e.openFile;if(!r||!r.parentOrgId&&!r.teamId)return 0;if(r.parentOrgId){let n=e.orgById[r.parentOrgId];return n?n.voice_enabled?4:1:0}if(r.teamId){let n=e.teams[r.teamId];return n?(0,u.PS)(n)?4:3:0}return 2}function f(){return!!o.eD}function E(e){return e>=m.MK.STARTED&&e<m.MK.DONE}function y(e){return e<m.MK.NOT_STARTED}function b(e,r){o.eD?.setCaptionsEnabled(r),e(c.t7(r))}},325538:(e,r,n)=>{n.d(r,{Em:()=>o,TI:()=>s,Wl:()=>a});var i=n(411855);function a(e,r){let[n,a]=(0,i.useState)(null),[o,s]=(0,i.useState)(!1);return((0,i.useEffect)(()=>{if(r&&!o){let n=function(r){a(r[e]||null)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)?n:null}function o(e,r,n){let i=r=>{n(r[e]||null)};return r&&r.volumeLevelsStore.subscribe(i),{unsubscribe:()=>r?.volumeLevelsStore.unsubscribe(i)}}function s(e,r){let[n,a]=(0,i.useState)(),[o,s]=(0,i.useState)(!1);if((0,i.useEffect)(()=>{if(r&&!o){let n=function(r){a(r[e]?.isMuted)};return r.volumeLevelsStore.subscribe(n),s(!0),()=>{r.volumeLevelsStore.unsubscribe(n),s(!1)}}},[r]),r)return n}},349719:(e,r,n)=>{n.d(r,{$g:()=>w,Au:()=>g,BG:()=>p,Bt:()=>d,GD:()=>I,LF:()=>T,N$:()=>A,Qn:()=>v,_L:()=>_,bf:()=>a,fL:()=>u,hQ:()=>y,le:()=>b,mX:()=>f,oF:()=>m,pY:()=>h,rx:()=>S,sZ:()=>E,u_:()=>c,wS:()=>C,w_:()=>N});var i,a,o=n(553716),s=n(743282);function l(e){window.parent.postMessage(e,"*")}function c(){l({type:"FIGMA_READY"})}function d(e){l({type:"CSS_PROPERTIES",data:{cssProperties:e}})}function u(e){l({type:"HTML_SKELETON",data:{htmlSkeleton:e}})}function m(e){l({type:"TEXT",data:{text:e}})}function p(e,r){l({type:"LAYERS",data:{rootNodeId:e,layers:r}})}function h(e){l({type:"ASSET",data:{asset:e}})}function _(e){l({type:"RELATED_LINK_CREATED",data:{link:e}})}function g(e){l({type:"RELATED_LINK_REMOVED",data:{link:e}})}function f(e){l({type:"SELECTED_LAYER_GUID",data:{guid:e}})}function E(e){l({type:"SELECTED_PAGE_GUID",data:{guid:e}})}function y(e){l({type:"CONFIGURE_AUTOCOMPLETE",data:{providers:e}})}function b(e){l({type:"GENERATED_CODE",data:{sections:e}})}let v=(0,n(479296).n)(e=>{l({type:"OPEN_IN_BROWSER",data:{href:e}})});function I(e){l({type:"FILE_NAME",data:{name:e}})}function T(e,r,n){l({type:"THUMBNAIL",data:{nodeId:e,thumbnailDataUri:r,thumbnailSize:n}})}function S(){l({type:"PAGE_LOADED"})}function w(){l({type:"IDLE_LOGOUT"})}function A(e){l({type:"MAPPING_SUGGESTION",data:{requestId:e.requestId,mappings:e.mappings||null,error:e.error||null}})}(i||(i={})).sendGenerateFigmadocMessage=function(e){return C.sendMessage({type:"GENERATE_FIGMADOC",request:{userCode:e}})},(e=>{e.sendGetLocalFileExtensionManifest=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_MANIFEST",request:{id:e}})},e.sendCreateMultipleNewLocalFileExtensions=function(e,r){return C.sendMessage({type:"CREATE_MULTIPLE_NEW_LOCAL_FILE_EXTENSIONS",request:{options:e,depth:r}})},e.sendGetLocalFileExtensionSourceMessage=function(e){return C.sendMessage({type:"GET_LOCAL_FILE_EXTENSION_SOURCE",request:{id:e}})},e.sendUpdateCachedContainsWidget=function(e){return C.sendMessage({type:"UPDATE_CACHED_CONTAINS_WIDGET",request:e})},e.sendGetLocalManifestFileExtensionIdsToCachedMetadataMap=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_METADATA_MAP",request:void 0})},e.sendRegisterManifestChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_MANIFEST_CHANGE_OBSERVER"},e)},e.sendRegisterCodeChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_CODE_CHANGE_OBSERVER"},e)},e.sendRegisterUIChangeObserverMessage=function(e){return N.registerCallback({type:"REGISTER_UI_CHANGE_OBSERVER"},e)},e.sendOpenExtensionDirectoryMessage=function(e){return l({type:"OPEN_EXTENSION_DIRECTORY",data:{id:e}})},e.sendOpenExtensionManifestMessage=function(e){return l({type:"OPEN_EXTENSION_MANIFEST",data:{id:e}})},e.sendRemoveFileExtensionMessage=function(e){return C.sendMessage({type:"REMOVE_LOCAL_FILE_EXTENSION",request:{id:e}})},e.sendGetLocalManifestFileExtensionIdsToCachedContainsWidgetMapMessage=function(){return C.sendMessage({type:"GET_LOCAL_MANIFEST_FILE_EXTENSION_IDS_TO_CACHED_CONTAINS_WIDGET_MAP",request:void 0})},e.sendToggleDevToolsMessage=function(){return l({type:"TOGGLE_DEV_TOOLS"})},e.sendGetAllLocalFileExtensionIdsMessage=function(){return C.sendMessage({type:"GET_ALL_LOCAL_FILE_EXTENSION_IDS",request:void 0})},e.sendWriteNewExtensionDirectoryToDiskMessage=function(e){return C.sendMessage({type:"WRITE_NEW_EXTENSION_DIRECTORY_TO_DISK",request:e})}})(a||(a={}));let C=new class{constructor(){this.pendingMessagesById={}}sendMessage(e){let r=(0,s.g)(),n={...e,requestId:r};return new Promise((e,i)=>{this.pendingMessagesById[r]={...n,resolve:e,reject:i},l(n)})}resolveMessage(e){let r=this.pendingMessagesById[e.requestId];if(!r){(0,o.x1)("MessageWithResponseManager.resolveMessage","No pending message found",{response:e,pendingMessagesById:this.pendingMessagesById},{reportAsSentryError:!0});return}e.response&&(r.resolve(e.response),delete this.pendingMessagesById[e.requestId])}},N=new class{constructor(){this.callbacksById={}}registerCallback(e,r){let n=(0,s.g)();return this.callbacksById[n]=r,l({...e,callbackId:n}),()=>this.cancelCallback(n)}resolveMessage(e){let r=this.callbacksById[e.callbackId];if(!r){(0,o.x1)("MessageWithCallbackManager.resolveMessage","No callback found",{response:e,callbacksById:this.callbacksById},{reportAsSentryError:!0});return}r(e.callbackData)}async cancelCallback(e){await C.sendMessage({type:"CANCEL_CALLBACK",request:{callbackId:e}}),delete this.callbacksById[e]}}},421234:(e,r,n)=>{function i(e,r){return`${location.origin}/files/${r?r+"/":""}workspace/${e}/directory/teams`}function a(e){let r={},n=0,i=0;return e.forEach(e=>{if(e.workspace_id){let n=r[e.workspace_id]??0;n++,r[e.workspace_id]=n}else e.team_id?n++:i++}),{libraryCountByWorkspaceId:r,unassignedLibrariesCount:n,draftLibrariesCount:i}}n.d(r,{fO:()=>i,wM:()=>a}),n(411855),n(966159),n(733556),n(711525),n(939863),n(349410),n(352898),n(679892),n(99506)},657193:(e,r,n)=>{n.d(r,{Ay:()=>O,yP:()=>N});var i=n(737947),a=n(966712),o=n(687396),s=n(837324),l=n(410424),c=n(941381),d=n(944682),u=n(738269),m=n(270056),p=n(293017),h=n(782656),_=n(445092),g=n(988022),f=n(420576),E=n(355513),y=n(630331),b=n(243987),v=n(707465),I=n(783967),T=n(935757),S=n(239671),w=n(668526),A=n(402465),C=n(396248);let N=(e,r)=>v.$Z.selectedViewHasMissingResources(e,r),L=0,O=e=>r=>function(n){var O,R;let P=e.getState().selectedView;r(n);let D=e.getState();if(u.Qv.matches(n)){let r=D.selectedView;if(r===A.o0&&(r=(0,a.Ay)().selected_view||(0,v.vU)(D,i.Ay.location.pathname,i.Ay.location.search,i.Ay.location.hash)),"fullscreen"===r.view&&r.fileKey){let{fileKey:i}=r,a=e.getState().fileByKey[i];a&&!n.payload.fromRealtime&&(0,S.oD)(r.editorType)!==a.editor_type&&(r.editorType=(0,S.wN)(a.editor_type??"design"))}if(N(D,r)&&(r={view:"resourceUnavailable",resourceType:(O=r,new o.$T().selectedViewMissingResourceType(D,O))}),"teamUpgrade"===r.view&&r.teamId){let e=D.teams[r.teamId];e&&e.pro_team&&!(0,b.WQ)(e)&&(r={view:"team",teamId:r.teamId,teamViewTab:w.A$.SETTINGS})}r!==A.o0?e.dispatch(u.$T(r)):D.user?.drafts_folder_id?e.dispatch(u.$T({view:"folder",folderId:D.user.drafts_folder_id})):e.dispatch(u.$T({view:"recentsAndSharing"}))}else if(p.OB.matches(n)){let e={view:"fullscreen",fileKey:n.payload.file.key,editorType:n.payload.fullscreenEditorType},r=(0,v.Np)(D,e);i.Ay.replace(r,{...e,jsCommitHash:(0,E.Qr)()})}else if(u.$T.matches(n)){if("prototype"!==P.view&&"prototype"===n.payload.view&&(0,C.q)()){let e=(0,v.Np)(D,n.payload);i.Ay.redirect(e)}"fullscreen"===n.payload.view&&("fullscreen"!==P.view||n.payload.editorType!==P.editorType)&&y.B8(n.payload.editorType);let{selectedView:r}=e.getState();if(!("inlinePreview"in r&&r.inlinePreview)&&!n.payload.fromPopstate){let r=(0,v.Np)(D,n.payload);i.Ay.location.pathname+i.Ay.location.search!==r?(("fullscreen"!==n.payload.view||n.payload.fileKey!==a.Ay().editing_file?.key)&&!T.YH&&(0,I.w)()&&(0,T._X)("fileBrowserHistory middleware selectView").then(r=>{e.dispatch(u.Qv(r.data.meta))}),!n.payload.forceReplaceState&&i.Ay.location.state&&(R=n.payload,null==P||null==R?P!==R:v.$Z.requireHistoryChange(P,R))?i.Ay.push(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}):i.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()})):null==i.Ay.location.state&&i.Ay.replace(r,{...n.payload,previousSelectedView:P,jsCommitHash:(0,E.Qr)()}),e.getState()?.user?.appData?.loggedOut&&"fullscreen"!==n.payload.view&&i.Ay.reload("User Logged out")}if("searchAndBrowse"===n.payload.subView){let e=n.payload.data;e&&!e.category&&(0,E.hL)((0,s.vC)(e))}else(0,E.OR)(D,n.payload)}else if(l.Af.matches(n)&&"hubFile"===D.selectedView.subView)(0,E.OR)(D,{hubFileId:n.payload.hubFileId,subView:"hubFile",view:"communityHub"});else if(c.l5.matches(n)){let r=e.getState().selectedView,a=n.payload.publishedPlugins,o=r&&"communityHub"===r.view&&"plugin"===r.subView&&r.publishedPluginId;if(o&&a&&a.some(e=>e.id===o)){if(i.Ay){let e=(0,v.Np)(D,r);i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}(0,E.OR)(D,r)}}else if(m.yJ.matches(n)){let r=e.getState().selectedView;"folder"===r.view&&r.folderId===n.payload.folder.id&&(0,E.OR)(D,r)}else if(m.bE.matches(n)){let r=e.getState().selectedView;if("folder"===r.view&&r.folderId===n.payload.id){(0,E.OR)(D,r);let e=(0,v.Np)(D,r);i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(h.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view){let e=r.fileKey&&D.fileByKey[r.fileKey];if(e){let a=(0,f.L8)(e,D.repos);if(a&&a.id===n.payload.repo.id){(0,E.OR)(D,r);let e=(0,v.Np)(D,r);i.Ay&&i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}}}else if(d.yJ.matches(n)){let r=e.getState().selectedView;if("fullscreen"===r.view&&n.payload.file.key===r.fileKey||"prototype"===r.view&&n.payload.file.key===r.file.key){(0,E.OR)(D,r);let e=(0,v.Np)(D,r);i.Ay&&i.Ay.replace(e,{...r,jsCommitHash:(0,E.Qr)()})}}else if(_.Rz.matches(n)){let r=e.getState().selectedView;r?.view==="search"&&(i.Ay.replace((0,v.Np)(D,r),{...r,jsCommitHash:(0,E.Qr)()}),(0,E.OR)(D,r))}else u.Oe.matches(n)?(0,g.uE)("File Browser Sidebar Clicked",e.getState(),{clickedResourceType:n.payload.clickedResourceType,resourceIdOrKey:n.payload.resourceIdOrKey}):0===L&&(L=setTimeout(function(){L=0,null===e.getState().selectedView&&e.dispatch(u.$T({view:"recentsAndSharing"}))},0));return n}},731078:(e,r,n)=>{n.d(r,{Pf:()=>o,ck:()=>i,hv:()=>a});var i=(e=>(e[e.CURRENT_USER=0]="CURRENT_USER",e[e.TEAM=1]="TEAM",e[e.ORG=2]="ORG",e[e.WORKSPACE=3]="WORKSPACE",e))(i||{}),a=(e=>(e[e.INIT=0]="INIT",e[e.POSITIONING=1]="POSITIONING",e[e.UPLOADING=2]="UPLOADING",e))(a||{}),o=(e=>(e[e.SMALL=120]="SMALL",e[e.LARGE=500]="LARGE",e))(o||{})},288300:(e,r,n)=>{n.d(r,{MM:()=>s,Rt:()=>o,Vq:()=>l});var i=n(330654),a=n(867795),o=(e=>(e.ALL="All",e.STICKERS_AND_COMPONENTS="Stickers",e.TEMPLATES="Templates",e.TEAM_TEMPLATES="TeamTemplates",e.WIDGETS="Widgets",e.PLUGINS="Plugins",e.MORE="More",e.ORG_FACE_STAMPS="OrgFaceStamps",e))(o||{});let s=i.enum(["universal-insert-figjam-all","universal-insert-figjam-all-use-case","universal-insert-figjam-templates","universal-insert-figjam-stickers","universal-insert-figjam-stickers-compact-view","universal-insert-figjam-widgets","universal-insert-figjam-plugins","universal-insert-figjam-more","universal-insert-figjam-collage","universal-insert-figjam-all-whiteboard-tools"]);function l(e){switch(e){case a.p.ALL:return"universal-insert-figjam-all";case a.p.TEMPLATES:return"universal-insert-figjam-templates";case a.p.STICKERS_AND_COMPONENTS:return"universal-insert-figjam-stickers";case a.p.WIDGETS:return"universal-insert-figjam-widgets";case a.p.PLUGINS:return"universal-insert-figjam-plugins";case a.p.MORE:return"universal-insert-figjam-more";case a.p.RECENTS_COLLAGE:return"universal-insert-figjam-collage";default:throw Error("Unhandled modal tab in convertModalTabToTrackingSource")}}},179536:(e,r,n)=>{n.d(r,{_V:()=>o,b4:()=>a,kM:()=>i});var i=(e=>(e[e.Text=0]="Text",e[e.FrameOrGroup=1]="FrameOrGroup",e[e.Component=2]="Component",e[e.Instance=3]="Instance",e[e.Image=4]="Image",e[e.Shape=5]="Shape",e[e.Other=6]="Other",e[e.MatchCase=7]="MatchCase",e[e.WholeWords=8]="WholeWords",e))(i||{});let a=[0,1,2,3,4,5,6],o=[7,8]},694241:(e,r,n)=>{n.d(r,{Yv:()=>a,fJ:()=>i});let i="f195f195-f195-f195-f195-f195f195f195";var a=(e=>(e.DEFAULT="DEFAULT",e.CUSTOM="CUSTOM",e))(a||{})},555328:(e,r,n)=>{n.d(r,{I0:()=>y,KS:()=>p,PM:()=>I,Qv:()=>_,U:()=>b,Ug:()=>m,aL:()=>c,bD:()=>s,cS:()=>g,dj:()=>A,hE:()=>l,m3:()=>v,po:()=>w,vt:()=>u,xQ:()=>E,zF:()=>T});var i=n(330654),a=n(440535),o=n(178787),s=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.COMMENT="comment",e))(s||{}),l=(e=>(e.SUBSCRIPTION="subscription",e.ONE_TIME="one_time",e))(l||{}),c=(e=>(e.DETAIL="detail",e.INSERTS="inserts",e.QUICK_ACTIONS="quick_actions",e.PLUGIN_ROW="plugin_row",e.REDESIGNED_PLUGIN_ROW="redesigned_plugin_row",e.SEARCH="search",e))(c||{}),d=(e=>(e[e.NO_USER=0]="NO_USER",e[e.NO_PROFILE=1]="NO_PROFILE",e))(d||{}),u=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e))(u||{}),m=(e=>(e.HUB_FILE="hub_file",e.PLUGIN="plugin",e.WIDGET="widget",e.PROFILE="profile",e))(m||{});let p=a.iG.extend({author:i.ignore(),parent_id:i.string().nullable(),reply_count:i.number(),last_replied_at:i.string().nullable(),resource_version_id:i.string(),message_meta:i.array(i.ignore()),rating_value:i.number().optional()});i.object({plugin:i.ignore().nullish(),plugin_install:i.ignore().nullish(),whitelisted_plugin:i.ignore().nullish(),hub_file:i.ignore().nullish(),profile:i.ignore().nullish(),community_comment:i.ignore().nullish(),widget:i.ignore().nullish(),community_resource_payment:i.ignore().nullish()});var h=(e=>(e[e.SHOW_404=0]="SHOW_404",e[e.REDIRECT_TO_INTERNAL_PROFILE=1]="REDIRECT_TO_INTERNAL_PROFILE",e))(h||{}),_=(e=>(e.ALL="ALL",e.ME="ME",e.RATINGS_REVIEWS="RATINGS_REVIEWS",e.COMMENTS="COMMENTS",e))(_||{}),g=(e=>(e.COMMUNITY_LANDING="community_landing",e.FILE_BROWSER_RECOMMENDED_TEMPLATES="file_browser_recommended_templates",e.FIGJAM_TEMPLATES_PICKER="figjam_templates_picker",e.BROWSE_PLUGINS_MODAL="browse_plugins_modal",e.BROWSE_WIDGETS_MODAL="browse_widgets_modal",e.CURATED_PAGE="curated_page",e.NA="na",e.CONFIG_VOTE="config_vote",e.COMMUNITY_WIDGETS_PAGE="community_widgets_page",e.FIGJAM_SIMPLE_TEMPLATES_PICKER="figjam_simple_templates_picker",e.FIGMA_INSERTS_NUX="figma_inserts_nux",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.COMMUNITY_LIBRARIES_QUICKSTART="community_libraries_quickstart",e.FIGJAM_SECTION_PRESET_PICKER="figjam_section_preset_picker",e.CATEGORY_PAGE="category_page",e.PIPER_TEMPLATE_MODAL="piper_template_modal",e.SLIDES_FEATURED_CREATORS="slides_featured_creators",e.SITES_TEMPLATE_MODAL="sites_template_modal",e))(g||{}),f=(e=>(e.PM="PM",e.DES="DES",e.ENG="ENG",e.MKT="MKT",e.UR="UR",e.OTH="OTH",e.ALL="ALL",e.STARTER="STARTER",e))(f||{});function E(e){return null!=e&&"is_widget"in e&&e.is_widget}function y(e){return null!=e&&"current_plugin_version_id"in e&&!e.is_widget}function b(e){return null!=e&&"client_meta"in e}function v(e){return!!e?.monetized_resource_metadata}function I(e){return!!e?.monetized_resource_metadata?.has_freemium_code}function T(e){return"third_party_m10n_status"in e&&e.third_party_m10n_status===o.PN.FLAGGED||"is_3rd_party_monetized"in e&&!!e.is_3rd_party_monetized}var S=(e=>(e.POST_COMPOSER="POST_COMPOSER",e.NAVBAR="NAVBAR",e.RECENT_FILES_DIRECT_LINK="RECENT_FILES_DIRECT_LINK",e.IFRAME="IFRAME",e))(S||{}),w=(e=>(e.ACTIVE="active",e.INACTIVE="inactive",e))(w||{}),A=(e=>(e.PASTE="paste",e.DROP="drop",e.FILE_INPUT="file_input",e))(A||{}),C=(e=>(e[e.TRY_IT_OUT=0]="TRY_IT_OUT",e[e.OPEN=1]="OPEN",e))(C||{});i.object({id:i.string().nullish(),hubFileId:i.string().nullish(),pluginId:i.string().nullish(),widgetId:i.string().nullish(),oneStars:i.number(),twoStars:i.number(),threeStars:i.number(),fourStars:i.number(),fiveStars:i.number(),totalRatings:i.number(),avgRating:i.number().nullish(),createdAt:i.date().nullish(),updatedAt:i.date().nullish()})},112976:(e,r,n)=>{n.d(r,{w:()=>i});let i={displayText:"",disabled:!0,separator:!0}},239671:(e,r,n)=>{n.d(r,{Bu:()=>v,CO:()=>T,Nw:()=>u,YP:()=>f,co:()=>m,fB:()=>I,fP:()=>p,nT:()=>h,oD:()=>g,oQ:()=>s,sL:()=>E,sq:()=>l,wN:()=>b,xq:()=>_,y9:()=>y,yY:()=>d});var i=n(922827),a=n(553716),o=n(99506);let s="si"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-2-n)}).join("")}(45,149,163)+"s",l="co"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-36-n)}).join("")}(2,149)+"per",c=function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-61-n)}).join("")}(32,202,198)+"lu"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-5-n)}).join("")}(4,119,129,109,125,126,124)+"o"+function(){var e=Array.prototype.slice.call(arguments),r=e.shift();return e.reverse().map(function(e,n){return String.fromCharCode(e-r-30-n)}).join("")}(39,179);function d(e){return 1===e||7===e}function u(e){return 2===e||d(e)}function m(e){return 4===e||u(e)}function p(e,r){switch(e){case 1:case 7:case 3:return r===o._Y.DESIGN;case 2:return r===o._Y.WHITEBOARD;case 4:return r===o._Y.SLIDES;case 5:return r===o._Y.SITES;case 6:return r===o._Y.COOPER;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),!1}}var h=(e=>(e[e.Design=1]="Design",e[e.Whiteboard=2]="Whiteboard",e[e.DevHandoff=3]="DevHandoff",e[e.Slides=4]="Slides",e[e.Sites=5]="Sites",e[e.Cooper=6]="Cooper",e[e.Illustration=7]="Illustration",e))(h||{});function _(e){switch(e){case 1:return i._YF.DESIGN;case 2:return i._YF.WHITEBOARD;case 3:return i._YF.DEV_HANDOFF;case 4:return i._YF.SLIDES;case 5:return i._YF.SITES;case 6:return i._YF.COOPER;case 7:return i._YF.ILLUSTRATION;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),i._YF.DESIGN}}function g(e){switch(e){case 2:return o._Y.WHITEBOARD;case 4:return o._Y.SLIDES;case 5:return o._Y.SITES;case 3:case 1:case 7:return o._Y.DESIGN;case 6:return o._Y.COOPER;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),o._Y.DESIGN}}function f(e){switch(e){case 2:return"whiteboard";case 4:return"slides";case 5:return"sites";case 3:return"dev_handoff";default:return"design"}}function E(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6}}function y(e){if(null==e)return null;switch(e){case o._Y.DESIGN:return"DESIGN";case o._Y.WHITEBOARD:return"WHITEBOARD";case o._Y.SLIDES:return"SLIDES";case o._Y.SITES:return"SITES";case o._Y.COOPER:return"COOPER"}}function b(e){if(null==e)return 1;switch(e){case o._Y.DESIGN:return 1;case o._Y.WHITEBOARD:return 2;case o._Y.SLIDES:return 4;case o._Y.SITES:return 5;case o._Y.COOPER:return 6}}function v(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 6:return l;case 7:return c;default:return e}}function I(e){switch(e){case i._YF.DESIGN:return 1;case i._YF.WHITEBOARD:return 2;case i._YF.DEV_HANDOFF:return 3;case i._YF.SLIDES:return 4;case i._YF.SITES:return 5;case i._YF.COOPER:return 6;case i._YF.ILLUSTRATION:return 7;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),1}}function T(e){switch(e){case 1:return"design";case 2:return"whiteboard";case 3:return"dev_handoff";case 4:return"slides";case 5:return s;case 6:return l;case 7:return c;default:return(0,a.x1)("editorType","Unknown editor type",{editorType:e}),""}}},454351:(e,r,n)=>{n.d(r,{A:()=>i,b:()=>a});var i=(e=>(e.FILE="file",e.REPO="repo",e.FILE_IMPORT="file_import",e))(i||{}),a=(e=>(e[e.FOLDER_ROW=0]="FOLDER_ROW",e[e.NEW_FOLDER_TEAM=1]="NEW_FOLDER_TEAM",e))(a||{})},945020:(e,r,n)=>{n.d(r,{M8:()=>c,UE:()=>_,Ws:()=>h,ai:()=>l,av:()=>E,f6:()=>s,kF:()=>d,lF:()=>g,zy:()=>y});var i=n(711525),a=n(330654),o=n(376485),s=(e=>(e.FILE_BROWSER_SIDEBAR_RECENTS="file_browser_sidebar_recents",e.FILE_BROWSER_SIDEBAR_DRAFTS="file_browser_sidebar_drafts",e.FILE_BROWSER_SIDEBAR_FOLDER="file_browser_sidebar_folder",e.FILE_BROWSER_THUMBNAILS_RECENTS="file_browser_thumbnails_recents",e.FILE_BROWSER_TOOLBAR_RECENTS="file_browser_toolbar_recents",e.FILE_BROWSER_TOOLBAR_FOLDER="file_browser_toolbar_folder",e.FILE_BROWSER_TOOLBAR_DRAFTS="file_browser_toolbar_drafts",e.FILE_BROWSER_TOPBAR_DELETED="file_browser_topbar_deleted",e.FILE_BROWSER_TOPBAR_RECENTS="file_browser_topbar_recents",e.FILE_BROWSER_TOPBAR_FOLDER="file_browser_topbar_folder",e.FILE_BROWSER_TOPBAR_DRAFTS="file_browser_topbar_drafts",e.FILE_BROWSER_TOPBAR_OFFLINE="file_browser_topbar_offline",e.FILE_BROWSER_EMPTY_FOLDER="file_browser_empty_folder",e.FILE_BROWSER_FEED="file_browser_feed",e.FILE_BROWSER_FOLDER_CONTEXT_MENU="file_browser_folder_context_menu",e.FILE_BROWSER_FOLDER_EMPTY_TILE="file_browser_folder_empty_tile",e.FILE_BROWSER_STARTER_TEAM_OVERVIEW="file_browser_starter_team_overview",e.FILE_BROWSER_TEAM_FILE_LIMIT_PAYWALL="file_browser_team_file_limit_paywall",e.FILE_BROWSER_TEAM_FOLDER_BUTTONS="file_browser_team_folder_buttons",e.FILE_BROWSER_NUX="file_browser_nux",e.FILE_BROWSER_ONBOARDING="file_browser_onboarding",e.FILE_BROWSER_TEMPLATES_BAR="file_browser_templates_bar",e.CURSOR_BOT_END_MODAL="cursor_bot_end_modal",e.DESIGN_TOOLTIPS_PLUS_OUTRO_MODAL="design_tooltips_plus_outro_modal",e.DESIGN_VIDEO_OUTRO_MODAL="design_video_outro_modal",e.FIGJAM_NUDGE_MODAL="figjam_nudge_modal",e.DESKTOP_NEW_TAB_BUTTON="desktop_new_tab_button",e.FIGJAM_WHATS_NEW_MODAL="figjam_whats_new_modal",e.FIGJAM_AI_ONBOARDING_MODAL="figjam_ai_onboarding_announcement",e.OFFLINE_NOTIFICATION="offline_notification",e.COMMUNITY_COLLECTIONS_PAGE="community_collections_page",e.FIGJAM_MAKE_SOMETHING_POPUP="figjam_make_something_popup",e.CONFIG_24_FEATURE_ANNOUNCEMENT_CAROUSEL="config_24_feature_announcement_carousel",e.DESIGN_TO_SLIDES_ENTRYPOINT="design_to_slides_entrypoint",e.BOARD_TO_DECK_FILE_MENU="figjam-file-editor-menu",e.BOARD_TO_DECK_SHARE_MODAL="figjam-share-modal",e.BOARD_TO_DECK_SELECTION="figjam-selection-inline-menu",e.BOARD_TO_DECK_PAGES_CONTEXT_MENU="figjam-page-context-menu",e))(s||{}),l=(e=>(e.NEW_TAB="new_tab",e.SAME_TAB="same_tab",e))(l||{});let c="multiplayer_user_state_change";var d=(e=>(e[e.NONE=0]="NONE",e[e.FOR_OPEN=1]="FOR_OPEN",e[e.FOR_MENU=2]="FOR_MENU",e))(d||{});let u=a.object({extensionId:a.string(),extensionType:a.enum(["plugin","widget"]),currentExtensionVersionId:a.string().nullable(),localFileId:a.number().nullable()}),m=a.object({displayName:a.string(),runPluginArgs:o.Ps.optional(),extensionInfo:u.optional().nullable()}),p=a.object({parameterValues:a.record(a.string()).optional().nullable()});function h(e){return e?{id:e.id,name:e.name,org_id:e.orgId,img_url:e.imgUrl??void 0,subscription:e.subscription,restrictions_list:e.restrictionsList,student_team_at:e.studentTeamAt?e.studentTeamAt.toString():null,grace_period_end:e.gracePeriodEnd?e.gracePeriodEnd.toString():null,deleted_at:e.deletedAt?e.deletedAt.toString():null,created_at:e.createdAt.toString(),student_team:!!e.studentTeamAt}:null}function _(e,r){let n={key:e.key,isAbandonedDraftFile:{status:i.tT.Loaded,data:!1},teamId:e.team_id,folderId:e.folder_id,clientMeta:e.client_meta,parentOrgId:e.parent_org_id||null,fileRepoId:e.file_repo_id,sourceFileKey:e.source_file_key,linkAccess:e.link_access,hasFileLinkPassword:e.has_file_link_password,hasProtoLinkPassword:e.has_proto_link_password,updatedAt:new Date(e.updated_at||e.created_at),trashedAt:e.trashed_at?new Date(e.trashed_at):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,creatorId:e.creator_id,createdAt:new Date(e.created_at),name:e.name,_name:e.name,editorType:e.editor_type||"design",orgBrowsable:e.org_browsable||null,thumbnailGuid:e.thumbnail_guid||null,sourceCheckpointId:e.source_checkpoint_id||null,license:e.license,isTeamTemplate:!!e.is_team_template,isPublishedSite:!!e.is_published_site,figFileLinks:[],isFavorited:!!e?.is_favorited,isTryFile:e.is_try_file,votingSessions:null,template:null,canPublishTemplate:!1,viewerExportRestricted:!!e.viewer_export_restricted,publishedHubFile:null,ownerRole:null,trackTags:{isTemplate:e.is_template||null},libraryKey:e.library_key??"",plan:null};if(!r)return n;let{team:a,folder:o,repo:s,sourceFile:l,can_delete:c,can_edit:d,can_edit_canvas:u,can_access_dev_mode_entry_point:m,can_access_full_dev_mode:p,can_manage:h,can_view:_,can_export:g,hasEduGracePeriod:f,org:E,orgUser:y,teamUser:b}=r;return{...n,team:function(e,r=!1){return e?{id:e.id,name:e.name,orgId:e.org_id,subscription:e.subscription,imgUrl:e.img_url||null,restrictionsList:e.restrictions_list||[],studentTeamAt:e.student_team_at?new Date(e.student_team_at):e.student_team?new Date:null,trialPeriodEnd:null,gracePeriodEnd:e.grace_period_end?new Date(e.grace_period_end):null,deletedAt:e.deleted_at?new Date(e.deleted_at):null,createdAt:new Date(e.created_at),eduGracePeriod:{id:"",isValid:r},licenseGroupId:e.license_group_id,licenseGroup:e.license_group,workspaceId:e.workspace_id,orgAccess:e.org_access,studentTeamState:e.student_team_state}:null}(a,f),project:o?function(e,r=!0,n=!0){return{id:e.id,orgId:e.org_id||null,teamId:e.team_id,path:e.path,inviteOnlyAt:e.is_invite_only?new Date:null,viewOnlyAt:e.is_view_only?new Date:null,trashedAt:e.trashed_at?new Date(e.trashed_at):null,subscription:e.is_subscribed?{}:null,description:e.description,canEdit:r,canRename:n,canCreateDesignFile:e.canCreateDesignFile,canCreateFigjamFile:e.canCreateFigjamFile,canCreateSlidesFile:e.canCreateSlidesFile}}(o):null,repo:s?{id:s.id,name:s.name,folderId:s.folder_id,teamId:s.team_id,defaultFileKey:s.default_file_key,canEdit:!0}:null,sourceFile:l?{key:l.key,name:l.name,fileRepoId:l.file_repo_id,canManage:l.can_manage,canView:l.can_view}:null,canDelete:c,canEdit:d,canEditCanvas:u,canAccessDevModeEntryPoint:m,canAccessFullDevMode:p,canManage:h,canView:_,canExport:g,org:E?{figjamDisabledAt:E.figjam_disabled_at,inviteWhitelist:{guestInviteSetting:E.invite_whitelist_guest_invite_setting},name:E.name,isSlidesDisabled:(0,i.Wk)(!!E.is_slides_disabled)}:null,currentPartialOrgUser:y?{draftsFolderId:y.drafts_folder_id,designPaidStatus:y.design_paid_status,whiteboardPaidStatus:y.whiteboard_paid_status,accountType:y.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null,devModeAccountTypeRequest:null}:null,currentTeamUser:b?{whiteboardPaidStatus:b.whiteboard_paid_status,designPaidStatus:b.design_paid_status,designAccountTypeRequest:null,whiteboardAccountTypeRequest:null}:null}}m.omit({runPluginArgs:!0}).extend({selectedRunPluginArgs:p.optional().nullable()});var g=(e=>(e[e.BAR=0]="BAR",e[e.SPINNER=1]="SPINNER",e))(g||{}),f=(e=>(e[e.NEW_FILE=0]="NEW_FILE",e[e.EXISTING_FILE=1]="EXISTING_FILE",e[e.WAITING=2]="WAITING",e[e.FINISHED_WAITING=3]="FINISHED_WAITING",e))(f||{});class E{constructor(e,r,n){this.tabCloseText=e,this.unsaved=r,this.error=n,this.hasUnsavedChanges=!1,this.hasUnsavedChanges=r.hasAutosaveChanges||r.hasMultiplayerChanges}equals(e){return e&&this.tabCloseText===e.tabCloseText&&this.unsaved.hasAutosaveChanges===e.unsaved.hasAutosaveChanges&&this.unsaved.hasMultiplayerChanges===e.unsaved.hasMultiplayerChanges&&this.error===e.error}}var y=(e=>(e[e.CUT=0]="CUT",e[e.COPY=1]="COPY",e[e.PASTE=2]="PASTE",e))(y||{})},813408:(e,r,n)=>{n.d(r,{I7:()=>g,aP:()=>l,k2:()=>s,kM:()=>f,o1:()=>d,xK:()=>h});var i=n(330654),a=n(882225),o=n(583894),s=(e=>(e.RESOURCE_PAGE="resource_page",e.EDITOR="editor",e.UNIVERSAL_POSTING="universal_posting",e.ADMIN="admin",e))(s||{}),l=(e=>(e[e.EDIT=0]="EDIT",e[e.UPLOADING=1]="UPLOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE",e))(l||{});let c=i.object({"500_500":i.string().optional(),"120_120":i.string().optional()});var d=(e=>(e.USER="user",e.TEAM="team",e.ORG="org",e))(d||{});let u=i.object({email:i.string().optional(),user_id:i.string(),is_primary_user:i.boolean(),can_sell_on_community:i.boolean().optional()}),m=a.n.and(i.object({id:i.string(),name:i.string(),profile_handle:i.string(),img_url:i.coerce.string().optional(),img_urls:c,current_user_is_following:i.coerce.boolean(),current_user_is_followed:i.coerce.boolean(),is_restricted_by_current_user:i.coerce.boolean(),entity_type:i.nativeEnum(d),primary_user_id:i.string().nullable(),location:i.string().nullable(),follower_count:i.number(),following_count:i.number(),isPending:i.boolean().optional(),associated_users:i.array(u).optional(),has_published:i.boolean().optional(),description:i.string().nullish()})),p=i.object({accepted:i.array(m),pending:i.array(m).optional()}),h=i.object({creator:o.aw,publisher:m,community_publishers:p}),_=o.aw.pick({id:!0,email:!0}),g=i.object({accepted:i.array(o.aw),pending:i.array(_).optional()});var f=(e=>(e.OWNER="owner",e.PUBLISHER="publisher",e.NONE="none",e))(f||{})},709290:(e,r,n)=>{n.d(r,{QT:()=>o});var i=n(330654);n(304769);var a=(e=>(e.COLLAB="collab",e.DEV="dev",e.FULL="full",e.VIEW="view",e))(a||{});let o=i.nativeEnum(a)},279702:(e,r,n)=>{n.d(r,{Ae:()=>p,Gf:()=>l,PW:()=>u,gK:()=>h,w3:()=>_,zk:()=>d});var i=n(140593),a=n(396353),o=n(922827),s=n(572304);let l={isInitialized:!1,hasMissingFonts:!1,activeUserAction:o.QOV.DEFAULT,currentTool:o.NLJ.SELECT,currentStampToolName:null,activeCanvasEditModeType:o.m1T.DESIGN_LAYOUT,showUi:!0,showKeyboardShortcuts:!1,topLevelMode:o.lyf.LAYOUT,urlNodeId:"-1:-1",hideMultiplayerCursors:!1,showArtboardOutline:!1,useRealmsForPluginDev:!1,showComments:!0,currentSelectedGradientStop:{type:o.vRS.NONE,index:-1},currentSelectedProperty:{type:o.rrT.NONE,indices:[]},isUserPresent:!1,showTogglePrototypeModeButton:!1,forcePublishFlattened:!1,prototypeCanvasUiVisible:!1,showTooltips:!1,prototypeBackgroundPickerOpen:!1,pastableStyleCount:0,statePropertyToFocus:"",hoveredNode:"",multiplayerSessionState:o.kul.UNJOINED,isReadOnly:!0,isSceneReadOnly:!0,hyperlinkLocation:null,onCanvasNameEditorInfo:{mode:o.nzw.NONE,x:0,y:0,angle:0,padding:{x:0,y:0},margin:{x:0,y:0},cornerRadius:0,fontSize:11,measurementId:"",initMeasurementText:"",isCentered:!1,invertTextPosition:!1},votingSessionInfo:{sessionId:"",votingStage:o.W8Y.NO_SESSION,userVoteLimit:0,votedNodes:[],userIdToVoteStampIds:{}},loadingEmbeds:[],temporarilyExpandedInstanceLayers:[],keyboardShortcuts:{},selectedInteractions:[],hoveredInteractions:[],currentPage:"0:1",pagesList:[],devHandoffCodeLanguage:{type:"first-party",id:"WEB"},devHandoffPreferences:{codeExtensionPreferences:{}},branchingSceneState:o.aTl.ATTACHED_FILE_TIP,lastBranchingStagingAction:o.YIO.NONE,themePreference:null,sceneGeneration:0,spellCheckSuggestions:{figma:{suggestions:[],rangeText:"",rangeStart:0,rangeEnd:0,noSuggestionsFound:!1}},onCanvasPillInfo:null,activeTextReviewPlugin:null,hotReloadPluginDev:!0,useLocalRelatedLinkPlugin:!1};var c=(e=>(e[e.MIXED_OR_NO_SYMBOLS=0]="MIXED_OR_NO_SYMBOLS",e[e.SYMBOLS_ONLY=1]="SYMBOLS_ONLY",e))(c||{}),d=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_WITHOUT_TRACKING_AS_EDIT=2]="YES_WITHOUT_TRACKING_AS_EDIT",e[e.YES_FORCE_TRACKING_AS_EDIT=3]="YES_FORCE_TRACKING_AS_EDIT",e[e.NO_BUT_TRACK_AS_EDIT=4]="NO_BUT_TRACK_AS_EDIT",e))(d||{}),u=(e=>(e[e.NOT_ASSET=0]="NOT_ASSET",e[e.ASSET_ICON=1]="ASSET_ICON",e[e.ASSET_IMAGE=2]="ASSET_IMAGE",e[e.ASSET_GIF=4]="ASSET_GIF",e[e.ASSET_VIDEO=8]="ASSET_VIDEO",e[e.ASSET_COMPONENT=16]="ASSET_COMPONENT",e))(u||{});function m(e){switch(e){case o.rXF.BOOLEAN:return"BOOLEAN";case o.rXF.COLOR:return"COLOR";case o.rXF.FLOAT:return"FLOAT";case o.rXF.STRING:return"STRING";case o.rXF.SYMBOL_ID:return"SYMBOL_ID";case o.rXF.MAP:return"MAP";case o.rXF.FONT_STYLE:return"FONT_STYLE";case o.rXF.TEXT_DATA:return"TEXT_DATA";default:(0,i.xb)(e)}}function p(e){return e.map(e=>o.j0r[e])}function h(e){return e?e.map(e=>o.j0r[e]):[o.j0r.ALL_SCOPES]}function _(e){let r={entries:[]};return Object.keys(e).forEach(n=>{let i=e[n];if(i){if(i.isMixed)return;{let e=function(e){function r(e){if(e.type!==o.Z_n.ALIAS)return null;let r=a.sD.fromString(e.value);return r?a.sD.toKiwi(r):null}switch(e.type){case o.Z_n.BOOLEAN:return{dataType:"BOOLEAN",resolvedDataType:"BOOLEAN",value:{boolValue:e.value}};case o.Z_n.FLOAT:return{dataType:"FLOAT",resolvedDataType:"FLOAT",value:{floatValue:e.value}};case o.Z_n.COLOR:return{dataType:"COLOR",resolvedDataType:"COLOR",value:{colorValue:e.value}};case o.Z_n.STRING:return{dataType:"STRING",resolvedDataType:"STRING",value:{textValue:e.value}};case o.Z_n.ALIAS:{let n=r(e);if(!n)return null;return{dataType:"ALIAS",resolvedDataType:m(e.resolvedType),value:{alias:n}}}case o.Z_n.NODE_FIELD_ALIAS:{let r=[];for(let n of e.value.stablePathToNode){let e=(0,s.sH)(n);if(!e)return null;r.push(e)}let n=e.value.nodeField,i=e.value.indexOrKey;if(!r||!n||!i)return null;if("COMPONENT_PROP_ASSIGNMENTS"===n)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:m(e.resolvedType),value:{nodeFieldAliasValue:{stablePathToNode:{guids:r},nodeField:n,indexOrKey:i}}};return null}case o.Z_n.FONT_STYLE:{let n=e.value.asFloat&&r(e.value.asFloat)?{resolvedDataType:"FLOAT",fontStyleKey:"asFloat",variableId:r(e.value.asFloat)}:e.value.asString&&r(e.value.asString)?{resolvedDataType:"STRING",fontStyleKey:"asString",variableId:r(e.value.asString)}:null;if(!n)return null;return{dataType:"FONT_STYLE",resolvedDataType:"FONT_STYLE",value:{fontStyleValue:{[n.fontStyleKey]:{dataType:"ALIAS",resolvedDataType:n.resolvedDataType,value:{alias:n.variableId}}}}}}case o.Z_n.MAP:case o.Z_n.EXPRESSION:case o.Z_n.SYMBOL_ID:case o.Z_n.TEXT_DATA:return null}}(i);e&&r.entries?.push({variableData:e,variableField:n})}}else r.entries.push({variableField:n})}),r}},172981:(e,r,n)=>{n.d(r,{O:()=>s});var i=n(140593),a=n(939863),o=n(155367);function s(e,r){switch(e){case o.J7.ACTIVITY:return(0,a.t)("org_admin_tab.activity");case o.J7.DASHBOARD:return(0,a.t)("org_admin_tab.dashboard");case o.J7.WORKSPACES:return(0,a.t)("org_admin_tab.workspaces");case o.J7.TEAMS:return(0,a.t)("org_admin_tab.teams");case o.J7.MEMBERS:return(0,a.t)("org_admin_tab.members");case o.J7.BILLING:switch(r){case o.G_.OVERVIEW:return(0,a.t)("org_admin_tab.overview");case o.G_.BILLING_GROUPS:return(0,a.t)("org_admin_tab.billing_groups");case o.G_.INVOICES:return(0,a.t)("org_admin_tab.invoices");default:return(0,a.t)("org_admin_tab.billing")}case o.J7.RESOURCES:switch(r){case o._d.LIBRARIES:return(0,a.t)("resources_tab.libraries");case o._d.SHARED_FONTS:return(0,a.t)("resources_tab.fonts");case o._d.APPROVED_PLUGINS:return(0,a.t)("resources_tab.approved_plugins");case o._d.APPROVED_WIDGETS:return(0,a.t)("resources_tab.approved_widgets");default:return(0,a.t)("org_admin_tab.resources")}case o.J7.SETTINGS:return(0,a.t)("org_admin_tab.settings");case o.J7.CONTENT:switch(r){case o.SN.WORKSPACES:return(0,a.t)("org_admin_tab.workspaces");case o.SN.TEAMS:return(0,a.t)("org_admin_tab.teams");case o.SN.ABANDONED_DRAFTS:return(0,a.t)("org_admin_tab.abandoned_drafts");case o.SN.CONNECTED_PROJECTS:return(0,a.t)("org_admin_tab.connected_projects");default:return(0,a.t)("org_admin_tab.content")}default:(0,i.xb)(e)}}},155367:(e,r,n)=>{n.d(r,{G_:()=>s,J7:()=>i,P9:()=>l,SN:()=>a,_d:()=>o});var i=(e=>(e.DASHBOARD="",e.WORKSPACES="workspaces",e.TEAMS="teams",e.MEMBERS="members",e.CONTENT="content",e.ACTIVITY="activity",e.BILLING="billing",e.RESOURCES="resources",e.SETTINGS="settings",e))(i||{}),a=(e=>(e.WORKSPACES="workspaces",e.TEAMS="teams",e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(a||{}),o=(e=>(e.LIBRARIES="",e.SHARED_FONTS="fonts",e.APPROVED_PLUGINS="plugins",e.APPROVED_WIDGETS="widgets",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e.BILLING_GROUPS="billing-groups",e))(s||{}),l=(e=>(e.OVERVIEW="overview",e.SEAT_REQUESTS="seat-requests",e))(l||{})},916525:(e,r,n)=>{n.d(r,{B9:()=>I,Eg:()=>f,GX:()=>p,J0:()=>m,LU:()=>l,Od:()=>s,Oo:()=>u,SL:()=>g,U9:()=>y,ZL:()=>v,cC:()=>h,dy:()=>o,e5:()=>d,jN:()=>w,oU:()=>c,qY:()=>S,rk:()=>A});var i=n(720647),a=n(99506),o=(e=>(e.ASC="asc",e.DESC="desc",e))(o||{}),s=(e=>(e.NAME="name",e.LAST_ACTIVE="last_active",e.LAST_DESIGN_ACTIVE="last_design_active",e.LAST_WHITEBOARD_ACTIVE="last_whiteboard_active",e.LAST_EDIT="last_edit",e.LAST_DESIGN_EDIT="last_design_edit",e.LAST_WHITEBOARD_EDIT="last_whiteboard_edit",e.DESIGN_ROLE="design_role",e.DESIGN_UPGRADE_DATE="design_upgrade_date",e.WHITEBOARD_ROLE="whiteboard_role",e.WHITEBOARD_UPGRADE_DATE="whiteboard_upgrade_date",e.LICENSE_GROUP="license_group",e.WORKSPACE="workspace",e.SCIM_DATA="scim_data",e.DESIGN_UPGRADE_REASON="design_upgrade_reason",e.WHITEBOARD_UPGRADE_REASON="whiteboard_upgrade_reason",e.BILLABLE_PRODUCT_SEAT="seat",e.SEARCH_SCORE="score",e.DEV_MODE_ROLE="dev_mode_role",e.DEV_MODE_UPGRADE_DATE="dev_mode_upgrade_date",e.UPGRADE_REASON="upgrade_reason",e.UPGRADE_DATE="upgrade_date",e))(s||{});let l=["last_active","last_design_active","last_whiteboard_active","last_edit","last_design_edit","last_whiteboard_edit","design_upgrade_date","whiteboard_upgrade_date","dev_mode_upgrade_date","upgrade_date"],c={columnName:"name",isReversed:!1};var d=(e=>(e.productFilter="productFilter",e.licenseGroupFilter="licenseGroupFilter",e.workspaceFilter="workspaceFilter",e.idpGroupFilter="idpGroupFilter",e.permissionFilter="permissionFilter",e.roleFilter="roleFilter",e.lastEditFilter="lastEditFilter",e.newEditorFilter="newEditorFilter",e.seatTypeFilter="seatTypeFilter",e.seatChangesFilter="seatChangesFilter",e))(d||{}),u=(e=>(e.product="product",e.workspace="workspace",e.billingGroup="billingGroup",e.idpGroup="idpGroup",e.accountType="accountType",e.role="role",e.lastEdit="lastEdit",e.newEditor="newEditor",e.seatType="seatType",e.seatChanges="seatChanges",e))(u||{});let m={productFilter:null,licenseGroupFilter:null,workspaceFilter:null,idpGroupFilter:null,permissionFilter:null,roleFilter:null,lastEditFilter:null,newEditorFilter:!1,seatTypeFilter:null,seatChangesFilter:null},p={product:"productFilter",role:"roleFilter",billingGroup:"licenseGroupFilter",workspace:"workspaceFilter",idpGroup:"idpGroupFilter",accountType:"permissionFilter",lastEdit:"lastEditFilter",newEditor:"newEditorFilter",seatType:"seatTypeFilter",seatChanges:"seatChangesFilter"},h={productFilter:"product",licenseGroupFilter:"billingGroup",workspaceFilter:"workspace",idpGroupFilter:"idpGroup",permissionFilter:"accountType",roleFilter:"role",lastEditFilter:"lastEdit",newEditorFilter:"newEditor",seatTypeFilter:"seatType",seatChangesFilter:"seatChanges"},_={FIGMA:"figma",FIGJAM:"figjam",DEV_MODE:"dev_mode"},g={[_.FIGMA]:i.Te.DESIGN,[_.FIGJAM]:i.Te.WHITEBOARD,[_.DEV_MODE]:i.Te.DEV_MODE},f={[i.Te.DESIGN]:_.FIGMA,[i.Te.WHITEBOARD]:_.FIGJAM,[i.Te.DEV_MODE]:_.DEV_MODE},E={IDP:"provisional",UNVERIFIED:"unverified"},y={[a._D.ADMIN]:a._D.ADMIN,[a._D.GUEST]:a._D.GUEST,[a._D.MEMBER]:a._D.MEMBER,[E.IDP]:E.IDP,[E.UNVERIFIED]:E.UNVERIFIED};var b=(e=>(e.VIEWER="starter",e.FULL="full",e.VIEWER_RESTRICTED="restricted",e.DEV_MODE_ONLY="dev_mode_only",e))(b||{});let v=["starter","full","restricted"],I=["full","dev_mode_only","restricted"],T={EDITOR:"editor",VIEWER:"viewer",VIEWER_RESTRICTED:"viewer-restricted",DEV_MODE_ONLY:"dev-mode-only"},S={[T.EDITOR]:"full",[T.VIEWER]:"starter",[T.VIEWER_RESTRICTED]:"restricted",[T.DEV_MODE_ONLY]:"dev_mode_only"},w={full:T.EDITOR,starter:T.VIEWER,restricted:T.VIEWER_RESTRICTED,dev_mode_only:T.DEV_MODE_ONLY},A={"3mo":"3mo","6mo":"6mo","1yr":"1yr"}},833030:(e,r,n)=>{n.d(r,{Kq:()=>a,ig:()=>o});var i=n(330654);n(99506),n(851363).kE.extend({orphaned:i.boolean().optional(),member_count:i.number().optional()});var a=(e=>(e.NAME="name",e.OWNER="owner_name",e.PROJECTS="projects",e.MEMBERS="member_count",e.WORKSPACE="workspace_name",e.ORG_ACCESS="org_access",e))(a||{}),o=(e=>(e.JOINED="JOINED",e.NOT_JOINED="NOT_JOINED",e))(o||{})},66037:(e,r,n)=>{n.d(r,{Ru:()=>v,WU:()=>I,Wd:()=>b,jh:()=>y,x0:()=>S});var i=n(140593),a=n(330654),o=n(304769),s=n(720647),l=n(99506),c=n(500615),d=n(709290),u=n(394046),m=n(447618),p=n(583894),h=n(269340),_=(e=>(e.SELF_SELECTED="self",e.SELF_SELECTED_NOT_LISTED="not listed",e.SELF_SELECTED_DONT_KNOW="don't know",e.SCIM_GROUP="scim_group",e.MOVED_BY_ADMIN="moved",e.AUTO_ASSIGNED="auto",e))(_||{});let g=a.nativeEnum(_),f=a.object({id:a.string(),license_group_id:a.string().nullable(),org_user_id:a.string(),assigned_at:a.string(),created_at:a.string(),actor_user_id:a.string().nullable(),update_reason:g,updated_at:a.string(),idp_group:u.m.nullable().optional(),idp_group_uuid:a.string().nullish()}),E=a.object({id:a.string(),license_group_id:a.string().nullable(),org_user_id:a.string(),created_at:a.string(),updated_at:a.string()});l.El.FULL,l.El.STARTER,l.El.RESTRICTED;var y=(e=>(e[e.GUEST=0]="GUEST",e[e.MEMBER=2]="MEMBER",e[e.ADMIN=3]="ADMIN",e))(y||{}),b=(e=>(e.ORG_USER="org_user",e.IDP_USER="idp_user",e.ORG_INVITE="org_invite",e))(b||{});let v=a.object({design_paid_status:l.cA,whiteboard_paid_status:l.cA,dev_mode_paid_status:l.cA,id:a.string(),org_id:a.string(),user_id:a.string(),user:p.aw,permission:l.B0,description:a.string().nullish(),drafts_folder_id:a.string(),created_at:a.string(),updated_at:a.string(),disabled_at:a.string().nullish(),account_type:a.string().optional(),account_type_changed_at:a.string().optional(),last_edit:a.string().nullish(),last_seen:a.string().nullish(),last_design_edit:a.union([a.string(),c.t]).nullish(),last_whiteboard_edit:a.union([a.string(),c.t]).nullish(),last_design_seen:a.union([a.string(),c.t]).nullish(),last_whiteboard_seen:a.union([a.string(),c.t]).nullish(),last_dev_mode_seen:a.union([a.string(),c.t]).nullish(),scim_account_type:a.string().nullish(),scim_whiteboard_paid_status:a.string().nullish(),scim_dev_mode_paid_status:a.string().nullish(),scim_is_admin:a.boolean().nullish(),scim_seat_type:d.QT.nullish(),user_state_changed_at:a.string().optional(),design_upgrade_reason:m.P.nullish(),whiteboard_upgrade_reason:m.P.nullish(),dev_mode_upgrade_reason:m.P.nullish(),scim_metadata:a.record(a.string().nullish()).nullish(),agreed_to_community_tos_at:a.string().nullish(),license_group_member:f.nullish(),license_group_admins:a.array(E).optional(),license_admin:a.boolean().optional(),is_email_validated:a.boolean().optional().nullable(),show_figjam_user_onboarding:a.boolean().nullable(),has_shown_figjam_admin_onboarding:a.boolean().nullable(),has_shown_figjam_admin_launch_onboarding:a.boolean().nullable(),ecc_upgrading_locked:a.boolean().nullish(),type:a.literal("org_user").default("org_user"),workspace_users:a.array(h.C).optional(),is_dev_mode_beta_user:a.boolean().optional(),active_seat_type:o.cD.nullish(),active_seat_upgrade_date:a.string().optional(),active_seat_upgrade_method:m.P.nullish()}),I=v;function T(e,r){switch(r){case s.G_.DESIGN:return e.design_paid_status;case s.G_.FIGJAM:return e.whiteboard_paid_status;case s.G_.DEV_MODE:return e.dev_mode_paid_status;default:(0,i.xb)(r)}}function S(e,r){switch(r){case s.G_.DESIGN:case s.G_.FIGJAM:return T(e,r);case s.G_.DEV_MODE:return T(e,s.G_.DESIGN)===l.El.FULL?l.El.FULL:T(e,r);default:(0,i.xb)(r)}}s.G_.FIGJAM,s.G_.DESIGN,s.G_.DEV_MODE},802026:(e,r,n)=>{n.d(r,{CT:()=>I,Gv:()=>g,X1:()=>b,ZG:()=>p});var i=n(330654),a=n(99506),o=n(253609),s=n(798614),l=n(343279),c=n(222233),d=n(139961),u=(e=>(e.ANY="any",e.GOOGLE="google",e.SAML="saml",e))(u||{});let m=i.union([i.literal("AUTO"),i.literal("GOOD"),i.literal("DELINQUENT"),i.literal("SUSPENDED"),i.literal("DEACTIVATED")]),p={AUTO:"AUTO",GOOD:"GOOD",DELINQUENT:"DELINQUENT",SUSPENDED:"SUSPENDED",DEACTIVATED:"DEACTIVATED"};var h=(e=>(e.MANUAL="manual",e.DISABLED="disabled",e.QUARTERLY="quarterly",e.CHARGE_IMMEDIATELY="quarterly_auto_charge",e))(h||{});let _=i.nativeEnum(h);var g=(e=>(e.REQUIRE_APPROVAL="require_approval",e.BANNED="banned",e))(g||{});let f=i.nativeEnum(g);var E=(e=>(e.US="US",e.EU="EU",e))(E||{});let y=i.nativeEnum(E);i.object({name:i.string(),img_url:i.string().optional(),id:i.string()});var b=(e=>(e.Initial="Initial",e.ChoosePlan="ChoosePlan",e.AddCollaborators="AddCollaborators",e.PseudoCreateTeam="PseudoCreateTeam",e.CreateTeam="CreateTeam",e.TeamSelect="TeamSelect",e.SeatSelect="SeatSelect",e.Details="Details",e.Payment="Payment",e.Review="Review",e.Confirmation="Confirmation",e))(b||{}),v=(e=>(e.DEPROVISION="deprovision",e))(v||{}),I=(e=>(e.GUESTS="guests",e))(I||{});l.bV.extend({id:i.string(),name:i.string(),legal_name:i.string().optional(),domain_capture:i.boolean(),created_at:i.string().optional(),updated_at:i.string().optional(),deleted_at:i.string().optional(),img_url:i.string().optional(),handle:i.string().optional(),figjam_disabled_at:i.date().nullable(),realtime_token:i.string().optional(),standing:m,stripe_customer_id:i.string().optional(),invite_whitelist_enforced:i.boolean(),invite_whitelist_enforced_guests:i.boolean(),invite_whitelist_guest_invite_setting:f.nullable(),invite_whitelist_member_allowlist_enabled:i.boolean().nullable(),ip_ranges:i.array(i.string()),past_due_at:i.string().nullable(),plugins_whitelist_enforced:i.boolean(),widgets_whitelist_enforced:i.boolean(),plugin_requests_allowed:i.boolean(),widget_requests_allowed:i.boolean(),public_plugins_allowed:i.boolean(),voice_enabled:i.boolean().optional(),billing:_.nullable(),google_sso_only:i.boolean(),saml_sso_only:i.boolean(),locked_quantity_full_members:i.number().nullable(),locked_quantity_figjam_members:i.number().nullable(),featured_scim_metadata:a.tw.nullable(),community_profile_id:i.string().optional(),community_profile_handle:i.string().optional(),template_picker_disabled:i.boolean().optional(),experiment_eligible:i.boolean().optional(),bigma_enabled:i.boolean().optional(),bigma_enabled_at:i.number().optional(),file_export_setting:i.string().nullable().optional(),mfa_required:i.string().optional(),discovery_enabled:i.boolean().optional(),workshop_enabled:i.boolean().optional(),cursor_chat_disabled:i.boolean().optional(),design_default_paid_status:a.cA.optional(),whiteboard_default_paid_status:a.cA.optional(),k12_google_org:i.boolean(),shared_org_license_group_settings:d.Vh.nullable(),vat_gst_id:i.string().optional().nullable(),tax_id_verification_status:a.xy.optional(),are_custom_templates_allowed:i.boolean(),should_auto_renew:i.boolean(),has_automatic_upcoming_invoice:i.boolean(),target_locality:y.optional(),org_domains:c.N.optional().nullable(),workspaces_count:i.number().optional(),cmty_publish_as_user_enabled:i.boolean().optional(),license_groups_count:i.number().optional(),workspaces_nux_active_at:i.string().optional(),ai_features_disabled:i.boolean().optional(),ai_features_disabled_at:i.string().optional(),ai_data_sharing_enabled:i.boolean().optional(),is_dev_mode_opt_in_accepted:i.boolean().optional(),has_invalid_upgrades:i.boolean().optional(),figma_provided_libraries_disabled:i.boolean().optional(),billing_api:o.z,stripe_memo:i.string().optional(),self_serve:i.boolean().optional(),invoice_currency:i.nativeEnum(s.S).optional(),is_slides_disabled:i.boolean().optional(),activity_logs_max_query_duration_in_days:i.number().optional(),tier:i.nativeEnum(a.Ag),billing_tier:i.nativeEnum(a.Ag),security_add_on_enabled_at:i.number().optional().nullable()})},622139:(e,r,n)=>{n.d(r,{$V:()=>u,CO:()=>l,EB:()=>d,NW:()=>a,R$:()=>s,UW:()=>c,tY:()=>i,tn:()=>o});var i=(e=>(e[e.UNSPECIFIED=0]="UNSPECIFIED",e[e.ANNUAL=1]="ANNUAL",e[e.MONTHLY=2]="MONTHLY",e[e.STUDENT=3]="STUDENT",e))(i||{}),a=(e=>(e.MONTH="month",e.YEAR="year",e))(a||{});let o={UPGRADE_NEW_TEAM:"upgrade_new_team",PLAN_COMPARISON:"plan_comparison",CREATE_TEAM:"create_team",ADD_COLLABORATORS:"add_collaborators",CHOOSE_PLAN:"choose_plan",PAYMENT_AND_ADDRESS:"payment_and_address",CONFIRM_PAY:"confirm_pay"};var s=(e=>(e.MONTHLY="monthly",e.ANNUAL="annual",e))(s||{});let l="US",c="JP",d=e=>({line1:"",line2:"",country:e||l,city:"",region:"",postal_code:""});function u(e){return""===e.line1&&""===e.line2&&""===e.city&&""===e.region&&""===e.postal_code}var m=(e=>(e.PRODUCT_PRO_DESIGN_ANNUAL="prod_BTrZbmnROhwnmX",e.PRODUCT_PRO_DESIGN_MONTHLY="prod_BUXN0CamqLCsuF",e.PRODUCT_PRO_FIGJAM_ANNUAL="figjam_annual_usd_36",e.PRODUCT_PRO_FIGJAM_MONTHLY="figjam_monthly_usd_5",e))(m||{})},376485:(e,r,n)=>{n.d(r,{Ag:()=>b,Au:()=>ed,Av:()=>ec,C:()=>en,Dk:()=>L,FW:()=>$,Gb:()=>eh,HK:()=>E,Kd:()=>I,LR:()=>J,Lu:()=>ep,Lz:()=>ei,MP:()=>k,Pe:()=>ee,Ps:()=>eE,Px:()=>j,R2:()=>er,UX:()=>T,Wt:()=>P,XS:()=>N,Ye:()=>Y,ZQ:()=>Z,ZV:()=>F,am:()=>em,bH:()=>X,f5:()=>eo,ho:()=>y,k0:()=>Q,n_:()=>e_,ow:()=>et,pL:()=>z,pR:()=>w,sM:()=>ea,u8:()=>f,xg:()=>eu});var i,a=n(330654),o=n(957956),s=n(560718),l=n(99506),c=n(813408),d=n(288300),u=n(882225),m=n(979215),p=n(483327),h=n(401730),_=n(178787),g=n(629521),f=(e=>(e[e.PUBLIC_PLUGINS_DISALLOWED=0]="PUBLIC_PLUGINS_DISALLOWED",e[e.PLUGIN_NOT_ORG_APPROVED=1]="PLUGIN_NOT_ORG_APPROVED",e[e.PLUGIN_INSTALLED_FOR_ORG=2]="PLUGIN_INSTALLED_FOR_ORG",e[e.PLUGIN_INSTALLED_FOR_USER=3]="PLUGIN_INSTALLED_FOR_USER",e[e.PLUGIN_INSTALLABLE=4]="PLUGIN_INSTALLABLE",e))(f||{}),E=(e=>(e.FIGMA="design",e.FIGJAM="whiteboard",e.UNIVERSAL="design_and_whiteboard",e.INSPECT="inspect",e.FIGMA_AND_INSPECT="design_and_inspect",e))(E||{}),y=(e=>(e.LOAD="LOAD",e.PARSE="PARSE",e.VALIDATE="VALIDATE",e))(y||{}),b=(e=>(e.Plugin="plugin",e.Widget="widget",e))(b||{});let v=a.object({type:a.nativeEnum(y),text:a.string()}),I=["camera","microphone","displaycapture"],T=["openexternal","analytics","cortex","debug","firstdraft","filekey","hidecursors",...I],S=a.object({command:a.string(),name:a.string(),multipleSelection:a.boolean().optional()}),w=["currentuser","activeusers","teamlibrary","fileusers","payments","clipboardwrite"],A=a.object({name:a.string(),key:a.string(),description:a.string().optional(),optional:a.boolean().optional(),allowFreeform:a.boolean().optional()}),C=a.array(A),N=[...w,...T];[...N];let L=["textreview","panel","inspect","codegen","linkpreview","vscode"],O=a.object({label:a.string(),value:a.string(),isDefault:a.boolean().optional()}),R=a.object({itemType:a.literal("action"),propertyName:a.string(),includedLanguages:a.array(a.string()).optional(),label:a.string().optional()});function P(e){return R.safeParse(e).success}let D=a.object({itemType:a.literal("unit"),scaledUnit:a.string(),defaultScaleFactor:a.number().optional(),default:a.boolean().optional(),includedLanguages:a.array(a.string()).optional()});function k(e){return D.safeParse(e).success}let M=a.object({itemType:a.literal("select"),propertyName:a.string(),label:a.string().optional(),options:a.array(O),includedLanguages:a.array(a.string()).optional()});function F(e){return M.safeParse(e).success}let x=a.union([R,D,M]),U=a.array(x),B=a.object({label:a.string(),value:a.string()}),V=a.object({command:a.string(),name:a.string(),parameters:C.optional(),parameterOnly:a.boolean().optional()}),G=a.object({separator:a.literal(!0)}),H=a.object({name:a.string()}).extend({menu:a.lazy(()=>a.array(a.union([V,G,H])))}),K=a.object({allowedDomains:a.array(a.string()),reasoning:a.string().optional(),devAllowedDomains:a.array(a.string()).optional()}),W=a.union([H,V,G]);var $=(e=>(e.FIGMA="figma",e.FIGJAM="figjam",e.INSPECT="inspect",e.DEV="dev",e.SITES="sites",e.SLIDES="slides",e))($||{});let Y=Object.values($),z=a.object({id:a.string().optional(),name:a.string(),api:a.string(),main:a.string(),ui:a.union([a.string(),a.record(a.string(),a.string())]).optional(),build:a.string().optional(),enableProposedApi:a.boolean().optional(),enablePrivatePluginApi:a.boolean().optional(),menu:W.array().optional(),networkAccess:K.optional(),relaunchButtons:S.array().optional(),relatedLinkDomains:a.array(a.string()).optional(),devResourceDomains:a.array(a.string()).optional(),parameters:C.optional(),parameterOnly:a.boolean().optional(),editorType:a.filteredArray(a.nativeEnum($)).optional(),containsWidget:a.boolean().optional(),widgetApi:a.string().optional(),permissions:a.filteredArray(a.union([a.enum(w),a.enum(T)])).optional(),enableReadOnly:a.boolean().optional(),capabilities:a.filteredArray(a.enum(L)).optional(),codegenLanguages:a.array(B).optional(),codegenPreferences:U.optional(),documentAccess:a.enum(["dynamic-page"]).optional()});(e=>{e.PluginVersionSchema=a.object({id:a.string(),name:a.string().nullable(),version:a.string().nullable(),releaseNotes:a.string().nullable(),description:a.string().nullable(),tagline:a.string().nullable(),creatorPolicy:a.string().nullable(),manifest:a.string().nullable(),createdAt:a.date(),iconPath:a.string().nullable(),coverImagePath:a.string().nullable(),codePath:a.string().nullable(),plugin:a.object({currentPluginVersionId:a.string().nullable()})}),e.PluginInstallSchema=a.object({id:a.string(),pluginId:a.string(),pinnedStatus:a.nativeEnum(l.hM),createdAt:a.date(),plugin:a.object({id:a.string(),currentPluginVersionId:a.string().nullable(),publishingStatus:a.nativeEnum(l.KB).nullable(),isWidget:a.boolean().nullable(),viewableInEditor:a.boolean(),orgId:a.string().nullable(),approvedAt:a.date().nullable(),approvalStatus:a.number().nullable(),communityPublishers:a.lazy(()=>e.CommunityPublisherSchema).array().nullable(),currentPluginVersion:e.PluginVersionSchema.nullable()}).nullable()}),e.OrgSchema=a.object({id:a.string(),installedPlugins:a.array(e.PluginInstallSchema)}),e.CommunityTeamSchema=a.object({id:a.string(),name:a.string()}),e.OrgInfoSchema=a.object({id:a.string(),name:a.string()}),e.CommunityProfileSchema=a.object({id:a.string(),profileHandle:a.string(),user:a.object({id:a.string(),name:a.string().nullable()}).nullable(),team:e.CommunityTeamSchema.nullable(),org:e.OrgInfoSchema.nullable()}),e.CommunityPublisherSchema=a.object({role:a.nativeEnum(l.un),isPending:a.boolean(),profile:e.CommunityProfileSchema})})(i||(i={}));let j=a.object({id:a.string(),plugin_id:a.string(),name:a.string(),version:a.string(),current_plugin_version_id:a.string().optional(),release_notes:a.string(),description:a.string(),tagline:a.string().nullable(),creator_policy:a.string().nullable(),is_private:a.boolean(),manifest:z,created_at:a.string(),org_id:a.string().optional(),redirect_icon_url:a.string(),redirect_cover_image_url:a.string(),redirect_code_url:a.string(),redirect_snapshot_url:a.string().nullish(),community_publishers:a.array(i.CommunityPublisherSchema).optional(),installed_by:a.union([a.literal("user"),a.literal("org")]).nullish(),playground_fig_file_key:a.string().nullish(),playground_fig_file:a.ignore().optional(),playground_file_version_id:a.string().nullish()}),q=a.object({plugin_id:a.string(),name:a.string(),manifest:z,localFileId:a.number(),localFilePath:a.string(),error:v.optional(),cachedContainsWidget:a.boolean().optional(),lastKnownPluginId:a.string().optional(),testCode:a.string().optional()});function Z(e){return void 0!==e.localFileId}function X(e){return!Z(e)&&!!e.is_private}function J(e){return!Z(e)&&!X(e)}function Q(e){return!!e.manifest?.containsWidget}function ee(e){return!!(e?.includes("dev")||e?.includes("inspect"))}function et(e,r,n){return!!(!n||!e||X(e)||Z(e))||!!n.public_plugins_allowed&&((Q(e)?!n.widgets_whitelist_enforced:!n.plugins_whitelist_enforced)||!!r[e?.plugin_id])}let er=a.object({org:a.object({id:a.string(),name:a.string()}).optional(),is_public:a.boolean().optional()}),en=a.object({id:a.string(),versions:a.record(j),current_plugin_version_id:a.string().nullable(),is_widget:a.coerce.boolean()}),ei=en.merge(a.object({install_count:a.number(),view_count:a.number(),like_count:a.number(),comment_count:a.number(),category_id:a.string().nullable(),roles:er,org_id:a.string().nullable(),realtime_token:a.string(),created_at:a.string(),redirect_thumbnail_url:a.string().nullable(),thumbnail_url:a.string().nullable(),tags:a.array(a.string()).optional(),tags_v2:a.record(a.string()).optional(),current_user_has_run:a.boolean().optional(),current_user_first_ran_at:a.string().nullish(),unique_run_count:a.number(),editor_type:a.nativeEnum(E),unpublished_at:a.string().nullable(),support_contact:a.string().nullable(),comments_setting:a.nativeEnum(s.Ni).nullable(),related_content:(0,o.M)(a.lazy(()=>ei)),hide_related_content_by_others:a.coerce.boolean().optional(),publishing_status:a.nativeEnum(l.KB).nullable(),score:a.number().optional(),install_status:a.nativeEnum(f).optional(),profile_install_status:a.nativeEnum(f).optional(),commenting_is_restricted:a.boolean(),monetization_status:a.nativeEnum(_.UC).nullish(),community_resource_payment:h.fe.optional(),third_party_m10n_status:a.nativeEnum(_.PN).nullish(),creator_policy:a.string().optional(),plugin_publishers:c.I7.optional(),carousel_media_urls:a.optional(g.fE),carousel_videos:a.optional(g.Fy)})).and(c.xK).and(u.n).and(p.Y).and(m.q),ea=ei.and(a.object({is_widget:a.literal(!0)}));function eo(e){return e.third_party_m10n_status===_.PN.MIGRATING}let es=a.object({name:a.string(),data:a.unknown().optional(),icon:a.union([a.string(),a.instanceof(Uint8Array)]).optional(),iconUrl:a.string().optional()}),el=a.record(es);function ec(e){return"command"in e&&"name"in e}function ed(e){return"separator"in e&&e.separator}function eu(e){return"name"in e&&"menu"in e}function em({type:e,text:r}){switch(e){case"LOAD":return"Manifest load error: "+r;case"PARSE":return"Manifest not valid JSON: "+r;case"VALIDATE":return"Manifest error: "+r}}Symbol("relaunchMixedDescription");var ep=(e=>(e.ORG="ORG",e.PUBLIC="PUBLIC",e))(ep||{});function eh(e,r){return r?`GET_PLUGIN_ALLOW_LIST_${e}_${r}`:`GET_PLUGIN_ALLOW_LIST_${e}`}function e_(e,r){return r?`GET_WIDGET_ALLOW_LIST_${e}_${r}`:`GET_WIDGET_ALLOW_LIST_${e}`}let eg=a.enum(["default","textreview","inspect","codegen","linkpreview","auth"]),ef=a.union([a.enum(["contextmenu","filemenu","runlast","osmenu","relaunch","quick-actions","universal-insert","parameter-entry","paste_from_url","textreview","handoff-relaunch","handoff-panel","codegen","related-link-click","related-link-preview","related-link-auth","pinned","try-plugin-params","auto-run"]),d.MM]),eE=a.object({plugin:a.union([j,q]),command:a.string(),queryMode:a.boolean(),runMode:eg,triggeredFrom:ef,openFileKey:a.string(),ignoreForRunLastPlugin:a.boolean().optional(),deferRunEvent:a.boolean().optional(),parameterValues:el.optional(),isWidget:a.boolean(),widgetAction:a.string().nullable().optional(),forcePluginVersionId:a.string().nullable().optional()})},559403:(e,r,n)=>{n.d(r,{o:()=>i});let i={r:0,g:0,b:0,a:255}},935938:(e,r,n)=>{n.d(r,{G:()=>a});var i=n(671653),a=(e=>(e.RECENTLY_VIEWED="recently-viewed",e.SUGGESTED="suggested",e.SHARED_FILES="shared-with-you",e.SHARED_PROJECTS="shared-projects",e))(a||{});i.C0.NAME,i.C0.CREATED_AT,i.C0.ACCESSED_AT,i.C0.NAME,i.C0.CREATED_AT,i.C0.ACCESSED_AT,i.C0.NAME,i.C0.CREATED_AT,i.C0.SHARED_AT,i.C0.NAME,i.C0.CREATED_AT,i.C0.SHARED_AT},629521:(e,r,n)=>{n.d(r,{Fy:()=>p,P1:()=>s,Sq:()=>_,dE:()=>h,fE:()=>d});var i=n(330654),a=n(487386),o=(e=>(e[e.CURATED_IMAGE=0]="CURATED_IMAGE",e[e.EMBED=1]="EMBED",e))(o||{});let s=i.record(i.string().refine(e=>Object.keys(a.B.COMMUNITY_HUB_FILE_THUMBNAIL).includes(e)),i.string().url()),l=i.object({url:i.string().url()}),c=l.extend({id:i.string(),sha1:i.string(),resized_thumbnail_urls:i.optional(s),created_at:i.coerce.date()}),d=i.record(i.string(),c);l.extend({sha1:i.string(),buffer:i.instanceof(Uint8Array)});let u=i.object({url:i.string().url(),thumbnail_url:i.string().url()}),m=u.extend({id:i.string(),sha1:i.string(),thumbnail_sha1:i.string(),video_file_uuid:i.string().uuid()}),p=i.record(i.string(),m);function h(e){return"buffer"in e}function _(e){return"id"in e}u.extend({sha1:i.string(),buffer:i.instanceof(Uint8Array),thumbnail_sha1:i.string(),thumbnail_buffer:i.instanceof(Uint8Array)})},397065:(e,r,n)=>{n.d(r,{N:()=>i});var i=(e=>(e[e.URGENT_ALERT=9999]="URGENT_ALERT",e[e.HIGH_PRIORITY_MODAL=20]="HIGH_PRIORITY_MODAL",e[e.OVERRIDING_MODAL=15]="OVERRIDING_MODAL",e[e.DEFAULT_MODAL=10]="DEFAULT_MODAL",e[e.SECONDARY_MODAL=5]="SECONDARY_MODAL",e[e.SURVEY=1]="SURVEY",e))(i||{})},967409:(e,r,n)=>{n.d(r,{$L:()=>u,Du:()=>M,Ej:()=>U,Hn:()=>F,KB:()=>h,L0:()=>P,Lk:()=>A,Lr:()=>y,MU:()=>K,Mm:()=>G,Mp:()=>V,OZ:()=>B,Or:()=>H,Rr:()=>p,Rx:()=>b,Rz:()=>W,WY:()=>o,W_:()=>R,Wr:()=>g,XW:()=>T,Xr:()=>_,Zr:()=>E,_M:()=>O,a7:()=>L,dC:()=>s,dt:()=>S,f9:()=>m,fS:()=>v,gw:()=>w,hf:()=>x,j9:()=>I,jD:()=>d,mp:()=>C,q6:()=>k,qm:()=>N,qy:()=>l,tC:()=>D,uH:()=>a,uR:()=>c});var i=n(939863),a=(e=>(e.FILES="files",e.PROJECTS="projects",e.TEAMS="teams",e.USERS="users",e.HUB_FILES="hub_files",e.PUBLIC_PLUGINS="public_plugins",e.PRIVATE_PLUGINS="private_plugins",e.PUBLIC_PROFILES="public_profiles",e.PUBLIC_WIDGETS="public_widgets",e.PRIVATE_WIDGETS="private_widgets",e))(a||{}),o=(e=>(e.RESOURCE="resource",e.CREATOR="creator",e.SPACE="space",e))(o||{}),s=(e=>(e.USERS="users",e.PROJECTS="projects",e.TEAMS="teams",e.ORGS="orgs",e))(s||{}),l=(e=>(e.FOLDER="folders",e.TEAM="teams",e.ORG="orgs",e))(l||{}),c=(e=>(e.DROPDOWN="dropdown",e.AUTOCOMPLETE="autocomplete",e))(c||{}),d=(e=>(e.PILL="pill",e.CLEAR_ALL="clear_all",e.ALL_TYPES="all_types",e.SELECTION="selection",e))(d||{}),u=(e=>(e.ALL_FILES="FILES",e.DESIGN_FILES="DESIGN_FILES",e.FIGJAM_FILES="FIGJAM_FILES",e.SLIDES="SLIDES",e.USERS="USERS",e.PROJECTS="PROJECTS",e.TEAMS="TEAMS",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e.SITES="SITES",e))(u||{}),m=(e=>(e.NAME="name",e.FUZZY_NAME="fuzzy-name",e.NAME_WORD_DELIMITER_V2="name-word-delimiter-v2",e.DEEP_SEARCH_TEXT="deep-search-text",e.PAGE_NAME="page-name",e.FRAME_NAME="frame-name",e.FRAGMENT_RETRIEVAL="fragment-retrieval",e))(m||{}),p=(e=>(e.ONE_TYPE="one_type",e.ALL_TYPES_BLOCKING="all_types_blocking",e.ALL_TYPES_STREAMING="all_types_streaming",e))(p||{});function h(e){switch(e){case"files":return(0,i.t)("search.preview_section.files_capitalized");case"projects":return(0,i.t)("search.preview_section.projects_capitalized");case"users":return(0,i.t)("search.preview_section.people_capitalized");case"teams":return(0,i.t)("search.preview_section.teams_capitalized");case"private_plugins":return(0,i.t)("search.preview_section.plugins_capitalized");case"hub_files":return(0,i.t)("search.preview_section.community_capitalized");default:return""}}function _(e){if(!e)return null;switch(e.value){case"FILES":case"DESIGN_FILES":case"FIGJAM_FILES":case"SLIDES":case"SITES":return"files";case"USERS":return"users";case"PROJECTS":return"projects";case"TEAMS":return"teams";case"PLUGINS":return"private_plugins";case"WIDGETS":return"private_widgets";default:return null}}function g(e){switch(e){case"files":return"FILES";case"users":return"USERS";case"projects":return"PROJECTS";case"teams":return"TEAMS";case"private_plugins":return"PLUGINS";case"private_widgets":return"WIDGETS";default:return null}}var f=(e=>(e.DESIGN="design",e.FIGJAM="whiteboard",e.SLIDES="slides",e.SITES="sites",e))(f||{});function E(e){if(e)switch(e.value){case"DESIGN_FILES":return"design";case"FIGJAM_FILES":return"whiteboard";case"SLIDES":return"slides";case"SITES":return"sites";default:return}}function y(e){if(!e)return null;let r={};for(let[n,i]of Object.entries(e))i&&("creatorIds"===n?r["creator_ids[]"]=i:"folderIds"===n&&i.length>0?r["folder_ids[]"]=i:"teamIds"===n&&i.length>0?r["team_ids[]"]=i:"orgIds"===n&&i.length>0?r["org_ids[]"]=i:r[n]=i);return r}var b=(e=>(e.ORG="internal",e.ORG_GUEST="internal_guest",e.PERSONAL="personal",e.COMMUNITY="community",e))(b||{});let v={internal:{modelTypes:["files","projects","users","teams","private_plugins","private_widgets"],correspondingModelTypes:{hub_files:"files",public_profiles:"users",public_plugins:"private_plugins",public_widgets:"private_widgets"},defaultModelType:"files"},internal_guest:{modelTypes:["files","projects","users","teams"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},personal:{modelTypes:["files","projects","users"],correspondingModelTypes:{hub_files:"files",public_profiles:"users"},defaultModelType:"files"},community:{modelTypes:["hub_files","public_plugins","public_profiles","public_widgets"],correspondingModelTypes:{files:"hub_files",users:"public_profiles",private_plugins:"public_plugins",private_widgets:"public_widgets"},defaultModelType:"hub_files"}};var I=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e.RELEVANCY="relevancy",e.NAME="name",e.AUTHOR_NAME="author_name",e.INSTALL_COUNT="install_count",e.MEMBER_COUNT="member_count",e.UPDATED_AT="updated_at",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.EMAIL="email",e))(I||{}),T=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e.RUN_COUNT="run_count",e))(T||{}),S=(e=>(e.NAME="name",e.AUTHOR_NAME="author_name",e.UPDATED_AT="updated_at",e.INSTALL_COUNT="install_count",e.RELEVANCY="relevancy",e))(S||{}),w=(e=>(e.POPULARITY="popularity",e.RECENCY="recency",e))(w||{}),A=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.TOUCHED_AT="touched_at",e.CREATED_AT="created_at",e.OWNER="owner",e))(A||{}),C=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.CREATED_AT="created_at",e))(C||{}),N=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.FILES_LAST_TOUCHED_AT="files_last_touched_at",e.CREATED_AT="created_at",e.MEMBER_COUNT="member_count",e))(N||{}),L=(e=>(e.RELEVANCY="relevancy",e.NAME="name",e.EMAIL="email",e))(L||{}),O=(e=>(e.RELEVANCY="relevancy",e))(O||{}),R=(e=>(e.RELEVANCY="relevancy",e))(R||{}),P=(e=>(e.PREVIEW="preview",e.FULL_PAGE="full_page",e.OUTSIDE_FILE_BROWSER="outside_file_browser",e))(P||{}),D=(e=>(e.OPEN="open",e.CLOSE="close",e))(D||{});function k(e){switch(e){case"files":return(0,i.t)("search.search_model_type_header.files");case"projects":return(0,i.t)("search.search_model_type_header.projects");case"teams":return(0,i.t)("search.search_model_type_header.teams");case"users":return(0,i.t)("search.search_model_type_header.people");case"hub_files":return(0,i.t)("search.search_model_type_header.hub_files");case"public_plugins":return(0,i.t)("search.search_model_type_header.public_plugins");case"private_plugins":return(0,i.t)("search.search_model_type_header.private_plugins");case"public_profiles":return(0,i.t)("search.search_model_type_header.creators");case"public_widgets":return(0,i.t)("search.search_model_type_header.public_widgets");case"private_widgets":return(0,i.t)("search.search_model_type_header.private_widgets")}}function M(e){switch(e){case"teams":return(0,i.t)("file_browser.team");case"hub_files":return(0,i.t)("activity_log.resource.file");case"public_plugins":case"private_plugins":return(0,i.t)("community.plugins.plugin");case"public_profiles":return(0,i.t)("search.preview_section.creator");case"public_widgets":case"private_widgets":return(0,i.t)("community.plugins.widget");case"users":case"files":case"projects":return(0,i.t)("permissions.level_name.none")}}function F(e){if(1===(e=Array.from(new Set(e))).length)return e[0];{let r=e.pop();return e.join(", ")+" and "+r}}function x(e){switch(e){case"files":return(0,i.t)("search.search_model_type.empty_state_files");case"projects":return(0,i.t)("search.search_model_type.empty_state_projects");case"teams":return(0,i.t)("search.search_model_type.empty_state_teams");case"users":return(0,i.t)("search.search_model_type.empty_state_people");case"hub_files":return(0,i.t)("search.search_model_type.empty_state_hub_files");case"public_plugins":return(0,i.t)("search.search_model_type.empty_state_public_plugins");case"private_plugins":return(0,i.t)("search.search_model_type.empty_state_private_plugins");case"public_profiles":return(0,i.t)("search.search_model_type.empty_state_creators");case"public_widgets":return(0,i.t)("search.search_model_type.empty_state_public_widgets");case"private_widgets":return(0,i.t)("search.search_model_type.empty_state_private_widgets");default:return""}}let U=["files","projects","users","teams"],B=["files","projects","users","hub_files"],V=["public_plugins","private_plugins","public_widgets","private_widgets","public_profiles"],G=["public_plugins","private_plugins","public_widgets","private_widgets","teams","public_profiles"],H=4,K=10,W=30},637590:(e,r,n)=>{n.d(r,{A5:()=>a,Ft:()=>p,G4:()=>d,QB:()=>b,SC:()=>h,Sc:()=>_,U6:()=>u,bN:()=>m,bb:()=>o,ck:()=>E,h5:()=>g,jX:()=>f,kV:()=>s,ou:()=>l});var i=n(622139),a=(e=>(e[e.INVITE=0]="INVITE",e[e.PUBLISH_COMMUNITY=1]="PUBLISH_COMMUNITY",e[e.PUBLISH_TEMPLATE=2]="PUBLISH_TEMPLATE",e[e.POST_TO_FEED=3]="POST_TO_FEED",e[e.COLLABORATORS=4]="COLLABORATORS",e[e.EMBED_CODE=5]="EMBED_CODE",e[e.SHARE_SETTINGS=6]="SHARE_SETTINGS",e[e.FOLDER_MEMBERS=7]="FOLDER_MEMBERS",e[e.SHARE_GOOGLE_DEVICE_DISCLAIMER=8]="SHARE_GOOGLE_DEVICE_DISCLAIMER",e[e.SHARE_TO_GOOGLE_CLASSROOM=9]="SHARE_TO_GOOGLE_CLASSROOM",e))(a||{}),o=(e=>(e.ACCOUNT="account",e.PLUGINS="plugins",e.COMMUNITY="community",e.NOTIFICATIONS="notifications",e))(o||{});function s(e){return"search"===e.view}let l={UNIVERSAL_PUBLISHING:"publish",ACCOUNT_SETTINGS:"settings"};var c=(e=>(e.IN_VIEW="in_view",e.DIRECT="direct",e))(c||{}),d=(e=>(e[e.DEFAULT=0]="DEFAULT",e.FULLSCREEN="fullscreen",e.FULLSCREEN_WITH_COMMENTS="fullscreen_comments",e))(d||{}),u=(e=>(e.ONBOARDING="onboarding",e))(u||{});function m(e){return"org"===e.view}var p=(e=>(e[e.PROJECT=0]="PROJECT",e[e.TEAM=1]="TEAM",e[e.WORKSPACE=2]="WORKSPACE",e[e.LICENSE_GROUP=3]="LICENSE_GROUP",e))(p||{}),h=(e=>(e.UPGRADE_EXISTING_TEAM="upgrade_existing_team",e.CREATE_AND_UPGRADE="create_and_upgrade",e.CREATE="create",e))(h||{}),_=(e=>(e[e.UNDETERMINED=0]="UNDETERMINED",e[e.STARTER=1]="STARTER",e[e.TEAM=2]="TEAM",e[e.ORG=3]="ORG",e))(_||{});function g(e){return"create"===e||"create_and_upgrade"===e}function f(e){return"upgrade_existing_team"===e}function E(e,r){return"create"===e&&(r===i.tn.CREATE_TEAM||r===i.tn.ADD_COLLABORATORS)||r===i.tn.PLAN_COMPARISON}let y=["deletedFiles","teamCreation","folder","addAnnualPlan","addCollaborators","team","teamUpgrade","orgAdminSettings","licenseGroup","workspace","billingGroupDashboard","search","user","promoReview","eduReview","teamFeed","resourceUnavailable","feed","sharedWithYou","teamAdminConsole","recentsAndSharing","draftsToMove","allProjects","limitedTeamSharedProjects","orgDomainManagement","abandonedDraftFiles"];function b(e){return y.includes(e.view)}},139961:(e,r,n)=>{n.d(r,{$q:()=>a,Sm:()=>s,Vh:()=>u,w_:()=>c});var i=n(330654),a=(e=>(e.TEAM_CREATION_CONTROLS_ANYONE="team_creation_controls_anyone",e.TEAM_CREATION_CONTROLS_ADMIN_ONLY="team_creation_controls_admin_only",e))(a||{});let o=i.nativeEnum(a);var s=(e=>(e.MEMBERS="members",e.ALL_USERS="all_users",e.DISABLED="disabled",e))(s||{});let l=i.nativeEnum(s);var c=(e=>(e.ALLOWED="public_link_controls_setting_allowed",e.PASSWORD_REQUIRED="public_link_controls_setting_password_required",e.EXPIRATION_REQUIRED="public_link_controls_setting_expiration_required",e.EXP_AND_PWD_REQUIRED="public_link_controls_setting_password_and_expiration_required",e.BANNED="public_link_controls_setting_banned",e))(c||{});let d=i.nativeEnum(c),u=i.object({team_creation_controls:o.optional().nullable(),external_collaboration_controls:i.boolean(),ip_account_restriction:i.boolean().optional(),ip_allowlist:i.boolean().optional(),idle_timeout_duration_in_secs:i.number().optional().nullable(),autogen_password_controls:i.boolean(),public_link_controls_setting:d.optional().nullable(),public_link_controls_max_expiration:i.number().optional().nullable(),configured_upgrade_request_setting:l.optional().nullable(),configured_upgrade_request_message:i.string().optional().nullable(),file_export_setting:i.string().optional().nullable()})},840912:(e,r,n)=>{var i=(e=>(e.NAME="Name",e.ACTIVE_AT="Last active",e.PERMISSIONS="Team permissions",e.DESIGN_PAID_STATUS="Design role",e.FIGJAM_PAID_STATUS="FigJam role",e))(i||{})},410436:(e,r,n)=>{n.d(r,{c:()=>i});let i={PENDING:"pending",APPROVED:"approved",DENIED:"denied",WITHDRAWN:"withdrawn"}},36816:(e,r,n)=>{n.d(r,{Zf:()=>s,j4:()=>l,wF:()=>c});var i=n(330654),a=n(304769),o=n(583894),s=(e=>(e.FULL="full",e.RESTRICTED="restricted",e.STARTER="starter",e))(s||{}),l=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e))(l||{});let c=i.normalize("TeamUser",i.object({id:i.primaryKey(),team_id:i.string(),user_id:i.string(),design_paid_status:i.nativeEnum(s),whiteboard_paid_status:i.nativeEnum(s),drafts_folder_id:i.string().nullable().optional(),created_at:i.string(),updated_at:i.string(),user:o.aw.optional(),show_figjam_user_onboarding:i.boolean().nullable(),active_seat_type:a.cD.nullish(),equiv_seat_type:a.cD.nullish()}))},418883:(e,r,n)=>{n.d(r,{$:()=>i}),n(939863);var i=(e=>(e.ROLE_UPGRADE="role_upgrade",e.INVITE_REDEEM="invite_redeem",e.INVITE_AUTOUPGRADE="invite_autoupgrade",e.CREATE_TEAM="create_team",e.FIGMA_ADMIN="figma_admin",e.DEPART_TEAM="depart_team",e.CREATE_FILE="create_file",e.RESOURCE_MOVED="resource_moved_to_team",e.RESOURCE_MOVED_FROM_DRAFTS="resource_moved_from_plan_drafts",e.RESTORED_FROM_TRASH="resource_restored_from_trash",e.JOIN_LINK_REDEEM="join_link_redeem",e.ADMIN_UPGRADE="team_admin_upgrade",e.CHECKOUT="checkout",e.EDIT_REQUEST_APPROVAL="edit_request_approval",e.EDIT_REQUEST_AUTO_APPROVAL="edit_request_auto_approval",e.EDIT_ACTION="edit_action",e.EDIT_BUTTON="edit_button",e.FIGJAM_GA_REUPGRADE="fj_ga_reupgrade",e.RUN_PLUGIN="run_plugin",e.DEV_MODE="dev_mode",e.DRAFTS_SHARE="drafts_share",e))(i||{})},668526:(e,r,n)=>{n.d(r,{A$:()=>i,C0:()=>l,Iv:()=>a});var i=(e=>(e.HOME="",e.MEMBERS="members",e.SETTINGS="settings",e.PROFILE="profile",e.BILLING="billing",e))(i||{}),a=(e=>(e.DASHBOARD="dashboard",e.MEMBERS="members",e.DRAFTS="drafts",e.BILLING="billing",e.SETTINGS="settings",e.CONTENT="content",e))(a||{}),o=(e=>(e.ABANDONED_DRAFTS="abandoned-drafts",e.CONNECTED_PROJECTS="connected-projects",e))(o||{}),s=(e=>(e.OVERVIEW="overview",e.INVOICES="invoices",e))(s||{}),l=(e=>(e.OVERVIEW="overview",e.SEAT_REQUESTS="seat-requests",e))(l||{})},851363:(e,r,n)=>{n.d(r,{Fb:()=>u,ZN:()=>h,bL:()=>p,kE:()=>m,pE:()=>_,qg:()=>c});var i=n(966712),a=n(330654),o=n(99506),s=n(343279),l=n(383986);let c=118;var d=(e=>(e.REQUIRES_SOURCE_ACTION="requires_source_action",e))(d||{}),u=(e=>(e.ORG_BROWSABLE="org_browsable",e.HIDDEN="hidden",e))(u||{});let m=a.normalize("Team",s.bV.extend({created_at:a.string(),id:a.primaryKey(),img_url:a.string().optional(),org_id:a.string().nullable(),name:a.string(),description:a.string(),projects:a.number().nullish(),editors:a.number().nullish(),realtime_token:a.string().optional(),restrictions_list:a.array(o.iU).nullable(),subscription:o.D8.nullable(),subscription_raw:o.D8.nullable(),org_access:o.We.nullable(),stripe_customer_id:a.string().nullable(),student_team_at:a.string().nullable(),student_team_state:o.R2,student_autoverifying_team_at:a.string().nullable(),student_team:a.boolean(),pro_team:a.boolean(),org_team:a.boolean(),starter_team:a.boolean(),grace_period_end:a.string().nullable(),grace_period_type:o.Dh.nullable(),last_upgraded_at:a.string().nullable(),updated_at:a.string().nullable().optional(),deleted_at:a.string().nullable(),community_profile_id:a.string().optional(),community_profile_handle:a.string().optional(),license_group_id:a.string().nullable(),license_group:l.W.nullable(),workspace_id:a.string().nullable(),default_permission:o.zd.optional().nullable(),is_favorited:a.boolean().optional(),vat_gst_id:a.string().optional(),tax_id_verification_status:o.xy.optional(),cmty_publish_as_user_enabled:a.boolean().optional(),ai_features_disabled:a.boolean().optional(),figma_provided_libraries_disabled:a.boolean().optional(),legal_name:a.string().nullable(),design_default_paid_status:o.cA.optional(),whiteboard_default_paid_status:o.cA.optional(),sanctioned_at:a.string().nullable(),sharing_audience_control:o.a0.optional(),org_browsable:a.boolean().optional(),hidden:a.boolean().optional()}));function p(e,r){let n=(0,i.kc)().ps_benchmark;return r?`${location.origin}/files/${r}/team/${e}`:`${location.origin}/files/team/${e}${n?"/all-projects":""}`}var h=(e=>(e.MOVE_FILES="move_files",e.DUPLICATE_FILES="duplicate_files",e.RESTORE_FILES="restore_files",e.MOVE_FOLDER="move_folder",e.IMPORT_FILES="import_files",e.CREATE_FILE="create_file",e.CREATE_FOLDER="create_folder",e.CREATE_FILE_FROM_TEMPLATE="create_file_from_template",e.CREATE_PAGE="create_page",e.DUPLICATE_PAGE="duplicate_page",e.CREATE_MORE_VARIABLE_MODES="create_more_variable_modes",e.PUBLISH_MORE_VARIABLE_MODES="publish_more_variable_modes",e.CREATE_FILE_FROM_DROPDOWN="create_file_from_dropdown",e))(h||{}),_=(e=>(e.PUBLISH_COMPONENTS="publish_components",e.USE_AUDIO="use_audio",e.VIEW_ONLY_PROJECT="view_only_project",e.INVITE_ONLY_PROJECT="invite_only_project",e))(_||{})},671653:(e,r,n)=>{n.d(r,{C0:()=>i,Jh:()=>s,XU:()=>c,cT:()=>d,mo:()=>u,rJ:()=>o,rR:()=>m,t2:()=>l,ue:()=>a});var i=(e=>(e[e.NAME=0]="NAME",e[e.CREATED_AT=1]="CREATED_AT",e[e.TOUCHED_AT=2]="TOUCHED_AT",e[e.TRASHED_AT=3]="TRASHED_AT",e[e.OWNER=4]="OWNER",e[e.SEARCH_RELEVANCE=5]="SEARCH_RELEVANCE",e[e.PROJECT_NAME=6]="PROJECT_NAME",e[e.ACCESSED_AT=7]="ACCESSED_AT",e[e.SHARED_AT=8]="SHARED_AT",e))(i||{}),a=(e=>(e[e.ASC=0]="ASC",e[e.DESC=1]="DESC",e))(a||{}),o=(e=>(e[e.ANY=0]="ANY",e[e.SELF=1]="SELF",e[e.OTHER=2]="OTHER",e))(o||{}),s=(e=>(e[e.CAN_BE_VIEWED=0]="CAN_BE_VIEWED",e[e.CAN_BE_RESTORED_DELETED=1]="CAN_BE_RESTORED_DELETED",e))(s||{}),l=(e=>(e[e.ANY=0]="ANY",e[e.DESIGN=1]="DESIGN",e[e.FIGJAM=2]="FIGJAM",e[e.PROTOTYPE=3]="PROTOTYPE",e[e.SLIDES=4]="SLIDES",e[e.SITES=5]="SITES",e))(l||{}),c=(e=>(e[e.LIST=0]="LIST",e[e.GRID=1]="GRID",e))(c||{}),d=(e=>(e.ALL="",e.SHARED="shared",e.ORG_DELETED_DRAFTS="deleted_user_drafts",e))(d||{});function u(e){switch(e){case 1:default:return"can_be_restored_deleted";case 0:return"can_be_viewed"}}var m=(e=>(e[e.TIME=0]="TIME",e[e.ALPHABETICAL=1]="ALPHABETICAL",e[e.OTHER=2]="OTHER",e))(m||{})},583894:(e,r,n)=>{n.d(r,{D6:()=>o,P5:()=>a,aw:()=>d,pl:()=>u,vA:()=>c,z4:()=>l});var i=n(330654),a=(e=>(e.NONE="none",e.ACCEPTED="accepted",e.STARTED_ONBOARDING="started_onboarding",e.DISABLED="disabled",e.ENABLED="enabled",e))(a||{}),o=(e=>(e.FILE="file",e.EXTENSION="extension",e))(o||{}),s=(e=>(e.NUM_CUSTOMERS="num_customers",e.PAYOUTS="payouts",e.GROSS="gross",e.LAST_UPDATED="last_updated_at",e.ALL_TIME_TOTAL_EARNED="all_time_total_earned",e.NUM_PURCHASES="num_purchases",e))(s||{});function l(e){return e&&({none:0,accepted:1,started_onboarding:2,disabled:3,enabled:4})[e]||0}var c=(e=>(e.ALWAYS="always",e.NEVER="never",e))(c||{});let d=i.object({id:i.string(),name:i.string().optional(),handle:i.string(),img_url:i.string(),email:i.string().optional(),description:i.string().nullish(),org_id:i.string().optional()});var u=(e=>(e.EDITOR_ON_MAIN="Editor on main",e.EDITOR_ON_TEAM="Editor on team",e))(u||{})},59530:(e,r,n)=>{n.d(r,{V5:()=>i});let i=new Set(["seen_pro_cart_abandon_survey","seen_drafts_collaboration_survey","seen_first_use_survey","seen_type_of_work_survey","seen_org_admin_survey","seen_pro_admin_survey","seen_org_cart_abandon_survey","seen_remote_templates_opt_out_survey","seen_editor_new_user_survey","seen_editor_new_user_research_intake","seen_starter_team_loophole_survey","dismissed_starter_team_loophole_survey","completed_starter_team_loophole_survey"])},410613:(e,r,n)=>{var i,a=(e=>(e[e.TEXT=0]="TEXT",e[e.FILE_COMMENT=1]="FILE_COMMENT",e[e.FILE_COMMENT_REPLY=2]="FILE_COMMENT_REPLY",e[e.INVITE_FILE=3]="INVITE_FILE",e[e.INVITE_FOLDER=4]="INVITE_FOLDER",e[e.INVITE_TEAM=5]="INVITE_TEAM",e[e.AT_MENTION_INVITE=7]="AT_MENTION_INVITE",e[e.AT_MENTION=8]="AT_MENTION",e[e.TEAM_ROLE_REQUEST_APPROVED=9]="TEAM_ROLE_REQUEST_APPROVED",e[e.TEAM_ROLE_REQUEST_DENIED=10]="TEAM_ROLE_REQUEST_DENIED",e[e.TEAM_ROLE_REQUEST_CREATED=11]="TEAM_ROLE_REQUEST_CREATED",e[e.ORG_ACCOUNT_TYPE_REQUEST_CREATED=12]="ORG_ACCOUNT_TYPE_REQUEST_CREATED",e[e.ORG_ACCOUNT_TYPE_REQUEST_APPROVED=13]="ORG_ACCOUNT_TYPE_REQUEST_APPROVED",e[e.ORG_ACCOUNT_TYPE_REQUEST_DENIED=14]="ORG_ACCOUNT_TYPE_REQUEST_DENIED",e[e.FILE_COMMENT_REACTION=20]="FILE_COMMENT_REACTION",e[e.INVITE_FILE_REPO=26]="INVITE_FILE_REPO",e[e.FILE_ROLE_REQUEST_CREATED=27]="FILE_ROLE_REQUEST_CREATED",e[e.MERGE_REQUEST_REVIEWER_ADDED=28]="MERGE_REQUEST_REVIEWER_ADDED",e[e.MERGE_REQUEST_APPROVED=29]="MERGE_REQUEST_APPROVED",e[e.MERGE_REQUEST_APPROVAL_REVOKED=30]="MERGE_REQUEST_APPROVAL_REVOKED",e[e.BRANCH_MERGED=31]="BRANCH_MERGED",e[e.BRANCH_ARCHIVED=32]="BRANCH_ARCHIVED",e[e.FILE_ROLE_REQUEST_APPROVED=34]="FILE_ROLE_REQUEST_APPROVED",e[e.MERGE_REQUEST_REVIEWER_INVITED_ADDED=35]="MERGE_REQUEST_REVIEWER_INVITED_ADDED",e[e.ORG_JOIN_REQUEST_CREATED=36]="ORG_JOIN_REQUEST_CREATED",e[e.MERGE_REQUEST_CHANGES_REQUESTED=39]="MERGE_REQUEST_CHANGES_REQUESTED",e[e.ORG_JOIN_REQUEST_APPROVED_TO_SHARER=40]="ORG_JOIN_REQUEST_APPROVED_TO_SHARER",e[e.PRO_ACCOUNT_TYPE_REQUEST_CREATED=43]="PRO_ACCOUNT_TYPE_REQUEST_CREATED",e[e.PRO_ACCOUNT_TYPE_REQUEST_APPROVED=44]="PRO_ACCOUNT_TYPE_REQUEST_APPROVED",e[e.PRO_ACCOUNT_TYPE_REQUEST_DENIED=45]="PRO_ACCOUNT_TYPE_REQUEST_DENIED",e[e.INVITE_TEAM_REMINDER=46]="INVITE_TEAM_REMINDER",e[e.PLUGIN_PUBLISHER_ADDED=47]="PLUGIN_PUBLISHER_ADDED",e[e.RESOURCE_SOLD=48]="RESOURCE_SOLD",e[e.INVITE_FILE_REMINDER=49]="INVITE_FILE_REMINDER",e[e.BATCHED_FILE_COMMENT=50]="BATCHED_FILE_COMMENT",e[e.FEED_POST_COMMENT=51]="FEED_POST_COMMENT",e[e.FEED_POST_AT_MENTION=52]="FEED_POST_AT_MENTION",e[e.FEED_POST_REACTION=53]="FEED_POST_REACTION",e[e.RESOURCE_PUBLISH=54]="RESOURCE_PUBLISH",e[e.FEED_COMMENT_REACTION=55]="FEED_COMMENT_REACTION",e[e.FEED_POST_DESCRIPTION_AT_MENTION=56]="FEED_POST_DESCRIPTION_AT_MENTION",e[e.BATCHED_FEED_POST=57]="BATCHED_FEED_POST",e[e.BATCHED_FEED_COMMENT_REACTION=58]="BATCHED_FEED_COMMENT_REACTION",e[e.RESOURCE_SUBSCRIPTION_PRICE_INCREASE=60]="RESOURCE_SUBSCRIPTION_PRICE_INCREASE",e[e.FEED_POLL_CLOSE=61]="FEED_POLL_CLOSE",e[e.FILE_ROLE_REQUEST_PENDING_MOVE_TO_PROJECT=63]="FILE_ROLE_REQUEST_PENDING_MOVE_TO_PROJECT",e[e.VR_USER_SHARED_DRAFT=77]="VR_USER_SHARED_DRAFT",e))(a||{});(e=>{(e=>{(e.Block||(e.Block={})).ATTACHMENT_TYPES=new Set(["BodyAndThumbnailAttachment","ActionableAttachment","ClientActionableAttachment","BodyAttachment"])})(e.BlockKit||(e.BlockKit={}))})(i||(i={}))},589640:(e,r,n)=>{n.d(r,{o:()=>i});var i=(e=>(e.INTERNAL_PROFILE="INTERNAL_PROFILE",e.INTERNAL_PROFILE_POSTS="INTERNAL_PROFILE_POSTS",e.PUBLIC_PROFILE="PUBLIC_PROFILE",e.PLUGINS="PLUGINS",e))(i||{})},636751:(e,r,n)=>{n.d(r,{$E:()=>i,MK:()=>s,bU:()=>a});var i=(e=>(e[e.CONNECTED=0]="CONNECTED",e[e.CONNECTED_WITH_MIC_DISABLED=1]="CONNECTED_WITH_MIC_DISABLED",e[e.DISCONNECTED=2]="DISCONNECTED",e[e.CONNECTING=3]="CONNECTING",e[e.DISCONNECTING=4]="DISCONNECTING",e[e.RECONNECTING=5]="RECONNECTING",e[e.ERROR=6]="ERROR",e[e.CALL_INACTIVE=7]="CALL_INACTIVE",e[e.TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT=8]="TOKEN_WILL_EXPIRE_DETECT_MIC_INPUT",e[e.TOKEN_WILL_EXPIRE=9]="TOKEN_WILL_EXPIRE",e[e.TOKEN_EXPIRED=10]="TOKEN_EXPIRED",e[e.TOKEN_SILENTLY_RENEWED=11]="TOKEN_SILENTLY_RENEWED",e[e.USER_JOINED=12]="USER_JOINED",e[e.USER_LEFT=13]="USER_LEFT",e[e.ERROR_MICROPHONE_PERMISSIONS_DENIED=14]="ERROR_MICROPHONE_PERMISSIONS_DENIED",e[e.WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED=15]="WARNING_MICROPHONE_LEVELS_HIGH_AND_MUTED",e[e.UNMUTE=16]="UNMUTE",e[e.MUTE=17]="MUTE",e[e.ERROR_ON_LEAVE=18]="ERROR_ON_LEAVE",e[e.SYSTEM_INCOMPATIBLE=19]="SYSTEM_INCOMPATIBLE",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW=20]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW=21]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW=22]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW",e[e.WARNING_RECV_AUDIO_DECODE_FAILED=23]="WARNING_RECV_AUDIO_DECODE_FAILED",e[e.WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER=24]="WARNING_AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER=25]="WARNING_AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",e[e.WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER=26]="WARNING_SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",e[e.WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER=27]="WARNING_RECV_AUDIO_DECODE_FAILED_RECOVER",e))(i||{}),a=(e=>(e[e.NONE=0]="NONE",e[e.HEADPHONES=1]="HEADPHONES",e[e.FULL=2]="FULL",e))(a||{}),o=(e=>(e.ERROR="error",e.WARNING="warning",e.MESSAGE="message",e.SUCCESS="success",e.PENDING="pending",e))(o||{}),s=(e=>(e[e.DONE=100]="DONE",e[e.STARTED=1]="STARTED",e[e.NOT_STARTED=0]="NOT_STARTED",e[e.DISK_ERROR=-1]="DISK_ERROR",e[e.NETWORK_ERROR=-2]="NETWORK_ERROR",e))(s||{})},493536:(e,r,n)=>{},352898:(e,r,n)=>{n.d(r,{Fi:()=>o,V0:()=>i,dN:()=>a,m2:()=>s,rj:()=>l});var i=(e=>(e.ADMIN="admin",e.DIRECTORY="directory",e))(i||{}),a=(e=>(e.TEAMS="teams",e))(a||{});let o=["teams"];var s=(e=>(e.TEAMS="teams",e.MEMBERS="members",e.LIBRARIES="libraries",e.SETTINGS="settings",e))(s||{});let l=["teams","members","libraries"]},18993:(e,r,n)=>{n.d(r,{aY:()=>R,bE:()=>O});var i=n(411855),a=n(188507),o=n(140593),s=n(659302),l=n(915440),c=n(662275),d=n(756085);n(335682);var u=n(860178),m=n(99506),p=n(279453),h=n(643067),_=n(556261),g=n(56099),f=n(215822);n(829632);var E=n(554294),y=n(802257),b=n(507956),v=n(288006),I=n(463033),T=n(862350),S=n(951792),w=n(939863),A=n(809840),C=n(237870),N=(e=>(e.STOP_AUTO_RUN_FROM_USER="stop-auto-run-from-user",e.STOP_AUTO_RUN_FROM_ORG="stop-auto-run-from-org",e.CONFIRM_REPLACE="confirm-replace",e.ENABLE_AUTO_RUN="enable-auto-run",e))(N||{});let L=(0,C.Ju)(function({commonShowModalArgs:e,newPluginName:r,autoRunModalType:n,open:s}){let l,d;let u=(0,a.wA)(),p=()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.NONE),u(c.Lo())},h=()=>u(c.Lo()),f=(0,_.yN)({migrationGroup:g.L.GROUP_5,component:"AutoRunConfirmModal",attribute:"orgName",legacy:(e,r)=>r?.name||void 0,migrated:(e,r)=>e?.key.type===m.OL.ORG?r?.name:void 0}),E={currentAutoRunPluginName:i.createElement(A.E,{fontWeight:"bold"},e.currentAutoRunPluginName)},b={orgName:i.createElement(A.E,null,f||""),orgPluginName:i.createElement(A.E,{fontWeight:"bold"},e.orgPluginName)},C={orgPluginName:i.createElement(A.E,{fontWeight:"bold"},e.orgPluginName),newPluginName:i.createElement(A.E,{fontWeight:"bold"},r),orgName:i.createElement(A.E,null,f||"")};switch(n){case"stop-auto-run-from-user":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_desc",E))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(I.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(I.$n,{variant:"primary",onClick:()=>{p(),u((0,c.to)({type:L,data:{commonShowModalArgs:e,autoRunModalType:"enable-auto-run"}}))}},(0,w.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;case"enable-auto-run":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.enable_auto_run_desc",b))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(I.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.dont_enable")),i.createElement(I.$n,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.INHERIT),u(c.Lo())}},(0,w.t)("dev_handoff.autorun_confirm_modal.enable_auto_run")))));break;case"confirm-replace":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.confirm_replace",C))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(I.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(I.$n,{variant:"primary",onClick:()=>{y.s.updateUserAutoRunPluginId(e.pluginID,m.xw.OVERRIDE),u(c.Lo())}},(0,w.t)("dev_handoff.autorun_confirm_modal.replace")))));break;case"stop-auto-run-from-org":l=i.createElement(i.Fragment,null,i.createElement(v.nB,null,i.createElement(A.E,{color:"default",fontWeight:"medium"},(0,w.tx)("dev_handoff.autorun_confirm_modal.stop_auto_run_from_org",b))),i.createElement(v.wi,null,i.createElement(v.jk,null,i.createElement(I.$n,{variant:"secondary",onClick:h},(0,w.t)("dev_handoff.autorun_confirm_modal.cancel")),i.createElement(I.$n,{variant:"primary",onClick:p},(0,w.t)("dev_handoff.autorun_confirm_modal.stop_auto_run")))));break;default:(0,o.xb)(n)}switch(n){case"stop-auto-run-from-user":case"stop-auto-run-from-org":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_stop_auto_run");break;case"confirm-replace":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_replace_auto_run");break;case"enable-auto-run":d=(0,w.t)("dev_handoff.autorun_confirm_modal.title_enable_auto_run",{pluginName:e.orgPluginName});break;default:(0,o.xb)(n)}let N=T.hS({open:s,onClose:()=>u(c.Lo())});return i.createElement(S.bL,{manager:N,width:"md",htmlAttributes:{"data-testid":"autorun-confirm-modal"}},i.createElement(v.vo,null,i.createElement(v.Y9,null,i.createElement(v.hE,null,d)),l))},"AutoRunConfirmModal");function O(e){let r=e?.plugin_id??"",n=e?.name??"",l=function(){let e=P(),r=D(),n=(0,_.b_)({component:"usePluginToAutoRun",migrationGroup:g.L.GROUP_11}),i=u.iZ()?.id;if(!(e.loaded&&r.loaded))return{loaded:!1,plugin:null};let a=null;switch(e.autoRunPrefs?.autoRunPluginBehavior){case m.xw.NONE:a=null;break;case m.xw.OVERRIDE:a=e.autoRunPrefs.autoRunPlugin;break;case m.xw.INHERIT:default:a=r.autoRunPrefs?.autoRunPlugin??null}let o=a?(0,d.mf)(a,n??"",i??"",null)??null:null;return{loaded:!0,plugin:R(o)?o:null}}(),p=D(),h=(0,b.ks)(),f=h&&l.plugin?.plugin_id===r,v=(0,s.Xr)(E.Lx),I=P(),T=(0,a.wA)();return{isPluginSetToAutoRun:f,callback:i.useCallback(()=>{if(!h||(v(!0),!l.loaded||!p.loaded))return;let e=I.autoRunPrefs?.autoRunPluginBehavior,i={pluginID:r,orgPluginName:p.autoRunPrefs?.autoRunPlugin.currentPluginVersion?.name||"",currentAutoRunPluginName:l.plugin?.name||""};switch(e){case void 0:case m.xw.NONE:y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;case m.xw.OVERRIDE:r!==l.plugin?.plugin_id?y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE):p.autoRunPrefs?T((0,c.to)({type:L,data:{commonShowModalArgs:i,autoRunModalType:N.STOP_AUTO_RUN_FROM_USER}})):y.s.updateUserAutoRunPluginId(r,m.xw.NONE);break;case m.xw.INHERIT:p.autoRunPrefs?r!==p.autoRunPrefs.autoRunPluginId?T((0,c.to)({type:L,data:{commonShowModalArgs:i,newPluginName:n,autoRunModalType:N.CONFIRM_REPLACE}})):T((0,c.to)({type:L,data:{commonShowModalArgs:i,autoRunModalType:N.STOP_AUTO_RUN_FROM_ORG}})):y.s.updateUserAutoRunPluginId(r,m.xw.OVERRIDE);break;default:(0,o.xb)(e)}},[h,v,l.loaded,l.plugin?.name,l.plugin?.plugin_id,p.loaded,p.autoRunPrefs,I.autoRunPrefs?.autoRunPluginBehavior,r,T,n])}}function R(e){return e&&(0,f.UH)(e)}function P(){let e=(0,u.iZ)();return k((0,l.Rs)(p.Sc8,{targetOrgId:null,targetUserId:e?.id??""},{enabled:!!e?.id}))}function D(e){let r=(0,_.yN)({attribute:"id,isEnterprise",component:"useOrgAutoRunPlugin",migrationGroup:g.L.GROUP_11,legacy:(e,r)=>({id:r?.id,isEnterprise:(0,h.kA)(r)}),migrated:e=>({id:e?.key.type!==m.OL.ORG?void 0:e?.key.parentId??void 0,isEnterprise:e?.tier===m.Ag.ENTERPRISE})}),n=(0,l.Rs)(p.Sc8,{targetOrgId:r?.id??"",targetUserId:null},{enabled:r.isEnterprise});return r.isEnterprise?k(n,e):{loaded:!0,autoRunPrefs:null}}function k(e,r){if("loaded"!==e.status)return{loaded:!1,autoRunPrefs:null};let n=e.data.pluginPreferences,i=!!(r||n?.autoRunEnabled);return n&&n.autoRunPluginId&&n.autoRunPlugin&&i?{loaded:!0,autoRunPrefs:{autoRunPluginId:n.autoRunPluginId,autoRunPluginBehavior:n.autoRunBehavior,autoRunPlugin:n.autoRunPlugin}}:{loaded:!0,autoRunPrefs:null}}},656399:(e,r,n)=>{n.d(r,{Q:()=>d});var i=n(411855),a=n(821910);n(268537),n(46481),n(939863);var o=n(308977),s=n(92597);n(318812);var l=n(99506);n(498606);var c=n(756689);function d(){let{setCodegenSettings:e,localCodegenSettings:r}=(0,c.VR)(),n=(0,o.v4)(),d=(0,s.gc)(),u=i.useMemo(()=>r?.behavior===l.Rc.OVERRIDE&&(0,a.he)(r?.language,n)&&(0,a.he)(r?.preferences,d),[n,d,r]);return{updateDefaultCodegenSettings:i.useCallback(()=>{e({behavior:u?l.Rc.INHERIT:l.Rc.OVERRIDE,language:n,preferences:d})},[n,d,u,e]),isSetToDefault:u}}n(298543)},176626:(e,r,n)=>{n.d(r,{Ew:()=>i.E,IN:()=>c.IN,L_:()=>o.L,VY:()=>s.V,Wh:()=>c.Wh,Yx:()=>l.Y,_x:()=>a._x,gH:()=>c.gH,mN:()=>a.mN});var i=n(8481),a=n(559497);n(804926);var o=n(678003),s=n(18795),l=n(122296),c=n(396635)},118658:(e,r,n)=>{var i=n(411855),a=n(134791),o=n(376064),s=n(585648),l=n(109388),c=n(188507),d=n(196367),u=n(841368),m=n(939683),p=n(44948),h=n(820286),_=n(418956),g=n(268537),f=n(192437),E=n(46481),y=n(154254),b=n(939863),v=n(785315),I=n(256975),T=n(738269),S=n(986270),w=n(902139),A=n(802915),C=n(798099),N=n(780700);n(756085);var L=n(226055),O=n(318812),R=n(555328),P=n(498606),D=n(554294);n(756689);var k=n(978527),M=n(507956),F=n(728587),x=n(298543),U=n(76158),B=n(76154),V=n(53380),G=n(362679);function H(){let e=q(),r=!!e,[n,a]=i.useState({x:0,y:0});return i.useEffect(()=>{if(r){let e=e=>{a({x:e.clientX,y:e.clientY})};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}},[r]),e?l.createPortal(i.createElement(k.V,{plugin:e,className:y.cx.h16.w16.bRadius2.$,style:{position:"fixed",left:n.x-8,top:n.y-8,pointerEvents:"none",zIndex:1e5}}),document.body):null}function K(e){let{pinnedPlugins:r,unpinPlugin:n,movePin:a,runPlugin:o}=e,s=(0,_.md)(D.be),[l,d]=i.useState(!1),u=q(),m=(0,c.wA)(),{shownPlugins:h,overflowPlugins:g}=r.length>3?{shownPlugins:r.slice(0,2),overflowPlugins:r.slice(2)}:{shownPlugins:r,overflowPlugins:[]},f=s?.plugin_id??null,E=g.findIndex(e=>e.plugin_id===f);if(-1!==E){let e=g[E];u||g.splice(E,1),h.push(e)}let b=h[h.length-1]?.plugin_id,v=(0,p.k9)(()=>new Set(r.map(e=>e.plugin_id)),[r]);return i.useEffect(()=>{m(S.Vg({resourceType:R.bD.PLUGIN,resourceIds:Array.from(v)}))},[v,m]),i.createElement("div",{className:y.cx.flex.flexRow.flexGrow1.itemsEnd.$,"data-testid":"pinned-plugins"},i.createElement("div",{className:V.hm},i.createElement(z,{target:{type:"begin"},variant:"vertical"}),h.map(e=>{let r=e.plugin_id===f&&!!u&&-1!==E;return i.createElement("div",{key:e.plugin_id,style:{visibility:r?"hidden":"visible",display:"contents"}},i.createElement(W,{plugin:e,unpinPlugin:n,movePin:a,runPlugin:o,setIsDropdownShown:d}),i.createElement(z,{target:{type:"after",id:e.plugin_id},variant:"vertical",disabled:r}))}),g.length>0&&i.createElement($,{isDropdownShown:!!u||l,setIsDropdownShown:d,plugins:g,unpinPlugin:n,lastShownPluginID:b,movePin:a,runPlugin:o})))}function W({plugin:e,unpinPlugin:r,movePin:n,runPlugin:o,setIsDropdownShown:s}){let l=(0,N.Gt)(e.plugin_id,"pinned"),d=(0,_.md)(D.be),u=d?.plugin_id??null,[p,h]=(0,_.fp)(v.H),g=(0,m.U)(),f=i.useRef(null),E=(0,I._I)(),b=(0,M.ks)()&&!E,S=(0,c.wA)(),C=(0,O.Um)(),L=(0,A.p)(e.plugin_id,l),R=L.length>0,x=(0,B.yG)(e.plugin_id,"pinned")&&R,G=i.useCallback(r=>{if(R){x?S(T.oB()):S((0,B.dr)({pluginId:e.plugin_id,tileType:"pinned"}));return}l()},[R,l,x,S,e.plugin_id]),[{isDragging:H},K]=(0,a.i)(()=>({type:"pinned-plugin",collect:e=>({isDragging:!!e.isDragging()}),item:e,canDrag:()=>u!==e.plugin_id&&!b,end:(r,i)=>{let a=i.getDropResult();i.didDrop()&&a&&n(e.plugin_id,a)}}),[b,n,u,e.plugin_id]),W=C?.type===Z&&C.data.pluginId===e.plugin_id,$=i.useCallback(r=>{r.stopPropagation(),r.preventDefault(),W?S(T.oB()):S(T.j7({type:Z,data:{targetRect:r.currentTarget.getBoundingClientRect(),pluginId:e.plugin_id}}))},[S,W,e.plugin_id]),z=f.current?.getBoundingClientRect();return i.createElement("div",{className:y.cx.relative.$,ref:f},i.createElement("button",{className:d?.plugin_id===e.plugin_id?V.TU:V.y_,"data-tooltip-type":W||H?void 0:P.Ib.TEXT,"data-tooltip":W||H?void 0:e.name,onClick:r=>{b?(h(v._.PLUGIN),S(w.IN({fdPreviewResource:{id:e.plugin_id,type:U.s.PLUGIN}}))):R?G(r):o&&(h(v._.PLUGIN),u!==e.plugin_id&&(l(),g("Dev Handoff Ran Pinned Plugin",{pluginId:e.plugin_id})),s(!1))},onContextMenu:$},i.createElement(k.V,{plugin:e,draggable:!1,className:y.cx.h16.w16.bRadius2.$,ref:K,style:{opacity:H?.5:1}})),W&&i.createElement(Y,{plugin:e,unpinPlugin:r}),x&&z&&i.createElement(F.j,{showPoint:!1,items:L,onSelectItem:r=>{r.callback&&(r.callback("",null,S),s(!1),g("Dev Handoff Ran Pinned Plugin Submenu",{pluginId:e.plugin_id}))},parentRect:z,dispatch:S,lean:"left"}))}function $({plugins:e,unpinPlugin:r,lastShownPluginID:n,isDropdownShown:a,setIsDropdownShown:o,movePin:s,runPlugin:l}){let c=i.useRef(null);return i.useEffect(()=>{let e=e=>{c.current&&!c.current.contains(e.target)&&o(!1)};return document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}},[o]),i.createElement(i.Fragment,null,i.createElement("div",{className:V.zA,ref:c},i.createElement(d.d,{recordingKey:"overflow_pins",toggled:!1,onClick:()=>{o(!a)},"aria-label":(0,b.t)("dev_handoff.inspect_panel.more_plugins"),htmlAttributes:{onMouseDown:C.dG,"data-tooltip-type":P.Ib.TEXT,"data-tooltip":(0,b.t)("dev_handoff.inspect_panel.more_plugins")}},i.createElement(E.U,{svg:G.A},i.createElement(u.J,null))),a&&i.createElement("div",{className:V.Wm},i.createElement(z,{target:{type:"after",id:n},variant:"horizontal"}),e.map(e=>i.createElement(i.Fragment,{key:e.plugin_id},i.createElement(W,{plugin:e,unpinPlugin:r,movePin:s,runPlugin:l,setIsDropdownShown:o}),i.createElement(z,{target:{type:"after",id:e.plugin_id},variant:"horizontal"}))))))}function Y({plugin:e,unpinPlugin:r}){let n=(0,O.Um)();return i.createElement(x.Cf,{targetRect:n?.data.targetRect,lean:"left",minWidth:64,maxWidth:120,disableDropdownScrollContainer:!0,propagateCloseClick:!0},i.createElement(g.c$,{onClick:()=>r(e.plugin_id)},(0,b.tx)("dev_handoff.inspect_panel.unpin")))}function z({target:e,variant:r,disabled:n=!1}){let a=(0,L.GS)()?24:32,[{isOver:s},l]=(0,o.H)(()=>({accept:"pinned-plugin",drop:()=>e,collect:e=>({isOver:!!e.isOver()}),canDrop:()=>!n}),[e,n]),c={position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",flexGrow:"begin"===e.type?1:0,..."vertical"===r?"begin"===e.type?{position:"relative",justifyContent:"end",minWidth:16,height:a,marginRight:-8}:{width:16,height:a,top:0,left:-8}:{width:a,height:16,top:-8,left:0}};return i.createElement("div",{style:{position:"relative",flexGrow:"begin"===e.type?1:0,width:0,height:0,display:"flex",overflow:"visible",zIndex:1}},i.createElement("div",{style:c,ref:l},s&&i.createElement(j,{variant:r,target:e})))}function j({variant:e,target:r}){return i.createElement("div",{style:{background:"var(--color-icon-brand)",..."horizontal"===e?{height:2,width:32}:{height:32,width:2},..."begin"===r.type?{marginRight:6}:{}}})}function q(){let e=(0,s.u)(),[r,n]=i.useState(null);return i.useEffect(()=>e.getMonitor().subscribeToStateChange(()=>{n(e.getMonitor().getItem())}),[e,n]),r}i.memo(function(e){return!function(){let[e,r]=i.useState(!1);return i.useEffect(()=>{let e=requestAnimationFrame(()=>{r(!0)});return()=>cancelAnimationFrame(e)},[]),e}()?null:i.createElement(f.tH,{boundaryKey:"PinnedPlugins",fallback:i.createElement(i.Fragment,null)},i.createElement(h.hh,null,i.createElement(K,{...e}),i.createElement(H,null)))});let Z="PINNED_PLUGIN_DROPDOWN"},756689:(e,r,n)=>{n.d(r,{VR:()=>L});var i=n(411855),a=n(188507),o=n(966664),s=n(939683);n(404843);var l=n(915440),c=n(27087);n(986291);var d=n(256975),u=n(5605);n(370934),n(92597);var m=n(931828),p=n(756085),h=n(153046);n(843495),n(335682);var _=n(860178),g=n(99506),f=n(279453),E=n(556261),y=n(56099);n(215822),n(285334);var b=n(507956),v=n(140593),I=n(922827),T=n(757028),S=n(966712);let w={language:{type:"first-party",id:"WEB"},preferences:{customSettings:null,unit:g.tK.PIXEL,scaleFactor:null},behavior:g.Rc.INHERIT};class A{constructor(e,r,n){if(this.workingPreferences=e,this.parentPreferences=r,this.parentEnabledPreferences=n,!r||!n)return;let{codegenEnabled:i,pinnedPluginsEnabled:a}={...n},o={...r};i||(o.codegenSettings=null),!a&&(0,S.kc)().dev_mode_org_pinned_plugins_ent&&(o.pins=[],o.removedInheritedPins=[]),this.parentPreferences=o}orgPinsNotInUserPins(){let e=[];for(let r of this.parentPreferences?.pins??[])this.workingPreferences.pins.find(e=>e.pluginId===r.pluginId)||e.push(r);return e}get pinnedPluginIDs(){let e=[...this.workingPreferences.pins,...this.orgPinsNotInUserPins()],r=new Set(this.workingPreferences.removedInheritedPins);return e.filter(e=>!r.has(e.pluginId)&&(!e.inherited||C(this.parentPreferences,e.pluginId))).map(e=>e.pluginId)}get codegenSettings(){return this.parentPreferences&&this.workingPreferences.codegenSettings?.behavior!==g.Rc.OVERRIDE?this.parentPreferences?.codegenSettings??null:this.workingPreferences.codegenSettings}update(e){return new A((0,T.Ay)(this.workingPreferences,e),this.parentPreferences,this.parentEnabledPreferences)}pinPlugin(e){var r;let n=(r=this.workingPreferences,r?.pins.findIndex(r=>r.pluginId===e&&r.inherited));return null!=n&&-1!==n?this.update(r=>{r.pins[n].inherited=!1,r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)}):C(this.workingPreferences,e)?this:this.update(r=>{r.pins.push({pluginId:e,inherited:!1}),r.removedInheritedPins=r.removedInheritedPins.filter(r=>r!==e)})}unpinPlugin(e){return this.update(r=>{r.pins=r.pins.filter(r=>r.pluginId!==e),C(this.parentPreferences,e)&&r.removedInheritedPins.push(e)})}movePin(e,r){return"after"===r.type&&e===r.id||"begin"===r.type&&this.pinnedPluginIDs[0]===e?this:this.update(n=>{let i=C(this.workingPreferences,e),a=C(this.parentPreferences,e),o=!!(!i&&a);switch(n.pins=n.pins.filter(r=>r.pluginId!==e),r.type){case"begin":n.pins.unshift({pluginId:e,inherited:o});break;case"after":{let i=n.pins.findIndex(e=>e.pluginId===r.id);if(-1!==i)n.pins.splice(i+1,0,{pluginId:e,inherited:o});else{let i=this.orgPinsNotInUserPins(),a=i.findIndex(e=>e.pluginId===r.id);if(-1===a)throw Error("Invalid pin to move after");n.pins.push(...i.slice(0,a+1).map(e=>({...e,inherited:!0})),{pluginId:e,inherited:o})}}}})}get localCodegenSettings(){if(!this.codegenSettings)return null;let e=this.codegenSettings?.language,r=this.lgLanguageToLocalLanguage(e);if(!r)return null;let n=this.codegenSettings.preferences,i=this.lgUnitToLocalUnit(n.unit);return{language:r,preferences:{scaleFactor:n.scaleFactor??void 0,customSettings:n.customSettings??void 0,unit:i},behavior:this.codegenSettings.behavior}}setCodegenSettingLanguage(e){return this.update(r=>{let n=this.localLanguageTypeToLgLanguageType(e.type);if(!n)throw Error("Invalid language type");let i={...e,type:n,pluginLanguage:e.pluginLanguage??null};r.codegenSettings={language:i,preferences:this.codegenSettings?.preferences||w.preferences,behavior:this.codegenSettings?.behavior||w.behavior}})}setCodegenSettingUnit(e){return this.update(r=>{if(!this.codegenSettings)return;let n=this.localUnitToLgUnit(e);if(!n)throw Error("Invalid unit");let i=this.codegenSettings.preferences?{...this.codegenSettings.preferences,unit:n}:{scaleFactor:null,unit:n,customSettings:null};r.codegenSettings={language:this.codegenSettings.language,preferences:i,behavior:this.codegenSettings.behavior}})}setCodegenSettingCustomSettings(e,r){return this.update(n=>{if(!this.codegenSettings)return;let i=this.localLanguageTypeToLgLanguageType(e.type);if(!i)throw Error("Invalid language type");let a={...e,type:i,pluginLanguage:e.pluginLanguage??null},o={scaleFactor:this.codegenSettings.preferences?.scaleFactor??null,unit:this.codegenSettings.preferences?.unit??null,customSettings:{...this.codegenSettings.preferences?.customSettings,...r.customSettings}};n.codegenSettings={language:a,preferences:o,behavior:this.codegenSettings.behavior}})}setCodegenSetting(e){return this.update(r=>{if(!e){r.codegenSettings=null;return}let{behavior:n,language:i,preferences:a}=e,o=this.localLanguageTypeToLgLanguageType(i.type);if(!o)throw Error("Invalid language type");let s={...i,type:o,pluginLanguage:i.pluginLanguage??null},l={unit:this.localUnitToLgUnit(a.unit),customSettings:a.customSettings??null,scaleFactor:a.scaleFactor??null};r.codegenSettings={behavior:n,language:s,preferences:l}})}localUnitToLgUnit(e){switch(e){case I.tKW.PIXEL:return g.tK.PIXEL;case I.tKW.SCALED:return g.tK.SCALED;default:return null}}lgUnitToLocalUnit(e){switch(e){case g.tK.PIXEL:return I.tKW.PIXEL;case g.tK.SCALED:return I.tKW.SCALED;default:return}}localLanguageTypeToLgLanguageType(e){switch(e){case"first-party":return g.h9.FIRST_PARTY;case"published-plugin":return g.h9.PUBLISHED_PLUGIN;default:return null}}lgLanguageToLocalLanguage(e){let r;switch(e.type){case g.h9.FIRST_PARTY:r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage??void 0};break;case g.h9.PUBLISHED_PLUGIN:if(!e.pluginLanguage)return null;r={id:e.id,type:e.type,pluginLanguage:e.pluginLanguage};break;default:(0,v.xb)(e.type)}return r}serialize(){return{pins:this.workingPreferences.pins.map(e=>({pluginId:e.pluginId,inherited:e.inherited})),removedInheritedPins:Array.from(new Set(this.workingPreferences.removedInheritedPins)),codegenSettings:this.workingPreferences.codegenSettings}}}function C(e,r){return e?.pins.some(e=>e.pluginId===r)}let N={pins:[],removedInheritedPins:[],codegenSettings:null};function L(){let{loaded:e,preferences:r}=function(){let e=(0,_.TA)(),{loaded:r,preferences:n}=R((0,l.Rs)(f.JuA,{targetOrgId:null,targetUserId:e}));return{loaded:r,preferences:n}}(),{loaded:n,preferences:c,codegenEnabled:h,pinnedPluginsEnabled:v}=function(){let e=(0,E.yN)({migrationGroup:y.L.GROUP_6,component:"useLGOrgPluginPreferences",attribute:"targetOrgId",legacy:(e,r)=>r?.id??null,migrated:e=>e?.key.type===g.OL.ORG?e.key.parentId??null:null});return R((0,l.Rs)(f.JuA,{targetOrgId:e,targetUserId:null}))}(),I=(0,a.wA)(),T=(0,s.U)(),S=(0,b.ks)(),w=(0,d._I)(),C=S&&!w;(0,i.useEffect)(()=>{r&&D(null)},[r]);let L=(0,i.useMemo)(()=>new A(r??N,c??null,{codegenEnabled:h,pinnedPluginsEnabled:v}),[r,c,h,v]),[P,D]=(0,i.useState)(null),k=(0,i.useMemo)(()=>{let e=new Map;for(let n of[...r?.pins??[],...c?.pins??[]])n.plugin&&e.set(n.pluginId,n.plugin);return e},[c?.pins,r?.pins]),M=(0,i.useMemo)(()=>P?.pinnedPluginIDs??L.pinnedPluginIDs,[L,P]),F=(0,E.b_)({migrationGroup:y.L.GROUP_6,component:"usePluginPreferences"})??null,x=(0,_.TA)(),U=(0,p.YN)(),B=(0,i.useMemo)(()=>M.map(e=>{let r=k.get(e);if(!r||!r.publishingStatus||r.publishingStatus!==g.KB.APPROVED_PUBLIC&&r.publishingStatus!==g.KB.ORG_PRIVATE)return null;let n=(0,p.mf)(r,F,x,null);return n&&(C||U(n))?n:null}).filter(o.Vq),[M,k,F,x,C,U]),V=e=>{D(e),O(e.serialize()).catch(()=>{D(null)})};return{pinnedPlugins:B,unpinPlugin(e){V(L.unpinPlugin(e)),T("Dev Handoff Unpin Plugin",{pluginID:e})},pinPlugin(e){I(m.b({[u.xb]:!0})),V(L.pinPlugin(e)),T("Dev Handoff Pin Plugin",{pluginID:e})},movePin(e,r){V(L.movePin(e,r)),T("Dev Handoff Moved Plugin",{pluginID:e})},localCodegenSettings:L.localCodegenSettings,setCodegenSettings(e){V(L.setCodegenSetting(e))},setCodegenSettingsLanguage(e){V(L.setCodegenSettingLanguage(e))},setCodegenSettingsUnit(e){V(L.setCodegenSettingUnit(e))},setCodegenSettingsCustomSettings(e,r){V(L.setCodegenSettingCustomSettings(e,r))},loaded:e&&n}}async function O(e){await c.Ay.post("/api/plugin_preferences/user",{preferences:e})}function R(e){if("loaded"!==e.status)return{loaded:!1,preferences:null,codegenEnabled:!1,pinnedPluginsEnabled:!1};let r=e.data.pluginPreferences,{codegenEnabled:n,pinnedPluginsEnabled:i}=r||{};return{loaded:!0,preferences:r?.preferences,codegenEnabled:n??!1,pinnedPluginsEnabled:i??!1}}h.qZ.CSS,g.h9.FIRST_PARTY,g.tK.PIXEL,g.Rc.INHERIT},118034:(e,r,n)=>{n.d(r,{qg:()=>d,vX:()=>g,xF:()=>m});var i=n(821910),a=n(553716),o=n(1469),s=n(479296),l=n(13517),c=n(743794);async function d(e,r,n){let o={fonts:{},images:{}},s=new Map,l=null,d=e();for(let u=0;u<20&&(function(e,r){let n=e=>{if(!e)return;let{children:i,fillSrc:a,textStyle:o}=e.renderMetaData;if(o&&(p(r,o.style),o.ranges.forEach(e=>p(r,e.style))),a&&!r.images.hasOwnProperty(a)&&(r.images[a]={hasLoaded:!1}),i)for(let e of(0,c.MI)(i))n(e)};n(e)}(d.rootNode,o),(Object.values(o.fonts).some(({hasLoaded:e})=>!e)||Object.values(o.images).some(({hasLoaded:e})=>!e))&&await h(o,s,r,n),l=d,d=e(),!(0,i.c2)(l?.syncedState,d.syncedState));u++)19===u&&(0,a.x1)("resources","Loading reconciliation resources reached max iterations");return{imgInfoMap:s,vRoot:d}}async function u(e,r,n){try{let i=await m(e,n),a=r.createImage(i).hash,{width:o,height:s}=(await Promise.all([g(i)]))[0];return{hash:a,width:o,height:s}}catch(e){r.logWarning("Unable to load image. See the warning below for more info."),r.logWarning(e)}return null}let m=(0,s.n)(async(e,r)=>{if(function(e){try{let r=new URL(e);return"http:"===r.protocol||"https:"===r.protocol}catch(e){return!1}}(e)){if(!(0,l.pT)(e,r))throw Error(`Image URL ${e} does not satisfy the allowedDomains specified in the manifest.json`);e=(0,o.p)(e)}let n=await fetch(e);if(!n.ok)throw Error(`Unable to fetch image. Response status: ${n.status}`);return new Uint8Array(await n.arrayBuffer())});function p(e,r){let{fontName:n}=r;if(!n)return;let i=`${n.family} ${n.style}`;e.fonts.hasOwnProperty(i)||(e.fonts[i]={fontName:n,hasLoaded:!1})}async function h(e,r,n,i){let a=async e=>{let a=await u(e,n,i);a&&r.set(e,a)},o=Object.values(e.fonts).filter(({hasLoaded:e})=>!e).map(async e=>{await n.loadFontAsync(e.fontName),e.hasLoaded=!0}),s=Object.entries(e.images).filter(([,{hasLoaded:e}])=>!e).map(async([e,r])=>{await a(e),r.hasLoaded=!0});await Promise.all([...o,...s])}let _=e=>{let r="";return[].slice.call(new Uint8Array(e)).forEach(e=>r+=String.fromCharCode(e)),window.btoa(r)};function g(e){return new Promise(r=>{let n=new Image;n.onload=()=>{r({width:n.width,height:n.height})};let i=_(e);n.src="data:image;base64,"+i})}},501256:(e,r,n)=>{n.d(r,{F5:()=>o,Rs:()=>l,Z:()=>s,nx:()=>c});var i=n(824520),a=n(23001);function o(e,r){let n=!!(e.tokens&&e.tokens.length||e.inputValue&&e.inputValue.length);return e.tokens.some(e=>e.state===a.d.ERROR)&&(n=!1),e.inputValue&&e.inputValue.length&&r(e.inputValue).state===a.d.ERROR&&(n=!1),n}function s(e){let r=[];for(let n of e.tokens){let e="string"==typeof n.content?n.content:n.content.email;r.push(e.toLowerCase())}return e.inputValue&&r.push(e.inputValue.trim().toLowerCase()),r}function l(){return{inputValue:"",tokens:[],errorMessage:""}}function c(e=l(),r){return i.cL.matches(r)?l():i.hZ.matches(r)?{...r.payload}:i.Ox.matches(r)?{...e,tokens:e.tokens.concat(r.payload),inputValue:""}:i.pf.matches(r)?{...e,inputValue:r.payload}:i.g.matches(r)?{...e,errorMessage:r.payload}:e}},279145:(e,r,n)=>{n.d(r,{Nf:()=>b,Rn:()=>f,TY:()=>h,Yh:()=>E,c1:()=>y,fj:()=>m,jv:()=>_,pi:()=>p});var i=n(922827),a=n(966712),o=n(588169),s=n(563706),l=n(738269),c=n(293017),d=n(69961),u=n(279702);function m(e={...u.Gf},r){return l.Ts.matches(r)?u.Gf:(c.p5.matches(r)&&r.payload.appModelChanges&&-1===(e={...e,...r.payload.appModelChanges,isInitialized:!0}).currentSelectedGradientStop.index&&(e.currentSelectedGradientStop={index:0,type:i.vRS.COLOR}),e)}let p="fullscreen-menu-dropdown";function h(e){return e?.type===p}let _="quick-actions-dropdown",g=Object.create(null);function f(e){let r=g[e];return r||(r=g[e]=`actionEnabled__${e}`),r}function E(e,r){return!!e[f(r)]}function y(e,r){let n="\u{1F310}";switch(r){case"set-tool-bend":return s.Ay.mac?"\u2318":"Ctrl";case"stack-reorder-left":case"stack-counter-align-left":return"\u2190";case"stack-reorder-left-end":return"\u2325\u2190";case"stack-reorder-right":case"stack-counter-align-right":return"\u2192";case"stack-reorder-right-end":return"\u2325\u2192";case"stack-reorder-up":case"stack-counter-align-top":return"\u2191";case"stack-reorder-up-end":case"stack-reorder-down-end":return"\u2325\u2191";case"stack-reorder-down":case"stack-counter-align-bottom":return"\u2193";case"set-tool-default-desc-figjam":case"set-tool-default-desc-figma":return"V";case"set-tool-marker":return"M";case"set-tool-stamp":case"set-tool-sites-link":return"E";case"set-tool-type":return"T";case"set-tool-connector-elbowed":return"X";case"toggle-publish":return s.Ay.mac?"\u23252":"Alt+2";case"toggle-inline-preview":return"\u21E7Space";case"toggle-inline-html-preview":return"\u2325\u21E7Space";case"toggle-sidebar":if(d.nt.ui3.getValue())switch((0,o.v7)()){case i.aTn.US_QWERTY:case i.aTn.UNKNOWN:case i.aTn.DVORAK:return s.Ay.mac?"\u21E7\\":"Shift+\\"}break;case"set-tool-sites-responsive-set":return"W";case"set-tool-code-component":return"`";case"deselect-all":return"\u238B";case"multi-edit-text":return"Enter";case"page-next":if((0,a.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2193";break;case"page-previous":if((0,a.kc)().ce_mac_page_shortcuts&&s.Ay.mac)return n+"\u2191"}if(e[r]){let n=e[r];if(n&&n.length>=1)return n[0].text}return""}function b(e){return e&&e.currentPage?e.currentPage:"0:1"}},378762:(e,r,n)=>{n.d(r,{K3:()=>m,YI:()=>u,bp:()=>c,sp:()=>p,y2:()=>d});var i=n(140593),a=n(83783),o=n(738269),s=n(293017),l=n(418914);function c(e=Object.create(null),r){if(o.Ts.matches(r)||l.a.matches(r))return Object.create(null);if(s.p5.matches(r)&&r.payload.selection){let{add:n,remove:a,replace:o}=r.payload.selection;if((0,i.KF)(!((n||a)&&o),"We expect either an add or remove OR a replace."),o)return o;let s=Object.assign(Object.create(null),e,n);for(let e in a)delete s[e];return s}return e}function d(e,r,n){for(let i in r){let r=e.get(i);r&&(0,a.hV)(r,n)}}function u(e,r,n){for(let i in r){let r=e.get(i);r&&n(r)}}function m(e,r){return!!e[r]}function p(e,r,n){return!!function(e,r,n){if(r[n])return e.get(n)||null;let i=null;return(0,a.Si)(e,n,e=>{if(!i&&r[e.guid]&&(i=e),i)return"stop"}),i}(e,r,n)}},272917:(e,r,n)=>{n.d(r,{A:()=>s});var i=n(980820),a=n(875458),o=n(576144);function s(e={},r){if(a.D.matches(r)){let n={...e};for(let i of r.payload)n[i.file_key]={...e[i.file_key],...i};return n}return e}(0,i.nF)(async(e,{fileKey:r})=>{let n=e.getState(),i=n.currentUserOrgId,s=n.currentTeamId;if(r in n.recentCustomTemplates||!i&&!s)return;let l=await o.q.getRecents({fileKeys:r,...i?{orgId:i}:s?{teamId:s}:{}});l&&l.data.meta.templates.length>0&&e.dispatch(a.D([l.data.meta.templates[0]]))})},750486:(e,r,n)=>{n.d(r,{pw:()=>u,q5:()=>d,y2:()=>m});var i=n(286640),a=n(738269),o=n(712303);let s={[o.P.VIEW_MODE]:"view-bar-view-mode-option",[o.P.SORT_MODE]:"view-bar-sort-options"};function l(e){let r=i.x4&&i.x4.getItem(e)||"{}";try{return JSON.parse(r)}catch(e){return{}}}function c(e,r){if(i.x4)try{let n=JSON.stringify(r);i.x4.setItem(e,n)}catch(e){}return r}function d(e={},r){if(a.Qv.matches(r))return l(s[o.P.VIEW_MODE]);if(a.uV.matches(r)){let n={...e,[r.payload.viewId]:r.payload.viewMode};return c(s[o.P.VIEW_MODE],n)}return e}function u(e={},r){if(a.Qv.matches(r))return l(s[o.P.SORT_MODE]);if(a.ZR.matches(r)){let n={...e,[r.payload.viewId]:r.payload.sortMode};return c(s[o.P.SORT_MODE],n)}return e}function m(e,r,n){return r[e]??n}},166748:(e,r,n)=>{var i=n(547807),a=n(27087),o=n(594469);new class{constructor(){this.ColorPaletteSchemaValidator=(0,i.YV)("ColorPaletteSchemaValidator",o.kfm.sinatra(),null)}createColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.post("/api/color_palettes",i.td.toAPIParameters(e)))}updateColorPalette(e){return this.ColorPaletteSchemaValidator.validate(async({xr:r})=>await r.put(`/api/color_palettes/${e.uuid}`,i.td.toAPIParameters(e)))}async deleteColorPalette(e){await a.Ay.del(`/api/color_palettes/${e}`)}setUserColorPaletteOverrideForFile(e,r){return a.Ay.post(`/api/files/${e}/color_palette`,i.td.toAPIParameters({colorPaletteUuid:r}))}async setTeamDefaultPalette(e,r){await a.Ay.post(`/api/teams/${e}/default_color_palette`,i.td.toAPIParameters({colorPaletteUuid:r}))}async clearTeamDefaultPalette(e){await a.Ay.del(`/api/teams/${e}/default_color_palette`)}}},767518:(e,r,n)=>{n.d(r,{U:()=>o});var i=n(547807),a=(e=>(e.VIEW_OR_PENDING="view_or_pending",e.VIEW_PROTOTYPE_OR_PENDING="view_prototype_or_pending",e))(a||{});let o=new class{constructor(){this.ContactsSchemaValidator=(0,i.vh)(),this.AtMentionsSchemaValidator=(0,i.vh)(),this.searchAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",i.td.toAPIParameters(e)))),this.getAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.AtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/at_mentions",i.td.toAPIParameters(e)))),this.ShareModalSchemaValidator=(0,i.vh)(),this.searchShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",i.td.toAPIParameters(e))),this.getShareModalContacts=e=>this.ShareModalSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/share",i.td.toAPIParameters(e))),this.FeedAtMentionsSchemaValidator=(0,i.vh)(),this.getFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",i.td.toAPIParameters(e)))),this.searchFeedAtMentions=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedAtMentionsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_at_mentions",i.td.toAPIParameters(e)))),this.FaceStampsMentionSchemaValidator=(0,i.vh)(),this.searchFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",i.td.toAPIParameters(e)))),this.getRecentFaceStamps=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FaceStampsMentionSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/face_stamps",i.td.toAPIParameters(e)))),this.FeedPostCreatorsSchemaValidator=(0,i.vh)(),this.getFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",i.td.toAPIParameters(e)))),this.searchFeedPostCreators=e=>(e.includeHiResAvatars||delete e.includeHiResAvatars,this.FeedPostCreatorsSchemaValidator.validate(({xr:r})=>r.get("/api/contacts/feed_post_creators",i.td.toAPIParameters(e))))}getContacts(e){return this.ContactsSchemaValidator.validate(async({xr:r})=>await r.get("/api/contacts",i.td.toAPIParameters(e)))}}},988771:(e,r,n)=>{n.d(r,{Y:()=>o});var i=n(547807),a=n(27087);let o=new class{constructor(){this.GenerateImageTokenSchemaValidator=(0,i.vh)()}getGenerateImageToken(e){return this.GenerateImageTokenSchemaValidator.validate(async({xr:r})=>await r.get(`/api/feed_posts/generate_image_token/${e.fileKey}`,i.td.toAPIParameters({org_id:e.orgId,token_version:e.tokenVersion})))}markFeedViewed(e){a.Ay.post(`/api/feed_posts/${e.publicUuid}/mark_viewed`)}vote(e){a.Ay.post(`/api/feed_posts/${e.publicUuid}/vote`,{vote_option:e.voteOption})}}},877627:(e,r,n)=>{n.d(r,{If:()=>s});var i=n(547807),a=n(330654);let o=a.object({save_location:a.string(),folder_name:a.string().optional(),org_id:a.string().optional()}),s=(0,i.YV)("ClaimTryFileSchemaValidator",o,null,!0);new class{claimTryFile(e){return s.validate(async({xr:r})=>await r.put(`/api/file/claim/${e.fileKey}`))}}},640209:(e,r,n)=>{n.d(r,{Gh:()=>_});var i=n(374228),a=n(38329),o=n(966712),s=n(547807),l=n(27087),c=n(330654),d=n(642481),u=n(69961),m=n(707465);let p=c.object({userPromptRaw:c.string(),jsx:c.string().optional(),theme:c.record(c.any()).optional(),trace:c.any().optional(),layoutJsx:c.string().optional(),v3Components:c.record(c.string()).optional(),userPrompt:c.string().optional(),userPromptFull:c.string().optional(),systemPrompt:c.string().optional()}),h=c.object({prompt_version:c.string().optional(),eval_results:c.array(p)});c.union([c.object({status:c.literal("pending")}),c.object({status:c.literal("failed")}),h.extend({status:c.literal("success")})]);let _=new class{constructor(){this.FirstDraftPublishStatusSchemaValidator=(0,s.vh)(),this.FirstDraftAllKitsSchemaValidator=(0,s.vh)(),this.FirstDraftMatchGroupSchemaValidator=(0,s.vh)(),this.FirstDraftMatchPresetModesSchemaValidator=(0,s.vh)(),this.FirstDraftPublishLocalKitSchemaValidator=(0,s.vh)(),this.FirstDraftGenerateThemeV5SchemaValidator=(0,s.vh)(),this.FirstDraftAllEvalSetsSchemaValidator=(0,s.vh)(),this.FirstDraftRunEvalsSchemaValidator=(0,s.vh)(),this.FirstDraftEvalStatusSchemaValidator=(0,s.vh)(),this.FirstDraftGetRetrievedExamplesSchemaValidator=(0,s.vh)()}buildHeaders(){let e={...l.Ay.defaults.headers};return u.nt.aiFeaturesUseBedrockLlama.getValue()&&(e[i.H1.CHOSEN_LLM_PROVIDER]="amazon-bedrock"),e}postFirstDraftPublishStatus({productComponentKeyToVersion:e,groupedComponentKeyToVersion:r,exampleKeyToVersion:n,variableSetKeyToVersion:i,publishType:s,kitKey:l}){let c=(0,m.U2)(a.D?.getState().selectedView);return this.FirstDraftPublishStatusSchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/kit_status",{product_components:e,grouped_components:r,examples:n,variable_sets:i,is_local:s===d.tf.LOCAL_GENERATION,kit_key:l,type_info_version:(0,o.kc)().first_draft_direct_gen?d.Rd:d.Q6,theme_info_version:d.$5,file_key:c},{headers:this.buildHeaders()}))}getFirstDraftAllKits(){let e=(0,m.U2)(a.D?.getState().selectedView),r=a.D?.getState().currentUserOrgId,n=a.D?.getState().currentTeamId,i={file_key:e};return(0,o.kc)().first_draft_show_direct_gen_kits&&(i={...i,org_id:r,team_id:n}),this.FirstDraftAllKitsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_kits",s.td.toAPIParameters(i),{headers:this.buildHeaders()}))}getFirstDraftMatchGroup(e){let r=(0,m.U2)(a.D?.getState().selectedView);return this.FirstDraftMatchGroupSchemaValidator.validate(async({xr:n})=>await n.get("/api/first_draft/match_group",s.td.toAPIParameters({file_key:r,...e}),{headers:this.buildHeaders()}))}postFirstDraftMatchPresetModes(e){let r=(0,m.U2)(a.D?.getState().selectedView);return this.FirstDraftMatchPresetModesSchemaValidator.validate(async({xr:n})=>await n.post("/api/first_draft/match_preset_modes",{kit_key:e.kit_key,is_local:e.is_local,user_prompt:e.user_prompt,file_key:r},{headers:this.buildHeaders()}))}postFirstDraftPublishLocalKit({fileKey:e,publishMetadata:r}){return this.FirstDraftPublishLocalKitSchemaValidator.validate(async({xr:n})=>await n.post(`/api/first_draft/publish_local_kit/${e}`,{publish_metadata:r,file_key:e},{headers:this.buildHeaders()}))}postFirstDraftGenerateThemeV5({userPrompt:e,isLocal:r,kitKey:n}){let i=(0,m.U2)(a.D?.getState().selectedView);return this.FirstDraftGenerateThemeV5SchemaValidator.validate(async({xr:a})=>await a.post("/api/first_draft/generate_theme",{user_prompt:e,is_local:r,kit_key:n,file_key:i},{headers:this.buildHeaders()}))}getFirstDraftAllEvalSets(){return this.FirstDraftAllEvalSetsSchemaValidator.validate(async({xr:e})=>await e.get("/api/first_draft/all_eval_sets",null,{headers:this.buildHeaders()}))}postFirstDraftRunEvals({model:e="gpt-4-turbo-2024-04-09",selectedEval:r,isLocal:n,kitKey:i,evalPrompts:a,promptVersion:o}){let s={model:e,is_local:n,kit_key:i,prompt_version:o};return a?s.eval_prompts=a:s.eval_set_id=r,this.FirstDraftRunEvalsSchemaValidator.validate(async({xr:e})=>await e.post("/api/first_draft/run_evals",s,{headers:this.buildHeaders()}))}getFirstDraftsEvalStatus({s3Key:e}){return this.FirstDraftEvalStatusSchemaValidator.validate(async({xr:r})=>await r.post("/api/first_draft/eval_status",{s3_key:e},{headers:this.buildHeaders()}))}getFirstDraftRetrievedExamples({kitKey:e,isLocal:r,prompt:n}){return this.FirstDraftGetRetrievedExamplesSchemaValidator.validate(async({xr:i})=>await i.post("/api/first_draft/get_retrieved_examples",{kit_key:e,is_local:r,prompt:n},{headers:this.buildHeaders()}))}}},301400:(e,r,n)=>{n.d(r,{H:()=>a});var i=n(547807);let a=new class{constructor(){this.TemplatesSchemaValidator=(0,i.vh)(),this.StartingPointsTemplatesSchemaValidator=(0,i.vh)(),this.VersionsSchemaValidator=(0,i.vh)(),this.ProfileSchemaValidator=(0,i.vh)(),this.LibrariesSchemaValidator=(0,i.vh)(),this.PublishHubFileSchemaValidator=(0,i.vh)(),this.UpdateHubFileSchemeValidator=(0,i.vh)(),this.HubFileMultiImageUploadSchemaValidator=(0,i.vh)()}getTemplates(e){return this.TemplatesSchemaValidator.validate(async({xr:r})=>await r.get("/api/hub_files/templates",{type:e.type}))}getStartingPointsTemplates(){return this.StartingPointsTemplatesSchemaValidator.validate(async({xr:e})=>await e.get("/api/hub_files/templates",{type:"starting_points"}))}getVersions(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/${e.id}/versions`))}getProfile(e){return this.ProfileSchemaValidator.validate(async({xr:r})=>await r.get(`/api/hub_files/profile/${e.profileId}`))}getLibraries(e){return this.LibrariesSchemaValidator.validate(async({xr:r})=>await r.get("/api/hub_files/libraries",{library_ids:e.libraryIds.join(",")}))}likeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.post(`/api/hub_files/${e.id}/like`))}unlikeHubFile(e){return this.VersionsSchemaValidator.validate(async({xr:r})=>await r.del(`/api/hub_files/${e.id}/like`))}publishHubFile(e){return this.PublishHubFileSchemaValidator.validate(({xr:r})=>r.post("/api/hub_files",e))}updateHubFile(e,r){return this.UpdateHubFileSchemeValidator.validate(({xr:n})=>n.put(`/api/hub_files/${e}`,r))}setupMultiImageUploadForHubFile(e){return this.HubFileMultiImageUploadSchemaValidator.validate(({xr:r})=>r.post("/api/hub_files/upload",e))}}},679892:(e,r,n)=>{n.d(r,{Eh:()=>v});var i,a=n(547807),o=n(27087),s=n(330654),l=n(304769),c=n(540019),d=n(942506),u=n(963810),m=n(566971),p=n(66037),h=n(36816),_=n(851363);(e=>{e.isOrgInvite=function(e){return e.type===p.Wd.ORG_INVITE},e.isOrgUser=function(e){return e.type===p.Wd.ORG_USER},e.isIdpUser=function(e){return e.type===p.Wd.IDP_USER}})(i||(i={}));let g=p.Ru.pick({id:!0,user:!0,type:!0}),f=s.discriminatedUnion("type",[p.WU,d.S,m.n]),E=s.object({users:s.array(s.union([f,g])).optional(),cursor:s.ignore(),designEditorCutoff:s.ignore().optional(),whiteboardEditorCutoff:s.ignore().optional(),devModeEditorCutoff:s.ignore().optional(),totalUserCount:s.number()}),y=_.kE.pick({id:!0,name:!0,img_url:!0}),b=h.wF.pick({id:!0,team_id:!0,user:!0}).extend({recommended_seat_type:l.cD.nullable()}),v=new class{constructor(){this.IdpUsersSchemaValidator=(0,a.vh)(),this.LicenseGroupsSchemaValidator=(0,a.vh)(),this.BillingDataSchemaValidator=(0,a.YV)("BillingDataSchemaValidator",u.pd.nullable(),null),this.TeamsSchemaValidator=(0,a.vh)(),this.TeamSchemaValidator=(0,a.vh)(),this.EligibleUpgradesFigjamSchemaValidator=(0,a.vh)(),this.OrgNameSchemaValidator=(0,a.vh)(),this.DomainsSchemaValidator=(0,a.vh)(),this.AdminsSchemaValidator=(0,a.YV)("AdminsSchemaValidator",e=>e.array(p.WU),null,!1),this.OrgUsersPaginatedSchemaValidator=(0,a.YV)("OrgUsersPaginatedSchemaValidator",E,null,!1),this.OrgUsersPaginatedSchemaValidatorPassthrough=(0,a.vh)(),this.UserSchemaValidator=(0,a.YV)("UserSchemaValidator",p.WU,null,!1),this.OauthConnectionsSchemaValidator=(0,a.vh)(),this.ShowVatGstSchemaValidator=(0,a.vh)(),this.LicenseGroupsMembersCountsSchemaValidator=(0,a.vh)(),this.WorkspaceTeamsCountsSchemaValidator=(0,a.vh)(),this.OrgUsersCountSchemaValidator=(0,a.vh)(),this.OrgUsersFilterCountsSchemaValidator=(0,a.vh)(),this.OrgTeamsFilterCountsSchemaValidator=(0,a.vh)(),this.OrgAdminsSchemaValidator=(0,a.vh)(),this.OrgAdminsQuery=c.M4.Query({fetch:async({orgId:e})=>(await this.getOrgAdmins({orgId:e})).data.meta}),this.OrgTeamsCountSchemaValidator=(0,a.vh)(),this.SetDomainCaptureSchemaValidator=(0,a.vh)(),this.EligibleUpgradesSchemaValidator=(0,a.YV)("EligibleUpgradesSchemaValidator",e=>e.object({eligible_teams:e.array(y),eligible_team_users:e.array(b)}),null,!1)}getIdpUsers(e){return this.IdpUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/idp_users`))}getLicenseGroups(e){return this.LicenseGroupsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/license_groups`))}getBillingData(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.get(`/api/orgs/${e.orgId}/billing_data`);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}updateOrgPaymentMethod(e){return this.BillingDataSchemaValidator.validate(async({xr:r})=>{let n=await r.put(`/api/orgs/${e.orgId}/billing_data`,e.paymentMethod);return n.data.meta?n:{...n,data:{...n.data,meta:null}}})}changeShippingAddress(e){return o.Ay.put(`/api/orgs/${e.orgId}`,{shipping_address:e.shippingAddress})}getTeams(e){return this.TeamsSchemaValidator.validate(async({xr:r})=>{let{orgId:n,...i}=e;return await r.get(`/api/orgs/${e.orgId}/teams`,a.td.toAPIParameters(i))})}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/teams/${e.teamId}`))}getEligibleUpgradesFigjam(){return this.EligibleUpgradesFigjamSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrades_figjam"))}getOrgName(e){return this.OrgNameSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_name`))}getDomains(e){return this.DomainsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.currentOrgId}/domains`))}addDomainUsers(e){return o.Ay.post(`/api/orgs/${e.currentOrgId}/add_domain_users`,{user_ids:e.userIds})}getAdmins(e){return this.AdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/admins`,a.td.toAPIParameters({include_license_admins:e.includeLicenseAdmins})))}getOrgUsersPaginatedV2(e){let{orgId:r,after:n,minimalFields:i,pageSize:o,sort:s,filter:l,...c}=e;return this.OrgUsersPaginatedSchemaValidatorPassthrough.validate(async({xr:e})=>await e.get(`/api/v2/orgs/${r}/org_users`,a.td.toAPIParameters({...c,...l||{},...s||{},minimalFields:i||void 0,pageSize:o||void 0,after:n?JSON.stringify(n):void 0})))}getUser(e){return this.UserSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/user/${e.userId}`))}getOauthConnections(e){return this.OauthConnectionsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/oauth_connections`))}getShowVatGst(e){return this.ShowVatGstSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/show_vat_gst`))}getLicenseGroupsMembersCounts(e){return this.LicenseGroupsMembersCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/license_groups/members/counts`))}getWorkspaceTeamsCounts(e){return this.WorkspaceTeamsCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/workspaces/teams/counts`))}getOrgUsersCount(e){return this.OrgUsersCountSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/count`))}getOrgUsersFilterCounts(e){return""===e.searchQuery&&delete e.searchQuery,this.OrgUsersFilterCountsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_users/filter_counts`,a.td.toAPIParameters({searchQuery:e.searchQuery,product:e.product,licenseGroupId:e.licenseGroupId,workspaceId:e.workspaceId,permission:e.permission,role:e.role,seatType:e.seatType})))}getOrgTeamsFilterCounts(e){let{orgId:r,searchQuery:n,orgAccess:i,teamsWithoutOwners:a,teamsMemberOf:o,workspaceId:s,sortBy:l,sortOrder:c}=e;return this.OrgTeamsFilterCountsSchemaValidator.validate(async({xr:e})=>{let d={search_query:n,org_access:i||void 0,teams_without_owners:a?String(a):void 0,teams_member_of:void 0!==o?JSON.stringify(o):void 0,workspace_id:s||void 0,sort_by:l,order_by:c};return await e.get(`/api/orgs/${r}/team_counts`,d)})}getOrgAdmins(e){return this.OrgAdminsSchemaValidator.validate(async({xr:r})=>await r.get(`/api/orgs/${e.orgId}/org_admins`))}apiAutogenControls(e){let{orgId:r,autogen_password_controls:n}=e;return o.Ay.put(`/api/orgs/${r}`,{autogen_password_controls:n})}delWorkspaces(e){return o.Ay.del(`/api/orgs/${e.orgId}/workspaces`,{workspace_ids:e.workspaceIds})}validateTrial(e){return o.Ay.post(`/api/orgs/${e.orgId}/validate_trial`)}selfAssignWorkspace(e){return o.Ay.post(`/api/orgs/${e.orgId}/self_assign_workspace`,{workspace_id:e.workspaceId})}postDevModeOptInTermsAccepted(e){return o.Ay.post(`/api/orgs/${e.orgId}/dev_mode_terms_accepted`)}putToggleSlidesDisabled(e){return o.Ay.put(`/api/orgs/${e.orgId}/toggle_slides_disabled`,{slides_disabled:e.slidesDisabled})}updateAiDataSharing(e){return o.Ay.put(`/api/orgs/${e.orgId}/ai_data_sharing`,{enabled:e.enabled})}getOrgTeamsCount(e){return this.OrgTeamsCountSchemaValidator.validate(({xr:r})=>r.get(`/api/orgs/${e.orgId}/teams_count`))}setDomainCapture(e){return this.SetDomainCaptureSchemaValidator.validate(({xr:r})=>r.put(`/api/orgs/${e.org_id}/domain_capture`,{enable:!0}))}getEligibleUpgrades(){return this.EligibleUpgradesSchemaValidator.validate(async({xr:e})=>await e.get("/api/orgs/eligible_upgrade_data"))}}},802257:(e,r,n)=>{n.d(r,{s:()=>o});var i=n(547807),a=n(27087);let o=new class{updateOrgPreferences(e,r){let{preferences:n,...i}=r,o={preferences:n};return e.bigma_enabled?(o.auto_run_plugin_id=i.auto_run_plugin_id,o.auto_run_enabled=i.auto_run_enabled,o.codegen_enabled=i.codegen_enabled,o.pinned_plugins_enabled=i.pinned_plugins_enabled):!1===i.pinned_plugins_enabled&&(o.pinned_plugins_enabled=!1),a.Ay.post(`/api/plugin_preferences/org/${e.id}`,o)}updateUserAutoRunPluginId(e,r){return a.Ay.put("/api/plugin_preferences/user",i.td.toAPIParameters({autoRunBehavior:r,autoRunPluginId:e}))}}},357142:(e,r,n)=>{n.d(r,{a:()=>g});var i=n(268853),a=n(776621),o=n(547807),s=n(27087),l=n(330654),c=n(709495),d=n(675665),u=n(835476),m=n(540019),p=n(376485),h=(e=>(e.HOMEPAGE="homepage",e.CATEGORY="category",e))(h||{});let _=l.object({resource:u.Q3.optional(),private_plugin:l.ignore(p.Lz).optional()}),g=new class{constructor(){this.ResourceWithContentIDSchemaValidator=(0,o.YV)("ResourceWithContentIDSchemaValidator",_,"cmty_rdp_resource_platform",!0),this.CommunityResourcesSchemaValidator=(0,o.Rq)("CommunityResourcesSchemaValidator",u.Y9,"cmty_feed_resource_platform",!0),this.ResourcesPaginatedQuery=m.M4.PaginatedQuery({fetch:async(e,{pageParam:r})=>{try{let n=await this.CommunityResourcesSchemaValidator.validate(async({xr:n})=>{let i=o.td.toAPIParameters({sort_by:(0,c.H)(),...e,resourceType:e.resourceType?e.resourceType.join(","):"",tags:e.tags?e.tags.join(","):"",cursor:r});return await n.getPaginated("/api/resources",i)});return{data:n.data.meta,nextPage:n.data.pagination.nextPage,prevPage:n.data.pagination.prevPage}}catch(e){throw(0,a.$D)(i.e.COMMUNITY,e),e}}})}getResourceWithContentID(e){return this.ResourceWithContentIDSchemaValidator.validate(async({xr:r})=>await r.get(`/api/resources/${d.S[e.resourceType]}/${e.contentId}`))}likeResource(e){return s.Ay.post(`/api/resource/${e.resourceId}/like`)}unlikeResource(e){return s.Ay.del(`/api/resource/${e.resourceId}/like`)}saveResource(e){return s.Ay.post(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}unsaveResource(e){return s.Ay.del(`/api/resource/${e.resource.id}/save`,{profile_id:e.profileId,org_id:e.orgId})}}},344950:(e,r,n)=>{n.d(r,{G:()=>a});var i=n(547807);let a=new class{constructor(){this.FileUsersSchemaValidator=(0,i.vh)(),this.TeamSchemaValidator=(0,i.vh)(),this.RolesSchemaValidator=(0,i.vh)()}getFileUsers(e){return this.FileUsersSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/file_users/${e.fileKey}`))}getTeam(e){return this.TeamSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/team/${e.teamId}`))}getRoles(e){return this.RolesSchemaValidator.validate(async({xr:r})=>await r.get(`/api/roles/${e.resourceType}/${e.resourceId}`))}}},403442:(e,r,n)=>{n.d(r,{B:()=>o,H:()=>s});var i=n(547807),a=n(36816),o=(e=>(e.DEV_MODE_BETA_SUGGESTED_UPGRADES="dev_mode_beta_suggested_upgrades",e.MEMBERS_TAB="members_tab",e))(o||{});let s=new class{constructor(){this.UpdateTeamUsersSchemaValidator=(0,i.YV)("UpdateTeamUsersSchemaValidator",a.wF.array(),null),this.DevModeNudgesExpEntryValidator=(0,i.vh)()}updateTeamUsers(e){return this.UpdateTeamUsersSchemaValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/team_user_batch`,e))}declineDevModeSuggestedUpgrades(e){return i._5.validate(async({xr:r})=>await r.del(`/api/teams/${e.team_id}/team_users/dev_mode_suggested_upgrades`,e))}dismissDevModeSuggestedUpgrades(e){return i._5.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/dismiss_dev_mode_suggested_upgrades`))}logDevModeNudgesExperimentEntry(e){return this.DevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.put(`/api/teams/${e.team_id}/log_dev_mode_nudges_exp_entry`,e))}fetchDevModeNudgesExperimentEntry(e){return this.DevModeNudgesExpEntryValidator.validate(async({xr:r})=>await r.get(`/api/teams/${e.teamId}/fetch_dev_mode_nudges_exp_entry`))}}},576144:(e,r,n)=>{n.d(r,{q:()=>o});var i=n(547807),a=n(27087);n(540019).M4.Query({fetch:async e=>await o.getNumTemplatesByTeam({teamId:e.teamId,editorType:e.editorType}).then(e=>e.data.meta.total)});let o=new class{constructor(){this.RecentsSchemaValidator=(0,i.vh)(),this.TeamBrowseFromSize10SchemaValidator=(0,i.vh)(),this.SearchPaginatedSchemaValidator=(0,i.vh)(),this.TeamTemplateLimitValidator=(0,i.vh)(),this.TeamTemplateCountValidator=(0,i.vh)()}getRecents(e){return this.RecentsSchemaValidator.validate(async({xr:r})=>await r.get("/api/templates",{org_id:e.orgId,team_id:e.teamId,file_keys:e.fileKeys}))}getTeamBrowsePaginated(e){return this.TeamBrowseFromSize10SchemaValidator.validate(async({xr:r})=>await r.get(`/api/templates/${e.orgId}/team/${e.teamId}/browse`,i.td.toAPIParameters({from:e.from,size:e.size,templateType:e.templateType})))}getSearchPaginated(e){let{orgId:r,...n}=e;return this.SearchPaginatedSchemaValidator.validate(({xr:r})=>r.get(`/api/templates/${e.orgId}/search`,i.td.toAPIParameters(n)))}getFilteredTeamTemplates(e){let{orgId:r,...n}=e;return a.Ay.post(`/api/templates/${r}/browse`,n)}getTeamTemplateLimitReached(e){return this.TeamTemplateLimitValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/limits`,i.td.toAPIParameters({editorType:e.editorType})))}getNumTemplatesByTeam(e){return this.TeamTemplateCountValidator.validate(({xr:r})=>r.get(`/api/templates/${e.teamId}/count`,i.td.toAPIParameters({editorType:e.editorType})))}}},369351:(e,r,n)=>{n.d(r,{sr:()=>s});var i=n(517333),a=n(547807),o=n(27087);let s=new class{constructor(){this.UpdatedNotificationSchemaValidator=(0,a.vh)(),this.CommunityServerDrivenSchemaValidator=(0,a.vh)(),this.ServerDrivenPlanSchemaValidator=(0,a.vh)(),this.WebTokenRegistrationSchemaValidator=(0,a.vh)()}updateNotification(e){return this.UpdatedNotificationSchemaValidator.validate(({xr:r})=>r.put("/api/user_notifications",a.td.toAPIParameters({id:e.notification_id,currentView:e.currentView,medium:i.S8?"desktop_bell":"web",appVersion:"1",clientType:"web",["resolve"===e.notification_action?"resolvedAt":"rejectedAt"]:"true"},["currentView"])))}getCommunityServerDriven(e){return this.CommunityServerDrivenSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/community/server_driven",a.td.toAPIParameters({currentView:e.currentView,clientType:"web",appVersion:"1"},["currentView"])))}getServerDrivenPlan(e){return this.ServerDrivenPlanSchemaValidator.validate(async({xr:r})=>await r.get("/api/user_notifications/server_driven/plan",a.td.toAPIParameters({...e,appVersion:"1",clientType:"web"},["currentView"])))}recordNotificationClicked(e){return o.Ay.post("/api/user_notification/clicked",{id:e.id,currentView:e.currentView,medium:e.medium})}enrollUserInStatusChange(e){return o.Ay.post(`/api/user_notifications/status_change_signup/${e.fileKey}`)}updateStatusChangePreferences(e){return o.Ay.post(`/api/user_notifications/status_change_optin/${e.fileKey}`,{opt_in:e.optIn})}sendFirebaseToken(e){return this.WebTokenRegistrationSchemaValidator.validate(({xr:r})=>r.post("/api/web_token_registration",a.td.toAPIParameters({firebaseToken:e.firebaseToken},[])))}}},713318:(e,r,n)=>{n(411855),n(516398),n(126760)},842164:(e,r,n)=>{n.d(r,{J4:()=>a,vF:()=>i});var i=(e=>(e[e.INCLUDE=0]="INCLUDE",e[e.CHILDREN=1]="CHILDREN",e[e.OMIT=2]="OMIT",e))(i||{});function a(e){return e&&0===e.inclusion?e:void 0}},423163:(e,r,n)=>{n.d(r,{L:()=>v});var i=n(411855),a=n(188507),o=n(147755),s=n(862350),l=n(951792),c=n(288006),d=n(974563),u=n(256296),m=n(121913),p=n(154254),h=n(939863),_=n(809840),g=n(809831),f=n(529906),E=n(99506),y=n(237870),b=n(922358);let v=(0,y.Ju)(function({open:e,onClose:r}){let[n,y]=(0,f.y)(),v=(0,o.X)(),I=(0,a.d4)(e=>e.screenreader.errorType),T=(0,g.lg)(),S=(0,i.useCallback)(()=>{T===E._Y.WHITEBOARD&&b.F2.focusCustomCanvasFocusElement(),r()},[r,T]),w=s.hS({open:e,onClose:S});return i.createElement(l.bL,{manager:w,width:"md"},i.createElement(c.vo,null,i.createElement(c.Y9,null,i.createElement(c.hE,null,(0,h.tx)("fullscreen.accessibility_settings.dialog_title"))),i.createElement(c.nB,null,i.createElement("div",{className:p.cx.pb8.$},i.createElement(d.d,{disabled:"platform_error"===I,checked:n,onChange:(e,{source:r})=>{(0,m.f)(e?m.h.TOGGLE_DOM_ON_MENU:m.h.TOGGLE_DOM_OFF_MENU,{isMouseEvent:"mouse"===r}),y(e)},label:i.createElement(u.J,null,(0,h.tx)("fullscreen.accessibility_settings.enable_screenreader_label")),ref:v},"platform_error"===I?(0,h.t)("fullscreen.accessibility.platform_error"):(0,h.t)("fullscreen.accessibility_settings.enable_screenreader_description_figjam_beta"),"render_error"===I&&i.createElement("span",{role:"alert",className:p.cx.block.mt8.$},i.createElement(_.E,{color:"danger"},(0,h.tx)("fullscreen.accessibility.dom_error"))))))))},"ACCESSIBILITY_SETTINGS",y.ZU.YES)},726732:(e,r,n)=>{n.d(r,{N:()=>l,Y:()=>c});var i=n(966712),a=n(418956),o=n(977230);let s="showFigmentDebugger";function l(e,r){try{if(!(0,i.kc)().internal_only_debug_tools||!(0,i.kc)().figment_debugger||null==e)return;a.zl.set(o.a4,{requestJsons:e,networkState:r})}catch(e){console.error("[Figment Debugger] Error tracking request")}}function c(){var e;let r=function(){try{if(null==localStorage)return!1;let e=localStorage.getItem(s);return"true"===e}catch(e){return!1}}();e=!r,localStorage.setItem(s,e?"true":"false"),a.zl.set(o.eE,!r)}},819338:(e,r,n)=>{var i=n(411855);n(358145),n(611978),i.createContext(null)},928491:(e,r,n)=>{n.d(r,{az:()=>ey,pw:()=>X,Ro:()=>el,w7:()=>ed,CH:()=>eu,fZ:()=>Q,rE:()=>eb,z6:()=>ec,Sw:()=>W,Pq:()=>K});var i=n(411855),a=n(629019),o=n.n(a),s=n(864089),l=n(281381),c=n(163023),d=n(939863),u=n(809840),m=n(498606),p=n(80332);let h="avatar--avatar--fFibd",_="avatar--dim--UbqLc",g="avatar--avatarWithHandle--Z3934",f="avatar--avatarWithOutwardBorder--3JJ57",E="avatar--avatarWithInwardBorder--L469R",y="avatar--clickableAvatarWithHandle--d90vX";var b=n(161143),v=n(606692),I=n(103941),T=n(380410),S=n(774283),w=n(316216),A=n(241577),C=n(311790),N=n(426431),L=n(91025),O=n(855072),R=n(175827),P=n(670658),D=n(440877),k=n(241932),M=n(420959),F=n(592526),x=n(522313),U=n(562014),B=n(266042);let V=[b.A,v.A,I.A,T.A,S.A,w.A,A.A,C.A,N.A,L.A,O.A,R.A,P.A,D.A,k.A,M.A,F.A,x.A],G=["avatar--workspaceAvatarBlue--XbbpI","avatar--workspaceAvatarPurple--FOGSP","avatar--workspaceAvatarGreen--PWm5o","avatar--workspaceAvatarTeal--4j3FH"],H=[];for(let e=0;e<V.length*G.length;e+=1){let r=e%V.length,n=V[r],i=(e+Math.floor(e/V.length))%G.length,a=G[i];H.push({svgSrc:n,className:a})}function K(e){return e.startsWith("https://www.gravatar.com/avatar/")}function W(e){return e&&!K(e)?e:void 0}let $={CIRCLE:`${h} avatar--circle--ag36Q`,SQUARE:`${h} avatar--square--p4eL1`,ROUNDED_SQUARE:`${h} avatar--roundedSquare--cq522`};function Y(e){return"number"==typeof e?{imgSize:e,fallbackSize:e}:e}class z{constructor(e,r){this.lower=e,this.upper=r}contains(e){return e>=this.lower&&e<this.upper}}let j=new z(65,91),q=new z(97,123),Z=new z(48,58);class X extends i.Component{render(){let e={display:"flex",justifyContent:"center",color:this.props.tint||(0,p.Xx)(this.props.color),backgroundColor:this.props.color||void 0,opacity:this.props.opacity},r=this.props.enabled||!0,{size:n,fontSize:a}=this.props;n&&(e.width=`${n}px`,e.height=`${n}px`,e.lineHeight=`${n}px`,e.fontSize=`${a??n/2}px`);let s=$[this.props.shape||"CIRCLE"];return i.createElement("span",{"data-testid":this.props.dataTestId,style:e,className:o()(s,this.props.className||"",{[_]:!r,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),"aria-hidden":"true"},this.props.children)}}class J extends i.Component{render(){return i.createElement(X,{dataTestId:"initial-avatar",...this.props},this.props.initial)}}function Q(e){let r={};if(e.size&&e.svgSizeRatio){let n=e.size*e.svgSizeRatio;r.width=`${n}px`,r.height=`${n}px`}if(!e.removeCustomFill){let n=(0,p.Xx)(e.color);r.fill=n}return i.createElement(X,{...e},i.createElement("div",{style:r},i.createElement(c.B,{svg:e.svg,autosize:!0})))}class ee extends i.Component{render(){let{size:e}=this.props,r=e?`${e}px`:void 0,n=$[this.props.shape||"CIRCLE"],a=this.props.enabled||!0;return i.createElement(c.B,{className:`${n} ${this.props.className||""} ${a?"":_}`,style:this.props.style||{},svg:this.props.src,autosize:!0,width:r,height:r,dataTestId:"svg-avatar"})}}class et extends i.Component{constructor(e){super(e),this.state={loadError:!1}}render(){let e={},r=this.props.style||{};if(this.props.size){let n=this.state.loadError?Y(this.props.size)?.fallbackSize:Y(this.props.size)?.imgSize,i=`${n}px`;e.width=i,e.height=i,r.width=i,r.height=i}let n=this.props.enabled||!0,a=$[this.props.shape||"CIRCLE"],l=this.state.loadError||!this.props.imgUrl?this.props.children:i.createElement(s.oW,{"data-testid":"image-avatar",className:`${n?"":_}`,style:e,src:this.props.imgUrl,onError:()=>this.setState({loadError:!0}),alt:""});return i.createElement("div",{className:o()(a,this.props.className,{[_]:!n,[f]:"outward"===this.props.borderStyle,[E]:"inward"===this.props.borderStyle}),style:r},l)}}let er=[j,q,Z],en={colors:p.us,getInitial:e=>e?e[0]:null,defaultFallbackAvatarSvg:U.A},ei=["fallback_text","handle","name","email"],ea=(e,r=en)=>class extends i.Component{constructor(){super(...arguments),this.computeFallbackInitial=()=>{let e=ep((this.props.initializableEntityProperties?this.props.initializableEntityProperties:ei).map(e=>this.props.entity[e]));return e&&"string"==typeof e?r.getInitial(e):null},this.computeFallbackColor=()=>(0,p.$L)(this.props.entity.id,r.colors)}render(){let n=this.props.fallbackInitial||this.computeFallbackInitial(),a=this.computeFallbackColor()||null,o=this.props.entity.img_url||this.props.entity.imageURL||this.props.entity.imageUrl||this.props.entity.imgUrl||null;return i.createElement(e,{imgUrl:o,fallbackInitial:n,fallbackColor:this.props.defaultFallbackAvatarSvg&&!n?null:a,fallbackTintColor:this.props.defaultFallbackAvatarSvg?void 0:r.defaultFallbackTintColor,...this.props,defaultFallbackAvatarSvg:this.props.defaultFallbackAvatarSvg||r.defaultFallbackAvatarSvg})}};class eo extends i.Component{renderFallback(){let{size:e,fontSize:r,fallbackSvg:n,avatarSvg:a,svgSizeRatio:o}=this.props,s=Y(e)?.fallbackSize;if(a)return i.createElement(Q,{size:s,fontSize:r,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,svg:a,svgSizeRatio:o,opacity:this.props.opacity});if(n)return i.createElement(ee,{size:Y(e)?.fallbackSize,src:n,shape:this.props.shape});if(this.props.hideFallbackInitial)return i.createElement(X,{size:Y(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape});let l=this.props.fallbackInitial;return l?i.createElement(J,{size:Y(e)?.fallbackSize,fontSize:r,className:this.props.className,initial:l,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle}):this.props.defaultFallbackAvatarSvg?i.createElement(ee,{className:this.props.className,size:Y(e)?.fallbackSize,src:this.props.defaultFallbackAvatarSvg,style:{fill:this.props.fallbackTintColor||void 0,background:this.props.fallbackColor||void 0},enabled:this.props.enabled,shape:this.props.shape}):i.createElement(X,{size:Y(e)?.fallbackSize,fontSize:r,className:this.props.className,tint:this.props.fallbackTintColor,color:this.props.fallbackColor,enabled:this.props.enabled,shape:this.props.shape})}render(){return!this.props.imgUrl||K(this.props.imgUrl)?this.renderFallback():i.createElement(et,{size:this.props.size||null,imgUrl:this.props.imgUrl,className:`${this.props.className||""}`,enabled:this.props.enabled,shape:this.props.shape,borderStyle:this.props.borderStyle},this.renderFallback())}}eo.displayName="Avatar";let es=ea(eo,{...en,getInitial:e=>{let r=e.charCodeAt(0);return er.some(e=>e.contains(r))?e[0]:null}}),el=es;function ec({entity:e,size:r=40,shape:n="SQUARE"}){if(e.imgUrl)return i.createElement(es,{shape:n,entity:e,size:r});let a=(0,p.sC)(e?.id,H);return i.createElement(ee,{src:a.svgSrc,size:r,shape:n,className:a.className})}let ed=ea(eo,{...en,defaultFallbackAvatarSvg:B.A,getInitial:e=>e.charCodeAt(0)===e.codePointAt(0)?e[0]:null});function eu(e){return i.createElement(ed,{shape:"SQUARE",...e})}class em extends i.Component{render(){let e=this.props.size||0,r=Math.round(e/4)+1,n=Math.round(r/5);return i.createElement("span",{className:"avatar--avatarBellWrapper--sd6MY",style:e?{width:`${e}px`,height:`${e}px`}:void 0},this.props.showBell&&i.createElement("div",{className:"avatar--bell--Lk6s9",style:e?{width:`${r}px`,height:`${r}px`,top:`-${n}px`,right:`-${n}px`}:void 0}),this.props.children)}}em.displayName="AvatarBellWrapper";let ep=(e=[],r="?")=>e.find(e=>e)||r,eh=(e,r)=>class extends i.Component{constructor(){super(...arguments),this.onClick=e=>{this.props.onClick&&this.props.onClick(e,this.props.entity)}}render(){let n=this.props["data-tooltip-proxy-element-id"]||`avatar_${this.props.entity.id}_tooltip_proxy`;return i.createElement("div",{className:`${g} ${this.props.onClick?y:""} ${this.props.enabled?"avatar--disabledDimAvatarWithHandle--5l6cM":""} ${this.props.className||""}`,onClick:this.props.onClick?this.onClick:void 0,"data-tooltip-proxy-element-id":n,"data-onboarding-key":this.props["data-onboarding-key"]},i.createElement("div",{id:n,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":this.props["data-tooltip"],"data-tooltip-offset-x":this.props["data-tooltip-offset-x"],"data-tooltip-offset-y":this.props["data-tooltip-offset-y"],"data-tooltip-max-width":this.props["data-tooltip-max-width"]},e&&i.createElement(e,{...this.props,className:void 0})),i.createElement(r,{...this.props}),this.props.children)}};var e_=(e=>(e.DEFAULT="default",e.HEADING_MEDIUM="heading_medium",e))(e_||{});let eg={default:void 0,heading_medium:"avatar--labelHeadingMedium--IeX2-"};class ef extends i.Component{render(){let{labelSize:e="default"}=this.props,r=eg[e],n=this.props.showTruncatedTextTooltip?i.createElement(u.E,{truncate:!0},this.props.text):i.createElement("span",{className:"avatar--handle--wlTXK"},this.props.text),a=this.props.showTruncatedTextTooltip?void 0:this.props.tooltipText??void 0;return i.createElement("div",{className:o()("avatar--info--vDGTn",r),title:a},i.createElement("div",{className:o()("avatar--handleRow--0K2-H",g,r,{[y]:this.props.onLabelClick}),onClick:this.props.onLabelClick},this.props.text.length>0&&n,this.props.showIsMe&&i.createElement("span",{className:o()("avatar--isMe--LeNkH",r)},(0,d.tx)("avatar.tooltip.you")),this.props.badge&&i.createElement(l.Ex,{...this.props.badge}),this.props.isScimUser&&i.createElement(l.Ex,{color:l.zE.DEFAULT,text:(0,d.t)("members_table.org_user_name_cell.scim_badge")})),this.props.email&&i.createElement("div",{className:this.props.onEmailClick?"avatar--emailHover--ekuTn":"",onClick:this.props.onEmailClick},i.createElement("div",{className:"avatar--email--G3FcZ"},this.props.email)))}}let eE=e=>class extends i.Component{render(){let r=[this.props.overrideHandle,this.props.entity.handle,this.props.entity.name];this.props.fallbackToEmail&&r.push(this.props.entity.email);let n=ep(r,this.props.defaultText),a=`${n}${this.props.includeUserEmailAddress?`
${this.props.entity.email}`:""}`,{onEmailClick:o,onLabelClick:s,...l}=this.props;return i.createElement(e,{text:n,email:this.props.includeUserEmailAddress?this.props.entity.email:null,tooltipText:this.props.showTooltip?a:null,onEmailClick:o,onLabelClick:s,...l})}},ey=eh(es,eE(ef)),eb=eh(eu,eE(ef))},266431:(e,r,n)=>{n.d(r,{Id:()=>h});var i=n(411855),a=n(135876),o=n(163023),s=n(939863),l=n(742809),c=n(731078),d=n(928491),u=n(608613),m=n(813620);let p=(e,r={})=>function(n){let d=null==n.size?120:n.size,p=()=>{n.dispatch((0,l.X)({entity:n.entity,entityType:n.entityType,shape:r.editorShape?r.editorShape:void 0}))},h={width:`${d}px`,minWidth:`${d}px`,height:`${d}px`,minHeight:`${d}px`},_=n.avatarEditorState&&n.avatarEditorState.status===c.hv.UPLOADING&&n.entity===n.avatarEditorState.entity,g=r.className?r.className:u.n1,f=i.createElement(a.x,{isLoading:_,className:`${u.Lq} ${g}`},()=>i.createElement(e,{size:d,...n})),E=i.createElement("div",{className:`${g} ${n.overlayClass||""}`},i.createElement(o.B,{className:`${u.Lw} ${u.Kk} ${g} ${n.overlayClass||""}`,svg:n.icon||m.A}));return r.withButton?i.createElement("div",{className:`${u.iE} ${u.n1}`,style:h},f,E,i.createElement("div",{className:u.hc,onClick:p},(0,s.tx)("avatar_editor.edit"))):i.createElement("div",{className:`${u.iQ} ${g}`,onClick:p,style:h},f,E)};p(d.Ro);let h=p(d.Ro,{withButton:!0});p(d.CH,{editorShape:"SQUARE",className:u.Ew}),p(d.z6,{editorShape:"SQUARE",className:u.Ew})},407844:(e,r,n)=>{n.d(r,{_:()=>o}),n(411855);var i=n(922827);n(629019),n(560945),n(179479),n(799569),n(946689),n(163023),n(939863);var a=n(100197);function o(){return(0,a.ut)(i.Ez5?.uiState().editorBannerHeight,0)}n(239671),n(164795),n(896572)},164795:(e,r,n)=>{var i=(e=>(e[e.TestThemeBanner=0]="TestThemeBanner",e[e.TestWarningBanner=1]="TestWarningBanner",e[e.TestOOMBanner=2]="TestOOMBanner",e[e.TestInfoBanner=3]="TestInfoBanner",e[e.StarterTeamOverFreeLimitAndLocked=4]="StarterTeamOverFreeLimitAndLocked",e[e.EduGracePeriodAccessRestricted=5]="EduGracePeriodAccessRestricted",e[e.EduGracePeriodShowReminder=6]="EduGracePeriodShowReminder",e[e.OrphanedOrgDraftsFile=7]="OrphanedOrgDraftsFile",e[e.TeamAbandonedDraftsFile=8]="TeamAbandonedDraftsFile",e[e.PersonalProjectDeprecatedFile=9]="PersonalProjectDeprecatedFile",e[e.ProTeamPastDue=10]="ProTeamPastDue",e[e.ProTeamChargeFailed=11]="ProTeamChargeFailed",e[e.ProTeamNoMonthlySubEditorCountExceeded=12]="ProTeamNoMonthlySubEditorCountExceeded",e[e.ProTrialsExpiryBanner=13]="ProTrialsExpiryBanner",e[e.MultiplayerSessionUpgrade=14]="MultiplayerSessionUpgrade",e[e.AdminI18nLocalWarnBanner=15]="AdminI18nLocalWarnBanner",e[e.FigJamTryDraftsBanner=16]="FigJamTryDraftsBanner",e[e.FigJamTryClaimBanner=17]="FigJamTryClaimBanner",e[e.CommunityResourceCTANuxBanner=18]="CommunityResourceCTANuxBanner",e[e.communityM10nApprovalBanner=19]="communityM10nApprovalBanner",e[e.communityM10nFinishSetupBanner=20]="communityM10nFinishSetupBanner",e[e.communityM10nAdtlInfoNeededBanner=21]="communityM10nAdtlInfoNeededBanner",e[e.communityResourceInReviewBanner=22]="communityResourceInReviewBanner",e[e.CommunityResourceCreatorBanner=23]="CommunityResourceCreatorBanner",e[e.ExternalContentControlBanner=24]="ExternalContentControlBanner",e[e.MemoryWarningBanner=25]="MemoryWarningBanner",e[e.MemoryErrorBanner=26]="MemoryErrorBanner",e[e.MemorySafeBanner=27]="MemorySafeBanner",e[e.AdminUserDisposableDomainWarningBanner=28]="AdminUserDisposableDomainWarningBanner",e[e.FileIsTeamTemplate=29]="FileIsTeamTemplate",e[e.DowntimeBanner=30]="DowntimeBanner",e[e.FreemiumPreviewBanner=31]="FreemiumPreviewBanner",e[e.FileCreationFailureBanner=32]="FileCreationFailureBanner",e[e.DevModePaywallBanner=33]="DevModePaywallBanner",e[e.DevModeInTrialBanner=34]="DevModeInTrialBanner",e[e.devModeStarterTrialBanner=35]="devModeStarterTrialBanner",e[e.DesktopDownloadBanner=36]="DesktopDownloadBanner",e[e.BrowserDeprecationBanner=37]="BrowserDeprecationBanner",e[e.FragmentTextSearchQualityBanner=38]="FragmentTextSearchQualityBanner",e[e.Gen1DesignViewerBanner=39]="Gen1DesignViewerBanner",e[e.DesktopDeprecationBanner=40]="DesktopDeprecationBanner",e[e.UI3LoggedOutCta=41]="UI3LoggedOutCta",e[e.SeatBillingTermsReminder=42]="SeatBillingTermsReminder",e[e.CooperAlphaBanner=43]="CooperAlphaBanner",e))(i||{}),a=(e=>(e.INFO="info",e.WARN="warn",e.SUCCESS="success",e.ERROR="error",e.WARN_SOFT="warn_soft",e.CONFIDENTIALITY="confidentiality",e.BRAND_STRONG="brand_strong",e.DANGER="danger",e.INFO_SOFT="info_soft",e))(a||{}),o=(e=>(e.STRUCTURED="structured",e.CUSTOM="custom",e))(o||{})},610732:(e,r,n)=>{n.d(r,{FK:()=>g});var i,a,o=n(411855),s=n(629019),l=n.n(s),c=n(563706),d=n(642822),u=n(939863),m=n(99506),p=n(928491),h=n(371336),_=n(607778);function g(e){let r={backgroundClip:c.Ay.safari?"padding-box":""};return e.backgroundColor&&(r.backgroundColor=e.backgroundColor),o.createElement("div",{className:l()(_.nN,e.className,e.removeBorder&&h.ev),onClick:e=>{e.preventDefault()},style:r},o.createElement("div",{className:e.customRatioClassName??h.ll}),o.createElement("div",{className:h.nK},e.children))}o.memo(function(e){return o.createElement("div",{onClick:e.onClick,onContextMenu:e.onContextMenu,className:l()(_.Wg,e.containerStyle)},o.createElement("div",null,e.image),o.createElement("div",{className:e.bottomRowStyle??_.yE},e.bottomRow))}),(e=>{e.Center=function(e){return o.createElement("div",{className:_.pn},e.children)},e.Cover=function(e){return o.createElement("div",{className:_.bh},e.children)},e.BottomLeft=function(e){return o.createElement("div",{className:_.wb},e.children)},e.BottomRowRight=function(e){return o.createElement("div",{className:_.vw},e.children)}})(i||(i={})),(e=>{function r(e){let r=e.publishers&&e.publishers.length>0&&e.publishers[0];return o.createElement("div",{className:`${_.QQ} ${e.className}`},r&&o.createElement("div",{className:_.$7},o.createElement(p.Ro,{entity:r,size:32,className:_.ez})),o.createElement("div",{className:_.Hw},o.createElement("div",{className:e.textClassName||_.oY},e.name)))}e.NameMetadata=function(e){return o.createElement(r,{name:e.name,className:e.className,textClassName:e.textClassName})},e.NameAndFileIconMetadata=function(e){let r=o.useMemo(()=>{switch(e.viewerMode){case m.y4.WHITEBOARD:return d.y1.WHITEBOARD;case m.y4.SLIDE_TEMPLATE:return d.y1.SLIDES;case m.y4.CANVAS:case m.y4.LIBRARY:return d.y1.DESIGN;case m.y4.PROTOTYPE:return d.y1.PROTOTYPE;default:return null}},[e.viewerMode]);return o.createElement("div",{className:`${_.QQ} ${e.className}`},o.createElement("div",{className:_.Hw},o.createElement("div",{className:e.textClassName||_.oY},e.name)),r&&o.createElement(d.oS,{type:r,size:d.LE.SMALL,className:_.kR}))},e.AvatarAndNameMetadata=r,e.FullMetadata=function(e){if(!e.publishers||0===e.publishers.length)return null;let r=e.publishers.length-1,n=e.publishers.length>1?(0,u.t)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:r}):"";return o.createElement("div",{className:_.QQ,onClick:e.onClick},o.createElement("div",{className:_.$7},o.createElement(p.Ro,{entity:e.publishers[0],size:32,className:_.ez})),o.createElement("div",{className:_.Hw},o.createElement("div",{className:_.ac},e.name),o.createElement("div",{className:e.hoverText?_.Jk:_.Rb},(0,u.t)("community.cards.by")," ",e.publishers[0].name," ",n),e.hoverText&&o.createElement("div",{className:_.yG},e.hoverText)))}})(a||(a={}))},877655:(e,r,n)=>{n.d(r,{bX:()=>A});var i=n(411855),a=n(188507),o=n(519788),s=n(902237),l=n(256296),c=n(776250),d=n(966712),u=n(860601),m=n(27087),p=n(799569),h=n(946689),_=n(893281),g=n(154254),f=n(939863),E=n(466636),y=n(709595),b=n(662275),v=n(178787),I=n(237870),T=n(158950),S=n(474742),w=n(373494);let A=(0,I.Ju)(function(e){let{name:r,user:n,monetizedResource:u}=e,[p,h]=i.useState(!1),[y,I]=i.useState(null),[w,A]=i.useState(""),L=(0,a.wA)(),O=()=>{L((0,b.to)({type:C,data:{user:n}}))},R=()=>{L((0,b.to)({type:N,data:{user:n}}))};return i.createElement(S.Rw,{size:"small",content:i.createElement("div",{className:g.cx.flexColumn.colorText.$},(0,f.tx)("community.buyer.we_re_sorry_to_hear_resource_name_didnt_work_out",{resourceName:i.createElement("span",{className:g.cx.fontBold.$},r)}),(0,d.kc)().cmty_refund_modal_radio_input_migration?i.createElement("form",{className:g.cx.my16.$},i.createElement(o.b,{value:y??void 0,onChange:e=>{I(e)},legend:i.createElement(s.q,null,(0,f.tx)("community.buyer.refund_reason"))},Object.values(v.bG).map(e=>i.createElement(o.c,{key:e,value:e,label:i.createElement(l.J,null,(0,E.vi)(e))}))),y===v.bG.OTHER?i.createElement("div",{className:g.cx.mt8.$},i.createElement(T.v,{value:w,onChange:e=>A(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null):i.createElement("div",{className:g.cx.my16.$},i.createElement(_.z,{value:y,onChange:e=>{I(e)}},Object.values(v.bG).map(e=>i.createElement(_.Z,{className:g.cx.font11.selectNone.$,key:e,value:e},(0,E.vi)(e)))),y===v.bG.OTHER?i.createElement("div",{className:g.cx.mt8.$},i.createElement(T.v,{value:w,onChange:e=>A(e.target.value),placeholder:(0,f.t)("community.buyer.refund_reason.add_additional_details"),maxLength:v.JV})):null)),onConfirm:()=>{h(!0),(0,c.sx)("Request Refund Modal Confirm",{refundReason:y,refundOtherReasonText:w,monetizedResourceMetadataId:u.id}),m.Ay.post(`/api/community/buyer/${u.id}/refund`,{refund_reason:y,refund_other_reason_text:w}).then(()=>{h(!1),L(b.Ce()),O()}).catch(e=>{h(!1),L(b.Ce()),R()})},hideOnConfirm:!1,isLoading:p,confirmationTitle:(0,f.tx)("community.buyer.need_a_refund"),disableConfirm:!y,confirmText:(0,f.tx)("general.confirm"),cancelText:(0,f.tx)("general.close"),autoFocusCta:!1,popStack:!0})},"CommunityRequestRefundModal"),C=(0,I.Ju)(function(e){let{user:r}=e,n=(0,a.wA)();return i.createElement(S.Nb,{size:"small",hide:u.lQ,title:(0,f.t)("community.buyer.refund_requested")},i.createElement(p.s_,{dispatch:n}),(0,f.tx)("community.buyer.keep_an_eye_out",{here:i.createElement(h.CY,{onClick:()=>{(0,y.c9)(r),n(b.Ce())},trusted:!0},(0,f.tx)("community.buyer.here"))}),i.createElement("div",{className:w.v0},i.createElement(h.tM,{onClick:()=>n(b.Ce())},(0,f.tx)("general.close"))))},"CommunityRefundRequestedSuccessModal"),N=(0,I.Ju)(function(e){let{user:r}=e;return i.createElement(S.Rw,{size:"small",confirmationTitle:(0,f.tx)("community.buyer.unable_to_process_refund"),content:i.createElement("span",{className:g.cx.colorText.$},(0,f.tx)("community.buyer.error_requesting_refund_please_contact_support")),confirmText:(0,f.tx)("community.buyer.get_support"),onConfirm:()=>(0,y.oW)(r),cancelText:(0,f.tx)("general.close"),autoFocusCta:!1})},"CommunityErrorRequestingRefundModal")},814138:(e,r,n)=>{n.d(r,{A:()=>H});var i=n(411855),a=n(188507),o=n(140593),s=n(821910),l=n(629019),c=n.n(l),d=n(776250),u=n(946689),m=n(449124),p=n(355819),h=n(154254),_=n(939863),g=n(175290),f=n(553015),E=n(809840),y=n(662275),b=n(226055),v=n(99506),I=n(540019),T=n(450515),S=n(744410),w=n(34762),A=n(113094),C=n(721732),N=n(814367),L=n(424396),O=n(207776),R=n(132208);function P({text:e}){return i.createElement(E.E,{"data-testid":"extension-security-form-error",color:"danger"},e)}function D(e){let{canShowErrors:r}=(0,C.I)();return r&&(0,T.G6)(e)}function k(e){let{onChange:r,question:n}=e,{prompt:a,value:o,placeholder:s}=n,l=D(n);return i.createElement("div",{className:h.cx.flex.flexColumn.gap8.$},a&&i.createElement("div",null,function(e){let r=e.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!r||!r.index)return e;let[n,a,o]=r;return i.createElement("span",{"data-testid":"parsed-text-content"},e.slice(0,r.index),i.createElement("a",{href:o,target:"_blank",className:h.cx.colorTextBrand.cursorPointer.$},a),e.slice(r.index+n.length))}(a)),i.createElement(u.ks,{className:h.cx.wFull.$,value:o??"",onChange:r,placeholder:s}),l&&i.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_text")}))}function M(e){let{question:r,dispatch:n,path:a}=e,{prompt:o,options:s}=r,l=D(r);return i.createElement("div",{className:h.cx.flex.flexColumn.gap16.$},i.createElement(E.E,{fontWeight:"semi-bold"},o),i.createElement(i.Fragment,null,s.map((e,r)=>{let o=`path-${a.join("-")}-option-input-${r}`;return i.createElement("div",{className:h.cx.flex.flexColumn.$,key:`option-${r}`},i.createElement("div",{className:h.cx.flex.gap8.$},i.createElement("input",{type:"radio",id:o,checked:e.isSelected??!1,onChange:()=>{n({type:"UPDATE_SINGLE_SELECT_QUESTION",questionIndex:a[0],optionIndex:r})},className:h.cx.cursorPointer.$}),i.createElement("label",{htmlFor:o,className:h.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&i.createElement("div",{className:h.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>i.createElement(x,{key:`sub-question-${o}`,question:e,dispatch:n,path:a.concat(r,o)}))))})),l&&i.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_single_select")}))}function F(e){let{dispatch:r,path:n,question:a}=e,{prompt:o,options:s}=a,l=D(a);return i.createElement("div",{className:h.cx.flex.flexColumn.gap16.$},i.createElement(E.E,{fontWeight:"semi-bold"},o),i.createElement(i.Fragment,null,s.map((e,a)=>{let o=`path-${n.join("-")}-option-input-${a}`;return i.createElement("div",{className:h.cx.flex.flexColumn.$,key:`option-${a}`},i.createElement("div",{className:h.cx.flex.gap8.$},i.createElement("input",{type:"checkbox",checked:e.isSelected??!1,onChange:()=>{r({type:"UPDATE_MULTI_SELECT_QUESTION",questionIndex:n[0],optionIndex:a})},id:o,className:h.cx.cursorPointer.$}),i.createElement("label",{htmlFor:o,className:h.cx.cursorPointer.$},e.label)),e.subQuestions&&e.isSelected&&i.createElement("div",{className:h.cx.ml20.flex.flexColumn.gap8.pt8.$},e.subQuestions.map((e,o)=>i.createElement(x,{key:`sub-question-${o}`,question:e,dispatch:r,path:n.concat(a,o)}))))})),l&&i.createElement(P,{text:(0,_.t)("community.publishing.data_security.incomplete_multi_select")}))}function x(e){let{question:r,dispatch:n,path:a}=e;switch(r.inputType){case"single_select":return i.createElement(M,{question:r,dispatch:n,path:a});case"multi_select":return i.createElement(F,{question:r,dispatch:n,path:a});case"text":return i.createElement(k,{question:r,onChange:e=>{1===a.length?n({type:"UPDATE_TEXT_QUESTION",questionIndex:a[0],value:e.currentTarget.value}):3===a.length&&n({type:"UPDATE_TEXT_SUBQUESTION",path:[a[0],a[1],a[2]],value:e.currentTarget.value})},path:a});default:return null}}function U(e){let{extensionType:r,securityForm:n,dispatch:a}=e,o="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_description"):(0,_.tx)("community.publishing.security_form.widget_description"),s="plugin"===r?(0,_.tx)("community.publishing.security_form.plugin_sharing_description"):(0,_.tx)("community.publishing.security_form.widget_sharing_description");return i.createElement("div",{className:h.cx.p16.flex.flexColumn.$,"data-testid":"extension-security-form"},i.createElement("div",{className:h.cx.pb16.$},i.createElement(E.E,{fontSize:14,fontWeight:"medium"},(0,_.tx)("community.publishing.security_form.header"))),i.createElement("div",{className:h.cx.pb16.$},o),i.createElement("div",{className:h.cx.pb16.$},s,i.createElement("a",{href:"plugin"===r?"https://help.figma.com/hc/articles/360042293394":"https://help.figma.com/hc/articles/4410337103639",target:"_blank",className:h.cx.colorTextBrand.cursorPointer.$},(0,_.tx)("community.publishing.security_form.learn_more"))),i.createElement("div",{className:h.cx.flex.flexColumn.gap32.$},n.questions.map((e,r)=>i.createElement(x,{key:`question-${r}`,question:e,dispatch:a,path:[r]}))))}function B({onDiscard:e,onDone:r,securityFormFromDB:n,localSecurityFormResponse:o,onOptOut:l,currentFormStatus:u,extensionId:m}){let p=i.useMemo(()=>!(0,s.c2)(o,n),[o,n]),{canShowErrors:E,numberOfErrors:v,optedOutOfSecurityForm:I,extensionType:S}=(0,C.I)(),w=(0,T.qu)(n),N=(0,a.wA)(),O=(0,b.GS)();return i.createElement("div",{className:c()(h.cx.flex.gap8.p16.justifyBetween.alignCenter.absolute.bottom0.left0.right0.bSolid.bt1.colorBorder.colorBg.$,{[L._]:O})},!w&&i.createElement("button",{className:h.cx.bgTransparent.noWrap.if(I,h.cx.colorTextSecondary,h.cx.colorTextBrand.cursorPointer).$,onClick:()=>{N((0,y.to)({type:A.i,data:{onConfirm:l,status:u,extensionType:S},showModalsBeneath:!0})),(0,d.sx)("Data Security Plugin Form",{action:"Remove security details",extensionType:S,extensionId:m})},disabled:I},(0,_.tx)("community.publishing.security_form.opt_out_button")),i.createElement(g.Y,{width:"fill-parent",horizontalAlignItems:"end"},i.createElement(f.$,{variant:"secondary",onClick:()=>{e(),(0,d.sx)("Data Security Plugin Form",{action:"Discard changes",extensionType:S,extensionId:m})},disabled:!p},(0,_.tx)("community.publishing.security_form.discard_changes")),i.createElement(f.$,{variant:"primary",onClick:r,disabled:E&&v>0},(0,_.tx)("general.done"))))}function V({currentFormStatus:e}){let r,n,a;if(!e)return null;switch(e){case v.bQ.APPROVED:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.approved.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.approved.description")))),n=O.A,a="success";break;case v.bQ.PENDING:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.pending.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.pending.description")))),n=R.A,a="brand";break;case v.bQ.REJECTED:r=i.createElement(i.Fragment,null,i.createElement("div",null,i.createElement(E.E,{fontWeight:"semi-bold"},(0,_.tx)("community.publishing.security_banner.rejected.title"))),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description"))),i.createElement("div",null),i.createElement("div",null,i.createElement(E.E,null,(0,_.tx)("community.publishing.security_banner.rejected.description.check_email")))),n=R.A,a="brand";break;default:(0,o.xb)(e)}return i.createElement(m.z,{iconSrc:n,variant:a,orientation:"vertical"},r)}function G({localSecurityFormResponse:e,securityFormFromDB:r,setSecurityFormResponse:n,extensionType:a,onDone:o,currentFormStatus:s,existingSecurityFormResponse:l,extensionId:c}){let d={questions:r.questions,version:r.version},[u,m]=(0,i.useReducer)(N.V,e??d),{setCanShowErrors:h,setOptedOutOfSecurityForm:_,optedOutOfSecurityForm:g}=(0,C.I)();return i.useEffect(()=>{n(u),(0,T.qu)(u)||_(!1)},[n,u,_]),i.createElement(i.Fragment,null,i.createElement(p.P,{className:L.j,maxHeight:800},i.createElement(V,{currentFormStatus:s}),i.createElement(U,{securityForm:u,dispatch:m,extensionType:a})),i.createElement(B,{onOptOut:()=>{m({type:"RESET_FORM"}),_(!0)},onDiscard:()=>{m({type:"DISCARD_CHANGES",originalState:d}),h(!1)},onDone:()=>{if((0,T.wT)(e,l)&&!g){h(!0);return}o()},securityFormFromDB:r,localSecurityFormResponse:e,currentFormStatus:s,extensionId:c}))}function H(e){let{version:r,setSecurityFormResponse:n,extensionType:a,localSecurityFormResponse:o,existingSecurityFormResponse:s,onDone:l,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionId:u}=e,[m]=(0,I.IT)(K(r),{enabled:!s}),p=(0,b.GS)(),_=(s?{version:String(s.formVersion),questions:s.responses}:null)??("loaded"===m.status?m.data:null);return _?i.createElement(C.B,{localSecurityFormResponse:o,existingSecurityFormResponse:s,optedOutOfSecurityForm:c,setOptedOutOfSecurityForm:d,extensionType:a},i.createElement(G,{localSecurityFormResponse:o,securityFormFromDB:_,setSecurityFormResponse:n,extensionType:a,onDone:l,currentFormStatus:s?.status??null,existingSecurityFormResponse:s,extensionId:u})):p?i.createElement("div",{className:h.cx.p8.$},i.createElement(w.R,null)):null}let K=I.M4.Query({fetch:async e=>await S.is.getBlankSecurityForm(e)})},761939:(e,r,n)=>{n.d(r,{IW:()=>R,fV:()=>L,fp:()=>O});var i=n(411855),a=n(188507),o=n(540193),s=n(498750),l=n(915440),c=n(391388),d=n(452441),u=n(493323),m=n(32863),p=n(163023),h=n(939863),_=n(837324),g=n(445092),f=n(782501),E=n(477782),y=n(594901),b=n(279453),v=n(967409),I=n(508567),T=n(775481),S=n(805443),w=n(639685),A=n(630834),C=(e=>(e.FILES="FILES",e.PLUGINS="PLUGINS",e.WIDGETS="WIDGETS",e))(C||{});function N(e){return i.createElement("div",{className:S.bx},i.createElement("div",{className:S.Uz},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_title"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_title"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_title")),i.createElement("div",{className:S.SL},"FILES"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.files_subtitle"):"PLUGINS"===e.tab?(0,h.t)("community.universal_posting_modal.resource_empty.plugins_subtitle"):(0,h.t)("community.universal_posting_modal.resource_empty.widgets_subtitle")))}function L(e){var r,n,s,l;let d=(0,a.d4)(e=>e.currentUserOrgId),u=(n=(0,o.ql)(d||null),s=i.useMemo(()=>{let e=n.data||[];return c.Qw.loaded(e.filter(e=>e.parent_org_id===d))},[n,d]),l=e.editorTypes,r=i.useMemo(()=>{if(!l||0===l.length)return s;let e=s.data||[];return c.Qw.loaded(e.filter(e=>null!=e.editor_type&&l.includes(e.editor_type)))},[s,l]),i.useMemo(()=>"loaded"!==r.status?[]:r.data.map(e=>({type:E.nb.FILE,file:e})),[r]));return 0===u.length?i.createElement(N,{tab:"FILES"}):i.createElement("div",{className:S.Vg,onClick:e.deselectActiveFile},u.map(r=>{if(r.type!==E.nb.FILE)return null;let n=r.file;if(e.filterFn&&!e.filterFn(n))return null;let a=n.hub_file&&(0,_.r7)(n.hub_file);return i.createElement(P,{key:n.key,file:n,disabled:a,setActiveFile:e.setActiveFile,activeFileKey:e.activeFileKey})}))}function O({activeSearchQuery:e,activeFileKey:r,setActiveFile:n,deselectActiveFile:o,searchResults:s,editorTypes:c}){let d=(0,y.FC)(),m=(0,a.d4)(e=>e.authedProfilesById),p=(0,a.d4)(e=>e.figFileDuplicatedFromHubFile),g=i.useMemo(()=>(s||[]).map(({model:{key:e}})=>({key:e})),[s]),E=(0,l.p)(b.dDF,g),v=i.useMemo(()=>E.map(({result:e})=>e.transform(e=>!!e.file?.hasPermission)),[E]);if(!s)return i.createElement("div",{className:S.g4},i.createElement(u.kt,{size:"small"}));let I=s.filter((e,r)=>e.model.editor_type&&(void 0===c||c?.includes(e.model.editor_type))&&!(0,f.JJ)(e.model,v[r].unwrapOr(!1),{...d,authedProfilesById:m,figFileDuplicatedFromHubFile:p},null));return 0===I.length?i.createElement("div",{className:S.bx},i.createElement("div",{className:S.Uz},(0,h.tx)("community.universal_posting_modal.recent_editable_files_search.no_files_matching",{searchQuery:i.createElement("span",{className:S.ZF},e)}))):i.createElement("div",{className:S.Vg,onClick:o},I.map(e=>{let a=e.model,o=a.hub_file&&(0,_.r7)(a.hub_file);return i.createElement(P,{key:a.key,file:a,disabled:o,setActiveFile:n,activeFileKey:r})}))}function R(e){let{query:r,setQuery:n,setSearchResults:o,hasCloseButton:l=!0}=e,c=(0,a.wA)(),u=i.useCallback(()=>{r&&(c(g.Dy({entryPoint:"community:universal_posting"})),o(null),I.$W.getFigFiles({query:r,desc:!0,sort:v.Lk.RELEVANCY,orgId:void 0,isGlobal:!0}).then(({data:{meta:e}})=>{o(e.results)}))},[r,c,o]),_=i.useCallback(()=>{n("")},[n]),f=i.useCallback(e=>(e.keyCode===s.Uz.ENTER&&u(),!0),[u]),E=i.useCallback(e=>{n(e)},[n]);i.useEffect(()=>{let e=setTimeout(u,300);return()=>clearTimeout(e)},[r,u]);let y=i.useRef(null),{searchInputRef:b,onMouseDown:T,onMouseUp:C,onBlur:N,onClearSearchClick:L,onSearchKeyDown:O,onSearchChange:R}=(0,m.ne)({...e,focusOnMount:!1,clearSearch:_,onChange:E,onSubmit:u,isKeyDownHandled:f},y);return i.createElement("div",{className:S.Tm},i.createElement(p.B,{className:S.qc,svg:w.A}),i.createElement(d.L,{ref:b,placeholder:e.placeholderText??(0,h.t)("community.universal_posting_modal.search_bar.placeholder"),className:S.Rt,value:r,onMouseDown:T,onMouseUp:C,onBlur:N,onChange:R,onKeyDown:O,spellCheck:!1}),!!r&&l&&i.createElement(p.B,{className:S.i3,svg:A.default,onClick:L}))}function P(e){let{file:r,disabled:n,setActiveFile:a,activeFileKey:o}=e;return i.createElement(T.GQ,{onClick:e=>{e.stopPropagation(),n||a(r)},file:r,subtitle:i.createElement(T.lJ,{file:r}),activeFileUsers:[],currentUser:null,isSelected:!n&&o===r.key,disabled:n,tooltipText:n?(0,h.t)("community.publishing.this_file_has_been_published_to_community_as_a_library"):void 0})}},580999:(e,r,n)=>{n.d(r,{Qi:()=>g,U6:()=>f});var i=n(411855),a=n(188507),o=n(737947),s=n(498750),l=n(417659),c=n(738269),d=n(707465),u=n(928491),m=n(721345);let p={underline:m.ah,noUnderline:m.HU};class h extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)||this.props.openInNewTab){o.Ay.redirect(this.props.hrefPath||"","_blank");return}let r=_(this.props);this.props.dispatch(c.$T(r))}}render(){let e={...this.props.publisher,img_url:this.props.publisher.img_urls["120_120"]},r=i.createElement(i.Fragment,null,this.props.showAvatar&&i.createElement("div",{className:this.props.avatarClassName||m.Du},i.createElement(u.Ro,{size:this.props.avatarSize||32,entity:e})),!this.props.hideName&&i.createElement("span",{className:this.props.childrenClassName||m.fh},this.props.publisher.name));return i.createElement("div",{className:`${this.props.className||""}`},this.props.disabled?i.createElement("span",{className:this.props.childrenClassName||m.oY},r):i.createElement("a",{href:new l.xn({profileHandle:this.props.publisher.profile_handle}).href,className:this.props.childrenClassName||this.props.authorLinkStyle,onClick:this.onClick},r))}}let _=e=>({view:"communityHub",subView:"handle",handle:e.publisher.profile_handle}),g=(0,a.Ng)((e,r)=>{let n=_(r);return{hrefPath:(0,d.Np)(e,n),authorLinkStyle:"communityHub"===e.selectedView.view&&"landing"===e.selectedView.subView?p.noUnderline:p.underline}})(h);function f(e){let r=(0,a.wA)(),n={view:"communityHub",subView:"handle",handle:e.profile.profile_handle},u=(0,a.d4)(e=>(0,d.Np)(e,n));return i.createElement("a",{href:new l.xn({profileHandle:e.profile.profile_handle}).href,className:m.M2,onClick:e=>{if(e.preventDefault(),e.stopPropagation(),(0,s.oJ)(e)){o.Ay.redirect(u||"","_blank");return}r(c.$T(n))}},e.children)}(0,a.Ng)((e,r)=>({hrefView:_(r),hrefPath:(0,d.Np)(e,_(r)),authorLinkStyle:p.underline}))(h)},517127:(e,r,n)=>{n.d(r,{T:()=>b});var i=n(411855),a=n(188507),o=n(776250),s=n(320063),l=n(860601),c=n(799569),d=n(946689),u=n(939863),m=n(662275),p=n(931828),h=n(335682),_=n(860178),g=n(237870),f=n(474742),E=n(673051),y=n(472286);let b=(0,g.Ju)(function({onAgree:e}){let r=(0,a.wA)(),n=(0,_.iZ)(),g=(0,h.q5)();!function(){let e=(0,_.iZ)(),r=(0,h.q5)();(0,s.h)(()=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_displayed",{userId:e?.id??void 0,fileTeamId:r?.teamId??void 0,fileParentOrgId:r?.parentOrgId??void 0,fileKey:r?.key,asyncModal:!1})})}();let b=i.useCallback(e=>{o.az.trackDefinedEvent("preset_libraries.apple_eula_clicked",{actionType:e,userId:n?.id??void 0,fileTeamId:g?.teamId??void 0,fileParentOrgId:g?.parentOrgId??void 0,fileKey:g?.key,asyncModal:!1})},[g,n]);return i.createElement(f.Nb,{hide:l.lQ,disableClickOutsideToHide:!0,className:y.kL},i.createElement("div",{className:y.wx},(0,u.tx)("community.eula.license_agreement_v2"),i.createElement(c.s_,{onClose:()=>b("x"),dispatch:r,customStyle:{right:"4px",top:"4px"}})),i.createElement("div",{className:y.IP},i.createElement("div",{className:y.rf},i.createElement("div",{className:y.r3},(0,u.tx)("community.eula.license_agreement_preamble")),i.createElement(E.N,null))),i.createElement("div",{className:y.qr},i.createElement(d.tM,{onClick:()=>{b("decline"),r(m.Lo())},className:y.lO},(0,u.tx)("community.eula.disagree")),i.createElement(d.vd,{onClick:()=>{e(),b("accept"),r(p.b({apple_eula_accepted:!0}))},className:y.lO},(0,u.tx)("community.eula.agree"))))},"APPLE_EULA_MODAL_TYPE",g.ZU.YES)},195907:(e,r,n)=>{n.d(r,{Pn:()=>u});var i=n(411855),a=n(838516),o=n(428322),s=n(939863),l=n(63666),c=n(15839),d=n(996887);let u="seen_community_comments_compose";function m({dismissModal:e}){let r=i.useRef(null),n=i.useCallback((0,a.s)(()=>{r.current&&(r.current.style.opacity="0")},0,!0),[r]),c=i.useCallback((0,a.s)(()=>{r.current&&(r.current.style.opacity="1")},450),[r]);i.useEffect(()=>(window.addEventListener("scroll",n,!1),window.addEventListener("scroll",c,!1),()=>{window.removeEventListener("scroll",n,!1),window.removeEventListener("scroll",c,!1)}),[n,c]);let u=i.useCallback(e=>{let n=r.current;n&&(e.isIntersecting?n.style.visibility="visible":n.style.visibility="hidden")},[r]);return i.createElement(l.NJ,{targetKey:"sort-state-dropdown",dismissModal:e,width:301,display:"hidden",containerRef:r,className:d.pO},i.createElement(o.a,{onIntersectionChange:u}),i.createElement("div",{className:d.Hj},(0,s.tx)("community.onboarding.see_more_of_what_you_love")),(0,s.tx)("community.onboarding.whether_you_want_to_focus_on_creators_you_follow_discover_new_files_and_plugins_or_find_out_what_s_trending_you_can_customize_your_feed_here"))}e=>i.createElement(m,{...e}),c.q3.SELF_CONTAINED},933464:(e,r,n)=>{var i,a,o,s=n(411855),l=n(109388),c=n(188507),d=n(196367),u=n(841368),m=n(629019),p=n.n(m);n(776250);var h=n(563706),_=n(563042),g=n(799569),f=n(268537),E=n(946689),y=n(395771),b=n(163023),v=n(46481),I=n(348425),T=n(736242),S=n(939863),w=n(872860),A=n(545941),C=n(71425),N=n(738269),L=n(662275);n(902139);var O=n(672517),R=n(756085),P=n(318812),D=n(4564),k=n(215822);n(555328);var M=n(498606),F=n(978527),x=n(298543),U=n(7959),B=n(33876),V=n(103567),G=n(632788),H=n(474742);n(574056);var K=n(350913),W=n(37637),$=n(162506),Y=n(769533),z=n(362679),j=n(13556),q=n(665150),Z=n(961803),X=n(331536),J=n(12747),Q=n(237494),ee=n(215877),et=n(551034),er=n(132623),en=n(247866),ei=n(583288);let ea=class e extends s.PureComponent{constructor(){super(...arguments),this.state={isMouseOver:!1,shouldShowErrorModal:!1},this.isWidget=!!this.props.plugin.manifest?.containsWidget,this.onPublish=()=>{this.props.onPublishClick&&this.props.onPublishClick(this.props.plugin.localFileId)},this.onDelete=()=>{this.props.dispatch(C.qR(this.props.plugin.localFileId))},this.onClick=()=>{this.props.onTileClick?this.props.onTileClick():this.onRevealLocally()},this.onRevealLocally=()=>{(0,D.M)().openExtensionDirectory(this.props.plugin.localFileId)},this.showError=()=>{this.setState({shouldShowErrorModal:!0})},this.hideError=()=>{this.setState({shouldShowErrorModal:!1})},this.tileDropdownType=this.isWidget?e.DEVELOPMENT_PLUGIN_DROPDOWN:e.DEVELOPMENT_WIDGET_DROPDOWN,this.onContextMenu=e=>{this.props.dispatch(N.j7({type:this.tileDropdownType,data:{type:"context",localFileId:this.props.plugin.localFileId,clientX:e.clientX,clientY:e.clientY}}))},this.shouldShowContextMenu=()=>this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"context"===this.props.dropdownShown.data.type,this.shouldShowPointingDropdown=()=>null!=this.props.dropdownShown&&this.props.dropdownShown.type===this.tileDropdownType&&this.props.dropdownShown.data.localFileId===this.props.plugin.localFileId&&"pointing"===this.props.dropdownShown.data.type,this.onDotsClick=()=>{this.props.dispatch(N.j7({type:this.tileDropdownType,data:{type:"pointing",localFileId:this.props.plugin.localFileId}}))},this.dotsIconRef=e=>{this.dotsIconEl=l.findDOMNode(e)},this.onMouseEnter=()=>{this.setState({isMouseOver:!0})},this.onMouseLeave=()=>{this.setState({isMouseOver:!1})}}render(){let e=s.createElement(s.Fragment,null,s.createElement(f.c$,{onClick:this.onPublish},(0,S.tx)("community.plugins.publish_new_version")),s.createElement(f.c$,{onClick:this.onRevealLocally},function(e){switch(e){case"plugins-menu-dev-create-new":return(0,S.t)("fullscreen.plugins_menu.new_plugin");case"widgets-menu-dev-create-new":return(0,S.t)("fullscreen.plugins_menu.new_widget");case"widgets-menu-dev-import-from-manifest":return(0,S.t)("fullscreen.plugins_menu.import_widget_from_manifest");case"plugins-menu-dev-import-from-manifest":return(0,S.t)("fullscreen.plugins_menu.import_plugin_from_manifest");case"plugins-menu-open-directory-mac":return(0,S.t)("fullscreen.plugins_menu.open_directory_mac");case"plugins-menu-open-directory-win":return(0,S.t)("fullscreen.plugins_menu.open_directory_win");case"plugins-menu-open-directory-vscode":return(0,S.t)("fullscreen.plugins_menu.open_directory_vscode");default:return""}}((0,k.YQ)())),s.createElement(f.wv,null),s.createElement(f.c$,{onClick:this.onDelete},(0,S.tx)("community.permissions_modal_publish_tab.footer.remove"))),{name:r,error:n}=this.props.plugin,i=this.isWidget?(0,S.t)("community.plugins.widget"):(0,S.t)("community.plugins.plugin");return s.createElement("div",{className:$.bp},s.createElement("div",{className:n?$.rS:$.el,onClick:n?this.showError:this.onClick,onContextMenu:this.onContextMenu,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},n?s.createElement("div",{className:$.yd},s.createElement(I.t,{svg:en.A})):this.isWidget?s.createElement("div",{className:$.im},this.props.isPublished?s.createElement("img",{className:$.K0,src:`/community/icon?resource_type=widget&resource_id=${this.props.plugin.plugin_id}`,alt:""}):s.createElement(I.t,{svg:Z.A})):s.createElement("div",{className:$.im},s.createElement(I.t,{svg:ee.A,fallbackSvg:et.A})),s.createElement("div",{className:$.In},s.createElement("div",{className:n?$.iH:$.YG},r,this.props.isPublished?s.createElement(I.t,{svg:q.A}):null),n&&this.state.isMouseOver?s.createElement(T.o,{className:$.cV,text:"Error: "+n.text}):s.createElement(y.R,{className:$.cV,text:this.props.plugin.localFilePath.replace("/manifest.json","")})),n&&s.createElement(b.B,{className:$.rs,svg:h.Ay.mac?X.A:J.A})),s.createElement(U.YW,{svg:z.A,fallbackSvg:j.A,className:p()($.q6,this.shouldShowPointingDropdown()?$.Yh:""),onClick:this.onDotsClick,ref:this.dotsIconRef,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,S.t)("community.plugins.options"),selected:this.shouldShowPointingDropdown()}),this.shouldShowContextMenu()&&s.createElement(f.ms,{className:$.Gm,style:{left:this.props.dropdownShown.data.clientX,top:this.props.dropdownShown.data.clientY}},e),this.shouldShowPointingDropdown()&&s.createElement(x.Cf,{className:$.Gm,minWidth:122,targetRect:this.dotsIconEl.getBoundingClientRect(),propagateCloseClick:!0},e),this.state.shouldShowErrorModal&&s.createElement(H.aF,{size:"small",title:(0,S.t)("community.plugins.plugin_or_widget_issue",{resourceType:i})},s.createElement(g.s_,{...this.props}),s.createElement("div",{className:$.hM},this.props.plugin.error?this.props.plugin.error.text:n?.text),s.createElement("div",{className:$.H1},s.createElement(E.$$,{onClick:this.hideError},(0,S.tx)("general.done")))))}};function eo(e){return s.createElement("div",{className:e.containerClassName||$.x$,onContextMenu:e.onOptionsClick,onClick:e.onClick||(e=>e.preventDefault())},s.createElement(W.li.IconAndBadgeContainer,{className:$.yq},s.createElement("div",{className:$.zr},e.pluginIcon),e.showEditorTypeIcon&&s.createElement(W.li.BadgeContainer,null,s.createElement(W.dn,{editorType:e.editorType,is16x16:!0}))),s.createElement("div",{className:$.Kz},s.createElement("div",{className:$.P8},s.createElement("div",{className:$.iZ},e.title),e.titleSuffix),s.createElement("div",{className:h.rr?$.uN:$.UB},"string"==typeof e.subTitle?(0,_.$J)(e.subTitle):e.subTitle)),s.createElement("div",{className:$.Hq},s.createElement(d.d,{ref:e.optionsIconRef,onClick:e.onOptionsClick,toggled:e.isSelected,htmlAttributes:{"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,S.t)("community.plugins.options")},"aria-label":(0,S.t)("community.plugins.options"),disabled:e.disabled},s.createElement(v.U,{svg:z.A,fallbackSvg:j.A},s.createElement(u.J,null)))))}ea.DEVELOPMENT_PLUGIN_DROPDOWN="DEVELOPMENT_PLUGIN_DROPDOWN",ea.DEVELOPMENT_WIDGET_DROPDOWN="DEVELOPMENT_WIDGET_DROPDOWN",(i||(i={})).Tile=function(e){let r=(0,P.Um)(),n=r?.type===G.lD&&r.data.localFileId===e.plugin.localFileId,i=(0,c.wA)(),a=s.useRef(null);return s.createElement(s.Fragment,null,s.createElement(eo,{pluginIcon:s.createElement("div",{className:$.TM},e.plugin.error?s.createElement(b.B,{className:$.QW,svg:ei.A}):s.createElement(I.t,{className:$.ft,svg:Y.A})),editorType:e.plugin.manifest.editorType||[],showEditorTypeIcon:e.showEditorTypeIcon,onOptionsClick:r=>{if(r.stopPropagation(),n){i(N.oB());return}let o=a.current;i(N.j7({type:G.lD,data:{localFileId:e.plugin.localFileId,targetRect:o.getBoundingClientRect()}}))},optionsIconRef:a,isSelected:n,title:e.plugin.name,subTitle:s.createElement(B.A,{localResource:e.plugin,publishedResource:void 0}),disabled:!1,containerClassName:e.containerClassName,onClick:e.onClick}),n&&s.createElement(G.T9,{localResource:e.plugin}))},(e=>{function r(e){if((0,A.AC)(e))return s.createElement(w.L,{height:"16"});if((0,k.Rt)(e)){let r=e.roles.org?.name;return s.createElement(b.B,{svg:Q.A,className:$.kQ,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":r?(0,S.t)("community.plugins.private_for_plugin_org_name",{orgName:r}):(0,S.t)("community.plugins.private_for_plugin_org")})}if(e.roles.is_public)return s.createElement(b.B,{className:$.Ac,svg:er.A,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,S.t)("community.plugins.published_to_community")})}e.Tile=function(e){let n=(0,P.Um)(),i=n?.type===G.lD&&n.data.pluginId===e.plugin.id&&n.data.targetRect,a=(0,c.wA)(),o=s.useRef(null),l=(0,k.uF)(e.plugin),d=(0,R.WK)(e.plugin.id),u=s.useCallback(()=>r(e.plugin),[e.plugin])();return s.createElement(s.Fragment,null,s.createElement(eo,{containerClassName:e.containerClassName,onClick:e.onClick,pluginIcon:s.createElement(F.V,{plugin:l}),editorType:l.manifest.editorType||[],showEditorTypeIcon:!0,onOptionsClick:()=>{if(i){a(N.oB());return}let r=o.current;a(N.j7({type:G.lD,data:{pluginId:e.plugin.id,targetRect:r.getBoundingClientRect()}}))},optionsIconRef:o,disabled:!!e.plugin.unpublished_at,isSelected:i,title:l.name,titleSuffix:u,subTitle:s.createElement(B.A,{localResource:d,publishedResource:e.plugin})}),i&&s.createElement(G.T9,{publishedResource:e.plugin,viewResource:()=>{a(N.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.plugin.id})),a(L.Ce())}}))},e.PluginManagementTitleBadge=r})(a||(a={})),(o||(o={})).Tile=function(e){let r=(0,k.uF)(e.plugin);return s.createElement("div",{className:e.containerClassName??$.x$},s.createElement(W.li.IconAndBadgeContainer,{className:$.yq},s.createElement("div",{className:$.zr},s.createElement(F.V,{plugin:r})),s.createElement(W.li.BadgeContainer,null,s.createElement(W.dn,{editorType:r.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:$.Kz},s.createElement(V.PE,{resource:e.plugin})))},(0,O.tf)(function({plugin:e,className:r,onClick:n}){let i=(0,k.uF)(e),a=(0,c.wA)();return s.createElement("a",{className:r||$.m6,"data-plugin-id":e.id,key:e.id,onClick:r=>{r.metaKey||(r.preventDefault(),n?.(),a(N.$T({view:"communityHub",subView:"plugin",publishedPluginId:e.id})))},href:(0,K.ho)(e.id)},s.createElement(W.li.IconAndBadgeContainer,{className:$.yk},s.createElement("div",{className:$.A9},s.createElement(F.V,{plugin:i})),s.createElement(W.li.BadgeContainer,null,s.createElement(W.dn,{editorType:i.manifest.editorType,is16x16:!0}))),s.createElement("div",{className:$.XV},s.createElement("div",{className:$.vc},i.name),s.createElement("div",{className:$.ar},(0,A.G8)(i,_.$J))))})},884289:(e,r,n)=>{n.d(r,{WW:()=>G});var i=n(411855),a=n(188507),o=n(140593),s=n(776250),l=n(320063),c=n(860601),d=n(642822),u=n(163023),m=n(154254),p=n(939863),h=n(749949),_=n(837324),g=n(162895),f=n(738269),E=n(662275),y=n(318812),b=n(193212),v=n(99506),I=n(556261),T=n(56099),S=n(215822),w=n(239671),A=n(376485),C=n(596578),N=n(728587),L=n(298543),O=n(928754),R=n(37637),P=n(883691),D=n(558011),k=n(501191);function M(e,r,n,i){(0,s.sx)("extension_opened_from_community",{extension_id:e,file_type:r,editor_type:n,searchSessionId:i})}function F(e){switch(e){case w.nT.Design:return d.y1.DESIGN;case w.nT.Whiteboard:return d.y1.WHITEBOARD;case w.nT.DevHandoff:return d.y1.DESIGN;case w.nT.Slides:return d.y1.SLIDES;case w.nT.Sites:case w.nT.Cooper:case w.nT.Illustration:return d.y1.DESIGN;default:(0,o.xb)(e)}}function x(e){return i.createElement("button",{type:"button",className:P.t,onClick:e.onClick,"data-testid":e.dataTestId},i.createElement("div",{className:P.Z3},i.createElement("div",{className:m.cx.w32.flex.justifyCenter.$},e.icon),i.createElement("div",{className:P.CA},e.text)),e.rightIcon)}function U(e){let r=e.fileName?e.fileName:e.playgroundFile?(0,p.t)("community.using.playground_file"):e.fileIconType===d.y1.WHITEBOARD?(0,p.t)("community.using.figjam_board"):(0,p.t)("community.using.figma_file");return i.createElement(x,{onClick:e.onClick,"data-testid":e.dataTestId,icon:i.createElement("div",{className:P.dD},i.createElement(R.Zt,{fileIconType:e.fileIconType})),text:r})}function B(e){let r=(0,a.wA)(),{files:n,resource:s,editorTypes:l}=e,c=(0,h.J)(),u=e=>{if(!e.org_id)return;let n=(0,_.qD)(s),i={extension:{pluginId:n.plugin_id,iconUrl:n.redirect_icon_url,name:n.name},isWidget:s.is_widget,orgId:e.org_id,workspaceDetails:{workspaceId:e.workspace_id,workspaceName:e.workspace_name,fileKey:e.key,fileName:e.name},openedFrom:"community",fullscreenEditorType:null};r((0,E.to)({type:O.S,data:i}))},m=e=>{M(s.id,"existing_file",(0,w.wN)(e.editor_type),c),r(g.aI({resource:s,fullscreenEditorType:e.editor_type===v._Y.DESIGN&&(0,A.Pe)(l)?w.nT.DevHandoff:(0,S.Tz)(e.editor_type),fileKey:e.key,userId:e.user_id}))};return n?.length===0?null:i.createElement(i.Fragment,null,i.createElement("div",{className:P.Dh},(0,p.tx)("community.detail_view.recent_files")),i.createElement("div",{className:P.Dr},n?n.map(e=>i.createElement(U,{key:e.key,fileIconType:function(e){switch(e.editor_type){case v._Y.DESIGN:return e.last_published_at?d.y1.PUBLISHED:d.y1.DESIGN;case v._Y.WHITEBOARD:return d.y1.WHITEBOARD;case v._Y.SLIDES:return d.y1.SLIDES;case v._Y.SITES:case v._Y.COOPER:return d.y1.DESIGN;default:(0,o.xb)(e.editor_type)}}(e),fileName:e.name,onClick:()=>{r(f.oB()),e.can_run?m(e):e.requests_allowed&&u(e)}})):i.createElement("div",{className:P.d1},[...Array(6)].map((e,r)=>i.createElement("div",{key:r,className:P.iM})))))}function V({hasSecondaryDropdown:e,text:r,primaryFullscreenEditorType:n,resource:o}){let s=(0,a.wA)(),l=(0,S.uF)(o),c=(0,h.J)();return i.createElement(x,{onClick:()=>{if(!e){let e=!!(l.playground_fig_file||n===w.nT.DevHandoff);M(o.id,e?"playground":"new_file",n,c),s(f.oB()),s(g.aI({resource:o,fullscreenEditorType:n,isPlaygroundFile:e}))}},icon:i.createElement(u.B,{svg:k.A,className:P.K1}),text:r,rightIcon:e?i.createElement(u.B,{svg:D.A,className:P.Yr}):void 0})}function G(e,r,n){let o=(0,a.wA)(),d=(0,y.Um)(),u=d?.type===H&&d.data.resourceId===e.id&&d.data.viewContext===n,m=i.memo(function({primaryFullscreenEditorType:n}){let a;let m=(0,I.yN)({migrationGroup:T.L.GROUP_1,component:"PluginTrySwitchEditorDropdown",attribute:"figjamDisabledAt",legacy:(e,r)=>r?.figjam_disabled_at??null,migrated:(e,r)=>r?.figjamDisabledAt??null}),_=(0,h.J)(),[E,y]=i.useState();(0,l.h)(()=>{!async function(){let r=await C.C.getRecentFiles({extensionId:e.id,isWidget:!!e.is_widget});(0,s.sx)("recent_files_for_plugins_loaded",{response_count:r.data.meta.length,extension_id:e.id,searchSessionId:_}),y(r.data.meta.filter(e=>e.can_run||e.requests_allowed).slice(0,6))}()});let v=(0,S.uF)(e),O=v.manifest.editorType?.sort()??[],R=!!v.playground_fig_file||n===w.nT.DevHandoff,D=O.includes(A.FW.FIGMA)&&O.includes(A.FW.FIGJAM);D&&(n!==w.nT.Design&&n!==w.nT.DevHandoff||m?n===w.nT.Whiteboard&&(a=w.nT.Design):a=w.nT.Whiteboard);let k=(()=>{let r=[{displayText:(0,p.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>i.createElement(U,{fileIconType:F(n),onClick:()=>{M(e.id,"new_file",n,_),o(f.oB()),o(g.aI({resource:e,fullscreenEditorType:n}))}})}];return D&&a&&r.push({displayText:(0,p.t)("community.using.new_file"),preventDismissOnSelected:!0,render:()=>i.createElement(U,{fileIconType:F(a),onClick:()=>{M(e.id,"new_file",a,_),o(f.oB()),o(g.aI({resource:e,fullscreenEditorType:a}))}})}),r})(),x={displayText:(0,p.t)("community.using.new_file"),className:P.pz,preventDismissOnSelected:!0,render:()=>i.createElement(V,{hasSecondaryDropdown:k.length>1,text:(0,p.t)("community.using.new_file"),primaryFullscreenEditorType:n,resource:e}),children:k.length>1?k:void 0},G={displayText:(0,p.t)("community.using.playground_file"),className:P.pz,preventDismissOnSelected:!0,render:()=>i.createElement(V,{hasSecondaryDropdown:!1,text:(0,p.t)("community.using.playground_file"),primaryFullscreenEditorType:n,resource:e})};(0,b.U3)("resize",()=>{u&&o(f.oB())});let H=(()=>{let r=[];if(void 0===E||E.length>0)r.push({displayText:"recentFiles",preventDismissOnSelected:!0,render:()=>i.createElement(B,{files:E,resource:e,editorTypes:O})});else if(!R&&D)return k;return R?r.push(G):r.push(x),r})();return i.createElement(N.j,{showPoint:!1,lean:r,className:P.qN,subMenuClassName:P._3,type:L.it.MATCH_BACKGROUND,rootAndSubmenuMaxWidth:280,minWidth:280,autoHeight:!0,onSelectItem:c.lQ,hidePointWhenContentOffScreen:!0,items:H,parentRect:d?.data.targetRect,dispatch:o})});return{dropdownIsShown:u,toggleSwitchEditorDropdown:(r,i)=>{let a=r.current?.getBoundingClientRect();a&&((void 0!==i?i:!u)?o(f.j7({type:H,data:{resourceId:e.id,viewContext:n,targetRect:a}})):o(f.oB()))},PluginTrySwitchEditorDropdown:m}}let H="PLUGIN_TRY_SWITCH_EDITOR_DROPDOWN"},749449:(e,r,n)=>{n.d(r,{KM:()=>m,YJ:()=>g,fJ:()=>_,x5:()=>p});var i=n(411855),a=n(629019),o=n.n(a),s=n(154254),l=n(939863),c=n(226055),d=n(78129),u=n(865991),m=(e=>(e.PUBLISH="publish",e.PERMISSIONS="permissions",e.DATA_SECURITY="data_security",e))(m||{});let p=["publish","data_security","permissions"],h=[{tab:p[0],title:()=>(0,l.t)("community.publishing.publish_tab"),isVisible:()=>!0},{tab:p[1],title:()=>(0,l.t)("community.publishing.data_security_tab"),isVisible:()=>!0},{tab:p[2],title:()=>(0,l.t)("community.publishing.permissions_tab"),dataOnboardingKey:d.k,isVisible:()=>!0}];function _(e){let r=(0,c.GS)();return i.createElement("div",{className:e.tab===e.selectedTab?o()(u.xR,{[u.E3]:r}):o()(u.Mf,{[u.E3]:r}),key:e.tab,role:"tab",onClick:()=>e.onClick(e.tab),onMouseDown:e=>e.stopPropagation(),onPointerDown:e=>e.stopPropagation(),tabIndex:0,"data-onboarding-key":e.dataOnboardingKey},e.title())}function g(e){return i.createElement("div",{className:s.cx.flex.itemsCenter.$,role:"tablist"},h.map(r=>e.allowedTabs.includes(r.tab)&&r.isVisible()?i.createElement(_,{key:r.tab,selectedTab:e.selectedTab,onClick:e.onClick,tab:r.tab,title:r.title,dataOnboardingKey:r.dataOnboardingKey}):null))}},350913:(e,r,n)=>{n.d(r,{X$:()=>o,YW:()=>l,ab:()=>c,ho:()=>s,ox:()=>d});var i=n(837324),a=n(97128);function o(e,r){return(0,i.UI)({path:a.Uo.FILE,id:e,name:r})}function s(e,r){return(0,i.UI)({path:a.Uo.PLUGIN,id:e,name:r})}function l(e,r){return(0,i.UI)({path:a.Uo.WIDGET,id:e,name:r})}function c(e,r){return new URL(s(e,r),location.href).href}function d(e,r){return new URL(l(e,r),location.href).href}},180881:(e,r,n)=>{n.d(r,{H:()=>m});var i=n(411855),a=n(188507),o=n(939863),s=n(545941),l=n(941381),c=n(555328),d=n(237870),u=n(474742);let m=(0,d.Ju)(function({plugin:e}){let r,n,d,m;let p=(0,a.wA)(),h=e.is_widget?(0,o.t)("community.plugins.widget"):(0,o.t)("community.plugins.plugin"),_=()=>{p(l.et({resource:e}))};return(0,s.AC)(e)?(n=(0,o.t)("community.plugins.withdraw_from_review"),r=e.roles.org?(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission_your_resource_type_will_still_be_available_to_members_of_org_name",{resourceType:h,orgName:e.roles.org.name}):(0,o.t)("community.plugins.this_action_will_remove_your_public_resource_type_review_submission",{resourceType:h}),d=(0,o.t)("community.plugins.withdraw"),m=()=>{e.roles.org?p(l.zn({pluginId:e.id,role:e.roles})):_()}):((0,c.m3)(e)?(n=(0,o.t)("community.plugins.delist_your_resource_type",{resourceType:h}),r=(0,o.t)("community.resource.delisting_this_resource_will_prevent_people_from_discovering_or_purchasing_this_resource"),d=(0,o.t)("community.resource.delist")):(n=(0,o.t)("community.plugins.unpublish_resource_type",{resourceType:h}),r=(0,o.t)("community.plugins.this_action_will_cause_your_resource_type_to_disappear_current_users_will_lose_access_to_your_resource_type_immediately_you_cannot_undo_this_action_however_if_you_publish_your_resource_type_again_later_it_will_keep_its_url",{resourceType:h}),d=(0,o.t)("community.resource.unpublish")),m=_),i.createElement(u.Rw,{confirmationTitle:n,content:r,onConfirm:m,confirmText:d,size:"small",destructive:!0,disableClickOutsideToHide:!0,enableEscapeToClose:!0,popStack:!0})},"UnpublishPluginModal",d.ZU.YES)},273226:(e,r,n)=>{n.d(r,{B_:()=>G,FF:()=>eo,Fv:()=>q,O2:()=>R,OE:()=>O,Pp:()=>F,Ql:()=>V,Rq:()=>er,T1:()=>en,X9:()=>H,Yi:()=>X,ZH:()=>J,_P:()=>j,aO:()=>ee,dl:()=>U,eM:()=>B,f3:()=>Q,fx:()=>ea,iz:()=>W,k4:()=>Z,lg:()=>ei,m5:()=>Y,qe:()=>P,s_:()=>es,ui:()=>z,wd:()=>$,wh:()=>L,xP:()=>K,xb:()=>x,zn:()=>M});var i=n(411855),a=n(527395),o=n(937456),s=n(710752),l=n(77437),c=n(31524),d=n(459593),u=n(439492),m=n(785273),p=n(313177),h=n(470230),_=n(460307),g=n(448639),f=n(922827),E=n(776250),y=n(966712),b=n(852438),v=n(939863),I=n(378905),T=n(848661),S=n(705129),w=n(968109),A=n(283293),C=n(144919),N=n(626241);let L=304;var O=(e=>(e[e.DEFINITION=0]="DEFINITION",e[e.ASSIGNMENT=1]="ASSIGNMENT",e))(O||{}),R=(e=>(e[e.REGULAR=0]="REGULAR",e[e.WIDE=1]="WIDE",e[e.UNBOUNDED=2]="UNBOUNDED",e[e.RESIZABLE_SIDEBAR=3]="RESIZABLE_SIDEBAR",e))(R||{});function P(e){switch(e){case f.J0O.BOOL:return C.A;case f.J0O.NUMBER:return N.A;case f.J0O.TEXT:return A.A;case f.J0O.INSTANCE_SWAP:return w.A}}let D={[f.J0O.BOOL]:{SIZE_24_SMALL:a.$,SIZE_16:o.X},[f.J0O.TEXT]:{SIZE_24_SMALL:s.e,SIZE_16:l.I},[f.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:c.y,SIZE_16:d.m},[f.J0O.NUMBER]:{SIZE_24_SMALL:a.$,SIZE_16:o.X}},k={[f.J0O.BOOL]:{SIZE_24_SMALL:a.$,SIZE_16:o.X},[f.J0O.TEXT]:{SIZE_24_SMALL:u.p,SIZE_16:m.T},[f.J0O.INSTANCE_SWAP]:{SIZE_24_SMALL:p.V,SIZE_16:d.m},[f.J0O.NUMBER]:{SIZE_24_SMALL:h.O,SIZE_16:_.c}};function M(e,r=!1){let n=((0,y.kc)().ds_variable_props_unified_ui?k:D)[e][r?"SIZE_16":"SIZE_24_SMALL"];return i.createElement(n,null)}function F(e,r,n,i){e&&(0,E.sx)("ds_component_props_def_create_modal_open",{product_component_guid:e.guid,product_component_is_state_group:e.isStateGroup,is_bottoms_up_creation:r,prop_type:f.J0O[n],source:i})}function x(e){switch(e){case f.J0O.BOOL:return(0,v.t)("design_systems.component_properties.boolean");case f.J0O.TEXT:return(0,v.t)("design_systems.component_properties.text");case f.J0O.INSTANCE_SWAP:return(0,v.t)("design_systems.component_properties.instance_swap");case f.J0O.VARIANT:return(0,v.t)("design_systems.component_properties.variant");case f.J0O.NUMBER:return(0,v.t)("design_systems.component_properties.number")}}function U(e,r){if((0,T.gl)(r))return T.oV;if((0,y.kc)().ds_variable_props_binding_vars&&r&&"object"==typeof r&&"type"in r&&r.type===f.Z_n.ALIAS||(0,y.kc)().ds_variable_props_binding_props&&r&&"object"==typeof r&&"type"in r&&r.type===f.Z_n.NODE_FIELD_ALIAS)return r;switch(e){case f.J0O.BOOL:return"true"===r;case f.J0O.TEXT:case f.J0O.INSTANCE_SWAP:case f.J0O.NUMBER:return r;default:throw Error(`Unexpected component prop type: ${e}`)}}function B(e){switch(e){case g.R.VISIBLE:return{defaultType:f.J0O.BOOL,types:[f.J0O.BOOL]};case g.R.TEXT:return{defaultType:f.J0O.TEXT,types:[f.J0O.TEXT,f.J0O.NUMBER]};case g.R.OVERRIDDEN_SYMBOL_ID:return{defaultType:f.J0O.INSTANCE_SWAP,types:[f.J0O.INSTANCE_SWAP]}}}function V(e){switch(e){case f.J0O.BOOL:return!0;case f.J0O.TEXT:return"";case f.J0O.INSTANCE_SWAP:return null;case f.J0O.VARIANT:return(0,v.t)("design_systems.states_panel.default_property_value");case f.J0O.NUMBER:return"0"}}function G(e,r){switch(e){case f.J0O.INSTANCE_SWAP:return!!r;case f.J0O.TEXT||f.J0O.VARIANT:return!!r?.length;case f.J0O.NUMBER:return er(r);default:return!0}}let H={format:e=>e?(0,v.t)("design_systems.component_properties.boolean_true"):(0,v.t)("design_systems.component_properties.boolean_false"),isEqual:(e,r)=>e===r};function K(e,r){if(!r.length)return null;let n=e(r[0]);return n&&r.every(r=>e(r)===n)?n:null}function W(e,r){switch(e){case f.uXg.CONFLICTING_NAMES_ERROR:case f.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:return(0,v.t)("design_systems.component_properties.error_conflicting_name");case f.uXg.UNUSED_DEF_ERROR:return(0,v.t)("design_systems.component_properties.error_unused_property");default:return r?(0,v.t)("design_systems.component_properties.has_unpublished_preferred_values"):""}}function $(e,r){if(!e.length)return null;let{backingSymbolGUID:n,backingStateGroupGUID:i}=(0,S.nD)(new Set(e),r);return i&&(0,T.hS)(i)?r.get(i):n&&(0,T.hS)(n)?r.get(n):T.oV}function Y(e,r,n){let i;if(r.size)return i=r.has(T.oV)?T.oV:e===f.J0O.INSTANCE_SWAP?$([...r],n):r.size>1?T.oV:r.values().next().value,U(e,i)}function z(e,r,n){return(0,I.TK)(e,n)?f.glU.getDefaultStateForLocalStateGroup(r):f.glU.getDefaultStateForSubscribedStateGroup(r,e.default_state_key)}function j(e){if(e)try{return new URL(e).hostname}catch(e){}}var q=(e=>(e.PILL="pill",e.ICON="icon",e))(q||{});function Z(e,r){let n;if(e.length){for(let i of e){let e=r.get(i);if(e){if(e.isInstance){let r=e.symbolId;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeInstance){let r=e.backingCodeComponent?.guid;if(!r)continue;if(void 0===n)n=r;else if(r!==n)return}else if(e.isCodeLayer){if(void 0===n)n=e.guid;else if(e.guid!==n)return}}}return n}}function X(e,r){let n;if(e.length){for(let i of e){let e=r.get(i);if(!e||"INSTANCE"!==e.type)continue;let a=e.symbolId;if(!a)continue;let o=r.get(a);if(!o)continue;if(o.isLooseComponent)return;let s=o.containingStateGroupId;if(s){if(void 0===n)n=s;else if(s!==n)return}}return n}}function J(e,r){if(!e.length)return new Set;let n=new Set(r[e[0]]?.hiddenProps);return e.reduce((e,n)=>r[n]?.hiddenProps?(0,b.iR)(e,new Set(r[n].hiddenProps)):e,n)}function Q(e,r){return e?r[e]?.componentPropDefError??f.uXg.NONE:f.uXg.NONE}function ee(e,r){let n=r[e]?.defs;return n?Object.values(n).sort((e,r)=>e.sortPosition<r.sortPosition?-1:1):[]}let et=/^[+-]?(\d+(\.\d*)?|\.\d+)$/;function er(e){if(!et.test(e))return!1;let r=parseFloat(e);return!isNaN(r)&&isFinite(r)&&""!==e.trim()}function en(e){return er(e)?Number(parseFloat(e).toFixed(2)):(console.warn("Failed converting string to float:",e),0)}function ei(e){return isNaN(e)?(console.warn("Failed converting number to string:",e),"0"):e.toFixed(2).replace(/\.?0+$/,"")}function ea(e){if(e?.length===1)switch(e[0]){case"TEXT_DATA":return g.R.TEXT;case"VISIBLE":return g.R.VISIBLE;default:return}}function eo(e){return{type:f.Z_n.NODE_FIELD_ALIAS,resolvedType:e.value.varValue.resolvedType,value:{stablePathToNode:e.value.stablePath,nodeField:"COMPONENT_PROP_ASSIGNMENTS",indexOrKey:e.value.explicitDefId}}}function es(e){return i.useMemo(()=>e===f.J0O.BOOL?{variableType:f.rXF.BOOLEAN,requestedTypes:[f.rXF.BOOLEAN],variableScope:f.j0r.ALL_SCOPES}:e===f.J0O.TEXT?{variableType:f.rXF.TEXT_DATA,requestedTypes:[f.rXF.STRING],variableScope:f.j0r.TEXT_CONTENT}:e===f.J0O.NUMBER?{variableType:f.rXF.FLOAT,requestedTypes:[f.rXF.FLOAT],variableScope:f.j0r.ALL_SCOPES}:void 0,[e])}},467302:(e,r,n)=>{n.d(r,{Yl:()=>m,nj:()=>p});var i=n(411855);n(188507);var a=n(922827);n(448639),n(340818),n(572304),n(587932);var o=n(44948);n(966712);var s=n(716034),l=n(848661);n(234945);var c=n(273226),d=n(510879);n(107244);var u=n(958317);let m=(0,s.eU)(!1);function p(e,r,n,s){let m;let p=(0,o.k9)(()=>n?function(e,r,n){let i=(0,c.ZH)(r,n);return(0,c.aO)(e,n).filter(e=>!i.has(e.explicitDefID))}(n,[e],r):[],[e,n,r]),h=(0,o.k9)(()=>n?(0,u.Jm)(n,r):[],[n,r]),_=(0,o.k9)(()=>(function(e,r,n,i){let o={};return e.forEach(e=>{let s=new Set,d=new Set;for(let o of r){let r=i[o]?.assignments?.[e.explicitDefID];if(r){if(r.isMixed){s.add(l.oV);continue}if(r.value&&"object"==typeof r.value&&"value"in r.value&&r.value.value&&"object"==typeof r.value.value&&"stablePathToNode"in r.value.value&&"indexOrKey"in r.value.value){let e=r.value.value.stablePathToNode,i=e&&1===e.length?n.get(e[0]):null;if(i&&i.isState&&i.containingStateGroupId){let e=a.Egt.getExplicitPropDefIDBinding(i.guid,r.value.value.indexOrKey);r.value.value.stablePathToNode=[i.containingStateGroupId],r.value.value.indexOrKey=e}}if(null!=r.value){let e=JSON.stringify(r.value);d.has(e)||s.add(r.value),d.add(e)}}}o[e.explicitDefID]=(0,c.m5)(e.type,s,n)}),o})(p,[e],s,r),[e,r,s,p]),g=(0,o.k9)(()=>n&&s.get(n)?.isStateGroup?function(e,r,n){let i=n.get(e);return i?.isStateGroup?i.childrenNodes.reduce((e,n)=>{let i=r[n.guid]?.stateVariantProps;return i?e.push({...i,guid:n.guid}):e.push({propertyValues:n.statePropertyValues,guid:n.guid}),e},[]):[]}(n,r,s):[],[n,r,s]),f=(0,o.k9)(()=>n?function(e,r,n){let i=n[e]?.stateGroupVariantProps?.propertySortOrder??[];return(0,d.s)(n,r,i)}(n,[e],r):{},[e,n,r]),E=s.get(e)?.symbolId;return E&&s.get(E)?.isState||(m=[]),m=g.filter(e=>E===e.guid),i.useMemo(()=>({typedPropDefsExcludingHidden:p,variantPropDefs:h,assignmentValuesByDefId:_,allStateVariantProps:g,backingStateVariantProps:m,statePropertyValues:f}),[p,h,_,g,m,f])}},567488:(e,r,n)=>{n.d(r,{Yc:()=>A,yQ:()=>C});var i=n(411855),a=n(109388),o=n(188507),s=n(313177),l=n(448639),c=n(794272),d=n(153234),u=n(46481),m=n(939863),p=n(738269),h=n(662275),_=n(318812),g=n(498606),f=n(420186),E=n(227795),y=n(121003),b=n(273226),v=n(476951),I=n(107244),T=n(224690),S=n(646476);let w=e=>e.stopPropagation();function A(e,r){let n=i.useMemo(T.On,[]),a=i.useMemo(I.Ms,[]),{containingProductComponent:o,defReferencedBySelection:s,nodesHaveInstanceSublayer:d,selectionHasProductComponent:u}=(0,c.R)(i=>{let o=(0,I.Lg)(i),s=o?i.mirror.sceneGraph.get(o):null,l=a(i,r);return{containingProductComponent:s,defReferencedBySelection:n(i,e),nodesHaveInstanceSublayer:l,selectionHasProductComponent:(0,I.Ln)(i)}});return!i.useMemo(()=>!!o?.guid&&!d&&(!u||e!==l.R.VISIBLE),[o,d,u,e])||!!s}function C({nodeField:e,defaultValue:r,guids:n}){let l=i.useRef(null),C=A(e,n),N=function(e){let r=(0,c.R)(e=>e.modalShown),n=i.useMemo(()=>(0,b.eM)(e).defaultType,[e]),a=y.sD.concat("-",e),o=(0,_.Um)(),s=!!o&&o.type===a&&o.data.nodeField===e,l=!!r&&r.type===v.n.type&&r.data?.propType===n;return s||l}(e),L=function(e,r,n,s){let l=(0,o.wA)(),d=i.useMemo(()=>(0,b.eM)(e).defaultType,[e]),u=i.useMemo(T.p1,[]),{containingProductComponent:m,hasExistingDefs:_}=(0,c.R)(r=>{let n=(0,I.Lg)(r);return{containingProductComponent:n?r.mirror.sceneGraph.get(n):null,hasExistingDefs:!!u(r,n,e).length}});return i.useCallback(()=>{if(r.current){if(_)l(p.j7({type:y.sD.concat("-",e),data:{nodeField:e,targetRect:r.current.getBoundingClientRect()}}));else{(0,b.Pp)(m,!0,d,b.Fv.ICON);let i=a.findDOMNode(r.current),o=i?(0,f.cn)(i,b.wh):{};l(h.to({type:v.n,data:{prePopulatedDefaultValue:n,propType:d,refField:e,initialX:o?.x??0,initialY:o?.y??0}}))}}},[r,_,void 0,l,e,m,d,n])}(e,l,r),O=function(e){let r=i.useMemo(T.p1,[]),{hasExistingDefs:n}=(0,c.R)(n=>{let i=(0,I.Lg)(n);return{hasExistingDefs:!!r(n,i,e).length}}),a=i.useMemo(()=>(0,b.eM)(e).defaultType,[e]);return n?(0,m.t)("design_systems.component_properties.apply_component_property",{propType:(0,b.xb)(a).toLocaleLowerCase()}):(0,m.t)("design_systems.component_properties.create_component_property_of_type",{propType:(0,b.xb)(a).toLocaleLowerCase()})}(e);return C?null:i.createElement(i.Fragment,null,i.createElement("div",{ref:l},i.createElement(E.YW,{recordingKey:d.Pt("applyPropRefButton",e),selected:N,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":O,onMouseDown:w,onClick:L},i.createElement(u.U,{svg:S.A},i.createElement(s.V,null)))),i.createElement(y.Xn,{source:b.Fv.ICON,nodeField:e,defaultValue:r}))}},983850:(e,r,n)=>{n.d(r,{qC:()=>T,tO:()=>w});var i=n(411855),a=n(188507),o=n(463033),s=n(448639),l=n(922827);n(629019);var c=n(418956),d=n(153234);n(522739),n(457921);var u=n(939863);n(29680),n(721478);var m=n(45148),p=n(690710),h=n(893606),_=n(939791),g=n(273226),f=n(288063),E=n(467302),y=n(373038),b=n(222730),v=n(444730),I=n(473394);n(501891);let T=20;var S=(e=>(e[e.ALL_PROPS=0]="ALL_PROPS",e[e.VARIANT_PROPS=1]="VARIANT_PROPS",e[e.TYPED_PROPS=2]="TYPED_PROPS",e))(S||{});function w({typedPropDefs:e,variantPropDefs:r,propDimension:n,enableHidingOverflowRowsInUI3:o,...s}){let[c,d]=i.useState(void 0),[m,_]=i.useState([]),[f,E]=i.useState(!1),y=(0,h.R)(),b=(0,a.d4)(p.i$)===l.iCO.STATE&&n===g.OE.DEFINITION;i.useEffect(()=>{d(void 0),_([])},[r,e]);let v=!!r.length,I=!!e.length&&!b,T={shouldShowVariantProps:v,shouldShowTypedProps:I,selectedSection:c,selectedPropIndices:m,onSelectProps:(e,r)=>{d(e),_(r)},isInStateAuthoringView:b};if(y&&o){let{numHiddenRows:a,variantPropDefsToShow:o,typedPropDefsToShow:l}=function(e,r,n,i,a){let o=(r?i.length:0)+(n?a.length:0);if(e||o<=5)return{numHiddenRows:0,variantPropDefsToShow:r?i:[],typedPropDefsToShow:n?a:[]};let s=4,l=i;return r?s-=(l=i.slice(0,4)).length:l=[],{numHiddenRows:o-4,variantPropDefsToShow:l,typedPropDefsToShow:n?a.slice(0,s):[]}}(f,v,I,r,e);return i.createElement(i.Fragment,null,i.createElement(A,{variantPropDefs:o,typedPropDefs:l,propDimension:n,...T,...s}),a>0&&!f&&i.createElement(C,{label:(0,u.t)("design_systems.component_properties.show_more_property_rows",{count:a}),onClick:()=>E(!0)}))}return i.createElement(A,{variantPropDefs:r,typedPropDefs:e,propDimension:n,...T,...s})}function A({shouldShowVariantProps:e,shouldShowTypedProps:r,selectedSection:n,selectedPropIndices:a,onSelectProps:l,isInStateAuthoringView:p,propDimension:h,variantPropDefs:_,typedPropDefs:T,guids:S,assignmentValues:w,allStateVariantProps:A,backingStateVariantProps:C,statePropertyValues:N,productComponentGUID:L,forBubbledProps:O,hideErrors:R,containerWidth:P,viewOnlyMode:D,hideIcon:k,recordingKey:M,errorBoxFlushWithContainer:F,splitVariantAndTypedProps:x,sceneGraph:U,inPlayground:B,instanceSwapPickerInitialHeight:V,instanceSwapPickerInitialPosition:G,entrypointForInstanceSwapPicker:H,canAutoSuggestProps:K=!1}){return i.createElement(f.n,null,i.createElement(i.Fragment,null,e&&h===g.OE.DEFINITION&&i.createElement(I.L,{defs:_,guids:S,selectedIndices:n===s.u.VARIANT?a:[],onSelectIndices:e=>l(s.u.VARIANT,e),isInStateAuthoringView:p,recordingKey:d.Pt(M,"propDefs",s.u.VARIANT)}),e&&L&&h===g.OE.ASSIGNMENT&&i.createElement(v.T,{variantPropDefs:_,guids:S,allStateVariantProps:A,backingStateVariantProps:C,stateGroupGUID:L,statePropertyValues:N,forBubbledProps:O,containerWidth:P,sceneGraph:U,viewOnly:0===D||1===D,hideIcon:k,recordingKey:d.Pt(M,"propDefs",s.u.VARIANT)}),e&&r&&x&&i.createElement("div",{className:"props_section--divider--5xEyL"}),r&&h===g.OE.DEFINITION&&i.createElement(b.e,{defs:T,guids:S,selectedIndices:n===s.u.TYPED?a:[],onSelectIndices:e=>l(s.u.TYPED,e),recordingKey:d.Pt(M,"propDefs",s.u.TYPED)}),r&&h===g.OE.ASSIGNMENT&&i.createElement(y.c,{typedPropDefs:T,guids:S,assignmentValues:w,forBubbledProps:O,containerWidth:P,viewOnly:0===D||2===D,hideIcon:k,sceneGraph:U,inPlayground:B,instanceSwapPickerInitialHeight:V,instanceSwapPickerInitialPosition:G,recordingKey:d.Pt(M,"propDefs",s.u.TYPED),entrypointForInstanceSwapPicker:H}),!R&&i.createElement(m.aq,{flushWithContainer:F})),K&&i.createElement("div",{className:"props_section--autoSuggestButtonWrapper--WRcYQ"},i.createElement(o.$n,{variant:"secondary",onClick:()=>{c.zl.set(E.Yl,!0)}},(0,u.t)("design_systems.component_properties.auto_suggest"))))}function C({label:e,onClick:r}){return i.createElement("button",{onClick:r,"aria-label":e},i.createElement(_.Ad,{label:null,input:i.createElement("div",{className:"props_section--ui3ShowMoreText--9ZaYD"},e)}))}},215440:(e,r,n)=>{n.d(r,{Ae:()=>m});var i=n(461816),a=n.n(i),o=n(302245),s=n(966712),l=n(97395),c=n(234945),d=n(107244);(0,l.P8)([d.C1,d.tO,d.S8,d.Rk,d.TJ],(e,r,n,i,a)=>a?void 0:e&&n&&e[n]?e[n].primaryInstances:(0,s.kc)().dse_editor_templates_v1&&r&&i&&r[i]?r[i].primaryInstances:void 0);let u=(0,l.P8)([c.dK,d.C1,d.tO,d.S8,d.Rk,d.TJ,d.QW],(e,r,n,i,o,l,c)=>{if(l)return;let d=[],u=new Set;if(r&&i&&r[i]){let n=e.get(i);if(!n)return;if(!n.isStateGroup||0===c.length)return a()(r[i].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)]);for(let e of c)for(let n of r[e]?.primaryInstances?.filter(e=>e.isBubbled)||[]){if(n.connectedGUIDs&&!u.has(n.connectedGUIDs[0])){for(let e of n.connectedGUIDs)u.add(e);d.push(n.connectedGUIDs)}for(let e of n.bubbledNestedInstances)if(e.connectedGUIDs&&!u.has(e.connectedGUIDs[0])){for(let r of e.connectedGUIDs)u.add(r);d.push(e.connectedGUIDs)}}return d}if((0,s.kc)().dse_editor_templates_v1&&n&&o&&n[o])return a()(n[o].primaryInstances?.filter(e=>e.isBubbled)||[],e=>[e.connectedGUIDs,...e.bubbledNestedInstances.map(e=>e.connectedGUIDs)])}),m=(0,l.P8)([d.C1,c.AF],(e,r)=>{if(!r||!r.isAlive||"INSTANCE"!==r.type)return[];let n=r.guid;return e&&n&&e[n]?e[n].bubbledNestedInstanceGUIDs?.map(e=>[e])??[]:[]});(0,o.Mz)([u,m],(e,r)=>e||r||[])},25888:(e,r,n)=>{n.d(r,{UT:()=>u,z4:()=>m});var i=n(302245),a=n(848661),o=n(234945),s=n(224690),l=n(958317);let c=(0,i.Mz)([s.W0],e=>e.length>0),d=(0,i.Mz)([l.x1],e=>e.length>0);(0,i.Mz)([c,d],(e,r)=>e||r);let u=(0,i.Mz)([o.F4],e=>{if(!e.length)return null;let r=new Set(e.map(e=>e.textContent)),[n]=r;return 1===r.size?n:a.oV});function m(){return(0,i.Mz)([(0,l.Cu)(),(0,s.Ee)()],(e,r)=>[...e,...r])}(0,i.Mz)([l.x1,s.W0],(e,r)=>[...e,...r])},107244:(e,r,n)=>{n.d(r,{C1:()=>c,Lg:()=>f,Ln:()=>k,Ms:()=>P,Nw:()=>h,PY:()=>D,QW:()=>_,Rk:()=>p,S8:()=>E,TJ:()=>R,UR:()=>w,VC:()=>g,X9:()=>C,Yw:()=>u,d:()=>O,nM:()=>F,tK:()=>v,tO:()=>d,tc:()=>A,y7:()=>m});var i=n(302245);n(663668);var a=n(469297);n(848661);var o=n(416095),s=n(234945),l=n(273226);let c=e=>e.mirror.selectionProperties.componentProps,d=e=>e.mirror.selectionProperties.moduleProps,u=e=>e.mirror.selectionProperties.resettableComponentPropAssignments,m=(0,i.Mz)([s.dK,s.qd],M),p=(0,i.Mz)([s.dK,s.qd],function(e,r){return(0,l.xP)(r=>e.get(r)?.containingModuleId,r)??void 0}),h=(0,i.Mz)([s.dK,s.qd],F),_=(0,i.Mz)([s.dK,s.qd],(e,r)=>{let n=new Set;for(let i of r){let r=e.get(i)?.containingSymbolId;r&&n.add(r)}return Array.from(n)}),g=()=>(0,i.Mz)([s.dK,(e,r)=>r],(e,r)=>F(e,r)??M(e,r)),f=(()=>{let e=g();return r=>e(r,(0,s.qd)(r))})(),E=(0,i.Mz)([m,h],(e,r)=>e??r),y=()=>(0,i.Mz)([(e,r)=>r,s.dK],(e,r)=>{let n=(0,a.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.LI)(n)});for(let i of e){let e=r.get(i),a=e?.containingStateGroupId??e?.containingSymbolId;if(a&&a!==n)return}return n??void 0}),b=()=>(0,i.Mz)([(e,r)=>r,s.dK],(e,r)=>(0,a.p)(e,e=>{let n=r.get(e);return!!n&&(0,o.FS)(n)})??void 0);(()=>{let e=y();return r=>e(r,(0,s.qd)(r))})();let v=()=>(0,i.Mz)([g(),y()],(e,r)=>e??r),I=()=>(0,i.Mz)([b()],e=>e),T=(()=>{let e=v();return r=>e(r,(0,s.qd)(r))})();(0,i.Mz)([T,s.dK],(e,r)=>e?r.get(e):null);let S=(()=>{let e=I();return r=>e(r,(0,s.qd)(r))})();(0,i.Mz)([S,s.dK],(e,r)=>e?r.get(e):null);let w=(0,i.Mz)([c,s.qd],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstance,r)??void 0}),A=()=>(0,i.Mz)([c,(e,r)=>r],(e,r)=>{if(e)return(0,l.xP)(r=>e[r]?.containingInstanceBackingSymbol,r)??void 0}),C=()=>(0,i.Mz)([c,s.dK,(e,r)=>r],(e,r,n)=>{if(!e)return;let i=n.map(r=>e[r]?.containingInstance||r);return x(e,i,r)}),N=(0,i.Mz)([c,s.qd],(e,r)=>{if(e)return U(e,r)}),L=(0,i.Mz)([c,s.qd,s.dK],(e,r,n)=>{if(e)return x(e,r,n)}),O=()=>(0,i.Mz)([c,(e,r)=>r,s.dK],(e,r,n)=>{if(!e)return;let i=[];for(let e of r){let r=n.get(e);if(!r||r.isLooseComponent||r.isState||r.isStateGroup)return;r.symbolId&&i.push(e)}return x(e,i,n)??U(e,i)}),R=(0,i.Mz)([L,N],(e,r)=>r??e),P=()=>(0,i.Mz)([s.dK,(e,r)=>r],(e,r)=>r.some(r=>e.get(r)?.isInstanceSublayer??!1)),D=(()=>{let e=P();return r=>e(r,(0,s.qd)(r))})(),k=(0,i.Mz)([s.F4],e=>e.some(e=>"SYMBOL"===e.type||!!e.isStateGroup));function M(e,r){return(0,l.xP)(r=>e.get(r)?.containingSymbolId,r)??void 0}function F(e,r){return(0,l.xP)(r=>e.get(r)?.containingStateGroupId,r)??void 0}function x(e,r,n){return(0,l.xP)(r=>{let i=e[r]?.backingSymbol;if(i)return n.get(i)?.containingStateGroupId},r)??void 0}function U(e,r){return(0,l.xP)(r=>e[r]?.backingSymbol??e[r]?.containingInstanceBackingSymbol,r)??void 0}(0,i.Mz)([s.F4],e=>e.every(e=>"SYMBOL"===e.type||"INSTANCE"===e.type||!!e.isSymbolSublayer||!!e.isInstanceSublayer))},958317:(e,r,n)=>{n.d(r,{Cu:()=>g,Jm:()=>b,YH:()=>y,x1:()=>E});var i=n(448639),a=n(922827),o=n(302245),s=n(97395),l=n(939863),c=n(848661),d=n(112162),u=n(234945),m=n(273226),p=n(510879),h=n(731262),_=n(107244);function g(){return(0,s.P8)([h.uL,_.C1,u.dK,(e,r)=>r],(e,r,n,i)=>{if(!r||0===i.length)return[];let o=(0,m.Yi)(i,n)??(0,_.nM)(n,i);if(!o||i.includes(o))return[];let s=r[o]?.stateGroupVariantProps;if(!s)return[];let d=(0,p.s)(r,i,s.propertySortOrder);return(s.propertySortOrder||[]).map(e=>{let r=!function(e){if(2===e.length){let r=e.map(e=>e.toLowerCase());for(let e of h.NE){let n=r.indexOf(e[0]),i=r.indexOf(e[1]);if(-1!==n&&-1!==i)return!0}}return!1}(s.propertyValues[e])?a.J0O.VARIANT:a.J0O.BOOL,n=d[e]||h.xJ;return(0,c.gl)(n)?{name:e,value:(0,l.t)("inspect_panel.property.mixed"),type:r}:{name:e,value:n,type:r}})})}let f=()=>(0,s.P8)([_.C1,(0,_.tK)(),(0,_.d)()],(e,r,n)=>{if(!e)return[];let i=n??r;return i?b(i,e):[]}),E=(()=>{let e=f();return r=>e(r,(0,u.qd)(r))})(),y=(0,o.Mz)([E],e=>{let r=e.map(e=>e.name),n=(0,l.t)("design_systems.component_properties.variant_property_default_name");return(0,d.g)(n,r)});function b(e,r){let n=r[e]?.stateGroupVariantProps;if(!n)return[];let o=(0,m.aO)(e,r),s=(0,m.f3)(e,r);return n.propertySortOrder.map(e=>{let r=s===a.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR&&o.some(r=>r.name===e),l=n.propertyValues[e];return{name:e,values:l,type:a.J0O.VARIANT,kind:i.u.VARIANT,error:r?a.uXg.CONFLICTING_NAMES_WITH_VARIANT_ERROR:a.uXg.NONE}})}},218973:(e,r,n)=>{n.d(r,{$j:()=>N,Ht:()=>A,Jl:()=>F,M4:()=>M,Pd:()=>k,Se:()=>O,fl:()=>S,gq:()=>C,ig:()=>L,j5:()=>T,qd:()=>R,vD:()=>w,w2:()=>D});var i=n(411855),a=n(243742),o=n(629019),s=n.n(o),l=n(939863),c=n(287010),d=n(973149),u=n(798099),m=n(226055),p=n(848661),h=n(279702),_=n(498606),g=n(952675),f=n(205135),E=n(216899),y=n(41747),b=n(686880),v=n(389785);let I={scrubMultiplier:1,wheelMultiplier:1,smallNudgeAmount:c.bA,bigNudgeAmount:c._q};function T(e){let{onValueChange:r}=e,n=(0,i.useCallback)(e=>r?.(e,h.zk.YES),[r]),a=(0,m.GS)(),o=e.isTokenizable?E.$:f.p_;return i.createElement(b.b,{...I,...e,scrubbingDisabled:e.scrubbingDisabled||e.disabled||null==e.value||e.value===p.oV&&!e.mixedMathHandler},e.childrenAtEnd?null:e.children,i.createElement(o,{onKeyDown:e.onKeyDown,onKeyUp:e.onKeyUp,recordingKey:e.recordingKey,className:s()(e.inputClassName,v.sC),dataTestId:e.dataTestId,noLeftBorder:e.noLeftBorder,squareRightBorder:e.squareRightBorder,formatter:e.formatter,property:e.value??null,onMouseDown:u.dG,onChange:n,allowEmpty:e.allowEmpty,mixedMathHandler:e.mixedMathHandler,mixedMathCallback:e.mixedMathCallback,onFocus:e.onFocus,onBlur:e.onBlur,onClick:e.onClick,onMixedMathNudge:e.onMixedMathNudge,disabled:e.disabled??null===e.value,softDisabled:e.softDisabled,placeholder:e.placeholder,autoFocus:e.autoFocus,noBorderOnFocus:!0,forwardedRef:e.forwardedRef,ellipsis:a}),e.childrenAtEnd?e.children:null)}function S({onMouseEnter:e,onMouseLeave:r,onMouseEnterNonPropagating:n,...a}){let o={...I,...a,noBorderOnFocus:a.noBorderOnFocus||a.disableSelectFocus};return i.createElement("div",{className:a.className},i.createElement(g.a3,{id:a.id,inputClassName:a.inputClassName,dropdownClassName:a.dropdownClassName,dropdownWidth:a.dropdownWidth,willShowDropdown:a.willShowDropdown,formatter:a.formatter,property:a.value,onChange:(e,r=h.zk.YES)=>{a.onValueChange?.(e,r)},onKeyDown:a.onKeyDown,onKeyUp:a.onKeyUp,onInputFocus:a.onFocus,onInputBlur:a.onBlur,onMouseEnter:e,onMouseEnterNonPropagating:n,onMouseLeave:r,mixedMathHandler:a.mixedMathHandler,dispatch:a.dispatch,disabled:a.disabled,dropdownShown:a.dropdownShown,autoFocus:a.autoFocus,recordingKey:a.recordingKey,scrubbableControlProps:o,icon:a.icon,forwardedRef:a.forwardedRef,isTokenizable:a.isTokenizable,dataTestId:a.dataTestId,allowEmpty:a.allowEmpty,unNamespacedInputRecordingKey:a.unNamespacedInputRecordingKey,placeholder:a.placeholder,omitValueFromDropdown:a.omitValueFromDropdown,noPlaceholderLine:a.noPlaceholderLine,onboardingKey:a.onboardingKey,disableSelectFocus:a.disableSelectFocus,openBelowTarget:a.openBelowTarget,chevronClassName:a.chevronClassName,dropdownAlignment:a.dropdownAlignment,enablePreview:a.enablePreview,optionsWithDisabledPreviews:a.optionsWithDisabledPreviews},a.children))}function w(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,formatter:s}=e,l=(0,i.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}),[r,n,a,o]);return i.createElement(S,{...e,formatter:s??l})}function A(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}=e,s=(0,i.useMemo)(()=>new d.X9({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o}),[r,n,a,o]);return i.createElement(T,{...e,formatter:s})}function C(e){let{min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,onEvaluateExpressionError:s}=e,l=(0,i.useMemo)(()=>new d.Lk({min:r,max:n,smallNudgeAmount:a,bigNudgeAmount:o,onEvaluateExpressionError:s}),[r,n,a,o,s]);return i.createElement(T,{...e,formatter:l})}function N({min:e=0,max:r,floatingPointFormat:n,onEvaluateExpressionError:a,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,i.useMemo)(()=>new d.Lk({min:Math.max(e,0),max:r,smallNudgeAmount:s,bigNudgeAmount:l,floatingPointFormat:n,onEvaluateExpressionError:a}),[e,r,s,l,n,a]);return i.createElement(T,{...o,formatter:c})}function L({min:e=0,max:r,...n}){let{smallNudgeAmount:a,bigNudgeAmount:o}=n,s=(0,i.useRef)(!1),l=(0,i.useMemo)(()=>new d.NB({min:Math.max(e,0),max:r,smallNudgeAmount:a,bigNudgeAmount:o}),[e,r,a,o]),c=(0,p.gl)(n.value)&&n.mixedMathHandler,u=n.disabled||n.scrubbingDisabled||"number"!=typeof n.value&&!Array.isArray(n.value)&&!c,m=n.isTokenizable?E.$:f.p_;return i.createElement(b.b,{...I,...n,formatter:l,scrubbingDisabled:u,onScrubBegin:e=>{s.current=!0,n.onScrubBegin?.(e)},onScrubEnd:e=>{s.current=!1,n.onScrubEnd?.(e)},className:n.className},n.children,i.createElement(m,{forwardedRef:n.forwardedRef,disabled:n.disabled,className:n.inputClassName,formatter:l,property:n.value??null,source:s.current?"scrub":"document",onChange:e=>n.onValueChange(e,h.zk.YES),mixedMathHandler:n.mixedMathHandler,onMixedMathNudge:n.onMixedMathNudge,onBlur:n.onBlur,onFocus:n.onFocus,onNudge:n.onNudge,onKeyDown:n.onKeyDown,onClick:n.onClick,onPaste:n.onPaste,recordingKey:n.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:n.shouldClearOnFocus,placeholder:n.placeholder,dataTestId:n.dataTestId}))}function O({min:e,max:r,allowEmpty:n,...a}){let{smallNudgeAmount:o,bigNudgeAmount:s}=a,l=(0,i.useRef)(!1),c=(0,i.useMemo)(()=>new d.PZ({min:e,max:r,smallNudgeAmount:o,bigNudgeAmount:s,allowEmpty:n}),[e,r,o,s,n]),u=(0,p.gl)(a.value)&&a.mixedMathHandler,m=a.disabled||a.scrubbingDisabled||"number"!=typeof a.value&&!u,_=a.isTokenizable?E.$:f.p_;return i.createElement(b.b,{...I,...a,formatter:c,scrubbingDisabled:m,onScrubBegin:e=>{l.current=!0,a.onScrubBegin?.(e)},onScrubEnd:e=>{l.current=!1,a.onScrubEnd?.(e)},className:a.className},a.children,i.createElement(_,{forwardedRef:a.forwardedRef,disabled:a.disabled,className:a.inputClassName,formatter:c,property:a.value??null,source:l.current?"scrub":"document",allowEmpty:n,onChange:e=>a.onValueChange(e,h.zk.YES),mixedMathHandler:a.mixedMathHandler,onMixedMathNudge:a.onMixedMathNudge,onBlur:a.onBlur,onFocus:a.onFocus,onNudge:a.onNudge,onKeyDown:a.onKeyDown,onPaste:a.onPaste,recordingKey:a.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:a.shouldClearOnFocus,placeholder:a.placeholder,dataTestId:a.dataTestId}))}function R({max:e=3600,displayFractions:r=!1,...n}){let a=(0,i.useMemo)(()=>new d.f0(e,r),[e,r]);return i.createElement(T,{...n,formatter:a})}let P={...I,scrubMultiplier:4,wheelMultiplier:2};function D({min:e=0,max:r=1,decimals:n,hidePercentSign:a,...o}){let{smallNudgeAmount:s,bigNudgeAmount:l}=o,c=(0,i.useMemo)(()=>new d.LN({min:e,max:r,smallNudgeAmount:s,bigNudgeAmount:l,decimals:n,hidePercentSign:a}),[e,r,s,l,n,a]);return i.createElement(T,{...P,...o,formatter:c,postScrubMultiplier:.001,postBigNudgeAmount:.1})}function k(e){let r="ui3"===(0,a.DP)().version,{inputClassName:n,...o}=e,c=e.ui3RightJustifyPercentSign??!0,d=(0,y.P)((0,l.t)("fullscreen.scrubbable.opacity"));return r?i.createElement(D,{...o,inputClassName:s()(n,{[v.Ww]:c}),"data-tooltip-type":_.Ib.TEXT,"data-tooltip":d,hidePercentSign:c,childrenAtEnd:c},c?i.createElement("span",{className:v.QK},(0,l.tx)("fullscreen.scrubbable.percent")):e.children):i.createElement(D,{...e,"data-tooltip-type":_.Ib.TEXT,"data-tooltip":(0,l.t)("fullscreen.scrubbable.opacity"),tooltipForScreenReadersOnly:!0})}function M(e){let r=(0,i.useMemo)(()=>new d.cu({min:7.16,max:180}),[]);return i.createElement(T,{...e,formatter:r,postScrubMultiplier:.5,postBigNudgeAmount:.1,postWheelMultiplier:.2})}function F(e){let{min:r,smallNudgeAmount:n=c.bA,bigNudgeAmount:a=c._q,formatter:o}=e,s=(0,i.useRef)(!1),l=(0,i.useMemo)(()=>o??new d.h7({min:r,smallPixelNudgeAmount:n,bigPixelNudgeAmount:a}),[r,n,a,o]),u=e.isTokenizable?E.$:f.p_;return i.createElement(b.b,{...I,"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],tooltipForScreenReadersOnly:e.tooltipForScreenReadersOnly,className:e.className,value:e.value,onValueChange:e.onValueChange,smallNudgeAmount:n,bigNudgeAmount:a,scrubMultiplier:e.scrubMultiplier,disabled:e.disabled,scrubbingDisabled:e.disabled,dispatch:e.dispatch,formatter:l,onScrubBegin:()=>{s.current=!0},onScrubEnd:()=>{s.current=!1},noBorderOnHover:e.noBorderOnHover},e.children,i.createElement(u,{disabled:e.disabled,className:e.inputClassName,formatter:l,property:e.value,source:s.current?"scrub":"document",onChange:r=>e.onValueChange(r,h.zk.YES),recordingKey:e.recordingKey,noBorderOnFocus:!0,shouldClearOnFocus:e.shouldClearOnFocus,placeholder:e.placeholder}))}},760066:(e,r,n)=>{n.d(r,{sA:()=>N,sJ:()=>C});var i=n(411855),a=n(75395),o=n(464137),s=n(629019),l=n.n(s),c=n(966712),d=n(255942),u=n(153234),m=n(522739),p=n(163023),h=n(939863),_=n(13379),g=n(869156),f=n(318812),E=n(498606),y=n(893606),b=n(282263),v=n(683859),I=n(550624),T=n(389785),S=n(180840),w=n(5068);let A=i.forwardRef(function({children:e,disabled:r,icon:n,inputClassName:a,isActive:o,nonTextChild:s,noBorder:c,onMouseDownCapture:d,onContextMenuCapture:p,onFocus:h,onBlur:_,recordingKey:g},f){return i.createElement(m.D8,{forwardedRef:f,recordingKey:u.Pt(g,"comboInputControl","container"),className:l()(a,{[S.mc]:!0,[S.vu]:o,[S.KH]:!c,[S.r9]:r,[S.fE]:s}),onMouseDownCapture:d,onContextMenuCapture:p,onFocus:h,onBlur:_},i.createElement("div",{className:S.I6},e),!r&&n)}),C=i.forwardRef(function({inputClassName:e,inputRef:r,currentFieldValue:n,recordingKey:s,disabled:m,children:_,hideIcon:g=!1,nonTextChild:b,isActive:C,onPickerOpen:N,disableEntryPoint:L=!1,noBorder:O,hasBindingContextMenu:R,onClickDetachButton:P,onFocus:D,onBlur:k},M){let F=i.useId(),x=(0,i.useContext)(v.p),U=x?.boundVariableId,B=(0,i.useRef)(null),V=(0,y.R)(),{showing:G,show:H,data:K,hide:W}=(0,f.BK)(I.v+F),$=i.useCallback(()=>{N?N():x?.showBindingUI(B.current,{currentFieldValue:n}),W()},[n,W,N,x]),Y=i.useCallback(()=>{x?.onVariableSelected?.(void 0),W(),P?.()},[W,x,P]),z=u.rf(u.Pt(s,"detachIcon"),"click",Y),j=u.rf(s,"mousedown",e=>{if(e&&!L&&e.shiftKey){$(),e.preventDefault(),e.stopPropagation();return}}),q=u.rf(s,"contextmenu",e=>{e&&!L&&R&&r?.current&&(H({data:{position:{top:e.clientY,left:e.clientX}}}),e.preventDefault(),e.stopPropagation())});return i.createElement(i.Fragment,null,i.createElement(A,{recordingKey:s,inputClassName:l()(e,T.Gp),disabled:m,isActive:null!=C?C:!!x?.isShowingBindingUI,ref:(0,d.A)(M,B),onMouseDownCapture:j,onContextMenuCapture:q,nonTextChild:b,noBorder:O,icon:g||L?null:U?(0,c.kc)().ds_fpl_properties_panel?i.createElement(a.E,{className:(S.AM,S.Ab),htmlAttributes:{"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("variables.binding_ui.detach_variable_tooltip")},"aria-label":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),onClick:z},i.createElement(o.o,{className:S.HQ})):i.createElement("div",{className:l()(S.AM),role:"button",tabIndex:0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),"aria-label":(0,h.t)("variables.binding_ui.detach_variable_tooltip"),onClick:z},i.createElement(o.o,{className:S.HQ})):i.createElement(p.B,{recordingKey:u.Pt(s,"comboBoxButton"),className:l()(S.Kk),role:"button",ariaLabel:(0,h.t)("fullscreen.properties_panel.apply_variable"),"data-tooltip-type":V?E.Ib.TEXT:void 0,"data-tooltip":V?(0,h.t)("fullscreen.properties_panel.apply_variable"):void 0,svg:w.default,onClick:$,dataTestId:u.Pt("variable-control-icon",s??""),tabIndex:-1}),onFocus:D,onBlur:k},_),R&&r&&G&&"number"==typeof K?.position?.top&&"number"==typeof K?.position?.left&&i.createElement(I.G,{inputRef:r,isBound:!!x?.boundVariableId,left:K.position.left,onClose:W,onOpenVariablePicker:$,onUnbindVariable:z,recordingKey:u.Pt(s,"contextMenu"),top:K.position.top}))}),N=i.memo(function({fields:e,currentFieldValue:r,resolvedType:n,editingStyleGuid:a,inputClassName:o,inputRef:s,disabled:l,recordingKey:c,disableEntryPoint:d,hideIcon:u,noBorder:m,children:p,hasBindingContextMenu:h,onClickDetachButton:_,onBlur:f,onFocus:E}){let y=(0,g.SG)(e).data??[];return i.createElement(b._X,{fields:e,resolvedType:n,editingStyleGuid:a},i.createElement(C,{recordingKey:c,inputClassName:o,inputRef:s,disabled:l,currentFieldValue:r,disableEntryPoint:!!d||0===y.length,hideIcon:u,noBorder:m,hasBindingContextMenu:h,onClickDetachButton:_,onBlur:f,onFocus:E},p))});i.forwardRef(function({currentFieldValue:e,disabled:r,isActive:n,recordingKey:a,children:o,onPickerOpen:s,dataTestId:c,openOnRightClick:m,inputClassName:p,tooltip:h},g){let f=(0,i.useContext)(v.p),y=(0,i.useRef)(null),b=i.useCallback(()=>{s?s():f?.showBindingUI(y.current,{currentFieldValue:e})},[e,s,f]),I=u.rf(a,"mousedown",e=>{if(e&&!r){if(m){if((0,_.i)(e)){e.preventDefault(),e.stopPropagation();return}if(e.shiftKey&&1&e.buttons){b(),e.preventDefault(),e.stopPropagation();return}}else if(1&e.buttons){b(),e.preventDefault(),e.stopPropagation();return}}}),T=u.rf(a,"contextmenu",e=>{e&&!r&&(b(),e.preventDefault(),e.stopPropagation())});return i.createElement("div",{ref:(0,d.A)(g,y),className:l()(p,{[S.jX]:!0,[S.NH]:n&&!p}),onMouseDownCapture:I,onContextMenu:T,"data-testid":c,"data-tooltip-type":h?E.Ib.TEXT:void 0,"data-tooltip":h??void 0},o)})},489921:(e,r,n)=>{n.d(r,{A:()=>C});var i=n(411855),a=n(563706),o=n(188507),s=n(776250),l=n(181912),c=n(966712),d=n(418956),u=n(27087),m=n(939863),p=n(392592),h=n(101505),_=n(456104),g=n(582947),f=n(397065),E=n(394828),y=n(740280),b=n(864114),v=n(463546);let I=(0,g.r1)("seen_mobile_proto_download_modal_prompt");function T(){let e=(0,o.wA)(),r=(0,d.md)(I),n=(0,o.d4)(e=>e.userAnalyticsData?.is_active_mobile_user),a=(0,o.d4)(e=>e.user?.created_at),g=(0,l.A)(a).add(14,"day").isSameOrAfter((0,l.A)()),{isShowing:T,show:S,complete:w}=(0,_.e)({overlay:v.y3_,priority:f.N.DEFAULT_MODAL},[r]);if((0,i.useEffect)(()=>{S({canShow:e=>!!(0,c.kc)().mobile_download_modal_prompts&&!g&&!e&&!n})},[S,n,g]),!T)return null;let A=()=>{u.Ay.post("/api/send_mobile_download_email",{type:"prototype"}),(0,s.sx)("post_proto_mobile_app_download_prompt_email_me_cta_clicked"),w(),e(p.F.enqueue({message:(0,m.t)("rcs.mobile_comment_reply_upsell.email_sent")}))};return i.createElement(y.X,{isShowing:T,title:(0,m.tx)("mobile_download_prompts.mobile_interactions"),description:(0,m.tx)("mobile_download_prompts.run_your_mobile_prototypes"),media:i.createElement(E.y,{aspectRatio:1.75,alt:"A graphic show mobile prototypes with a qr code",src:(0,c.ck)("b50fba0faeea245feed92fe60337297d827e4984")}),primaryCta:{label:(0,m.tx)("mobile_download_prompts.email_me"),type:"button",onClick:()=>A(),ctaTrackingDescriptor:h.c.MOBILE_APP_DOWNLOAD_PROTOTYPE_PROMPT_CLICKED},trackingContextName:"Mobile Prototype Download Modal Prompt",onClose:()=>{w()},userFlagOnShow:"seen_mobile_proto_download_modal_prompt",position:b.Q.BOTTOM_RIGHT,secondaryCta:{label:(0,m.tx)("mobile_download_prompts.learn_more"),type:"link",href:"https://help.figma.com/hc/en-us/articles/1500007537281-Guide-to-the-Figma-mobile-app",ctaTrackingDescriptor:h.c.LEARN_MORE}})}var S=n(141810),w=n(754407),A=n(402609);let C=i.memo(function(){return i.createElement(i.Fragment,null,i.createElement(A.p,null,i.createElement(S.w,null)),!a.Xb&&i.createElement(A.p,null,i.createElement(T,null)),i.createElement(A.p,null,i.createElement(w.b,null)))})},433546:(e,r,n)=>{n.d(r,{wH:()=>l}),n(411855),n(188507);var i=n(517333),a=n(931828);function o(e){switch(e){case"default":return"color_management_desktop_app_setting_default";case"unmanaged":return"color_management_desktop_app_setting_unmanaged";case"managed":return"color_management_desktop_app_setting_managed";case"srgb":return"color_management_desktop_app_setting_srgb"}}function s(e,r){return e.getState().userFlags[r]}function l(e){if(!i.eD)return;let r=i.eD?.getLegacyColorSpacePreference();!function(e,r,n){let{isDefault:i,isManaged:s,isSrgb:l,isUnmanaged:c}=r,d={};i&&"default"!==n&&(d.color_management_desktop_app_setting_default=!1),c&&"unmanaged"!==n&&(d.color_management_desktop_app_setting_unmanaged=!1),s&&"managed"!==n&&(d.color_management_desktop_app_setting_managed=!1),l&&"srgb"!==n&&(d.color_management_desktop_app_setting_srgb=!1);let u=i&&"default"===n||c&&"unmanaged"===n||s&&"managed"===n||l&&"srgb"===n;void 0===n||u||(d[o(n)]=!0),Object.keys(d).length>0&&e(a.b(d))}(e.dispatch,{isDefault:!!s(e,o("default")),isUnmanaged:!!s(e,o("unmanaged")),isManaged:!!s(e,o("managed")),isSrgb:!!s(e,o("srgb"))},r)}n(309798)},161074:(e,r,n)=>{n(922827)},844647:(e,r,n)=>{n(411855),n(188507),n(320063);var i=n(716034);n(931828),n(456104),n(594524),n(502665),n(683694),n(723239);var a=n(582947);n(205548),n(875847),n(335682),n(99506),n(833629),n(397065),n(143678),n(916108),n(218997),n(242872),n(15839),n(463546),(0,i.eU)(!1),(0,a.r1)("dismissed_move_drafts_nudge")},288527:(e,r,n)=>{n.d(r,{s:()=>i}),n(411855),n(188507),n(931828),n(251960),n(456104),n(683694),n(723239),n(582947),n(205548),n(875847),n(335682),n(99506),n(279453),n(833629),n(397065),n(143678),n(218997),n(844647),n(242872),n(15839),n(463546);let i="Node Count Reached for Draft"},888699:(e,r,n)=>{n.d(r,{l5:()=>s});var i=n(716034),a=n(794321),o=(e=>(e.NOT_STARTED="NOT_STARTED",e.MODAL_SHOWING="MODAL_SHOWING",e.USE_CASE_STEPS="USE_CASE_STEPS",e.COMPLETED="COMPLETED",e))(o||{});(0,i.eU)("NOT_STARTED");let s=(0,i.eU)(a.fD.NONE);(0,i.eU)(!1)},92073:(e,r,n)=>{n.d(r,{Iv:()=>i});let i="sites-preview"},992303:(e,r,n)=>{n.d(r,{zM:()=>a}),n(411855),n(188507);var i=n(939863);n(501114),n(809840),n(693897),n(809831),n(226055),n(251960),n(456104),n(335682),n(239671),n(397065),n(340514),n(384775),n(157147),n(746806),n(601538),n(463546),n(178911);let a="open-playground-file-onboarding-event";(0,i.tx)("rcs.playground_file.switch_devmode_to_design_title")},384303:(e,r,n)=>{n.d(r,{oE:()=>o,zK:()=>a}),n(411855),n(939863),n(251960),n(456104);var i=n(582947);n(397065),n(218997),n(15839),n(463546);let a="plugin-publish-invite-publishers-onboarding-event",o="plugin-publish-invite-publishers-click-event";(0,i.r1)("seen_plugin_publish_invite_publishers_onboarding")},421407:(e,r,n)=>{n.d(r,{n:()=>i});let i=(0,n(716034).eU)(!1)},147723:(e,r,n)=>{n.d(r,{Ih:()=>i}),n(931828);let i="seen_ready_for_dev_callout"},179283:(e,r,n)=>{n.d(r,{Fw:()=>a}),n(966712);var i=n(716034);n(877723),n(321961),n(809831),n(226055),n(239671),n(239737),n(132572);let a="has_onboarded_ui3";(0,i.eU)(!1)},767553:(e,r,n)=>{n.d(r,{uQ:()=>a}),n(411855);var i=n(716034);n(723325);let a=1;(0,i.eU)(null),(0,i.eU)(null)},507956:(e,r,n)=>{n.d(r,{$A:()=>T,LS:()=>w,YY:()=>A,ks:()=>S});var i=n(188507),a=n(62227),o=n(922827),s=n(572304),l=n(298455),c=n(737947),d=n(966712),u=n(418956),m=n(179940),p=n(96328),h=n(939863),_=n(393812),g=n(233560),f=n(749229),E=n(56676),y=n(420576),b=n(321487),v=n(241437),I=n(239671);function T(e){return e?.view==="fullscreen"&&e?.editorType===I.nT.DevHandoff}function S(){return(0,i.d4)(e=>T(e.selectedView))}function w(){return(0,i.d4)(e=>T(e.selectedView)&&(0,_.Mx)(e)&&(e.mirror.appModel.currentTool===o.NLJ.SELECT||e.mirror.appModel.currentTool===o.NLJ.ANNOTATE||e.mirror.appModel.currentTool===o.NLJ.MEASURE))}class A{pathToSelectedView(e,r,n,i){let a=n?(0,m.v6)(n):{},o=r[1];if(("design"===o||"file"===o)&&("1"===a["ready-for-dev"]||("dev"===a.mode||"dev"===a.m)&&"auto"!==a.m)){let n="branch"===r[3]&&r[4]?r[4]:r[2],o=e?.fileByKey[n];if(null==o){let{editing_file:e}=(0,d.Ay)();e&&e.key===n&&(o=e)}let s={view:"fullscreen",editorType:e?.user?I.nT.DevHandoff:I.nT.Design,fileKey:n};(i=i?i.slice(1):"")&&("commentPreferences"===i?s.showCommentPreferencesPicker=!0:s.commentThreadId=i),a["node-id"]&&(s.nodeId=a["node-id"]),a["version-id"]&&(s.versionId=a["version-id"]),a["cc-version-id"]&&(a["node-id"]||a["cc-node-id"])&&!a.vars&&(s.compareChangesVersionId=a["cc-version-id"]),a["cc-activity-id"]&&(a["node-id"]||a["cc-node-id"])&&!a.vars&&(s.compareChangesActivityId=a["cc-activity-id"]),a["cc-filter-status"]&&(a["cc-version-id"]||a["cc-activity-id"])&&(a["node-id"]||a["cc-node-id"])&&!a.vars&&(s.filterStatusVersions="1"===a["cc-filter-status"]),a["cc-node-id"]&&a["cc-version-id"]&&!a.vars&&(s.compareChangesNodeId=a["cc-node-id"]),a["try-plugin-id"]&&(s.tryPluginId=a["try-plugin-id"]),a["try-plugin-version-id"]&&(s.tryPluginVersionId=a["try-plugin-version-id"]),a["try-plugin-name"]&&(s.tryPluginName=a["try-plugin-name"]),"1"===a["is-playground-file"]&&(s.isPlaygroundFile=!0),a["dev-mode-features-modal"]&&(s.devModeSupermodalTab=a["dev-mode-features-modal"]);let l=(0,g.b)(e);return"1"===a.vars&&(0,d.kc)().dt_dev_variables_table?(s.showDevModeVariablesTable=!0,u.zl.set(E.$,f.Nh.DirectUrl),a["var-id"]&&(s.devModeVariablesTableSelectedVariable=a["var-id"])):l&&"1"===a["ready-for-dev"]&&(s.showOverview=!0),s.showDevModeVariablesTable||u.zl.set(E.$,null),T(s)&&("dev"===a.mode||"dev"===a.m)&&(s.mode="dev",!l||!a["focus-id"]||s.showOverview||a.vars||(s.devModeFocusId=a["focus-id"],a["node-id"]||(s.nodeId=a["focus-id"]))),s}return null}requireHistoryChange(e,r){return!1}selectedViewToPath(e,r){if(T(e)||"fullscreen"===e.view&&!0===e.showOverview){let n;if(e.fileKey===v.Zt)return`/test/interactions${c.Ay.location.search}`;let i=this.selectedViewName(e,r),o=i?(0,p.sy)(i):"",u={},h=e.fileKey,_=e.fileKey&&r.fileByKey[e.fileKey],g="design";if(_){let e=(0,y.L8)(_,r.repos);n=(0,y.gN)(_,e,g)}else n=`/${g}/${h}`,o?n+=`/${o}`:n+="/Untitled";if(e.nodeId&&s.fn(s.sH(e.nodeId))&&(u["node-id"]=(0,b.EO)(e.nodeId)),(0,d.kc)().node_type_in_url&&e.nodeId&&s.fn(s.sH(e.nodeId)))try{let r=l.UN().get(e.nodeId)?.type;r&&["CANVAS","DOCUMENT"].includes(r||"")&&(u.p="f")}catch(e){if(!(e instanceof a.wL))throw e}return e.versionId&&(u["version-id"]=e.versionId),e.compareChangesVersionId&&(u["cc-version-id"]=e.compareChangesVersionId),e.filterStatusVersions&&(u["cc-filter-status"]=1),e.compareChangesNodeId&&(u["cc-node-id"]=(0,b.EO)(e.compareChangesNodeId)),e.devModeFocusId&&(u["focus-id"]=(0,b.EO)(e.devModeFocusId)),e.showOverview&&(u["ready-for-dev"]="1"),e.showDevModeVariablesTable&&(u.vars="1",e.devModeVariablesTableSelectedVariable&&(u["var-id"]=(0,b.Ml)(e.devModeVariablesTableSelectedVariable))),u.m="dev",Object.keys(u).length>0&&(n+=`?${(0,m.lF)(u)}`),e.commentThreadId&&(n+=`#${e.commentThreadId}`),n}return null}selectedViewName(e,r){if(T(e)){let n=null;if(e.fileKey){let i=r.fileByKey[e.fileKey];if(i){let e=(0,y.L8)(i,r.repos);n=e?(0,y.At)(i,e):i.name}}return n??(0,h.t)("dev_handoff.dev_handoff_view_selector.untitled")}return null}selectedViewHasMissingResources(e,r){return!!T(r)&&!!r.fileKey&&!(r.fileKey in e.fileByKey)}}},10582:(e,r,n)=>{n.d(r,{b:()=>p});var i=n(411855),a=n(243742),o=n(629019),s=n.n(o),l=n(946689),c=n(154254),d=n(501114),u=n(58440),m=n(236412);function p(e){let r="ui3"===(0,a.DP)().version,n=void 0!==e.media,o=void 0!==e.title,p=(e.stepCounter||e.primaryCta||e.secondaryCta||e.overrideFooter)!==void 0;return i.createElement(i.Fragment,null,i.createElement(u.AT,{isTooltip:e.isTooltip,title:e.title,description:e.description,onClose:e.onClose,emphasized:e.emphasized,hideCloseButton:e.hideCloseButton}),o&&!r&&i.createElement(l.Kz,{direction:"y",multiple:n?1.5:1}),n&&i.createElement(i.Fragment,null,e.media,!r&&i.createElement(l.Kz,{direction:"y",multiple:2})),o&&i.createElement("div",{className:s()(c.cx.font11.fontNormal.lh16.$,m.g),style:d.sx.add({letterSpacing:"0.055px"}).$},e.description),p&&i.createElement(i.Fragment,null,!r&&i.createElement(l.Kz,{direction:"y",multiple:n||!o?2:3}),e.overrideFooter?e.overrideFooter:i.createElement(u.CJ,{stepCounter:e.stepCounter,primaryCta:e.primaryCta,secondaryCta:e.secondaryCta,emphasized:e.emphasized})))}},58440:(e,r,n)=>{n.d(r,{AT:()=>b,CJ:()=>v});var i=n(411855),a=n(343887),o=n(139689),s=n(629019),l=n.n(s),c=n(966712),d=n(153234),u=n(799569),m=n(154254),p=n(939863),h=n(501114),_=n(672517),g=n(205058),f=n(928002),E=n(630834);let y=(0,_.tf)(({onClick:e,disabled:r,dataOnboardingKey:n,dataTestId:s="close-button","aria-label":l=(0,p.t)("general.close"),...c})=>i.createElement(a.K,{"aria-label":l,disabled:r,onClick:e,actionOnPointerDown:!0,htmlAttributes:{"data-onboarding-key":n,"data-test-id":s,"data-not-draggable":!0},recordingKey:(0,d.Pt)(c,"closeButton")},i.createElement(o.A,null)));function b(e){return i.createElement("div",{className:l()(m.cx.flex.justifyBetween.itemsCenter.$,f.nK,{[f.QC]:e.emphasized,[f.aj]:!e.title})},e.title?i.createElement("div",{className:l()(m.cx.font13.fontMedium.flexGrow1.if(!e.hideCloseButton,m.cx.pr32).$,f.AH),style:h.sx.add({letterSpacing:"-0.032px"}).$},e.title):i.createElement("div",{className:l()(m.cx.font11.fontNormal.lh16.wFull.if(!e.hideCloseButton,m.cx.pr32).$,f.Vs),style:h.sx.add({letterSpacing:"0.055px"}).$},e.description),!e.hideCloseButton&&((0,c.kc)().feature_education_fpl?i.createElement("div",{className:l()(f.b,{[f.Rf]:e.emphasized,[f.uI]:e.isTooltip})},i.createElement(y,{onClick:()=>e.onClose("close_button_clicked"),"aria-label":(0,p.t)("general.close")})):i.createElement(u.Jn,{onClick:()=>e.onClose("close_button_clicked"),innerText:"close","aria-label":(0,p.t)("general.close"),className:l()(f.b,{[f.Rf]:e.emphasized,[f.uI]:e.isTooltip}),svg:E.default})))}function v(e){return i.createElement("div",{className:l()(m.cx.flex.itemsCenter.justifyBetween.font11.fontMedium.lh16.$,f.J)},i.createElement("div",{className:m.cx.if(e.emphasized,m.cx.colorTextOnbrandSecondary,m.cx.colorTextSecondary).$,style:h.sx.add({letterSpacing:"0.055px"}).$},e.stepCounter&&(0,p.tx)("rcs.rcs_shared.step_counter",{currentStepNum:e.stepCounter.stepNum,totalNumSteps:e.stepCounter.totalNumSteps})),i.createElement("div",{className:m.cx.flex.flexWrap.gap8.$},e.secondaryCta&&i.createElement(g.F,{defaultVariant:"secondary",emphasized:e.emphasized,ctaButtonMeta:e.secondaryCta}),e.primaryCta&&i.createElement(g.F,{defaultVariant:"primary",emphasized:e.emphasized,ctaButtonMeta:e.primaryCta})))}},394828:(e,r,n)=>{n.d(r,{w:()=>d,y:()=>c});var i=n(411855),a=n(154254),o=n(501114),s=n(226055),l=n(697334);function c(e){let r=(0,s.GS)();return i.createElement("div",{className:l.Z,style:o.sx.colorIconOnbrand.colorBorder.bSolid.bb1.flex.add({aspectRatio:e.aspectRatio.toString()}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},i.createElement("img",{src:e.src,alt:e.alt,className:a.cx.flex.justifyCenter.alignCenter.overflowHidden.$}))}function d(e){let r=(0,s.GS)();return i.createElement("div",{style:o.sx.colorIconOnbrand.colorBorder.bSolid.bt1.bb1.flex.add({aspectRatio:e.aspectRatio.toString(),width:"-webkit-fill-available"}).add(r?{margin:"0"}:{margin:"0 -16px"}).$},i.createElement("video",{autoPlay:!0,muted:!0,loop:!0,"object-fit":"initial","aria-hidden":"true",style:o.sx.flex.justifyCenter.alignCenter.overflowHidden.$},i.createElement("source",{src:e.src,type:"video/mp4"})))}},21322:(e,r,n)=>{n.d(r,{j:()=>a});var i=n(411855);function a(e){(0,i.useEffect)(()=>{let r=r=>{"Escape"===r.key&&e()};return window.addEventListener("keydown",r),()=>window.removeEventListener("keydown",r)},[e])}},700886:(e,r,n)=>{n.d(r,{xx:()=>v});var i=n(411855);n(188507);var a=n(140593),o=n(629019),s=n.n(o);n(358145);var l=n(799569),c=n(946689),d=n(154254),u=n(939863),m=n(501114),p=n(553015),h=n(896474);n(662275);var _=n(101505),g=n(672517),f=n(226055),E=n(237870);n(147829);var y=n(474742),b=n(205058);function v(e){return i.createElement(g.fu,{name:e.trackingContextName,properties:e.trackingProperties},i.createElement(y.Nb,{animateIn:!0,className:d.cx.overflowHidden.colorText.$,padding:0,size:e.width??700,hide:r=>{switch(r){case y.Tc.CLICK_OUTSIDE:return e.onClose("modal_background_clicked");case y.Tc.PRESS_ESCAPE:return e.onClose("escape_button_pressed");default:(0,a.xb)(r)}},enableEscapeToClose:!0,disableClickOutsideToHide:!1===e.clickOutsideToHide},"landscape"===e.orientation?i.createElement(T,{...e}):i.createElement(I,{...e}),!e.hideCloseButton&&i.createElement(l.Jn,{innerText:(0,u.t)("general.close"),className:s()(d.cx.w32.h32.m8.absolute.top0.right0.colorIcon.$,{"feature_annoucement--closeButtonLight--Xjb45":"light"===e.closeButtonColor,"feature_annoucement--closeButtonDark--VMWkW":"dark"===e.closeButtonColor}),onClick:()=>e.onClose("close_button_clicked"),trackingProperties:{trackingDescriptor:_.c.CLOSE}}),i.createElement(N,{stepCounter:e.stepCounter})))}function I(e){let r=(0,f.GS)();return i.createElement("div",{className:d.cx.flex.$},i.createElement("div",{className:d.cx.flex.flexColumn.justifyCenter.p32.$},i.createElement("div",{className:d.cx.if(r,d.cx.textHeadingLarge,d.cx.fontInter.font24.fontSemiBold.lh32).$,style:m.sx.add({letterSpacing:"-0.456px"}).$},e.title),i.createElement(c.Kz,{direction:"y",multiple:1}),i.createElement("div",{className:d.cx.if(r,d.cx.textBodyLarge,d.cx.fontInter.font14.fontNormal.lh24).$,style:m.sx.add({letterSpacing:"-0.084px"}).$},e.description),(e.primaryCta||e.secondaryCta)&&i.createElement(i.Fragment,null,i.createElement(c.Kz,{direction:"y",multiple:3}),i.createElement("div",{className:d.cx.flex.gap8.$},e.primaryCta&&i.createElement(b.F,{defaultVariant:"primary",size:"big",ctaButtonMeta:e.primaryCta}),e.secondaryCta&&i.createElement(b.F,{defaultVariant:"secondary",size:"big",ctaButtonMeta:e.secondaryCta}))),e.disclaimerFooter&&i.createElement("div",{className:d.cx.textBodySmall.colorTextSecondary.pt8.$},e.disclaimerFooter)),e.media)}function T(e){let r=(0,f.GS)();return i.createElement("div",{className:d.cx.flex.flexColumn.$},e.media,i.createElement("div",{className:d.cx.flex.pl32.pr32.pt32.pb24.gap32.$},i.createElement("div",{className:d.cx.if(r,d.cx.textHeadingLarge,d.cx.fontInter.font24.fontSemiBold.lh32).w200.flexShrink0.$,style:m.sx.add({letterSpacing:"-0.456px"}).$},e.title),i.createElement("div",{className:d.cx.if(r,d.cx.textBodyLarge,d.cx.fontInter.font14.fontNormal.lh24).$,style:m.sx.add({letterSpacing:"-0.084px"}).$},e.description)),i.createElement("div",{className:d.cx.flex.pl32.pr32.gap8.justifyEnd.$},e.secondaryCta&&i.createElement(b.F,{defaultVariant:"secondary",size:"big",ctaButtonMeta:e.secondaryCta}),e.primaryCta&&i.createElement(b.F,{defaultVariant:"primary",size:"big",ctaButtonMeta:e.primaryCta})),e.disclaimerFooter&&i.createElement("div",{className:d.cx.textBodySmall.colorTextSecondary.$},e.disclaimerFooter),i.createElement(c.Kz,{direction:"y",multiple:4}))}function S(e){return i.createElement("div",{className:d.cx.absolute.left0.pl8.$,hidden:e.hidden},i.createElement(p.$,{variant:"text",onClick:e.onBack},i.createElement("div",{className:d.cx.font13.lh24.flex.itemsCenter.pr12.$},i.createElement(h.In,{icon:"chevron-left-32"}),(0,u.tx)("general.back"))))}function w(e){return i.createElement("div",{className:d.cx.absolute.right0.pr8.$,hidden:e.hidden},i.createElement(p.$,{variant:"text",onClick:e.onNext},i.createElement("div",{className:d.cx.font13.lh24.flex.itemsCenter.pl12.$},(0,u.tx)("general.next"),i.createElement(h.In,{icon:"chevron-right-32"}))))}function A(e){return i.createElement("div",{className:d.cx.absolute.right0.pr8.$,hidden:e.hidden},i.createElement(p.$,{variant:"text",onClick:e.onDone},i.createElement("div",{className:d.cx.font13.lh24.flex.itemsCenter.$},(0,u.tx)("general.done"))))}function C(e){let r=r=>r+1===e.stepNum;return i.createElement("div",{className:d.cx.flex.gap8.h32.justifyCenter.itemsCenter.absolute.left0.right0.mxAuto.$},Array(e.totalNumSteps).fill(0).map((e,n)=>i.createElement("div",{className:d.cx.w8.h8.bRadius8.b1.colorBorder.if(r(n),d.cx.colorBgInverse,d.cx.colorBg).$,key:n})))}function N(e){let{stepCounter:r}=e;if(!r)return null;let n=1===r.stepNum,a=r.stepNum===r.totalNumSteps;return i.createElement("div",{className:d.cx.p8.bt1.colorBorder.bSolid.h32.$},i.createElement(C,{stepNum:r.stepNum,totalNumSteps:r.totalNumSteps}),i.createElement(S,{onBack:r.onBack,hidden:n}),i.createElement(w,{onNext:r.onNext,hidden:a}),i.createElement(A,{onDone:r.onNext,hidden:!a}))}(0,E.Ju)(()=>null,"FeatureAnnouncement")},86411:(e,r,n)=>{n.d(r,{l:()=>a});var i=n(411855);function a(e,r,n){(0,i.useEffect)(()=>{let i=i=>{e&&r.current&&!r.current.contains(i.target)&&n()};return document.addEventListener("mousedown",i),()=>document.removeEventListener("mousedown",i)},[e,r,n])}},8267:(e,r,n)=>{n.d(r,{M:()=>o});var i=n(411855),a=n(134288);let o=i.forwardRef((e,r)=>{let n={};return e.shouldDisableAnimation||(n={initial:{translateY:10},animate:{translateY:0},transition:{duration:.2,ease:"easeInOut",translateY:{duration:1}},transformTemplate:(r,n)=>e.transformString?`${e.transformString} ${n}`:n}),i.createElement(a.P.div,{"data-preferred-theme":e.isTooltip?"dark":void 0,className:e.className,style:e.style,ref:r,role:"tooltip",layoutId:e.shouldDisableAnimation?void 0:"FeatureCallout",variants:n},e.children)})},281249:(e,r,n)=>{n(411855),n(188507),n(629019),n(818),n(108975),n(457630),n(507956),n(935832),n(354235),n(837746),n(663237),n(317258)},40963:(e,r,n)=>{n.d(r,{bU:()=>o,wh:()=>i}),n(966712);let i=new Set(["name","characters","symbolDescription","description","url"]),a=RegExp(`^(background|circle|column|component|dialog|document|ellipse|frame|group|icon|image|internal only canvas|line|padding|page|path|polygon|rectangle|row|star|text|union|vector)\\s*[\\d\\.]*$|^\\w\u2022+\\w( \\(\\d+ characters\\))?$`);function o(e,r){if(""===e)return"";if("show"===r)return e;let n='"'===e[0]&&'"'===e[e.length-1],i=n?e.substring(1,e.length-1):e;if(a.test(i.toLowerCase()))return e;let o=n?'"':"";return o+i[0]+i.substring(1,i.length-1).replace(/\S/g,"\u2022")+i[i.length-1]+o}},603478:(e,r,n)=>{n.d(r,{p:()=>s});var i=n(411855),a=n(966712),o=n(949012);i.memo(function(){return(0,a.kc)().internal_only_debug_tools?i.createElement(c,null):null});let s=i.memo(function(){return(0,a.kc)().internal_only_debug_tools?i.createElement(d,null):null}),l={loading:()=>null,error:function(){return i.useEffect(()=>{console.error("Failed to load FigmaScope")},[]),null}},c=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(2674),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForEditorEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForEditorEnabled"}),d=o.A.createLazyComponent(()=>Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(2674),n.e(7336)]).then(n.bind(n,99063)).then(e=>e.EmbeddedFigmaScopeViewForViewerEnabled),{...l,componentName:"EmbeddedFigmaScopeViewForViewerEnabled"})},515823:(e,r,n)=>{n.d(r,{_:()=>l});var i=n(966712),a=n(716034),o=n(694687),s=n(279453);let l=(0,a.eU)(e=>{let r=(0,i.kc)().mfa_for_guests,n=e(o.h0);if(!r||!n)return!1;let a=e(s.M9q.Query({orgId:n}));if("loaded"!==a.status)return!1;let l=a.data.currentUser.baseOrgUser?.isMfaRestricted;return l?.status==="loaded"&&!0===l.data})},392340:(e,r,n)=>{n.d(r,{Q:()=>c});var i=n(411855);n(188507);var a=n(776250),o=n(966712),s=n(915440),l=n(279453);function c(e,r){let n=i.useMemo(()=>({stuckMs:1e4,onEvent:(r,n,i)=>{var s,l;return s=e.currentOrgId,l=e.currentTeamId,void((0,o.kc)().file_browser_sidebar_lg_logging&&(0,a.sx)("File Browser Sidebar LG",{lgEvent:r,traceId:i.traceId,hasBeenOffline:i.wasOffline,hasBeenBackgrounded:i.wasBackgrounded,timeElapsedMs:i.timeElapsedMs,orgId:s,teamId:l,errors:JSON.stringify(n.errors)}))}}),[e.currentOrgId,e.currentTeamId]);return(0,s.oS)(l.$kt,e,{...r,subscriptionLogger:n})}},836397:(e,r,n)=>{n.d(r,{AN:()=>i}),n(411855),n(188507),n(922827),n(511617),n(697170),n(737947),n(563706),n(761870),n(195847),n(21452),n(163023),n(964389),n(939863),n(672517),n(138369),n(809831),n(151166),n(198371),n(892677),n(420576),n(122983),n(737499),n(335682),n(611978),n(860178),n(239671),n(463033),n(224857),n(915440),n(660656),n(738269),n(279453),n(540019),n(428467),n(713190),n(868861),n(510227),n(787337),n(893606),n(601538),n(804026),n(679282),n(966712),n(950949),n(662275),n(297174),n(407844),n(164795),n(826695),n(492167),n(629019),n(520614),n(373494);let i=120},804026:(e,r,n)=>{n(411855),n(188507),n(181912),n(737947),n(761870),n(939863),n(662275),n(335682),n(611978),n(880671)},679282:(e,r,n)=>{n.d(r,{PQ:()=>v});var i=n(411855),a=n(188507),o=n(140593),s=n(994531),l=n(697170),c=n(737947),d=n(733556),u=n(966712),m=n(586459),p=n(563706),h=n(761870),_=n(21452),g=n(140908),f=n(942830),E=n(447532),y=n(293692);function b({origin:e,iFrameHandler:r,overrideUseFedCMPrompt:n}){let p=window;try{window.origin===window.parent.origin&&(p=window.parent||window)}catch{}let E=(0,d.J)(()=>(0,f.o)(p),[p]),b=(0,a.wA)(),v=!!(0,g.S$)(),I=n??v,T=i.useRef(!1),S=i.useCallback(async({credential:n})=>{(0,_.g)("google_one_tap_login_start",e,{},{forwardToDatadog:!0});let i=(0,y.z)(n);if(!i)return;let a={name:i.name,token:n,tokenType:s.V.ID_TOKEN};if(r){r(a);return}try{b(h.WY({redirectUrl:function(){let e=c.Ay.location.pathname;try{window.origin===window.parent.origin&&(e=window.parent.location.pathname)}catch{}return e}()}));let r=await (0,l.W8)(a,{dispatch:b,apiUrl:l._B,origin:e});"login"===r.type&&((0,_.g)("google_one_tap_login_complete",e,{},{forwardToDatadog:!0}),b(h.My({userId:r.user.id})))}catch(e){p!==window&&p.postMessage({type:"auth_iframe_show"},"*"),b(h.Qg({message:e.message}))}},[e,r,b,p]);return i.useEffect(()=>{if(E.status===m.r.SUCCESS&&!T.current){T.current=!0;let r=E.value,{google_client_id:n}=(0,u.Ay)();(0,o.KF)(void 0!==n,"google_client_id should be defined in initialOptions"),r.accounts.id.initialize({client_id:n,callback:S,cancel_on_tap_outside:!1,itp_support:!0,use_fedcm_for_prompt:I}),r.accounts.id.prompt(r=>{if(I){let n=r.getMomentType();(0,_.g)("google_one_tap_prompt_moment",e,{momentType:n,reason:"dismissed"===n?r.getDismissedReason():void 0},{forwardToDatadog:!0});return}"display"===r.getMomentType()?r.isDisplayed()?(0,_.g)("google_one_tap_prompt_displayed",e,{},{forwardToDatadog:!0}):(0,_.g)("google_one_tap_prompt_display_failed",e,{reason:r.getNotDisplayedReason()},{forwardToDatadog:!0}):"skipped"===r.getMomentType()?(0,_.g)("google_one_tap_prompt_skipped",e,{reason:r.getSkippedReason()},{forwardToDatadog:!0}):"dismissed"===r.getMomentType()&&(0,_.g)("google_one_tap_prompt_dismissed",e,{reason:r.getDismissedReason()},{forwardToDatadog:!0})})}},[E,S,e,I]),null}function v(e){return u.kc()?.google_one_tap_killswitch||(0,u.sL)()||e.hideOnMobile&&(0,p.o4)()?null:i.createElement(E.d,null,i.createElement(b,{...e}))}},448211:(e,r,n)=>{n.d(r,{EO:()=>u,ZG:()=>m,iT:()=>s,l0:()=>d,xR:()=>l});var i=n(258600),a=n(778883),o=n(939863);function s(e){return"SECTION"===e}function l(e){if(0===Math.round(e.angle))return e;let r=(0,a.getCenteredRotation)(e.angle,e.width,e.height);return{...e,x:e.x-r[0][2],y:e.y-r[1][2]}}n(457630),n(357864);let c={x:0,y:0,width:1e3,height:1e3,angle:0};function d(e,r){let n=0!==Math.round(e.angle)?{transform:`rotate(${(360-e.angle).toString()}deg)`}:{},i=c;return"canvas"!==r&&(i=r),{position:"absolute",left:100*e.x/i.width+"%",top:100*e.y/i.height+"%",width:100*e.width/i.width+"%",height:100*e.height/i.height+"%",...n}}function u(e,r,n={x:1e3,y:1e3},a=i.s.identity().toFigMatrix()){let o=e.x/n.x,s=e.y/n.y,l=i.s.fromFigMatrix(a);if(!l.invert())return{position:"absolute",height:"1px",width:"1px"};l.multiply(i.s.fromFigMatrix(r));let c=l.offset(),d=l.toDegrees();return{position:"absolute",top:`${c.y/n.y*100}%`,left:`${c.x/n.x*100}%`,height:`${100*s}%`,width:`${100*o}%`,transform:`rotate(${d}deg)`,transformOrigin:"top left"}}function m(e){switch(e){case"DIAMOND":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-diamond");case"ELLIPSE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-ellipse");case"ENG_DATABASE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-database");case"ENG_FILE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-file");case"ENG_FOLDER":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-folder");case"ENG_QUEUE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-eng-queue");case"PARALLELOGRAM_RIGHT":case"PARALLELOGRAM_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-parallelogram-right");case"ROUNDED_RECTANGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-rounded-rectangle");case"SQUARE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-square");case"TRIANGLE_DOWN":case"TRIANGLE_UP":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-triangle-down");case"TRAPEZOID":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-trapezoid");case"STAR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-star");case"SHIELD":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-shield");case"HEXAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-hexagon");case"PENTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-pentagon");case"OCTAGON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-octagon");case"PLUS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-plus");case"PREDEFINED_PROCESS":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-predefined-process");case"MANUAL_INPUT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-manual-input");case"CHEVRON":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-chevron");case"DOCUMENT_SINGLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-single");case"DOCUMENT_MULTIPLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-document-multiple");case"ARROW_LEFT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-left");case"ARROW_RIGHT":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-arrow-right");case"SUMMING_JUNCTION":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-summing-junction");case"OR":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-or");case"SPEECH_BUBBLE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-speech-bubble");case"INTERNAL_STORAGE":return(0,o.t)("fullscreen.accessibility_dom.node_name_whiteboard-internal-storage");default:throw Error(`Unhandled shape type: ${e}`)}}},913964:(e,r,n)=>{n.d(r,{r:()=>o}),n(922827);var i=n(939863),a=n(239671);function o(e,r){switch(e){case"SECTION":return(0,i.t)("fullscreen.accessibility_dom.node_name_section");case"STICKY":return(0,i.t)("fullscreen.accessibility_dom.node_name_sticky");case"ROUNDED_RECTANGLE":case"SHAPE_WITH_TEXT":return(0,i.t)("fullscreen.accessibility_dom.node_name_shape");case"CONNECTOR":return(0,i.t)("fullscreen.accessibility_dom.node_name_connector");case"CODE_BLOCK":return(0,i.t)("fullscreen.accessibility_dom.node_name_code_block");case"LINE":return(0,i.t)("fullscreen.accessibility_dom.node_name_line");case"TEXT":return(0,i.t)("fullscreen.accessibility_dom.node_name_text");case"TABLE":return(0,i.t)("fullscreen.accessibility_dom.node_name_table");case"TABLE_CELL":return(0,i.t)("fullscreen.accessibility_dom.node_name_table_cell_generic");case"WIDGET":return(0,i.t)("fullscreen.accessibility_dom.node_name_widget");case"INSTANCE":if(r===a.nT.Whiteboard)return(0,i.t)("fullscreen.accessibility_dom.node_name_instance");return(0,i.t)("fullscreen.accessibility_dom.design.node_name_instance");case"STAMP":return(0,i.t)("fullscreen.accessibility_dom.node_name_stamp");case"CANVAS":if(r===a.nT.Whiteboard)return(0,i.t)("fullscreen.accessibility_dom.node_name_canvas");return(0,i.t)("fullscreen.accessibility_dom.design.node_name_canvas");default:return(0,i.t)("fullscreen.accessibility_dom.node_name_fallback")}}},681816:(e,r,n)=>{n.d(r,{B5:()=>O});var i=n(411855),a=n(188507),o=n(821910),s=n(543509),l=n(922827),c=n(629019),d=n.n(c),u=n(966712),m=n(659302),p=n(563706),h=n(939863),_=n(738269),g=n(259927),f=n(809831),E=n(356390),y=n(843495),b=n(457630),v=n(237395),I=n(425187),T=n(745968),S=n(448211),w=n(839653),A=n(951034),C=n(794535),N=n(610171),L=n(120825);let O={alwaysPan:!1,noPanViewportMultiplier:.9,panJustEnoughViewportMultiplier:1.5},R={jumpOnAbort:!0};function P(e){let r=(0,s.qE)(e.headerLevel,2,6);return e.header?i.createElement(i.Fragment,null,i.createElement("div",{role:"heading","aria-level":r,id:e.header.headerId},e.header.label),e.children):i.createElement(i.Fragment,null,e.children)}function D({accessibilityScope:e,nodeId:r,...n}){let a=(0,v.W)(r,e);if(!a)return null;let{childIds:o,...s}=a;return i.createElement(k,{...n,...s,nodeId:r,childIds:o,accessibilityScope:e})}let k=i.memo(({childIds:e,...r})=>{let{accessibilityScope:n,isDebugMode:a,navigate:o,nodeId:s,headingLevel:l,suppressIds:c,type:d,absoluteTransform:u,dimensions:m,transformProperties:p}=r,h=(0,S.iT)(d)?l+1:l,_=e.length;return i.createElement(M,{...r,size:_},e.map((e,r)=>i.createElement(D,{key:e,nodeId:e,accessibilityScope:n,isDebugMode:a,navigate:o,headingLevel:h,setSize:_,setPosition:r+1,suppressIds:c,parent:{dimensions:m,transformProperties:p,absoluteTransform:u,guid:s}})))},function({directTextContent:e,innerTextContent:r,tableCells:n,transformProperties:i,childIds:s,stampFrequencies:l,accessibleLabel:c,absoluteTransform:d,dimensions:u,parent:m,...p},{directTextContent:h,innerTextContent:_,tableCells:g,transformProperties:f,childIds:E,stampFrequencies:y,accessibleLabel:b,absoluteTransform:v,dimensions:I,parent:T,...S}){return(0,a.bN)(p,S)&&(0,a.bN)(u,I)&&(0,a.bN)(d,v)&&(0,a.bN)(i,f)&&(0,a.bN)(l,y)&&(0,a.bN)(c,b)&&(0,a.bN)(s,E)&&(0,a.bN)(m?.absoluteTransform,T?.absoluteTransform)&&(0,a.bN)(m?.dimensions,T?.dimensions)&&(0,a.bN)(m?.transformProperties,T?.transformProperties)&&(0,o.c2)(e,h)&&(0,o.c2)(r,_)&&(0,o.c2)(n,g)});function M({children:e,setSize:r=1,setPosition:n=1,headingLevel:o=2,author:s,transformProperties:c,directTextContent:v,innerTextContent:A,tableCells:N,headerLabel:D,guid:k,isDebugMode:M,navigate:x,ariaRole:U,name:B,shapeType:V,size:G,type:H,nodeId:K,suppressIds:W,stampFrequencies:$,accessibleLabel:Y,contentsHidden:z,dimensions:j,absoluteTransform:q,parent:Z}){let X;let J=(0,a.Pj)(),Q=J.getState().comments.showResolved,ee=(0,a.d4)(e=>e.mirror.appModel.showComments),et=J.getState().mirror.sceneGraph,er=(0,S.iT)(H)?o+1:o,en=(0,f.E3)(),ei=(0,w.E)({type:H,shapeType:V,ariaRole:U,name:B,setData:{size:r,i:n,headerLevel:o},numChildren:G,stampFrequencies:$,accessibleLabel:Y,contentsHidden:z,editorType:en}),ea=!Z;if((0,u.kc)().a11y_dom_css_positioning)X=ea?(0,S.EO)(j,q):(0,S.EO)(j,q,Z.dimensions,Z.absoluteTransform);else{let e=ea?"canvas":Z.transformProperties;X=(0,S.l0)(c,e)}let eo=(0,C.rp)(v,C.d2.SEMANTIC),es=(0,C.rp)(A,C.d2.SEMANTIC),el=(0,C.Dm)(et,K,N),ec=D?{label:D,headerId:`sectionHeaderFor-${k}`}:null,ed=(0,a.d4)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return(e.mirror.appModel.activeCanvasEditModeType!==l.m1T.TEXT&&1===r.length?r[0]:"")===k}),{groupCommentNodeId:eu,groupCommentTransformProperties:em,groupSize:ep}=function(e,r){let n,i,a;let o=r.get(e)?.parentGuid,s=o?r.get(o):void 0;for(;s?.resizeToFit;){n=s.guid??e;let i=s.parentGuid;s=i?r.get(i):void 0}if(n){let r=l.glU.getSortedChildGuids(n);r.length>0&&r[r.length-1]===e?(a=r.length,i=(0,S.xR)(l.Egt.getNodeTransformProperties(n))):n=void 0}return{groupCommentNodeId:n,groupCommentTransformProperties:i,groupSize:a}}(k,et);(function(e,r,n,a,o,s,l,c,d){let u=(0,m.Xr)(I.f),p=(0,f.E3)();i.useEffect(()=>{e&&u({type:"SET_CURRENTLY_SELECTED_NODE",payload:{nodeId:d,ariaLabel:(0,w.E)({type:r,shapeType:n,name:a,accessibleLabel:o,setData:{size:s,i:l,headerLevel:c},editorType:p})}})},[o,c,l,e,a,d,n,s,r,u,p])})(ed,H,V,B,Y,r,n,o,K),i.useLayoutEffect(()=>{if(W)return;let e=document.getElementById(k);e&&(ed&&!l.VDs.getExpectingTextInput()?(e.setAttribute("tabindex","0"),e.focus()):(e.setAttribute("tabindex","-1"),e.blur()))},[k,ed,W]);let[eh,e_]=(0,T.l)(M?[Z,s,c,v,A,D,k,ed,U,B,V,H,K,W]:[]);return i.createElement(i.Fragment,null,i.createElement("div",{id:W?void 0:k,ref:e_,role:U,className:d()(L.rH,M&&eh),style:X,"aria-label":ei,tabIndex:-1,contentEditable:p.Ay.windows&&ed?"true":void 0,onContextMenu:e=>{J.dispatch(_.j7({type:g.K9,data:{clientX:e.clientX,clientY:e.clientY}})),e.preventDefault()},onFocus:e=>{e.target!==e.currentTarget||e.relatedTarget===e.currentTarget||ed||(y.wr(),y.Dh([k]),E.Y5.commit(),x((0,b.QZ)({nodeId:k,...O}),R))},"data-guid":W?k:void 0,"data-fullscreen-intercept-dangerously-include-tab":!0},i.createElement(P,{header:ec,headerLevel:er},es.length>0?es:null,eo.length>0?eo:null,null!=s&&(0,h.tx)("fullscreen.accessibility.author",{authorName:s}),el.length>0?el:null,e),ee?i.createElement(F,{guid:k,navigate:x,isDebugMode:M,parentTransformProperties:c,showResolved:Q,intermediateTransformProperties:void 0,parentAbsoluteTransform:q,parentDimensions:j}):null),ee&&eu?i.createElement(F,{guid:eu,navigate:x,isDebugMode:M,parentTransformProperties:"canvas",intermediateTransformProperties:em??c,showResolved:Q,groupSize:ep,parentAbsoluteTransform:void 0,parentDimensions:void 0}):null)}function F({guid:e,isDebugMode:r,navigate:n,isTopLevel:a,groupSize:o,parentTransformProperties:s,intermediateTransformProperties:l,showResolved:c,parentAbsoluteTransform:d,parentDimensions:u}){let m=(0,N.x)(e,c),p=i.createElement(A.X,{threads:m,navigate:n,isDebugMode:r,parentTransformProperties:s,intermediateTransformProperties:l,parentAbsoluteTransform:d,parentDimensions:u});if(!m||0===m.length)return null;if(a)return i.createElement("div",{role:"region","aria-labelledby":"canvas-comments-heading"},i.createElement("h2",{id:"canvas-comments-heading"},(0,h.tx)("fullscreen.accessibility_dom.unattached_comments")),p);if(!o)return p;{let e=(0,h.t)("fullscreen.accessibility_dom.grouped_comments",{groupSize:o});return i.createElement("div",{role:"group","aria-label":e},p)}}},274071:(e,r,n)=>{function i(){let e=document.getElementById("fullscreen-root")?.getElementsByClassName("focus-target");if(null==e)return null;for(let r of e){let e="application"===r.getAttribute("role")||"application"===r.role;if(r.hasAttribute("readonly")&&e)return r}return null}function a(){i()?.focus()}n.d(r,{$z:()=>a,lo:()=>i}),n(411855),n(188507),n(922827),n(794272),n(96328),n(939863),n(392592),n(529906),n(21067),n(356390),n(239671),n(861802),n(913964)},405206:(e,r,n)=>{n.d(r,{a1:()=>_});var i=n(411855),a=n(902008),o=n(629019),s=n.n(o),l=n(268537),c=n(638889),d=n(46481);n(154254);var u=n(467492),m=n(813421);function p(e){return i.createElement("div",{className:u.zc},e.children)}function h(e){return i.createElement("div",{className:u.ro},e.children)}function _(e){return i.createElement(l.c$,{disabled:!e.isEnabled,onClick:e.onClick,onPointerUp:e.onPointerUp,recordingKey:e.recordingKey,className:s()(u.NV,{[u.Kt]:e.inPanel}),buttonRef:e.buttonRef,onboardingKey:e.onboardingKey,simulateHover:e.simulateHover,tooltip:e.tooltip},!e.hideCheck&&i.createElement("div",{className:u.l8},e.isChecked&&i.createElement(d.U,{svg:m.A},i.createElement(a.l,null))),e.children&&i.createElement(p,null,e.children),i.createElement("div",{className:u.Qq},e.text),e.shortcut?i.createElement(c.S,{shortcut:e.shortcut,className:u.LE}):e.rightIcon&&i.createElement(h,null,e.rightIcon))}},81804:(e,r,n)=>{n.d(r,{rA:()=>o});var i=n(922827),a=n(179536);let o={[i.D1Y.TEXT]:0,[i.D1Y.FRAME_OR_GROUP]:0,[i.D1Y.COMPONENT]:0,[i.D1Y.INSTANCE]:0,[i.D1Y.IMAGE]:0,[i.D1Y.SHAPE]:0,[i.D1Y.OTHER]:0};[...a.b4,...a._V];var s=(e=>(e[e.PREV=-1]="PREV",e[e.NONE=0]="NONE",e[e.NEXT=1]="NEXT",e))(s||{})},467594:(e,r,n)=>{n.d(r,{c:()=>_,o:()=>g});var i=n(411855),a=n(96796),o=n(153234),s=n(163023),l=n(47506),c=n(738269),d=n(516398),u=n(498606),m=n(718520),p=n(289298);class h extends o.uA{constructor(e){super(e),this._onChevronToggleDropdown=()=>{if(this.props.inLoggedOutDesktopRevampExp?.()){this.props.showAuthModalForLoggedOutExp?.();return}if(!this.props.dispatch||!this.props.dropdownKey)return;if(this.props.showingDropdown){this.props.dispatch(c.oB());return}let e=this.chevronRef.current;this.props.dispatch(c.j7({type:this.props.dropdownKey,data:{...this.props.additionalDispatchData,targetRect:e.getBoundingClientRect()}})),this.props.rcsHandlerId&&(0,l.YQ)({id:this.props.rcsHandlerId,properties:{dropdownKey:this.props.dropdownKey}})},this.onChevronClicked=o.cZ(this,this.props.toggleOnClick?"click":"mousedown",e=>{this._onChevronToggleDropdown(),this.props.dispatch&&this.props.dropdownKey&&e.stopPropagation()}),this._onChevronStopPropagation=e=>{e.stopPropagation()},e.divRef?this.chevronRef=e.divRef:this.chevronRef=i.createRef()}render(){let e=[m.FH,this.props.showingDropdown?m.u:"",this.props.className||"",this.props.disableHoverAnimation?m.y$:""].join(" "),r=[m.cN,this.props.svgContainerClassName||""].join(" "),n=0===this.props.tabIndex;return i.createElement("div",{className:e,ref:this.chevronRef,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":this.props.tooltipText,onMouseDown:this.props.toggleOnClick?void 0:this.onChevronClicked,onClick:this.props.toggleOnClick?this.onChevronClicked:this._onChevronStopPropagation,"data-testid":this.props.dataTestId,"data-onboarding-key":this.props.dataOnboardingKey,tabIndex:this.props.tabIndex,role:n?"button":void 0,onKeyDown:e=>(0,d.hx)({e,onClickHandler:e=>{this._onChevronToggleDropdown()},onEscapeHandler:e=>{this.chevronRef?.current?.blur()}}),"aria-label":n?this.props.ariaLabel:void 0},this.props.isUI3?i.createElement(a.O,null):i.createElement(s.B,{svg:this.props.iconOverride||p.A,className:r}),this.props.children)}}function _(e){return i.createElement(h,{...e})}function g(e){return i.createElement(h,{...e})}h.displayName="Chevron"},7860:(e,r,n)=>{n.d(r,{t:()=>a});var i=n(411855);n(922827),n(358145),n(818),n(506599),n(187882);let a=(0,i.createContext)({isLeftPanelCollapsed:!1,isRightPanelCollapsed:!1})},708212:(e,r,n)=>{n.d(r,{q:()=>O});var i=n(411855),a=n(188507),o=n(568214),s=n(966712),l=n(572206),c=n(799569),d=n(271779),u=n(939863),m=n(392592),p=n(553015),h=n(738269),_=n(662275),g=n(801161),f=n(259927),E=n(463304),y=n(498606),b=n(237870),v=n(336298),I=n(697373),T=n(228131),S=n(474742),w=n(421689),A=n(667241),C=n(710010);let N={shouldZoomToStart:!1,shouldWheelPan:!0,enableZoomControls:!0,enableZoomKeyControls:!0,minZoomFactor:.01,maxZoomFactor:10,crossOrigin:"use-credentials"};var L=(e=>(e[e.LEFT=-1]="LEFT",e[e.RIGHT=1]="RIGHT",e))(L||{});let O=(0,b.Ju)(function(e){let r=(0,a.wA)(),[n,b]=i.useState(e.selectedIdx),L=i.useRef(null),[O,R]=i.useState(null),P=i.useRef(null),{onUpdateAltText:D}=e,[k,M]=i.useState(e.attachments),F=(0,I.UR)(T.b.ATTACHMENT_MODAL_BACKGROUND_COLOR),x=F?(0,o.H0)(F):void 0,U=e=>{if(L.current){let r=L.current?.children[e].firstChild;r?.blur()}},B=e=>{U(n),b(e),R(null)},V=e=>{B((n+e+k.length)%k.length)},G=e=>{let r=n===(-1===e?0:k.length-1);return i.createElement(p.$,{onClick:()=>V(e),icon:-1===e?"chevron-left-32":"chevron-right-32",variant:"text",disabled:r})},H=e=>{if("ArrowLeft"===e.key)0!==n&&V(-1);else if("ArrowRight"===e.key){if(n===k.length-1)return;V(1)}},K=()=>(r(_.Lo()),!0);(0,E.O1)(K,E.KD.FULL_SCREEN_MODAL);let W=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(h.j7({type:f.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))},$=i.useRef(null),Y=i.useCallback(()=>{if(P.current&&!O){let e=P.current.getBoundingClientRect(),n=new l.Mi(e.left+e.width/2,e.top);r(g.jD()),R(n)}else R(null)},[r,O]),z=i.useCallback(e=>{if($.current){let i=$.current.value.trim();(i||e)&&D(i,n).then(e=>{e&&(200!==e.status?r(m.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")})):M(e=>(e[n]={...e[n],altText:i},e)))}).catch(e=>{r(m.F.enqueue({message:(0,u.t)("comments.failed_to_update_alt_text")}))})}R(null)},[r,D,n]);return i.createElement(i.Fragment,null,i.createElement(d.i,{displayAs:d.C.Block},i.createElement(S.aF,{className:C.zw,size:"any",onKeyDown:e=>{H(e)}},i.createElement("div",{className:C.qG},i.createElement("div",{className:C.N1},i.createElement("div",{className:C.qd},k[n].metadata.file_name??(0,u.t)("comments.attachment_default_name",{fileExtension:k[n].mediaType.split("/")[1]})),i.createElement(c.Jn,{className:C.yu,recordingKey:"commentMediaDetailModal",onClick:K,innerText:(0,u.t)("comments.close"),"aria-label":(0,u.t)("comments.close")})),i.createElement("div",{className:C.xs},i.createElement(w.DH,{imageSrc:k[n].imageUrl,onContextMenu:e=>{W(e,k[n])},pageBackgroundColor:x??void 0,...N}),!!(0,s.kc)().comments_media_alt_text&&(e.canEdit||k[n].altText)&&i.createElement("button",{className:k.length>1?C.dE:C.R5,"data-tooltip-type":y.Ib.TEXT,"data-tooltip":O?void 0:(0,u.t)("comments.add_description"),"data-tooltip-show-above":!0,onClick:()=>O?z(k[n].altText):Y(),ref:P},(0,u.t)("comments.alt_text"))),k.length>1&&i.createElement("div",{className:C.Qc},G(-1),i.createElement("div",{ref:L,className:C.iT},k.map((e,r)=>i.createElement("div",{key:e.thumbnailUrl,className:C.ub},i.createElement(A.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,u.t)("comments.attachment_thumbnail_alt_text_default"),isSelected:r===n,onClick:e=>{B(r)},onRightClick:r=>W(r,e)})))),G(1)))),O&&i.createElement(v.A,{text:k[n].altText??"",location:O,onEnter:()=>z(k[n].altText),onEscape:()=>(R(null),!0),inputRef:$,canEdit:e.canEdit})))},"AttachmentDetailModal",b.ZU.NO)},667241:(e,r,n)=>{n.d(r,{M:()=>m});var i=n(411855),a=n(493323),o=n(939863),s=n(277810),l=n(456622);let c=e=>e.height<256&&e.width<256,d=e=>e.height/e.width>2||e.width/e.height>2,u=e=>e.width>e.height?{width:256,height:128}:{width:128,height:256};function m(e){let r=e.dimensions??void 0,n=r&&(c(r)?r:d(r)?u(r):(0,s.$K)(r.width,r.height,256));return i.createElement("button",{className:e.isSelected?l.ig:l.vi,onClick:()=>{e.onClick(e.thumbnailUrl)},style:n&&{width:`${n.width}px`,height:`${n.height}px`},onContextMenu:r=>{e.onRightClick&&e.onRightClick(r)}},i.createElement("img",{src:e.thumbnailUrl,crossOrigin:"use-credentials",alt:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),className:l.q_}),i.createElement("div",{className:e.overlayText||e.isUploading?l.Xu:l.VO},e.isUploading&&i.createElement(a.kt,null),e.overlayText))}},30990:(e,r,n)=>{n.d(r,{a:()=>_});var i=n(411855),a=n(188507),o=n(939863),s=n(738269),l=n(662275),c=n(259927),d=n(328775),u=n(708212),m=n(667241),p=n(884857),h=n(456622);function _(e){let r=(0,a.wA)(),{attachments:n}=e,_=i=>{r((0,l.to)({type:u.q,data:{attachments:n,selectedIdx:n.map(e=>e.thumbnailUrl).indexOf(i),onUpdateAltText:g,canEdit:e.canEdit},showModalsBeneath:!0}))},g=(r,i)=>{let a=n[i];return d.l.put(e.fileKey,a.id,r)},f=(e,n)=>{e.preventDefault(),e.stopPropagation(),r(s.j7({type:c.DT,data:{id:"comment_attachment_context_menu",clientX:e.clientX,clientY:e.clientY,attachment:n}}))};return i.createElement("div",{className:p.KK},n.slice(0,3).map((e,r)=>i.createElement("div",{key:e.id,className:h.Kn},i.createElement(m.M,{thumbnailUrl:e.thumbnailUrl,altText:e.altText||(0,o.t)("comments.attachment_thumbnail_alt_text_default"),overlayText:n.length>3&&2===r?`+${n.length-3}`:void 0,onClick:_,onRightClick:r=>f(r,e),dimensions:0===r&&1===n.length?e.metadata.dimensions:void 0}))))}},984871:(e,r,n)=>{n.d(r,{Z5:()=>c,i$:()=>o,uw:()=>l});var i=n(411855),a=n(966712);let o={minZoomPercentage:76,zoomScaleOverlap:64,clusterClickResultViewportPercentage:35,rebuildClustersZoomDelay:50,disableSidebar:!1},s=new Set;function l(e){if(!(0,a.kc)().internal_only_debug_tools)return;let r="function"==typeof e?e({...o}):e;o={...o,...r},requestAnimationFrame(()=>{s.forEach(e=>e(o))})}function c(){let[e,r]=i.useState(o);return i.useEffect(()=>{let e=e=>{r(e)};return s.add(e),()=>{s.delete(e)}},[r]),e}},517911:(e,r,n)=>{n.d(r,{Ao:()=>s,Ko:()=>c,LX:()=>o,c4:()=>d,xN:()=>l});var i=n(841563),a=n.n(i),o=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ACTIVE=1]="ACTIVE",e[e.DIMMED=2]="DIMMED",e))(o||{});function s(e,r){return`${100*Math.round(e.x/100)},${100*Math.round(e.y/100)},${r}`}function l(e,r){if(e.isSinglePin&&r.isSinglePin){var n,i;return n=e.pins[0],i=r.pins[0],n.x!==i.x||n.y!==i.y||!a()(n.avatars,i.avatars)||!a()(n.previewMessageMeta,i.previewMessageMeta)||n.isUnread!==i.isUnread||n.numUnreadReplies!==i.numUnreadReplies||n.isResolved!==i.isResolved||!a()(n.selectionBoxAnchor,i.selectionBoxAnchor)||!a()(n.otherBoundingBoxes,i.otherBoundingBoxes)||!a()(n.isPinnedToFile,i.isPinnedToFile)}return e.pins.length!==r.pins.length||e.isUnread!==r.isUnread||e.isPinnedToFile!==r.isPinnedToFile}let c={length:0,leafNodes:new Set([]),all:()=>[],getParentOf:()=>null,zoomScale:-1};function d(e){let r=new Map,n=[];return e.forEach(e=>{if(r.has(e.user.id)){let i=r.get(e.user.id);n[i].num_unread_comments+=e.isUnread?1:0,n[i].num_comments+=1}else n.push({avatar_url:e.user.img_url,avatar_user_id:e.user.id,avatar_user_handle:e.user.handle,num_unread_comments:e.isUnread?1:0,num_comments:1}),r.set(e.user.id,n.length-1)}),n}},593392:(e,r,n)=>{n.d(r,{p:()=>l});var i=n(411855),a=n(572206),o=n(457630),s=n(350022);function l(e){let r=(0,o.Cj)(),n=a.Mi.scale(-1,r);return i.createElement("div",{className:s.M,style:{top:r.y,left:r.x,height:r.height,width:r.width}},i.createElement("div",{className:s.W,style:{top:n.y,left:n.x}},e.children))}},400333:(e,r,n)=>{n.d(r,{HH:()=>N,xT:()=>I});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(776250),c=n(934480),d=n(733334),u=n(946689),m=n(46221),p=n(939863),h=n(677664),_=n(611978),g=n(860178),f=n(416822),E=n(498606),y=n(516093),b=n(527429),v=n(771931);function I(e){let r=RegExp("^\\w+:"),n=e.match(r);return""===e||n&&["http:","https:","mailto:","tel:"].includes(n[0].toLowerCase())?e:"https://"+e}let T=i.memo(e=>{let{text:r,hyperlink:n}=e,o=i.useMemo(()=>(0,c.x6)(r),[r]),s=(0,_.z3)(),l=(0,a.wA)();return i.createElement(u.CY,{onClick:()=>{l((0,h.RK)({rawInput:I(n)}))},"data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":E.MW.HYPERLINK_POPUP,"data-tooltip-show-above":!0,"data-tooltip-unconstrain-width":!0,"data-tooltip-editor-type":s,"data-tooltip-url-string":n,"data-tooltip-interactive":!0,"data-tooltip-precise":!0,trusted:!1},o)}),S=i.memo(e=>{let{userId:r,imgUrl:n,handle:a,href:o}=e;return i.createElement(u.CY,{href:o,target:"_blank","data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":n,"data-tooltip-user-handle":a,"data-tooltip-unconstrain-width":!0,"data-mention-user-id":r,trusted:!0},a)}),w=i.memo(function(e){let r=g.iZ()?.community_profile_id,{handle:n,commentId:a,profileId:o,profileName:s,profileImgUrl:c}=e,m=(0,d.F)(n),p=(0,d.F)(s);return i.createElement(u.CY,{href:`/${m}`,target:"_blank","data-tooltip-type":E.Ib.SPECIAL,"data-tooltip":y.N,"data-tooltip-show-above":!0,"data-tooltip-user-img-url":c,"data-tooltip-user-handle":p,"data-tooltip-unconstrain-width":!0,onClick:()=>{(0,l.sx)("at_mention_link_clicked",{mentioned_profile_id:o,profile_id:r,comment_id:a})},trusted:!0},m)}),A=i.memo(e=>{let{text:r,tokenStyles:n}=e,a=i.useMemo(()=>(0,c.x6)(r),[r]),o=n?.map(e=>"b"===e?v.hp:"i"===e?v.u5:"s"===e?v.Vc:"lightbold"===e?v.XH:void 0)||[];return i.createElement(m.M,null,i.createElement("span",{className:s()(o)},a))}),C=i.memo(e=>{let{text:r,userId:n,profileId:a,user:o,orgPath:s,profiles:l,commentId:c,tokenStyles:u,hyperlink:m}=e,p=(0,d.F)(r);if(n)return i.createElement(S,{href:`/files${s}/user/${n}`,userId:n,handle:(0,d.F)(o?.handle)||void 0,imgUrl:o?.img_url});if(a&&p){let e="@"+p,r=l?.[a];return r?i.createElement(w,{handle:e,commentId:c,profileId:r.id,profileName:r.name,profileImgUrl:r.img_url}):i.createElement("span",null,e)}if(null===a&&p){let e="@"+p;return i.createElement("span",null,e)}let h=m&&I(m);return h&&p&&(0,b.$)(h)?i.createElement(T,{text:p,hyperlink:h}):p?i.createElement(A,{text:p,tokenStyles:u}):null}),N=i.memo(e=>{let r=(0,f.q)(),n=(0,a.d4)(r=>e.mentionedProfiles||r.communityHub?.comments?.mentionedProfiles),o=(e,r,n,a,s)=>e.map((e,l)=>{let c="";if(e.styles?.includes("ul")?c=v.ty:e.styles?.includes("ol")&&(c=v.A9),e.children?.length){let d=e.children.map((e,d)=>i.createElement("li",{key:`li-${r}-${l}-${d}`,className:c},o(e.children,`${r}-${l}-${d}`,n,a,s)));if(e.styles?.includes("ul"))return i.createElement("ul",{key:`ul-${r}-${l}`},d);if(e.styles?.includes("ol"))return i.createElement("ol",{key:`ol-${r}-${l}`},d)}return i.createElement(C,{key:`${r}-${l}`,orgPath:n,profiles:a||null,commentId:s,text:(0,d.F)(e.t)||void 0,hyperlink:e.link,user:e.user_annotated,userId:e.user_id,profileId:e.profile_id,tokenStyles:e.styles||null})}),{messageMeta:s,showEditedIndicator:l,commentId:c}=e,u=e.className||v.zD;return i.createElement("div",{className:v.$t+" "+u,"data-testid":"comment-message",dir:"auto"},o(s,c,r,n,c),l&&i.createElement("span",{className:v.oh,key:"edited_indicator"},"\xa0",(0,p.tx)("comments.edited")))});N.displayName="CommentMessage"},448879:(e,r,n)=>{n.d(r,{y:()=>i}),n(411855),n(226055),n(617453),n(187882),n(837746);let i={showNotificationSettings:!0,disableCommentsWhenHandToolEnabled:!0,repositionViewportOnCommentSelection:!0,clusterBy:"page",orphanedBy:"deleted_pages"}},152811:(e,r,n)=>{n.d(r,{L9:()=>L,T4:()=>P,ek:()=>x,hh:()=>V,pO:()=>G,vO:()=>U});var i=n(411855),a=n(188507),o=n(922827),s=n(572304),l=n(298455),c=n(841563),d=n.n(c),u=n(934480),m=n(939863),p=n(331972),h=n(964881),_=n(975350),g=n(63397),f=n(994988),E=n(103907),y=n(654034),b=n(714705),v=n(697551),I=n(860178),T=n(100197),S=n(440535),w=n(555328),A=n(697373),C=n(531461);let N=new Set([]);function L(e){return({creationDate:(0,m.t)("comments.sort_by_date"),recent:(0,m.t)("comments.sort_by_last_action"),unread:(0,m.t)("comments.sort_by_unread"),slide:(0,m.t)("comments.sort_by_slide")})[e]}let O=(e,r)=>Date.parse(r.comments[0].created_at)-Date.parse(e.comments[0].created_at),R={creationDate:O,recent:(e,r)=>Date.parse(r.lastRepliedAt||r.comments[r.comments.length-1].created_at)-Date.parse(e.lastRepliedAt||e.comments[e.comments.length-1].created_at),unread:(e,r)=>{let n=Number(e.comments.some(e=>e.isUnread)),i=Number(r.comments.some(e=>e.isUnread));return n===i?O(e,r):i-n},slide:(e,r)=>0};function P(e){return({resolved:(0,m.t)("comments.show_resolved_comments"),yours:(0,m.t)("comments.only_your_threads"),currentPage:(0,m.t)("comments.only_current_page"),currentSlide:(0,m.t)("comments.only_current_slide")})[e]}let D=e=>!e.comments[0].resolved_at,k=e=>e.sidebarItemType===S.kT.COMMENT_THREAD,M=e=>e.sidebarItemType===S.kT.FEED_POST,F={currentPage:!1,currentNode:!1,currentSlide:!1,currentDevModeFocus:!1};function x(e){return({commentsOnly:(0,m.t)("comments.only_comments"),postsOnly:(0,m.t)("comments.only_posts")})[e]}let U={postsOnly:[C.mW.RESOLVED],all:[],commentsOnly:[]};async function B(e,r){if(r){let n=r.replace(u.Py,u.H3);return await e.search(n).then(e=>new Set(e.map(e=>e.item.parentId||e.item.id)))}return N}let V=i.createContext({});function G(e){let r=(0,E.wq)(),n=(0,a.wA)(),c=(0,v.UP)(),u=(0,a.d4)(e=>e.comments.showResolved),m=(0,a.d4)(e=>e.comments.showOnlyParticipating),N=(0,a.d4)(e=>e.mirror.appModel.currentPage),L=e.currentNode||N,O=(0,I.TA)()||void 0,P=(0,a.d4)(e=>e.selectedView.commentThreadId),x=(0,T.ut)(o.Ez5?.singleSlideView().focusedSlideId,s.AD),G=(0,h.hA)(),H=(0,A.Ld)(),[K,W]=i.useState("creationDate"),[$,Y]=i.useState({...F,resolved:!u,yours:m,currentDevModeFocus:!!G,...e.initialFilterState}),[z,j]=i.useState("all"),[q,Z]=i.useState(""),[X,J]=i.useState(null),Q=(0,b.kC)(r),ee=i.useMemo(()=>({resolved:D,yours:e=>O&&e.comments.some(e=>e.user_id===O||(0,y.F$)(e).includes(O))||!1,currentPage:e=>N&&e.page===N||!1,currentNode:e=>{let r=e.comments[0].client_meta;return!!r?.in_frame&&r.node_id===L},currentSlide:e=>{let r=e.comments[0].client_meta?.node_id,n=r?(0,l.UN)().get(r):void 0,i=n?n.findContainingSlideOrSelf():s.AD;return x===s.AD||i===s.AD||i===x},currentDevModeFocus:e=>{let r=G?(0,l.UN)().get(G):null;if(!r)return!0;let n=e.comments[0]?.client_meta?.node_id,i=n?(0,l.UN)().get(n):null;return(0,p.WJ)(r,i)}}),[O,N,L,x,G]),et=i.useMemo(()=>({all:()=>!0,commentsOnly:k,postsOnly:M}),[]),er=i.useCallback(e=>{Z(e)},[]),en=i.useCallback(e=>{n(_.nL({activeSort:e})),W(e)},[n]),ei=i.useCallback(e=>{"resolved"===e&&(n(_.U3({showResolved:$.resolved})),c&&n((0,f.mH)($.resolved))),"yours"===e&&(n(_.RO({showOnlyParticipating:!$.yours})),c&&n(g.Zj($.yours?w.Qv.ALL:w.Qv.ME))),Y(r=>(r[e]=!r[e],{...r}))},[n,$,c]),ea=i.useMemo(()=>{let e=new Set;for(let r of Object.values(C.mW))$[r]&&e.add(r);return e},[$]),eo=i.useCallback(e=>{j(e)},[]);i.useEffect(()=>{U[z].forEach(e=>{("resolved"===e?!ea.has(e):ea.has(e))&&ei(e)})},[z,ea,ei]),i.useEffect(()=>{q?B(Q,q).then(e=>{d()(X,e)||J(e)}):J(null)},[r,q,X,Q]);let es=i.useMemo(()=>({...R,...H}),[H]),el=i.useMemo(()=>(function(e,r,n,i,a,o,s,l){if("loaded"!==e.status)return e;let c=[...e.data];for(let e of(l&&(c=c.filter(e=>l.has(e.id))),i))c=c.filter(o[e]);return c=c.filter(s[n]),{...e,data:c.sort(a[r])}})(r,K,z,ea,es,ee,et,X),[r,K,z,ea,es,ee,et,X]),ec=i.useMemo(()=>"loaded"===el.status?{...el,data:el.data.filter(e=>e.sidebarItemType!==S.kT.WALKTHROUGH_MEDIA)}:el,[el]),ed=i.useMemo(()=>({setSort:en,toggleFilter:ei,setMode:eo,setQuery:er}),[er,en,ei,eo]),eu=i.useMemo(()=>({activeQuery:q,activeSort:K,activeMode:z,activeFilters:ea,threads:r,filteredThreads:el,filteredSidebarItems:ec,threadManager:ed}),[q,K,z,ea,r,el,ec,ed]),em=i.useMemo(()=>{if(r&&"loaded"===r.status)return r.data.find(e=>e.id===P)},[P,r]);return i.useEffect(()=>{em&&em.comments[0].resolved_at&&$.resolved&&ei("resolved")},[$,em,ei]),i.useEffect(()=>{Y(e=>({...e,currentDevModeFocus:!!G}))},[G,Y]),i.createElement(V.Provider,{value:eu},e.children)}},238559:(e,r,n)=>{n.d(r,{Uu:()=>g,wV:()=>f});var i=n(411855),a=n(188507),o=n(975350),s=n(654034),l=n(457630),c=n(860178),d=n(336174),u=n(475409),m=n(252296),p=n(705237),h=n(230413);let _=n(699670).ss;function g(e){let r=(0,a.d4)(e=>e.comments.typeahead);return e.mentionsDisabled&&r?.type==="mentions"?null:i.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:!1,decoratorsRef:e.decoratorsRef,width:e.width,direction:e.direction,targetRect:e.targetRect,useFixedPosition:!0,useWindowAsViewport:!0})}function f(e){let r=(0,a.d4)(e=>e.comments.typeaheadPositionOffset),n=i.useMemo(()=>{let n=e.position||{x:0,y:0};return{top:r.top+n.y,right:r.right+n.x,bottom:r.bottom+n.y,left:r.left+n.x,width:r.width,height:r.height}},[r,e.position]),o=(0,s.mz)();return i.createElement(E,{onInsert:e.onInsert,onClear:e.onClear,isCommunityMentions:e.isCommunityMentions,decoratorsRef:e.decoratorsRef,width:o,direction:h.ri.DOWNWARDS,targetRect:n})}function E(e){let r;let n=(0,a.d4)(e=>e.comments.emojiPicker),s=(0,a.d4)(e=>e.comments.typeahead),[g,f]=(0,i.useState)(null);i.useEffect(()=>{s?.type==="suggestions"&&f(u.NS)},[s?.type]);let E=(0,a.wA)(),y=i.useCallback(()=>{E(o.RI({visible:!1}))},[E]),b=i.useCallback(e=>{E(o.We(e))},[E]),v=(0,l._X)({subscribeToUpdates_expensive:!0}),I=i.useMemo(()=>e.useWindowAsViewport?{isPanning:!1,isZooming:!1,height:window.innerHeight}:v,[e.useWindowAsViewport,v]),T=(I?.isPanning||I?.isZooming)&&n?.visible;i.useEffect(()=>{T&&y()},[T,y]);let S=(0,c.iZ)(),w=!!(n&&n.visible||s),{onClear:A}=e,C=i.useCallback(()=>{n&&n.visible&&y(),s&&A()},[n,s,y,A]),{decoratorsRef:N}=e;return i.useEffect(()=>{N&&(N.current={visible:w,clearDecorators:C})},[C,N,w]),r={...r=e.useFixedPosition||e.direction!==h.ri.UPWARDS?g&&e.targetRect.height>0&&e.targetRect.bottom>I.height-g&&e.targetRect.top>I.height-e.targetRect.bottom?e.useFixedPosition?{useFixedPosition:!0,targetRect:e.targetRect,direction:h.ri.UPWARDS}:{positionFromBottom:{left:e.targetRect.left,bottom:I.height-e.targetRect.top},direction:h.ri.UPWARDS}:{useFixedPosition:e.useFixedPosition,targetRect:e.targetRect,direction:h.ri.DOWNWARDS}:{positionFromBottom:e.positionFromBottom,direction:h.ri.UPWARDS},useWindowAsViewport:e.useWindowAsViewport},i.createElement("div",{style:{pointerEvents:"auto"}},n&&n.visible&&i.createElement(d._,{onInsert:n.onPick,onCancel:n.onCancel??y,targetRect:n.targetRect}),s&&"emojis"===s.type&&i.createElement(m.j,{dispatchTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,setMaxTypeaheadHeight:f,isComments:!0,...r}),S&&s&&"mentions"===s.type&&(s.search||s.mentions.length>0)&&i.createElement(p.E,{dispatch:E,setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,entity:S,isCommunityMentions:e.isCommunityMentions,width:e.width,recordingKey:"mentionsTypeaheadView",dataTestId:"comment-mentions-typeahead",setMaxTypeaheadHeight:f,zIndex:e.isCommunityMentions?void 0:_,isComments:!0,...r}),s&&"suggestions"===s.type&&i.createElement(u.Cs,{setTypeahead:b,typeahead:s,onInsert:e.onInsert,onClear:e.onClear,width:e.width,...r}))}},884101:(e,r,n)=>{n.d(r,{Kb:()=>v,ny:()=>b});var i=n(411855),a=n(629019),o=n.n(a),s=n(934480),l=n(96328),c=n(939863),d=n(120694),u=n(498606),m=n(227795),p=n(451818),h=n(142803),_=n(855226);function g(e){return void 0!==e.numUsers}let f={};function E(e,r){let n=e.map(e=>e.handle).slice(0,r),i=e.length-r;return i>0&&n.push((0,l.td)(i,"other")),(0,l.Yx)(n)}d.i.forEach(e=>{f[`:${e.id}:`]=e});let y=i.forwardRef(function(e,r){let n=g(e.reaction)?e.reaction.numUsers:e.reaction.users.length,a=Object.keys(e.reaction.skinTonesToUsers).length,l=a>0?Object.keys(e.reaction.skinTonesToUsers):[""],c=l.map(r=>(0,s.UF)(`${e.reaction.emoji}${r}`)[0]),d={};if(!g(e.reaction)){let r=[],n=[];if(a>0)l.forEach(i=>{let o=`${e.reaction.emoji}${i}`;r.push((0,s.UF)(o)[0].unicode);let l=E(e.reaction.skinTonesToUsers[i],Math.floor(40/a));n.push([o,l])});else{r.push((0,s.UF)(e.reaction.emoji)[0].unicode);let i=E(e.reaction.users,40);n.push([e.reaction.emoji,i])}d={emojiUnicodeList:r,emojiShortcodeToUsers:n}}return i.createElement("button",{className:o()({[h.bs]:e.reaction.selected,[h.mJ]:!e.reaction.selected,[h.aN]:!e.visible}),"data-tooltip-type":u.Ib.SPECIAL,"data-tooltip":p.h,"data-tooltip-data":JSON.stringify(d),"data-tooltip-max-width":200,onClick:e.onClick,"data-testid":`reaction-button-${e.reaction.emoji}`,ref:r},c.map(e=>i.createElement("span",{key:`${e.meta}`,className:h.A9},e.unicode)),i.createElement("span",{className:h.U9},n))});function b(e){let r=e.styleClassName?e.styleClassName:h.BB;return i.createElement(m.YW,{svg:_.A,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":(0,c.t)("comments.add_reaction"),onClick:e.onClick,selected:e.selected,className:r,selectedClassName:e.selectedStyleClassName,dataTestId:"add-reaction-button","data-fullscreen-intercept":e["data-fullscreen-intercept"]})}function v(e){let{reactions:r,collapseOverflow:n,onClickExisting:a,children:s,prependToList:l}=e,d=i.useRef(null),u=i.useRef({}),[m,p]=i.useState(null),[_,g]=i.useState(!n);i.useLayoutEffect(()=>{if(!d.current)return;let{width:e}=d.current.getBoundingClientRect(),n=-parseInt(h.h)+parseInt(h.bB),i=0;for(let a of r){let o=u.current[a.emoji];if(!o)return;if((n+=parseInt(h.h)+o.getBoundingClientRect().width)>e||i===r.length-1&&n+40+parseInt(h.h)>e)break;i+=1}p(i)},[r]);let f=null===m?null:r.length-m,E=r.map((r,n)=>{let o=a?e=>a(r,e):void 0;return i.createElement(y,{key:r.emoji,reaction:r,onClick:o,ref:e=>u.current[r.emoji]=e,visible:_||e.addedReaction||null===m||n<m})}),b=!(_||e.addedReaction)&&null!==f&&f>0;return i.createElement(i.Fragment,null,i.createElement("div",{className:o()({[h.KD]:!0,[h.l$]:b,[h._s]:!(_||e.addedReaction)&&null===f}),ref:d},...l??[],E,!b&&s),b&&i.createElement("div",{className:h.Jd},i.createElement("button",{className:h.mJ,onClick:()=>{g(!0)},"data-testid":"show-more-reactions-button"},(0,c.tx)("comments.num_hidden_more",{numHidden:f}))))}},636662:(e,r,n)=>{n.d(r,{K:()=>u});var i=n(411855),a=n(966712),o=n(96328),s=n(939863),l=n(67294),c=n(710381),d=n(573576);function u(e){let r=i.useCallback(()=>{if(e.replyContainerRef?.current){let r=(0,a.kc)().comments_smooth_scroll?"smooth":"auto";e.replyContainerRef.current.scrollIntoView({block:"end",behavior:r})}},[e.replyContainerRef]),n=i.createElement(c.C,{fallback:null,errorFallback:i.createElement(c.e,{type:"thread"}),editorRef:e.editorRef,editorType:e.editorType,dispatch:e.dispatch,user:e.user,typeahead:e.typeahead,mentionables:e.mentionables,threadPosition:e.threadPosition,setHyperlinkLocation:e.setHyperlinkLocation,hyperlinkLocation:e.hyperlinkLocation,setHyperlinkEditorRef:e.setHyperlinkEditorRef,messageMeta:e.messageMeta,attachments:e.attachments,submitText:e.submitText,placeholderText:e.placeholderText,onCancel:e.onCancel,onSubmit:e.onSubmit,onComposeFocus:e.onComposeFocus,onEditStart:e.onEditStart,editorOnInsert:e.editorOnInsert,editorOnClear:e.editorOnClear,viewportPositionFromClientPosition:e.viewportPositionFromClientPosition,isDisabled:e.isDisabled,mountInputFocused:e.mountInputFocused,updateMessage:e.updateMessage,updateAttachment:e.updateAttachment,deleteAttachment:e.deleteAttachment,setIsEditorFocused:e.setIsEditorFocused,isEmojiPickerDisabled:e.isEmojiPickerDisabled,hideEmojiPicker:e.hideEmojiPicker,allowAttachments:e.allowAttachments,recordingKey:e.recordingKey,className:e.className,authorChanged:e.authorChanged,createdAt:e.createdAt,threadId:e.threadId,fileKey:e.fileKey,editingExistingComment:e.editingExistingComment,scrollToBottom:e.replyContainerRef&&r,maintainSelectionOnFocus:e.maintainSelectionOnFocus,ariaLabel:e.authorNames?(0,s.t)("fullscreen.accessibility.reply_to_comment_with_authors",{username:(0,o.Yx)(e.authorNames)}):(0,s.t)("fullscreen.accessibility.reply_to_comment")});return i.createElement("div",{className:d.MP,ref:e.replyContainerRef},i.createElement("div",{className:d.i8},i.createElement(l.H8,{user:e.user||{}})),n)}},815549:(e,r,n)=>{n(411855),n(188507),n(561546),n(966712);var i=n(716034);n(553716),n(939863),n(662275),n(625651),n(396226),n(177505),n(29680),n(335682),n(99506),n(243987),n(300874),n(851363),n(887326),n(187882),n(454351),n(449731),n(362369),n(391993),(0,i.eU)(!1)},215932:(e,r,n)=>{n.d(r,{VG:()=>l,fY:()=>d,m7:()=>c}),n(966712);var i=n(716034),a=n(940596);n(239737);var o=n(828650);(0,i.eU)(!1);let s=(0,a.Wh)(()=>(0,i.eU)(new Map)),l=(0,a.Wh)(()=>(0,i.eU)(new Map)),c=(0,a.Wh)(()=>(0,i.eU)(e=>e(s),(e,r,n)=>{r(s,n)})),d=(0,a.Wh)(()=>(0,i.eU)([]));(0,a.Wh)(()=>(0,i.eU)({view:o.N.GROUPS,selectedViolationGroup:null}))},935832:(e,r,n)=>{n(411855),(0,n(716034).eU)({isShowing:!1,isFigjamDLTBanner:!1})},36127:(e,r,n)=>{n.d(r,{bK:()=>u,oZ:()=>m,r8:()=>l,uK:()=>d});var i=n(783145),a=n(716034),o=n(418956);let s=(0,a.eU)({}),l=(0,o.Iz)(e=>(0,a.eU)(r=>r(s)[e],(r,n,i)=>{n(s,r=>({...r,[e]:i}))}));(0,a.eU)(e=>Object.values(e(s)));let c=(0,a.eU)(!1),d=(0,a.eU)({autoScroll:!1});async function u(e,r,n,a){let{guid:u}=e;o.zl.set(d,e=>e.autoScroll?{...e,guid:u}:e),a||o.zl.set(c,!0),await function(e,r){let{guid:n,name:a}=e,s=.03*a.length;return new Promise(c=>{(0,i.i)(a.length,0,{onUpdate:i=>{!r.signal.aborted&&e.isAlive&&o.zl.set(l(n),{guid:n,boundingBox:e.absoluteBoundingBox,state:"deleting",name:a.slice(0,Math.floor(i))})},duration:s,ease:"linear",onComplete:c})})}(e,n),await function(e,r,n){let{guid:a}=e,s=.07*r.length;return new Promise(c=>{(0,i.i)(0,r.length,{onUpdate:i=>{!n.signal.aborted&&e.isAlive&&o.zl.set(l(a),{guid:a,boundingBox:e.absoluteBoundingBox,state:"writing",name:r.slice(0,Math.floor(i))})},duration:s,ease:"linear",onComplete:c})})}(e,r,n),l.remove(u),o.zl.set(s,e=>{let r={...e};return delete r[u],r}),a||o.zl.set(c,!1)}function m(){l.removeAll()}},112084:(e,r,n)=>{n.d(r,{W:()=>o});var i=n(38329),a=n(988022);function o(e,r,n,o){var s,l,c,d;let u=i.D.getState(),m=(s=r,l=e,c=n,d=i.D,{search_session_id:o,node_id:s,node_type:function(e,r){if(!e)return null;let n=r.getState().mirror.sceneGraph.get(e);return n?.type||null}(s,d),query_length:l?.length,contains_at_symbol:l?.includes("@"),result_row_index:c});(0,a.ds)("canvas_mention_search_cancelled",u.openFile?.key,u,m)}n(863670)},634951:(e,r,n)=>{n.d(r,{LL:()=>b,be:()=>v,k6:()=>T,xG:()=>I});var i=n(411855);n(908048);var a=n(268853),o=n(922827),s=n(340818),l=n(966712),c=n(776621),d=n(553716),u=n(409430),m=n(604978),p=n(957385),h=n(616121);let _=Object.create(null);function g(e){return(0,m.w6)(e).catch(()=>null)}let f=new p.A,E=(0,l.ck)("cbbdc3ccc2f650369332a454328722aa11cbd78a");async function y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:i}){let o=500*window.devicePixelRatio,s=81.25*window.devicePixelRatio,[l,d]=await Promise.all([g({url:E,height:o,width:o}),e?g({url:e,height:o,width:o}):null]),u=(0,m.Dl)(o,o),p=u.getContext("2d");if(!l)return"";!function(...e){for(let r of e)if(r&&(!(r instanceof HTMLImageElement)||!r.src||!r.width||!r.height)){let e=r.outerHTML||Object.prototype.toString.call(r);(0,c.$D)(a.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${e}'`))}}(l,d);try{i||p.drawImage(l,0,0,o,o)}catch(e){return S(l,e),""}if(p.arc(o/2,o/2,o/2-s,0,2*Math.PI,!0),p.clip(),d){let e=o-2*s;try{p.drawImage(d,s,s,e,e)}catch(e){return S(d,e),""}}else{if(!n||!r)return"";p.fillStyle=n,p.fillRect(0,0,o,o),p.textBaseline="middle",p.textAlign="center";let e=187.5*window.devicePixelRatio;p.font=`${e}px Inter`,p.fillStyle===h.$C?p.fillStyle=h.PN:p.fillStyle="white",p.fillText(r.substring(0,1).toUpperCase(),o/2,o/2+10*window.devicePixelRatio)}p.scale(window.devicePixelRatio,window.devicePixelRatio);let _=u.toDataURL("image/png");return f.set(_,e,r,n,i),_}function b(e,r,n,a){let[o,s]=(0,i.useState)(f.get(e,r,n,a)||"");return(0,i.useEffect)(()=>{if(!e&&!(r&&n)){s("");return}let i=!1,l=f.get(e,r,n,a);return l!==o&&(l?s(l):y({profileImageUrl:e,userName:r,userColor:n,noCircleOutline:a}).then(e=>{i||s(e)})),()=>{i=!0}},[e,r,n,a,o]),o}async function v(e,r){let n=await (0,u.T)(e,_);(0,d.Lo)("activateStampToolWithImageURL","setting stamp tool",{label:r,bytesLength:n?.length}),o.glU.activateStampTool(n,r)}async function I(e,r,n,i,a,l){let c=await (0,u.T)(e,_);(0,s.l7)(l,"drop-face",()=>o.glU.dropFaceOntoCanvas(c,"Face Stamp",r,n,i,a))}function T(e,r){if(e.image)return(0,l.ck)(e.image);if(e.imageFunc)return e.imageFunc(r);throw Error(`Invalid emoji ${e} has no image nor imageFunc`)}function S(e,r){if(r&&(0,c.$D)(a.e.FIGJAM,r),!e)return;let n=e.outerHTML||Object.prototype.toString.call(e);(0,c.$D)(a.e.FIGJAM,Error(`Expected object to be a valid HTMLImageElement but it wasn't: '${n}'`))}},782540:(e,r,n)=>{n.d(r,{n:()=>o});var i=n(145519),a=n(301922);let o=[{type:"REACTION",name:"r-fire",image:"d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2",position:2},{type:"REACTION",name:"r-surprised",image:"1429964104bceac90c5c8e731ce4cc50b27e2797",position:1},{type:"REACTION",name:"r-eyes",image:"ffd0635e8f9322352eff0c15411ac0b536b98d87",position:8},{type:"REACTION",name:"r-wave",image:"0606e9d967b5abb6d9a2853c2fff589f2ec2fc05",position:7},{type:"ACTION",name:"r-chat",image:"d1de3f6fe1f8ffa74d3db5203b2df761d0fed1cc",position:6,action:(e,r)=>{(0,a.q)().then(n=>{n||r(i.F6({position:e,source:"emoji_wheel_reactions"}))})}},{type:"REACTION",name:"r-sad",image:"78f60a21d2616c2a24c7645d8636dec855e48ffb",position:5},{type:"REACTION",name:"r-laugh",image:"a83de90bf34495081ce2e8bcaf28d1d2c16e5186",position:4},{type:"REACTION",name:"r-love",image:"ff5be810b821d264cc2c95f665d24a867c34e587",position:3}]},861802:(e,r,n)=>{n.d(r,{WJ:()=>m,hf:()=>d,sn:()=>o,tR:()=>u});var i=n(966712),a=n(939863);let o="s-heart";function s(e){return[{type:"STAMP",name:"s-thumbsUp",image:e.thumbsUp,position:2,label:"Thumbs up",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.thumbs_up")},{type:"STAMP",name:"s-plusOne",offset:.72,image:e.plusOne,position:1,label:"+1",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.plus_one")},{type:"STAMP",name:"s-star",image:e.star,position:8,label:"Star",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.star")},{type:"STAMP",name:"s-question",image:e.question,position:7,label:"Question",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.question")},{type:"STAMP",name:"s-thumbsDown",image:e.thumbsDown,position:6,label:"Thumbs down",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.thumbs_down")},{type:"STAMP",name:"s-dot",imageFunc:e.dots,position:5,label:"Dot",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.dot")},{type:"STAMP",name:"s-profile",offset:.73,imageFunc:e.profile,position:4,label:"Profile",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.profile")},{type:"STAMP",name:"s-heart",image:e.heart,position:3,label:"Heart",i18nName:()=>(0,a.t)("fullscreen.stamp_wheel.heart")}]}let l={F24E1E:"f5c62908951d5597fd78d43b466a590616ba2693","0FA958":"a80c699432955f63c3613761744dfb61758780ae",FFC700:"a9d0704b01ae94a42c00e495f58e169966099333","5551FF":"87a816dc22c9fe975e6cb531cc7f2b47ff66f26e",D27C2C:"a7115640741f347d4fec9f4f82bf88465e6081f4",848484:"1775b53401dbbb5bfb48ae9b00b650952e5c8d67",EBEBEB:"c3312ab90b95e13d91b5a826628708663e502ddc",667799:"27be94d8a31dc67f2fdf0bc0ed1cd2c7d6c48cba","007BE5":"4f73e22fc8d7e9d55bfb24dcc7b7d6201ca51fb3","9747FF":"d337617455a562b3a0859d87fac6d82f86d8d729",FF24BD:"19e369b3f6531ed8571b6fed7db7e2fe7b4d4517",F24822:"4c9a2a1f92768b87946ec3a4d9000f0fe99d760c",FFCD29:"13a81b40823bfed9e05f4b0eedab902453bf47b3","14AE5C":"fd086d9788aa1e5a4dd7c10436a59d5d51c6c063"},c={"s-heart":"421d20c98db007d377890189b093545f16498acc","s-thumbsDown":"0bda50cfaecc87b58d0a78e8a8768b55a9f67c03","s-star":"cbc8d70c16c1fcf0d8690429564495cce3ab11c0","s-thumbsUp":"5e39a5f28101ed8ca9d9e38275066867c47294e9","s-question":"75a4d8d5c7e5fc18ad3f76ce2c1166b68f9ec046","s-plusOne":"0d4a582f5dd156228c1443c9fd19a331ff8f087b"};function d(e){return s({heart:c["s-heart"],thumbsDown:c["s-thumbsDown"],star:c["s-star"],thumbsUp:c["s-thumbsUp"],question:c["s-question"],profile:()=>e,dots:e=>{let r=l[e]||l["667799"];return(0,i.ck)(r)},plusOne:c["s-plusOne"]})}let u=(0,i.ck)("2b2029d1eabf48358e208427103a2023435751dc"),m=s({heart:"cdb352553f6650801d744ab73fd416222f120bd6",thumbsDown:"1b9c978d009d03d1abececfe15edf721a7c14374",star:"a9c2008e62c6d5a4421a22cd960b5ca54fdbe93f",thumbsUp:"d7c56a0ef07da63ed9f641ab04637704a4744c74",question:"4fe56356e345e558e669ff6e369f0265ee0b7fe7",profile:()=>(0,i.ck)("cb417fb549d06a2fb42e182cddd2b94b1996b768"),dots:()=>u,plusOne:"96363e23778476978d264bfcbd286bc0cbafe6cd"})},970332:(e,r,n)=>{n(411855),n(629019),n(799569),n(946689),n(939863),n(175290),n(101505),n(672517),n(226055),n(833629),n(63666),n(936181),n(989326),n(275596)},173101:(e,r,n)=>{n(411855),n(188507),n(922827),n(931828);var i=n(356390);n(114716),n(309798),(0,n(479296).D)(()=>i.Y5.fromFullscreen)},600907:(e,r,n)=>{n(411855),n(188507),n(922827),n(931828);var i=n(356390);n(114716),n(309798),(0,n(479296).D)(()=>i.Y5.fromFullscreen)},469572:(e,r,n)=>{n.d(r,{a2:()=>l}),n(411855),n(188507);var i=n(838516),a=n(716034),o=n(418956);n(931828);let s={x:(0,a.eU)(void 0),y:(0,a.eU)(void 0),cornerRadius:(0,a.eU)(void 0),angle:(0,a.eU)(void 0),width:(0,a.eU)(void 0),height:(0,a.eU)(void 0),fontSize:(0,a.eU)(void 0),fontStyle:(0,a.eU)(void 0),fontFamily:(0,a.eU)(void 0),fillPaints:(0,a.eU)(void 0),strokePaints:(0,a.eU)(void 0),effects:(0,a.eU)(void 0)},l=(0,i.s)(e=>{let r=s[e];r&&o.zl.set(r,e=>!e)},200,!0)},381915:(e,r,n)=>{n(411855),n(893606)},824767:(e,r,n)=>{n.d(r,{Zk:()=>S,x0:()=>T}),n(411855);var i=n(268853),a=n(966712),o=n(418956),s=n(716034),l=n(711525),c=n(776621),d=n(553716),u=n(30637),m=n(809831),p=n(502665);n(860178);var h=n(279453),_=n(859487);n(132572);var g=n(301819),f=n(982749);n(335218);var E=n(138334);let y=(0,o.E3)("frecencyHistory",{numItems:0,userIds:{}},{subscribeToChanges:!1},{debounceTime:1e3}),b=(0,s.eU)(e=>e(h.Fr3.Query({})));class v{constructor({json:e,setJson:r,userId:n,fullscreenEditorType:i}){this.MAX_ENTRIES=5e3,this.numItems=e.numItems,this.userIds=e.userIds,this.setJson=r,this.fullscreenEditorType=i??"none",this.userId=n??"anonymous",this.cachedActions=this.initActions(),this.cachedQueries=this.initQueries()}addUsage(e,r){let n=this.getActions();n.addUsage(e)&&this.incrementTotalItems();let i=this.getQueries();i.addUsage(r,e)&&this.incrementTotalItems(),this.userIds[this.userId]={...this.userIds[this.userId],[this.fullscreenEditorType]:{actions:n.serialize(),queries:i.serialize()}},this.numItems>this.MAX_ENTRIES&&this.prune(),this.save(),_.I.updateFrecencyHistory({actionKey:e,timestamp:Date.now(),editorType:this.fullscreenEditorType})}prune(){let e=Object.entries(this.userIds).flatMap(([e,r])=>Reflect.ownKeys(r).flatMap(n=>{let i=r[n];if(!i)return[];let{actions:a,queries:o}=i,s=Object.entries(a).flatMap(([r,{timestamps:i}])=>({userId:e,editorType:n,action:r,timestamp:i[0]})),l=Object.entries(o).flatMap(([r,i])=>Object.entries(i).flatMap(([i,{timestamps:a}])=>({userId:e,editorType:n,action:i,query:r,timestamp:a[0]})));return s.concat(l)}));e.sort((e,r)=>e.timestamp-r.timestamp);let r=this.MAX_ENTRIES/2;for(let n=0;n<r;n++){let{userId:r,editorType:i,action:a,query:o}=e[n],s=this.userIds[r][i];s&&(void 0!==o?delete s.queries[o][a]:delete s.actions[a],this.userIds[r][i]=s,this.numItems-=1)}}incrementTotalItems(){this.numItems+=1}initActions(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.actions??{};return new g.l(e)}initQueries(){let e=this.userIds[this.userId]?.[this.fullscreenEditorType]?.queries??{};return new f.B(e)}getActions(){return this.cachedActions}getQueries(){return this.cachedQueries}save(){try{this.setJson({numItems:this.numItems,userIds:this.userIds}),I=this}catch(e){(0,d.x1)("error","Failed to save frecency data",e,{reportAsSentryError:!0})}}setMaxEntriesForTesting(e){(0,u.Lg)()&&(this.MAX_ENTRIES=e)}}let I=null;function T(){let e=o.zl.get(p.N).data,r=o.zl.get(m.u8);I&&I.userId===e&&I.fullscreenEditorType===r||(I=new v({json:o.zl.get(y),setJson:e=>o.zl.set(y,e),userId:e,fullscreenEditorType:r}));let n=function(e,r){if(!e.data)return null;let n=(0,l.oA)(e.data.actionsHistory);return n&&n.frecencyHistory?function(e,r){let n=function(e){let r;try{r=JSON.parse(e)}catch(r){return(0,c.$D)(i.e.AI_FOR_PRODUCTION,Error(`Invalid JSON value for frecency history from DB: ${e}`),{}),null}let n=E.SR.safeParse(r);if(!n.success)return(0,c.$D)(i.e.AI_FOR_PRODUCTION,Error(`Invalid format for frecency history object from DB: ${e}`),{}),null;let a={};for(let[e,r]of Object.entries(n.data)){let n=Number(e);if(!E.B3.safeParse(n).success)return(0,c.$D)(i.e.AI_FOR_PRODUCTION,Error(`Invalid key in frecency history object from DB: ${e}`),{}),null;a[n]=r}return a}(e);if(n&&r){let e=n[r]?.actions;if(e)return new g.l(e)}return null}(n.frecencyHistory,r):null}(o.zl.get(b),o.zl.get(m.u8));return{actions:(0,a.kc)().qa_recently_used_db_read&&n?n:I.getActions(),queries:I.getQueries()}}function S(){o.zl.set(y,{numItems:0,userIds:{}}),I=null}},887326:(e,r,n)=>{var i=n(411855),a=n(188507),o=n(922827),s=n(340818),l=n(627776),c=n(517333),d=n(966712),u=n(886653),m=n(153234),p=n(607899),h=n(256975),_=n(738269);n(103907);var g=n(259927),f=n(324597),E=n(950255),y=n(483990);n(325469);var b=n(672517);n(756085),n(261607),n(12493);var v=n(875847),I=n(728325),T=n(283942),S=n(122983),w=n(369870);n(227944),n(678340);var A=n(428467),C=n(707465);n(284321);var N=n(239671),L=n(279145),O=n(143678),R=n(507956),P=n(728587);n(47506);var D=n(418956),k=n(572206),M=n(114950),F=n(371399),x=n(615549),U=n(662275),B=n(237870),V=n(746806),G=n(406270);(0,B.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(U.AS())},[e]),[n,o]=(0,D.fp)(M.c),[s,l]=(0,D.fp)(x.MW),[c,d]=(0,D.fp)(F.O);return i.createElement(V.vx,{title:"Code Connect Debug Settings",headerSize:"small",initialPosition:new k.Mi(0,0),onClose:r},i.createElement("div",{className:G.kL},i.createElement("div",{className:G.zN},i.createElement("input",{type:"checkbox",onChange:e=>o(e.target.checked),checked:n}),i.createElement("span",{className:G.Pf},"Debugger break in template execution")),i.createElement("div",{className:G.zN},i.createElement("input",{type:"checkbox",onChange:e=>l(e.target.checked),checked:s}),i.createElement("span",{className:G.Pf},"Log Code Connect document")),i.createElement("div",{className:G.zN},i.createElement("input",{type:"checkbox",onChange:e=>d(e.target.checked),checked:c}),i.createElement("span",{className:G.Pf},"Log JS before execution"))))},"CodeConnectDebugModal"),n(931828);var H=n(335682);n(309798),n(99506);var K=n(848661),W=n(498606),$=n(218973),Y=n(984871),z=n(659350);function j(e){let[r,n]=i.useState(e.initialValue),o=i.useCallback(e=>{(0,K.gl)(e)||n(e.valueOf())},[n]),s=(0,a.wA)();return i.useEffect(()=>{(0,Y.uw)({[e.configPropertyName]:r})},[r,e.configPropertyName]),i.createElement($.Ht,{className:z.hF,"data-tooltip-type":W.Ib.TEXT,min:e.minVal,max:e.maxVal,bigNudgeAmount:e.bigNudgeAmount,smallNudgeAmount:e.smallNudgeAmount,"data-tooltip":e.propertyDescription,dispatch:s,value:r,onValueChange:o},i.createElement("span",{className:z.Pf},e.displayName))}(0,B.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(U.AS())},[e]);return i.createElement(V.vx,{title:"Comments Debug Settings",headerSize:"small",initialPosition:new k.Mi(0,0),onClose:r},i.createElement("div",{className:z.kL,onMouseDown:e=>{e.stopPropagation()}},i.createElement(j,{configPropertyName:"minZoomPercentage",initialValue:Y.i$.minZoomPercentage,displayName:"Clustering Zoom Level Threshold",propertyDescription:"The zoom level threshold at which we will no longer apply clustering",minVal:1,maxVal:25600,bigNudgeAmount:5,smallNudgeAmount:.1}),i.createElement(j,{configPropertyName:"zoomScaleOverlap",initialValue:Y.i$.zoomScaleOverlap,displayName:"Pin Overlap",propertyDescription:"The base number of pixels we check for overlapping pins when clustering, this value is multiplied by the current zoomScale to compute bounding box",minVal:1,maxVal:2e4,bigNudgeAmount:100,smallNudgeAmount:10}),i.createElement(j,{configPropertyName:"clusterClickResultViewportPercentage",initialValue:Y.i$.clusterClickResultViewportPercentage,displayName:"Cluster Click Result Viewport Percentage",propertyDescription:"After a cluster click, one of the pins in the cluster will be positioned this percentage between the center of the viewport and the edge of the viewport. However, we will always zoom in far enough to break the cluster, even if one of the pins ends up being positioned farther away than this percentage.",minVal:1,maxVal:100,bigNudgeAmount:5,smallNudgeAmount:1}),i.createElement(j,{configPropertyName:"rebuildClustersZoomDelay",initialValue:Y.i$.rebuildClustersZoomDelay,displayName:"Rebuild Cluster User Zoom Delay",propertyDescription:"Delay in ms that occurs between a zoomScale change and the clusters rebuilding",minVal:0,maxVal:1e4,bigNudgeAmount:100,smallNudgeAmount:10})))},"CommentDebugSettingsModal"),n(965626),n(889185);var q=n(27087),Z=n(973131),X=n(585878),J=n(283339);class Q extends Error{}async function ee({dispatch:e,fileKey:r,log:n=()=>{}}){try{n("Generating file version...");let i=(await Z.m(r,"Exported to ML account","",e,!0))?.id;if(void 0===i)throw Error("undefined versionId");n(`Exporting file version ${i}...`);let{meta:{run_key:a}}=(await q.Ay.post(`/api/ml/export/file_version/${i}`)).data;n(`Waiting for run ${a}...`);for(let e=30;e>=0;e--){await new Promise(e=>setTimeout(e,1e3));let{meta:{ready:r,s3_uri:i}}=(await (0,q.Ay)({url:`/api/ml/export/status/${encodeURIComponent(a)}`})).data;if(r){n(`Export manifest is ready at ${i}`);break}if(0===e){n("Timed out!");return}}n("Succeeded!")}catch(e){if(e instanceof Q)return;n("Failed!"),n(`${e}`)}}(0,B.Ju)(function(){let e=(0,a.wA)(),r=i.useCallback(()=>{e(U.AS())},[e]),[n,o]=i.useState([]),s=(0,H.tS)();return i.useEffect(()=>{let n=!1,i=e=>{if(n)throw new Q;o(r=>r.concat([e]))};return null===s?i("No open file"):ee({dispatch:e,fileKey:s,log:i}),()=>{n=!0,r()}},[r,e,s]),i.createElement(X.XV,{title:"ML Export",headerSize:"large",minWidth:300,onClose:r},i.createElement("div",{className:J.k},n.join("\n")))},"MLExportModal");var et=n(193948);let er="preferences-menu",en=(0,S.ck)();class ei extends m.o6{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.onKeyDown=e=>{(0,T.jr)(e,T.W0.NO)},this.selectPreferencesMenu=()=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(this.getPathToPreferences())},this.getPathToPreferences=()=>[(0,y.A)(er)]}componentDidUpdate(e,r){if(super.componentDidUpdate(e,r),this.props.selectionToUpdate&&this.props.selectionToUpdate===o.m7W.PREFERENCES){let e=this.multilevelDropdown&&this.multilevelDropdown.getActiveItemAtDepth(0);!e||(0,f.k$)(e)||(0,f.gN)(e)||(0,f.id)(e)||!e.name||e.name!==er?(this.selectPreferencesMenu(),this.props.dispatch(_.ho({type:L.pi,data:{selectionToUpdate:null}}))):this.props.dispatch(_.oB())}}menuItems(){return(0,E.p)({fileMenuArgs:{branchingActionsStatus:this.props.branchingActionsStatus,saveAsState:this.props.saveAsState,topLevelMode:this.props.appModel.topLevelMode,unreadCommentCount:this.props.unreadCommentCount,isOrgMember:this.props.isOrgMember,shouldShowSlideConversionEntrypoint:!1},pluginAndWidgetMenuArgs:this.props.pluginAndWidgetMenuArgs,additionalDebugItems:this.props.debugMenuItems,theme:this.props.theme,backToFileArgs:{shouldShowBackToFiles:(!en||en&&(0,w.MP)()&&!!(0,d.kc)().integ_zoom_allow_file_switching)&&!c.eD&&!(0,l.ce)(),isDisabled:!this.props.userStateLoaded},zoomArgs:{canZoomOut:this.props.canZoomOut,canZoomIn:this.props.canZoomIn},publishingModalArgs:{isPublishingModalDisabled:this.props.isPublishingModalDisabled}})}render(){let e=this.props.positionOnChevron&&this.props.chevronRef?.current?.getBoundingClientRect()||null;return i.createElement("div",{className:`${g.Dm}`},i.createElement(ea,{recordingKey:"mainMenu",ref:this.multilevelDropdownRef,menuItems:this.menuItems(),onKeyDown:this.onKeyDown,controlledByID:this.props.controlledByID,"aria-labelledby":this.props["aria-labelledby"],activatePathOnMount:this.props.dropdown.data.togglePreferences?this.getPathToPreferences():void 0,showPoint:!this.props.isUI3&&this.props.appModel.showUi,targetRect:e??(this.props.appModel.showUi?this.props.dropdown.data.targetRect:{top:0,left:0}),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:this.props.selectedView.editorType===N.nT.Design,lean:this.props.isUI3?"right":void 0,...this.props}))}}ei.displayName="FullscreenMainMenu",(0,a.Ng)((e,r)=>{let n={view:"recentsAndSharing"},i=e.openFile;i&&i.folderId&&(0,v.N5)(e.folders,i.folderId)&&(n={view:"folder",folderId:i.folderId});let a=e.selectedView;return{appModel:e.mirror.appModel,userStateLoaded:e.userStateLoaded,selectedView:a,recentlyUsedPlugins:r.recentlyUsedPlugins,backToFilesHref:(0,C.Np)(e,n),saveAsState:e.saveAsState,dropdown:r.dropdown,branchingActionsStatus:r.branchingActionsStatus,memoryWarningLevel:r.memoryWarningLevel,debugMenuItems:r.debugMenuItems,selectionToUpdate:e.dropdownShown?.data?.selectionToUpdate,theme:e.theme.themePreference,unreadCommentCount:r.unreadCommentCount,canZoomIn:r.canZoomIn,canZoomOut:r.canZoomOut,isOrgMember:(0,A.canMemberOrg)(e.currentUserOrgId,e),isLimitedDevMode:(0,R.$A)(e.selectedView)&&!(0,h.tn)(e),isPublishingModalDisabled:r.isPublishingModalDisabled}})(ei);class ea extends i.Component{constructor(){super(...arguments),this.multilevelDropdownRef=e=>{this.multilevelDropdown=e},this.getActiveItemAtDepth=e=>this.multilevelDropdown?this.multilevelDropdown.getActiveItemAtDepth(e):null,this.setActiveItemPath=e=>{this.multilevelDropdown&&this.multilevelDropdown.setActiveItemPath(e)},this.onSelectItem=(e,r)=>{s.l7.user(`fullscreen-menu-${e.name??e.action??"unknown"}`,()=>{if(e.callback&&e.callback((0,f.Dz)(e),e.args,this.props.dispatch,r),e.action&&!e.input){let n=e.action;e.loadingIndicatorString?this.props.dispatch(p.n.set({message:e.loadingIndicatorString,callback:()=>{I.VU.get(n,e.source??"menu",e.args)(r)}})):I.VU.get(n,e.source??"menu",e.args)(r)}})},this.transformMenuItems=(0,u.xx)(e=>(0,et.jv)(e,{appModel:this.props.appModel,selectedView:this.props.selectedView,sceneGraph:this.props.sceneGraph,sceneGraphSelection:this.props.sceneGraphSelection,removeDisabledItems:this.props.removeDisabledItems,alwaysShowCheckMarkOffset:this.props.alwaysShowCheckMarkOffset,isLimitedDevMode:this.props.isLimitedDevMode}))}componentDidMount(){this.closeIfNoItems()}componentDidUpdate(){this.closeIfNoItems()}componentWillUnmount(){this.props.controlledByID&&document.getElementById(this.props.controlledByID)?.focus()}hasMenuValidItems(){let e=this.transformMenuItems(this.props.menuItems);return e.length>0&&e.some(e=>!e.separator&&(this.props.allowDisabledOnly||!e.disabled))}closeIfNoItems(){this.hasMenuValidItems()||this.props.dispatch(_.oB())}render(){let e=this.transformMenuItems(this.props.menuItems);return this.hasMenuValidItems()?i.createElement(b.fu,{name:O.e0.EDITOR_MENU},i.createElement(P.j,{ref:this.multilevelDropdownRef,items:e,onKeyDown:this.props.onKeyDown,onSelectItem:this.onSelectItem,parentRect:this.props.targetRect,activatePathOnMount:this.props.activatePathOnMount,lean:this.props.lean,...this.props})):null}}ea.displayName="FullscreenMultilevelDropdown"},631378:(e,r,n)=>{n.d(r,{xm:()=>y});var i=n(140593),a=n(220848),o=n.n(a),s=n(36867),l=n(966712),c=n(829486),d=n(324597),u=n(586211),m=n(279145),p=n(396498),h=n(132572),_=n(824767),g=n(193948),f=n(189431),E=n(176857);class y{constructor(e,r,n,i){for(let a of(this.searchMap={},this.searchMapKeys=[],this.includeDisabled=!1,this.acceptsUnicode=!1,this.queryStringMap={},this.includeDisabled=!!(i&&i.includeDisabled),this.acceptsUnicode=!!(i&&i.acceptsUnicode),n.forEach(n=>this.addFigmaMenuItemsToSearchMap(e,r,n)),this.searchMapKeys=Object.keys(this.searchMap),this.searchMapKeys)){let e=this.searchMap[a],r=e.queryString?`${e.queryString} ${a}`:a;this.queryStringMap[r]=e}}addFigmaMenuItemsToSearchMap(e,r,n){if(!n||(0,d.k$)(n)||(0,d.gN)(n)||(0,d.id)(n)||!(0,g.UN)(n,{isDesktopMenu:!1,isReadOnly:e.isReadOnly,isSearching:!0,selectedView:r}))return;let a="children"in n;if(!(0,d._o)(n)||a||n.hideForQuickCommand||this._addToIndexInternal(n),"plugins-menu"!==n.name&&"widgets-menu"!==n.name&&a)for(let a of((0,i.KF)(null!=n.children,"this should be the type of menu groups that has FullscreenMenuItem as children"),n.children))this.addFigmaMenuItemsToSearchMap(e,r,a)}_addToIndexInternal(e){let{itemDisplayText:r,searchItem:n}=function(e){let r=(0,p.EG)(e),n={fullscreenMenuAction:e,queryString:"",searchKey:r};if("plugins-menu-item"===e.name){let r=e.extensionSearchString||"";n.searchKey=r}return e.isRepairCommand&&(0,l.kc)().internal_only_debug_tools&&!(0,h.h8)()&&(n.queryString="repair"),e.searchSynonyms&&!(0,h.h8)()&&(n.queryString=[n.queryString,...e.searchSynonyms].join(" ")),{itemDisplayText:r,searchItem:n}}(e);this.searchMap[r]=n}getItem(e,r){if(!(r in this.searchMap))return;let n={...this.searchMap[r].fullscreenMenuAction};return n.disabled=b(e,n),n}_buildSearchResult(e,r,n,i){let a={...r},o={...a.fullscreenMenuAction};return o.stringMatchedAgainst=n?.text||"",o.substringMatchScore=i?.score||0,o.substringMatchedAgainst=i?.text||"",o.stringMatchScore=this._getStringMatchScore(o,n),o.popularityScore=(0,u.a)(o.action),o.disabled=b(e,o),{...a,fullscreenMenuAction:o}}_getStringMatchScore(e,r){return void 0!==e.isLowPriorityMatch&&e.isLowPriorityMatch?0:r?.score||0}_searchByFuzzyMatchAndSubstringMatch(e,r){if(!r)return[];let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let i=new c.dU(r),a=[];for(let[r,s]of Object.entries(this.queryStringMap)){let l=n.matchAgainstText(r),d=l?.score||0,u=[];for(let e of(u.push(i.matchAgainstText(r,c.cT.VISIBLE)),s.fullscreenMenuAction.searchSynonyms||[])){let r=i.matchAgainstText(e,c.cT.HIDDEN);u.push(r)}let m=o()(u,e=>e.score),p=m?.score||0;(d>0||p>0)&&a.push(this._buildSearchResult(e,s,l,m))}return a}_searchByFuzzyMatch(e,r){let n=new s.A(r,this.acceptsUnicode);if(!n.isValidQuery())return[];let i=[],a=n.matchAgainst(Object.keys(this.queryStringMap));if(a.length)for(let r of a){if((0,h.h8)()&&r.score<1)continue;let n={...this.queryStringMap[r.text]};i.push(this._buildSearchResult(e,n,r))}return i}_searchForSearchItem(e,r){if(!r)return[];let n=[];n=(0,h.h8)()?this._searchByFuzzyMatchAndSubstringMatch(e,r):this._searchByFuzzyMatch(e,r);let i=(0,h.h8)()?(0,E.ou)({...(0,_.x0)(),acceptsUnicode:this.acceptsUnicode}):f.r;return n=n.sort((e,n)=>i.sort(r,e,n)),this.includeDisabled||(n=n.filter(e=>!e.fullscreenMenuAction.disabled)),n}search(e,r){return this._searchForSearchItem(e,r).map(e=>e.fullscreenMenuAction)}searchIncludeKey(e,r){return this._searchForSearchItem(e,r).map(e=>[e.searchKey,e.fullscreenMenuAction])}list(e){let r=this.searchMapKeys.map(r=>{let n={...this.searchMap[r].fullscreenMenuAction};return n.popularityScore=(0,u.a)(n.action),n.disabled=b(e,n),n});return r.sort((e,r)=>(r.popularityScore||0)-(e.popularityScore||0)),r}map(e){let r={};return this.searchMapKeys.forEach(n=>{let i={...this.searchMap[n].fullscreenMenuAction};i.popularityScore=(0,u.a)(i.action),i.disabled=b(e,i),r[i.name||i.action||n]=i}),r}}function b(e,r){return r.disabled?r.disabled:!(r.name||(0,m.Yh)(e,r.action)||r.quickAction?.alwaysEnabled)}},1688:(e,r,n)=>{n.d(r,{$O:()=>s,Z8:()=>o}),n(188507),n(268853),n(38329),n(966712);var i=n(716034),a=n(418956);n(711525),n(752553),n(776621),n(986270),n(756085),n(335682),n(279453),n(215822),n(555328),n(945020),n(376485);let o=(0,i.eU)([]);function s(){return a.zl.get(o)}},354235:(e,r,n)=>{n.d(r,{d:()=>F}),n(206354);var i=n(411855),a=n(109388),o=n(188507),s=n(243742),l=n(922827),c=n(572304),d=n(298455),u=n(776250),m=n(91408),p=n(886653),h=n(572206),_=n(809831),g=n(356390),f=n(617453),E=n(373119),y=n(843495),b=n(99506),v=n(100197),I=n(651963),T=n(433861),S=n(837746);let w=new Set(["DOCUMENT","CANVAS","NONE"]),A=(0,m.jz)(S.y9S),C=(0,m.jz)(S.IuL),N=(0,m.jz)(S.LQy),L=(0,m.jz)(S.MJh),O=(e,r,n)=>n?e===b._Y.WHITEBOARD?r?N:C:r?L:0:0,R=(0,p.xx)((e,r,n,i,a)=>{let{x:o,y:s,offsetX:l,offsetY:c,width:d,height:u,zoomScale:m}=e;r&&(o+=A,s+=A,l+=A/m/2,c+=A/m/2,d-=A,u-=A,d=Math.max(d,0),u=Math.max(u,0));let p=O(i,a,n);return u-=p,u=Math.max(u,1),c-=p/m/2,{...e,x:o,y:s,offsetX:l,offsetY:c,width:d,height:u}}),P=e=>{let r=e.split(",");if(r.length)return r[0].replace(/[\[\]\s]/g,"")},D=e=>e.replace(/[\[\]\s]/g,"").split(",");function k(e,r,n){let i;let a=l.glU.getActiveCommentAnchorData();i=n&&a&&a.stablePath!==c.x7&&a.stablePath.length>0?a.stablePath:l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath;let o={canvasPosition:e,pageId:r,viewport:g.Y5.getViewportInfo(),createdIn:window.FigmaMobile?"mobileViewer":"fullscreen"};if(null==i||i===c.x7)return o;let s=l.Egt.getBoundsForStablePath(i);if(!s&&n&&((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!0},{forwardToDatadog:!0}),s=l.Egt.getBoundsForStablePath(i)),!s)return((0,u.sx)("Comment stablePathBounds invalid",{usingActiveNode:!1},{forwardToDatadog:!0}),r)?{...o,nodeId:r,inFrame:!1,stablePath:[r]}:o;let d={x:s.x,y:s.y},m=h.Mi.subtract(e,d),p=P(i);return{...o,nodeId:p,nodeOffset:m,inFrame:r!==p,stablePath:D(i)}}function M(e){let r=(0,v.J2)((0,f.UK)().renderRulers),n=(0,o.d4)(e=>e.mirror.appModel.showUi),u=(0,_.lg)(),m=i.useRef(g.Y5.getViewportInfo()),[p,h]=i.useState(g.Y5.getViewportInfo()),E="ui3"===(0,s.DP)().version;!function(e){let r=(0,o.d4)(e=>"prototype"===e.selectedView.view||"communityHub"===e.selectedView.view);i.useEffect(()=>{!r&&g.Y5.isReady()&&(e(g.Y5.getViewportInfo()),(0,I.H)())},[e,r]),i.useEffect(()=>{let r=r=>{(0,a.flushSync)(()=>{e(r)})};return g.Y5.viewport.on("onSetViewport",r),()=>{g.Y5.viewport.removeListener("onSetViewport",r)}},[e])}(i.useCallback(e=>{m.current=e,h(e)},[h]));let b=i.useMemo(()=>({getViewportInfo:()=>R(m.current,r,n,u,E),getRawViewportInfo:()=>m.current,getCommentsWrapperOffset:e=>({x:0,y:1}),setCanvasSpaceCenter:e=>l.glU.setCanvasSpaceCenter(e.x,e.y),setZoomScale:(e,r)=>l.glU.setCanvasZoomScale(r),setHovering:e=>{if(!e){(0,y.Uc)(c.AD);return}let r=l.glU.getCommentAnchorDataAtPosition(e.x,e.y).stablePath,n=r?(0,d.UN)().getFromStablePath(D(r)):null;n&&!w.has(n.type)?(0,y.Uc)(n.guid):(0,y.Uc)(c.AD)},setCurrentPageIdAsync:async e=>await (0,d.UN)().setCurrentPageFromNodeAsync(e),pageIdForNodeId:e=>l.glU.getPageIdFromNode(e),getCommentDestinationForCanvasPosition:k,getValidCommentsRect:()=>null}),[r,n,u,E]),S=i.useMemo(()=>new T.f5(b,{...T.Pe,isGetViewportAtomic:!0}),[b]);return i.createElement(T.kw.Provider,{value:S},i.createElement(T.aF,{latestViewport:p},e.children))}function F(e){return(0,E.q)()?i.createElement(M,null,e.children):i.createElement(i.Fragment,null,e.children)}},286723:(e,r,n)=>{n.d(r,{DS:()=>G,Qp:()=>$,R$:()=>W,WD:()=>Y,_W:()=>F,aF:()=>H,kh:()=>M,ob:()=>k,q0:()=>x,r1:()=>U,t$:()=>B});var i=n(411855),a=n(188507);n(55253);var o=n(268853),s=n(922827),l=n(298455),c=n(203264),d=n(776250),u=n(91408),m=n(320063);n(966712);var p=n(418956),h=n(716034),_=n(915440),g=n(711525),f=n(776621),E=n(411751),y=n(950997),b=n(493323),v=n(939863),I=n(413145),T=n(970516),S=n(335682),w=n(99506),A=n(279453),C=n(540019),N=n(694517),L=n(800876),O=n(610267),R=n(585878),P=n(930269),D=n(323761);let k={alwaysPan:!0,maxScale:1},M={alwaysNavToSimilarViewport:!0},F=300,x=.5,U=4;function B(e,r){let n=(0,a.d4)(e=>e.openFile?.key),i=(0,a.d4)(e=>e.mirror.appModel.currentPage),o=r??i,s=(0,a.d4)(e=>e.fileVersion);return!!n&&!!o&&!!e&&(0,N.cn)(n,o,e,(0,O.N)(s))===p.zl.get(N.tP)}L.mg.COMPARE_THUMBNAIL;let V=(0,h.eU)("");function G(e){let r=new l.qo(s.juq.LIVE_FILE),n=(0,c.ei)(e,!1,r),u=n?.createdAt||null,h=u?new Date(u).toISOString():void 0,E=n?.lastEditedAt||null,y=E?new Date(E&&E%6e4==0&&E<17061264e5?E+6e4:E).toISOString():void 0,b=c.E1()?.toISOString(),v=(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.filterStatusVersions),T=function(e){let r=(0,S.tS)(),n=function(e){let r=(0,S.q5)(),n=r?.key,a=(0,_.Rs)(A.WND,{nodeId:e,fileKey:n??""},{enabled:!!n&&!!e}),[s,l]=(0,p.fp)(V);return(0,m.h)(()=>l("")),i.useMemo(()=>{if("loaded"===a.status){let r=a.data.file;if(r.status===g.tT.Error)return(0,f.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: File error = "+r.error)),null;let n=r.data?.devModeActivity;if(!r.data||!n||0===n.length)return[];let i=n.filter(e=>e.activityType===w.o6.STATUS_CHANGE).sort((e,r)=>r.timestamp.getTime()-e.timestamp.getTime()),c=`${e} - ${i.length}`;return e&&c!==s&&(l(c),(0,d.sx)("dev_mode.activity.fetch_activity_log",{numEntries:i.length},{forwardToDatadog:!0})),i}return"errors"===a.status?((0,f.$D)(o.e.DEVELOPER_TOOLS,Error("[Dev mode activity] Error fetching activity log: "+JSON.stringify(a.errors))),null):"loading"===a.status?"loading":null},[a,s,e,l])}(e??""),a=e?("loading"===n?null:n)?.map(e=>e.version?.id).filter(I.t):void 0,s=(0,N.kT)({fileKey:r,pageSize:200,versionIds:a}),[l]=(0,C.IT)(s,{enabled:!!r});return i.useEffect(()=>{"errors"===l.status&&(0,f.$D)(o.e.FEEDBACK,Error(`Version fetch in CC error: ${l.errors}`))},[l.status]),{versions:l.data||[],requestStatus:"loading"===n?"loading":l.status}}(v?e:void 0),L=i.useMemo(()=>v?T.versions:function(e,r,n,i){let a=[],o=!1;function s(){if(a.length>0){let e=a[a.length-1];e.frameCreated=!0,e.frameEdited=void 0}}for(let l of e){let e={...l};if(e.canvas_url&&(!o&&i&&e.created_at&&e.created_at<i&&(o=!0,e.lastViewed=!0),!r||!(e.edited_at>r))){if(n&&e.edited_at<n)return s(),a;a.push(e)}}return s(),a}(T.versions,y,h,b),[T.versions,y,h,b,v]),{requestStatus:O}=T;return{versions:L,versionsQueryLoaded:"loaded"===O||"disabled"===O}}function H({title:e,onClose:r,children:n}){let a=(0,u.jz)(P.compareChangesModalWidth);return i.createElement(R.XV,{title:e,fixedCenter:!0,disableClickOutsideToHide:!0,onClose:r,headerClassName:D.wx,containerClassName:D.ik,maxWidth:a,innerContainerClassName:D.Hb,focus:!0},n)}function K(e){return!!e&&e.hasOwnProperty("getImage")}function W(e){let{view:r,opacity:n,Overlay:a,hideNoImageText:o,header:s}=e,l=()=>void 0!==n?{opacity:n}:{},c=i.useMemo(()=>K(e.image)?e.image:e.image&&{data:e.image.image,width:e.image.width,height:e.image.height,scale:e.image.scale||U},[e]);return i.createElement("div",{className:r===E.Ss.SIDE_BY_SIDE?D.KJ:D.DF},!!s&&i.createElement("div",{className:D.Lg},s),!c&&i.createElement("div",{className:D.$0},!o&&(0,v.tx)("collaboration.feedback.compare_changes_modal.no_image_found")),K(e.image)?i.createElement(y.Nf,{className:D.Sl,style:{...l()},image:c,Overlay:a}):c&&i.createElement(y.ec,{className:D.Sl,style:{...l()},image:c,Overlay:a}))}function $(){return i.createElement("div",{className:D.GE},i.createElement(b.qc,null))}function Y(e,r){let n=e?.toString();n&&r(T.lW({stringToCopy:n}))}},415702:(e,r,n)=>{n.d(r,{xX:()=>l,$_:()=>c});var i=n(411855);n(188507),n(922827),n(776250);var a=n(181912);n(966712),n(493323),n(163023),n(46481);var o=n(939863);n(694517),n(498606);var s=n(928491);function l(e,r=!1){let n=(0,a.A)(new Date),i=(0,a.A)(e);return i.isSame(n,"day")?(0,o.t)("collaboration.feedback.time_hour_minutes",{time:i.toDate()}):i.isSame(n,"year")?(0,o.t)("collaboration.feedback.time_date_minutes_without_year",{time:i.toDate()}):r?(0,o.t)("collaboration.feedback.time_date_minutes",{time:i.toDate()}):(0,o.t)("collaboration.feedback.date",{time:i.toDate()})}function c(e,r){return e?i.createElement(s.Ro,{size:r,entity:{img_url:e}}):i.createElement("div",{className:"diffing_compare_summary--noUserImage--XijV0"})}n(227795)},236192:(e,r,n)=>{n.d(r,{Ah:()=>eZ,Cr:()=>eQ,YL:()=>eJ,aS:()=>e4,jP:()=>e0,ur:()=>eX});var i=n(411855),a=n(188507),o=n(140593),s=n(268853),l=n(603953),c=n(155543),d=n(575382),u=n(841368),m=n(326331),p=n(743717),h=n(630819),_=n(397863),g=n(13583),f=n(922827),E=n(629019),y=n.n(E),b=n(776250),v=n(20848),I=n(91408),T=n(966712),S=n(498750),w=n(711525),A=n(183297),C=n(563706),N=n(563042),L=n(153234),O=n(522739),R=n(776621),P=n(553716),D=n(268537),k=n(946689),M=n(564577),F=n(493323),x=n(163023),U=n(46481),B=n(154254),V=n(881388),G=n(939863),H=n(392592),K=n(809840),W=n(205857),$=n(598393),Y=n(165514),z=n(944682),j=n(738269),q=n(293017),Z=n(662275),X=n(188276),J=n(650769),Q=n(259927),ee=n(483990),et=n(101505),er=n(672517),en=n(385111),ei=n(226055),ea=n(974105),eo=n(396226),es=n(27703),el=n(356390),ec=n(122983),ed=n(243987),eu=n(428467),em=n(262151),ep=n(206193),eh=n(694517),e_=n(300874),eg=n(239671),ef=n(945020),eE=n(851363),ey=n(498606),eb=n(779086),ev=n(507956),eI=n(379025),eT=n(846456),eS=n(415702),ew=n(1691),eA=n(60088),eC=n(298543),eN=n(227795),eL=n(449731),eO=n(524513),eR=n(798661),eP=n(837746),eD=n(380910),ek=n(321385),eM=n(548832),eF=n(548603),ex=n(796529),eU=n(347196),eB=n(949207),eV=n(432023),eG=n(95779),eH=n(540206),eK=n(501191),eW=n(660164),e$=n(124784),eY=n(120118),ez=n(950142);let ej=(0,I.jz)(eP.uj0),eq=(0,I.jz)(eP.QBm);function eZ(e){return e===f.m1T.HISTORY||e===f.m1T.COMPARE_CHANGES||e===f.m1T.DEV_HANDOFF_HISTORY}function eX(e){return e.label?e.label:e.participating_users_array&&e.participating_users_array[0]?e.participating_users_array[0]:e.user.handle?e.user.handle:((0,P.x1)("version","Verison history got user without a handle",{item:e}),(0,R.$D)(s.e.SCENEGRAPH_AND_SYNC,Error("Verison history got user without a handle")),"(unknown user)")}function eJ(e){switch(e.item.view){case"branch_child_create":return(0,G.tx)("collaboration.feedback.new_branch_created");case"branch_child_merge":return(0,G.tx)("collaboration.feedback.branch_merged");case"branch_child_update":return(0,G.tx)("collaboration.feedback.branch_updated_from_main_file");case"branch_create":return(0,G.tx)("collaboration.feedback.branch_created");case"branch_merge":return(0,G.tx)("collaboration.feedback.branch_merged_into_main_and_archived");case"branch_update":return(0,G.tx)("collaboration.feedback.updated_from_main");case"branch_archive":return(0,G.tx)("collaboration.feedback.branch_archived");case"branch_restore":return(0,G.tx)("collaboration.feedback.branch_restored");case"file_restore":if(e.item.label)return(0,G.tx)("collaboration.feedback.version_restored_label",{label:e.item.label});return(0,G.tx)("collaboration.feedback.version_restored")}return i.createElement(i.Fragment,null,eX(e.item))}function eQ(e){let{time:r}=e,n=i.useMemo(()=>(0,eS.xX)(r,!0),[r]),{onChange:a}=e;return i.useEffect(()=>{a&&a(n)},[a,n]),i.createElement(i.Fragment,null,n)}class e0 extends L.uA{constructor(e){super(e),this.descriptionRef=i.createRef(),this.onClick=L.cZ(this,"click",()=>{setTimeout(()=>{this.props.isAllowedToChangeVersion()&&!this.props.isActive&&this.props.onSelect&&this.props.onSelect(this.props.versionId)},300)}),this.disabledOnClickHandler=L.cZ(this,"click",()=>{setTimeout(()=>{if((0,b.sx)("CTA Clicked",{name:"Disabled Version History",teamId:this.props.team?.id}),this.props.isStarterTeam){if(!this.props.team){(0,R.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(Z.to({type:eL.DV,data:{team:this.props.team,editorType:this.props.editorType,resource:e_.Bi.VERSION_HISTORY,currentPlan:eo.F.Plan.STARTER,upsellPlan:eo.F.Plan.PRO}}))}},300)}),this.onMouseEnter=e=>{let r=this.descriptionRef.current;r&&r.scrollHeight>r.clientHeight&&this.setState({hovered:!0})},this.onMouseLeave=e=>{this.setState({hovered:!1})},this.onDoubleClick=L.cZ(this,"dblclick",()=>{this.props.onCreateSavepoint?this.props.onCreateSavepoint():this.props.onEditSavepoint&&this.props.onEditSavepoint(this.props.versionId)}),this.onMenuClick=L.cZ(this,"contextmenu",e=>{this.props.onSavepointMenuCallback&&this.props.versionId!==eh.V_&&this.props.onSavepointMenuCallback(this.props.versionId,this.props.checkpointKey||"",e)}),this.onBranchClick=L.cZ(this,"click",e=>{e.stopPropagation(),this.props.dispatch(j.$T({view:"fullscreen",fileKey:this.props.branchFileKey,editorType:eg.nT.Design}))}),this.onCompareClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChanges&&this.props.isAllowedToChangeVersion()&&this.props.isCurrentVersionActive&&!this.props.isComparing&&this.props.onCompareChanges(this.props.versionId)},300)}),this.onCompareCurrentClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.props.onCompareChangesFromCurrent&&this.props.isAllowedToChangeVersion()&&!this.props.isComparing&&this.props.onCompareChangesFromCurrent()},300)}),this.toggleSeeMore=e=>{e.preventDefault(),e.stopPropagation(),this.setState({expandedDescription:!this.state.expandedDescription})},this.ref=e=>{e&&(this.versionRowDiv=e)},this.generateEditorName=(e,r)=>i.createElement("div",{className:eD.Lw,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":r,"data-tooltip-show-left":!0,"data-tooltip-max-width":1e3,key:`who_${e}`,dir:"auto"},r),this.generateBranchLink=e=>{if(!this.props.fileByKey||!this.props.branchFileKey)return null;{let r=this.props.fileByKey[this.props.branchFileKey];return r&&!r.deleted_at?i.createElement("span",{className:eD.qC,onClick:this.onBranchClick},e||(r.name??(0,G.tx)("collaboration.feedback.branch"))):i.createElement("span",{className:eD.at},r?.name??(0,G.tx)("collaboration.feedback.branch"))}},this.setFormattedTime=e=>{this.setState({formattedTime:e})},this.state={expandedDescription:!1,hovered:!1}}componentDidMount(){super.componentDidMount(),this.versionRowDiv&&this.props.isActive&&!this.props.first&&this.versionRowDiv.scrollIntoView(!1)}componentDidUpdate(e,r){super.componentDidUpdate(e,r);let n=this.props.description,i=e.description;n!==i&&(this.state.expandedDescription&&n&&i&&n.length>=i.length||this.setState({expandedDescription:!1}))}render(){let e,r,n;let a=this.descriptionRef.current,o=!!(a&&(this.state.expandedDescription||a.scrollHeight>a.clientHeight||this.state.hovered)&&!this.props.isActive),s=(0,eS.$_)(this.props.userUrl,15),m=this.props.versionId===eh.V_,p=!m&&!(0,eb.AI)({view:this.props.view??"file_default",label:this.props.label})&&!this.props.isLinked,h=this.props.version?.frameCreated||this.props.version?.frameEdited||this.props.version?.lastViewed,_=p&&!h,g=this.props.isPreview?eD.qv:eD.AS;this.props.disabled&&!this.props.isStarterTeam&&(g=eD.Y0+" "+g),m&&(g=eD.j$+" "+g),(this.props.isActive||this.props.isComparing)&&(g=eD.SU+" "+g),this.props.onSelect&&(g=eD.kD+" "+g);let f=this.props.isActive&&!m?eD.Nh:this.state.expandedDescription?eD.lV:o?eD.LF:eD.h_,E=this.state.expandedDescription?(0,G.tx)("collaboration.feedback.show_less"):(0,G.tx)("collaboration.feedback.show_more"),y=[],b=0;if(this.props.participatingImagesDict){let n=Object.keys(this.props.participatingImagesDict).length;for(let[a,o]of Object.entries(this.props.participatingImagesDict))if(e=(0,eS.$_)(o,15),r=this.generateEditorName(b,a),y.push(i.createElement("span",{className:eD.zL,key:a},(!this.props.first||"current_version"!=this.props.versionId)&&e,r)),++b>4&&b<n&&!this.props.isActive){y.push(i.createElement("div",{className:eD.lw,key:"number-additional-editors"},(0,G.tx)("collaboration.feedback.num_editors_number_editor_count_more",{numEditors:n-Number(b)})));break}}else this.props.user&&this.props.userUrl?(e=(0,eS.$_)(this.props.userUrl,15),r=this.generateEditorName(b,this.props.user),y.push(i.createElement("span",{className:eD.zL,key:"branching-solo-editor"},(!this.props.first||"current_version"!=this.props.versionId)&&e,r))):_&&"file_multiplayer"===this.props.view&&"Figma System"===this.props.user&&y.push(i.createElement("div",{className:eD.EB,key:"figma-system"},this.props.user));let v=eD.N5;this.props.hideLine?v="":this.props.first&&this.props.last?v=eD.y5:this.props.first?v=eD.pi:this.props.last&&(v=eD.p8);let I=this.props.isUI3?void 0:s,T=null,S="text"in this.props?this.props.text.toLowerCase():void 0;_||(I="components published"===S||"published to community hub"===S?i.createElement(U.U,{className:eD.mk,svg:e$.A,useOriginalSrcFills_DEPRECATED:!0},i.createElement(l.z,null)):i.createElement(ew.D,null)),_&&this.props.last&&(I=i.createElement(ew.D,null));let w=this.props.isUI3&&this.props.devModeActivity&&this.props.devModeActivity.length>0;if(w){let{status:e,nodes:r}=(0,Y.D0)(this.props.devModeActivity);T=i.createElement(eR.e,{status:e,nodes:r}),I=i.createElement(eR.M,{status:e})}if(this.props.isBranchingVersion)switch(this.props.view){case"branch_child_create":I=i.createElement(U.U,{className:eD.F4,svg:eU.A},i.createElement(c.o,null)),T=(0,G.tx)("collaboration.feedback.branch_child_create",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(v=eD.zj),this.props.last&&(v=this.props.isUI3?"":eD.JE);break;case"branch_child_merge":I=i.createElement(U.U,{className:eD.Wi,svg:ex.A},i.createElement(d.C,null)),T=(0,G.tx)("collaboration.feedback.merged",{link:this.generateBranchLink(this.props.label)});break;case"branch_child_update":I=i.createElement(ew.D,null),T=(0,G.tx)("collaboration.feedback.branch_child_update",{link:this.generateBranchLink()}),this.props.isPreview&&this.props.first&&!this.props.hideLine&&(v=eD.zj),this.props.last&&(v=this.props.isUI3?"":eD.JE);break;case"branch_merge":I=i.createElement(U.U,{className:eD.mq,svg:eH.A,useOriginalSrcFills_DEPRECATED:!0},i.createElement(d.C,null)),T=(0,G.tx)("collaboration.feedback.branch_merge",{link:this.generateBranchLink((0,G.t)("collaboration.feedback.main_branch_name"))});break;case"branch_create":I=i.createElement(U.U,{className:eD.VO,svg:eF.A},i.createElement(c.o,null)),T=(0,G.tx)("collaboration.feedback.branch_created");break;case"branch_update":I=i.createElement(U.U,{className:eD.F4,svg:eU.A},i.createElement(c.o,null)),T=(0,G.tx)("collaboration.feedback.branch_updated_from",{link:this.generateBranchLink((0,G.t)("collaboration.feedback.main_branch_name"))});break;case"branch_archive":I=i.createElement(U.U,{className:eD.lf,svg:eM.A},i.createElement(l.z,null)),T=(0,G.tx)("collaboration.feedback.branch_archived");break;default:I=i.createElement(ew.D,null)}let A=[];this.props.version?.frameCreated&&A.push(this.props.isSection?(0,G.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,G.tx)("collaboration.feedback.compare_changes_modal.frame_created")),this.props.version?.lastViewed&&A.push((0,G.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you")),p&&!_&&this.props.time?A.push(i.createElement("div",{className:eD.IF},i.createElement(eQ,{time:this.props.time}))):_&&this.props.time?A.push(this.renderTime(this.props.time,eD.Ov,this.props.showCompareChanges)):"displayText"in this.props?A.push(this.props.displayText):A.push(this.props.text),this.props.isUI3&&this.props.isComparing&&!this.props.isComparingLoading&&!m&&(n=i.createElement("div",{className:eD.UY},i.createElement("div",{className:eD.sh},A[0]),i.createElement(x.B,{svg:ek.A,className:eD.KD}),i.createElement("div",{className:eD.$D},(0,G.tx)("collaboration.feedback.current_file"))));let C=i.createElement(i.Fragment,null,this.props.isBranchingVersion&&this.props.fileByKey&&this.props.branchFileKey?i.createElement("div",{className:eD.RI,dir:"auto"},T):w?i.createElement("div",{className:eD.Pf,dir:"auto"},T):n?i.createElement("div",{className:eD.Pf,dir:"auto"},n):i.createElement("div",{className:eD.Pf,dir:"auto"},A[0])),O=(0,N.$J)(this.props.description),R=y.length>0&&i.createElement("div",{className:eD.VM},y),P=!p&&this.props.time&&i.createElement("span",{className:eD.DS,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,eS.xX)(this.props.time)}," ",this.props.isLinked?i.createElement(eQ,{onChange:this.setFormattedTime,time:this.props.time}):i.createElement(M.h1,{onChange:this.setFormattedTime,date:this.props.time})),D=A.length>1||O||o||R||P,k=i.createElement(i.Fragment,null,A.length>1&&i.createElement("div",{className:eD.HK},A.slice(1).map((e,r)=>i.createElement("div",{className:eD.Pf,dir:"auto",key:r},e))),(!this.props.isUI3||O)&&i.createElement("div",{className:f,style:{paddingRight:this.getLabelRightPosition(this.props.showCompareChanges)},ref:this.descriptionRef,dir:"auto"},O),o&&i.createElement("div",{className:eD.B0,onClick:this.props.disabled?void 0:this.toggleSeeMore},i.createElement("div",{className:eD.yT},E)),this.props.isUI3?i.createElement(i.Fragment,null,R,P,this.props.rowBodyFooter||!P&&(R||a)&&i.createElement("div",null)):i.createElement("div",null,R,P,this.props.rowBodyFooter)),B=this.props.isActive&&this.props.onSavepointMenuCallback&&!m&&i.createElement(eN.K0,{onClick:this.props.disabled?void 0:this.onMenuClick,className:eD.Wh,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContext")},i.createElement(U.U,{svg:eG.A},i.createElement(u.J,null))),V=this.props.onHoverMenuCallback&&!this.props.onSavepointMenuCallback?i.createElement(eN.K0,{onClick:this.props.onHoverMenuCallback,className:this.props.forceShowHoverMenu?eD.xL:eD.Gb,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.more_options"),recordingKey:L.Pt(this.props,"versonContextHover")},i.createElement(U.U,{svg:eG.A},i.createElement(u.J,null))):null,H=i.createElement("button",{onClick:this.onCompareClick,className:eD.kr},(0,G.tx)("collaboration.feedback.compare")),K=i.createElement("button",{onClick:this.onCompareCurrentClick,className:eD.kr},(0,G.tx)("collaboration.feedback.compare")),W=i.createElement("button",{onClick:this.props.onDoneComparingClick,className:eD.kr},(0,G.tx)("collaboration.feedback.done_version_history"));return i.createElement(i.Fragment,null,(!_||this.props.showAutosaves)&&i.createElement("div",{className:g,ref:this.ref,onClick:this.props.disabled?this.disabledOnClickHandler:this.onClick,onMouseEnter:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseEnter,onMouseLeave:this.props.disabled&&!this.props.isStarterTeam?void 0:this.onMouseLeave,onContextMenu:this.props.disabled?void 0:this.onMenuClick,onDoubleClick:this.props.disabled&&this.props.isStarterTeam?void 0:this.onDoubleClick,"data-testid":"version-row"},!this.props.isUI3&&i.createElement("div",{className:v}),i.createElement("div",{className:_?eD.RV:eD.mP},i.createElement("div",{className:eD.Tc},i.createElement("div",{className:D?eD.eF:eD.nw,style:{right:this.getLabelRightPosition(this.props.showCompareChanges)}},this.props.iconOverride?this.props.iconOverride(i.createElement("div",{className:v})):this.props.isUI3?i.createElement("div",{className:eD.Gl},i.createElement("div",{className:v}),I):I,this.props.isUI3?i.createElement("div",{className:eD.B_},i.createElement("div",{className:eD.eP},C,k),B,this.props.onHoverMenuCallback&&V,this.props.showCompareChanges&&!this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&m&&K,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&!m&&!this.props.isComparing&&H,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&!this.props.isComparingLoading&&this.props.isComparing&&W,this.props.showCompareChanges&&this.props.isCurrentVersionActive&&this.props.isComparingLoading&&!m&&!this.props.isComparing&&i.createElement("div",{className:eD.Ob},i.createElement(F.kt,null))):C),!this.props.isUI3&&B,!this.props.isUI3&&V),!this.props.isUI3&&k)))}renderTime(e,r,n){let a=i.createElement(eQ,{time:e,onChange:this.setFormattedTime});return i.createElement("div",{className:r},a)}getLabelRightPosition(e){return e?"65px":"35px"}}function e1({shouldShowUpgradeLink:e,startUpgrade:r,hasRestrictedVersions:n}){let a=en.h.useTrackingContext({trigger:ep.b.HISTORY_UPSELL});return i.createElement(er.fu,{name:"Version History Paywall Panel",properties:{...a}},i.createElement("div",{className:eD.NM},i.createElement(K.E,{fontWeight:"semi-bold"},(0,G.tx)(n?"upsell.history.need_to_travel_back_in_time":"upsell.history.everything_else_is_history")),i.createElement("div",null,e?i.createElement(K.E,null,(0,G.tx)("upsell.history.upsell_upgrade_description",{upgradeLink:i.createElement(k.Ph,{className:eD.s6,onClick:r,trackingProperties:{trackingDescriptor:et.c.UPGRADE,upsellSource:ep.b.HISTORY_UPSELL,canUserAccessProFeature:!1},trusted:!0},i.createElement(K.E,null,(0,G.tx)("upsell.history.upsell_upgrade")))})):i.createElement(K.E,null,(0,G.tx)("upsell.history.upsell_learn_more_description",{upgradeLink:i.createElement(k.Ph,{className:eD.s6,href:"/pricing",trusted:!0,trackingProperties:{canUserAccessProFeature:!1}},(0,G.tx)("upsell.history.learn_more"))})))))}function e2(){return i.createElement(i.Fragment,null,i.createElement("span",{className:eD.ot},C.Ay.mac?(0,G.tx)("collaboration.feedback.shortcut_mac"):(0,G.tx)("collaboration.feedback.shortcut")))}e0.displayName="VersionRow";class e5 extends L.uA{constructor(e){super(e),this.label="",this.description="",this.hasLabeled=!1,this.autoExpandUnlabeledOnly=!0,this.autoExpandGroupId="",this.expandLast=!1,this.toggleAutoItemById=e=>{let r=new Set(this.state.expandedIds);r.has(e)||this.autoExpandUnlabeledOnly&&!this.hasLabeled||this.autoExpandGroupId===e?(r.delete(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!1),this.setState({autoExpandForCurrentSelection:!1})):(r.add(e),this.hasLabeled||(this.autoExpandUnlabeledOnly=!0)),this.autoExpandGroupId="",this.setState({expandedIds:r})},this.drawRows=(e,r,n,i)=>{let a=[],o=0,s=-1,l=-1,c=0,d=e.length-1-e.slice().reverse().findIndex(e=>(0,eb.AI)(e)),u=e.length-1-e.slice().reverse().findIndex(e=>this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle));for(;o<e.length;){let r=e[o];if((0,eb.AI)(r)){let m=n&&(0===o&&r.disabled||0===a.length);c>0&&(this.renderAutoVersionBatch(a,e,s,l,n&&(r.disabled&&0===s||0===a.length),!1,this.state.showAutosaves,i),m=!1),a.push(this.renderRow(r,m,o===e.length-1||o===d&&!this.state.showAutosaves||o===u&&this.state.showOnlyUserVersionHistory,i)),c=0,s=-1,l=-1}else s<0&&(s=o),l=o,c++;o++}return c>0&&this.renderAutoVersionBatch(a,e,s,l,n&&(e[0].disabled&&0===s||0===a.length),r,this.state.showAutosaves,i),a},this.hasLabeledVersions=e=>{for(let r of e)if(r.label&&r.label.length>0)return!0;return!1},this.startLoadingVersion=e=>{this.props.dispatch(j.$T({...this.props.selectedView,versionId:e.id})),this.props.dispatch(q.Y6({mode:f.Oin.KEEP_UI,type:ef.lF.SPINNER})),this.setState({isLoadingVersion:!0,loadingVersionId:e.id}),(0,b.sx)("History Version Savepoint Viewed",{savepointId:e.id,savedAt:e.touched_at})},this.finishedLoadingVersion=()=>{let e=this.state.loadingVersionId;if(e&&e.length>0){let r=this.getVersionByID(e);if(r&&!this.props.modalShown){let e;if(null!=r.label&&r.label.length>0)e=(0,G.t)("collaboration.feedback.viewing_version",{label:r.label});else{let n=(0,eS.xX)(r.touched_at);e=(0,G.t)("collaboration.feedback.viewing_version",{label:n})}e.length>34&&(e=e.substring(0,34)+"\u2026"),this.props.dispatch(H.F.enqueue({type:"versions",message:e}))}}this.setState({isLoadingVersion:!1,loadingVersionId:""})},this.loadVersionById=e=>{if(e===this.props.versionHistory.activeId)return;if(e===eh.V_){this.props.dispatch((0,eh.Nb)({id:eh.V_}));return}let r=this.getVersionByID(e);r&&this.loadVersion(r)},this.loadVersion=e=>{e.id!==this.props.versionHistory.activeId&&(this.startLoadingVersion(e),requestAnimationFrame(()=>{this.props.dispatch((0,eh.Nb)({id:e.id,eventType:"LOAD_NEW_VERSION"}))}))},this.isAllowedToChangeVersion=()=>null===this.props.modalShown&&!(0,em.hM)(),this.onKeyDown=L.C0(this,"keydown",e=>{if(!this.props.dropdownShown&&!this.props.modalShown&&!this.props.versionHistory.compareId){if(e.keyCode===S.Uz.ESCAPE)this.props.modalShown||0!==Object.keys(this.props.mirror.sceneGraphSelection).length||this.props.dispatch((0,eh.Eg)());else if(e.keyCode===S.Uz.UP_ARROW||e.keyCode===S.Uz.DOWN_ARROW){if(!this.isAllowedToChangeVersion())return;let r=this.props.versionHistory.versions.length;this.setState({autoExpandForCurrentSelection:!0}),this.autoExpandGroupId="";let n=-1;if(this.props.versionHistory.activeId===eh.V_)e.keyCode===S.Uz.DOWN_ARROW&&(n=0);else{let r=this.props.versionHistory.versions.findIndex(e=>e.id===this.props.versionHistory.activeId);-1!==r&&(n=e.keyCode===S.Uz.UP_ARROW?r-1:r+1)}if(n<0){this.props.dispatch((0,eh.Nb)({id:eh.V_}));return}n>=r&&(n=r-1);let i=this.props.versionHistory.versions[n];i.disabled||this.loadVersion(i)}}}),this.startComparingChanges=e=>{this.props.dispatch(q.Y6({mode:f.Oin.KEEP_UI,type:ef.lF.SPINNER})),this.setState({isLoadingCompareChanges:!0,loadingCompareId:e.id})},this.finishedComparingChanges=()=>{let e=this.state.loadingCompareId;if(e&&e.length>0&&!this.props.modalShown){let r=this.getVersionByID(e);if(!r)return;if(0===f.AWq.getChunkChangeCount()){f.Egt.clearSelection();let e=(0,G.t)("collaboration.feedback.no_visible_changes");e.length>56&&(e=e.substring(0,56)+"\u2026"),this.props.dispatch(H.F.dequeue({})),this.props.dispatch(H.F.enqueue({type:"comparing",message:e}))}else{let e=null!=r.label&&r.label.length>0?r.label:(0,eS.xX)(r.touched_at),n=(0,G.t)("collaboration.feedback.comparing_changes_toast",{fromVersionLabel:e});n.length>56&&(n=n.substring(0,56)+"\u2026"),this.props.dispatch(H.F.dequeue({})),this.props.dispatch(H.F.enqueue({type:"comparing",message:n}))}}this.setState({isLoadingCompareChanges:!1,loadingCompareId:""}),this.props.dispatch(q.Y6({mode:f.Oin.OFF}))},this.compareChangesById=e=>{if(e===eh.V_)return;if(e===this.props.versionHistory.compareId){this.props.dispatch((0,eh.vF)({fromVersionId:e}));return}let r=this.getVersionByID(e);r&&this.compareChanges(r)},this.compareChangesFromCurrent=()=>{let e=this.props.versionHistory.activeId;if(!e)return;let r=this.getVersionByID(e);r&&(this.props.dispatch((0,eh.Nb)({id:eh.V_})),this.compareChanges(r))},this.compareChanges=e=>{e.id!==this.props.versionHistory.compareId&&(this.startComparingChanges(e),requestAnimationFrame(()=>{this.props.dispatch((0,eh.vF)({fromVersionId:e.id}))}))},this.loadMore=()=>{this.expandLast=!0,this.props.dispatch((0,eh._h)({direction:A.AS}))},this.startUpgrade=()=>{let e=this.getOpenFile(),r=e.teamId&&this.props.teams[e.teamId];if(!r){(0,R.$D)(s.e.MONETIZATION_UPGRADES,Error("Paywall: no team present"));return}this.props.dispatch(Z.to({type:W.V,data:{upsellSource:ep.b.HISTORY_UPSELL,teamId:r.id,openCheckoutInNewTab:!0}}))},this.restoreVersion=e=>{this.canEditFile()&&(this.props.dispatch(z.PF({fileKey:this.getOpenFile().key,versionId:e.id})),(0,b.sx)("History Version Checkpoint Restored",{versionId:e.id,savedAt:e.touched_at}))},this.duplicateVersion=e=>{let r=this.getOpenFile(),n=(0,ec.xp)(r,r.project,(0,eu.getPermissionsState)(this.props));n?this.props.dispatch(Z.to({type:eL.DV,data:{team:n,resource:e_.vL.FILE,action:eE.ZN.DUPLICATE_FILES,editorType:r.editorType,currentPlan:eo.F.Plan.STARTER,upsellPlan:eo.F.Plan.PRO}})):(this.props.dispatch(z.YW({file:this.getOpenFile(),versionId:e.id})),(0,b.sx)("History Version Checkpoint Duplicated",{versionId:e.id,savedAt:e.touched_at}))},this.clearVersion=e=>{this.props.dispatch(X.D({fileKey:this.getOpenFile().key,savepointID:e,label:"",description:""}))},this.addSavepoint=()=>{this.canEditFile()&&this.props.dispatch(Z.to({type:eO.yU,data:{}}))},this.editSavepoint=e=>{if(this.canEditFile()&&e){let r=this.getVersionByID(e);r?.label&&(this.label=r.label),r?.description&&(this.description=r.description),this.props.dispatch(Z.to({type:eO.yU,data:{description:this.description,label:this.label,savepointID:e}}))}},this.showUndoMergeModal=e=>{this.props.dispatch(Z.to({type:eI.G,data:{version:e}}))},this.dropdownCallback=(e,r)=>{let{version:n}=r;switch(e){case"savepoint-clear":this.clearVersion(n.id);break;case"savepoint-restore":this.restoreVersion(n);break;case"savepoint-duplicate":this.duplicateVersion(n);break;case"savepoint-edit":case"savepoint-label":this.editSavepoint(n.id);break;case"savepoint-compare":this.compareChangesFromCurrent();break;case"savepoint-link":try{!function(e,r,n){e(J.zT({...r,versionId:n})),e(H.F.enqueue({type:"link_copied_to_clipboard",message:(0,ee.A)("link-copied")}))}(this.props.dispatch,this.props.selectedView,n.id)}catch(e){this.props.dispatch(V.s.error("Failed to copy link"))}break;case"savepoint-undo-merge":this.showUndoMergeModal(n)}},this.getVersionByID=e=>{let r=this.props.versionHistory,n=r.versions.find(r=>r.id===e);return r.linkedVersion?.id===e?r.linkedVersion:n},this.onSavepointMenu=(e,r,n)=>{if(this.props.dropdownShown&&this.props.dropdownShown.type===Q.$O){n.preventDefault();return}n.stopPropagation(),n.preventDefault();let i=this.getVersionByID(e),a=this.getOpenFile(),{clientX:o,clientY:s}=n;this.props.dispatch(j.j7({type:Q.$O,data:{clientX:o,clientY:s,version:i,callback:this.dropdownCallback,editName:i.label?"savepoint-edit":"savepoint-label",enableClear:i.label&&i.label.length>0,disableDuplicate:this.props.selectedView.editorType===eg.nT.Slides&&(0,w.oA)(a.org?.isSlidesDisabled)||this.props.selectedView.editorType===eg.nT.Whiteboard&&!!a.org?.figjamDisabledAt}}))},this.onDoneComparingClick=L.cZ(this,"click",e=>{e.stopPropagation(),setTimeout(()=>{this.isAllowedToChangeVersion()&&this.props.versionHistory.compareId&&(this.props.dispatch((0,eh.Nb)({id:eh.V_})),f.Egt.clearSelection(),this.props.dispatch(H.F.dequeue({matchType:"comparing"})),this.props.dispatch(H.F.dequeue({matchType:"view_changes"})))},300)}),this.renderRow=(e,r,n,a)=>{let o=this.getOpenFile();return i.createElement(e0,{key:`history-item-${e.id}`,description:e.description,label:e.label,disabled:e.disabled,text:eX(e),displayText:i.createElement(eJ,{item:e}),view:e.view?e.view:null,participatingImagesDict:e.participating_images_dict,time:e.touched_at,isActive:this.props.versionHistory.activeId===e.id,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isComparingLoading:this.state.loadingCompareId===e.id,isComparing:this.props.versionHistory.compareId===e.id,devModeActivity:e.dev_mode_activity,user:e.user&&e.user.handle,userUrl:e.user&&((0,eb.pW)(e)||e.label)?e.user.img_url:null,clearVersion:this.clearVersion.bind(this,e.id),onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,versionId:e.id,checkpointKey:e.checkpoint_key,dispatch:this.props.dispatch,recordingKey:L.Pt(this.props,"version",e.id),onSavepointMenuCallback:this.onSavepointMenu,onEditSavepoint:this.editSavepoint,first:r,last:n,isBranchingVersion:(0,eb.pW)(e),fileByKey:this.props.fileByKey,branchFileKey:e.branch_file_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isStarterTeam:a,team:o.teamId?this.props.teams?.[o.teamId]:void 0,editorType:o.editorType,isUI3:this.props.isUI3})},this.onClose=()=>{if(this.props.onClose){this.props.onClose();return}this.props.dispatch((0,eh.Eg)())},this.state={isLoadingVersion:!1,loadingVersionId:"",isLoadingCompareChanges:!1,loadingCompareId:"",expandedIds:new Set,autoExpandForCurrentSelection:!1,showAutosaves:!0,showOnlyUserVersionHistory:!1}}renderAutoVersionBatch(e,r,n,a,o,s,l,c){let d;if(n<0||null===r||r.length<1)return;let u=r[n].id,h=this.state.expandedIds.has(u)||this.autoExpandUnlabeledOnly&&!this.hasLabeled;if(this.state.autoExpandForCurrentSelection)for(let e=n;e<=a;e++)r[e].id===this.props.versionHistory.activeId&&(h=!0,this.autoExpandGroupId=this.props.versionHistory.activeId);this.expandLast&&s&&(h||this.toggleAutoItemById(u),this.expandLast=!1);let _=a-n+1,g=!0;if(1===_&&(h=!0,g=!1),d=s&&(1===_||!h)?o?eD.y5:eD.p8:o?eD.pi:eD.N5,g&&l&&e.push(i.createElement(O.D8,{key:`auto_row_${n}`,recordingKey:L.Pt(this.props,`autoVersionBatch.${n}`),className:r[n].disabled?eD.Ao:eD.QQ,onClick:this.toggleAutoItemById.bind(this,u)},!this.props.isUI3&&i.createElement("div",{className:d}),i.createElement("div",{className:eD.Jt},this.props.isUI3?i.createElement("div",{className:eD.Gl},i.createElement("div",{className:d}),h?i.createElement(m.r,null):i.createElement(p.R,null)):i.createElement(ew.D,null),i.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:_}),!this.props.isUI3&&i.createElement(x.B,{key:"expand-caret",className:h?eD.ey:eD.GE,svg:h?eB.A:eV.A}))))),h)for(let i=n;i<=a;i++)e.push(this.renderRow(r[i],o&&n===a,s&&i===a,c))}componentDidMount(){super.componentDidMount(),this.props.versionHistory.activeId||this.props.dispatch((0,eh.Nb)({id:eh.V_})),document.addEventListener("keydown",this.onKeyDown),el.Y5.fromFullscreen.on("sceneGraphMirrorUpdate",this.finishedLoadingVersion),v.j.on("loadedCompareChanges",this.finishedComparingChanges)}componentWillUnmount(){super.componentWillUnmount(),document.removeEventListener("keydown",this.onKeyDown),el.Y5.fromFullscreen.removeListener("sceneGraphMirrorUpdate",this.finishedLoadingVersion),v.j.removeListener("loadedCompareChanges",this.finishedComparingChanges)}getOpenFile(){let e=this.props.openFile;return null==e&&(0,P.x1)("history","history view should only be possible to open when we have a file"),(0,o.KF)(null!=e,"history view should only be possible to open when we have a file"),e}canEditFile(){return this.props.openFile?.canEdit}showCompareChanges(){return(0,T.kc)().version_diffing&&this.props.selectedView.editorType===eg.nT.Design}render(){let e=this.getOpenFile(),r=e.team,n=this.props.versionHistory.versions.filter(e=>!this.state.showOnlyUserVersionHistory||this.props.user?.handle&&(e.participating_users_array?.includes(this.props.user?.handle)||e.user.handle===this.props.user?.handle)),a=n.filter(e=>!e.disabled),o=n.filter(e=>e.disabled).slice(0,ed.cW);this.hasLabeled=this.hasLabeledVersions(a)||this.hasLabeledVersions(o);let s=null,l=(0,A.u9)(this.props.versionHistory),c=!(0,ed.XX)(r)&&!this.props.currentUserOrgId&&(o.length>0||!l),d=!!r&&(0,eu.canEditTeam)(r.id,(0,eu.getPermissionsState)(this.props));c&&(s=i.createElement(e1,{startUpgrade:this.startUpgrade,shouldShowUpgradeLink:d,hasRestrictedVersions:!!o.length}));let u=i.createElement("div",{className:eD.UX},!this.props.versionHistory.loading&&(0,A.u9)(this.props.versionHistory)&&i.createElement("a",{className:eD.nf,onClick:this.loadMore},(0,G.tx)("collaboration.feedback.show_older"))),m=this.props.versionHistory.docHasChanged&&!this.props.versionHistory.loading,p=this.props.versionHistory.linkedVersion,h=p&&a.some(e=>p.id===e.id),_=!this.state.showOnlyUserVersionHistory||p?.user.id===this.props.user?.id,g=(0,ev.$A)(this.props.selectedView),E=(0,eT.C)(this.props.selectedView),b=!this.canEditFile(),v=a.map(e=>(0,eb.AI)(e)?1:0).reduce((e,r)=>e+r,0);return i.createElement("div",null,this.props.progressBarState.mode!==f.Oin.ON_AND_LOCKED&&i.createElement(er.fu,{name:"Version History Panel",properties:{teamId:r?.id}},i.createElement("div",{className:y()(eD.kL,Q.Dm),style:g||E||this.props.isUI3?{width:g||this.props.isUI3?"100%":ej+eq,borderLeft:g?"unset":void 0,minWidth:E&&this.props.isUI3?"240px":"unset"}:{position:"fixed",top:"auto",bottom:"auto",width:ej+eq,height:"100%"}},i.createElement(e3,{onClose:this.onClose,addSavepoint:this.addSavepoint,filterOptions:{showAutosaves:this.state.showAutosaves,setShowAutosaves:e=>this.setState({showAutosaves:e}),showOnlyUserVersionHistory:this.state.showOnlyUserVersionHistory,setShowOnlyUserVersionHistory:e=>this.setState({showOnlyUserVersionHistory:e})},isViewOnly:b,recordingKey:L.Pt(this.props,"toolbar")}),i.createElement("div",{"data-not-draggable":!0},i.createElement("div",{className:eD.dG},!this.hasLabeled&&!b&&!g&&i.createElement("div",{className:eD.fy},i.createElement("div",null,(0,G.tx)("collaboration.feedback.press_shortcut_to_add_to_version_history_while_editing",{shortcut:i.createElement(e2,null)}))),p&&!h&&_&&i.createElement(e0,{description:p.description,label:p.label,versionId:p.id,onSavepointMenuCallback:this.onSavepointMenu,displayText:(0,G.tx)("collaboration.feedback.get_version_text_linked_version_linked_version",{versionText:i.createElement(eJ,{item:p})}),view:p.view?p.view:null,time:p.touched_at,isActive:this.props.versionHistory.activeId===p.id,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isComparingLoading:this.state.loadingCompareId===p.id,isComparing:this.props.versionHistory.compareId===p.id,userUrl:p.user.img_url,dispatch:this.props.dispatch,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,isLinked:!0,first:!0,last:!0,isBranchingVersion:(0,eb.pW)(p),checkpointKey:p.checkpoint_key,showAutosaves:this.state.showAutosaves,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.props.versionHistory.loading&&i.createElement("div",{className:eD.u1},i.createElement(F.kt,null)),m&&i.createElement(e0,{displayText:(0,G.tx)("collaboration.feedback.current_version"),view:null,isActive:this.props.versionHistory.activeId===eh.V_,isCurrentVersionActive:this.props.versionHistory.activeId===eh.V_,isComparingLoading:this.state.loadingCompareId===eh.V_,isComparing:!!this.props.versionHistory.compareId,userUrl:this.props.user.img_url,versionId:eh.V_,dispatch:this.props.dispatch,addSavepoint:this.addSavepoint,onSelect:this.loadVersionById,onCompareChanges:this.compareChangesById,onCompareChangesFromCurrent:this.compareChangesFromCurrent,isAllowedToChangeVersion:this.isAllowedToChangeVersion,first:!0,last:!1,recordingKey:L.Pt(this.props,"currentVersion"),onCreateSavepoint:this.addSavepoint,onSavepointMenuCallback:this.onSavepointMenu,showAutosaves:this.state.showAutosaves,hideLine:0===a.length||!this.state.showAutosaves&&0===v,showCompareChanges:this.showCompareChanges(),onDoneComparingClick:this.onDoneComparingClick,isUI3:this.props.isUI3,editorType:e.editorType}),this.drawRows(a,0===o.length,!m),this.drawRows(o,!0,!1,d),s),0===o.length&&u))))}}function e3(e){let{onClose:r,addSavepoint:n,filterOptions:a,isViewOnly:o}=e,{toggleDropdown:s,dropdownTargetRef:l,isDropdownShown:c}=(0,eA.B)("FILTER_VERSIONS_DROPDOWN"),d=(0,ei.GS)();i.useEffect(()=>{},[c,l]);let u=()=>{a?.setShowOnlyUserVersionHistory(!a?.showOnlyUserVersionHistory)},m=a?[i.createElement(D.MM,{key:"all",checked:!a.showOnlyUserVersionHistory,onClick:()=>a.showOnlyUserVersionHistory?u():null},(0,G.tx)("collaboration.feedback.all_filter_text")),i.createElement(D.MM,{key:"only_yours",disabled:o,checked:a.showOnlyUserVersionHistory,onClick:()=>a.showOnlyUserVersionHistory?null:u()},(0,G.tx)("collaboration.feedback.only_yours_filter")),i.createElement(D.wv,{key:"sep"}),i.createElement(D.MM,{key:"autosaves",checked:a.showAutosaves,onClick:()=>{a?.setShowAutosaves(!a.showAutosaves)}},(0,G.tx)("collaboration.feedback.show_autosave_versions"))]:[];return i.createElement("div",{className:eD.N1},i.createElement("div",{className:eD.qd},(0,G.tx)("collaboration.feedback.version_history")),i.createElement("div",{className:d?B.cx.flex.itemsCenter.gap4.$:B.cx.flex.itemsCenter.$},a&&i.createElement("div",{ref:l},i.createElement(eN.YW,{selected:!!a.showOnlyUserVersionHistory,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.filter_tooltip"),onClick:s,onMouseDown:e=>c&&e.stopPropagation()},i.createElement(U.U,{svg:eY.A},i.createElement(h.S,null)))),c&&l.current&&i.createElement(eC.Jz,{showPoint:!0,targetRect:l.current.getBoundingClientRect(),options:m,hideDropdown:s,autofocusPrevElementOnSelect:!0,autofocusPrevElementOnEsc:!0,autofocusPrevElementOnTab:!1,propagateCloseClick:!0}),!o&&i.createElement(eN.K0,{onClick:n,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.add_to_version_history_tooltip"),dataTestId:"versions-add-savepoint",recordingKey:L.Pt(e,"plusVersion")},i.createElement(U.U,{svg:eK.A,fallbackSvg:eW.A},i.createElement(_.x,null))),i.createElement(eN.K0,{onClick:r,"data-tooltip-type":ey.Ib.TEXT,"data-tooltip":(0,G.t)("collaboration.feedback.close_tooltip"),recordingKey:L.Pt(e,"button-close")},i.createElement(U.U,{svg:ez.A},i.createElement(g.L,null)))))}function e6({versions:e,selectedVersion:r,setVersion:n,last:o,idx:s,isSection:l}){let c=(0,a.wA)(),d=(0,es.ud)(),u=(0,ei.GS)();return i.createElement(i.Fragment,null,e.map((a,m)=>i.createElement(e0,{key:`history-item-${a.id}`,description:a.description,label:a.label,disabled:a.disabled,text:eX(a),displayText:i.createElement(eJ,{item:a}),view:a.view?a.view:null,participatingImagesDict:a.participating_images_dict,time:a.touched_at,isActive:r?.id===a.id,user:a.user&&a.user.handle,userUrl:a.user&&((0,eb.pW)(a)||a.label)?a.user.img_url:null,onSelect:()=>n(a),isAllowedToChangeVersion:()=>!0,versionId:a.id,checkpointKey:a.checkpoint_key,dispatch:c,first:0===s&&0===m,last:o&&m===e.length-1,isBranchingVersion:(0,eb.pW)(a),fileByKey:d,branchFileKey:a.branch_file_key,showAutosaves:!0,version:a,isSection:l,isUI3:u,editorType:null,devModeActivity:a.dev_mode_activity})))}function e8({versions:e,selectedVersion:r,setVersion:n,last:a,idx:o}){let s;let[l,c]=i.useState(r&&!!e.find(e=>e.id===r.id)),d=$.VI()?.isSection,u=(0,ei.GS)();s=a&&(1===e.length||!l)?0===o?eD.y5:eD.p8:0===o?eD.pi:eD.N5;let h=u?i.createElement(O.D8,{className:eD.QQ,onClick:()=>c(!l)},i.createElement("div",{className:eD.Jt},i.createElement("div",{className:eD.Gl},l?i.createElement(m.r,null):i.createElement(p.R,null)),i.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:e.length})))):i.createElement(O.D8,{className:eD.QQ,onClick:()=>c(!l)},i.createElement("div",{className:s}),i.createElement("div",{className:eD.Jt},i.createElement(ew.D,null),i.createElement("div",{className:eD.aJ},(0,G.tx)("collaboration.feedback.autosave_count",{count:e.length}),i.createElement(x.B,{key:"expand-caret",className:l?eD.ey:eD.GE,svg:l?eB.A:eV.A}))));return i.createElement("div",{key:`auto_row_${o}`},h,l&&i.createElement(e6,{versions:e,selectedVersion:r,setVersion:n,last:a,idx:o,isSection:d}))}function e4({versions:e,selectedVersion:r,setVersion:n}){let a=[],o=[],s=0,l=$.VI()?.isSection;function c(e){o.length>0&&(a.push(i.createElement(e8,{key:s,versions:[...o],selectedVersion:r,setVersion:n,idx:s,last:e})),s++,o=[])}for(let d=0;d<e.length;d++){let u=e[d];(0,eb.AI)(u)||u.frameCreated||u.frameEdited||u.lastViewed?(c(!1),a.push(i.createElement(e6,{key:s,versions:[u],selectedVersion:r,setVersion:n,idx:s,last:d===e.length-1,isSection:l})),s++,o=[]):o.push(u)}return c(!0),i.createElement(i.Fragment,null,a)}e5.displayName="VersionHistoryView",(0,a.Ng)(ea.l$)(e5)},118335:(e,r,n)=>{n.d(r,{PZ:()=>eg,SI:()=>ep});var i=n(411855),a=n(188507),o=n(55253),s=n(821910),l=n(268853),c=n(428770),d=n(62227),u=n(922827),m=n(572304),p=n(298455),h=n(629019),_=n.n(h),g=n(203264),f=n(776250),E=n(344780),y=n(38329),b=n(966712),v=n(418956),I=n(716034),T=n(395900),S=n(776621),w=n(559036),A=n(411751),C=n(950997),N=n(939863),L=n(239349),O=n(681912),R=n(598393),P=n(786110),D=n(738269),k=n(293017),M=n(662275),F=n(681655),x=n(128752),U=n(29680),B=n(335682),V=n(860178),G=n(694517),H=n(945020),K=n(237870),W=n(632857),$=n(381984),Y=n(928229),z=n(625599),j=n(65453),q=n(153886),Z=n(274133),X=n(67519),J=n(754369),Q=n(286723),ee=n(23318),et=n(236192),er=n(548470),en=n(323761);let ei=[2,3,6,13,25,50,75,100,200,300,1e3];function ea(e,r,n){if(!n)return!1;let i=r.get((0,m.dI)(e));if(!i)return!1;let a=i.absoluteBoundingBox;return!!a&&a.x<n.x+n.w&&a.x+a.w>n.x&&a.y<n.y+n.h&&a.y+a.h>n.y}function eo(e,r){return{x:e.x-r.x,y:e.y-r.y,width:e.w,height:e.h}}function es(e,r,n=!1){if(!r)return null;let i=e.get(r);return i?n?i.absoluteRenderBounds:i.absoluteBoundingBox:null}function el(e){return!!(e?.basis?.styleType||e?.change?.styleType)}function ec(e,r,n){let i=e?.basis?.guid?(0,m.dI)(e.basis.guid):m.AD,a=el(e)?null:es(r.scene,i,!1),o=e?.change.guid?(0,m.dI)(e.change.guid):m.AD,s=e?.state==="removed"||el(e)?null:es(n.scene,o,!1);return{before:{id:i,box:a&&r.baseBox?eo(a,r.baseBox):null},after:{id:o,box:s&&n.baseBox?eo(s,n.baseBox):null}}}function ed({frameId:e,historyFrameId:r,historySceneGraph:n,chunkChanges:a,discreteDiffing:c,setChunkChanges:d}){let p=(0,U.eY)(),[h,_]=(0,v.fp)(P.Ib),g=i.useMemo(()=>c?u.Egt.getLayerGUIDMapping(r,n.scene,e,p.scene):void 0,[c,e,r,n.scene,p.scene]);return i.useEffect(()=>{if(a)return;let i=u.egF.getNodeTree(r,n.scene,!c),h=u.egF.getNodeTree(e,p.scene,!c);if(!i||!h){_(new Map),d({});return}E.sn.reset("dev_mode.compare_changes.diffing",r),E.sn.start("dev_mode.compare_changes.diffing",{key:r});let{deltaTree:y,deltaNodeMap:b}=function(e,r,n,i,a,c,d=!0){let p;let h=new Map,_=o.w.decodeMessage(e.nodeChanges).nodeChanges,g=o.w.decodeMessage(r.nodeChanges).nodeChanges;if(!_||!g)return{deltaTree:{},deltaNodeMap:h};let f=new Map,E=0;!function e(r){if(E>=_.length)return(0,S.$D)(l.e.DEVELOPER_TOOLS,Error("History node index out of bounds")),null;for(let n of(f.set(r.id,{change:_[E],node:r}),E++,r.children))e(n)}(e.tree);let y=d?n.get((0,m.dI)(g[0].guid)):null,b=_[0]&&d?i.get((0,m.dI)(_[0].guid)):null,v=y?.absoluteBoundingBox||null,I=b?.absoluteBoundingBox||null;function T(e,r,n){h.set(e,r.value),(0,z.NI)(n,r)}let w=0,A=function e(r,p={}){let _,E;if(w>=g.length)return(0,S.$D)(l.e.DEVELOPER_TOOLS,Error("Node index out of bounds")),{};let y=g[w],b=0===w;w++;let A=c?c.get(r.id)??m.AD:r.id,C=f.get(A),N={previousChange:C?.change,currentChange:y,isRootNode:b};if(C){let e=function(e,r,n,i,a){let l=new Map;for(let[c,d]of Y.AW){let p=null,h=null;if((0,W.ar)(c)&&(e[c]&&e[c].guid&&(p=(0,m.dI)(e[c].guid)),r[c]&&r[c].guid&&(h=(0,m.dI)(r[c].guid))),p||h){let m=function(e,r){if(r){if("styleIdForStrokeFill"===c){e.strokePaints=r.fillPaints;return}for(let n of d)e[n]=r[n]}},_=h?u.egF.getNodeTree(h,i.scene,a)?.nodeChanges:null,g=p?u.egF.getNodeTree(p,n.scene,a)?.nodeChanges:null,f=_?o.w.decodeMessage(_).nodeChanges?.[0]:null,E=g?o.w.decodeMessage(g).nodeChanges?.[0]:null;if(m(r,f),m(e,E),f&&!E)l.set(c,{state:"removed",previousChange:f,currentChange:{phase:"REMOVED"}});else if(!f&&E)l.set(c,{state:"added",previousChange:{phase:"REMOVED"},currentChange:E});else if(f&&E){for(let e of["name",...d])if(!(0,s.cF)(f[e],E[e])){l.set(c,{state:"changed",previousChange:f,currentChange:E});break}}}}return l}(y,C?.change,n,i,a);for(let e of Y.cs)if(!(0,s.cF)(C.change[e],y[e])&&("textData"!==e||C.change[e]?.characters!==y[e]?.characters)){if("transform"===e&&b||d&&!ea(C.change.guid,i,v)&&!ea(y.guid,n,v))continue;N.state="changed";break}e.size>0&&(N.changedStyles=e)}else(!d||ea(y.guid,n,v))&&(N.state="added");for(let n of(y.guid&&(N.state||N.changedStyles)&&(E={value:N}),_=E||p,E&&T((0,m.dI)(y.guid),E,p),r.children.forEach(r=>e(r,_)),C?.node?.children||[]))f.has(n.id)&&function({checkOverlap:e,parent:r,nodeId:n}){let a=f.get(n);if(e&&!ea(a?.change.guid,i,I))return;let o={value:{state:"removed",previousChange:a?.change,currentChange:{phase:"REMOVED"}}};h.has((0,m.dI)(f.get(n)?.change.guid))&&(0,S.$D)(l.e.DEVELOPER_TOOLS,Error("Error generating deleted nodes"));let s=(0,m.dI)(a?.change.guid);T(s,o,r),f.delete(s)}({checkOverlap:d,nodeId:n.id,parent:_});return f.delete(A),p}(r.tree);if(!A.value&&A.children&&1===A.children.length){let e=A.children[0];delete e.parent,p=e}else p=A;return{deltaTree:p,deltaNodeMap:h}}(i,h,p,n,!c,g,!0);_(b),d((0,z.X$)(y,function(e){let r=e.value,n=null,i=r.state;return("added"===r.state||"changed"===r.state)&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange?r.previousChange:{phase:"REMOVED"},change:r.currentChange,state:i}),"removed"===r.state&&r.previousChange&&(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:{phase:"REMOVED"},state:i}),r.changedStyles&&(n||(n={isRootNode:!!r.isRootNode,basis:r.previousChange,change:r.currentChange,state:i}),n.changedStyles=r.changedStyles),{result:n}}));let v=E.sn.tryStop("dev_mode.compare_changes.diffing",r);v&&(0,f.sx)("dev_mode.compare_changes.diffing",{type:"node_changes",durationMs:v},{forwardToDatadog:!0})},[e,_,a,d,r,n.scene,p.scene,g,n,p,c]),i.useEffect(()=>()=>{_(new Map)},[_]),null}function eu(e,r){if(e.isState){let r=e.parentNode?.name;return r?`${r}/${e.name}`:e.name}if(r.singleBackingSymbol&&r.singleBackingStateGroup){let n=r.singleBackingSymbol.name;return n?`${e.name}/${n}`:e.name}return e.name}function em(e){return{node:(0,L.mJ)(e),backingSymbolData:(0,J.$)([e])}}function ep({nodeId:e,detachedComponentsScene:r,documentIndex:n,showError:i}){let a=n===d.x1?u.juq.HISTORY:r?u.juq.DETACHED_COMPONENTS:c.G,o=new p.qo(a),s=o.get(e)?.absoluteRenderBounds||{x:0,y:0,w:0,h:0},l=0,m=!0;return()=>({nodeBounds:{x:s.x,y:s.y,width:s.w,height:s.h},getImage:({scale:i,clipRect:a})=>{let s;let c=Date.now();c-l>1e4&&(l=c,(s=new T.jk("performance.dev_mode.compare_changes.get_image",{})).start());let d=(0,ee.L6)(e,n,r,i,a);if(s){let e=s.stop(),r=d?.image?.length??0;e&&r&&(0,f.sx)("performance.dev_mode.compare_changes.get_image",{elapsedMs:e,imageBytes:r,sceneType:o.getSceneTypeDebugString(),isFirstImage:m},{forwardToDatadog:!0})}return m=!1,d&&{data:d.image,width:d.width,height:d.height,scale:d.width/d.canvasSpaceBounds.width,canvasSpaceBounds:d.canvasSpaceBounds}},showError:i})}function eh({version:e,isSection:r}){let n=new Date(e.touched_at?e.touched_at:e.created_at),a=e.label;e.frameCreated?a=r?(0,N.tx)("collaboration.feedback.compare_changes_modal.section_created"):(0,N.tx)("collaboration.feedback.compare_changes_modal.frame_created"):e.lastViewed&&(a=(0,N.tx)("collaboration.feedback.compare_changes_modal.last_viewed_by_you"));let o=a?i.createElement(et.Cr,{time:n}):null;return i.createElement("div",{className:en.sh},i.createElement("div",{className:en.dp},a||i.createElement(et.Cr,{time:n})),i.createElement("div",{className:en.m7},o))}let e_=(0,I.eU)(null);function eg(e){let{nodeId:r,onCloseModal:n,modalTitle:a,currentImage:o,historicImage:s,historicHeader:l,currentHeader:c,versions:d,selectedVersion:h,setSelectedVersion:g,renderLoadingBar:y,modalError:I,discreteDiffingInput:T,initialSelectedNodeId:S,skipCorrectHistoryCanvasCheck:w,preferencesApi:L,origin:P}=e,D=(0,B.tS)(),k=V.iZ()?.id,[M,F]=i.useState(A.Ss.SIDE_BY_SIDE),[x,U]=i.useState(Q.q0),[G,H]=i.useState(!0),[K,W]=i.useState(null),[Z,X]=i.useState(null),[J,ee]=i.useState(!0),[ea,eo]=i.useState(!0),el=R.VI()?.isSection,[eu,em]=i.useState(()=>S?{id:S,zoomToSelection:!0}:null),[ep,eg]=(0,v.fp)(e_),[ey,eb]=i.useState(void 0),ev=(0,v.fp)(C.w1)[1],eI=(0,Q.t$)(h||null,r)||!!T,eT=w||eI,eS=i.useMemo(()=>T?.sceneGraph?T.sceneGraph:new p.qo(u.juq.HISTORY),[T?.sceneGraph]),ew=(0,O.G)();i.useEffect(()=>{eu&&eu.id!==r&&(0,f.sx)("Diff Modal New Layer Selected",{userId:k,fileKey:D,frameId:r,versionId:h?.id,layer_id:eu.id})},[eu]);let eA=i.useRef(h);i.useEffect(()=>{eA.current!==h&&(eA.current=h,eb(void 0),em(null))},[h,eA]);let eC=void 0!==o,eN=void 0!==s,eL=i.useCallback(e=>{"Escape"===e.key&&(eu?(em(null),e.stopPropagation(),e.preventDefault()):n())},[n,eu]);i.useEffect(()=>(document.addEventListener("keydown",eL),()=>{document.removeEventListener("keydown",eL)}),[eL]),i.useEffect(()=>{if("cc_versions"===P&&ey&&!ea){(0,z.mf)(ey)?(0,f.sx)("Diff Modal No Changes Between Versions",{userId:k,fileKey:D,frameId:r,versionId:h?.id,initialVersion:J,versionMetadata:!1},{forwardToDatadog:!0}):(0,f.sx)("dev_mode.compare_changes.version_has_changes",{userId:k,fileKey:D,frameId:r,versionId:h?.id,initialVersion:J,versionMetadata:!1},{forwardToDatadog:!0});let e=E.sn.tryStop("dev_mode.compare_changes.switch_versions",h?.id);e&&(0,f.sx)("dev_mode.compare_changes.switch_versions",{elapsedMs:e},{forwardToDatadog:!0})}},[P,J,ea,ey,h,r,D,k]),i.useEffect(()=>{h&&null===s&&(0,f.sx)("dev_mode.compare_changes.no_image",{userId:k,fileKey:D,frameId:r,versionId:h?.id},{forwardToDatadog:!0})},[s,h,r,D,k]);let eO=()=>i.createElement(A.BL,{isPreviewAvailable:eC,showOptions:eC,view:M,onSideBySideClick:()=>{F(A.Ss.SIDE_BY_SIDE)},onOverlayClick:()=>{F(A.Ss.OVERLAY)},additionalStyles:en.tH}),[eR,eP]=i.useState(new Set),eD=i.useCallback((e,r)=>{r?eP(r=>new Set([...r,...e])):eP(r=>{let n=new Set(e);return new Set([...r].filter(e=>!n.has(e)))})},[eP]),ek=(0,i.useCallback)(e=>{let r=e?.value;if(r){let n="removed"===r.state?r.beforeNodeId:r.afterNodeId;em({id:n,zoomToSelection:!1}),W(r.beforeNodeId),X(r.afterNodeId);let i=[n],a=e?.parent;for(;a;){let e=a.value;if(e){let r="removed"===e.state?e.beforeNodeId:e.afterNodeId;i.push(r)}a=a.parent}eD(i,!0)}else em(null),W(null),X(null)},[eD]),eM=(0,i.useCallback)(e=>{e?eg("removed"===e.state?e.beforeNodeId:e.afterNodeId):eg(m.AD)},[eg]),eF=(0,i.useCallback)(e=>eg(e),[eg]),ex=(0,i.useCallback)((e,r)=>{e===eu?.id?(em(null),W(null),X(null)):(em({id:e,zoomToSelection:!0}),eg(e),W((0,m.dI)(r.basis.guid)),X((0,m.dI)(r.change.guid)))},[eu?.id,eg]),eU=(0,i.useMemo)(()=>ey&&(0,$.kF)(ey,Y.FO.LEGO,void 0,q.O0)||{},[ey]),eB=!(0,z.mf)(eU),eV=T?T.nodeId:r,{beforeBoxes:eG,afterBoxes:eH}=function(e){let{frameId:r,historyFrameId:n,view:a,displayableChanges:o,historySceneGraph:s}=e;return(0,i.useMemo)(()=>{if(!r||!n)return{};let e=function(e,r,n,i){let a=(0,p.UN)(),o=es(r,n,!0),s=es(a,e,!0);return(0,z.X$)(i,e=>{let n=ec(e.value,{scene:r,baseBox:o},{scene:a,baseBox:s});return{result:{beforeBox:n.before.box,afterBox:n.after.box,afterBoxNodeId:n.after.id,beforeBoxNodeId:n.before.id}}})}(r,s,n,o);return{beforeBoxes:(0,z.X$)(e,e=>{let i=e.value,a=i.beforeBoxNodeId===n||i.afterBoxNodeId===r;return i.afterBox?i.beforeBox?{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"changed",isRootFrame:a}}:{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"added",isRootFrame:a}}:{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"removed",isRootFrame:a}}}),afterBoxes:(0,z.X$)(e,e=>{let i=e.value,a=i.beforeBoxNodeId===n||i.afterBoxNodeId===r;return i.afterBox?i.beforeBox?{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"changed",isRootFrame:a}}:{result:{rect:i.afterBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"added",isRootFrame:a}}:{result:{rect:i.beforeBox,beforeNodeId:i.beforeBoxNodeId,afterNodeId:i.afterBoxNodeId,state:"removed",isRootFrame:a}}})}},[r,n,a,o])}({frameId:r,historyFrameId:eV,historySceneGraph:eS,view:M,displayableChanges:eU,activeNode:ep,selectedNode:eu});i.useEffect(()=>{if(!eu?.id||!eu?.zoomToSelection||!r||!eV)return;let{baseBeforeBox:e,baseAfterBox:n,resultBoxes:i}=function(e,r,n,i,a){let o=(0,p.UN)(),s=es(r,n,!0),l=es(o,e,!0),c=[];for(let e of i){let n=(0,z.lE)(a,r=>(0,m.dI)(r.change.guid)===e||(0,m.dI)(r.basis.guid)===e);if(n){let e=ec(n,{scene:r,baseBox:s},{scene:o,baseBox:l});c.push({beforeBox:e.before.box,afterBox:e.after.box,beforeBoxNodeId:e.before.id,afterBoxNodeId:e.after.id})}}return{baseBeforeBox:s,baseAfterBox:l,resultBoxes:c}}(r,eS,eV,[eu.id],eU),{beforeBox:a,afterBox:o}=i[0]??{},s=1/0,l=1/0,c=-1/0,d=-1/0;a&&e&&(a.x-=e.w/2,a.y-=e.h/2,s=Math.min(s,a.x),l=Math.min(l,a.y),c=Math.max(c,a.x+a.width),d=Math.max(d,a.y+a.height)),o&&n&&(o.x-=n.w/2,o.y-=n.h/2,s=Math.min(s,o.x),l=Math.min(l,o.y),c=Math.max(c,o.x+o.width),d=Math.max(d,o.y+o.height)),s!==1/0&&ev({x:s,y:l,width:c-s,height:d-l})},[eu,ev,r,eU]),i.useEffect(()=>()=>{ev(void 0)},[ev]);let eK=eG?{rootBox:eG,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"added",interactive:M===A.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:e_,recordingKey:"before"}:null,eW=eH?{rootBox:eH,onBoxClicked:ek,onBoxHovered:eM,selectedNodeId:eu?.id,expandedLayers:eR,ignoreState:"removed",interactive:M===A.Ss.SIDE_BY_SIDE,hoveredNodeIdAtom:e_,recordingKey:"after"}:null,e$=!y&&!I;return i.createElement(Q.aF,{title:a,onClose:n},i.createElement("div",{className:en.xZ},i.createElement("div",{className:en.f},y&&!I&&i.createElement("div",{className:en.Lq},i.createElement(j.G,{hasLoadedDiffs:!1})),e$&&i.createElement("div",{className:en.ND},(d||eB)&&i.createElement("div",{className:_()(en._H,"devHandoffLeftPanel")},g&&i.createElement("div",{className:en.b6},i.createElement("div",{className:_()(en.Zl)},(0,N.tx)("collaboration.feedback.compare_changes_modal.history"),(0,b.kc)().dt_compare_changes_debug_helpers&&i.createElement(eE,{fileKey:D,setSelectedVersion:g})),i.createElement(et.aS,{versions:d||[],selectedVersion:h,setVersion:e=>{e.id!==h?.id&&(0,f.sx)("Diff Modal Selected Version Changed",{userId:k,fileKey:D,frameId:r,versionId:e.id}),E.sn.reset("dev_mode.compare_changes.switch_versions",e.id),E.sn.start("dev_mode.compare_changes.switch_versions",{key:e.id}),eo(!0),J&&ee(!1),g(e)}})),i.createElement($.zg,{changesToDisplay:eU,selectedNode:eu?.id,expandedLayers:eR,setLayerExpanded:eD,onHover:eF,onClick:ex})),i.createElement("div",{className:en.vF},M===A.Ss.SIDE_BY_SIDE&&i.createElement("div",{className:en.m_},i.createElement("div",{className:en.ZJ},l?i.createElement("div",{className:en.K9},i.createElement("div",{className:en.gO},l)):h&&i.createElement(eh,{version:h,isSection:el})),i.createElement("div",{className:en.t4}),i.createElement("div",{className:en.ZJ},c?i.createElement("div",{className:en.K9},i.createElement("div",{className:en.gO},c)):i.createElement("div",{className:en.K9},(0,N.tx)("collaboration.feedback.compare_changes_modal.current_image_header")))),M===A.Ss.SIDE_BY_SIDE&&i.createElement("div",{className:en.Ik},i.createElement(A.qW,{zoomPercentageOptions:ei,resetStateOnChangeValue:r,compareThumbnailSource:Y.FO.LEGO,zoomOnMousePointer:!0},i.createElement("div",{className:en.bV},eN?i.createElement(er.H1,{value:eK},i.createElement(Q.R$,{image:s,view:M,Overlay:er.q1})):i.createElement(Q.Qp,null),i.createElement("div",{className:en.mq}),eC?i.createElement(er.H1,{value:eW},i.createElement(Q.R$,{image:o,view:M,Overlay:er.q1})):i.createElement(Q.Qp,null)),eC&&eO())),M===A.Ss.OVERLAY&&i.createElement("div",{className:en.Ik},i.createElement(A.xY,{zoomPercentageOptions:ei,resetStateOnChangeValue:r,zoomOnMousePointer:!0},i.createElement("div",{className:en.Kk},eN?i.createElement(er.H1,{value:eK},i.createElement(Q.R$,{image:s,view:M,hideNoImageText:!0,Overlay:er.q1})):i.createElement(Q.Qp,null),G&&(eC?i.createElement(er.H1,{value:eW},i.createElement(Q.R$,{image:o,view:M,hideNoImageText:!0,opacity:x,Overlay:er.q1})):i.createElement(Q.Qp,null))),eC&&i.createElement(A.u,{opacity:x,isAfterImageShown:G,onToggleClick:()=>H(!G),onOpacityChange:e=>U(e.a)}),eC&&eO())),eT&&r&&eV&&i.createElement(ed,{frameId:r,historyFrameId:eV,historySceneGraph:eS,chunkChanges:ey,discreteDiffing:!!T,setChunkChanges:e=>{eo(!1),eb(e)}}))),I&&i.createElement("div",{className:en.Q9},(0,N.tx)("collaboration.feedback.compare_changes_modal.error")),i.createElement("div",null)),e$&&(eT?ey&&(0,z.mf)(ey)?i.createElement(q.Ox,{text:(0,N.t)("collaboration.feedback.compare_changes_modal.no_changes")}):i.createElement(ef,{layerChangeNodeId:Z,layerBasisNodeId:K,layerBasisSceneGraph:eS,selectedVersion:h||void 0,displayableChanges:eU,showSelectLayerHint:!eu,preferencesApi:L??ew}):i.createElement(q.Ox,{text:""}))))}function ef({layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:o,showSelectLayerHint:s,preferencesApi:l}){return s?i.createElement(q.Ox,{text:(0,N.t)("collaboration.feedback.compare_changes_modal.select_a_layer")}):i.createElement(q.wv,{layerChangeNodeId:e,layerBasisNodeId:r,layerBasisSceneGraph:n,selectedVersion:a,displayableChanges:o,preferencesApi:l})}function eE({fileKey:e,setSelectedVersion:r}){let n=(0,i.useRef)(null),[a,o]=(0,i.useState)("Upload local file");return i.createElement("label",{className:en.$8},a,i.createElement("input",{style:{display:"none"},ref:n,type:"file",accept:".fig",onChange:async()=>{let i=n.current?.files?.[0];if(i&&F.F){let n=await (0,x._G)(y.D,(0,b.kc)(),F.F,i),a=y.D.getState().mirror.appModel.currentPage,s=`${e}-${a}-debug`;G.Ht.set(s,Promise.resolve({key:s,canvas:n.bytes})),o(i.name),r({id:"debug"})}}}))}(0,K.Ju)(function(e){let{nodeId:r,layerName:n}=e,o=(0,a.wA)(),s=(0,a.d4)(e=>"fullscreen"===e.selectedView.view?e.selectedView.editorType:null),c=(0,a.d4)(e=>e.versionHistory.activeId),{Sprig:m}=(0,w.A)(),p=(0,B.tS)(),h=g.E1()?.toISOString(),_=(0,v.fp)(P.Ib)[1],{versions:b,versionsQueryLoaded:I}=(0,Q.DS)(r),T=(0,a.d4)(e=>e.selectedView.compareChangesVersionId??null),A=(0,a.d4)(e=>e.selectedView.compareChangesActivityId??null),C=(0,i.useMemo)(()=>T?b.find(e=>e.id===T)??null:A?b.find(e=>e.dev_mode_activity?.some(e=>e.id===A))??null:null,[b,T,A]),L=i.useCallback(e=>{!e&&(W(void 0),function(e,r,n,i){let a=y.D.getState().selectedView;r(D.$T({...a,compareChangesVersionId:e,filterStatusVersions:n,compareChangesNodeId:void 0,compareChangesActivityId:void 0}))}(e,o,!1,0),c&&c!==G.V_&&(o(k.Y6({mode:u.Oin.KEEP_UI,type:H.lF.SPINNER})),requestAnimationFrame(()=>{o((0,G.Nb)({id:c,nodeId:r??void 0,eventType:"LOAD_NEW_VERSION",versions:b}))}))),e!==T&&(W(void 0),function(e,r){let n=y.D.getState().selectedView;r(D.$T({...n,compareChangesVersionId:e,compareChangesActivityId:void 0}))}(e,o))},[o,T,c,b,r]),[O,R]=(0,v.fp)(G.tP),[F,x]=i.useState(!0),[U,V]=i.useState(!1),[K,W]=i.useState(void 0),$=void 0!==K,[Y,z]=i.useState(void 0),j=void 0!==Y,q=(0,Q.t$)(C,r);i.useEffect(()=>{if(!F||!$||!j||!I)return;x(!1);let e=E.sn.tryStop("dev_handoff.view_history",r);e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:"cc_versions"},{forwardToDatadog:!0}),m("track","open_compare_changes",{origin:"cc_versions"})},[m,F,$,j,I,r]);let X=(0,Z.P)();i.useEffect(()=>{if(X&&I){if(C){T||L(C.id);return}if(0===b.length){W(null),L(void 0);return}if(h){for(let e of b)if(e.lastViewed){L(e?.id);return}}L(b[0]?.id)}},[X,h,A,C,T,L,b,I]),i.useEffect(()=>{if(q||!C)return;let e=performance.now();G._t(C,r)?.then(({canvas:r,key:n})=>{let i=performance.now();if(n===O)return;if(!u.glU.loadPartialHistoryScene(r))throw Error("Error loading history canvas");R(n);let a=performance.now(),o=Math.trunc(i-e),s=Math.trunc(a-i);f.sx("version_diffing_performance_metrics",{name:"historic_nodes_load_time",fileKey:p,fetchBytesDurationMs:o,loadNodesDurationMs:s,canvasBytesLength:r.byteLength,fetchMode:"node",entrypoint:"lego_layer"})}).catch(e=>{S.$D(l.e.DEVELOPER_TOOLS,Error(`Error fetching history canvas: ${e}`)),G.w_(C),V(!0)})},[q,C,O,R,s,p,r]),i.useEffect(()=>{let e=setTimeout(()=>{if(!q){W(void 0);return}W(ep({nodeId:r,documentIndex:d.x1,showError:()=>{W(null)}}))},Q._W);return()=>clearTimeout(e)},[r,C,q]),i.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{z(void 0),(0,S.$D)(l.e.DEVELOPER_TOOLS,Error("Current image loading error")),V(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}z(n)},Q._W);return()=>clearTimeout(e)},[r]);let J=i.useCallback(()=>{_(new Map),L(void 0),o(M.Ce())},[_,L,o]);return i.createElement(eg,{nodeId:r,onCloseModal:J,modalTitle:n?(0,N.t)("collaboration.feedback.compare_changes_modal.layer_name_header",{layerName:n}):(0,N.t)("collaboration.feedback.compare_changes_modal.header"),currentImage:Y,historicImage:K,versions:b,selectedVersion:C,setSelectedVersion:e=>{L(e.id)},renderLoadingBar:F,modalError:U,origin:"cc_versions"})},X.mH,K.ZU.YES),(0,K.Ju)(function(e){let{nodeId:r,detachedInfoStatus:n,origin:o}=e,s=(0,a.wA)(),{Sprig:l}=(0,w.A)(),[d,h]=i.useState(!0),[_,g]=i.useState(!1),[y,b]=i.useState(void 0),[v,I]=i.useState(void 0),T=void 0!==y,S=void 0!==v,A="loaded"===n.status,C=A?n.result:void 0;i.useEffect(()=>{if(!d||!T||!S||!A)return;h(!1);let e=E.sn.tryStop("dev_handoff.view_history",r);e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:o},{forwardToDatadog:!0}),l("track","open_compare_changes",{origin:"cc_detached_component"})},[l,d,T,S,r,A,o]),i.useEffect(()=>{let e=setTimeout(()=>{if(!A||!C?.dataComponentId){b(void 0);return}b(ep({nodeId:C?.dataComponentId,detachedComponentsScene:C?.dataLocation==="temp-scene",showError:()=>{b(null)}}))},Q._W);return()=>clearTimeout(e)},[A,C]),i.useEffect(()=>{let e=setTimeout(()=>{let e=()=>{I(void 0),g(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}I(n)},Q._W);return()=>clearTimeout(e)},[r]);let L=i.useCallback(()=>{s(M.Ce())},[s]),O=(0,N.t)("collaboration.feedback.compare_changes_modal.header"),R=(0,N.tx)("inspect_panel.node_type.main_component"),P={nodeId:C?.dataComponentId??m.AD,sceneGraph:new p.qo(C?.dataLocation==="temp-scene"?u.juq.DETACHED_COMPONENTS:c.G)};return i.createElement(eg,{nodeId:r,onCloseModal:L,modalTitle:O,currentImage:v,historicImage:y,historicHeader:R,renderLoadingBar:d,modalError:_,discreteDiffingInput:P})},X.dF,K.ZU.YES),(0,K.Ju)(function(e){let{changeNodeId:r,basisNodeId:n,initialSelectedNodeId:o,isComparingOverrides:s=!1}=e,l=(0,a.wA)(),{Sprig:d}=(0,w.A)(),u=em(r),m=em(n),[h,_]=i.useState(!1),[g,y]=i.useState(void 0),[b,v]=i.useState(void 0),I=void 0!==g,T=void 0!==b;i.useEffect(()=>{if(!I||!T)return;let e=E.sn.tryStop("dev_handoff.view_history",r),n=s?"cc_overrides":"cc_nodes";e&&(0,f.sx)("dev_handoff.view_history",{elapsedMs:e,origin:n},{forwardToDatadog:!0}),d("track","open_compare_changes",{origin:n})},[d,s,I,T,r]),i.useEffect(()=>{y(ep({nodeId:n,showError:()=>y(null)}))},[n]),i.useEffect(()=>{let e=()=>{v(void 0),_(!0)},n=ep({nodeId:r,showError:e});if(!n){e();return}v(n)},[r]);let S=i.useCallback(()=>{l(M.Ce())},[l]),A=(0,N.t)("collaboration.feedback.compare_changes_modal.header"),C={nodeId:n,sceneGraph:new p.qo(c.G)};return u.node&&m.node?i.createElement(eg,{nodeId:r,onCloseModal:S,modalTitle:A,currentImage:b,historicImage:g,currentHeader:eu(u.node,u.backingSymbolData),historicHeader:eu(m.node,m.backingSymbolData),renderLoadingBar:!1,modalError:h,discreteDiffingInput:C,initialSelectedNodeId:o}):null},X.Dx,K.ZU.YES)},778744:(e,r,n)=>{n.d(r,{Ec:()=>U});var i=n(411855),a=n(188507);n(922827);var o=n(629019),s=n.n(o),l=n(776250),c=n(153234),d=n(522739),u=n(163023),m=n(939863),p=n(501114),h=n(677664);n(809831);var _=n(450225);n(356390);var g=n(321487),f=n(99506),E=n(288641),y=n(502442);let b="hyperlink_popup--icon--7YW8G",v="hyperlink_popup--inlineText--U1QY9",I="hyperlink_popup--path--UM5d- hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",T="hyperlink_popup--text--kzWyq hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9",S="hyperlink_popup--clickable--VAzTE",w="hyperlink_popup--divider--NSUKF",A="hyperlink_popup--open--EsmHi",C="hyperlink_popup--edit--Q80cZ";var N=n(97648),L=n(626744),O=n(677752),R=n(430602),P=n(614603),D=n(143091),k=n(350057),M=n(503878),F=n(667875);function x(e){let r,n;let o=(0,a.wA)(),x=r=>{o((0,h.RK)({rawInput:e.urlString,event:r})),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup()},U=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?(0,E.UA)(o,e.data.url.pathname,"HyperlinkPopup"):console.error("We don't yet enable copy for other hyperlinks"),e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),r.stopPropagation()},B=r=>{e.immediatelyDismissHyperlinkPopup&&e.immediatelyDismissHyperlinkPopup(),e.showHyperlinkEditor(),(0,l.sx)("Show Hyperlink Editor",{source:"HyperlinkPopup"}),r.stopPropagation()},V=r=>{(e.data.type===y.F.GENERIC||e.data.type===y.F.FIGMA_FILE||e.data.type===y.F.FIGMA_PROTOTYPE||e.data.type===y.F.FIGMA_VERSION)&&e.getLinkMetadata&&o(e.getLinkMetadata({clipboardText:e.data.url.toString(),url:e.data.url.toString(),isTextIframe:!1,entrypoint:_.WJ.MODAL}))},G=r=>{e.data.type===y.F.MAILTO||e.data.type===y.F.TEL?U(r):x(r)},{data:H}=e;switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:case y.F.FIGMA_VERSION:let K=H.url.host.replace(/http(s)?(:)?(\/\/)?|(\/\/)?(www\.)?/,""),W=H.url.pathname+H.url.search+H.url.hash,$=W.split(/\//),Y="design"===$[1]||"board"===$[1]||"proto"===$[1],z="board"===$[1];switch(H.type){case y.F.GENERIC:n=D.A;break;case y.F.FIGMA_FILE:case y.F.FIGMA_VERSION:n=Y?z?N.A:O.A:D.A;break;case y.F.FIGMA_PROTOTYPE:n=M.A}if((0,g.F4)(H.url.host)&&Y&&$[2]&&$[3]){let e=decodeURI(H.url.pathname.split(/\//)[3]).replace(/-/g," ");r=i.createElement("div",{className:T},e)}else r=i.createElement(i.Fragment,null,i.createElement("div",{className:"hyperlink_popup--domain--k0xkl hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},K),W&&"/"!==W&&i.createElement("div",{className:I},W));break;case y.F.PAGE:n=R.A,r=i.createElement("div",{className:T},H.text);break;case y.F.FRAME:let j=H.text;j&&e.editorType===f._Y.SITES&&(j="/"===j?(0,m.t)("sites.panel.home"):j),n=P.A,r=i.createElement(i.Fragment,null,i.createElement("div",{className:T},j),H.secondaryText&&i.createElement("div",{className:"hyperlink_popup--secondaryText--bLzWO hyperlink_popup--linkPart--8Dtx8 hyperlink_popup--inlineText--U1QY9"},i.createElement(u.B,{className:"hyperlink_popup--pageSeparator--SAx-p",svg:L.A}),H.secondaryText));break;case y.F.INVALID:n=D.A,r=i.createElement("div",{className:T},(0,m.tx)("hyperlink.invalid_link",{link:H.urlString}));break;case y.F.MISSING:case y.F.NOT_LOADED:n=D.A,r=i.createElement("div",{className:T},H.text);break;case y.F.MAILTO:r=i.createElement("div",{className:I},H.url.pathname),n=k.A;break;case y.F.TEL:n=F.A,r=i.createElement("div",{className:I},H.url.pathname)}let q=e.canEdit,Z=e.canEdit&&(H.type===y.F.GENERIC||H.type===y.F.FIGMA_FILE||H.type===y.F.FIGMA_VERSION||H.type===y.F.FIGMA_PROTOTYPE),X=function(){switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,m.t)("hyperlink.prefix.open");case y.F.FIGMA_VERSION:return(0,m.t)("hyperlink.prefix.open_past_version");case y.F.PAGE:case y.F.FRAME:return(0,m.t)("hyperlink.prefix.go_to");case y.F.MAILTO:case y.F.TEL:return(0,m.t)("hyperlink.prefix.email");case y.F.INVALID:case y.F.MISSING:case y.F.NOT_LOADED:return null}}(),J=(()=>{switch(e.data.type){case y.F.MAILTO:return(0,m.t)("hyperlink.send_mail");case y.F.TEL:return(0,m.t)("hyperlink.call_telephone");default:return null}})(),Q=(()=>{if(e.editorType===f._Y.SITES)switch(e.data.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return(0,m.tx)("hyperlink.prefix.open")}return i.createElement(i.Fragment,null,X?i.createElement("span",{className:v},X," "):null,r)})(),ee=(r,a)=>i.createElement(d.GG,{type:"button",className:s()({[S]:r,[A]:!r}),onAuxClick:G,onMouseDown:G,recordingKey:e.recordingKey},r&&i.createElement(u.B,{className:b,style:p.sx.if(n===N.A,p.sx.add({transform:"rotate(90deg)"})).$,svg:n}),a),et=i.createElement(d.GG,{type:"button",className:`${A} ${S}`,onAuxClick:x,onMouseDown:x,recordingKey:c.Pt(e,"secondaryButton")},J),er=(r,n)=>i.createElement(d.GG,{type:"button",recordingKey:c.Pt(e,"editHyperlinkPopup"),className:s()({[C]:!r,"hyperlink_popup--editContainer--W1EMp":r,[S]:r}),onMouseDown:B},r&&i.createElement(i.Fragment,null,i.createElement(u.B,{className:b,svg:D.A}),i.createElement("div",{className:s()(v,"hyperlink_popup--editText--IGsdw")},(0,m.tx)("hyperlink.edit"))),n);return i.createElement("div",{className:"hyperlink_popup--popup--fByJA _overlayBase--_overlayBase--Rkj8l",onMouseEnter:()=>{e.onMouseEnter&&e.onMouseEnter()}},(()=>{switch(e.editorType){case f._Y.SITES:switch(H.type){case y.F.GENERIC:case y.F.FIGMA_FILE:case y.F.FIGMA_PROTOTYPE:return i.createElement(i.Fragment,null,q&&i.createElement(i.Fragment,null,er(!0,r),i.createElement("div",{className:w})),ee(!1,Q));default:return i.createElement(i.Fragment,null,ee(!0,Q),q&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))))}case f._Y.WHITEBOARD:return i.createElement(i.Fragment,null,ee(!0,Q),q&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))),Z&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),i.createElement(d.D8,{dataTestId:"hyperlink.preview",role:"button",recordingKey:c.Pt(e,"unfurlHyperlinkPopup"),className:C,onMouseDown:V},(0,m.tx)("hyperlink.create_preview"))));default:return i.createElement(i.Fragment,null,ee(!0,Q),J&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),et),q&&i.createElement(i.Fragment,null,i.createElement("div",{className:w}),er(!1,(0,m.tx)("hyperlink.edit"))))}})())}function U(e){let{data:r,editorType:n,urlString:a,canEdit:o,onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d}=e;return i.createElement(x,{data:r,editorType:n,urlString:a,canEdit:o,recordingKey:"hyperlinkPopup",onMouseEnter:s,immediatelyDismissHyperlinkPopup:l,getLinkMetadata:c,showHyperlinkEditor:d})}},811641:(e,r,n)=>{n.d(r,{Jq:()=>u});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234),l=n(743282),c=n(154500);let d=(0,l.g)();var u=(e=>(e.ESSENTIAL="essential",e.TOOLS="tools",e.VIEW="view",e.ZOOM="zoom",e.TEXT="text",e.SHAPE="shape",e.SELECT="select",e.CURSOR="cursor",e.EDIT="edit",e.COPY="copy",e.TRANSFORM="transform",e.ARRANGE="arrange",e.COMPONENTS="components",e.ADVANCED="advanced",e.ACCESSIBILITY="accessibility",e))(u||{});i.forwardRef((e,r)=>{let{tabInfo:n,completedTabs:a,onNavClick:o}=e;return i.createElement(i.Fragment,null,n.map((s,l)=>i.createElement(m,{key:s.id,tabInfo:n,completedTabs:a,onNavClick:o,recordingKey:e.recordingKey,tab:s,index:l,ref:r})))});let m=i.forwardRef((e,r)=>{let{tab:n,index:a,onNavClick:l,completedTabs:u}=e,m=s.rf(s.Pt(e,n.id),"click",e=>{l(n.id)});return void 0!==n.active?i.createElement("div",{role:"tab",ref:e=>{r.current||(r.current=[]),r.current[a]=e},"aria-selected":n.active,"aria-controls":d,key:n.id,id:n.id,className:n.className,"data-completed":u[n.id],onClick:m,tabIndex:-1},n.displayName):i.createElement("div",{key:n.id,className:o()(n.className,c.GM)})})},624488:(e,r,n)=>{n.d(r,{k:()=>i}),n(411855),n(188507),n(629019),n(966712),n(139588),n(835036),n(818),n(226055),n(29680),n(713318),n(381915),n(187882),n(544403),n(837746);let i="left-panel-container"},187882:(e,r,n)=>{n.d(r,{Ye:()=>m,n0:()=>p}),n(411855),n(188507);var i=n(922827);n(340818),n(298455),n(776250),n(179479),n(358145);var a=n(418956),o=n(716034);n(438741),n(939863),n(392592);var s=n(226055);n(83909),n(356390),n(617453);var l=n(396697);n(843495);var c=n(29680);n(396462);var d=n(940596),u=n(100197);function m(){let e=(0,s.GS)(),r=!(0,u.ut)(i.Ez5?.editorPreferences().showSidebar,l.R.showSidebar),n=(0,u.ut)(i.Ez5?.uiState().leftPanelCollapsedUI3,!l.R.showSidebar);return e?n:r}function p(){return(0,c.p8)("pagesList")}n(359108),(0,a.Iz)(e=>(0,d.Wh)(()=>(0,o.eU)(e))),(0,d.Wh)(()=>(0,o.eU)(!1))},664457:(e,r,n)=>{n.d(r,{j:()=>_});var i=n(411855),a=n(922827),o=n(794272),s=n(966712),l=n(268537),c=n(939863),d=n(733169),u=n(416095),m=n(837287);let p=l.ms,h=l.c$,_="component-insert-leaf-context-menu";i.memo(function(){let{dropdownShown:e,defaultFileKeys:r,openFileKey:n}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,defaultFileKeys:e.library.defaultPublished.fileKeys,openFileKey:e.openFile?.key||null})),l=e?.data?.component,g=l?.file_key===n,f=(0,d.bL)({libraryKey:l?.library_key,nodeId:l?.node_id,disabled:!(0,s.kc)().dse_lk_go_to_source});if(!e||e.type!==_||!l||r.includes(l.file_key))return null;let E=f.data;return!(0,s.kc)().dse_lk_go_to_source||g||E?.link?i.createElement(p,{className:m.H,style:e.data.position},g?i.createElement(h,{recordingKey:`goToLocalComponent.${l.node_id}`,onClick:()=>a.glU.goToSymbolOrStateGroupById(l.node_id,!1)},(0,c.tx)("design_systems.instance_swap_picker.go_to_main_component")):i.createElement(h,{recordingKey:`goToSubscribedComponent.${l.node_id}`,href:(0,s.kc)().dse_lk_go_to_source?E?.link:(0,u.Gd)(l),target:"_blank"},(0,c.tx)("design_systems.instance_swap_picker.go_to_main_component"))):null})},756159:(e,r,n)=>{n.d(r,{Cl:()=>D,I1:()=>N,RG:()=>R,jz:()=>M,pz:()=>L,yP:()=>O});var i=n(258214),a=n(89865),o=n.n(a),s=n(966712),l=n(716034),c=n(418956),d=n(684107),u=n(711525),m=n(860601),p=n(696673),h=n(999881),_=n(875847),g=n(218103),f=n(94968),E=n(896446),y=n(49921),b=n(289704),v=n(335682),I=n(529928),T=n(279453),S=n(243987),w=n(514816),A=n(984968),C=n(173454);let N=(0,l.eU)(e=>{let r=e(v.yV);if(!r)return(0,u.Xm)();let n=r.parentOrgId,i=!!r.teamId,a=(0,_.T9)(r?.project),o=e((0,d.sj)({fileKey:r.key??"",teamId:r.teamId??"-1",workspaceId:r.team?.workspaceId??null,orgId:n,group:(0,h.M)()??null})),s=e(p.JB),l=e(A.Me),c=(0,S.w5)(l);return(0,w.gM)(o,i,a,s,n,c)}),L=(0,I.OX)(C.o.LIBRARY,"SET_LIBRARY_PUBLISHING_MODE"),O=(0,I.bt)(e=>e.openFile?.publishedHubFile?.id),R=(0,I.bt)(e=>e.openFile?.publishedHubFile?.libraryKey?(0,i.l)(e.openFile.publishedHubFile.libraryKey):null),P=(0,I.bt)(e=>e.openFile?.editorType),D=(0,l.eU)(null),k=(e,r)=>r,M=(()=>{let e=(0,c.M2)((0,l.eU)(e=>{let r=e(O),n=e(P),i={variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}};if(!r||!(0,s.kc)().cmty_lib_admin_publish&&"slides"!==n)return i;let a=e(T.vsj.Query({hubFileId:r})),l=(0,g.J)(a),c=(0,E.o)(a),d=e(T.Acj.Query({hubFileId:r})),u=(0,y.F)(d),m=e(T.eHy.Query({hubFileId:r})),p=(0,b.kX)({type:"community",value:m},!0),h=(0,b.cM)({type:"community",value:m},!0),_=e(T.CfA.Query({hubFileId:r})),v=(0,f.i)(_);return i.variables=o()(h,"node_id"),i.variableSets=o()(p,"node_id"),i.styles=o()(u,"node_id"),i.components=o()(l,"node_id"),i.stateGroups=o()(c,"node_id"),i.modules=o()(v,"node_id"),i},m.lQ)),r=(0,I.Pj)(e,"SET_OPEN_HUB_FILE_PUBLISHED_LIVEGRAPH",{variableSets:{},variables:{},styles:{},components:{},stateGroups:{},modules:{}}),n=(0,c.FZ)(r,k);return(0,I.S9)(n,r.reducer)})()},140796:(e,r,n)=>{n.d(r,{E1:()=>y,aU:()=>E});var i=n(411855),a=n(188507),o=n(776250),s=n(320063),l=n(255942),c=n(723325),d=n(32863),u=n(582064),m=n(356390),p=n(283942),h=n(335682),_=n(743415),g=n(828811);let f=e=>!!e.isNewAssetsPanel;function E(e){let{isVisible:r,query:n,placeholder:c,onChange:E,className:y,extraSpacing:b,hideXIcon:v,hideSearchIcon:I,isFigjam:T,isLibraryModalUi3:S,autofocus:w,selectOnFocus:A,entryPointForTracking:C,forwardedRef:N,recordingKey:L}=e,O=(0,a.wA)(),R=(0,h.q5)(),P=(0,a.d4)(e=>e.search.sessionId),D=(0,_.k)(),k=i.useRef(null),M=function({isVisible:e,autofocus:r,selectOnFocus:n,ref:a}){return i.useCallback(()=>{a?.current&&e&&r&&a.current.focus(n)},[r,e,a,n])}({isVisible:r,autofocus:w,selectOnFocus:A,ref:k}),F=i.useCallback(e=>!!(e.altKey&&m.Y5.isReady())&&(0,p.f7)(e,!0),[]);(0,s.h)(()=>{function e(){O(u.ky())}return M(),e(),e});let x=i.useCallback(()=>{"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_cleared",{searchQuery:n,assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)?e.onClearSearch():E(""),O(u.ky())},[C,e,O,n,D,R?.key,R?.teamId,R?.parentOrgId,E]),U=i.useCallback(e=>{C&&(""===e&&P?O(u.ky()):""===e||P||O(u.Dy({entryPoint:C})),E(e))},[O,C,P,E]),B=i.useCallback(()=>{""===n||P||O(u.Dy({entryPoint:C})),"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_focused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onFocus()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D,P,O,n]),V=i.useCallback(()=>{"editor:assets_panel"===C&&o.az.trackDefinedEvent("assets_panel.search_unfocused",{assetsPanelVersion:D,fileKey:R?.key,fileTeamId:R?.teamId??void 0,fileOrgId:R?.parentOrgId??void 0}),f(e)&&e.onBlur()},[C,R?.key,R?.parentOrgId,R?.teamId,e,D]);return T||S?i.createElement(d.IW,{ref:(0,l.A)(k,N),className:y,focusOnMount:!1,query:n,placeholder:c,clearSearch:x,onChange:U,onFocus:B,onBlur:V,isKeyDownHandled:F,hideXIcon:v,recordingKey:L,withUI3Icon:S}):f(e)?i.createElement(g.K,{ref:(0,l.A)(k,N),onFocus:B,onBlur:V,focusOnMount:!1,query:n,clearSearch:x,onChange:U,placeholder:e.placeholder,isKeyDownHandled:F,recordingKey:L}):i.createElement(d.Lp,{ref:(0,l.A)(k,N),className:y,focusOnMount:!1,extraSpacing:b,query:n,placeholder:c,clearSearch:x,onChange:U,onFocus:B,onBlur:V,isKeyDownHandled:F,hideXIcon:v,hideSearchIcon:I,recordingKey:L,dataTestId:"asset-panel-search-bar-input"})}function y({autofocus:e,className:r,column:n,extraSpacing:a,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:m,onChange:p,path:h,placeholder:_,query:g,recordingKey:f,selectOnFocus:y,entryPointForTracking:b,forwardedRef:v,...I}){let T=i.useRef(null),S=i.useCallback(()=>{y&&T.current?.select()},[y]),{setKeyboardNavigationElement:w}=(0,c.M3)({path:h,column:n,disabled:!m,onFocus:S});return(0,s.h)(()=>{T.current&&w?.(T.current.searchInput)}),i.createElement(E,{forwardedRef:(0,l.A)(T,v),autofocus:e,className:r,extraSpacing:a,hideSearchIcon:o,hideXIcon:d,isFigjam:u,isVisible:m,onChange:p,placeholder:_,query:g,selectOnFocus:y,entryPointForTracking:b,setKeyboardNavigationElement:w,recordingKey:f,...I})}},448406:(e,r,n)=>{n.d(r,{PI:()=>l,rp:()=>s});var i=n(91408),a=n(173454),o=n(262311);(0,i.hG)(o.ZV),(0,i.hG)(o.FX);var s=(e=>(e.WIDE="WIDE",e.SMALL="SMALL",e.NORMAL="NORMAL",e.SLIDES_ASSETS="SLIDES_ASSETS",e))(s||{});function l(e,r){let n=!0,i=!0;for(let r of e){let e,o;if(r.type!==a.PW.STYLE){if("min_node_width"in r)e=r.min_node_width,o=r.min_node_height;else{if(!("width"in r))continue;e=r.width,o=r.height}if(!e||!o)return"NORMAL";if(e<3*o&&(n=!1),(e>64||o>64)&&(i=!1),!n&&!i)break}}return n?"WIDE":i&&!r?"SMALL":"NORMAL"}},48515:(e,r,n)=>{n.d(r,{I:()=>i});var i=(e=>(e.ALL="all",e.RECENT="recent",e.LOCAL="local",e.FILE="file",e.SITE_KIT="site kit",e))(i||{})},734013:(e,r,n)=>{n.d(r,{DG:()=>a}),n(411855);var i=n(286640);function a(e,r){null!==i.x4&&i.x4.setItem(`library-section-expanded-${e}`,JSON.stringify(r))}},135076:(e,r,n)=>{n.d(r,{U:()=>i});let i=n(411855).createContext(null)},311692:(e,r,n)=>{var i=n(411855),a=n(109388),o=n(188507),s=n(974880),l=n(776250),c=n(91408),d=n(895235),u=n(320063),m=n(659302),p=n(418956),h=n(498750),_=n(572206),g=n(723325),f=n(154254),E=n(939863),y=n(154483),b=n(175290),v=n(612776),I=n(286954),T=n(632430),S=n(452246),w=n(662275),A=n(44892),C=n(788744),N=n(756317),L=n(146817),O=n(279260),R=n(473744),P=n(151283),D=n(534804),k=n(356390),M=n(335682),F=n(575288),x=n(416095),U=n(933342),B=n(267931),V=n(284321),G=n(173454),H=n(809073),K=n(237870),W=n(811529),$=n(743415),Y=n(875387),z=n(662163),j=n(239737),q=n(746806),Z=n(66742),X=n(151538),J=n(180715),Q=n(776018),ee=n(837746);let et=(0,c.jz)(ee.LdP),er=(0,c.jz)(ee.wkK),en=(0,y.fv)();(0,K.Ju)(function({asset:e,searchSessionId:r,query:n,sectionPosition:c,sectionNameForTracking:y,assetTypeDropdownSelection:K,sectionDepth:ee,containerWidth:ei,onGetKeyboardNavigationItemById:ea}){let eo=i.useRef(null),es=(0,m.Xr)(J.T),el=i.useMemo(()=>en(e),[e]),ec=(0,O.C)(e.library_key),ed=(0,p.md)(Y.TG),eu=(0,p.md)(z.xL),em=!!(0,v.GM)()()&&eu.includes(el),ep=(0,W._9)(el,!0,"asset_panel_visual_assets_flyout_insert"),eh=(0,C.fV)(e.library_key,el),e_=(0,M.q5)(),eg=(0,o.wA)(),ef=(0,o.d4)(e=>(0,V.e_)(e).local.thumbnails),eE=(0,B.H)(),ey=(0,o.d4)(e=>e.instanceSwapPickerShown),eb=(0,$.k)(),ev=(0,U.tM)();(0,u.h)(()=>{l.az.trackDefinedEvent("assets_panel.flyout_opened",{assetKey:(0,L.V)(e),assetType:(0,L.q)(e.type),assetLibraryKey:e.library_key,isLocal:e.isLocal,fileParentOrgId:e_?.parentOrgId??void 0,fileTeamId:e_?.teamId??void 0,assetsPanelVersion:eb,partnerType:(0,P.X)(e.library_key),queryId:ev??void 0})}),(0,u.h)(()=>()=>{eg((0,I.vq)()),es(!1)}),i.useEffect(()=>{if(!(0,x.dx)(e)||!e.isLocal)return;let r=e.node_id?ef[e.node_id]:null,n=e.type===G.PW.COMPONENT?e.content_hash:e.version;r?.content_hash!==n&&requestAnimationFrame(()=>{let r=(0,A.r2)(e.node_id);null!=r&&eg(S.T1({thumbnails:[{nodeId:e.node_id,url:r,type:e.type}],source:G.$1.LOCAL}))})},[e,eg,ef]);let eI=i.useCallback(()=>{requestAnimationFrame(()=>eo?.current?.ensureModalOnScreen())},[]),eT=i.useCallback(()=>{ey?.isShown&&eg((0,I.vq)())},[eg,ey]),eS=(0,D.Hu)(e.library_key),ew=(0,j.Nv)(!0),eA=i.useCallback(()=>{if("loaded"!==ec.status)return;let i=k.Y5.getViewportInfo(),a={canvasPosition:{x:i.offsetX,y:i.offsetY},insertAsChildOfCanvas:!0,percentageOffset:new _.Mi(.5,.5),storeInRecentsKey:H.$A.Design,useSmartPositioning:!0,fromPlayground:ec.data};e.type===G.PW.COMPONENT?(eg((0,T.Yf)({item:e,...a})),em&&ep(!0)):e.type===G.PW.STATE_GROUP?eg((0,T.b$)({item:e,...a})):e.type===G.PW.MODULE&&eg((0,T.Bs)({item:e,...a,insertionCallback:()=>k.Y5.triggerAction("commit")}));let o={aiResultsEnabled:ew,assetKey:(0,x.Av)(e),assetType:(0,L.q)(e.type),queryId:ev??void 0,scoreAi:e.ai_score??void 0,scoreLexical:e.lexical_score??void 0,assetTypeDropdownSelection:K,assetsPanelVersion:eb,fileKey:e_?.key??void 0,fileParentOrgId:e_?.parentOrgId??void 0,fileTeamId:e_?.teamId??void 0,isExample:(0,R.o)(e,ed),libraryKey:e.library_key,partnerType:(0,P.X)(e.library_key),sectionDepth:ee,sourceSection:y??void 0};l.az.trackDefinedEvent("assets_panel.flyout_insert",{...o,libraryType:eS,searchSessionId:r??void 0,searchQuery:n,sectionPosition:c}),l.az.trackDefinedEvent("asset_search.result_inserted",{...o,libraryType:eS,position:c,reciprocalRank:(0,s.Et)(c)?1/(1+c):void 0,query:n,sessionId:r??void 0,entryPoint:"assets-panel"})},[e,K,ec,eg,ew,eS,e_?.key,e_?.parentOrgId,e_?.teamId,ed,n,ev,r,ee,y,c,eb,em,ep]);i.useEffect(()=>{let e=e=>{let r=a.findDOMNode(eo.current?.getEl());if(r){if(!r.contains(e.target)){if(es(!1),(0,d.NX)(e.target,"data-does-not-dismiss-component-flyout"))return;eg(w.ES({type:Q.V}));return}es(!0)}};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[eg,es]);let eC=i.useCallback(r=>{let n=r.event.code??r.event.key,i=(0,L.V)(e),a=ea?.(i);if(!a)return;let o=r.event.keyCode===h.Uz.TAB,s=r.event.shiftKey;if((0,g.c2)(r.event,!1)){a.getItemAbove()?.focus(),r.accept();return}if((0,g.Nt)(r.event,!1)){a.getItemBelow()?.focus(),r.accept();return}if((0,g.yn)(n,!1)||o&&s){a.getItemToTheLeft()?.focus(),r.accept();return}if((0,g.lv)(n,!1)||o&&!s){a.getItemToTheRight()?.focus(),r.accept();return}if("Enter"===n){eA(),r.accept();return}},[e,eA,ea]);var eN=i.createElement("div",{className:f.cx.minW0.flex1.$},i.createElement("div",null,(0,E.t)("design_systems.assets_panel.details")),i.createElement(b.Y,{spacing:0,direction:"horizontal"},e&&i.createElement(Z.Q,{assetFileKey:el,assetLibraryKey:e.library_key,assetNodeId:e.node_id}),eh&&i.createElement("div",{className:f.cx.pr4.$},i.createElement(N.KP,{fileKey:el,libraryKey:e.library_key,variant:"secondary",tooltipLocation:"below"}))));let[eL,eO,eR]=(0,F.J)(!1),eP=i.useCallback(()=>{eL.current&&eE()},[eL,eE]);return"loaded"!==ec.status?null:i.createElement(q.vx,{alwaysEnsureModalOnScreen:!0,allowAutoExpanding:!0,canRenderBelowViewport:!1,headerSize:"large",initialPosition:new _.Mi(ei+1,et),onClick:eT,onClose:eE,onKeyDown:eC,title:eN,truncateTitleText:!0,initialWidth:er,ref:eo,dataTestId:"component-flyout-modal",hidden:eO,noCancelDragAndDrop:!0},i.createElement("div",{"data-not-draggable":!0},i.createElement(X.V,{asset:e,onLoaded:eI,onInsert:eA,flyoutHidden:eO,onCloseIfHidden:eP,setFlyoutHidden:eR,sectionPosition:c,sectionNameForTracking:y,sectionDepth:ee})))},Q.V)},811529:(e,r,n)=>{n.d(r,{ND:()=>T,Sg:()=>I,Y5:()=>P,_9:()=>O,cx:()=>R,ff:()=>S,mZ:()=>b,o6:()=>C,sJ:()=>w});var i=n(411855),a=n(188507),o=n(561546),s=n(776250),l=n(418956);n(553716);var c=n(760421),d=n(226055);n(696673);var u=n(44892),m=n(473744),p=n(335682),h=n(416095),_=n(933342),g=n(173454),f=n(875387),E=n(479296),y=n(743415);let b="assets-panel",v=()=>({subscribedFiles:[],fileKeyToSubscribedItems:{}}),I=(0,E.n)((e,r)=>{let n=T((0,u.Jl)(e)),i=T(r,e);return{allItems:[].concat(n.allItems,i.allItems),publishedItems:[].concat(n.publishedItems,i.publishedItems),privateItems:[].concat(n.privateItems,i.privateItems),erroneousItems:[].concat(n.erroneousItems,i.erroneousItems),numUpdates:n.numUpdates+i.numUpdates,numPublished:n.numPublished+i.numPublished}});function T(e,r,n){let i=(0,u.y3)(e),a=[],o=[],s=[],l=n?Object.values(n):[],c=0,d=0,m=new Set;if(r)for(let e of Object.keys(r)){let n=r[e],i=n.containing_frame?.containingStateGroup?.nodeId;i&&n.old_key&&m.add(i)}for(let e of i)if(e.deletedFromSceneGraph||(a.push(e),e.status===g.E8.NOT_STAGED||e.status===g.E8.DELETED?s.push(e):o.push(e)),(0,u.UB)(e.status)&&d++,e.status!==g.E8.CURRENT&&e.status!==g.E8.NOT_STAGED||(e.type===g.PW.COMPONENT||e.type===g.PW.STATE_GROUP)&&(0,h.Hb)(e.status)&&e.old_key||e.type===g.PW.STATE_GROUP&&(0,h.Hb)(e.status)&&m.has(e.node_id)){c++;continue}return{allItems:a,publishedItems:o,privateItems:s,erroneousItems:l,numUpdates:c,numPublished:d}}function S(e,r,n,i,a,o){var s;let l=A(e.published.stateGroups,n,e,r,!!i),c=(s=!!i,A(e.published.components,n,e,r,s,e=>e.containing_frame?.containingStateGroup==null)),d={},u={};for(let e of c.subscribedFiles)(!a||e.key===a)&&(o&&e.key===o||(d[e.key]=e,u[e.key]=(u[e.key]||[]).concat(c.fileKeyToSubscribedItems[e.key])));for(let e of l.subscribedFiles)(!a||e.key===a)&&(o&&e.key===o||(d[e.key]=e,u[e.key]=(u[e.key]||[]).concat(l.fileKeyToSubscribedItems[e.key])));return{subscribedFiles:Object.values(d),fileKeyToSubscribedItems:u}}function w(e,r,n,i,a){let s=e.data;if(!s)return v();let l=[],c={};for(let e in Object.entries(s).forEach(([e,o])=>{let s=r[e];s&&(!n||(0,h.jk)(i,n,s,a))&&o.length>0&&(c[e]=[...o])}),c){let n=r[e];n&&l.push(n)}return(0,o.KQ)(l,"name"),{subscribedFiles:l,fileKeyToSubscribedItems:c}}function A(e,r,n=null,i=null,a,s=()=>!0){let l=Object.create(null);for(let o in e){let c=e[o];for(let e in c){let o=r[e];if(!o||i&&n&&!(0,h.jk)(n,i,o,a))continue;let d=[];for(let r in c[e]){let n=c[e][r];s(n)&&d.push(n)}d.length>0&&(l[e]=d)}}let c=[];return Object.keys(l).forEach(e=>{let n=r[e];n&&c.push(n)}),(0,o.KQ)(c,"name"),{fileKeyToSubscribedItems:l,subscribedFiles:c}}function C(e,r,n,i,a=[]){let o=N(e.published.stateGroups,n,e,r,i,void 0,a),s=N(e.published.components,n,e,r,i,e=>e.containing_frame?.containingStateGroup==null,a),l={},c={};for(let e of[s,o])for(let r of e.subscribedHubFiles)l[r.id]=r,c[r.id]=(c[r.id]||[]).concat(e.hubFileIdToSubscribedItems[r.id]);return{subscribedHubFiles:Object.values(l),hubFileIdToSubscribedItems:c}}function N(e,r,n=null,i=null,a,s=()=>!0,l=[]){let c={};for(let o in e){let d=e[o];for(let e in d){let o=r[e],u=l.includes(e);if(!o||n&&i&&!(0,h.jk)(n,i,{key:o.id},a)&&!u)continue;let m=[];for(let r in d[e]){let n=d[e][r];s(n)&&m.push(n)}m.length>0&&(c[e]=m)}}let d=Object.keys(c).map(e=>r[e]);return(0,o.v7)(d,e=>e.versions[e.current_hub_file_version_id].name),{hubFileIdToSubscribedItems:c,subscribedHubFiles:d}}var L=(e=>(e[e.Grid=0]="Grid",e[e.List=1]="List",e))(L||{});function O(e,r,n){let o=(0,a.wA)(),l=(0,p.q5)(),d=(0,y.M)(),u=(0,h.t$)(e);return(0,i.useCallback)(i=>{l&&(o(c.am({libraryFileSubscription:{file_key:l.key,library_file_key:e,is_subscribed:i,id:u},userInitiated:!0,isCommunityLibrary:r})),i?(0,s.sx)("Library File Enabled",{fileKey:l.key,fileTeamId:l.teamId,fileOrgId:l.parentOrgId,libraryFileKey:e,entryPoint:n},{forwardToDatadog:!0}):(0,s.sx)("Library File Disabled",{fileKey:l.key,fileTeamId:l.teamId,fileOrgId:l.parentOrgId,libraryFileKey:e,entryPoint:n},{forwardToDatadog:!0}),o((0,_.QB)({ignoreLoadingState:d})))},[l,o,e,u,r,d,n])}function R(e){let r=(0,d.GS)(),n=(0,l.md)(f.TG);return!!e&&(!!(0,g.Do)(e)||e.type===g.PW.MODULE||(e.type===g.PW.COMPONENT||e.type===g.PW.STATE_GROUP)&&(r||(0,m.o)(e,n)))}function P(e){let r={};for(let n of Object.values(e))n&&(r[n.key]=n);return r}},426046:(e,r,n)=>{n.d(r,{Ee:()=>O,N2:()=>L});var i=n(411855);n(188507);var a=n(686046),o=n(463033),s=n(183686),l=n(398634),c=n(629019),d=n.n(c),u=n(153234),m=n(522739),p=n(723325),h=n(46481),_=n(154254),g=n(939863);n(963067);var f=n(226055);n(298527);var E=n(511718),y=n(173454),b=n(715762);n(776250),n(320063),n(295680),n(335682),n(132135),n(811529);var v=n(721910);n(623680);let I="empty_states--emptyStateContent--i0Ad8",T="empty_states--emptyStateIcon--kLLCD",S="empty_states--emptyStateIconWrapper--SHUbu",w="empty_states--emptyStateText--gZR-A";var A=n(400232),C=n(951864),N=n(337987);function L(e,r){return e?r?b.r6.BROWSE_LIBRARIES_ACTIONS:b.r6.BROWSE_LIBRARIES_ASSETS_PANEL:r?b.r6.ACTIONS_EXPLORE_LIBRARIES_LINK:b.r6.ASSETS_PANEL_EXPLORE_LIBRARIES_LINK}function O({onClickExplore:e,width_ui3:r,fromActionsModal:n,bgTransparentUI3:a=!1}){let o=(0,f.GS)(),s=i.useMemo(()=>L(o,!!n),[n,o]),{onToggleLibraryModal:l}=(0,E.u)({entrypoint:s,modalType:"editor",initialTab:y.Wv.TEAM_LIBRARIES}),c=i.useCallback(()=>{e?.(),l()},[e,l]);return o?i.createElement(R,{onClick:c,width:r,bgTransparent:a,fromActionsModal:!!n}):i.createElement(P,{onClick:c})}function R({onClick:e,width:r,bgTransparent:n=!1,fromActionsModal:l}){let{setKeyboardNavigationElement:c}=(0,p.M3)({path:[v.ON.CONTENTS,v.zr.CTA],disabled:l});return i.createElement("div",{className:d()("empty_states--ui3EmptyState--8bWkh",_.cx.if(n,_.cx.bgTransparent,_.cx.colorBgSecondary).$),style:{width:r},"data-testid":"empty-state-assets-ui3"},i.createElement("div",{className:"empty_states--ui3LibraryIcon--56jRu"},i.createElement(s.l,null)),i.createElement("div",{className:"empty_states--ui3EmptyStateTitle--UwoAZ"},(0,g.tx)("design_systems.assets_panel.empty_state_title_ui3")),i.createElement("div",null,i.createElement("div",{className:"empty_states--ui3EmptyStateSubtitle---Yamk"},(0,g.tx)("design_systems.assets_panel.empty_state_subtitle_ui3")),i.createElement(a.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more"))),i.createElement(o.$n,{onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries"),ref:c},(0,g.tx)("design_systems.assets_panel.empty_state_cta_ui3")))}function P({onClick:e}){return i.createElement("div",{className:"empty_states--emptyState--ZaBY3 text--fontPos11--2LvXf text--_fontBase--QdLsd","data-testid":"empty-state-assets-ui2"},i.createElement("div",{className:"empty_states--emptyStateTitle--TWkpO text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,g.tx)("design_systems.assets_panel.components")),i.createElement("div",{className:I},i.createElement(h.U,{className:T,svg:A.A},i.createElement("div",{className:S},i.createElement(l.P,null))),i.createElement("div",{className:w},(0,g.tx)("design_systems.assets_panel.create_a_component")," ",i.createElement(a.N,{newTab:!0,trusted:!0,href:"https://help.figma.com/hc/articles/360038662654"},(0,g.tx)("design_systems.assets_panel.learn_more")))),i.createElement("div",{className:I},i.createElement(h.U,{className:T,svg:C.A,fallbackSvg:N.A},i.createElement("div",{className:S},i.createElement(s.l,null))),i.createElement("div",{className:w},i.createElement(m.GG,{className:"empty_states--link--kfp3o blue_link--blueLink--9rlnd",onClick:e,recordingKey:u.Pt("assetsEmptyState","exploreLibraries")},(0,g.tx)("design_systems.assets_panel.explore_libraries")))))}},238837:(e,r,n)=>{function i(e,r){let n={},i={},a=[];return e.forEach(e=>{let o=r(e);if(!o)return;let s=o.containing_frame;if(s?.pageId){let r=s.pageId,a=s.pageName||"";i[r]=a,n[r]=n[r]||[],n[r].push(e)}else a.push(e)}),{itemsByPageId:n,pageNamesByPageId:i,itemsWithoutPage:a}}n.d(r,{VL:()=>a,fM:()=>o,tz:()=>i}),n(561546),n(966712),n(939863),n(680681),n(473744),n(416095),n(220499),n(173454),n(811529);let a="0:1";function o(e,r,n,i){if(0!==n.length){if(1===Object.keys(e).length&&1===Object.keys(r).length){let r=Object.keys(e)[0];e[r].push(...n),n.splice(0,n.length)}else r[a]&&e[a]?(e[a].push(...n),n.splice(0,n.length)):i&&(r[a]||(r[a]="Page 1"),e[a]=[...n],n.splice(0,n.length))}}function s(e,r,n){sortAlphabeticallyOrPrioritizeExamplesByFn(r,{sortFn:e=>e.name,priorityFn:e=>isExampleAsset(e,{isPreset:n?.isPreset??!1})});let i=Object.create(null);for(let n of r){let r=getNameParts(n.name),a="";for(let o=0;o<r.length;o++){let s;let l=r[o],c=a,d=o<r.length-1;if(a+=l+(d?"/":""),s=i[c]?i[c]:e,d&&!i[a]){let e={type:"NAME_GROUP",name:l,key:l,items:[],subtrees:[]};i[a]=e,s.subtrees.push(e)}d||s.items.push(n)}}}function l(e,r,n){let i={},a=[],o=[],l={};for(let e of r)if(getFeatureFlags().dse_templates_proto&&e.type===AssetType.COMPONENT&&isTemplate(e))a.push(e);else if(isCanvasAsset(e)&&e.containing_frame?.nodeId&&""!==e.containing_frame.name){let r=e.containing_frame.nodeId;i[r]=i[r]||[],i[r].push(e),l[r]=e.containing_frame}else o.push(e);if(getFeatureFlags().dse_templates_proto&&a.length>0){let r={type:"NAME_GROUP",name:"Templates",key:`${e.key}-${c}`,items:[],subtrees:[]};e.subtrees.push(r),s(r,a,{isPreset:n?.isPreset??!1})}let d=Object.keys(i).length;if(d>0||1===d&&o.length){for(let r in i){let a=l[r],o=i[r],c={type:"NAME_GROUP",name:a.name||"",key:r,items:[],subtrees:[]};e.subtrees.push(c),s(c,o,{isPreset:n?.isPreset??!1})}s(e,o,{isPreset:n?.isPreset??!1})}else s(e,getFeatureFlags().dse_templates_proto?r.filter(e=>!isTemplate(e)):r,{isPreset:n?.isPreset??!1})}let c="template-subtree";var d=(e=>(e[e.COMPONENT=0]="COMPONENT",e[e.TEMPLATE=1]="TEMPLATE",e))(d||{})},44160:(e,r,n)=>{n.d(r,{KO:()=>f});var i=n(411855),a=n(776250),o=n(418956),s=n(395900),l=n(607283),c=n(335682),d=n(940596),u=n(233333);let m="performance.ds_eco.asset_panel_loading",p=new s.jk(m,{}),h=((0,d.rt)(!1),(0,d.rt)(!1)),_=(e,r)=>{let n=(0,c.q5)(),s=(0,u.D)(),[d,_]=(0,o.fp)(h);i.useEffect(()=>{if(!s&&!d&&r){_(!0);let r=p.stop();r&&(0,a.sx)(m,{elapsedMs:r,fileKey:n?.key,teamId:n?.teamId,orgId:n?.parentOrgId,isUi3RedesignedAssetPanel:!1,numLibraries:e.allElementsTree.allElements.length,numComponents:g(e.allElementsTree.allElements),numComponentsShown:e.elementsInView.filter(e=>e.type===l.zq.TILE).length,numSectionsShown:e.elementsInView.filter(e=>e.type===l.zq.ROW).length},{forwardToDatadog:!0})}},[e.isDirty,e.elementsInView,e.allElementsTree,s,d,n,_,r])},g=e=>{let r=0;return e.forEach(e=>{e.type===l.zq.TILE?r+=1:e.type===l.zq.ROW&&(0,l.We)(e)&&(r+=g(e.children))}),r};function f({elementsCache:e,hasRenderedItems:r}){return _(e,r),null}},56063:(e,r,n)=>{n.d(r,{b:()=>d});var i=n(411855),a=n(188507),o=n(271245),s=n(335682),l=n(336599),c=n(705129);let d=function({disabled:e=!1}={}){let r=(0,a.wA)(),n=(0,s.q5)(),d=(0,a.d4)(e=>e.fileVersion),u=(0,a.d4)(e=>e.loadingState),m=i.useRef(0),p=null!=n&&null!=d?(0,c.yD)(n.key):void 0;i.useEffect(()=>{!e&&null!=p&&(0,l.Sc)(u,p)&&m.current<3&&(m.current+=1,r((0,o.zK)()))},[r,p,u,e])}},811559:(e,r,n)=>{n.d(r,{lX:()=>$});var i=n(411855),a=n(188507),o=n(187134),s=n(75395);n(922827);var l=n(629019),c=n.n(l),d=n(512495),u=n.n(d),m=n(568214),p=n(91408);n(320063);var h=n(153234);n(554322);var _=n(572206),g=n(154254),f=n(999237),E=n(939863),y=n(428654),b=n(798099),v=n(981354),I=n(809831),T=n(226055),S=n(44892);n(356390);var w=n(141123),A=n(515427),C=n(232205),N=n(237929),L=n(267931),O=n(49116),R=n(776615),P=n(999198),D=n(173454),k=n(498606),M=n(186380),F=n(776018),x=n(820396),U=n(402271),B=n(811529),V=n(870061),G=n(262311),H=n(948729);let K=(0,p.hG)(G.QU);function W(e){switch(e){case"list-compact":case"list":case"list-no-padding":return!0;case"grid":case"grid-compact":case void 0:return!1}}function $(e){var r,n,a;let{item:o}=e,{nameStyle:s,background:l}=(r=e.item,n=e.displayType,a=e.noBackground,i.useMemo(()=>{let e={};if(a)return{nameStyle:e,background:null};let i=(0,S.zR)(r,null);return i&&!W(n)&&(e.background=y.F.format(i),e.color=(0,m.G$)(i)),{nameStyle:e,background:i}},[n,a,r])),c=e.showName;(e.hideNameOverlay||e.shouldShowNamePopout&&!W(e.displayType))&&(c=!1);let d=H.UA,p=u()({},e,{style:{marginLeft:e.gutterWidth}});return i.createElement(Y,{...p},i.createElement(z,{...e},i.createElement(j,{...e,backgroundColor:l,className:void 0,style:e.isDragged?void 0:e.style}),c&&i.createElement("div",{className:function(e,r){switch(e){case"grid":case"grid-compact":case void 0:return r;case"list-compact":return H.OD;case"list":case"list-no-padding":return H.vZ}}(e.displayType,d),style:s},(()=>{if(W(e.displayType)&&!e.isSearch){let r=(0,N.kH)(o.name);return e.item.type===D.PW.RESPONSIVE_SET?(0,P.NR)(r):r}return o.name})()),e.item.type===D.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0&&i.createElement(Z,{isList:W(e.displayType),numVariants:e.numVariants})))}(0,p.hG)(G.Us);let Y=i.memo(i.forwardRef(function(e,r){let n;let a=W(e.displayType),s=i.useRef(null),l=e.height||120,c=e.width||120;l-=l%2,c-=c%2;let d=e.itemPadding??0;c+=2*d,l+=2*d;let u=a?e.style:{...e.style,width:c,height:l},m=(0,V.o)(e.item,{shouldShowName:e.shouldShowNamePopout,isList:a});n="list-compact"===e.displayType?H.nl:"list"===e.displayType?H.yg:"list-no-padding"===e.displayType?H.oV:e.isDragged?H.Vs:e.isFigJam||e.isSlides?H.bo:e.useBaseTile?H.aS:"grid-compact"===e.displayType?H.Ms:H.fh;let p=(0,D.Do)(e.item)?null:e.item.description,h=e.item.type===D.PW.STATE_GROUP&&!!e.numVariants&&e.numVariants>0,_=e.shouldShowNamePopout&&!a,g=!e.shouldHideDescription&&p,f=(g||_||h)&&!e.shouldHideTooltip,E=i.useMemo(()=>e.isFigJam||e.isSlides?{"data-tooltip":e.isDragged?void 0:(0,N.kH)(e.item.name),"data-tooltip-type":e.isDragged?void 0:k.Ib.TEXT,"data-tooltip-timeout-delay":e.isDragged?void 0:500,"data-tooltip-show-above":e.tooltipShownAbove}:m?{"data-tooltip-type":f?k.Ib.SPECIAL:void 0,"data-tooltip":f?U.B:void 0,"data-tooltip-component-name":_?(0,N.kH)(e.item.name):void 0,"data-tooltip-file-name":e.fileName,"data-tooltip-component-description":g?p:void 0,"data-tooltip-num-variants":h?e.numVariants:void 0,"data-tooltip-show-right":!0,"data-tooltip-max-width":240,"data-tooltip-interactive":!0,"data-tooltip-show-immediately":!!e.showTooltipImmediately||void 0,"data-tooltip-hide-immediately":!!e.showTooltipImmediately||void 0}:void 0,[p,m,e.fileName,e.isDragged,e.isFigJam,e.isSlides,e.item.name,e.numVariants,e.showTooltipImmediately,e.tooltipShownAbove,f,g,_,h]);return i.createElement("div",{ref:r||s,className:`${n} ${e.className||""}`,style:u,...E},i.createElement(o.o,{eventListeners:["onMouseUp"]},e.children))}));function z(e){let r="whiteboard"===(0,I.lg)(),n=W(e.displayType),o=(0,B.cx)(e.item),l=(0,L.H)(),c=(0,a.d4)(e=>e.modalShown?.type),d=i.useCallback(()=>{c===F.V&&l()},[c,l]),{onInsertableResourcePointerDown:u,dragState:m,insertAction:p}=(0,C.j)({resource:e.item,isList:n,sourceForTracking:e.draggable?.sourceForTracking||"",sectionNameForTracking:e.draggable?.sectionNameForTracking,sectionDepth:e.draggable?.sectionDepth,clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:e.draggable?.afterSuccessfulInsert,draggingThumbMaxDimensions:o?void 0:new _.Mi((e.width||0)-K,(e.height||0)-K),sectionPosition:e.sectionPosition,recomputeCancelRectsOnPointerUp:c===F.V,onDragStart:()=>{e.draggable?.onDragStart?.(),d()}}),E=`componentThumb.${e.recordingNodePath}`,y=h.rf(e.buttonProps?.onContextMenu?E:`${E}_UNUSED`,"contextmenu",r=>{e.buttonProps?.onContextMenu?.(r)},{recordMetadata:e=>{let r=e.currentTarget.getBoundingClientRect(),n=new _.Mi(r.left,r.top),i=new _.Mi(e.clientX,e.clientY).subtract(n);return{percentageMousePos:new _.Mi(i.x/r.width,i.y/r.height)}},playbackMetadata:r=>{let n=e.height||0,i=e.width||0;return{currentTarget:{getBoundingClientRect:()=>({top:0,left:0,height:n,width:i})},clientX:0+r.percentageMousePos.x*i,clientY:0+r.percentageMousePos.y*n}}}),v=h.rf(E,"click",r=>{if(e.buttonProps?.onItemClick?.(r,e.item),e.buttonProps?.clickToInsert){let n=new PointerEvent(r.type,{...r,view:window});p({e:n,isClick:!0,dropPosition:(0,A.zR)(void 0)}).then(()=>e.draggable?.afterSuccessfulInsert?.(n))}}),S=r=>{e.buttonProps?.onItemDoubleClick?.(r,e.item)},O=(r||e.isSlides)&&m?H.Vk:H.GR,R=(0,T.GS)();return i.createElement(i.Fragment,null,i.createElement(f.n.div,{onPointerDown:r=>{e.draggable&&u(r)},style:{padding:e.itemPadding},className:g.cx.hFull.borderBox.$,"data-testid":E},e.buttonProps?e.buttonProps?R?i.createElement(s.E,{className:O,htmlAttributes:{onContextMenu:y,onDoubleClick:S,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur},onClick:v,"aria-label":(0,N.kH)(e.item.name)},e.children):i.createElement("button",{className:O,onContextMenu:y,onDoubleClick:S,onFocus:e.buttonProps?.onFocus,onBlur:e.buttonProps?.onBlur,onMouseDown:e.buttonProps?.onFocus?void 0:b.wo,onClick:v},e.children):null:i.createElement("div",{className:O},e.children)),i.createElement(w.q,{dragState:m,isList:n}))}function j({displayType:e,item:r,isDragged:n,isFigJam:a,isSlides:o,backgroundColor:s,shouldShowShadowOnHover:l,height:d=120,width:u=120,noBackground:m,style:p,alwaysShowBorder:h,thumbWrapperClassName:_,thumbPaddingGrid:g}){let f;let E=i.useContext(R.uW),b=(0,v.X)(),I=d-d%2,T=u-u%2,S=W(e);f=S?m?H.v:H.Tq:m||a?H.Yc:`${H.wi} ${H.wi}`;let w={width:2*T,height:2*I,padding:i.useMemo(()=>a?0:S?K:g??K,[a,S,g]),...p};m||!s||a||(h||o||(w.boxShadow=(0,R.pw)(E,s,b)),w.background=y.F.format(s)),n&&(S?(w.width=void 0,w.height=void 0):w.background=void 0);let A=i.useMemo(()=>r.type===D.PW.RESPONSIVE_SET&&"LIBRARY"===r.subscriptionStatus&&r.fullPage?H.NK:l?H.Ib:a||o?H.FF:H.N4,[a,o,r,l]);return i.createElement("div",{className:H.Ol,style:n&&S?void 0:{width:T,height:I}},i.createElement("div",{className:c()(f,_,{[H.XK]:h}),style:w},r.type===D.PW.VARIABLE_SET?i.createElement(q,{variableSetID:r.node_id}):i.createElement(M.M,{className:A,item:r,shouldGenerateLocalThumbnail:!0,draggable:!1})))}let q=i.memo(function({variableSetID:e}){let r=(0,a.d4)(e=>(0,O.a3)(e)),n=i.useMemo(()=>{let n=new Set;for(let i of Object.values(r))if(i.variableSetId===e&&(n.add(i.resolvedType),n.size>=3))break;return[...n.values()]},[r,e]),o=(n.length-1)/2;return i.createElement("div",{className:H.bF},n.map((e,r)=>i.createElement("div",{className:H.aC,key:e,style:{marginTop:(o-r)*20}},i.createElement(x.i,{type:e,showTooltip:!1}))))});function Z({isList:e,numVariants:r}){let n=(0,T.GS)();return r<=1?null:i.createElement("div",{className:e?H.hs:H.xC,"data-tooltip":(0,E.t)("design_systems.assets_panel.variant_count",{numVariants:r}),"data-tooltip-type":k.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip-timeout-delay":n?500:void 0,"data-tooltip-show-immediately":!n||void 0,"data-tooltip-hide-immediately":!0},r)}},721910:(e,r,n)=>{n.d(r,{JS:()=>o,Mk:()=>s,ON:()=>c,c_:()=>i,nE:()=>a,o8:()=>l,yW:()=>E,zr:()=>f});let i="components",a="examples",o="templates",s="assets",l="privateToThisFile";var c=(e=>(e[e.HEADER=0]="HEADER",e[e.BREADCRUMB=1]="BREADCRUMB",e[e.CONTENTS=2]="CONTENTS",e))(c||{}),d=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e[e.PAGES=1]="PAGES",e[e.ASSETS=2]="ASSETS",e))(d||{}),u=(e=>(e[e.SEARCH_AND_FILTER=0]="SEARCH_AND_FILTER",e[e.LIBRARY_SEARCH_CHIP=1]="LIBRARY_SEARCH_CHIP",e))(u||{}),m=(e=>(e[e.SEARCH=0]="SEARCH",e[e.SETTINGS=1]="SETTINGS",e))(m||{}),p=(e=>(e[e.BACK=0]="BACK",e[e.LIBRARY=1]="LIBRARY",e[e.ELLIPSIS=2]="ELLIPSIS",e[e.STUBS=3]="STUBS",e))(p||{}),h=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.TEMPLATES=1]="TEMPLATES",e[e.EXAMPLES=2]="EXAMPLES",e[e.COMPONENTS=3]="COMPONENTS",e[e.FOLDERS=4]="FOLDERS",e))(h||{}),_=(e=>(e[e.SITE_KIT=0]="SITE_KIT",e[e.LOCAL_AND_SUBSCRIBED=1]="LOCAL_AND_SUBSCRIBED",e[e.PRESETS=2]="PRESETS",e[e.VISUAL_ASSETS=3]="VISUAL_ASSETS",e))(_||{}),g=(e=>(e[e.LIBRARIES=0]="LIBRARIES",e))(g||{}),f=(e=>(e[e.CTA=0]="CTA",e[e.UI_KITS=1]="UI_KITS",e))(f||{}),E=(e=>(e.DESIGN="design",e.SITE="site",e))(E||{})},551640:(e,r,n)=>{n(411855),n(188507),n(723325),n(662275),n(813648),n(933342),n(135076),n(311692),n(718242)},718242:(e,r,n)=>{n.d(r,{LH:()=>E,Nh:()=>y,Qk:()=>b,R2:()=>v,ZV:()=>I,mb:()=>f,uo:()=>g});var i=n(411855),a=n(561546),o=n(974880),s=n(776250),l=n(966712),c=n(716034),d=n(696673),u=n(680681),m=n(335682);n(48515);var p=n(743415);n(662163);var h=n(239737),_=n(721910);function g(e,r,n){let i=[...e];return r&&n&&(0,u.NX)(r)?(0,u.k9)({libraries:i,approvedLibraryFileKeysByResourceType:r,approvedLibraryKeysByResourceType:n}):(0,a.KQ)(i,"name"),i}function f(e,r,n){return g(e.map(e=>({...e,key:e.fileKey,library_key:e.libraryKey})),r,n)}function E(e){let r=[...e];return(0,a.v7)(r,e=>e.versions[e.current_hub_file_version_id].name),r}function y(e,{includeEmptyLibraries:r}={}){let n=e.numComponents+e.numStateGroups,i=(0,l.u4)("dse_editor_templates_v1",e.numModuleAssets,0)??0;return r||n>0||i>0?{name:e.name,fileKey:e.fileKey,libraryKey:e.libraryKey,numComponents:n,numTemplates:i,thumbnailUrl:e.thumbnailUrlOverride??e.thumbnailUrl,thumbnailShouldCover:!!e.thumbnailGuid||(0,d.wJ)(e.fileKey),type:_.yW.DESIGN}:null}function b(e){return(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement||e instanceof HTMLSelectElement)&&"application"!==e.role}function v(e,r=8){let[n,a]=i.useState(window.innerHeight);i.useEffect(()=>{let e=()=>{a(window.innerHeight)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let o=i.useMemo(()=>n-(e??0)-r,[r,e,n]);if(e)return o}function I(e){let r=(0,h.Nv)(!0),n=(0,p.k)(),a=(0,m.tS)();return i.useCallback(i=>{let{type:l,sectionPosition:c,searchQuery:d,searchSessionId:u,...m}=e,p={aiResultsEnabled:r,altKey:i.altKey,assetsPanelVersion:n,fileKey:a??void 0};s.az.trackDefinedEvent("assets_panel.keyboard_insert",{...e,...p}),s.az.trackDefinedEvent("asset_search.result_inserted",{...m,...p,assetType:l,position:c,reciprocalRank:(0,o.Et)(c)?1/(1+c):void 0,query:d,sessionId:u,entryPoint:"assets-panel"})},[e,r,a,n])}n(623680),n(773610),(0,c.eU)(!1)},905485:(e,r,n)=>{n.d(r,{G:()=>o});var i=n(411855);let a=i.createContext({getLibrary:()=>void 0,getPage:()=>void 0,getFolder:()=>void 0});function o(){return i.useContext(a)}},836328:(e,r,n)=>{n.d(r,{MB:()=>a});var i=n(411855);function a({onBoth:e,onClick:r,onKeyDown:n}){return i.useCallback(i=>{e?.(i),0!==i.detail?r?.(i):n?.(i)},[e,r,n])}n(498750),n(723325),n(356390),n(283942),n(721910),n(718242),n(623680),n(205236),n(243074);let o=i.createContext(null)},606624:(e,r,n)=>{var i=n(411855),a=(e=>(e[e.Mount=0]="Mount",e[e.Back=1]="Back",e[e.Forward=2]="Forward",e[e.ToggleView=3]="ToggleView",e))(a||{});(0,i.createContext)({lastNavAction:0,lastNavDirection:0,setLastNavAction:()=>{},lastActionWasBackSwipe:!1})},26042:(e,r,n)=>{n.d(r,{hK:()=>s});var i=n(411855);n(188507);var a=n(838516);n(355819),n(752207),n(939863);var o=n(988022);function s({height:e}){return i.createElement("div",{style:{height:e}})}n(335682),n(914214),(0,a.s)((e,r,n,i)=>{(0,o.uE)("action_left_panel_scroll",{user:e},{assetsPanelVersion:3,tab:"assets",fileKey:r,fileTeamId:n,fileOrgId:i})},500)},366508:(e,r,n)=>{n.d(r,{Y:()=>T});var i=n(561546),a=n(258214),o=n(966712),s=n(607283),l=n(939863),c=n(696673),d=n(473744),u=n(237929),m=n(137459),p=n(173454),h=n(238837),_=n(721910),g=n(718242),f=n(619084),E=n(443808);function y(e){let r=(0,u.ke)(e.name),n=e.type===p.PW.RESPONSIVE_SET?e.containingFrame?.name:e.containing_frame?.name;return n?[n,...r]:r}function b(e,r="",{isPreset:n}={isPreset:!1}){let i=new Map,a=[];(0,d.gO)(e,{sortFn:e=>y(e).join("/"),priorityFn:e=>(0,d.Nz)(e,{isPreset:n})});let o=Object.create(null);for(let n of e){let e=y(n),l="";for(let c=0;c<e.length;c++){let d=e[c],u=l,m=c<e.length-1;l+=d+(m?"/":"");let p=null;if(o[u]&&(p=o[u]),m){let n=o[l]??{name:d,key:`${r}-${e.slice(0,c+1).join("/")}`,items:[],subtrees:new Map,type:s.l$.NAME_GROUP,previewAsset:void 0};o[l]||(o[l]=n,p?p.subtrees.set(d,n):i.set(d,n))}m||(p?p.items.push(n):a.push(n))}}return i.forEach(e=>{(function e(r){r.previewAsset=S(r),r.subtrees.forEach(r=>e(r))})(e)}),{sortedItems:a,sortedSubtrees:i}}function v(e,r,{isPreset:n}){let i=new Map,{itemsByPageId:a,pageNamesByPageId:o,itemsWithoutPage:c}=(0,h.tz)(e,e=>e),{itemsByPageId:u,pageNamesByPageId:m,itemsWithoutPage:p}=(0,h.tz)(r,e=>e),g={...o,...m};(0,h.fM)(a,g,c),(0,h.fM)(u,g,p,!0);let f=Object.keys(g);for(let e of((0,d.gO)(f,{sortFn:e=>g[e],priorityFn:e=>(0,d.dS)(g[e],{isPreset:n})}),f)){let r=g[e],o=e in a?a[e]:void 0,c=o,m=[],p=null,h=null;if(o&&o.length>0){c=o.filter(e=>!(0,d.Nz)(e,{isPreset:n}));let{sortedItems:e,sortedSubtrees:r}=b(m=o.filter(e=>(0,d.Nz)(e,{isPreset:n})),"examples",{isPreset:n});m.length>0&&(h={name:(0,l.t)("design_systems.assets_panel.examples"),items:e,subtrees:r,key:_.nE,type:s.l$.COMPONENTS,previewAsset:void 0})}if(c&&c.length>0){let{sortedItems:e,sortedSubtrees:r}=b(c,"components",{isPreset:n});p={name:(0,l.t)("design_systems.assets_panel.components"),items:e,subtrees:r,key:_.c_,type:s.l$.COMPONENTS,previewAsset:void 0}}let f=null,E=u[e];if(E&&E.length>0){let{sortedItems:e,sortedSubtrees:r}=b(E,"templates",{isPreset:n});f={name:(0,l.t)("design_systems.assets_panel.templates"),items:e,subtrees:r,key:_.JS,type:s.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:y,sortedSubtrees:v}=b([...m??[],...c??[],...E??[]],"assets",{isPreset:n}),I={name:r,items:y,subtrees:v,key:_.Mk,type:s.l$.COMPONENTS,previewAsset:void 0},T={name:r,id:e,previewAsset:function({componentSubtree:e,exampleSubtree:r,templateSubtree:n}){let i=S(r),a=S(n),o=S(e);return i||a||o}({componentSubtree:p,exampleSubtree:h,templateSubtree:f}),components:p,examples:h,templates:f,assets:I,type:_.yW.DESIGN};i.set(e,T)}return i}function I(e,r){let{allItems:n,publishedItems:i,privateItems:a,numPublished:o}=e;return o>0&&r&&a.length>0?i:n}function T({localComponentsInfo:e,localTemplatesInfo:r,localThumbnailUrl:n,localThumbnailShouldCover:d,subscribedComponentsInfo:u,subscribedTemplatesInfo:p,subscribedCommunityComponentsInfo:y,subscribedCommunityTemplatesInfo:T,canPublish:w,openFileKey:A,openFileLibraryKey:C,approvedLibraryFileKeysByResourceType:N,approvedLibraryKeysByResourceType:L,siteKitAssetData:O,siteKitThumbnailComponents:R}){let{fileKeyToSubscribedItems:P,subscribedFiles:D}=u,k=[...D],M={};if((0,o.kc)().dse_editor_templates_v1&&p)for(let e of(M=p.fileKeyToSubscribedItems,p.subscribedFiles))k.find(r=>r.key===e.key)||k.push(e);let F=function(e,r,n,i,o){let s=new Map;for(let l of(0,g.uo)(e,i,o)){let e=l.key,i=r[e]??[],o=n[e]??[],c=v(i,o,{isPreset:!1}),d={name:l.name,fileKey:e,libraryKey:(0,a.l)(l.library_key??""),pages:c,numComponents:i.length,numTemplates:o.length,thumbnailUrl:l.thumbnail_url_override??l.thumbnail_url,thumbnailShouldCover:!!l.thumbnail_guid,type:_.yW.DESIGN};s.set(e,d)}return s}(k,P,M,N,L),x=function(e,r){if(!e&&!r)return new Map;let{hubFileIdToSubscribedItems:n,subscribedHubFiles:i}=e??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},{hubFileIdToSubscribedItems:o,subscribedHubFiles:s}=r??{hubFileIdToSubscribedItems:{},subscribedHubFiles:[]},l=[...i,...s],c=new Map;for(let e of(0,g.LH)(l)){let r=e.id,i=n[r]??[],s=o[r]??[],l=v(i,s,{isPreset:!0});if(i.length+s.length>0){let n={name:(0,m.oA)(e),fileKey:r,libraryKey:(0,a.l)(e.library_key??""),pages:l,numComponents:i.length,numTemplates:s.length,thumbnailUrl:e.thumbnail_url,thumbnailShouldCover:!0,type:_.yW.DESIGN};c.set(r,n)}}return c}(y,(0,o.kc)().dse_editor_templates_v1?T:void 0),U=function(e,r,n,i,a,d,u){let{privateItems:m,numPublished:p}=e,{privateItems:h,numPublished:g}=r??{privateItems:[],numPublished:0},f=p+g>0&&a&&m.length+h.length>0,E=I(e,a),y=r?I(r,a):[],T=(0,c.wJ)(d),S=v(E,y,{isPreset:T}),w={name:(0,o.kc)().dse_local_assets_copy?(0,l.t)("design_systems.assets_panel.created_in_this_file"):(0,l.t)("design_systems.assets_panel.local_assets"),fileKey:d,libraryKey:u,pages:S,numComponents:E.length,numTemplates:y.length,thumbnailUrl:n,thumbnailShouldCover:i,type:_.yW.DESIGN};if(f){let e=null;if(m.length>0){let{sortedItems:r,sortedSubtrees:n}=b(m,"p_components",{isPreset:T});e={name:(0,l.t)("design_systems.assets_panel.components"),items:r,subtrees:n,key:_.c_,type:s.l$.COMPONENTS,previewAsset:void 0}}let r=null;if(h.length>0){let{sortedItems:e,sortedSubtrees:n}=b(h,"p_templates",{isPreset:T});r={name:(0,l.t)("design_systems.assets_panel.templates"),items:e,subtrees:n,key:_.JS,type:s.l$.TEMPLATES,previewAsset:void 0}}let{sortedItems:n,sortedSubtrees:i}=b([...m??[],...h??[]],"assets",{isPreset:T}),a={name:(0,l.t)("design_systems.assets_panel.assets"),items:n,subtrees:i,key:_.Mk,type:s.l$.COMPONENTS,previewAsset:void 0},o={name:(0,l.t)("design_systems.assets_panel.hidden"),id:_.o8,previewAsset:m[0]??h[0],components:e,examples:null,templates:r,assets:a,type:_.yW.DESIGN};w.pages.set(_.o8,o)}return w}(e,r,n,d,w,A,C),B=new Map([...F,...x]);B.set(U.fileKey,U);let V=O?(0,f.P)(O):null,G=V?{...V.library,pages:function(e,r){let n=new Map,{itemsByPageId:a,pageNamesByPageId:o,itemsWithoutPage:c}=(0,h.tz)(e,e=>({containing_frame:e.containingFrame??void 0}));(0,h.fM)(a,o,c);let d=Object.keys(o);for(let e of((0,i.v7)(d,e=>o[e]),d)){let i=o[e],l=a[e]??[];if(!i||0===l.length)continue;let{sortedItems:c,sortedSubtrees:d}=b(l,"assets"),u={name:i,items:c,subtrees:d,key:_.Mk,type:s.l$.RESPONSIVE_SETS,previewAsset:void 0},m={name:i,id:e,previewAsset:r[e]??S(u),assets:u,type:_.yW.SITE,numAssets:function e(r){return r.items.length+Array.from(r.subtrees.values()).reduce((r,n)=>r+e(n),0)}(u)};n.set(e,m)}let u=(0,E.uZ)();if(u.length>0){let e={name:(0,l.t)("design_systems.assets_panel.embeds"),id:"embeds",embeds:u,previewAsset:void 0,assets:{name:"",items:[],subtrees:new Map,key:"EMPTY_ASSETS_NOT_USED",type:s.l$.COMPONENTS,previewAsset:void 0},type:_.yW.SITE,numAssets:u.length};n.set("embeds",e)}return n}(V.assets,R)}:null;return G&&B.set(G.fileKey,G),{localAssets:U,libraries:F,presets:x,siteKit:G,allLibrariesUnsorted:B}}function S(e){let r=e?function e(r){let n=Array.from(r.items.values());for(let[i,a]of r.subtrees.entries())n.push(...e(a));return n}(e):[];return r.length>0?r[0]:void 0}},623680:(e,r,n)=>{n(411855),n(358145);var i=n(940596);n(721910),n(905485),n(606624),n(799550),n(662163),n(858855);var a=(e=>(e.IconSets="icon_sets",e.Illustrations="illustrations",e))(a||{}),o=(e=>(e.Libraries="All libraries",e.Pages="Library",e.Assets="Page",e.Search="Search",e.Recents="Recents",e.VisualAssets="Visual assets",e))(o||{});(0,i.rt)({}),(0,i.rt)(!1),(0,i.rt)(!1),(0,i.rt)(!1);(0,i.rt)(void 0)},808801:(e,r,n)=>{n(411855);var i=n(91408);n(448406),n(799550);var a=n(578482);(0,i.jz)(a.H0),(0,i.jz)(a.Mj);let o={NORMAL:115,WIDE:void 0,SMALL:72};o.NORMAL,o.WIDE,o.SMALL},740115:(e,r,n)=>{n(411855),n(448406),n(811529),n(551640),n(808801)},858855:(e,r,n)=>{n.d(r,{U:()=>c}),n(411855);var i=n(188507);n(335682);var a=n(416095),o=n(336599),s=n(514816),l=n(233333);function c(){let e=(0,s.je)(),r=(0,i.d4)(e=>e.loadingState);return!!(0,l.D)()&&(!e.data||e.data.some(e=>{let n=(0,a.Mb)(e.fileKey,e.libraryKey);return!(0,o.D2)(r,n)}))}n(773610)},799550:(e,r,n)=>{n.d(r,{MA:()=>d});var i=n(411855),a=n(418956),o=n(286640),s=(e=>(e.LIST="list",e.GRID="grid",e))(s||{});let l="assets-panel-view-mode-v2",c=(0,a.E3)(l,"grid");function d(){let[e,r]=(0,a.fp)(c),n=i.useCallback(e=>e.key===l&&null!=e.newValue,[]),s=i.useCallback(n=>{if(n)try{let i=JSON.parse(n);("grid"===i||"list"===i)&&e!==i&&r(i)}catch(e){}},[e,r]);return(0,o.tl)({onSync:s,shouldSyncValue:n}),[e,r]}(0,a.E3)("asset-panel-show-folders",!1)},205236:(e,r,n)=>{n.d(r,{e:()=>a});var i=n(411855);function a(e){let[r,n]=i.useState(e);return[r,i.useCallback(()=>n(!0),[]),i.useCallback(()=>n(!1),[]),i.useCallback(()=>n(e=>!e),[])]}},443808:(e,r,n)=>{n.d(r,{uZ:()=>d}),n(411855),n(109388),n(922827),n(340818),n(629019),n(776250);var i=n(91408),a=n(966712);n(153234),n(864089);var o=n(330654);n(723325),n(752207),n(154254),n(999237),n(534804),n(356390),n(626510),n(57150);var s=n(3036);n(274071),n(811529),n(721910),n(551640),n(836328),n(623680),n(740115),n(799550),n(773610),n(28752),n(948729);var l=n(578482);n(164655),(0,i.jz)(l.Mj);let c=[{name:"URL or HTML",type:"embed",initial_url:"",thumbnail_url:(0,a.ck)("86ba1f4a16abbec4208d141f3127d6f86c72f818"),preview_url:(0,a.ck)("86ba1f4a16abbec4208d141f3127d6f86c72f818"),width:600,height:400,background_color:"var(--color-bg-secondary)",feature_flag:"sts_generic_embed"},{name:"YouTube",type:"embed",initial_url:"https://youtube.com/embed/",thumbnail_url:(0,a.ck)("c89e882e58779c46c4e5656b3775f715309928fc"),preview_url:(0,a.ck)("528dac2da25ce6a68901dd629c4606171f762fcc"),width:600,height:400,background_color:"var(--color-bg-danger-tertiary)",feature_flag:"sts_widget_youtube"},{name:"Google Map",type:"embed",initial_url:"https://maps.google.com/?output=embed",thumbnail_url:(0,a.ck)("e3414cd8bb4b5e1e76366525ddf193782545e567"),preview_url:(0,a.ck)("5732708498034ce891d9f33c7269ee8679bb3191"),width:600,height:400,background_color:"var(--color-bg-brand-tertiary)",feature_flag:"sts_widget_google_maps"}];function d(){return(0,a.kc)().ds_sts_kit?c.filter(e=>!e.feature_flag||(0,a.kc)()[e.feature_flag]):[]}let u=(0,s.P)("recently-used-site-embeds","name",o.object({name:o.string()}),{transform:e=>({name:e.name})})},773610:(e,r,n)=>{n.d(r,{AS:()=>w,Es:()=>C,Nn:()=>A,fi:()=>L,ie:()=>N});var i=n(411855),a=n(627472),o=n(138020),s=n(966712),l=n(716034),c=n(418956),d=n(711525),u=n(752553),m=n(647899),p=n(624601),h=n(977373),_=n(30637),g=n(809831),f=n(99506),E=n(279453),y=n(623746),b=n(239671),v=n(479296),I=n(619084);let T=(0,v.n)(async()=>await (0,m.w0)("ds_sts_lib_key")),S=(0,l.eU)(async e=>{let r=e(g.u8)===b.nT.Sites&&(0,s.kc)().ds_sts_kit,n=!!((0,_.Lg)()||(0,_.nl)())||e(p.ZJ).status===h.Uv.COMPLETED;if(!r||!n)return{libraryKey:"",enabled:!1};let i=(await T()).get("libraryKey","",e=>"string"==typeof e),a=!!i&&r;return{libraryKey:a?i:"",enabled:a}}),w=(0,a.oA)(S,()=>({libraryKey:"",enabled:!1})),A=(0,v.n)(()=>{let{libraryKey:e,enabled:r}=(0,c.md)(w);return(0,u.IT)((0,E.Bu2)({libraryKey:e,assetType:f.PW.RESPONSIVE_SET}),{enabled:r})[0]});function C(){let e=A(),r=i.useMemo(()=>e.data?(0,I.P)(e.data):null,[e.data]);return i.useMemo(()=>"loading"===e.status?(0,d.Xm)():r?(0,d.gB)(r):{status:"disabled",data:null,errors:null},[r,e.status])}function N(e){return"loaded"===A().status&&e===I.k}function L(){let e=A(),r=(0,o.oA)(e.data?.libraryKeyToFile?.file),n=r?.libraryKey??"",a=!!n,s=(0,u.IT)((0,E.iQA)({libraryKey:n}),{enabled:a})[0];return i.useMemo(()=>{let e=(0,o.oA)(s.data?.libraryKeyToFile?.file);if(!r||!e)return{};let i=e.libraryHierarchyPaths.flatMap(e=>e.components).map(e=>(0,y.Qp)(e,{type:"team",file:{key:I.k,teamId:null,name:r.name,libraryKey:n}})),a={};for(let e of i.filter(O)){let r=e.containing_frame?.pageId;r&&(a[r]=e)}return a},[n,s.data?.libraryKeyToFile,r])}function O(e){return"thumbnail"===e.name.toLocaleLowerCase()}},507662:(e,r,n)=>{n.d(r,{T:()=>P});var i=n(411855),a=n(188507),o=n(737947),s=n(320063),l=n(358145),c=n(662275),d=n(672517),u=n(819229),m=n(335682),p=n(594901),h=n(428467),_=n(556261),g=n(56099),f=n(707465),E=n(134200),y=n(239671),b=n(173454),v=n(237870),I=n(285278),T=n(894773),S=n(220116),w=n(269842),A=n(715762),C=n(157630),N=n(730598),L=n(711302);function O(e){let r=(0,a.d4)(e=>e.selectedView),n=(0,l.ZC)(r),o=(0,a.d4)(e=>e.modalShown?.type),s=(0,a.wA)(),d="fullscreen"!==r.view&&n?.view===r.view,u=!("fullscreen"===r.view&&n?.view==="fullscreen"&&r.fileKey===n.fileKey)&&!d;i.useEffect(()=>{n&&u&&o===e&&s(c.Ce())},[s,e,o,u,n])}let R=i.memo(function({initialTab:e,teamId:r,initialUpdatesModalScope:n,entrypoint:l,sessionId:c}){O(b.cX);let p=(0,a.d4)(e=>e.selectedView),h=(0,a.d4)(e=>(0,f.IE)(e)),E=(0,m.q5)(),v=(0,_.b_)({migrationGroup:g.L.GROUP_6,component:"LibraryPreferencesModal"}),I=new URLSearchParams(o.Ay.location.search).get("teamToMoveFileToOnNavigate"),T=(0,u.R)();(0,s.h)(()=>{T({updateSource:"library_modal_open"})});let w=(0,A.YM)();return i.createElement(d.fu,{name:"Library Preference Modal",properties:{fileKey:E?.key,fileTeamId:E?.teamId,selectedTeamId:"team"===p.view?p.teamId:null,orgId:v,inPublishDraftExp:!!I,entryPoint:l}},h?i.createElement(D,null):"fullscreen"===p.view&&p.editorType!==y.nT.Whiteboard?w?i.createElement(L.b,{entrypoint:l,initialTab:e,initialUpdatesModalScope:n,sessionId:c}):i.createElement(S.B,{entrypoint:l,initialTab:e,initialUpdatesModalScope:n}):"team"===p.view?i.createElement(k,{initialTab:e,teamId:p.teamId}):r?i.createElement(k,{initialTab:e,teamId:r}):void 0)}),P=(0,v.Ju)(R,b.cX,v.ZU.YES);function D(){let e=(0,A._K)();return i.createElement(w.s,{width:e,title:i.createElement(N.c,{availableTabs:[b.Wv.LIBRARIES],selectedTab:b.Wv.LIBRARIES})},i.createElement(C.Z,null,i.createElement(I.s,{showingDefaultSubscriptionsForUser:!0,showingDefaultSubscriptionsForTeamId:null,width:e})))}function k({initialTab:e,teamId:r}){let n=(0,a.wA)(),o=(0,a.d4)(e=>e.sharedFonts),s=(0,a.d4)(e=>(0,E.p)(e)),l=(0,a.d4)(e=>(0,h.canAdminOrg)(e.currentUserOrgId,e)),c=(0,p.FC)(),d=i.useMemo(()=>{let e=[b.Wv.LIBRARIES];return s&&e.push(b.Wv.FONTS),e},[s]),{selectedTab:u,setSelectedTab:m}=(0,A.SE)(d,e),_=(0,A._K)(s);return i.createElement(w.s,{width:_,title:i.createElement(N.c,{availableTabs:d,selectedTab:u,setSelectedTab:m})},i.createElement(C.Z,{showSharedFonts:s},u===b.Wv.LIBRARIES&&i.createElement(I.s,{showingDefaultSubscriptionsForTeamId:r,showingDefaultSubscriptionsForUser:!1,width:_}),u===b.Wv.FONTS&&i.createElement(T.y,{dispatch:n,teamId:r,width:_,resourceType:"team",useModalViewComponent:!0,canAdminOrg:l,permissionsState:c,sharedFonts:o})))}(0,v.Ju)(function({entrypoint:e}){O(b.EJ);let r=(0,a.wA)();return i.useEffect(()=>{T.y.loadSharedFonts(r)},[r]),i.createElement(R,{initialTab:b.Wv.FONTS,entrypoint:e})},b.EJ,v.ZU.YES)},398529:(e,r,n)=>{n.d(r,{RV:()=>E});var i=n(411855),a=n(188507),o=n(966712),s=n(493323),l=n(163023),c=n(939863),d=n(830445),u=n(318812),m=n(291829),p=n(538697),h=n(117567),_=n(618208);function g({variableSet:e,modeDropdownStyle:r,entity:n,defaultModeId:o,isLibraryFileEnabled:s,fileKeyOrHubFileId:l}){let d=(0,a.wA)(),h=(0,u.Um)(),_="auto_inherit_mode_string",g=e.modes?e.modes[0].name:"",E=i.useMemo(()=>({name:(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:g}),id:_}),[g]),y=o?e.modes?.find(e=>e.id===o):E,[b,v]=(0,i.useState)(y),I=i.useMemo(()=>b?.id===_?E:e.modes?.find(e=>e.id===b?.id),[e,b,E]),T=i.useCallback(r=>{v(r),r.id===_?m.j.deleteDefaultMode({fileKeyOrHubFileId:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key}):m.j.setDefaultMode({fileKeyOrHubFileId:l,entityType:n.entityType,entityId:n.entityId,variableSetKey:e.key,defaultModeId:r.id}).catch(e=>{v(b)})},[b,l,n.entityType,n.entityId,e.key]);return e.modes&&1!==e.modes.length&&n&&y?i.createElement(p.l6,{id:`subscription-dropdown-${e.id}`,property:I,dispatch:d,dropdownShown:h,onChange:T,formatter:f,dropdownWidth:150,className:r,disabled:!s,dataTestId:`mode-dropdown-${e.id}`},i.createElement(p.c$,{value:E},(0,c.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:g})),i.createElement(p.sK,null),e.modes?.map(e=>i.createElement(p.c$,{key:e.id,value:e},f.format(e)))):i.createElement("div",{className:r})}let f={format:e=>e.name};function E({forBestMatches:e,variableSets:r,shouldDisplayDefaultModeDropdown:n,fileKey:a,hubFileId:u,entity:p,isLibraryFileEnabled:f}){let[E,y]=(0,i.useState)({}),[b,v]=(0,i.useState)(!1),I=i.useMemo(()=>{let e=a||u;if(e)return(0,d.ee)(e,a?"fileKey":"hubFileId")},[a,u]);if(!r||0===r.length)return null;n&&=r.some(e=>e.modes&&e.modes.length>1);let T=(0,o.kc)().ds_workspace_team_default_modes&&!b&&n&&p&&I;return(T&&m.j.getDefaultModes({fileKeyOrHubFileId:I,entityType:p.entityType,entityId:p.entityId}).then(e=>{y(e.data.meta),v(!0)}).catch(()=>{v(!0)}),T)?i.createElement(s.qc,null):i.createElement("div",null,!e&&i.createElement("div",{className:h.wx},i.createElement("div",{className:h.Pf},(0,c.tx)("design_systems.libraries_modal.header_variable_collections")),(0,o.kc)().ds_workspace_team_default_modes&&n&&i.createElement("div",{className:h.Pf},(0,c.tx)("design_systems.libraries_modal.header_default_mode"))),i.createElement("div",{className:e?h.VN:h.iE},r.map(r=>i.createElement("div",{className:h.nk,key:r.id},e?i.createElement(i.Fragment,null,i.createElement(l.B,{className:h.oS,svg:_.A}),i.createElement("span",{className:h.UU},r.name),r.numVariableMatches&&i.createElement("span",{className:h.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variable_match",{numVariables:r.numVariableMatches}))):i.createElement("div",{className:h.kW},i.createElement("span",{className:h.UU},r.name),n&&p&&I&&(0,o.kc)().ds_workspace_team_default_modes&&i.createElement(g,{variableSet:r,modeDropdownStyle:h.nI,fileKeyOrHubFileId:I,entity:p,defaultModeId:E[r.key],isLibraryFileEnabled:f})||i.createElement("div",{className:h.nI}),i.createElement("span",{className:h.K0},(0,c.tx)("design_systems.libraries_modal.plural.num_variables",{numVariables:r.numVariables})))))))}},13678:(e,r,n)=>{n.d(r,{dD:()=>em});var i=n(411855),a=n(188507),o=n(966664),s=n(140686),l=n(256296),c=n(922827),d=n(358145),u=n(966712),m=n(418956),p=n(498750),h=n(915440),_=n(586459),g=n(563706),f=n(553716),E=n(799569),y=n(690260),b=n(607283),v=n(493323),I=n(32863),T=n(939863),S=n(738269),w=n(876401),A=n(662275),C=n(672517),N=n(289104),L=n(226055),O=n(974105),R=n(44892),P=n(535217),D=n(418943),k=n(112825),M=n(25108),F=n(384319),x=n(848661),U=n(869156),B=n(335682),V=n(416095),G=n(99506),H=n(279453),K=n(556261),W=n(56099),$=n(284321),Y=n(998612),z=n(173454),j=n(81182),q=n(237870),Z=n(158950),X=n(756159),J=n(453261),Q=n(474742),ee=n(129975),et=n(965200),er=n(963473),en=n(464331),ei=n(388284),ea=n(809455),eo=n(183825),es=n(818201),el=n(243999),ec=n(490776),ed=n(119536),eu=n(633940);let em=(0,q.Ju)(function(e){return i.createElement(C.fu,{name:"Publishing Modal",properties:{entryPoint:e.entrypoint,libraryModalSessionId:e.libraryModalSessionId}},i.createElement(et.fo,null,i.createElement(ep,{...e})))},"PublishingModal");function ep({timedOut:e,initiallyCheckedItemIDs:r,libraryModalSessionId:n}){let y=(0,L.GS)(),[b,C]=(0,m.fp)(X.pz),x=(0,B.q5)(),q=(0,a.d4)(e=>e.library),es=(0,a.d4)($.cM),ec=(0,a.d4)($.MH),em=(0,a.d4)($.dM),ep=(0,m.md)(el.t),e_=(0,U.nN)(),{modeLimit:ef,canShowCTA:eE,showCTA:ey}=(0,J.z)("publishing"),eb=(0,a.wA)(),ev=(0,a.d4)(e=>e.savedPublishDescription),eI=(0,a.d4)($.fA),eT=(0,K.yN)({migrationGroup:W.L.GROUP_1,component:"PublishingModalInner",attribute:"currentOrgId",legacy:(e,r)=>r?.id??void 0,migrated:e=>e?.key.type===G.OL.ORG?e.key.parentId??void 0:void 0}),eS=(0,a.d4)(e=>e.orgById),ew=(0,a.d4)(O.d1),[eA,eC]=i.useState(""),[eN,eL]=i.useState(ev||""),eO=(0,B.Cq)({useSinatraType:!0}),eR=(0,j.Y)(eO||null),[eP,eD]=i.useState(eR),ek=(0,u.kc)().wslp_read_publish_scope,[eM,eF]=i.useState(!1),ex=eR?G.pk.ORG:G.pk.TEAM,[eU,eB]=i.useState(ex),eV=ek?eU:eP?G.pk.ORG:G.pk.TEAM,eG=(0,u.kc)().wslp_workspace_publish_scope,eH=ew?.key,eK=(0,h.Rs)(H.Yh6,{fileKey:eH},{enabled:ek&&!!eH});i.useEffect(()=>{if("loaded"===eK.status){if(!eK.data.file?.lastPublishedAt){eF(!0);return}let e=eK.data.file?.libraryKeyToFile?.libraryPublishScope?.publishScopeType??G.pk.TEAM;eG||e!==G.pk.WORKSPACE||(e=G.pk.ORG),eB(e),eF(!0),e!==ex&&(0,f.x1)("designSystems publishing","Potential library publish scope mismatch (monitored by #feat-workspace-library-publishing)",{livegraphPublishScope:e,fileShareSettingPublishScope:ex})}},[ex,eK,eG]);let[eW,e$]=i.useState(null),eY=i.useContext(et.og),ez=i.useMemo(()=>(0,R.Jl)(ec),[ec]),ej=(0,et.UJ)(),eq=(0,et.Xm)();(0,U.SR)();let eZ=(0,m.md)((0,$.y6)(eq)),eX=(0,m.md)((0,$.x$)(eq)),eJ=(0,d.ZC)(eY);i.useEffect(()=>{eJ?.status===_.r.LOADING&&eY.status===_.r.SUCCESS&&(r||e0(new Set(eX)))},[eX,eY,r,eJ?.status]);let[eQ,e0]=i.useState(()=>new Set(r&&r.size>0?eX.filter(e=>r?.has(e)):eX)),[e1,e2]=i.useState(!1),[e5,e3]=i.useState(null);i.useEffect(()=>{let e=e=>{"Shift"===e.key&&e2(!0)},r=e=>{"Shift"===e.key&&e2(!1)};return document.addEventListener("keydown",e),document.addEventListener("keyup",r),()=>{document.removeEventListener("keydown",e),document.removeEventListener("keyup",r)}},[]);let e6=i.useCallback(()=>{q.publishProgress.state===z.Qx.ASSEMBLING_COMPONENTS&&eb(w.TS())},[eb,q.publishProgress.state]),e8=i.useCallback(()=>{e6(),C(z.o.LIBRARY),eb(A.Ce())},[eb,C,e6]);i.useEffect(()=>{q.publishProgress.state===z.Qx.UPLOADING&&e8()},[e8,q.publishProgress.state]);let e4=(0,d.ZC)(q),e9=(0,d.ZC)(eX);i.useEffect(()=>{if(e4&&e9&&e4!==q){if(e3(null),e9.every(e=>eQ.has(e))){e0(new Set(eX));return}e0(new Set(eX.filter(e=>eQ.has(e))))}},[eX,eQ,q,ez,ej,x,e9,e4]);let e7=i.useCallback(e=>{let r=[...eZ.libraryAssets[z.PW.RESPONSIVE_SET].modified.wellFormed,...eZ.libraryAssets[z.PW.CODE_COMPONENT].modified.wellFormed,...eZ.variableSets.modified.wellFormed,...eZ.styles.modified.wellFormed,...eZ.productComponents.modified.wellFormed].map(e=>e.node_id),n=r.indexOf(e);if(null===n)return;let i=new Set(eQ),a=!i.has(e);if(e1&&null!==e5){let e=Math.min(n,e5),o=Math.max(n,e5);for(let n=e;n<=o;n++)a?i.add(r[n]):i.delete(r[n])}else a?i.add(e):i.delete(e);e0(i),e3(n)},[eQ,e5,eZ,e1]),te=i.useCallback(()=>{eX.length===eQ.size?e0(new Set):e0(new Set(eX))},[eX,eQ.size]),tt=i.useCallback((e,r)=>{eY.status===_.r.SUCCESS&&eY.nodeIdToValidatedMoveInfo[e]&&(eY.nodeIdToValidatedMoveInfo[e].publishType=r)},[eY]),tr=(0,a.d4)(e=>(0,$.oB)(e,eq)),tn=(0,a.d4)(e=>(0,$.JI)(e,eq)),ti=(0,a.d4)(e=>(0,$.Dc)(e,eq)),ta=i.useCallback(()=>{let e=q.used__LIVEGRAPH.localNodeIdToDestinationKey;if(!Object.keys(q.movedLibraryItems.local).length&&!Object.keys(e).length)return;let r=tn.filter(e=>!!q.movedLibraryItems.local[e.node_id]&&e.status!==z.E8.DELETED&&eQ.has(e.node_id)).map(e=>e.node_id),n=new Set(r);for(let i of[...r,...tr.filter(e=>{let r=e.containing_frame?.containingStateGroup?.nodeId,i=r&&em[r]||null;return!(!q.movedLibraryItems.local[e.node_id]||e.status===z.E8.DELETED||i&&((0,V.zE)(i)||n.has(i.node_id)))&&eQ.has(r||e.node_id)}).map(e=>e.node_id),...ti.filter(r=>!!e[r.node_id]&&r.status!==z.E8.DELETED&&eQ.has(r.node_id)).map(e=>e.node_id)]){let e=c.glU.generatePublishableCopy(i);e&&eQ.has(i)&&(eQ.delete(i),eQ.add(e))}},[eQ,em,q.used__LIVEGRAPH.localNodeIdToDestinationKey,q.movedLibraryItems.local,tr,tn,ti]),to=(0,k.B)(),ts=(0,m.md)((0,$.Iy)(eq)),[tl,tc]=i.useState(!1),td=i.useCallback(e=>{let r;if(ew&&ts){for(let e of eQ){let r=e_[e];if((0,o.Vq)(r)&&r.modes.length>ef){eE(r.modes.length)?ey():(0,f.x1)("designSystems publishing","Blocking publishing of variable collection with too many modes, but upsell is not available",{collectionId:e});return}}if(eY.status===_.r.SUCCESS){let e=Object.keys(eY.nodeIdToValidatedMoveInfo).filter(e=>eQ.has(e)&&"MOVE"===eY.nodeIdToValidatedMoveInfo[e].publishType),n=[...Object.values(ec),...Object.values(em),...Object.values(es)].reduce((e,r)=>(eY.nodeIdToValidatedMoveInfo[r.node_id]&&r.old_key&&(e[r.node_id]=r.old_key),e),Object.create(null)),i=tr.filter(V.ad);r=(0,V.Cj)(e,n,i)}ta(),eb(w.ZS({savepointDescription:eN,itemsToPublish:eQ,libraryModalSessionId:n,moveInformation:r,hubFileId:e||void 0,firstDraftVariablesForTheme:to,publishScope:eV,localAssetsWithDenormalizedPublishInfo:ep.data??{},publishAsFirstDraftKit:tl}))}},[ew,ts,eY,ta,eb,eN,eQ,eV,e_,ep.data,ef,eE,ey,ec,em,es,tr,to,n,tl]),tu=i.useCallback(e=>{eL(e.target.value)},[]),tm=i.useCallback(e=>{eD(e),eb(S.oB())},[eb]),tp=i.useCallback(e=>{eB(e),eb(S.oB())},[eb]),th=!!ew?.starter_library_src_file_key,t_=i.useMemo(()=>{let e=0;return Object.values(ez).forEach(r=>{th?(0,V.lg)(r.status)&&e++:(0,V.Hb)(r.status)&&e++}),Object.values(em).forEach(r=>{th?(0,V.lg)(r.status)&&e++:(0,V.Hb)(r.status)&&e++}),e},[th,em,ez]),tg=(0,N.JT)(),tf=i.useMemo(()=>{let e=e=>Object.values(e).some(e=>e.status===z.E8.NEW);return!!(eI&&e(ez)||eI&&e(em)||e(es))},[eI,em,es,ez]),{localKits:tE}=(0,M.Ml)(),ty=(0,D.C)(tE[0]?.dsKitKey||null,[P.x$.WARNING]),tb=(0,a.d4)($.Mh),tv=(0,a.d4)($.Pd),{invalidExampleIds:tI,isPublishingInvalidExamples:tT}=(0,en.c)({modifiedComponents:eZ.productComponents.modified.wellFormed,modifiedStateGroups:eZ.stateGroups.modified.wellFormed,publishedHubFileComponents:tb,publishedHubFileStateGroups:tv,itemsToPublish:eQ,publishingMode:b}),tS=i.useMemo(()=>!!(0,u.kc)().first_draft_publish_ux&&(tE.length>1||"error"===(0,D.O)(ty))||!!(0,u.kc)().ds_pubplat&&"loaded"!==ep.status||tT,[tT,ty,tE,ep.status]),tw=i.useCallback(e=>{if(!ew)return;let r=g.Ay.mac?e.metaKey:e.ctrlKey;e.keyCode===p.Uz.ENTER&&r&&!tS&&(td(),e.preventDefault(),e.stopPropagation())},[ew,td,tS]);if(!ew)return null;if(eY.status===_.r.LOADING)return i.createElement(Q.aF,{size:480,title:b===z.o.HUBFILE?(0,T.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,T.tx)("design_systems.publishing_modal.modal_header"),titleClassName:eu.GK,className:eu.vn,onKeyDown:tw,onHide:e6},i.createElement(v.kt,{className:eu.S}));let tA=x?.team,tC=eq&&Object.keys(eq).some(e=>!!eQ.has(e)&&!es[e]&&"MOVE"===eq[e].publishType),tN=eZ.productComponents.modified.wellFormed.length,tL=eZ.styles.modified.wellFormed.length,tO=eZ.variableSets.modified.wellFormed.length,tR=(0,u.u4)("dse_editor_templates_v1",eZ.modules.modified.wellFormed.length,0),tP=(0,Y.O)(z.PW.RESPONSIVE_SET)?eZ.libraryAssets[z.PW.RESPONSIVE_SET].modified.wellFormed.length:0,tD=(0,Y.O)(z.PW.CODE_COMPONENT)?eZ.libraryAssets[z.PW.CODE_COMPONENT].modified.wellFormed.length:0;return i.createElement(Q.aF,{size:480,title:b===z.o.HUBFILE?(0,T.tx)("design_systems.publishing_modal.modal_header_community_library"):(0,T.tx)("design_systems.publishing_modal.modal_header"),titleClassName:eu.GK,className:eu.vn,onKeyDown:tw,onHide:e6,"data-testid":"publishing-modal"},i.createElement(E.s_,{dispatch:eb,onClose:()=>{C(z.o.LIBRARY)},customStyle:y?{top:8,right:12}:{top:6,right:6}}),i.createElement("div",{className:eu.Kl},i.createElement("div",{className:eW?eu.Ye:eu.dJ},i.createElement("div",{className:eu.YT},i.createElement(ee.l,null),y?i.createElement("div",{className:eu.PP},i.createElement(I.IW,{focusOnMount:!1,query:eA,clearSearch:()=>eC(""),onChange:eC,recordingKey:"publishingModalSearchBar",withUI3Icon:!0,smallFont:!0,hasTransparentBackground:!0})):i.createElement(I.Lp,{className:eu.vD,focusOnMount:!1,query:eA,clearSearch:()=>eC(""),onChange:eC,recordingKey:"publishingModalSearchBar"}),!eA&&i.createElement("div",{className:eu.iQ},i.createElement(Z.v,{className:eu.Bl,placeholder:(0,T.t)("design_systems.publishing_modal.description_placeholder"),value:eN,onChange:tu,dir:"auto"}))),i.createElement(eh,{itemsToPublish:eQ,onLibraryItemRowCheckboxToggle:e7,onTogglePublishAll:te,setItemsToPublish:e0,onChangeMoveOptionForItem:tt,assetQuery:eA,showVariableCollectionOverview:e$,invalidAssetIds:tI}),!eT&&!eI&&t_>0&&i.createElement(eg,{numComponentsToUpsell:t_,isStarterLibrary:th,team:tA}),tC&&i.createElement(ei.F,null),e&&i.createElement(eo.r,null),tT&&i.createElement(ea.K,null),(0,u.kc)().first_draft_publish_ux&&i.createElement("div",{className:eu.H_},i.createElement(s.S,{label:i.createElement(l.J,null,"Publish as First Draft kit"),checked:tl,onChange:e=>{tc(e)}}),tl&&i.createElement(F.o,null)),i.createElement(er.C,{publishedHubFile:tg,setAllowOrgAccess:tm,isLoadingPublishScope:!eM,publishScope:eU,setPublishScope:tp,hasItemsToPublish:0!==eQ.size,canPublishComponentsAndStateGroups:eI,org:eT?eS[eT]:null,publishProgress:q.publishProgress,numModifiedAssets:tO+tL+tN+tR+tP+tD,firstDraftValidationStatus:tl?(0,D.O)(ty):"not_applicable",hasNewLibraryItems:tf,closeModal:e8,editingFile:ew,publish:td,disablePublishButton:tS,workspace:eK.data?.file?.team?.workspace})),eW&&i.createElement("div",{className:eu.dJ},i.createElement(ed.Q,{variableCollection:eW.variableCollection,view:eW.view,drillUp:()=>e$(null)}))))}function eh(e){let[r,n]=i.useState(!1),o=()=>{n(!r)},[s,l]=i.useState(!1),c=()=>{l(!s)},[d,p]=i.useState(!1),h=()=>{p(!d)},_=(0,et.Xm)(),g=(0,et.UJ)(),f=(0,m.md)((0,$.y6)(_)),[E,v,I,S,w,A,C,N,L,O,R,P,D,k,M,F,U,B,G,H,K,W,j,q]=i.useMemo(()=>[f.libraryAssets[z.PW.RESPONSIVE_SET].modified.wellFormed,f.libraryAssets[z.PW.RESPONSIVE_SET].modified.erroneous,f.libraryAssets[z.PW.RESPONSIVE_SET].unmodified.published,f.libraryAssets[z.PW.RESPONSIVE_SET].unmodified.unpublished,f.libraryAssets[z.PW.CODE_COMPONENT].modified.wellFormed,f.libraryAssets[z.PW.CODE_COMPONENT].modified.erroneous,f.libraryAssets[z.PW.CODE_COMPONENT].unmodified.published,f.libraryAssets[z.PW.CODE_COMPONENT].unmodified.unpublished,f.variableSets.modified.wellFormed,f.variableSets.modified.erroneous,f.variableSets.unmodified.published,f.variableSets.unmodified.unpublished,f.variableSetsWithHiddenVariables.modified.wellFormed,f.modules.modified.wellFormed,f.modules.modified.erroneous,f.modules.unmodified.published,f.modules.unmodified.unpublished,f.styles.modified.wellFormed,f.styles.unmodified.published,f.styles.unmodified.unpublished,f.productComponents.modified.wellFormed,f.productComponents.modified.erroneous,f.productComponents.unmodified.published,f.productComponents.unmodified.unpublished].map(r=>e.assetQuery?r.filter(r=>r.name.toLocaleLowerCase().trim().includes(e.assetQuery.toLocaleLowerCase())):r),[f.libraryAssets,f.productComponents.modified.erroneous,f.productComponents.modified.wellFormed,f.productComponents.unmodified.published,f.productComponents.unmodified.unpublished,f.modules.modified.wellFormed,f.modules.modified.erroneous,f.modules.unmodified.published,f.modules.unmodified.unpublished,f.styles.modified.wellFormed,f.styles.unmodified.published,f.styles.unmodified.unpublished,f.variableSets.modified.wellFormed,f.variableSets.modified.erroneous,f.variableSets.unmodified.published,f.variableSets.unmodified.unpublished,f.variableSetsWithHiddenVariables.modified.wellFormed,e.assetQuery]),Z=i.useMemo(()=>new Set(B.concat(L).concat(K).concat((0,u.u4)("dse_editor_templates_v1",k,[])).concat((0,Y.O)(z.PW.RESPONSIVE_SET)?E:[]).concat((0,Y.O)(z.PW.CODE_COMPONENT)?w:[]).map(e=>e.node_id)),[E,w,L,K,B,k]),X=L.length>0||P.length>0||D.length>0,J=(0,a.d4)($.Wz),Q=(r,n,a,o)=>{for(let s of r){let r=_?.[s.node_id],l=!1;if(s.type===z.PW.STATE_GROUP){let e=!r||"FORCED_COPY"===r.publishType,n=(J[s.node_id]??[]).some(e=>g.has(e.node_id));l=e&&n}let c=i.createElement(es.v,{key:s.node_id,libraryItem:s,includeLeftAccessory:a,isChecked:e.itemsToPublish.has(s.node_id),onCheckBoxToggle:e.onLibraryItemRowCheckboxToggle,onChangeMoveOptionForItem:e.onChangeMoveOptionForItem,moveInfo:(0,V.Hb)(s.status)&&r||null,isUnmovableStateGroupWithMovableState:l,showVariableCollectionOverview:e.showVariableCollectionOverview,isVariableSetWithPrivateVariables:o,hasChangedVariables:X,isInvalid:e.invalidAssetIds.has(s.node_id)}),d=o?"-hiddenVariables":"";ee(c,`library-item-row-${s.node_id}${d}`,46,n)}},ee=(e,r,n,i)=>{let a=b.oz.getNextRenderedElementTop(i);i.push({parent:null,type:b.zq.ROW,top:a,element:e,key:r,height:n,sectionNameForTracking:void 0})},er=(()=>{let n=[],a=L.length+B.length+K.length+(0,u.u4)("dse_editor_templates_v1",k.length,0)+((0,Y.O)(z.PW.RESPONSIVE_SET)?E.length:0)+((0,Y.O)(z.PW.CODE_COMPONENT)?w.length:0),l=R.length+G.length+j.length+(0,u.u4)("dse_editor_templates_v1",F.length,0)+((0,Y.O)(z.PW.RESPONSIVE_SET)?I.length:0)+((0,Y.O)(z.PW.CODE_COMPONENT)?C.length:0),m=P.length+q.length+H.length+D.length+(0,u.u4)("dse_editor_templates_v1",U.length,0)+((0,Y.O)(z.PW.RESPONSIVE_SET)?S.length:0)+((0,Y.O)(z.PW.CODE_COMPONENT)?N.length:0),p=W.length+O.length+(0,u.u4)("dse_editor_templates_v1",M.length,0)+((0,Y.O)(z.PW.RESPONSIVE_SET)?v.length:0)+((0,Y.O)(z.PW.CODE_COMPONENT)?A.length:0);p&&(ee(i.createElement(ec.Zq,{header:(0,T.tx)("design_systems.publishing_modal.invalid_components_with_count",{countString:i.createElement(ec.y_,{count:p})}),caretToggle:{isExpanded:d},onClick:h}),"erroneous",32,n),d&&(Q(W,n,es.o.TARGET),(0,u.kc)().dse_editor_templates_v1&&Q(M,n),Q(O,n)));let _=e.assetQuery?[...e.itemsToPublish].filter(e=>Z.has(e)):[...e.itemsToPublish],g=e.assetQuery?[...e.itemsToPublish].filter(e=>!Z.has(e)):[],f=_.length;if(a){let r;if(r=f===a||f>0&&f<a&&x.oV,ee(i.createElement(ec.D3,{header:(0,T.tx)("design_systems.publishing_modal.changes_header_with_count",{countString:i.createElement(ec.y_,{count:f,total:a})}),checkboxValue:r,onClick:()=>{e.assetQuery?a===f?e.setItemsToPublish(new Set(g)):e.setItemsToPublish(new Set([...e.itemsToPublish,...Z])):e.onTogglePublishAll()}}),"changed:header",32,n),L.length>0&&ee(i.createElement("div",{className:eu.et},(0,T.tx)("design_systems.publishing_modal.variable_collections")),"variableSet:header",32,n),Q(L,n,es.o.CHECKBOX),(0,Y.O)(z.PW.RESPONSIVE_SET)&&(E.length>0&&ee(i.createElement("div",{className:eu.et},"Site blocks"),"responsiveSet:header",32,n),Q(E,n,es.o.CHECKBOX)),(0,Y.O)(z.PW.CODE_COMPONENT)&&(w.length>0&&ee(i.createElement("div",{className:eu.et},"Code components"),"codeComponent:header",32,n),Q(w,n,es.o.CHECKBOX)),(0,u.kc)().dse_templates_proto){let e=K.filter(V.Fl);e.length>0&&(ee(i.createElement("div",{className:eu.et},(0,T.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),Q(e,n,es.o.CHECKBOX))}(0,u.kc)().dse_editor_templates_v1&&k.length>0&&(ee(i.createElement("div",{className:eu.et},(0,T.tx)("design_systems.publishing_modal.templates")),"templates:header",32,n),Q(k,n,es.o.CHECKBOX)),B.length>0&&ee(i.createElement("div",{className:eu.et},(0,T.tx)("design_systems.publishing_modal.styles")),"styles:header",32,n),Q(B,n,es.o.CHECKBOX),K.length>0&&ee(i.createElement("div",{className:eu.et},(0,T.tx)("design_systems.publishing_modal.components")),"components:header",32,n),(0,u.kc)().dse_templates_proto?Q(K.filter(e=>!(0,V.Fl)(e)),n,es.o.CHECKBOX):Q(K,n,es.o.CHECKBOX)}return l&&(ee(i.createElement(ec.Zq,{header:(0,T.tx)("design_systems.publishing_modal.unchanged_header_with_count",{countString:i.createElement(ec.y_,{count:l})}),caretToggle:{isExpanded:r},onClick:o}),"unchanged:header",32,n),r&&(Q(R,n),Q(G,n),Q(j,n),(0,u.kc)().dse_editor_templates_v1&&Q(F,n),(0,Y.O)(z.PW.RESPONSIVE_SET)&&Q(I,n),(0,Y.O)(z.PW.CODE_COMPONENT)&&Q(C,n))),m&&(ee(i.createElement(ec.Zq,{header:(0,T.tx)("design_systems.publishing_modal.hidden_header_with_count",{countString:i.createElement(ec.y_,{count:m})}),caretToggle:{isExpanded:s},onClick:c}),"private:header",32,n),s&&(ee(i.createElement("div",{className:eu.m_},(0,T.tx)("design_systems.publishing_modal.these_wont_be_published")),"private:subheader",22,n),Q(P,n),Q(D,n,void 0,!0),Q(H,n),Q(q,n),(0,u.kc)().dse_editor_templates_v1&&Q(U,n),(0,Y.O)(z.PW.RESPONSIVE_SET)&&Q(S,n),(0,Y.O)(z.PW.CODE_COMPONENT)&&Q(N,n))),n})();return i.createElement(y.O,{scrollContent:er,isList:!0,recordingKey:"publishingModalLibraryList",getViewportHeight:e=>e-200,width:480,className:eu.jG,renderEmptyState:!er.length&&e.assetQuery?()=>i.createElement(e_,{assetQuery:e.assetQuery}):void 0})}function e_({assetQuery:e}){return i.createElement("div",{className:eu.VX},(0,T.tx)("design_systems.publishing_modal.empty_search_result",{assetQuery:e}))}function eg({numComponentsToUpsell:e,isStarterLibrary:r,team:n}){let a=n?i.createElement("a",{className:eu.nf,target:"_blank",rel:"noopener",href:`/files/upgrade-team/${n.id}`},(0,T.tx)("design_systems.publishing_modal.upgrade_team")):i.createElement("a",{className:eu.nf,target:"_blank",rel:"noopener",href:"/files/create-team"},(0,T.tx)("design_systems.publishing_modal.create_a_professional_team")),o=r?(0,T.tx)("design_systems.publishing_modal.starter_library_upsell",{numComponents:e}):(0,T.tx)("design_systems.publishing_modal.standard_upsell",{numComponents:e,teamUpsellLink:a});return i.createElement("div",{className:eu.UX,"data-testid":"libraryPublishModalUpsell"},o)}},611964:(e,r,n)=>{n.d(r,{EH:()=>c,RR:()=>d,cw:()=>l});var i=n(140593),a=n(939863),o=n(662275),s=n(173454);function l(e){switch(e){case s.E8.CHANGED:return(0,a.tx)("design_systems.publishing_modal.modified");case s.E8.CURRENT:return(0,a.tx)("design_systems.publishing_modal.no_changes");case s.E8.DELETED:return(0,a.tx)("design_systems.publishing_modal.removed");case s.E8.NEW:return(0,a.tx)("design_systems.publishing_modal.added");case s.E8.NOT_STAGED:return"";default:(0,i.xb)(e)}}function c(e,r){return o.to({type:{type:"PublishingModal"},data:{initiallyCheckedItemIDs:e,timedOut:r}})}var d=(e=>(e.ASSET_PANEL_LIBRARY_CONTEXT_MENU="asset_panel_library_context_menu",e.COMPONENT_PUBLISH_ERROR_NOTIFICATION="component_publish_error_notification",e.FILENAME_VIEW_DROPDOWN="filename_view_dropdown",e.FULLSCREEN_MOVE_COMPONENTS_PROMPT="fullscreen_move_components_prompt",e.FULLSCREEN_OTHER="fullscreen_other",e.LIBRARY_MODAL_OVERVIEW="library_modal_overview",e.LIBRARY_MODAL_FILE_VIEW="library_modal_file_view",e.LIBRARY_MODAL_UPSELL_UI3="library_modal_upsell_ui3",e.PROPERTIES_PANEL="properties_panel",e.PUBLISH_UPSELL_MODAL="publish_upsell_modal",e.UNPUBLISHED_PREFERRED_VALUES_WARNING="unpublished_preferred_values_warning",e.COOPER_PUBLISH_SECTION="cooper_publish_section",e.TEST="test",e))(d||{})},333370:(e,r,n)=>{n.d(r,{KU:()=>g,Md:()=>y,Nr:()=>E,Pc:()=>p,VB:()=>b,dm:()=>_,l0:()=>m,lM:()=>d,wM:()=>u});var i=n(140593),a=n(922827),o=n(776250),s=n(378905),l=n(237929),c=n(173454);function d(e,r){let n={name:"",type:"STYLE_FOLDER",level:0,styles:[],subfolders:[],styleTypeSection:r};return e.forEach(e=>{let i=n,a=(0,l.ke)(e.name);a.pop(),a.forEach(e=>{let n=i.name?i.name+"/"+e:e,a=i.subfolders.find(e=>e.name===n);if(!a){let e={name:n,type:"STYLE_FOLDER",level:i.level+1,styles:[],subfolders:[],styleTypeSection:r};i.subfolders.push(e),a=e}i=a}),i.styles.push(e)}),n}function u(e){if(!e.length)return[];let r=d(e,e[0].style_type),n=[],i=e=>{e.styles.length>0&&n.push(e.name),e.subfolders.forEach(i)};return i(r),n}function m(e){let r=[...e.subfolders].reverse(),n=[...e.styles];for(;r.length>0;){let e=r.pop();e&&(n.push(e),n.push(...e.styles),r.push(...[...e.subfolders].reverse()))}return n}function p(e){return e.split("/").filter(e=>e).map(e=>e.trim()).join("/")}function h(e){return"STYLE_FOLDER"===e.type?e.name:(0,l.In)(e.name)}function _(e){return m(e).filter(e=>e.type===c.PW.STYLE)}function g(e){return m(e).filter(e=>"STYLE_FOLDER"===e.type)}function f(e){return e.type===c.PW.STYLE?(0,l.ke)(e.name).length:e.level}function E(e,r){(0,s.TK)(e,r)&&(a.glU.deleteNode(e.node_id),(0,o.sx)("Style Deleted",{styleType:e.style_type,from:"styleListContextMenu"}))}function y(e,r,n,i){if(!e&&!n||!r)return!1;let a=!i&&""!==i||"STYLE_FOLDER"===r.type&&n===r&&e?.type===c.PW.STYLE&&f(e)>f(n)&&i!==(0,l.In)(r.name);return!(e===r||n===r&&(r.type===c.PW.STYLE||!a)||"STYLE_FOLDER"===r.type&&(e?.type===c.PW.STYLE&&n?.type===c.PW.STYLE||e?.type==="STYLE_FOLDER"&&n?.type===c.PW.STYLE||e&&(h(e)+"/").startsWith(r.name+"/")||n&&(h(n)+"/").startsWith(r.name+"/")&&!a))}function b(e,r,n,o,s,u,p){if(e.forEach(e=>{(function(e,r){let n=e.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id),i=[];r.forEach(e=>{n.indexOf(e.node_id)>-1&&i.push(e)});let a=e[0],o=m(d(i,a.type===c.PW.STYLE?a.style_type:a.styleTypeSection)).filter(e=>e.type===c.PW.STYLE);for(let e=0;e<n.length;e++)if(n[e]!==o[e].node_id)return!0;return!1})(s=function(e,r){let n=new Set,i=new Set;for(let r of e)(r.type===c.PW.STYLE?[r]:(function e(r){let n=[];return r.styles.forEach(e=>{n.push(e)}),r.subfolders.forEach(r=>{n.push(r),n.push(...e(r))}),n})(r).concat([r])).forEach(e=>e.type===c.PW.STYLE?i.add(e.node_id):n.add(e.name));return r.filter(e=>"STYLE_FOLDER"===e.type?!n.has(e.name):!i.has(e.node_id))}([e],s),u)&&(u=v(e,s,u))}),!s)return;let h=new Set(e.map(e=>"STYLE_FOLDER"===e.type||p?function(e,r,n,a){if(!e)return a.some(e=>e.type===c.PW.STYLE&&""===(0,l.In)(e.name))?null:-1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&r.type===c.PW.STYLE||"STYLE_FOLDER"===e.type&&r.type===c.PW.STYLE)return null;if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type&&f(e)===f(r)){let n=o.indexOf(e.node_id),i=function(e,r){let n=_(e),i=new Set(r.filter(e=>e.type===c.PW.STYLE).map(e=>e.node_id)),a=n[0];return n.forEach(e=>{e.sort_position&&a.sort_position&&e.sort_position<a.sort_position&&i.has(e.node_id)&&(a=e)}),a}(r,a),s=o.indexOf(i.node_id);return n<s?n:s-1}{let s=a.indexOf(r);if(-1!==s){let e=a.slice(s,a.length).find(e=>e.type===c.PW.STYLE);if(!e)return n.length-1;let r=o.indexOf(e.node_id);return(0,i.KF)(-1!==r,"style to insert before does not exist in the stored list"),r-1}{let r=a.indexOf(e),s=a.slice(r+1).reverse().find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,i.KF)(-1!==l,"style to insert after does not exist in the stored list"),l}}}(r,n,u,s):function(e,r,n,a){if(!e)return -1;if(!r)return n.length-1;let o=n.map(e=>e.node_id);if(e.type===c.PW.STYLE&&"STYLE_FOLDER"===r.type)return o.indexOf(e.node_id);{let e=a.indexOf(r),s=a.slice(e,a.length).find(e=>e.type===c.PW.STYLE);if(!s)return n.length-1;let l=o.indexOf(s.node_id);return(0,i.KF)(-1!==l,"style to insert before does not exist in the stored list"),l-1}}(r,n,u,s)));if(h.size>1||h.has(null))return;let g=h.values().next().value,E=u[g],y=u[g+1],b=new Map,I=E;for(let r of e){let e=r=>{r.type===c.PW.STYLE?(a.glU.insertStyleBetween(r.node_id,I?.node_id||"",y?.node_id||""),I=r):(r.styles.forEach(r=>{e(r)}),r.subfolders.forEach(r=>{e(r)}))};e(r);let n=""===o?[]:o.split("/"),i=[...n,(0,l.kH)(r.name)];if(i.join("/")!==r.name){let e=(r,n)=>{if(r.type===c.PW.STYLE){let e=[...n,(0,l.kH)(r.name)].join("/");b.set(r.node_id,e),a.glU.renameNode(r.node_id,e)}else b.set(r.name,n.join("/")),r.styles.forEach(r=>{e(r,n)}),r.subfolders.forEach(r=>{let i=[...n,(0,l.kH)(r.name)];e(r,i)})};e(r,"STYLE_FOLDER"===r.type?i:n)}else b.set("STYLE_FOLDER"===r.type?r.name:r.node_id,r.name)}return b}let v=(e,r,n)=>{let i=(0,l.ke)(e.name);e.type===c.PW.STYLE&&i.pop();let o=r.filter(e=>e.type===c.PW.STYLE),s=[];for(;i.length;){let e=i.join("/");if(0===(s=o.filter(r=>(0,l.In)(r.name).startsWith(e))).length)i.pop();else break}if(s.length){let r,i=s[0];s.forEach(e=>{null!=e.sort_position&&null!=i.sort_position&&e.sort_position<i.sort_position&&(i=e)}),r=e.type===c.PW.STYLE?e:_(e)[0];let o=n.indexOf(r),l=n[o-1],d=n[o+1];a.glU.insertStyleBetween(i.node_id,l?.node_id||"",d?.node_id||"");let u=[...n];return u.splice(u.indexOf(i),1),u.splice(u.indexOf(l)+1,0,i),u}return n}},142232:(e,r,n)=>{n.d(r,{Mz:()=>N,RL:()=>O,TM:()=>P,a7:()=>L,se:()=>R});var i=n(411855),a=n(188507),o=n(268853),s=n(177131),l=n(922827),c=n(776250),d=n(939683);n(320063),n(358145);var u=n(418956),m=n(395900),p=n(776621),h=n(553716),_=n(632430),g=n(479984),f=n(662275),E=n(493862),y=n(869156),b=n(844053),v=n(335682);n(396462),n(860178);var I=n(940596),T=n(416095),S=n(57392),w=n(715762),A=n(84819);function C(){(0,p.$D)(o.e.SCENEGRAPH_AND_SYNC,Error("Query for library consumers aborted during reconnect"))}async function N(e){let r=(0,E.Ak)(),n=(0,E.Ki)(r),{componentKeys:i,localIds:a}=e.reduce((e,r)=>(r.component_key&&e.componentKeys.push(r.component_key),e.componentKeys.push(...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{componentKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(i,[],a,r);try{await n}catch(e){C()}}async function L(e){let r=(0,E.Ak)(),n=(0,E.Ki)(r),{componentKeys:i,stateGroupKeys:a,localIds:o}=e.reduce((e,r)=>{for(let[n,i]of(e.stateGroupKeys.push(r.key),Object.entries(r.newStateKeyToOutdatedItems)))e.componentKeys.push(n,...i.oldSubscribedKeysToUpdate),e.localIds.push(...i.localIdsToUpdate);return e},{componentKeys:[],stateGroupKeys:[],localIds:[]});l.BXd.downloadAllSubscribedInstancesForUpdate(i,a,o,r);try{await n}catch(e){C()}}async function O(e){let r=(0,E.Ak)(),n=(0,E.Ki)(r),{styleKeys:i,localIds:a}=e.reduce((e,r)=>(e.styleKeys.push(r.key,...r.oldSubscribedKeysToUpdate),e.localIds.push(...r.localIdsToUpdate),e),{styleKeys:[],localIds:[]});l.BXd.downloadAllSubscribedStyleConsumersForUpdate(i,a,r);try{await n}catch(e){C()}}function R(e,r=T.aD.ALL,n){let o=(0,a.wA)(),p=(0,S.bA)(r),I=(0,u.md)(v.yV),{scopedComponentUpdates:P,scopedStateGroupUpdates:D,scopedStyleUpdates:k,scopedVariableSetUpdates:M}=(0,u.md)(p),F=(0,a.d4)(b.c),x=F.file_key,U=I?.parentOrgId?.toString(),B=F.file_team_id?.toString(),V=F.productType,{sessionId:G}=(0,A.sz)()??{},H=(0,y.wM)(M.map(e=>e.key)),K=i.useCallback((e,n)=>{if(Object.values(w.AX).includes(e)){let r=e===w.AX.REVIEW_INSTANCE_UPDATES_MODAL_UPDATE_INSTANCE||e===w.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE;return`Instance Actions Menu > ${e} > ${r?"Update instance":"Update all"}`}return Object.values(w.r6).includes(e)?`${e} > Updates Modal > ${r} > ${n?"Update all":"Update"}`:""},[r]),W=i.useCallback(async(r,n)=>{let i=l.BXd.getTimestampForLibraryUpdateStart();(0,E.Ff)()&&await N(r),await o(_.rX({components:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:i}))},[o,e]),$=i.useCallback(async(r,n)=>{let i=l.BXd.getTimestampForLibraryUpdateStart();(0,E.Ff)()&&await L(r),await o(_.As({stateGroups:r,usedItemsByKey:e,instanceIdsToUpdate:n??[],updateStartTime:i}))},[o,e]),Y=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();(0,E.Ff)()&&await O(e),await o(_.t5({styles:e,updateStartTime:r}))},[o]),z=i.useCallback(async e=>{let r=l.BXd.getTimestampForLibraryUpdateStart();if((0,E.Ff)()){let r=(0,E.Ak)(),n=(0,E.Ki)(r);l.BXd.downloadAllSubscribedVariableSetConsumersForUpdate(e.map(e=>e.key),r);try{await n}catch(e){C()}for(let r of e){let e=[];if(r.libraryVariableIdsForUpdate){for(let[n,i]of l.CWU.getUsedSubscribedVariablesInSetByVariableKey(r.key)){let r=H[(0,s.ey)(n)];r&&(i.size>0||!i.has(r.version))&&e.push(`VariableID:${n}/${r.version}`)}r.libraryVariableIdsForUpdate=e}else(0,h.x1)("variables","Expected variableSet to be an UpdateRootVariableSet")}}await o(_._K({variableSets:e,updateStartTime:r}))},[o,H]),j=i.useCallback((e,r)=>{W([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,components:[e.component_key].toString(),entrypoint:K(n,!1)})},[n,x,U,B,K,V,W,G]),q=i.useCallback((e,r)=>{$([e],r),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,stateGroups:[e.key].toString(),entrypoint:K(n,!1)})},[n,x,U,B,K,V,$,G]),Z=i.useCallback(e=>{Y([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,styles:[e.key].toString(),entrypoint:K(n,!1)})},[n,x,U,B,K,V,Y,G]),X=i.useCallback(e=>{z([e]),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,libraryModalSessionId:G,productType:V,variableSets:[e.key].toString(),entrypoint:K(n,!1)})},[n,x,U,B,K,V,z,G]),J=(0,d.U)();return{updateComponent:j,updateStateGroup:q,updateStyle:Z,updateVariableSet:X,updateAll:i.useCallback(async()=>{J("library.update_all.attempt",{},{forwardToDatadog:!0});let e=new m.jk("updateAll",{});e.start();try{let r=P.length+D.length+k.length+M.length;o(g.ni({total:r})),o(f.Ce()),c.az.trackDefinedEvent("design_systems_analytics.ds_asset_updated",{fileKey:x,fileParentOrgId:U,fileTeamId:B,productType:V,libraryModalSessionId:G,components:P.map(e=>e.component_key).toString(),stateGroups:D.map(e=>e.key).toString(),styles:k.map(e=>e.key).toString(),variableSets:M.map(e=>e.key).toString(),entrypoint:K(n,!0)}),await W(P,void 0),await $(D,void 0),await Y(k),await z(M),o(g.kX());let i=e.stop();J("library.update_all.success",{elapsedMs:i},{forwardToDatadog:!0})}catch(r){throw o(g.V2()),J("library.update_all.failure",{elapsedMs:e.stop()},{forwardToDatadog:!0}),r}},[W,P,$,D,Y,k,z,M,x,U,B,V,K,n,o,J,G])}}function P(e,r){let{updateComponent:n,updateStateGroup:o}=R(e,void 0,r),s=(0,a.wA)(),c=i.useCallback((e,r)=>{let n=l.glU.getOutdatedStyleConsumers(r);s(_.Qn({styleUpdateInfo:e,oldStyleGUID:r,consumerGUIDsToUpdate:n}))},[s]);return{updateIndividualInstances:i.useCallback((e,r)=>{for(let r of Object.values(e))n(r.updateAsset,r.instanceIdsToUpdate);for(let e of Object.values(r))o(e.updateAsset,e.instanceIdsToUpdate)},[n,o]),updateAllConsumersOfStyleVersion:c}}(0,I.rt)(!1)},18339:(e,r,n)=>{n.d(r,{$3:()=>F});var i=n(411855),a=n(188507),o=n(966712),s=n(915440),l=n(799569),c=n(946689),d=n(493323),u=n(939863),m=n(411045),p=n(342103),h=n(662275),_=n(101505),g=n(672517),f=n(420576),E=n(396226),y=n(875847),b=n(335682),v=n(594901),I=n(611978),T=n(99506),S=n(279453),w=n(243987),A=n(428467),C=n(206193),N=n(300874),L=n(851363),O=n(237870),R=n(611964),P=n(474742),D=n(449731),k=n(13678),M=n(429581);let F=(0,O.Ju)(function(e){let r=(0,b.q5)(),{team:n,afterFileMove:s}=e,l=(0,a.wA)(),c=(0,v.FC)(),d=(0,I._6)(),u=()=>{l(h.to({type:k.dD,data:{entrypoint:R.RR.PUBLISH_UPSELL_MODAL}}))},m=!!(0,o.kc)().ps_benchmark,p=m&&(0,w.w5)(n);return r?n&&(0,A.canEditTeam)(n.id,c)&&!p?i.createElement(D.bP,{team:n,resource:N.Bi.TEAM_LIBRARY,action:L.pE.PUBLISH_COMPONENTS,editorType:T._Y.DESIGN,onStarterPlanCtaClick:u,currentPlan:E.F.Plan.STARTER,upsellPlan:E.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:r.key,nodeId:"fullscreen"===d.view&&d.nodeId||""},upsellSource:C.b.LIBRARY_UPSELL_BADGE}):i.createElement(x,{team:n,afterFileMove:s,isPlanSpacesEnabled:m,onStylesClick:u}):i.createElement(i.Fragment,null)},"publish-components-upsell");function x(e){let r=(0,m.RR)(),n=(0,a.d4)(e=>e.currentUserOrgId),{isPlanSpacesEnabled:o,onStylesClick:l}=e,c=(0,s.Rs)(S.x8f,{}),u=(0,b.q5)(),p=o&&(0,w.w5)(e.team),h=i.useMemo(()=>c.transform(e=>e.currentUser.teamEditRoles.some(e=>{let n=e.team,i=n.currentPlanUser,a=r?i?.seatTypeLicenseTypes?.includes(T.G_.DESIGN):i?.designPaidStatus!==T.dQ.RESTRICTED;return n&&[T.Ag.PRO,T.Ag.STUDENT].includes(n.plan.tier)&&!n.deletedAt&&a})).unwrapOr(!1),[c,r]),_=!!n,g=o&&u&&(0,y.jd)(u.project),f=(0,I._6)();if(!u)return i.createElement(i.Fragment,null);if("loaded"!==c.status)return i.createElement(P.aF,{size:"small",height:176},i.createElement(d.qc,null));if(h||_||g)return i.createElement(U,{isFileInTeamWithProFeatures:p,isFileInOrg:_,team:e.team,afterFileMove:e.afterFileMove,onStylesClick:l});let v="fullscreen"===f.view?f.nodeId??"":void 0;return void 0!==v?i.createElement(D.bP,{team:e.team,resource:N.Bi.TEAM_LIBRARY,action:L.pE.PUBLISH_COMPONENTS,editorType:T._Y.DESIGN,onStarterPlanCtaClick:l,currentPlan:E.F.Plan.STARTER,upsellPlan:E.F.Plan.PRO,onBillingCompleteRedirectInfo:{fileKey:u.key,nodeId:v},upsellSource:C.b.LIBRARY_UPSELL_BADGE}):i.createElement(i.Fragment,null)}function U(e){let r=(0,a.wA)(),n=(0,b.q5)(),o=(0,a.d4)(e=>n?(0,f.up)(n,e.repos):null);if(!n)return i.createElement(i.Fragment,null);let s=(0,u.tx)("upsell.move_file_publish.move_file_to_team_to_publish"),d=(0,u.tx)("upsell.move_file_publish.move_file_to_pro_team_to_publish"),m=(0,u.tx)("upsell.move_file_publish.move_file_to_project_to_publish"),E=(0,u.t)("upsell.move_file_publish.move_to_team_to_publish_library_assets"),y=(0,u.t)("upsell.move_file_publish.move_to_project_to_publish_library_assets"),v=d;e.isFileInOrg?v=s:e.isFileInTeamWithProFeatures&&(v=m);let I=e.isFileInTeamWithProFeatures?(0,u.tx)("upsell.move_file_publish.move_to_project"):(0,u.tx)("upsell.move_file_publish.move_to_team");return i.createElement(g.fu,{name:"MoveFilePublishUpsell"},i.createElement(P.aF,{title:e.isFileInTeamWithProFeatures?y:E,size:"small","data-testid":"move-file-publish-upsell"},i.createElement(l.s_,{...e,dispatch:r}),v,i.createElement("div",{className:M.OZ},i.createElement("div",{className:M.ac},i.createElement(c.tM,{onClick:()=>{r(h.Ce())},trackingProperties:{trackingDescriptor:_.c.CANCEL}},(0,u.tx)("upsell.shared.cancel")),i.createElement(c.rb,{href:"#",className:M.pL,onClick:()=>{let{afterFileMove:i}=e;(0,p.hd)({key:n.key,name:n.name,folder_id:n.folderId,team_id:n.teamId,editor_type:n.editorType,parent_org_id:n.parentOrgId},o,r,{handlesVisualBell:!1,callback:i},{isPublishing:!0})}},I)))))}},662163:(e,r,n)=>{n.d(r,{O2:()=>c,Rs:()=>d,dm:()=>l,xL:()=>s});var i=n(966712),a=n(716034),o=n(588666);let s=(0,a.eU)([]);(0,a.eU)(e=>e(s).map(e=>(0,o.$)(e)));let l=(0,a.eU)((0,i.Ay)().mvp_va_icon_ids??[]),c=(0,a.eU)((0,i.Ay)().mvp_va_illustration_ids??[]),d=(0,a.eU)((0,i.Ay)().mvp_va_overrides??void 0)},370502:(e,r,n)=>{n(776250),n(966712),n(723239),n(335682),n(860178)},372291:(e,r,n)=>{n.d(r,{RX:()=>v,Lm:()=>b});var i=n(411855),a=n(922827),o=n(772841),s=n(44948),l=n(966712),c=n(418956),d=n(391388);n(553716),n(335682);var u=n(623746),m=n(514816),p=n(561546),h=n(716034),_=n(684107),g=n(437304),f=n(279453);(0,c.Iz)(e=>(0,_.x8)({fileKey:e}));let E=(0,c.Iz)(e=>(0,h.eU)(r=>{let n={};for(let i of e)n[i]=r(f.u6n.Query({fileKey:i}));return n}),p.lu);(0,c.Iz)(e=>(0,h.eU)(r=>{let n={};for(let i of e)n[i]=r(f.zkh.Query({libraryKey:i}));return n}),g._f);let y="all_sources";function b(){let e=(0,m.je)();return function(e,r){let n=(0,i.useMemo)(()=>E(e),[e]),a=(0,c.md)(n);return(0,s.wm)(()=>{let e=d.Qw.all(Object.values(a));return"loaded"!==e.status?e.transform(()=>({})):d.Qw.loaded(Object.fromEntries(Object.entries(a).map(([e,n])=>[e,function(e,r=y){var n,i;if(e?.status!=="loaded")return[];let a=e.data.file;if(a?.status!==o.tT.Loaded)return[];let s=a.data;return s?.modules?.status!==o.tT.Loaded?[]:(n=s.modules.data.map(e=>(0,u.J4)(e,{type:"team",file:s})),i=r,n.filter(e=>(i===y||e.moduleSource===i)&&v(e)))}(n,r)])))},[a,r])}((0,s.wm)(()=>e.data?.map(e=>e.fileKey)??[],[e.data]),a.QjO.EDITOR_TEMPLATE)}function v(e){if(!(0,l.kc)().dse_module_publish)return!1;switch(e.moduleSource){case a.QjO.EDITOR_TEMPLATE:return!!(0,l.kc)().dse_editor_templates_v1;case a.QjO.SLIDES_TEMPLATE:return!0;case a.QjO.SITES_TEMPLATE:return!!(0,l.kc)().sites;case a.QjO.LITE_TEMPLATE:return!!(0,l.kc)().cooper}}},60088:(e,r,n)=>{n.d(r,{B:()=>u});var i=n(411855),a=n(109388),o=n(188507),s=n(743282),l=n(738269),c=n(298543),d=n(728587);function u(e){let r=(0,o.wA)(),n=i.useMemo(()=>e||(0,s.g)(),[e]),u=(0,o.d4)(e=>e.dropdownShown?.type===n),m=i.useMemo(()=>document.createElement("div"),[]);i.useEffect(()=>(document.body.appendChild(m),()=>{document.body.removeChild(m)}),[m]);let p=i.useRef(null),h=a.findDOMNode(p.current),_=h?.getBoundingClientRect()||null,g=e=>{e.callback&&e.callback("",null,r)};return{toggleDropdown:()=>{u?r(l.oB()):r(l.j7({type:n}))},dropdownTargetRef:p,Dropdown:function(e){let n=(0,c.UV)(e);return i.createElement(i.Fragment,null,u&&_&&a.createPortal(i.createElement(d.j,{parentRect:_,dispatch:r,onSelectItem:g,...e,...n}),m))},isDropdownShown:u}}},319008:(e,r,n)=>{n.d(r,{Nz:()=>et});var i=n(411855),a=n(188507),o=n(140593),s=n(243742),l=n(922827),c=n(629019),d=n.n(c),u=n(323434),m=n(134288),p=n(776250),h=n(344780),_=n(358145),g=n(966712),f=n(418956),E=n(563706),y=n(99380),b=n(438741),v=n(489604),I=n(554322),T=n(572206),S=n(153808),w=n(939863),A=n(463304),C=n(457630),N=n(29680),L=n(335682),O=n(754209),R=n(78933),P=n(611978),D=n(247014),k=n(951840),M=n(407844);n(666258),n(168289),n(396021),n(270296);var F=n(746806),x=n(857063),U=n(214090),B=n(712053),V=n(538975),G=n(371536),H=n(78422),K=(e=>(e[e.Default=0]="Default",e[e.Mobile=1]="Mobile",e[e.Prototype=2]="Prototype",e[e.Slide=3]="Slide",e))(K||{});let W=(e,r)=>{let n=(0,C.ni)(),a=(0,I.Av)(),l=(0,M._)(),c=(0,N.p8)("showUi"),d=(0,P._6)(),u="prototype"===d.view&&"slides"===d.file.editor_type,m=function({isUI3:e,prototypeHeaderHidden:r,showUi:n,style:i,toolbarHeight:a,editorBannerHeight:s}){let l=0;if(e)l=0;else switch(i){case 3:case 0:case 1:l=n?a:0;break;case 2:l=r?0:a;break;default:(0,o.xb)(i)}return 0!==s&&(l+=s),l}({isUI3:"ui3"===(0,s.DP)().version&&!u,prototypeHeaderHidden:r,showUi:c,style:e,toolbarHeight:a,editorBannerHeight:l});return i.useMemo(()=>({left:n.x,top:m,width:n.width}),[n,m])},$=(e,r)=>{let n;let a=function(e){let r;let n=(0,C.ni)(),a=(0,M._)(),o=n.y+a;switch(e){case 1:r=4;break;case 2:r=o;break;case 3:r=0;break;case 0:r=10}return i.useMemo(()=>({left:n.x,top:o,width:n.width-(0===e?10:0),height:n.height-a-r}),[n,e,o,r,a])}(r),o=0;switch(r){case 0:n={borderWidth:5},o=5;break;case 1:n={borderTopWidth:4},o=4;break;case 3:n={borderWidth:5,borderRadius:"0.8rem",boxSizing:"border-box"},o=5;break;case 2:n={}}return i.useMemo(()=>({style:{...a,...n,"--multiplayerBorderColor":e,borderStyle:"solid","--multiplayerBorderWidth":`${o}px`},borderInfo:{width:o,color:e}}),[e,a,n,o])};function Y(e){let{children:r,prototypeHeaderHidden:n}=e,a=(0,P.z3)(),o=0;"prototype"===a?o=2:E.Xb&&(o=1);let s=W(o,n||!1),l=2===o?H.Y$:void 0,c=2===o&&n?H.Fd:void 0;return i.createElement("div",{className:d()(H.GE,l,c),style:s,"data-testid":"multiplayer-bell-container"},r)}function z(){let{style:e,borderInfo:r}=i.useContext(B.h);return e={...e,borderColor:r.color},i.createElement("div",{"data-testid":"viewport-frame",className:d()(H.KM),style:e})}function j(){let{style:e,borderInfo:r}=i.useContext(B.h);return e={...e,color:"brand"===r.color?"var(--color-bg-brand)":r.color,"--borderColorTransitionDurationSeconds":`${G.Bn}s`},i.createElement("div",{className:H.KM,style:e})}function q(e){let{children:r,colorOverride:n,overlayStatus:a}=e,o=(0,O.$0)(),s=(0,O.dR)(),l=(0,O.Ww)(),c=(0,P._6)(),d=0;"prototype"===c.view?d=c.isPresenterView?3:2:E.Xb&&(d=1);let u=$((()=>{if(n)return n;if(!a)return s&&l?.sessionID===s?.sessionID?l?.color??"transparent":o?.color??"transparent";{let{self:e,others:r}=a;return"none"!==e?"recording"===e?"var(--ramp-red-600)":"brand":"following"===r&&"none"===e?o?.color??"transparent":"transparent"}})(),d);return i.createElement(B.h.Provider,{value:u},r)}var Z=(e=>(e.PRESENTING="presenting",e.PROMPT_TO_ACCEPT_NOMINATION="prompt_to_accept_nomination",e.SHOWING_EXPLAINER="showing_explainer",e.PREPARING_TO_RECORD="preparing_to_record",e.RECORDING="recording",e.NONE="none",e))(Z||{}),X=(e=>(e.PENDING_AUTO_FOLLOW="pending_auto_follow",e.FOLLOWING="following",e.PROMPT_TO_REJOIN="prompt_to_rejoin",e.NONE="none",e))(X||{});function J(){return"prototype"!==(0,P.z3)()}function Q(e,r,n,a){let o=(0,_.ZC)(e),s=(0,_.ZC)(r),l=i.useRef(performance.now());return i.useEffect(()=>{if("presenting"===e){let e=h.sn.tryStop("start_spotlight");e&&((0,p.sx)("start_spotlight",{elapsedMs:e},{forwardToDatadog:!0}),(0,g.kc)().workspace_activity_write&&n&&n.team&&n.team.workspaceId&&k.i.recordActivity({activityUnitType:D.qj.FILE_COLLABORATION,fileKey:n.key,collaborationType:D.Uz.SPOTLIGHT_STARTED,numPeopleInFile:a.current}))}else if("pending_auto_follow"===r){let e=h.sn.tryStop("join_spotlight");e&&(0,p.sx)("join_spotlight",{elapsedMs:e},{forwardToDatadog:!0})}else if("following"===r){let e=h.sn.tryStop("start_following");e&&(0,p.sx)("start_following",{elapsedMs:e},{forwardToDatadog:!0})}},[e,r,n,a]),(e!==o||r!==s)&&(l.current=performance.now()),{statusChangedAt:l.current}}function ee(e){let{multiplayer:r,prototypeHeaderHidden:n}=e,a=(0,O.Ww)(),s=(0,O.dR)(),c=(0,O.$0)(),d=(0,O.y)(),p=(0,L.q5)(),h=(0,R.T)(),_=(0,b.y7)(),g=(0,b.oJ)(),E=(0,b.$)(),I=i.useContext(y.q5),[C,N]=i.useState(!1);i.useEffect(()=>{N(!1)},[s?.sessionID]),i.useEffect(()=>{c?.sessionID===s?.sessionID&&N(!1)},[c?.sessionID,s?.sessionID]);let{isAutoFollowPending:D,cancelAutoFollowCallback:k,completeAutoFollowCallback:M,observeCurrentPresenter:B,autoFollowType:K,autoFollowDelayMs:W}=(0,O.oW)(e),{isWaitingForFirstFollower:$,stopPresenting:z}=function(e){let[r,n]=i.useState(!1),a=e.followerCount,[o,s]=(0,f.fp)(v.Dv);0===a||r||n(!0);let c=(0,b.jA)(e)||o;(0,b.jA)(e)&&o&&s(!1),!c&&r&&n(!1);let d=c&&0===a&&!r,u=(0,R.T)(),m=(0,P.z3)(),p=i.useCallback(()=>{u(R.N.STOP),"prototype"===m?S.hk()?.stopPresenting():l.h3O.stopPresenting()},[u,m]),h=i.useCallback(()=>!!d&&(p(),!0),[p,d]);return(0,A.O1)(h,A.KD.MULTIPLAYER_SPOTLIGHT),{isWaitingForFirstFollower:d,stopPresenting:p}}(r),Z=function(e){let{multiplayer:r,showingExplainer:n,isPendingPresenting:i,recorder:a}=e;return a.isRecording?"recording":a.mediaStream?"preparing_to_record":(0,b.jA)(r)||i?"presenting":n?"showing_explainer":(0,b.NB)(r)?"prompt_to_accept_nomination":"none"}({multiplayer:r,showingExplainer:(0,f.md)(v.ah),isPendingPresenting:(0,f.md)(v.Dv),recorder:I}),X=function(e){let{multiplayer:r,isAutoFollowPending:n,presenterUser:i,suppressRejoinPrompt:a}=e;return n?"pending_auto_follow":(0,b.L3)(r)?"following":i&&!a?"prompt_to_rejoin":"none"}({multiplayer:r,isAutoFollowPending:D,presenterUser:s,suppressRejoinPrompt:C}),ee=i.useRef(r.allUsers.length);ee.current=r.allUsers.length;let{statusChangedAt:et}=Q(Z,X,p,ee),[er,en]=function(e,r){switch(e){case"presenting":if("following"===r||"prompt_to_rejoin"===r)return[e,"none"];return[e,r];case"prompt_to_accept_nomination":if("pending_auto_follow"===r)return["none",r];return[e,"none"];case"showing_explainer":case"none":return[e,r];case"preparing_to_record":case"recording":return[e,"none"];default:(0,o.xb)(e)}}(Z,X),ei=i.useCallback(()=>{N(!0),k(),h(R.N.IGNORE)},[k,h]),ea=K===O.D_.INITIAL,eo=i.useCallback(()=>"pending_auto_follow"===en&&!!D&&K===O.D_.INITIAL&&(k(),!0),[K,k,D,en]);(0,A.O1)(eo,A.KD.MULTIPLAYER_SPOTLIGHT);let es=J(),el="showing_explainer"===er,ec="none"!==er,ed="none"!==en,eu=i.useRef(null);i.useEffect(()=>{"preparing_to_record"===er&&I.mediaStream&&eu.current&&(eu.current.srcObject=I.mediaStream)},[er,I.mediaStream]);let em=["presenting","prompt_to_accept_nomination","showing_explainer","preparing_to_record","recording"].includes(er)||["following"].includes(en),[ep,eh]=(0,f.fp)(v.uc);return em!==ep&&eh(em),i.createElement(q,{overlayStatus:{self:er,others:en}},i.createElement(u.N,null,em&&i.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},i.createElement(j,null))),i.createElement(u.N,null,ec&&i.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},i.createElement(Y,{prototypeHeaderHidden:n},(()=>{switch(er){case"presenting":if(null===a)return null;if($){let e=(0,w.tx)("collaboration.spotlight.bell.presenter.waiting_for_followers"),r=(0,w.t)("collaboration.spotlight.bell.presenter.cancel");return i.createElement(U.Y,{color:"brand",message:{text:e},renderKey:`${a.sessionID}`,progressBar:!0,progressBarDurationMs:6e3,autoHide:!1,button:{text:r,onClick:z}})}return i.createElement(U.Y,{color:"brand",message:{text:i.createElement(x.s,{count:r.followerCount})},renderKey:`${a.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,w.t)("collaboration.spotlight.bell.presenter.stop"),onClick:z},docked:es});case"prompt_to_accept_nomination":if(!a||!d)return null;return i.createElement(U.Y,{color:"brand",useSecondaryColor:!0,message:{text:(0,w.tx)("collaboration.spotlight.bell.follower.nominated",{nominatorName:d.name})},renderKey:`${a.sessionID}`,progressBar:!1,progressBarDurationMs:0,autoHide:!1,button:{text:(0,w.t)("collaboration.spotlight.tooltip.spotlight_me"),onClick:()=>{_(r)}},showCloseButton:!0,onCloseCallback:()=>{g(a.sessionID,r)}});case"showing_explainer":if(null===a)return null;let e=s?(0,w.tx)("collaboration.spotlight.bell.explainer.takeover",{currentPresenter:s?.name}):(0,w.tx)("collaboration.spotlight.bell.explainer");return i.createElement(U.Y,{color:"brand",useSecondaryColor:!0,message:{text:e},renderKey:`${r.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:null,docked:!1});case"preparing_to_record":case"recording":if(!a)return null;return i.createElement(V.e,{onStopPresenting:z});case"none":return null;default:(0,o.xb)(er)}})()))),i.createElement(u.N,null,ed&&i.createElement(m.P.span,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:G.Bn}},i.createElement(Y,{prototypeHeaderHidden:n},(()=>{switch(en){case"pending_auto_follow":{if(!s)return null;let e=s.name,r=ea?{text:(0,w.tx)("collaboration.spotlight.bell.follower.spotlighting_presenter_alternate_copy",{presenterName:e}),onClick:M}:{text:(0,w.tx)("collaboration.spotlight.bell.follower.switching_to_new_presenter",{presenterName:e})},n=ea?{text:(0,w.t)("collaboration.spotlight.bell.follower.not_now"),onClick:ei}:null;return i.createElement(U.Y,{color:s?.color,message:r,renderKey:`${s.sessionID}`,progressBar:ea,progressBarDurationMs:W||0,autoHide:!1,button:n,ghost:el})}case"following":{let e=r.observingSessionID===r.presenterSessionID;if(null===c)return null;let n=c?.name||"",a=e?(0,w.tx)("collaboration.spotlight.bell.follower.spotlight_on_presenter",{observedUserName:n}):(0,w.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:n}),o={text:e?(0,w.t)("collaboration.spotlight.bell.stop_following"):(0,w.t)("collaboration.spotlight.bell.stop"),onClick:()=>E(r)};return i.createElement(U.Y,{color:c?.color,message:{text:a},renderKey:`${r.observingSessionID}`,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:o,docked:es,ghost:el})}case"prompt_to_rejoin":let e=()=>(0,b.KI)(B,r,"Spotlight Rejoined",et);if(null!==c||null===s)return null;let n=(0,w.tx)("collaboration.spotlight.bell.follower.reprompt_spotlight_on_presenter",{presenterUserName:s.name}),a=(0,w.t)("collaboration.spotlight.bell.follower.follow");return i.createElement(U.Y,{color:s?.color,message:{text:n,onClick:e},renderKey:`${s.sessionID}`,autoHide:!1,progressBar:!1,progressBarDurationMs:0,button:{text:a,onClick:e},showCloseButton:!0,onCloseCallback:()=>(0,b.KI)(()=>N(!0),r,"Spotlight Rejoin Dismissed",et),useSecondaryColor:!0,ghost:el});case"none":return null;default:(0,o.xb)(en)}})()))),(()=>{if("preparing_to_record"!==er&&"recording"!==er||!I.mediaStream)return null;let e=I.mediaStream.getVideoTracks();if(0===e.length)return null;let r=e[0].getSettings();if(!r.width||!r.height)return null;let n=r.width/400,a=r.height/225,o=n>a?400:r.width/r.height*225,s=n>a?r.height/r.width*400:225;return i.createElement(F.vx,{initialPosition:new T.Mi(12,-30),initialHeight:s,initialWidth:o,transparentContentBackground:!0,initialConstraints:{x:"left",y:"bottom"},canRenderBelowViewport:!0},i.createElement("video",{className:H.bw,ref:eu,autoPlay:!0,playsInline:!0,muted:!0}))})())}function et(e){let{prototypeHeaderHidden:r}=e,n=(0,a.d4)(({multiplayer:e})=>e),o=(0,O.HG)(),s=(0,O.By)(),l=-1!==n.observingSessionID;return((0,O.VA)({multiplayer:n}),(0,O.Pi)({multiplayer:n}),s)?null:o?i.createElement(ee,{multiplayer:n,prototypeHeaderHidden:r}):l?i.createElement(er,{prototypeHeaderHidden:r}):null}function er(e){let{prototypeHeaderHidden:r}=e,n=(0,O.$0)(),o=(0,L.q5)(),s=(0,a.d4)(e=>e.multiplayer.allUsers.length),l=i.useRef(s);l.current=s,Q("none","following",o,l);let c=`${n?.sessionID}`,d=i.useMemo(()=>{let e=n?.name||"";return{text:(0,w.tx)("collaboration.spotlight.bell.follower.following_non_presenter",{observedUserName:e})}},[n]),u=J();return null===n?null:i.createElement(q,null,i.createElement(z,null),i.createElement(Y,{prototypeHeaderHidden:r},i.createElement(U.Y,{color:n?.color,message:d,renderKey:c,autoHide:!0,progressBar:!1,progressBarDurationMs:0,button:null,docked:u})))}},666258:(e,r,n)=>{n.d(r,{$i:()=>l,a8:()=>s});var i=n(922827),a=n(716034),o=n(168289);(0,a.eU)(2e3),(0,a.eU)(2e3),(0,a.eU)(""),(0,a.eU)(0),(0,a.eU)(!1),(0,a.eU)(!1),(0,a.eU)(null);let s=(0,a.eU)(o.h0.AWAITING_PLAYBACK);(0,a.eU)(i.z7E.DEFAULT),(0,a.eU)(o.zu.DEFAULT),(0,a.eU)(void 0);let l=(0,a.eU)(o.JJ.CANVAS);(0,a.eU)(0)},168289:(e,r,n)=>{n.d(r,{JJ:()=>a,h0:()=>d,zu:()=>o});var i=(e=>(e.SET_CHAT="setChat",e.CLEAR_CHAT="clearChat",e.TARGET_DOM_NODE="targetDOMNode",e.TARGET_SCENE_NODE="targetSceneNode",e.INSERT_NODE="insertNode",e.ADJUST_ZOOM_LEVEL="adjustZoomLevel",e.MOVE_CURSOR_TO_CENTER_SCREEN="moveCursorToCenterScreen",e.CHANGE_TOOL="changeTool",e.MOVE_VIEWPORT="moveViewport",e.SET_CURSOR_DIRECTION="setCursorDirection",e.SET_PROPERTIES_PANEL_TAB="setPropertiesPanelTab",e.UPDATE_SELECTED_NODE_PROPERTIES="updateSelectedNodeProperties",e.SCROLL_PROPERTIES_PANEL="scrollPropertiesPanel",e.FOCUS_INPUT="focusInput",e.SELECT_SCENE_NODE="selectSceneNode",e.SET_VIEWPORT_FRAME_TYPE="setViewportFrameType",e))(i||{}),a=(e=>(e.CANVAS="canvas",e.PROPERTIES_PANEL="properties-panel",e.TEXT_PANEL="text-panel",e))(a||{}),o=(e=>(e.DEFAULT="left",e.RIGHT="right",e))(o||{}),s=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.INSIDE_SCENE_NODE=1]="INSIDE_SCENE_NODE",e[e.CANVAS_COORDINATE=2]="CANVAS_COORDINATE",e))(s||{}),l=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e))(l||{}),c=(e=>(e.CREATE_FRAME="How to draw a frame",e.FORMAT_FRAME="How to use the design panel",e.CREATE_TEXT="Add words where needed",e.FORMAT_TEXT="How to format text",e))(c||{}),d=(e=>(e.PLAYING="playing",e.AWAITING_PLAYBACK="awaitingPlayback",e))(d||{}),u=(e=>(e.LEFT="left",e.CENTER="center",e.RIGHT="right",e))(u||{}),m=(e=>(e.TOP="top",e.CENTER="center",e.BOTTOM="bottom",e))(m||{}),p=(e=>(e.TEST="test",e.PRODUCT_FRAME="productFrame",e.PRODUCT_FRAME_CHERRIES_FRAME="productFrameCherriesFrame",e.PRODUCT_FRAME_TOMATO_FRAME="productFrameTomatoFrame",e.CHERRIES_FRAME_CHERRIES_IMAGE="cherriesFrameCherriesImage",e.CHERRIES_FRAME_CHERRIES_TEXT="cherriesFrameCherriesText",e.CHERRIES_FRAME_PRICE_TEXT="cherriesFramePriceText",e.CHERRIES_FRAME_GROWN_TEXT="cherriesFrameGrownText",e.NO_BASICS_FILE_FRAME="noBasicsFileFrame",e.NO_BASICS_FILE_TEXT="noBasicsFileText",e))(p||{}),h=(e=>(e.ESC_KEY="esc key",e.STOP_BTN="stop button",e.NEXT_BTN="next tutorial button",e.PREV_BTN="previous tutorial button",e.STATE_MANAGER_ERROR="state manager error",e))(h||{})},396021:(e,r,n)=>{n(340818),n(553716),n(198868),n(759096),n(168289),n(450503)},965626:(e,r,n)=>{n(411855),n(568214),n(22332),n(154254),n(309798),n(99506),n(719457),n(666258),n(168289),n(396021),n(170460),n(450503)},260833:(e,r,n)=>{n(411855),n(629019),n(946689),n(154254),n(964389),n(939863),n(175290),n(101505),n(672517),n(226055),n(309798),n(833629),n(970332),n(666258),n(168289),n(63666),n(936181),n(989326)},301922:(e,r,n)=>{n.d(r,{q:()=>s});var i=n(38329),a=n(130097);n(915440),n(335682);var o=n(279453);function s(){return new Promise((e,r)=>{let n=i.D.getState().openFile?.key;if(!n)return e(!1);(0,a.Ek)(o.J2w,{fileKey:n}).then(r=>e(!!r.file?.org?.cursorChatDisabledAt))})}},182919:(e,r,n)=>{n(411855),n(188507);var i=n(922827),a=n(91408);n(966712),n(864089),n(939863),n(226055),n(73629),n(137463),n(206645);var o=n(837746),s=(e=>(e[e.NONE=0]="NONE",e[e.EYEDROPPER=1]="EYEDROPPER",e[e.CHAT=2]="CHAT",e[e.HIGH_FIVE=3]="HIGH_FIVE",e))(s||{});let l={[i.NLJ.SELECT]:"f7ae268fa093b5f690abfe5cc56cccfa8c2d4734",[i.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[i.NLJ.DROPPER_COLOR]:"d8d06a74b0182fb6948c55373e8c68d602dd9a78"},c={[i.NLJ.SELECT]:"aed6896e6ad35977610fc23bb6590c1484d3ee01",[i.NLJ.HAND]:"aebe1073b0b9e7ca3907e21cc08ee416d86520c4",[i.NLJ.DROPPER_COLOR]:"3a904092ca690b41c06a24b8e2dddb724a992c94"},d=((0,a.hG)(o.xEX),e=>{switch(e){case Tool.SELECT:return t("fake_cursor.select_cursor");case Tool.HAND:return t("fake_cursor.hand_cursor");case Tool.DROPPER_COLOR:return t("fake_cursor.eyedropper_cursor");default:return t("fake_cursor.cursor")}})},719457:(e,r,n)=>{var i={};n.r(i),n.d(i,{GLARE_ANIMATION:()=>R,GRAY_BACKGROUND:()=>O,NONE:()=>D,ORANGE_GRADIENT:()=>L,PINK_GRADIENT:()=>C,animateBg:()=>N,glareAnimation:()=>P});var a=n(411855);n(188507);var o=n(922827),s=n(629019),l=n.n(s),c=n(344780),d=n(568214);n(22332),n(794272);var u=n(966712);n(192437),n(809831);var m=n(226055);n(73629),n(949632),n(630331),n(457630),n(805286),n(460289),n(29680),n(754209),n(100197),n(433861),n(593392);var p=(e=>(e.PINK_GRADIENT="PINK_GRADIENT",e.ORANGE_GRADIENT="ORANGE_GRADIENT",e.GRAY_BACKGROUND="GRAY_BACKGROUND",e.GLARE_ANIMATION="GLARE_ANIMATION",e.NONE="NONE",e))(p||{});let h=new Map([["happy birthday","PINK_GRADIENT"],["bday","PINK_GRADIENT"],["hbd","PINK_GRADIENT"],["fire","ORANGE_GRADIENT"],["fiire","ORANGE_GRADIENT"],["fiiire","ORANGE_GRADIENT"],["fiiiire","ORANGE_GRADIENT"],["lit","ORANGE_GRADIENT"],["heat","ORANGE_GRADIENT"],["hot","ORANGE_GRADIENT"],["spicy","ORANGE_GRADIENT"],["lowkey","GRAY_BACKGROUND"],["slick","GLARE_ANIMATION"],["this is clean","GLARE_ANIMATION"],["this clean","GLARE_ANIMATION"],["cleann","GLARE_ANIMATION"],["sharp","GLARE_ANIMATION"],["immaculate","GLARE_ANIMATION"],["pristine","GLARE_ANIMATION"],["polished","GLARE_ANIMATION"],["spotless","GLARE_ANIMATION"],["shiny","GLARE_ANIMATION"]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(h.set("me encanta","PINK_GRADIENT"),h.set("hola","PINK_GRADIENT"),h.set("bienvenides","PINK_GRADIENT"));let _=new Map([[(0,u.ck)("a83de90bf34495081ce2e8bcaf28d1d2c16e5186"),["lol","lmao","rofl","lmfao","hehe","haha","sksk","cryingg","dyingg","so funny","rotfl"]],[(0,u.ck)("d1e0d7ed5e1aa13e8854dbd88b9fd650377a02f2"),["fire","fiire","fiiire","fiiiire","spicy","oh snap","dope","hot","heat","so good","siick","siiick","siiiick","on point","rad","sweeet","sweeeet","wagmi","wgmi","gmi"]],[(0,u.ck)("0606e9d967b5abb6d9a2853c2fff589f2ec2fc05"),["hey","hiya","heyo","hello","howdy","whats up","what's up","good morning","gm","greetings","bye","later","ciao","see ya","cya","wave"]],[(0,u.ck)("ffd0635e8f9322352eff0c15411ac0b536b98d87"),["taking a look","sus","let me look","let me see","lemme see","i see what you did there"]],[(0,u.ck)("ff5be810b821d264cc2c95f665d24a867c34e587"),["gorgeous","stunning","love","loove","looove","loooove","looooove","luv","woww","awww","<3","yass","cute","amazingg","heart eyes","beautiful","my eyeballs are literally two giant hearts right now and i couldn't be happier","beautiful","adorable"]],[(0,u.ck)("78f60a21d2616c2a24c7645d8636dec855e48ffb"),["ngmi","bummer","sad face","uh oh",":(","noo","oh no","sorry to hear that","rip","rats","big sad","tragic","fail","womp","that sucks"]],[(0,u.ck)("1429964104bceac90c5c8e731ce4cc50b27e2797"),["wtf","whoa","no way",":O","woah","whaat","whaaat","shook","shooketh","omg","omfg","speechless","oh snap","surprised"]],[(0,u.ck)("e15fa4fbba4b88b4f1f04ba64bb12abf12bcbc6c"),["gift","hbd","bday","birthday"]],[(0,u.ck)("778eea842ed4020f6209e97c77abcd84984e5c94"),["cool","coool","swag","chill"]],[(0,u.CZ)("emoji/5/noto/medium/1f410.png"),["goat"]]]);(0,u.kc)().figjam_latin_emote_easter_eggs&&(_.set((0,u.ck)("62f55b94bf05d9a49731714238dd5e6ce716225d"),["me encanta","ole","vamos"]),_.set((0,u.ck)("88ea7d675b3ebeebbd917bf6857afa502b51d928"),["bienvenidos","bienvenides","bienvenidas"]),_.set((0,u.ck)("89a607910c3edfcaf5efa1e19bc8b646f2e47a6a"),["fuego","picante"]),_.set((0,u.ck)("8b29bcdf89d32bafec42bee873327384b55eb54b"),["hola","brillante","excelente","bien","muy bien","sol"]));var g=(e=>(e[e.Standard=0]="Standard",e))(g||{});let f=new Map;_.forEach((e,r)=>{!function(e,r,n){e.forEach(e=>n.set(e,r))}(e,r,f)});var E=n(368588);n(517333);var y=n(313894);n(38329),n(737433);var b=n(939683),v=n(886653);n(617453),n(193212),(0,n(716034).eU)(!1),(class e extends y.w{constructor({startingRelativePosition:r,startingRotation:n,position:i,viewportZoomScale:a,cursorOnRightForWindup:o,cursorOnRightForCollision:s,sessionId:l,getUserCursorTransform:c}){super(),this.type="AnimatedCursorEntity",this.lifetime=.85,s&&(this.sortOrder=-1),this.position=i,this.viewportZoomScale=a,this.cursorOnRightForWindup=o,this.cursorOnRightForCollision=s;let d={transform:`translate(${r.x}px, ${r.y}px) rotate(${n}rad)`},u={transform:`translate(${(this.cursorOnRightForWindup?1:-1)*90}px, 70px) rotate(${this.cursorOnRightForWindup?1:-1}rad) scale(0.9)`},m={transform:`translate(${(this.cursorOnRightForCollision?1:-1)*10}px, 0px) scale(2)`},p=e.RANDOM_VECTORS.map(e=>({transform:`translate(${10*e.x}px, ${10*e.y}px) ${m.transform}`})),h=1e3/60;this.customData={sessionId:l,animations:[{keyframes:[d,u],timing:{duration:12*h,easing:"cubic-bezier(.26,.32,.12,1)"}},{keyframes:[u,m],timing:{delay:12*h,duration:4*h,easing:"cubic-bezier(.16,.5,.47,1.25)"}},{keyframes:p,timing:{delay:16*h,duration:4*h,easing:`steps(${p.length})`}},{keyframes:[m,m],timing:{delay:20*h,duration:18*h}}],getReturnToCursorTransform:r=>{let n=(this.cursorOnRightForCollision?1:-1)*10,i=c(),o=(i.position.x-this.position.x)*a,s=(i.position.y-this.position.y)*a,l=i.rotation;return`translate(${e.lerp(n,o,r)}px,${e.lerp(0,s,r)}px) rotate(${e.lerp(0,l,r)}rad) scale(${e.lerp(2,1,r)})`}}}static lerp(e,r,n){return e*(1-n)+r*n}}).RANDOM_VECTORS=[{x:.626086772987037,y:-.24715772511262912},{x:.16558013014491735,y:-.4962441097195551}];let I=class e{constructor(){this.wiggleMeter=0,this.wiggleMode=!1,this.lastUpdateTime=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.speedFactor=0,this.mouseX=0,this.mouseY=0,this.hasLastMousePosition=!1,this.lastMouseX=0,this.lastMouseY=0,this.lastDirectionX=0,this.lastDirectionY=0,this.subscriptions=[],this.mouseLeftCanvas=!1,this.highFiveKeyPressed=!1,this.mouseButtonHeld=!1}getWiggleMode(){return this.wiggleMode}getShakeFactor(){return this.shakeFactor}getAboutToHide(){return this.getWiggleMode()&&this.wiggleMeter<e.WIGGLE_MODE_ABOUT_TO_HIDE_TIME/e.WIGGLE_MODE_DEACTIVATION_TIME}onWiggleModeChange(e){return this.subscriptions.push(e),()=>{let r=this.subscriptions.indexOf(e);r>=0&&this.subscriptions.splice(r,1)}}setWiggleMode(e){if(e!==this.wiggleMode)for(let r of(this.wiggleMode=e,this.subscriptions))r(this.wiggleMode)}setMouseLeftCanvas(e){this.mouseLeftCanvas=e}getMouseLeftCanvas(){return this.mouseLeftCanvas}setHighFiveKeyPressed(e){this.highFiveKeyPressed=e}getHighFiveKeyPressed(){return this.highFiveKeyPressed}setMouseButtonHeld(e){this.mouseButtonHeld=e,this.update()}getMousePosition(){return{x:this.mouseX,y:this.mouseY,overCanvas:!this.mouseLeftCanvas}}stopWigglingNow(){this.speedFactor=0,this.shakeFactor=0,this.shakeGracePeriod=0,this.wiggleMeter=0,this.hasLastMousePosition=!1,this.lastDirectionX=0,this.lastDirectionY=0,this.setWiggleMode(!1),this.update()}startOrRefreshWiggle(){this.setWiggleMode(!0),this.wiggleMeter=1}getDeltaTime(){let e=performance.now(),r=e-this.lastUpdateTime;return this.lastUpdateTime=e,r/1e3}update(e,r){e?this.setMousePositionAndUpdate(e,r):this.updateWiggleMeter(r)}setMousePositionAndUpdate(r,n){if(this.mouseLeftCanvas||this.mouseButtonHeld)return;let i="number"==typeof n?n:this.getDeltaTime();if(i<=0)return;this.mouseX=r.x,this.mouseY=r.y;let a=1,o=(this.mouseX-this.lastMouseX)/i,s=(this.mouseY-this.lastMouseY)/i;if(this.lastMouseX=this.mouseX,this.lastMouseY=this.mouseY,!this.hasLastMousePosition){this.hasLastMousePosition=!0;return}let l=Math.sqrt(o*o+s*s);if(l>0){let e=o/l,r=s/l;a=e*this.lastDirectionX+r*this.lastDirectionY,this.lastDirectionX=e,this.lastDirectionY=r}let c=i/e.WIGGLE_MODE_MOVEMENT_DECAY_TIME,d=i/e.WIGGLE_MODE_MOVEMENT_MIN_TIME+c;this.speedFactor+=Math.min(l*e.WIGGLE_MODE_MOVEMENT_SENSITIVITY,d),this.speedFactor=Math.max(0,this.speedFactor-c),this.speedFactor=Math.min(1,this.speedFactor);let u=this.speedFactor>=.8,m=u&&a<0,p=Math.abs(this.lastDirectionX)>Math.abs(this.lastDirectionY);u&&m&&p&&(this.shakeFactor+=1/(this.wiggleMode?e.WIGGLE_MODE_REPLENISH_SHAKES:e.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER),this.shakeGracePeriod=1),this.shakeGracePeriod>0?this.shakeGracePeriod=Math.max(this.shakeGracePeriod-i/e.WIGGLE_MODE_SHAKE_GRACE_PERIOD,0):this.shakeFactor-=i/e.WIGGLE_MODE_SHAKE_RESET_TIME,this.shakeFactor=Math.min(Math.max(this.shakeFactor,0),1),u&&(Math.abs(this.shakeFactor)>=.8?this.wiggleMeter=1:this.wiggleMode&&Math.abs(this.shakeFactor)>=.3&&(this.wiggleMeter=Math.max(this.wiggleMeter,Math.abs(this.shakeFactor)))),this.updateWiggleMeter(i)}updateWiggleMeter(r){if((r="number"==typeof r?r:this.getDeltaTime())<=0)return;this.wiggleMeter<=0?this.setWiggleMode(!1):this.wiggleMeter>=1&&this.setWiggleMode(!0);let n=0;n=this.mouseLeftCanvas?-e.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD:this.highFiveKeyPressed?e.WIGGLE_MODE_HIGH_FIVE_KEY_TIME:this.wiggleMode?-e.WIGGLE_MODE_DEACTIVATION_TIME:-e.WIGGLE_MODE_MOUSE_RESET_TIME,this.wiggleMeter+=r/n,this.wiggleMeter=Math.min(Math.max(this.wiggleMeter,0),1)}};function T(e,r){let n=3*e,i=3*e,a=1.7999999999999998*e,o=[];for(let e=0;e<=100;e+=2){if(0===e||100===e){o.push(S(0,0,0));continue}let r=Math.floor(Math.random()*n)-n/2,s=Math.floor(Math.random()*i)-i/2,l=Math.floor(Math.random()*a)-a/2;o.push(S(r,s,l))}return new Animation(new KeyframeEffect(r,o,{duration:100,easing:"ease-in-out",iterations:1/0}),document.timeline)}function S(e,r,n){return{transform:`translate(${e}px, ${r}px) rotate(${n}deg)`}}function w(e){return!!e.length&&e.some(e=>"running"===e.playState)}function A(e){let{content:r,children:n}=e,[i,o]=(0,a.useState)(0),s=(0,a.useRef)(0),l=(0,a.useRef)([]),c=a.useRef(null),[d,u]=(0,a.useState)([]),m=(0,b.am)(),p=(0,a.useMemo)(()=>0===r.length?0:((r.match(/\!+$/g)||[])[0]||"").length,[r]),h=(0,a.useCallback)(e=>{clearTimeout(s.current),s.current=setTimeout(()=>{o(e=>(e>0&&h(250),Math.max(e-1,0)))},e)},[]);return(0,a.useEffect)(()=>{o(p),h(1e3)},[p,h]),(0,a.useEffect)(()=>{if(!c.current)return;i>1&&!l.current.length&&(l.current=[T(1,c.current),T(1.5,c.current),T(2,c.current),T(2.5,c.current),T(3,c.current)]);let e=w(l.current);if(i>1){let e=Math.min(i-1-1,l.current.length-1);l.current.forEach((r,n)=>{n===e?r.play():r.cancel()})}else l.current.forEach(e=>e?.cancel());let r=w(l.current);!e&&r&&m("cursor_chat_rumble_triggered"),u(l.current.map(e=>e?.playState))},[i,m]),a.createElement("div",{"data-testid":"chat-animation-wrapper","data-test-animation-state":d,ref:c},n)}I.WIGGLE_MODE_DEACTIVATION_TIME=6,I.WIGGLE_MODE_ABOUT_TO_HIDE_TIME=3,I.WIGGLE_MODE_HIGH_FIVE_KEY_TIME=.5,I.WIGGLE_MODE_MOUSE_RESET_TIME=.6,I.WIGGLE_MODE_MOVEMENT_SENSITIVITY=4e-5,I.WIGGLE_MODE_MOVEMENT_MIN_TIME=.1,I.WIGGLE_MODE_MOVEMENT_DECAY_TIME=1.5,I.WIGGLE_MODE_MIN_SHAKES_TO_TRIGGER=6.5,I.WIGGLE_MODE_REPLENISH_SHAKES=3.5,I.WIGGLE_MODE_SHAKE_GRACE_PERIOD=.3,I.WIGGLE_MODE_SHAKE_RESET_TIME=.5,I.WIGGLE_MODE_LEAVE_CANVAS_GRACE_PERIOD=.3,(0,v.xx)(function(e){return e.reduce((e,r)=>(e[r.sessionID]=r,e),{})}),n(36127),p.NONE;n(137463),n(939863),n(145519),n(330505);let C="cursor_chat_emotes--PINK_GRADIENT--1KQ3C",N="cursor_chat_emotes--animateBg---meP2",L="cursor_chat_emotes--ORANGE_GRADIENT--cC1fw",O="cursor_chat_emotes--GRAY_BACKGROUND--DAHAE",R="cursor_chat_emotes--GLARE_ANIMATION--SuTBw",P="cursor_chat_emotes--glareAnimation--x1WJw",D="cursor_chat_emotes--NONE---FYHz";n(616121);var k=n(170460);n(301922);var M=n(140593);n(563706),n(182919);var F=n(776945);function x(e,r,n){let i=o.z7E[r];return n?(0,u.CZ)(`multiplayer_cursors/ui3/${i}/${e.substring(1)}.png`):(0,u.CZ)(`multiplayer_cursors/v1/${i}/${e.substring(1)}.png`)}function U(e,r){if(r){let r=F.JR[e.substring(1)]??F.JR[F.p4];return`data:image/png;base64, ${r}`}let n=F.De[e.substring(1)]??F.De[F.p4];return`data:image/png;base64, ${n}`}function B({color:e,isHighFiveHandOut:r,temporarilyHide:n,isCursorHandOnRight:i,aboutToHide:o=!1}){return a.createElement("div",{className:l()({"cursor_high_five--highFiveAnimationContainer--jWFVT":!0,"cursor_high_five--highFiveAnimHighFiveHandOut--6q5Bu":r,"cursor_high_five--highFiveAnimHighFiveHandAboutToHide--tFRSO":o})},a.createElement("div",{style:{opacity:n?"0":"1"},className:l()({"cursor_high_five--highFiveWaveContainer--M1fBF":!0,"cursor_high_five--cursorHandOnRight--wSZLI":i})},a.createElement(K,{color:e})))}let V="#FFFFFF",G=new Set([V,"#0FA958","#5551FF","#9747FF","#848484","#D27C2C","#F24E1E","#FFC700","#667799","#9747FF","#007BE5","#FF24BD","#F24822","#FFCD29","#14AE5C"]);function H({color:e}){let[r,n]=a.useState(!1);if(!G.has(e))return(0,M.KF)(!!e,`Unknown color ${e} for Cursor High Fives`),a.createElement(a.Fragment,null);let i=x(r?V:e,o.z7E.HIGH_FIVE,!1);return a.createElement("img",{className:"cursor_high_five--handImage--mJVid",src:i,alt:"",onError:()=>n(!0)})}function K({color:e}){return a.createElement(H,{key:e,color:e})}var W=n(91408);n(798099),n(301462),n(601607),n(676938);var $=n(837746);(0,W.hG)($.tui);let Y=(0,a.memo)(function({name:e,color:r,cursorType:n,chatMessage:s,isHighFiving:_,focusOnTextCursor:g,temporarilyHide:f,isCursorHandOnRight:y,isCursorPointingRight:b,editorType:v,isCursorAndChatAreaOffscreen:I,sessionId:T,prefersReducedMotion:S,isHighFivingSupported:w,useChatAnimation:C,disableMessageFade:N,isStaticView:L,isHoveringWidgetWithHiddenCursors:O}){let R=(0,m.GS)(),[P,D]=(0,a.useState)(1),M=(0,a.useMemo)(()=>(0,d.GL)(r),[r]),[F,V]=(0,a.useState)(p.NONE),G=()=>V(p.NONE),[H,K]=(0,a.useState)(L),[W,$]=s||[];(0,a.useEffect)(()=>{let e,r;return W||$?(K(!0),D(1)):(K(!1),G()),N||(e=setTimeout(()=>{D(0)},5e3),r=setTimeout(()=>{K(!1),G()},8e3)),()=>{D(0),K(!1),G(),clearTimeout(e),clearTimeout(r)}},[W,$,N]);let Y="whiteboard"===v;(0,a.useEffect)(()=>{if(Y&&W&&!I)for(let e of h.keys()){let r=h.get(e);r&&function(e,r){var n;let i=e.toLocaleLowerCase(),a=!(1===(n=i.charAt(i.length-r.length-1)).length&&/[A-Za-z]/.test(n));return i.endsWith(r)&&a}(W,e)&&V(r)}},[W,I,Y]);let z=a.useRef(null);(0,a.useEffect)(()=>{if(z.current&&z.current.innerText===W){let e=c.sn.tryStop(`view_cursor_chat_message_${T}_${W}`);e&&c.Vq.add("view_cursor_chat_message",e)}},[W,z,T]);let j=(0,u.kc)().cursor_bot&&b&&n===o.z7E.DEFAULT,q=n===o.z7E.PEN,Z=a.createElement("div",{className:l()({[k.iU]:H,[k.VW]:!H,[k.S8]:R&&!q,[k.z8]:j}),style:{color:M}},a.createElement("div",{className:H?k.bu:k.iY,style:{opacity:H?M===d.e3?.8:.5:1},dir:"auto"},e),H&&a.createElement("div",{className:k.Lo,style:{opacity:M===d.YN?.8*P:P,boxShadow:Y?void 0:`2px 4px 8px ${r}40`},dir:"auto"},$&&a.createElement("div",{className:$.length>0&&(W?.length??0)>0?k.vD:""},$),W&&a.createElement("div",{ref:z},W)),a.createElement("div",{className:`${k.hD} ${i[F]}`,style:"NONE"!==F?{background:r,overflow:"hidden",borderRadius:"2px 20px 20px 20px"}:{background:r},onAnimationEnd:()=>G()}));return g?null:a.createElement("div",{className:k.Dy,style:{opacity:O?0:1},"data-testid":`multiplayer-cursor-${T}`},a.createElement("div",{className:k.or},w?a.createElement(a.Fragment,null,a.createElement("div",{className:k.p},a.createElement(B,{color:r,isHighFiveHandOut:_,temporarilyHide:f,isCursorHandOnRight:y})),a.createElement("img",{className:l()({[k.u0]:!0,[k.Bj]:!0,[k.DE]:_,[k.z8]:j}),src:x(r,_?o.z7E.DEFAULT:n,R),alt:`${_?"highfive cursor":"hand cursor"}`,onError:({currentTarget:e})=>{e.onerror=null,e.src=U(r,R)}})):a.createElement("img",{className:l()({[k.u0]:!0,[k.z8]:j}),src:x(r,n,R),alt:"cursor",onError:({currentTarget:e})=>{e.onerror=null,e.src=U(r,R)}}),T&&a.createElement(E.o,{sessionId:T})),(C||Y)&&!S?a.createElement(A,{content:W||""},Z):Z)}),z=a.memo(function({isCursorAndChatAreaOffscreen:e,x:r,y:n,children:i}){let o={display:e?"none":"block",willChange:"transform",transform:e?"translate3D(-10000px, -10000px, 0)":`translate3D(${r}px, ${n}px, 0)`};return a.createElement("div",{style:o},i)}),j=(e,r,n)=>{let i=React.useRef(null);i.current=e?.sessionId??i.current,useEffect(()=>{i.current&&n&&cursorChatTracker?.setOtherUserChattingState(i.current,r)},[n,r]),useEffect(()=>(i.current&&cursorChatTracker?.setOtherUserChattingState(i.current,!1),()=>{i.current&&cursorChatTracker?.setOtherUserChattingState(i.current,!1)}),[])}},624875:(e,r,n)=>{n.d(r,{O:()=>o}),n(411855),n(188507);var i=n(91408),a=(n(498750),n(153234),n(572206),n(939863),n(293017),n(287010),n(973149),n(226055),n(617453),n(205135),n(7959),n(994481),n(746806),n(837746));n(105773);let o="nudge-amount";(0,i.hG)(a.md8)},371591:(e,r,n)=>{n.d(r,{Bf:()=>tl,UB:()=>td,xH:()=>tc});var i,a=n(411855),o=n(188507),s=n(140593),l=n(404396),c=n(948500),d=n(336935),u=n(426710),m=n(249964),p=n(93098),h=n(286482),_=n(5050),g=n(54837),f=n(935829),E=n(915906),y=n(732720),b=n(701817),v=n(508275),I=n(844463),T=n(841614),S=n(386424),w=n(752046),A=n(960141),C=n(556006),N=n(77437),L=n(353566),O=n(675507),R=n(303511),P=n(666309),D=n(745501),k=n(615258),M=n(222903),F=n(47493),x=n(459593),U=n(368785),B=n(785273),V=n(382707),G=n(206703),H=n(769335),K=n(711229),W=n(514118),$=n(217754),Y=n(923968),z=n(542061),j=n(947718),q=n(360407),Z=n(970961),X=n(826097),J=n(922827),Q=n(83783),ee=n(298455),et=n(629019),er=n.n(et),en=n(966712),ei=n(218549),ea=n(886653),eo=n(163023),es=n(348425),el=n(939863),ec=n(721439),ed=n(931770),eu=n(498606),em=n(739212),ep=n(820396),eh=n(11931),e_=n(234587),eg=n(533228),ef=n(921100),eE=n(459476),ey=n(608974),eb=n(107018),ev=n(877424),eI=n(479641),eT=n(404754),eS=n(608026),ew=n(233891),eA=n(464300),eC=n(763634),eN=n(954037),eL=n(116198),eO=n(443043),eR=n(77499),eP=n(462725),eD=n(968109),ek=n(498902),eM=n(251232),eF=n(21458),ex=n(181033),eU=n(404605),eB=n(912109),eV=n(882354),eG=n(436902),eH=n(416014),eK=n(813601),eW=n(624204),e$=n(401127),eY=n(408026),ez=n(828099),ej=n(630351),eq=n(554593),eZ=n(263699),eX=n(751395),eJ=n(994891),eQ=n(638894),e0=n(729005),e1=n(772661),e2=n(69688),e5=n(376449),e3=n(348844),e6=n(528517),e8=n(596922),e4=n(313888),e9=n(531800),e7=n(691151),te=n(900952),tt=n(142284),tr=n(297447),tn=n(660257),ti=n(353560),ta=n(618208);let to=new ei.q(750);function ts(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return e1.A;case"CENTER":return e0.A;case"MAX":return e2.A;default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return eZ.A;case"CENTER":return eq.A;case"MAX":return ej.A;default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return eJ.A;case"CENTER":return eX.A;case"MAX":return eQ.A;default:(0,s.xb)(e.stackCounterAlignItems)}}return eR.A}(e=>{function r(e){return void 0!==e.objectsPanelThumbnailId}function n(e,n,i,o){let z={src:eH.A,tooltip:""};if(!e)return z;let j=e.type;switch((0,Q.GI)(e)&&(j="STAMP"),j){case"BOOLEAN_OPERATION":switch(e.booleanOperation){case"UNION":return{src:i?a.createElement(E.C,null):eA.A,tooltip:(0,el.t)("layer_icon.tooltip.union")};case"INTERSECT":return{src:i?a.createElement(y.q,null):eS.A,tooltip:(0,el.t)("layer_icon.tooltip.intersect")};case"SUBTRACT":return{src:i?a.createElement(b.j,null):ew.A,tooltip:(0,el.t)("layer_icon.tooltip.subtract")};case"XOR":return{src:i?a.createElement(v.p,null):eC.A,tooltip:(0,el.t)("layer_icon.tooltip.exclude")};default:return z}case"VECTOR":return{src:i?a.createElement(I.g,null):tn.A,tooltip:(0,el.t)("layer_icon.tooltip.vector")};case"STAR":return{src:i?a.createElement(T.j,null):e3.A,tooltip:(0,el.t)("layer_icon.tooltip.star")};case"LINE":return{src:i?a.createElement(S.z,null):eF.A,tooltip:(0,el.t)("layer_icon.tooltip.line")};case"ELLIPSE":return{src:i?a.createElement(w.H,null):eL.A,tooltip:(0,el.t)("layer_icon.tooltip.ellipse")};case"RECTANGLE":case"ROUNDED_RECTANGLE":return{src:i?a.createElement(A.M,null):eH.A,tooltip:(0,el.t)("layer_icon.tooltip.rectangle")};case"REGULAR_POLYGON":return{src:i?a.createElement(C.X,null):eG.A,tooltip:(0,el.t)("layer_icon.tooltip.polygon")};case"TEXT":return{src:i?a.createElement(N.I,null):tt.A,tooltip:(0,el.t)("layer_icon.tooltip.text")};case"SLICE":return{src:i?a.createElement(L.z,null):eY.A,tooltip:(0,el.t)("layer_icon.tooltip.slice")};case"GROUP":case"FRAME":if((0,e_.oz)()&&r(e)&&e.parentNode?.isResponsiveSet)return{src:(0,eh.l)(e.size.x),tooltip:(0,el.t)("layer_icon.tooltip.layout")};if(e.isStateGroup)return{src:i?a.createElement(O.k,null):e4.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};if((0,eg.R)(e))return{src:i?function(e){switch(e.stackMode){case"HORIZONTAL":if("WRAP"===e.stackWrap)switch(e.stackPrimaryAlignItems){case"MIN":case"SPACE_EVENLY":case"SPACE_BETWEEN":case void 0:return a.createElement(l.d,null);case"CENTER":return a.createElement(c.B,null);case"MAX":return a.createElement(d.E,null);default:(0,s.xb)(e.stackPrimaryAlignItems)}else switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return a.createElement(u.J,null);case"CENTER":return a.createElement(m.P,null);case"MAX":return a.createElement(p.n,null);default:(0,s.xb)(e.stackCounterAlignItems)}case"VERTICAL":switch(e.stackCounterAlignItems){case"BASELINE":case"MIN":case void 0:return a.createElement(h.D,null);case"CENTER":return a.createElement(_.h,null);case"MAX":return a.createElement(g.A,null);default:(0,s.xb)(e.stackCounterAlignItems)}}return a.createElement(f.q,null)}(e):ts(e),tooltip:(0,el.t)("layer_icon.tooltip.auto_layout")};if(e.resizeToFit)return{src:i?a.createElement(R.g,null):eP.A,tooltip:(0,el.t)("layer_icon.tooltip.group")};else return{src:i?a.createElement(f.q,null):eR.A,tooltip:(0,el.t)("layer_icon.tooltip.frame")};case"RESPONSIVE_SET":if((0,e_.oz)())return{src:o===em.g$.Webpage?a.createElement(P.A,null):a.createElement(D.t,null),tooltip:(0,el.t)("layer_icon.tooltip.webpage")};return{src:i?a.createElement(f.q,null):eR.A,tooltip:(0,el.t)("layer_icon.tooltip.frame")};case"CODE_COMPONENT":if((0,e_.oz)())return{src:a.createElement(O.k,null),tooltip:(0,el.t)("layer_icon.tooltip.code_component")};return{src:eR.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};case"CODE_INSTANCE":if((0,e_.oz)())return{src:a.createElement(k.X,null),tooltip:(0,el.t)("layer_icon.tooltip.code_instance")};return{src:eR.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};case"CODE_LAYER":if((0,e_.oz)())return{src:a.createElement(k.X,null),tooltip:(0,el.t)("layer_icon.tooltip.code_layer")};return{src:eR.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};case"CODE_LIBRARY":if((0,e_.oz)())return{src:a.createElement(M.O,null),tooltip:(0,el.t)("layer_icon.tooltip.code_library")};return{src:eR.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};case"CODE_FILE":if((0,e_.oz)())return{src:a.createElement(M.O,null),tooltip:(0,el.t)("layer_icon.tooltip.code_file")};return{src:eR.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};case"MODULE":return{src:e7.A,tooltip:(0,el.t)("layer_icon.tooltip.module")};case"SYMBOL":if((0,en.kc)().dse_templates_proto&&r(e)&&e.isTemplate)return{src:e7.A,tooltip:(0,el.t)("layer_icon.tooltip.template")};if(r(e)&&e.isState||n?.isStateGroup)return{src:i?a.createElement(F.y,null):e9.A,tooltip:(0,el.t)("layer_icon.tooltip.variant")};return{src:i?a.createElement(O.k,null):e4.A,tooltip:(0,el.t)("layer_icon.tooltip.component")};case"INSTANCE":return{src:i?a.createElement(x.m,null):eD.A,tooltip:(0,el.t)("layer_icon.tooltip.instance")};case"STICKY":return{src:i?a.createElement(U.a,null):e6.A,tooltip:(0,el.t)("layer_icon.tooltip.sticky")};case"SHAPE_WITH_TEXT":return{src:i?a.createElement(B.T,null):eW.A,tooltip:(0,el.t)("layer_icon.tooltip.shape_with_text")};case"CONNECTOR":return{src:i?a.createElement(V.y,null):eN.A,tooltip:(0,el.t)("layer_icon.tooltip.connector")};case"STAMP":return{src:i?a.createElement(G.w,null):e5.A,tooltip:(0,el.t)("layer_icon.tooltip.stamp")};case"SECTION":return{src:i?a.createElement(H.e,null):eK.A,tooltip:(0,el.t)("layer_icon.tooltip.section")};case"WIDGET":{let r=e.guid?(0,ee.UN)().get(e.guid.toString()):null;if(r&&"EMBED_WIDGET"===r.widgetId)return{src:i?a.createElement(K.G,null):eO.A,tooltip:(0,el.t)("layer_icon.tooltip.embed")};if(r&&"LINK_PREVIEW_WIDGET"===r.widgetId)return{src:i?a.createElement(W.N,null):ex.A,tooltip:(0,el.t)("layer_icon.tooltip.link_preview")};return{src:i?a.createElement($.h,null):ti.A,tooltip:(0,el.t)("layer_icon.tooltip.widget")}}case"CANVAS":return{src:eB.A,tooltip:(0,el.t)("layer_icon.tooltip.canvas")};case"TABLE":return{src:i?a.createElement(Y.r,null):te.A,tooltip:(0,el.t)("layer_icon.tooltip.table")};case"SLIDE":return{src:ez.A,tooltip:(0,el.t)("layer_icon.tooltip.slide")}}return z}function i(e){let r=(0,ea.xx)((e,r)=>{let n;return(n=to.get(e))&&n.thumbnailId===r||(n={thumbnailId:r,svg:ed.NO(e)},to.set(e,n)),n.svg}),{guid:n,node:i,isMenuIcon:o,isMenuIconPurple:s,className:l,editModeType:c,detachedInfo:d,disabled:u,locked:m,hovered:p,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f,panelType:E}=e,y=i?r(n,i.objectsPanelThumbnailId):"",b=i?.hasEnabledAnimatedPaint,v=i?.hasEnabledVideoPaint;return a.createElement(ej,{className:l,node:i,isMenuIcon:o,isMenuIconPurple:s,thumbnailSrc:y,onDoubleClick:()=>{e.node&&(e.navigateAndPanTo?e.navigateAndPanTo(e.node.guid):J.glU.panToNode(e.node.guid,!1))},animated:b||v,staticImage:i?.hasEnabledStaticImagePaint,editModeType:c,detachedInfo:d,isDefaultResponsiveSet:e.isDefaultResponsiveSet,disabled:u,locked:m,hovered:p,outOfView:h,scrollLeft:_,horizontalScrollEnabled:g,useUI3Icon:f,panelType:E})}e.LayerIcon=i,i.displayName="LayerIcon";let et=e=>e.mirror.sceneGraph;e.ConnectedLayerIcon=function(e){let r=(0,o.d4)(et);return a.createElement(i,{...e,node:r.get(e.guid)||null})};class ei extends a.PureComponent{getAllPaints(e){return[...e.fillPaints||[],...e.strokePaints||[],...e.backgroundPaints||[]]}renderBaseIcon(){let{node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:i,className:o,disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:m,useUI3Icon:p}=this.props;return a.createElement(ej,{className:o,node:e,parentNode:r,isMenuIcon:n,isMenuIconPurple:i,animated:this.hasEnabledAnimatedPaintNodeChange(e),staticImage:this.hasEnabledStaticPaintNodeChange(e),disabled:s,locked:l,hovered:c,outOfView:d,scrollLeft:u,horizontalScrollEnabled:m,useUI3Icon:p})}renderVariableIcon(){let{variableResolvedType:e}=this.props.node;return null==e?this.renderBaseIcon():a.createElement(ep.i,{type:e})}renderVariableCollectionIcon(){return a.createElement(eo.B,{svg:ta.A,className:this.props.className,autosize:!0})}renderStyleIcon(){let{node:e,className:r}=this.props;switch(e.styleType){case"GRID":let n=(0,ec.s$)(e);return a.createElement(eo.B,{svg:n,className:r,autosize:!0,width:"10px"});case"FILL":return a.createElement(eo.B,{svg:eb.A,className:r});case"EFFECT":return a.createElement(eo.B,{svg:ey.A,className:r});case"TEXT":return a.createElement(eo.B,{svg:ev.A,className:r});default:return this.renderBaseIcon()}}hasEnabledAnimatedPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.animatedImage)return!0;return!1}hasEnabledStaticPaintNodeChange(e){for(let r of this.getAllPaints(e))if(r.image)return!0;return!1}render(){let{node:e,className:r}=this.props;return e.styleType?this.renderStyleIcon():"VARIABLE"===e.type?this.renderVariableIcon():"VARIABLE_SET"===e.type?this.renderVariableCollectionIcon():"CANVAS"===e.type?a.createElement(eo.B,{svg:eI.A,className:r}):this.renderBaseIcon()}}e.NodeChangeIcon=ei;class ej extends a.PureComponent{render(){let e,r;let{node:i,parentNode:o,animated:s,staticImage:l,thumbnailSrc:c,isMenuIcon:d,isMenuIconPurple:u,onDoubleClick:m,editModeType:p,detachedInfo:h,outOfView:_,horizontalScrollEnabled:g,panelType:f}=this.props;if(!i)return null;let E=ef.V3;c&&(E=ef.W5),d&&(E=u?ef.aN:ef.TK);let y=!1,b="";this.props.isDefaultResponsiveSet?(e=f===em.g$.Webpage?a.createElement(z.Q,null):a.createElement(D.t,null),b=(0,el.t)("layer_icon.tooltip.home")):i.mask?(e=this.props.useUI3Icon?a.createElement(j.d,null):eU.A,b=(0,el.t)("layer_icon.tooltip.mask")):(s||l)&&(0,Q.oY)(i.type)&&!(0,Q.GI)(i)?s?(e=this.props.useUI3Icon?a.createElement(q._,null):ek.A,b=(0,el.t)("layer_icon.tooltip.video")):(e=this.props.useUI3Icon?a.createElement(Z._,null):eM.A,b=(0,el.t)("layer_icon.tooltip.image")):c?(e=(0,eo.V)(c),b=n(i,o).tooltip):p===J.m1T.DEV_HANDOFF&&h?.status==="loaded"&&"SYMBOL"!==i.type&&"INSTANCE"!==i.type?(e=eE.A,y=!0):({src:e,tooltip:b}=n(i,o,this.props.useUI3Icon,f),r=function(e){if(e)switch(e.type){case"TEXT":return tr.A;case"STICKY":return e8.A;case"SHAPE_WITH_TEXT":return e$.A;case"FRAME":if((0,eg.R)(e))return ts(e);break;case"CANVAS":return eV.A}}(i));let v=!y&&"ABSOLUTE"===i.stackPositioning&&(this.props.useUI3Icon?a.createElement(X.I,{className:ef.E7}):a.createElement(eo.B,{className:ef.E7,svg:eT.A}));return a.createElement("span",{className:er()(this.props.className||E,ef.P0,{[ef.EA]:g,[ef.EU]:g&&_}),onDoubleClick:m,"data-tooltip":b||null,"data-tooltip-show-above":!0,"data-tooltip-type":eu.Ib.TEXT},"string"==typeof e?a.createElement(es.t,{svg:e,fallbackSvg:r}):a.createElement("span",{style:{stroke:"none",fill:"none"}},e),v)}}})(i||(i={}));let tl=i.ConnectedLayerIcon,tc=i.LayerIcon,td=i.NodeChangeIcon},741944:(e,r,n)=>{var i=n(91408),a=n(837746);(0,i.hG)(a.Nqv)},533228:(e,r,n)=>{function i(e){let r=e.stackMode;return"HORIZONTAL"===r||"VERTICAL"===r}n.d(r,{R:()=>i}),n(411855)},739212:(e,r,n)=>{n.d(r,{g$:()=>s}),n(411855),n(188507),n(335758),n(922827);var i=n(83783);n(298455),n(966712);var a=n(886653);n(752353);var o=n(378762);n(741944),n(716413);var s=(e=>(e.Object="OBJECT",e.Webpage="WEBPAGE",e.CodeComponent="CODE_COMPONENT",e))(s||{});(0,a.xx)((e,r)=>{let n=1/0;return(0,o.YI)(e,r,r=>{r&&(n=Math.min(n,(0,i.F0)(e,r.guid)))}),n===1/0&&(n=0),n})},357864:(e,r,n)=>{n(335758),n(922827),n(83783),n(153234),n(72274),n(378762),n(273226),n(741944),n(930269)},716413:(e,r,n)=>{(0,n(411855).createContext)(null)},102930:(e,r,n)=>{n.d(r,{N:()=>g});var i=n(411855),a=n(463033),o=n(91408),s=n(201888),l=n(341834),c=n(946689),d=n(939863),u=n(293017);n(108975);var m=n(583894),p=n(746806),h=n(837746),_=n(209056);(0,o.hG)(h.oVP);class g extends i.PureComponent{constructor(e){super(e),this.onClose=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(m.vA.NEVER)},this.onClickOpenInApp=()=>{this.props.dispatch(u.Z1()),(0,l.hW)(this.state.alwaysChecked?m.vA.ALWAYS:m.vA.NEVER),(0,s.Sr)(location.href,s.B3.OPEN_IN_DESKTOP_MODAL)},this.onClickAlwaysOpenDesktopApp=()=>{this.setState({alwaysChecked:!this.state.alwaysChecked})},this.state={alwaysChecked:(0,l.vn)()!==m.vA.NEVER}}static shouldShowOnce(){return(0,l._p)()&&void 0===(0,l.vn)()}static shouldAutoOpen(){return(0,l._p)()&&(0,l.vn)()===m.vA.ALWAYS}static toggleAutoOpen(){let e=(0,l.vn)()===m.vA.ALWAYS;(0,l.hW)(e?m.vA.NEVER:m.vA.ALWAYS)}static isAutoOpenEnabled(){return(0,l.vn)()===m.vA.ALWAYS}static enableAutoOpen(){(0,l.hW)(m.vA.ALWAYS)}static disableAutoOpenIfUnset(){void 0===(0,l.vn)()&&(0,l.hW)(m.vA.NEVER)}render(){return i.createElement(p.vx,{initialPosition:this.props.initialPosition,title:(0,d.t)("desktop_open_views.open_in_desktop_modal.title"),headerSize:"small",dragHeaderOnly:!0,onClose:this.onClose},i.createElement("div",{className:_.k},i.createElement("div",{className:_.K},i.createElement(c.tB,{id:"always-open-desktop-app",checked:this.state.alwaysChecked,onClick:this.onClickAlwaysOpenDesktopApp}),i.createElement(c.JU,{htmlFor:"always-open-desktop-app"},(0,d.tx)("desktop_open_views.open_in_desktop_modal.always_open_in_app_checkbox"))),i.createElement("div",{className:_.K},i.createElement(a.$n,{variant:"secondary",onClick:this.onClose},(0,d.tx)("desktop_open_views.modal.dismiss_button")),i.createElement(a.$n,{variant:"primary",onClick:this.onClickOpenInApp},(0,d.tx)("desktop_open_views.open_in_desktop_modal.open_in_app_button")))))}}g.displayName="OpenDesktopAppModal"},875331:(e,r,n)=>{n.d(r,{VS:()=>_});var i=n(411855),a=n(188507),o=n(922827);n(629019);var s=n(939683);n(540721),n(358145),n(586459),n(316082),n(964881),n(13379),n(226055),n(929715),n(617453);var l=n(634480),c=n(862442),d=n(177505),u=n(479118);n(335682);var m=n(611978);n(99506),n(100197),n(268853),n(915440),n(711525),n(391388),n(776621);var p=n(330654);n(493323),n(331737),n(71656),n(939863),n(279453),n(754168),n(653671),p.record(p.object({thumbnail_url:p.string(),thumbnail_meta:p.object({}).passthrough().transform(e=>JSON.stringify(e)),created_at:p.string().optional()})),n(445448),n(498750),n(356390),n(843495),n(187882);var h=(e=>(e.RANGE="range",e.INDIVIDUAL="individual",e))(h||{});function _({pagesList:e,isComparingChanges:r,enabled:n=!0}){let p=(0,c.Z)("page_change_navigator_navigate"),h=(0,l.E)(),_=(0,s.U)(),g=(0,a.wA)(),f=(0,m._6)(),E=(0,d.dh)(n),y=(0,a.d4)(e=>e.versionHistory);return(0,i.useCallback)(async i=>{n&&await (0,d.$P)(i,E,y,g,(0,u.Fy)(e,i)===o.xal.LOADED,_,p,h,r,f)},[e,p,h,_,g,f,E,y,r,n])}n(465702),n(340818)},653671:(e,r,n)=>{n.d(r,{l7:()=>d});var i=n(298455),a=n(716034),o=n(586459),s=n(940596);(0,s.Wh)(()=>(0,a.eU)([]));let l=(0,s.Wh)(()=>(0,a.eU)(null));(0,s.Wh)(()=>(0,a.eU)(o.r.INIT));let c=(0,s.Wh)(()=>(0,a.eU)(null)),d=(0,a.eU)(e=>e(c),(e,r,n)=>{let a=e(c),o="function"==typeof n?n(a):n;if(a!==o){if(r(c,o),o){let e=(0,i.UN)().get(o);r(l,e?.name||"")}else r(l,null)}})},445448:(e,r,n)=>{n(411855),n(188507),n(922827),n(629019),n(966712),n(153234),n(163023),n(939863),n(392592),n(809831),n(226055),n(177505),n(678340),n(479118),n(100197),n(601607),n(498606),n(815549),n(498750),n(283942),n(7959),n(163280)},359108:(e,r,n)=>{n(411855),n(188507),n(922827),n(776250),n(293017),n(335682),n(44160)},465702:(e,r,n)=>{n(411855),n(188507),n(922827),n(298455),n(939683),n(929715),n(177505),n(479118),n(335682),n(370502),n(653671)},109058:(e,r,n)=>{n.d(r,{v:()=>b});var i=n(411855),a=n(109388),o=n(775541),s=n(922827),l=n(344780),c=n(554322),d=n(964172),u=n(501114),m=n(860707),p=n(837746),h=n(111536);let _=[{label:"Time between frames (ms)",id:"inter-frame-time",max:100,barWidth:1},{label:"React work (ms)",id:"react",max:100,barWidth:1},{label:"Frame handler (ms)",id:"frame",max:100,barWidth:1,children:[{label:"Scene render (ms)",id:"scene-render",max:100,barWidth:1,children:[{label:"Render tree creation (ms)",id:"render-tree-generation",max:100,barWidth:1}]},{label:"React + redux (ms)",id:"react-render",max:100,barWidth:1},{label:"Symbol updater (ms)",id:"symbol-updater",max:100,barWidth:1},{label:"Style updater (ms)",id:"style-updater",max:100,barWidth:1},{label:"Comments renderer (ms)",id:"comments-render",max:100,barWidth:1}]},{label:"C++ event handling (ms)",id:"fullscreen-handle-event",max:100,barWidth:1},{label:"malloc call count (#)",id:"cpp-malloc-call-count",autoResize:!0,max:100,barWidth:1},{label:"malloc size totals (KB)",id:"cpp-malloc-size-totals",autoResize:!0,max:1,barWidth:1},{label:"Used JS memory (MB)",id:"total-memory",max:10,autoResize:!0,barWidth:1},{label:"Used c++ heap memory (MB)",id:"cpp-heap-memory",max:10,autoResize:!0,barWidth:1},{label:"Render job queue length",id:"render-job-queue-length",max:4,autoResize:!0,barWidth:1},{label:"Time between render tree swaps (ms)",id:"render-tree-swap-time",max:300,autoResize:!0,barWidth:1},{label:"Stale content time (ms)",id:"render-tree-stale-time",max:500,autoResize:!0,barWidth:1},{label:"Est viewport coverage (ms)",id:"estimated-viewport-coverage",max:1,autoResize:!0,barWidth:1},{label:"Min viewport sharpness",id:"min-sharpness",max:1,autoResize:!0,barWidth:1},{label:"Avg viewport sharpness",id:"avg-sharpness",max:1,autoResize:!0,barWidth:1}];function g(e,r){var n=e.getBoundingClientRect();e.width=n.width*r,e.height=n.height*r,e.style.width=`${n.width}px`,e.style.height=`${n.height}px`;let i=e.getContext("2d");i&&(i.scale(r,r),i.imageSmoothingEnabled=!1)}class f extends i.PureComponent{constructor(e){super(e),this.ctx=null,this.lastDisplayedUpdateTime=0,this.displayedNumber=null,this.buffer=[],this.dpr=1,this.canvasRef=i.createRef(),this.lastRenderedHitCount=0,this.updateFromTimer=e=>{let r=e.hitCount-this.lastRenderedHitCount,n=0;for(let i=Math.max(0,e.elapsedTimes.length-r);i<e.elapsedTimes.length;i++)n+=e.elapsedTimes[i];this.append(n),this.lastRenderedHitCount=e.hitCount},this.yAxisMaxValue=e.max,this.bufferCapacity=Math.ceil(e.width/e.barWidth)}componentDidMount(){if(this.canvasRef.current){this.dpr=window.devicePixelRatio;let e=this.canvasRef.current;this.ctx=e.getContext("2d"),g(e,this.dpr)}}append(e){if(!this.ctx)return;let r=this.ctx.canvas,n=this.ctx;for(this.dpr!==window.devicePixelRatio&&(this.dpr=window.devicePixelRatio,g(r,this.dpr)),this.buffer.push(e);this.buffer.length>=this.bufferCapacity;)this.buffer.shift();let i=1/0,a=-1/0;for(let e of this.buffer)i=Math.min(i,e),a=Math.max(a,e);let o=this.props.width,s=this.props.height,l=this.props.barWidth,c=s-20;n.font="9px monospace",n.fillStyle=this.props.bg,n.textBaseline="top",n.fillRect(0,0,o,20),n.fillStyle=this.props.fg;let d=performance.now();if((null===this.displayedNumber||d-this.lastDisplayedUpdateTime>150)&&(this.displayedNumber=e,this.lastDisplayedUpdateTime=d),n.fillText(`sample: ${this.displayedNumber.toFixed(1)}`,0,0),n.fillText(`${i.toFixed(1)} - ${a.toFixed(1)}`,0,10),n.fillStyle=this.props.bg,this.props.autoResize){if(e>this.yAxisMaxValue){let i=Math.pow(2,Math.ceil(Math.log2(e/this.yAxisMaxValue)));this.yAxisMaxValue*=i,n.fillRect(0,s-c,o,(i-1)*c/i),n.drawImage(r,0,(s-c)*this.dpr,o*this.dpr,c*this.dpr,0,s-c/i,o,c/i)}else if(this.yAxisMaxValue>2*Math.max(this.props.max,a)){let e=Math.pow(2,Math.ceil(Math.log2(this.yAxisMaxValue/Math.max(this.props.max,a))));this.yAxisMaxValue/=e,n.drawImage(r,0,(s-c/e)*this.dpr,o*this.dpr,c/e*this.dpr,0,s-c,o,c)}}n.drawImage(r,l*this.dpr,(s-c)*this.dpr,(o-l)*this.dpr,c*this.dpr,0,s-c,o-l,c);let u=Math.floor(c*Math.min(1,e/this.yAxisMaxValue));n.fillRect(o-l,s-c,l,c),n.fillStyle=this.props.fg,n.fillRect(o-l,s-u,l,u)}render(){return i.createElement("canvas",{className:h.wP,ref:this.canvasRef,width:this.props.width,height:this.props.height})}}f.displayName="Sparkline";class E extends i.PureComponent{constructor(e){super(e),this.sparklines=new Map,this.lastFrameTime=null,this.tsmerMetrics=new d.s,this.updateTimers=()=>{if(this.tsmerMetrics.onFrame(),null==this.lastFrameTime)this.lastFrameTime=performance.now();else{let e=performance.now(),r=this.sparklines.get("inter-frame-time");r&&(r.append(e-this.lastFrameTime),this.lastFrameTime=e)}let e=this.sparklines.get("total-memory");e&&e.append(((0,m.aW)()??0)/1048576);let r=this.sparklines.get("cpp-heap-memory");r&&r.append(s.hMR.getTotalUsedHeapMemory()/1048576);let n=this.sparklines.get("cpp-malloc-call-count");n&&n.append(s.hMR.getAllocCallCount());let i=this.sparklines.get("cpp-malloc-size-totals");i&&i.append(s.hMR.getAllocTotal()/1024),s.hMR.resetAllocCountsAndTotal();let a=this.sparklines.get("render-job-queue-length");a&&a.append(s.CeL.getRendererJobQueueLength());let o=this.sparklines.get("render-tree-swap-time");o&&o.append(this.tsmerMetrics.lastEditFrameTime());let c=this.sparklines.get("render-tree-stale-time");c&&c.append(this.tsmerMetrics.lastFrameStaleness());let d=this.sparklines.get("estimated-viewport-coverage");d&&d.append(s.glU.estimatedViewportRenderCoverage(s.pWM.DEFINITELY_COVERED_ONLY));let u=this.sparklines.get("min-sharpness");u&&u.append(s.glU.minViewportSharpness());let p=this.sparklines.get("avg-sharpness");p&&p.append(s.glU.avgViewportSharpness());let h=l.rH.report(),_=[],g=e=>{_.push(e.name);let r=this.sparklines.get(_.join(","));for(let n of(r&&r.updateFromTimer(e),e.children))g(n);_.pop()};for(let e of h)g(e);requestAnimationFrame(this.updateTimers)},this.sparklineRef=e=>r=>{r&&this.sparklines.set(e.join(","),r)},this.frameRequest=null,this.renderHUDNode=(e,r=[])=>{let n=r.concat([e.id]),a=150-10*r.length,o=u.sx.add({color:"black"}).$.color,s=u.sx.add({backgroundColor:"white"}).$.backgroundColor,l=!!(this.state?.nodesHiddenState??{})[e.id];return i.createElement("div",{key:e.id},i.createElement("div",{className:h.n5},i.createElement("div",null,i.createElement("div",null,i.createElement("button",{style:{backgroundColor:"gray",display:"inline-block",marginRight:"2px"},onClick:()=>{this.toggleNodeHidden(e.id)}},l?"(+)":"(-)"),e.label),!l&&i.createElement(f,{ref:this.sparklineRef(n),fg:o,bg:s,barWidth:e.barWidth,max:e.max,height:40,autoResize:!!e.autoResize,width:a}))),e.children&&!l&&i.createElement("div",{className:h.Q3},e.children.map(e=>this.renderHUDNode(e,n))))},this.state={nodesHiddenState:{react:!0,frame:!0,"fullscreen-handle-event":!0,"cpp-malloc-call-count":!0,"cpp-malloc-size-totals":!0,"total-memory":!0,"cpp-heap-memory":!0,"render-job-queue-length":!0,"render-tree-swap-time":!0,"render-tree-stale-time":!0,"estimated-viewport-coverage":!0,"min-sharpness":!0,"avg-sharpness":!0}}}componentDidMount(){this.frameRequest=requestAnimationFrame(this.updateTimers)}componentWillUnmount(){this.frameRequest&&cancelAnimationFrame(this.frameRequest)}toggleNodeHidden(e){let r=this.state?.nodesHiddenState??{},n=!!r[e];this.setState({nodesHiddenState:{...r,[e]:!n}})}render(){let e=this.props.isFigjamFile?0:parseInt(p.uj0,10)+5,r=(0,c.bG)()+5;return i.createElement("div",{className:h.vY,style:{right:e,top:r}},_.map(e=>this.renderHUDNode(e)))}}E.displayName="PerfHUD";let y=null;function b(e){y?(a.unmountComponentAtNode(y),document.body.removeChild(y),y=null):(y=document.createElement("div"),document.body.appendChild(y),(0,o.H)(y).render(i.createElement(E,{isFigjamFile:e})))}},161115:(e,r,n)=>{n.d(r,{qg:()=>a,r5:()=>i}),n(411855),n(83909),n(356390),n(555074),n(301462),n(279702);let i=["NORMAL","SELECT_DIVIDER","DARKEN","MULTIPLY","LINEAR_BURN","COLOR_BURN","SELECT_DIVIDER","LIGHTEN","SCREEN","LINEAR_DODGE","COLOR_DODGE","SELECT_DIVIDER","OVERLAY","SOFT_LIGHT","HARD_LIGHT","SELECT_DIVIDER","DIFFERENCE","EXCLUSION","SELECT_DIVIDER","HUE","SATURATION","COLOR","LUMINOSITY"];function a(e,r){return e===r}["PASS_THROUGH"].concat(i)},889449:(e,r,n)=>{n.d(r,{U:()=>p});var i=n(411855),a=n(498750),o=n(138369),s=n(809831),l=n(29680),c=n(860178),d=n(239671),u=n(285533),m=n(209359);function p(e){let r=i.useRef(null);(0,l.f4)(()=>{let e=window.getSelection();if(!e)return;let n=e.focusNode;for(;n;){if(n===r.current){e.removeAllRanges();break}n=n.parentNode}});let n=(0,c.iZ)(),p=(0,s.my)()===d.nT.Design,h=(0,o.Kf)({isDesign:p,isUnauth:!n}),_=e.flowPanel??null,g=e.localStylesPanel??null;return h()?null:i.createElement("div",{ref:r,onKeyDown:e=>{if((0,a.Fo)(e)&&e.keyCode===a.Uz.A){let r=window.getSelection();if(r){let n=document.createRange();n.selectNodeContents(e.currentTarget),r.removeAllRanges(),r.addRange(n),e.preventDefault()}}},className:m.z},_,g,i.createElement(u.m,null))}},701306:(e,r,n)=>{n.d(r,{aj:()=>j,Af:()=>ed,DP:()=>Q,x5:()=>ec,ZN:()=>el,nu:()=>es,bm:()=>ee});var i=n(411855),a=n(188507),o=n(838516),s=n(268853),l=n(922827),c=n(629019),d=n.n(c),u=n(966712),m=n(844157),p=n(776621),h=n(939863),_=n(308977),g=n(115941),f=n(581250);n(780761);var E=n(452246),y=n(723081),b=n(617453),v=n(848661),I=n(29680),T=n(416095),S=n(666068),w=n(284321),A=n(234945),C=n(173454),N=n(507956),L=n(603634),O=n(846848),R=n(428877),P=n(836283),D=n(137906),k=n(564092);n(712685);var M=n(875157),F=n(32067),x=n(788612);let U="colors_inspect_panel--gradientColorContainer--KtmLk",B="colors_inspect_panel--paintIcon--MVzOV",V="colors_inspect_panel--styleNameContainer--HbhgI text--fontPos11--2LvXf text--_fontBase--QdLsd inspect_panels--tallRow--W9eni",G="colors_inspect_panel--stylePaintRow--5EqOv",H="colors_inspect_panel--paintColor--3DbXu text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa ellipsis--ellipsis--Tjyfa",K=e=>Number(e).toLocaleString("en",{style:"percent",maximumFractionDigits:2});function W(e){let{value:r}=e,n=void 0!==r&&(e.showOpaque||1!==r),a=K(r);return i.createElement(i.Fragment,null,n&&i.createElement("span",{className:H},a))}var $=n(393062);let Y=new Set(["SOLID","GRADIENT_ANGULAR","GRADIENT_DIAMOND","GRADIENT_LINEAR","GRADIENT_RADIAL"]),z=new y.ro;function j(e){let{blendMode:r,onError:n}=e,a=(0,v.gl)(r)||"string"==typeof r;return r&&!a&&(console.error(TypeError(`Expected mixed | string | undefined, got ${typeof r}`)),n&&n(r),r=void 0),i.createElement(x._p,{redact:["Normal","Pass through"],indent:e.indent,className:e.className,name:(0,h.t)("inspect_panel.colors.blend"),value:z.format(r)})}function q(e){let{isInStyle:r,rows:n}=e;return i.createElement("div",{className:U,"data-testid":"inspectMultilineColorRow"},i.createElement(x.d1,{className:d()({[G]:r},V),label:e.styleName,defaultLabel:e.defaultStyleName,isVariable:e.isVariable,variableId:e.variableId,isSuggestedVariable:e.isSuggestedVariable},!0!==e.hideColorChit?i.createElement(L.J,{className:B,paint:e.paint,tooltip:e.description}):i.createElement("div",null)),i.createElement(j,{className:eu({isInStyle:r}),indent:!0,blendMode:e.paint.blendMode,onError:r=>{let n=TypeError(`Expected string | undefined, got ${typeof r}`);console.error(n),(0,p.$D)(s.e.DEVELOPER_TOOLS,n,{extra:{type:typeof r,value:r,source:"MultiLinePaintValue",props:e}})}}),n)}function Z(e){let{format:r}=e,{paint:n,valueFormatter:a}=e.formattableColor,{variable:o,isSuggested:s,variableDisplayName:l,matchingVars:c}=e.formattableColor.variable??{};if(!n.color)return null;let d={...n.color,a:n.opacity??1},m=o?.id??o?.node_id,p=!1;if(o&&(p=!s||!(0,u.kc)().dt_inferred_vars_modal),p){let r=i.createElement(X,{format:e.format,valueFormatter:a,color:d,hideColorChit:e.hideColorChit,isInStyle:e.isInStyle});return i.createElement(q,{paint:n,styleName:l,hideColorChit:e.hideColorChit,isVariable:!0,variableId:m,isSuggestedVariable:s,isInStyle:e.isInStyle,rows:r})}let h=(0,$.q)(d,r,a);return i.createElement(x._p,{className:eu({format:r,isInStyle:e.isInStyle}),copyValue:h.copyValue,matchingVars:c},!0!==e.hideColorChit?i.createElement(L.J,{className:B,paint:n}):i.createElement("div",null),i.createElement("span",{className:H,"data-testid":"inspectColorRow"},h.value),$.x.has(e.format)&&i.createElement(W,{value:d.a}))}function X(e){let r=(0,$.q)(e.color,e.format,e.valueFormatter);return i.createElement(x._p,{className:eu({isShort:!e.hideColorChit,format:e.format,isInGradient:e.isInGradient,isInStyle:e.isInStyle}),copyValue:r.copyValue,variableId:e.variableId,matchingVars:e.matchingVars},i.createElement("div",null),i.createElement("span",{className:H},r.value),$.x.has(e.format)&&i.createElement(W,{value:e.color.a,showOpaque:e.alwaysShowOpacity||!1}))}function J(e){let{encodedPaint:r,paint:n,colors:a,valueFormatter:o,typeFormatter:s}=e.formattableColor,l=(0,u.kc)().ds_new_dev_mode_gradient_ux?i.createElement(i.Fragment,null,n.stopsVar?.map((a,s)=>i.createElement(em,{encodedPaint:r,format:e.format,gradientStop:a,isInStyle:e.isInStyle,key:s,opacity:n.opacity??1,valueFormatter:o}))):i.createElement(i.Fragment,null,a.map((r,n)=>i.createElement(X,{alwaysShowOpacity:!0,format:e.format,key:n,valueFormatter:o,color:r,hideColorChit:e.hideColorChit,isInStyle:e.isInStyle})));return i.createElement(q,{paint:n,defaultStyleName:(0,h.t)("inspect_panel.colors.gradient",{gradientType:s(n.type)}),hideColorChit:e.hideColorChit,isInStyle:e.isInStyle,rows:l})}function Q(e){let{formattableColor:r}=e;switch(r.paint.type){case"SOLID":return i.createElement(Z,{...e});case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return i.createElement(J,{...e});default:return null}}function ee(e){return e.visible&&e.type&&Y.has(e.type)}let et=()=>{let e=(0,a.d4)(e=>e.mirror.selectionProperties.fillPaints),r=F.VW()?.type,n=i.useMemo(()=>!e||(0,v.gl)(e)?[]:e,[e]),o=(0,F.pF)(e=>(0,m.b)(e.mirror.selectionProperties,"inheritFillStyleKey")),s=(0,a.d4)(w.e_),c=(0,a.d4)(e=>e.mirror.selectionProperties.inheritFillStyleKey),d=r&&(0,M.Ku)(r),u=(0,R.Ig)(),p=c?(0,T.Gp)(c,[],s):void 0,h=n.filter(ee).map(e=>(0,R.dc)(e,u,d||l.j0r.ALL_FILLS));return p&&o?[(0,R.rP)(o,p,h)]:h},er=()=>{let e=(0,a.d4)(e=>e.mirror.selectionProperties.textDecorationFillPaints),r=(0,a.d4)(e=>e.mirror.selectionProperties.textDecoration),n=i.useMemo(()=>"UNDERLINE"!==r||!e||(0,v.gl)(e)?[]:e,[r,e]),o=(0,R.Ig)();return n.filter(ee).map(e=>(0,R.dc)(e,o,l.j0r.TEXT_FILL))},en=()=>{let e=(0,F.jY)(),r=(0,F.uQ)(),n=(0,f.Q)(),o=(0,_.v4)(),s=(0,N.ks)(),l=(0,a.d4)(e=>(0,A.$u)(e)>1?e.mirror.selectionPaints.paints:e.mirror.selectionPaints.paintsDirectlyOnSingleNode),c=(0,R.Ig)(),d=i.useMemo(()=>l.filter(e=>ee(e.paint)).map(e=>(0,R.dc)(e.paint,c)),[l,c]),u=(0,a.d4)(e=>(0,A.$u)(e)>1?e.mirror.selectionPaints.styles:e.mirror.selectionPaints.stylesDirectlyOnSingleNode),m=(0,a.d4)(w.e_),p=i.useMemo(()=>{let r=u.map(e=>({ds:(0,T.Gp)(e.styleKey,e.styleGUIDs,m),name:e.styleName})),n=[];return r.forEach(({ds:r,name:i})=>{if(!r)return;let a=r.kind===C.AT.DANGLING?{...r.value,style_type:"FILL"}:r.value,o=e=>e.filter(ee).map(e=>(0,R.dc)(e,c)),s=(0,S.QH)(a);if(s&&"FILL"===s.type)n.push((0,R.rP)(i,r,o(s.fillPaints)));else{let a=e.get(r.value.node_id);a&&n.push((0,R.rP)(i,r,o(a.fills)))}}),n},[u,m,e,c]);return i.useMemo(()=>{let e=[...p,...d];return(0,k.QT)(e,r,n.inspectionMode,o,s)},[p,d,r,n.inspectionMode,o,s])},ei=(e,r)=>e.type===P.q.STYLE?i.createElement(eo,{color:e,format:r.format}):i.createElement(ea,{color:e,format:r.format,hideColorChit:r.hideColorChit});function ea(e){return i.createElement(Q,{format:e.format,formattableColor:e.color,hideColorChit:e.hideColorChit})}function eo(e){let r=(0,a.wA)(),n=e.color.dsStyle.kind,s=e.color.dsStyle.value.node_id,l=i.useMemo(()=>(0,o.s)(()=>{s&&r(E.rb({styleNodeId:s,styleKind:n}))}),[r,n,s]);i.useEffect(l,[l]);let c=e.color.dsStyle.value;return n===C.AT.DANGLING&&(c.style_type="FILL",c.node_id=s),i.createElement(i.Fragment,null,i.createElement(x._p,{className:"colors_inspect_panel--styleNameRow--RknQ9 inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",copyValue:e.color.name,dataTestId:"styleNameRow"},i.createElement(D.zi,{dsStyle:c,hideNameInTooltip:!0}),i.createElement(x._p,{className:"colors_inspect_panel--paintName--t-J8u text--fontPos11--2LvXf text--_fontBase--QdLsd ellipsis--ellipsis--Tjyfa",value:e.color.name})),e.color.paints.map(r=>i.createElement("div",{key:r.encodedPaint,"data-testid":"stylePaintRow"},i.createElement(Q,{format:e.format,formattableColor:r,hideColorChit:e.hideColorChit,isInStyle:!0}))))}function es(e){let r=(0,b.Ku)(),n=e.formattableColors,a=i.useMemo(()=>({format:r}),[r]);return i.createElement(x.x0,{limit:5,data:n,renderElement:ei,extras:a})}function el(){let e=(0,N.ks)(),r=(0,F.uQ)(),n=I.eY().get(r??"")?.type,a=et(),o=er(),s=(0,f.Q)(),l=(0,_.v4)(),c=(0,N.ks)(),d="TEXT"===n?[...a,...o]:a,u=(0,k.QT)(d,r,s.inspectionMode,l,c),m=(0,b.Ku)(),p=i.useMemo(()=>i.createElement(ed,{id:"colors-panel"}),[]),g=F.T4.useCopyAllColors(u,m);return u.length<1?null:i.createElement(x.VZ,{title:e?"TEXT"===n?(0,h.t)("dev_handoff.inspect_panel.fills.text"):(0,h.t)("dev_handoff.inspect_panel.fills.background"):(0,h.t)("inspect_panel.colors.title"),additionalHeaders:p,copyAllValue:g,recordingKey:"colors"},i.createElement(es,{formattableColors:u}))}function ec(){let e=en(),r=(0,b.Ku)(),n=i.useMemo(()=>i.createElement(ed,{id:"colors-panel"}),[]),a=F.T4.useCopyAllColors(e,r);return e.length<1?null:i.createElement(x.VZ,{title:(0,h.t)("inspect_panel.colors.title"),additionalHeaders:n,copyAllValue:a,recordingKey:"colors"},i.createElement(es,{formattableColors:e}))}function ed(e){let r=(0,a.wA)(),n=(0,b.Ku)(),o=(0,a.d4)(e=>e.dropdownShown),s=(0,N.ks)(),c=(0,x.SV)("inspection_panel_color_format_change"),d=i.useCallback(e=>{(0,b.UK)().colorFormat.set(e),c({value:O.Fr.format(e)})},[c]);return i.createElement("div",{className:"colors_inspect_panel--colorPanelControls--xeWFU"},i.createElement(O.bO,{id:`inspect-color-type-select:${e.id}`,className:"colors_inspect_panel--typeSelect--A0Z4U",dropdownClassName:"colors_inspect_panel--typeSelectDropdown--zffDS",property:n,formatter:O.Fr,onChange:d,dispatch:r,dropdownShown:o,dropdownAlignment:"right"},i.createElement(O.ef,{value:l.NVY.HEX}),i.createElement(O.ef,{value:l.NVY.RGB}),!s&&i.createElement(O.ef,{value:l.NVY.CSS}),i.createElement(O.ef,{value:l.NVY.HSL}),i.createElement(O.ef,{value:l.NVY.HSB}),s&&i.createElement(O.ef,{value:l.NVY.UIColor})))}function eu(e={}){let{isShort:r=!1,format:n=l.NVY.HEX,isInGradient:i,isInStyle:a}=e,o=n===l.NVY.HEX?"":"colors_inspect_panel--propertyRowTwoColumn--opscx";return d()(r?"colors_inspect_panel--propertyColorRowShort--h-1kY colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--basePropertyRow--dLxSz inspect_panels--_basePropertyRow--StmAE":"colors_inspect_panel--propertyColorRowTall--5z3CC colors_inspect_panel--_propertyColorRow--gGOzK inspect_panels--tallPropertyRow--oxnys inspect_panels--_basePropertyRow--StmAE inspect_panels--tallRow--W9eni",o,i?"colors_inspect_panel--gradientPaintRow--CYk-v":void 0,a?G:void 0)}function em(e){let{gradientStop:r,encodedPaint:n,format:a,isInStyle:o,opacity:s,valueFormatter:l}=e,{color:c}=r,{copyValue:u,isSuggested:m,isVariableRow:p,valueWithoutOpacity:h,variable:_,variableDisplayName:f}=(0,g.X)({...e.gradientStop,encodedPaint:n,valueFormatter:l}),E=d()({"colors_inspect_panel--gradientSingleRow--OZZVn":!0,"colors_inspect_panel--gradientVariableSingleRow--Hse0d":p,"colors_inspect_panel--rowInStyle--DcVuq":o}),y=i.createElement(L.J,{className:B,color:c,opacity:s});return p?i.createElement("div",{className:U},i.createElement(x.d1,{className:d()(E,V),isVariable:!0,variableId:_.node_id,isSuggestedVariable:m,label:f},y),i.createElement(X,{alwaysShowOpacity:!0,format:e.format,valueFormatter:l,color:c,isInGradient:!0,isInStyle:e.isInStyle})):i.createElement(x._p,{className:d()(eu({format:a}),E),copyValue:u},y,i.createElement("span",{className:H,"data-testid":"inspectColorRow"},h),$.x.has(e.format)&&i.createElement(W,{value:c.a}))}},32067:(e,r,n)=>{n.d(r,{Cj:()=>A,O1:()=>T,T4:()=>i,VW:()=>I,Wf:()=>v,jY:()=>S,pF:()=>w,uQ:()=>y,um:()=>b});var i,a=n(411855),o=n(188507);n(561546);var s=n(922827),l=n(879441),c=n(413145),d=n(884139),u=n(970516),m=n(617453),p=n(848661);n(555074);var h=n(869156),_=n(601607),g=n(428877),f=n(836283),E=n(533573);function y(){let e=(0,o.d4)(e=>e.mirror.selectionProperties?.numSelected===1),r=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return e&&Object.keys(r).find(e=>e)||null}function b(e,r){return e&&Number(e).toLocaleString("en",{maximumFractionDigits:r,useGrouping:!1})}function v(e=0){return Number(e).toLocaleString("en",{maximumFractionDigits:2,useGrouping:!1})}function I(){let e=y(),r=(0,_.Jk)(e);if(null!=e&&null!=r)return r}function T(){let e=function(){let e=(0,o.d4)(e=>e.mirror.sceneGraphSelection);return a.useMemo(()=>{let r=Object.keys(e);return 0===r.length?null:r},[e])}(),r=(0,_.ew)(e??[]);if(e)return r}function S(){let e=(0,o.d4)(e=>e.mirror.objectsPanelRowRebuildCounter);return(0,_.hr)((e,r)=>e,e)}function w(e){return(0,o.d4)(r=>{let n=e(r);if(null!=n&&(0,p.hS)(n))return n})}function A(e,r){let n=(0,o.wA)(),i=a.useCallback(()=>{let i=window.getSelection();if(i&&i.toString().length>0||!e)return null;n(u.lW({stringToCopy:e.toString(),ignoreLineBreaks:!1})),r&&r()},[r,e,n]);return e?i:void 0}(e=>{let r={prefix:"",suffix:"",delimiter:": ",quoted:!1};function n(e,n){let i="",a={...r,...n};return e.forEach(e=>{if(e[1]){let{prefix:r,suffix:n,delimiter:o,quoted:s}=e.length>2?{...a,...e[2]}:a,l=s?`"${e[1]}"`:e[1];i+=`${r}${e[0]}${o}${l}${n}
`}}),i}e.copyPairs=n;let i=["true","false","nil","null"];function u(e,r){return`var(--${(0,d.OX)(r)}, ${e})`}e.unquoteEnumerableValues=function(e){return e.map(e=>{let[r,n]=e;return"string"==typeof n&&i.includes(n.toLowerCase())?[r,n,{quoted:!1}]:e})};let p=(e,r,n)=>{let{paint:i}=e,{variable:a}=e.variable??{};switch(i.type){case"SOLID":if(1===n){let r=e.valueFormatter(e.colors[0],{hexCSSValue:!0});return a?u(r,a.name):r}return function(e,r){let n=s.phr.convertGradientPaintToCSS(e.encodedPaint);return(r?n.replace(/(#[a-f0-9]{6})|(rgba\(\d{1,3}, \d{1,3}, \d{1,3}, \d\.\d{1,2})/gi,e=>u(e,r.name)):null)??n}(e,a);case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":case"GRADIENT_DIAMOND":case"GRADIENT_ANGULAR":return s.phr.convertGradientPaintToCSS(e.encodedPaint)}};function _(e,r){return e?.map(n=>p(n,r,e?.length||0))?.join(",\n")}e.copyColors=_;let y={MULTIPLY:"multiply",SCREEN:"screen",OVERLAY:"overlay",DARKEN:"darken",LIGHTEN:"lighten",COLOR_DODGE:"color-dodge",SATURATION:"saturation",COLOR:"color",LUMINOSITY:"luminosity"},I=(e=[])=>e.flatMap(e=>e.type===f.q.STYLE?e.paints:e),T="background";e.useCopyAllColors=function(e,r){let i=(0,o.d4)(e=>e.mirror.selectionProperties.numSelected)||0,s=I(e),l=a.useCallback(()=>{if(1===i&&s){let e=new Set;if(s.forEach(r=>{r.paint.blendMode&&e.add(r.paint.blendMode)}),e.size<=1){let i=_(s,r),a=[];i&&a.push([T,i]);let o=[...e],l=o[0]?y[o[0]]:void 0;return l&&a.push(["background-blend-mode",l]),n(a,{suffix:";"})}}return n(s.reduce((e,n)=>{let i=n.paint.blendMode,a=i?y[i]:void 0;a&&e.push(["background-blend-mode",a]);let o=p(n,r,1),s=o?[T,o]:void 0;return s&&e.push(s),e},[]).filter(e=>e).map(e=>e),{suffix:";"})},[s,i,r]);return s?l:void 0};let S=(r,i,a,o)=>{let s=i.includes(" "),l=I(a),c=l.length>1||1===l.length&&"SOLID"!==l[0].paint.type,d=e.copyColors(l,r);if(!c&&!s)return`${o??"border"}: ${i} solid ${d}`;let u=s?[["border-width",i],["border-style","solid"]]:[[`${o??"border"}`,`${i} solid`]];return d&&u.push(c?["border-image-source",d]:["border-color",d]),n(u,{suffix:";\n"})};function w(e){return e.map(e=>void 0===e?"":"string"==typeof e?e:`${v(e)}px`)}e.useStrokeCopyValue=function(e,r,n){let i=(0,m.Ku)(),o=I(r);return a.useMemo(()=>S(i,e,o,n),[i,e,o,n])},e.useCopyAllStrokes=function(e){let r=(0,m.Ku)();return a.useMemo(()=>e.map(e=>S(r,e.strokeWeight,e.strokeColors,e.borderCSSKey)).join("\n"),[r,e])},e.withPixels=w;let A=(r,i,a,o)=>{if("FOREGROUND_BLUR"===r.type||"BACKGROUND_BLUR"===r.type)return n([["backdrop-filter",`blur(${r.radius}px)`]]);let s=e.copyColors(i,a);if(!r.offset)return;let[l,d,u,m,p]=o&&5===o.length?o:[null,null,null,null,null];return n([["box-shadow",[w([(0,E.NX)({variable:l})||r.offset?.x,(0,E.NX)({variable:d})||r.offset?.y,(0,E.NX)({variable:u})||r.radius,(0,E.NX)({variable:m})||r.spread]).join(" "),(0,E.NX)({variable:p})||s,"INNER_SHADOW"===r.type?"inset":void 0].filter(c.t).join(" ")]],{suffix:";"})};e.useCopyShadow=function(e,r){let n=(0,m.Ku)(),i=function(e,r){let n=a.useMemo(()=>e?[{color:e,colorVar:void 0}]:[],[void 0,e]);return(0,g.y6)(n)}(e.color);return a.useMemo(()=>A(e,i,n,r),[e,i,n,r])},e.useCopyAllShadows=function(e){let r=(0,m.Ku)(),n=(0,g.OE)(e,e=>e.color),i=e.flatMap(e=>[e.xVar,e.yVar,e.radiusVar,e.spreadVar,e.colorVar]).map(e=>e?.value?.alias?l.dI(e.value.alias):void 0),o=(0,h.hg)(i??[]);return a.useCallback(()=>n.filter(e=>e.color).map((e,n)=>A(e.value,[e.color],r,[o?.[5*n],o?.[5*n+1],o?.[5*n+2],o?.[5*n+3],o?.[5*n+4]])).join("\n"),[n,r,o])};let C=(e,r,n)=>{switch(e){case"Linear":return"linear";case"Ease in":return"ease-in";case"Ease out":return"ease-out";case"Ease in and out":return"ease-in-out";case"Ease in back":return"cubic-bezier(0.3, -0.05, 0.7, -0.5)";case"Ease out back":return"cubic-bezier(0.45, 1.45, 0.8, 1)";case"Ease in and out back":return"cubic-bezier(0.7, -0.4, 0.4, 1.4)";default:if(void 0==e)return;if(r){if(n)return`{ mass: ${n[0]}, stiffness: ${n[1]}, damping: ${n[2]} }`;return e}return`cubic-bezier(${e})`}},N=e=>`${b(1e3*e,2)}ms`,L=r=>{let n=`// ${r.event}
`,i=r.action,a=[];return r.delay&&a.push(["animation-delay",N(r.delay)]),r.action&&(a.push([`// ${i?.action}`,`"${i?.value??""}"`]),i?.hasAnimation&&(a.push(["// Animate",i?.animation??""]),i?.isSpringTransition?a.push(["// Spring",C(i?.curve,i?.isSpringTransition,i?.curveFunction)]):(a.push(["animation-timing-function",C(i?.curve)]),a.push(["animation-duration",N(i.duration??0)])))),n+e.copyPairs(a,{suffix:";"})};e.useCopyAllInteractions=function(e){return a.useCallback(()=>e.map(e=>L(e)).join("\n"),[e])};let O=e=>{let r=e.image?.name??"Image",i=`${r}.${e.animatedImage?"gif":"png"}`;return n([[`// ${e.animatedImage?"GIF":"Image"}`,r],["background",`url("${i}")`],["background-size",(e=>"FILL"==e?"cover":"FIT"==e?"contain":void 0)(e.imageScaleMode)],["opacity",e.opacity<1?e.opacity.toFixed(2):void 0],["background-blend-mode",y[e.blendMode]]],{suffix:";"})};e.useCopyImages=function(e){return a.useCallback(()=>e.map(e=>O(e)).join("\n"),[e])}})(i||(i={}))},788612:(e,r,n)=>{n.d(r,{Cm:()=>eo,HF:()=>ec,I7:()=>er,M6:()=>ei,N7:()=>Z,SH:()=>W,SV:()=>K,VZ:()=>Y,YE:()=>el,ZQ:()=>G,_p:()=>es,d1:()=>Q,lz:()=>ed,nd:()=>X,r4:()=>ep,sD:()=>et,x0:()=>em});var i=n(411855),a=n(188507),o=n(75395),s=n(615925),l=n(83783),c=n(629019),d=n.n(c),u=n(776250),m=n(830646),p=n(794272),h=n(966712),_=n(498750),g=n(860601),f=n(563706),E=n(153234),y=n(736242),b=n(964389),v=n(939863),I=n(780761),T=n(964881),S=n(970516),w=n(973149),A=n(356390),C=n(848661),N=n(869156),L=n(335682),O=n(239671),R=n(498606),P=n(507956),D=n(7959),k=n(712685),M=n(32067),F=n(673867),x=n(659211);function U({name:e,fileKey:r,border:n,children:a,hideHeader:o,noPadding:s,noBorder:c,recordingKey:m,dataTestId:h,onClick:g}){let{selectedNodeId:E,selectedPageId:y,isMultiSelect:b,sceneGraph:v,editorType:I}=(0,p.R)(e=>{let r=Object.keys(e.mirror.sceneGraphSelection);return{selectedPageId:e.mirror.appModel.currentPage,selectedNodeId:r[0],isMultiSelect:r.length>1,sceneGraph:e.mirror.sceneGraph,editorType:"fullscreen"!==e.selectedView.view?O.nT.Design:e.selectedView.editorType}}),S=!!(0,T.hA)(),w=n=>{e&&(0,u.sx)("inspection_panel_shortcut",{...n,file_key:r,name:e,editor_type:I})},C=n?x.F7:x.YK;return o&&(C=n?x.S4:x.Tq),s&&(C=x.JY),c&&(C=d()(C,x.mD)),i.createElement(D.zi,{className:C,tabIndex:-1,onKeyDown:e=>{let r=!1;if((0,_.Fo)(e)&&e.keyCode===_.Uz.C?(r=!0,w({action:"copy"})):(0,_.Fo)(e)&&e.keyCode===_.Uz.A?(r=!0,w({action:"select_all"})):f.Ay.mac?"Meta"===e.key&&(r=!0):"Control"===e.key&&(r=!0),(e.target?.type==="text"||e.target?.type==="textarea"||e.target?.tabIndex===0)&&(r=!0),r);else{let r=window.getSelection();if(!r)return;let n=0===r.toString().length;r.removeAllRanges(),(n||e.keyCode!==_.Uz.ESCAPE)&&A.Y5.forwardKeyboardEvent(e.nativeEvent)}},onDoubleClick:n=>{if(e)return(0,u.sx)("inspection_panel_dbl_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,_.sN)(n),fileKey:r,editor_type:I}),!1},onClick:n=>{let i,a;if(e){if(g?.(n),E&&v)try{let e=(0,l.Ql)(v,E);i=e?.guid,a=e?.type}catch{}return(0,u.sx)("inspection_panel_clicked",{name:e,x:n.clientX,y:n.clientY,modifiers:(0,_.sN)(n),fileKey:r,selectedPageId:y,selectedNodeId:E,topLevelFrameId:i,topLevelNodeType:a,isMultiSelect:b,editor_type:I,isDevModeFocusView:S}),!1}},recordingKey:m,"data-testid":h,id:h},a)}let B=(e,r)=>{let[n,a]=i.useState(!1),o=i.useCallback(()=>a(!0),[a]),s=i.useCallback(()=>a(!1),[a]);return i.useMemo(()=>({value:n?e:r,eventHandlers:{onMouseOver:o,onMouseOut:s},isHovered:n}),[n,e,r,o,s])},V=(e,r)=>{let[n,a]=i.useState(!1),o=i.useCallback(()=>a(!0),[a]),s=i.useCallback(()=>a(!1),[a]);return i.useMemo(()=>[n?e:r,{onMouseDown:o,onMouseUp:s}],[n,e,r,o,s])};function G(e,r){let{value:n,eventHandlers:a,isHovered:o}=B(r),[s,l]=V(e);return i.useMemo(()=>({value:s||n,eventHandlers:{...a,...l},isHovered:o}),[s,l,n,a,o])}let H=i.createContext({});function K(e,r){let n=i.useContext(H),a=i.useMemo(()=>({name:(r||n).recordingKey}),[r,n]),o=(0,m.j)(e,a);return(r||n).recordingKey?o:g.lQ}function W(e){let{title:r,copyAllValue:n,additionalHeaders:o,eventHandlers:l,isHovered:c,recordingKey:u}=e,m=K("inspection_panel_copy_all_click",i.useContext(H)),p=(0,a.wA)(),_=(0,E.rf)(u,"click",i.useCallback(()=>{if(!n)return;let e="string"==typeof n?n:n();p(S.lW({stringToCopy:e,ignoreLineBreaks:!1})),m({value:e})},[m,p,n])),{ref:g,...f}=(0,F.X)(r,c),y=i.useRef(null),I=(0,P.ks)(),T=(0,i.useMemo)(()=>({name:"Copy properties button",selectedAll:!1,source:"properties",title:r,isDevMode:I}),[I,r]);return r?i.createElement("div",{className:d()(x.Dn,{[x._]:e.snug,[x.iY]:e.noPadding}),ref:y},i.createElement(D.xw,{innerRef:g,...f,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevron,forceNoChevron:e.doNotReserveSpaceForChevron,className:d()(x.yr,{[x.Xx]:e.thin}),"data-testid":"inspectPanelTitle","data-onboarding-key":e.onboardingKey},r),i.createElement("div",{className:x.W0},n&&!(0,h.kc)().dt_dev_view_variables&&i.createElement(b.e6,{htmlAttributes:l,className:x.cL,onClick:_,trackingProperties:T},(0,v.tx)("inspect_panel.copy")),o,n&&(0,h.kc)().dt_dev_view_variables&&i.createElement(b.Me,{htmlAttributes:{...l,"data-tooltip":(0,v.t)("inspect_panel.copy"),"data-tooltip-type":R.Ib.TEXT},onClick:_,trackingProperties:T,"aria-label":(0,v.t)("inspect_panel.copy")},i.createElement(s.X,null))),e.children):null}var $=(e=>(e[e.DEFAULT=0]="DEFAULT",e[e.NONE=1]="NONE",e))($||{});function Y(e){let{children:r,title:n="",copyAllValue:o,recordingKey:s}=e,l=(0,a.d4)(L.sS),c=i.useMemo(()=>`inspect:${s.toLowerCase()}`,[s]),u=i.useMemo(()=>({recordingKey:`inspect:${s}`}),[s]),{value:m,eventHandlers:p,isHovered:h}=G(x.Rp,x.fF);return i.createElement(U,{border:!0,fileKey:l,name:c,hideHeader:e.hideHeader,noPadding:e.noPadding,noBorder:e.noBorder,recordingKey:(0,E.Pt)(s,"panel"),dataTestId:`${s}-inspection-panel`,onClick:e.onClick},i.createElement(H.Provider,{value:u},e.formattedHeader??(!0!==e.hideHeader&&i.createElement(W,{title:n,copyAllValue:o,eventHandlers:p,additionalHeaders:e.additionalHeaders,isHovered:h,snug:e.snugTitle,thin:e.thinTitle,noPadding:e.noPadding,doNotReserveSpaceForChevron:e.doNotReserveSpaceForChevronInTitle,recordingKey:(0,E.Pt)(s,"header"),onboardingKey:e.headerOnboardingKey},e.headerChildren)),i.createElement("div",{className:d()(x.HH,m)},r)))}let z={maximumFractionDigits:2,useGrouping:!1},j={maximumFractionDigits:2},q={maximumFractionDigits:2,useGrouping:!1,style:"unit",unit:"degree",unitDisplay:"narrow"},Z={...q,unitDisplay:"short"};function X(e,r){let n=e.toLocaleString("en",z);return`${n}${r}`}function J(e){switch(e.format){case"pixels":if("number"==typeof e.value)return X(e.value,"px");if(Array.isArray(e.value)){let r=e.value.map(e=>e.toLocaleString("en",j)).join("px, ");return`${r}px`}return`${e.value}`;case"percent":if(!e.value)return;return Number(e.value).toLocaleString("en",{...z,style:"percent"});case"fig_number":return e.value?w.wf.format(e.value):void 0;case"millis":return e.value&&X(1e3*e.value,"ms");case"degrees":return e.value&&e.value.toLocaleString("en",q);case"mixed":return e.value.map(J).join(", ");default:return e.value?.toString()}}function Q(e){let[r,n]=i.useState(!1),a=e.label||e.defaultLabel,o=e.label?x.Nw:x.G1;e.labelClassName&&(o+=` ${e.labelClassName}`);let s=et(a),l=(0,N.u)(e.variableId);return i.createElement(es,{className:e.className,copyValue:e.label,onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),isHovered:r,variableId:e.variableId},e.children&&i.createElement("div",null,e.children),a&&i.createElement("div",{className:x.Pq},e.isVariable||e.isSuggestedVariable?i.createElement(k.wG,{text:a,isDeleted:l?.subscriptionStatus==="LOCAL"&&l?.isSoftDeleted,containerClassName:x.gO,disableHover:!0,isHovered:r,isInferred:e.isSuggestedVariable,tooltip:e.isSuggestedVariable?(0,v.t)("dev_handoff.variables.inferred_color"):void 0,isNonInteractive:!0}):i.createElement("span",{ref:s,className:o,dir:"auto"},a)))}function ee(){return i.createElement("span",{className:x.jg})}function et(e){let r=i.useRef(null),n=r.current,a=n&&(n.offsetHeight<n.scrollHeight||n.offsetWidth<n.scrollWidth);return i.useEffect(()=>{n&&a&&e&&(n.setAttribute("data-tooltip",e.toString()),n.setAttribute("data-tooltip-type",R.Ib.TEXT))},[e,n,a]),r}function er({title:e}){return i.createElement("div",{className:x.Dn},i.createElement(D.xw,{className:x.yr},e))}let en=e=>e?.valueOf()===(0,v.t)("collaboration.branching_node_treatments.value.empty_dash");function ei({basis:e,change:r,name:n}){return i.createElement("div",{className:d()(x.zy)},i.createElement("span",{className:x.rG},n),i.createElement("div",{className:d()(x.vd,x.mW)},i.createElement(o.E,{onClick:e.onClick,className:d()(x.Hz,x.ij,en(e.value)&&x.T7)},e.value),i.createElement(o.E,{onClick:r.onClick,className:d()(x.Zg,x.ij,en(r.value)&&x.T7)},r.value)))}function ea({valueProps:e,isHovered:r,variableContainerClassName:n,rowRef:a}){let{variableId:o}=e,s=(0,N.u)(o);if("mixed"===e.format){let o=e.value.some(e=>!!e.variable);return i.createElement("div",{className:d()(x.M3,o&&x.Vd)},e.value.map((s,l)=>i.createElement("div",{key:l},i.createElement(ea,{valueProps:s,isHovered:r,variableContainerClassName:n,rowRef:a}),l<e.value.length-1&&!o&&i.createElement("span",null,", "))))}let l=`${J(e)}`;if(e.variable){let a=s?.subscriptionStatus==="LOCAL"&&s.isSoftDeleted;return i.createElement(k.wG,{dataTestId:"styledValueVariable",containerClassName:d()(x.gO,n),text:e.variable,disableHover:!0,isHovered:r,isInferred:e.isSuggestedVariable,isDeleted:a,tooltip:e.isSuggestedVariable?(0,v.t)("dev_handoff.variables.inferred_value",{value:l}):l,isNonInteractive:!0})}return i.createElement(i.Fragment,null,l)}function eo(e,r){let n=K("inspection_property_copy_click");return(0,M.Cj)(e,()=>{n({property:r,value:e})})}function es(e){let r="onValueClicked"in e&&e.onValueClicked,n="value"in e?J(e):void 0,a=null===e.copyValue?void 0:e.copyValue||n,s=eo(a,e.name),[l,c]=i.useState(!1),u=(0,F.X)(e.name),m=(0,F.X)(n),p=i.useRef(null),h=(0,I.i2)()&&!e.disableVariableInspection,_=(0,I.Yq)(p),g="redact"in e?e.redact:void 0,f=i.useMemo(()=>void 0===g?new Set:new Set(Array.isArray(g)?g:[g]),[g]),E=e.className||x.k$,b=e.multipleLines?x.mW:x.Nw,v=e.multipleLines?x.G3:x.Bz,T=()=>{c(!0),e.onMouseEnter?.()},S=()=>{c(!1),e.onMouseLeave?.()},w=void 0===e.copyValue||null===e.copyValue,{onCopy:A}=e,N=s||A?()=>{!s||w||s?.(),A?.()}:void 0;if(!("value"in e)){let r=i.createElement("div",{className:E},e.name&&e.showName&&i.createElement("span",{className:v,...u,"data-tooltip-tip-align-left":!0},e.name),e.children);return N?i.createElement("div",{className:d()(x.A9,x.ri),onMouseEnter:T,onMouseLeave:S,"data-testid":e.dataTestId,ref:p},i.createElement(o.E,{className:x.Uh,onClick:N},r),h&&i.createElement(I.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:p,isHovered:e.isHovered??l,recordingKey:"inspection_property"})):i.createElement("div",{className:d()(h&&x.ri,e.forceCopyableStyling&&x.zs),onMouseEnter:T,onMouseLeave:S,"data-testid":e.dataTestId,ref:p},r,h&&i.createElement(I.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:p,isHovered:e.isHovered??l,recordingKey:"inspection_property"}))}return!e.value||(0,C.gl)(e.value)||f.has(e.value)?null:i.createElement("div",{className:d()(a?x.A9:x.HD,{[x.ri]:h,[x.z7]:h&&(l||_)}),onMouseEnter:T,onMouseLeave:S,"data-testid":e.dataTestId,ref:p},i.createElement("div",{className:E,onClick:N,"data-testid":"inspectionPropertyRow"},e.indent&&i.createElement("div",null),e.name?i.createElement("span",{className:v,"data-testid":"inspectionPropertyName",...u,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},i.createElement(y.o,{text:e.name,className:x.qX})):i.createElement(ee,null),i.createElement("span",{className:b,"data-testid":"inspectionPropertyValue",...m,"data-tooltip-tip-align-left":!0,"data-tooltip-show-above":e.showTooltipAbove},r?i.createElement(o.E,{className:x.TH,onClick:e=>{e.stopPropagation(),r()}},i.createElement(ea,{valueProps:e,isHovered:l,rowRef:p})):i.createElement(ea,{valueProps:e,isHovered:l,rowRef:p}))),h&&i.createElement(I.$Q,{variableId:e.variableId,matchingVars:e.matchingVars,rowRef:p,isHovered:l,recordingKey:`inspection_property_${e.name}`}))}function el(e){return i.createElement(es,{...e,format:"pixels"})}function ec(e){let r={...e,copyValue:e.value?.toLocaleString("en",Z)};return i.createElement(es,{...r,format:"degrees"})}function ed(e){return i.createElement(es,{...e,format:"millis"})}function eu({value:e,extras:r,renderElement:n}){return n(e,r)}function em(e){let{data:r}=e,n=e.showMoreAmount||100,[a,s]=i.useState(e.limit),l=i.useCallback(()=>{s(Math.min(r.length,a+n))},[r,a,n,s]),c=Math.max(e.data.length-a,0),d="extras"in e?e.extras:{};return i.createElement(i.Fragment,null,e.data?.slice(0,a).map((r,n)=>i.createElement(eu,{value:r,extras:d,renderElement:e.renderElement,key:n})),0!==c&&i.createElement(o.E,{onClick:l,className:x.jP,key:"show-more"},(0,v.tx)("inspect_panel.property.remaining_more",{remaining:c})))}function ep(e){return i.createElement(es,{...e,format:"percent",copyValue:void 0!==e.value?Number(e.value).toLocaleString(void 0,{maximumFractionDigits:2}):e.copyValue,value:e.value,name:e.name,variable:e.variable,isSuggestedVariable:e.isSuggestedVariable,matchingVars:e.matchingVars,redact:e.redact,className:e.className,indent:e.indent})}},189283:(e,r,n)=>{n.d(r,{yg:()=>F});var i=n(411855),a=n(188507),o=n(75395),s=n(922827),l=n(879441),c=n(629019),d=n.n(c),u=n(163023),m=n(939863),p=n(308977),h=n(581250),_=n(780761),g=n(226055),f=n(617453),E=n(869156),y=n(526243),b=n(507956),v=n(701306),I=n(32067),T=n(788612),S=n(297281),w=n(999922),A=n(428877),C=n(564092),N=n(533573),L=n(965544),O=n(520489),R=n(666139);let P=new S.ck;function D(e){return e?.value?.alias?l.dI(e.value.alias):void 0}function k(e,r,n){return(0,T.Cm)(I.T4.withPixels([(0,N.NX)({variable:r})||e]).join(""),n)}function M(e){let r=(0,_.i2)(),n=i.useRef(null),a=i.useRef(null),s=i.useRef(null),c=i.useRef(null),p=i.useRef(null),h=P.format(e.type),y=(0,f.Ku)(),[b,S]=i.useState(!1),[A,N]=i.useState(!1),{spread:M,radius:F,offset:x,blendMode:U,showShadowBehindNode:B,visible:V,radiusVar:G,spreadVar:H,xVar:K,yVar:W,colorVar:$}=e,[Y,z,j,q]=(0,E.hg)([K,W,G,H,$].map(e=>e?.value?.alias?l.dI(e.value.alias):void 0)),Z=k(x?.x,Y,(0,m.t)("inspect_panel.shadows.x")),X=k(x?.y,z,(0,m.t)("inspect_panel.shadows.y")),J=k(F,j,(0,m.t)("inspect_panel.shadows.blur")),Q=k(M,q,(0,m.t)("inspect_panel.shadows.spread_tooltip")),ee=(0,C.xp)("MISSING",x?.x??0,void 0,!0),et=(0,C.xp)("MISSING",x?.y??0,void 0,!0),er=(0,C.xp)("MISSING",F??0,void 0,!0),en=(0,C.xp)("MISSING",M??0,void 0,!0),ei=(0,g.GS)();if(!V)return null;let ea="DROP_SHADOW"===e.type||"INNER_SHADOW"===e.type,eo="DROP_SHADOW"===e.type&&B,es=d()(O.qR,r&&O.DW);return i.createElement("div",{ref:n,className:O.cx},i.createElement(T.d1,{className:O.n1,labelClassName:O.Q5,label:e.styleName,defaultLabel:h},ei?(0,w.v)(e):i.createElement(u.B,{className:O.$x,svg:R.A})),ea&&i.createElement(T._p,{className:es,onMouseEnter:()=>S(!0),onMouseLeave:()=>S(!1),isHovered:b,disableVariableInspection:!0,forceCopyableStyling:!0},i.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.x")),i.createElement(o.E,{className:O.cu,ref:a,onClick:Z},i.createElement(L.S,{value:(0,I.Wf)(x?.x),varData:K})),r&&i.createElement(i.Fragment,null,i.createElement(_.$Q,{variableId:D(K),matchingVars:ee?.matchingVars,rowRef:n,rowRefForModalId:a,isHovered:b,recordingKey:"shadows_panel_x"}),i.createElement("div",null)),i.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.y")),i.createElement(o.E,{className:O.cu,ref:s,onClick:X},i.createElement(L.S,{value:(0,I.Wf)(x?.y),varData:W})),r&&i.createElement(_.$Q,{variableId:D(W),matchingVars:et?.matchingVars,rowRef:n,rowRefForModalId:s,isHovered:b,recordingKey:"shadows_panel_y"})),i.createElement(T._p,{className:es,onMouseEnter:()=>N(!0),onMouseLeave:()=>N(!1),isHovered:A,disableVariableInspection:!0,forceCopyableStyling:!0},i.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.blur")),i.createElement(o.E,{className:O.cu,ref:c,onClick:J},i.createElement(L.S,{value:(0,I.Wf)(F),varData:G})),r&&i.createElement(i.Fragment,null,i.createElement(_.$Q,{variableId:D(G),matchingVars:er?.matchingVars,rowRef:n,rowRefForModalId:c,isHovered:A,recordingKey:"shadows_panel_blur"}),i.createElement("div",null)),ea&&i.createElement(i.Fragment,null,i.createElement("div",{className:O.vP},(0,m.tx)("inspect_panel.shadows.spread_tooltip")),i.createElement(o.E,{className:O.cu,ref:p,onClick:Q},i.createElement(L.S,{value:(0,I.Wf)(M),varData:H})),r&&i.createElement(_.$Q,{variableId:D(H),matchingVars:en?.matchingVars,rowRef:n,rowRefForModalId:p,isHovered:A,recordingKey:"shadows_panel_spread"}))),ea&&i.createElement(i.Fragment,null,i.createElement(v.aj,{blendMode:U,className:eo?O.qx:O.W0}),eo&&i.createElement(T._p,{name:(0,m.t)("inspect_panel.shadows.behind_transparent_areas"),value:(0,m.t)("inspect_panel.shadows.behind_transparent_areas_true"),className:O.qx}),!!e.formattableColor&&i.createElement(v.DP,{formattableColor:e.formattableColor,format:y,isInStyle:!0})))}function F(){let e=(0,a.d4)(e=>e.mirror.selectionProperties.numSelected)||0,r=(0,y.Z)(),n=r[0],o=I.T4.useCopyAllShadows(n?.effects??[]),l=i.useMemo(()=>i.createElement(v.Af,{id:"shadows-panel"}),[]),c=function(e,r){let n=(0,I.uQ)(),i=(0,h.Q)(),a=(0,p.v4)(),o=(0,b.ks)(),l=(0,A.Ig)();return e.map(e=>{if(!e.color)return{...e,styleName:r};let c=(0,A.oI)({color:e.color,colorVar:e.colorVar,variableScope:s.j0r.EFFECT_COLOR,displayValue:l}),d=(0,C.uA)(c,n,a.id,o,i.inspectionMode);return{...e,styleName:r,formattableColor:d}}).filter(e=>!!e)}(n?.effects??[],n?.styleName),d=i.useCallback(e=>i.createElement(M,{styleName:e.styleName,key:e.id,id:e.id,type:e.type,offset:e.offset,radius:e.radius,spread:e.spread,formattableColor:e.formattableColor,blendMode:e.blendMode,visible:e.visible,colorVar:e.colorVar,xVar:e.xVar,yVar:e.yVar,radiusVar:e.radiusVar,spreadVar:e.spreadVar,showShadowBehindNode:e.showShadowBehindNode}),[]);return 1!==e||!r||r.length<1||n.effects.length<1?null:i.createElement(T.VZ,{title:(0,m.t)("inspect_panel.shadows.title"),recordingKey:"shadows",copyAllValue:o,additionalHeaders:l},i.createElement(T.x0,{limit:2,data:c,renderElement:d,extras:n.styleName}))}},393062:(e,r,n)=>{n.d(r,{q:()=>a,x:()=>i});let i=new Set([n(922827).NVY.HEX]);function a(e,r,n,a){let o=n(e,a);return i.has(r)?{value:o,copyValue:n(e,{hexCSSValue:!0})}:{value:o,copyValue:o}}},184027:(e,r,n)=>{n.d(r,{lk:()=>o,zK:()=>l,zM:()=>s});var i=n(411855),a=n(860601);let o=i.createContext(a.lQ);var s=(e=>(e[e.CREATE_STYLE=0]="CREATE_STYLE",e[e.EDIT_STYLE=1]="EDIT_STYLE",e[e.CREATE_VARIABLE_STYLE=2]="CREATE_VARIABLE_STYLE",e))(s||{});let l=i.createContext(null)},824374:(e,r,n)=>{n.d(r,{u:()=>A});var i=n(411855),a=n(986175),o=n(693554),s=n(966712),l=n(153234),c=n(46481),d=n(939863),u=n(723081),m=n(798099),p=n(848661),h=n(498606),_=n(161115),g=n(227795),f=n(538697),E=n(234587),y=n(733692),b=n(744684),v=n(811550);class I extends f.c${}class T extends f.l6{renderInput(){let e=y.p6;return"NORMAL"!==(0,p.E7)(this.props.property)&&(e=y.DU),i.createElement(g.K0,{className:e,tabIndex:-1,onPointerDown:m.dG,onMouseDown:this.onMouseDown,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":(0,d.t)("fullscreen.properties_panel.color_picker.blend_mode_select.tooltip.blend_mode")},i.createElement(S,{value:(0,p.E7)(this.props.property),defaultBlendMode:"NORMAL"}))}}function S({value:e,defaultBlendMode:r}){return(0,_.qg)(e,r)?i.createElement(c.U,{svg:v.A},i.createElement(a.N,null)):i.createElement(c.U,{svg:b.A},i.createElement(o.l,null))}let w=new u.ro,A=i.memo(function(e){let r=(0,E.cJ)(),n=_.r5.map((n,a)=>{let o="LINEAR_BURN"===n&&r;return"SELECT_DIVIDER"===n?i.createElement(f.sK,{key:a}):i.createElement(I,{key:a,value:n,disabled:o,recordingKey:l.Pt(e,n)})});return i.createElement(T,{id:"color-picker-blend-mode-select",dropdownClassName:y.Qg,inputClassName:y.p6,className:y.rO,property:e.blendMode,onChange:e.onBlendModeChange,formatter:w,dispatch:e.dispatch,dropdownShown:e.dropdownShown,onMouseDown:m.dG,minTop:6,recordingKey:e.recordingKey,enablePreview:!0,targetDomNode:(0,s.kc)().fpl_window?document.body:void 0},n)})},846848:(e,r,n)=>{n.d(r,{Fr:()=>Z,S7:()=>ee,bO:()=>j,ef:()=>q,mu:()=>eo,qi:()=>es,qo:()=>Y,sX:()=>X});var i=n(411855),a=n(188507),o=n(543509),s=n(582288),l=n(136880),c=n(922827),d=n(629019),u=n.n(d),m=n(91408),p=n(966712),h=n(498750),_=n(563706),g=n(153234),f=n(522739),E=n(46481),y=n(939863),b=n(293017),v=n(428654),I=n(775664),T=n(973149),S=n(356390),w=n(617453),A=n(869156),C=n(499777),N=n(301462),L=n(279702),O=n(498606),R=n(218973),P=n(603634),D=n(205135),k=n(227795),M=n(7959),F=n(538697),x=n(533573),U=n(712685),B=n(116416),V=n(335021),G=n(581135),H=n(244979),K=n(837746),W=n(455910),$=n(964829);let Y=(0,m.jz)(K.uj0);function z(e,r){return Object.keys(e).every(n=>e[n]===r[n])}class j extends F.l6{}class q extends F.c${}let Z={format:e=>e===c.NVY.HEX?"Hex":c.NVY[e]};var X=(e=>(e.FULL="full",e.WHITEBOARD="whiteboard",e))(X||{});let J=(e,r)=>({hslva:r===c.NVY.HSL?(0,l.oB)(e):(0,l.qN)(e),rgba:e}),Q=e=>{let r="",n="";switch(e){case"SOLID":case"IMAGE":case"EMOJI":case"VIDEO":r=e;break;case"GRADIENT_LINEAR":r="GRADIENT",n="LINEAR";break;case"GRADIENT_RADIAL":r="GRADIENT",n="RADIAL";break;case"GRADIENT_ANGULAR":r="GRADIENT";break;case"GRADIENT_DIAMOND":r="GRADIENT",n="DIAMOND"}return{paintPickerTab:r,paintPickerFilter:n}};function ee({recordingKey:e,...r}){let[n,a]=(0,i.useState)(J(r.color,r.colorFormat)),d=(0,i.useRef)(r.color),m=(0,i.useRef)(r.colorFormat),h=(0,C.Xo)();(0,i.useEffect)(()=>{if((z(r.color,d.current)||z(r.color,n.rgba))&&m.current===r.colorFormat)return;let e=J(r.color,r.colorFormat);e.hslva=function(e,r,n){("l"in r&&(0===r.l||1===r.l)||"v"in r&&0===r.v)&&(r={...r,s:e.s});let i=(0,o.xN)(e.h,0)&&(0,o.xN)(r.h,1),a=(0,o.xN)(e.h,1)&&(0,o.xN)(r.h,0);return((0,o.xN)(n.r,n.g)&&(0,o.xN)(n.r,n.b)||i||a)&&(r={...r,h:e.h}),r}(n.hslva,e.hslva,r.color),d.current=r.color,m.current=r.colorFormat,a(e)},[n,r.color,r.colorFormat]);let _=(e,n)=>{let i=(0,l.w_)(e);a({hslva:e,rgba:i}),r.onColorChange(i,n?L.zk.YES:L.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&N.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:I.z5.format(i),...r.analytics.properties})},f=(e,n)=>{if(!r.onOpacityChange){_(e,n);return}let i=(0,l.w_)(e);a({hslva:e,rgba:i}),r.onOpacityChange(i.a,n?L.zk.YES:L.zk.NO_BUT_TRACK_AS_EDIT),n&&r.analytics&&N.F.trackFromFullscreen(r.analytics.name,{source:"slider",color:I.z5.format(i),...r.analytics.properties})},b=(e,n)=>{r.onColorChange(e,n),r.analytics&&N.F.trackFromFullscreen(r.analytics.name,{source:"hex",color:I.z5.format(e),...r.analytics.properties})},v=e=>{e.stopPropagation();let{paintPickerTab:n,paintPickerFilter:i}=Q(r.paintPickerAnalytics?.paintType);S.Y5.triggerAction("toggle-dropper",{canAcceptStyles:r.canAcceptStyles,canAcceptVariables:r.canAcceptVariables,pickerShown:h?.id,paintPickerTab:n,paintPickerFilter:i,paintPickerSessionId:r.paintPickerSessionId})};return"whiteboard"===r.displayType?(()=>{let a=r.currentTool===c.NLJ.DROPPER_COLOR;return i.createElement("div",{className:W.BA},i.createElement("div",{className:W.s1},!r.dropperDisabled&&i.createElement("div",{className:W.go},i.createElement(k.YW,{svg:$.A,fill:"dark"===r.theme?"white":"black",selected:a,onPointerDown:v,recordingKey:g.Pt(e,"dropperButton"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.eyedropper"),tooltipForScreenReadersOnly:!0,className:u()({[W.fG]:!a&&"dark"===r.theme})})),i.createElement(er,{recordingKey:g.Pt(e,"hexInput"),...r,onColorChange:b})),i.createElement("div",{className:u()(W.MX,{[W.zB]:!r.hideOpacity})},i.createElement(B.e,{width:140,color:n.hslva,changeCallback:_,containerClass:W.aw,recordingKey:g.Pt(e,"hueControl")}),!r.hideOpacity&&i.createElement(V.x,{width:140,color:n.hslva,changeCallback:f,containerClass:W.aw,recordingKey:g.Pt(e,"opacityControl")})),i.createElement(G.T,{size:184,color:n.hslva,changeCallback:_,ignoreWheelCallback:!0,recordingKey:g.Pt(e,"slvControl")}))})():i.createElement("div",null,i.createElement(G.T,{size:Y,color:n.hslva,changeCallback:_,recordingKey:g.Pt(e,"slvControl"),containerClass:W.pZ}),i.createElement(M.Id,null,i.createElement("div",{className:W.ne},i.createElement("div",{className:W.go},i.createElement(k.YW,{selected:r.currentTool===c.NLJ.DROPPER_COLOR,onMouseDown:v,recordingKey:g.Pt(e,"dropperButton"),"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.properties_panel.color_picker.eyedropper"),tooltipForScreenReadersOnly:!0},i.createElement(E.U,{svg:$.A},i.createElement(s.G,null)))),i.createElement("div",{className:W.xJ},i.createElement(B.e,{width:156,color:n.hslva,changeCallback:_,containerClass:W.aw,recordingKey:g.Pt(e,"hueControl")}),i.createElement(V.x,{width:156,color:n.hslva,changeCallback:f,containerClass:W.aw,recordingKey:g.Pt(e,"opacityControl")}))),i.createElement(M.fI,null,i.createElement(j,{id:"color-input-type-select",className:W.NC,inputClassName:W.Hi,dropdownClassName:W.O4,property:r.colorFormat,formatter:Z,onChange:e=>{(0,w.UK)().colorFormat.set(e)},dispatch:r.dispatch,dropdownShown:r.dropdownShown,recordingKey:g.Pt(e,"colorFormatSelect"),targetDomNode:(0,p.kc)().fpl_window?document.body:void 0},i.createElement(q,{value:c.NVY.HEX,recordingKey:g.Pt(e,"hexOption")}),i.createElement(q,{value:c.NVY.RGB,recordingKey:g.Pt(e,"rgbOption")}),i.createElement(q,{value:c.NVY.CSS,recordingKey:g.Pt(e,"cssOption")}),i.createElement(q,{value:c.NVY.HSL,recordingKey:g.Pt(e,"hslOption")}),i.createElement(q,{value:c.NVY.HSB,recordingKey:g.Pt(e,"hsvOption")})),r.colorFormat===c.NVY.HEX&&i.createElement(er,{recordingKey:g.Pt(e,"hexInput"),...r}),r.colorFormat===c.NVY.RGB&&i.createElement(en,{recordingKey:g.Pt(e,"rgbInput"),...r}),r.colorFormat===c.NVY.CSS&&i.createElement(ei,{recordingKey:g.Pt(e,"cssInput"),...r}),(r.colorFormat===c.NVY.HSL||r.colorFormat===c.NVY.HSB)&&i.createElement(ea,{value:n.hslva,changeCallback:_,recordingKey:g.Pt(e,"hslvInput"),...r}))))}ee.displayName="ColorControls";let et=i.forwardRef((e,r)=>i.createElement("div",{ref:r,className:u()({[W.x4]:!e.isWhiteboard,[W.mP]:e.isWhiteboard})},e.children));function er(e){let r=(0,a.wA)(),n=(0,i.useRef)(null),o="whiteboard"===e.displayType;(0,i.useEffect)(()=>{o&&n.current&&(n.current.dataset.preferredTheme=e.theme)},[o,e.theme]);let s=(0,i.useMemo)(()=>o?I.z5:new I.rC({parseAlpha:!0}),[o]),l=e=>{e.keyCode===h.Uz.ESCAPE&&r(b.XE())},c=!(o||e.hideOpacity);return i.createElement(et,{ref:n,isWhiteboard:o},i.createElement(D.AN,{className:u()({[W.uh]:!o,[W.vh]:o}),squareRightBorder:!0,noBorderOnFocus:!0,formatter:s,property:e.color,onChange:e.onColorChange,autoFocus:!_.Ay.isIpad,onKeyDown:l,recordingKey:g.Pt(e,"color"),forwardedRef:e.hexInputRef}),c&&i.createElement(R.Pd,{className:W.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:l,recordingKey:g.Pt(e,"opacity")}))}class en extends g.o6{constructor(){super(...arguments),this.formatter=new T.o1({normalizeFactor:255,min:0,max:1}),this.onRChange=e=>this.props.onColorChange({...this.props.color,r:e}),this.onGChange=e=>this.props.onColorChange({...this.props.color,g:e}),this.onBChange=e=>this.props.onColorChange({...this.props.color,b:e}),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode===h.Uz.ESCAPE&&this.props.dispatch(b.XE())}}render(){return i.createElement(et,null,i.createElement(R.j5,{className:W.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.r,onValueChange:this.onRChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,autoFocus:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.red"),recordingKey:g.Pt(this.props,"red")}),i.createElement(R.j5,{className:W.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.g,onValueChange:this.onGChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noLeftBorder:!0,noBorderOnFocus:!0,squareRightBorder:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.green"),recordingKey:g.Pt(this.props,"green")}),i.createElement(R.j5,{className:W.Qh,dispatch:this.props.dispatch,formatter:this.formatter,value:this.props.color.b,onValueChange:this.onBChange,onKeyDown:this.onKeyDown,scrubMultiplier:1/255,noBorderOnFocus:!0,noLeftBorder:!0,squareRightBorder:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.blue"),recordingKey:g.Pt(this.props,"blue")}),!this.props.hideOpacity&&i.createElement(R.Pd,{className:W.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,onKeyDown:this.onKeyDown,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:g.Pt(this.props,"opacity")}))}}en.displayName="RgbInputs";class ei extends g.o6{constructor(){super(...arguments),this.formatter=v.F,this.onKeyDown=e=>{e.keyCode===h.Uz.ESCAPE&&this.props.dispatch(b.XE())}}render(){return i.createElement(et,null,i.createElement(D.AN,{className:W.AH,formatter:this.formatter,property:this.props.color,onChange:this.props.onColorChange,recordingKey:g.Pt(this.props,"color"),autoFocus:!0,noBorderOnFocus:!0,onKeyDown:this.onKeyDown}))}}ei.displayName="CssInputs";class ea extends g.o6{constructor(){super(...arguments),this.formatter360=new T.o1({normalizeFactor:360,min:0,max:1}),this.formatter100=new T.o1({normalizeFactor:100,min:0,max:1}),this.onHChange=e=>this.props.changeCallback({...this.props.value,h:e},!0),this.onSChange=e=>this.props.changeCallback({...this.props.value,s:e},!0),this.onLChange=e=>this.props.changeCallback({...this.props.value,l:e},!0),this.onVChange=e=>this.props.changeCallback({...this.props.value,v:e},!0),this.onAChange=(e,r)=>{this.props.onColorChange({...this.props.color,a:e},r)},this.onKeyDown=e=>{e.keyCode===h.Uz.ESCAPE&&this.props.dispatch(b.XE())}}render(){return i.createElement(et,null,i.createElement(R.j5,{className:W.Qh,dispatch:this.props.dispatch,squareRightBorder:!0,formatter:this.formatter360,scrubMultiplier:1/360,value:this.props.value.h,onValueChange:this.onHChange,recordingKey:g.Pt(this.props,"hue"),autoFocus:!0,noBorderOnFocus:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.hue"),onKeyDown:this.onKeyDown}),i.createElement(R.j5,{className:W.Qh,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:this.props.value.s,onValueChange:this.onSChange,recordingKey:g.Pt(this.props,"saturation"),noBorderOnFocus:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":(0,y.t)("fullscreen.color_controls.saturation"),onKeyDown:this.onKeyDown}),i.createElement(R.j5,{className:W.Qh,dispatch:this.props.dispatch,noLeftBorder:!0,squareRightBorder:!0,formatter:this.formatter100,scrubMultiplier:.01,value:"l"in this.props.value?this.props.value.l:this.props.value.v,onValueChange:"l"in this.props.value?this.onLChange:this.onVChange,recordingKey:g.Pt(this.props,"value"),noBorderOnFocus:!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip":"l"in this.props.value?(0,y.t)("fullscreen.color_controls.lightness"):(0,y.t)("fullscreen.color_controls.brightness"),onKeyDown:this.onKeyDown}),!this.props.hideOpacity&&i.createElement(R.Pd,{className:W.ke,dispatch:this.props.dispatch,value:this.props.color.a,onValueChange:this.onAChange,noLeftBorder:!0,noBorderOnFocus:!0,recordingKey:g.Pt(this.props,"opacity"),onKeyDown:this.onKeyDown}))}}function eo(e){let r=(0,a.wA)(),n=(0,i.useRef)(null);(0,i.useEffect)(()=>{n.current&&(n.current.dataset.preferredTheme=e.theme)},[e.theme]);let o=(0,i.useMemo)(()=>new I.rC({parseAlpha:!0}),[]),s=e=>{e.keyCode===h.Uz.ESCAPE&&r(b.XE())};return i.createElement(et,{ref:n,isWhiteboard:!1},i.createElement("div",{className:W.Q6},i.createElement(P.J,{color:e.color,onMouseDown:e.onChitMouseDown}),i.createElement(D.AN,{className:W.uh,squareRightBorder:!0,noBorderOnFocus:!0,formatter:o,property:e.color,onChange:e.onColorChange,onKeyDown:s,recordingKey:g.Pt(e,"color")})),i.createElement(R.Pd,{decimals:e.opacityDecimals,className:W.ke,value:e.color.a,onValueChange:(r,n)=>{e.onColorChange({...e.color,a:r},n)},noLeftBorder:!0,noBorderOnFocus:!0,dispatch:r,onKeyDown:s,recordingKey:g.Pt(e,"opacity")}))}function es({variableId:e,color:r,opacity:n,onMouseDown:a,recordingKey:o}){let s=(0,A.u)(e),l=s?.name??"",c=!!s&&(0,x.eF)(s);return i.createElement(i.Fragment,null,c?null:i.createElement("div",{onFocus:e=>e.stopPropagation()},i.createElement(P.J,{color:r,opacity:n,onMouseDown:a,recordingKey:g.Pt(o,"chit"),className:H.x7})),i.createElement(f.D8,{role:"button",tabIndex:0,className:H.eV,onMouseDown:a,recordingKey:g.Pt(o,"pill")},i.createElement(U.wG,{isDeleted:c,text:l,tooltip:l})))}ea.displayName="HslvInputs"},407058:(e,r,n)=>{n.d(r,{SY:()=>ep});var i=n(411855),a=n(268853),o=n(343887),s=n(463033),l=n(113675),c=n(202512),d=n(445978),u=n(922827),m=n(340818),p=n(776250),h=n(38329),_=n(966712),g=n(153234),f=n(776621),E=n(30090),y=n(448169),b=n(46481),v=n(47506),I=n(939863),T=n(672517),S=n(973149),w=n(723081),A=n(798099),C=n(226055),N=n(959232),L=n(988022),O=n(356390),R=n(283942),P=n(15859),D=n(618056),k=n(931770),M=n(53119),F=n(428467),x=n(279702),U=n(498606),B=n(420186),V=n(186126),G=n(527718),H=n(662862),K=n(394071),W=n(205135),$=n(832637),Y=n(390534),z=n(7959),j=n(538697),q=n(987850),Z=n(239737),X=n(132572),J=n(222478),Q=n(141273),ee=n(671209),et=n(384627),er=n(77843),en=n(306143),ei=n(460088),ea=n(498902),eo=n(69782),es=n(521709);class el extends j.l6{}class ec extends j.c${}let ed=B.qo,eu=(e,r)=>e.every((e,n)=>e===r[n]);async function em(e){let r=Array.from(e.animatedImage.hash).map(e=>e.toString(16).padStart(2,"0")).join("");await (0,P.Jr)().loadImageByHash(r);let n=(0,k.Sl)(e);return u.CUU.requestGIFData(n)}function ep(e){let r=(0,C.GS)(),n=(0,Z.PE)(),{withinMeter:a}=(0,q.X)(J.JT.REMOVE_BACKGROUND),o=(0,Q.Os)(),s=n&&a&&!o,l=n&&!o;return i.createElement(T.fu,{name:"Image Settings Modal"},i.createElement(eh,{...e,isUI3:r,canUseRemoveBackground:s,isAiEnabled:l}))}class eh extends i.Component{constructor(e){super(e),this.onRotateClockwiseClick=()=>{this.props.onChange((0,D.Lt)(this.props.paint,90),x.zk.YES),m.l7.user("image-rotate-clockwise",()=>{u.glU.repairThumbnails()})},this.onScalingFactorChange=e=>{this.props.onChange({...this.props.paint,scale:e})},this.onPaintColorAdjustChange=(e,r,n)=>{let i={...this.props.paint.paintFilter,[e]:r};this.props.onChange({...this.props.paint,paintFilter:i},n?x.zk.YES:x.zk.NO),this.setState({forceThumbnailUpdate:n}),n&&p.az.trackDefinedEvent("ai_productivity.fills_panel_image_adjust_slider_updated",{sliderName:e,sliderValue:r?.toString()})},this.onGIFFrameChange=e=>{let r=Math.round(e);this.setState({animationFrameForScrubber:r,playing:!1})},this.onVideoTimeChange=e=>{this.setState({currentTimeForScrubber:e,playing:!1})},this.setGIFCoverFrame=e=>{if(!this.state.animatedFrameData){console.warn("No frame stored in state to update");return}let r=e??this.state.animationFrameForScrubber;if((null!=e||r!==this.props.paint.animationFrame)&&!this.props.updateStillImageAndSelectionPropertiesForGIF({...this.props.paint,animationFrame:r},this.state.animatedFrameData.data)){console.warn("Failed to update image");return}},this.setGIFPlaying=e=>{this.setState({playing:e})},this.setVideoPlaying=e=>{this.setState({playing:e})},this.onUpdateAnimatedFrameData=e=>{this.setState({animatedFrameData:e})},this.onUpdateCurrentTime=e=>{this.setState({currentTimeForScrubber:e})},this.setVideoDuration=e=>{this.setState({videoDuration:e})},this.uploadImagePaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;u.glU.uploadPaintImage(e,r)},this.uploadMediaPaint=()=>{let e=this.props.paint.blendMode,r=this.props.paint.opacity;u.glU.uploadPaintMedia(e,r)},this.waitingForGIF=!1,this.clearGIFContentRequest=()=>{this.waitingForGIF=!1},this.setupGIF=()=>{this.setState({animatedImage:null,animationFrameForScrubber:this.props.paint.animationFrame,playing:!1}),this.waitingForGIF=!0,em(this.props.paint).then(e=>{this.waitingForGIF&&this.setState({animatedImage:(0,M.J)(e)})}).catch(e=>(0,f.$D)(a.e.FIGJAM,e))},this.loadVideoJs=async()=>{if(!this.state.videoJsLib){let e=await (0,E.Fe)();this.setState({videoJsLib:e})}},this.setupVideoJs=()=>{this.setState({currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1}),this.loadVideoJs()},this.setIsVideoLoaded=e=>{this.setState({isVideoLoaded:e})},this.setUserClickedVideoControls=e=>{this.setState({userClickedVideoControls:e})},this.isAnimatedImage=()=>!!this.props.paint.animatedImage,this.isVideo=()=>!!this.props.paint.video||"VIDEO"===this.props.paint.type,this.isDragTarget=()=>!0,this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({isDragHover:!1});let r=this.props.paint.blendMode,n=this.props.paint.opacity;this.props.dropImageOnPaintThumbnail(r,n,e)},this.onImageButtonCointainerMouseOver=()=>{this.setState({isPreviewHover:!0})},this.onImageButtonCointainerMouseOut=()=>{this.setState({isPreviewHover:!1})},this.onImageButtonFocus=()=>{this.setState({isImageButtonFocused:!0})},this.onImageButtonBlur=()=>{this.setState({isImageButtonFocused:!1})},this.state={isDragHover:!1,isPreviewHover:!1,isImageButtonFocused:!1,forceThumbnailUpdate:!1,animatedImage:null,animatedFrameData:null,animationFrameForScrubber:e.paint.animationFrame||0,currentTimeForScrubber:0,videoDuration:0,playing:!1,videoJsLib:null,isVideoLoaded:!1,userClickedVideoControls:!1}}componentDidMount(){if(this.isAnimatedImage()?this.setupGIF():this.isVideo()&&this.setupVideoJs(),(0,X.qF)()&&!this.isAnimatedImage()&&!this.isVideo()){let e=h.D.getState();(0,L.ds)("bg_removal_available",e.openFile?.key,e,{source:"image_settings_panel"})}}UNSAFE_componentWillReceiveProps(e){this.props.paint.animationFrame!==e.paint.animationFrame&&this.setState({animationFrameForScrubber:e.paint.animationFrame})}componentDidUpdate(e){let r=null!=e.paint.animatedImage,n=null!=this.props.paint.animatedImage;!r&&n?this.setupGIF():r&&n?eu(e.paint.animatedImage.hash,this.props.paint.animatedImage.hash)||this.setupGIF():r&&!n&&this.clearGIFContentRequest(),"STRETCH"===this.props.paint.imageScaleMode&&(0,v.YQ)({id:"Image panel has cropped image"})}componentWillUnmount(){this.setVideoPlaying(!1),this.clearGIFContentRequest()}renderInlinePreview(){return this.isVideo()?i.createElement(H.A,{imagePaint:this.props.paint,openFileKey:this.props.openFileKey,width:ed,height:152,className:ei.IP,currentTime:this.state.currentTimeForScrubber,onUpdateCurrentTime:this.onUpdateCurrentTime,setDuration:this.setVideoDuration,playing:this.state.playing,setPlaying:this.setVideoPlaying,videoJsLib:this.state.videoJsLib,isVideoLoaded:this.state.isVideoLoaded,setIsVideoLoaded:this.setIsVideoLoaded,userClickedControls:this.state.userClickedVideoControls,setUserClickedControls:this.setUserClickedVideoControls}):this.isAnimatedImage()?i.createElement(V.Y,{imagePaint:this.props.paint,width:ed,height:152,className:ei.km,animatedImage:this.state.animatedImage,animationFrame:this.state.animationFrameForScrubber,onUpdateFrameData:this.onUpdateAnimatedFrameData,playing:this.state.playing}):i.createElement(G.K,{imagePaint:this.props.paint,width:ed,height:152,className:ei.km,forceUpdate:this.state.forceThumbnailUpdate})}renderMediaControls(){if(this.isVideo()){if(!(0,F.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)())return i.createElement(Y.c,null);if(this.props.paint.video)return i.createElement(en.P,{paint:this.props.paint,currentTime:this.state.currentTimeForScrubber||0,duration:this.state.videoDuration,onVideoTimeChange:this.onVideoTimeChange,disabled:null==this.props.paint.video,isVideoLoaded:this.state.isVideoLoaded,setPlaying:this.setVideoPlaying,playing:null!=this.props.paint.video&&this.state.playing,setUserClickedControls:this.setUserClickedVideoControls})}else if(this.isAnimatedImage())return i.createElement(ee.F,{paint:this.props.paint,animationFrame:this.state.animationFrameForScrubber||0,numFrames:this.state.animatedImage?this.state.animatedImage.numFrames():null,onGIFFrameChange:this.onGIFFrameChange,disabled:null==this.state.animatedImage,setPlaying:this.setGIFPlaying,playing:null!=this.state.animatedImage&&this.state.playing,setGIFCoverFrame:this.setGIFCoverFrame});else return i.createElement(T.fu,{name:"Color Adjust Sliders"},i.createElement("div",{className:ei.Vq},["exposure","contrast","vibrance","temperature","tint","highlights","shadows"].map(e=>i.createElement(eE,{key:e,propertyName:e,onChange:this.onPaintColorAdjustChange,filterColorAdjust:this.props.paint.paintFilter,min:"contrast"===e?-.3:-1,max:"contrast"===e?.3:1,recordingKey:g.Pt(this.props,e)}))))}render(){let e=this.isVideo(),r=(0,F.canUploadAndEditVideo_REDUX_GLOBAL_DEPRECATED)(),n=(0,X.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.canUseRemoveBackground&&!this.props.paint.image?.name.includes(er.LO),a=(0,_.kc)().aip_buttercup&&(0,X.qF)()&&!this.isVideo()&&!this.isAnimatedImage()&&this.props.isUI3&&this.props.isAiEnabled,l=this.props.paint.image&&"Checker"===this.props.paint.image.name;var u=(this.state.isPreviewHover||this.state.isImageButtonFocused||l?ei.rv:ei.ZS)+(this.state.isDragHover?" "+ei.mw:"");return e&&!r&&(u=ei.ZS),i.createElement(z.Id,null,i.createElement(z.fI,{"data-onboarding-key":"image-scale-mode-select"},i.createElement(eg,{...this.props,recordingKey:g.Pt(this.props,"imageScale")}),"TILE"===this.props.paint.imageScaleMode&&i.createElement(ef,{className:ei.GA,value:"TILE"!==this.props.paint.imageScaleMode?1:this.props.paint.scale,onChange:this.onScalingFactorChange,recordingKey:g.Pt(this.props,"scalingFactor")}),a&&i.createElement("span",{className:ei.ZM},i.createElement(K.$O,{paint:this.props.paint,showRemoveBackground:n})),!(0,_.kc)().aip_buttercup&&n&&i.createElement("span",{className:ei.Yw},i.createElement(o.K,{onClick:()=>(0,K.I3)(this.props.paint),"aria-label":(0,I.t)("fullscreen.properties_panel.remove_background"),recordingKey:g.Pt(this.props,"removeBackground"),htmlAttributes:{"data-tooltip":(0,I.t)("fullscreen.properties_panel.remove_background"),"data-tooltip-type":U.Ib.TEXT,"data-tooltip-show-above":!0}},i.createElement(b.U,{svg:eo.A},i.createElement(c.$,null)))),i.createElement("span",{className:ei.Ts},i.createElement(o.K,{onClick:this.onRotateClockwiseClick,"aria-label":(0,I.t)("fullscreen.properties_panel.rotate_90"),recordingKey:g.Pt(this.props,"rotateClockwise"),htmlAttributes:{"data-tooltip":(0,I.t)("fullscreen.properties_panel.rotate_90"),"data-tooltip-type":U.Ib.TEXT}},i.createElement(b.U,{svg:es.A},i.createElement(d.R,null))))),i.createElement(y.Y,{className:u,style:{backgroundImage:`url('${(0,N.A)()}')`},isDragTarget:this.isDragTarget,onMouseOver:this.onImageButtonCointainerMouseOver,onMouseOut:this.onImageButtonCointainerMouseOut,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:g.Pt(this.props,"dropTarget")},i.createElement("div",{className:ei.mQ},this.renderInlinePreview(),i.createElement("div",{className:ei.dW,style:{width:ed,height:152}},e&&r&&i.createElement("span",{className:ei.QY},i.createElement(s.$n,{onClick:this.uploadMediaPaint,htmlAttributes:{onFocus:this.onImageButtonFocus,onBlur:this.onImageButtonBlur},variant:"secondary"},(0,I.tx)("fullscreen.properties_panel.choose_video"))),!e&&i.createElement(et.A,{onImageButtonBlur:this.onImageButtonBlur,onImageButtonFocus:this.onImageButtonFocus,uploadImagePaint:this.uploadImagePaint})))),this.renderMediaControls(),this.isAnimatedImage()&&i.createElement($.u,{title:(0,I.t)("fullscreen.properties_panel.gifs_in_figma_prototypes"),icon_DEPRECATED:ea.A,userFlag:"dismissed_gifs_cover_frame_hint",hintText:(0,I.t)("fullscreen.properties_panel.choose_which_frame_displayed")}))}}eh.displayName="ImageSettingsModal";let e_=["FILL","FIT","STRETCH","TILE"];class eg extends i.PureComponent{constructor(){super(...arguments),this.imageScaleModeFormatter=new w.D,this.onImageScaleModeChange=e=>{"STRETCH"===e?O.Y5.triggerActionInUserEditScope("crop-image"):this.props.onChange({...this.props.paint,imageScaleMode:e})}}render(){let e=e_.map((e,r)=>i.createElement(ec,{key:r,value:e,recordingKey:g.Pt(this.props,e)}));return i.createElement(el,{id:"image-scale-mode-select",className:ei.Nd,property:this.props.paint.imageScaleMode,onChange:this.onImageScaleModeChange,formatter:this.imageScaleModeFormatter,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,onMouseDown:A.dG,recordingKey:this.props.recordingKey,targetDomNode:(0,_.kc)().fpl_window?document.body:void 0},e)}}eg.displayName="ImageScaleSelection";class ef extends i.PureComponent{constructor(){super(...arguments),this.formatter=new S.LN({min:.01,max:100})}render(){return i.createElement(W.Q7,{className:this.props.className,formatter:this.formatter,property:this.props.value,disabled:this.props.disabled,onChange:this.props.onChange,recordingKey:this.props.recordingKey})}}function eE({min:e=-1,max:r=1,propertyName:n,...a}){let o=(0,i.useId)();return i.createElement(z.fI,null,i.createElement("div",{id:o,className:ei.tx},function(e){switch(e){case"exposure":return(0,I.t)("fullscreen.properties_panel.exposure");case"contrast":return(0,I.t)("fullscreen.properties_panel.contrast");case"vibrance":return(0,I.t)("fullscreen.properties_panel.saturation");case"temperature":return(0,I.t)("fullscreen.properties_panel.temperature");case"tint":return(0,I.t)("fullscreen.properties_panel.tint");case"highlights":return(0,I.t)("fullscreen.properties_panel.highlights");case"shadows":return(0,I.t)("fullscreen.properties_panel.shadows")}}(n)),i.createElement("div",{className:ei.CD},i.createElement(l.A,{"aria-labelledby":o,min:e,max:r,step:.01,bigStep:.1,value:a.filterColorAdjust?.[n]||0,defaultValue:0,hints:[0],rangeAnchor:0,onChange:(e,{commit:r})=>{a.onChange(n,e,r)},recordingKey:a.recordingKey,htmlAttributes:{"data-hold-focus":!0,onKeyDownCapture:e=>{O.Y5.isReady()&&(0,R.f7)(e)}}})))}ef.displayName="ScalingFactorInputs"},384627:(e,r,n)=>{n.d(r,{A:()=>T});var i=n(411855),a=n(188507),o=n(463033),s=n(869452),l=n(966712),c=n(768137),d=n(939863),u=n(662275),m=n(893606),p=n(239737),h=n(222478),_=n(709731),g=n(562432),f=n(30075),E=n(384775),y=n(880173),b=n(144119),v=n(460088);function I({uploadImagePaint:e,recordingKey:r}){let{close:n}=(0,g.cq)(),c=(0,b.sO)(),m=(0,a.wA)(),I=(0,p.PE)();return i.createElement("div",{className:v.sn},i.createElement(o.IK,{onClick:e,recordingKey:r},c?(0,d.tx)("slides.properties_panel.replace_media"):(0,d.tx)("fullscreen.properties_panel.image_settings.upload_new")),I&&!(0,l.kc)().aip_disable_ai_make_images&&i.createElement("div",{className:v.zr},i.createElement(o.IK,{onClick:()=>{n(),(0,_.B3)(h.JT.GENERATE_IMAGE),scheduler.postTask(()=>{(0,E.$I)({moduleToOpen:{type:"custom",module:i.createElement(y.A,null),name:f.Sn.GENERATE_IMAGE},trackingData:{source:"image_settings_swap_image_generate_new"}}),m(u.Ce())})},iconPrefix:i.createElement(s.T,null),variant:"secondary"},(0,d.tx)("fullscreen.properties_panel.image_settings.generate_new"))))}function T(e){return(0,m.R)()?i.createElement(I,{uploadImagePaint:e.uploadImagePaint}):i.createElement(c.nR,{className:v.QY,onFocus:e.onImageButtonFocus,onBlur:e.onImageButtonBlur,onClick:e.uploadImagePaint},(0,d.tx)("fullscreen.properties_panel.choose_image"))}},835808:(e,r,n)=>{n.d(r,{QG:()=>s});var i=n(411855),a=n(188507),o=n(32067);function s(){let[e,r]=function(){let e=(0,a.d4)(e=>e.mirror.sceneGraph),r=(0,o.VW)(),n=(0,a.d4)(e=>e.mirror.selectionProperties.masterSymbolGUID);if(!r||!r.isAlive)return[null,null];if(r?.isStateGroup)return[null,r??null];if(r?.type==="SYMBOL"||r?.type==="INSTANCE"){let i=r??null;if(r?.type==="INSTANCE"&&(i=n?e.get(n):null),!i)return[null,null];if(!i?.isState)return[i??null,null];let a=i?.parentGuid?e.get(i?.parentGuid):null;return[i??null,a?.isStateGroup?a:null]}return[null,null]}(),n=i.useMemo(()=>{let n=e?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(n.length>0)return n;let i=r?.symbolLinks?.filter(e=>e.uri).map(e=>e)||[];if(i.length>0)return i},[e,r]),s=e?.description,l=r?.description,c=s&&l?l+"\n\n"+s:s||l;return i.useMemo(()=>({links:n,description:c}),[n,c])}},227795:(e,r,n)=>{n.d(r,{DK:()=>g,K0:()=>f,Me:()=>E,YW:()=>y});var i=n(411855),a=n(629019),o=n.n(a),s=n(62935),l=n(498750),c=n(522739),d=n(163023),u=n(348425),m=n(672517),p=n(984375),h=n(447141),_=n(783423);let g=i.forwardRef(function(e,r){let n=o()(e.className,e.containerClassName,h.U,e.disabled?h.Ah:h.pq,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.No]:e.isBackgroundTransparent});return i.createElement(f,{...e,className:n,ref:r},i.createElement(i.Fragment,null,i.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}),i.createElement(d.B,{className:h.ai,svg:_.A})))}),f=i.forwardRef(function(e,r){let n=(0,s.M)(r);function a(){n.current.blur()}let d=o()(e.className,{[h.vR]:e.selected,[e.selectedClassName??""]:e.selected,[h.Ah]:!e.selected&&e.disabled,[h.pq]:!e.selected&&!e.disabled,[h.No]:e.isBackgroundTransparent}),m=e.tooltipForScreenReadersOnly||!e.showTooltipWhenSelectedIsTrue&&e.selected,_=e.href?c.lt:c.GG;return i.createElement(_,{forwardedRef:n,className:d,style:e.style,tabIndex:null!=e.tabIndex?e.tabIndex:e.disabled?-1:0,onClick:e.disabled?void 0:e.onClick,onDoubleClick:e.disabled?void 0:e.onDoubleClick,onKeyDown:e.disabled?void 0:r=>{switch(r.keyCode){case l.Uz.ENTER:case l.Uz.SPACE:(e.onMouseDown||e.onClick||e.onKeyDown)&&r.preventDefault(),e.onMouseDown?.(r),e.onKeyDown?e.onKeyDown(r):e.onClick?.(r);break;case l.Uz.ESCAPE:a()}},onPointerDown:e.disabled?void 0:e.onPointerDown,onMouseDown:e.disabled?void 0:e.onMouseDown,onMouseUp:e.disabled?void 0:a,onMouseMove:e.disabled?void 0:e.onMouseMove,onMouseEnter:e.disabled?void 0:e.onMouseEnter,onMouseLeave:e.disabled?void 0:e.onMouseLeave,onContextMenu:e.disabled?void 0:e.onContextMenu,href:e.disabled?void 0:e.href,type:e.type,target:e.target,"data-fullscreen-intercept":e["data-fullscreen-intercept"],"data-tooltip-type":m?null:e["data-tooltip-type"],"data-tooltip":m?null:e["data-tooltip"],"data-tooltip-show-immediately":m?null:e["data-tooltip-show-immediately"],"data-tooltip-max-width":m?null:e["data-tooltip-max-width"],"data-tooltip-show-above":m?null:e["data-tooltip-show-above"],"data-tooltip-shortcut-key":m?null:e["data-tooltip-shortcut-key"],"data-tooltip-offset-x":m?null:e["data-tooltip-offset-x"],"data-tooltip-offset-y":m?null:e["data-tooltip-offset-y"],"aria-label":e["aria-label"]??(0,p.En)(e),disabled:e.disabled,"aria-disabled":e.disabled,"data-onboarding-key":e["data-onboarding-key"],"data-testid":e.dataTestId,"aria-expanded":e["aria-expanded"],"aria-haspopup":e["aria-haspopup"],"aria-owns":e["aria-owns"],recordingKey:e.recordingKey},e.children||i.createElement(u.t,{svg:e.svg,fallbackSvg:e.fallbackSvg,useOriginalSrcFills_DEPRECATED:e.useOriginalSrcFills_DEPRECATED,style:{fill:e.fill}}))}),E=(0,m.tf)(f),y=f;(0,m.tf)(y)},754369:(e,r,n)=>{n.d(r,{$:()=>_});var i=n(411855),a=n(188507),o=n(922827),s=n(44948),l=n(418956),c=n(848661),d=n(29680),u=n(335682),m=n(57392),p=n(279145),h=n(705129);function _(e){let r=(0,p.Rn)("restore-symbol-or-state-group"),n=(0,a.d4)(e=>e.mirror.appModel[r]),_=(0,d.B9)(),g=(0,l.md)(u._S),f=(0,s.k9)(()=>{let r=new Set;for(let n of e){let e=_.get(n);if(e?.type!=="INSTANCE")continue;let i=e.symbolId;i&&r.add(i)}return r},[e,_]),{backingSymbolGUID:E,backingStateGroupGUID:y}=(0,h.nD)(f,_),b=i.useMemo(()=>(0,c.gl)(E)||null===E?null:_.get(E),[E,_]),v=i.useMemo(()=>(0,c.gl)(y)||null===y?null:_.get(y),[y,_]),I=i.useMemo(()=>!!b&&b.isSubscribedAsset&&b.sourceLibraryKey!==g,[b,g]),T=i.useMemo(()=>!!(b&&o.Egt.nodeIsSoftDeleted(b.guid)),[b]),S=i.useMemo(()=>!!(v&&o.Egt.nodeIsSoftDeleted(v.guid)),[v]),w=i.useMemo(()=>{if(v)return v;if(!b)return null;if(T){let e=o.Egt.findBestAncestorInRestorePath(b.guid),r=""===e?null:_.get(e);if(r?.isStateGroup)return r}return null},[b,v,T,_]),A=(0,a.d4)(m.lm),C=i.useMemo(()=>v&&S?v:b&&T?b:null,[b,T,S,v]),N=i.useMemo(()=>{let e;return e=C?C.isStateGroup?"STATE_GROUP":w?"SYMBOL_AS_STATE":"SYMBOL_AS_NON_STATE":null,n||(e=null),e},[n,C,w]),L=i.useMemo(()=>b?.componentKey&&A.get(b.componentKey)?"DELETED_SUBSCRIBED_STATE":"SYMBOL_AS_STATE"===N?"DELETED_LOCAL_STATE":null,[A,b,N]);return i.useMemo(()=>({backingSymbolGUID:E,backingStateGroupGUID:y,singleBackingSymbol:b,singleBackingStateGroup:v,isBackingSymbolShared:I,isBackingSymbolSoftDeleted:T,isBackingStateGroupSoftDeleted:S,affiliatedStateGroup:w,affiliatedStateGroupId:w?.guid,symbolOrStateGroupToRestore:C,restoreType:N,stateResetType:L}),[E,y,b,v,I,T,S,w,C,N,L])}},690122:(e,r,n)=>{n.d(r,{p:()=>l});var i=n(411855),a=n(848661),o=n(29680),s=n(754369);function l(e){let r=(0,o.B9)(),{backingSymbolGUID:n,backingStateGroupGUID:l}=(0,s.$)(e),c=i.useMemo(()=>{let n=[];for(let i of e){let e=r.get(i);if(e&&"INSTANCE"!==e.type){for(;e?.isInstanceSublayer;)e=e.parentNode;e?.type==="INSTANCE"&&n.push(e)}}return n},[e,r]),d=i.useMemo(()=>{let e=null;for(let n of c){if(!n.symbolId)continue;let i=r.get(n.symbolId);if(i){if(e){if(e.guid!==i.guid)return a.oV}else e=i}}return e?.isState&&e.parentGuid&&(e=e.parentNode),e},[c,r]),u=i.useMemo(()=>{let n=[];for(let i of e){let e=r.get(i);e&&"INSTANCE"===e.type&&e.isInstanceSublayer&&n.push(e)}return n},[e,r]),m=i.useMemo(()=>!!(null==d&&(n||l)),[d,n,l]),p=i.useMemo(()=>!!(null==n&&null==l&&d),[d,n,l]);return i.useMemo(()=>({backingSymbolOrStateGroupOfContainingInstances:d,containingInstancesOfSublayers:c,onlyInstances:m,onlyInstanceSublayers:p,nestedInstances:u}),[d,c,m,p,u])}},412297:(e,r,n)=>{n.d(r,{h_:()=>H});var i=n(411855),a=n(188507),o=n(922827),s=n(340818),l=n(841563),c=n.n(l),d=n(776250),u=n(794272),m=n(418956),p=n(153234),h=n(268537),_=n(939863),g=n(738269),f=n(662275),E=n(106757),y=n(356390),b=n(844053),v=n(335682),I=n(416095),T=n(57392),S=n(113916),w=n(498606),A=n(279145),C=n(224690),N=n(715762),L=n(782555),O=n(616900),R=n(142232),P=n(298543),D=n(227795),k=n(958568),M=n(754369),F=n(690122),x=n(501891),U=n(258376),B=n(362679);let V="instance-option-dropdown";function G(e){e.stopPropagation()}function H(e){let{instanceAndSublayerGUIDs:r,resettableInstanceOverrides:n,showAllInstanceOptions:l}=e,{appModel:m,detachInstanceShortcut:h}=(0,u.R)(e=>({appModel:e.mirror.appModel,detachInstanceShortcut:(0,A.c1)(e.mirror.appModel.keyboardShortcuts,"detach-instance")})),E=i.useMemo(C.$H,[]),b=(0,a.d4)(e=>E(e,r)),{isBackingSymbolSoftDeleted:v,restoreType:T}=(0,M.$)(r),{onlyInstances:S,nestedInstances:P}=(0,F.p)(r),k=i.useRef(null),{needsUpdate:H}=$(r),Y=function(e){let{needsUpdate:r,numSelectedInstancesToUpdate:n,componentInstanceUpdateInfo:o,stateInstanceUpdateInfo:s}=$(e),l=(0,I.eS)(I.aD.ALL),{updateIndividualInstances:c}=(0,R.TM)(l,N.AX.DROPDOWN_UPDATE_SELECTED_INSTANCE),u=(0,a.wA)(),m=i.useMemo(()=>({source:"INSTANCE_PANEL",instanceAndSublayerGUIDs:e}),[e]),p=(0,O.jX)(m),h=i.useCallback(()=>{u((0,f.to)({type:L.F2,data:m}))},[u,m]),g=W();return i.useMemo(()=>{let e=[];return r&&(e.push({type:"option",value:"update-selected-instance",displayText:(0,_.t)("design_systems.instance_panel.update_selected",{numSelectedInstancesToUpdate:n}),callback:()=>c(o,s)}),p&&e.push({type:"option",value:"review-instance-update",displayText:(0,_.t)("design_systems.instance_panel.review_update"),callback:()=>{d.az.trackDefinedEvent("design_systems_analytics.instance_review_update_click",g),h()}})),e},[o,r,n,p,s,h,g,c])}(r),z=i.useMemo(()=>{let e=[...Y];if(!l)return e;if(l&&Y.length>0&&e.push({type:"separator"}),"SYMBOL_AS_STATE"===T&&e.push({type:"option",value:"restore-symbol-or-state-group",displayText:(0,_.t)("design_systems.instance_panel.restore_variant"),callback:()=>{y.Y5.triggerActionInUserEditScope("restore-symbol-or-state-group")}}),S&&e.push({type:"option",value:"detach-instance",displayText:(0,_.t)("fullscreen_actions.detach-instance"),shortcut:h,callback:()=>{s.l7.user("detach-instances",()=>o.glU.detachInstances(r))}}),(0,A.Yh)(m,"push-changes-to-main")&&0===P.length&&!v&&(e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:"push-changes-to-main",displayText:(0,_.t)("fullscreen_actions.push-changes-to-main"),callback:()=>{y.Y5.triggerActionInUserEditScope("push-changes-to-main")}})),n&&Object.values(n).some(e=>e)){if(Object.keys(n).forEach(i=>{let a=parseInt(i);n?.[a]&&(e.length>0&&a===o.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS&&e.push({type:"separator"}),e.push({type:"option",value:a,displayText:function(e){switch(e){case o.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS:return(0,_.t)("design_systems.instance_panel.reset_all_changes");case o.YnC.EXPORTS:return(0,_.t)("design_systems.instance_panel.reset_exports");case o.YnC.EFFECTS:return(0,_.t)("design_systems.instance_panel.reset_effects");case o.YnC.LAYER:return(0,_.t)("design_systems.instance_panel.reset_others");case o.YnC.VISIBLE:return(0,_.t)("design_systems.instance_panel.reset_visibility");case o.YnC.NAME:return(0,_.t)("design_systems.instance_panel.reset_name");case o.YnC.FILL:return(0,_.t)("design_systems.instance_panel.reset_fill");case o.YnC.STROKE:return(0,_.t)("design_systems.instance_panel.reset_stroke");case o.YnC.TEXT:return(0,_.t)("design_systems.instance_panel.reset_text");case o.YnC.TEXT_STYLE:return(0,_.t)("design_systems.instance_panel.reset_text_style");case o.YnC.SIZE:return(0,_.t)("design_systems.instance_panel.reset_size");case o.YnC.PROTOTYPE_INTERACTIONS:return(0,_.t)("design_systems.instance_panel.reset_interactions");case o.YnC.OVERLAY:return(0,_.t)("design_systems.instance_panel.reset_overlay");case o.YnC.NUM_VALUES:}return""}(a),callback:()=>{s.l7.user("reset-overrides",()=>o.glU.resetSymbolOverridesForNodes(r,a))}}))}),b)for(let r in b)for(let n in b[r]){let i=b[r][n];e.push({type:"option",value:"reset-component-prop-assignment",displayText:(0,_.t)("design_systems.instance_panel.reset_property_assignment",{assignmentName:i.name}),callback:()=>{s.l7.user("reset-prop-assignments",()=>o.glU.resetComponentPropAssignmentForInstances(i.instanceGUIDs,n))}})}}else e.length>0&&e.push({type:"separator"}),e.push({type:"option",value:o.YnC.OVERRIDES_FOR_LAYER_AND_SUBLAYERS,displayText:(0,_.t)("design_systems.instance_panel.no_changes_to_reset"),callback:()=>{},disabled:!0});return e},[Y,l,T,S,m,P.length,v,n,h,r,b]),{toggleDropdown:j,dropdownShown:q}=function(e){let r=(0,a.wA)(),n=(0,a.d4)(r=>r.dropdownShown?.type===V&&c()(r.dropdownShown.data?.guids,e)),o=W();return{dropdownShown:n,toggleDropdown:i.useCallback(i=>{i.stopPropagation(),n?r(g.oB()):(r(g.j7({type:V,data:{guids:e}})),d.az.trackDefinedEvent("design_systems_analytics.instance_update_available_button_click",o))},[n,r,e,o])}}(r),Z=p.Pt(e,"toggleInstanceOptionDropdown",r.join("-"));return l||H?i.createElement("span",null,i.createElement("div",{ref:k},H?i.createElement(D.YW,{className:x.l_,onClick:j,selected:q,onMouseDown:G,svg:U.A,"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.update_available"),recordingKey:Z}):i.createElement(D.YW,{onClick:j,selected:q,onMouseDown:G,"data-tooltip-type":w.Ib.TEXT,"data-tooltip":(0,_.t)("design_systems.instance_panel.instance_options"),svg:B.A,recordingKey:Z,disabled:0===z.length})),i.createElement(K,{targetRef:k,instanceDropdownOptions:z,recordingKey:e.recordingKey,dropdownShown:q})):null}function K({targetRef:e,instanceDropdownOptions:r,recordingKey:n,dropdownShown:a}){return null!=e.current&&a?i.createElement(P.Cf,{targetRect:e.current.getBoundingClientRect(),propagateCloseClick:!0},r.map((e,r)=>"option"===e.type?i.createElement(h.c$,{className:x.VM,onClick:e.callback,recordingKey:p.Pt(n,e.displayText),key:"reset-component-prop-assignment"===e.value?p.Pt(e.value,r):e.value,disabled:e.disabled},e.displayText,e.shortcut&&i.createElement("span",null,e.shortcut)):i.createElement(h.wv,{key:r}))):null}function W(){let e=(0,a.d4)(b.c),r=(0,m.md)(v.yV),n=(0,m.md)(E.p9);return{fileKey:e.file_key,fileParentOrgId:r?.parentOrgId?.toString(),fileTeamId:e.file_team_id?.toString(),userId:n?.id}}function $(e){let{componentUpdatesForAllPages:r,stateGroupUpdatesForAllPages:n}=(0,a.d4)(T.ij),o=i.useMemo(S.bd,[]),s=(0,a.d4)(r=>o(r,e)),{componentInstanceUpdateInfo:l,stateInstanceUpdateInfo:c}=(0,k.cB)(r,n,s),d=(0,k.jR)(l,c);return{needsUpdate:d>0&&d===s.length,numSelectedInstancesToUpdate:d,componentInstanceUpdateInfo:l,stateInstanceUpdateInfo:c}}},721478:(e,r,n)=>{n.d(r,{NA:()=>W,iN:()=>Y});var i=n(411855),a=n(188507),o=n(448639),s=n(922827),l=n(629019),c=n.n(l),d=n(44948),u=n(794272),m=n(153234),p=n(520581),h=n(667167),_=n(163023),g=n(736242),f=n(939863),E=n(286954),y=n(843495),b=n(848661),v=n(29680),I=n(237929),T=n(496470),S=n(498606),w=n(420186),A=n(386976),C=n(371686),N=n(567488),L=n(45714),O=n(224690),R=n(7959),P=n(893606),D=n(939791),k=n(754369),M=n(690122),F=n(412297),x=n(225373),U=n(371623),B=n(767181),V=n(501891),G=n(968109),H=n(405622),K=n(289298),W=(e=>(e[e.NAME_ONLY=0]="NAME_ONLY",e[e.INSTANCE_SWAP_PICKER=1]="INSTANCE_SWAP_PICKER",e))(W||{});function $(e){e.stopPropagation()}function Y(e){let{canCollapse:r,resettableInstanceOverrides:n,instanceAndSublayerGUIDs:a,shouldHideButtons:s,isInComponentPlayground:l}=e,d=(0,i.useRef)(null),{onlyInstances:u,onlyInstanceSublayers:m}=(0,M.p)(a),p=function(e){let r=(0,v.B9)();return i.useMemo(()=>{if(0===e.length)return null;let n=r.get(e[0]);return n?.symbolId},[e,r])}(a),h=(0,P.R)();if(!u&&!m)return null;let _=h&&!l&&0===e.instanceNameDisplayOverride,g=i.createElement(i.Fragment,null,i.createElement(z,{...e,panelTitleRef:d,dropdownIdPrefix:"instance-panel-instance-swap-picker",shouldUseUI3RowCompatibleStyles:_}),!s&&i.createElement("span",{className:V.MC},i.createElement(N.yQ,{nodeField:o.R.OVERRIDDEN_SYMBOL_ID,defaultValue:p,guids:a}),i.createElement(B.F,{instanceAndSublayerGUIDs:a,recordingKey:e.recordingKey}),i.createElement(F.h_,{resettableInstanceOverrides:n,instanceAndSublayerGUIDs:a,recordingKey:e.recordingKey,showAllInstanceOptions:!0})));return _?i.createElement(D.DE,{label:null,input:g,icon:null}):i.createElement(R.fI,{className:c()(V.LO,{[V.Z0]:r,[V.YF]:l}),ref:d},g)}function z({panelTitleRef:e,panelTitleOverridesClassName:r,pickerButtonTextOverridesClassName:n,flushLeft:l,dropdownIdPrefix:N,shouldHideInstanceIcon:P=!1,chevronOverride:D,shouldUseUI3RowCompatibleStyles:F,...B}){let{instanceNameDisplayOverride:W,containerWide:Y,instanceAndSublayerGUIDs:z,shouldHideButtons:j,highlightNodesOnHover:q}=B,Z=`${N}-${z.join("-")}`,X=(0,v.B9)(),J=i.useMemo(O.en,[]),{propDef:Q,instanceSwapPickerShown:ee}=(0,u.R)(e=>({propDef:J(e,z,o.R.OVERRIDDEN_SYMBOL_ID),instanceSwapPickerShown:e.instanceSwapPickerShown})),{preferredValues:et,preferredValuesFetchError:er,retryPreferredValuesFetch:en}=(0,A.xP)(Q??void 0),ei=i.useMemo(()=>er?i.createElement(C.u,{onRetry:en,recordingKey:"instancePropAssignment"}):void 0,[er,en]),ea=(0,a.wA)(),{backingSymbolGUID:eo,backingStateGroupGUID:es,affiliatedStateGroupId:el}=(0,k.$)(z),{backingSymbolOrStateGroupOfContainingInstances:ec,containingInstancesOfSublayers:ed,onlyInstances:eu,onlyInstanceSublayers:em}=(0,M.p)(z),ep=(0,a.d4)(e=>e.library),eh=(0,d.k9)(()=>{let e=es??eo;if(!e||(0,b.gl)(e))return[];let{selectedItem:r}=(0,T.XV)(e,ep,X);return r?[r]:[]},[es,eo,ep,X]),e_=i.useMemo(()=>!!em&&!!ec&&ec!==b.oV,[em,ec]),eg=m.rf(m.Pt(B.recordingKey,"instanceName",z.join("-")),"mouseenter",()=>{q&&s.Ez5.canvasViewState().temporarilyHoveredNodes.set(z)}),ef=m.rf(m.Pt(B.recordingKey,"instanceName",z.join("-")),"mouseleave",()=>{q&&s.Ez5.canvasViewState().temporarilyHoveredNodes.set([])}),eE="";if(null!=es||el){if((0,b.gl)(es))eE=(0,f.t)("design_systems.instance_panel.mixed");else{let e=es?X.get(es):null,r=el?X.get(el):null;eE=(0,I.kH)(r?.name||e?.name||"")}}else null!=eo?eE=(0,b.gl)(eo)?(0,f.t)("design_systems.instance_panel.mixed"):(0,I.kH)(X.get(eo)?.name||""):null!=ec&&(eE=(0,b.gl)(ec)?(0,f.t)("design_systems.instance_panel.mixed"):(0,I.kH)(ec.name||""));let ey="";if(eu){let e=X.get(z[0])?.name;z.every(r=>X.get(r)?.name===e)&&e&&(ey=e)}let{modalWidth:eb}=(0,h.TQ)(h.Zl.INSTANCE_SWAP_PICKER),ev=(0,h.qc)(),eI=i.useCallback(()=>{if(j)return;let r=e.current?(0,w.VZ)(e.current,eb,!ev):void 0;ea((0,E.zE)({initialPosition:r,id:Z,modal:!0}))},[j,e,eb,ev,ea,Z]),eT=i.useCallback(()=>{e_&&y.tJ(ed.map(e=>e.guid))},[e_,ed]),eS="";eu?eS=ee.isShown&&ee.id===Z?V.sK:j?V.qw:V.vS:em&&(eS=e_?V.EA:V.me);let ew=D??i.createElement(_.B,{className:V.t4,svg:K.A});return i.createElement(p.E,{name:"instance_title_control"},0===W?i.createElement("div",{className:F?V.Bt:V.Qp,onMouseEnter:eg,onMouseLeave:ef},i.createElement(g.o,{className:F?V.iB:Y?V.u$:V.vF,text:ey??eE})):1!==W&&Q?i.createElement("div",{className:V.I0},i.createElement(L.L,{nodeField:o.R.OVERRIDDEN_SYMBOL_ID,currentValue:Q.defaultValue,instanceGUIDs:z})):i.createElement(R.xZ,{className:c()(eS,r),recordingKey:m.Pt(B,"panelTitle",z.join("-")),onClick:em?eT:eI,onMouseDown:$,doNotReserveSpaceForChevron:l},!P&&i.createElement(_.B,{className:V.$C,svg:G.A}),i.createElement("div",{"data-testid":"instance-panel-title-component-name",className:n||V.We},eE),!j&&i.createElement(i.Fragment,null,!em&&ew,e_&&i.createElement(_.B,{className:V.N1,width:"24px",height:"24px",svg:H.A,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":(0,f.t)("design_systems.instance_panel.select_instance")}))),ee.isShown&&ee.id===Z&&i.createElement(x.T,{selectedItems:eh,title:(0,f.t)("design_systems.instance_panel.swap_instance"),itemsToSwap:z,recordingKey:m.Pt(B,"instanceSwapPicker"),pickerType:h.Zl.INSTANCE_SWAP_PICKER,preferredItems:et,preferredValuesErrorComponent:ei,entrypointForLogging:U.S.InstancePickerEntrypoint.SELECTED_INSTANCE_SWAP}))}},225373:(e,r,n)=>{n.d(r,{Cc:()=>e5,T:()=>e2,lL:()=>eq});var i=n(411855),a=n(109388),o=n(188507),s=n(838516),l=n(966664),c=n(974880),d=n(57860),u=n(463033),m=n(343887),p=n(183686),h=n(18991),_=n(343427),g=n(258214),f=n(629019),E=n.n(f),y=n(776250),b=n(91408),v=n(44948),I=n(622422),T=n(794272),S=n(966712),w=n(418956),A=n(498750),C=n(527735),N=n(153234),L=n(647899),O=n(743282),R=n(572206),P=n(247199),D=n(667167),k=n(946689),M=n(46481),F=n(154254),x=n(939863),U=n(588666),B=n(154483),V=n(738269),G=n(293017),H=n(286954),K=n(271245),W=n(182976),$=n(662275),Y=n(801161),z=n(931828),j=n(798099),q=n(298527),Z=n(378905),X=n(696673),J=n(44892),Q=n(788744),ee=n(756317),et=n(680681),er=n(453681),en=n(824630),ei=n(957987),ea=n(543817),eo=n(875847),es=n(669178),el=n(335682),ec=n(694687),ed=n(416095),eu=n(933342),em=n(99506),ep=n(336599),eh=n(643067),e_=n(458136),eg=n(137459),ef=n(173454),eE=n(809073),ey=n(498606),eb=n(386976),ev=n(664457),eI=n(186380),eT=n(448406),eS=n(48515),ew=n(811559),eA=n(202248),eC=n(858855),eN=n(715762),eL=n(507662),eO=n(538697),eR=n(239737),eP=n(16774),eD=n(760445),ek=n(746806),eM=n(247307),eF=n(517418),ex=n(371623),eU=n(75640),eB=n(657124),eV=n(705129),eG=n(837746),eH=n(661735),eK=n(280999),eW=n(731719);let e$=(0,b.hG)(eG.jkd),eY=e=>{switch(e){case eT.rp.SMALL:return{height:22,width:22,gridClassName:""};case eT.rp.NORMAL:return{height:72,width:72,gridClassName:""};case eT.rp.WIDE:case eT.rp.SLIDES_ASSETS:return{height:52,width:256,gridClassName:""}}},ez=(0,B.fv)(),ej=(e,r)=>{let n=eY(r),a=(0,S.kc)().ds_use_lib_keys?`${e.node_id}-${e.library_key}`:`${e.node_id}-${ez(e)}`;return i.createElement(ew.lX,{key:a,item:e,height:n?.height,width:n?.width,showName:!1,shouldHideDescription:!0,shouldShowNamePopout:!0,isFigJam:!0,noBackground:!1,displayType:null===r?"list-compact":"grid",isSearch:!1,className:null===r?eH.Tv:eH.B_})};function eq(e,r){return i.createElement(eI.M,{item:e,shouldGenerateLocalThumbnail:!0,className:null===r?eH.Tv:eH.B_,draggable:!1})}let eZ=e=>["drilldownItem-productComponent",e.node_id],eX=e=>e.length>1,eJ=(0,B.fv)();function eQ(e){let{openFile:r,onSwapCallback:n,instanceSwapPickerShown:a,multiselect:s,onMultiselectCallback:m,selectedItems:h,scrollContainerHeight:_,isLoadingSubscribedLibraries:f,shouldPerformSwapOnClick:b,itemsToSwap:N,incrementNumSearchesForTracking:O,dropdownAccessory:R,pickerType:k,pickerToggleRef:M,preferredItems:B,overrideDefaultItem:G,showPreferredSectionByDefault:j,preferredValuesErrorComponent:el,sessionId:ey,isSearching:eI,setIsSearching:ew,entrypointForLogging:eC}=e,ek=k===D.Zl.INSTANCE_SWAP_PICKER||k===D.Zl.PREFERRED_VALUES_PICKER,eG=(0,D.qc)(),[eK]=(0,eU.Pk)(),eW=eG&&!eK,{library:eY,dropdownShown:ez,fileByKey:eX,hubFiles:eQ,sceneGraphSelection:e0,isListView:e1,loadingState:e2}=(0,T.R)(e=>({library:e.library,dropdownShown:e.dropdownShown,fileByKey:e.fileByKey,hubFiles:e.hubFiles,sceneGraphSelection:e.mirror.sceneGraphSelection,isListView:e.instanceSwapPickerListLayout,loadingState:e.loadingState})),e5=(0,o.d4)(e=>e.universalInsertModal.showing),e6=r.key,e8=(0,o.wA)(),e4=s?null:h[0]??null,e9=i.useMemo(()=>G?{fileKey:eJ(G),libraryKey:G.library_key}:null,[G]),e7=i.useMemo(()=>e9??J.uj(h),[e9,h]),te=i.useMemo(()=>(0,eF.Dr)(eY,eG?eF.Wx.COMPONENTS_FIRST:eF.Wx.SUBPATHS_FIRST,eW),[eW,eG,eY]),tt=i.useMemo(()=>(0,eF.Oj)(eY,r,eX,eQ,e7),[eY,r,eX,eQ,e7]),tr=(0,es.g5)(eE.$A.Design).productComponents.filter(e=>!(0,X.tz)(eJ(e))).map(eF.Kk),tn=i.useMemo(()=>B?B.map(eF.Kk):[],[B]),ti=i.useMemo(()=>(0,eF._D)(tt,eX,eQ,eG?eF.Wx.COMPONENTS_FIRST:eF.Wx.SUBPATHS_FIRST,eW),[tt,eX,eQ,eG,eW]),[ta,to,ts]=i.useMemo(()=>{if(e7&&(ti[e7.fileKey]?.length??0)>0)return[e7,ti[e7.fileKey],tt[e7.fileKey]];if(te.length>0)return[{fileKey:e6,libraryKey:(0,g.l)(r.libraryKey)},te,(0,ed.X0)(J.Qx(eY))];if(ek){let e=Object.entries(ti).find(([e,r])=>r.length>0);if(e)return[{fileKey:e[0],libraryKey:(0,U.$)(e[0])},e[1],void 0]}return[null,[],void 0]},[e7,ti,te,ek,tt,e6,r.libraryKey,eY]),[tl,tc]=i.useState(()=>j?{type:D.iN.PREFERRED}:ta&&(ek||ta.fileKey!==e6)?{type:D.iN.FILE,libraryIdentifier:ta}:{type:D.iN.RECENT});ex.S.useLaunchedEvent({pickerType:k,sessionId:ey,dropdownSelection:tl,entrypoint:eC});let[td,tu]=i.useState(null),tm=(0,o.Pj)(),tp=i.useMemo(()=>{if((0,S.kc)().ds_instance_swap_use_ai_results)return[];let e=[],n=(0,ed.X0)(J.Qx(eY));e.push(...n);let i=[];return Object.values(tt).forEach(e=>{i.push(...e)}),e.push(...i),(e=>{let n=[];n=e.filter(e=>e.type===ef.PW.COMPONENT);let i=e.filter(e=>e.type===ef.PW.STATE_GROUP),a=(0,ed.Vk)(eY.published.components),o=(0,ed.A0)(eY,a,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},(0,eo.T9)(r.project)),s=Object.values((0,ed.WV)(eY.local.components)),l=o.concat(s),c=(0,ed.Gg)(i,l);return n.push(...c),n})(e)},[tt,eY,r]),th=(0,eR.Nv)(!0),t_=ex.S.useOpenFileProperties(),tg=i.useCallback(e=>tl.type===D.iN.FILE?tl.libraryIdentifier.fileKey===e6?e.filter(e=>"LEAF"===e.type&&e.item.isLocal):e.filter(e=>"LEAF"===e.type&&(0,Z.TK)(e.item,tl.libraryIdentifier.fileKey)&&(0,ed.Av)(e.item)):tl.type===D.iN.PREFERRED?e.filter(e=>"LEAF"===e.type&&B&&!!B.find(r=>r.node_id===e.item.node_id)):e,[tl,e6,B]),{getConfig:tf}=(0,L.I7)("exp_search_unpublished_assets"),tE=i.useMemo(()=>tf().getValue("enabled",!1)&&tl.type===D.iN.FILE?tl.libraryIdentifier.fileKey===e6?{type:eS.I.LOCAL}:{type:eS.I.FILE,fileKey:tl.libraryIdentifier.fileKey}:{type:eS.I.ALL},[tl,tf,e6]),ty=i.useCallback(async(e,n,i)=>{let a=[];if((0,S.kc)().ds_instance_swap_use_ai_results){if(f)return[];eu.YG.refreshSourcesIfNeeded(tm);let o=e7?tt[e7.fileKey]:void 0;a=(await eu.YG.computeResultsReduxSearchTypeHelper(e,tE,r.editorType===em._Y.DESIGN,w.zl.get(er.qp),n??null,"instance_swap",i,!1,!0,o,e7?.fileKey??void 0,h.map(e=>{let{type:r}=e,n=r===ef.PW.COMPONENT?e.component_key:e.key;if(n)return{type:r,key:n}}).filter(e=>void 0!==e))).normalizedSearchResults.filter(e=>e.type!==ef.PW.MODULE).map(e=>({item:e,score:e.score}))}else a=await (0,e_.q)(e,tp);let o=(0,P.xd)(a.map(e=>e.item),e=>e.name,e=>eJ(e)+e.node_id),s=th&&(0,S.kc)().ds_instance_swap_use_ai_results;if(ek){let r=tg(o).length;y.az.trackDefinedEvent("instance_swap_picker.search",{...t_,sessionId:ey,searchSessionId:n,query:e,queryId:i,numResults:o.length,numFilteredResults:r,aiResultsEnabled:s,dropdownType:(0,D.Z4)(tl,e6),libraryKey:tl.type===D.iN.FILE?tl.libraryIdentifier.libraryKey:void 0,isPreferredValues:k===D.Zl.PREFERRED_VALUES_PICKER})}else(0,y.sx)("Component Insert Search",{searchSessionId:n,query:e,queryId:i,numResults:o.length,aiResultsEnabled:s});return O(),o},[th,ek,O,f,tm,e7,tt,tE,r.editorType,tp,tg,t_,ey,tl,e6,k,h]),tb=i.useCallback((e,r)=>{e.preventDefault(),e.stopPropagation(),e8(V.j7({type:ev.j,data:{component:r.item,position:{top:e.clientY,left:e.clientX}}}))},[e8]),{validDropdownSelection:tv,validRootDrilldownItems:tI}=i.useMemo(()=>{if(tl.type===D.iN.RECENT&&eI)return{validDropdownSelection:tl,validRootDrilldownItems:tr};let e=[];if(tl.type===D.iN.PREFERRED&&tn.length>0?e=tn:tl.type===D.iN.RECENT&&tr.length>0?e=tr:tl.type===D.iN.FILE&&ti.hasOwnProperty(tl.libraryIdentifier.fileKey)?e=ti[tl.libraryIdentifier.fileKey]:tl.type===D.iN.FILE&&e6===tl.libraryIdentifier.fileKey&&(e=te),0===e.length){let e,r;if(ta)e={type:D.iN.FILE,libraryIdentifier:ta},r=to;else if(tn.length>0)e={type:D.iN.PREFERRED},r=tn;else if(tr.length>0)e={type:D.iN.RECENT},r=tr;else if(Object.keys(ti).length>0){let n=Object.keys(ti)[0];e={type:D.iN.FILE,libraryIdentifier:{fileKey:n,libraryKey:(0,U.$)(n)}},r=ti[n]}else e={type:D.iN.RECENT},r=tr;return{validDropdownSelection:e,validRootDrilldownItems:r}}return{validDropdownSelection:tl,validRootDrilldownItems:e}},[tl,tn,tr,ti,e6,te,ta,to,eI]),tT=i.useMemo(()=>{if(s){if(e7&&ts)return G?{[eJ(G)]:J.O9(G,ts)}:{[e7?.fileKey]:(0,eF.OK)(h,ts)}}else{let e=G||e4;if(e&&ts){let r=J.O9(e,ts);return{[eJ(e)]:r}}}return{}},[s,e7,ts,h,G,e4]),[tS,tw]=i.useState({}),tA=i.useMemo(()=>({...tT,...tS}),[tT,tS]),[tC,tN]=i.useState({index:-1,parentId:null}),tL=i.useCallback(()=>tN({index:-1,parentId:null}),[]),tO=i.useCallback((e,r)=>{tL(),tv&&tv.type===D.iN.FILE&&(tw({[tv.libraryIdentifier.fileKey]:e}),ek&&y.az.trackDefinedEvent("instance_swap_picker.navigate",{...t_,sessionId:ey,direction:r,path:e.join(" / "),libraryKey:tv.libraryIdentifier.libraryKey,viewMode:e1?"list":"grid",isPreferredValues:k===D.Zl.PREFERRED_VALUES_PICKER}))},[tL,e1,ek,t_,k,ey,tv]),tR=i.useMemo(()=>tv.type===D.iN.FILE&&tA[tv.libraryIdentifier.fileKey]||[],[tv,tA]),tP=(0,eP.b)({hideTooltips:!0}),tD=(0,q.n1)(),tk=i.useCallback(()=>{k!==D.Zl.PREFERRED_VALUES_PICKER&&(a.isShown&&a.modal?(a.returnFocusToToggle&&M?.current&&M.current.focus(),e8(Y.jD()),e8((0,H.vq)())):k===D.Zl.RESOURCE_INSERT_MODAL&&e5&&(e8(z.b({seen_component_onboarding_modal:!0})),tP()))},[a,M,e8,k,tP,e5]),tM=i.useCallback(e=>{if(e1)return null;let r=e.filter(e=>"LEAF"===e.type).map(e=>e.item);return(0,eT.PI)(r)},[e1]),tF=i.useCallback(r=>{let n;n=r.type===D.iN.PREFERRED?{type:D.iN.PREFERRED}:r.type===D.iN.RECENT?{type:D.iN.RECENT}:{type:D.iN.FILE,libraryIdentifier:r.libraryIdentifier},y.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:th,entryPoint:"instance-swap",featureSlug:"library-filter-usage"}),tc(n),e.searchBarRef?.current&&e.searchBarRef.current.focus(),ek?y.az.trackDefinedEvent("instance_swap_picker.library_switch",{...t_,sessionId:ey,dropdownType:(0,D.Z4)(n,e6),libraryKey:n.type===D.iN.FILE?n.libraryIdentifier.libraryKey:void 0,isPreferredValues:k===D.Zl.PREFERRED_VALUES_PICKER}):(0,y.sx)("Component Insert Library Switch",{isSearching:eI})},[e.searchBarRef,ek,t_,ey,e6,k,eI,th]),tU=(0,ec.sZ)(),tB=(0,eh.Oe)(tU),tV=tl.type===D.iN.FILE?tl.libraryIdentifier.fileKey:void 0,tG=(0,Q.Sd)(),tH=(0,Q.Fl)(),tK=i.useMemo(()=>({format:r=>r.type===D.iN.RECENT?eI?(0,x.t)("design_systems.instance_swap_picker.all_libraries"):e.pickerType===D.Zl.RESOURCE_INSERT_MODAL?(0,x.t)("universal_insert.recents"):(0,x.t)("design_systems.instance_swap_picker.recently_used"):r.type===D.iN.PREFERRED?(0,x.t)("design_systems.instance_swap_picker.preferred"):r.type===D.iN.FILE?r.libraryIdentifier.fileKey===e6?(0,S.kc)().dse_local_assets_copy?(0,x.t)("design_systems.instance_swap_picker.created_in_this_file"):(0,x.t)("design_systems.instance_swap_picker.local_components"):eX[r.libraryIdentifier.fileKey]?.name??(0,eg.oA)(eQ[r.libraryIdentifier.fileKey])??"":"",isEqual:(e,r)=>e.type===r.type&&(e.type!==D.iN.FILE||r.type!==D.iN.FILE||e.libraryIdentifier.libraryKey===r.libraryIdentifier.libraryKey)}),[e6,eX,eQ,eI,e.pickerType]),tW=i.useMemo(()=>{switch(tl.type){case D.iN.FILE:if(tl.libraryIdentifier.fileKey===e6)return"Local components";return"Subscribed libraries";case D.iN.RECENT:return"Recently used";case D.iN.PREFERRED:return"Preferred values"}},[tl,e6]),t$=i.useCallback(()=>{e8($.to({type:eL.T,data:{initialTab:ef.Wv.LIBRARIES,entrypoint:eN.r6.INSTANCE_SWAP_BROWSE_LIBRARIES_LINK}}))},[e8]),tY=i.useCallback(e=>{if("LEAF"!==e.type||0===h.length)return!1;let{item:r}=e;if(td&&!s){let e=(0,eV.Ml)(td,Object.keys(e0));if(ep.VP(e2,e))return r.node_id===td.node_id&&(0,Z.EF)(r,td)}return h.some(e=>r.type===ef.PW.COMPONENT&&e.type===ef.PW.COMPONENT?!!r.component_key&&r.component_key===e.component_key||!r.component_key&&!e.component_key&&r.node_id===e.node_id:r.type===ef.PW.STATE_GROUP&&e.type===ef.PW.STATE_GROUP&&(!!r.key&&r.key===e.key||!r.key&&!e.key&&r.node_id===e.node_id))},[td,e0,e2,s,h]),tz=i.useCallback(e=>{let{currentDrilldownItems:r,index:n,parentId:i}=e,a=Math.max(Math.min(tC.index,n),0),o=Math.min(Math.max(tC.index,n),r.length-1),s=r.slice(a,o+1).filter(e=>"LEAF"===e.type);m?.(s.map(e=>e.item),tY(r[n])?eF.Wu.DESELECT:eF.Wu.SELECT),tN({index:n,parentId:i})},[tY,m,tC.index]),tj=(0,ea.u)({alwaysSwap:ek,canSwap:b,itemsToSwap:N,openFileKey:e6,onSwap:n,sourceForTracking:"Instance Swap Picker"}),tq=i.useCallback((e,r,n,i,a)=>{if(!e6)return;if(s&&i){if(e.shiftKey&&-1!==tC.index&&tC.parentId===i.parentId){tz(i);return}tN({index:i.index,parentId:i.parentId})}let o=e.altKey;td&&e8(W.yH({key:(0,eV.Ml)(td,Object.keys(e0))})),tu(r.item),tj({altKey:o},r.item,a?.queryId),tk();let l={aiResultsEnabled:th&&(0,S.kc)().ds_instance_swap_use_ai_results,assetKey:(0,ed.Av)(r.item),position:i?.index,reciprocalRank:(0,c.Et)(i?.index)?1/(1+i?.index):void 0,query:a?.query,queryId:a?.queryId,scoreAi:r.item.ai_score??void 0,scoreLexical:r.item.lexical_score??void 0,sessionId:ey,dropdownType:(0,D.Z4)(tl,e6),fromSearch:n,libraryKey:tl.type===D.iN.FILE?tl.libraryIdentifier.libraryKey:void 0,viewMode:e1?"list":"grid"},d={...t_,...l,type:r.item.type===ef.PW.COMPONENT?"component":"state_group",searchSessionId:ey};if(k===D.Zl.INSTANCE_SWAP_PICKER){let e=function(e){return e?e.type===ef.PW.COMPONENT?e.component_key:e.type===ef.PW.STATE_GROUP?e.key:void 0:void 0},n=h[0],i={prevInstanceType:n?.type,prevInstanceNodeId:n?.node_id,prevInstanceComponentKey:e(n)},a=r.item,o={newInstanceItemType:a.type,newInstanceNodeId:a.node_id,newInstanceComponentKey:e(a)};y.az.trackDefinedEvent("instance_swap_picker.insert_instance",{...d,...i,...o}),y.az.trackDefinedEvent("asset_search.result_inserted",{...l,assetType:d.type,entryPoint:"instance-swap",fileKey:t_.fileKey,fileOrgId:t_.orgId,fileTeamId:t_.teamId,userId:t_.userId})}else if(k===D.Zl.PREFERRED_VALUES_PICKER){let e=tY(r);(0,y.sx)("Preferred Values Picker Toggle Component",{...d,action:e?"deselect":"select"})}else(0,y.sx)("Component Insert Panel Insert Instance",{type:r.item.type===ef.PW.COMPONENT?"component":"state_group",fromSearch:n,altKey:o,viewMode:e1?"list":"grid",dropdownType:(0,D.Z4)(tl,e6)})},[e6,s,td,tj,tk,th,ey,tl,e1,t_,k,tC.index,tC.parentId,tz,e8,e0,h,tY]),tZ=i.useRef(null),tX=i.useRef(null),tJ=i.useCallback(e=>{e&&setTimeout(()=>tX.current?.focus(),0)},[]),tQ=i.createElement(i.Fragment,null,i.createElement(eB.p,{id:(0,D.YU)(k),property:tv,formatter:tK,rightIcon:i.createElement(ei.P,{resourceId:tV,libraryKey:tV?(0,U.$)(tV):void 0}),onChange:tF,dispatch:e8,dropdownShown:ez,dropdownAlignment:"left",dropdownWidth:230,openOnKeyPressed:[A.Uz.SPACE,A.Uz.ENTER],inputClassName:k===D.Zl.RESOURCE_INSERT_MODAL?eH.je:void 0,className:k===D.Zl.RESOURCE_INSERT_MODAL?eH.kc:eH.Kv,ref:tZ,inputRef:tX,onDropdownHidden:tJ,role:"combobox",dataTestId:"instance-swap-picker-library-select"},(()=>{function e(e){return i.createElement(eB.c,{key:(0,D.ez)(e),value:e})}function n(e){return i.createElement(eB.c,{key:(0,D.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:i.createElement(en.t,null)})}function a(e){return i.createElement(eB.c,{key:(0,D.ez)(e),value:e,removeTextRightPadding:!0,rightSettingsIcon:i.createElement(ee.FX,null)})}if(f&&(0,S.kc)().dse_instance_swap_perf)return i.createElement(eB.c,{key:"loading",value:{type:D.iN.FILE,libraryIdentifier:{fileKey:"loading",libraryKey:(0,g.l)("loading")}},disabled:!0},i.createElement("div",{className:F.cx.w150.mx12.flex.justifyCenter.$},i.createElement(d.k,null)));let{pass:o,fail:s}=(0,C.j)(Object.keys(ti),X.wJ),c=[];tn.length&&c.push(e({type:D.iN.PREFERRED}));let u=(0,eo.T9)(r.project);if(e7&&e7.fileKey!==e6&&!j&&!(0,ed.qB)(eY,{key:r.key,team_id:r.teamId,editor_type:r.editorType,source_file_key:r.sourceFileKey},{key:e7.fileKey},u)&&eX[e7.fileKey]&&(c.length>0&&c.push(i.createElement(eO.sK,{key:"non-subscribed-divider"})),c.push(e({type:D.iN.FILE,libraryIdentifier:e7})),s=s.filter(e=>e!==e7.fileKey)),tB&&(0,et.NX)(tG)){let e=s.map(e=>eX[e]).filter(l.Vq).map(({key:e,name:r,library_key:n})=>({key:e,name:r,library_key:n}));(0,et.k9)({libraries:e,approvedLibraryFileKeysByResourceType:tG,approvedLibraryKeysByResourceType:tH}),s=e.map(({key:e})=>e)}if((eI||tr.length>0)&&(c.length>0&&c.push(i.createElement(eO.sK,{key:"recent-divider"})),c.push(e({type:D.iN.RECENT}))),ek){for(let n of(te.length>0&&(c.length>0&&c.push(i.createElement(eO.sK,{key:"local-divider"})),c.push(e({type:D.iN.FILE,libraryIdentifier:{fileKey:e6,libraryKey:(0,g.l)(r.libraryKey)}}))),s.length>0&&c.length>0&&c.push(i.createElement(eO.sK,{key:"subscribed-divider"})),s))tB&&(0,et.HZ)(n)?c.push(a({type:D.iN.FILE,libraryIdentifier:{fileKey:n,libraryKey:(0,U.$)(n)}})):c.push(e({type:D.iN.FILE,libraryIdentifier:{fileKey:n,libraryKey:(0,U.$)(n)}}));if(tD)for(let e of o)c.push(n({type:D.iN.FILE,libraryIdentifier:{fileKey:e,libraryKey:(0,U.$)(e)}}));return c}for(let n of(te.length>0&&c.push(e({type:D.iN.FILE,libraryIdentifier:{fileKey:e6,libraryKey:(0,g.l)(r.libraryKey)}})),s.length>0&&c.push(i.createElement(eO.sK,{key:"subscribed-divider"})),s))tB&&(0,et.HZ)(n)?c.push(a({type:D.iN.FILE,libraryIdentifier:{fileKey:n,libraryKey:(0,U.$)(n)}})):c.push(e({type:D.iN.FILE,libraryIdentifier:{fileKey:n,libraryKey:(0,U.$)(n)}}));if(tD)for(let e of o)c.push(n({type:D.iN.FILE,libraryIdentifier:{fileKey:e,libraryKey:(0,U.$)(e)}}));return c})()),R),t0=i.useRef(null),t1=i.createElement("div",{className:k===D.Zl.RESOURCE_INSERT_MODAL?E()(eH.FK,eH.k2):eH._M},eG?i.createElement(i.Fragment,null,tQ,i.createElement("div",{className:F.cx.ml4.$},i.createElement(eU.sX,{pickerType:k,includeFolderSetting:tv.type===D.iN.FILE&&!eI,ref:t0,sessionId:ey,queryId:eI?e.queryId:void 0}))):tQ),t2=i.useCallback(()=>{tc({type:D.iN.RECENT}),ek&&y.az.trackDefinedEvent("instance_swap_picker.search_all_libraries_from_empty",{...t_,sessionId:ey,query:e.query,queryId:e.queryId,isPreferredValues:k===D.Zl.PREFERRED_VALUES_PICKER})},[ek,t_,k,e.query,e.queryId,ey]),t5=i.createElement(e3,{onClick:t2,type:tl.type}),t3=i.createElement("div",{className:ek?eH.y7:eH.uR,style:{height:_+(e.pickerType===D.Zl.RESOURCE_INSERT_MODAL?eD.Kr:0)}},i.createElement("div",{className:ek?eH.qv:void 0},(0,x.tx)("design_systems.instance_swap_picker.no_components")),i.createElement("div",{className:F.cx.mt8.if(!ek,F.cx.flex.itemsCenter.justifyCenter.mt12).$},i.createElement(u.$n,{onClick:t$,variant:"secondary",iconPrefix:i.createElement(p.l,{className:F.cx.mr2.$})},(0,x.tx)("design_systems.instance_swap_picker.browse_libraries")))),t6=function(e,r,n,i){let a=(0,w.md)(er.qp),o=e?r[e.fileKey]:null,s=(0,v.k9)(()=>o?new Set(o.map(e=>(0,ed.Av)(e))):[],[o]),l=(0,v.k9)(()=>{Object.keys(a)},[a]),c=(0,I.h)(e),d=(0,I.h)(l),u=(0,I.h)(s),m=(0,I.h)(n)&&!n,p=(0,I.h)(i);return c||d||u||m||p}(e7,tt,f,h);(0,eA.K)({disabled:!(0,S.kc)().dse_instance_swap_perf});let t8=i.useMemo(()=>{if((0,S.kc)().dse_instance_swap_perf){if(tv.type===D.iN.FILE)return!(0,ed.El)(tv.libraryIdentifier.fileKey,tv.libraryIdentifier.libraryKey);if(tv.type===D.iN.RECENT)return(0,ep.VP)(e2,K.fi);if(tv.type===D.iN.PREFERRED)return ep.VP(e2,(0,eb._A)(e6))}return f||(0,ep.VP)(e2,K.fi)},[f,e2,tv,e6]);(0,eM.x)(t8);let t4=Object.keys(ti).length>0;return i.createElement(P.uO,{recordingKey:e.recordingKey,scrollContainerHeight:_,onSearch:ty,searchFilter:tg,setIsSearching:ew,onLeafItemContextMenu:tb,onLeafItemDrilldown:tq,onLeafItemDraggable:ek?void 0:{sourceForTracking:"component-insert-modal",afterSuccessfulInsert:tk,sectionNameForTracking:tW},rootDrilldownItems:tI,initialPath:tR,beforeItems:t1,beforeItemsRefs:[tX,t0],focusBeforeItems_DEPRECATED_UI2:()=>tZ.current?.focus(),emptyState:t3,isSelectedItem:tY,multiselect:s,onMultiselectCallback:m,getBackgroundColorForLeafItemThumbnail:J.zR,getLeafItemTooltip:ek?eF.pf:void 0,getLeafItemThumbnail:ek||e1?eq:ej,drilldownItemsRecordingKey:"instanceSwapDrilldownItems",drilldownItemsKeySupplement:tl.type===D.iN.FILE?tl.libraryIdentifier.fileKey:tl.type,getLeafItemRecordingKey:eZ,getThumbnailGridLayoutForItems:tM,onDrilldownPathChange:tO,additionalRowBottomMargin:ek?P.qy:0,renderLeafItemNames:!!ek||e1,searchBarRef:e.searchBarRef,pickerToggleRef:M,extraHeightOnSearch:ek||e.pickerType===D.Zl.RESOURCE_INSERT_MODAL?0:e$,validLibrariesArePresent:t4,isLoading:t8,searchDebounceTime:e.searchDebounceTime,searchEmptyStateCTA:t5,searchBarPlaceholderText:tl.type===D.iN.PREFERRED?(0,x.t)("design_systems.instance_swap_picker.search_preferred"):tl.type===D.iN.RECENT?(0,x.t)("design_systems.instance_swap_picker.search_all_libraries"):null!=tl.libraryIdentifier.fileKey&&eX[tl.libraryIdentifier.fileKey]?(0,x.t)("design_systems.instance_swap_picker.search_filename",{filename:eX[tl.libraryIdentifier.fileKey].name}):(0,x.t)("design_systems.instance_swap_picker.search"),pickerType:e.pickerType,errorComponent:tl.type===D.iN.PREFERRED?el:void 0,query:e.query,setQuery:e.setQuery,contextValue:e.drilldownPickerContextValue,shouldUpdateServerResults:t6,searchTypeOption:tE,sessionId:ey})}let e0=(0,B.fv)();function e1(e){let{multiselect:r,onMultiselectCallback:n,selectedItems:a,searchDebounceTime:s,shouldPerformSwapOnClick:l=!0,itemsToSwap:c,onSwapCallback:d,searchBarRef:u,setNumSearchesForTracking:m,scrollContainerHeight:p,pickerToggleRef:h,toggleGridViewButton:_,preferredItems:g,overrideDefaultItem:f,preferredValuesErrorComponent:E,sessionId:y,entrypointForLogging:b}=e,v=i.useRef(f).current,{instanceSwapPickerShown:I,loadingState:w,library:A}=(0,T.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,loadingState:e.loadingState,library:e.library})),C=(0,o.d4)(el.tB),N=i.useMemo(()=>!!g&&eX(g),[g]),L=C?.key||null,O=i.useMemo(()=>v?{fileKey:e0(v),libraryKey:v.library_key}:null,[v]),R=i.useMemo(()=>O??J.uj(a),[O,a]),P=(0,eC.U)(),k=i.useMemo(()=>{if(null==C||null==L)return!0;let e=(0,eo.T9)(C?.project);if(R&&C&&(0,ed.qB)(A,{key:C.key,team_id:C.teamId,editor_type:C.editorType,source_file_key:C.sourceFileKey},{key:R.fileKey},e)&&!(0,ed.El)(R.fileKey,R.libraryKey)){let e=(0,ed.Mb)(R.fileKey,R.libraryKey);return!ep.D2(w,e)}if(N&&R&&R.fileKey!==L)return ep.VP(w,(0,eb._A)(L));if((0,S.kc)().dse_instance_swap_perf)return P;let r=(0,eV.yD)(L);return!ep.D2(w,r)},[C,L,N,R,A,w,P]),M=i.useCallback(()=>m?.(e=>e+1),[m]);return(I.isShown||e.pickerType!==D.Zl.INSTANCE_SWAP_PICKER)&&L&&C?i.createElement(eQ,{openFile:C,instanceSwapPickerShown:I,multiselect:r,onMultiselectCallback:n,selectedItems:a,scrollContainerHeight:p,recordingKey:e.recordingKey,shouldPerformSwapOnClick:l,itemsToSwap:c,onSwapCallback:d,pickerToggleRef:h,searchBarRef:u,isLoadingSubscribedLibraries:k,searchDebounceTime:s,incrementNumSearchesForTracking:M,pickerType:e.pickerType,dropdownAccessory:e.pickerType===D.Zl.RESOURCE_INSERT_MODAL?_:null,preferredItems:g,preferredValuesErrorComponent:E,overrideDefaultItem:v,showPreferredSectionByDefault:N,query:e.query,setQuery:e.setQuery,drilldownPickerContextValue:e.drilldownPickerContextValue,sessionId:y,isSearching:e.isSearching,setIsSearching:e.setIsSearching,queryId:e.queryId,entrypointForLogging:b}):null}function e2(e){let{pickerType:r,initialWidth:n,initialHeight:l,title:c,pickerToggleRef:d}=e,u=r===D.Zl.INSTANCE_SWAP_PICKER||r===D.Zl.PREFERRED_VALUES_PICKER,{instanceSwapPickerShown:m,dropdownShown:p}=(0,T.R)(e=>({instanceSwapPickerShown:e.instanceSwapPickerShown,dropdownShown:e.dropdownShown})),h=(0,o.wA)(),_=i.useRef(null),[g,f]=i.useState((0,O.g)()),E=m.isShown?new R.Mi(m.initialX,m.initialY):new R.Mi(0,0),b=i.useCallback(()=>{p?.type===(0,D.YU)(r)&&h(V.oB())},[h,p,r]),v=i.useCallback(()=>{m.isShown&&m.modal&&h((0,H.qX)({...m,modal:!1,returnFocusToToggle:!1})),_.current?.focus()},[h,m]),[I,S]=i.useState(0),w=i.useCallback(()=>{(0,y.sx)(`${u?"Instance Swap Picker":"Component Insert"} Total Searches`,{numSearches:I}),h((0,H.vq)())},[h,I,u]),A=i.useRef(null),C=u?320:428,{modalWidth:L}=(0,D.TQ)(r),P=(0,D.qc)(),k=i.useCallback(()=>m.isShown&&m.initialY?l||Math.min(window.innerHeight-m.initialY-20,C):C,[C,l,m]),[M,F]=i.useState(k),x=a.findDOMNode(A.current?.getEl());i.useLayoutEffect(()=>{let e=(0,s.s)(()=>{if(!x)return;let e=x.getBoundingClientRect();e.bottom>window.innerHeight&&F(M-(e.bottom-window.innerHeight)-20)},200);return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}},[M,F,x]);let U=i.useRef(void 0),[B,G]=i.useState(""),[K,W]=i.useState(!1),$=i.createElement(e5,{isSwapPicker:u,searchBarRef:_,sessionId:g,queryId:K?U.current:void 0}),Y=i.createElement("div",{className:eH.Hn},i.createElement("div",{className:eH.D0},c),!P&&$),z=i.useCallback(()=>{p?.type.includes(eU.fn)&&h(V.oB())},[h,p?.type]);return i.createElement(ek.vx,{title:u?Y:c,initialPosition:E,initialHeight:M,initialWidth:n??L,isCloseHidden:u&&!P,dragHeaderOnly:!0,onDragStart:b,onDragEnd:v,onClose:w,ref:A,autoflowHeight:!0,recordingKey:N.Pt(e.recordingKey,"modal"),disableHeaderBottomBorder:P,onClick:z},i.createElement(e1,{...e,searchBarRef:_,toggleGridViewButton:$,setNumSearchesForTracking:S,scrollContainerHeight:M,pickerToggleRef:d,query:B,setQuery:G,sessionId:g,isSearching:K,setIsSearching:W,drilldownPickerContextValue:{queryId:U},queryId:U.current}))}function e5({isSwapPicker:e,isPreferredValues:r,searchBarRef:n,sessionId:a,queryId:s}){let l=(0,o.wA)(),c=ex.S.useTrackViewToggle({sessionId:a,queryId:s,isPreferredValues:!!r}),d=(0,o.d4)(e=>r?e.preferredValuesPickerListLayout:e.instanceSwapPickerListLayout),u=r?G.U8:G.fG,p=i.useCallback(i=>{i.stopPropagation(),l(u({isListLayout:!d})),n?.current&&n.current.focus(),e?c(!d):(0,y.sx)(`${r?"Preferred Values Picker":"Component Insert"} View Toggle`,{viewMode:d?"grid":"list"})},[l,u,d,n,e,c,r]);return i.createElement(m.K,{"aria-label":d?(0,x.t)("design_systems.instance_swap_picker.show_as_grid"):(0,x.t)("design_systems.instance_swap_picker.show_as_list"),onClick:p,recordingKey:N.Pt("toggleGridViewButton",r?"preferredValues":"instanceSwapPicker"),htmlAttributes:{onMouseDown:j.dG,"data-tooltip":d?(0,x.t)("design_systems.instance_swap_picker.show_as_grid"):(0,x.t)("design_systems.instance_swap_picker.show_as_list"),"data-tooltip-type":ey.Ib.TEXT}},i.createElement(M.U,{svg:d?eK.A:eW.A},d?i.createElement(h.t,null):i.createElement(_.Z,null)))}function e3({onClick:e,type:r}){let n=(0,D.qc)();if(r===D.iN.RECENT)return null;let a=(0,x.tx)("design_systems.instance_swap_picker.search_all_libraries");return n?i.createElement(u.$n,{onClick:e,variant:"secondary"},a):i.createElement(k.N_,{onClick:e,className:eH.nf,canFocus:!0,trusted:!0},a)}},28630:(e,r,n)=>{n.d(r,{g:()=>u});var i=n(302245),a=n(848661),o=n(496470),s=n(234945),l=n(113916),c=n(705129);let d=e=>e.library;function u(){return(0,i.Mz)([(e,r,n)=>r,(e,r,n)=>n,d],(e,r,n)=>{if(!r.get(e))return null;let{selectedItem:i}=(0,o.XV)(e,n,r);return i})}(0,i.Mz)([d,s.dK,l.i2],(e,r,n)=>{let i=null,{backingSymbolGUID:s,backingStateGroupGUID:l}=(0,c.nD)(new Set(n),r);if(l&&(0,a.hS)(l)?i=l:s&&(0,a.hS)(s)&&(i=s),!i)return null;let{selectedItem:d}=(0,o.XV)(i,e,r);return d})},428877:(e,r,n)=>{n.d(r,{Ig:()=>h,OE:()=>f,dc:()=>_,oI:()=>y,rP:()=>g,y6:()=>b});var i=n(411855),a=n(136880),o=n(922827),s=n(162644),l=n(428654),c=n(775664),d=n(973149),u=n(723081),m=n(617453),p=n(836283);let h=(()=>{let e=new d.o1({normalizeFactor:360,min:0,max:1}),r=new d.o1({normalizeFactor:100,min:0,max:1}),n=new d.t6({min:0,max:1}),s=new d.o1({normalizeFactor:255,min:0,max:1}),u={hsla:(n,i,a)=>a?`HSL ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.l)}`:`hsla(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.l)}%, ${i})`,hsba:(n,i,a)=>a?`HSB ${e.format(n.h)}\xb0 ${r.format(n.s)} ${r.format(n.v)}`:`hsba(${e.format(n.h)}, ${r.format(n.s)}%, ${r.format(n.v)}%, ${i})`,rgba:(e,r,n)=>n?`RGB ${s.format(e.r)} ${s.format(e.g)} ${s.format(e.b)}`:`rgba(${s.format(e.r)}, ${s.format(e.g)}, ${s.format(e.b)}, ${r})`,uicolor:(e,r,i)=>i?`UIColor(${n.format(e.r)}, ${n.format(e.g)}, ${n.format(e.b)}, ${r})`:`UIColor(red: ${n.format(e.r)}, green: ${n.format(e.g)}, blue: ${n.format(e.b)}, alpha: ${r})`};return()=>{let e=(0,m.Ku)();return i.useCallback((r,n)=>{let i=Number(r.a).toLocaleString("en",{maximumFractionDigits:2});switch(e){case o.NVY.HEX:let s=c.TI.format(r,n?.hexCSSValue?{withAlpha:1!==r.a}:n?.alphaInPercent?{withAlpha:1!==r.a,showDot:!0}:void 0);return`#${s}`;case o.NVY.RGB:return u.rgba(r,i,n?.eyedropperFormat);case o.NVY.CSS:if(n?.eyedropperFormat)return u.rgba(r,i,n?.eyedropperFormat);return l.F.format(r);case o.NVY.HSB:let d=(0,a.qN)(r);return u.hsba(d,i,n?.eyedropperFormat);case o.NVY.HSL:let m=(0,a.oB)(r);return u.hsla(m,i,n?.eyedropperFormat);case o.NVY.UIColor:return u.uicolor(r,i,n?.shortform??!1)}},[e])}})();function _(e,r,n){let i=new u.ZB(()=>e),a=e.opacity||1,o=[...e.color?[{...e.color,a:a*e.color.a}]:[],...e.stops?e.stops.map(e=>({...e.color,a:a*e.color.a})):[]];return{type:p.q.RAW,paint:e,colors:o,typeFormatter:i.format,valueFormatter:r,variableScope:n,encodedPaint:(0,s.GP)(e)}}function g(e,r,n,i=[]){return{type:p.q.STYLE,name:e,dsStyle:r,paints:n,styleGUIDs:i}}function f(e,r){let n=h();return i.useMemo(()=>e.map(e=>{let i=r(e);if(!i)return{value:e,color:void 0};let a=[i],o={color:i,opacity:i.a,type:"SOLID"};return{value:e,color:{type:p.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:a,typeFormatter:E,valueFormatter:n}}}),[r,e,n])}let E=()=>"SOLID";function y({color:e,colorVar:r,variableScope:n,displayValue:i}){let a=[e],o={color:e,opacity:e.a,type:"SOLID"};return r&&(o.colorVar=r),{type:p.q.RAW,encodedPaint:(0,s.GP)(o),paint:o,colors:a,typeFormatter:E,valueFormatter:i,variableScope:n}}function b(e,r){let n=h();return i.useMemo(()=>e.map(({color:e,colorVar:i})=>y({color:e,colorVar:i,variableScope:r,displayValue:n})),[e,n,r])}},750693:(e,r,n)=>{n.d(r,{P$:()=>te,Pi:()=>tt,So:()=>ti,eT:()=>e3,rM:()=>ta});var i,a=n(411855),o=n(188507),s=n(838516),l=n(543509),c=n(140686),d=n(256296),u=n(385668),m=n(343887),p=n(187134),h=n(75395),_=n(416580),g=n(536825),f=n(288107),E=n(631437),y=n(243742);n(177131);var b=n(922827),v=n(340818),I=n(162644),T=n(298455),S=n(879441),w=n(629019),A=n.n(w),C=n(539321),N=n(776250);n(62935),n(794272);var L=n(966712),O=n(153234);n(96328);var R=n(763658),P=n(448169),D=n(192437),k=n(163023),M=n(46481),F=n(752207),x=n(947131),U=n(240604),B=n(939863),V=n(293017),G=n(632430),H=n(662275),K=n(411294),W=n(626783),$=n(906899),Y=n(259927),z=n(483990),j=n(775664),q=n(723081),Z=n(798099),X=n(297336),J=n(226055),Q=n(356390);n(617453);var ee=n(848661),et=n(618056),er=n(931770),en=n(555074),ei=n(869156),ea=n(318812);n(335682);var eo=n(499777);n(416095);var es=n(833629);n(241691),n(173454);var el=n(279702),ec=n(484892),ed=n(498606),eu=n(420186),em=n(218973),ep=n(469572),eh=n(909279),e_=n(775372),eg=n(528815),ef=n(603634),eE=n(925782),ey=n(184027),eb=n(316125),ev=n(247908),eI=n(602029),eT=n(248752),eS=n(205135),ew=n(7959);n(137906);var eA=n(991586),eC=n(575722),eN=n(158445),eL=n(238093),eO=n(893606);n(343559);var eR=n(939791),eP=n(691011),eD=n(781867),ek=n(807676),eM=n(61511),eF=n(533573),ex=n(158406),eU=n(712685),eB=n(875157),eV=n(117110),eG=n(906426),eH=n(234587);n(144119);var eK=n(347127),eW=n(459049),e$=n(911216),eY=n(447141),ez=n(244979),ej=n(424148),eq=n(819785),eZ=n(695038),eX=n(27921),eJ=n(874038),eQ=n(953663),e0=n(641053);let e1=new Set([b.j0r.STROKE]),e2=e=>{Q.Y5.updateSelectionProperties({exportBackgroundDisabled:!e})},e5=(e,r,n)=>{(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-fill-change"),Q.Y5.updateSelectionProperties({fillPaints:e},{shouldCommit:r,overwrite:n??b.WXh.ONLY_WHEN_NOT_EMPTY}),(0,ep.a2)("fillPaints")},e3=a.memo(function(e){let{dispatch:r}=e,n=(0,eH.cJ)(),i=(0,J.GS)(),o=a.useCallback((e,{fromSearch:n}={})=>{r(G.AV({style:e,inheritStyleKeyField:"inheritFillStyleKey",fromSearch:n}))},[r]),s=(0,eL.yT)({...e,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKey"}),l=(0,eb.xm)(e),u=(0,a.useCallback)(()=>{(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-fill-color-picker-show")},[]);return a.createElement(D.tH,{boundaryKey:"FillPanel",fallback:D.H4.NONE_I_KNOW_WHAT_IM_DOING},a.createElement(R.k,{name:"fill_panel"},a.createElement("div",{className:"displayContents","data-test-id":"fill_panel"},a.createElement(ew.Zk,null,a.createElement(e9,{propertyList:e.fillPaints,onChange:e5,onApplyStyle:o,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:b.rrT.FILL,recordingKey:O.Pt(e,"paintList"),pickerInStyleCreationShown:e.pickerInStyleCreationShown,onPickerShown:u,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom,...l,...s}),a.createElement(eE.JH,{isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom},(()=>{if(e.selectionContainsFrames&&e.hasExports&&!n){if(i){if(!e.fillPaints||(0,ee.hS)(e.fillPaints)&&0===e.fillPaints.length)return;return a.createElement(eR.Ad,{label:a.createElement(a.Fragment,null),input:a.createElement(c.S,{muted:!0,mixed:e.exportBackgroundDisabled===ee.oV,checked:!1===e.exportBackgroundDisabled,onChange:e2,recordingKey:O.Pt(e,"exportDisableCheckbox"),label:a.createElement(d.J,{htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":ed.Ib.TEXT}},(0,B.tx)("fullscreen.properties_panel.fill.show_in_exports")),htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports"),"data-tooltip-type":ed.Ib.TEXT}})})}return a.createElement(ew.fI,{className:ez.Kx},a.createElement(eg.t,{className:ez.kv,id:"frame-background-export-background-disabled",property:e.exportBackgroundDisabled===ee.oV?ee.oV:!e.exportBackgroundDisabled,onChange:e2,recordingKey:O.Pt(e,"exportDisableCheckbox")}),a.createElement(ew.JU,{className:ez.mH,htmlFor:"frame-background-export-background-disabled","data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.include_the_canvas_or_group_background_in_exports")},(0,B.tx)("fullscreen.properties_panel.fill.show_in_exports")))}})())))))});function e6(){(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-stroke-color-picker-show")}class e8 extends a.PureComponent{constructor(){super(...arguments),this.settingsId="stroke-settings",this.state={showSwapButton:!1,syncState:"NONE",individualBorderOption:e_.om.ALL},this.stopPropagation=e=>e.stopPropagation(),this.onPaintsChange=(e,r,n)=>{(0,L.kc)().ce_properties_panel_tracking&&(0,N.sx)("editor-paints-panel-stroke-change",{key:"color"}),Q.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:r,overwrite:n??b.WXh.ONLY_WHEN_NOT_EMPTY}),(0,ep.a2)("strokePaints")},this.onNonPaintsChange=(e,r=el.zk.YES)=>{let n=(0,ee._W)(this.props.strokePaints,[]);if(n.length>0&&!n.find(e=>e.visible)){let e=n.map(e=>({...e,visible:!0}));Q.Y5.updateSelectionProperties({strokePaints:e},{shouldCommit:el.zk.NO,overwrite:b.WXh.ONLY_WHEN_NOT_EMPTY})}Q.Y5.updateSelectionProperties(e,{shouldCommit:r}),(0,ep.a2)("strokePaints")},this.onApplyStyle=(e,{fromSearch:r}={})=>{this.props.dispatch(G.AV({style:e,inheritStyleKeyField:"inheritFillStyleKeyForStroke",fromSearch:r}))},this.bordersAlignmentOnChange=(e,r=el.zk.YES)=>{if(this.state.individualBorderOption!==e_.om.ALL){let{strokeAlign:r}=e;(0,N.sx)("Individual Border Alignment Changed",{position:(0,ee.hS)(r)?r:"__mixed__"})}this.onNonPaintsChange(e,r)},this.forwardedRef=a.createRef(),this.toggleSettings=()=>{if(this.props.pickerShown?.id===this.settingsId)this.props.dispatch(V.XE());else{if(!this.forwardedRef||!this.forwardedRef.current)return;(0,N.sx)("editor-paints-panel-advanced-stroke-show");let e=(0,eu.cn)(this.forwardedRef.current);this.props.dispatch(V.u1({id:this.settingsId,initialX:e.x,initialY:e.y})),this.props.dispatch(V.Uv()),this.props.dispatch($.sw())}},this.setIndividualBorderOption=e=>{this.setState({individualBorderOption:e})},this.selectBorderSides=(e,r=el.zk.YES)=>{if(this.setState({individualBorderOption:e}),e===e_.om.CUSTOM)return;let n=e===e_.om.ALL,i={borderTopVisible:n||e===e_.om.TOP,borderRightVisible:n||e===e_.om.RIGHT,borderBottomVisible:n||e===e_.om.BOTTOM,borderLeftVisible:n||e===e_.om.LEFT};Q.Y5.updateSelectionProperties(i,{shouldCommit:r}),(0,ep.a2)("strokePaints")},this.nodesSupportIndividualBorders=(e,r)=>{let n=new Set(["RECTANGLE","ROUNDED_RECTANGLE","SYMBOL","INSTANCE"]);for(let i of e)if(n.has(i.type)||"FRAME"===i.type&&!i.resizeToFit||"FRAME"===i.type&&r<2&&this.nodesSupportIndividualBorders(i.childrenNodes,r+1))return!0;return!1},this.supportsIndividualBorders=()=>{if(!this.props.numSelectedByType)return!1;if((0,X.vx)(this.props.numSelectedByType,"RECTANGLE")||(0,X.vx)(this.props.numSelectedByType,"ROUNDED_RECTANGLE")||(0,X.vx)(this.props.numSelectedByType,"SYMBOL")||(0,X.vx)(this.props.numSelectedByType,"INSTANCE"))return!0;if((0,X.vx)(this.props.numSelectedByType,"FRAME")){let e=Object.keys(this.props.sceneGraphSelection).map((0,T.UN)().get).filter(e=>!!e);return this.nodesSupportIndividualBorders(e,0)}return!1},this.onBidirectionalEndpointRowMouseEnter=e=>{this.stopPropagation(e),this.props.leftEndCap&&this.props.rightEndCap&&(0,ee.hS)(this.props.leftEndCap)&&(0,ee.hS)(this.props.rightEndCap)&&this.props.leftEndCap!==this.props.rightEndCap&&this.setState({showSwapButton:!0})},this.onBidirectionalEndpointRowMouseLeave=e=>{this.stopPropagation(e),this.hideSwapButton()},this.hideSwapButton=()=>{this.setState({showSwapButton:!1})},this.updateSyncState=e=>{if("reset"===e){this.setState({syncState:"NONE"});return}switch(this.state.syncState){case"NONE":"changed start"===e?this.setState({syncState:"CHANGED_START"}):"changed end"===e&&this.setState({syncState:"CHANGED_END"});break;case"CHANGED_START":"changed end"===e&&this.setState({syncState:"CHANGED_BOTH"});break;case"CHANGED_END":"changed start"===e&&this.setState({syncState:"CHANGED_BOTH"})}},this.componentDidUpdate=e=>{e.sceneGraphSelection!==this.props.sceneGraphSelection&&this.setState({syncState:"NONE",individualBorderOption:e_.om.ALL})}}render(){let e=(0,eL.yT)({...this.props,styleType:"FILL",inheritStyleKeyField:"inheritFillStyleKeyForStroke"}),r=(0,eL.A8)(e.inheritStyleKey),n=!(this.props.numSelectedByType&&(0,X.vx)(this.props.numSelectedByType,"TABLE"))&&(r||(0,ee._W)(this.props.strokePaints,[]).length>0||this.props.strokePaints===ee.oV),i=this.props.pickerShown?.id===this.settingsId,o=2===this.props.strokePanelTerminalPointCount&&this.props.strokePanelMode!==b.yTM.WASHI_TAPE,s=this.props.strokePanelMode!==b.yTM.WASHI_TAPE,l=this.supportsIndividualBorders();return a.createElement(R.k,{name:"stroke_panel"},a.createElement(ew.Zk,{"data-testid":"stroke-panel-id"},a.createElement(e9,{propertyList:this.props.strokePaints,selectedPropertyType:b.rrT.STROKE,onChange:this.onPaintsChange,onApplyStyle:this.onApplyStyle,currentSelectedProperty:this.props.currentSelectedProperty,pickerInStyleCreationShown:this.props.pickerInStyleCreationShown,recordingKey:O.Pt(this.props,"paintList"),onPickerShown:e6,variableScopes:e1,...(0,eb.Rz)(this.props),...e,onToggleListLayout:this.toggleSettings,onToggleAdvancedSettings:n&&s?this.toggleSettings:void 0,advancedSettingsTooltip:(0,B.t)("fullscreen.properties_panel.fill.advanced_stroke_settings"),isPanelBodyCollapsedAtom:this.props.isPanelBodyCollapsedAtom}),n&&a.createElement(eW.t,{forwardedRef:this.forwardedRef,borderSharedWeight:this.props.borderSharedWeight,maxStrokeWeight:this.props.maxStrokeWeight,strokeAlign:this.props.strokeAlign,strokeCap:this.props.strokeCap,terminalCap:this.props.terminalCap,strokeJoin:this.props.strokeJoin,arcRadius:this.props.arcRadius,arcSweep:this.props.arcSweep,connectorLineStyle:this.props.connectorLineStyle,miterLimitAngle:this.props.miterLimitAngle,onNonPaintsChange:this.onNonPaintsChange,numSelectedByType:this.props.numSelectedByType,updateSyncState:this.updateSyncState,hideSwapButton:this.hideSwapButton,syncState:this.state.syncState,showSwapButton:this.state.showSwapButton,selectBorderSides:this.selectBorderSides,setIndividualBorderOption:this.setIndividualBorderOption,onBordersAlignmentChange:this.bordersAlignmentOnChange,onBidirectionalEndpointRowMouseEnter:this.onBidirectionalEndpointRowMouseEnter,onBidirectionalEndpointRowMouseLeave:this.onBidirectionalEndpointRowMouseLeave,showAdvancedStrokeSettings:s,showIndividualBorderControls:l,showEndPointControls:o,showStrokePicker:i,strokePanelMode:this.props.strokePanelMode,individualBorderOption:this.state.individualBorderOption,toggleSettings:this.toggleSettings,stopPropagation:this.stopPropagation,strokePanelTerminalPointCount:this.props.strokePanelTerminalPointCount,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,recordingKey:this.props.recordingKey,leftEndCap:this.props.leftEndCap,rightEndCap:this.props.rightEndCap,dashPattern:this.props.dashPattern,dashCap:this.props.dashCap})))}}e8.displayName="StrokePanel";let e4=a.memo(function({title:e,propertyList:r,onChange:n,onApplyStyle:i,addProperty:s,overrideAddPropertyTooltip:l,onReorder:c,renderProperty:d,onDeleteProperty:u,onToggleListLayout:m,styleType:p,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,removeAllProperties:E,library:y,defaultColor:v,openFile:I,stylePickerShown:T,currentSelectedProperty:S,selectedPropertyType:w,modalShown:A,sceneGraphSelection:C,selectedStyleProperties:N,recordingKey:L,onToggleAdvancedSettings:R,advancedSettingsTooltip:P,isPanelBodyCollapsedAtom:D}){let k=(0,o.wA)(),M=(0,eo.Xo)(),F=(0,ea.Um)(),x=!!a.useContext(ey.zK),U=x?`style-modal-${(0,ex.qj)(_)}`:(0,ex.qj)(_),B=(0,eL.WH)(h,g,p),G=(0,eN.AH)(B?.key??null,(0,ee.E7)(g)),H=B?.isLocal?B:G?.status==="loaded"?G.data:null,K=function(){let e=(0,ei.Rb)(),r=(0,ei.Pt)(),n=e.length>0,i=Object.keys(r).length>0;return n||i}(),W=r&&(0,ee.hS)(r)&&(r.length>1||r.some(e=>!(0,et.sb)(e.type)))?"createStyle":K?"createVariable":"createStyle",$=a.useCallback(()=>M&&M.id===U?M:null,[M,U]),Y=a.useCallback(({initialX:e,initialY:r})=>{$()?k(V.XE()):k(V.u1({id:U,initialX:e,initialY:r}))},[k,U,$]),z=a.useCallback(e=>{Y(e)},[Y]),j=a.useCallback((e,r)=>{n([e],r,b.WXh.ONLY_WHEN_NOT_DISABLED)},[n]),q=(0,en.kl)("numSelectedByType"),Z=(0,eE.y5)(D||null),X=a.useCallback(()=>{s(),Z()},[s,Z]),J=a.useMemo(()=>{if(q)return(0,eB.aZ)(w,q)},[w,q]);return a.createElement(a.Fragment,null,a.createElement(eT.Kx,{title:e,propertyList:r,onChange:n,addProperty:X,overrideAddPropertyTooltip:l,renderProperty:d,onDeleteProperty:u,onReorder:c,removeAllProperties:E,currentSelectedProperty:S,selectedPropertyType:w,recordingKey:L,dropdownShown:F,openFile:I,library:y,modalShown:A,pickerShown:M,sceneGraphSelection:C,selectedStyleProperties:N,stylePickerShown:T,inheritStyleKey:h,inheritStyleKeyField:_,inheritStyleID:g,stylePickerListLayout:f,styleType:p,onToggleListLayout:m,onPickerIconClick:z,dispatch:k,onToggleAdvancedSettings:R,advancedSettingsTooltip:P,isPanelBodyCollapsedAtom:D}),(()=>{let e=$();if(!e)return;let n=r&&(0,ee.hS)(r)&&1===r.length?r[0]:{type:"SOLID",color:{r:1,g:1,b:1,a:1},opacity:1};return a.createElement(eb.ku,{paint:n,paintId:(0,eL.OS)(_),selectedStyle:H,inheritStyleKeyField:_,onChange:j,onApplyStyle:x?void 0:i,pickerShown:e,defaultColor:v,dropdownShown:F,initialView:"library",supportedViews:["library"],initialCreationModalView:W,recordingKey:O.Pt(L,"paintPicker"),variableScopes:J,hasVisiblePaintBelow:!1,isInStyleModal:x})})())});function e9(e){let r=(0,a.useContext)(ey.zK),n=(0,o.wA)(),i=null!=r,s=(0,a.useCallback)(()=>i,[i]),l=(0,eL.dd)(e.selectedStyleProperties),c=(0,a.useCallback)(()=>{switch(e.selectedPropertyType){case b.rrT.STROKE:l||((0,ep.a2)("strokePaints"),Q.Y5.triggerActionInUserEditScope("add-stroke-to-selection"));break;case b.rrT.FILL:l?Q.Y5.triggerActionInUserEditScope("add-fill-to-style-selection"):Q.Y5.triggerActionInUserEditScope("add-fill-to-selection"),(0,ep.a2)("fillPaints")}},[e.selectedPropertyType,l]),{onChange:d,propertyList:u,stylePickerShown:m,inheritStyleKeyField:p,selectedPropertyType:h,pickerInStyleCreationShown:_,variableScopes:g,pickerShown:f,onApplyStyle:E,onPickerShown:y,recordingKey:v}=e,I=(0,a.useCallback)(e=>{s()||n(V.XE()),n(V.Uv());let r=(0,ee._W)(u,[]).filter((r,n)=>n!==e);(0,eh.f)(b.VD3.IGNORE,b.e0R.UNKNOWN,()=>{d(r)}),Q.Y5.deselectProperty()},[s,d,n,u]),T=(0,J.GS)(),S=(0,a.useCallback)((e,r,n)=>{d(e,r,n),(0,ee._W)(u,[]).length!==e.length&&et.Tm.clearCache()},[d,u]),w=(0,a.useCallback)(()=>{et.Tm.clearCache()},[]),A=(0,a.useCallback)(()=>{n(V.Y({isListLayout:!e.stylePickerListLayout})),n($.sw())},[n,e.stylePickerListLayout]),C=(0,eb.xm)(e),N=(0,a.useCallback)((e,r,n,i,o,l,c,d,b)=>{let S=s()?"preview-paint":"paint",w=et.Tm.getId(r,h,S),A=(0,ee._W)(u,[]).slice(0,r).some(e=>e.visible);return a.createElement(e7,{key:`paint-${r}`,id:w,inheritStyleKeyField:p,index:r,singletonRow:(0,ee._W)(u,[]).length<=1,selectedPropertyType:h,paint:e,selected:m.isShown?f?.id===w:n,isDragging:i,hasFocus:o,stylePickerShown:m,onPickerShown:y,pickerInStyleCreationShown:_,onChange:l,onMouseDown:c,onMouseMove:d,onMouseUp:b,onRemovePaint:()=>I(r),onApplyStyle:E,recordingKey:O.Pt(v,r),variableScopes:g,isUI3:T,hasVisiblePaintBelow:A,...C})},[p,s,T,E,y,_,f?.id,u,v,I,h,m,g,C]),L=(()=>{if(!T)return;let r=(0,ee._W)(e.propertyList,[]);switch(e.selectedPropertyType){case b.rrT.STROKE:return 0===r.length?(0,B.t)("fullscreen.properties_panel.section_stroke.tooltip_addStroke"):(0,B.t)("fullscreen.properties_panel.section_stroke.tooltip_addStrokeFill");case b.rrT.FILL:return(0,B.t)("fullscreen.properties_panel.section_fill.tooltip_addFill");default:return}})();return a.createElement(e4,{title:(()=>{switch(e.selectedPropertyType){case b.rrT.STROKE:return(0,B.t)("fullscreen.properties_panel.fill.stroke");case b.rrT.FILL:return(0,B.t)("fullscreen.properties_panel.fill.fill");default:return""}})(),propertyList:e.propertyList,onChange:S,currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:e.selectedPropertyType,addProperty:c,overrideAddPropertyTooltip:L,renderProperty:N,pickerShown:e.pickerShown,onReorder:w,recordingKey:e.recordingKey,...(0,eL.yT)(e),onToggleListLayout:A,library:e.library,defaultColor:e.defaultColor,onApplyStyle:e.onApplyStyle,onToggleAdvancedSettings:T?e.onToggleAdvancedSettings:void 0,advancedSettingsTooltip:T?e.advancedSettingsTooltip:void 0,isPanelBodyCollapsedAtom:e.isPanelBodyCollapsedAtom})}class e7 extends a.PureComponent{constructor(){super(...arguments),this.state={isDragHover:!1},this.context=null,this.row=a.createRef(),this.pickerShownInStyleModal=()=>!this.isInStyleModal()&&!!this.props.pickerInStyleCreationShown,this.handleOpenImagePicker=e=>{this.props.selectedPropertyType!==e.propertyType||this.props.index!==e.index||this.pickerShown()||this.pickerShownInStyleModal()||this.showPicker()},this.handleCloseImagePicker=e=>{this.props.selectedPropertyType===e.propertyType&&this.props.index===e.index&&this.pickerShown()&&this.hidePicker()},this.onPaintPickerChange=(e,r)=>{e.visible=!0,this.props.onChange(e,r)},this.onVisibleChange=e=>{this.props.onChange({...this.props.paint,visible:e})},this.pickerShown=()=>this.isInStyleModal()?this.props.pickerInStyleCreationShown?.id===this.props.id?this.props.pickerInStyleCreationShown:null:this.props.pickerShown?.id===this.props.id?this.props.pickerShown:null,this.showPicker=()=>{if(!this.row.current)return;let e=(0,eu.cn)(this.row.current);this.props.onPickerShown?.(),Q.Y5.updateAppModel({currentSelectedProperty:{type:this.props.selectedPropertyType,indices:[this.props.index]}}),this.isInStyleModal()?this.props.dispatch((0,K.D)({id:this.props.id,initialX:e.x,initialY:e.y})):this.props.dispatch(V.u1({id:this.props.id,initialX:e.x,initialY:e.y,data:{isInStyleModal:this.isInStyleModal()}})),this.isInStyleModal()||(this.props.dispatch($.sw()),this.props.dispatch(V.Uv()))},this.hidePicker=()=>{this.isInStyleModal()?this.props.dispatch((0,K.w)()):this.props.dispatch(V.XE()),Q.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.isDragTarget=()=>!!(0,ee.E7)(this.props.paint),this.onDragEnter=()=>{this.setState({isDragHover:!0})},this.onDragLeave=()=>{this.setState({isDragHover:!1})},this.onDrop=e=>{this.setState({...this.state,isDragHover:!1});let r=(0,ee.E7)(this.props.paint);if(!r)return;let n=Q.Y5.fileArrayToString;if(n){let i=n(Array.from(e.files));b.glU.dropImageOnPaintThumbnail(r.blendMode||"NORMAL",r.opacity||1,i,this.props.index,this.props.selectedPropertyType)}},this.dropImageOnPaintThumbnail=(e,r,n)=>{let i=Q.Y5.fileArrayToString;if(i){let a=i(Array.from(n.files));b.glU.dropImageOnPaintThumbnail(e,r,a,this.props.index,this.props.selectedPropertyType)}},this.updateStillImageAndSelectionPropertiesForGIF=(e,r)=>v.l7.user("update-gif-image",()=>(0,er.SK)(e,r,this.props.selectedPropertyType)),this.onDetachVariableClick=()=>{(0,eh.f)(b.VD3.VARIABLE_DETACH,b.e0R.DIRECT,()=>{let e=(0,ek.y)(this.props.paint);this.onPaintPickerChange(e,el.zk.YES)})}}isInStyleModal(){return null!=this.context}componentDidMount(){this.isInStyleModal()||(Q.Y5.fromFullscreen.on("openImagePicker",this.handleOpenImagePicker),Q.Y5.fromFullscreen.on("closeImagePicker",this.handleCloseImagePicker))}componentWillUnmount(){this.isInStyleModal()||(Q.Y5.fromFullscreen.removeListener("openImagePicker",this.handleOpenImagePicker),Q.Y5.fromFullscreen.removeListener("closeImagePicker",this.handleCloseImagePicker)),this.isInStyleModal()&&this.pickerShown()&&this.hidePicker()}hasBoundColorVariable(){return!!this.props.paint.colorVar}render(){let e=this.renderButtons();return a.createElement("div",null,a.createElement(P.Y,{isDragTarget:this.isDragTarget,onTargetDragEnter:this.onDragEnter,onTargetDragLeave:this.onDragLeave,onTargetDrop:this.onDrop,recordingKey:O.Pt(this.props,"dropTarget")},a.createElement(U.S.recordableDiv,{recordingKey:O.Pt(this.props,"dragTarget")},a.createElement(tt,{ref:this.row,id:this.props.id,paint:this.props.paint,firstIconButton:e.length>0?e[0]:null,secondIconButton:e.length>1?e[1]:null,shownPickerMatchesThisPaint:!!this.pickerShown(),togglePicker:this.togglePicker,isDragHover:this.state.isDragHover,onChange:this.props.onChange,selected:this.props.selected,singletonRow:this.props.singletonRow,isDragging:this.props.isDragging,hasFocus:this.props.hasFocus,noBorderOnFocus:this.props.noBorderOnFocus,recordingKey:this.props.recordingKey,onMouseDown:this.props.onMouseDown,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,isUI3:this.props.isUI3,...(0,eb.Rz)(this.props)}))),this.pickerShown()&&a.createElement(eb.ku,{paint:this.props.paint,paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:this.props.inheritStyleKeyField,dropImageOnPaintThumbnail:this.dropImageOnPaintThumbnail,updateStillImageAndSelectionPropertiesForGIF:this.updateStillImageAndSelectionPropertiesForGIF,onChange:this.onPaintPickerChange,onApplyStyle:this.isInStyleModal()?void 0:this.props.onApplyStyle,onClose:this.hidePicker,recordingKey:O.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.pickerShown(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:this.props.hasVisiblePaintBelow,isInStyleModal:this.isInStyleModal()}))}renderButtons(){let e=[],r=this.props.isUI3?this.props.selected&&this.props.hasFocus:void 0;if(this.props.hideVisibilityToggle||this.hasBoundColorVariable()||e.push({button:a.createElement(eD.B,{visible:this.props.paint.visible,onChange:this.onVisibleChange,recordingKey:O.Pt(this.props,"visibleToggle"),selected:r}),opensPicker:!1,key:"visibleToggle"}),this.hasBoundColorVariable()&&e.push({button:a.createElement("span",{className:ez.zm},a.createElement(u.T,{selected:r},a.createElement(m.K,{"aria-label":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:O.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:Z.dG,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":ed.Ib.TEXT}},a.createElement(M.U,{svg:ej.A},a.createElement(_.U,null))))),opensPicker:!1,key:"detatchVariableButton"}),this.props.onRemovePaint){let n=this.props.isUI3?{"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.remove")}:{};e.push({button:a.createElement(u.T,{selected:r},a.createElement(m.K,{recordingKey:O.Pt(this.props,"removeButton"),onClick:this.props.onRemovePaint,"aria-label":(0,B.t)("fullscreen.properties_panel.fill.remove"),htmlAttributes:{...n,onMouseDown:Z.dG}},a.createElement(M.U,{svg:eq.A,fallbackSvg:eZ.A},a.createElement(g.O,null)))),opensPicker:!1,key:"removeButton"})}return e}}function te({children:e}){return a.createElement("div",{onFocus:e=>e.stopPropagation()},e)}e7.displayName="PaintListItem",e7.contextType=ey.zK;let tt=a.forwardRef((e,r)=>{let n=()=>{e.onFocus?.(),e.shownPickerMatchesThisPaint&&!i()&&e.togglePicker()},i=()=>{let r=e.paint.colorVar?.value?.alias;return r?S.dI(r):null};(0,a.useEffect)(()=>()=>{e.onInputBlur&&e.onInputBlur()},[]);let o=i(),s=e.firstIconButton?a.createElement(tn,{opensPicker:e.firstIconButton.opensPicker,componentKey:e.firstIconButton.key},e.firstIconButton.button):null,l=e.secondIconButton?a.createElement(tn,{opensPicker:e.secondIconButton.opensPicker,componentKey:e.secondIconButton.key},e.secondIconButton.button):null,c=e.selected&&!e.hasFocus,d=e.fitToSize?ez.Cv:ez.BT,u=e.fitToSize?ez.np:ez.wM,m=a.createElement(p.o,{eventListeners:["onMouseDown","onClick"]},a.createElement("div",{className:A()(o?d:u,{[ez.NI]:e.selected,[ez.L3]:c}),"data-onboarding-key":(0,es.Lh)(es.D8.PAINT_PANEL_ROW,e.id)},o?a.createElement(eV.y,{isSelected:e.selected&&e.hasFocus},a.createElement(ta,{selected:e.selected,hasFocus:e.hasFocus,variableId:o,paint:e.paint,onClick:r=>{(r.shiftKey||2&r.buttons)&&r.preventDefault(),r.stopPropagation(),e.togglePicker()},recordingKey:e.recordingKey})):a.createElement(tr,{clearPaintFromCache:()=>et.Tm.clearCache(e.id),onChange:e.onChange,onInputBlur:e.onInputBlur,onInputFocus:e.onInputFocus,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,paint:e.paint,allowAutoAndMixed:e.allowAutoAndMixed,disableOpacity:e.disableOpacity,togglePicker:e.togglePicker,chitOverride:e.chitOverride,recordingKey:e.recordingKey}))),h=a.createElement("div",{className:ez.RK,"data-onboarding-key":(0,es.Lh)(es.D8.PAINT_PANEL_ROW,e.id)},m,a.createElement("div",{className:ez.$r},s,l));if(e.preventDragging)return e.isUI3?a.createElement(eP.JJ,{ref:r,appendedClassName:A()(ez.p,{[ez.Tp]:e.isDragHover,[eY.CZ]:e.selected,[eY.kR]:c}),input:m,leftIcon:s,rightIcon:l,onFocus:n,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp}):a.createElement(ew.fI,{ref:r,className:e.isDragHover?`${ez.Tp} ${ez.p}`:ez.p,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,onFocus:n,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},h);if(e.isUI3){let i=A()(ez.p,{[ez.Tp]:e.isDragHover,[eY.CZ]:e.selected,[eY.kR]:e.selected&&!e.hasFocus});return a.createElement(eR.Y9,{singletonRow:e.singletonRow,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,dragging:e.isDragging,onFocus:n,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp,ref:r},null===s||null===l?a.createElement(eR.DE,{appendedClassName:i,input:m,icon:s||l,label:null}):a.createElement(eR.pG,{appendedClassName:i,input:m,leftIcon:s,rightIcon:l}))}return a.createElement(eI.e,{forwardedRef:r,className:e.isDragHover?`${ez.Tp} ${ez.p}`:ez.p,shiftGrabberOnInputFocus:!0,selected:e.selected,selectedSecondary:e.selected&&!e.hasFocus,singletonRow:e.singletonRow,dragging:e.isDragging,onFocus:n,recordingKey:e.recordingKey,onMouseDown:e.onMouseDown,onMouseMove:e.onMouseMove,onMouseUp:e.onMouseUp},h)});function tr(e){let r=(0,eO.R)(),n=r=>{r.stopPropagation(),e.togglePicker()},i=(r,n=!0)=>{r.visible=!0,e.onChange(r),n&&e.clearPaintFromCache?.()},s=A()({[ez.EC]:!e.paint.visible||e.disableOpacity}),c=(0,o.wA)(),d=e.chitOverride?e.chitOverride:{paint:e.paint};return a.createElement(a.Fragment,null,a.createElement(te,null,a.createElement(ef.J,{...d,onMouseDown:n,recordingKey:O.Pt(e,"chit"),className:ez.x7})),a.createElement(ti,{...e,isUI3:r,onFocus:e.onInputFocus,onBlur:e.onInputBlur,visible:e.paint.visible,onTypeMouseDown:n,onMouseDown:Z.dG,onColorChange:r=>{let n={...e.paint,color:r};(0,l.xN)(r.a,e.paint.opacity??1)||(n.opacity=r.a,n.visible=!0),i(n)},recordingKey:O.Pt(e,"value"),noBorderOnFocus:!0}),(!e.allowAutoAndMixed||!(0,ee.SX)(e.paint.color)&&!(0,ee.gl)(e.paint.color))&&a.createElement(em.Pd,{inputClassName:s,className:ez.n1,onFocus:e.onInputFocus,onBlur:e.onInputBlur,onScrubBegin:e.onScrubBegin,onScrubEnd:e.onScrubEnd,value:e.paint.opacity,onValueChange:(r,n)=>{e.onChange({...e.paint,opacity:r,visible:!0},n)},dispatch:c,noLeftBorder:!0,noBorderOnFocus:!0,onMouseDown:Z.dG,recordingKey:O.Pt(e,"opacity")}))}function tn(e){return e.opensPicker?a.createElement(te,{key:e.componentKey},e.children):a.createElement(a.Fragment,{key:e.componentKey},e.children)}function ti(e){let r=(0,a.useMemo)(()=>e.allowAutoAndMixed?new j.C1({parseAlpha:!0}):new j.rC({parseAlpha:!0}),[e.allowAutoAndMixed]),n=(0,a.useMemo)(()=>new q.ZB(()=>e.paint),[e.paint]),i=(0,a.useMemo)(()=>e.allowAutoAndMixed&&((0,ee.SX)(e.paint.color)||(0,ee.gl)(e.paint.color))?e.paint.color:e.paint.color&&{...e.paint.color,a:e.paint.opacity??1},[e.allowAutoAndMixed,e.paint]),o=O.rf(e.recordingKey,"mousedown",r=>{e.onMouseDown?.(r),e.onTypeMouseDown?.(r)});return"SOLID"===e.paint.type?a.createElement(eS.AN,{forwardedRef:e.focusableRef,className:A()(e.visible?ez.EX:ez.wh,e.appendedColorInputClassname),onFocus:e.onFocus,onBlur:e.onBlur,noLeftBorder:!1,squareRightBorder:!1,formatter:r,property:i,onChange:e.onColorChange,onMouseDown:e.onMouseDown,recordingKey:O.Pt(e,"colorInput"),noBorderOnFocus:e.noBorderOnFocus}):a.createElement(h.E,{className:e.visible?ez.cD:ez.GI,onClick:o},n.format(e.paint.type))}function ta({variableId:e,paint:r,onClick:n,recordingKey:i,selected:o,hasFocus:s}){let l=(0,ei.u)(e),c=l?.name??"",d=!!l&&(0,eF.eF)(l),{version:u}=(0,y.DP)(),m=d?null:a.createElement(te,null,a.createElement(ef.J,{paint:r,onMouseDown:n,recordingKey:O.Pt(i,"chit"),className:"ui3"===u?void 0:ez.x7})),p=r.color&&r.opacity?`${(0,C.colorToHex)(r.color)}, ${(100*r.opacity).toLocaleString("en",{maximumFractionDigits:2})}%`:void 0;return"ui3"===u?a.createElement(to,{selected:o,hasFocus:s,styleIcon:m||a.createElement("div",{"data-tooltip-type":ed.Ib.TEXT,"data-tooltip":(0,B.t)("variables.variable_was_deleted")},a.createElement(k.B,{className:ez.Bx,svg:e0.A})),styleName:c,styleDescription:l?.description,styleValue:p,onClick:n,recordingKey:O.Pt(i,"styleButton")}):a.createElement(a.Fragment,null,m,a.createElement("div",{className:ez.eV},a.createElement(eU.wG,{isDeleted:d,text:c,variableDescription:l?.description,variableValue:p})))}function to(e){let{styleIcon:r,styleName:n,styleDescription:i,styleValue:o,selected:s,hasFocus:l,recordingKey:c,onClick:d}=e,u=(0,eM.Y)(n,i,o);return a.createElement(h.E,{className:A()(e$.W1,{[e$.C_]:s&&!l,[e$.wH]:s&&l}),recordingKey:c,actionOnPointerDown:!0,onClick:d},a.createElement("div",{className:e$.hg},r),a.createElement("div",{className:e$.p3},a.createElement(F.G,{text:n,showTooltip:x.i.ALWAYS,getTooltipText:u})))}tt.displayName="Paint",(e=>{class r extends a.PureComponent{constructor(){super(...arguments),this.state={hasEverHovered:!1},this.row=a.createRef(),this.paintPickerInitialView=void 0,this.componentWillUnmount=()=>{this.props.dispatch(W.oI({paintId:void 0,originalPaint:void 0,updatedPaintFromDropper:void 0}))},this.pickerShownIsStylePicker=()=>this.props.stylePickerShown.isShown&&this.props.stylePickerShown.id===this.stylePickerID(),this.pickerShown=()=>this.props.pickerShown?.id===this.pickerID(),this.showPicker=()=>{if(!this.row.current)return;let e=(0,eu.cn)(this.row.current);this.props.dispatch(V.u1({id:this.pickerID(),initialX:e.x,initialY:e.y})),this.props.dispatch($.sw()),this.props.dispatch(V.Uv()),this.props.dispatch(W.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.hidePicker=()=>{this.props.dispatch(V.XE()),Q.Y5.deselectProperty()},this.togglePicker=()=>{this.pickerShown()?this.hidePicker():this.showPicker()},this.toggleStylePicker=()=>{this.pickerShownIsStylePicker()?this.hidePicker():this.row.current&&this.props.showPicker(this.stylePickerID(),this.row.current)},this.toggleListLayout=()=>{this.props.setPickerListLayout(!this.props.stylePickerListLayout)},this.onCreateStyle=()=>{let e=(0,I.GP)(this.props.paint),r=b.Osy.paintDataNodesInPaint(e);this.props.dispatch(H.to({type:eG.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"create"}}})),this.hidePicker()},this.onApplyStyle=e=>{let r=b.Osy.paintDataNodesInPaint((0,I.GP)(this.props.paint));this.props.dispatch(G.nh({style:e,callback:e=>{if(r.length>1)this.props.dispatch(H.to({type:eG.t,data:{originalPaint:this.props.paint,paintDataNodesInPaint:r,conflictNodesCount:this.props.conflictNodesCount,type:{kind:"apply",styleGuid:e}}}));else{let r=(0,I.GP)(this.props.paint);v.l7.user("apply-style",()=>b.Osy.applyStyleToPaintDatas(r,e)),(0,N.sx)("Apply Style to Selection Paint ",{count:this.props.uniqueNodesCount})}}})),this.hidePicker()},this.debouncedTrackPaintChangeFromPicker=(0,s.s)(e=>{(0,N.sx)("Edit Selection Paint",{fileKey:this.props.openFile?.key||"",count:this.props.count})}),this.onChangeForPaint=(e,r)=>{let n=r==el.zk.YES,i=(0,ev.U2)(e)||e.colorVar?b.Osy.resolvePaintWithVariable((0,I.GP)(this.props.paint),(0,I.GP)(e)):"",a=e;if(i){let r=(0,ec.K)(i);a=r?.paint||e}v.l7.user("change-paint",()=>b.Osy.updatePaint((0,I.GP)(this.props.paint),(0,I.GP)(a),n,(0,I.GP)(this.currentPaintValue()))),this.setState({paintValueInPicker:a}),this.props.dispatch(W.oI({paintId:this.props.id,originalPaint:this.props.paint,updatedPaintFromDropper:void 0}))},this.onChangeForPaintPicker=(e,r)=>{this.onChangeForPaint(e,r),this.debouncedTrackPaintChangeFromPicker(e)},this.debouncedOnChangeForPaintPicker=(0,s.s)(this.onChangeForPaintPicker),this.onDetachVariableClick=()=>{(0,eh.f)(b.VD3.VARIABLE_DETACH,b.e0R.DIRECT,()=>{let e=(0,ek.y)(this.props.paint);this.onChangeForPaint(e,el.zk.YES)})},this.currentPaintValue=()=>this.props.paintValueFromEyeDropper?this.props.paintValueFromEyeDropper:this.state.paintValueInPicker?this.state.paintValueInPicker:this.props.paint,this.onMouseOver=()=>{this.setState({hasEverHovered:!0})},this.onPaintClick=()=>{this.paintPickerInitialView=void 0,this.togglePicker()},this.onStyleClick=e=>{e.stopPropagation(),this.paintPickerInitialView="library",this.togglePicker()},this.onSelectSamePaintMouseDown=()=>{let e=(0,I.GP)(this.props.paint);b.Osy.selectOnlySamePaint(e),(0,N.sx)("Select Selection Paint",{count:this.props.uniqueNodesCount})},this.onFocus=()=>{this.pickerShownIsStylePicker()&&this.toggleStylePicker()},this.boundColorVariableId=()=>{let e=this.props.paint.colorVar?.value?.alias;return e?S.dI(e):null}}pickerID(){return`${Y.F7}-${this.props.id}`}stylePickerID(){return`${Y.yJ}-${this.props.id}`}componentDidMount(){this.props.openPickerOnInitialRender&&this.showPicker()}componentDidUpdate(e){this.props.paintValueFromEyeDropper&&e.paintValueFromEyeDropper!==this.props.paintValueFromEyeDropper&&this.setState({paintValueInPicker:this.props.paintValueFromEyeDropper})}render(){let e=null;this.pickerShownIsStylePicker()&&this.props.stylePickerShown.isShown&&(e=this.props.stylePickerShown);let r=this.props.debounce?this.debouncedOnChangeForPaintPicker:this.onChangeForPaintPicker,n=this.renderButtons();return a.createElement("div",{onMouseOver:this.onMouseOver},a.createElement(tt,{ref:this.row,id:this.props.id,paint:this.currentPaintValue(),firstIconButton:n.length>0?n[0]:null,secondIconButton:n.length>1?n[1]:null,count:this.props.count,uniqueNodesCount:this.props.uniqueNodesCount,recordingKey:O.Pt(this.props,"paint"),onFocus:this.onFocus,onChange:this.onChangeForPaint,onInputFocus:this.props.onInputFocus,onInputBlur:this.props.onInputBlur,onScrubBegin:this.props.onScrubBegin,onScrubEnd:this.props.onScrubEnd,selected:this.pickerShown()||this.pickerShownIsStylePicker(),singletonRow:!1,isDragging:!1,hasFocus:!1,shownPickerMatchesThisPaint:this.pickerShown(),togglePicker:this.onPaintClick,isDragHover:!1,preventDragging:!0,isUI3:this.props.isUI3,focusableRef:this.props.focusableRef,...(0,eb.Rz)(this.props)}),this.pickerShown()&&this.props.pickerShown&&(this.props.customColorPicker?a.createElement(this.props.customColorPicker,{paint:this.currentPaintValue(),onChange:r,onClose:this.hidePicker,pickerShown:this.props.pickerShown,hideCustomColorPickerFillTypeToggle:this.props.hideCustomColorPickerFillTypeToggle??!1}):a.createElement(eb.ku,{paint:this.currentPaintValue(),paintId:this.props.id,selectedStyle:null,inheritStyleKeyField:"inheritFillStyleKey",onChange:r,onApplyStyle:this.onApplyStyle,keepOpenOnItemSelect:!0,disableImagePaints:!0,recordingKey:O.Pt(this.props,"paintPicker"),defaultColor:this.props.defaultColor,dropdownShown:this.props.dropdownShown,pickerShown:this.props.pickerShown,initialView:this.paintPickerInitialView,initialStyleCreationPaint:this.currentPaintValue(),variableScopes:this.props.variableScopes,hasVisiblePaintBelow:!1,isInStyleModal:!1})),this.state.hasEverHovered&&a.createElement(eA.M,{inheritStyleKey:null,inheritStyleID:null,styleType:"FILL"}),e&&a.createElement(eA.U,{picker:e,onCreateStyle:this.onCreateStyle,onApplyStyle:this.onApplyStyle,recordingKey:O.Pt(this.props,"stylePicker"),styleType:"FILL",onToggleListLayout:this.toggleListLayout,stylePickerListLayout:this.props.stylePickerListLayout,inheritStyleKey:null,inheritStyleID:null}))}renderButtons(){let e=[];if(this.boundColorVariableId())e.push({button:a.createElement("span",{className:ez.zm},a.createElement(m.K,{"aria-label":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),onClick:this.onDetachVariableClick,recordingKey:O.Pt(this.props,"paint","detachVariableButton"),htmlAttributes:{onMouseDown:Z.dG,"data-tooltip":(0,B.t)("fullscreen.properties_panel.fill.detach_variable"),"data-tooltip-type":ed.Ib.TEXT}},a.createElement(M.U,{svg:ej.A},a.createElement(_.U,null)))),opensPicker:!1,key:"detatchVariableButton"});else{let r=(0,eK.f)(this.props.openFile?.editorType??null);e.push({button:a.createElement("span",{className:ez.zm},a.createElement(m.K,{"aria-label":r?(0,B.t)("slides.properties_panel.color_picker.theme_colors"):(0,z.A)("style"),onClick:this.onStyleClick,recordingKey:O.Pt(this.props,"paint","styleButton"),htmlAttributes:{"data-tooltip":r?(0,B.t)("slides.properties_panel.color_picker.theme_colors"):"style","data-tooltip-type":r?ed.Ib.TEXT:ed.Ib.LOOKUP}},a.createElement(M.U,{svg:eX.A,fallbackSvg:eJ.A},a.createElement(f.y,null)))),opensPicker:!0,key:"styleButton"})}return null==this.props.uniqueNodesCount||this.props.hideSelectSamePaintButton||e.push({button:a.createElement("span",{className:ez.zm},a.createElement(m.K,{onClick:this.onSelectSamePaintMouseDown,"aria-label":(0,B.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),recordingKey:O.Pt(this.props,"paint","selectSamePaintButton"),htmlAttributes:{"data-tooltip":(0,B.t)("fullscreen.properties_panel.select_item_using_this_color",{numItems:this.props.uniqueNodesCount}),"data-tooltip-type":ed.Ib.TEXT}},a.createElement(M.U,{svg:eQ.A},a.createElement(E.A,null)))),opensPicker:!0,key:"selectSamePaintButton"}),e}}r.displayName="SelectionPaintItem",e.SelectionPaintItem=r,e.ConnectedSelectionPaintItem=(0,o.Ng)((e,r)=>({pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,paintValueFromEyeDropper:e.currentSelectionPaintInPicker.paintId===r.id?e.currentSelectionPaintInPicker.updatedPaintFromDropper:void 0,stylePickerListLayout:e.stylePickerListLayout}),e=>({showPicker:(r,n)=>{let{top:i,left:a}=n.getBoundingClientRect(),[o,s]=[a-eC.N2,i];e(V.bS({id:r,initialX:o,initialY:s,modal:!0})),e($.sw()),e(V.XE())},setPickerListLayout:r=>{e(V.Y({isListLayout:r}))}}))(r)})(i||(i={})),i.ConnectedSelectionPaintItem},759096:(e,r,n)=>{n.d(r,{w5:()=>el,B8:()=>es,tC:()=>ec,gc:()=>ed});var i,a,o,s,l=n(411855),c=n(188507),d=n(140593),u=n(243742),m=n(448639),p=n(922827),h=n(91408),_=n(794272);n(966712);var g=n(418956),f=n(886653),E=n(153234),y=n(617453),b=n(425805),v=n(848661),I=n(618056),T=n(869156),S=n(100197);n(316081),n(284321);var w=n(234945),A=n(224690),C=n(666258),N=n(168289),L=n(238093),O=n(609572),R=n(564092),P=n(184027),D=n(999922),k=n(733948),M=n(750693);n(109388);var F=n(340818),x=n(358145),U=n(46481),B=n(939863),V=n(226055),G=n(356390),H=n(146394);n(555074);var K=n(29680),W=n(7959),$=n(343559),Y=n(939791),z=n(822042);n(244614),n(553716);var j=n(149545);n(498606),n(218973),n(784940),n(252957),n(69912);let q={smallNudgeAmount:.01,bigNudgeAmount:.1,scrubMultiplier:1,wheelMultiplier:1,postScrubMultiplier:.01,postBigNudgeAmount:1,postWheelMultiplier:.1,resolution:.01};n(889012),n(939683);var Z=n(55021),X=n(343887),J=n(139689),Q=n(379119);let ee=n(630834);function et(){G.Y5.triggerAction("set-tool-default")}l.memo(function({recordingKey:e}){let r=(0,V.GS)(),n=(0,S.J2)(p.yFm.state().scale),i=(0,S.J2)(p.yFm.state().disabled),a=F.nc.user("change-scale",e=>{p.yFm.setScale(e)}),o=(0,S.J2)(p.yFm.state().width);o="number"==typeof o?o:v.oV;let s=F.nc.user("change-scale-width",e=>{p.yFm.setWidth(e)}),d=(0,S.J2)(p.yFm.state().height);d="number"==typeof d?d:v.oV;let u=F.nc.user("change-scale-height",e=>{p.yFm.setHeight(e)}),m=(0,S.J2)(p.yFm.state().anchorPoint),h=F.nc.user("change-anchor-point",e=>{p.yFm.setAnchorPoint(e)}),{handleKeyDown:_,heightInputRef:g,scaleInputRef:f,widthInputRef:E}=function(){let e=(0,c.d4)(e=>e.mirror.sceneGraphSelection),[r,n]=l.useState(!1),i=l.useRef(null),a=l.useRef(null),o=l.useRef(null),s=(0,K.p8)("currentTool"),d=(0,x.ZC)(s),u=(0,K.p8)("activeUserAction"),[m,h]=l.useState(!1);l.useEffect(()=>{let r=s===p.NLJ.SCALE&&d!==p.NLJ.SCALE;Object.keys(e).length>0&&r&&[p.QOV.DEFAULT,p.QOV.SELECTING_TEXT].includes(u)&&i.current&&(i.current.focus(),i.current.select())},[u,s,d,e]),l.useEffect(()=>{let e=()=>{i.current&&(n(!1),h(!1),i.current.focus(),i.current.select())};return H.h.subscribeScaleToolActivated(e),()=>{H.h.unsubscribeScaleToolActivated(e)}},[]),l.useEffect(()=>{let e=e=>{e.target!==i.current&&e.target!==a.current&&e.target!==o.current&&n(!0)};return document.addEventListener("focusin",e),()=>{document.removeEventListener("focusin",e)}},[]);let _=l.useCallback(e=>{let n="Escape"===e.key,i="Enter"===e.key;!r&&(i||n)&&h(!0)},[r]);return l.useEffect(()=>{m&&et()},[m]),{handleKeyDown:_,scaleInputRef:i,widthInputRef:a,heightInputRef:o}}(),y=l.createElement(W.$4,null,l.createElement(X.K,{onClick:()=>{et()},"aria-label":(0,B.t)("fullscreen.scale_panel.close")},l.createElement(U.U,{svg:ee,fallbackSvg:ee},l.createElement(J.A,null)))),b=l.createElement(z.V,{restoreFocusElements:[f.current,E.current,g.current].filter(Boolean),anchorPoint:m,onAnchorPointChange:h,disabled:i}),I=r?Q.f4:Q.G4,T=l.createElement(I,{scale:n,width:o,height:d,onWidthChange:s,onHeightChange:u,onScaleChange:a,onKeyDown:_,widthInputRef:E,heightInputRef:g,disabled:i,recordingKey:e}),w=l.createElement(j.g,{scale:n,onScaleChange:a,disabled:i,onInputKeyDown:_,recordingKey:e,ref:f});return r?l.createElement(W.Zk,{"data-testid":`scale_panel.state.${i?"disabled":"enabled"}`,className:Z.$1},l.createElement($.r,{titleTx:(0,B.tx)("fullscreen.scale_panel.scale"),icon:y}),T,l.createElement(Y.sY,{leftLabel:(0,B.t)("fullscreen.scale_panel.scale"),rightLabel:(0,B.t)("fullscreen.scale_panel.anchor_point"),topLeftInput:w,bottomLeftInput:null,rightInput:b,topIcon:null,bottomIcon:null})):l.createElement(W.Zk,{"data-testid":`scale_panel.state.${i?"disabled":"enabled"}`},l.createElement(W.fI,{className:Z.ZF},l.createElement(W.xw,null,(0,B.tx)("fullscreen.scale_panel.scale")),y,b),l.createElement(W.fI,null,w),T)});var er=n(524204),en=n(176019),ei=n(837746);(0,h.hG)(ei.wQn);let ea=(e,r)=>e?E.Pt(e,r):r;var eo=(e=>(e[e.DEFAULT_EXPANDED=0]="DEFAULT_EXPANDED",e[e.DEFAULT_SIMPLIFIED=1]="DEFAULT_SIMPLIFIED",e[e.OVERRIDDEN_EXPANDED=2]="OVERRIDDEN_EXPANDED",e))(eo||{});(i||(i={})).ConnectedFillPanel=(0,c.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,currentSelectedGradientStop:e.mirror.appModel.currentSelectedGradientStop,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,mirrorSelectionProperties:e.mirror.selectionProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{version:n}=(0,u.DP)();return l.createElement(M.eT,{key:e.key,selectionProperties:e.selectionProperties,fillPaints:e.selectionProperties.fillPaints,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,currentSelectedProperty:e.currentSelectedProperty,currentSelectedGradientStop:e.currentSelectedGradientStop,pickerShown:e.pickerShown,pickerInStyleCreationShown:e.pickerInStyleCreationShown,stylePickerShown:e.stylePickerShown,stylePickerListLayout:e.stylePickerListLayout,currentTool:e.currentTool,colorFormat:r,editModeType:e.activeCanvasEditModeType,defaultColor:I.rC,inheritStyleKey:e.selectionProperties.inheritFillStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForFill||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:ea(e.recordingKey,"fillPanel"),selectionContainsFrames:(0,b.Fx)(e.mirrorSelectionProperties),hasExports:!!e.selectionProperties.exportSettings&&(0,v._W)(e.selectionProperties.exportSettings,[]).length>0,exportBackgroundDisabled:e.selectionProperties.exportBackgroundDisabled,variableScopes:e.variableScopes,isPanelBodyCollapsedAtom:null,isUI3:"ui3"===n})});let es=i.ConnectedFillPanel;(a||(a={})).ConnectedEffectsPanel=(0,c.Ng)(e=>({library:e.library,selectedStyleProperties:e.mirror.selectedStyleProperties,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,sceneGraphSelection:e.mirror.sceneGraphSelection,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=e.selectedStyleProperties&&!!e.selectedStyleProperties.guid,{smallNudgeAmount:n,bigNudgeAmount:i}=(0,y.sT)(),{version:a}=(0,u.DP)();return l.createElement(D.F,{key:"effects",stylePickerShown:e.stylePickerShown,effects:e.selectionProperties.effects||[],inheritStyleKey:e.selectionProperties.inheritEffectStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForEffect||null,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentSelectedProperty:e.currentSelectedProperty,smallNudgeAmount:n,bigNudgeAmount:i,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:ea(e.recordingKey,"effectsPanel"),selectionContainsOnlySpreadEligibleNodes:!!e.selectionProperties.containsOnlySpreadEligibleNodes||r,selectionContainsAnyKnockoutShadowEligibleNodes:!!e.selectionProperties.containsAnyKnockoutShadowEligibleNodes||r,framelikeWithoutFills:!!e.selectionProperties.framelikeWithoutFills,framelikeWithoutClipping:!!e.selectionProperties.framelikeWithoutClipping,isUI3:"ui3"===a})});let el=a.ConnectedEffectsPanel;(o||(o={})).ConnectedGridsPanel=(0,c.Ng)(e=>({library:e.library,currentTool:e.mirror.appModel.currentTool,currentSelectedProperty:e.mirror.appModel.currentSelectedProperty,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,openFile:e.openFile}))(function(e){let r=(0,y.Ku)(),{smallNudgeAmount:n,bigNudgeAmount:i}=(0,y.sT)(),a=(0,S.J2)(p.Ez5.editorPreferences().showFrameGrids);return l.createElement(k.S,{key:"grids",stylePickerShown:e.stylePickerShown,layoutGrids:e.selectionProperties.layoutGrids,smallNudgeAmount:n,bigNudgeAmount:i,currentSelectedProperty:e.currentSelectedProperty,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,currentTool:e.currentTool,colorFormat:r,showFrameGrids:a,editModeType:e.activeCanvasEditModeType,inheritStyleKey:e.selectionProperties.inheritGridStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForGrid||null,library:e.library,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,recordingKey:ea(e.recordingKey,"gridsPanel")})});let ec=o.ConnectedGridsPanel;(e=>{let r=(0,A.Tn)(),n=(0,f.xx)(en.N1);e.ConnectedTypePanel=(0,c.Ng)(e=>({library:e.library,activeCanvasEditModeType:e.mirror.appModel.activeCanvasEditModeType,sceneGraph:e.mirror.sceneGraph,sceneGraphSelection:e.mirror.sceneGraphSelection,selectedStyleProperties:e.mirror.selectedStyleProperties,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,openFile:e.openFile,userFavoriteFonts:e.userFavoriteFonts,userFlags:e.userFlags,orgById:e.orgById,fonts:e.fonts,localFontAgentVersion:e.localFontAgentVersion}),null,(e,r,i)=>({...e,...i,...r,openTypeFeatures:n(i.selectionProperties.availableOTFeaturesForSelection,i.selectionProperties.availableOTFeaturesForFonts,i.selectionProperties.toggledOnOTFeaturesForSelection,i.selectionProperties.toggledOffOTFeaturesForSelection,i.selectionProperties.mixedStateOTFeaturesForSelection,e.selectedStyleProperties.guid)}))(function(e){let n=l.useContext(P.zK),i=(0,S.J2)(p.Ez5.propertiesPanelState().enabledTypePanelControls),a=null!=n;(0,d.KF)(null!=e.selectionProperties.fontFamily,"TypePanel missing fontFamily"),(0,d.KF)(null!=e.selectionProperties.fontStyle,"TypePanel missing fontStyle"),(0,d.KF)(null!=e.selectionProperties.fontSize,"TypePanel missing fontSize"),(0,d.KF)(a||null!=e.selectionProperties.textLineType,"TypePanel missing textLineType"),(0,d.KF)(a||null!=e.selectionProperties.wholeNodeTextLineType,"TypePanel missing wholeNodeTextLineType"),(0,d.KF)(null!=e.selectionProperties.lineHeight,"TypePanel missing lineHeight"),(0,d.KF)(null!=e.selectionProperties.letterSpacing,"TypePanel missing letterSpacing"),(0,d.KF)(null!=e.selectionProperties.paragraphSpacing,"TypePanel missing paragraphSpacing"),(0,d.KF)(null!=e.selectionProperties.paragraphIndent,"TypePanel missing paragraphIndent"),(0,d.KF)(null!=e.selectionProperties.listSpacing,"TypePanel missing listSpacing"),(0,d.KF)(null!=e.selectionProperties.textCase,"TypePanel missing textCase"),(0,d.KF)(null!=e.selectionProperties.textDecoration,"TypePanel missing textDecoration"),(0,d.KF)(null!=e.selectionProperties.maxLines,"TypePanel missing maxLines");let{smallNudgeAmount:o,bigNudgeAmount:s}=(0,y.sT)(),c=(0,L.WH)(e.selectionProperties.inheritTextStyleKey??null,e.selectionProperties.styleIdForText??null,"TEXT"),h=(0,O.L)(),f=(0,_.R)(e=>r(e,(0,w.qd)(e),m.R.TEXT)),E=(0,T.SG)(["TEXT_DATA"]).data??[],b=(0,R.R1)().variableConsumptionMap,v=(0,R.JG)(),{version:I}=(0,u.DP)(),A=(0,g.md)(C.$i)===N.JJ.TEXT_PANEL;return l.createElement(er.J,{key:"type",fonts:e.fonts,fontFamily:e.selectionProperties.fontFamily,fontStyle:e.selectionProperties.fontStyle,fontSize:e.selectionProperties.fontSize,areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides:e.selectionProperties.areFontStylesUniformOrOnlyMixedDueToTextStyleOverrides,validMixedPropertiesForResponsiveTextStyle:e.selectionProperties.validMixedPropertiesForResponsiveTextStyle,lineHeight:e.selectionProperties.lineHeight,intrinsicLineHeight:e.selectionProperties.intrinsicLineHeight,letterSpacing:e.selectionProperties.letterSpacing,paragraphSpacing:e.selectionProperties.paragraphSpacing,paragraphIndent:e.selectionProperties.paragraphIndent,listSpacing:e.selectionProperties.listSpacing,textLineType:e.selectionProperties.textLineType,textDirectionality:e.selectionProperties.textDirectionality,hasHadRTLText:e.selectionProperties.hasHadRTLText,wholeNodeTextLineType:e.selectionProperties.wholeNodeTextLineType,isHangingPunctuationApplicableToSelection:e.selectionProperties.isHangingPunctuationApplicableToSelection,textCase:e.selectionProperties.textCase,fillPaints:e.selectionProperties.fillPaints,textDecorationFillPaints:e.selectionProperties.textDecorationFillPaints,textDecoration:e.selectionProperties.textDecoration,textDecorationSkipInk:e.selectionProperties.textDecorationSkipInk,textUnderlineOffset:e.selectionProperties.textUnderlineOffset,textDecorationThickness:e.selectionProperties.textDecorationThickness,textDecorationStyle:e.selectionProperties.textDecorationStyle,inheritStyleKey:e.selectionProperties.inheritTextStyleKey||null,inheritStyleID:e.selectionProperties.styleIdForText||null,mainStyle:c,textContentBoundAsset:h,isTextPropReferencedByAnyNodeInSelection:f,textAlignHorizontal:e.selectionProperties.textAlignHorizontal,textAlignVertical:e.selectionProperties.textAlignVertical,textAutoResize:e.selectionProperties.textAutoResize,missingFont:e.selectionProperties.missingFont,textUserLayoutVersion:e.selectionProperties.textUserLayoutVersion,textExplicitLayoutVersion:e.selectionProperties.textExplicitLayoutVersion,textBidiVersion:e.selectionProperties.textBidiVersion,textTruncation:e.selectionProperties.textTruncation,leadingTrim:e.selectionProperties.leadingTrim,leadingTrimEnabled:e.selectionProperties.leadingTrimEnabled,hangingPunctuation:e.selectionProperties.hangingPunctuation,hangingList:e.selectionProperties.hangingList,fontVariantDiscretionaryLigatures:e.selectionProperties.fontVariantDiscretionaryLigatures||!1,fontVariantHistoricalLigatures:e.selectionProperties.fontVariantHistoricalLigatures||!1,fontVariantNumericFigure:e.selectionProperties.fontVariantNumericFigure||"NORMAL",fontVariantNumericSpacing:e.selectionProperties.fontVariantNumericSpacing||"NORMAL",fontVariantNumericFraction:e.selectionProperties.fontVariantNumericFraction||"NORMAL",fontVariantCaps:e.selectionProperties.fontVariantCaps||"NORMAL",fontVariantPosition:e.selectionProperties.fontVariantPosition||"NORMAL",fontVariations:e.selectionProperties.fontVariations||[],detachOpticalSize:e.selectionProperties.detachOpticalSizeFromFontSize||!1,openTypeFeatures:e.openTypeFeatures,editModeType:e.activeCanvasEditModeType,enabledTypePanelControls:i,dispatch:e.dispatch,dropdownShown:e.dropdownShown,modalShown:e.modalShown,pickerShown:e.pickerShown,stylePickerShown:e.stylePickerShown,stylePreviewShown:e.stylePreviewShown,userFavoriteFonts:e.userFavoriteFonts,orgById:e.orgById,smallNudgeAmount:o,bigNudgeAmount:s,library:e.library,sceneGraph:e.sceneGraph,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,openFile:e.openFile,localFontAgentVersion:e.localFontAgentVersion,recordingKey:ea(e.recordingKey,"typePanel"),textVariablesExist:E.length>0,variableConsumptionMap:a?v:b,isSlides:e.isSlides,version:I,showBlueBorder:A})})})(s||(s={}));let ed=s.ConnectedTypePanel},270296:(e,r,n)=>{n(922827);var i=n(91408);n(966712),n(369870),n(848661),n(147206);var a=n(837746);(0,i.jz)(a.uj0)},742311:(e,r,n)=>{n.d(r,{LI:()=>M,Pe:()=>P,Yg:()=>function e(r){let n=0;for(let i of(r.prototypeInteractions.length>0&&(n+=1),r.childrenNodes))n+=e(i);return n},_U:()=>C,bA:()=>V,dT:()=>N,ft:()=>w,k9:()=>L,kC:()=>G,sT:()=>A});var i=n(439106),a=n(165222),o=n(557028),s=n(671820),l=n(49634),c=n(922827),d=n(340818),u=n(572304),m=n(520887),p=n(776250),h=n(966712),_=n(418956),g=n(529004),f=n(96328),E=n(939863),y=n(239349),b=n(90115),v=n(13520),I=n(94500),T=n(516703),S=n(775810);n(132572);class w extends Error{constructor(){super(),this.name="InvalidSelectionFromGenericLayers"}}class A extends Error{constructor(){super(),this.name="NoInteractionsGenerated"}}class C extends Error{constructor(){super(),this.name="NoInteractionsGeneratedExistingInteractions"}}function N(e,r,n,a){let s=function(e,r){let n={name:"Dummy Page just to satisfy typescript so they have a parent",id:"0:1",type:"CANVAS",children:[]};return n.children=O(e,r,n),n}(e,r).children,l=(0,i._q)(s);return(0,o.sS)(s,n,l,a)}function L(e,r){let n=r.get(e),i={name:n.name,id:n.guid,type:"CANVAS",children:[]};return i.children=O(n.childrenGuids,r,i),i}function O(e,r,n){let i=[];for(let a of e){let e=(0,y.Zl)(r,a);if(null!==e){let a={id:e.guid,name:e.name,type:e.type,visible:e.visible,x:e.absoluteBoundingBox.x,y:e.absoluteBoundingBox.y,w:e.absoluteBoundingBox.w,h:e.absoluteBoundingBox.h,parentNode:n,clipsContent:!e.frameMaskDisabled,fontSize:e.fontSize,textAlignHorizontal:e.textAlignHorizontal,layoutMode:e.stackMode,cornerRadius:e.cornerRadius};a.opacity=e.opacity,a.characters=e.characters,e.fills&&(a.fills=e.fills.map(R).filter(e=>!!e)),e.prototypeInteractions&&e.prototypeInteractions.length>0&&(a.interactions=e.prototypeInteractions);let o=O(e.childrenGuids,r,a);o.length>0&&(a.children=o),i.push(a)}}return i}function R(e){switch(e.type){case"GRADIENT_ANGULAR":case"GRADIENT_DIAMOND":case"GRADIENT_LINEAR":case"GRADIENT_RADIAL":return{type:"GRADIENT",visible:e.visible};case"IMAGE":let r=e.image?.hash,n=r?(0,f.Rw)(r):"",i=e.imageThumbnail?.hash;return{type:"IMAGE",hash:n,thumbnailHash:i?(0,f.Rw)(i):"",visible:e.visible};case"SOLID":return{type:"SOLID",color:e.color??{r:0,g:0,b:0},visible:e.visible}}}function P(e){return null!==e}let D=(e,r)=>"BACK"===r?"BACK":"CLOSE"===r?"CLOSE":"OPEN_POPUP"===e?"OVERLAY":e,k=d.nc.ai("link-new-interaction",e=>{let r=D(e.navigationType,""),n=e.buttonID,i=u.sH(n);if(null===i||i===u.Hr){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let a=(0,m.NT)().get(n);if(null==a){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,magicLinkInteractionRemoved:!0,magicLinkInvalidSourceNode:!0,action_type:r});return}let o=function(e){let r=e;for(;r.parentNode?.type!=="CANVAS"&&r.parentNode?.type!=="SECTION"&&null!==r.parentNode;)r=r.parentNode;return r}(a),s=e.destinationScreenID,l=a?.prototypeInteractions;if(l){for(let e of l)if(e.event?.interactionType==="ON_CLICK"&&e.actions&&e.actions.length>0&&!(1===e.actions.length&&"NONE"===e.actions[0].connectionType))return(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkExistingInteractionOnSourceNode:!0,action_type:r}),{noInteractionGeneratedReason:"EXISTING_INTERACTION"}}let d=u.sH(s),h={},_=e.navigationType;if("BACK"===_)h.connectionType="BACK";else if("CLOSE"===_)h.connectionType="CLOSE";else{if(null===d||d===u.Hr||null===s){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}let e=(0,m.NT)().get(s);if(!e){(0,p.sx)("prototype_interaction_added",{magicLinkGenerated:!0,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),magicLinkInteractionRemoved:!0,magicLinkInvalidDestinationNode:!0,action_type:r});return}h.transitionNodeID=d,h.transitionType="INSTANT_TRANSITION","NAVIGATE"===_?(h.connectionType="INTERNAL_NODE",(a?.type==="SYMBOL"||a?.type==="INSTANCE")&&(e?.type==="SYMBOL"||e?.type==="INSTANCE")?h.navigationType="SWAP_STATE":h.navigationType="NAVIGATE",o?.overlayBackground.type!=="NONE"&&(h.navigationType="SWAP")):"OPEN_POPUP"===_&&(h.connectionType="INTERNAL_NODE",h.navigationType="OVERLAY")}let f=c.glU.generateUniqueID();if(!f)return;let E=u.sH(f);if(!E)return;let y={id:E,stateManagementVersion:1};y.event={interactionType:"ON_CLICK"},y.actions=[h];try{a.prototypeInteractions=[y]}catch(e){return}let b=g.d({nodeID:i,interactionID:E});return(0,p.sx)("prototype_interaction_added",{interactionCount:a?.prototypeInteractions.length??0,magicLinkGenerated:!0,interactionID:b,sourceTlfIds:JSON.stringify([o.guid]),destinationTlfIds:JSON.stringify([s]),action_type:D(h.navigationType??"",h.connectionType??"")}),{noodleID:b}});async function M(e,r,n,i){let a,l;if("TOPLEVEL"===e.type&&function(e,r){let n=(0,o.i9)(e.unfilteredScene.children);r((0,I.Zh)({name:"prototype.ai_magic_link_input_existing_interactions",params:{existingInteractions:JSON.stringify(n.interactionIds)}}))}(e,i),"TOPLEVEL"===e.type&&0===e.topLevelFrames.length)throw new w;try{let n=await x(e,r);a=F(n)}catch(e){if(e instanceof s.gS){let r={generatedInteractions:[]};return r.errorMessage=e.message,r}throw e}let c=[],d=!1,u=[],m=[];try{for await(let e of a){if(n.signal.aborted)return{generatedInteractions:[],errorMessage:"aborted"};B("NAVIGATE"),"OPEN_POPUP"===e.navigationType||"CLOSE"===e.navigationType?m.push(e):"BACK"===e.navigationType?u.push(e):d=U(e,c)}}catch(e){l=e.message}for(let e of m)B("OPEN_POPUP"),await new Promise(e=>setTimeout(e,200)),d=U(e,c);for(let e of u)B("BACK"),await new Promise(e=>setTimeout(e,200)),d=U(e,c);if(!l&&0===c.length){if(d)throw new C;throw new A}return{generatedInteractions:c,errorMessage:l}}async function*F(e){for await(let r of e)yield(0,a.HP)(r)}async function x(e,r){let n=(0,l.w)(e),i=new Promise((e,r)=>{setTimeout(()=>{r(Error("Cortex timed out"))},6e4)});if("EMPTY"===n.type)throw new s.gS("Empty selection");let a=b.Ay.design.generateMagicLinkV2(n,{...(0,v.Ay)(),clientLifecycleId:r}),o=await Promise.race([a,i]);return new b.hI(o,6e4)}function U(e,r){let n=k(e);if(n?.noodleID)r.push({id:n.noodleID,mapping:e});else if(n?.noInteractionGeneratedReason==="EXISTING_INTERACTION")return!0;return!1}function B(e){(0,h.kc)().prototype_ai_magic_link_name_change?"BACK"===e?_.zl.set(S.pD,(0,E.tx)("magic_link.running_and_adding_back_interactions")):"OPEN_POPUP"===e?_.zl.set(S.pD,(0,E.tx)("magic_link.running_and_adding_overlay_interactions")):_.zl.set(S.pD,(0,E.tx)("magic_link.running_and_adding_navigate_interactions")):_.zl.set(S.pD,(0,E.tx)("magic_link.running"))}function V(){_.zl.set(S.pD,(0,E.tx)("magic_link.running"))}function G(e,r,n){let i=Object.fromEntries(n.map(e=>[e,[]]));return r.forEach(r=>{n.forEach(n=>{i[n]?.push(...function e(r,n,i){let a=r.get(n);return a?"ICON"===i&&a.isIconLike||a.type===i||"IMAGE"===i&&(0,T.A)(a)?[n]:a.childrenNodes.flatMap(n=>e(r,n.guid,i)):[]}(e,r,n))})}),i}},83695:(e,r,n)=>{n.d(r,{KN:()=>W,y3:()=>Y});var i=n(411855);n(188507);var a=n(966664),o=n(922827),s=n(879441),l=n(629019),c=n.n(l),d=n(44070),u=n.n(d),m=n(966712),p=n(503457),h=n(153234),_=n(522739),g=n(572206),f=n(723325),E=n(154254),y=n(939863);n(169231);var b=n(226055),v=n(394339),I=n(178462),T=n(88339),S=n(469380),w=n(771941),A=n(848661),C=n(869156),N=n(741843),L=n(603634),O=n(736656),R=n(325682);n(564092);var P=n(533573),D=n(712685),k=n(15270),M=n(746806),F=n(761110),x=n(773833),U=n(375673),B=n(590685),V=n(527967),G=n(200817);let H=i.createContext({autoCloseOnScroll:!0}),K=(0,p.kf)("lazy_search_expression_builder",{isCodesplit:!0,ComponentFactory:async()=>({default:(await n.e(7006).then(n.bind(n,317006))).ExpressionBuilderSearch})});function W({resolvedType:e,targetVariableData:r,autoOpenExpressionBuilder:n,setAutoOpenExpressionBuilder:s,updateSelectionProperties:l,recordingKey:c,updateConditionInConditionalAction:d,isNarrowPanel:u,showVariableThumbnails:m,setVariableValue:p,onClose:_,requestedTypes:f,initialPosition:E,variantProperty:y}){let b=!1;(0,A.gl)(r)&&(r=void 0,b=!0),r=(0,x.IQ)(r,y),r?.type===o.Z_n.EXPRESSION&&r?.value.expressionFunction===o.JTp.STRINGIFY&&(r=r.value.expressionArguments[0]);let[I,S]=i.useState(null),C=i.useCallback(e=>{null!==e&&S(e)},[]),[N,L]=i.useState(E??null),{shouldShowAdvancedPrototypingPaywall:O,showAdvancedPrototypingVariablesModal:P}=(0,R.zt)(),D=i.useCallback(()=>{if(O)P();else if(!N&&I){let e=I.getBoundingClientRect();L(new g.Mi(e.left-34,e.top-6))}},[I,N,O,P]);i.useEffect(()=>{!0===n&&s&&I&&(D(),s(!1))},[n,I,D,s]);let k=i.useCallback(()=>{N&&(L(null),_&&_())},[N,_]),M=i.useCallback(e=>{if(void 0!==d)d(e);else if((0,a.Vq)(p)){if(!p(e))return!1}else void 0!==l&&l({targetVariableData:e});return k(),!0},[k,d,l,p]),F=i.createElement(i.Fragment,null,N&&i.createElement($,{initialTokens:r?(0,v.q)((0,T.A)(r,new w.o(!0))):[],initialPosition:N,resolvedType:e,onCloseExpressionBuilder:k,onInputSubmitted:M,icon:d?V.A:G.A,isInConditional:void 0!==d,recordingKey:h.Pt(c,"expressionBuilder"),requestedTypes:f})),U=i.createElement(Y,{targetVariableData:r,forwardRef:C,onClick:D,recordingKey:c,isNarrowPanel:u,isInCell:!!p,showVariableThumbnails:m,isInConditional:void 0!==d,isMixed:b});return i.createElement(i.Fragment,null,F," ",U)}function $({initialTokens:e,initialPosition:r,resolvedType:n,onCloseExpressionBuilder:a,onInputSubmitted:o,icon:s,isInConditional:l,recordingKey:c,requestedTypes:d}){let{autoCloseOnScroll:m}=i.useContext(H),p=i.useMemo(()=>e.reduce((e,r)=>e+=r.stringValue,""),[e]),g=i.useRef(p),E=i.useRef(!1),[b,v]=i.useState(0),T=i.useCallback((e,r)=>{v(e),e>0&&!E.current&&(E.current=!0),r&&(0,x.EQ)(g.current,r,n,l?"conditional":"set_variable")},[l,n]),[A,C]=i.useState((0,S.d)(g.current,n,d)),L=i.useCallback(()=>{if(g.current.trim().length>0){(0,x.EQ)(g.current,"success",n,l?"conditional":"set_variable");let e=o((0,I.q)(g.current,new w.o));if(!e)return C(!e),e}else(0,x.EQ)(g.current,"submit_empty",n,l?"conditional":"set_variable"),a();return!0},[l,a,o,n]),O=i.useMemo(()=>u()(e=>{(0,x.EQ)(g.current,e,n,l?"conditional":"set_variable"),a()}),[l,a,n]),R=i.useCallback(()=>l?(0,y.t)("proto.expression_builder_entry.placeholder"):(0,y.t)("proto.expression_builder.placeholder"),[l]);return i.createElement("div",{className:B.Zh},i.createElement(M.vx,{container:N.c,containerProps:{wiggleCount:b},title:"",headerSize:"hidden",initialPosition:r,onClose:a,dragHeaderOnly:!1,initialWidth:258,canRenderBelowViewport:!0},i.createElement(f.dP,{recordingKey:c},i.createElement("div",null,i.createElement(K,{fallback:i.createElement("div",{className:B.D9}," Loading... "),errorFallback:null,initialTokens:e,expressionText:g,resolvedType:n,error:A,setError:C,onSubmit:L,onClose:O,icon:s,wiggleCount:b,setWiggleCount:T,hasWiggled:E.current,placeholderText:R(),isInConditional:l,recordingKey:h.Pt(c,"search"),requestedTypes:d})))),i.createElement(_.D8,{className:U.ZA,onMouseDown:e=>{!A&&L()||(b>=1?O("click_out_cancel"):0===b&&T(1,"click_out_error")),e.stopPropagation()},onWheel:()=>{m&&g.current.trim()===p.trim()&&O("scroll_cancel")},recordingKey:h.Pt(c,"closeBuilder")}))}function Y({targetVariableData:e,forwardRef:r,onClick:n,recordingKey:a,showVariableThumbnails:l,isNarrowPanel:d,isInCell:u,isInConditional:p,isMixed:g,variantProperty:f}){e=(0,x.IQ)(e,f);let v=(0,b.GS)(),I=(0,R.YT)(),S=i.useContext(O.c),C=I===R.Oz.TWO_COL,N=C&&S===O.P.LEFT,P=C&&S===O.P.RIGHT,D=i.useMemo(()=>e?(0,T.A)(e,new w.o(!0,!0)).replace(/\(/g," ( ").replace(/\)/g," ) ").split(/\s+(?=(?:(?:[^"]*"){2})*[^"]*$)(?![^{]*})(?![^[]*])/):[],[e]);if(e&&(0,A.hS)(e)&&e?.resolvedType===o.rXF.COLOR)return i.createElement(L.J,{color:e.value});let k=0===D.length,M=c()({[B.WR]:!u&&d,[B.NQ]:u,[B.D9]:!u&&!d,[B.pC]:C,[B.g6]:N,[B._i]:v}),U=N?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_lhs"):P?(0,y.t)("proto.expression_builder_entry.placeholder_ui3_rhs"):(0,y.t)("proto.expression_builder_entry.placeholder");return i.createElement(_.D8,{onClick:n,recordingKey:h.Pt(a,"openExpressionBuilder"),className:v?B.tY:E.cx.minW0.$},i.createElement("div",{className:M,ref:r},D.filter(e=>e.length>0).map((e,r)=>{if(e.startsWith("{")&&e.endsWith("}")){let n=e.replace(/[{}]/g,""),{variableId:a,modeId:o}=(0,x.Y_)(n);return i.createElement(z,{variableId:a,modeId:o,showVariableThumbnails:l,key:r,disableHover:N})}if(s.sH(e))return i.createElement(z,{variableId:e,showVariableThumbnails:l,key:r,disableHover:N});if((0,m.kc)().ds_variable_props_proto&&e.startsWith("[")&&e.endsWith("]")){let n=e.replace(/[[]]/g,""),[a,o,s]=(0,x.Q6)(n);return i.createElement(j,{stablePathToNode:a,componentPropId:s,showVariableThumbnails:l,key:r})}if((0,m.kc)().ds_variable_props_proto&&(0,x.Q6)(e)[0].length&&""!==(0,x.Q6)(e)[1]&&""!==(0,x.Q6)(e)[2]){let[n,a,o]=(0,x.Q6)(e);return i.createElement(j,{stablePathToNode:n,componentPropId:o,showVariableThumbnails:l,key:r,disableHover:N})}return x.dX.test(e)?i.createElement("span",{key:r},e):x.yZ.test(e)||x.er.test(e)?i.createElement("span",{key:r},e):i.createElement(F.X,{isLeftColInteractionsPanel:N,text:e,key:r})}),k&&i.createElement("span",{className:B.a7},g?(0,y.t)("fullscreen.mixed"):p?U:(0,y.t)("proto.expression_builder.placeholder"))))}function z({variableId:e,modeId:r,showVariableThumbnails:n,disableHover:a}){let o=(0,C.u)(e),s=o?(0,k.B9)(o.name):(0,y.t)("proto.expression_builder_entry.missing"),l=(0,C.G6)(o?.variableSetId),c=l&&r?l.modes.find(e=>e.id===r):null,d=c?.name,u=o&&n?(0,x.Xx)(o.resolvedType):null,m=d?`${s}: ${d}`:`${s}`;return i.createElement(D.wG,{text:m,thumbnailValue:u,isDeleted:!!o&&(0,P.eF)(o),disableHover:a})}function j({stablePathToNode:e,componentPropId:r,showVariableThumbnails:n,disableHover:a}){let o=(0,x.aA)(e,r),s=o&&n?(0,x.Xx)(o.varValue.resolvedType):null;return i.createElement(D.wG,{text:o?o.name:(0,y.t)("proto.expression_builder_entry.missing"),colorTheme:D.J2.COMPONENT,thumbnailValue:s,isDeleted:!1,disableHover:a})}},773833:(e,r,n)=>{n.d(r,{Cq:()=>function e(r){if(r&&r.varValue.type===a.Z_n.ALIAS)return a.CWU.getVariableResolvedValue(r.varValue.value,new Map);if(r&&r.varValue.type===a.Z_n.NODE_FIELD_ALIAS){let{stablePathToNode:n,indexOrKey:i}=r.varValue.value,o=x(n,i);return o?e(o):function(e){switch(e.varValue.resolvedType){case a.rXF.STRING:case a.rXF.TEXT_DATA:return{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:""};case a.rXF.BOOLEAN:return{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:!1};case a.rXF.FLOAT:return{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:0}}}(r)}let n=(0,_.sr)(r);switch(typeof n){case"string":return{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:n};case"boolean":return{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:n};case"number":return{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:n}}},DE:()=>I,EQ:()=>q,HC:()=>G,Hq:()=>F,I0:()=>y,IQ:()=>Y,J4:()=>V,N_:()=>W,Q6:()=>U,TL:()=>H,Ub:()=>k,Xx:()=>z,Y_:()=>$,ZX:()=>E,_z:()=>M,a1:()=>v,aA:()=>x,bU:()=>B,d9:()=>P,dX:()=>N,er:()=>O,he:()=>D,if:()=>T,kl:()=>S,q2:()=>w,sO:()=>A,tJ:()=>R,tz:()=>j,uX:()=>L,wL:()=>K,yZ:()=>C,yy:()=>b});var i=n(411855),a=n(922827),o=n(572304),s=n(776250),l=n(553716),c=n(632430),d=n(394339),u=n(771941),m=n(869156),p=n(335682),h=n(512596),_=n(503795),g=n(90211),f=n(452883);function E({highlightedItemID:e,variables:r,expressionItems:n,componentPropItems:i}){return e?r.find(r=>r.node_id===e)??i.find(r=>(0,_.lC)(r)===e)??n.find(r=>r.name===e)??null:null}let y=new RegExp(/\+|-|\*|!|=|\/|&|\||>|<| /g),b=new RegExp(/\+|-|\*|!|=|\/|&&|\|\||>|</g),v=new RegExp(/\+|-|\*|\//g),I=new RegExp(/\+/g),T=new RegExp(/>|<|!/g),S=new RegExp(/>=|<=/g),w=new RegExp(/!=|==|(OR|or|Or)|>=|<=|&&|\|\|/g),A=new RegExp(/(AND|and|And)|(NOT|not|Not)/g),C=new RegExp(/"([^"]*)"/),N=new RegExp(/^[0-9.]*$/),L=new RegExp(/(AND|and|And)|(NOT|not|Not)|(OR|or|Or)|!=|==|&&|\|\|/),O=new RegExp(/\s*(true|false)\s*/i),R=new RegExp(/\(|\)/g);function P(e){return!!e&&(!N.test(e)||isNaN(Number(e)))}function D(e,r){return e?.modes.find(e=>e.id===r)?.name??""}function k(e){let[r,n]=e.split("$$$");return[r,n]}function M(e,r,n){if(n.keepAliasId)return`${e}$$$${r}`;let i=n.variableIdToVariable(e);if(!i)return"{}";let a=n.variableCollectionIdToVariableCollection(i.variableSetId);if(!a)return"{}";let o=D(a,r);return`{${i.name}$$$${o}}`}function F(e){let[r,n,i]=U(e);if(!r||!n||!i)return[];if("COMPONENT_PROP_ASSIGNMENTS"===n){let e=x(r,i);return e?[r,n,i,e.varValue.resolvedType]:[]}return(0,l.xi)("Invalid node field when parsing node field alias expression text",n),[]}function x(e,r){if(!e||0===e.length||!r)return;let n=a.CWU.getComponentPropForVariableAlias(e,r);if(0!==Object.keys(n).length)return n}function U(e){let[r,n,i]=e.split("$$$");if(!r||!n||!i)return[[],"",""];let[,a]=r.split("StablePathToNode:"),[,o]=n.split("NodeField:"),[,s]=i.split("IndexOrKey:");return a&&o&&s?[JSON.parse(a),o,s]:[[],"",""]}function B(e,r,n){return"COMPONENT_PROP_ASSIGNMENTS"===r?`StablePathToNode:${JSON.stringify(e)}$$$NodeField:${r}$$$IndexOrKey:${n}`:((0,l.xi)("Invalid node field when parsing for node field alias",r),"")}function V(e){for(let r of e){if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);if("items"in r)return r.items[0].node_id;if("expressionItem"in r)return r.expressionItem.name}return null}function G(e){for(let r of e)if(r.type===_.Yc.COMPONENT_PROPS)return(0,_.lC)(r.items[0]);for(let r of e)if(r.type===_.Yc.VARIABLES)return r.items[0].node_id;for(let r of e)if(r.type===_.Yc.EXPRESSION&&"LITERAL"===r.expressionItem.type)return r.expressionItem.name;return null}function H(e){return i.useMemo(()=>e===a.rXF.BOOLEAN?[a.rXF.BOOLEAN,a.rXF.STRING,a.rXF.FLOAT]:e===a.rXF.STRING?[a.rXF.STRING,a.rXF.FLOAT]:[e],[e])}function K(e,r,n,a){let o=(0,m.Rb)(),s=(0,m.yp)(),l=(0,m.pN)(),c=l.data?.libraryVariables,d=l.data?.libraryVariableSets,[u,E]=(0,i.useMemo)(()=>"ALL_LIBRARIES"===n.type?[[...o,...c??[]],[...s,...d??[]]]:"LOCAL_VARIABLES"===n.type?[o,s]:[c??[],d??[]],[n.type,o,c,s,d]),y=(0,f.$)(),b=(0,p.tS)(),v=(0,h.A)(null,null),I=i.useMemo(()=>{let e={};return v.forEach(r=>{e[r.fileKey]=r.fileName}),e},[v]),T=i.useMemo(()=>{let e={};return v.forEach(r=>{e[r.fileKey]=r.libraryKey}),e},[v]),S=H(r),w=i.useMemo(()=>u.filter(e=>a?.includes(e.resolvedType)??S.includes(e.resolvedType)),[u,a,S]),A=(0,g.qF)(w,e??"");return i.useMemo(()=>null===e?[]:e.length>0?(0,_.dC)({variables:A,variableSets:E,styles:[],componentProps:[],layout:"list",fileNamesByKey:I,fileKeyToLibraryKey:T,openFileKey:b,slideThemeId:y}):(0,_.HK)({variables:A,variableSets:E,layout:n.layout}),[e,A,E,I,T,b,n.layout,y])}async function W(e,r){let n=r.find(r=>r.node_id===e.node_id);n&&await (0,c.ff)(n)}function $(e){let[r,n]=e.split(" %%% "),[i,a]=r.split("$$$");return{variableId:i,modeId:a,resolvedType:n?+n:null}}function Y(e,r){return e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.IS_TRUTHY&&e.value.expressionArguments[0]&&(e=e.value.expressionArguments[0]),e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.RESOLVE_VARIANT&&e?.value.expressionArguments[0]?.type===a.Z_n.MAP&&r&&e.value.expressionArguments[0].value[r]&&(e=e.value.expressionArguments[0].value[r]),e?.type===a.Z_n.EXPRESSION&&e?.value.expressionFunction===a.JTp.STRINGIFY&&(e=e.value.expressionArguments[0]),e}function z(e){return j(e)?{type:a.Z_n.STRING,resolvedType:a.rXF.STRING,value:o.AD}:e===a.rXF.BOOLEAN?{type:a.Z_n.BOOLEAN,resolvedType:a.rXF.BOOLEAN,value:!0}:e===a.rXF.FLOAT?{type:a.Z_n.FLOAT,resolvedType:a.rXF.FLOAT,value:0}:null}function j(e){return e===a.rXF.STRING||e===a.rXF.TEXT_DATA}function q(e,r,n,i){let o=new u.o(!0),c=[];try{c=(0,d.q)(e)}catch{(0,l.xi)("could not tokenize expression for logging:",e)}let m=c.filter(e=>"TOKEN_VARIABLE"===e.type||"TOKEN_VARIABLE_WITH_MODE"===e.type).map(e=>{let[r,n]=k(e.stringValue),i=o.variableIdToVariable(r);return{collection_id:i?.variableSetId,variable_id:r,variable_type:i?.resolvedType,mode_id:n}}),p=Object.keys(a.rXF)[Object.values(a.rXF).indexOf(n)].toLowerCase();"float"!==p&&"string"!==p&&"boolean"!==p&&(p="invalid");let h={status:r,resolved_type:p,variable_data:JSON.stringify(m),entry:i};s.az.trackDefinedEvent("prototype.expression_submit",h)}},360803:(e,r,n)=>{n.d(r,{m:()=>function e(r){var n=[];for(var a of r){if("SET_VARIABLE"===a.connectionType){if(a.targetVariable&&"id"in a.targetVariable){let e=s.sH(a.targetVariable.id);a.targetVariable.id={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}}}a.targetVariableData&&(a.targetVariableData=c(a.targetVariableData.type,a.targetVariableData.resolvedType,a.targetVariableData.value))}else if("SET_VARIABLE_MODE"===a.connectionType)(0,i.B1)(a.targetVariableModeID,"targetVariableModeID"),a.targetVariableModeID=(0,o.sH)(a.targetVariableModeID)||void 0;else if("CONDITIONAL"===a.connectionType&&a.conditionalActions){var l=[];for(var d of a.conditionalActions){var u=[],m=null;d&&(d.condition&&(m=c(d.condition.type,d.condition.resolvedType,d.condition.value)),d.actions&&(u=e(d.actions))),l.push({condition:m,actions:u})}a.conditionalActions=l}n.push(a)}return n}});var i=n(140593),a=n(922827),o=n(572304),s=n(879441),l=n(587932);function c(e,r,n){let i=(0,l.WI)(r,n),d=function(e){switch(e){case a.rXF.BOOLEAN:return"BOOLEAN";case a.rXF.FLOAT:return"FLOAT";case a.rXF.STRING:return"STRING";case a.rXF.COLOR:return"COLOR";case a.rXF.MAP:return"MAP";case a.rXF.SYMBOL_ID:return"SYMBOL_ID";case a.rXF.TEXT_DATA:return"TEXT_DATA";default:throw Error(`Unexpected resolved type: ${e}`)}}(r);if(e===a.Z_n.BOOLEAN)return{dataType:"BOOLEAN",resolvedDataType:d,value:{boolValue:i.value}};if(e===a.Z_n.FLOAT)return{dataType:"FLOAT",resolvedDataType:d,value:{floatValue:i.value}};if(e===a.Z_n.STRING)return{dataType:"STRING",resolvedDataType:d,value:{textValue:i.value}};if(e===a.Z_n.ALIAS){var u,m=null;if("string"==typeof n){let e=s.sH(n);e&&(m={guid:{sessionID:e?.guid?.sessionID,localID:e?.guid?.localID}})}return{dataType:"ALIAS",resolvedDataType:d,value:{alias:m||i.value}}}if(e===a.Z_n.NODE_FIELD_ALIAS)return{dataType:"NODE_FIELD_ALIAS",resolvedDataType:d,value:{nodeFieldAliasValue:"stablePathToNode"in(u=i.value)&&"nodeField"in u&&"indexOrKey"in u?{stablePathToNode:{guids:u.stablePathToNode.map(e=>(0,o.sH)(e))},nodeField:u.nodeField,indexOrKey:u.indexOrKey}:{}}};if(e===a.Z_n.COLOR)return{dataType:"COLOR",resolvedDataType:d,value:{colorValue:i.value}};if(e===a.Z_n.EXPRESSION)return{dataType:"EXPRESSION",resolvedDataType:d,value:{expressionValue:function e(r){for(var n=r.expressionArguments,i=[],o=0;o<n.length;o++){var s=n[o],l=c(s.type,s.resolvedType,s.value);s.type===a.Z_n.EXPRESSION&&(l.value={expressionValue:e(s.value)}),i.push(l)}return{expressionArguments:i,expressionFunction:a.JTp[r.expressionFunction]}}(n)}};else if(e===a.Z_n.MAP)return{dataType:"MAP",resolvedDataType:d,value:{mapValue:i.value}};else if(e===a.Z_n.SYMBOL_ID)return{dataType:"SYMBOL_ID",resolvedDataType:d,value:{symbolIdValue:i.value}}}},301036:(e,r,n)=>{n(820286),n(848661)},325682:(e,r,n)=>{n.d(r,{Oz:()=>D,YT:()=>M,hU:()=>T,x6:()=>A,zt:()=>P});var i=n(411855),a=n(188507);n(922827),n(572304);var o=n(776250);n(794272);var s=n(966712),l=n(716034),c=n(418956),d=n(662275),u=n(809831),m=n(226055),p=n(396226),h=n(848661);n(46878);var _=n(335682),g=n(99506),f=n(206193),E=n(300874);n(32067),n(394781);var y=n(453261),b=n(449731),v=n(144119),I=n(38340);function T(e,r,n,i,a,o,s,l,c,d){return{behavior:function(e){if(e){if(!(0,h.hS)(e))return h.oV;if("INSTANT_TRANSITION"===e);else if("DISSOLVE"===e)return"DISSOLVE";else if("FADE"===e)return"FADE";else if(e.startsWith("SLIDE_OUT"))return"SLIDE_OUT";else if(e.startsWith("SLIDE"))return"SLIDE";else if(e.startsWith("PUSH"))return"PUSH";else if(e.startsWith("MOVE_OUT"))return"MOVE_OUT";else if(e.startsWith("MOVE"))return"MOVE";else if("SMART_ANIMATE"===e||"MAGIC_MOVE"===e)return"SMART_ANIMATE";else if("SCROLL_ANIMATE"===e)return"SCROLL_ANIMATE"}return"INSTANT"}(e),direction:function(e){if(e&&(0,h.hS)(e)){for(let r of w)if(e.indexOf(r)>=0)return r}return null}(e),easing:function(e){if(e){if(!(0,h.hS)(e))return h.oV;if("IN_CUBIC"===e)return"EASE_IN";if("OUT_CUBIC"===e);else if("INOUT_CUBIC"===e)return"EASE_IN_AND_OUT";else if("LINEAR"===e)return"LINEAR";else if("IN_BACK_CUBIC"===e)return"EASE_IN_BACK";else if("OUT_BACK_CUBIC"===e)return"EASE_OUT_BACK";else if("INOUT_BACK_CUBIC"===e)return"EASE_IN_AND_OUT_BACK";else if("CUSTOM_CUBIC"===e)return"CUSTOM_BEZIER";else if("GENTLE_SPRING"===e)return"GENTLE";else if("SPRING_PRESET_ONE"===e)return"QUICK";else if("SPRING_PRESET_TWO"===e)return"BOUNCY";else if("SPRING_PRESET_THREE"===e)return"SLOW";else if("CUSTOM_SPRING"===e)return"CUSTOM_SPRING"}return"EASE_OUT"}(r),isSpringTransition:A(r),easingFunction:n?(0,h.hS)(n)?n:h.oV:S,duration:i?(0,h.hS)(i)?i:h.oV:.3,shouldSmartAnimate:C(a,!1),preserveScroll:C(o,!1),resetVideoPosition:C(s,!1),openUrlInNewTab:C(l,!1),resetScrollPosition:C(c,!1),resetInteractiveComponents:C(d,!1)}}(0,l.eU)(!0);let S=[0,0,.58,1],w=["LEFT","RIGHT","TOP","BOTTOM"];function A(e){return!!e&&("GENTLE_SPRING"===e||"SPRING_PRESET_ONE"===e||"SPRING_PRESET_TWO"===e||"SPRING_PRESET_THREE"===e||"CUSTOM_SPRING"===e)}function C(e,r){return e?(0,h.hS)(e)?e:h.oV:r}let N=["OPEN_OVERLAY","SWAP_WITH","CLOSE_OVERLAY"],L=["SET_VARIABLE","SET_VARIABLE_MODE","CONDITIONAL"],O=["UPDATE_MEDIA_PLAY_PAUSE_OPTIONS","UPDATE_MEDIA_MUTE_UNMUTE_OPTIONS","UPDATE_MEDIA_SKIP_TO","UPDATE_MEDIA_SKIP_BY_OPTIONS"];function R(e,r){let n;let s=(0,a.wA)();switch(e){case E.Bi.PROTOTYPING_MULTIPLE_ACTIONS:n=f.b.PROTOTYPING_MULTIPLE_ACTIONS;break;case E.Bi.PROTOTYPING_CONDITIONAL_ACTIONS:n=f.b.PROTOTYPING_CONDITIONAL_ACTIONS;break;case E.Bi.PROTOTYPING_VARIABLES:n=f.b.PROTOTYPING_VARIABLES;break;case E.Bi.VIDEOS_IN_PROTOTYPES:n=f.b.ADD_VIDEO;break;default:n=void 0}return(0,i.useCallback)(()=>{s(d.to({type:b.DV,data:{team:r,resource:e,editorType:g._Y.DESIGN,currentPlan:p.F.Plan.STARTER,upsellPlan:p.F.Plan.PRO,upsellSource:n}})),(0,o.sx)("prototype.payment_upsell_modal_shown",{paywallFeature:e})},[s,e,r,n])}function P(){let{canUseAdvancedPrototyping:e,canMoveFileToProPlus:r,showMoveToProTeam:n}=(0,y.R)(),i=(0,s.kc)().prototype_multi_path_paywall&&!e,o=(0,_.q5)(),l=(0,a.d4)(e=>o&&o.teamId?e.teams[o.teamId]:null),d=(0,c.md)(_.Hu),m=(0,v.sO)(),p=(0,u.ow)(),h=R(E.Bi.PROTOTYPING_MULTIPLE_ACTIONS,l),g=R(E.Bi.PROTOTYPING_CONDITIONAL_ACTIONS,l),f=R(E.Bi.PROTOTYPING_VARIABLES,l),b=R(m?E.Bi.VIDEOS_IN_SLIDES:p?E.Bi.VIDEOS_IN_WHITEBOARD:E.Bi.VIDEOS_IN_PROTOTYPES,l);return{shouldShowAdvancedPrototypingPaywall:i,showAdvancedPrototypinglMultipleActionsModal:r?n:h,showAdvancedPrototypingConditionalActionsModal:r?n:g,showAdvancedPrototypingVariablesModal:r?n:f,showVideosModal:r&&!d?n:b}}[...L,...N,...O],[...N,...L,...O];var D=(e=>(e[e.SINGLE_COL=0]="SINGLE_COL",e[e.TWO_COL=1]="TWO_COL",e[e.NONE=2]="NONE",e))(D||{});function k(e){return e.some(e=>e.actions?.some(e=>"CONDITIONAL"===e.connectionType))}function M(){let e=(0,I.HS)(),{selectedInteractions:r,differentLengthActions:n}=(0,I.Ay)(e);if(!(0,m.GS)())return 2;let i=k(r)||r.some(e=>void 0!==e.actions&&e.actions?.length>1),a=r.length>1&&!n&&r[0].actions?.length===1&&k(r)&&!r.every(e=>e.actions?.every(e=>"CONDITIONAL"===e.connectionType));return!i||n||a?0:1}},73349:(e,r,n)=>{n.d(r,{E8:()=>l,U8:()=>o,_i:()=>s});var i=n(682331),a=n(126911);function o(e){let r=[],n=a.y.isApple();return n&&e.metaKey&&r.push("\u2318"),!n&&e.metaKey&&r.push(e.ctrlKey?"\u2318":"Ctrl"),e.ctrlKey&&r.push(n?"\u2303":"Ctrl"),e.shiftKey&&r.push(n?"\u21E7":"Shift"),e.altKey&&r.push(n?"\u2325":"Alt"),r.push(c[e.keyCode]||String.fromCharCode(e.keyCode)),r.join(n?"":"+")}function s(e){if(!e)return null;let r={metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1,keyCode:0};for(let n of e)switch(n){case 16:r.shiftKey=!0;break;case 17:r.ctrlKey=!0;break;case 18:r.altKey=!0;break;case 91:case 92:case 93:case 224:r.metaKey=!0;break;default:r.keyCode=n}return r.keyCode?r:null}function l(e,r=!1){if(!e||e?.triggerDevice==="KEYBOARD")return null;let n=d.get(e?.triggerDevice),a=e?.keyCodes?.[0]??0,o=n?.get(a)??function(e){if(e>=i.c){let r=Math.floor((e-i.c)/2);return`Axis ${r} ${e%2==0?"-":"+"}`}return`Button ${e}`}(a);return o.length<=1&&!r&&(o+=" (Gamepad)"),o}let c={3:"Break",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"Caps Lock",27:"Esc",32:"Space",33:"Page Up",34:"Page Down",35:"End",36:"Home",37:"\u2190",38:"\u2191",39:"\u2192",40:"\u2193",41:"Select",42:"Print",43:"Execute",44:"Print Screen",45:"Ins",46:"Del",47:"Help",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",58:":",59:"=",60:"<",61:"=",63:"\xdf",64:"@",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",95:"Sleep",96:"Numpad 0",97:"Numpad 1",98:"Numpad 2",99:"Numpad 3",100:"Numpad 4",101:"Numpad 5",102:"Numpad 6",103:"Numpad 7",104:"Numpad 8",105:"Numpad 9",106:"*",107:"+",108:".",109:"-",110:".",111:"/",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",124:"F13",125:"F14",126:"F15",127:"F16",128:"F17",129:"F18",130:"F19",131:"F20",132:"F21",133:"F22",134:"F23",135:"F24",144:"Num Lock",145:"Scroll Lock",151:"Airplane Mode",160:"^",161:"!",163:"#",164:"$",166:"Page Backward",167:"Page Forward",168:"Refresh",170:"*",172:"Home",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",193:"?",194:".",219:"[",220:"\\",221:"]",222:"'",223:"`"},d=new Map([["SWITCH_PRO",new Map([[0,"B"],[1,"A"],[2,"Y"],[3,"X"],[4,"L"],[5,"R"],[6,"ZL"],[7,"ZR"],[8,"-"],[9,"+"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Capture"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["PS4",new Map([[0,"X"],[1,"\u25CB"],[2,"\u25A1"],[3,"\u25B3"],[4,"L1"],[5,"R1"],[6,"L2"],[7,"R2"],[8,"Share"],[9,"Options"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Home"],[17,"Touch Pad"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])],["XBOX_ONE",new Map([[0,"A"],[1,"B"],[2,"X"],[3,"Y"],[4,"LB"],[5,"RB"],[6,"LT"],[7,"RT"],[8,"View"],[9,"Menu"],[10,"LStick Press"],[11,"RStick Press"],[12,"DPad Up"],[13,"DPad Down"],[14,"DPad Left"],[15,"DPad Right"],[16,"Xbox Button"],[1e3,"LStick Left"],[1001,"LStick Right"],[1002,"LStick Up"],[1003,"LStick Down"],[1004,"RStick Left"],[1005,"RStick Right"],[1006,"RStick Up"],[1007,"RStick Down"]])]])},38340:(e,r,n)=>{n.d(r,{Ay:()=>y,HS:()=>E});var i=n(188507),a=n(561546),o=n(821910),s=n(922827),l=n(572304),c=n(776250),d=n(529004),u=n(356390),m=n(848661),p=n(29680),h=n(234945),_=n(279702),g=n(113468);function f(e){if(!e||!e.interactionType)return"NONE";switch(e.interactionType){case"MOUSE_IN":case"MOUSE_OUT":case"MOUSE_ENTER":case"MOUSE_LEAVE":case"MOUSE_DOWN":case"MOUSE_UP":return e.interactionType+(e.interactionMaintained?.toString()??"0");case"ON_KEY_DOWN":return e.interactionType+(e.keyTrigger?.triggerDevice??"")+(e.keyTrigger?.keyCodes?.sort().toString()??"");case"AFTER_TIMEOUT":return e.interactionType+(e.transitionTimeout?.toString()??"0");case"ON_MEDIA_HIT":return e.interactionType+(e.mediaHitTime?.toString()??"0");default:return e.interactionType}}function E(){let e=(0,i.d4)(A),r=new Set((0,i.d4)(N));return e.some(e=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;return n&&r.has(n)})?g.J.NORMAL:g.J.INHERITED_INTERNAL}function y(e){let r=(0,i.d4)(A),n=(0,i.d4)(C),a=e===g.J.INHERITED_INTERNAL?n:r,o=(0,i.d4)(N),s=new Set(o),E=new Set,y=[];a.forEach((e,r)=>{let n=e.id&&e.sourceNodeID?d.d({nodeID:e.sourceNodeID,interactionID:e.id}):void 0;n&&s.has(n)&&(E.add(r),y.push(e))});let I=y.map(e=>e.actions?.length).some(e=>e!==y[0].actions?.length),L=(0===y.length?[]:y[0].actions||[]).map(e=>({...e})),O=(0,p.eY)();if(!I)for(var R=0;R<y.length;R++){let e=y[R].actions||[];for(var P=0;P<e.length;P++){let r=L[P],n=e[P];for(let e in n)r[e]?v(n,r,e,O)||(r[e]=m.oV):r[e]=n[e]}}let D=i=>(function o(s){let l=function(...o){let[l,d]=o,p=!1,h=[],f=[];for(let e in l)(0,m.gl)(U[e])?(p=!0,h.push(e)):f.push(e);let{changes:y,eventChanges:b,actionChanges:v,interactionChanges:I}=function(e){let r={},n={},i={},a={};for(let o in e)S.has(o)?i[o]=e[o]:T.has(o)?n[o]=e[o]:w.has(o)?a[o]=e[o]:r[o]=e[o];return{changes:r,eventChanges:n,actionChanges:i,interactionChanges:a}}(l),A=[];a.forEach((e,r)=>{if(E.has(r)){let r={...e.event,...b},n=[],a=e.actions||[];for(let e=0;e<a.length;e++)if(e===i){if(s.length>1){let{newPrototypeAction:r}=function(e,r,n){if(r.length>2&&e.conditionalActions){let o=e.conditionalActions,s=e.conditionalActions,l=r[1],c=s[l];var i={condition:c.condition,actions:[]},a=[];let d=c.actions?c.actions:[];for(let e=0;e<d.length;e++)e===r[2]?a.push({...d[e],...n}):a.push({...d[e]});i.actions=a,o[l]=i,e.conditionalActions=o}return{newPrototypeAction:e}}(a[e],s,v);n[e]=r}else n.push({...a[e],...v})}else n.push({...a[e]});i>=n.length&&n.push({...v}),A.push({...e,...I,event:r,actions:n})}else A.push(e)}),(0,c.sx)("prototype_update_selection_properties",{mixedUpdate:p,mixedUpdatedProperties:h,nonMixedUpdatedProperties:f,num_connector:E.size,category:e}),e===g.J.NORMAL?A=[...A,...n]:e===g.J.INHERITED_INTERNAL&&(A=[...r,...A]),y.prototypeInteractions=A,u.Y5.updateSelectionProperties(y,{shouldCommit:d?.shouldCommit||_.zk.YES,overwrite:d?.overwrite})};return l.appendActionIndex=function(e){return o([...s,e])},l})([i]),k=e=>e&&null!=e.actions?e.actions[0]:null,M=e=>{let r=k(e);if(null==r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},F=(e,r)=>{if(!e.actions||e.actions?.length===0||0===r.length)return null;if(!(r.length>2))return e.actions[r[0]];{let n=e.actions.length>r[0]?e.actions[r[0]]:null;if(n&&n.conditionalActions){let e=n.conditionalActions.length>r[1]?n.conditionalActions[r[1]]:null;if(e&&e.actions)return e.actions.length>r[2]?e.actions[r[2]]:null}}},x=(e,r)=>{if(null==r||void 0===r)return l.dI(e.sourceNodeID);let n=l.dI(r.transitionNodeID);return n===l.AD||null===n?l.dI(e.sourceNodeID):n},U=function(e,r){let n={},i={};for(let a of e){if(!a||!a.event)continue;for(let e in a.event)n[e]?b(a.event,n,e)||(n[e]=m.oV):n[e]=a.event[e];let e=a.actions&&{...a.actions[0]};if(e)for(let n in e)i[n]?v(e,i,n,r)||(i[n]=m.oV):i[n]=e[n]}return{...n,...i}}(y,O),B=function(e,r){let n={},i=[{}];for(let o of e){if(!o||!o.event)continue;for(let e in o.event)n[e]?b(o.event,n,e)||(n[e]=m.oV):n[e]=o.event[e];if(!o.actions)continue;let e=o.actions;var a=0;for(let n of e){for(let e in n){a>i.length-1&&i.push({});let o=i[a];o[e]?v(n,o,e,r)||(o[e]=m.oV):o[e]=n[e]}a++}}return{interactionEvent:n,interactionActions:i}}(y,O),V=new Set(o.map(e=>{let r=d.s(e);return r?l.dI(r.nodeID):""}).filter(e=>""!==e)),G=a.filter(e=>e.sourceNodeID&&V.has(l.dI(e.sourceNodeID)));var H=[...G];let K=function(){let e=(0,i.d4)(C);return Object.keys((0,i.d4)(h.Xt)).length>1?function(e){let r=[],n=new Map;for(let r of e){let e=f(r.event);n.has(e)||n.set(e,[]);let i=n.get(e);i&&i.push(r)}for(let[e,i]of n)i&&i.length>0&&i[0].event&&r.push({key:e,event:i[0].event,interactions:i});return r}(e):function(e){let r=[];if(e.length>0&&e[0].event)for(let n of e)n.event&&r.push({key:f(n.event),event:n.event,interactions:[n]});return r}(e)}();if(K.length>0)for(var R=0;R<K.length;R++){let e=K[R];for(var W=0;W<e.interactions.length;W++){let r=e.interactions[W];H.find(e=>e.id===r.id)||H.push(r)}}return{makeUpdateSelectionPropertiesForActionIndex:D,updateSelectionProperties:D(0),makeUpdateMultipleDestinationNodesForActionIndex:i=>(function i(o){let s=function(i,s,c){let d={},m=[];a.forEach(e=>{let r=F(e,o),n=x(e,r);if(r&&n&&-1!==Object.keys(i).indexOf(n)&&l.sH(i[n])){let d=l.sH(i[n]);if(d){if(!e.actions)return;var a=[];let n=o[0];if(r){if(o.length>2){let r=e.actions[n],i=o[1];if(r.conditionalActions){let n=r.conditionalActions[i],l=o[2],u=r.conditionalActions;var s={condition:r.conditionalActions[i].condition,actions:[]};if(n.actions){let m={...n.actions[l],transitionNodeID:d};var c=[...n.actions];c.splice(l,1,m),s.actions=c,u[i]=s,r.conditionalActions=u,(a=[...e.actions]).splice(o[0],1,r)}}}else{let r={...e.actions[o[0]],transitionNodeID:d};(a=[...e.actions]).splice(o[0],1,r)}m.push({...e,actions:a})}}}else m.push(e)}),e===g.J.NORMAL?m=[...m,...n]:e===g.J.INHERITED_INTERNAL&&(m=[...r,...m]),d.prototypeInteractions=m,u.Y5.updateSelectionProperties(d,{shouldCommit:s,overwrite:c})};return s.appendActionIndex=function(e){return i([...o,e])},s.updateMultipleDestinationNodes=function(e,r,n){return s},s})([i]),updateMultipleDestinationNodes:(i,o,s)=>{let c={},d=[];a.forEach(e=>{let r=M(e);if(r&&-1!==Object.keys(i).indexOf(r)&&l.sH(i[r])){let n=l.sH(i[r]);if(n){if(!e.actions)return;let r=e.actions.findIndex(e=>"INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType);if(-1!==r){let i={...e.actions[r],transitionNodeID:n},a=[...e.actions];a.splice(r,1,i),d.push({...e,actions:a})}}}else d.push(e)}),e===g.J.NORMAL?d=[...d,...n]:e===g.J.INHERITED_INTERNAL&&(d=[...r,...d]),c.prototypeInteractions=d,u.Y5.updateSelectionProperties(c,{shouldCommit:o,overwrite:s})},detailPropsMultipleActions:B,detailProps:U,interactionsOnSelectedNode:G,interactionsOnSelectedNodesAndComponents:H,selectedInteractions:y,mergedActions:L,differentLengthActions:I,selectedNoodleIds:o}}function b(e,r,n){if("keyTrigger"===n){let i=e[n],o=(0,m._W)(r[n],void 0);return(0,a.lu)(i?.keyCodes||[],o?.keyCodes||[])&&i?.triggerDevice===o?.triggerDevice}return e[n]===r[n]}function v(e,r,n,i){switch(n){case"transitionNodeID":let a=e[n],c=(0,m._W)(r[n],void 0);return l.aI(a,c);case"targetVariable":let d=e[n],u=r[n];if(!d&&!u)return!0;if(d&&u){if("id"in d&&"id"in u)return d.id===u.id;if("nodeFieldAlias"in d&&"nodeFieldAlias"in u){let e=d.nodeFieldAlias.stablePathToNode,r=u.nodeFieldAlias.stablePathToNode,n=e&&1===e.length?i.get(e[0]):null,a=r&&1===r.length?i.get(r[0]):null;if(n&&a&&n.isState&&a.isState&&n.containingStateGroupId===a.containingStateGroupId)return s.Egt.getExplicitPropDefIDBinding(n.guid,d.nodeFieldAlias.indexOrKey)===s.Egt.getExplicitPropDefIDBinding(a.guid,u.nodeFieldAlias.indexOrKey);return(0,o.c2)(d.nodeFieldAlias,u.nodeFieldAlias)}}return!1;case"overlayRelativePosition":let p=e[n],h=(0,m._W)(r[n],void 0);return p?.x===h?.x&&p?.y===h?.y;case"easingType":let _=e[n],f=(0,m._W)(r[n],void 0);if("CUSTOM_CUBIC"!==_||"CUSTOM_CUBIC"!==f)return _===f;return I((0,m._W)(e.easingFunction,void 0),(0,m._W)(r.easingFunction,void 0));case"easingFunction":return I(e[n],(0,m._W)(r[n],void 0));case"extraScrollOffset":let E=e[n],y=(0,m._W)(r[n],void 0);return E?.x===y?.x&&E?.y===y?.y;case"targetVariableData":return(0,g.j)(e[n],r[n],i);case"conditionalActions":let b=e[n],T=r[n];if(!(0,m.hS)(T))return!1;if(!(b&&T&&2===b.length&&2===T.length&&b[0]?.condition&&T[0]?.condition&&b[0]?.actions&&T[0]?.actions&&b[1]?.actions&&T[1]?.actions))return(0,o.c2)(e[n],r[n]);{let e=(0,g.j)(b[0].condition,T[0].condition,i),r=(e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)for(let a in e[n])if(!v(e[n],r[n],a,i))return!1;return!0},n=b[0].actions,a=T[0].actions,o=n&&a&&r(n,a),s=b[1].actions,l=T[1].actions,c=s&&l&&r(s,l);return e&&o&&c}default:return e[n]===r[n]}}function I(e,r){if(e===r)return!0;if(void 0===e||void 0===r||e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}let T=new Set(["interactionType","interactionMaintained","interactionDuration","keyTrigger","transitionTimeout","mediaHitTime"]),S=new Set(["transitionNodeID","transitionType","transitionDuration","easingType","easingFunction","transitionShouldSmartAnimate","connectionType","connectionURL","targetVariable","targetVariableData","navigationType","transitionPreserveScroll","transitionResetVideoPosition","openUrlInNewTab","extraScrollOffset","mediaAction","mediaSkipToTime","mediaSkipByAmount","conditions","conditionalActions","transitionResetScrollPosition","transitionResetInteractiveComponents","targetVariableSetID","targetVariableModeID","targetVariableSetKey"]),w=new Set(["stateManagementVersion"]);function A(e){return e.mirror.selectionProperties.prototypeInteractions||[]}function C(e){return e.mirror.selectionProperties.prototypeInheritedInternalInteractions||[]}function N(e){return e.mirror.appModel.selectedInteractions}},394781:(e,r,n)=>{n.d(r,{PR:()=>s});var i=n(572304);let a=new class{constructor(){this.upgradedInteractions=new Set}getGUIDString(e){return i.dI(e)??i.dI(i.Hr)}recordInteractionUpgraded(e,r){return this.upgradedInteractions.add(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}hasInteractionBeenUpgraded(e,r){return this.upgradedInteractions.has(`${this.getGUIDString(e)},${this.getGUIDString(r)}`)}haveInteractionsBeenUpgraded(e){for(let r of e)if(!this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!1;return!0}haveAnyInteractionsBeenUpgraded(e){for(let r of e)if(1===r.stateManagementVersion&&this.hasInteractionBeenUpgraded(r.id,r.sourceNodeID))return!0;return!1}clearData(){this.upgradedInteractions=new Set}};class o{recordInteractionUpgraded(e,r){a.recordInteractionUpgraded(i.sH(e),i.sH(r))}}function s(){new o}},7959:(e,r,n)=>{n.d(r,{$4:()=>w,Id:()=>f,JU:()=>L,K0:()=>h.K0,Me:()=>h.Me,UZ:()=>O,YW:()=>h.YW,Zk:()=>E,fI:()=>b,hl:()=>v,jT:()=>C,ks:()=>N,xZ:()=>S,xw:()=>T,zi:()=>y});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234),l=n(522739),c=n(452441);n(163023);var d=n(283942);n(498606);var u=n(925782),m=n(37173),p=n(447141),h=n(227795);let _=(e,r)=>({...e,className:`${r} ${e.className||""}`});function g(e){let r=i.useMemo(()=>(0,m.v)(e,"ModalPanel"),[e]);return i.createElement(l.D8,{..._(r,p.a2),"data-non-interactive":!0})}function f(e){return i.createElement(g,{...e})}let E=i.forwardRef(function(e,r){return i.createElement(l.D8,{...(0,m.v)(_(e,"propertiesPanel"),"Panel"),forwardedRef:r,"data-non-interactive":!0})});class y extends s.o6{render(){return i.createElement(l.D8,{...(0,m.v)(_(this.props,"propertiesPanel"),"Panel"),"data-non-interactive":!0})}}y.displayName="Panel";let b=(0,i.forwardRef)(function({selected:e,selectedSecondary:r,heightMultiplier:n,...a},o){let s;let c=r?p.kR:e?p.CZ:null;return s=2===n?p.X0:1.25===n?p.ht:1.5===n?p.LE:p.l$,c&&(s+=" "+c),i.createElement(l.D8,{..._(a,s),"data-non-interactive":!0,forwardedRef:o})});function v(e){return i.createElement(l.D8,{..._(e,p.Zz),"data-non-interactive":!0})}function I(e){let{doNotReserveSpaceForChevron:r,faded:n,extended:a,innerRef:o,isPanelBodyCollapsedAtom:s,forceNoChevron:c,...d}=e,m=p.Dn;e.faded&&(m=p.Tz),e.extended&&(m=p.iY),s&&(m=m+" "+p.bW),c&&(m+=` ${p.sI}`);let h=_(d,m);return i.createElement(l.D8,{...h,forwardedRef:o},!r&&i.createElement(u.r2,{isPanelBodyCollapsedAtom:s||null}),e.children)}function T(e){return i.createElement(I,{...e})}function S(e){return i.createElement(I,{...e})}function w({...e}){return i.createElement("div",{..._(e,p.DS),dir:"auto"})}function A({noLeftBorder:e,squareRightBorder:r,noBorderOnFocus:n,noPlaceholderLine:i,softDisabled:a,className:s,...l}){return e&&(s+=` ${p.Z4}`),r&&(s+=` ${p.O1}`),n||(s+=` ${p.PQ}`),i&&(s+=` ${p.LJ}`),a&&(s+=` ${p.EA}`),Object.assign(l,{className:o()(p._Z,s)})}let C=i.forwardRef(function(e,r){let n=A(e);return i.createElement(l.u2,{autoComplete:"false",spellCheck:!1,forwardedRef:r,...n})});class N extends i.PureComponent{constructor(){super(...arguments),this.onKeyDown=e=>{!(0,d.jr)(e,d.W0.NO)&&this.props.onKeyDown&&this.props.onKeyDown(e)}}render(){let e=A(this.props);return i.createElement(c.L,{"data-testid":this.props.dataTestId,type:"text",spellCheck:!1,...e,onKeyDown:this.onKeyDown,ref:e.innerRef})}}function L({disabled:e,...r}){return i.createElement("label",{..._(r,e?p.wh:p.Pf),dir:"auto"})}function O(e){return i.createElement("label",{..._(e,p.wh)})}N.displayName="TextInput",i.forwardRef((e,r)=>{let{className:n,...a}=A(e);return i.createElement(l.D8,{...a,className:o()(n,p.PB),forwardedRef:r,tabIndex:0})})},544403:(e,r,n)=>{var i=n(411855),a=n(618249),o=n(243742),s=n(629019),l=n.n(s),c=n(134288),d=n(62935),u=n(461593);let m=(0,i.createContext)(()=>null),p=(0,i.forwardRef)(function({size:e,defaultSize:r,animation:n,disableResizing:a,unsetSizeWhenDisabled:o,onResize:s,side:l,children:u,style:p,..._},g){let f=(0,d.M)(g),E=(0,i.useCallback)(()=>f.current,[f]),y=(0,i.useRef)(0),b=(0,i.useRef)(0),v="left"===l?-1:1,I=i.createElement(m.Provider,{value:E},u,a?null:i.createElement(h,{side:l,onDragStart:()=>{void 0===e||(b.current=e,y.current||(y.current=e))},onDrag:e=>{let r="bottom"===l?e.delta.y:e.delta.x;s(b.current+r*v)},onDoubleClick:()=>{s(r??y.current)}})),T=a&&o?void 0:e,S="left"===l||"right"===l?T:void 0,w="bottom"===l?T:void 0,A=p?{...p,width:S,height:w}:{width:S,height:w};return n?i.createElement(c.P.div,{style:A,..._,ref:f,...n},I):i.createElement("div",{style:A,..._,ref:f},I)});function h({side:e,onDoubleClick:r,onDragStart:n,onDrag:o}){let[,s]=(0,a.i)({onDragStart:n,onDrag:o});return i.createElement("div",{role:"separator","aria-hidden":!0,...s({className:l()({[u.horizontalHandle]:"left"===e||"right"===e,[u.verticalHandle]:"bottom"===e,[u[e]]:!0}),onDoubleClick:r})})}(0,i.forwardRef)(function(e,r){let{version:n}=(0,o.DP)(),{size:a,defaultSize:s,animation:l,disableResizing:c,onResize:d,side:u,children:m,...h}=e;return"ui2"===n?i.createElement("div",{...h,ref:r},m):i.createElement(p,{...e,ref:r})})},244614:(e,r,n)=>{n.d(r,{Yq:()=>s,sH:()=>a,sI:()=>i}),n(922827).eVK.MIDDLE_CENTER;let i=.01,a=100;var o=(e=>(e.TextInput="text-input",e.Selector="selector",e))(o||{}),s=(e=>(e.Select="select",e.Input="input",e.Scrub="scrub",e.Width="width",e.Height="height",e))(s||{})},692142:(e,r,n)=>{n(411855),n(188507),n(922827),n(629019),n(62935),n(153234),n(617453),n(555074),n(869156),n(318812),n(279702),n(498606),n(218973),n(282263),n(683859),n(564092),n(533573),n(163023),n(538697),n(221537),n(252957)},876618:(e,r,n)=>{n(411855),n(188507),n(939683),n(622422),n(966712),n(848661),n(555074),n(29680),n(611978),n(601607),n(234945),n(279702),n(32067),n(221537)},221537:(e,r,n)=>{n.d(r,{rO:()=>M}),n(411855),n(188507),n(140593);var i=n(340970),a=n(876579),o=n(698558),s=n(174496),l=n(532123),c=n(447501),d=n(902470),u=(n(922827),n(340818));n(520887),n(939683),n(44948),n(794272),n(966712);var m=n(418956),p=n(716034),h=(n(939863),n(973149)),_=n(83909);n(356390),n(617453),n(848661);var g=n(113058);n(555074),n(301462),n(601607),n(234945),n(279702);var f=n(649295),E=n(969756),y=n(528822),b=n(355593),v=n(312077),I=n(792594),T=n(804264),S=n(127027),w=n(904459),A=n(715682),C=n(904595),N=n(396347),L=n(182586),O=n(464397),R=n(317392),P=n(183919),D=n(255032),k=(e=>(e[e.TOP=0]="TOP",e[e.RIGHT=1]="RIGHT",e[e.BOTTOM=2]="BOTTOM",e[e.LEFT=3]="LEFT",e[e.HORIZONTAL=4]="HORIZONTAL",e[e.VERTICAL=5]="VERTICAL",e[e.ALL=6]="ALL",e))(k||{});function M(e){return"SPACE_EVENLY"===e||"SPACE_BETWEEN"===e}function F(e,r,n){return e!==r&&(_.wt.reportAnyPropertyChange([n]),!0)}P.A,R.A,N.A,O.A,D.A,L.A,C.A,i.z,a.M,o.v,s.R,l.K,c.y,d.z,T.A,S.A,y.A,b.A,v.A,I.A,f.A,E.A,A.A,A.A,w.A,w.A;class x extends g.M{getValueForNode(e){return M(e.stackPrimaryAlignItems)?null:e.stackSpacing}setValueForNode(e,r){!M(e.stackPrimaryAlignItems)&&F(e.stackSpacing,r,"stackSpacing")&&u.l7.user("set-stack-spacing",()=>{e.stackSpacing=r})}}new x;class U extends g.M{getValueForNode(e){return e.stackCounterSpacing}setValueForNode(e,r){F(e.stackCounterSpacing,r,"stackCounterSizing")&&u.l7.user("set-stack-counter-spacing",()=>{e.stackSpacing=r})}}new U,h.Lk,h.Lk,(0,m.M2)((0,p.eU)({width:{min:!1,max:!1},height:{min:!1,max:!1}})),(0,m.M2)((0,p.eU)(null)),(0,m.M2)((0,p.eU)(null));var B=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.YES_ONLY_MIN_MAX=2]="YES_ONLY_MIN_MAX",e))(B||{})},12519:(e,r,n)=>{n.d(r,{gm:()=>s,pW:()=>o});var i=n(411855);n(188507),n(922827),n(340818),n(629019),n(163023),n(46481),n(939863),n(356390),n(617453),n(848661),n(555074),n(301462),n(279702),n(498606),n(218973),n(760066),n(952675),n(538697),n(377835),n(893606),n(692142),n(876618),n(221537);var a=n(329652);function o({OriginalComponent:e,...r}){return i.createElement(e,{...r,inputClassName:a.be,iconClassName:a.Kk})}function s({OriginalComponent:e,...r}){return i.createElement(e,{...r,outerClassName:a.kk,pillsContainerClassName:a.j1})}},830002:(e,r,n)=>{n.d(r,{D5:()=>v,Tj:()=>b});var i=n(411855),a=n(188507),o=n(794272),s=n(153234),l=n(236478),c=n(226055),d=n(848661),u=n(498606),m=n(538697),p=n(347495),h=n(994481),_=n(45148),g=n(731262),f=n(759209);let E={format:e=>e||g.xJ};function y(e){let{propertyValueEntries:r,selectedStatesPropertyValues:n,stateGroupPropertyValues:a,onSelectProperty:o,dropdownShown:g,hideErrorsPanel:y,dispatch:b,shouldIndent:v,extended:I}=e,T=(0,c.GS)(),S=i.useRef([]),w=i.useCallback(e=>{if(!S.current)return!1;let r=S.current[e];return!!r&&r.offsetWidth<r.scrollWidth},[]);return i.createElement("div",{className:f.wG},r.length>0&&i.createElement("div",{className:T?void 0:f.em},r.map((r,c)=>{let{property:_,label:y}=r,A=n[_],C=a[_],N=f.Aq;v&&(N=I?f.aM:f.L8);let L=i.createElement("p",{ref:e=>S.current?.push(e),className:T?void 0:N,"data-tooltip-type":u.Ib.TEXT,"data-tooltip":w(c)?_:null},y),O="TOGGLE"===r.type?i.createElement(p.l,{toggleClassName:I?f.lV:f.E3,on:(0,d.hS)(A)?A===r.toggleTokenPair[0]:d.oV,onChange:e=>{o(_,r.toggleTokenPair[e?0:1])},recordingKey:s.Pt(e,`toggle-${_}`),forwardEventsToFullscreen:!0}):i.createElement(m.l6,{id:`states-property-select-${_}-${e.recordingKey}`,className:T?void 0:I?f.mi:f.ZE,property:A,formatter:E,onChange:e=>{o(_,e)},dispatch:b,dropdownShown:g,onMouseDown:()=>b(l.r),recordingKey:s.Pt(e,`select-${_}`)},[...C].map(r=>i.createElement(m.c$,{key:r,value:r,truncateInMiddle:!0,recordingKey:s.Pt(e,`select-${_}-option-${r}`)})));return T?i.createElement(h.cS,{key:_,label:L,input:O}):i.createElement(i.Fragment,{key:_},L,O)})),!y&&i.createElement(_.aq,null))}function b(e,r,n){let i=[{property:r,value:n}];for(let n of e)n.property!==r&&i.push({...n});return i}function v(e,r){let n=r.map(e=>e.toLowerCase()),i=null;if(2===r.length)for(let e of g.NE){let a=n.indexOf(e[0]),o=n.indexOf(e[1]);-1!==a&&-1!==o&&(i=[r[a],r[o]])}return i?{property:e,type:"TOGGLE",label:e,toggleTokenPair:i}:{property:e,type:"SELECT",label:e}}i.memo(function(e){let{sortedProperties:r,stateGroupPropertyValues:n,selectedStatesPropertyValues:s,selectedStates:l,allStates:c,onSelectProperty:d,recordingKey:u,hideErrorsPanel:m,shouldIndent:p,extended:h}=e,_=(0,a.wA)(),{dropdownShown:f,sceneGraphSelection:E}=(0,o.R)(e=>({dropdownShown:e.dropdownShown,sceneGraphSelection:e.mirror.sceneGraphSelection})),[I,T]=i.useState([]);i.useEffect(()=>{T([])},[E]);let S=n?r.map(e=>v(e,n[e])):[];return i.createElement(y,{propertyValueEntries:S,selectedStatesPropertyValues:s,stateGroupPropertyValues:n,onSelectProperty:function(e,r){let n=b(I,e,r),i={};for(let a of l){let{propertyValues:o}=a.stateInfo,s={...o,[e]:r},l=(0,g.kz)(s,n,c);null!==l&&(i[a.symbol.node_id]=l)}d(i),T(n)},dropdownShown:f,recordingKey:u,hideErrorsPanel:m,dispatch:_,shouldIndent:p,extended:h})})},690710:(e,r,n)=>{n.d(r,{D1:()=>g,Hf:()=>u,NA:()=>m,OC:()=>p,_f:()=>_,i$:()=>c,ow:()=>h});var i=n(922827),a=n(97395),o=n(335682),s=n(731262);function l(e){return e.mirror.selectionProperties.stateGroupSelectionInfo}function c(e){return l(e)?.mode}function d(e){let r=l(e);return r&&r.mode!==i.iCO.NONE&&r.mode!==i.iCO.NON_STATE_COMPONENTS?r.stateGroupModel:null}let u=(0,a.Zm)(function(e){return d(e)?.stateGroupError});function m(e){let r=l(e);return r&&r.mode!==i.iCO.NONE&&r.mode!==i.iCO.NON_STATE_COMPONENTS?r.stateGroup:null}let p=(0,a.Zm)(function(e){return d(e)?.propertySortOrder}),h=(0,a.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&e.mode!==i.iCO.NONE&&e.mode!==i.iCO.NON_STATE_COMPONENTS?e.allStates.map(e=>(0,s.dq)(e,r,n)):null),_=(0,a.P8)([l,o.sS,o.XJ],(e,r,n)=>e&&(e.mode===i.iCO.STATE||e.mode===i.iCO.STATE_INSTANCE||e.mode===i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?e.selectedStates.map(e=>(0,s.dq)(e,r,n)):null),g=(0,a.P8)([_,c,d],(e,r,n)=>e&&n&&(r===i.iCO.STATE||r===i.iCO.STATE_INSTANCE||r===i.iCO.STATE_OR_STATE_INSTANCE_SUBLAYER)?(0,s.m4)(e,n.propertySortOrder||[]):null)},731262:(e,r,n)=>{n.d(r,{A:()=>E,Jj:()=>b,NE:()=>N,O4:()=>L,QV:()=>I,bk:()=>w,dq:()=>A,kz:()=>v,m4:()=>f,pg:()=>y,q1:()=>S,uL:()=>C,xJ:()=>_,zb:()=>T,zh:()=>g});var i=n(411855);n(188507);var a=n(922827),o=n(258214),s=n(302245),l=n(776250),c=n(83909),d=n(356390),u=n(843495),m=n(848661),p=n(335682),h=n(416095);let _="\u2014";function g(e,r){return Object.keys(e).sort((e,n)=>r.indexOf(e)-r.indexOf(n)).map(r=>`${r}=${e[r]}`).join(", ")}function f(e,r,n){let i={};for(let a of e){if(void 0!==a.actionIndexPath&&void 0!==n&&a.actionIndexPath.some((e,r)=>e!==n[r]))continue;let{propertyValues:e}=a.stateInfo;if(e)for(let n of r)n in i&&i[n]!==e[n]?i[n]=i[n]&&e[n]?m.oV:"":i[n]=e[n]||""}return i}function E(e){let r=a.bwI.NONE;for(let n of e)n.stateInfo.stateError&&n.stateInfo.stateError>r&&(r=n.stateInfo.stateError);return r}function y(e,r){return e.filter(e=>e.stateInfo.stateError===r)}function b(e,r,n){let i=[],a=0;for(let e of n){let n=e.propertyValues;if(!n)continue;let o=0;for(let e of r){if(e.value!==n[e.property])break;o++}o>a?(a=o,i=[e]):o===a&&i.push(e)}if(0===a)return null;let o=null,s=1/0;for(let r of i){let n=function(e,r){let n=0;for(let i in e)e[i]!==m.oV&&e[i]!==r[i]&&n++;return n}(e,r.propertyValues);n<s&&(s=n,o=r)}return o}function v(e,r,n){let i=[],a=0;for(let e of n){let n=e.stateInfo.propertyValues;if(!n)continue;let o=0;for(let e of r){if(e.value!==n[e.property])break;o++}o>a?(a=o,i=[e]):o===a&&i.push(e)}if(0===a)return null;let o=null,s=1/0;for(let r of i){let n=function(e,r){let n=0;for(let i in e)e[i]!==m.oV&&e[i]!==r[i]&&n++;return n}(e,r.stateInfo.propertyValues);n<s&&(s=n,o=r)}return o}function I(e){return e.replace(/[,=]/g,"").trim()}function T(e,r,n){let i=a.glU.getStateGroupAnalyticsInfo(r);(0,l.sx)(e,{...i,...n||{}})}function S(e,r,n,i){if(""===(r=I(r))||e===r||-1===i.indexOf(e))return;let a=[...i];a[a.indexOf(e)]=r,n.forEach(n=>{let i=n.stateInfo.propertyValues;i&&(i={...i})[e]&&(i[r]=i[e],delete i[e],e!==r&&c.wt.reportEditAction("rename-property"),u.i(n.symbol.node_id,g(i,a)))}),d.Y5.commit()}function w(e,r,n,i){T("Deleting Property from Variant Component",i),r.forEach(r=>{let i=r.stateInfo.propertyValues;if(!i)return;for(let r of(i={...i},e))i[r]&&delete i[r];let a=g(i,n);""===a&&(a="Property 1=Default"),c.wt.reportEditAction("delete-prop"),u.i(r.symbol.node_id,a)}),d.Y5.commit()}function A(e,r,n){return{stateInfo:e.stateInfo,symbol:(0,h.i_)(null,null,e.symbol,r||"",n||(0,o.l)("")),actionIndexPath:function(e){if(!e)return[];let r=e.match(/\{(.*?)\}/);return!r||r.length<2?[]:r[1].trim().split(",").map(e=>parseFloat(e.trim()))}(e.actionIndexPath)}}i.createContext(null);let C=(0,s.Mz)([e=>e.mirror.selectionProperties.stateGroupSelectionInfo,p.sS,p.XJ],function(e,r,n,i){if(!e)return null;let o=e.mode;if(o===a.iCO.NONE)return null;if(o===a.iCO.NON_STATE_COMPONENTS)return{mode:o,numSelectedNonStateComponents:e.numSelectedNonStateComponents};let s=e.stateGroup,l=e.stateGroupModel,c=l?.propertySortOrder?.length===1,d=e.allStates.map(e=>A(e,r,n));if(o===a.iCO.STATE_GROUP)return{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c};let u=e.selectedStates.map(e=>A(e,r,n)),m=f(u,l.propertySortOrder||[],i);return a.iCO.STATE,{mode:o,stateGroup:s,stateGroupModel:l,allStates:d,modelIsOneDimensional:c,selectedStates:u,selectedStatesPropertyValues:m}}),N=[["yes","no"],["true","false"],["on","off"]],L=N.reduce((e,r)=>e.concat(r),[])},376503:(e,r,n)=>{n.d(r,{$6:()=>th,EN:()=>tu,NC:()=>tc,OH:()=>td,SO:()=>tl,Th:()=>tp,_2:()=>ty,mP:()=>tm});var i=n(411855),a=n(188507),o=n(720245),s=n(902237),l=n(343887),c=n(978783),d=n(921738),u=n(75819),m=n(319806),p=n(731369),h=n(900729),_=n(610155),g=n(245952),f=n(193753),E=n(706562),y=n(167),b=n(131449),v=n(586174),I=n(26172),T=n(339467),S=n(566506),w=n(871027),A=n(353344),C=n(885895),N=n(794105),L=n(443908),O=n(703828),R=n(459123),P=n(892535),D=n(862885),k=n(139689),M=n(922827),F=n(91408),x=n(601395),U=n(153234),B=n(572206),V=n(46481),G=n(348425),H=n(736242),K=n(154254),W=n(939863),$=n(293017),Y=n(31043),z=n(297336),j=n(226055),q=n(356390),Z=n(848661),X=n(29680),J=n(100197),Q=n(279702),ee=n(498606),et=n(198868),er=n(218973),en=n(922358),ei=n(205135),ea=n(7959),eo=n(538697),es=n(746806),el=n(837746),ec=n(383173),ed=n(106524),eu=n(7479),em=n(313876),ep=n(613887),eh=n(568154),e_=n(810381),eg=n(410671),ef=n(796476),eE=n(625536),ey=n(761285),eb=n(430712),ev=n(920003),eI=n(110111),eT=n(134316),eS=n(800467),ew=n(234496),eA=n(222396),eC=n(144983),eN=n(237419),eL=n(824356),eO=n(316179),eR=n(900897),eP=n(260934),eD=n(729920),ek=n(161349),eM=n(748839),eF=n(467172),ex=n(155450),eU=n(706449),eB=n(204931),eV=n(328176),eG=n(340598),eH=n(625819),eK=n(660984),eW=n(641594),e$=n(773248),eY=n(710011),ez=n(98221),ej=n(15305),eq=n(822834),eZ=n(494491),eX=n(554473),eJ=n(866014),eQ=n(448760),e0=n(256735),e1=n(595324),e2=n(511219),e5=n(123262),e3=n(151809),e6=n(20918),e8=n(606409),e4=n(292030),e9=n(41025),e7=n(240078);let te=(0,F.hG)(el.hhC);class tt extends eo.l6{}class tr extends eo.c${}class tn{constructor(){this.format=e=>{switch(e){case"LINE":return(0,W.t)("fullscreen.properties_panel.stroke_settings.solid");case"SIMPLE_DASH":return(0,W.t)("fullscreen.properties_panel.stroke_settings.simple_dash");case"CUSTOM_DASH":return(0,W.t)("fullscreen.properties_panel.stroke_settings.custom");default:return""}}}}function ti(e){return e.dashCap?i.createElement("span",{className:e.className},i.createElement(o.bL,{value:(0,Z.hS)(e.dashCap)?e.dashCap:void 0,onChange:e.onChange,legend:i.createElement(s.q,null,(0,W.t)("fullscreen.properties_panel.stroke_settings.dash_cap")),recordingKey:e.recordingKey},i.createElement(o.c$,{icon:i.createElement(V.U,{svg:eI.A,fallbackSvg:eT.A},i.createElement(u.Q,null)),value:"NONE","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.none")}),i.createElement(o.c$,{icon:i.createElement(V.U,{svg:eA.A,fallbackSvg:eC.A},i.createElement(m.J,null)),value:"SQUARE","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.square")}),i.createElement(o.c$,{icon:i.createElement(V.U,{svg:eS.A,fallbackSvg:ew.A},i.createElement(p.E,null)),value:"ROUND","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.round")}))):null}function ta(e){return e?(0,Z.gl)(e)?Z.oV:0===e.length?"LINE":2!==e.length?"CUSTOM_DASH":0===e[0]&&0===e[1]?"LINE":"SIMPLE_DASH":"LINE"}function to(e){if(e){if((0,Z.gl)(e))return Z.oV;if(2===e.length)return e[0]}}function ts(e){let r=(0,a.wA)(),n=(0,X.ax)(),l=new tn,{strokePanelMode:u,maxStrokeWeight:m,dashPattern:p,connectorLineStyle:g}=e,[f,E]=i.useState(ta(p));i.useEffect(()=>{E(ta(p))},[p]);let[y,b]=i.useState(!0),[v,I]=i.useState(),T=to(p),S=function(e){if(e){if((0,Z.gl)(e))return Z.oV;if(2===e.length)return e[1]}}(p),w=()=>{if(!p||(0,Z.gl)(p)||2!==p.length)return;b(!0);let r=p[0];e.onChange({dashPattern:[r,r]})},A=i.useRef("NONE"),C=i.createRef(),N=i.createRef(),L=i.createRef();i.useEffect(()=>{if("NONE"!==A.current){if("FOCUS_CURRENT_EVENT"===A.current)switch(f){case"SIMPLE_DASH":N.current?.focus(),N.current?.select();break;case"CUSTOM_DASH":C.current?.focus(),C.current?.select()}"FOCUS_NEXT_EVENT"===A.current?A.current="FOCUS_CURRENT_EVENT":A.current="NONE"}},[p,f,N,C]);let O=function(e){if((0,Z.gl)(e))return Z.oV;switch(e){case"NONE":case"ROUND":case"SQUARE":return e;default:return}}(e.dashCap),R=u===M.yTM.VERTEX||u===M.yTM.ENDPOINT,P=(0,a.d4)(e=>e.mirror.selectionProperties.numSelectedByType),D=(0,z.vx)(P,"CONNECTOR"),k=v??f;return i.createElement("div",{className:ec.wO},D&&void 0!==g&&i.createElement(ea.fI,null,i.createElement(ea.JU,{className:D?ec.Tm:ec.Uk},(0,W.tx)("fullscreen.properties_panel.stroke_settings.path_style")),i.createElement("span",{className:ec.rI},i.createElement(o.bL,{value:(0,Z.hS)(g)?g:void 0,onChange:r=>{e.onChange({connectorLineStyle:r})},legend:i.createElement(s.q,null,(0,W.t)("fullscreen.properties_panel.stroke_settings.path_style")),recordingKey:U.Pt(e,"pathStyle")},i.createElement(o.c$,{icon:i.createElement(V.U,{svg:e7.A},i.createElement(h.h,null)),value:"STRAIGHT","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.straight")}),i.createElement(o.c$,{icon:i.createElement(V.U,{svg:e4.A,fallbackSvg:e9.A},i.createElement(_.S,null)),value:"ELBOWED","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.elbowed")})))),i.createElement(ea.fI,null,i.createElement(ea.JU,{className:R?ec.VB:ec._f},(0,W.tx)("fullscreen.properties_panel.stroke_settings.stroke_style")),i.createElement(tt,{id:"line-style-select",className:ec.au,property:f,formatter:l,onChange:(r,n=Q.zk.YES)=>{A.current="FOCUS_NEXT_EVENT";let i=2*(m??1);switch(r){case"LINE":e.onChange({dashPattern:[]},n);break;case"SIMPLE_DASH":e.onChange({dashPattern:[i,i]},n);break;case"CUSTOM_DASH":e.onChange({dashPattern:[i,2*i,3*i,4*i]},n)}},dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:120,recordingKey:U.Pt(e,"strokeStyle"),icon:function(e){switch(e){case"LINE":return i.createElement(V.U,{svg:e6.A,fallbackSvg:e8.A},i.createElement(c.t,null));case"SIMPLE_DASH":return i.createElement(V.U,{svg:e5.A,fallbackSvg:e3.A},i.createElement(d.S,null));default:return}}(f),iconClassName:R?ec.uX:ec.eD,disabled:R,onPreview:e=>{I(e)},enablePreview:n},i.createElement(tr,{additionalStylesClassName:ec.Z,value:"LINE",recordingKey:U.Pt(e,"LINE")},i.createElement("span",{className:ec.Z},i.createElement(V.U,{className:ec.yW,svg:e6.A,fallbackSvg:e8.A},i.createElement(c.t,null)),i.createElement(H.o,{text:l.format("LINE")}))),i.createElement(tr,{value:"SIMPLE_DASH",recordingKey:U.Pt(e,"SIMPLE_DASH"),additionalStylesClassName:ec.Z},i.createElement("span",{className:ec.Z},i.createElement(V.U,{svg:e5.A,fallbackSvg:e3.A,className:ec.yW},i.createElement(d.S,null)),i.createElement(H.o,{text:l.format("SIMPLE_DASH")}))),i.createElement(eo.sK,null),i.createElement(tr,{value:"CUSTOM_DASH",recordingKey:U.Pt(e,"CUSTOM_DASH")}))),("SIMPLE_DASH"===k||k===Z.oV)&&i.createElement(i.Fragment,null,i.createElement(ea.fI,null,i.createElement(ea.JU,{className:R?ec.S_:ec.bP},(0,W.tx)("fullscreen.properties_panel.stroke_settings.dash")),i.createElement(er.$j,{className:ec.T7,min:0,value:to(p),onValueChange:r=>{let n;if(A.current="NONE",!p||(0,Z.gl)(p)||2!==p.length)n=[r,r];else{let e=p[0],i=p[1];n=y&&e===i?[r,r]:[r,i]}e.onChange({dashPattern:n})},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:U.Pt(e,"dash"),"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,W.t)("fullscreen.properties_panel.stroke_settings.dash"),tooltipForScreenReadersOnly:!0,forwardedRef:N,disabled:R})),i.createElement(ea.fI,null,i.createElement(ea.JU,{className:R?ec.qF:ec.Jd},(0,W.tx)("fullscreen.properties_panel.stroke_settings.gap")),i.createElement(er.$j,{className:ec.rQ,min:0,value:void 0!==S&&(0,Z.hS)(S)&&y&&T===S?void 0:S,placeholder:void 0!==S&&(0,Z.hS)(S)&&y&&T===S?String(parseFloat(S.toFixed(2))):void 0,onValueChange:r=>{let n;A.current="NONE",b(!1),n=!p||(0,Z.gl)(p)||2!==p.length?[r,r]:[p[0],r],e.onChange({dashPattern:n})},onBlur:e=>{L.current?.value===""&&w()},dispatch:r,smallNudgeAmount:1,bigNudgeAmount:10,recordingKey:U.Pt(e,"gap"),"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,W.t)("fullscreen.properties_panel.stroke_settings.gap"),tooltipForScreenReadersOnly:!0,forwardedRef:L,disabled:R}))),"CUSTOM_DASH"===k&&i.createElement(ea.fI,null,i.createElement(ea.JU,{className:R?ec.g5:ec.Rm},(0,W.tx)("fullscreen.properties_panel.stroke_settings.dashes")),i.createElement(ei.nA,{className:ec.Ng,forwardedRef:C,formatter:Y.B,property:e.dashPattern,onChange:r=>{e.onChange({dashPattern:r})},placeholder:(0,W.t)("fullscreen.properties_panel.stroke_settings.dash_gap"),recordingKey:U.Pt(e,"dashes"),disabled:R})),(u===M.yTM.VECTOR||u===M.yTM.LINE)&&("SIMPLE_DASH"===k||"CUSTOM_DASH"===k)&&void 0!==O&&i.createElement(ea.fI,null,i.createElement(ea.JU,{className:ec.$E},(0,W.tx)("fullscreen.properties_panel.stroke_settings.dash_cap")),i.createElement(ti,{className:ec.pl,dashCap:O,onChange:r=>{e.onChange({dashCap:r})},recordingKey:U.Pt(e,"dashCap")})))}ts.displayName="StrokeLineStyleSettings";class tl extends eo.l6{}class tc extends eo.c${}class td{constructor(){this.format=e=>{switch(e){case"NONE":return(0,W.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,W.t)("fullscreen.properties_panel.stroke_settings.line_arrow");case"ARROW_EQUILATERAL":return(0,W.t)("fullscreen.properties_panel.stroke_settings.triangle_arrow");case"TRIANGLE_FILLED":return(0,W.t)("fullscreen.properties_panel.stroke_settings.reversed_triangle");case"CIRCLE_FILLED":return(0,W.t)("fullscreen.properties_panel.stroke_settings.circle_arrow");case"DIAMOND_FILLED":return(0,W.t)("fullscreen.properties_panel.stroke_settings.diamond_arrow");case"ROUND":return(0,W.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,W.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}}}let tu={format(e){switch(e){case"NONE":return(0,W.t)("fullscreen.properties_panel.stroke_settings.none");case"ARROW_LINES":return(0,W.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_line");case"ARROW_EQUILATERAL":return(0,W.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_triangle");case"TRIANGLE_FILLED":return(0,W.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_reversed");case"CIRCLE_FILLED":return(0,W.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_circle");case"DIAMOND_FILLED":return(0,W.t)("fullscreen.properties_panel.section_stroke.dropdown_startEndPoint.value_diamond");case"ROUND":return(0,W.t)("fullscreen.properties_panel.stroke_settings.round");case"SQUARE":return(0,W.t)("fullscreen.properties_panel.stroke_settings.square");case"HIGHLIGHT":case"WASHI_TAPE_1":case"WASHI_TAPE_2":case"WASHI_TAPE_3":case"WASHI_TAPE_4":case"WASHI_TAPE_5":case"WASHI_TAPE_6":return""}}},tm=["NONE","ARROW_LINES","ARROW_EQUILATERAL","TRIANGLE_FILLED","CIRCLE_FILLED","DIAMOND_FILLED"],tp=["ROUND","SQUARE"],th=["NONE","ROUND","SQUARE"];function t_(e,r){switch(e){case"NONE":return"default"===r?eH.A:eK.A;case"ARROW_LINES":return"default"===r?eB.A:eV.A;case"ARROW_EQUILATERAL":return"default"===r?eX.A:eJ.A;case"TRIANGLE_FILLED":return"default"===r?e$.A:eY.A;case"DIAMOND_FILLED":return"default"===r?eM.A:eF.A;case"CIRCLE_FILLED":return"default"===r?eR.A:eP.A;case"ROUND":return eN.A;default:return eL.A}}function tg(e){let r=(0,a.wA)(),n=new td,o=e.strokePanelMode===M.yTM.ENDPOINT,s=1===e.strokePanelTerminalPointCount||o;return i.createElement("div",{className:ec.wO},i.createElement(ea.fI,{"data-testid":"end-point-settings-row"},i.createElement(ea.JU,{disabled:e.disabled,className:e.disabled?ec.RR:ec.mZ},s?(0,W.t)("fullscreen.properties_panel.stroke_settings.end_point"):(0,W.t)("fullscreen.properties_panel.stroke_settings.end_points")),i.createElement(tl,{id:"end-point-select",className:ec.yc,property:e.endPoint,formatter:n,onChange:r=>{e.onChange({terminalCap:r}),e.onChange({strokeCap:r})},blurOnChange:!0,dispatch:r,dropdownShown:e.dropdownShown,dropdownWidth:200,recordingKey:e.recordingKey,icon:function(e,r){switch(e){case"NONE":default:return;case"ARROW_LINES":return r?i.createElement(V.U,{svg:eU.A,fallbackSvg:eG.A},i.createElement(g.N,null)):i.createElement(V.U,{svg:eh.A,fallbackSvg:e_.A},i.createElement(f.U,null));case"ARROW_EQUILATERAL":return r?i.createElement(V.U,{svg:eZ.A,fallbackSvg:eQ.A},i.createElement(E.P,null)):i.createElement(V.U,{svg:eb.A,fallbackSvg:ev.A},i.createElement(y.q,null));case"TRIANGLE_FILLED":return r?i.createElement(V.U,{svg:eW.A,fallbackSvg:ez.A},i.createElement(b.N,null)):i.createElement(V.U,{svg:eg.A,fallbackSvg:ef.A},i.createElement(v.k,null));case"DIAMOND_FILLED":return r?i.createElement(V.U,{svg:ek.A,fallbackSvg:ex.A},i.createElement(I.g,null)):i.createElement(V.U,{svg:em.A,fallbackSvg:ep.A},i.createElement(T.x,null));case"CIRCLE_FILLED":return r?i.createElement(V.U,{svg:eO.A,fallbackSvg:eD.A},i.createElement(S.c,null)):i.createElement(V.U,{svg:ed.A,fallbackSvg:eu.A},i.createElement(w.J,null));case"ROUND":return r?i.createElement(V.U,{svg:ej.A},i.createElement(A.M,null)):i.createElement(V.U,{svg:eE.A},i.createElement(C.B,null));case"SQUARE":return r?i.createElement(V.U,{svg:eq.A},i.createElement(N.Z,null)):i.createElement(V.U,{svg:ey.A},i.createElement(L.C,null))}}(e.endPoint,s),iconClassName:e.disabled?ec.qv:ec.O1,dropdownOverride:(0,Z.gl)(e.endPoint)?void 0:"NONE"===e.endPoint?(0,W.t)("fullscreen.properties_panel.stroke_settings.none"):" ",disabled:e.disabled},tm.map(r=>i.createElement(tc,{key:r,value:r,recordingKey:U.Pt(e,r)},i.createElement("span",{className:ec.Z6},i.createElement(G.t,{className:ec.yW,svg:t_(r,"default"),fallbackSvg:t_(r,"fallback")}),i.createElement(H.o,{text:n.format(r)})))),i.createElement(eo.sK,null),tp.map(r=>i.createElement(tc,{key:r,value:r,recordingKey:U.Pt(e,r)},i.createElement("span",{className:ec.Z6},i.createElement(G.t,{className:ec.yW,svg:t_(r,"default"),fallbackSvg:t_(r,"fallback")}),i.createElement(H.o,{text:n.format(r)})))))))}function tf(e){let r=(0,a.wA)();return i.createElement("div",{className:ec.wO},i.createElement(ea.fI,null,i.createElement(ea.JU,{className:e.disabled?ec.u0:ec.PF},(0,W.tx)("fullscreen.properties_panel.stroke_settings.join"))," ",i.createElement("span",{className:ec.fj},i.createElement(o.bL,{value:e.disabled||(0,Z.gl)(e.strokeJoin)?void 0:e.strokeJoin,onChange:r=>{e.onChange({strokeJoin:r})},legend:i.createElement(s.q,null,(0,W.t)("fullscreen.properties_panel.stroke_settings.join")),readonly:e.disabled,recordingKey:e.recordingKey},i.createElement(o.c$,{icon:i.createElement(V.U,{svg:e1.A},i.createElement(O.H,null)),value:"MITER","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.miter")}),i.createElement(o.c$,{icon:i.createElement(V.U,{svg:e0.A},i.createElement(R.m,null)),value:"BEVEL","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.bevel")}),i.createElement(o.c$,{icon:i.createElement(V.U,{svg:e2.A},i.createElement(P.m,null)),value:"ROUND","aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.round_join")})))),!e.disabled&&"MITER"===e.strokeJoin&&i.createElement(ea.fI,null,i.createElement(ea.JU,{className:e.disabled?ec.NW:ec.kF},(0,W.tx)("fullscreen.properties_panel.stroke_settings.miter_angle")),i.createElement(er.M4,{className:ec.Cj,disabled:e.disabled||"MITER"!==e.strokeJoin,value:e.miterLimitAngle,onValueChange:r=>{e.onChange({miterLimitAngle:r})},recordingKey:U.Pt(e,"miterAngle"),tooltipForScreenReadersOnly:!0,"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,W.t)("fullscreen.properties_panel.stroke_settings.miter_angle"),dispatch:r})))}function tE(){let[e,r]=i.useState(et.D().currentPage.selection[0]?.getSharedPluginData("strokedynamics","profile")||"rectangular"),n=e=>{r(e),"brush"===e?(en.F2.focusCustomCanvasFocusElement(),q.Y5.triggerActionInUserEditScope("toggle-brush-target-mode")):(M.Ez5?.inBrushTargetMode().set(!1),(0,et.D)().currentPage.selection.forEach(r=>{r.setSharedPluginData("strokedynamics","profile",e)}))},a=r=>e===r?ec.ou:ec.ht;return i.createElement("div",null,i.createElement("div",{className:ec.wO},i.createElement("div",{className:K.cx.flex.justifyBetween.wFull.pl16.pr8.borderBox.$},i.createElement(ea.JU,{className:ec.PF},(0,W.t)("fullscreen.properties_panel.stroke_settings.width_profile")),i.createElement("div",{className:K.cx.flex.$},i.createElement(l.K,{onClick:n.bind(n,"brush"),"aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.use_node_as_brush")},i.createElement(D.g,{className:a("brush")})),i.createElement(l.K,{onClick:()=>{M.Ez5?.inBrushTargetMode().set(!1),(0,et.D)().currentPage.selection.forEach(e=>{e.setSharedPluginData("strokedynamics","brush","")})},"aria-label":(0,W.t)("fullscreen.properties_panel.stroke_settings.use_node_as_brush")},i.createElement(k.A,null)))),i.createElement(ea.fI,null,i.createElement("svg",{className:ec.G2,viewBox:"0 0 270 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{onClick:n.bind(n,"rectangular"),x:"0.958405",y:"0.989014",width:"268.592",height:"20",className:a("rectangular")}))),i.createElement(ea.fI,null,i.createElement("svg",{className:ec.G2,viewBox:"0 0 269 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{onClick:n.bind(n,"taper-point"),d:"M268.853 8.02625C268.853 8.02625 208.706 15.9937 134.512 15.9937C60.3179 15.9937 0.1716 8.02625 0.1716 8.02625C0.1716 8.02625 60.3179 0.0587769 134.512 0.0587769C208.706 0.0587769 268.853 8.02625 268.853 8.02625Z",className:a("taper-point")}))),i.createElement(ea.fI,null,i.createElement("svg",{className:ec.G2,viewBox:"0 0 271 27",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{onClick:n.bind(n,"taper-triangle"),d:"M0.958405 0.90155L270.853 13.6943L0.958405 26.487V0.90155Z",className:a("taper-triangle")}))),i.createElement(ea.fI,null,i.createElement("svg",{className:ec.G2,viewBox:"0 0 271 21",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{onClick:n.bind(n,"taper-bubble"),d:"M0.924316 10.1991C0.924316 7.43763 3.16842 5.37363 5.92432 5.19906C107.314 -1.22365 164.161 -1.24854 265.55 5.19908C268.306 5.37433 270.55 7.43766 270.55 10.1991C270.55 12.9605 268.304 14.994 265.55 15.1991C164.161 22.7512 107.314 22.722 5.92432 15.1991C3.17046 14.9947 0.924315 12.9605 0.924316 10.1991Z",className:a("taper-bubble")})))))}function ty(e){let r=(0,a.wA)(),n=(0,J.J2)(M.Ez5.propertiesPanelState().isVertexSelectionAndHasEndpoints),o=(0,j.GS)();if(!e.pickerShown)return null;let s=new B.Mi(e.pickerShown.initialX,e.pickerShown.initialY),{strokePanelMode:l,strokePanelTerminalPointCount:c,numSelectedByType:d,arcRadius:u,arcSweep:m}=e,p=l===M.yTM.ENDPOINT||l===M.yTM.VECTOR&&c>0||n,h=l!==M.yTM.PENCIL,_=l===M.yTM.VECTOR||l===M.yTM.VERTEX,g=l===M.yTM.VECTOR&&0===c,f=g&&d&&1===Object.keys(d).length&&d.ELLIPSE&&1===u&&0!==m,E=e.strokePanelMode===M.yTM.VECTOR&&"LINE"!==ta(e.dashPattern)&&e.terminalCap?e.terminalCap:e.strokeCap;return i.createElement(es.vx,{title:o?(0,W.t)("fullscreen.properties_panel.stroke_settings"):(0,W.t)("fullscreen.properties_panel.stroke_settings.advanced_stroke"),initialPosition:s,headerSize:"small",onClose:()=>{r($.XE()),q.Y5.deselectProperty()},recordingKey:U.Pt(e,"modal"),initialWidth:te},i.createElement(ts,{onChange:e.onChange,strokePanelMode:e.strokePanelMode,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,connectorLineStyle:e.connectorLineStyle,dashPattern:e.dashPattern,dashCap:e.dashCap,maxStrokeWeight:e.maxStrokeWeight,strokeCap:e.strokeCap,terminalCap:e.terminalCap,dropdownShown:e.dropdownShown,recordingKey:U.Pt(e.recordingKey,"lineStyle")}),p&&i.createElement(tg,{onChange:e.onChange,endPoint:E,dropdownShown:e.dropdownShown,strokePanelTerminalPointCount:e.strokePanelTerminalPointCount,disabled:g&&!f&&!n,recordingKey:U.Pt(e.recordingKey,"endPoint"),strokePanelMode:l}),h&&i.createElement(tf,{onChange:e.onChange,strokeJoin:e.strokeJoin,miterLimitAngle:e.miterLimitAngle,disabled:!_,recordingKey:U.Pt(e.recordingKey,"join")}),(0,x.m)().ce_il_strokes&&i.createElement(tE,null))}tg.displayName="EndPointSettings",tf.displayName="StrokeJoinAndMiterAngleSettings",tE.displayName="StrokeDynamicsSettings"},238093:(e,r,n)=>{n.d(r,{A8:()=>y,OS:()=>g,WH:()=>I,bi:()=>v,dd:()=>E,yT:()=>T,zb:()=>f});var i=n(411855),a=n(188507),o=n(177131);n(922827);var s=n(572304),l=n(966712),c=n(154483),d=n(848661),u=n(29680),m=n(335682),p=n(622896),h=n(241691),_=n(173454);function g(e){return`styles-picker-${e}`}function f(e){return e.stylePickerShown.isShown&&e.stylePickerShown.id===g(e.inheritStyleKeyField)?e.stylePickerShown:null}function E(e){return e&&(0,s.fn)(e.guid)}function y(e){let r=(0,d.E7)(e);return r&&r!==o.n3.INVALID}function b({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:i}){let a=(0,d.E7)(n);if(!a)return null;let l=(0,d.E7)(i);if(!l)return null;let u=(0,s.dI)(l.guid),m=Object.values(e.local.styles).find(e=>e.node_id===u);if(m)return m.is_soft_deleted?null:m;let p=r.get(u);return p?{key:a,style_type:p.styleType,type:_.PW.STYLE,node_id:u,name:p.name,isLocal:!1,content_hash:p.styleVersionHash??void 0,userFacingVersion:(0,o.IA)(p.userFacingVersion),file_key:"",file_key_source:c.Ps.LOCAL_FILE,library_key:p.sourceLibraryKey}:null}function v({library:e,sceneGraph:r,inheritStyleKey:n,inheritStyleID:i}){if((0,l.kc)().ds_zombie_styles_fixes)return b({library:e,sceneGraph:r,inheritStyleID:i,inheritStyleKey:n});if(!y(n))return null;let a=(0,d.E7)(n);if(!a)return null;let o=Object.values(e.local.styles).find(e=>e.key===a);if(o&&!o.is_soft_deleted)return o;let s=(0,h.b)({library:e},a,(0,d.E7)(i));return s?.status==="loaded"?s.data:null}function I(e,r,n){let o=(0,a.d4)(e=>e.library),s=(0,u.eY)(),c=(0,p.bO)(),d=(0,m.tS)(),h=b({library:o,sceneGraph:s,inheritStyleKey:e,inheritStyleID:r}),_=i.useMemo(()=>{if(!e)return null;let i=v({library:o,inheritStyleKey:e,inheritStyleID:r,sceneGraph:s});if(i)return i;for(let r of Object.values(c))if(r?.status==="loaded"&&r.data.fileKey!==d){for(let i of(0,p.z5)(r,n))if(i.key===e)return i}return null},[r,e,c,o,d,s,n]);return(0,l.kc)().ds_zombie_styles_fixes?h:_}function T(e){return{dropdownShown:e.dropdownShown,openFile:e.openFile,library:e.library,modalShown:e.modalShown,pickerShown:e.pickerShown,sceneGraphSelection:e.sceneGraphSelection,selectedStyleProperties:e.selectedStyleProperties,stylePickerShown:e.stylePickerShown,hasMissingFont:e.hasMissingFont,hasMixedProperties:e.hasMixedProperties||!1,inheritStyleKey:e.inheritStyleKey,inheritStyleKeyField:e.inheritStyleKeyField,inheritStyleID:e.inheritStyleID,stylePickerListLayout:e.stylePickerListLayout,styleType:e.styleType,onToggleListLayout:e.onToggleListLayout,dispatch:e.dispatch}}},783908:(e,r,n)=>{n.d(r,{GC:()=>m,bf:()=>p,hg:()=>u});var i=n(411855),a=n(188507),o=n(838516),s=n(452246),l=n(378905),c=n(318812),d=n(575722);function u(e,r){let n=(0,a.wA)(),l=i.useMemo(()=>(0,o.s)(n,200),[n]);i.useEffect(()=>{r?.skip||l(s.GT({styleType:e}))})}function m(e){let r=(0,c.Um)();return i.useMemo(()=>r&&r.type===d.vG&&r.data.style.style_type===e?r:null,[r,e])}function p(e){let r=(0,a.d4)(e=>e.stylePreviewShown);return i.useMemo(()=>r.isShown&&!r.isCreating&&r.style.node_id===e.node_id&&(0,l.EF)(r.style,e),[r,e])}},377835:(e,r,n)=>{n.d(r,{t:()=>o});var i=n(411855),a=n(433501);function o({providedClassName:e,OriginalComponent:r}){return i.createElement("div",{className:a.F},i.createElement(r,{providedClassName:e}))}},784940:(e,r,n)=>{n.d(r,{Xs:()=>a}),n(411855),n(188507),n(922827),n(340818),n(776250),n(966712),n(498750),n(801161),n(798099),n(297336);var i=n(617453);function a(){let{smallNudgeAmount:e,bigNudgeAmount:r}=(0,i.sT)();return{smallNudgeAmount:e,bigNudgeAmount:r,wheelMultiplier:e,scrubMultiplier:e}}n(848661),n(113058),n(555074),n(100197),n(498606),n(469572)},998905:(e,r,n)=>{n.d(r,{AF:()=>h}),n(411855);var i=n(106075),a=n(930946),o=n(681625),s=n(315936);n(794272);var l=n(939863);n(356390),n(848661),n(279702);var c=n(691039),d=n(728314),u=n(229351),m=n(736002),p=(e=>(e[e.TOP_LEFT=0]="TOP_LEFT",e[e.BOTTOM_LEFT=1]="BOTTOM_LEFT",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.BOTTOM_RIGHT=3]="BOTTOM_RIGHT",e))(p||{});function h(e){return e.rectangleCornerRadiiIndependent?{topLeft:e.rectangleTopLeftCornerRadius,topRight:e.rectangleTopRightCornerRadius,bottomRight:e.rectangleBottomRightCornerRadius,bottomLeft:e.rectangleBottomLeftCornerRadius}:{topLeft:e.cornerRadius??e.rectangleTopLeftCornerRadius,topRight:e.cornerRadius??e.rectangleTopRightCornerRadius,bottomRight:e.cornerRadius??e.rectangleBottomRightCornerRadius,bottomLeft:e.cornerRadius??e.rectangleBottomLeftCornerRadius}}u.A,i.a,m.A,a.$,c.A,o.w,d.A,s.t},937348:(e,r,n)=>{n.d(r,{DJ:()=>R,XL:()=>P});var i=n(411855),a=n(140593),o=n(720245),s=n(902237),l=n(149510),c=n(389054),d=n(738865),u=n(245116),m=n(815314),p=n(410276),h=n(922827),_=n(776250),g=n(966712),f=n(153234),E=n(520581),y=n(46481),b=n(939863),v=n(356390),I=n(848661),T=n(555074),S=n(100197),w=n(7959);n(276660);var A=n(939791),C=n(602661),N=n(200482),L=n(720632),O=n(803612);function R(e){let r=i.createElement(E.E,{name:"text_align_horizontal"},i.createElement(D,{recordingKey:f.Pt(e.recordingKey,"textAlignHorizontal")})),n=i.createElement(E.E,{name:"text_align_vertical"},i.createElement(k,{textAlignVertical:e.textAlignVertical||I.oV,recordingKey:f.Pt(e.recordingKey,"textAlignVertical")}));return e.isUI3?i.createElement(A.fn,{ref:e.alignmentRowRef,leftLabel:(0,b.tx)("properties.label.alignment"),leftInput:r,rightLabel:null,rightInput:n,icon:e.iconButton}):i.createElement(w.fI,{className:C.lY,ref:e.alignmentRowRef,"data-onboarding-key":"type-panel-alignment-row"},i.createElement("div",{className:C.Xh},r),i.createElement("div",{className:C.qf},n),e.iconButton)}var P=(e=>(e.LEFT="text-align-left",e.CENTER="text-align-center",e.RIGHT="text-align-right",e.JUSTIFIED="text-align-justified",e))(P||{});function D({recordingKey:e,loggingCallback:r}){let n=(0,T.kl)("textAlignHorizontal")||I.oV,u=(0,I._W)((0,T.kl)("missingFont"),!1),m=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_HORIZONTAL);return(0,a.KF)(!!(n||m),"TypePanel missing textAlignHorizontal"),i.createElement(o.bL,{legend:i.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_horizontal")),value:n,onChange:e=>{r&&r(),v.Y5.updateSelectionProperties({textAlignHorizontal:e})},readonly:m||u,recordingKey:e},i.createElement(o.c$,{value:"LEFT","aria-label":(0,b.t)("fullscreen.type_panel.align_left"),icon:i.createElement(l.h,null)}),i.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_center"),icon:i.createElement(c.N,null)}),i.createElement(o.c$,{value:"RIGHT","aria-label":(0,b.t)("fullscreen.type_panel.align_right"),icon:i.createElement(d.K,null)}))}function k(e){let r=(0,I._W)((0,T.kl)("missingFont"),!1),n=!((0|(0,S.J2)(h.Ez5.propertiesPanelState().enabledTypePanelControls))&1<<h.mrc.TEXT_ALIGN_VERTICAL);return i.createElement(o.bL,{value:e.textAlignVertical,onChange:e=>((0,g.kc)().ce_properties_panel_tracking&&(0,_.sx)("editor_type_panel_change",{key:"textAlignVertical",value:e}),v.Y5.updateSelectionProperties({textAlignVertical:e})),readonly:r||n,recordingKey:e.recordingKey,legend:i.createElement(s.q,null,(0,b.t)("fullscreen.type_panel.align_vertical"))},i.createElement(o.c$,{value:"TOP","aria-label":(0,b.t)("fullscreen.type_panel.align_top"),icon:i.createElement(y.U,{svg:L.A},i.createElement(u.b,null))}),i.createElement(o.c$,{value:"CENTER","aria-label":(0,b.t)("fullscreen.type_panel.align_middle"),icon:i.createElement(y.U,{svg:O.A},i.createElement(m.X,null))}),i.createElement(o.c$,{value:"BOTTOM","aria-label":(0,b.t)("fullscreen.type_panel.align_bottom"),icon:i.createElement(y.U,{svg:N.A},i.createElement(p.z,null))}))}},708915:(e,r,n)=>{n.d(r,{FX:()=>i}),n(411855),n(320063),n(966712),n(939863),n(456104),n(582947),n(205548),n(397065),n(340514),n(893606),n(463546);let i="new_text_row_location_callout"},662945:(e,r,n)=>{n.d(r,{No:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(898967);let l=(0,i.forwardRef)(function({label:e,input:r,...n},a){return i.createElement(c,{label:e,input:r,inputSize:"normal",...n,ref:a})});(0,i.forwardRef)(function({label:e,input:r,...n},a){return i.createElement(c,{label:e,input:r,inputSize:"small",...n,ref:a})}),(0,i.forwardRef)(function({label:e,input:r,...n},a){return i.createElement(c,{label:e,input:r,inputSize:"large",...n,ref:a})});let c=(0,i.forwardRef)(function({label:e,input:r,inputSize:n,...a},l){let c=o()({[s.gA]:!0,[s.DD]:"small"===n,[s.dK]:"normal"===n,[s.TJ]:"large"===n});return i.createElement("div",{className:c,ref:l,...a,"data-non-interactive":!0},i.createElement("div",{className:s.b7,"data-non-interactive":!0},e),i.createElement("div",{className:s.Wy,"data-non-interactive":!0},r))})},994481:(e,r,n)=>{n.d(r,{Cm:()=>u,Zo:()=>d,cS:()=>c,dx:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(834447);let l=(0,i.forwardRef)(function({left:e,right:r,appendedClassName:n},a){let l=o()(s.RF,n);return i.createElement("div",{className:l,ref:a},e?i.createElement("div",{className:s.kb},e):null,r?i.createElement("div",{className:s.pG},r):null)});(0,i.forwardRef)(function({children:e,appendedClassName:r},n){let a=o()(s.Pv,r);return i.createElement("div",{className:a,ref:n},e)});let c=(0,i.forwardRef)(function({label:e,input:r,appendedClassName:n},a){let l=o()(s.Od,n);return i.createElement("div",{className:l,ref:a},null!=e?i.createElement(m,null,e):null,i.createElement("div",{className:s.hF},r))}),d=(0,i.forwardRef)(function({label:e,input:r,appendedClassName:n},a){let l=o()(s.H5,n);return i.createElement("div",{className:l,ref:a},null!=e?i.createElement(m,null,e):null,i.createElement("div",{className:s.hF},r))}),u=(0,i.forwardRef)(function({label:e,leftInput:r,rightInput:n,appendedClassName:a},l){let c=o()(s.Y7,a);return i.createElement("div",{className:c,ref:l},i.createElement(m,null,e),i.createElement("div",{className:s.ig},r),i.createElement("div",{className:s.by},n))});function m(e){return i.createElement("span",{"aria-hidden":"true",className:s.Pf,"data-non-interactive":!0},e.children)}},343559:(e,r,n)=>{n.d(r,{r:()=>u});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(925782),c=n(939791),d=n(563769);let u=i.forwardRef(function({titleTx:e,icon:r,faded:n,isEmpty:a,...s},l){return i.createElement(c.DE,{...s,ref:l,appendedClassName:o()(d.En,d.VJ,{[d.yf]:n,[d.ry]:a},s.appendedClassName),input:i.createElement(c.Mw,null,e),label:null,icon:r})});i.forwardRef(function({titleTx:e,input:r,faded:n,isEmpty:a,isPanelBodyCollapsedAtom:u,appendedClassName:m,...p},h){let _=o()(d.e4,{[d.yf]:n,[d.ry]:a},m);return i.createElement(s.D8,{className:_,forwardedRef:h,...p,"data-non-interactive":!0},i.createElement("div",{className:d.Dn},i.createElement(l.r2,{isPanelBodyCollapsedAtom:u||null}),i.createElement(c.Mw,null,e)),i.createElement("div",{className:d.Ix,"data-non-interactive":!0},r))}),i.forwardRef(function({titleTx:e,faded:r,isEmpty:n,children:a,...s},l){return i.createElement(c.oO,{...s,ref:l,appendedClassName:o()(d.En,{[d.yf]:r,[d.ry]:n}),input:i.createElement(c.Mw,null,e)},a)}),i.forwardRef(function({titleTx:e,input:r,...n},a){return i.createElement(s.D8,{className:d.Ii,forwardedRef:a,...n,"data-non-interactive":!0},i.createElement("div",{className:d.DD},i.createElement(c.Mw,null,e)),i.createElement("div",{className:d.hF,"data-non-interactive":!0},r))})},939791:(e,r,n)=>{n.d(r,{Ad:()=>g,DE:()=>_,Kg:()=>S,Mw:()=>v,Oe:()=>h,Y9:()=>T,fn:()=>p,my:()=>b,oO:()=>E,pG:()=>f,rH:()=>I,sY:()=>y,u9:()=>w});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(163023),c=n(41747),d=n(691603),u=n(52413),m=n(323316);let p=(0,i.forwardRef)(function({leftLabel:e,leftInput:r,rightLabel:n,rightInput:a,appendedClassName:s,icon:l,dataTestId:c},d){return i.createElement("div",{className:o()(u.$f,s),ref:d,"data-non-interactive":!0,"data-testid":c},null!=e?i.createElement(S,null,e):null,i.createElement("div",{className:u.Vp,"data-non-interactive":!0},r),null!=n?i.createElement(w,null,n):null,i.createElement("div",{className:u.ON,"data-non-interactive":!0},a),i.createElement(I,null,l))});(0,i.forwardRef)(function({label:e,leftIcon:r,input:n,rightIcon:a},o){return i.createElement("div",{className:u.iv,ref:o,"data-non-interactive":!0},null!=e?i.createElement(S,null,e):null,i.createElement("div",{className:u.dk,"data-non-interactive":!0},r),i.createElement("div",{className:u.Wy,"data-non-interactive":!0},n),i.createElement("div",{className:u.pK,"data-non-interactive":!0},a))});let h=(0,i.forwardRef)(function({label:e,leftIcon:r,input:n,firstRightIcon:a,secondRightIcon:o,...s},l){return i.createElement("div",{className:u.o7,ref:l,...s,"data-non-interactive":!0},null!=e?i.createElement(S,null,e):null,i.createElement("div",{className:u.dk,"data-non-interactive":!0},r),i.createElement("div",{className:u.Wy,"data-non-interactive":!0},n),i.createElement("div",{className:u.pK,"data-non-interactive":!0},a),i.createElement("div",{className:u.wm,"data-non-interactive":!0},o))}),_=(0,i.forwardRef)(function({label:e,input:r,icon:n,appendedClassName:a,dataTestId:s,dataOnboardingKey:l},c){let d=o()(u.xx,a);return i.createElement("div",{className:d,ref:c,"data-testid":s,"data-onboarding-key":l},null!=e?i.createElement(S,null,e):null,i.createElement("div",{className:u.Vp,"data-non-interactive":!0},r),i.createElement(I,null,n))}),g=(0,i.forwardRef)(function({input:e,label:r,appendedClassName:n,alwaysShowLabel:a},s){return i.createElement("div",{className:o()(u.cN,n),ref:s},r?i.createElement(S,{alwaysShowLabel:a},r):null,i.createElement("div",{className:u.Vp,"data-non-interactive":!0},e))}),f=(0,i.forwardRef)(function({input:e,leftIcon:r,rightIcon:n,appendedClassName:a,dataTestId:s},l){let c=o()(u.jz,a);return i.createElement("div",{className:c,ref:l,"data-testid":s},i.createElement("div",{className:u.q1,"data-non-interactive":!0}," ",e," "),i.createElement("div",{className:u.eK,"data-non-interactive":!0}," ",r," "),i.createElement("div",{className:u.H_,"data-non-interactive":!0}," ",n," "))}),E=(0,i.forwardRef)(function({input:e,children:r,appendedClassName:n,dataOnboardingKey:a},s){let l=o()(u.qv,n);return i.createElement("div",{className:l,ref:s,"data-onboarding-key":a},i.createElement("div",{className:u.q1},e),i.createElement("div",{className:u.wH},r))}),y=(0,i.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:a,appendedClassName:s,topLeftInput:l,bottomLeftInput:c,topRightInput:d,bottomRightInput:m,leftInput:p,rightInput:h},_){let g=o()(u.d1,s),f=null!=p?i.createElement("div",{className:u.kW},p):l,E=null!=h?i.createElement("div",{className:u.kW},h):d,y=null!=p?null:i.createElement("div",null,c),v=null!=h?null:i.createElement("div",null,m);return i.createElement("div",{className:g,ref:_,"data-non-interactive":!0},i.createElement(S,null,e),i.createElement(w,null,r),i.createElement(b,null),f,E,i.createElement("div",null,n),y,v,i.createElement("div",null,a))});function b({}){return i.createElement("div",{"data-non-interactive":!0})}function v({children:e}){return i.createElement("span",{"aria-hidden":"true"},e)}function I({children:e}){return e?i.createElement("div",{className:u.to,"data-non-interactive":!0},e):null}let T=(0,i.forwardRef)(function({selected:e,grabberClassName:r,hideGrabber:n,singletonRow:a,dragging:c,children:p,selectedSecondary:h,containerClassName:_,...g},f){let E=!n&&(!a||c),y=e&&c?d.Aw:u.gB,b=h?u.kR:e?u.CZ:"";return i.createElement(s.D8,{...g,forwardedRef:f,className:o()(u.P6,b,_),tabIndex:-1},E&&i.createElement("div",{className:o()(r,{[u.tp]:c,[u.kI]:!c})},(!c||e)&&i.createElement(l.B,{className:y,svg:m.A})),p)});function S({children:e,alwaysShowLabel:r}){return(0,c.V)()||r?i.createElement("span",{"aria-hidden":"true",className:u.Qb,"data-non-interactive":!0},e):i.createElement(b,null)}function w({children:e}){return(0,c.V)()?i.createElement("span",{"aria-hidden":"true",className:u.iV,"data-non-interactive":!0},e):i.createElement(b,null)}},423324:(e,r,n)=>{n.d(r,{d:()=>d});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(939791),c=n(52413);let d=(0,i.forwardRef)(function({leftInput:e,rightInput:r,leftLabel:n,rightLabel:a,leftIcon:d,rightIcon:u,appendedClassName:m,...p},h){let _=o()(c.ZD,m);return i.createElement(s.D8,{className:_,forwardedRef:h,...p,"data-non-interactive":!0},null!=n?i.createElement(l.Kg,null,n):null,i.createElement("div",{className:c.Vp,"data-non-interactive":!0},e),null!=a?i.createElement(l.u9,null,a):null,i.createElement("div",{className:c.ON,"data-non-interactive":!0},r),i.createElement("div",{className:c.dk,"data-non-interactive":!0},d),i.createElement("div",{className:c.pK,"data-non-interactive":!0},u))});(0,i.forwardRef)(function({leftLabel:e,rightLabel:r,topIcon:n,bottomIcon:a,appendedClassName:d,collapsedLeftInput:u,collapsedRightInput:m,expandedTopLeftInput:p,expandedTopRightInput:h,expandedBottomLeftInput:_,expandedBottomRightInput:g,singleInput:f,showAllPaddingControls:E,showSinglePaddingControl:y,...b},v){let I=o()(c.KP,d),T=i.createElement("div",{className:c.Xv},f),S=i.createElement(i.Fragment,null,i.createElement("div",{className:c.Vp},u),i.createElement("div",{className:c.H$},m)),w=i.createElement(i.Fragment,null,i.createElement("div",{className:c.Vp},p),i.createElement("div",{className:c.ON},_),i.createElement("div",{className:c.H$},h),i.createElement("div",{className:c.Os},g));return i.createElement(s.D8,{className:I,forwardedRef:v,...b,"data-non-interactive":!0},i.createElement(l.Kg,null,e),i.createElement(l.u9,null,r),i.createElement(l.my,null),y?T:E?w:S,i.createElement("div",{className:c.dk},n),E&&a&&i.createElement("div",{className:c.pK},a))})},90013:(e,r,n)=>{n.d(r,{yj:()=>k});var i=n(411855),a=n(188507),o=n(821910),s=n(343887),l=n(404095),c=n(636149),d=n.n(c),u=n(737947),m=n(966712),p=n(153234),h=n(553716),_=n(163023),g=n(939863);n(632430);var f=n(662275);n(617453),n(100197),n(234945);var E=n(173454),y=n(498606),b=n(715762),v=n(507662),I=n(7959),T=n(538697),S=n(893606),w=n(171297),A=n(662945),C=n(564092),N=n(918061),L=n(261579),O=n(132208);class R extends T.l6{}class P extends T.c${}function D({modeOptions:e,inheritedModeID:r,isShowingGuids:n}){return{format:i=>{if(i===C.iw.LEARN_MORE)return(0,g.t)("variables.modes.option.learn_more");if(i===C.iw.REVIEW_UPDATES)return(0,g.t)("variables.modes.option.review_updates");if(i===C.UE){if(r===C.Mo)return(0,g.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:(0,g.t)("variables.mode_properties_panel.select.option.mixed")});let n=e.find(e=>o.c2(e.modeId,r))?.name;return n?(0,g.t)("variables.mode_properties_panel.select.option.auto_with_name",{modeName:n}):(0,g.t)("variables.mode_properties_panel.select.option.auto")}{if(i===C.Ws)return 0===e.length&&(0,h.x1)("variables","No mode options available"),(0,g.t)("variables.mode_properties_panel.select.option.default_with_name",{modeName:e[0].name??""});if(i===C.Mo)return(0,g.t)("variables.mode_properties_panel.select.option.mixed");if(i===C.Yn)return(0,g.t)("variables.mode_properties_panel.select.option.deleted");let r=e.find(e=>(0,o.c2)(e.modeId,i));return r?n?`${r.name} (${r.modeId.guid})`:r.name:((0,h.x1)("variables","Option does not exist in modeOptions"),(0,g.t)("variables.mode_properties_panel.select.option.deleted"))}},isEqual:(e,r)=>(0,o.c2)(e,r)}}function k(e){let{fill:r,showExplicitOnly:n,variableSetName:c,variableSetKey:h,modeOptions:k,explicitModeID:M,inheritedModeID:F,isShowingGuids:x,recordingKey:U,showInheritedModeOption:B,onChange:V}=e,G=(0,a.wA)(),H=(0,a.d4)(e=>e.dropdownShown),K=(0,C.ZP)(),W=(0,S.R)(),$=M&&M!==C.Mo&&k.every(e=>!(0,o.c2)(e.modeId,M)),Y=C.Ws;$?Y=C.Yn:M?Y=M:F&&(Y=B?C.UE:F);let z=D({modeOptions:k,inheritedModeID:F,isShowingGuids:x}).format(Y),[j,q]=i.useState(n),Z=i.useCallback((e,r,n)=>{V(e,n),void 0!==r&&q(r)},[V]),X=i.useMemo(()=>(function(e,r,n,a){let o=[];if(0===r.length)return o;let s=d()(r,e=>e.modeId.collectionKey),l=!!(0,m.kc)().ds_variables_relax_modes,c=i.createElement("div",{className:L.Z7},i.createElement(_.B,{className:L.G,svg:O.A}));return Object.entries(s).map(([r,a])=>{for(let s of(o.length>0&&a.length>0&&o.push(i.createElement(T.sK,null)),a))o.push(i.createElement(P,{key:`mode-option-${r}-${s.modeId.guid}-${n}`,value:s.modeId,recordingKey:p.Pt(e,`varSetSelect=${r}`,`value=${s.modeId.guid}`,`varSetKey=${r}`),disabled:!l&&!s.isCompatible,fullWidth:!0,rightSettingsIcon:l&&!s.isCompatible?c:void 0}))}),l&&r.some(e=>!e.isCompatible)&&(o.push(i.createElement(T.sK,null)),a===C.iw.REVIEW_UPDATES?o.push(i.createElement(P,{key:"incompatible-modes-updates",value:C.iw.REVIEW_UPDATES,iconToReplaceCheck:c,recordingKey:p.Pt(e,"incompatible-modes-review-updates"),additionalStylesClassName:L.cF})):a===C.iw.LEARN_MORE&&o.push(i.createElement(P,{key:"incompatible-modes-learn-more",value:C.iw.LEARN_MORE,iconToReplaceCheck:c,recordingKey:p.Pt(e,"incompatible-modes-learn-more"),additionalStylesClassName:L.cF}))),o})(U,k,n,K),[U,k,n,K]);if(k.length<2||j&&!M)return null;let J=Y===C.Mo,Q=function(e,r,n,a,o,s){let l=[];return n&&l.push(i.createElement(P,{key:C.Mo,value:C.Mo,recordingKey:p.Pt(e,"value:MIXED"),selected:!0}),i.createElement(T.sK,null)),a?o&&l.push(i.createElement(P,{key:C.UE,value:C.UE,recordingKey:p.Pt(e,"value:INHERIT")}),i.createElement(T.sK,null)):s.length>0&&l.push(i.createElement(P,{key:C.Ws,value:C.Ws,recordingKey:p.Pt(e,"value:DEFAULT"),disabled:!s[0].isCompatible,selected:r===C.Ws}),i.createElement(T.sK,null)),r===C.Yn&&l.push(i.createElement(P,{key:C.Yn,value:C.Yn,recordingKey:p.Pt(e,"value:DELETED"),disabled:!0,selected:!0})),l}(U,Y,J,!!F,B,k),ee=i.createElement(R,{fill:r,id:`var-set-mode-${h}-${n}`,dropdownWidth:200,dropdownAlignment:"right",dispatch:G,inputClassName:W?N.UZ:void 0,chevronClassName:W?N.ai:void 0,dropdownShown:H,formatter:D({modeOptions:k,inheritedModeID:F,isShowingGuids:x}),property:Y,recordingKey:p.Pt(U,`varSetSelect=${h}`),onChange:e=>{e===C.iw.LEARN_MORE?u.Ay.unsafeRedirect(C.Yc,"_blank"):e===C.iw.REVIEW_UPDATES?G(f.to({type:v.T,data:{initialTab:E.Wv.UPDATES,entrypoint:b.r6.VARIABLE_MODE_INCOMPATIBLE_REVIEW_UPDATES_DROPDOWN_OPTION}})):Z(e,!1,D({modeOptions:k,inheritedModeID:F,isShowingGuids:x}).format(e))},tooltip:z},...Q,...X);if(W){let e=i.createElement("span",{className:L.$6,"data-testid":"variableModeEntry"},c);return B?i.createElement(w.X,{labelTx:e,input:ee,icon:i.createElement(s.K,{"aria-label":(0,g.t)("general.remove"),onClick:()=>Z("INHERIT",!0),actionOnPointerDown:!0,htmlAttributes:{"data-tooltip":(0,g.t)("general.remove"),"data-tooltip-type":y.Ib.TEXT}},i.createElement(l.f,null))}):i.createElement(A.No,{label:e,input:ee})}return i.createElement(I.fI,{className:L.nM,dataTestId:"variableModeEntry"},i.createElement("div",{className:L.o3},c),i.createElement("div",{className:L.mq},ee))}},396498:(e,r,n)=>{n.d(r,{EG:()=>o}),n(411855),n(939863);var i=n(324597),a=n(483990);function o(e){if(e.extensionSearchString)return e.extensionSearchString;let r=e.displayForQuickCommand?e.displayForQuickCommand:(0,i.Dz)(e);return(0,a.A)(r,e.args)}n(222478)},901304:(e,r,n)=>{n.d(r,{BB:()=>b,XG:()=>E,wI:()=>f}),n(411855);var i=n(268853),a=n(38329),o=n(418956),s=n(776621),l=n(419527),c=n(988022),d=n(516703),u=n(239737),m=n(99888),p=n(65633),h=n(999140),_=n(30075),g=n(719624);function f({searchQuery:e,extensionId:r,moduleFilters:n,searchPosition:i,numSearchResults:a}){y({action:r,searchQuery:e,numSearchResults:a,rankingAlgorithm:(0,h.eg)(_.Jc.EXTENSIONS),searchPosition:i,module:_.Jc.EXTENSIONS,qaVersion:m.$L,isAi:!1,isPlugin:!0,moduleFilters:n})}function E({action:e,numSearchResults:r,searchPosition:n,rankingAlgorithm:i,isSearchResult:a,moduleFilters:s}){y({action:e,searchQuery:o.zl.get(g.Q8),numSearchResults:r,rankingAlgorithm:i,searchPosition:n,qaVersion:m.$L,isAi:!0,isPlugin:!1,moduleFilters:s,isSearchResult:a,module:(0,p.x)()})}function y(e){let{quickActionsSessionId:r,quickActionsQueryId:n,currentSelection:l,fileKey:p,productType:_,source:f,role:E,hasAiFeatureAccess:y}=function(){let e=a.D.getState(),r=(0,d.l)(e),n=e.openFile?.key??"",l=(0,c.v5)(e.selectedView,null),p=o.zl.get(g.dd)??"";p||(0,s.$D)(i.e.EXTENSIBILITY,Error(`No quick actions session ID found when logging ${m.OW}`));let _=o.zl.get(g.Rt);return{currentSelection:r,fileKey:n,productType:l,source:o.zl.get(g.rE)?.source??"",quickActionsSessionId:p,quickActionsQueryId:_,role:(0,h.WZ)(),hasAiFeatureAccess:(0,u.W7)()}}(),b={...e,quickActionsSessionId:r,currentSelection:l,fileKey:p,productType:_,quickActionsQueryId:n,source:f,role:E,hasAiFeatureAccess:y};(0,h.mi)(b)}function b(e){return!!e.tags?.includes(l.$.AI)}n(396498)},987850:(e,r,n)=>{n.d(r,{X:()=>m});var i=n(776250),a=n(38329),o=n(966712),s=n(716034),l=n(418956);n(915440),n(711525),n(279453),n(239737);var c=n(55447),d=n(222478);let u=(0,s.eU)(null);function m(e){let r=l.zl.get(u);if(!(0,o.kc)().qa_ai_metering||e===d.JT.ASSISTANT_CHAT||e===d.JT.FIND_INSPIRATION)return{withinMeter:!0};let n=l.zl.get(c.Ac),s=l.zl.get(c.ag),m=l.zl.get(c.u6),p=s||m;if("unchecked"===n||"null_grantlist"===n&&p){let r=a.D&&a.D.getState().selectedView,n=r?.view==="fullscreen"&&r.fileKey;i.az.trackDefinedEvent("search_experience.ai_eligibility.meter_checked",{newGrantlistPlanValue:null!==s?s.toString():"null",newGrantlistUserValue:null!==m?m.toString():"null",userId:o.Ay().user_data?.id,fileKey:n||"missing",action:e}),l.zl.set(c.Ac,p?"with_grantlist":"null_grantlist")}if(!r)return{withinMeter:!1};let h=r.find(r=>r.userActions.includes(e));if(!h)return{withinMeter:!1};let _=parseInt(h.remaining);return isNaN(_)?{withinMeter:!1}:{withinMeter:_>0,meterResetDate:h.resetsAt}}},239737:(e,r,n)=>{n.d(r,{Ci:()=>O,Ko:()=>L,LC:()=>P,Nv:()=>R,P5:()=>M,PE:()=>A,W7:()=>C,aG:()=>D,eH:()=>k}),n(411855);var i=n(38329),a=n(966712),o=n(716034),s=n(418956),l=n(915440);n(711525);var c=n(647899),d=n(782112);n(411045);var u=n(809831),m=n(960884),p=n(335682),h=n(69961),_=n(99506),g=n(279453);n(243987),n(556261),n(56099);var f=n(984968),E=n(239671),y=n(144119),b=n(656147),v=n(479296),I=n(55447);let T=(0,o.eU)(a.tl().editing_file?.can_use_jubilee??!1),S=(0,o.eU)(!1),w=(0,o.eU)(null),A=(0,v.n)(()=>{let e=(0,d.q8)(),r=(0,s.md)(T);return!!(((0,u.lg)()!==_._Y.SITES||(0,a.kc)().sts_ai_enabled)&&(0,I.$7)("useHasPermission"))&&((0,a.kc)().qa_ai_metering?r:!e)});function C(){if(s.zl.get(u.u8)===E.nT.Sites&&!(0,a.kc)().sts_ai_enabled||!(0,I.$7)("getHasPermission"))return!1;let e=s.zl.get(T);if((0,a.kc)().qa_ai_metering)return e;let r=s.zl.get(m.Z),n=s.zl.get(f.Me),o=i.D.getState().openFile,l=!o||!o.canEdit;return!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:l})}(0,v.n)(e=>void 0!==e&&"loaded"===function(e){return(0,l.Rs)(g.GIl,{key:e},{enabled:!!e&&(0,a.kc)().qa_ai_metering})}(e).status);let N=(0,v.n)(()=>{let e=(0,p.q5)();if((0,s.md)(I.p9))return!0;let r=(0,a.tl)().jubilee_b;return!!e&&!!r&&(e.parentOrgId?!!r.orgs[e.parentOrgId]:!!e.teamId&&!!r.teams[e.teamId])});function L(){if(!(0,I.$7)("getHasAssetVisualSearchPermission")||!(0,a.kc)().api_asset_search)return!1;let e=s.zl.get(S);if((0,a.kc)().qa_ai_metering)return e;let r=s.zl.get(m.Z),n=s.zl.get(f.Me),o=i.D.getState().openFile,l=!o||!o.canEdit;return!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:l})}function O(e){return(0,a.kc)().api_asset_search?(function(e){if(!e||!(0,a.kc)().asset_search_use_exp_perms||!h.nt.ui3.getValue())return Promise.resolve(!1);let r=s.zl.get(w);return null!==r?Promise.resolve(r):(0,c.vs)("exp_search_ai_assets").then(e=>{let r=e.getValue("allow_ai_results",null);return null!==r&&s.zl.set(w,!!r),!!r})})(e).then(e=>{if(!e&&!(0,I.$7)("getHasAssetSearchPermission"))return!1;let r=s.zl.get(S);if((0,a.kc)().qa_ai_metering)return r;let n=s.zl.get(m.Z),o=s.zl.get(f.Me),l=i.D.getState().openFile,c=!l||!l.canEdit;return!(0,d.lt)({currentOrg:n,currentTeam:o,isViewer:c})}):Promise.resolve(!1)}let R=(0,v.n)(e=>{let r=(0,d.q8)(),n=(0,s.md)(S);return!!((0,a.kc)().api_asset_search&&(function(e){let{getConfig:r}=(0,c.I7)("exp_search_ai_assets",void 0,!0);return!!r().getValue("allow_ai_results",!1)&&e&&h.nt.ui3.getValue()&&!!(0,a.kc)().asset_search_use_exp_perms}(e)||(0,I.$7)("useHasAssetSearchPermission")))&&((0,a.kc)().qa_ai_metering?n:!r)}),P=(0,v.n)(()=>{let e=(0,d.q8)(),r=(0,s.md)(S),n=N();return!!(0,I.$7)("useHasFragmentSearchPermission")&&(!(0,a.kc)().asset_suggestions_require_completed_backfill||!!n)&&((0,a.kc)().qa_ai_metering?r:!e)});function D(){let e=(0,u.my)()===E.nT.Design,r=(0,y.sO)()&&!!(0,a.kc)().piper_actions;return e||r}function k(){let e=A();return D()&&!!(0,a.kc)().hub_file_fragments&&e}function M(){let e=i.D.getState().selectedView,r=(0,u.JV)(e)===E.nT.Design,n=(0,b.P)(e);return(!!r||!!n)&&!!(0,a.kc)().hub_file_fragments&&C()}var F=(e=>(e.PERSONAL_DRAFT="PERSONAL_DRAFT",e.TEAM_OR_ORG_DISABLED="TEAM_OR_ORG_DISABLED",e.ORG_GUEST="ORG_GUEST",e.NON_PAID_SEAT="NON_PAID_SEAT",e.NO_ORG_OR_TEAM_USER="NO_ORG_OR_TEAM_USER",e.ROLLING_OUT="ROLLING_OUT",e))(F||{})},132572:(e,r,n)=>{n.d(r,{C7:()=>s,Ll:()=>d,h8:()=>o,kK:()=>l,qF:()=>c});var i=n(966712),a=n(55447);function o(){return!!(0,i.kc)().qa_search_frecency}function s(){return!!(0,i.kc)().asset_suggestions&&(0,a.$7)("isFragmentSearchEnabled")}function l(){return!!(0,i.kc)().actions_hide_recents&&(0,a.$7)("shouldHideRecents")}function c(){return!!(0,i.kc)().eai_image_tools&&(0,a.$7)("isImageToolsEnabled")}function d(){return!!(0,i.kc)().prototype_ai_magic_link&&(0,a.$7)("isMagicLinkEnabled")}},222478:(e,r,n)=>{n.d(r,{GI:()=>g,HW:()=>a,IA:()=>f,JT:()=>o,KL:()=>p,LC:()=>l,TJ:()=>m,Xy:()=>_,d7:()=>s,gj:()=>u,pY:()=>c,rr:()=>d,wC:()=>i,zw:()=>h});let i=354,a=600;var o=(e=>(e.TRANSLATE_TEXT="translate-text",e.REWRITE_TEXT="rewrite-text",e.SHORTEN_TEXT="shorten-text",e.FIRST_DRAFT="first-draft",e.FIRST_DRAFT_MAKE_CHANGES="first-draft-make-changes",e.FIRST_DRAFT_MAKE_KIT="first-draft-make-kit",e.FIRST_DRAFT_COMPONENTIZE="first-draft-componentize",e.FIRST_DRAFT_SUGGEST_PROPS="first-draft-suggest-props",e.FIRST_DRAFT_LINTING="first-draft-linting",e.FIRST_DRAFT_DEBUG="first-draft-debug",e.FIND_INSPIRATION="find-inspiration",e.IMAGE_TO_DESIGN="image-to-design",e.REMOVE_BACKGROUND="remove-background",e.AUTO_RENAME_LAYERS="auto-rename-layers",e.GENERATE_IMAGE="generate-image",e.MAGIC_LINK="magic-link",e.MAGIC_LINK_V2="magic-link-v2",e.MAKE_EDITS="make-edits",e.FIRST_DRAFT_FINE_TUNE="first-draft-fine-tune",e.CONTENT_FILL="content-fill",e.SLIDES_GENERATE_SPEAKER_NOTES="slides-generate-speaker-notes",e.SLIDES_REWRITE_TEXT="slides-rewrite-text",e.ASSISTANT_CHAT="assistant-chat",e.BOARD_TO_DECK="board-to-deck",e.DETECT_VIOLATIONS="detect-violations",e.FIRST_DRAFT_MAKE_KIT_DEBUG="first-draft-make-kit-debug",e.UPSCALE_IMAGE="upscale-image",e.TEXT_SEARCH="text_search",e))(o||{});let s="https://help.figma.com/hc/en-us/articles/23870272542231",l="https://help.figma.com/hc/en-us/articles/24004542669463",c="https://help.figma.com/hc/en-us/articles/24004868368919",d="https://help.figma.com/hc/en-us/articles/24244814883735",u="https://help.figma.com/hc/en-us/articles/24004711129879",m="https://help.figma.com/hc/en-us/articles/25968453273495",p="https://help.figma.com/hc/en-us/articles/23796390206743",h="https://help.figma.com/hc/en-us/articles/23955143044247",_="https://help.figma.com/hc/en-us/articles/24004778051479",g="https://help.figma.com/hc/en-us/articles/24245848829847#h_01JBF670XY6WGXKE8F76112N9W",f="https://help.figma.com/hc/en-us/articles/24037716110615"},432704:(e,r,n)=>{n.d(r,{C:()=>s});var i=n(411855),a=n(320063);let o=(0,i.createContext)((0,i.createRef)());function s(e){let r=(0,i.useContext)(o);(0,a.h)(()=>{e.current&&""!==e.current.value&&!1===r.current&&e.current.select(),r.current=!0})}},693348:(e,r,n)=>{n.d(r,{N:()=>o});var i=n(418956),a=n(719624);function o(){let e=(0,i.md)(a.fq);return e>0?e+8:0}},16366:(e,r,n)=>{n.d(r,{t:()=>a});var i=n(411855);function a(e,r){return(0,i.useCallback)(()=>!(e.manifest.parameters&&!1!==e.manifest.parameterOnly)&&!r,[e.manifest.parameters,e.manifest.parameterOnly,r])}},709731:(e,r,n)=>{n.d(r,{Ag:()=>I,B3:()=>T,RL:()=>C,cT:()=>A,pP:()=>S,qy:()=>g,wj:()=>w,z8:()=>f});var i=n(411855),a=n(268853),o=n(418956),s=n(716034),l=n(776621),c=n(553716),d=n(559036),u=n(222478),m=n(946465),p=n(232309),h=n(448606),_=n(501147),g=(e=>(e.INITIAL="initial",e.RUNNING="running",e.CANCELLED="cancelled",e.ERROR="error",e.DONE="done",e))(g||{}),f=(e=>(e.INCOMPLETE="incomplete",e.SUCCEEDED="succeeded",e.FAILED="failed",e))(f||{});let E={action:"invalid",source:"invalid",clientLifecycleId:"invalid",quick_actions_session_id:"invalid",file_key:"invalid",product_type:"invalid"},y=(0,o.Iz)(()=>(0,s.eU)({state:"initial",aiTrackingContext:E,tasks:[]})),b={[u.JT.FIRST_DRAFT_MAKE_CHANGES]:a.e.AI_GENERATION,[u.JT.FIRST_DRAFT_MAKE_KIT]:a.e.AI_GENERATION,[u.JT.FIRST_DRAFT_COMPONENTIZE]:a.e.AI_GENERATION,[u.JT.FIRST_DRAFT_SUGGEST_PROPS]:a.e.AI_GENERATION,[u.JT.MAKE_EDITS]:a.e.AI_GENERATION,[u.JT.FIRST_DRAFT]:a.e.AI_GENERATION,[u.JT.IMAGE_TO_DESIGN]:a.e.AI_GENERATION},v="__ABORTED__";async function I(e,r,n,i){let s=y(e),{state:d,aiTrackingContext:u}=o.zl.get(s);if("running"===d){(0,c.xi)("quick-actions","Can't start action while another invocation of the same action is running");return}let h=new AbortController;o.zl.set(s,{state:"running",abortController:h,aiTrackingContext:u,tasks:[]}),(0,m.Dl)({...u,...i});try{let e=new Promise(e=>{h.signal.addEventListener("abort",()=>{e(v)})}),a=r({params:n,abortController:h,onTasksUpdate:e=>{o.zl.set(s,r=>({...r,tasks:e}))},clientLifecycleId:u.clientLifecycleId}),l=await Promise.race([a,e]);if(l!==v)return o.zl.set(s,e=>({state:"done",result:l,aiTrackingContext:u,tasks:e.tasks})),(0,_.k)(),(0,m.as)({...u,...i,status:p.dM.COMPLETED,reason:p.F9.SUCCESS}),l;o.zl.set(s,e=>({state:"cancelled",aiTrackingContext:u,tasks:e.tasks})),(0,m.as)({...u,...i,status:p.dM.FAILED,reason:p.F9.STOPPED});return}catch(r){h.abort(),(0,c.x1)("quick-actions","Error encountered running action",{error:r}),(0,l.$D)(b[e]??a.e.UNOWNED,r),o.zl.set(s,e=>({state:"error",error:r,originalParams:n,aiTrackingContext:u,tasks:e.tasks})),(0,m.as)({...u,...i,status:p.dM.FAILED,reason:p.F9.ERROR})}}function T(e){let r=y(e);if("running"===o.zl.get(r).state)return;let n=(0,m.Uu)(e);o.zl.set(r,{state:"initial",aiTrackingContext:n,tasks:[]})}function S(e){let r=y(e);return o.zl.get(r)}function w(e){let r=y(e),n=(0,o.md)(r),{Sprig:a}=(0,d.A)();return(0,i.useEffect)(()=>{if(n){let{state:r,aiTrackingContext:i}=n,{ended:o,status:s,reason:l}=function(e){switch(e){case"cancelled":return{ended:!0,status:p.dM.FAILED,reason:p.F9.STOPPED};case"error":return{ended:!0,status:p.dM.FAILED,reason:p.F9.ERROR};case"done":return{ended:!0,status:p.dM.COMPLETED,reason:p.F9.SUCCESS};default:return{ended:!1,status:p.dM.FAILED,reason:p.F9.ERROR}}}(r);o&&(0,h.k)(a,e,i,s,l)}},[n,a,e]),n}function A(e){let r=y(e),n=o.zl.get(r);"running"===n.state&&n.abortController.abort()}function C(e,r,n){let i=w(e),a=async i=>await I(e,r,i,n);return{...i,start:a,stop:()=>{A(e)}}}},341255:(e,r,n)=>{n.d(r,{m:()=>N});var i=n(411855),a=n(188507),o=n(340818),s=n(939863),l=n(472353),c=n(466636),d=n(376441),u=n(662275),m=n(964197),p=n(780700),h=n(269167),_=n(641638),g=n(170786),f=n(335682),E=n(694687),y=n(860178),b=n(555328),v=n(239671),I=n(376485),T=n(307292),S=n(436318),w=n(928754),A=n(16366),C=n(562432);function N({augmentedExtension:e,submenuRef:r,displayAboveTarget:n}){let{extension:g,publishedExtension:N,canRun:O,canRequest:R}=e,P=(0,a.wA)(),{close:D}=(0,C.cq)(),k=h.EO(N),M=h.OY(N),F=M&&h.gn(N),x=(0,T.Kp)(e),U=function(e){let r=(0,y.TA)(),n=(0,a.d4)(e=>e.authedActiveCommunityProfile),o=h.ej(e);return i.useCallback(()=>{if(!e)return;let i=b.aL.QUICK_ACTIONS;(0,l.mG)(e,i,r,n?.id),o()},[e,r,n,o])}(N),B=i.useCallback(()=>{P(d.v({}))},[P]),V=(0,p.Gt)(g.plugin_id,"quick-actions"),G=(0,S.q8)(g),H=(0,S.U4)(g),K=(0,S.S3)({submenuIsShown:H,extension:g,displayAboveTarget:n}),W=(0,A.t)(g,G),$=i.useCallback(()=>{(0,I.k0)(g)?o.l7.user("insert-widget",()=>L(g)):G&&r?K(r.current):V(),G||x(),W()&&D()},[g,G,r,x,W,K,V,D]),Y=(0,f.q5)(),z=(0,_.RW)(),j=i.useCallback(()=>{if(!Y||!Y.parentOrgId)return;let e={extension:{pluginId:g.plugin_id,iconUrl:g.redirect_icon_url,name:g.name},isWidget:(0,I.k0)(g),orgId:Y.parentOrgId,workspaceDetails:z.loaded?z.data:void 0,openedFrom:"editor",fullscreenEditorType:(0,v.wN)(Y.editorType)};P((0,u.to)({type:w.S,data:e}))},[P,g,Y,z]),q=(0,E.sZ)(),Z=(0,m.a)(q?.id,g.plugin_id,z.loaded?z.data?.workspaceId:void 0);return i.useMemo(()=>{let e=N?.monetized_resource_metadata;return k&&!M&&e?{onAction:U,actionText:(0,c.XR)(e)}:k&&F?{onAction:B,actionText:(0,s.t)("qa.extensions.update_payment")}:O?{onAction:$,actionText:(0,s.t)("qa.extensions.run")}:Z?{onAction:()=>{},actionText:(0,s.t)("qa.extensions.approval_pending")}:R?{onAction:j,actionText:(0,s.t)("qa.extensions.request_approval")}:{onAction:()=>{},actionText:""}},[k,M,N,U,F,B,O,R,Z,j,$])}let L=e=>{(0,g.j)({pluginID:e.plugin_id,widgetName:e.name,pluginVersionID:e.id,triggeredFrom:"quick-actions"})}},706966:(e,r,n)=>{n(384775),n(719624)},99888:(e,r,n)=>{n.d(r,{$L:()=>p,Be:()=>u,NP:()=>_,Nv:()=>h,OW:()=>d,RA:()=>s,U3:()=>m,W3:()=>a,gc:()=>l,mP:()=>o,qE:()=>i,tq:()=>f,uP:()=>g});var i=(e=>(e.VIEWER="viewer",e.EDITOR="editor",e))(i||{});let a="Quick Actions Search",o="open-quick-actions",s="Quick Actions Search Query Result",l="search-quick-actions";var c=(e=>(e.EXTENSION="extension",e.ACTION="action",e))(c||{});let d="Quick Actions Action",u="Quick Actions Panel Button",m="quick_actions_v1",p="quick_actions_v2",h="frecency",_="string-match",g="extensions",f="assets"},999140:(e,r,n)=>{n.d(r,{Ev:()=>v,Fi:()=>S,M$:()=>C,Mq:()=>w,WZ:()=>L,eg:()=>I,mi:()=>A,qM:()=>N,qz:()=>R,zF:()=>O});var i=n(411855),a=n(188507),o=n(140593),s=n(776250),l=n(344780),c=n(418956),d=n(716034),u=n(330654),m=n(988022),p=n(683694),h=n(335682),_=n(239737),g=n(132572),f=n(30075),E=n(719624),y=n(185997),b=n(99888);function v(){let e=(0,c.md)(h.ze)||"",r=(0,a.d4)(e=>e.selectedView),n=(0,c.md)(E.rE),o=n?.source||"",d=(0,c.md)(p.wg)?b.qE.EDITOR:b.qE.VIEWER,u=(0,_.PE)();return(0,i.useCallback)(({quickActionsSessionId:n,quickActionsQueryId:i,searchQuery:a,numSearchResults:c,currentSelection:p,module:h,moduleFilters:_,qaVersion:g,searchQueryResults:f})=>{var E;E={quickActionsSessionId:n,quickActionsQueryId:i,searchQuery:a,numSearchResults:c,currentSelection:p,module:h,moduleFilters:_,qaVersion:g,fileKey:e,searchLatencyMs:l.sn.tryStop(b.gc),searchQueryResults:f,source:o,rankingAlgorithm:I(h),productType:(0,m.v5)(r,null),role:d,hasAiFeatureAccess:u},(0,s.sx)(b.RA,E,{forwardToDatadog:!0})},[e,u,d,r,o])}function I(e){switch(e){case f.Jc.ALL:return(0,g.h8)()?b.Nv:b.NP;case f.Jc.EXTENSIONS:return b.uP;case f.Jc.ASSETS:case f.Sn.ASSETS_TAB_DETAIL_VIEW:return b.tq;default:(0,o.xb)(e)}}function T(e){if(!e)return!1;if(e===f.Jc.ALL||e===f.Jc.ASSETS||e===f.Jc.EXTENSIONS)return!0;switch(e){case f.Sn.ASSETS_TAB_DETAIL_VIEW:case f.Sn.VISUAL_SEARCH:return!0;case f.Sn.EXTENSION_DETAILS:case f.Sn.REGENERATE_TEXT_TOAST:case f.Sn.MAGIC_LINK_DONE_TOAST:case f.Sn.BACKGROUND_REMOVE_TOAST:case f.Sn.UPSCALE_IMAGE_TOAST:case f.Sn.RENAME_LAYERS_TOAST:case f.Sn.GENERATE_IMAGE:case f.Sn.IMAGE_TO_DESIGN:case f.Sn.MAGIC_LINK:case f.Sn.PLUGIN_PARAMETER_ENTRY:case f.Sn.PLUGIN_SUBMENU_ENTRY:case f.Sn.TRANSLATE:case f.Sn.REWRITE:case f.Sn.SHORTEN:case f.Sn.FIRST_DRAFT:case f.Sn.FIRST_DRAFT_KIT_PICKER:case f.Sn.FIRST_DRAFT_MAKE_CHANGES:case f.Sn.FIRST_DRAFT_LINT:case f.Sn.FIRST_DRAFT_DEBUG:case f.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case f.Sn.FIRST_DRAFT_MAKE_KIT:case f.Sn.MAKE_EDITS:case f.Sn.FIRST_DRAFT_FINE_TUNE:case f.Sn.ASSISTANT_CHAT:case f.Sn.LINK_TO_COMPONENT:case f.Sn.DETECT_VIOLATIONS:case f.Sn.FOR_TESTING:return!1;default:(0,o.xb)(e)}}function S({isQAV2:e,moduleToOpen:r}){return!e||!r||("tab"===r.type?T(r.module):"custom"===r.type?T(r.name):void(0,o.xb)(r))}function w(e){(0,s.sx)(b.W3,e,{forwardToDatadog:!0})}function A(e){(0,s.sx)(b.OW,e,{forwardToDatadog:!0})}function C(e,r){return{...e,onAction:n=>{var i;let a=n.shortcut;i={source:r,shortcutText:a?(0,y.OZ)(a):"",actionText:e.text||""},(0,s.sx)(b.Be,i),e.onAction&&e.onAction(n)}}}function N(e){let r=c.zl.get(R);return!r.has(e)&&(r.add(e),c.zl.set(R,r),!0)}function L(){return c.zl.get(p.wg)?b.qE.EDITOR:b.qE.VIEWER}let O=(0,d.eU)(null),R=(0,c.E2)("ai_actions_used",new Set,u.set(u.string()))},384775:(e,r,n)=>{n.d(r,{$I:()=>D,Jf:()=>M,KY:()=>U,RM:()=>V,gn:()=>B,h$:()=>H,iP:()=>x,jD:()=>k});var i=n(922827),a=n(298455),o=n(344780),s=n(38329),l=n(716034),c=n(418956),d=n(743282),u=n(392592),m=n(153887),p=n(738269),h=n(809831),_=n(988022),g=n(408405),f=n(516703),E=n(239671),y=n(279145);n(893606);var b=n(987850),v=n(239737),I=n(479296),T=n(222478),S=n(99888),w=n(999140),A=n(30075),C=n(719624),N=n(230642),L=n(28298),O=n(994172);let R=(0,l.eU)(null),P=(0,l.eU)(new Set);function D({trackingData:e,moduleToOpen:r}){let n=s.D.dispatch;if((0,g.T)(s.D.getState().progressBarState.mode)||"fullscreen"!==s.D.getState().selectedView.view)return;let l=B(r);(0,w.Fi)({isQAV2:l,moduleToOpen:r})&&o.sn.start(S.mP);let h=s.D.getState(),E={keyboardShortcut:"",currentSelection:(0,f.l)(h),fileKey:h.openFile?.key??"",productType:(0,_.v5)(h.selectedView,null),role:(0,w.WZ)(),hasAiFeatureAccess:(0,v.W7)(),...e};if(c.zl.set(w.zF,e.source),c.zl.set(C.rE,E),l){if(c.zl.set(C.Bu,!0),c.zl.get(C.dd)||(c.zl.set(C.dd,(0,d.g)()),c.zl.set(m.q4)),c.zl.set(R,null),r){if(r.beforeModuleOpen){let e=function(){let e=c.zl.get(C.dd);if(!e)throw Error("Session ID is missing when opening a module in Quick Actions V2.");return{sessionId:e,canvasSelection:a.UN().getCurrentPage()?.directlySelectedNodes,searchQuery:c.zl.get(C.Q8)}}();r.beforeModuleOpen(e)}"tab"===r.type?(c.zl.set(C.Lk,r.module),r.filter&&c.zl.set(L.t,r.filter)):c.zl.set(C.YH,e=>[{module:r.module,name:r.name},...e])}i.qmM.setDefaultTool(),n(u.F.dequeue({matchTimeout:"ephemeral"}))}else n(p.j7({type:y.jv,hasOwnEscKeyHandler:!0,data:{fireQuickActionsTrackingEvent:e=>{(0,w.Mq)({...E,qaVersion:S.U3,quickActionsSessionId:e,timeToShowModal:o.sn.tryStop(S.mP)||0,module:A.Jc.ALL})}}}))}function k(e,r,n){if(c.zl.get(C.Bu)){if(!n.forceClose&&c.zl.get(C.ZG))return!1;c.zl.set(C.Bu,!1),c.zl.set(C.dd,null),(0,O.R)(),(0,N.b)()}else r?.type===y.jv&&e(p.oB());return!0}function M(e){return c.zl.get(C.Bu)||e?.type===y.jv}function F(e){for(let r of Object.values(T.JT))if(e===r)return r;return null}function x(e,r={},n){!c.zl.get(C.Bu)&&(!(!F(e)||(0,v.W7)())||!function(e){let r=F(e);if(!r)return!0;let{withinMeter:n}=(0,b.X)(r);return n}(e)||c.zl.get(P).has(e)||(c.zl.get(C.dd)||c.zl.set(C.dd,(0,d.g)()),c.zl.set(R,{action:e,payload:r,guid:n})))}function U(e={}){let{dismissedAction:r,actionToClear:n}=e;if(c.zl.get(R)){if(n&&n!==c.zl.get(R)?.action)return;if(c.zl.set(R,null),r){let e=c.zl.get(P);c.zl.get(P).has(r)||c.zl.set(P,new Set([...e,r]))}}}function B(e){let r=i.Ez5.uiState().isUI3.getCopy(),n=s.D.getState().selectedView,a=(0,h.JV)(n);return!!(a&&a!==E.nT.Whiteboard&&(r||e))}let V=(0,I.n)((e,r)=>{let n=r?.isUI3??i.Ez5.uiState().isUI3.getCopy(),a=s.D.getState().selectedView,o=r?.editorType??(0,h.JV)(a);return!!(o&&(o===E.nT.Design||o===E.nT.Slides)&&(n||e))});class G{isQuickActionsShown(){return M(s.D.getState().dropdownShown)}}function H(){new G}},719624:(e,r,n)=>{n.d(r,{Bu:()=>y,Bw:()=>u,JB:()=>T,Lk:()=>_,Q8:()=>p,Rt:()=>h,Sf:()=>f,TT:()=>m,YH:()=>E,ZG:()=>I,dd:()=>g,fq:()=>v,hw:()=>w,jh:()=>S,rE:()=>b});var i=n(411855),a=n(627472),o=n(716034),s=n(418956),l=n(111956),c=n(743282),d=n(30075);let u=(0,a.tx)({}),m=(0,a.tx)(null),p=(0,a.tx)(""),h=(0,o.eU)((0,c.g)());(0,o.eU)({loaded:!1,extensions:[]});let _=(0,a.tx)(d.Jc.ALL),g=(0,a.tx)(null),f=(0,o.eU)(null);(0,o.eU)(null);let E=(0,a.tx)([]);(0,s.Iz)(e=>(0,o.eU)(r=>{let[n]=r(E);return n?.name===e}));let y=(0,o.eU)(!1),b=(0,o.eU)(null),v=(0,o.eU)(0),I=(0,o.eU)(!1);function T(){let e=(0,l.AY)(m);return(0,i.useCallback)(()=>{e()},[e])}function S(){let e=(0,l.AY)(m),r=(0,l.AY)(p),n=(0,l.AY)(E),a=(0,l.AY)(_);return(0,i.useCallback)(()=>{e(),r(),n(),a()},[n,r,e,a])}function w(){let e=(0,l.AY)(p);return(0,i.useCallback)(()=>{e()},[e])}(0,o.eU)(null),(0,o.eU)(null)},199819:(e,r,n)=>{n.d(r,{P:()=>l});var i=n(411855),a=n(256296),o=n(140686);n(163023);var s=n(371325);function l(e){let r=i.createElement(a.h,null,e.label);return i.createElement("div",{className:s.kv},i.createElement(o.S,{checked:e.checked,disabled:e.disabled,label:r}))}},606432:(e,r,n)=>{n.d(r,{y:()=>u});var i=n(411855),a=n(946689),o=n(154254),s=n(939863),l=n(498606),c=n(222478),d=n(610043);function u({variant:e,helpUrlVariant:r}){let[n,u]=i.useState(!1);return i.createElement(a.N_,{className:o.cx.hAuto.$,trusted:!0,href:function(e){switch(e){case c.JT.TRANSLATE_TEXT:case c.JT.REWRITE_TEXT:case c.JT.SHORTEN_TEXT:return c.pY;case c.JT.SLIDES_REWRITE_TEXT:return c.rr;case c.JT.FIRST_DRAFT:case c.JT.FIRST_DRAFT_MAKE_CHANGES:case c.JT.FIRST_DRAFT_MAKE_KIT:case c.JT.FIRST_DRAFT_MAKE_KIT_DEBUG:case c.JT.FIRST_DRAFT_COMPONENTIZE:case c.JT.FIRST_DRAFT_SUGGEST_PROPS:case c.JT.FIRST_DRAFT_LINTING:case c.JT.FIRST_DRAFT_DEBUG:case c.JT.FIRST_DRAFT_FINE_TUNE:return c.zw;case c.JT.GENERATE_IMAGE:case c.JT.REMOVE_BACKGROUND:case c.JT.UPSCALE_IMAGE:return c.LC;case c.JT.AUTO_RENAME_LAYERS:return c.gj;case c.JT.MAGIC_LINK:case c.JT.MAGIC_LINK_V2:return c.Xy;case c.JT.CONTENT_FILL:return c.KL;case c.JT.BOARD_TO_DECK:return c.TJ;case c.JT.SLIDES_GENERATE_SPEAKER_NOTES:return c.GI;case c.JT.FIND_INSPIRATION:case c.JT.TEXT_SEARCH:return c.IA;case c.JT.IMAGE_TO_DESIGN:case c.JT.MAKE_EDITS:case c.JT.ASSISTANT_CHAT:case c.JT.DETECT_VIOLATIONS:case"default":return c.d7}}(r),target:"_blank",onClick:e=>e.stopPropagation(),"data-tooltip":(0,s.t)("qa.learn_more"),"data-tooltip-type":l.Ib.TEXT,"data-tooltip-show-above":!0,onFocus:()=>{u(!0)},onBlur:()=>{u(!1)}},i.createElement(d.E,{variant:e,focused:n},(0,s.tx)("qa.ai_beta")))}},891487:(e,r,n)=>{n.d(r,{F1:()=>w,TH:()=>I,kz:()=>v,qI:()=>h,s3:()=>f});var i=n(411855),a=n(140593),o=n(966712),s=n(498750),l=n(563706),c=n(153234),d=n(283942),u=n(922358),m=n(65633),p=n(30075);function h(){let[e,r]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{let e=e=>{"Tab"===e.key&&g((0,m.x)())&&r(document.activeElement!==document.body)},n=()=>{r(!1)};return document.addEventListener("keydown",e,!0),document.addEventListener("mousedown",n,!0),()=>{document.removeEventListener("keydown",e,!0),document.removeEventListener("mousedown",n,!0)}},[]),e}let _=i.createContext({registerKeyDownHandler:(e,r,n,i)=>{},removeKeyDownHandler:(e,r,n)=>{},setAllowDefaultTabOverride:e=>{}}),g=(e,r)=>{if(!(0,o.kc)().qa_allow_default_tab||!e)return!1;if(void 0!==r)return r;switch(e){case p.Jc.ALL:case p.Jc.EXTENSIONS:case p.Sn.PLUGIN_PARAMETER_ENTRY:case p.Sn.PLUGIN_SUBMENU_ENTRY:case p.Jc.ASSETS:case p.Sn.ASSETS_TAB_DETAIL_VIEW:case p.Sn.ASSISTANT_CHAT:case p.Sn.FIRST_DRAFT_MAKE_KIT:case p.Sn.FIRST_DRAFT_LINT:case p.Sn.FIRST_DRAFT_DEBUG:case p.Sn.FIRST_DRAFT_MAKE_KIT_DEBUG:case p.Sn.LINK_TO_COMPONENT:case p.Sn.IMAGE_TO_DESIGN:case p.Sn.FIRST_DRAFT_KIT_PICKER:return!1;case p.Sn.BACKGROUND_REMOVE_TOAST:case p.Sn.UPSCALE_IMAGE_TOAST:case p.Sn.FIRST_DRAFT_MAKE_CHANGES:case p.Sn.MAKE_EDITS:case p.Sn.FIRST_DRAFT_FINE_TUNE:case p.Sn.MAGIC_LINK:case p.Sn.MAGIC_LINK_DONE_TOAST:case p.Sn.REGENERATE_TEXT_TOAST:case p.Sn.RENAME_LAYERS_TOAST:case p.Sn.SHORTEN:case p.Sn.EXTENSION_DETAILS:case p.Sn.TRANSLATE:case p.Sn.VISUAL_SEARCH:case p.Sn.DETECT_VIOLATIONS:case p.Sn.REWRITE:case p.Sn.FIRST_DRAFT:case p.Sn.GENERATE_IMAGE:case p.Sn.FOR_TESTING:return!0;default:(0,a.xb)(e)}};function f({name:e,recordingKey:r,children:n,forwardUnhandledEventsToFullscreen:a=!0}){let o=i.useRef(new Map),l=i.useRef(null),[p,h]=i.useState(void 0),f=(0,m.x)(),E=i.useCallback(e=>{"Tab"!==e.key||g(f,p)||e.preventDefault();let r=S({key:e.keyCode,modifier:[e.metaKey?s.xH.META:void 0,e.ctrlKey?s.xH.CONTROL:void 0,e.altKey?s.xH.ALT:void 0,e.shiftKey?s.xH.SHIFT:void 0].filter(e=>!!e)}),n=!1;for(let[i,a]of o.current)i.endsWith(r)&&(a(e),n=!0);return!n&&a&&(n=(0,d.jr)(e)),n},[f,p,a]),y=(0,c.v_)(r,"keydown",e=>{E(e)}),b=(0,c.fo)((0,c.Pt)(r,"fullscreen"),"keydown",e=>{E(e.event)&&e.accept()});return i.useEffect(()=>{let e=l.current;if(e)return e.addEventListener("keydown",y),()=>{e.removeEventListener("keydown",y)}},[y]),i.createElement(_.Provider,{value:{registerKeyDownHandler:(e,r,n,i)=>{let a=T({id:e,key:r,modifier:n});o.current.set(a,i)},removeKeyDownHandler:(e,r,n)=>{let i=T({id:e,key:r,modifier:n});o.current.delete(i)},setAllowDefaultTabOverride:h}},i.createElement(u.vL,{name:e,handleKeyDown:b,focusOnMount:!0},i.createElement("div",{ref:l},n)))}function E(e){return e!==s.xH.META||l.Ay.mac?e:s.xH.CONTROL}function y({key:e,modifier:r}){return r?{key:e,modifier:r.map(E)}:{key:e}}function b(e,r,n,o){let l=i.useMemo(()=>r.map(y),[r]),c=i.useId(),{registerKeyDownHandler:d,removeKeyDownHandler:u}=i.useContext(_),m=i.useCallback(e=>{for(let{key:r,modifier:i}of l)if(e.keyCode===r&&(!i||i.every(r=>(function(e,r){switch(e){case s.xH.META:return r.metaKey;case s.xH.CONTROL:return r.ctrlKey;case s.xH.ALT:return r.altKey;case s.xH.SHIFT:return r.shiftKey;default:(0,a.xb)(e)}})(r,e)))){n(e,{key:r,modifier:i});return}},[n,l]);i.useEffect(()=>(o?l.forEach(({key:e,modifier:r})=>{d(c,e,r??[],m)}):l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])}),()=>{l.forEach(({key:e,modifier:r})=>{u(c,e,r??[])})}),[o,l,m,d,u,c])}function v(e,r,n=!0){b("keydown",[{key:e}],r,n)}function I(e,r,n=!0){b("keydown",e,r,n)}function T({id:e,key:r,modifier:n}){return`${e}-${S({key:r,modifier:n})}`}function S(e){return`${e.key}-${e.modifier?.join("-")??""}`}function w(e){return S(e)}},849232:(e,r,n)=>{n.d(r,{v:()=>L});var i=n(411855),a=n(343887),o=n(226814),s=n(629019),l=n.n(s),c=n(966712),d=n(153234),u=n(163023),m=n(154254),p=n(939863),h=n(259927),_=n(483990),g=n(498606),f=n(432704),E=n(660510),y=n(72211),b=n(562432),v=n(362991),I=n(452362),T=n(695426),S=n(925330),w=n(377849);let A="search";function C({onClear:e,focus:r}){return i.createElement(a.K,{"aria-label":(0,p.t)("search.search_bar.clear"),onClick:n=>{n.stopPropagation(),e(),r()},htmlAttributes:{"data-tooltip":(0,p.t)("search.search_bar.clear"),"data-tooltip-type":g.Ib.TEXT}},i.createElement(o.C,{style:{"--color-icon":"var(--color-icon-secondary)"}}))}let N=(0,i.forwardRef)(({searchQuery:e,onSearchChange:r,placeholder:n,onPaste:a},o)=>i.createElement("input",{type:(0,c.kc)().fpl_a11y_quickactions_input_search?"search":void 0,ref:o,className:l()(S.Rt,h.Dm),placeholder:n??(0,_.A)("quick-actions-with-wand-modal-placeholder"),onChange:r,onPaste:a,value:e,maxLength:150,spellCheck:!1,dir:"auto","aria-autocomplete":"list","data-component":"QuickActionsV2SearchInput"})),L=(0,i.forwardRef)(({searchQuery:e,onSearchChange:r,onClear:n,endEnhancer:a,placeholder:o,forceRoot:s,searchTag:c,onPaste:p},h)=>{let _=i.useRef(null),{isRoot:g}=(0,b.cq)(),{focus:L}=(0,v.Y)(_);(0,i.useImperativeHandle)(h,()=>({focus:L}),[L]),(0,f.C)(_);let O=d.AF(A,"change",e=>{r(e.currentTarget.value)});return(0,E.z)(s),(0,y.y)(e,_),i.createElement("div",{className:l()(S.$P)},g||s?i.createElement(u.B,{svg:w.A,className:S.qc}):i.createElement("div",{className:m.cx.pl4.pr4.$},i.createElement(I.o,{recordingKey:(0,d.Pt)(A,"back-button")})),c,i.createElement(N,{onSearchChange:O,placeholder:o,searchQuery:e,onPaste:p,ref:_}),n&&e?i.createElement("div",{className:m.cx.flex.mr6.$},i.createElement(C,{onClear:n,focus:L})):a?i.createElement("div",{className:m.cx.mr6.$},i.createElement(T.b,null,a)):null)})},307292:(e,r,n)=>{n.d(r,{Kp:()=>p,w0:()=>h});var i=n(411855),a=n(188507),o=n(966712),s=n(293017),l=n(124271),c=n(261607),d=n(29680),u=n(396498),m=n(236373);function p(e){let r=h();return(0,i.useCallback)(()=>{r((0,l.NG)(e))},[r,e])}function h(){let e=function(){let e=(0,a.d4)(e=>e.recentlyUsedQuickCommands),r=(0,a.wA)();return(0,i.useCallback)(n=>{let i=(0,u.EG)(n),a=n.runPluginArgs,l=e.filter(e=>e.displayName!==i);l.unshift({displayName:i,runPluginArgs:a}),r(s.PQ(l)),(0,o.kc)().qa_frecency_recents_sync&&(0,m.s)({displayText:i,runPluginArgs:a,localFileIdOrPluginId:n.pluginLocalFileId??n.pluginId})},[r,e])}(),r=(0,c.c)(),n=(0,d.p8)("isReadOnly");return(0,i.useCallback)((i,a)=>{let o=(0,l.UK)({item:i,isReadOnly:n,extensionMenuProps:r,includeDisabled:!0,isSubmenuChild:a});o.length>1||e(o[0])},[e,r,n])}},977491:(e,r,n)=>{n.d(r,{Km:()=>eR,hc:()=>eF,jk:()=>ex,mX:()=>ek,wU:()=>eP,z6:()=>eD});var i=n(411855),a=n(140593),o=n(688009),s=n(75395),l=n(675507),c=n(935829),d=n(882316),u=n(38148),m=n(818150),p=n(298455),h=n(629019),_=n.n(h),g=n(776250),f=n(91408),E=n(320063),y=n(966712),b=n(418956),v=n(659302),I=n(860601),T=n(153234),S=n(96328),w=n(743282),A=n(154254),C=n(939863),N=n(501114),L=n(809840),O=n(153887),R=n(743905),P=n(271245),D=n(226055),k=n(511718),M=n(318812),F=n(669178),x=n(335682),U=n(336599),B=n(655401),V=n(173454),G=n(809073),H=n(498606),K=n(48515),W=n(426046),$=n(56063),Y=n(104261),z=n(287213),j=n(901304),q=n(239737),Z=n(132572),X=n(222478),J=n(54025),Q=n(562432),ee=n(24191),et=n(946465),er=n(30075),en=n(384775),ei=n(719624),ea=n(452362),eo=n(821597),es=n(695426),el=n(959686),ec=n(268645),ed=n(849232),eu=n(570428),em=n(343090),ep=n(459179),eh=n(891682),e_=n(853284),eg=n(994172),ef=n(311487),eE=n(501147),ey=n(614487),eb=n(652875),ev=n(276060),eI=n(699306),eT=n(173842),eS=n(572069),ew=n(719256),eA=n(663834),eC=n(374072),eN=n(124008),eL=n(125476),eO=n(243624);let eR="actions-asset-tab-library-filter",eP=300;function eD({initAssetSearch:e=!1,isVisualSearch:r=!1,initialTab:n=eb.Qx.PLAN_FILE_ASSETS,initialSearchTagType:u,closeOnEscape:m=!1}){let{currentSearch:p}=(0,b.md)(J.WP),h=(0,b.md)(R.hO.currentSearchAtom),L=(0,b.md)(R.hO.currentCommunitySearchAtom),j=(0,e_.V)(),ee=(0,q.Ko)(),[er,en]=(0,b.fp)(ei.Q8),ea=(0,v.Xr)(ei.Rt),{recentFragments:em}=(0,R.cN)(!j),ey=(0,eT.U)(!0);(0,$.b)({disabled:!e});let eO=i.useRef(null),eD=i.useRef(null),eU=i.useRef(null),eB=(0,ef.w5)(L),eV=(0,et._M)({action:r?X.JT.FIND_INSPIRATION:X.JT.TEXT_SEARCH,clientLifecycleId:void 0});(0,B.C)(),i.useEffect(()=>{if(r)return()=>{(0,eg.R)(),b.zl.set(J.WP,{currentSearch:null})}},[r]);let eG=r?R.G4.ACTIONS_VISUAL_SEARCH_VIEW:R.G4.ACTIONS_ASSETS_TAB_DETAIL,{close:eH}=(0,Q.cq)(),eK=(0,Y.j)(),{libraries:eW,presets:e$}=(0,z.g)(),eY=eK.localAssets,ez=r?0===eW.length:0===eY.numComponents&&0===eY.numTemplates&&0===eW.length&&0===e$.length,ej=(0,D.GS)(),eq=i.useMemo(()=>(0,W.N2)(ej,!0),[ej]),{onToggleLibraryModal:eZ}=(0,k.u)({entrypoint:eq,modalType:"editor",initialTab:V.Wv.TEAM_LIBRARIES}),eX=i.useCallback(()=>{eH(),eZ()},[eH,eZ]),eJ={title:(0,C.t)("assets_in_actions.browse_libraries_button"),onAction:()=>{eX()},recordingKey:"assetsTab.assetsBrowseLibraries"},eQ=i.useCallback(()=>{(0,eE.k)()},[]),{debouncedAssetSearch:e0,clearAssetSearchAndCancelDebounce:e1,cancelDebouncedAssetSearch:e2,flushDebouncedAssetSearch:e5}=(0,J.TC)({debounceWait:eP,onSearchSuccess:eQ}),{debouncedFragmentTextSearch:e3,clearFragmentSearchAndCancelDebounce:e6,cancelDebouncedFragmentTextSearch:e8,flushDebouncedFragmentTextSearch:e4}=(0,eh.S)({debounceWait:eP,entryPoint:eG,onSearchSuccess:eQ}),{debouncedFragmentTextSearch:e9,cancelDebouncedFragmentTextSearch:e7,clearFragmentSearchAndCancelDebounce:te,flushDebouncedFragmentTextSearch:tt}=(0,eh.S)({debounceWait:eP,entryPoint:eG,isCommunity:!0,onSearchSuccess:eQ}),[tr,tn]=i.useState({type:K.I.ALL}),ti=r?"actions-visual-search-library-filter":eR,ta=(0,M.Um)(),to=!r||ee,[ts,tl,tc]=o.t.useTabs({[eb.Qx.PLAN_FILE_ASSETS]:to,[eb.Qx.COMMUNITY]:!0},{defaultActive:n}),[td,tu]=(0,b.fp)(R.hO.sortByAtom),tm=(0,b.md)(O.CZ),[tp,th]=(0,i.useState)(u),t_=tp&&tc.activeTab===eb.Qx.PLAN_FILE_ASSETS;function tg(e){let n,o,u;switch(e){case eb.qG.COMPONENTS:n=A.cx.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgComponentTertiary.colorTextComponent.colorBorderComponent.$,o={"--color-icon":"var(--color-icon-component)"},u=i.createElement(l.k,{style:o});break;case eb.qG.DESIGNS:n=A.cx.flex.px4.itemsCenter.gap4.b1.radiusMedium.maxW150.colorBgBrandTertiary.colorTextBrand.colorBorderBrand.$,o={"--color-icon":"var(--color-icon-brand)"},u=i.createElement(c.q,{style:o});break;default:(0,a.xb)(e)}return i.createElement("div",{className:n,style:N.sx.add({paddingTop:"3px",paddingBottom:"3px",marginRight:"8px"}).$},i.createElement("div",{className:A.cx.flex.itemsCenter.justifyCenter.w16.h16.flexShrink0.$},u),i.createElement("span",{className:A.cx.truncate.$},e),i.createElement(s.E,{recordingKey:(0,T.Pt)(tJ,"dismiss"),onClick:()=>{if(!r)switch(e){case eb.qG.COMPONENTS:(0,R.G1)(er)&&e3(er);break;case eb.qG.DESIGNS:(0,J.kN)(er)&&e0(er,{type:K.I.ALL})}tr.type!==K.I.ALL&&p&&(0,J.ES)({...p.input,assetTypeOption:{type:K.I.ALL}}),"percent_match"!==td&&tu("percent_match"),tm&&(b.zl.set(O.q4),h&&(0,R.Hl)(h?.input,eG)),g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...ty,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,void 0)}),th(void 0)},className:A.cx.bgTransparent.$},i.createElement(d.f,{style:o})))}let tf=b.zl.get(ei.dd),tE=i.useMemo(()=>(0,eC.D)(tc.activeTab,tp),[tp,tc.activeTab]),ty=i.useMemo(()=>{let e={entryPoint:eG,session_id:tf||"",assets_tab_type:tE};return tc.activeTab===eb.Qx.COMMUNITY?{search_id:L?.searchId||"",query_type:L?.input.type,query_text:L?.input.type==="input-text"?L?.input.value:void 0,query_node_id:L?.input.type==="input-selection"?L?.input.node.guid:void 0,...e}:tp===eb.qG.DESIGNS?{search_id:h?.searchId||"",query_type:h?.input.type,query_text:h?.input.type==="input-text"?h?.input.value:void 0,query_node_id:h?.input.type==="input-selection"?h?.input.node.guid:void 0,...e}:{search_id:p?.queryId||"",query_type:p?.input.type,query_text:p?.input.type==="input-text"?p.input.query:"",query_node_id:p?.input.type==="input-selection"?p.input.node.guid:"",...e}},[eG,tf,tE,tc.activeTab,tp,p,L,h]),tb=i.useRef(null),tv=i.useCallback(e=>{let[r]=e;r.isIntersecting&&g.az.trackDefinedEvent("fragment_search.assets_details_panel_reached_bottom_of_scroll",{...ty,is_community_fragment_search:tc.activeTab===eb.Qx.COMMUNITY})},[ty,tc.activeTab]);i.useEffect(()=>{let e=new IntersectionObserver(tv,{threshold:1}),r=tb.current;return r&&e.observe(r),()=>{r&&e.unobserve(r)}},[tv]);let tI=i.useCallback(e=>{if(!r)switch(e){case eb.Qx.PLAN_FILE_ASSETS:e7(),(0,J.kN)(er)&&(e0(er,{type:K.I.ALL}),e5()),j&&(0,R.G1)(er)&&(e3(er),e4());break;case eb.Qx.COMMUNITY:j&&e8(),e2(),(0,R.G1)(er,!0)&&(e9(er),tt());break;default:(0,a.xb)(e)}tc.setActiveTab(ts[e].id),g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...ty,assets_tab_type:(0,eC.D)(e,tp)}),eD.current?.focus(),(0,eE.k)()},[r,tc,ts,ty,tp,e7,er,j,e0,e5,e3,e4,e8,e2,e9,tt]),tT=(0,eS.A)(),tS=(0,x.q5)(),tw=tT||tS?.name,tA=tw&&tw.length>20,tC=i.createElement(eu.fu,{value:tc.activeTab,onChange:I.lQ,numItems:to?2:1},i.createElement(eu.oz,{tabId:eb.Qx.PLAN_FILE_ASSETS,onAction:()=>tI(eb.Qx.PLAN_FILE_ASSETS),htmlAttributes:tA?{"data-tooltip":tw,"data-tooltip-type":H.Ib.TEXT}:void 0},tw&&(0,S.EJ)(tw,20)),i.createElement(eu.oz,{tabId:eb.Qx.COMMUNITY,onAction:()=>tI(eb.Qx.COMMUNITY)},(0,C.tx)("assets_in_actions.detail_view.community_tab.title"))),tN=(0,U.oh)(P.fi),tL=(0,F.g5)(G.$A.Design).productComponents,tO=!p&&!tN&&(!tL.length||(0,Z.kK)()),tR=!j||tO,tP=p?.result.status==="loading"||!p&&!r&&tN,tD=em?em.length:0,tk=!tp||tp===eb.qG.COMPONENTS,tM=!tp&&!tR&&(!!h||tD>0)||tp===eb.qG.DESIGNS,tF=j&&(!tp||tp===eb.qG.DESIGNS),tU=tR||!!tp,tB=tc.activeTab===eb.Qx.PLAN_FILE_ASSETS,tV=tc.activeTab===eb.Qx.COMMUNITY,tG=i.useCallback(e=>{en(e),ea((0,w.g)()),tk&&(tB||0===e.length)&&e0(e,{type:K.I.ALL}),tF&&(tB||0===e.length)&&e3(e),(tV||0===e.length)&&e9(e)},[en,ea,tB,tV,e0,e3,e9,tk,tF]),tH=p?.queryId,tK=h?.searchId,tW=L?.searchId,t$=i.useCallback(()=>tB&&tF?tK:tV?tW:void 0,[tK,tW,tF,tB,tV]),tY=i.useCallback(()=>{if(tB&&tk)return tH},[tH,tB,tk]),tz=i.useCallback((e,r,n,i,a,o)=>{let s;let l=tV?L:tk?p:h;tV&&L?.input.type==="input-text"?s=L?.input.value:tk&&p?.input.type==="input-text"?s=p?.input.query:h?.input.type==="input-text"&&(s=h?.input.value),(0,g.sx)("Search Feedback",{feedbackType:e,feedback:r,activeTab:tE,clientLifecycleId:n,entryPoint:i,fileKey:a,inputText:s,inputType:l?.input.type,queryId:tY(),searchId:t$(),sessionId:o})},[h,p,L,tY,t$,tV,tk,tE]),tj=i.useCallback((e,r)=>{tz(e.toString(),r,eV.clientLifecycleId,eG,eV.file_key,eV.quick_actions_session_id)},[tz,eV,eG]),tq=i.useCallback((e,r)=>{tz(e.toString(),r,eV.clientLifecycleId,eG,eV.file_key,eV.quick_actions_session_id)},[tz,eV,eG]),tZ=(0,eN.s)();(0,E.h)(()=>(g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...ty}),()=>{ek(b.zl.get(ei.Q8),I.lQ,j,!0,tZ,R.G4.ACTIONS_ASSETS_TAB_DETAIL),b.zl.set(O.q4)}));let tX=(()=>{switch(tc.activeTab){case eb.Qx.PLAN_FILE_ASSETS:return tH;case eb.Qx.COMMUNITY:return tW;default:(0,a.xb)(tc.activeTab)}})(),tJ=r?"visualSearchView":"assetsDetailView",tQ=!L||"disabled"===L.result.status;if(r&&tQ)return i.createElement(ef.o1,{aiTrackingContext:eV});let t0=ez&&(er.length>0||r),t1=!t0&&(tp===eb.qG.COMPONENTS||!j),t2=tp===eb.qG.DESIGNS&&!!h;return i.createElement(el.n,{width:(0,f.jz)(eL.X),height:480,bodyFontMedium:!0,dataTestId:tJ,recordingKey:tJ,gatherFeedback:(0,y.kc)().visual_search_feedback,aiTrackingContext:eV,rateOutputStrOverride:(0,C.t)("qa.rate_output_helpful"),sentimentFeedbackCallback:tj,additionalFeedbackCallback:tq},r&&i.createElement(eo.t,{ref:eO,key:tX}),i.createElement(el.n.Header,null,i.createElement("div",{className:A.cx.flex.flexColumn.$,ref:eU},r?i.createElement(eM,{searchTag:t_?tg(tp):void 0}):i.createElement(ed.v,{ref:eD,searchQuery:er,onSearchChange:tG,forceRoot:m,onClear:()=>{th(void 0),en(""),e1(),j&&e6(),te()},onPaste:e=>ex(e),endEnhancer:i.createElement(eF,{activeTab:tc.activeTab===eb.Qx.PLAN_FILE_ASSETS&&ee?eb.xA.COMPONENTS:eb.xA.COMMUNITY}),placeholder:ey,searchTag:t_?tg(tp):void 0}),to&&i.createElement("div",{className:A.cx.if(r,A.cx.py4).px8.if(!r,A.cx.pb8).$},i.createElement(es.b,{primary:!1,gap:8,align:"center",justify:"space-between"},tC,i.createElement(o.t.TabPanel,{...tl[eb.Qx.PLAN_FILE_ASSETS]},i.createElement("div",{className:A.cx.if(!r,A.cx.h24).if(r,A.cx.h32).flex.itemsCenter.$},t1&&i.createElement(ew.i,{assetPanelItems:eK,onSetAssetType:e=>{if(p)switch(p.input.type){case"input-image":case"input-selection":if(!r)throw Error("Cannot run text search on visual input");tn(e),(0,J.ES)({...p.input,assetTypeOption:e});return;case"input-text":if(r)throw Error("Cannot run visual search on text input");tn(e),e0(er,e),e5();return;default:(0,a.xb)(p.input)}},value:tr,id:ti,dataTestId:ti,recordingKey:ti,role:"button",showTooltipOnEllipsis:!0,dropdownShown:ta}),t2&&i.createElement(ep.s,{containerRef:eU,entryPoint:eG}))),i.createElement(o.t.TabPanel,{...tl[eb.Qx.COMMUNITY]},i.createElement("div",{className:A.cx.if(!r,A.cx.h24).if(r,A.cx.h32).flex.itemsCenter.$})))))),i.createElement(el.n.Body,{key:eB},i.createElement(eb.wg.Provider,{value:{activeTabId:tc.activeTab}},to&&i.createElement(o.t.TabPanel,{...tl[eb.Qx.PLAN_FILE_ASSETS]},i.createElement(eb.ZD.Provider,{value:{activeSearchTag:tp}},i.createElement(ec.q,{key:tH},ez&&!j?i.createElement(eA.S,{fillHeight:!0},i.createElement(W.Ee,{onClickExplore:eH,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):i.createElement("div",{className:_()(A.cx.gap6.if(tU,A.cx.hFull).$)},tk&&i.createElement(ev.O,{header:!tp&&j?{title:(0,C.t)("assets_in_actions.assets_section.title"),icon:i.createElement(l.k,null),seeMore:t0?eJ:{title:(0,C.t)("assets_in_actions.see_more_button"),onAction:()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...ty,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.COMPONENTS)}),g.az.trackDefinedEvent("asset_search.see_more",{...ty}),th(eb.qG.COMPONENTS)},recordingKey:tJ+".assetsSeeMore"}}:void 0,numberOfGridColumns:5,maxResults:!tp&&j?5:void 0,stretchEmptyStates:tU,noLibraries:t0}),tM&&i.createElement(eI.M,{header:tp?void 0:{title:(0,C.t)("assets_in_actions.fragments_section.title"),icon:i.createElement(c.q,null),seeMore:{title:(0,C.t)("assets_in_actions.see_more_button"),onAction:()=>{g.az.trackDefinedEvent("asset_search.actions_search_panel_open",{...ty,assets_tab_type:(0,eC.D)(eb.Qx.PLAN_FILE_ASSETS,eb.qG.DESIGNS)}),(0,g.sx)("Fragment search see more",{...(0,R.d3)(eG,tf,h?h.searchId:"",h?h.input:null,!1,void 0,!1)}),th(eb.qG.DESIGNS)},recordingKey:tJ+".fragmentsSeeMore"}},focusHandle:r?eO:eD,isCommunity:!1,numberOfGridColumns:3,stretchEmptyStates:tU,maxResults:tp?void 0:3,entryPoint:eG,forceLoadingState:tP,initialState:r?void 0:{type:"recents",recents:em},lastSearchResultRef:tb}))))),i.createElement(o.t.TabPanel,{...tl[eb.Qx.COMMUNITY]},i.createElement(ec.q,{key:tW},i.createElement(eI.M,{focusHandle:eO,numberOfGridColumns:3,stretchEmptyStates:!0,isCommunity:!0,initialState:r?void 0:{type:"recents",recents:[]},entryPoint:eG,lastSearchResultRef:tb}))))))}function ek(e,r,n,i,a,o){let s=b.zl.get(ei.dd),l=b.zl.get(x.ze);if(!s||!l)return;let{currentSearch:c}=b.zl.get(J.WP),d=c?.input.assetTypeOption,u=b.zl.get(O.CZ),m=b.zl.get(R.hO.sortByAtom),p=d?.type!==K.I.ALL;e&&(n&&((0,R.G1)(e)||u||"percent_match"!==m)&&(0,R.Hl)({type:"input-text",value:e,file_key:l},o),((0,J.kN)(e)||p)&&(0,J.ES)({type:"input-text",query:e,assetTypeOption:{type:K.I.ALL},isKnownLibrary:a}),i&&(0,R.G1)(e,!0)&&(0,R.Hl)({type:"input-text",value:e,file_key:l},o,void 0,void 0,void 0,!0)),r()}function eM({searchTag:e}){let r;let n=(0,b.md)(R.hO.currentCommunitySearchAtom),a=(0,q.Ko)(),o=i.useRef(null),s=(0,em.U)();switch(n?.input.type){case"input-image":r=n.input.imageFile.name;break;case"input-selection":r=n.input.name;break;default:r=void 0}return i.createElement("div",{className:A.cx.flex.itemsCenter.justifyBetween.px8.py12.if(a,A.cx.bSolid.bb1.colorBorder).$,ref:o},i.createElement("div",{className:A.cx.flex.gap6.itemsCenter.$},i.createElement(ea.o,{recordingKey:(0,T.Pt)(s,"backButton")}),i.createElement(L.E,{fontSize:13},(0,C.tx)("asset_suggestions.visual_search_results_title")),i.createElement(L.E,{fontSize:13,color:"secondary"},r),e))}function eF({activeTab:e,recordingKey:r}){let n=i.useRef(null),{active:a}=(0,ee.H)({ref:n,focusOptions:{enableAutoFocus:!1}});return i.createElement(s.E,{ref:n,"aria-label":(0,C.t)("asset_suggestions.visual_search_icon_button_tooltip"),onClick:()=>(function(e){(0,g.sx)("Visual search in search bar clicked",{has_selection:p.UN().getCurrentPage()?.directlySelectedNodes?.length===1,session_id:b.zl.get(ei.dd)}),(0,j.XG)({action:"find-inspiration",isSearchResult:!1,searchPosition:null,numSearchResults:null,rankingAlgorithm:null,moduleFilters:null});let r=e===eb.xA.COMMUNITY?eb.Qx.COMMUNITY:eb.Qx.PLAN_FILE_ASSETS;(0,en.$I)({moduleToOpen:{type:"custom",module:(0,q.P5)()?i.createElement(eD,{initialTab:r,isVisualSearch:!0,closeOnEscape:!0}):i.createElement(ef.WS,{initialTab:e}),beforeModuleOpen:()=>(0,ef.jp)(R.G4.ACTIONS_SEARCH_BAR_ICON),name:er.Sn.VISUAL_SEARCH},trackingData:{source:"search_bar_visual_search_button"}})})(e),htmlAttributes:(0,y.kc)().fragment_search_tweaks?{"data-tooltip-type":H.Ib.SPECIAL,"data-tooltip-show-above":!0,"data-tooltip":ey.S,"data-tooltip-ai-beta-text":(0,C.t)("asset_suggestions.visual_search_icon_button_tooltip_with_beta_tag"),"data-tooltip-ai-beta-action":X.JT.FIND_INSPIRATION}:{"data-tooltip":(0,C.t)("asset_suggestions.visual_search_icon_button_tooltip"),"data-tooltip-type":H.Ib.TEXT,"data-tooltip-show-above":!0},recordingKey:r,className:_()(eO.g,{[eO.H]:a})},(0,y.kc)().fragment_search_tweaks?i.createElement(u.T,null):i.createElement(m.A,null))}function ex(e){if(!(0,y.kc)().visual_search_on_paste)return;let r=e.clipboardData.files;if(1===r.length&&r[0]?.type.startsWith("image/")){let n=r[0];e.preventDefault(),(0,en.$I)({moduleToOpen:{type:"custom",module:(0,y.kc)().hub_file_fragments?i.createElement(eD,{isVisualSearch:!0,initAssetSearch:!0,closeOnEscape:!0}):i.createElement(ef.WS,null),beforeModuleOpen:()=>(0,ef.qF)(R.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE,n),name:er.Sn.VISUAL_SEARCH},trackingData:{source:R.G4.ACTIONS_SEARCH_BAR_PASTED_IMAGE}})}}},276060:(e,r,n)=>{n.d(r,{O:()=>q});var i=n(411855),a=n(188507),o=n(756437),s=n(498481),l=n(629019),c=n.n(l),d=n(913817),u=n.n(d),m=n(560945),p=n(966712),h=n(418956),_=n(498750),g=n(723325),f=n(154254),E=n(939863),y=n(154483),b=n(501114),v=n(271245),I=n(453681),T=n(669178),S=n(335682),w=n(237929),A=n(336599),C=n(809073),N=n(48515),L=n(969504),O=n(545816),R=n(986231),P=n(811559),D=n(734017),k=n(132572),M=n(54025),F=n(829639),x=n(719624),U=n(750600),B=n(80265),V=n(321281),G=n(27892),H=n(943341),K=n(905641),W=n(663834),$=n(168519),Y=n(393068),z=n(796616),j=n(573213);function q({numberOfGridColumns:e=4,maxResults:r,stretchEmptyStates:n=!1,header:l,suggestion:d,onClickSuggestion:m,largeSpacing:y,noLibraries:b}){let{currentSearch:w}=(0,h.md)(M.WP),L=(0,a.d4)(S.tB),R=(0,O.O)(),P=(0,h.md)(I.oE),D=(0,T.g5)(C.$A.Design).productComponents,$=(0,A.oh)(v.fi),Y=(0,g.z3)("faux"),z=(0,F.s)(w),j="";w&&"input-text"===w.input.type?j=w.input.query:z&&(j=z.name);let q=y?12:8,X=!$&&l,Q=!X&&(0,p.kc)().qa_tab_border;if(!w&&!(0,k.kK)()&&$||w?.result.status==="loading")return i.createElement("div",{className:c()({[f.cx.mt8.$]:Q})},X&&i.createElement(Z,{title:l.title,icon:l.icon}),i.createElement(G.V,{columns:e,padding:q,gap:12},Array.from({length:r??3*e}).map((e,r)=>i.createElement(G.V.Item,{key:r},i.createElement("div",{className:f.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},i.createElement(H.Y,{animationDelay:150*r})),i.createElement("div",{className:f.cx.wFull.pt8.$},i.createElement(V.O.Container,null,i.createElement(V.O.SkeletonLine,{index:r}),i.createElement(V.O.SkeletonLine,{index:r,bottom:!0})))))));if(!w||"disabled"===w.result.status){if(0===D.length||(0,k.kK)())return i.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},i.createElement(W.S,{fillHeight:n},i.createElement(B.N,null,i.createElement(B.N.ArtworkIcon,null,i.createElement(o.W,null)),i.createElement(B.N.Text,{title:(0,E.t)("assets_in_actions.assets_section.initial_state.title"),dataTestId:"assets-grid-initial-state"}))));let a=D.slice(0,r??D.length).map((e,r)=>i.createElement(J,{key:e.node_id,asset:e,libraryNameByResourceId:R,fileNameByLibraryKey:P,assetTypeDropdownSelection:N.I.ALL,searchQuery:j,queryId:w?w.queryId:"",searchSessionId:h.zl.get(x.dd)??"",openFileKey:L?.key??"",sectionPosition:r,onDragStart:Y}));return i.createElement("div",{"data-testid":"recents-assets-grid"},l&&i.createElement(Z,{title:l.title,icon:l.icon,seeMore:l.seeMore}),i.createElement(K.a,null),i.createElement(U.x,{primary:!0,columns:e,padding:q,gap:12},a))}if("errors"===w.result.status)return i.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},l&&i.createElement(Z,{title:l.title,icon:l.icon,seeMore:l.seeMore}),i.createElement(W.S,{fillHeight:n},i.createElement(B.N,null,i.createElement(B.N.ArtworkIcon,{variant:"danger"},i.createElement(s.r,null)),i.createElement(B.N.Text,{title:(0,E.t)("assets_in_actions.assets_section.error.title"),subtitle:(0,E.t)("assets_in_actions.assets_section.error.description")}))));if(b)return i.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},l&&i.createElement(Z,{title:l.title,icon:l.icon,seeMore:l.seeMore}),i.createElement(W.S,{fillHeight:n},i.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,E.tx)("assets_in_actions.no_results_no_libraries.title"))));if(0===w.result.data.length)return i.createElement("div",{className:f.cx.if(n,f.cx.hFull).$},l&&i.createElement(Z,{title:l.title,icon:l.icon}),i.createElement(W.S,{fillHeight:n},i.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.$,"data-testid":"assets-grid-no-results"},(0,E.tx)("assets_in_actions.assets_section.no_results.title",{query:u()(j,{length:24})}))));let ee=w.result.data.slice(0,r??w.result.data.length).map((e,r)=>i.createElement(J,{key:e.node_id,asset:e,libraryNameByResourceId:R,fileNameByLibraryKey:P,assetTypeDropdownSelection:N.I.ALL,searchQuery:j,queryId:w?w.queryId:"",searchSessionId:h.zl.get(x.dd)??"",openFileKey:L?.key??"",sectionPosition:r,onDragStart:Y}));return d&&ee.push(i.createElement(U.x.Item,{key:"suggestion",fullWidth:!0,primaryAction:{text:"Search designs",shortcuts:[{key:_.Uz.ENTER}],onAction:m},singleClick:!0},i.createElement(U.x.GridItemHighlight,null,d))),i.createElement("div",null,l&&i.createElement(Z,{title:l.title,icon:l.icon,seeMore:l.seeMore}),i.createElement(K.a,null),i.createElement(U.x,{primary:!0,columns:e,padding:q,gap:12},ee))}function Z({title:e,icon:r,seeMore:n}){let a=n?i.createElement($.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):i.createElement("div",{className:f.cx.h24.$});return i.createElement(Y.X,{paddingHorizontal:16},r&&i.createElement(Y.X.Icon,null,r),i.createElement(Y.X.Title,{endEnhancer:a},e))}let X=(0,y.fv)();function J({asset:e,libraryNameByResourceId:r,fileNameByLibraryKey:n,assetTypeDropdownSelection:a,searchQuery:o,openFileKey:s,sectionPosition:l,onDragStart:c,disableActionShortcuts:d}){let u;let m=X(e),h=m?r?.[m]:void 0,_=e.library_key?n?.[e.library_key]:void 0,g=(0,p.u4)("ds_use_lib_keys",_,h);(0,p.kc)().asset_search_return_file_name&&e.file_name&&(u=e.file_name),u||(u=g);let{afterSuccessfulInsert:E,componentInsertSwapCallback:y}=(0,z.H$)({asset:e,assetTypeDropdownSelection:a,sectionPosition:l,openFileKey:s}),{primaryAction:b,secondaryAction:v,tertiaryAction:I}=(0,j.b)({asset:e,afterSuccessfulInsert:E,componentInsertSwapCallback:y,source:"assets_grid",disableActionShortcuts:d});return i.createElement(U.x.Item,{primaryAction:b,secondaryAction:v,tertiaryAction:I},i.createElement(U.x.GridItemHighlight,null,i.createElement(Q,{asset:e,sectionPosition:l,fileName:u,isSearch:!!o,onDragStart:c,afterSuccessfulInsert:E})),i.createElement(U.x.ItemFooter,null,i.createElement("div",{className:f.cx.pt8.flex.flexColumn.gap2.alignLeft.$},i.createElement("span",{className:f.cx.textBodyMedium.colorText.truncate.$},(0,w.kH)(e.name)),i.createElement("span",{className:f.cx.textBodyMedium.colorTextSecondary.truncate.$},u))))}function Q({asset:e,sectionPosition:r,isSearch:n,afterSuccessfulInsert:a,fileName:o,onDragStart:s}){let l=(0,R.Y)(e),c=(0,i.useRef)(null),[d,u]=i.useState({width:0,height:0});(0,m.wY)(c,()=>{u({width:c.current?.clientWidth??0,height:c.current?.clientHeight??0})});let p=(0,L.F)(e,D.K.ACTIONS_ASSETS,r,"Actions Component Search");return i.createElement("div",{className:f.cx.wFull.$,style:b.sx.add({aspectRatio:"1/1"}).$},i.createElement("div",{ref:c,className:f.cx.wFull.hFull.$},i.createElement(P.lX,{item:e,showName:!1,height:d.height,width:d.width,draggable:{sourceForTracking:"actions_assets_tab",afterSuccessfulInsert:a,sectionNameForTracking:z.Bd,onDragStart:s},shouldHideTooltip:!0,isSearch:n,useBaseTile:!0,hideNameOverlay:!1,numVariants:l,displayType:"grid",sectionPosition:r,showTooltipImmediately:!1,fileName:o,alwaysShowBorder:!1,buttonProps:{onContextMenu:p}})))}},935871:(e,r,n)=>{n.d(r,{B:()=>et});var i=n(411855),a=n(188507),o=n(140593),s=n(688009),l=n(189904);n(629019),n(913817);var c=n(776250),d=n(91408),u=n(320063),m=n(418956),p=n(659302),h=n(860601),_=n(96328),g=n(743282),f=n(154254),E=n(939863),y=n(153887),b=n(743905);n(271245),n(511718);var v=n(318812),I=n(669178);n(335682),n(336599);var T=n(516703);n(173454);var S=n(809073),w=n(48515),A=n(426046),C=n(56063),N=n(104261),L=n(287213),O=n(239737);n(132572);var R=n(54025),P=n(562432),D=n(99888),k=n(999140),M=n(30075),F=n(719624),x=n(695426),U=n(959686),B=n(268645),V=n(849232),G=n(570428),H=n(459179),K=n(891682),W=n(853284);n(80265);var $=n(977491),Y=n(652875),z=n(276060),j=n(699306),q=n(173842),Z=n(572069),X=n(719256),J=n(663834),Q=n(124008),ee=n(125476);function et({initAssetSearch:e=!1,closeOnEscape:r=!1,initialTab:n=Y.xA.COMPONENTS}){let et=(0,W.V)(),er=(0,O.eH)(),en=(0,Z.A)(),ei=i.useRef(null),{currentSearch:ea}=(0,m.md)(R.WP),eo=(0,m.md)(b.hO.currentSearchAtom),es=(0,m.md)(b.hO.currentCommunitySearchAtom),[el,ec]=(0,m.fp)(F.Q8),ed=(0,p.Xr)(F.Rt),{recentFragments:eu}=(0,b.cN)(!et),em=(0,q.U)(et);(0,C.b)({disabled:!e});let{close:ep}=(0,P.cq)(),eh=(0,N.j)(),{libraries:e_,presets:eg}=(0,L.g)(),ef=eh.localAssets,eE=0===ef.numComponents&&0===ef.numTemplates&&0===e_.length&&0===eg.length,{debouncedAssetSearch:ey,clearAssetSearchAndCancelDebounce:eb,cancelDebouncedAssetSearch:ev,flushDebouncedAssetSearch:eI}=(0,R.TC)({debounceWait:$.wU}),{debouncedFragmentTextSearch:eT,clearFragmentSearchAndCancelDebounce:eS,cancelDebouncedFragmentTextSearch:ew,flushDebouncedFragmentTextSearch:eA}=(0,K.S)({debounceWait:$.wU,entryPoint:b.G4.ACTIONS_ASSETS_TAB_DETAIL}),{debouncedFragmentTextSearch:eC,cancelDebouncedFragmentTextSearch:eN,clearFragmentSearchAndCancelDebounce:eL,flushDebouncedFragmentTextSearch:eO}=(0,K.S)({debounceWait:$.wU,entryPoint:b.G4.ACTIONS_ASSETS_TAB_DETAIL,isCommunity:!0}),[eR,eP]=i.useState({type:w.I.ALL}),eD=(0,O.Nv)(ea?.input.type==="input-text"),ek=i.useCallback(e=>{c.az.trackDefinedEvent("asset_search.misc_feature_usage",{aiResultsEnabled:eD,entryPoint:"actions-assets-tab",featureSlug:"library-filter-usage"}),eP(e),ey(el,e),eI()},[ey,eI,el,eD]),eM=(0,Q.s)(),eF=i.useRef(null),[ex,eU,eB]=s.t.useTabs({[Y.xA.COMPONENTS]:!0,[Y.xA.FRAGMENTS]:et,[Y.xA.COMMUNITY]:er},{defaultActive:n});(0,u.h)(()=>()=>{m.zl.set(y.q4),(0,$.mX)(m.zl.get(F.Q8),h.lQ,et,er,eM,b.G4.ACTIONS_ASSETS_TAB_DETAIL)});let eV=(0,I.g5)(S.$A.Design).productComponents.length,eG=eu?eu.length:0,eH=(0,i.useMemo)(()=>eB.activeTab===Y.xA.COMPONENTS?eV:eB.activeTab===Y.xA.FRAGMENTS?eG:(eB.activeTab,Y.xA.COMMUNITY,0),[eV,eG,eB.activeTab]);!function({activeTab:e,numRecentItems:r,isEmptySearchQuery:n}){let o=(0,m.md)(F.dd),s=(0,m.md)(F.Rt),l=(0,a.d4)(T.l),{query:c,queryId:d,results:u,loaded:p}=function(e){let{currentSearch:r}=(0,m.md)(R.WP),n=(0,m.md)(b.hO.currentSearchAtom);return e===Y.xA.COMPONENTS?{query:r?.input.type==="input-text"?r.input.query:"",queryId:r?.queryId,results:r?.result.data||[],loaded:r?.result.status==="loaded"}:e===Y.xA.FRAGMENTS?{query:n?.input.type==="input-text"?n.input.value:"",queryId:n?.searchId,results:n?.result.data||[],loaded:n?.result.status==="loaded"}:{query:"",queryId:"",results:[],loaded:!1}}(e),h=(0,k.Ev)(),_=(0,i.useRef)(new Set),g=`${e}-${d}`;(0,i.useEffect)(()=>{(p||r>0&&n)&&!_.current.has(g)&&(h({quickActionsSessionId:o||"invalid-for-assets-tab",quickActionsQueryId:s,searchQuery:c,numSearchResults:p?u.length:r,currentSelection:l,module:M.Sn.ASSETS_TAB_DETAIL_VIEW,moduleFilters:e,qaVersion:D.$L,searchQueryResults:""}),_.current.add(g))},[h,o,s,l,g,e,c,u.length,p,r,n])}({activeTab:eB.activeTab,numRecentItems:eH,isEmptySearchQuery:0===el.length});let eK=i.useCallback(e=>{switch(e){case Y.xA.COMPONENTS:et&&ew(),er&&eN(),(0,R.kN)(el)&&(ey(el,eR),eI());break;case Y.xA.FRAGMENTS:ev(),er&&eN(),(0,b.G1)(el)&&(eT(el),eA());break;case Y.xA.COMMUNITY:et&&ew(),ev(),(0,b.G1)(el,!0)&&(eC(el),eO());break;default:(0,o.xb)(e)}eB.setActiveTab(ex[e].id),ei.current?.focus()},[ew,ey,eR,eI,ev,eT,eA,el,eB,ex,et,er,eN,eC,eO]),eW=i.useCallback(e=>{ec(e),ed((0,g.g)()),(eB.activeTab===Y.xA.COMPONENTS||0===e.length)&&ey(e,eR),et&&(eB.activeTab===Y.xA.FRAGMENTS||0===e.length)&&eT(e),er&&(eB.activeTab===Y.xA.COMMUNITY||0===e.length)&&eC(e)},[ec,ed,eB.activeTab,et,er,ey,eR,eT,eC]),e$=i.createElement(G.fu,{value:eB.activeTab,onChange:h.lQ,numItems:er?3:2},i.createElement(G.oz,{tabId:Y.xA.COMPONENTS,onAction:()=>eK(Y.xA.COMPONENTS)},(0,E.tx)("assets_in_actions.detail_view.components_tab.title")),et&&i.createElement(G.oz,{tabId:Y.xA.FRAGMENTS,onAction:()=>eK(Y.xA.FRAGMENTS)},(0,E.tx)("assets_in_actions.detail_view.fragments_tab.title")),er&&i.createElement(G.oz,{tabId:Y.xA.COMMUNITY,onAction:()=>eK(Y.xA.COMMUNITY)},(0,E.tx)("assets_in_actions.detail_view.community_tab.title"))),eY=ea?.queryId,ez=eo?.searchId,ej=es?.searchId,eq=et&&ea&&"loaded"===ea.result.status?i.createElement("div",{className:f.cx.flex.wFull.colorBgSecondary.itemsCenter.px8.py6.radiusMedium.$},i.createElement(l.N,{style:{"--color-icon":"var(--color-icon-brand)"}}),i.createElement("span",{className:f.cx.ml8.textBodyMedium.$},en?(0,E.tx)("assets_in_actions.fragments.fragment_search_sugggestion",{boldText:i.createElement("span",{className:f.cx.textBodyMediumStrong.$},(0,E.tx)("assets_in_actions.fragments.fragment_search_sugggestion_bold_text")),orgText:(0,_.EJ)(en,20)}):(0,E.tx)("assets_in_actions.fragments_section.empty_state.text")),i.createElement("span",{className:f.cx.mlAuto.textBodyMediumStrong.colorTextBrand.$},(0,E.tx)("assets_in_actions.fragments.fragment_search_sugggestion_hint"))):void 0,eZ=ea&&!eE,eX=(0,v.Um)(),eJ=i.useCallback(e=>{et&&(0,$.jk)(e)},[et]);return i.createElement(U.n,{width:(0,d.jz)(ee.X),height:480,bodyFontMedium:!0,dataTestId:"assetsDetailView"},i.createElement(U.n.Header,null,i.createElement("div",{ref:eF,className:f.cx.flex.flexColumn.$},i.createElement(V.v,{ref:ei,searchQuery:el,onSearchChange:eW,forceRoot:r,onClear:()=>{ec(""),eb(),et&&eS(),er&&eL()},onPaste:eJ,endEnhancer:et&&i.createElement($.hc,{activeTab:eB.activeTab}),placeholder:em}),(et||er||eZ)&&i.createElement("div",{className:f.cx.px8.pb8.$},i.createElement(x.b,{primary:!1,gap:8,align:"center",fullWidth:!0,justify:"space-between"},i.createElement("div",null,(et||er)&&e$),i.createElement("div",null,eZ&&i.createElement(s.t.TabPanel,{...eU[Y.xA.COMPONENTS]},i.createElement("div",{className:f.cx.h24.flex.itemsCenter.$},i.createElement(X.i,{assetPanelItems:eh,onSetAssetType:ek,value:eR,id:$.Km,dataTestId:$.Km,recordingKey:$.Km,role:"button",showTooltipOnEllipsis:!0,dropdownShown:eX}))),et&&i.createElement(s.t.TabPanel,{...eU[Y.xA.FRAGMENTS]},i.createElement("div",{className:f.cx.h24.flex.itemsCenter.$},eo&&i.createElement(H.s,{containerRef:eF,entryPoint:b.G4.ACTIONS_ASSETS_TAB_DETAIL}))),er&&i.createElement(s.t.TabPanel,{...eU[Y.xA.COMMUNITY]},i.createElement("div",{className:f.cx.h24.$}))))))),i.createElement(U.n.Body,null,i.createElement(Y.fJ.Provider,{value:{activeTabId:eB.activeTab}},i.createElement(s.t.TabPanel,{...eU[Y.xA.COMPONENTS]},i.createElement(B.q,{key:eY},eE?i.createElement(J.S,{fillHeight:!0},i.createElement(A.Ee,{onClickExplore:ep,fromActionsModal:!0,width_ui3:264,bgTransparentUI3:!0})):i.createElement(z.O,{numberOfGridColumns:6,stretchEmptyStates:!0,suggestion:et&&eq,onClickSuggestion:()=>{eK(Y.xA.FRAGMENTS)}}))),et&&i.createElement(s.t.TabPanel,{...eU[Y.xA.FRAGMENTS]},i.createElement(B.q,{key:ez},i.createElement(j.M,{focusHandle:ei,initialState:{type:"recents",recents:eu},stretchEmptyStates:!0,entryPoint:b.G4.ACTIONS_ASSETS_TAB_DETAIL}))),er&&i.createElement(s.t.TabPanel,{...eU[Y.xA.COMMUNITY]},i.createElement(B.q,{key:ej},i.createElement(j.M,{focusHandle:ei,stretchEmptyStates:!0,isCommunity:!0,initialState:{type:"recents",recents:[]},entryPoint:b.G4.ACTIONS_ASSETS_TAB_DETAIL}))))))}},699306:(e,r,n)=>{n.d(r,{M:()=>O});var i=n(411855),a=n(140593),o=n(498481),s=n(913817),l=n.n(s),c=n(418956),d=n(723325),u=n(154254),m=n(939863),p=n(743905),h=n(132572),_=n(829639),g=n(750600),f=n(916131),E=n(80265),y=n(931261),b=n(565548),v=n(602138),I=n(321281),T=n(27892),S=n(943341),w=n(192916),A=n(572069),C=n(663834),N=n(168519),L=n(393068);function O({focusHandle:e,entryPoint:r,initialState:n,numberOfGridColumns:a=3,maxResults:s,stretchEmptyStates:d=!1,header:g,forceLoadingState:f,hideEditorNames:y,isCommunity:N,largeSpacing:L,searchResultRef:O,lastSearchResultRef:D}){let k=(0,c.md)(N?p.hO.currentCommunitySearchAtom:p.hO.currentSearchAtom),M=(0,c.md)(p.hO.sortByAtom),F=(0,_.s)(k),x=(0,A.A)(),U=L?12:8,B=(0,h.kK)()||!x;if(n?.type==="recents"&&null===n.recents||k?.result.status==="loading"||f)return i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(T.V,{columns:a,padding:U,gap:12},Array.from({length:s??3*a}).map((e,r)=>i.createElement(T.V.Item,{key:r},i.createElement("div",{className:u.cx.wFull.flex.itemsCenter.justifyCenter.radiusMedium.$},i.createElement(S.Y,{animationDelay:150*r})),i.createElement("div",{className:u.cx.wFull.pt8.$},i.createElement(I.O.Container,null,i.createElement(I.O.SkeletonLine,{index:r}),i.createElement(I.O.SkeletonLine,{index:r,bottom:!0})))))));if(!k||"disabled"===k.result.status){if(!n)return null;let o=N?(0,m.t)("assets_in_actions.fragments_section.empty_state.header_community"):B?(0,m.t)("assets_in_actions.fragments_section.empty_state.header_generic"):(0,m.t)("assets_in_actions.fragments_section.empty_state.header",{orgText:x}),l=N?(0,m.t)("assets_in_actions.fragments_section.empty_state.text_community"):(0,m.t)("assets_in_actions.fragments_section.empty_state.text"),c=N?"community-fragments-grid-initial-state":"fragments-grid-initial-state";return n.recents?.length?i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),i.createElement(R,{fragments:n.recents,focusHandle:e,numberOfGridColumns:a,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:N,largeSpacing:L})):i.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},i.createElement(C.S,{fillHeight:d},i.createElement(E.N,null,i.createElement(E.N.ArtworkIllustration,{light:i.createElement(v.A,null),dark:i.createElement(b.A,null)}),i.createElement(E.N.Text,{title:o,subtitle:l,dataTestId:c}))))}if("errors"===k.result.status)return i.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(C.S,{fillHeight:d},i.createElement(E.N,null,i.createElement(E.N.ArtworkIcon,{variant:"danger"},i.createElement(o.r,null)),i.createElement(E.N.Text,{title:(0,m.t)("assets_in_actions.fragments_section.error.title"),subtitle:(0,m.t)("assets_in_actions.fragments_section.error.description")}))));if(0===k.result.data.length){let e="";return"input-text"===k.input.type?e=k.input.value:F&&(e=F.name),i.createElement("div",{className:u.cx.if(d,u.cx.hFull).$},g&&i.createElement(P,{title:g.title,icon:g.icon}),i.createElement(C.S,{fillHeight:d},i.createElement("span",{className:u.cx.textBodyMedium.colorTextSecondary.$},(0,m.tx)("assets_in_actions.fragments_section.no_results.title",{query:l()(e,{length:24})}))))}let V=(0,w.t)(k.result.data,M);return i.createElement("div",null,g&&i.createElement(P,{title:g.title,icon:g.icon,seeMore:g.seeMore}),i.createElement(R,{fragments:V,focusHandle:e,numberOfGridColumns:a,entryPoint:r,maxResults:s,hideEditorNames:y,isCommunity:N,largeSpacing:L,searchResultRef:O,lastSearchResultRef:D}))}function R({fragments:e,focusHandle:r,numberOfGridColumns:n,entryPoint:o,maxResults:s,hideEditorNames:l,isCommunity:c,largeSpacing:m,searchResultRef:p,lastSearchResultRef:h,disableActionShortcuts:_}){let E=(0,f.r)("fragments_grid",r,o,_),b=(0,d.z3)("faux");return i.createElement(g.x,{primary:!0,columns:n,padding:m?12:8,gap:12},e.slice(0,s??e.length).map((r,n)=>{let s=i.createElement(I.O.Container,null,i.createElement(I.O.Title,null,r.file_name),c?i.createElement(I.O.CommunityMetadata,{name:r.editor_name}):i.createElement(I.O.EditInfo,{editor:{name:r.editor_name,imageUrl:r.editor_img_url},lastEditedAt:r.last_edited_at,hideEditorName:l})),{primaryAction:d,secondaryAction:m,tertiaryAction:_}=E(r,n,null,e),f="";switch(r.type){case"fig-file-fragment":f=`${r.file_key}-${r.node_id}`;break;case"hub-file-fragment":f=`${r.hub_file_id}-${r.node_id}`;break;default:(0,a.xb)(r)}return i.createElement(g.x.Item,{key:f,primaryAction:d,secondaryAction:m,tertiaryAction:_},i.createElement(g.x.GridItemHighlight,null,i.createElement(y.a,{entryPoint:o,fragment:r,fragmentPosition:n,onDragStart:b,ref:0===n?p:n===e.length-1?h:null})),i.createElement(g.x.ItemFooter,null,i.createElement("div",{className:u.cx.pt8.$},s)))}))}function P({title:e,icon:r,seeMore:n}){let a=n?i.createElement(N.p,{onAction:n.onAction,recordingKey:n.recordingKey},n.title):i.createElement("div",{className:u.cx.h24.$});return i.createElement(L.X,{paddingHorizontal:16},i.createElement(L.X.Icon,null,r),i.createElement(L.X.Title,{endEnhancer:a},e))}},520103:(e,r,n)=>{n.d(r,{C:()=>er});var i=n(411855),a=n(188507);n(268853);var o=n(343887),s=n(755020),l=n(340860),c=n(297501),d=n(846627),u=n(418956),m=n(812115);n(776621);var p=n(96328),h=n(355819),_=n(163023),g=n(154254),f=n(939863),E=n(501114),y=n(67294),b=n(335666),v=n(970516),I=n(677664),T=n(756085),S=n(376485),w=n(498606),A=n(350913),C=n(222478),N=n(660510),L=n(562432),O=n(341255),R=n(724790),P=n(999140);n(30075);var D=n(821597),k=n(34762),M=n(959686),F=n(187703),x=n(28298),U=n(760445),B=n(315964),V=n(145755),G=n(60418),H=n(507847),K=n(436318),W=n(958473),$=n(486788),Y=n(401045),z=n(794412),j=n(110354);function q({augmentedExtension:e}){let{extension:r,publishedExtension:n}=e,{pop:a}=(0,L.cq)();(0,N.z)();let o=i.useRef(null),{onAction:s,actionText:l}=(0,O.m)({augmentedExtension:e,submenuRef:o,displayAboveTarget:!0}),c=B.H5.DETAILS,d=(0,V.D)({source:c,text:l,onAction:s,augmentedExtension:e,submenuRef:o,hideShortcutOnKeyboardFocus:!0}),u=(0,H.DS)(e);u&&(u=(0,P.M$)(u,c)),(0,F.k)({primaryAction:d,tertiaryAction:u,actionLabel:!0,active:!0,target:null});let m=(0,R.x)(),p=C.HW-48-41,_=n.unique_run_count,f=n.like_count;return i.createElement(M.n,{height:C.HW,width:m,dataTestId:"extension-details-view"},i.createElement(D.t,null),i.createElement(X,{extension:r,onGoBack:a}),i.createElement(h.P,{height:p,className:g.cx.px16.$},i.createElement(J,{imgUrl:r.redirect_cover_image_url,extensionName:r.name}),i.createElement(Q,{name:r.name,numLikes:f,numRuns:_}),i.createElement(ee,{publishedExtension:n}),i.createElement(et,{description:r.description})),i.createElement(K.Xq,{augmentedExtension:e}))}function Z({augmentedExtension:e}){let r=(0,u.md)(x.t);return i.createElement(G.M6,{numResults:1,moduleFilters:r},i.createElement(q,{augmentedExtension:e}))}function X({extension:e,onGoBack:r}){let n=(0,S.k0)(e),u=n?(0,f.t)("qa.extensions.widget"):(0,f.t)("qa.extensions.plugin"),m=e.plugin_id,p=function(e){let r=(0,a.wA)(),n=(0,S.k0)(e)?(0,A.ox)(e.plugin_id):(0,A.ab)(e.plugin_id);return(0,i.useCallback)(()=>{(0,d.e)(n)||r((0,I.RK)({rawInput:n}))},[r,n])}(e),h=(0,a.wA)(),_=i.useCallback(()=>{h(v.Pv({url:n?(0,A.ox)(m):(0,A.ab)(m),extensionType:n?"widget":"plugin"}))},[h,n,m]);return i.createElement("div",{className:g.cx.p8.$,style:E.sx.add({height:"48 px"}).$},i.createElement("div",{className:g.cx.flex.h32.px4.itemsCenter.justifyBetween.$},i.createElement("div",{className:g.cx.flex.flexRow.$},i.createElement(o.K,{onClick:r,"aria-label":(0,f.t)("qa.go_back")},i.createElement(s.C,null)),i.createElement("div",{className:g.cx.pl8.colorText.textBodyLarge.$},u)),i.createElement("div",{className:g.cx.flex.flexRow.itemsCenter.gap8.$},i.createElement(o.K,{onClick:p,"aria-label":(0,f.t)("qa.extensions.open_in_community"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.extensions.open_in_community"),"data-tooltip-type":w.Ib.TEXT}},i.createElement(l.N,null)),i.createElement(o.K,{onClick:_,"aria-label":(0,f.t)("qa.copy_link"),htmlAttributes:{"data-tooltip":(0,f.t)("qa.copy_link"),"data-tooltip-type":w.Ib.TEXT}},i.createElement(c.W,null)))))}function J({imgUrl:e,extensionName:r}){let n=(0,b.X)(e);return i.createElement("div",{className:g.cx.overflowHidden.bRadius5.mb12.$,style:E.sx.add({aspectRatio:n?"16/9":"2/1",background:"var(--color-loading)"}).$},i.createElement("img",{src:e,className:g.cx.hFull.wFull.eventsNone.$,style:E.sx.add({objectFit:"cover"}).$,alt:`Thumbnail for ${r}`}))}function Q({name:e,numLikes:r,numRuns:n}){return i.createElement("div",{className:g.cx.flex.flexRow.justifyBetween.$},i.createElement("div",{className:g.cx.colorText.textHeadingMedium.$},e),i.createElement("div",{className:g.cx.flex.flexRow.itemsCenter.gap8.colorTextSecondary.textBodyMedium.$},i.createElement("div",{className:g.cx.flex.flexRow.gap2.$},i.createElement(_.B,{svg:j.A,className:g.cx.colorIconSecondary.$,style:E.sx.add({margin:"3px"}).$}),i.createElement("div",null,(0,p.$M)(r))),i.createElement("div",{className:g.cx.flex.flexRow.gap2.$},i.createElement(_.B,{svg:z.A,className:g.cx.mx2.colorIconSecondary.$}),i.createElement("div",null,(0,p.$M)(n)))))}function ee({publishedExtension:e}){if(!e)return null;let r=e.community_publishers?.accepted[0];if(!r)return null;let{img_url:n,name:a}=r;return i.createElement("div",{className:g.cx.pt4.flex.flexRow.itemsCenter.justifyBetween.colorTextSecondary.textBodyMedium.$},i.createElement("div",{className:g.cx.flex.$},i.createElement(y.H8,{user:{img_url:n,name:a},size:y.Pf.SMALL16}),i.createElement("div",{className:g.cx.pl8.$},(0,U.kB)(e))),i.createElement("div",null,i.createElement(W.o,{publishedExtension:e,showTooltip:!0})))}function et({description:e}){return i.createElement("div",{className:g.cx.pt16.pb8.$},i.createElement(m.R,{value:e,quillClassName:Y.C,fallback:null,errorFallback:null}))}function er({extensionId:e,extensionType:r}){let{pop:n}=(0,L.cq)(),a=(0,T._P)(e,!0),o=(0,$.Oy)();if(!a.loaded)return i.createElement(k.R,null);let s=a.plugin;if(!s)return n(),null;let l=o(s,r);return(0,$.JT)(l)?(n(),null):l.publishedExtension?i.createElement(Z,{augmentedExtension:{...l,publishedExtension:l.publishedExtension}}):i.createElement(k.R,null)}},145755:(e,r,n)=>{n.d(r,{D:()=>d});var i=n(411855),a=n(901304),o=n(999140),s=n(891487);n(446888);var l=n(315964),c=n(60418);function d({source:e,text:r,onAction:n,augmentedExtension:d,submenuRef:u,hideShortcutOnKeyboardFocus:m=!1}){let p=(0,c.OX)(),h=(0,s.qI)();return i.useMemo(()=>{let i={text:r,shortcuts:m&&h?[]:[l.Hz],onAction:e=>{d&&(0,a.wI)({extensionId:d.extension.plugin_id,searchPosition:e.target?.index??0,numSearchResults:p.numResults,searchQuery:p.searchQuery,moduleFilters:p.moduleFilters}),n(e)},submenuRef:u};return(0,o.M$)(i,e)},[h,d,p.moduleFilters,p.numResults,p.searchQuery,m,n,e,u,r])}},60418:(e,r,n)=>{n.d(r,{M6:()=>l,OX:()=>c});var i=n(411855),a=n(418956),o=n(719624);let s=i.createContext(null);function l({numResults:e,moduleFilters:r,children:n}){return i.createElement(s.Provider,{value:{numResults:e,moduleFilters:r}},n)}function c(){let e=i.useContext(s),r=(0,a.md)(o.Q8);if(!e)throw Error("useExtensionMetrics must be used within a ExtensionMetricsProvider");return{...e,searchQuery:r}}},507847:(e,r,n)=>{n.d(r,{DS:()=>f});var i=n(188507),a=n(939863),o=n(71425),s=n(986270),l=n(813648),c=n(860178),d=n(331626),u=n(555328),m=n(376485),p=n(562432),h=n(583718),_=n(315964),g=n(486788);function f(e){let r=function(e){let r=(0,i.wA)(),n=(0,d.U_)(),{extension:l,types:c}=e,{unsave:u}=E(e);if(!(e.types.has(_.Ag.RECENT)||e.types.has(_.Ag.USER_SAVED)||e.types.has(_.Ag.LOCAL)))return;let p=!!((0,m.ZQ)(l)&&e.publishedExtension);return{displayText:p?(0,a.t)("universal_insert.remove_local_version"):(0,a.t)("universal_insert.remove"),callback:()=>{!(c.has(_.Ag.LOCAL)&&(0,m.ZQ)(l)&&(r(o.qR(l.localFileId)),p))&&(c.has(_.Ag.RECENT)&&n&&r(((0,m.k0)(l)?s.Kq:s.lD)({storeInRecentsKey:n,resourceId:l.plugin_id})),c.has(_.Ag.USER_SAVED)&&u())}}}(e),n=function(e){let{save:r}=E(e),n=(0,i.wA)(),o=(0,d.U_)(),l=(0,c.TA)();if(!e.types.has(_.Ag.USER_SAVED)&&!(0,g.JT)(e))return{displayText:(0,a.t)("community.saves.save"),callback:()=>{if(r(),o&&l){let{extension:r}=e;n(((0,m.k0)(r)?s.RH:s.gU)({storeInRecentsKey:o,id:r.plugin_id,version:e.extension.id,currentUserId:l,skipPluginRun:!0}))}}}}(e),l=r||n,{pop:u}=(0,p.cq)();if(l)return{shortcuts:[_.r7],onAction:()=>{l.callback(),u()},text:l.displayText}}function E(e){let{extension:r}=e,n=(0,h.zX)({extensionId:r.plugin_id});return(0,l._i)(r.plugin_id,(0,m.k0)(r)?u.vt.WIDGET:u.vt.PLUGIN,e.publishedExtension,n)}},436318:(e,r,n)=>{n.d(r,{S3:()=>v,U4:()=>b,Xq:()=>y,q8:()=>E});var i=n(411855),a=n(188507),o=n(268853),s=n(776621);n(154254),n(501114);var l=n(738269),c=n(620604),d=n(781267),u=n(261607),m=n(318812),p=n(376485),h=n(562432),_=n(307292),g=n(632788);let f="EXTENSION_SUBMENU_DROPDOWN";function E(e){return!!(e.manifest.menu&&e.manifest.menu.length>0)}function y({augmentedExtension:e}){let{extension:r}=e,n=(0,m.Um)(),a=b(r),l=(0,u.c)(),{close:p}=(0,h.cq)(),f=(0,_.w0)();if(!a||!r||!r.manifest||!r.manifest.menu)return null;let E=(0,c.z)(r.manifest.menu,r).map(e=>(0,d.aS)(e,e=>()=>{var r;(0,d.Im)(l,"quick-actions",e.menuAction),f(e,!0),("run-installed-plugin"!==(r=e.menuAction).type&&"run-local-plugin"!==r.type?((0,s.$D)(o.e.AI_FOR_PRODUCTION,Error("shouldSubmenuCloseQuickActions expected 'run-installed-plugin' or 'run-local-plugin'")),1):r.parameterOnly&&r.parameterEntry)||p()}));return i.createElement(g.ms,{parentRect:n?.data.targetRect,displayAboveTarget:n?.data.displayAboveTarget,lean:"left",minWidth:64,items:E})}function b(e){let r=(0,m.Um)();return(0,p.ZQ)(e)?r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===e.localFileId:r?.type===f&&r?.data.extensionId===e.plugin_id&&r?.data.localFileId===null}function v({submenuIsShown:e,extension:r,displayAboveTarget:n}){let o=(0,a.wA)();return i.useCallback(i=>{if(e)o(l.oB());else if(i){let e=i.getBoundingClientRect();o(l.j7({type:f,data:{extensionId:r.plugin_id,localFileId:(0,p.ZQ)(r)?r.localFileId:null,targetRect:e,displayAboveTarget:n}}))}},[o,e,r,n])}},958473:(e,r,n)=>{n.d(r,{o:()=>g});var i=n(411855),a=n(163023),o=n(154254),s=n(939863),l=n(809840),c=n(466636),d=n(555328),u=n(498606),m=n(112512);function p({publishedExtension:e,showTooltip:r}){if(!e.monetized_resource_metadata)return null;let n=(0,c.X2)(e.monetized_resource_metadata);return r?i.createElement("div",{"data-testid":"freemium-text",className:o.cx.flex.itemsCenter.gap4.$,"data-tooltip":n,"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")),i.createElement(a.B,{svg:m.A,className:o.cx.colorIconSecondary.$})):i.createElement("div",{"data-testid":"freemium-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.buyer.in_app_purchases")))}function h({publishedExtension:e}){return e.monetized_resource_metadata?i.createElement("div",{"data-testid":"free-trial-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.resource.free_trial_days",{days:e.monetized_resource_metadata.trial_length_in_days}))):null}function _({showTooltip:e}){return e?i.createElement("div",{"data-testid":"off-platform-text",className:o.cx.flex.itemsCenter.gap4.$,"data-tooltip":(0,s.t)("community.detail_view.resource_outside_of_figma"),"data-tooltip-type":u.Ib.TEXT,"data-tooltip-show-below":!0,"data-tooltip-show-immediately":!0},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")),i.createElement(a.B,{svg:m.A,className:o.cx.colorIconSecondary.$})):i.createElement("div",{"data-testid":"off-platform-text"},i.createElement(l.E,{fontSize:11},(0,s.tx)("community.detail_view.third_party_badge.off_platform")))}function g({publishedExtension:e,showTooltip:r}){return(0,d.PM)(e)?i.createElement(p,{publishedExtension:e,showTooltip:r}):(0,c.Lt)({resource:e,payment:e.community_resource_payment})?i.createElement(h,{publishedExtension:e}):(0,d.zF)(e)?i.createElement(_,{showTooltip:r}):null}},486788:(e,r,n)=>{n.d(r,{JT:()=>u,Oy:()=>d});var i=n(411855),a=n(756085);n(258237),n(782501);var o=n(269167),s=n(694687);n(860178);var l=n(215822),c=n(376485);function d(){let e=(0,a.tB)(),r=(0,a.ll)(),n=(0,a.U6)(),d=(0,a.cW)(),u=(0,a.ZT)(),m=(0,o.FP)(),p=(0,a.$1)(),h=(0,s.sZ)();return i.useCallback((i,a)=>(function({extension:e,org:r,allowlistPlugins:n,allowlistWidgets:i,publishedPlugins:a,publishedWidgets:s,localExtensions:d,communityPaymentsState:u,lastUsedTimestampById:m,type:p}){let h;let _=(0,o.Y8)({extension:e,publishedPlugins:a,publishedWidgets:s,communityPaymentsState:u});_&&(h=Object.values(d).find(e=>e.plugin_id===_.id));let g={types:new Set([p]),publishedExtension:_,key:function(e){let r=e.plugin_id;return(0,c.ZQ)(e)?`${r}-${e.localFileId}`:r}(e),lastUsedTimestamp:m[(0,c.ZQ)(e)?e.localFileId:e.plugin_id],localPublishedExtension:h};if((0,c.ZQ)(e))return _&&!(0,l.nf)(_)&&(g.publishedExtension=void 0),{...g,extension:e,canRun:!0,canRequest:!1};if((0,c.bH)(e)||!r)return{...g,extension:e,canRun:!0,canRequest:!1};let f=r.public_plugins_allowed,E=r.plugins_whitelist_enforced,y=r.widgets_whitelist_enforced,b=r.plugin_requests_allowed,v=r.widget_requests_allowed,I=(0,c.k0)(e);if(!f)return{...g,extension:e,canRun:!1,canRequest:!1};if(!(I?y:E))return{...g,extension:e,canRun:!0,canRequest:!1};let T=!!(I?i:n)[e.plugin_id];return{...g,extension:e,canRun:T,canRequest:!T&&(I?v:b)}})({extension:i,org:h,allowlistPlugins:r,allowlistWidgets:n,publishedPlugins:d,publishedWidgets:u,localExtensions:p,communityPaymentsState:m,lastUsedTimestampById:e,type:a}),[h,r,n,d,u,p,m,e])}function u(e){let{extension:r}=e;return(0,c.ZQ)(r)}n(30075),n(315964)},128247:(e,r,n)=>{n.d(r,{d$:()=>y});var i=n(411855);n(268853);var a=n(463033),o=n(75395),s=n(96796),l=n(463420),c=n(922827),d=n(298455),u=n(983405),m=n(320063);n(498750),n(153234),n(192437);var p=n(154254);n(939863);var h=n(809840),_=n(535217);n(418943),n(25108);var g=n(356390);n(177505),n(335682),n(498606);var f=n(371591);n(562432),n(724790),n(289375),n(45141);var E=n(695426);function y({validationFailures:e,category:r,supportedKitType:n,selectedKit:a,shouldAutoFix:o}){return i.createElement(i.Fragment,null,[...e.system.filter(e=>e.rule.category===r).filter(e=>!n||e.rule.supportedKitTypes.includes(n)).map(e=>i.createElement(v,{key:e.rule.key,rule:e.rule,output:e.output,dsKitKey:a.dsKitKey,shouldAutoFix:o})),...e.component.filter(e=>e.rule.category===r).map(e=>i.createElement(b,{key:e.rule.key,rule:e.rule,output:e.output,shouldAutoFix:o}))])}function b({rule:e,output:r,shouldAutoFix:n}){let a=i.useCallback(n=>{if(n?.stopPropagation(),!e.fix)return!1;{let n=!0,i=(0,d.UN)();for(let a in r){let o=i.get(a);o&&!e.fix(o,r[o.guid]?.meta)&&(n=!1)}return g.Y5.triggerAction("commit"),n}},[e,r]),o=i.useMemo(()=>Object.values(r).flatMap(e=>e.guids),[r]);return 0===Object.keys(r).length?null:i.createElement(I,{rule:e,guids:o,meta:null,autofix:a,shouldAutoFix:n})}function v({dsKitKey:e,rule:r,output:n,shouldAutoFix:a}){let o=i.useCallback(i=>(i?.stopPropagation(),!!r.fix&&r.fix(e,n.meta)),[r,e,n]);return 0===n.guids.length?null:i.createElement(I,{rule:r,guids:n.guids,meta:n.meta,autofix:o,shouldAutoFix:a})}function I({rule:e,guids:r,meta:n,autofix:o,shouldAutoFix:_}){let[g,f]=i.useState(!1),[y,b]=i.useState(!1),[v,I]=i.useState(!1),w=e=>{I(o(e))},A=i.useCallback(e=>{c.Egt.clearSelection(),c.Egt.addToSelection(e)},[]),C=i.useMemo(()=>r.map(e=>(0,d.UN)().get(e)).filter(Boolean),[r]);return((0,m.h)(()=>{_&&w()}),0===r.length)?null:i.createElement(i.Fragment,null,i.createElement(E.B,{fullWidth:!0,justify:"space-between",align:"center"},i.createElement("button",{onClick:()=>b(!y),className:p.cx.cursorPointer.flex.itemsCenter.$},y?i.createElement(s.O,null):i.createElement(l.k,null),i.createElement(S,{severity:e.severity}),i.createElement(h.E,{fontSize:11,fontWeight:"medium"},e.name)),e.fix&&i.createElement(a.$n,{variant:"secondary",onClick:w},v?"Fixed":"Autofix")),y&&i.createElement(u.Y1,{padding:{horizontal:12},direction:"vertical"},i.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},e.warning),A&&i.createElement(a.$n,{variant:"link",onClick:()=>A(r)},"Select offending layers"),i.createElement("button",{onClick:()=>f(!g),className:p.cx.cursorPointer.flex.itemsCenter.$},g?i.createElement(s.O,null):i.createElement(l.k,null),i.createElement(h.E,{fontSize:11,fontWeight:"medium"},"Show metadata")),g&&i.createElement("div",{className:p.cx.flex.flexColumn.wFull.maxH100.px12.overflowYScroll.$},n?i.createElement(h.E,{fontSize:11,fontWeight:"regular",color:"secondary"},JSON.stringify(n)):i.createElement("div",{className:p.cx.wFull.flex.flexWrap.gap4.$},C.map(e=>i.createElement(T,{key:e.guid,node:e}))))))}function T({node:e}){let r=i.useMemo(()=>i.createElement(f.xH,{guid:e.guid,node:e,useUI3Icon:!0}),[e]);return i.createElement(o.E,{className:p.cx.borderBox.h24.flex.px8.gap4.itemsCenter.b1.radiusMedium.maxW150.font11.colorBorder.$,onClick:()=>{c.glU.panToNode(e.guid,!1);let r=(0,d.UN)().getCurrentPage();r&&(r.directlySelectedNodes=[e])},recordingKey:"nodeButton"},r,i.createElement("span",{className:p.cx.truncate.$},e.name))}function S({severity:e}){switch(e){case _.x$.ERROR:return i.createElement("div",{className:p.cx.p2.font11.colorTextDanger.justifyCenter.fontSemiBold.$},"[Error]");case _.x$.WARNING:return i.createElement("div",{className:p.cx.p2.font11.colorTextWarning.justifyCenter.fontSemiBold.$},"[Warning]");default:return null}}n(959686),n(663834)},809058:(e,r,n)=>{n.d(r,{Ne:()=>z,Xy:()=>Y});var i=n(265171),a=n.n(i),o=n(248114),s=n(662322),l=n(713634),c=n(68596),d=n(186109),u=n(909351),m=n(647975),p=n(557901),h=n(553380),_=n(787848),g=n(515337),f=n(668015),E=n(3199),y=n(579371),b=n(589750),v=n(315706),I=n(433146),T=n(521422),S=n(108627),w=n(98743),A=n(422810),C=n(788522),N=n(982170),L=n(496188),O=n(692645),R=n(395999),P=n(474143),D=n(285509),k=n(479500),M=n(432384),F=n(231512),x=n(782251),U=n(767642),B=n(728741),V=n(477572),G=n(487781),H=n(988646),K=n(276183),W=n(956376),$=n(591241);let Y=0,z=2;new Map().set(0,F.A).set(a()(.25*z,2),x.A).set(a()(z/2,2),U.A).set(a()(.75*z,2),B.A).set(z,V.A),new Map().set(0,G.A).set(a()(.25*z,2),H.A).set(a()(z/2,2),K.A).set(a()(.75*z,2),W.A).set(z,$.A),new Map().set("Plus Jakarta Sans",N.A).set("Outfit",O.A).set("Inter",C.A).set("Public Sans",R.A).set("Domine",A.A).set("Source Serif 4",k.A).set("Roboto Serif",D.A).set("Roboto Mono",P.A).set("JetBrains Mono",L.A).set("Space Mono",M.A),new Map().set("Plus Jakarta Sans",l.A).set("Outfit",d.A).set("Inter",s.A).set("Public Sans",u.A).set("Domine",o.A).set("Source Serif 4",h.A).set("Roboto Serif",p.A).set("Roboto Mono",m.A).set("Space Mono",_.A).set("JetBrains Mono",c.A),new Map().set("Plus Jakarta Sans",E.A).set("Outfit",b.A).set("Inter",f.A).set("Public Sans",v.A).set("Domine",g.A).set("Source Serif 4",S.A).set("Roboto Serif",T.A).set("Roboto Mono",I.A).set("Space Mono",w.A).set("JetBrains Mono",y.A)},156099:(e,r,n)=>{n.d(r,{qq:()=>c});var i=n(922827),a=n(340818),o=n(298455),s=n(356390);let l=e=>Uint8Array.from(e.match(/.{1,2}/g).map(e=>parseInt(e,16)));function c({create:e,slideGrid:r}){let n,c;let d=r&&r.length>0,u=(0,o.UN)(),m=u.getCurrentPage();if(!m)throw Error("Something went wrong");if(1===m.directlySelectedNodes.length){var p;if(!function(e){let r=s.Y5.getViewportInfo(),n=r.width/r.zoomScale,i=r.height/r.zoomScale,a=r.offsetX-n/2,o=r.offsetX+n/2,l=r.offsetY-i/2,c=r.offsetY+i/2,d=e.absoluteBoundingBox,u=d.x+d.w,m=d.y+d.h;return!(u>o)&&!(m>c)&&!(d.x<a)&&!(d.y<l)}(n=m.directlySelectedNodes[0])&&(n=void 0),d&&n?.isOrInSlide()){let e=n.findContainingSlideOrSelf();c=u.get(e)}(p=n)&&["FRAME","RECTANGLE","ROUNDED_RECTANGLE","ELLIPSE","STAR","INSTANCE","SYMBOL"].includes(p.type)||(n=void 0)}return a.l7.user("generate image",()=>{if(!n&&e){let e=s.Y5.getViewportInfo();if((n=u.createNode("RECTANGLE")).size={x:1024,y:1024},n.x=e.offsetX-n.size.x/2,n.y=e.offsetY-n.size.y/2,d){if(!c){let e=i.Ez5.slideDeck().getClosestGridCoord({x:n.x,y:n.y},null),a=e.row>=0?e.row:0,o=e.col>=0?e.col:0,s=r[a][o];c=u.get(s)}if(c){let e=function(e){let r=e.absoluteBoundingBox;return{x:r.x+r.w/2,y:r.y+r.h/2}}(c);n.x=e.x-n.size.x/2,n.y=e.y-n.size.y/2}}u.getCurrentPage()?.appendChild(n),n.fills=[{type:"IMAGE",image:{hash:l("7f12ea1300756f144a0fb5daaf68dbfc01103a46"),name:"Checker"},imageScaleMode:"FILL"}],m.setSelectionToSingleNode(n.guid),i.glU.showSelectionOverlayImmediately()}}),n??null}},406385:(e,r,n)=>{n.d(r,{g:()=>H});var i=n(411855),a=n(188507),o=n(140593),s=n(908946),l=n(667859),c=n(922827),d=n(38329),u=n(966712),m=n(659302),p=n(418956),h=n(498750),_=n(939863),g=n(239349),f=n(356390),E=n(895083),y=n(843495),b=n(100197),v=n(94500),I=n(279145),T=n(354235),S=n(742311),w=n(775810),A=n(556298),C=n(222478),N=n(709731),L=n(562432),O=n(30075),R=n(384775),P=n(41398),D=n(686589),k=n(596378),M=n(883216),F=n(118567),x=n(928076);function U(){return i.createElement(T.d,null,i.createElement(V,null))}function B(e){return c.X3B.getMagicLinkSelectionInfo().selectedDisplayAmount}function V(){let e=(0,a.wA)(),r=(0,N.RL)(C.JT.MAGIC_LINK,A.e),{start:n,stop:l,state:d,aiTrackingContext:h}=r,{close:g}=(0,L.cq)(),E=(0,i.useRef)(null),I=(0,b.ut)((0,y.aY)(),c.FAf.DESIGN);(0,i.useEffect)(()=>{d===N.qy.INITIAL&&null===E.current&&(E.current=I,(0,y.NT)(c.FAf.PROTOTYPE))},[d,I]),(0,i.useEffect)(()=>()=>{d===N.qy.INITIAL&&null!==E.current&&(0,y.NT)(E.current)},[d]);let T=(0,m.Xr)(w.d_),O=(0,m.Xr)(w.pD),R=(0,p.md)(w.pD),{selectedDisplayAmount:P,tlfAmount:U,onlyTopLevelNodesSelected:V,topLevelFrameIds:H}=c.X3B.getMagicLinkSelectionInfo(),K=!V;switch((0,i.useEffect)(()=>{if(d===N.qy.RUNNING&&K){y.tJ(H),O((0,_.tx)("magic_link.running_and_selecting_top_level_frames"));let e=setTimeout(()=>{O((0,_.tx)("magic_link.running"))},1e3);return()=>clearTimeout(e)}},[O,K,d,H]),d){case N.qy.INITIAL:return i.createElement(M.A,{action:C.JT.MAGIC_LINK,actionIcon:i.createElement(s.B,null),actionLabel:(0,u.kc)().prototype_ai_magic_link_name_change?(0,_.tx)("fullscreen_actions.quick_actions.add-interactions-v2"):(0,_.tx)("fullscreen_actions.quick_actions.add-interactions"),onPerform:()=>{E.current=null,n({})},getCustomDisabledTextFromSelectedNodes:r=>{let n,i;return U>10&&(n=(0,_.tx)("magic_link.tlf_selection_too_large"),i="Select 10 or fewer frames"),i&&e((0,v.Zh)({name:"prototype.ai_magic_link_action_instruction",params:{instruction:i,numSelectedNodes:P,numSelectedTlfs:U}})),n},getCustomSelectedNodesAmount:B,aiTrackingContext:h,instructionAction:{type:"learn_more",url:C.Xy}},(0,_.tx)("magic_link.select_a_few_top_level_frames"));case N.qy.RUNNING:return T(!1),f.Y5.triggerAction("start-magic-link"),i.createElement(F.F,{onCancel:()=>{l(),g()},aiTrackingContext:h},R);case N.qy.DONE:return i.createElement(x.h,{magicLinkOutput:r.result,aiTrackingContext:h});case N.qy.ERROR:if(f.Y5.triggerAction("end-magic-link"),r.error instanceof S.ft)return e((0,v.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"invalid_selection_from_generic_layers"}})),i.createElement(G,null);if(r.error instanceof S.sT)return e((0,v.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated"}})),i.createElement(k.u,null,(0,_.tx)("magic_link.no_interactions_generated_general"));if(r.error instanceof S._U)return e((0,v.Zh)({name:"prototype.ai_magic_link_custom_error",params:{error:"no_interactions_generated_existing_interactions"}})),i.createElement(k.u,null,(0,_.tx)("magic_link.no_interactions_generated_existing_interactions"));return i.createElement(D.E,{error:r.error,aiTrackingContext:h});case N.qy.CANCELLED:return f.Y5.triggerAction("end-magic-link"),null;default:(0,o.xb)(d)}}function G(){let e=(0,g.Tv)();return i.createElement(k.u,{buttons:[{label:(0,_.t)("fullscreen.context_menu.auto_rename_layers"),onClick:()=>{(0,R.$I)({moduleToOpen:{type:"custom",module:i.createElement(P.A,{source:c.uQ6.MAGIC_LINK}),name:O.Sn.RENAME_LAYERS_TOAST,beforeModuleOpen:()=>{(0,N.cT)(C.JT.MAGIC_LINK),(0,I.Yh)(d.D.getState().mirror.appModel,C.JT.AUTO_RENAME_LAYERS)&&(0,N.Ag)(C.JT.AUTO_RENAME_LAYERS,E.Ay,{source:c.uQ6.MAGIC_LINK,overwriteNames:!1})}},trackingData:{source:"magic_link_rename_layers_suggestion_toast"}})},variant:"secondary",iconPrefix:i.createElement(l._,null),shortcuts:[{key:h.Uz.ENTER,modifier:[h.xH.META]}]}]},(0,_.tx)(1===e.length?"magic_link.rename_layer_suggestion":"magic_link.rename_layers_suggestion"))}function H(e){let r=d.D.dispatch,n=(0,I.Yh)(d.D.getState().mirror.appModel,C.JT.MAGIC_LINK);(0,R.$I)({moduleToOpen:{type:"custom",module:i.createElement(U,null),name:O.Sn.MAGIC_LINK,beforeModuleOpen:()=>{r((0,v.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"quick_actions_suggestion"}})),(0,N.B3)(C.JT.MAGIC_LINK),n&&(0,N.Ag)(C.JT.MAGIC_LINK,A.e,e)}},trackingData:{source:"prototype_magic_link_triggered"}})}},335650:(e,r,n)=>{n.d(r,{J1:()=>d,NA:()=>l,Q3:()=>c,ZP:()=>a});var i=n(776250),a=(e=>(e.RECORDINGS_WINDOW_OPENED="recordings_window_opened",e.NEW_RECORDING_BUTTON_CLICKED="new_recording_button_clicked",e.RECORDING_INITIALIZED="recording_initialized",e.RECORDING_DEVICE_UNAVAILABLE="recording_device_unavailable",e.RECORDING_START="recording_start",e.RECORDING_ABORT="recording_abort",e.RECORDING_FINISH="recording_finish",e.RECORDING_SAVED="recording_saved",e.RECORDING_RESTARTED="recording_restarted",e))(a||{}),o=(e=>(e.SIDEBAR="sidebar",e))(o||{}),s=(e=>(e.REPLAY_OPENED="replay_opened",e.LINK_COPIED="link_copied",e.DELETED="deleted",e))(s||{}),l=(e=>(e.SIDEBAR="sidebar",e.LINK="link",e.COMMENT="comment",e.NEW_RECORDING="new_recording",e))(l||{});function c(e,r,n){(0,i.sx)("recording_funnel_event",{fileKey:e?.key,editorType:e?.editorType,funnelEventName:r,entrypoint:n},{forwardToDatadog:!0})}function d(e,r,n,a){(0,i.sx)("recording_replay_event",{fileKey:e,editorType:r,replayEventName:"replay_opened",entrypoint:n,recordingId:a},{forwardToDatadog:!0})}},548091:(e,r,n)=>{n.d(r,{ZM:()=>a,bY:()=>o,r9:()=>s}),n(411855),n(188507),n(970516),n(335682),n(132135);let i="recording_";function a(e){return`${i}${e.replace(/-/g,"_")}`}function o(e){return e.startsWith(i)}function s(e){return o(e)?e.slice(i.length).replace(/_/g,"-"):null}},55069:(e,r,n)=>{n.d(r,{Vm:()=>u,ks:()=>m}),n(411855);var i=n(716034),a=n(418956),o=n(553716);n(457630),n(601607);let s=(0,i.eU)({}),l=(0,i.eU)(null,(e,r,n)=>{let i=e(s);if(n.parentNodeId&&!i[n.parentNodeId]){(0,o.xi)("scene node overlay",`trying to add child overlay to ${n.parentNodeId} but parent overlay does not exist`);return}r(s,e=>({...e,[n.nodeId]:n}))}),c=(0,i.eU)(null,(e,r,n)=>{let i=e(d(n)).map(e=>e.nodeId),a=new Set([n,...i]);r(s,e=>Object.fromEntries(Object.entries(e).filter(([e])=>!a.has(e))))}),d=((0,i.eU)(e=>Object.keys(e(s)).length>0),(0,a.Iz)(e=>(0,i.eU)(r=>Object.values(r(s)).filter(({parentNodeId:r})=>r===e))));function u(e,r,n){a.zl.set(l,{nodeId:e,component:r,...n})}function m(e){a.zl.set(c,e)}function p({viewportInfo:e,overlay:r,offset:n={x:0,y:0}}){let i=useSceneSelectorDangerouslyReturningNodeObjects((e,r)=>e.get(r),r.nodeId),a=useAtomValue(d(r.nodeId));if(!i)return null;let o=i.absoluteBoundingBox,s=canvasRectToViewport(e,{x:o.x,y:o.y,width:o.w,height:o.h}),l={x:s.x+e.x+n.x,y:s.y+e.y+n.y};return React.createElement("div",{style:{position:"fixed",width:s.width,height:s.height,top:0,left:0,transform:`translate(${l.x}px, ${l.y}px)`,pointerEvents:"none",...r.overflowHidden?{overflow:"hidden"}:{}}},r.component,a.map(r=>React.createElement(p,{key:r.nodeId,viewportInfo:e,overlay:r,offset:{x:-1*l.x,y:-1*l.y}})))}(0,i.eU)(e=>Object.values(e(s)).filter(({parentNodeId:e})=>!e))},952746:(e,r,n)=>{n.d(r,{Kf:()=>S,MX:()=>E});var i=n(411855),a=n(243742),o=n(922827),s=n(966712),l=n(153234),c=n(572206),d=n(428654),u=n(798099),m=n(601978),p=n(421123),h=n(460187),_=n(716968);function g(e){let{version:r}=(0,a.DP)();return i.createElement(f,{...e,uiVersion:r})}class f extends l.o6{constructor(){super(...arguments),this.dragging=!1,this.srgbCanvasElement=null,this.srgbCanvasRef=e=>{this.srgbCanvasElement=e,this.srgbCanvasElement&&((0,s.kc)().ee_color_management_force_canvas?(0,m.dM)({canvas:this.srgbCanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"srgb"}):this.props.renderCanvas(this.srgbCanvasElement,this.props.value))},this.displayP3CanvasElement=null,this.displayP3CanvasRef=e=>{let r=!!(null===this.displayP3CanvasElement&&e);this.displayP3CanvasElement=e,this.displayP3CanvasElement&&(0,m.dM)({canvas:this.displayP3CanvasElement,canvasWidth:this.canvasWidth(),canvasHeight:this.canvasHeight(),renderCanvas:this.props.renderCanvas,value:this.props.value,colorSpace:"display-p3",initializeCanvasColorSpace:r})},this.barElement=null,this.barRef=e=>{this.barElement=e,e&&this.disableWeirdHorizontalScrollingPageNavigation(e)},this.handleElement=null,this.handleRef=e=>{this.handleElement=e,this.handleElement&&(this.props.renderHandle(this.props.value,this.handleElement),this.disableWeirdHorizontalScrollingPageNavigation(this.handleElement))},this.offset=new c.Mi(0,0),this.setOffset=e=>{if(null!=e){let r=e.target.getBoundingClientRect(),n=new c.Mi(r.left+r.width/2,r.top+r.height/2);this.offset=n.subtract(new c.Mi(e.clientX,e.clientY))}else null!=this.props.offset?this.offset=this.props.offset:this.offset=new c.Mi(0,0)},this.ensureInitialized=()=>{if(!this.barElement)throw Error("callback called before rendering barElement")},this.mouseToValue=e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect(),n=e.x+this.offset.x,i=e.y+this.offset.y;return n-=r.left+(this.props.handlePadding?this.props.handle/2:0),i-=r.top+(this.props.handlePadding?this.props.handle/2:0),n/=this.props.width,i/=this.props.height,n=Math.max(Math.min(n,1),0),i=Math.max(Math.min(i,1),0),new c.Mi(n,i)},this.valueToPosition=e=>{let r=e.x,n=e.y;return r*=this.props.width,n*=this.props.height,r-=this.props.handlePadding?0:this.props.handle/2,n-=this.props.handlePadding?0:this.props.handle/2,new c.Mi(r,n)},this.onPointerDown=l.Am(this,"pointerdown",e=>{e.stopPropagation(),this.dragging=!0,e.currentTarget.setPointerCapture(e.pointerId),e.currentTarget===this.handleElement?this.setOffset(e):(this.setOffset(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerUp=l.Am(this,"pointerup",e=>{if(!this.dragging)return l.aH;this.dragging=!1,this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!0)},{recordMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{left:(e.clientX-r.left)/r.width,top:(e.clientY-r.top)/r.height}},playbackMetadata:e=>{this.ensureInitialized();let r=this.barElement.getBoundingClientRect();return{clientX:e.left*r.width+r.left,clientY:e.top*r.height+r.top}}}),this.onPointerMove=e=>{this.dragging&&(e.stopPropagation(),this.props.mouseCallback(this.mouseToValue(new c.Mi(e.clientX,e.clientY)),!1))},this.onWheel=l.M5(this,"wheel",e=>{e.stopPropagation();let r=e.ctrlKey;this.props.wheelCallback?.(new c.Mi(e.deltaX,e.deltaY),e.altKey,r)},{recordMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey}),playbackMetadata:e=>({deltaX:e.deltaX,deltaY:e.deltaY,deltaMode:e.deltaMode,ctrlKey:e.ctrlKey})}),this.onKeyDown=l.C0(this,"keydown",e=>{e.stopPropagation(),this.props.keyDownCallback(e)})}componentDidUpdate(e,r){super.componentDidUpdate(e,r),e.value!==this.props.value&&(this.srgbCanvasRef(this.srgbCanvasElement),this.displayP3CanvasRef(this.displayP3CanvasElement),this.handleRef(this.handleElement))}componentWillUnmount(){super.componentWillUnmount(),this.dragging=!1}disableWeirdHorizontalScrollingPageNavigation(e){e.addEventListener("wheel",e=>e.preventDefault(),{passive:!1})}canvasWidth(){return this.props.width+(this.props.handlePadding?this.props.handle:0)}canvasHeight(){return this.props.height+(this.props.handlePadding?this.props.handle:0)}render(){let e={position:"relative",boxSizing:"border-box",overflow:"hidden",width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.canvasWrapperStyles},r="ui3"===this.props.uiVersion?I:v,n={position:"absolute",boxShadow:`inset ${r}`,left:0,top:0,width:this.props.width+(this.props.handlePadding?this.props.handle:0),height:this.props.height?1:this.props.height+(this.props.handlePadding?this.props.handle:0),borderRadius:this.props.handlePadding?.5*this.props.handle:0,...this.props.ghostStyles},a=this.valueToPosition(this.props.value),s={position:"absolute",boxSizing:"border-box",boxShadow:r,left:a.x,top:a.y,width:this.props.handle,height:this.props.handle,borderRadius:.5*this.props.handle},l=this.props.hitBoxMargin;return i.createElement("div",{className:this.props.containerClass,style:{position:"relative"}},i.createElement("div",{ref:this.barRef,style:e},this.props.colorProfile===o.RYP.SRGB?i.createElement("canvas",{ref:this.srgbCanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,this.props.colorProfile===o.RYP.DISPLAY_P3?i.createElement("canvas",{ref:this.displayP3CanvasRef,width:`${this.canvasWidth()}px`,height:`${this.canvasHeight()}px`}):void 0,i.createElement("div",{style:n})),this.props.children,i.createElement("div",{ref:this.handleRef,onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onPointerMove:this.onPointerMove,onLostPointerCapture:this.onPointerUp,onWheel:this.onWheel,onKeyDown:this.onKeyDown,style:s,tabIndex:0,className:_.p}),i.createElement("div",{onMouseDown:u.dG,onPointerDown:this.onPointerDown,onPointerUp:this.onPointerUp,onLostPointerCapture:this.onPointerUp,onPointerMove:this.onPointerMove,onWheel:this.onWheel,style:{position:"absolute",left:-l,top:-l,right:-l,bottom:-l}}))}}function E(e){return"ui3"===e?b:y}f.displayName="SliderControlInner";let y=12,b=16,v="0 0 0 .6px rgba(0, 0, 0, 0.2)",I="var(--elevation-200-canvas)",T=d.F;function S({hitBoxMargin:e,width:r,height:n,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:m,renderCanvas:_,containerClass:f,recordingKey:y,canvasWrapperStyles:b,ghostStyles:v,colorProfile:I,colorHandle:S,children:w}){let{version:A}=(0,a.DP)(),C=(0,i.useCallback)((e,r)=>{let n=E(A);if(r.style.borderRadius=`${n/2}px`,r.style.borderStyle="solid",r.style.borderWidth="0.5px",r.style.borderColor="var(--color-icon-tertiary, white)",r.style.background="var(--color-bg, white)",S){r.style.borderColor="white",r.style.borderWidth=`${"ui3"===A?4:2}px`;let n=S(e);I===o.RYP.DISPLAY_P3&&(0,h.p3)()?r.style.backgroundImage=`url(${(0,p.rl)(n,I||o.RYP.SRGB)})`:r.style.background=T.format(n,(0,h.VG)(I||o.RYP.SRGB))}},[S,I,A]),N=E(A),L="ui3"===A?{outlineWidth:"1px",outlineStyle:"solid",outlineColor:"var(--color-bordertranslucent)",outlineOffset:"-1px"}:{};return i.createElement(g,{hitBoxMargin:e,width:r,height:n,handle:N,handlePadding:s,value:l,offset:c,mouseCallback:d,wheelCallback:u,keyDownCallback:m,renderCanvas:_,renderHandle:C,containerClass:f,recordingKey:y,canvasWrapperStyles:{...L,...b},ghostStyles:v,colorProfile:I},w)}},178772:(e,r,n)=>{n.d(r,{T:()=>y});var i=n(411855),a=n(57860),o=n(915440),s=n(939863),l=n(175290),c=n(809840),d=n(21584),u=n(672517),m=n(226055),p=n(570809),h=n(335682),_=n(825531),g=n(279453),f=n(498606),E=n(676939);function y(){let e=(0,h.tS)()??"",r=function(e){let r=(0,o.Rs)(g.oBY,{key:e}),n=(0,d.J)();return r?.data?.file?.hasPermission&&n}(e),n=(0,p.M)(),{inExperiment:y,devModeGraceDays:b}=(0,_.X)(e),v=(0,m.GS)(),I=n?.remainingGraceDays??b,T=y?(0,s.t)("fullscreen.toolbar.request_sent.dev_mode_grace_period_tooltip",{numDays:I}):(0,s.t)("fullscreen.toolbar.approval_pending.dev_mode_grace_period_tooltip",{numDays:I}),S=(0,i.useMemo)(()=>void 0===y?i.createElement(a.k,null):y?(0,s.tx)("fullscreen.toolbar.request.request_sent"):(0,s.tx)("fullscreen.toolbar.approval_pending"),[y]);return r?i.createElement(u.fu,{name:"Dev Mode Request Badge"},i.createElement("div",{"data-tooltip":T,"data-tooltip-type":f.Ib.TEXT,"data-tooltip-show-immediately":!0,"data-tooltip-hide-immediately":!0,"data-tooltip-show-above":!!v||void 0,"data-tooltip-show-below":!v||void 0,"data-testid":"dev_mode_request_pending_tooltip"},i.createElement(l.Y,{width:y?100:120,padding:{vertical:v?4:8,horizontal:v?8:13},cornerRadius:6,backgroundColor:v?"secondary":"toolbar-secondary",horizontalAlignItems:"center"},i.createElement(c.E,{fontSize:11,fontWeight:"medium"},S)))):v?null:i.createElement(E.g,{variant:"toolbar-secondary",text:(0,s.t)("general.dev_mode")})}},377020:(e,r,n)=>{let i;var a=n(411855),o=n(188507),s=n(268853),l=n(629019),c=n.n(l),d=n(134288),u=n(388809),m=n(966712),p=n(418956),h=n(915440),_=n(752553),g=n(886653),f=n(153234),E=n(776621),y=n(281381),b=n(376406),v=n(163023),I=n(715981),T=n(154254),S=n(939863),w=n(256975);n(30686);var A=n(964881),C=n(944682),N=n(199590),L=n(293017),O=n(782656),R=n(103907),P=n(672517),D=n(226055),k=n(788811),M=n(420576),F=n(355513),x=n(411916),U=n(516398),B=n(408405),V=n(122983),G=n(369870);n(488983);var H=n(52570),K=n(335682);n(594901);var W=n(860178),$=n(279453),Y=n(147206),z=n(428467),j=n(239671),q=n(800876),Z=n(498606),X=n(143678),J=n(507956),Q=n(836927),ee=n(868861),et=n(467594),er=n(585645),en=n(476005),ei=n(676939),ea=n(860142),eo=n(601538),es=n(848761),el=n(267850),ec=n(733378),ed=n(362473),eu=n(882746),em=n(451396),ep=n(784578),eh=n(675694),e_=n(250116);let eg=(0,V.ck)(),ef="FULLSCREEN_FILENAME_CHEVRON",eE="FULLSCREEN_FILENAME_DROPDOWN";class ey extends f.o6{constructor(e){super(e),this.startRenaming=f.cZ(this,"click",()=>{this.props.canRename&&this.props.user&&this.props.dispatch(L.vg())}),this.submitFileName=e=>{this.props.dispatch(L.Wk()),this.props.onRename(e)},this.cancelFileName=()=>{this.props.dispatch(L.Wk())},this.nameRef=a.createRef()}render(){let e=(0,b._C)({textRef:this.nameRef,text:this.props.name});return this.props.isRenaming?a.createElement(er.A,{className:c()(eh.a6),placeholderValue:this.props.name,submit:this.submitFileName,cancel:this.cancelFileName,recordingKey:f.Pt(this.props,"input"),maxLength:this.props.maxLength}):a.createElement("span",{className:c()(eh.DD,{[eh.il]:!!this.props.user}),onClick:this.startRenaming,dir:"auto","data-testid":this.props.dataTestId||"filename",tabIndex:0,role:"textbox",ref:this.nameRef,onKeyDown:e=>(0,U.hx)({e,onClickHandler:this.startRenaming}),"aria-label":(0,S.t)("fullscreen.filename_view.file_input_title"),"data-tooltip-type":Z.Ib.TEXT,"data-tooltip":e?this.props.name:void 0},this.props.name)}}function eb(e){let r=(0,D.GS)();return a.createElement(ey,{...e,name:(0,M.oj)(e.repo),onRename:r=>{e.dispatch(O.NN({repo:e.repo,name:r}))},isUI3:r})}function ev(e){let r=(0,o.wA)(),n=(0,W.iZ)(),i=(0,K.q5)(),s=(0,o.d4)(e=>e.isRenaming),l=(0,p.md)(k.lu),c=!!i&&(0,ec.DF)(i,n),d=null==i&&null!=l?{type:"new-autosave-file",newAutosaveFile:l}:{type:"open-file",openFile:i,canRename:c};return a.createElement(eI,{dispatch:r,user:n,renamableFile:d,isRenaming:s,recordingKey:e.recordingKey})}function eI(e){let r,n,i;let o=(0,_.n_)(k.b_),l=(0,D.GS)(),{renamableFile:c}=e;"open-file"===c.type?(r=c.canRename,n=c.openFile?.name):(r=!0,n=c.newAutosaveFile.name,i=c.newAutosaveFile.editorType);let d="new-autosave-file"===c.type;return a.useEffect(()=>{d&&n&&i&&(0,F.hL)(n,(0,j.wN)(i))},[d,n,i]),a.createElement(ey,{...e,name:n||(0,S.t)("fullscreen.filename_view.title_placeholder"),canRename:r,onRename:r=>{"new-autosave-file"===c.type?o({fileKey:c.newAutosaveFile.fileKey,name:r,source:k.oE.EDITOR}):c.openFile?e.dispatch(C.Nw({file:c.openFile,name:r})):(0,E.$D)(s.e.UNOWNED,Error("Tried renaming but file does not exist"))},isUI3:l,maxLength:100})}function eT({file:e}){let r=(0,o.wA)(),n=(0,R.n6)();if(!e||!(0,M.Kz)(e))return null;let i=X.e0.EDITOR_TOOLBAR_ACTION;return a.createElement("div",{className:eh._H},a.createElement(ee.a$,{branchFileKey:e.key,size:y.vj.LARGE,onClick:e=>{r(N.hx({direction:q.Kn.TO_SOURCE,trackingContextName:i,unreadCommentCount:n}))},convertsToDotWithSmallScreen:!0,isToolbar:!0}))}ey.displayName="EditableName";let eS=e=>{let r=(0,h.Rs)($.GgD,{repoId:e});if("loaded"!==r.status)return;let n=r.data.repo?.files;return!!n&&n.map(e=>(0,ee.AM)(e)).some(e=>e===ee.pT.IN_REVIEW||e===ee.pT.CHANGES_REQUESTED||e===ee.pT.APPROVED)};function ew({file:e,viewOnly:r}){let n=(0,h.Rs)($.Std,{orgId:e.parentOrgId}),i=(0,h.Rs)($.nn0,{fileKey:e.key}),s=(0,J.ks)(),l=(0,w._I)(),c=(0,A.l7)(),u="loading"===n.status||e.parentOrgId&&!e.org,m=(0,Q.Yj)(e.fileRepoId),p=e.fileRepoId?m:null,_=(0,o.wA)(),g=(0,ep.kU)({file:e,viewOnly:r}),f=r&&!g;if(!e||p?.status==="loading"||u||"loading"===i.status||f)return null;let E=!!(e.repo&&(0,M.Ns)(e,e.repo)),y=!!(0,M.Kz)(e)&&!!e.trashedAt;return s&&!l?a.createElement("div",{className:T.cx.flex.itemsCenter.wFitContent.$},a.createElement(ei.g,{variant:"toolbar-secondary",text:(0,S.t)("general.dev_mode")})):a.createElement(d.P.div,{transition:{duration:.3,ease:"easeOut",delay:.2,opactity:{ease:"linear",delay:.2}},initial:{width:0,translateX:-100,opacity:0},animate:{width:"auto",translateX:0,opacity:1}},a.createElement("div",{className:T.cx.flex.itemsCenter.wFitContent.$},E&&e.fileRepoId&&a.createElement(eA,{repoId:e.fileRepoId,isEditor:e.canEdit,dispatch:_,branchInfo:p}),a.createElement(a.Fragment,null,a.createElement(ed.A,null),!y&&!c&&a.createElement(eu.a7,{file:e,viewPermission:g,recordingKey:"fileNamePermission"}))))}function eA(e){let r=eS(e.repoId),{branchInfo:n}=e;if(!n||"loaded"!==n.status)return null;let i=n.data.activeBranches.length;return i<1?null:a.createElement(I.L,{text:(0,S.t)("fullscreen.filename_view.branch-count",{BRANCHES:i}),onClick:()=>e.dispatch(N.o5({trackingContextName:X.e0.EDITOR_TOOLBAR_ACTION})),showIndicator:e.isEditor&&r,indicatorStyle:eh.q3})}function eC({openFile:e,user:r}){let n=(0,em._)(),i=function(e,r){if(!e?.project)return"";let n=e.project;return n.path?n.path:(0,m.kc)().ps_benchmark&&n.id===r?.personal_drafts_folder_id?(0,S.t)("fullscreen.filename_view.drafts_to_move"):(0,S.t)("fullscreen.filename_view.drafts")}(e,r),o=i.length>25?i:void 0,s=(0,D.GS)();return a.createElement("div",{className:i?eh.TV:eh.jw,title:o},a.createElement("div",{className:eh.ub,onClick:n,role:"link",tabIndex:0},i),!s&&a.createElement(v.B,{ariaHidden:!0,svg:e_.A,className:eh.xo}))}class eN extends f.o6{constructor(e){super(e),i=a.createRef()}renderDropdownMenu(){let{dropdownShown:e,recordingKey:r,dispatch:n}=this.props,i=!!e&&e.type===eE;return a.createElement(el.G,{trackEvent:(e,r)=>{this.context.trackEvent(e,r)},dropdownTargetRect:e?.data?.targetRect,recordingKey:r,dispatch:n,dropdownVisible:i,activatePathOnMount:e?.data?.activatePathOnMount})}renderChevronWithDropdown(e,r){let n=a.createElement(a.Fragment,null,a.createElement(et.c,{divRef:i,className:e?eh.ai:eh.fN,svgContainerClassName:eh.Gp,dispatch:this.props.dispatch,showingDropdown:!!r&&this.showingDropdown(),dropdownKey:eE,recordingKey:f.Pt(this.props,"chevron"),dataOnboardingKey:ef,rcsHandlerId:"Filename chevron clicked",tabIndex:0,ariaLabel:(0,S.t)("fullscreen.filename_view.edit_file_menu"),dataTestId:"filename-menu-chevron",isUI3:this.props.isUI3}),this.renderDropdownMenu());return a.createElement("div",{className:c()({[eh.Xz]:!e}),onMouseDown:e=>{let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});i?.current?.dispatchEvent(r)},onClick:e=>{e.stopPropagation()}},n)}showingDropdown(){return this.props.dropdownShown?.type===eE}render(){let{user:e,openFile:r,isRenaming:n,isUI3:o}=this.props,s=r?.repo,l=!!(r&&(0,M.Kz)(r)),d=!!(r&&s&&(0,M.Ns)(r,s)),m=!!r&&(0,ec.DF)(r,e),p=!!this.props.user&&!!r&&!!this.props.editorIsReadOnly,h=!!r&&(0,Y.Pe)(r),_=!n&&e&&r&&!h&&!this.props.isLimitedDevMode&&!this.props.hideChevron,g=!n&&e&&r&&this.props.isLimitedDevMode,E=_||g,y=!eg&&this.props.currentWorkspace&&this.props.hasMultipleWorkspaces;return a.createElement("div",{className:c()(eh.iW,{[eh.Ij]:!e}),id:"fullscreen-filename","data-onboarding-key":eo.G8,onContextMenu:e=>{if(i.current){let r=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});i.current.dispatchEvent(r),e.preventDefault()}}},a.createElement("div",{className:n?eh.Tt:eh.W},r?.fileRepoId&&e?.id&&a.createElement(a.Fragment,null,a.createElement(u.aY,{openFile:r,modalShown:this.props.modalShown,topLevelMode:this.props.topLevelMode,dispatch:this.props.dispatch}),a.createElement(H.jQ,{repoId:r.fileRepoId,openFileKey:r.key,currentUserId:e.id,appMergingStatus:this.props.mergingStatus,openFileMerge:this.props.openFileMerge})),!1,y&&!o&&a.createElement("div",{className:eh.tL},a.createElement(em.H,{iconClassName:eh.ht})),a.createElement(eC,{user:e,openFile:r}),!n&&l&&s&&a.createElement(en.o,{repo:s,dispatch:this.props.dispatch,trackingContextName:X.e0.EDITOR_TOOLBAR_ACTION}),d&&s?a.createElement(eb,{dispatch:this.props.dispatch,user:e,repo:s,canRename:m,isRenaming:n}):a.createElement(ev,{recordingKey:f.Pt(this.props,"fileName")}),!n&&r&&e&&a.createElement("div",{className:eh.ld},a.createElement(eT,{file:r})),!n&&r&&a.createElement(es.s,{openFile:r}),a.createElement("div",{className:c()({[eh.Dg]:!E})},E&&this.renderChevronWithDropdown(d,r)),(0,G.MP)()&&a.createElement(ea.e,{isUI3:!1,targetKey:ef}),!n&&r&&a.createElement(ew,{file:r,viewOnly:p})))}}eN.displayName="FilenameView",eN.contextType=P.QE;let eL=(0,g.xx)(x.vp);(0,o.Ng)(function(e){let r;let n=(0,z.getPermissionsState)(e),i=(0,m.kc)().ps_benchmark;r=i?eL(n.user,n.currentUserOrgId,n.currentTeamId):eL(n.user,n.currentUserOrgId);let a=(0,B.T)(e.progressBarState.mode)?!e.openFile?.canEdit:e.mirror?.appModel?.isReadOnly,o=!1;return o=i?e.plans.length>1:(0,x.Tt)(e.authedUsers.orderedIds,n),{editorIsReadOnly:a,isLimitedDevMode:(0,J.$A)(e.selectedView)&&!(0,w.tn)(e),openFile:e.openFile,loadingState:e.loadingState,userStateLoaded:e.userStateLoaded,dropdownShown:e.dropdownShown,isRenaming:e.isRenaming,userFlags:e.userFlags,currentWorkspace:r,hasMultipleWorkspaces:o,workspaceName:(0,x.HE)(e,r),selectedView:e.selectedView,topLevelMode:e.mirror.appModel.topLevelMode,modalShown:e.modalShown,mergingStatus:e.mergingStatus,openFileMerge:e.openFileMerge,...n}})(eN)},267850:(e,r,n)=>{n.d(r,{G:()=>eO});var i=n(411855),a=n(188507),o=n(922827),s=n(138020),l=n(966712),c=n(418956),d=n(915440),u=n(939863),m=n(929101),p=n(411045),h=n(616541),_=n(566590),g=n(119735),f=n(54552),E=n(944682),y=n(660656),b=n(738269),v=n(507877),I=n(889399),T=n(293017),S=n(662275),w=n(103907),A=n(672517),C=n(289104),N=n(385111),L=n(965480),O=n(226055),R=n(988022),P=n(720647),D=n(420576),k=n(888429),M=n(12493),F=n(906400),x=n(396226),U=n(711296),B=n(723245),V=n(875847),G=n(356390),H=n(285381),K=n(665723),W=n(106801),$=n(122983),Y=n(869156),z=n(335682),j=n(860178),q=n(99506),Z=n(279453),X=n(147206),J=n(428467),Q=n(284321),ee=n(206193),et=n(694517),er=n(300874),en=n(239671),ei=n(451e3),ea=n(813408),eo=n(851363),es=n(279145),el=n(143678),ec=n(392340),ed=n(858212),eu=n(671667),em=n(868861),ep=n(828736),eh=n(193948),e_=n(236192),eg=n(771970),ef=n(71676),eE=n(13678),ey=n(611964),eb=n(18339),ev=n(728587),eI=n(449731),eT=n(234587),eS=n(144119),ew=n(266294),eA=n(733378),eC=n(736524);let eN=(0,$.ck)();var eL=(e=>(e.DISABLED="disabled",e.PUBLISH="publish",e.SHOW_UPSELL_MODAL="show_upsell_modal",e))(eL||{});function eO({trackEvent:e,dropdownTargetRect:r,recordingKey:n,dispatch:eL,dropdownVisible:eO,activatePathOnMount:eR,leanPadding:eP}){let eD=(0,a.d4)(e=>e.mirror.appModel),ek=(0,a.d4)(e=>e.selectedView),eM=(0,a.d4)(e=>(0,J.getPermissionsStateMemoized)(e)),eF=(0,a.d4)(e=>e.userStateLoaded),ex=(0,z.q5)(),eU=(0,a.d4)(e=>e.fileVersion),eB=(0,z.Cq)({useSinatraType:!0}),eV=(0,a.d4)(e=>e.repos),eG=(0,a.d4)(e=>e.teams),eH=(0,a.d4)(e=>e.currentUserOrgId),eK=(0,a.d4)(e=>e.currentTeamId),eW=!!(0,j.iZ)(),e$=(0,ec.Q)({currentOrgId:eH,currentTeamId:(0,l.kc)().ps_benchmark?eK:null}),eY=(0,O.GS)(),ez=(0,eS.sO)(),ej=(0,eT.cJ)(),eq=(0,eC.F)(),eZ=(0,d.Rs)(Z.dTR,{fileKey:ex?.key||""},{enabled:!!ex?.key}),eX=(0,a.d4)(Q.fA),eJ=(0,c.md)(Q.p9);(0,Y.SR)();let eQ=(0,d.Rs)(Z.iY3,{branchFileKey:ex?.key||""},{enabled:!!ex}),e0=(0,C.JT)(),e1=i.useMemo(()=>{if(ex&&"loaded"===e$.status)return(0,B.T0)(e$.data,ex.key)},[ex,e$]),e2=(0,a.d4)(Q.F9),e5=(0,a.d4)(e=>e.mirror.appModel.topLevelMode),e3=(0,ef.jT)(ex,e2),e6=(0,M.$n)(),e8=(0,w.n6)(),e4=(0,L.kD)(),e9=(0,L.J3)(),e7=(0,L.JU)(e9),te=e9===L.kN.FILE_IN_DRAFTS,tt=(0,g.J_)(),tr=(0,g.pH)(ex?.key??null,{enabled:!!ex&&tt()}),tn=(0,g.GI)("filename-context-menu"),ti=o.Ez5.uiState().isRecovery.getCopy(),ta=i.useMemo(()=>eJ?eX?"publish":"show_upsell_modal":"disabled",[eX,eJ]),to=(0,H.R6)(),{colorProfilePreference:ts}=(0,K.jK)(),tl=(0,K.hP)(ts),tc=(0,ed.S)(),td=N.h.useTrackingContext({trigger:ee.b.FILE_DUPLICATE}),tu=!1,tm=!1,tp=!1;"loaded"===eZ.status&&(tu=!!eZ.data?.file?.canTrash&&!!(0,s.oA)(eZ.data?.file?.canTrash),tm=!!(0,s.oA)(eZ.data?.file?.canMove),tp=!!(eZ.data.file&&(0,P._R)(eZ.data.file.editorType??q._Y.DESIGN,eZ.data.file.currentPlanUser)));let th=(0,p.RR)(),t_=(0,m.jB)({files:[{editor_type:ex?.editorType??null,folder_id:ex?.project?.id??null}],repos:[],destinationFolderId:ex?.project?.id??null,isDestinationDrafts:!1});if(!ex||!eO)return null;let tg=ek.editorType,tf=tg!==en.nT.Whiteboard,tE=!!(tf&&(0,D.Kz)(ex)),ty="loaded"===e$.status&&(0,B.gV)(e$.data,eH),tb=eM.user,tv="loaded"===eQ.status&&(null===eQ.data.file||eQ.data.file&&(0,em.AM)(eQ.data.file)===em.pT.MERGED),tI=tE&&("loaded"!==eQ.status||tv),tT=eQ.data?.file?.project,tS=tT&&ex.editorType&&(0,X.Jf)(tT,ex.editorType),tw=(0,J.isFileFigjamDisabled)(ex,eM)||tg===en.nT.Slides&&(0,s.oA)(ex.org?.isSlidesDisabled)||(0,J.isOrgUserExternallyRestrictedFromState)(eM),tA=tb&&ex.canManage,tC=tu,tN=!!(tE&&ex.trashedAt),tL=tN&&!tI,tO=e0&&e0.profile.entityType===ea.o1.TEAM;tC=!!tb&&tC&&!tO;let tR=tm,tP=(0,eA.DF)(ex,tb),tD=!!e1,tk=ex.project,tM=tk&&tS?tE?(0,u.t)("fullscreen.filename_view.duplicate-as-new"):(0,u.t)("fullscreen.filename_view.duplicate"):(0,u.t)("fullscreen.filename_view.duplicate-to-drafts"),tF=null,tU=(0,l.kc)().ps_benchmark;tU?tk&&""!==tk.path&&(tF=tk):tF=ex.teamId?tk:null;let tB=tU&&ex.folderId===tb?.personal_drafts_folder_id,tV=ex.canEdit&&!!ex.thumbnailGuid,tG=e$.data?.currentUser?.baseOrgUser?.fileBrowserPreferences?.orderedSidebarSections??[],tH=e$.data?.currentUser?.userSidebarSections!=null?(0,s.oA)(e$.data.currentUser.userSidebarSections):null,tK=(0,B.t$)(tH??[],tG),tW=tK.find(e=>e.id===e1?.resource.sidebarSectionId),t$=!!(0,l.kc)().piper_pptx_export&&ez&&ex.canEdit,tY=()=>{let e=[];return 0===tK.length&&e.push({recordingKey:"favorite-custom",displayText:(0,u.t)("sidebar.starred"),isChecked:!1,callback:()=>tZ(!1)}),tK.map(r=>{e.push({recordingKey:"favorite-custom",displayText:""===r.name?(0,u.t)("sidebar.starred"):r.name,isChecked:!!tW&&tW.id===r.id,callback:()=>tZ(!!tW&&tW.id===r.id,r.id)})}),e},tz=()=>{if(!tt()||"loaded"!==tr.status||!tr.data)return[];let{canPinFileToWorkspace:e,canEditPin:r,existingFilePinId:n,workspaceHasMaxPins:i}=tr.data;return e?[{displayText:(0,u.t)("tile.dropdown.pin_to_workspace"),callback:()=>tn(ex.key,i)}]:r?[{displayText:(0,u.t)("tile.dropdown.edit_workspace_pin"),callback:()=>tX(n)},{displayText:(0,u.t)("tile.dropdown.remove_workspace_pin"),callback:()=>tJ(n)}]:[]},tj=()=>{eL(S.to({type:eE.dD,data:{entrypoint:ey.RR.FILENAME_VIEW_DROPDOWN}}))},tq=()=>{let e=ex.teamId&&eG[ex.teamId];eL(S.to({type:eb.$3,data:{afterFileMove:tj,team:e||null}}))},tZ=(e,r)=>{if(!eB)return;let n={entrypoint:"editor",favoriteId:e1?.resource.id,sectionId:r,file:eB,fileBrowserEntryPoint:!1};e?eL(f.qP(n)):eL(f.Fb(n))},tX=e=>{eL(S.to({type:(0,h.l)(),data:{pinnedFileId:e}}))},tJ=e=>{eL(S.to({type:(0,_.I)(),data:{pinnedFileId:e}}))},tQ=!eN&&ek.editorType===en.nT.Design&&ex.canEdit,t0=(0,eh.jv)((0,k.t)(e6,el.e0.EDITOR_TOOLBAR,e5),{appModel:eD,selectedView:ek}),t1=(0,eh.jv)((0,k.m)(e6,el.e0.EDITOR_TOOLBAR,e5,e8),{appModel:eD,selectedView:ek}),t2=(()=>{if(eN||!eW)return[];let e=[];return tc&&!tB&&((!ty||tD)&&e.push({displayText:tD?(0,u.t)("favorited_resources.indicate_section_prefix")+": "+(tW&&""!==tW.name?tW.name:(0,u.t)("sidebar.starred")):(0,u.t)("favorited_resources.add_to_sidebar"),children:tY()}),tD&&e.push({recordingKey:"favorite-custom-remove",displayText:(0,u.t)("favorited_resources.remove_from_sidebar"),callback:()=>tZ(!0,tW?.id)})),e.push(...tz()),e})(),t5=(e,r)=>e?r:[],t3=[...t1,...t5(tE,t0),{separator:!0,displayText:""},...t5(eW&&!eN&&!ti,[{disabled:!(0,es.Yh)(eD,"enter-history-mode"),recordingKey:"toggleVersionHistory",displayText:(0,e_.Ah)(eD.activeCanvasEditModeType)?(0,u.t)("fullscreen.filename_view.version-history-hide"):(0,u.t)("fullscreen.filename_view.version-history-show"),callback:()=>{eL(b.oB()),(0,e_.Ah)(eD.activeCanvasEditModeType)?eL((0,et.Eg)()):eL((0,et._b)({source:el.e0.EDITOR_TOOLBAR}))}}]),...t5(!!e4,[(0,ep.rC)({dispatch:eL,fileKey:e4?.fileKey||"",templateName:e4?.name||""})]),...t5(t$,[{recordingKey:"exportToPPTX",displayText:(0,u.t)("fullscreen.filename_view.slides_pptx_export"),callback:()=>{eL(b.oB()),(0,W.A)()}}]),...t5(e7,[(0,ep.we)({dispatch:eL,file:{key:ex.key,name:ex.name,folder_id:ex.folderId,team_id:ex.teamId,editor_type:ex.editorType,parent_org_id:ex.parentOrgId},fileNeedsMovingBeforePublish:te,isPublished:!!e4,source:"filename-context-menu"})]),...t5(eW&&!eN&&!(tf&&tE)&&tg!==en.nT.Whiteboard&&!ez,[{disabled:"disabled"===ta,recordingKey:"publishVersion",displayText:(0,u.t)("fullscreen.filename_view.publish-styles-and-components"),callback:()=>{"show_upsell_modal"===ta?tq():"publish"===ta&&tj()}}]),...t5(e3,[{recordingKey:"viewFileAnalytics",displayText:(0,u.t)("fullscreen.filename_view.file_analytics"),callback:()=>{eL((0,S.to)({type:eg.e,data:{fileKey:ex.key,entrypoint:U.F.FileView}}))}}]),...t5(tf&&!ez&&!ej&&!ti,[{disabled:!tb,recordingKey:"exportSelectedExportables",displayText:(0,u.t)("fullscreen.filename_view.export"),shortcut:eD.keyboardShortcuts&&(0,es.c1)(eD.keyboardShortcuts,"export-selected-exportables"),callback:()=>{G.Y5.triggerAction("export-selected-exportables",{source:"toolbar"})}}]),...t5(eq&&ex.canEdit,[{disabled:!tb,recordingKey:"copyToFigmaSlides",displayText:(0,u.t)("slides.general.copy_current_page_to_figma_slides"),callback:()=>{(0,R.Cu)({name:"slides_file_dropdown_entrypoint"}),(0,ew.fx)(ex,eU).then(e=>{(0,ew.PF)(eL,e)})}}]),...t5(t2.length>0,[{separator:!0,displayText:""},...t2]),{separator:!0,displayText:""},...t5(!tE,t0),{separator:!0,displayText:""},...t5(tQ,[(0,F.o)(to,tl)]),{separator:!0,displayText:""},...t5(eW&&!eN&&!tB,[{disabled:!eF||tw,recordingKey:"duplicate",displayText:tM,callback:()=>{eL(b.oB());let e=(0,$.xp)(ex,ex.project,eM);if(e){eL(S.to({type:eI.DV,data:{team:e,resource:er.vL.FILE,action:eo.ZN.DUPLICATE_FILES,editorType:ex.editorType||q._Y.DESIGN,currentPlan:x.F.Plan.STARTER,upsellPlan:x.F.Plan.PRO,upsellSource:ee.b.FILE_DUPLICATE}}));return}G.Y5.dispatchIfSaved(E.YW({file:ex,checkOssSalesExperiment:e2}))}}]),...t5(eW&&!tN,[{disabled:!tP,recordingKey:"rename",displayText:tE?(0,u.t)("fullscreen.filename_view.rename-branch"):(0,u.t)("fullscreen.filename_view.rename"),callback:()=>{eL(b.oB()),eL(T.vg())}}]),...t5(eW&&!eN&&tL,[{disabled:!tA,displayText:"Restore",callback:()=>{eL(b.oB()),eB&&eL(y.R({fileKeys:{[ex.key]:eB},userInitiated:!0}))}}]),...t5(eW&&!eN&&!!tF,[{disabled:!1,displayText:(0,u.t)("fullscreen.filename_view.go_to_project"),callback:()=>{if(tF){let e;e=(0,l.kc)().ps_benchmark?(0,V.cU)(tF.id,tF.orgId??null,tF.teamId,eM):(0,ei.EE)(tF.id,tF.orgId??null),eL(v.V3({url:e}))}}}]),...t5(eW&&!eN&&!tE,[{disabled:!!th&&(0,m.Px)(t_),sideText:th?(0,m.zS)(t_):void 0,rightJustifySideText:!0,recordingKey:"moveToProject","data-onboarding-key":"FILENAME_VIEW_MOVE_TO_PROJECT",displayText:(0,u.t)("fullscreen.filename_view.move-to-project"),callback:(0,eA.RG)(eL,ex,eV,{canMove:!!tR,isUserViewerRestricted:!!tp,planUser:eZ.data?.file?.currentPlanUser??null,inDrafts:!!eZ.data?.file?.isDraftFile,isBillingRemodelEnabled:th,draftsMoveData:t_})}]),...t5(!tc&&(tD||!ty)&&!tB,[{recordingKey:"favorite",displayText:tD?(0,u.t)("fullscreen.filename_view.unfavorite_label"):(0,u.t)("fullscreen.filename_view.favorite_label"),callback:()=>tZ(!!tD)}]),...t5(eW&&!eN&&!tN&&!tB&&tu,[{disabled:!tC,recordingKey:"delete",displayText:tE?(0,u.t)("fullscreen.filename_view.archive-branch"):(0,u.t)("fullscreen.filename_view.trash"),callback:tE?()=>{eL(b.oB()),eB&&(eL(E.VK({fileKeys:{[ex.key]:eB},userInitiated:!0})),e("Branch Archived",{fileKey:ex.key,fileRepoId:ex.fileRepoId}))}:()=>{if(eL(b.oB()),!ex||!eB)return;let e=(0,D.up)(ex,eV);e&&(0,D.SA)(ex,e)?ex.repo?.canEdit&&!e.trashed_at&&eL(I.U1({filesByKey:{},reposById:{[e.id]:{repo:e,main_file:eB}}})):tC&&eL(I.U1({filesByKey:{[ex.key]:eB}}))}}]),...t5(eW&&!eN&&tN,[{disabled:!tA,displayText:(0,u.t)("fullscreen.filename_view.delete-branch"),callback:()=>{eL(b.oB()),eL(S.to({type:eu.e,data:{fileName:ex.name,onConfirm:()=>eL(I.kj({fileKeys:{[ex.key]:!0},userInitiated:!0}))}}))}}]),...t5(!!tV,[{separator:!0,displayText:""},{recordingKey:"resetFileThumbnail",displayText:(0,u.t)("fullscreen.filename_view.restore_default_thumbnail"),callback:()=>{eL(E.$m({file_key:ex.key,thumbnail_guid:null}))}}])];return i.createElement(A.fu,{name:el.e0.EDITOR_FILENAME_DROPDOWN,properties:{...td,slideConversionDropdownEntrypoint:eq}},i.createElement(ev.j,{items:t3,parentRect:r,showPoint:!eY,recordingKey:n,dispatch:eL,allowCodegenOptions:ek.editorType===en.nT.Design,onSelectItem:e=>{e.callback&&e.callback("",{},eL)},activatePathOnMount:eR,lean:eY?"right":void 0,leanPadding:eP,shouldUsePortal:eY}))}},733378:(e,r,n)=>{n.d(r,{DF:()=>d,Qy:()=>m,RG:()=>u});var i=n(181912),a=n(342103),o=n(738269),s=n(420576),l=n(540019),c=n(520425);function d(e,r){return!!e&&!!r&&(e.creatorId===r.id&&(0,i.A)(e.createdAt).add(30,"s").isAfter((0,i.A)())||e.canEdit)}function u(e,r,n,i){return()=>{if(e(o.oB()),!r)return;let l=(0,s.up)(r,n);(0,a.hd)({key:r.key,name:r.name,folder_id:r.folderId,team_id:r.teamId,editor_type:r.editorType,is_team_template:!!r.template&&!r.template.unpublishedAt,is_published_site:r.isPublishedSite,parent_org_id:r.parentOrgId},l,e,void 0,{},void 0,!1,i)}}function m(e){return!e.parentOrgId&&!e.teamId}l.M4.Query({fetch:async e=>{if(!e)return null;let r=await c.L.getFileCanRequestEdit({fileKey:e});return!!r.data.meta?.can_request_edit},key:"fileCanRequestEdit"})},784578:(e,r,n)=>{n.d(r,{$5:()=>G,Kw:()=>H,Xo:()=>$,i1:()=>K,kU:()=>W,oH:()=>Y});var i=n(411855),a=n(188507),o=n(268853),s=n(922827),l=n(776250),c=n(915440),d=n(711525),u=n(776621),m=n(493323),p=n(939863),h=n(553015),_=n(411045),g=n(303345),f=n(750293),E=n(672517),y=n(226055),b=n(737499);n(335682);var v=n(594901),I=n(317946),T=n(860178),S=n(99506),w=n(279453),A=n(623746),C=n(336599),N=n(147206),L=n(802026),O=n(498606),R=n(466816),P=n(143678),D=n(507956),k=n(979796),M=n(651994),F=n(343796),x=n(203302),U=n(327562),B=n(676939),V=n(477160);let G="edit_button_upgrading_to_edit";var H=(e=>(e.EDIT_BUTTON_LOADING="editButtonLoading",e.EDIT_BUTTON="editButton",e.PRO_REQUEST_UPGRADE="proRequestUpgrade",e.ORG_REQUEST_UPGRADE="orgRequestUpgrade",e.REQUEST_EDIT_VIEW="requestEditView",e.PENDING_UPGRADE_REQUEST="pendingUpgradeRequest",e.VIEW_ONLY="viewOnly",e.PLAN_REQUEST_UPGRADE="planRequestUpgrade",e.PENDING_EDIT_ROLE_REQUEST="pendingEditRoleRequest",e))(H||{});function K(e){return!!e&&["orgRequestUpgrade","proRequestUpgrade","requestEditView"].includes(e.type)}function W(e){let r=e.file,n=(0,a.d4)(e=>e.loadingState),s=(0,a.d4)(e=>e.teams),m=(0,T.iZ)(),h=(0,i.useMemo)(()=>!!r&&(0,N.Pe)(r),[r]),E=(0,a.d4)(({openFile:e})=>e?.org?.name),y=(0,I.E)(),O=r.canEdit,P=(0,v.sj)(r),k=r.editorType===S._Y.SLIDES&&!!(0,d.oA)(r.org?.isSlidesDisabled),M=P||k,x=(0,D.ks)(),U=r.canAccessFullDevMode,B=(0,_.nB)(),{handleUpgrade:V,getUpgradeEligibility:H,getPendingRequest:K,getUpgradePathway:W,getIsUpgradeHandlerLoading:$}=(0,g.wH)(),Y=(0,g.C1)(),z=(0,c.Rs)(w.OiG,{fileKey:r.key,orgId:r.parentOrgId}),j=(0,i.useCallback)(()=>{let e={file_key:r.key,link_access:r.linkAccess};r.parentOrgId?(e.account_type=r.currentPartialOrgUser?.designPaidStatus,e.parent_org_id=r.parentOrgId):r.teamId&&(e.team_id=r.teamId),(0,l.sx)("Edit Button Events",{edit_button_event:"click",...e})},[r]),q=(0,b.BI)();if("loading"===z.status)return{type:"editButtonLoading"};if("loaded"===z.status){let i=r.org?.inviteWhitelist?.guestInviteSetting===L.Gv.REQUIRE_APPROVAL&&!!z.data.orgJoinRequest,a=z.data.file?.fileRoleRequests.find(e=>e.requesterUserId===m?.id);q?.updateHasPendingEditRequest&&q.updateHasPendingEditRequest(!!a);let l=i?(0,p.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}):a?(0,p.t)("fullscreen.toolbar.pending-edit-request-tooltip"):void 0,c=r.editorType===S._Y.DESIGN?r.currentPartialOrgUser?.designAccountTypeRequest:r.currentPartialOrgUser?.whiteboardAccountTypeRequest,d=r.editorType===S._Y.DESIGN?r.currentTeamUser?.designAccountTypeRequest:r.currentTeamUser?.whiteboardAccountTypeRequest,_=c?.status==="pending",g=d?.status==="pending",b=_?c:g?d:null,v=(0,A.V1)(z.data.file?.currentPrivilegedOrgUser??null),I=v?{...v,license_group_member:v.license_group_member?{license_group_id:v.license_group_member.licenseGroupId}:void 0}:null;if(B){if(null===r.editorType)return null;if($())return{type:"editButtonLoading"};let e=r.editorType.toString();switch(H(e,O)){case R.q.CAN_UPGRADE:if(i)return{type:"viewOnly",isRestrictedView:h,isDisabledView:M,pendingToolTipMessage:(0,p.t)("fullscreen.toolbar.pending-org-join-request-tooltip",{orgName:E||""}),hasPendingRequest:i};let n=W(e);return{type:"planRequestUpgrade",upgrade:V({afterUpgradeCallback:()=>{},licenseType:e,upgradeReason:F.i.EDIT_BUTTON,entryPoint:f.tc.EDIT_FILE}),upgradePathway:n};case R.q.CANNOT_UPGRADE:case R.q.UPGRADE_NOT_NEEDED:let s=K(e);if(s&&!Y)return{type:"pendingUpgradeRequest",pendingUpgradeRequest:s,editorType:r.editorType,isRestrictedView:h,isDisabledView:P,pendingToolTipMessage:l,orgId:r.parentOrgId,hasPendingRequest:!0};if(z.data.file?.mustRequestEditorRoleToEdit)return m||(0,u.$D)(o.e.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:m?.id??"",isDevMode:x};if(a)return{type:"pendingEditRoleRequest",hasProvisionalAccess:Y};return{type:"viewOnly",isRestrictedView:h,isDisabledView:M,pendingToolTipMessage:l,hasPendingRequest:!1}}}else{if(!i&&(0,C.VP)(n,G))return{type:"editButtonLoading"};if(z.data.file?.canClickButtonToUpgradeAndEdit)return{type:"editButton",upgrade:async()=>{await y(r,G),j()}};if(z.data.file?.mustRequestAccountUpgradeToEdit){if(r.org)return null===r.editorType?null:x&&O&&!U?null:{type:"orgRequestUpgrade",editorType:r.editorType,fileKey:r.key,orgUser:I,orgId:r.parentOrgId,isDevMode:x};{let n=r.teamId&&s[r.teamId];if(n)return{type:"proRequestUpgrade",file:e.file,team:n,isDevMode:x}}}else if(z.data.file?.mustRequestEditorRoleToEdit)return m||(0,u.$D)(o.e.MONETIZATION_EXPANSION,Error("[Monetization Expansion] User is not logged in when mustRequestEditorRoleToEdit is true")),{type:"requestEditView",fileKey:r.key,userId:m?.id??"",isDevMode:x};else if(z.data.file?.canEditCanvas||z.data.file?.canEditToUpgrade)return null;else if(b&&!x)return null===r.editorType?null:{type:"pendingUpgradeRequest",pendingUpgradeRequest:b,editorType:r.editorType,isRestrictedView:h,isDisabledView:P,pendingToolTipMessage:l,orgId:r.parentOrgId,hasPendingRequest:!0};return{type:"viewOnly",isRestrictedView:h,isDisabledView:M,pendingToolTipMessage:l,hasPendingRequest:!!(_||g||a||i)}}}return null}function $({viewPermission:e,variant:r,recordingKey:n,hideViewOnlyText:a,disableAutoAppearingTooltips:o}){let s=(0,y.GS)();switch(e.type){case"editButtonLoading":return i.createElement("div",{className:V.Hg},i.createElement(h.$,{"aria-label":(0,p.t)("fullscreen.toolbar.edit-file-button-loading-aria-label"),disabled:!0,variant:r,recordingKey:n,width:s?"fill-parent":void 0},i.createElement("span",{className:V.yx},(0,p.t)("fullscreen.toolbar.edit-file-button")),i.createElement(m.kt,{className:V.yU})));case"editButton":{let a={"data-tooltip":(0,p.t)("fullscreen.toolbar.edit-file-button-hover-tooltip"),"data-tooltip-show-immediately":!0,"data-tooltip-type":O.Ib.TEXT,"data-tooltip-max-width":500,"data-tooltip-offset-y":5};return i.createElement(E.fu,{name:P.e0.FILE_EDIT_BUTTON},i.createElement("div",{"data-onboarding-key":"edit-button-onboarding"},i.createElement(h.$,{variant:r,onClick:e.upgrade,recordingKey:n,width:s?"fill-parent":void 0,...a},(0,p.t)("fullscreen.toolbar.edit-file-button"))))}case"requestEditView":return i.createElement(k.N,{fileKey:e.fileKey,userId:e.userId,isDevMode:e.isDevMode,buttonVariant:r,recordingKey:n});case"orgRequestUpgrade":return i.createElement(E.fu,{name:P.e0.FILE_ORG_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,orgId:e.orgId}},i.createElement(M.R7,{fig_file_key:e.fileKey,orgUser:e.orgUser,orgId:e.orgId,editorType:e.editorType,variant:r,recordingKey:n}));case"proRequestUpgrade":return i.createElement(E.fu,{name:P.e0.FILE_PRO_REQUEST_UPGRADE_BUTTON,properties:{isDevMode:e.isDevMode,buttonVariant:r,teamId:e.team.id}},i.createElement(M.sG,{file:e.file,team:e.team,entryPoint:f.tc.EDIT_FILE,variant:r,recordingKey:n}));case"pendingUpgradeRequest":{if("dltBannerViewPermission"===n&&!s)return i.createElement(B.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:a});let l={...e,variant:r,hideViewOnlyText:a,disableAutoAppearingTooltips:o};return i.createElement(U.K,{...l})}case"viewOnly":return i.createElement(B.h,{isRestrictedView:e.isRestrictedView,isDisabledView:e.isDisabledView,pendingToolTipMessage:e.pendingToolTipMessage,hasPendingRequest:e.hasPendingRequest,variant:r,hideViewOnlyText:a});case"planRequestUpgrade":return i.createElement(M.In,{onClick:e.upgrade,variant:r,upgradePathway:e.upgradePathway});case"pendingEditRoleRequest":return i.createElement(x.m,{variant:r,hasProvisionalAccess:e.hasProvisionalAccess})}}function Y(){return(0,a.d4)(e=>"fullscreen"===e.selectedView.view&&e.selectedView.isRecoveryMode&&s.Ez5.uiState().isRecovery.getCopy())}},364871:(e,r,n)=>{n.d(r,{R:()=>i});let i=(0,n(716034).eU)(!1)},549166:(e,r,n)=>{n.d(r,{Cv:()=>eb});var i=n(411855),a=n(188507),o=n(782683),s=n(139689),l=n(922827),c=n(629019),d=n.n(c),u=n(126049),m=n(91408),p=n(517333),h=n(737947),_=n(939683),g=n(358145),f=n(966712),E=n(418956),y=n(498750),b=n(438741),v=n(489604),I=n(554322),T=n(768137),S=n(946689),w=n(452441),A=n(355819),C=n(46481),N=n(154254),L=n(939863),O=n(50663),R=n(30686),P=n(738269),D=n(507877),k=n(293017),M=n(931828),F=n(138369),x=n(617524),U=n(798099),B=n(809831),V=n(198371),G=n(226055),H=n(516398),K=n(369870),W=n(85098),$=n(335682),Y=n(754209),z=n(396462),j=n(860178),q=n(94500),Z=n(416822),X=n(571232),J=n(338400),Q=n(239671),ee=n(498606),et=n(829095),er=n(70699),en=n(896528),ei=n(467594),ea=n(298543),eo=n(371746),es=n(662570),el=n(637820),ec=n(104295),ed=n(766939),eu=n(648044),em=n(27947),ep=n(837746),eh=n(42296),e_=n(639685),eg=n(630834);let ef="multiplayer-nickname-dropdown",eE=(0,K.ck)(),ey=(0,m.jz)(ep.rJv);function eb(e){let r=(0,$.q5)(),{user:n,multiplayer:o,dropdownShown:s}=e,c=(0,a.wA)(),d=(0,a.d4)(e=>"prototype"===e.selectedView.view),u=(0,Y.dR)(),m=(0,Y.Ww)(),p=(0,b.B4)(),h=i.useCallback(e=>{!function(e,r,n,i,a,o,s){if(!a)return;let c=e.sessionID,d=c===r,u=o&&o.sessionID===r;if(d&&u)s();else if(i){let r=a.observingSessionID===c||a.sessionID===c?-1:e.sessionID,i=-1!==a.observingSessionID,o=a.observingSessionID!==c&&a.sessionID!==c;i&&n((0,q._P)({name:"Prototype Observation Ended",params:{multiplayerObservingSessionID:a.observingSessionID,multiplayerSessionID:a.sessionID}})),o&&(n((0,q._P)({name:"Prototype Observation Started",params:{multiplayerObservingSessionID:c,multiplayerSessionID:a.sessionID}})),n(M.b({aware_of_observation_mode:!0}))),n(k.J4({...a,observingSessionID:r}))}else l.h3O.observeUser(c),a.observingSessionID!==c&&a.sessionID!==c&&n(M.b({aware_of_observation_mode:!0}))}(e,m?.sessionID,c,d,o,u,p)},[m?.sessionID,c,d,o,u,p]),_=d?null:r;return n?i.createElement(i.Fragment,null,!eE&&_&&n&&i.createElement(el.k,{fileKey:_.key}),i.createElement(ev,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h})):i.createElement(i.Fragment,null,!eE&&_&&n&&i.createElement(el.k,{fileKey:_.key}),i.createElement(eC,{dropdownShown:s,multiplayer:o,user:n,editingFile:_,onUserClick:h}))}function ev(e){let{multiplayer:r,user:n,onUserClick:a,dropdownShown:o,editingFile:s}=e,l=(0,i.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,i.useEffect)(()=>{},[r,n]);let c=(0,V.DG)(s?.key||"").enabled;return i.createElement("div",{className:eh.Wh},i.createElement(em.sK,null),l&&i.createElement(eA,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:a}),s&&i.createElement(eo.w,{user:n,editingFile:s,isFileInWorkshop:c}))}function eI(e){let{query:r,usersToSearch:n}=e,[a,o]=i.useState(n),s=i.useRef(!1),l=(0,_.am)(),c=i.useRef(!1),d=c.current,m=i.useCallback(async e=>{if(""===e)o(n);else{s.current=!1;let r=await (0,eu.n)(e,n);s.current||(o(r.map(e=>e.item)),d||(l("Multiplayer Tools User Search",{otherUserSessionsCount:n.length}),c.current=!0))}},[d,l,n]),p=(0,u.A)(m,200);return i.useEffect(()=>(p(r),()=>{p.cancel(),s.current=!0}),[p,r,n]),{searchResults:a}}let eT=(0,i.forwardRef)(function(e,r){let{query:n,setQuery:a}=e,l=(0,g.ZC)(n),c=i.useRef(null),[u,m]=i.useState(!1),p=(0,G.GS)();return(i.useEffect(()=>{c.current&&n!==l&&(c.current.scrollWidth>c.current.clientWidth?m(!0):m(!1))},[l,n]),p)?i.createElement("div",{ref:r,className:eh.MT},i.createElement("div",{className:eh.qc},i.createElement(C.U,{svg:e_.A,"aria-label":(0,L.t)("fullscreen.accessibility.search_icon")},i.createElement(o.h,null))),i.createElement(w.L,{ref:c,placeholder:(0,L.t)("collaboration.spotlight.menu.search.placeholder"),className:d()({[eh.Rt]:!0,[eh.ro]:u}),value:n,onClick:U.dG,onChange:e=>{a(e.target.value),(0,U.dG)(e)},onKeyDown:e=>{"Escape"===e.key&&a(""),(0,U.dG)(e)},spellCheck:!1,autoFocus:!0}),(0,f.kc)().file_view_history?i.createElement("div",{className:eh.WY},!!n&&i.createElement("button",{className:eh.Vw,onClick:e=>{e.stopPropagation(),a("")},"aria-label":(0,L.t)("search.sidebar_search_clear")},i.createElement("div",{className:eh.i3},i.createElement(C.U,{svg:eg.default},i.createElement(s.A,null))))):!!n&&i.createElement("button",{className:eh.hC,onClick:e=>{e.stopPropagation(),a("")},"aria-label":(0,L.t)("search.sidebar_search_clear")},i.createElement("div",{className:eh.i3},i.createElement(C.U,{svg:eg.default},i.createElement(s.A,null))))):null});function eS(e){let{targetRect:r,arrowOffsetFromRectLeft:n,currentUser:o,peopleList:s,previousViewerList:l,previousViewerListRenderer:c,userListRenderer:u,onUserClick:m,onKeyDown:p,shouldDisableSpotlight:h}=e,_=(0,G.GS)(),g=(0,i.useRef)(null),y=(0,i.useRef)(null),[w,C]=(0,E.fp)(v.ah),[R,D]=(0,E.fp)(v.Dv),[k,M]=i.useState(_?310:220),F=(0,i.useRef)(null),[x,U]=i.useState(0),B=(0,a.wA)(),V=(0,I.Av)(),H=Math.min(window.innerHeight-V-22,_?465:450);i.useLayoutEffect(()=>{g.current&&y.current&&M(H-g.current.offsetHeight-y.current.offsetHeight-16*x)},[_,H,x]);let K=(0,i.useCallback)(()=>{h||C(!0)},[C,h]),{start:W,cancel:$}=(0,z.Z)(K),j=(0,i.useCallback)(()=>{$(),C(!1)},[$,C]),q=(0,b.Vi)(),Z=(0,i.useCallback)(()=>{h||(q(),j(),D(!0),B(P.oB()))},[j,B,D,q,h]),X=(0,b.B4)(),J=(0,i.useCallback)(()=>{X(),B(P.oB())},[B,X]),Q=(0,Y.dR)(),ee=Q&&e.currentUser.sessionID===Q.sessionID?i.createElement(T.pz,{onClick:J,className:eh.BK},(0,L.tx)("collaboration.spotlight.button.stop")):i.createElement(S.$$,{onClick:Z,className:d()(eh.BK,h&&eh.r9),onMouseOver:()=>{W(300)},onMouseLeave:j,disabled:h},(0,L.tx)("collaboration.spotlight.tooltip.spotlight_me")),et=(0,f.kc)().file_view_history&&c&&l&&l.length>0,en=_&&s.length+(et?l.length:0)>8,[ei,eo]=i.useState(""),{searchResults:es}=eI({query:ei,usersToSearch:s}),{searchResults:ec}=eI({query:ei,usersToSearch:(0,i.useMemo)(()=>(0,f.kc)().file_view_history&&l?l:[],[l])}),ed=i.createElement(i.Fragment,null,i.createElement("div",{ref:g,className:eh.az},i.createElement(er.Q,{user:o,isOverflow:!0,isCurrentUserHeaderRow:_}),i.createElement("div",{className:eh.Vr},ee,i.createElement(el.L,null))),s.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:eh.me}),i.createElement("div",{className:eh.dn,ref:_?y:void 0},i.createElement(eT,{ref:_?void 0:y,query:ei,setQuery:eo})),i.createElement(A.P,{width:ey-16,maxHeight:k,scrollBarAlways:!0,disableScrollbarBorder:!0},i.createElement(O.W,{autofocus:!0,label:(0,L.t)("fullscreen.toolbar.multiplayer.all_users"),renderer:u,onSelect:e=>{e.length&&(m(e[0]),B(P.oB()))},initiallyNotSelected:!0,customClassName:eh.cu},es)))),eu=es.length>0&&ec.length>0,em=es.length>0||ec.length>0,ep=0===es.length&&0===ec.length,e_=i.createElement("div",{className:eh.zW},i.createElement("div",{className:eh.me}));(0,i.useEffect)(()=>{(0,f.kc)().file_view_history&&U((en?1:0)+(""!==ei&&ep?1:0)+(em?1:0))},[en,ei,ep,em]);let eg=i.createElement(i.Fragment,null,i.createElement("div",{ref:g,className:eh.Km},i.createElement(er.Q,{user:o,isOverflow:!0,isCurrentUserHeaderRow:_}),i.createElement("div",{className:eh.Vr},ee,i.createElement(el.L,null))),en&&i.createElement(i.Fragment,null,e_,i.createElement("div",{className:eh.zK,ref:_?y:void 0},i.createElement(eT,{ref:_?void 0:y,query:ei,setQuery:eo}))),""!==ei&&ep&&i.createElement(i.Fragment,null,e_,i.createElement("div",{className:`${eh.hg} ${N.cx.mb8.$}`},(0,L.tx)("fullscreen.toolbar.multiplayer.no_user_found"))),em&&i.createElement(i.Fragment,null,e_,i.createElement(A.P,{width:ey-16,maxHeight:k,scrollBarAlways:!0,disableScrollbarBorder:!0,ref:F},eu&&i.createElement("div",{className:eh.hg},(0,L.tx)("fullscreen.toolbar.multiplayer.currently_viewing")),es.length>0&&i.createElement(i.Fragment,null,i.createElement(O.W,{label:(0,L.t)("fullscreen.toolbar.multiplayer.currently_viewing_users"),renderer:u,onSelect:e=>{e.length&&(m(e[0]),B(P.oB()))},initiallyNotSelected:!0,customClassName:eh.aK},es)),c&&ec.length>0&&i.createElement(i.Fragment,null,i.createElement("div",{className:eh.hg},(0,L.tx)("fullscreen.toolbar.multiplayer.previously_viewed")),i.createElement(O.W,{label:(0,L.t)("fullscreen.toolbar.multiplayer.previously_viewed_users"),renderer:c,initiallyNotSelected:!0,customClassName:eh.aK},ec)),_&&i.createElement("div",{className:N.cx.pt12.$}))));return i.createElement(ea.Cf,{className:d()(eh.qN,{[eh.QD]:(0,f.kc)().file_view_history}),removeUI3BorderPadding:_,targetRect:r,maxHeight:H,maxWidth:ey,lean:"center",arrowOffsetFromRectLeft:n,onKeyDown:p,showPoint:!_,disableDropdownScrollContainer:!0,propagateCloseClick:!0},(0,f.kc)().file_view_history?eg:ed)}let ew="multiplayer-tools-dropdown",eA=i.memo(function(e){let{multiplayer:r,dropdownShown:n,currentUser:o,onUserClick:s}=e,c=(0,i.useRef)(null),u=(0,i.useRef)(null),m=(0,i.useRef)(null),g=(0,i.useRef)(null),I=(0,i.useRef)(null),T=(0,G.GS)(),S=(0,W.wF)(),w=(0,j.iZ)(),A=(0,B.my)(),C=(0,Q.yY)(A),N=(0,F.Kf)({isDesign:C,isUnauth:!w}),O=(0,x.EO)(),k=(0,a.wA)(),[M,V]=i.useState(!1),K=n?.type===ew,$=(0,i.useMemo)(()=>r.allUsers.filter(e=>e.sessionID!==o?.sessionID),[r.allUsers,o]),z=(0,R.e)(),[q,X]=(0,E.fp)(v.ah);q&&!K&&X(!1);let J=c.current&&u.current?c.current.clientWidth-u.current.clientWidth:void 0,en=(0,W.Wq)(J),{users:ea,overflowUsers:eo}=(0,W.uC)($,null,!1,en),es=(0,i.useMemo)(()=>{let e=[...ea,...eo];return(0,f.kc)().file_view_history?e.filter(e=>e&&e.userID!==o.userID):e},[eo,ea,o]),el=(0,i.useMemo)(()=>S?.filter(e=>!es.some(r=>e.userID===r.userID)&&e.userID!==o.userID),[es,S,o]),ed=(0,_.am)(),eu=(0,i.useCallback)(e=>{if((0,U.dG)(e),!u.current)return;m.current=u.current.getBoundingClientRect();let r=n?.type===ew;k(D.gR({type:ew})),r||ed("Multiplayer Tools Opened",{currentUserSessionID:o.sessionID,otherUserSessionsCount:es.length})},[o.sessionID,k,n?.type,es.length,ed]),em=(0,Y.dR)(),ep=em&&em.sessionID!==o.sessionID?em:null,e_=(0,Z.q)(),eg=(0,b.tu)(),ef=(0,b.oJ)(),eE=i.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:n}){let a=(0,y.Gc)(()=>{let r=`/files${e_}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),o=[],s=r.sessionNominatedByCurrentUser===e.sessionID;return r.presenterSessionID===e.sessionID||z||(s?o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,W.AD)(e)&&ef(e.sessionID,r)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,W.AD)(e)&&eg(e.sessionID,r)},key:"ask-to-spotlight"})),o.push({text:(0,L.tx)("avatar.tooltip.view_profile"),onClick:e=>{a(e)},key:"view-profile"}),i.createElement(er.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:n,secondaryActions:o})}}),[r,e_,eg,ef,z]),ey=(0,f.kc)().file_view_history?{label:e=>e.name,id:e=>String(e.userID),renderDisplay(e,{hasCursor:r}){let n=(0,y.Gc)(()=>{let r=`/files${e_}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),a=[{text:(0,L.tx)("avatar.tooltip.view_profile"),onClick:e=>{n(e)},key:"view-profile"}];return i.createElement(er.Q,{key:e.userID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:a})}}:void 0,eb=K||M,ev=es.length+1,eI=i.createElement(ec.s,{featured:ep,quickAccess:ea,maxVisibleUsers:(T?W.A8:W.Q2)-1,onUserClick:s,totalUserCount:ev}),eT=i.createElement(et.x,null,i.createElement("button",{id:"multiplayer-toolbar-container","aria-label":(0,L.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"aria-expanded":null!=m.current&&n?.type===ew,"data-tooltip-type":ee.Ib.TEXT,"data-tooltip":(0,L.t)("fullscreen.toolbar.multiplayer.multiplayer_tools"),"data-tooltip-offset-x":u.current&&I.current?u.current.offsetWidth/2-I.current.offsetWidth/2-1.5:0,"data-tooltip-offset-y":u.current&&c.current?c.current.clientHeight/2-u.current.clientHeight/2:0,className:d()({[eh.XE]:!0,[eh.yx]:T&&eo.length>0,[eh.Ge]:T&&0===eo.length,[eh.wH]:K,[eh.yo]:!K&&M}),ref:u,onMouseOverCapture:e=>{V(!0),(0,U.dG)(e)},onMouseDownCapture:e=>{N()?O(l.rcl.FOLLOW_PRESENTER):eu(e)},onMouseLeave:()=>{V(!1)},onKeyDown:e=>{(0,H.hx)({e,onClickHandler:e=>{N()?O(l.rcl.FOLLOW_PRESENTER):eu(e)},onEscapeHandler:()=>{u?.current?.blur()}})},onClick:U.dG},i.createElement("span",{key:o.sessionID,ref:g,className:eh.r9},i.createElement(er.Q,{user:o,key:o.sessionID,isOverflow:!1})),i.createElement("span",{"data-onboarding-key":"multiplayer-spotlight-nux-key",className:eh.rR},eo.length>0&&i.createElement("span",{className:d()({[eh.zk]:!0,[eh.r9]:!0,[eh.wH]:K,[eh.yo]:!K&&M}),style:{minWidth:ev<10?8:ev<100?15:22}},`${ev}`),i.createElement(ei.o,{divRef:I,disableHoverAnimation:T,className:d()({[eh.ai]:!0,[eh.r9]:!0,[eh.wH]:K,[eh.yo]:!K&&M}),showingDropdown:eb}))));return i.createElement("span",{className:eh.EI,ref:c,"data-onboarding-key":"multiplayer-users-container"},T?i.createElement(i.Fragment,null,eT,eI):i.createElement(i.Fragment,null,eI,eT),n?.type===ew&&I.current&&i.createElement(eS,{targetRect:I.current.getBoundingClientRect(),arrowOffsetFromRectLeft:I.current?I.current.offsetWidth/2+1:0,currentUser:o,onUserClick:s,userListRenderer:eE,peopleList:es,previousViewerList:el,previousViewerListRenderer:ey,onKeyDown:e=>{"Tab"===e.key&&k(P.oB())},shouldDisableSpotlight:z}))});function eC(e){let{multiplayer:r,user:n,onUserClick:a,dropdownShown:o,editingFile:s}=e,l=(0,i.useMemo)(()=>r.allUsers.find(e=>e.sessionID===r.sessionID)||null,[r.allUsers,r.sessionID]);(0,i.useEffect)(()=>{},[r,n]);let c=(0,V.DG)(s?.key||"").enabled;return i.createElement("div",{className:eh.Wh},i.createElement(em.sK,null),i.createElement(eL,{dropdownShown:o,multiplayer:r,currentUser:l,onUserClick:a,editingFile:s}),s&&i.createElement(eo.w,{user:n,editingFile:s,isFileInWorkshop:c}))}let eN="multiplayer-users-dropdown";function eL(e){let{editingFile:r,multiplayer:n,dropdownShown:o,currentUser:s,onUserClick:l}=e,c=(0,i.useRef)(null),d=(0,i.useRef)(null),u=(0,i.useRef)(null),m=(0,a.wA)(),_=(0,i.useCallback)(e=>{(0,U.dG)(e),c.current&&(d.current=c.current.getBoundingClientRect(),m(D.gR({type:eN})))},[m]),g=o?.type,f=(0,i.useMemo)(()=>g===ef&&u.current?u.current.getBoundingClientRect():null,[g]),E=(0,es.C$)(),v=(0,Z.q)(),I=(0,J.Lk)(),T=r?.key??null,{usersNotInCall:S}=(0,X.W5)(T,!0),w=n.allUsers,A=(0,W.D4)(),C=(0,a.d4)(e=>T&&e.voice.activeCall[T])||!1,{users:N,overflowUsers:R}=(0,W.uC)(I?S:w,s,C,A),k=i.useCallback(e=>0===e?"multiplayer-spotlight-nux-key":1===e?"multiplayer-observation-nux-key":"",[]),M=(0,b.tu)(),F=(0,b.oJ)(),x=i.useMemo(()=>({label:e=>e.name,id:e=>String(e.sessionID),renderDisplay(e,{hasCursor:r}){let a=(0,y.Gc)(()=>{let r=`/files${v}/user/${e.userID}`;h.Ay.redirect(r,p.eD?void 0:"_blank")}),o=[],s=n.sessionNominatedByCurrentUser===e.sessionID;return n.presenterSessionID!==e.sessionID&&(s?o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.menu.cancel_ask_to_spotlight"),onClick:()=>{(0,W.AD)(e)&&F(e.sessionID,n)},key:"cancel-ask-to-spotlight"}):o.push({text:(0,L.tx)("collaboration.spotlight.tooltip.ask_to_spotlight"),onClick:()=>{(0,W.AD)(e)&&M(e.sessionID,n)},key:"ask-to-spotlight"})),o.push({text:(0,L.tx)("avatar.tooltip.view_profile"),onClick:e=>{a(e)},key:"view-profile"}),i.createElement(er.Q,{key:e.sessionID,user:e,isOverflow:!0,isInListbox:!0,containsCursor:r,secondaryActions:o})}}),[n,v,M,F]);return i.createElement("span",{className:eh.VV,"data-onboarding-key":"multiplayer-avatars"},N.map((e,r)=>{let n=i.createElement(er.Q,{user:e,onboardingKey:k(r),key:e.sessionID,isOverflow:!1,onUserClick:l});return e.sessionID===s?.sessionID?i.createElement("span",{key:e.sessionID,ref:u},n):n}),R.length>0&&i.createElement(i.Fragment,null,i.createElement("button",{id:"multiplayer-overflow-container","aria-label":(0,L.t)("fullscreen.toolbar.multiplayer.more_users"),"aria-expanded":null!=d.current&&o?.type===eN,className:eh.O5,ref:c,onMouseDown:_,onKeyDown:e=>{(0,H.hx)({e,onClickHandler:e=>{_(e)},onEscapeHandler:()=>{c?.current?.blur()}})},onClick:U.dG},i.createElement(en.f,{className:eh.zb,text:`${R.length}`})),o?.type===eN&&c.current&&i.createElement(es.WM,{targetRect:c.current.getBoundingClientRect(),onKeyDown:e=>{"Tab"===e.key&&m(P.oB())}},i.createElement(O.W,{autofocus:!0,label:"More multiplayer users",renderer:x,onSelect:e=>{e.length&&(l(e[0]),m(P.oB()))},customClassName:eh.cu},R))),o?.type===ef&&f&&i.createElement(ea.Cf,{targetRect:f,maxHeight:E,className:eh.a1,propagateCloseClick:!0},i.createElement(ed.M,null)))}},157147:(e,r,n)=>{n.d(r,{ec:()=>S});var i=n(922827),a=(n(939863),n(256975)),o=n(950255),s=n(617453),l=n(813648),c=n(279145),d=n(259494),u=n(92073),m=n(605492),p=(e=>(e[e.TOOL=0]="TOOL",e[e.ACTION=1]="ACTION",e[e.CUSTOM_ACTION=2]="CUSTOM_ACTION",e[e.ACTION_SUBMENU=3]="ACTION_SUBMENU",e[e.FLYOUT=4]="FLYOUT",e[e.LABEL=5]="LABEL",e[e.TEXT_BUTTON=6]="TEXT_BUTTON",e))(p||{});let h=[i.m1T.DESIGN_LAYOUT,i.m1T.WHITEBOARD_LAYOUT,i.m1T.SLIDE_LAYOUT,i.m1T.COOPER_LAYOUT,i.m1T.COOPER_CONSTRAINED,i.m1T.RASTER,i.m1T.GRADIENT,i.m1T.TEXT,i.m1T.COMMENTS],_=h.concat([i.m1T.VECTOR]),g=h.concat([i.m1T.VECTOR,i.m1T.PLACE_IMAGE]),f=[i.m1T.VECTOR],E=[i.m1T.PLACE_IMAGE],y=[i.m1T.PREVIEW,i.m1T.BRANCHING,i.m1T.COMPARE_CHANGES,i.m1T.HISTORY],b=[i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.RASTER,i.m1T.GRADIENT,i.m1T.PREVIEW,i.m1T.COMMENTS,i.m1T.BRANCHING,i.m1T.HISTORY,i.m1T.COMPARE_CHANGES],v={type:4,name:"move-flyout",children:[{action:"set-tool-default",property:"currentTool",propertyValue:i.NLJ.SELECT,recordingKey:"toolDefault"},{action:"set-tool-scale",property:"currentTool",propertyValue:i.NLJ.SCALE,recordingKey:"toolScale"}],editModes:g,recordingKey:"moveFlyout"},I={type:4,name:"shape-flyout",editModes:h,recordingKey:"shapeFlyout",children:[{action:"set-tool-rectangle",property:"currentTool",propertyValue:i.NLJ.SHAPE_RECTANGLE,recordingKey:"toolShapeRectangle"},{action:"set-tool-line",property:"currentTool",propertyValue:i.NLJ.SHAPE_LINE,recordingKey:"toolShapeLine"},{action:"set-tool-arrow",property:"currentTool",propertyValue:i.NLJ.SHAPE_ARROW,recordingKey:"toolShapeArrow"},{action:"set-tool-ellipse",property:"currentTool",propertyValue:i.NLJ.SHAPE_ELLIPSE,recordingKey:"toolShapeEllipse"},{action:"set-tool-regular-polygon",property:"currentTool",propertyValue:i.NLJ.SHAPE_REGULAR_POLYGON,recordingKey:"toolShapePolygon"},{action:"set-tool-star",property:"currentTool",propertyValue:i.NLJ.SHAPE_STAR,recordingKey:"toolShapeStar"},{action:"place",recordingKey:"toolPlaceImage",onboardingKey:"tool-place-image"}]},T={type:4,name:"comments-flyout",editModes:h,recordingKey:"commentsFlyout",children:[{action:"set-tool-comments",property:"currentTool",propertyValue:i.NLJ.COMMENTS,recordingKey:"toolComments"},{action:"set-tool-annotate",property:"currentTool",propertyValue:i.NLJ.ANNOTATE,recordingKey:"toolAnnotate"},{action:"set-tool-measure",property:"currentTool",propertyValue:i.NLJ.MEASURE,recordingKey:"toolMeasure"}]},S={type:0,tool:i.NLJ.COMMENTS,action:"set-tool-comments",editModes:h.concat([i.m1T.PREVIEW]),nonEditorsAllowed:!0,onboardingKey:"comment",recordingKey:"toolComment"},w={type:1,action:"component-insert",editModes:h,recordingKey:"toolResourceInsert",onboardingKey:"insert",isActive:l.kg};[{type:0,tool:i.NLJ.SELECT,action:"set-tool-default",nonEditorsAllowed:!0,editModes:y,recordingKey:"toolDefault"},v,{type:4,name:"region-flyout",editModes:h,onboardingKey:"frame",recordingKey:"regionFlyout",children:[{action:"set-tool-frame",property:"currentTool",propertyValue:i.NLJ.FRAME,recordingKey:"toolFrame"},{action:"set-tool-section",property:"currentTool",propertyValue:i.NLJ.SECTION,recordingKey:"toolSection"},{action:"set-tool-slice",property:"currentTool",propertyValue:i.NLJ.SLICE,recordingKey:"toolSlice"}]},I,{type:4,name:"pen-flyout",editModes:_,recordingKey:"penFlyout",onboardingKey:"pen",children:[{action:"set-tool-pen",property:"currentTool",propertyValue:i.NLJ.VECTOR_PEN,recordingKey:"toolPen"},{action:"set-tool-pencil",property:"currentTool",propertyValue:i.NLJ.VECTOR_PENCIL,recordingKey:"toolPencil"}]},{type:0,tool:i.NLJ.VECTOR_BEND,action:"set-tool-bend",editModes:f,recordingKey:"toolBend"},{type:0,tool:i.NLJ.VECTOR_PAINT_BUCKET,action:"set-tool-paint-bucket",editModes:f,recordingKey:"toolPaintBucket"},{type:0,tool:i.NLJ.TYPE,action:"set-tool-type",editModes:h,recordingKey:"toolType",onboardingKey:"tool-type-onboarding"},w,{type:0,tool:i.NLJ.HAND,action:"set-tool-hand",nonEditorsAllowed:!0,loggedOutAllowed:!0,editModes:b,recordingKey:"toolHand"},S,{type:5,label:"toolbar-place-image",editModes:E,recordingKey:"toolPlaceOneImage"},{type:6,action:"place-all-images",editModes:E,recordingKey:"toolPlaceAllImages"},{type:6,action:"discard-all-images",editModes:E,recordingKey:"toolDiscardAllImages"},{type:6,action:"leave-edit-mode",editModes:f,tooltip:"leave-vector-edit-mode",recordingKey:"toolLeaveVectorEditMode"}].map(e=>e===S?T:e);let A={type:1,action:"focus-mode-component-set-toggle",editModes:[i.m1T.DESIGN_LAYOUT],recordingKey:"focusModeComponentSetToggle",isActive:()=>i.Ez5.uiState().focusModeState.getCopy()===i.xc1.COMPONENT_SET,onboardingKey:"focus-mode-component-set-toggle"},C=[{type:1,action:"multi-edit-text",editModes:h,recordingKey:"multiEditText",onboardingKey:"multi-edit-text"},{type:1,action:"select-matching",editModes:[i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT],recordingKey:"selectMatching"},A],N=e=>r=>!!r.mirror.selectionProperties.resettableInstanceOverrides?.selectionOverrides[e];var L=(e=>(e.STANDARD_BUTTON="STANDARD_BUTTON",e.DIALOG_TRIGGER_BUTTON="DIALOG_TRIGGER_BUTTON",e.DROPDOWN_TRIGGER_BUTTON="DROPDOWN_TRIGGER_BUTTON",e))(L||{});i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT,i.m1T.COOPER_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT,i.m1T.DESIGN_LAYOUT,i.m1T.SLIDE_LAYOUT,[...h,i.m1T.DEV_HANDOFF],[...h,i.m1T.DEV_HANDOFF],i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.SLIDE_LAYOUT,N(i.YnC.SIZE),N(i.YnC.EXPORTS),N(i.YnC.EFFECTS),N(i.YnC.LAYER),N(i.YnC.VISIBLE),N(i.YnC.NAME),N(i.YnC.FILL),N(i.YnC.STROKE),N(i.YnC.TEXT),N(i.YnC.TEXT_STYLE),N(i.YnC.PROTOTYPE_INTERACTIONS),N(i.YnC.OVERLAY),o.P,[...C,(o.P,()=>i.Ez5.editorState().selectionIsMask.getCopy()===i.F84.ON),(i.m1T.DESIGN_LAYOUT,i.m1T.TEXT,i.m1T.SLIDE_LAYOUT),([...h,i.m1T.DEV_HANDOFF,i.m1T.PREVIEW],e=>e.openFile?.canEdit||(0,a.tn)(e)),([...h,i.m1T.DEV_HANDOFF,i.m1T.PREVIEW],()=>!0)],i.NLJ.SELECT,[...h,i.m1T.PREVIEW,i.m1T.HISTORY],i.NLJ.HAND,[...h,i.m1T.PREVIEW,i.m1T.HISTORY],d.N,i.NLJ.SELECT,i.m1T.DEV_HANDOFF,i.m1T.DEV_HANDOFF_HISTORY,m.A,i.NLJ.MEASURE,i.m1T.DEV_HANDOFF,i.NLJ.ANNOTATE,i.m1T.DEV_HANDOFF,i.NLJ.COMMENTS,i.m1T.DEV_HANDOFF,h.concat([i.m1T.DEV_HANDOFF,i.m1T.PREVIEW,i.m1T.MAGIC_LINK]),u.Iv},252828:(e,r,n)=>{n.d(r,{p:()=>$});var i=n(411855),a=n(188507),o=n(187134),s=n(243742),l=n(922827),c=n(629019),d=n.n(c),u=n(961747),m=n(939683),p=n(794272),h=n(966712),_=n(418956),g=n(498750),f=n(153234),E=n(559036),y=n(268537),b=n(715981),v=n(939863),I=n(181849),T=n(738269),S=n(809831),w=n(506599),A=n(226055),C=n(728325),N=n(356390),L=n(949632),O=n(617453),R=n(227944),P=n(318812),D=n(100197),k=n(239671),M=n(498606),F=n(279145),x=n(259494),U=n(507956),B=n(467594),V=n(585645),G=n(728587),H=n(289566);let K="zoom-input-dropdown";function W({targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o}){let c=(0,m.am)();i.useEffect(()=>{c("View Menu Opened")},[c]);let d=(0,S.E3)(),u="ui3"===(0,s.DP)().version,g=(0,D.J2)((0,L.d)().activeCanvasCurrentZoom),f=(0,D.J2)((0,O.UK)().activeCanvasPixelPreview),y=(0,D.J2)((0,L.d)().activeCanvasRetinaMode),b=(0,p.R)(e=>e.mirror.appModel.keyboardShortcuts),v=(0,a.d4)(e=>!e.mirror.appModel.isReadOnly),T=(0,a.d4)(e=>!!e.user),w=(0,a.d4)(e=>(0,U.$A)(e.selectedView)),[A,P]=(0,_.fp)(I.U5),{Sprig:M}=(0,E.A)(),x=e=>(0,a.d4)(r=>!!r.mirror.appModel[e]),B=d===k.nT.Design,V=d===k.nT.Slides,G="design"===(0,k.oD)(d),H=(0,a.d4)(e=>e.mirror.appModel.prototypeCanvasUiVisible),K=(0,D.J2)(l.Ez5.editorPreferences().showPropertyLabels),W=(0,D.J2)(l.Ez5.editorPreferences().showFrameGrids),Y=(0,D.J2)((0,L.d)().showFrameGridsViewOnly),z=v?"showFrameGrids":"showFrameGridsViewOnly",j=(0,D.J2)((0,h.kc)().figjam_snap_to_dot_grid_reset?(0,O.UK)().snapToDotGridStagingReset:(0,O.UK)().snapToDotGrid),q=(0,D.J2)((0,O.UK)().snapToPixelGrid),Z=G?q:j,X=(0,D.J2)((0,O.UK)().showDotGrid),J=(0,D.J2)((0,O.UK)().renderGrid),Q=G?J:X,ee=G?"renderGrid":"showDotGrid",et=[{type:"ZOOM_IN",shortcut:(0,F.c1)(b,"zoom-in"),recordingKey:"zoomIn",disabled:!(0,R.Zr)("zoom-in")},{type:"ZOOM_OUT",shortcut:(0,F.c1)(b,"zoom-out"),recordingKey:"zoomOut",disabled:!(0,R.Zr)("zoom-out")},{type:"ZOOM_TO_FIT",shortcut:(0,F.c1)(b,"zoom-to-fit"),recordingKey:"zoomToFit"},{type:"ZOOM_TO_50",recordingKey:"zoomTo50"},{type:"ZOOM_TO_100",shortcut:(0,F.c1)(b,"zoom-reset"),recordingKey:"zoomTo100"},{type:"ZOOM_TO_200",recordingKey:"zoomTo200"},{type:"separator"},{type:"PIXEL_PREVIEW",isChildChecked:f,recordingKey:"activeCanvasPixelPreview",hidden:!B&&!w,disabled:(0,R.Zr)("activeCanvasPixelPreview"),children:[{type:"PIXEL_PREVIEW_DISABLED",shortcut:(0,F.c1)(b,"toggle-pixel-preview"),isChecked:!f,recordingKey:"disabled"},{type:"PIXEL_PREVIEW_1X",isChecked:f&&!y,shortcut:y?void 0:(0,F.c1)(b,"toggle-pixel-preview"),recordingKey:"1x"},{type:"PIXEL_PREVIEW_2X",isChecked:f&&y,shortcut:y?(0,F.c1)(b,"toggle-pixel-preview"):void 0,recordingKey:"2x"}]},{type:G?"PIXEL_GRID":"DOT_GRID",shortcut:(0,F.c1)(b,G?"toggle-grid":"toggle-show-dot-grid"),recordingKey:ee,isChecked:Q,disabled:!(0,R.Zr)("toggle-grid")},{type:G?"SNAP_TO_PIXEL_GRID":"SNAP_TO_DOT_GRID",shortcut:(0,F.c1)(b,G||V?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),recordingKey:B?"snapToPixelGrid":"snapToDotGrid",isChecked:Z,disabled:!(0,R.Zr)(B||V?"toggle-snapping-to-pixels":"toggle-snapping-to-dots"),hidden:w},{type:"LAYOUT_GRIDS",shortcut:(0,F.c1)(b,"toggle-shown-layout-grids"),recordingKey:z,hidden:!G||!T,isChecked:v?W:Y,disabled:(0,R.Zr)(z)},{type:"RULERS",shortcut:(0,F.c1)(b,"toggle-rulers"),recordingKey:"renderRulers",hidden:!G,isChecked:(0,D.J2)((0,O.UK)().renderRulers),disabled:(0,R.Zr)("renderRulers")},{type:"OUTLINES_MENU",recordingKey:"outlinesMenu",hidden:!G||!T,disabled:(0,R.Zr)("showOutlines"),children:[{type:"OUTLINES",shortcut:(0,F.c1)(b,"toggle-outlines"),isChecked:(0,D.J2)((0,L.d)().showOutlines),recordingKey:"showOutlines"},{type:"separator"},{type:"OUTLINES_HIDDEN_LAYERS",isChecked:(0,D.J2)((0,L.d)().showOutlineHiddenLayers),recordingKey:"hiddenLayers"},{type:"OUTLINES_OBJECT_BOUNDS",isChecked:(0,D.J2)((0,L.d)().showOutlineObjectBounds),recordingKey:"objectBounds"}]},{type:"MULTIPLAYER_CURSORS",shortcut:(0,F.c1)(b,"toggle-multiplayer-cursors"),recordingKey:"hideMultiplayerCursors",isChecked:!x("hideMultiplayerCursors"),disabled:(0,R.Zr)("hideMultiplayerCursors")},{type:"PROPERTY_LABELS",recordingKey:"toggleShowPropertyLabels",isChecked:K,hidden:!u},{type:"separator"},{type:"COMMENTS",shortcut:(0,F.c1)(b,"toggle-show-comments"),recordingKey:"showComments",isChecked:x("showComments"),disabled:(0,R.Zr)("showComments")},{type:"ANNOTATIONS",recordingKey:"showAnnotations",isChecked:(0,D.J2)(l.Ez5.uiState().showAnnotations),disabled:!(0,R.Zr)("toggle-show-annotations"),hidden:!w},{type:"CODE_CONNECT_ANNOTATIONS",isChecked:A,hidden:!w||!(0,h.kc)().dt_code_connect_overview_on_canvas},{type:"PROTOTYPING",shortcut:(0,F.c1)(b,"toggle-prototyping-info"),recordingKey:"prototypingMode",hidden:!B||v,isChecked:H}],er=i.useCallback(e=>{l.glU.setCanvasZoomScale(e/100)},[]);return i.createElement($,{targetRect:e,showingZoomDropdown:r,toggleZoomMenu:n,recordingKey:o,allowCodegenOptions:G,currentZoom:100*g,dropdownItems:et,onSelectDropdownItem:(e,r)=>{switch(e){case"ZOOM_IN":N.Y5.triggerAction("zoom-in",{source:"zoom-menu"});break;case"ZOOM_OUT":N.Y5.triggerAction("zoom-out",{source:"zoom-menu"});break;case"ZOOM_TO_FIT":N.Y5.triggerAction("zoom-to-fit",{source:"zoom-menu"});break;case"ZOOM_TO_50":l.glU.setCanvasZoomScale(.5);break;case"ZOOM_TO_100":l.glU.setCanvasZoomScale(1);break;case"ZOOM_TO_200":l.glU.setCanvasZoomScale(2);break;case"PIXEL_PREVIEW":C.VU.get("toggle-pixel-preview","toolbar")(r);break;case"PIXEL_GRID":C.VU.get("toggle-grid","toolbar")(r);break;case"SNAP_TO_PIXEL_GRID":C.VU.get("toggle-snapping-to-pixels","toolbar")(r);break;case"SNAP_TO_DOT_GRID":C.VU.get("toggle-snapping-to-dots","toolbar")(r);break;case"DOT_GRID":C.VU.get("toggle-show-dot-grid","toolbar")(r);break;case"LAYOUT_GRIDS":C.VU.get("toggle-shown-layout-grids","toolbar")(r);break;case"MULTIPLAYER_CURSORS":C.VU.get("toggle-multiplayer-cursors","toolbar")(r);break;case"PROPERTY_LABELS":N.Y5.triggerAction("toggle-show-property-labels",{source:"zoom-menu"});break;case"PROTOTYPING":C.VU.get("toggle-prototyping-info","toolbar")(r);break;case"RULERS":C.VU.get("toggle-rulers","toolbar")(r);break;case"SLICES":C.VU.get("toggle-show-slices","toolbar")(r);break;case"COMMENTS":C.VU.get("toggle-show-comments","toolbar")(r);break;case"ANNOTATIONS":C.VU.get("toggle-show-annotations","toolbar")(r);break;case"CODE_CONNECT_ANNOTATIONS":(0,h.kc)().dt_code_connect_overview_on_canvas_sprig&&A&&M("track","code_connect_on_canvas_hidden"),P(e=>!e);break;case"OUTLINES":N.Y5.triggerAction("toggle-outlines",{source:"zoom-menu"});break;case"OUTLINES_HIDDEN_LAYERS":N.Y5.triggerAction("toggle-outline-mode-hidden-layers",{source:"zoom-menu"});break;case"OUTLINES_OBJECT_BOUNDS":N.Y5.triggerAction("toggle-outline-mode-object-bounds",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_DISABLED":f&&N.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_1X":f||N.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),y&&N.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"});break;case"PIXEL_PREVIEW_2X":f||N.Y5.triggerAction("toggle-pixel-preview",{source:"zoom-menu"}),y||N.Y5.triggerAction("toggle-retina-mode",{source:"zoom-menu"})}n()},onSubmitCustomZoom:er})}function $({targetRect:e,showingZoomDropdown:r,recordingKey:n,allowCodegenOptions:o,currentZoom:l,dropdownItems:c,displayAboveTarget:d,onSelectDropdownItem:u,onSubmitCustomZoom:m}){let p=(0,a.wA)(),h="ui3"===(0,s.DP)().version,_=i.useMemo(()=>({ZOOM_IN:(0,v.t)("fullscreen_actions.zoom-in"),ZOOM_OUT:(0,v.t)("fullscreen_actions.zoom-out"),ZOOM_TO_FIT:(0,v.t)("fullscreen_actions.zoom-to-fit"),ZOOM_TO_50:(0,v.t)("fullscreen.toolbar.zoom_menu.zoom_to_50"),ZOOM_TO_100:(0,v.t)("fullscreen_actions.zoom-reset"),ZOOM_TO_200:(0,v.t)("fullscreen.toolbar.zoom_menu.zoom_to_200"),PIXEL_PREVIEW:(0,v.t)("fullscreen.toolbar.zoom_menu.pixel_preview"),PIXEL_GRID:(0,v.t)("fullscreen_actions.toggle-grid"),SNAP_TO_PIXEL_GRID:(0,v.t)("fullscreen_actions.toggle-snapping-to-pixels"),PROTOTYPING:(0,v.t)("fullscreen_actions.toggle-prototyping-information"),SNAP_TO_DOT_GRID:(0,v.t)("fullscreen_actions.toggle-snapping-to-dots"),DOT_GRID:(0,v.t)("fullscreen_actions.toggle-show-dot-grid"),LAYOUT_GRIDS:(0,v.t)("fullscreen_actions.toggle-shown-layout-grids"),MULTIPLAYER_CURSORS:(0,v.t)("fullscreen_actions.toggle-multiplayer-cursors"),PROPERTY_LABELS:(0,v.t)("fullscreen_actions.toggle-show-property-labels"),CODE_CONNECT_ANNOTATIONS:(0,v.t)("fullscreen_actions.toggle-show-code-connect-annotations"),RULERS:(0,v.t)("fullscreen_actions.toggle-rulers"),SLICES:(0,v.t)("fullscreen_actions.toggle-show-slices"),COMMENTS:(0,v.t)("fullscreen_actions.toggle-show-comments"),ANNOTATIONS:(0,v.t)("fullscreen_actions.toggle-show-annotations"),OUTLINES:(0,v.t)("fullscreen_actions.toggle-outlines"),OUTLINES_MENU:(0,v.t)("fullscreen_actions.outlines-menu"),OUTLINES_HIDDEN_LAYERS:(0,v.t)("fullscreen_actions.outline-mode-hidden-layers"),OUTLINES_OBJECT_BOUNDS:(0,v.t)("fullscreen_actions.outline-mode-object-bounds"),PIXEL_PREVIEW_DISABLED:(0,v.t)("fullscreen.toolbar.zoom_menu.pixel_preview_disabled"),PIXEL_PREVIEW_1X:(0,v.t)("fullscreen.toolbar.zoom_menu.pixel_preview_1x"),PIXEL_PREVIEW_2X:(0,v.t)("fullscreen.toolbar.zoom_menu.pixel_preview_2x"),SINGLE_PROPERTIES_PANEL:(0,v.t)("fullscreen_actions.single-properties-panel")}),[]),E=i.useMemo(()=>{let e=r=>{if("separator"===r.type)return{displayText:"",disabled:!0,separator:!0};let{children:n,...i}=r,a={displayText:_[r.type]};switch(r.type){case"ZOOM_TO_50":a.isChecked=50===l;break;case"ZOOM_TO_100":a.isChecked=100===l;break;case"ZOOM_TO_200":a.isChecked=200===l}return n&&(a.children=n.map(e)),{...i,...a}};return c.map(e)},[l,c,_]),b=i.useCallback((e,r)=>{u(e.type,r)},[u]);return i.createElement(G.j,{items:E,onSelectItem:b,parentRect:e,showPoint:!h,dispatch:p,recordingKey:f.Pt(n,"dropdown"),alwaysShowCheckMarkOffset:!0,allowCodegenOptions:o,displayAboveTarget:d},i.createElement("div",{style:{height:2}}),i.createElement("div",{className:H.zj,onKeyDown:e=>{(e.keyCode===g.Uz.ENTER||e.keyCode===g.Uz.ESCAPE)&&r&&p(T.oB())}},i.createElement(V.A,{className:H.hF,placeholderValue:`${Math.round(l)}%`,cancel:e=>{e&&e.blur()},submit:e=>{e.endsWith("%")&&(e=e.substr(0,e.length-1));let r=-1;try{r=parseInt(e,10)}catch(e){}r>0&&m(r)},recordingKey:f.Pt(n,"dropdown","zoomInput")})),i.createElement(y.wv,null))}i.memo(function({recordingKey:e}){let r=(0,a.wA)(),n=i.useRef(null),s=100*(0,D.J2)((0,L.d)().activeCanvasCurrentZoom),l=(0,P.BK)(K),[c,m]=(0,i.useState)(null),p=(0,A.GS)(),{isPropertiesPanelCollapsed:h}=(0,w.iT)(),_=i.useCallback(()=>{m(n?.current?.getBoundingClientRect()||null)},[n]);i.useEffect(()=>(_(),u._.addListener(_),window.addEventListener("resize",_),()=>{u._.removeListener(_),window.removeEventListener("resize",_)}),[_]);let g=i.useCallback(e=>{e.stopPropagation(),e.preventDefault(),_(),l.toggle({hasOwnEscKeyHandler:!1})},[l,_]),E=l.showing&&c&&i.createElement(W,{targetRect:c,showingZoomDropdown:l.showing,toggleZoomMenu:l.toggle,recordingKey:e}),y=p?H.l4:H.Xf,I=p?l.showing?H.wg:h?H.Jk:H.Y7:l.showing?H.om:H.wR,T=p?l.showing?H.S0:H.i5:H.cm,S=i.createElement("div",{className:I,ref:p?n:void 0},i.createElement("div",{className:T,"data-testid":"zoom-amount"},function(){let e=Math.round(s);return p?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),i.createElement("div",{className:d()(H.FH,{[H.WB]:p&&l.showing}),ref:n},i.createElement(B.c,{dispatch:r,dropdownKey:K,showingDropdown:l.showing,dataTestId:"zoom-menu-chevron",toggleOnClick:!0,isUI3:p})));return i.createElement("div",{className:H.sH},i.createElement(o.o,{eventListeners:["onClick"]},i.createElement(b.L,{selected:l.showing,className:y,onboardingKey:x.q,"data-tooltip-type":M.Ib.TEXT,"data-tooltip":(0,v.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:g,recordingKey:f.Pt(e,"zoomButton"),enabled:!0,isUI3:p,"aria-controls":K,"aria-haspopup":"menu","aria-expanded":l.showing},S),E))})},460528:(e,r,n)=>{n(411855),n(320063),n(939863),n(862442),n(970332),n(788256),n(746806)},457261:(e,r,n)=>{n(411855),n(939863),n(101505),n(970332)},261503:(e,r,n)=>{n(411855),n(188507),n(922827),n(298455),n(320063),n(939863),n(970332),n(260833),n(788256)},493168:(e,r,n)=>{n(411855),n(188507),n(922827),n(298455),n(320063),n(939863),n(931828),n(862442),n(970332),n(260833),n(32067),n(788256),n(493364),n(460528)},222720:(e,r,n)=>{n(411855),n(188507),n(629019),n(966712),n(946689),n(939863),n(931828),n(672517),n(226055),n(168039),n(617453),n(373119),n(126911),n(457630),n(309798),n(100197),n(173101),n(600907),n(788256),n(70964);var i=(e=>(e.MOUSE="mouse",e.TRACKPAD="trackpad",e))(i||{});let a=e=>"dark"===e?staticAssetWithUploadsPath("d2eefebde737b9d5fba2b35193dcd51e26ed0164"):staticAssetWithUploadsPath("99d648a7ac711ba9d19976515105d6395eeb2d4c"),o=e=>"dark"===e?staticAssetWithUploadsPath("e27a5d39945685c389cd50e9f08144678edefeab"):staticAssetWithUploadsPath("2357b697bfe85711b1de702dc63611ef8bb75859"),s=e=>"dark"===e?staticAssetWithUploadsPath("f49911183f0d3a2b6ee5044b42e0a14fe549999a"):staticAssetWithUploadsPath("2a0c8ae88f72d6155bd818a0c51c8ced71fcecfa"),l=e=>"dark"===e?staticAssetWithUploadsPath("045c7e1324e953b8ee9ec91ac4e944995662e11e"):staticAssetWithUploadsPath("c764bcd0a726bf2d31f70f16808785efeae4de56"),c=e=>"dark"===e?staticAssetWithUploadsPath("7a24deb2e05c4542dbd8b6bd1f009e26ba761b48"):staticAssetWithUploadsPath("32f4843d9b24a4b95129bacd47f6b81fe439228f")},258525:(e,r,n)=>{n.d(r,{B:()=>i}),n(411855),n(188507),n(320063),n(939863),n(931828),n(226055),n(862442),n(970332),n(260833),n(788256),n(746806);let i="text-panel-container"},889185:(e,r,n)=>{n(411855),n(188507),n(931828),n(251960),n(456104),n(335682),n(860178),n(309798),n(833629),n(397065),n(463546),n(939863),n(119198),n(101505),n(974105),n(696673),n(29680),n(99506),n(945020),n(970332),n(460528),n(457261),n(261503),n(258525),n(922827),n(293017),n(843495),n(493364),n(788256),n(298455),n(32067),n(493168),n(222720),n(612776),n(320063),n(862442),n(746806),n(147723)},788256:(e,r,n)=>{n.d(r,{Qf:()=>o}),n(83783),n(356390),n(843495);var i=n(508169);n(457630);var a=(e=>(e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e))(a||{});function o(e){let r=null;try{r=e.getCurrentPage()}catch(e){if(e.message!==i.e)throw e}return r}},282263:(e,r,n)=>{n.d(r,{Cr:()=>$,Gx:()=>G,JV:()=>V,Q8:()=>Z,V5:()=>j,_X:()=>H,hu:()=>Y,nE:()=>W,rf:()=>z});var i=n(411855),a=n(188507),o=n(821910),s=n(343887),l=n(927457),c=n(922827),d=n(340818),u=n(794272),m=n(966712),p=n(153234),h=n(572206),_=n(46481),g=n(939863),f=n(896474),E=n(632430),y=n(169231),b=n(356390),v=n(869156),I=n(279702),T=n(498606),S=n(420186),w=n(107244),A=n(699365);n(83695);var C=n(683859),N=n(29808),L=n(184837),O=n(533573),R=n(158406),P=n(830324),D=n(939143),k=n(746806),M=n(502601),F=n(499718),x=n(783807),U=n(882876),B=n(564092);function V(e,r,n,s,l,c,d,u){let{mapVariableIdToTypedValue:p}=s??{},h=(0,a.wA)(),_=(0,a.d4)(e=>e.variablePickerShown),{updateVariableConsumption:g,clearVariableConsumption:f}=(0,B.u3)(e),b=(0,i.useCallback)(e=>{n?n(e):e?h((0,E.Yi)({item:e,callback:n=>{p?g(p({variable:e,variableId:n})):g((0,B.y$)(r,n))}})):f()},[n,h,g,r,f,p]),v=(0,i.useCallback)(e=>e?l?l(e):(g(p?p(e):e),!0):(f(),!0),[p,f,l,g]);return[_.isShown&&"variable-picker-fields"===_.type&&(0,o.c2)(_.fields,e)&&_.responsiveTextStyleVariantIndex===u&&s?.metadata===_.metadata,(0,i.useCallback)((n,i)=>{let a=i?.initialPosition??d?.()??(0,P.n)(n);h((0,y.C)({type:"variable-picker-fields",isShown:!0,initialPosition:a,fields:e,resolvedType:r,requestedTypes:s?.requestedTypes,currentFieldValue:i?.currentFieldValue,onVariableSelected:b,metadata:s?.metadata,variableFilters:s?.variableFilters,onExpressionSubmitted:(0,m.kc)().prototype_expressions_nodefields?v:void 0,onComponentPropSelected:(0,m.kc)().ds_variable_props_unified_ui?c:void 0,responsiveTextStyleVariantIndex:u}))},[d,h,e,r,s?.requestedTypes,s?.metadata,s?.variableFilters,b,v,c,u]),b,(0,m.kc)().prototype_expressions_nodefields?v:void 0,(0,m.kc)().ds_variable_props_unified_ui?c:void 0]}function G(e,r,n){let o=(0,a.wA)(),s=(0,a.d4)(e=>e.variablePickerShown),l=(0,i.useCallback)(i=>{i?o((0,E.Yi)({item:i,callback:i=>{let a=(0,B.y$)(n,i);d.l7.user("alias-variable",()=>c.CWU.setVariableValueForMode(e,r,a))&&b.Y5.triggerAction("commit")}})):d.l7.user("unalias-variable",()=>c.CWU.detachVariableValueForMode(e,r))&&b.Y5.triggerAction("commit")},[o,e,r,n]);return[s.isShown&&"variable-picker-alias"===s.type&&s.variableID===e&&s.modeID===r,(0,i.useCallback)((i,a)=>{let s=i.getBoundingClientRect();o((0,y.C)({type:"variable-picker-alias",isShown:!0,initialPosition:new h.Mi(s.left,s.bottom),initialView:a?.initialView,variableID:e,modeID:r,resolvedType:n,onVariableSelected:l}))},[e,r,n,o,l]),l]}function H({children:e,...r}){return i.createElement(K,{...r,children:e})}function K({fields:e,children:r,resolvedType:n,requestedTypes:a,editingStyleGuid:o,responsiveTextStyleVariantIndex:s,initialPickerPosition:l,onVariableSelected:c,onExpressionSubmitted:d,onComponentPropSelected:u}){let{consumedVariable:m}=(0,B.u3)(e,o,s),p=(0,O.MH)(m),h=(0,v.u)(p??void 0),_=!!h&&(0,O.eF)(h),g=(0,B.Ek)(e),[f,E,y,b,I]=V(e,n,c,{requestedTypes:a},d,u,l,s),T=(0,i.useMemo)(()=>({showBindingUI:E,isShowingBindingUI:f,onVariableSelected:y,boundVariableId:p,isBoundVariableDeleted:_,onExpressionSubmitted:b,onComponentPropSelected:I,mismatchedValue:g}),[E,f,y,p,_,b,g,I]);return i.createElement(C.p.Provider,{value:T},r)}function W({variableID:e,modeID:r,children:n,resolvedType:a}){let[o,s,l]=G(e,r,a),c=(0,v.bL)(e,r),d=(0,O.MH)(c??null),u=(0,v.u)(d??void 0),m=!!u&&(0,O.eF)(u),p=(0,i.useMemo)(()=>({showBindingUI:s,isShowingBindingUI:o,onVariableSelected:l,boundVariableId:d,isBoundVariableDeleted:m}),[s,o,l,d,m]);return i.createElement(C.p.Provider,{value:p},n)}function $({children:e,pickerType:r="create-modal",resolvedType:n,variableValue:a,onVariableValueChange:o,onVariableSelected:s}){let l=i.useRef(),[d,u]=i.useState(!1),m=(0,i.useCallback)(()=>{u(!1)},[]),p=(0,i.useCallback)(e=>{let r=e.getBoundingClientRect();l.current=new h.Mi(r.left,r.bottom),u(!0)},[]),_=a.type===c.Z_n.ALIAS?a.value:void 0,g=(0,v.u)(_),f=!!g&&(0,O.eF)(g),E=(0,i.useMemo)(()=>({showBindingUI:p,isShowingBindingUI:d,boundVariableId:_??null,isBoundVariableDeleted:f}),[p,d,_,f]),y=(0,v.BQ)(_);return i.createElement(C.p.Provider,{value:E},e,d?a.resolvedType!==c.rXF.COLOR?i.createElement(M.Q,null,i.createElement(J,{disabledVariableIds:new Set,boundVariable:null,initialPosition:l.current,resolvedType:n,onVariableSelected:s,onClose:m,pickerType:r,recordingKey:"variableBindingsDropdown"})):a.type===c.Z_n.COLOR?i.createElement(A.h3,{disabledVariableIds:new Set,color:a.value,boundVariable:null,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:m}):a.type===c.Z_n.ALIAS?i.createElement(A.h3,{disabledVariableIds:new Set,color:y.value,boundVariable:g,initialPosition:l.current,recordingKey:"variableBindingsDropdown",onChange:e=>o({type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:{...e,a:1}}),onVariableChange:s,onClose:m}):void 0:null)}function Y({boundVariableId:e,resolvedType:r,requestedTypes:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l,children:c}){let d=(0,v.u)(e??void 0),u=!!d&&(0,O.eF)(d),[m,p,_]=function({resolvedType:e,requestedTypes:r,boundVariableId:n,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l}){let c=(0,i.useId)(),d=(0,a.wA)(),u=(0,a.d4)(e=>e.variablePickerShown);return[u.isShown&&"variable-picker-controlled"===u.type&&u.key===c,(0,i.useCallback)((i,a)=>{let u=i.getBoundingClientRect();d((0,y.C)({type:"variable-picker-controlled",isShown:!0,initialPosition:a?.initialPosition??o?.()??new h.Mi(u.left,u.bottom),initialView:a?.initialView,variableID:n,key:c,resolvedType:e,requestedTypes:r,onVariableSelected:s,onComponentPropSelected:l}))},[d,n,c,e,r,o,s,l]),c]}({resolvedType:r,requestedTypes:n,boundVariableId:e,initialPickerPosition:o,onVariableSelected:s,onComponentPropSelected:l});return i.createElement(C.p.Provider,{value:{boundVariableId:e??null,isBoundVariableDeleted:u,isShowingBindingUI:m,showBindingUI:p,onVariableSelected:s,onComponentPropSelected:l,variableBindingContextKey:_}},c)}function z({variableScope:e}){let r=(0,a.wA)(),n=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),o=(0,a.d4)(e=>e.variablePickerShown);if(!o.isShown||"variable-picker-controlled"!==o.type)return null;let{resolvedType:s,initialPosition:l,requestedTypes:c,variableID:d,onVariableSelected:u,variableFilters:m}=o;return i.createElement(q,{variableID:d,resolvedType:s,requestedTypes:c,initialPosition:l,onVariableSelected:u,onClose:n,variableScopes:e?new Set([e]):void 0,variableFilters:m})}function j({variableScope:e,onPickerClose:r}){let n=(0,a.wA)(),o=(0,i.useCallback)(()=>{r?.(),n((0,y.B)())},[n,r]),s=i.useContext(C.p)?.isShowingBindingUI,l=i.useContext(C.p)?.variableBindingContextKey,c=(0,a.d4)(e=>e.variablePickerShown);if(!s||!c.isShown||"variable-picker-controlled"!==c.type||c.key!==l)return null;let{resolvedType:d,initialPosition:u,requestedTypes:m,variableID:p,onVariableSelected:h,onComponentPropSelected:_,variableFilters:g}=c;return i.createElement(q,{variableID:p,resolvedType:d,requestedTypes:m,initialPosition:u,onVariableSelected:h,onComponentPropSelected:_,onClose:o,variableScopes:e?new Set([e]):void 0,variableFilters:g})}function q({resolvedType:e,requestedTypes:r,initialPosition:n,variableID:a,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c,variableFilters:d}){let u=(0,v.u)(a);return i.createElement(J,{disabledVariableIds:new Set,initialPosition:n,resolvedType:e,requestedTypes:r,boundVariable:u,onVariableSelected:o,onComponentPropSelected:s,onClose:l,variableScopes:c,variableFilters:d,pickerType:s?"prop-assignment":"fields",recordingKey:"variableBindingsDropdown"})}function Z(){let e=(0,a.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?i.createElement(X,{pickerShownState:e}):null}function X({pickerShownState:e}){let r=(0,a.wA)(),{variableID:n,modeID:o,resolvedType:s,initialPosition:l,initialView:u,onVariableSelected:m,variableFilters:h}=e,_=(0,v.bL)(n,o),g=(0,v.u)(_?.type===c.Z_n.ALIAS?_?.value:void 0),f=(0,i.useCallback)(()=>{r((0,y.B)())},[r]),E=(0,i.useCallback)((e,r)=>{let i={type:c.Z_n.COLOR,resolvedType:c.rXF.COLOR,value:e};d.l7.user("set-color-variable-value",()=>c.CWU.setVariableValueForMode(n,o,i))&&r===I.zk.YES&&b.Y5.triggerAction("commit")},[n,o]);return _?.resolvedType===c.rXF.COLOR&&_?.type!==c.Z_n.NODE_FIELD_ALIAS?i.createElement(M.Q,null,i.createElement(U.I,{disabledVariableIds:new Set([n]),boundVariable:g,variableValue:_,initialPosition:l,initialView:u,onColorChange:E,onVariableSelected:m,onClose:f,recordingKey:"variableBindingsDropdown"}),i.createElement(D.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:f})):i.createElement(i.Fragment,null,i.createElement(M.Q,null,i.createElement(J,{disabledVariableIds:new Set([n]),initialPosition:l,resolvedType:s,variableFilters:h,boundVariable:g,onVariableSelected:m,onClose:f,pickerType:"alias",recordingKey:"variableBindingsDropdown"})),i.createElement(D.$3,{recordingKey:p.Pt("variableBindingsDropdown","closer"),onClose:f}))}function J({disabledVariableIds:e,initialPosition:r,boundVariable:n,newVariableInitialValue:a,resolvedType:o,requestedTypes:c,variableFilters:d,fields:m,pickerType:h,variableScopes:E,recordingKey:y,onVariableSelected:b,onComponentPropSelected:v,onClose:I}){let A=i.useRef(null),{VariableAndComponentPropCreateModalRoot:C}=(0,i.useContext)(N.l)??{},[O,P]=(0,i.useState)(!1),M=i.useRef(),U=(0,u.R)(e=>(0,w.Nw)(e)??(0,w.y7)(e)),B=(0,i.useMemo)(()=>(0,x.Kq)(!!C,!!U,m),[C,U,m]);function V(){let e=A.current?.getEl();if(!e)return;let r=(0,S.cn)(e,L.i);M.current=r,P(!0)}return i.createElement(i.Fragment,null,i.createElement(k.vx,{ref:A,title:"",headerSize:"hidden",initialPosition:r,onClose:I,dragHeaderOnly:!1,initialWidth:R.d9,autoflowHeight:!0},i.createElement(D.Rp,{selectedItem:n,disabledVariableIds:e,resolvedType:o,pickerType:h,recordingKey:y,setControlRightButtons:function(){if(void 0===o||"fields"!==h&&"prop-assignment"!==h)return;let e=B?(0,g.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,g.t)("variables.binding_ui.create_variable_button_tooltip");return i.createElement(s.K,{"aria-label":e,recordingKey:p.Pt(y,"createVariable"),onClick:V,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":T.Ib.TEXT}},i.createElement(_.U,{svg:f.KC["plus-32"]},i.createElement(l.e,null)))}(),onVariableSelected:b,onComponentPropSelected:v,onClose:I,requestedTypes:c,variableScopes:E,variableFilters:d})),i.createElement(D.$3,{recordingKey:p.Pt(y,"closer"),onClose:I}),O&&void 0!==o&&M.current&&i.createElement(F.x,{resolvedType:o,creationModalInitialPosition:M.current,newVariableInitialValue:a,onClose:()=>P(!1),onVariableSelected:b,fields:m}))}n(875157)},783807:(e,r,n)=>{n.d(r,{Kq:()=>o}),n(922827);var i=n(966712);n(848661),n(869156);var a=n(273226);function o(e,r,n){return!!(0,i.kc)().ds_variable_props_unified_ui&&e&&r&&!!(0,a.fx)(n)}n(533573),n(564092)},991052:(e,r,n)=>{n.d(r,{Y:()=>R});var i=n(411855),a=n(188507),o=n(343887),s=n(927457),l=n(922827),c=n(340818),d=n(794272),u=n(966712),m=n(153234),p=n(46481),h=n(939863),_=n(896474),g=n(169231),f=n(356390),E=n(869156),y=n(279702),b=n(498606);n(420186);var v=n(107244),I=n(854695);n(83695);var T=n(29808);n(184837);var S=n(158406),w=n(939143),A=n(502601);n(499718);var C=n(783807),N=n(882876);function L({disabledVariableIds:e,boundVariable:r,resolvedType:n,requestedTypes:a,variableFilters:l,fields:c,pickerType:u,variableScopes:g,recordingKey:f,onVariableSelected:E,onComponentPropSelected:y,onClose:I,openCreationModal:S}){let{VariableAndComponentPropCreateModalRoot:A}=(0,i.useContext)(T.l)??{},N=(0,d.R)(e=>(0,v.Nw)(e)??(0,v.y7)(e)),L=(0,i.useMemo)(()=>(0,C.Kq)(!!A,!!N,c),[A,N,c]);function O(){S?.()}return i.createElement(w.Rp,{key:"Libraries",selectedItem:r,disabledVariableIds:e,resolvedType:n,pickerType:u,recordingKey:f,setControlRightButtons:function(){if(void 0===n||"fields"!==u&&"prop-assignment"!==u)return;let e=L?(0,h.t)("variables.binding_ui.create_variable_property_button_tooltip"):(0,h.t)("variables.binding_ui.create_variable_button_tooltip");return i.createElement(o.K,{"aria-label":e,recordingKey:m.Pt(f,"createVariable"),onClick:O,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":b.Ib.TEXT}},i.createElement(p.U,{svg:_.KC["plus-32"]},i.createElement(s.e,null)))}(),onVariableSelected:E,onComponentPropSelected:y,onClose:I,requestedTypes:a,variableScopes:g,variableFilters:l})}function O({variableID:e,modeID:r,resolvedType:n,initialPosition:o,initialView:s,onVariableSelected:d,variableFilters:p}){let _=(0,a.wA)(),b=(0,E.bL)(e,r),v=(0,E.u)(b?.type===l.Z_n.ALIAS?b?.value:void 0),T=(0,i.useCallback)(()=>{_((0,g.B)())},[_]),C=(0,i.useCallback)((n,i)=>{let a={type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:n};c.l7.user("set-color-variable-value",()=>l.CWU.setVariableValueForMode(e,r,a))&&i===y.zk.YES&&f.Y5.triggerAction("commit")},[e,r]),O=(0,u.kc)().fpl_window?i.Fragment:A.Q;if(b?.resolvedType===l.rXF.COLOR&&b?.type!==l.Z_n.NODE_FIELD_ALIAS)return i.createElement(O,null,i.createElement(N.I,{disabledVariableIds:new Set([e]),boundVariable:v,variableValue:b,initialPosition:o,initialView:s,onColorChange:C,onVariableSelected:d,onClose:T,recordingKey:"variableBindingsDropdown"}),i.createElement(w.$3,{recordingKey:m.Pt("variableBindingsDropdown","closer"),onClose:T}));let R={tabs:[{name:"library",displayText:(0,h.tx)("variables.binding_ui.variable_library_tab_name"),content:i.createElement(L,{disabledVariableIds:new Set([e]),boundVariable:v,resolvedType:n,variableFilters:p,onVariableSelected:d,onClose:T,pickerType:"alias"})}]};return i.createElement(O,null,i.createElement(I.k,{tabProps:R,onClose:T,initialPosition:o,initialWidth:S.d9,recordingKey:"variableBindingsDropdown"}))}function R(){let e=(0,a.d4)(e=>e.variablePickerShown);return e.isShown&&"variable-picker-alias"===e.type?i.createElement(O,{...e}):null}n(875157)},564092:(e,r,n)=>{n.d(r,{AA:()=>J,Ek:()=>ea,JG:()=>K,Mo:()=>F,Px:()=>z,QT:()=>en,R1:()=>H,UE:()=>k,Ws:()=>M,Yc:()=>U,Yn:()=>x,ZP:()=>q,_B:()=>et,iw:()=>B,kN:()=>$,oU:()=>Q,u3:()=>Z,uA:()=>er,xp:()=>X,y$:()=>V,yK:()=>j});var i=n(411855),a=n(188507),o=n(821910),s=n(974880),l=n(922827);n(340818);var c=n(572304),d=n(879441),u=n(89865),m=n.n(u);n(900956),n(776250);var p=n(44948),h=n(966712),_=n(418956);n(939863);var g=n(154483);n(392592);var f=n(308977),E=n(239349),y=n(581250);n(662275);var b=n(848661),v=n(814431),I=n(555074),T=n(869156),S=n(57392),w=n(234945),A=n(173454),C=n(279702),N=n(507956),L=n(909279);n(715762),n(507662);var O=n(836283),R=n(875157),P=n(859703),D=n(761334);let k="INHERIT",M="DEFAULT",F="MIXED",x="DELETED",U="https://help.figma.com/hc/articles/15343816063383#conflicts";var B=(e=>(e[e.LEARN_MORE=0]="LEARN_MORE",e[e.REVIEW_UPDATES=1]="REVIEW_UPDATES",e))(B||{});function V(e,r){return{type:l.Z_n.ALIAS,resolvedType:e,value:r}}function G(e){if(0===e.length)return null;if(e.length>=2){for(let r=1;r<e.length;r++)if(!(0,o.c2)(e[r],e[0]))return b.oV}let r=e[0];return r?.isMixed?b.oV:r}function H(){let[e,r]=(0,I.lJ)("variableConsumptionInfo");return{variableConsumptionMap:b.E7(e)?.variableConsumptionMap||{},setVariableConsumptionMap:(0,i.useCallback)((e,n=C.zk.YES)=>{r({variableConsumptionMap:e},n)},[r])}}function K(){return(0,b.E7)((0,v.b)("variableConsumptionMap"))||{}}let W=(0,g.fv)();function $(){let e=(0,I.kl)("variableConsumptionInfo"),r=(0,p.k9)(()=>b.E7(e)?.variableSetKeyToModeData||{},[e]),n=function(){let e=(0,I.kl)("variableConsumptionInfo");return(0,p.k9)(()=>b.E7(e)?.variableSetKeyToPageLevelPresetMode||{},[e])}(),i=function(){let e=(0,T.jI)();return(0,p.wm)(()=>{if("loaded"===e.status){let r=e.data?.items.filter(e=>e.modes&&e.modes.length>1);return m()(r,e=>e.key)}return{}},[e])}();return(0,p.wm)(()=>{for(let[e,a]of Object.entries(n))if(!r[e]&&i[e]){let n=i[e];if(!n.modes?.find(e=>e.id===a))continue;r[e]={collectionID:n.node_id,collectionName:n.name,modeOptions:n.modes?.map(e=>({modeId:{guid:e.id,collectionKey:n.key},name:e.name,isCompatible:!0}))||[],explicitMode:{guid:a,collectionKey:n.key},inheritMode:null,fileKey:W(n),libraryKey:n.library_key}}return r},[i,n,r])}let Y=(0,h.kc)().ds_modes_util_include_subtree_by_default;function z({includeSubtree:e=Y}={}){let r=(0,I.kl)("variableConsumptionInfo");return(0,p.k9)(()=>(e?b.E7(r)?.variableSetKeyToModeIncludingSubtree:b.E7(r)?.variableSetKeyToMode)??{},[r,e])}function j(e){let r=function(e){let r=(0,T.u)(e),n=$(),i=(0,T.G6)(r?.variableSetId);if(!r||!i)return null;let a="LOCAL"===i.subscriptionStatus?i.keyForPublish:i.key;return n?.[a]??null}(e),n=(0,T.G6)(r?.collectionID);if(!r||!n)return null;let i=r.modeOptions,a=r.explicitMode,o=r.inheritMode,s=a??o;return"MIXED"===s?null:i.find(e=>s?e.modeId.guid===s.guid:e.modeId.guid===n.defaultModeID)??null}function q(){let e=function(){let{componentUpdatesForSelection:e,stateGroupUpdatesForSelection:r,styleUpdatesForSelection:n,variableSetUpdatesForSelection:i}=function(){let{componentUpdatesForCurrentPage:e,stateGroupUpdatesForCurrentPage:r,styleUpdatesForCurrentPage:n,variableSetUpdatesForCurrentPage:i}=(0,_.md)(S.P1),a=(0,I.kl)("directlySubscribedAssetKeys"),o=[],s=[],l=[],c=[];if(a&&!(0,b.gl)(a)){let d=new Set(a);o=e.filter(e=>d.has(e.component_key??"")),s=r.filter(e=>d.has(e.key)),l=n.filter(e=>d.has(e.key)),c=i.filter(e=>d.has(e.key))}return{componentUpdatesForSelection:o,stateGroupUpdatesForSelection:s,styleUpdatesForSelection:l,variableSetUpdatesForSelection:c}}();return e.length>0||r.length>0||n.length>0||i.length>0}(),r=(0,_.md)(S.I7),n=(0,a.d4)(e=>(0,w.$u)(e));return n&&e?1:!n&&r?1:0}function Z(e,r,n){let a;let{variableConsumptionMap:o,setVariableConsumptionMap:s}=H(),d=(0,v.b)("guid"),u=K(),m=(0,v.b)("responsiveTextStyleVariants"),p=m&&!(0,b.gl)(m)&&void 0!==n?m[n]:void 0,h=r&&(0,b.hS)(d)&&c.aI(r,d);return{consumedVariable:(a=h&&p?(0,b.E7)(p.variableConsumptionMap)||{}:h?u:o)&&G(e.map(e=>a[e])),updateVariableConsumption:(0,i.useCallback)(r=>{let n={};e.forEach(e=>{n[e]=r,(0,D.oz)(e,r)}),(0,L.f)(l.VD3.VARIABLE_ATTACH,l.e0R.DIRECT,()=>{s(n)})},[s,e]),clearVariableConsumption:(0,i.useCallback)((r=C.zk.YES)=>{let n={};e.forEach(e=>{n[e]=null}),(0,L.f)(l.VD3.VARIABLE_DETACH,l.e0R.DIRECT,()=>{s(n,r)})},[s,e])}}function X(e,r,n,i){return Q(e,function(e,r){if(!(void 0===e||0===e&&!r||(0,b.gl)(e)))return{type:l.Z_n.FLOAT,resolvedType:l.rXF.FLOAT,value:e}}(r,i),n)}function J(e,r,n){return Q(e,function(e){if(e)return{type:l.Z_n.STRING,resolvedType:l.rXF.STRING,value:e}}(r),n)}function Q(e,r,n){let i=(0,E.uQ)(),a=(0,y.Q)(),o=(0,N.ks)(),s=(0,f.v4)(),{variableConsumptionMap:c}=H(),d=n||c,u=function(e){if(e&&(0,b.hS)(e)){if(e.type===l.Z_n.EXPRESSION&&1===e.value.expressionArguments.length){let r=e.value.expressionArguments[0];if(r.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.FONT_STYLE){let r=e.value.asString??e.value.asFloat;if(r?.type===l.Z_n.ALIAS)return r.value}if(e.type===l.Z_n.ALIAS)return e.value}}(d&&G([e].map(e=>d[e]))||null),m=R.ZM[e]??l.j0r.ALL_SCOPES,p=!u&&o&&i&&r,_=!!(0,h.kc)().dt_suggested_variables_validation&&!!(0,h.kc)().dt_inferred_vars_modal,g=p?l.w3z.getIdsOfVariablesWithValue(i,[m],{type:r.type,value:r.value},_):[],v=!p||1!==g.length||(0,h.kc)().dt_inferred_vars_modal?void 0:g[0],I=(0,T.u)(u??v);if(!I)return g.length>0&&r?{matchingVars:{ids:g,rawValue:r}}:{};let S=(0,f.xv)(I,s.id),w=o&&"code"===a.inspectionMode&&S?S:I?.name;return{variable:I,variableDisplayName:w,isSuggested:!u}}function ee(e,r,n){if(!e)return{};let{colorVar:i,color:a,opacity:o}=r;if(i?.value?.alias)return{boundVar:d.dI(i.value.alias)};if(!a||!n)return{};let s=!!(0,h.kc)().dt_suggested_variables_validation&&!!(0,h.kc)().dt_inferred_vars_modal,c=(0,T.iC)(e,Array.from(n),{type:l.Z_n.COLOR,resolvedType:l.rXF.COLOR,value:{...a,a:a.a*(o??1)}},s);return c?{matchingVars:{ids:c,rawValue:{type:l.Z_n.COLOR,value:{...a,a:a.a*(o??1)}}}}:{}}function et(e,r){let n=(0,E.uQ)(),i=(0,y.Q)(),a=(0,f.v4)(),o=(0,N.ks)(),{boundVar:s,matchingVars:l}=ee(n,e,r),c=s??(l?.ids.length===1?l.ids[0]:void 0),d=!s&&!!c;return ei((0,T.u)(c),{variableId:c,isSuggested:d,matchingVars:l},a.id,o,i.inspectionMode)}function er(e,r,n,i,a){let o=function(e,r){let n=function(e,r){let n=e.variableScope?new Set([e.variableScope]):void 0,{boundVar:i,matchingVars:a}=ee(r,e.paint,n),o=i??(a?.ids.length===1?a.ids[0]:void 0);return{variableId:o,isSuggested:!i&&!!o,matchingVars:a}}(e,r);if(!n.variableId)return{variable:null,variableData:n};let i=_.zl.get((0,P.Ev)(n.variableId));if(i)return{variable:i,variableData:n};let a=l.CWU.getSubscribedVariableInfo(n.variableId);return a?{variable:(0,A.ZI)(a),variableData:n}:{variable:null,variableData:n}}(e,r),s=ei(o.variable,o.variableData,n,i,a);return{...e,variable:s}}function en(e,r,n,i,a){return e.map(e=>e.type===O.q.STYLE?function(e,r,n,i,a){let o=e.paints.map(e=>er(e,r,n,i,a));return{...e,paints:o}}(e,r,i.id,a,n):er(e,r,i.id,a,n))}function ei(e,r,n,i,a){if(r.isSuggested&&!i)return{variable:null};let o=(0,f.xv)(e,n),s=i&&"code"===a&&o?o:e?.name;return{variable:e,variableDisplayName:s,isSuggested:r.isSuggested,matchingVars:i?r.matchingVars:void 0}}function ea(e){return(0,a.d4)(r=>{let n=b.E7(r.mirror.selectionProperties.variableConsumptionInfo)?.variableNotMatchingSetValue||{},i=e.map(e=>{let r=n[e]??void 0;return(0,s.UU)(r)&&"isMixed"in r?b.oV:r});return 0===i.length?void 0:1===i.length?i[0]:i.every(e=>(0,o.c2)(e,i[0]))?i[0]:b.oV})}},983092:(e,r,n)=>{n.r(r),n.d(r,{CreateVariableForm:()=>z,CreateVariableFormInput:()=>j,VariableCreateModalRoot_UNSAFE:()=>V,VariableFormRow:()=>W,useDetachedVariableValue:()=>K,useHandleVariableSelected:()=>Y,useHideContextMenu:()=>$,useVariableCreateModalActions:()=>G});var i=n(411855),a=n(188507),o=n(140593),s=n(966664),l=n(463033),c=n(922827),d=n(340818),u=n(587932),m=n(89865),p=n.n(m),h=n(91408),_=n(320063),g=n(153234),f=n(553716),E=n(286640),y=n(452441),b=n(939863),v=n(175290),I=n(632430),T=n(869156),S=n(318812),w=n(173454),A=n(498606),C=n(7959),N=n(538697),L=n(761334),O=n(746806),R=n(243008),P=n(282263),D=n(564092),k=n(15270),M=n(720531),F=n(837746),x=n(476066),U=n(424148);let B=2*(0,h.jz)(F.dGl);function V({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:a,onCreateVariable:o,onClose:s}){(0,L.NF)({resolvedType:a});let{onCreateVariableSubmit:l}=G({onCreateVariable:o,onClose:s});return i.createElement(H,{initialPosition:e,initialValue:r,initialWidth:n,resolvedType:a,onCreateVariableSubmit:l,onClose:s,recordingKey:"createVariableModal"})}function G({onCreateVariable:e,onClose:r}){return{onCreateVariableSubmit:function({varSetID:n,varName:i,varValue:a}){if(!c.CWU.isValidVariableName(i,n)){(0,f.x1)("variables","Attempted to submit variable name that is invalid",{varName:i,_varSetID:n});return}d.l7.user("create-variable",()=>{let r=n??c.CWU.createVariableSet((0,b.t)("variables.variable_collection"),c.G6k.AUTOMATIC_FIRST_COLLECTION),s=c.CWU.createVariable(i,r,a,c.HS4.VARIABLE_PICKER),l=c.CWU.getLocalVariableInfo(s);(0,o.B1)(l,`variable with id ${s} not found`),e((0,w.kz)(l))}),r()}}}function H({initialPosition:e,initialValue:r,initialWidth:n,resolvedType:a,recordingKey:o,onCreateVariableSubmit:s,onClose:l}){return i.createElement(O.vx,{title:i.createElement("div",{className:x.h$},(0,b.tx)("variables.create_modal.title")),initialPosition:e,initialWidth:n,onClose:l},i.createElement(z,{resolvedType:a,initialValue:r,recordingKey:g.Pt(o,"createVariableForm"),onSubmit:s}))}function K(e){let r=(0,T.BQ)(e.type===c.Z_n.ALIAS?e.value:void 0);return(0,s.Vq)(r)&&"MIXED"!==r?r:null}function W({label:e,input:r}){return i.createElement(v.Y,{spacing:0,horizontalAlignItems:"space-between",height:"hug-contents",padding:{horizontal:B}},i.createElement(C.JU,null,e),r)}function $(e){(0,i.useEffect)(()=>{let r=e.current;if(!r)return;let n=e=>e.preventDefault();return r.addEventListener("contextmenu",n),()=>{r.removeEventListener("contextmenu",n)}},[e])}function Y(e,r,n){let o=(0,a.wA)();return(0,i.useCallback)(async i=>{if(i){let e=await o((0,I.Oe)(i));n((0,D.y$)(r,e))}else e.type===c.Z_n.ALIAS&&n((0,u.WI)(r))},[o,e,r,n])}function z({resolvedType:e,initialValue:r,recordingKey:n,onSubmit:a}){let o=(0,i.useRef)(null);$(o);let[s,d]=(0,i.useState)({varName:"",varValue:r??(0,u.WI)(e),varSetID:null}),m=i.useMemo(()=>c.CWU.isValidVariableName(s.varName??"",s.varSetID??null),[s]),p=g.of(n,"submit",()=>{m&&a({varName:s.varName,varValue:s.varValue,varSetID:s.varSetID??null})});return i.createElement("form",{onSubmit:p,autoComplete:"no"},i.createElement(v.Y,{direction:"vertical",spacing:0,height:"hug-contents",ref:o},i.createElement(v.Y,{direction:"vertical",spacing:`${(0,h.jz)(F.dGl)}px`,padding:{top:B},height:"hug-contents"},i.createElement(j,{recordingKey:n??"",initialVarValue:r,resolvedType:e,setVariableFormSubmitData:d,variableFormSubmitData:s}))),i.createElement(v.Y,{horizontalAlignItems:"end",verticalAlignItems:"center",padding:16},i.createElement(l.$n,{type:"submit",disabled:!m,recordingKey:g.Pt(n,"createButton"),htmlAttributes:{"data-tooltip":(0,b.t)("variables.create_modal.invalid_variable_name"),"data-tooltip-type":m?void 0:A.Ib.TEXT}},(0,b.tx)("variables.create_modal.create_button"))))}function j({recordingKey:e,initialVarValue:r,resolvedType:n,setVariableFormSubmitData:a,variableFormSubmitData:o}){let s=(0,T.yp)();n===c.rXF.TEXT_DATA&&(n=c.rXF.STRING);let[l,d]=(0,E.Vc)("last-used-variable-set-bottoms-up",s.length>0?s[0].node_id:null),m=(0,i.useMemo)(()=>{let e=s.find(e=>e.node_id===l);return!e&&s.length>0?s[0]:e},[s,l]),p=(0,T.rW)(m?.node_id??null),h=(0,i.useRef)(null);function f(e,r,n){a({varName:e,varValue:r,varSetID:n})}function v(e){f(o.varName,e,o.varSetID)}(0,_.h)(()=>{h.current?.select(),f((0,k.Wc)(p,n),r??(0,u.WI)(n),m?.node_id??null)});let I=K(o.varValue),S=Y(o.varValue,n,v);return i.createElement(i.Fragment,null,s.length>0&&!!m&&i.createElement(W,{label:(0,b.tx)("variables.create_modal.collection_label"),input:i.createElement("div",{className:x.hF},i.createElement(q,{selectedVariableSetID:m.node_id,variableSets:s,onChange:e=>{d(e),f(o.varName,o.varValue,e)}}))}),i.createElement(W,{label:(0,b.tx)("variables.create_modal.name_label"),input:i.createElement(y.L,{className:x._Z,name:"variableName",value:o.varName,onChange:e=>{f(e.target.value,o.varValue,o.varSetID)},ref:h,recordingKey:g.Pt(e,"variableNameInput"),delay:50,"data-1p-ignore":!0,autoFocus:!0})}),i.createElement(W,{label:(0,b.tx)("variables.create_modal.value_label"),input:i.createElement("div",{className:x.hF},i.createElement(P.Cr,{resolvedType:n,variableValue:o.varValue,onVariableValueChange:e=>v(e),onVariableSelected:S},i.createElement(M.gJ,{variableValue:o.varValue,contextType:R.$.FORM,onChange:e=>v(e),recordingKey:g.Pt(e,"variableValueInput")}),I&&i.createElement(C.K0,{svg:U.A,type:"button","data-tooltip-type":A.Ib.TEXT,"data-tooltip":(0,b.t)("variables.authoring_modal.table.detach_alias"),onClick:()=>v(I),recordingKey:g.Pt(e,"detachVariableButton")})))}))}function q({selectedVariableSetID:e,variableSets:r,onChange:n}){let o=(0,a.wA)(),s=(0,S.Um)(),l=(0,i.useMemo)(()=>p()(r,e=>e.node_id),[r]);return i.createElement(N.l6,{id:"variable-create-modal-variable-set-select",property:l[e],formatter:{format:e=>e?.name??""},dispatch:o,chevronClassName:x.mL,inputClassName:x.NI,dropdownShown:s,onChange:e=>n(e.node_id)},r.map(function(e){return i.createElement(N.c$,{key:e.node_id,value:e})}))}},533573:(e,r,n)=>{n.d(r,{Hr:()=>b,Io:()=>_,MH:()=>function e(r){let n=(0,u.E7)(r);if(n){if("dataType"in n&&"ALIAS"===n.dataType&&n.value?.alias)return s.dI(n.value?.alias);if("type"in n){if(n.type===o.Z_n.ALIAS)return n.value;if(n.type===o.Z_n.FONT_STYLE)return e(n.value.asFloat??n.value.asString??null);if(n?.type===o.Z_n.EXPRESSION&&n.value.expressionFunction===o.JTp.STRINGIFY&&1===n.value.expressionArguments.length)return e(n.value.expressionArguments[0])}}return null},NX:()=>f,Oi:()=>m,WB:()=>E,eF:()=>h,gQ:()=>g,iw:()=>y,rY:()=>p});var i=n(140593),a=n(821910),o=n(922827),s=n(879441),l=n(568214),c=n(939863),d=n(775664),u=n(848661);function m(e){if("MIXED"===e)return(0,c.t)("fullscreen.mixed");if(!e)return null;switch(e.resolvedType){case o.rXF.FLOAT:return String(parseFloat(e.value.toFixed(2)));case o.rXF.BOOLEAN:return e.value?(0,c.t)("variables.values.boolean.true"):(0,c.t)("variables.values.boolean.false");case o.rXF.COLOR:return d.TI.format(e.value);case o.rXF.STRING:return e.value;default:return JSON.stringify(e.value)}}function p(e,r){if(e===r)return!0;if(!e||!e.dataType||!e.resolvedDataType||!e.value||!r||!r.dataType||!r.resolvedDataType||!r.value||e.dataType!==r.dataType||e.resolvedDataType!==r.resolvedDataType)return!1;switch(e.dataType){case"BOOLEAN":return e.value.boolValue===r.value.boolValue;case"FLOAT":return e.value.floatValue===r.value.floatValue;case"STRING":return e.value.textValue===r.value.textValue;case"COLOR":return(0,i.B1)(e.value.colorValue),(0,i.B1)(r.value.colorValue),(0,l.YU)(e.value.colorValue)===(0,l.YU)(r.value.colorValue);default:return(0,a.c2)(e,r)}}function h(e){return"LOCAL"===e.subscriptionStatus&&e.isSoftDeleted}let _={CORNER_RADIUS:[o.rXF.FLOAT],STACK_SPACING:[o.rXF.FLOAT],STACK_PADDING_LEFT:[o.rXF.FLOAT],STACK_PADDING_TOP:[o.rXF.FLOAT],STACK_PADDING_RIGHT:[o.rXF.FLOAT],STACK_PADDING_BOTTOM:[o.rXF.FLOAT],TEXT_DATA:[o.rXF.STRING,o.rXF.FLOAT],WIDTH:[o.rXF.FLOAT],HEIGHT:[o.rXF.FLOAT],RECTANGLE_TOP_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_TOP_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:[o.rXF.FLOAT],RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:[o.rXF.FLOAT],STACK_COUNTER_SPACING:[o.rXF.FLOAT],MIN_WIDTH:[o.rXF.FLOAT],MAX_WIDTH:[o.rXF.FLOAT],MIN_HEIGHT:[o.rXF.FLOAT],MAX_HEIGHT:[o.rXF.FLOAT],STROKE_WEIGHT:[o.rXF.FLOAT],OPACITY:[o.rXF.FLOAT],BORDER_TOP_WEIGHT:[o.rXF.FLOAT],BORDER_BOTTOM_WEIGHT:[o.rXF.FLOAT],BORDER_LEFT_WEIGHT:[o.rXF.FLOAT],BORDER_RIGHT_WEIGHT:[o.rXF.FLOAT],MISSING:[],PARAGRAPH_SPACING:[o.rXF.FLOAT],PARAGRAPH_INDENT:[o.rXF.FLOAT],VISIBLE:[o.rXF.BOOLEAN],VARIANT_PROPERTIES:[o.rXF.SYMBOL_ID],FONT_FAMILY:[o.rXF.STRING],FONT_STYLE:[o.rXF.STRING,o.rXF.FLOAT],FONT_VARIATIONS:[o.rXF.FLOAT],FONT_SIZE:[o.rXF.FLOAT],LETTER_SPACING:[o.rXF.FLOAT],LINE_HEIGHT:[o.rXF.FLOAT]};function g(e){return!!e.variable}function f({variable:e,variableDisplayName:r}){return e?e.codeSyntax?.[o.y0x.WEB]?e.codeSyntax[o.y0x.WEB]:`var(--${(r??e.name).replace(/[^a-zA-Z0-9-]/g,"")})`:""}function E(e){switch(e){case o.rXF.BOOLEAN:return o.J0O.BOOL;case o.rXF.FLOAT:return o.J0O.NUMBER;case o.rXF.STRING:case o.rXF.TEXT_DATA:return o.J0O.TEXT;default:throw Error(`Unknown resolved type: ${e}`)}}function y(e){return[...e].sort((e,r)=>e.name!==r.name?e.name.localeCompare(r.name):e.node_id<r.node_id?-1:1)}function b(e){switch(e){case o.rXF.BOOLEAN:return"boolean";case o.rXF.FLOAT:return"number";case o.rXF.STRING:return"string";case o.rXF.COLOR:return"color";case o.rXF.MAP:return"map";case o.rXF.SYMBOL_ID:return"symbol_id";case o.rXF.FONT_STYLE:return"font_style";case o.rXF.TEXT_DATA:return"text_data"}}},682789:(e,r,n)=>{n.d(r,{Y:()=>a});var i=n(716034);let a=(0,i.eU)({type:"ALL_LIBRARIES"});(0,i.eU)({type:"LOCAL_VARIABLES"})},939143:(e,r,n)=>{n.d(r,{$3:()=>ec,Rp:()=>X});var i=n(411855),a=n(140593),o=n(57860),s=n(922827),l=n(617691),c=n(629019),d=n.n(c),u=n(320063),m=n(358145),p=n(966712),h=n(498750),_=n(255942),g=n(153234),f=n(192437),E=n(723325),y=n(163023),b=n(999237),v=n(939863),I=n(378905),T=n(788744),S=n(680681),w=n(869156),A=n(318812),C=n(29680),N=n(335682),L=n(694687),O=n(643067),R=n(173454),P=n(878319),D=n(7959),k=n(158445),M=n(181075),F=n(512596),x=n(104950),U=n(52512),B=n(503795),V=n(90211),G=n(726188),H=n(761334),K=n(452883),W=n(564092),$=n(74416),Y=n(875157),z=n(375673),j=n(703475);function q({resolvedType:e,requestedTypes:r}){return r||(e?[e]:null)}function Z(e,r,n,a){return i.createElement("div",{className:z.p$,style:{height:(0,B.Ih)({layout:r})}},e.length>0?(0,v.t)("variables.binding_ui.no_search_results"):a===s.rXF.COLOR?(0,v.t)("variables.binding_ui.no_colors_empty_state"):(0,p.kc)().ds_variable_props_unified_ui&&n?(0,v.t)("variables.binding_ui.no_variables_props_empty_state"):(0,v.t)("variables.binding_ui.no_variables_empty_state"))}function X({selectedItem:e,resolvedType:r,requestedTypes:n,variableFilters:o,pickerType:s,disabledVariableIds:l,setControlRightButtons:c,variableScopes:d,recordingKey:u,onVariableSelected:m,onStyleSelected:p,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g}){let{currentView:E,setCurrentView:y,toggleLayout:b}=(0,x.R)({selectedItem:e,resolvedType:r}),v=function(e){switch(e.type){case"ALL_LIBRARIES":return et;case"LOCAL_VARIABLES":return ee;case"SUBSCRIBED_VARIABLES":return J;default:(0,a.xb)(e,"Unhandled view for picker body")}}(E),I=(0,i.useMemo)(()=>q({requestedTypes:n,resolvedType:r??null}),[n,r]),[T,S]=(0,i.useState)(""),w=i.useRef(null),A=(0,i.useCallback)(()=>{w.current&&w.current.focus(),b()},[b,w]);return i.createElement(f.tH,{boundaryKey:"VariablePicker",fallback:Z(T,E.layout,!!h,r)},i.createElement(v,{selectedItem:e,currentView:E,resolvedType:r,disabledVariableIds:l,pickerType:s,recordingKey:u,onVariableSelected:m,onStyleSelected:p,onComponentPropSelected:h,onClose:_,keepOpenOnItemSelect:g,requestedTypes:n,searchQuery:T,onSearchInputChange:S,variableScopes:d,variableFilters:o,searchInputRef:w,renderSetControls:a=>i.createElement(el,{variableSets:a,currentView:E,setCurrentView:y,onToggleLayout:A,selectedItem:e,resolvedType:r,setControlRightButtons:c,recordingKey:u,onStyleSelected:p,requestedTypes:n,searchQuery:T})}),i.createElement(F.M,{resolvedTypes:I,selectedItem:e}))}function J({selectedItem:e,currentView:r,resolvedType:n,pickerType:a,recordingKey:o,onVariableSelected:l,onStyleSelected:c,onClose:d,requestedTypes:u,searchQuery:m,onSearchInputChange:p,variableScopes:h,variableFilters:_,searchInputRef:g,renderSetControls:f}){let E=r.fileKey,y=(0,w.kf)(E),b=(0,w.u5)(E),v=e?.type===R.PW.VARIABLE?e:null,T=(0,w.G6)(v?.variableSetId||""),S="loading"===b.status||"loading"===y.status,[A,C]=(0,i.useMemo)(()=>{let e=y.data??[],r=b.data??[];return v?.subscriptionStatus==="SUBSCRIBED"&&(0,I.TK)(v,E)&&!e.find(e=>e.key===v?.key)&&T?[[...e,v],[...r,T]]:[e,r]},[E,y,b,v,T]);return n===s.rXF.COLOR&&"color-picker"===a&&c?i.createElement(Q,{fileKey:E,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({isLoading:s,dsStyles:E})=>i.createElement(eo,{variables:A,variableSets:C,dsStyles:E,currentView:r,selectedItem:e,disabledVariableIds:new Set,resolvedType:n,pickerType:a,recordingKey:o,isLoading:s||S,onVariableSelected:l,onStyleSelected:c,onClose:d,requestedTypes:u,searchQuery:m,onSearchInputChange:p,variableScopes:h,variableFilters:_,searchInputRef:g,pickerControls:f(C)})}):i.createElement(eo,{variables:A,variableSets:C,dsStyles:[],currentView:r,selectedItem:e,disabledVariableIds:new Set,resolvedType:n,pickerType:a,recordingKey:o,onVariableSelected:l,onClose:d,requestedTypes:u,searchQuery:m,onSearchInputChange:p,variableScopes:h,searchInputRef:g,pickerControls:f(C)})}function Q({fileKey:e,selectedStyle:r,render:n}){let a=(0,k.AH)(r?.key||null,r),{status:o,stylesByFileKey:s}=(0,k.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:a}),c=s[e]?.styles??[];return i.createElement(M.mY,null,n({isLoading:"loaded"!==o,dsStyles:c}))}function ee({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,onComponentPropSelected:E,searchInputRef:y,renderSetControls:b}){let v=(0,w.Rb)(),I=(0,w.yp)();return a===s.rXF.COLOR&&"color-picker"===o&&u?i.createElement(er,{styleType:l.s4.FILL,render:s=>i.createElement(eo,{variables:v,variableSets:I,dsStyles:s,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,searchInputRef:y,pickerControls:b(I)})}):E?i.createElement(en,{render:s=>i.createElement(eo,{variables:v,variableSets:I,dsStyles:[],currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,onComponentPropSelected:E,componentProps:s,searchInputRef:y,pickerControls:b(I)}),pickerType:o,requestedTypes:p,resolvedType:a}):i.createElement(eo,{variables:v,variableSets:I,dsStyles:[],currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:m,requestedTypes:p,searchQuery:h,onSearchInputChange:_,variableScopes:g,variableFilters:f,searchInputRef:y,pickerControls:b(I)})}function et({selectedItem:e,disabledVariableIds:r,currentView:n,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onComponentPropSelected:m,onClose:p,keepOpenOnItemSelect:h,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,renderSetControls:v}){let I=(0,w.Rb)(),T=(0,w.yp)(),S=(0,w.pN)(),A="loaded"!==S.status,C=S.data?.libraryVariables,N=S.data?.libraryVariableSets,L=(0,i.useMemo)(()=>[...I,...C??[]],[I,C]),O=(0,i.useMemo)(()=>[...T,...N??[]],[T,N]);return a===s.rXF.COLOR&&"color-picker"===o&&u?i.createElement(ei,{styleType:l.s4.FILL,selectedStyle:e?.type===R.PW.STYLE?e:null,render:({dsStyles:s,isLoading:l})=>i.createElement(eo,{variables:L,variableSets:O,dsStyles:s,isLoading:l||A,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onStyleSelected:u,onClose:p,keepOpenOnItemSelect:h,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,pickerControls:v(O)})}):m?i.createElement(en,{render:s=>i.createElement(eo,{variables:L,variableSets:O,dsStyles:[],isLoading:A,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:p,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,onComponentPropSelected:m,componentProps:s,searchInputRef:b,pickerControls:v(O)}),pickerType:o,requestedTypes:_,resolvedType:a}):i.createElement(eo,{variables:L,variableSets:O,dsStyles:[],isLoading:A,currentView:n,selectedItem:e,disabledVariableIds:r,resolvedType:a,pickerType:o,recordingKey:c,onVariableSelected:d,onClose:p,requestedTypes:_,searchQuery:g,onSearchInputChange:f,variableScopes:E,variableFilters:y,searchInputRef:b,pickerControls:v(O)})}function er({styleType:e,render:r}){return r((0,k.Je)(e))}function en({render:e,pickerType:r,requestedTypes:n,resolvedType:a}){return e(i.useCallback(()=>{let e=(()=>{switch(r){case"set-variable":return(0,p.kc)().ds_variable_props_proto?s.CWU.getComponentPropsForSetVariableList():[];case"prop-assignment":return(0,p.kc)().ds_variable_props_binding_props?s.CWU.getComponentPropsForPropAssignmentList():[];default:return(0,p.kc)().ds_variable_props_unified_ui?s.CWU.getComponentPropsForFieldsList():[]}})(),i=[];return e&&Object.keys(e).length>0&&e.forEach(e=>{i.push(...(0,B.LV)(e.values,n,a))}),i},[r,n,a])())}function ei({styleType:e,selectedStyle:r,render:n}){let a=(0,k.Je)(e),o=(0,k.AH)(r?.key||null,r),{status:s,stylesByFileKey:c}=(0,k.Zk)({styleType:l.s4.FILL,initialSelectedSubscribedStyle:o}),d=(0,i.useMemo)(()=>Object.values(c).reduce((e,{styles:r})=>(e.push(...r),e),[]),[c]),u=(0,i.useMemo)(()=>a.concat(d),[a,d]);return i.createElement(M.mY,null,n({isLoading:"loaded"!==s,dsStyles:u}))}function ea(e){let r=(0,W.Px)({includeSubtree:!0});return i.useMemo(()=>e.some(e=>"MIXED"===("LOCAL"===e.subscriptionStatus?r[e.keyForPublish]:r[e.key])),[e,r])}function eo({variables:e,variableSets:r,dsStyles:n,currentView:a,selectedItem:l,disabledVariableIds:c,resolvedType:u,pickerType:p,recordingKey:_,isLoading:f,onVariableSelected:y,onStyleSelected:b,onClose:I,keepOpenOnItemSelect:C,requestedTypes:k,searchQuery:M,onSearchInputChange:x,variableScopes:W,variableFilters:$,onComponentPropSelected:j,componentProps:X,onCMSFieldSelected:J,cmsFields:Q,pickerControls:ee,searchInputRef:et}){(0,H.D)({isLoading:f??!1,eventName:"variables.variable_picker_load_time"});let er=(0,N.tS)(),en=(0,A.Um)(),ei=l?(0,B.UT)(l):null,eo=(0,w.u)(l&&l.type===R.PW.VARIABLE?l.node_id:void 0),el=(0,w.G6)(eo?.variableSetId),[ec,eu]=i.useState(null);i.useRef(null).current=ec;let em=ea(r),ep=M.length>0||em?"list":a.layout,eh=(0,K.$)(),e_=(0,i.useMemo)(()=>q({requestedTypes:k,resolvedType:u??null}),[k,u]),eg=b?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],ef=(0,F.A)(e_,l?.type!=="CMS_FIELD"?l:null,eg),eE=(0,L.sZ)(),ey=(0,T.Sd)(),eb=(0,O.Oe)(eE)&&(0,S.NX)(ey),ev=es({selectedItem:l,resolvedType:u,requestedTypes:k,onStyleSelected:b}),eI=(0,i.useMemo)(()=>{let e={};return(eb?ev:ef).forEach(r=>{e[r.fileKey]=r.fileName}),e},[ef,ev,eb]),eT=(0,i.useMemo)(()=>{let e={};return(eb?ev:ef).forEach(r=>{e[r.fileKey]=r.libraryKey}),e},[ef,ev,eb]),eS=(0,i.useMemo)(()=>k?e.filter(e=>k.includes(e.resolvedType)):e.filter(e=>void 0===u||e.resolvedType===u),[e,u,k]);var ew=eo&&!eS.find(e=>(0,B.UT)(e)===ei);let eA=(0,i.useMemo)(()=>W?eS.filter(e=>(0,B.UT)(e)===ei||(0,Y.AQ)(e,W)):eS,[eS,W,ei]),eC=(0,V.qF)(eA,M),eN=(0,i.useMemo)(()=>M.length>0?eC:eC.filter(e=>{let r=e.resolvedType,n=$?.[P.t.HIDE_IN_DEFAULT_VIEW];if(n&&n[r])return!1;let i=$?.[P.t.MUST_INCLUDE_ONE_OF];if(i&&i[r]?.length){let n=i[r];if("LIBRARY"===e.subscriptionStatus||n&&!Object.values(e.modeValues).some(e=>{if(e.type===s.Z_n.STRING){let r=e.value.trim().toLocaleLowerCase();return n?.some(e=>e===r)}return!1}))return!1}return!0}),[eC,M,$]),eL=(0,V.bT)(n,M),eO=(0,V.tZ)(X??[],M),eR=(0,V.Ui)(Q??[],M),eP=(0,i.useMemo)(()=>{if("ALL_LIBRARIES"===a.type)return(0,B.dC)({variables:eN,variableSets:r,styles:eL,componentProps:eO,layout:ep,fileNamesByKey:eI,fileKeyToLibraryKey:eT,openFileKey:er,slideThemeId:eh});if("CMS_FIELDS"===a.type)return(0,B.kE)({cmsFields:eR});if(u===s.rXF.COLOR)return(0,B.w$)({variables:eN,variableSets:r,styles:eL,layout:ep,isLocal:"LOCAL_VARIABLES"===a.type,slideThemeId:eh});{let e=(0,B.HK)({variables:eN,variableSets:r,layout:ep});if(!j)return e;let n=(0,B.dh)({componentProps:eO});return n.length>0&&e.length>0&&n.push({type:B.Yc.SECTION_HEADER,name:(0,v.t)("variables.binding_ui.set_labels.variables_created_in_file")}),n.concat(e)}},[a.type,u,eN,r,eL,eO,ep,eI,eT,er,eh,eR,j]);var eD=!1;ew&&el&&(eP.unshift({type:B.Yc.VARIABLES,items:[eo],variableSet:el}),eD=!0);let ek=i.useRef([]);ek.current=eP;let eM=i.useRef(null),eF=(0,i.useCallback)(()=>{eM.current?.scrollToTop();let e=function(e){let r=null;for(let n of e)if("items"in n){r=n.items[0];break}return r}(ek.current);eu(e?(0,B.UT)(e):null)},[]),ex=(0,i.useCallback)((e,r)=>{let n=(0,B.oM)(ek.current,e);n>=0&&eM.current?.scrollToIndex(n,r),eu(e)},[]),eU=(0,m.ZC)(M);(0,i.useLayoutEffect)(()=>{!f&&eU!==M&&(M.length>0||!ei?eF():M||ex(ei,{align:"center"}))},[M,f,eF,ex,ei,eU]);let{showStyleContextMenu:eB,hideStyleContextMenu:eV}=(0,G.XM)(),eG=(0,i.useCallback)((e,r)=>{e.type===R.PW.STYLE&&eB({dsStyle:e,position:r})},[eB]),eH=(0,i.useCallback)(e=>{eu((0,B.UT)(e))},[eu]),eK=(0,i.useCallback)(e=>{ec===(0,B.UT)(e)&&eu(null)},[ec,eu]),eW=(0,i.useCallback)(e=>{e.type===R.PW.VARIABLE?y(e):e.type===R.PW.STYLE?b?.(e,{fromSearch:M.length>0}):"COMPONENT_PROP"===e.type?j?.(e):"CMS_FIELD"===e.type&&J?.(e),C||I()},[C,y,b,M.length,j,J,I]),e$=(0,i.useCallback)(e=>{x(e.currentTarget.value)},[x]),eY=(0,i.useCallback)(r=>{if(r.keyCode===h.Uz.ENTER){let r=function({highlightedItemID:e,variables:r,dsStyles:n,componentProps:i,cmsFields:a}){return e?[...r,...n,...i,...a].find(r=>(0,B.UT)(r)===e)??null:null}({variables:e,dsStyles:n,componentProps:eO,cmsFields:eR,highlightedItemID:ec});r?eW(r):l&&y(),I()}else r.keyCode===h.Uz.ESCAPE?I():((0,E.Nt)(r,!1)||(0,E.c2)(r,!1)||(0,E.yn)(r.code,!1)||(0,E.lv)(r.code,!1))&&(ec?(eM.current?.getVirtualItems()??[]).some(e=>{let r=ek.current[e.index];return"items"in r&&r.items.some(e=>(0,B.UT)(e)===ec)})||ex(ec,{align:"center"}):ei?ex(ei,{align:"center"}):eF())},[e,n,eO,eR,ec,I,eW,l,y,ei,ex,eF]);return i.createElement(E.dP,{recordingKey:_,onClick:eV},i.createElement("div",{className:z.PP},i.createElement(ed,{inputRef:et,value:M,onChange:e$,onKeyDown:eY,recordingKey:g.Pt(_,"input")})),ee,i.createElement(D.Id,{className:d()({[z.eB]:u!==s.rXF.COLOR,[z.a2]:!0})},f?i.createElement("div",{className:z.S,style:{height:(0,B.Ih)({layout:ep})}},i.createElement(o.k,null)):0!==eL.length||0!==eN.length||0!==eO.length||0!==eR.length||eD?"list"===ep?i.createElement(U.HZ,{ref:eM,className:z.jG,listItems:eP,selectedItemID:ei,disabledVariableIds:c,highlightedItemID:ec,pickerType:p,recordingKey:_,onItemHighlight:eH,onItemSelect:eW,onItemContextMenu:eG,onItemMouseLeave:eK}):i.createElement(U.Rm,{ref:eM,className:z.jG,listItems:eP,selectedItemID:ei,highlightedItemID:ec,recordingKey:_,onItemHighlight:eH,onItemSelect:eW,onItemContextMenu:eG,onItemMouseLeave:eK}):Z(M,ep,!!j,u)),en?.type===G.A7&&i.createElement(G.ip,{dsStyle:en.data.dsStyle,position:en.data.position,recordingKey:g.Pt(_,"contextMenu")}))}function es({selectedItem:e,resolvedType:r,requestedTypes:n,onStyleSelected:a}){let o=(0,i.useMemo)(()=>q({requestedTypes:n,resolvedType:r??null}),[n,r]),s=a?[R.ub.VARIABLE,R.ub.STYLE]:[R.ub.VARIABLE],l=(0,F.A)(o,e?.type!=="CMS_FIELD"?e:null,s),c=(0,L.sZ)(),d=(0,T.Sd)(),u=(0,T.Fl)(),m=(0,O.Oe)(c)&&(0,S.NX)(d);return(0,i.useMemo)(()=>{if(m){let e=l.map(({fileKey:e,libraryKey:r,fileName:n})=>({key:e,name:n,libraryKey:r}));return(0,S.k9)({libraries:e,approvedLibraryFileKeysByResourceType:d,approvedLibraryKeysByResourceType:u}),e.map(({key:e,libraryKey:r,name:n})=>({fileKey:e,fileName:n,libraryKey:r}))}return l.sort((e,r)=>e.fileName.localeCompare(r.fileName))},[l,m,d,u])}function el({variableSets:e,currentView:r,setCurrentView:n,onToggleLayout:a,selectedItem:o,resolvedType:s,setControlRightButtons:l,recordingKey:c,onStyleSelected:d,requestedTypes:u,searchQuery:m}){let p=es({selectedItem:o,resolvedType:s,requestedTypes:u,onStyleSelected:d}),h=ea(e),_=0===m.length,g=m.length>0||h?"list":r.layout,f=(0,i.useMemo)(()=>({...r,layout:g}),[r,g]);return i.createElement($.Z,{recordingKey:c,currentView:f,resolvedType:s,subscribedLibraries:p,setControlRightButtons:l,onSetSelect:n,onToggleLayoutIconClick:_?a:void 0,disableGridLayout:h?$.t.MIXED_MODES:void 0})}function ec({recordingKey:e,onClose:r}){let n=g.rf(e,"mousedown",i.useCallback(e=>{r(),e.stopPropagation()},[r]));return(0,C.dH)()===s.NLJ.DROPPER_COLOR?null:i.createElement(b.n.div,{className:z.ZA,onMouseDown:n})}function ed({inputRef:e,value:r,onChange:n,onKeyDown:a,recordingKey:o}){let s=i.useRef(null);return(0,u.h)(()=>{s.current&&s.current.focus()}),i.createElement("div",{className:z.ON},i.createElement(y.B,{className:z.qc,svg:j.A}),i.createElement(D.jT,{ref:(0,_.A)(e,s),className:z.Rt,value:r,onChange:n,noBorderOnFocus:!0,placeholder:(0,v.t)("variables.binding_ui.search_placeholder"),onKeyDown:a,recordingKey:o}))}},875157:(e,r,n)=>{n.d(r,{$8:()=>B,AQ:()=>U,B3:()=>P,Ku:()=>M,Mm:()=>F,Us:()=>R,ZM:()=>D,aZ:()=>V,iG:()=>x,my:()=>I});var i=n(411855),a=n(561546),o=n(668e3),s=n(993086),l=n(291254),c=n(598977),d=n(692775),u=n(193161),m=n(922827),p=n(163023),h=n(939863),_=n(595869),g=n(666139),f=n(560185),E=n(668524),y=n(180377),b=n(58502),v=n(402997),I=(e=>(e.SCOPE="scope",e.LABEL="label",e))(I||{});let T=new Set([m.rXF.FLOAT,m.rXF.COLOR,m.rXF.STRING]),S=new Set([m.rrT.FILL,m.rrT.STROKE,m.rrT.EFFECT]),w=new Set([m.j0r.FRAME_FILL,m.j0r.SHAPE_FILL,m.j0r.TEXT_FILL]),A=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.CORNER_RADIUS,name:(0,h.tx)("variables.scopes.corner_radius"),iconElement:i.createElement(p.B,{svg:_.A})},{type:"scope",scope:m.j0r.WIDTH_HEIGHT,name:(0,h.tx)("variables.scopes.width_height"),iconElement:i.createElement(p.B,{svg:y.A})},{type:"scope",scope:m.j0r.GAP,name:(0,h.tx)("variables.scopes.gap"),iconElement:i.createElement(p.B,{svg:f.A}),subLabel:(0,h.tx)("variables.scopes.auto_layout")},{type:"scope",scope:m.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:i.createElement(p.B,{svg:v.A})},{type:"scope",scope:m.j0r.STROKE_FLOAT,name:(0,h.tx)("variables.scopes.stroke"),iconElement:i.createElement(p.B,{svg:b.A})},{type:"scope",scope:m.j0r.OPACITY,name:(0,h.tx)("variables.scopes.layer_opacity"),iconElement:i.createElement(o.N,null)},{type:"scope",scope:m.j0r.EFFECT_FLOAT,name:(0,h.tx)("variables.scopes.effects"),iconElement:i.createElement(p.B,{svg:g.A})},{type:"label",key:"typography",label:(0,h.tx)("fullscreen.type_panel.typography")},{type:"scope",scope:m.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight"),iconElement:i.createElement(s.j,null)},{type:"scope",scope:m.j0r.FONT_SIZE,name:(0,h.tx)("variables.scopes.font_size"),iconElement:i.createElement(l.Z,null)},{type:"scope",scope:m.j0r.LINE_HEIGHT,name:(0,h.tx)("variables.scopes.line_height"),iconElement:i.createElement(c.e,null)},{type:"scope",scope:m.j0r.LETTER_SPACING,name:(0,h.tx)("variables.scopes.letter_spacing"),iconElement:i.createElement(d.y,null)},{type:"scope",scope:m.j0r.PARAGRAPH_SPACING,name:(0,h.tx)("variables.scopes.paragraph_spacing"),iconElement:i.createElement(u.o,null)},{type:"scope",scope:m.j0r.PARAGRAPH_INDENT,name:(0,h.tx)("variables.scopes.paragraph_indent"),iconElement:i.createElement(p.B,{svg:E.A})}],C=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.ALL_FILLS,name:(0,h.tx)("variables.scopes.all_fills")},{type:"scope",scope:m.j0r.FRAME_FILL,name:(0,h.tx)("variables.scopes.frame_fill"),devModeName:(0,h.tx)("variables.scopes.frame_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.SHAPE_FILL,name:(0,h.tx)("variables.scopes.shape_fill"),devModeName:(0,h.tx)("variables.scopes.shape_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.TEXT_FILL,name:(0,h.tx)("variables.scopes.text_fill"),devModeName:(0,h.tx)("variables.scopes.text_fill_dev_mode"),indented:!0},{type:"scope",scope:m.j0r.STROKE,name:(0,h.tx)("variables.scopes.stroke")},{type:"scope",scope:m.j0r.EFFECT_COLOR,name:(0,h.tx)("variables.scopes.effects")}],N=[{type:"scope",scope:m.j0r.ALL_SCOPES,name:(0,h.tx)("variables.scopes.all_properties")},{type:"scope",scope:m.j0r.TEXT_CONTENT,name:(0,h.tx)("variables.scopes.text_content"),iconElement:i.createElement(p.B,{svg:v.A})},{type:"scope",scope:m.j0r.FONT_FAMILY,name:(0,h.tx)("variables.scopes.font_family"),iconElement:i.createElement(l.Z,null)},{type:"scope",scope:m.j0r.FONT_STYLE,name:(0,h.tx)("variables.scopes.font_weight_or_style"),iconElement:i.createElement(s.j,null)}],L=[...A,...C,...N].reduce((e,r,n,i)=>("scope"in r&&(e[r.scope]=r.name),e),{}),O=[...A,...C,...N].reduce((e,r,n,i)=>("scope"in r&&(e[r.scope]=r.devModeName??r.name),e),{});function R(e,{devMode:r=!1}={}){return r?O[e]:L[e]}function P(e){let r;if(e?.length===0)return(0,h.tx)("variables.scopes.no_supported_properties");if(e.includes(m.j0r.ALL_SCOPES))return(0,h.tx)("variables.scopes.all_properties_label");for(let n of(0,a.RP)(e,e=>R(e)))r=r?i.createElement(i.Fragment,null,(0,h.tx)("variables.scopes.scope_list",{scope1:r,scope2:n})):n;return r??(0,h.tx)("variables.scopes.no_supported_properties")}let D={CORNER_RADIUS:m.j0r.CORNER_RADIUS,STACK_SPACING:m.j0r.GAP,STACK_PADDING_LEFT:m.j0r.GAP,STACK_PADDING_TOP:m.j0r.GAP,STACK_PADDING_RIGHT:m.j0r.GAP,STACK_PADDING_BOTTOM:m.j0r.GAP,TEXT_DATA:m.j0r.TEXT_CONTENT,WIDTH:m.j0r.WIDTH_HEIGHT,HEIGHT:m.j0r.WIDTH_HEIGHT,RECTANGLE_TOP_LEFT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_TOP_RIGHT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_LEFT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,RECTANGLE_BOTTOM_RIGHT_CORNER_RADIUS:m.j0r.CORNER_RADIUS,STACK_COUNTER_SPACING:m.j0r.GAP,MIN_WIDTH:m.j0r.WIDTH_HEIGHT,MAX_WIDTH:m.j0r.WIDTH_HEIGHT,MIN_HEIGHT:m.j0r.WIDTH_HEIGHT,MAX_HEIGHT:m.j0r.WIDTH_HEIGHT,STROKE_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_TOP_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_BOTTOM_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_LEFT_WEIGHT:m.j0r.STROKE_FLOAT,BORDER_RIGHT_WEIGHT:m.j0r.STROKE_FLOAT,OPACITY:m.j0r.OPACITY,PARAGRAPH_SPACING:m.j0r.PARAGRAPH_SPACING,PARAGRAPH_INDENT:m.j0r.PARAGRAPH_INDENT,FONT_FAMILY:m.j0r.FONT_FAMILY,FONT_STYLE:m.j0r.FONT_STYLE,FONT_VARIATIONS:m.j0r.PARAGRAPH_SPACING,FONT_SIZE:m.j0r.PARAGRAPH_SPACING,LETTER_SPACING:m.j0r.LETTER_SPACING,LINE_HEIGHT:m.j0r.LINE_HEIGHT,MISSING:null,VISIBLE:null,VARIANT_PROPERTIES:null};Object.keys(m.Z6A).filter(e=>isNaN(Number(e)));let k={FRAME:m.j0r.FRAME_FILL,SYMBOL:m.j0r.FRAME_FILL,INSTANCE:m.j0r.FRAME_FILL,VECTOR:m.j0r.SHAPE_FILL,BRUSH:m.j0r.SHAPE_FILL,STAR:m.j0r.SHAPE_FILL,LINE:m.j0r.SHAPE_FILL,ELLIPSE:m.j0r.SHAPE_FILL,RECTANGLE:m.j0r.SHAPE_FILL,REGULAR_POLYGON:m.j0r.SHAPE_FILL,ROUNDED_RECTANGLE:m.j0r.SHAPE_FILL,TEXT:m.j0r.TEXT_FILL,TEXT_PATH:m.j0r.TEXT_FILL,VECTOR_OPERATION:m.j0r.SHAPE_FILL,NONE:null,DOCUMENT:null,CANVAS:null,GROUP_DEPRECATED:null,SLICE:null,STICKY:null,SHAPE_WITH_TEXT:null,CONNECTOR:null,CODE_BLOCK:null,WIDGET:null,STAMP:null,MEDIA:null,HIGHLIGHT:null,SECTION:null,SECTION_OVERLAY:null,WASHI_TAPE:null,VARIABLE:null,TABLE:null,TABLE_CELL:null,VARIABLE_SET:null,VARIABLE_OVERRIDE:null,SLIDE:null,SLIDE_ROW:null,SLIDE_GRID:null,ASSISTED_LAYOUT_DEPRECATED:null,INTERACTIVE_SLIDE_ELEMENT:null,MODULE:null,RESPONSIVE_SET:null,CODE_COMPONENT:null,CODE_LIBRARY:null,CODE_FILE:null,CODE_INSTANCE:null,CODE_LAYER:null};function M(e){return k[e]}function F(e){return e===m.rXF.FLOAT?A:e===m.rXF.COLOR?C:e===m.rXF.STRING?N:[]}function x(e){let r=new Set;for(let n of e)D[n]&&r.add(D[n]);return r}function U(e,r){if(!T.has(e.resolvedType))return!0;let n=!1;for(let e of r)if(w.has(e)){n=!0;break}for(let i of e.scopes)if(r.has(i)||i===m.j0r.ALL_SCOPES||i===m.j0r.ALL_FILLS&&n)return!0;return!1}function B(){return[m.rXF.FLOAT,m.rXF.COLOR,m.rXF.STRING]}function V(e,r){if(!e||!r||!S.has(e))return;let n=new Set;switch(e){case m.rrT.STROKE:case m.rrT.STROKE_PRESET:n.add(m.j0r.STROKE);break;case m.rrT.FILL:for(let e in r){let r=k[e];r&&n.add(r)}break;case m.rrT.EFFECT:n.add(m.j0r.EFFECT_COLOR)}return n.size?n:void 0}},859703:(e,r,n)=>{n.d(r,{A6:()=>eb,BJ:()=>eE,Cg:()=>em,Eo:()=>Y,Ev:()=>ef,Gc:()=>e_,H2:()=>z,Ho:()=>J,Jo:()=>et,LC:()=>ea,Oj:()=>X,Ri:()=>Z,TD:()=>ed,Yt:()=>Q,ZG:()=>$,bO:()=>eg,cp:()=>q,hy:()=>ep,hz:()=>ee,jt:()=>ec,q9:()=>ev,qy:()=>K,uk:()=>eh,wh:()=>j,xA:()=>eu});var i=n(561546),a=n(966664),o=n(177131),s=n(922827),l=n(572304),c=n(636149),d=n.n(c),u=n(89865),m=n.n(u),p=n(675551),h=n.n(p),_=n(802691),g=n.n(_),f=n(966712),E=n(716034),y=n(418956),b=n(684107),v=n(394255),I=n(391388),T=n(860601),S=n(364898),w=n(696673),A=n(830445),C=n(356390),N=n(281889),L=n(674011),O=n(529928),R=n(279453),P=n(173454),D=n(875387);let k=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsSubscribed),M=(0,E.eU)(e=>e(k).map(P.Rn)),F=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariableSetsLocal),x=(0,E.eU)(e=>e(F).map(P.Dt)),U=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesSubscribed),B=(0,L.SG)(()=>s.Ez5.libraryAssets().fileLevelVariablesLocal),V=(0,E.eU)(e=>e(B).map(P.kz)),G=(0,E.eU)(e=>e(U).map(P.ZI)),H=(0,E.eU)(e=>({...m()(e(x),e=>e.keyForPublish),...m()(e(M),e=>e.key)}));(0,E.eU)(e=>({...m()(e(V),e=>e.keyForPublish),...m()(e(G),e=>e.key)}));let K=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_VARIABLE_SETS_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(P.Dt),e=>e.node_id);return{...e,...n}}if("deleted"in r){let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableSetsInfo()})});let r=(0,N.Vr)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),W=(0,E.eU)(e=>({...e(K),...e(eu)})),$=(0,y.Iz)(e=>(0,E.eU)(r=>r(K)[e]));(0,y.Iz)(e=>(0,E.eU)(r=>r(eu)[e]));let Y=(0,y.Iz)(e=>(0,E.eU)(r=>r(W)[e]));(0,y.Iz)(e=>(0,b.BV)(r=>n=>n(r({fileKey:e}))));let z=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let i of e)n[i]=r(R.o9k.Query({fileKey:i}));return n}),i.lu),j=(0,y.Iz)(e=>(0,E.eU)(r=>h()(m()(e),e=>r(R.BbB.Query({libraryKey:e})))),i.lu),q=(0,y.Iz)(e=>(0,b.eS)(r=>n=>n(r({fileKey:e}))));function Z(e){return R.eHy.Query(e?{hubFileId:e}:null)}let X=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let i of e)n[i]=r((0,v.he)(R.cmY)({variableCollectionKey:i}));return n}),i.lu),J=(0,y.Iz)(e=>(0,E.eU)(r=>h()(m()(e),e=>r(R.Ipg.Query({libraryKey:e})))),i.lu),Q=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let i of e)n[i]=r(R.jXq.Query({fileKey:i}));return n}),i.lu),ee=(0,y.Iz)(e=>(0,E.eU)(r=>{let n={};for(let i of e)n[i]=r(R.eHy.Query({hubFileId:i}));return n}),i.lu);function et(e){let r=h()(m()(e),()=>I.Qw.disabled());return(0,E.eU)(r)}let er=(0,E.eU)(e=>{let r=e(eg),n=e(D.TG),i=Object.values(r).filter(e=>!(0,A.lR)(e,n)).map(e=>e.key).sort();return e((0,b.a5)(i.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.ey)(r.args.key)]=r.result,e),{})}),en=(0,E.eU)(e=>{let r=e(eg),n=e(D.TG),i=(e(w.JB)?Object.values(r).filter(e=>(0,A.lR)(e,n)):[]).map(e=>e.key).sort().map(e=>({key:e})),a=(0,A.ku)(A.p9,i,e);return"loaded"!==a.status?{}:a.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variable;if(!n)return e;let i=(0,o.ey)(n.key);return{...e,[i]:r.result}},{})}),ei=(0,E.eU)(e=>({...e(er),...e(en)}),T.lQ),ea=(0,O.Pj)(ei,"SYNC_ATOM_USED_LIBRARY_VARIABLES_BY_KEY",{}),eo=(0,E.eU)(e=>{let r=[...new Set(Object.values(e(er)).map(e=>e.data?.variable?.variableCollection.key).filter(a.Vq))].sort();return e((0,b.Ew)(r.map(e=>({key:e})))).reduce((e,r)=>(e[(0,o.yG)(r.args.key)]=r.result,e),{})},T.lQ),es=(0,E.eU)(e=>{let r=[...new Set(Object.values(e(en)).map(e=>e.data?.variable?.variableCollection.key).filter(a.Vq))].sort().map(e=>({key:e})),n=(0,A.ku)(A.nT,r,e);return"loaded"!==n.status?{}:n.data.reduce((e,r)=>{if("loaded"!==r.result.status)return e;let n=r.result.data.variableCollection;if(!n)return e;let i=(0,o.ey)(n.key);return{...e,[i]:r.result}},{})}),el=(0,E.eU)(e=>({...e(eo),...e(es)}),T.lQ),ec=(0,O.Pj)(el,"SYNC_ATOM_USED_LIBRARY_VARIABLE_SETS_BY_KEY",{});(0,E.eU)(e=>{let r=Object.keys(e(K));if(0!==r.length)return r[0]});let ed=(0,E.eU)(e=>Object.values(e(K))),eu=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLE_SETS_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r){let n=m()(r.added.map(P.Rn),e=>e.node_id);return{...e,...n}}{let n={...e};return delete n[r.deleted],n}}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariableSetsInfo()})});let r=(0,N._n)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),em=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_LOCAL_VARIABLES_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(P.kz),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return g()(e,e=>e.node_id&&!n.has(e.node_id))}if("setDeleted"in r)return g()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariablesInfo()})});let r=(0,N.j2)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})(),ep=(0,y.Iz)(e=>(0,E.eU)(r=>r(em)[e]??null)),eh=(0,E.eU)(e=>Object.keys(e(em)).map(r=>e(ep(r))).sort((e,r)=>-(0,S.Ez)(e.sortPosition,r?.sortPosition))),e_=(0,E.eU)(e=>d()(e(eh),e=>e.variableSetId)),eg=(()=>{let e=(0,O.OX)({},"SYNC_ATOM_SUBSCRIBED_VARIABLES_BY_ID"),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(P.ZI),e=>e.node_id)};if("deleted"in r)return g()(e,e=>e.id!==r.deleted);if("setDeleted"in r)return g()(e,e=>e.variableSetId!==r.setDeleted)}return{}});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getSubscribedVariablesInfo()})});let r=(0,N.uE)(r=>{e(r)});return()=>{r(),e(null)}},(0,O.S9)(r,e.reducer)})();(0,y.Iz)(e=>(0,E.eU)(r=>r(eg)[e]??null));let ef=(0,y.Iz)(e=>(0,E.eU)(r=>r(em)[e]??r(eg)[e]??null));function eE(e,r){let n=C.Y5.isReady(),i=new Map(Object.entries(r)),a=n&&e?s.CWU.getVariableResolvedValue(e,i):null,o=(0,E.eU)(a);return e&&(o.onMount=a=>{n||C.Y5.onReady().then(()=>{a(s.CWU.getVariableResolvedValue(e,i))});let o=Object.entries(r),c=o.length>0?o.map((e,r)=>`${e}${r}`).join(","):l.AD,d=(0,N.RW)(e,c,e=>{a(e[c]??null)});return()=>{d(),a(null)}}),o}let ey=(()=>{let e=(0,E.eU)({}),r=(0,y.FZ)(e,(e,r)=>{if(r){if("added"in r)return{...e,...m()(r.added.map(P.Vk),e=>e.node_id)};if("deleted"in r){let n=new Set(r.deleted);return g()(e,e=>e.node_id&&!n.has(e.node_id))}return{}}return e});return r.onMount=e=>{C.Y5.onReady().then(()=>{e({added:s.CWU.getLocalVariableOverridesInfo()})});let r=(0,N.xb)(r=>{e(r)});return()=>{r(),e(null)}},r})(),eb=(0,y.Iz)(e=>(0,E.eU)(r=>{let n=Object.values(r(ey)).filter(r=>r.variableSetId===e);return m()(n,e=>e.rootVariableKey)})),ev=(0,E.eU)(e=>{if(!(0,f.kc)().ds_variables_resolution_v2||!(0,f.kc)().ds_variables_bump_set_versions)return!1;let r=e(ed),n=e(H);return!!r.some(e=>(0,a.uy)(n[e.keyForPublish]))})},635736:(e,r,n)=>{n.d(r,{ye:()=>eb});var i=n(411855),a=n(188507),o=n(561546),s=n(821910),l=n(966664),c=n(602628),d=n(797613),u=n(269568),m=n(288006),p=n(140838),h=n(260906);n(922827),n(340818);var _=n(629019),g=n.n(_),f=n(126049),E=n(395096),y=n(776250),b=n(91408),v=n(939683),I=n(820286),T=n(358145),S=n(189430),w=n(966712),A=n(418956),C=n(860601),N=n(523398),L=n(153234),O=n(286640),R=n(763658),P=n(572206),D=n(32863),k=n(46481),M=n(154254),F=n(939863),x=n(169231),U=n(617453);n(869156);var B=n(844053),V=n(318812),G=n(6024),H=n(335682),K=n(860178),W=n(100197),$=n(945020),Y=n(173454),z=n(237870),j=n(922358),q=n(545317),Z=n(101177),X=n(282263),J=n(991052),Q=n(939384),ee=n(859703),et=n(746806),er=n(337676),en=n(273289),ei=n(228445),ea=n(980984),eo=n(641647),es=n(184605),el=n(963133),ec=n(866215),ed=n(266306),eu=n(999748),em=n(84013);let ep="variables-modal-width",eh="variables-modal-height",e_="variables-modal-position",eg=(0,b.jz)(eu.gZ),ef=(0,b.jz)(eu.Ld),eE=(0,b.jz)(eu.Cg),ey=(0,b.jz)(eu.NE),eb=(0,z.Ju)(function(){var e,r,n;let _=(0,G.n)({type:eb}),z=(0,a.wA)(),ev=(0,W.J2)((0,U.UK)().showGuids),eI=(0,a.d4)(e=>e.variablePickerShown),eT=(0,a.d4)(e=>e.modalShown?.type===Z.eK.type),eS=(0,A.md)(ee.q9),{state:{currentVariableSet:ew,renamingModeGUID:eA,renamingVariableID:eC,selectedGroupNames:eN,selectedVariableIDs:eL,variableGroupList:eO,variableList:eR,variableOverrides:eP,isSidebarOpen:eD},actions:ek}=(0,en.D)(en.u.WRITEABLE),eM=(0,a.d4)(B.c),eF=function(){let e=(0,K.iZ)(),r=(0,H.q5)();return{org_id:r?.parentOrgId??void 0,user_id:e?.id}}(),{showing:ex,show:eU,hide:eB,data:eV}=(0,V.BK)("variables-modal-context-menu"),eG=(0,v.U)(),eH=(0,i.useCallback)((e,r,n,i)=>{eT&&ek.toggleEditVariableModal(null);let a=eL;eL.includes(e)||(ek.setSelectedVariableIDs([e]),a=[e]),eU({data:{position:{left:n.clientX,top:n.clientY},modeID:r,variables:(0,o.RP)(a,e=>eR.find(r=>r.node_id===e)),cellElement:n.currentTarget,groupNames:[],onCreateExpression:i}}),eG("variable_action_menu_opened",{variable_id:e,field:r?"value":"name",collection_id:ew?.node_id,...eF}),n.preventDefault()},[eT,eL,eU,eG,ew?.node_id,eF,ek,eR]),eK=(0,i.useCallback)((e,r)=>{eU({data:{position:{left:r.clientX,top:r.clientY},groupNames:eN,variables:[],cellElement:r.currentTarget}}),r.preventDefault()},[eN,eU]);(0,i.useEffect)(()=>(0,y.sx)("ds_variables_modal_opened",eM),[eM]);let eW=e=>eL.length>0&&e?.key==="Enter"&&!!e.shiftKey&&(ek.duplicateVariables?.(),!0),e$=(0,w.kc)().ds_variables_modal_fpl_migration,eY=function(e,r,n){let[a,o]=(0,i.useState)(null),s=(0,T.ZC)(e);return(0,i.useEffect)(()=>{let n=null!==a&&Date.now()-a<250;e.length>(s?.length??0)&&n&&(r(e.filter(e=>!s?.includes(e)).map(e=>e.node_id)),o(null))},[e,s,a,r]),(0,i.useCallback)(e=>{o(Date.now()),n?.(e)},[n,o])}(eR,ek.setSelectedVariableIDs,ek.pasteClipboardVariables),ez=(0,i.useCallback)((e,r)=>{r===$.zy.COPY&&(ek.copySelectedVariables?.({action:"keyboard_shortcut",...eF}),e.accept(),e.shouldPropagate=!1),r===$.zy.PASTE&&(eY({action:"keyboard_shortcut",...eF}),e.accept(),e.shouldPropagate=!1)},[ek,eY,eF]),ej=L.fo("variablesModal","keydown",e=>{eW(e.event)&&(e.accept(),eW(e))}),eq=i.useRef(null),eZ=(0,i.useRef)(null),eX=(0,i.useRef)(null),eJ=function({hasVariables:e=!0,isSidebarOpen:r=!1}={}){let n=(0,O.Q_)(),a=(0,q.P)(),o=(0,i.useMemo)(()=>new P.Mi(a+(0,b.jz)(eu.gZ),(0,b.jz)(eu.Ld)+(0,b.jz)(eu.gZ)),[a]),[{windowInnerHeight:l,windowInnerWidth:c}]=(0,E.A)((0,S.l)(),300,{equalityFn:s.c2}),[d]=(0,i.useState)(()=>{let e=n?.getItem(e_);if(!e)return null;let i=JSON.parse(e);return i.x+(r?ey:0)>c||i.y>l?(n?.removeItem(e_),n?.removeItem(ep),n?.removeItem(eh),null):new P.Mi(i.x,i.y)}),[u]=(0,i.useState)(()=>{let e=Number(n?.getItem(ep));return e&&Number.isFinite(e)?e:642}),[m]=(0,i.useState)(()=>{let e=Number(n?.getItem(eh));return e&&Number.isFinite(e)?e:380});return{initialConstraints:d?{x:"left",y:"top"}:{x:"right",y:"top"},initialPosition:d??o,maxWidth:c-2*eg,maxHeight:l-ef-2*eg,minWidth:400,minHeight:e?180:300,initialWidth:u,initialHeight:m}}({hasVariables:eR.length>0,isSidebarOpen:eD}),eQ=(0,q.P)(),e0=(0,O.Q_)(),e1=c.ox(),e2=(0,i.useCallback)(({width:e,height:r})=>{e0?.setItem(ep,String(e)),e0?.setItem(eh,String(r-eE))},[e0]),e5=(0,i.useCallback)(e=>{e0?.setItem(e_,JSON.stringify(e))},[e0]),[e3,e6]=(0,i.useState)(null),e8=(0,i.useCallback)(()=>{let e={position:new P.Mi(eg,eg+ef),width:window.innerWidth-2*eg,height:window.innerHeight-2*eg-ef};function r(r){let n={...r,...e};return(0,s.c2)(n,r)?(e6(null),e3):(e6(r),n)}if(e$){let e=r({constraints:{x:"left",y:"top"},height:e1.size.y,position:new P.Mi(e1.position.x,e1.position.y),width:e1.size.x});e&&(e1.setSize(new P.Mi(e.width,e.height)),e1.setPosition(e.position))}else{let e=eZ.current;e&&e.setTransform(r)}},[e$,e3,e1]),e4=(0,i.useCallback)(e=>{e.target===e.currentTarget&&e8()},[e8]);(0,i.useEffect)(()=>{let e=e=>{let{target:r}=e,n=e$?eX.current:eZ.current?.getEl();r&&n?.contains(r)?eq.current?.focus():eq.current?.blur()};return document.body.addEventListener("mouseup",e),()=>document.body.removeEventListener("mouseup",e)},[e$]);let e9=(0,l.Vq)(ew),e7=(0,Q.al)(),[te,tt]=i.useState(""),tr=(0,i.useCallback)(e=>{tt((e??"").trim())},[]),tn=(0,f.A)(tr,200),ti=(0,i.useCallback)(()=>tr(""),[tr]),ta=(0,i.useCallback)(e=>""===e?ti():tn(e),[ti,tn]),to=(0,i.useCallback)(()=>{!(0,w.kc)().fpl_window&&eI.isShown&&z((0,x.B)()),eT&&ek.toggleEditVariableModal(null)},[ek,z,eT,eI]),ts=(0,i.useCallback)(()=>{ek.copySelectedVariables?.({action:"action_menu",...eF})},[ek,eF]),tl=(0,i.useCallback)(()=>{eY({action:"action_menu",...eF})},[eY,eF]),tc=i.createElement("div",{className:ed.DD,onDoubleClick:e4},!e9&&i.createElement("div",{className:M.cx.ml8.fontSemiBold.font11.fontUi.$},(0,F.tx)("variables.authoring_modal.title")),e9&&i.createElement("div",{className:g()({[ed.Cz]:!0,[ed.ho]:eD})},i.createElement(d.f,{recordingKey:L.Pt("variablesModal","toggleSidebar"),"aria-label":(0,F.t)("variables.authoring_modal.toggle_sidebar"),onIcon:i.createElement(k.U,{svg:em.A},i.createElement(p.C,null)),offIcon:i.createElement(k.U,{svg:em.A},i.createElement(h.O,null)),checked:eD,onChange:e=>ek.setIsSidebarOpen(e)})),(0,w.kc)().ds_variables_modal_filter&&i.createElement(D.IW,{focusOnMount:!1,query:te,className:ed.ON,placeholder:(0,F.t)("variables.authoring_modal.filter"),clearSearch:ti,onChange:ta}),e7&&i.createElement("div",{className:ed.ED},i.createElement(ei.G,null))),td=i.createElement(i.Fragment,null,i.createElement(I.hh,null,i.createElement("div",{className:ed.kL,style:{"--propertiesPanelWidth":`${eQ}px`},"data-testid":"variables-modal-container"},eD&&ew&&i.createElement(es.z,{groups:eO,onChangeVariableSet:ek.setCurrentVariableSetID,onContextMenu:eK,onCreateVariableSet:ek.createVariableSet,onCreateVariableSetExtension:ek.createVariableSetExtension,onDeleteVariableSet:ek.deleteVariableSet,onMoveSelectedGroupsToGroup:ek.moveSelectedGroupsToGroup,onMoveVariableToGroup:ek.moveVariableToGroup,onRenameGroup:ek.renameGroup,onRenameVariableSet:ek.renameVariableSet,onMoveGroups:ek.moveGroups,recordingKey:"variablesModal",selectedGroupNames:eN,selectedVariableIDs:eL,setSelectedGroupNames:ek.setSelectedGroupNames,variableSet:ew,isShowingGuids:ev}),i.createElement("div",{className:ed.ok},eS&&i.createElement(er.P,null),0!==eR.length&&ew?i.createElement(R.k,{name:"variables_modal_table"},i.createElement(el.f,{groups:eO,key:eN.join("-"),onCreateMode:ek.createMode,onDeleteMode:ek.deleteMode,onDuplicateMode:ek.duplicateMode,onMoveVariableToGroup:ek.moveVariableToGroup,onRenameGroup:ek.renameGroup,onRenameMode:ek.renameMode,onRenameVariable:ek.renameVariable,onReorderVariables:ek.reorderVariables,onSetModeAsDefault:ek.setModeAsDefault,onVariableContextMenu:eH,recordingKey:"variablesModal",renamingModeGUID:eA,renamingVariableID:eC,selectedGroupNames:eN,selectedVariableIDs:eL,setRenamingModeGUID:ek.setRenamingModeGUID,setRenamingVariableID:ek.setRenamingVariableID,setSelectedVariableIDs:ek.setSelectedVariableIDs,variableSet:ew,isShowingGuids:ev,toggleEditVariableModal:ek.toggleEditVariableModal,setVariableValueForMode:ek.setVariableValueForMode,filterString:(0,w.kc)().ds_variables_modal_filter?te:""}),ek.setRenamingVariableID&&i.createElement("div",{className:ed.qr},i.createElement(eo.fr,{recordingKey:"variablesModal",groups:eO,selectedGroup:eN[0],setRenamingVariableID:ek.setRenamingVariableID,variableSetID:ew.node_id,selectedVariableIDs:eL,setSelectedVariableID:ek.setSelectedVariableIDs}))):i.createElement(ec.C,{recordingKey:"variablesModal",groups:eO,selectedGroup:eN[0],setRenamingVariableID:ek.setRenamingVariableID,setSelectedVariableID:ek.setSelectedVariableIDs,variableSetID:ew?.node_id}),(0,w.kc)().ds_variables_extended_sets&&ew&&(0,Y.GI)(ew)?i.createElement("pre",{className:M.cx.maxH200.overflowAuto.$},JSON.stringify(eP,void 0,2)):null))),ex&&eV&&i.createElement(ea.Q,{allVariables:eR,contextMenuData:eV,hasGroups:eO.length>1,hideContextMenu:eB,onCreateGroup:ek.createGroup,onUngroup:ek.ungroup,onDuplicateVariables:ek.duplicateVariables,onCopyVariables:ts,onPasteVariables:tl,onDeleteEmptyGroup:C.lQ,onDeleteVariables:ek.deleteVariables,onSetAllVariablesSelected:C.lQ,toggleEditVariableModal:ek.toggleEditVariableModal,recordingKey:L.Pt("variablesModal","contextMenuDropdown")}),(0,w.kc)().asset_binding_picker?i.createElement(J.Y,null):i.createElement(X.Q8,null));return i.createElement(R.k,{name:"variables_modal"},i.createElement(j.vL,{handleKeyDown:ej,handleClipboard:ez,ref:eq,name:"variables-authoring-modal",focusOnMount:!0},e$?i.createElement(u._L,{defaultWidth:eJ.initialWidth,defaultHeight:eJ.initialHeight,defaultPosition:(e=eJ.initialConstraints,r=eJ.initialPosition,n=eJ.initialWidth,"right"===e.x&&"top"===e.y?{right:r.x+n,top:r.y}:{left:r.x,top:r.y}),htmlAttributes:{onClick:to,onCopy:e=>{eX.current===document.activeElement&&(ek.copySelectedVariables?.({action:"keyboard_shortcut",...eF}),e.stopPropagation())},onPaste:e=>{eY({action:"keyboard_shortcut",...eF}),e.stopPropagation()},onKeyDown:e=>ej(new N.p(e.nativeEvent))},maxHeight:eJ.maxHeight,ref:eX,manager:e1,onClose:_,onTransform:({size:e,position:r})=>{e5(new P.Mi(r.x,r.y)),e&&e2({width:e.x,height:e.y})},recordingKey:"variablesModal"},i.createElement(m.vo,null,i.createElement(m.Y9,null,tc),i.createElement(m.nB,{noPadding:!0,noScroll:!0},i.createElement("div",{style:{height:"100%"}},td)))):i.createElement(et.vx,{allowAutoExpanding:!1,allowResizeHeight:!0,allowResizeWidth:!0,fullFrame:!0,initialConstraints:eJ.initialConstraints,initialHeight:eJ.initialHeight,initialPosition:eJ.initialPosition,initialWidth:eJ.initialWidth,maxHeight:eJ.maxHeight,maxWidth:eJ.maxWidth,minHeight:eJ.minHeight,minWidth:eJ.minWidth,onDragEnd:e5,onEdgeDoubleClick:e8,onResize:e2,ref:eZ,contentContainerClassName:ed.yl,onClick:to,onKeyDown:ej,onClose:_,recordingKey:"variablesModal",title:tc},td)))},"VariablesModal",z.ZU.YES)},15270:(e,r,n)=>{n.d(r,{B9:()=>N,Ex:()=>b,F$:()=>w,GC:()=>function e(r){let n=[...r.variables];for(let i of r.subgroups)n.push(...e(i));return n},Lo:()=>g,Od:()=>v,Pf:()=>A,Pw:()=>y,Qo:()=>S,US:()=>C,Wc:()=>_,Wx:()=>I,ZR:()=>R,cv:()=>T,hF:()=>L,ky:()=>O,nm:()=>h,om:()=>f,qQ:()=>D,rN:()=>k,x9:()=>M,yh:()=>F});var i=n(922827),a=n(184058),o=n.n(a),s=n(418956),l=n(364898),c=n(237929),d=n(112162),u=n(1715),m=n(654678),p=n(999748);let h="Mode 1";function _(e,r,n=""){let i=e.map(e=>e.name),a=(0,u.F)(r).name;return(0,d.g)(n+a,i)}function g(e,r=""){return E(e,r,e=>e.name)}function f(e,r=""){return E(e,r,e=>e)}function E(e,r="",n){let i=r.slice(0,-1).split("/"),a=1===i.length?"":i.slice(0,-1).join("/")+"/",o=Array.from(new Set(e.map(n).filter(e=>e.startsWith(a)&&e.replace(a,"").includes("/")).map(e=>e.replace(a,"").split("/")[0])));return a+(0,d.g)(i[i.length-1].replace(/\d+$/,"").trim(),o)+"/"}function y(e){return function e(r){let n=[r];for(let i of r.subgroups.sort(P))n.push(...e(i));return n}(function(e){let r={"":{name:"",subgroups:[],variables:[]}};for(let n of e.sort((e,r)=>-(0,l.Ez)(e.sortPosition,r.sortPosition))){let e=A(n.name);r.hasOwnProperty(e)||(r[e]={name:e,subgroups:[],variables:[]}),r[e].variables.push(n)}for(let e of Object.keys(r)){let n=e.split("/").slice(0,-1);for(let e=1;e<n.length;e++){let i=n.slice(0,e).join("/")+"/";r.hasOwnProperty(i)||(r[i]={name:i,subgroups:[],variables:[]})}}for(let[e,n]of Object.entries(r))""!==e&&r[I(e)].subgroups.push(n);return r[""]}(e))}function b(e,r){let n=[];for(let i of e)r.includes(i.name)&&n.push(...function e(r){let n=[r.name];for(let i of r.subgroups)n.push(...e(i));return n}(i));return o()(n)}function v(e){return 0===e.variables.length?v(e.subgroups[0]):e.variables[0]}function I(e){if(0===e.length)return"";let r=e.split("/").slice(0,-1);return 1===r.length?"":r.slice(0,-1).join("/")+"/"}function T(e,r){return null===r?0:e.filter(e=>e.name.startsWith(r)).length}function S(e,r){return null===r?[]:e.filter(e=>e.name.startsWith(r))}function w(e,r,n){return S(e,r).every(e=>i.CWU.renameVariable(e.node_id,(0,c.rh)(n+"/"+L(e,r))))}function A(e){return e.includes("/")?e.split("/").slice(0,-1).join("/")+"/":""}function C(e,r){let n=e.split("/");return(0,c.rh)(r+n[n.length-1])}function N(e){let r=e.split("/");return r[r.length-1]}function L(e,r){return e.name.replace(r,"")}function O(e){let r=e.slice(0,-1).split("/");return r[r.length-1]}function R(e,r){return I(e)+r+"/"}function P(e,r){let n=v(e).sortPosition,i=v(r).sortPosition;return-(0,l.Ez)(n,i)}function D(e,r,n,a){let o,s;if(r){let[n,a]=r;i.CWU.insertVariableBetween(e,n,a);return}if(0===a.length)return;let l=function(e,r){if(""===r)return[];let n=I(r),i=(n.match(RegExp("/","g"))||[]).length+1;return e.filter(e=>e.name.startsWith(n)&&(e.name.match(RegExp("/","g"))||[]).length===i)}(a,n),c=l.findIndex(e=>e.name===n);if(-1===c)return;let d=l[c];d&&d.variables.length>=1?o=d.variables[d.variables.length-1]:c>0&&(o=function e(r){return 0===r.variables.length?e(r.subgroups[r.subgroups.length-1]):r.variables[r.variables.length-1]}(l[c-1])),c<l.length-1&&(s=v(l[c+1])),i.CWU.insertVariableBetween(e,o?.node_id||"",s?.node_id||"")}function k(e,r){return r?e:null}function M(){let e=(0,s.md)(m.X);return e.nameColumnWidth?`${e.nameColumnWidth}px`:p.U3}function F(e){let r=(0,s.md)(m.X);return e.map((n,i)=>{if(i===e.length-1)return`minmax(${p.SG}, 1fr)`;let a=r.valueColumnWidths.get(n.id);return a?`${a}px`:p.SG}).join(" ")}},866215:(e,r,n)=>{n.d(r,{C:()=>g});var i=n(411855),a=n(463033),o=n(397863),s=n(153234),l=n(163023),c=n(46481),d=n(939863),u=n(318812),m=n(641647),p=n(460765),h=n(501191),_=n(177646);function g({groups:e,recordingKey:r,selectedGroup:n,setRenamingVariableID:g,variableSetID:f,setSelectedVariableID:E}){let y=i.useRef(null),{showing:b,toggle:v,hide:I}=(0,u.BK)(m.oU);return i.createElement("div",{className:p.zr},i.createElement(l.B,{className:p.Kk,svg:_.A}),i.createElement("div",{className:p.Qq},(0,d.t)("variables.authoring_modal.null_state_text")),g&&i.createElement(a.$n,{iconPrefix:i.createElement(c.U,{svg:h.A},i.createElement(o.x,null)),"aria-label":(0,d.t)("variables.authoring_modal.create_variable_button_label"),ref:y,variant:"secondary",onClick:()=>v(),recordingKey:s.Pt(r,"createVariableButton")},(0,d.t)("variables.authoring_modal.table.create_variable")),g&&b&&y.current&&i.createElement(m.mw,{targetRect:y.current.getBoundingClientRect(),variableSetID:f??null,selectedGroup:n,groups:e,recordingKey:r,setRenamingVariableID:g,onClose:I,setSelectedVariableID:E,insertVariableBetweenIDs:null}))}},832568:(e,r,n)=>{n.d(r,{iG:()=>m,vt:()=>u});var i=n(188507),a=n(138020),o=n(99506),s=n(243987),l=n(556261),c=n(56099),d=n(984968);function u(e){let r={component:"useIsTeamLockedDueToStarterLimits",migrationGroup:c.L.GROUP_3},n=(0,l.NP)(r),u=(0,d.cD)(),m=(0,i.d4)(e=>!!u&&(0,s.oc)(u,e)),p=(0,l.FR)({component:"useIsTeamLockedDueToStarterLimits",migrationGroup:c.L.GROUP_3}),h=(0,l.yN)({component:"useIsTeamLockedDueToStarterLimits",migrationGroup:c.L.GROUP_3,legacy:(e,r)=>e?.student_team_state===o.kU.STUDENT_TEAM_CURRENT||e?.student_team_state===o.kU.STUDENT_TEAM_EXPIRED,migrated:(e,r)=>(0,a.oA)(r?.studentTeamState)===o.kU.STUDENT_TEAM_CURRENT||(0,a.oA)(r?.studentTeamState)===o.kU.STUDENT_TEAM_EXPIRED});return!!n&&(!n||n===e)&&!!m&&!p&&!h}function m(e){if(!e)return!1;let r=!!(0,s.XX)(e),n=e.studentTeamState===o.kU.STUDENT_TEAM_CURRENT||e.studentTeamState===o.kU.STUDENT_TEAM_EXPIRED;return r||n}},828702:(e,r,n)=>{n.d(r,{t:()=>C});var i=n(411855),a=n(188507),o=n(201140),s=n(902634),l=n(915440),c=n(711525),d=n(768137),u=n(799569),m=n(154254),p=n(939863),h=n(501114),_=n(175290),g=n(662275),f=n(995852),E=n(349410),y=n(101505),b=n(672517),v=n(279453),I=n(243987),T=n(237870),S=n(474742),w=n(777484);function A(e){let r=(0,a.wA)(),n=(0,l.Rs)(v.Aqu,{teamId:e.teamId}),g=(0,E.Gm)();if("loaded"!==n.status||n.data.team?.stripeCustomerId.status!=="loaded")return null;let b=!!(0,c.oA)(n.data.team?.stripeCustomerId),T=[],S=(0,c.oA)(n.data.team?.allProjects),A=S?.length??0,C=S?.filter(e=>e.isViewOnly).length??0,N=S?.filter(e=>e.isInviteOnly).length??0,L=n.data.team?.teamFileCounts?.designFileCount??0,O=n.data.team?.teamFileCounts?.whiteboardFileCount??0,R=parseInt(n.data.team?.teamFileCounts?.slideFileCount??"0",10),P=(e,r,n)=>{e>r&&T.push({limitExceededType:n,limitExceededCount:e-r})};if(P(L,I.WW,"design_file_count"),P(O,I.WW,"whiteboard_file_count"),g&&P(R,I.WW,"slides_file_count"),P(A,I.Wf,"total_project_count"),A<=I.Wf&&(P(C,I.h,"view_only_project_count"),P(N,I.PX,"invite_only_project_count")),0===T.length)return null;let D=e.canEditTeam?(0,p.tx)("locked_team.card.title"):(0,p.tx)("locked_team.card.title_viewer"),k=e.canEditTeam?b?(0,p.tx)("locked_team.card.editor_previously_paid_description"):(0,p.tx)("locked_team.card.editor_previously_on_trial_description"):(0,p.tx)("locked_team.card.view_only_description"),M=e.canEditTeam?b?(0,p.tx)("locked_team.card.editor_previously_paid_cta"):(0,p.tx)("locked_team.card.editor_previously_on_trial_cta"):null,F=e=>{switch(e.limitExceededType){case"design_file_count":return(0,p.tx)("locked_team.card.move_figma_design_files",{numDesignFiles:e.limitExceededCount});case"whiteboard_file_count":return(0,p.tx)("locked_team.card.move_figjam_boards",{numFigjamFiles:e.limitExceededCount});case"slides_file_count":return(0,p.tx)("locked_team.card.move_figma_slides_files",{numSlidesFiles:e.limitExceededCount});case"total_project_count":return(0,p.tx)("locked_team.card.move_projects",{numProjects:e.limitExceededCount});case"view_only_project_count":return(0,p.tx)("locked_team.card.change_permissions_from_view_only",{numViewOnlyProjects:e.limitExceededCount});case"invite_only_project_count":return(0,p.tx)("locked_team.card.change_permissions_from_invite_only",{numInviteOnlyProjects:e.limitExceededCount});default:throw Error("Not a valid starter plan limit")}};return i.createElement(_.Y,{direction:"vertical",padding:e.noPaddingOrBorder?0:20,spacing:24,width:e.width,cornerRadius:e.noPaddingOrBorder?void 0:8,strokeWidth:e.noPaddingOrBorder?void 0:1,strokeColor:"default",height:"hug-contents"},i.createElement("div",{className:m.cx.flex.justifyBetween.wFull.$},i.createElement("div",{className:m.cx.flex.itemsCenter.justifyCenter.w32.h32.bRadius5.colorBgWarning.$},i.createElement(o.s,{className:w.K})),!!e.onClose&&i.createElement(u.Jn,{onClick:e.onClose})),i.createElement("div",{className:m.cx.font14.fontSemiBold.lh24.$},D),i.createElement("div",{className:m.cx.font13.lh24.$},k),e.canEditTeam&&i.createElement("div",{className:m.cx.wFull.bb1.bSolid.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"list"},T.map(e=>i.createElement("div",{key:e.limitExceededType,className:m.cx.flex.itemsCenter.gap10.wFull.bt1.bSolid.pb12.pt12.fontMedium.$,style:h.sx.add({borderColor:"var(--color-bg-secondary)"}).$,role:"listitem"},i.createElement(s.U,{className:m.cx.minW24.$}),i.createElement("div",{className:m.cx.font11.lh16.$},F(e))))),!!M&&i.createElement("div",{className:m.cx.flex.justifyEnd.wFull.$},i.createElement(d.vd,{onClick:()=>r(f.WX({teamId:e.teamId})),className:m.cx.if(e.fullWidthButton,m.cx.maxWFull.wFull).hAuto.lh16.preWrap.pt8.pb8.$,trackingProperties:{teamId:e.teamId,trackingDescriptor:b?y.c.UPGRADE_TO_PROFESSIONAL:y.c.REACTIVATE_YOUR_PROFESSIONAL_PLAN}},M)))}let C=(0,T.Ju)(function(e){let r=(0,a.wA)();return i.createElement(S.aF,{size:500},i.createElement(b.fu,{name:"Locked State Team Overview Modal",properties:{teamId:e.teamId}},i.createElement(A,{...e,width:452,onClose:()=>r(g.Lo()),noPaddingOrBorder:!0})))},"LockedStateOverviewModal")},201188:(e,r,n)=>{n.d(r,{c:()=>R,s:()=>M});var i=n(411855),a=n(188507),o=n(320063),s=n(966712),l=n(563706),c=n(799569),d=n(163023),u=n(939863),m=n(662275),p=n(860178),h=n(555328),_=n(237870),g=n(474742),f=n(849867),E=n(996773),y=n(548593),b=n(657050),v=n(852512),I=n(894444),T=n(498139),S=n(123569),w=n(450068),A=n(950702),C=n(626208),N=n(372464),L=n(647173);let O=(0,y.rw)();var R=(e=>(e.ACCOUNT="ACCOUNT",e.COMMUNITY="COMMUNITY",e.NOTIFICATIONS="NOTIFICATIONS",e.SESSIONS="SESSIONS",e.SECURITY="SECURITY",e))(R||{});function P(e){let r=(0,s.kc)().user_settings_tab,n=new Map([["ACCOUNT",(0,u.t)("settings.account_setting.account")],["COMMUNITY",(0,u.t)("settings.account_setting.community")],["NOTIFICATIONS",(0,u.t)("settings.account_setting.notifications")]]);r?n.set("SECURITY",(0,u.t)("settings.account_setting.security")):n.set("SESSIONS",(0,u.t)("settings.account_setting.sessions"));let a=i.useRef(null),{setToolbarWidth:o}=e;i.useEffect(()=>{if(a){let e=a.current?.offsetWidth;e&&o(e)}},[o]);let{accountModalSubViewData:l,setAccountModalSubViewData:m}=(0,b.AK)(),p=[];return(l.properties.purchasePageType?p.push(i.createElement(O,{tab:b.U7.PURCHASES,mobileNavTabTitle:(0,u.t)("settings.account_setting.purchases"),selectedTab:e.selectedTab,key:b.U7.PURCHASES,onClick:()=>m({...l,properties:{purchasePageType:null}})},i.createElement("div",{className:A.Gv},i.createElement("span",{className:A.j2},i.createElement(d.B,{svg:L.A})),function(e){if(e.activeSubView===b.U7.PURCHASES)return e.properties.purchasePageType===h.po.ACTIVE?(0,u.t)("settings.account_setting.purchases"):(0,u.t)("settings.account_setting.inactive")}(l)))):n.forEach((r,n)=>{p.push(i.createElement(O,{tab:n,mobileNavTabTitle:r,selectedTab:e.selectedTab,key:n,onClick:()=>e.setTab(n)},r))}),e.isMobile)?i.createElement(f.F,{tabs:p,dispatch:e.dispatch,width:"100vw"}):i.createElement("div",{className:N.k_,style:{minWidth:e.contentWidth},ref:a},i.createElement(E.i,{containerClassName:`${N.ef} ${A.Vq}`,tabs:p}),i.createElement(c.s_,{dispatch:e.dispatch,className:A.b}))}P.displayName="AccountToolBar";let D={ACCOUNT:function(){return i.createElement(w.g,null)},COMMUNITY:v.C,NOTIFICATIONS:function(){return(0,p.iZ)()?i.createElement(I.v,null):null},SESSIONS:S.p,SECURITY:T.m},k="ACCOUNT_SETTINGS_MODAL",M=(0,_.Ju)(function(e){let r=(0,a.wA)(),n=(0,p.iZ)(),s=i.useRef(null),[c,d]=i.useState(-1),[u,h]=i.useState({activeSubView:null,properties:{}}),_=i.useMemo(()=>({accountModalSubViewData:u,setAccountModalSubViewData:h}),[u,h]),f=(0,a.d4)(e=>"recentsAndSharing"===e.selectedView.view?e.selectedView.accountModalTabSection:"");if((0,o.h)(()=>{if(!f)return;let e=document.getElementById(f);e?.scrollIntoView({behavior:"smooth",block:"start"})}),!n)return null;let E=D[e.tab],y=l.rr,v=y?window.innerWidth:Math.min(.7*window.innerWidth,650),I=y?window.innerWidth:Math.max(v,c);return i.createElement(g.aF,{popStack:!0,size:I,height:y?window.innerHeight:.8*window.innerHeight,className:y?C.pW:C.Se,modalRef:s},i.createElement(b.Tk.Provider,{value:_},i.createElement(P,{selectedTab:e.tab,setTab:e=>{r(m.hm({type:k,data:{tab:e}}));let n=s.current;n&&(n.scrollTop=0)},dispatch:r,isMobile:y,contentWidth:v,setToolbarWidth:d}),i.createElement(E,null)))},k,_.ZU.YES)},319285:(e,r,n)=>{n(411855),n(96328),n(163023),n(939863),n(869963),n(466636),n(555328),n(498606)},774620:(e,r,n)=>{n.d(r,{K:()=>T});var i=n(411855),a=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(343887),d=n(463033),u=n(561438),m=n(563706),p=n(46481),h=n(939863),_=n(175290),g=n(809840),f=n(970516),E=n(662275),y=n(4564),b=n(498606),v=n(237870),I=n(552899);let T=(0,v.Ju)(function(e){let{localPlugin:r}=e,n=(0,a.wA)(),v=o.hS({open:e.open,onClose:e.onClose}),{error:T}=r;if(!T)return null;let S=(0,y.M)(),w=!!S?.isCompatibleWith({desktopVersion:80}),A=m.Ay.mac?(0,h.tx)("universal_insert.show_in_finder"):(0,h.tx)("universal_insert.show_in_explorer");return i.createElement(s.bL,{manager:v,width:"md"},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,h.t)("universal_insert.manifest_error_title"))),i.createElement(l.nB,null,i.createElement(_.Y,{direction:"horizontal",horizontalAlignItems:"space-between",width:"fill-parent",verticalAlignItems:"start"},i.createElement(_.Y,{backgroundColor:"secondary",padding:4,width:"fill-parent",cornerRadius:3},i.createElement(g.E,{color:"secondary",fontSize:13,fontFamily:"monospace"},T.text)),i.createElement(c.K,{onClick:()=>{n(f.lW({stringToCopy:T.text}))},"aria-label":(0,h.t)("inspect_panel.copy"),htmlAttributes:{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":(0,h.t)("inspect_panel.copy")}},i.createElement(p.U,{svg:I.A},i.createElement(u.a,null))))),i.createElement(l.wi,null,i.createElement(l.jk,null,i.createElement(d.$n,{onClick:()=>n(E.Lo()),variant:"secondary"},(0,h.tx)("universal_insert.cancel")),i.createElement(d.$n,{onClick:()=>{w?S?.openExtensionManifest(r.localFileId):S?.openExtensionDirectory(r.localFileId)},variant:"primary"},w?(0,h.tx)("universal_insert.edit_manifest"):A)))))},"DevelopmentResourceErrorModal")},33876:(e,r,n)=>{n.d(r,{A:()=>p});var i=n(411855),a=n(188507),o=n(395771),s=n(154254),l=n(939863),c=n(809840),d=n(71425),u=n(884484),m=n(162506);function p({localResource:e,publishedResource:r}){let{error:n,localFilePath:a}=e||{},s=(0,u.Pt)(n?.type,e);if(!e&&r)return i.createElement(_,{resource:r});if(!e||null==a)return null;if(!n)return i.createElement(o.R,{className:m.cV,text:a.replace("/manifest.json","")});if(!s)return null;let{action:l,msg:d,buttonText:p}=s;return i.createElement(i.Fragment,null,i.createElement(c.E,{color:"danger"},d),i.createElement(h,{onClick:l,isError:!0},p))}function h({children:e,onClick:r,isError:n}){return i.createElement("button",{onClick:e=>{e.stopPropagation(),r()},className:s.cx.underline.bgTransparent.with({colorTextDanger:n,colorTextSecondary:!n}).$},e)}function _({resource:e}){let r=(0,a.wA)();return i.createElement("div",{className:m.cV},i.createElement(h,{onClick:()=>{r((0,d.JZ)({resourceType:e.is_widget?"widget":"plugin"}))}},i.createElement(c.E,null,(0,l.tx)("universal_insert.locate_local_version_text"))))}},927206:(e,r,n)=>{n.d(r,{ur:()=>p,xY:()=>h});var i=n(411855),a=n(188507);n(629019),n(946689);var o=n(163023),s=n(939863),l=n(376441),c=n(498606),d=n(376272),u=n(471174),m=(e=>(e.AUTO="auto",e.CONSTRAINED="constrained",e))(m||{});function p(){let e=(0,a.wA)(),r=i.useCallback(r=>{r.stopPropagation(),e(l.v({}))},[e]);return i.createElement("button",{className:d.qS,onClick:r},(0,s.tx)("community.buyer.update_payment"))}function h(){return i.createElement("div",{className:d.QW,"data-tooltip-type":c.Ib.TEXT,"data-tooltip":(0,s.t)("community.buyer.update_payment_info_to_retain_access")},i.createElement(o.B,{svg:u.A}))}},816460:(e,r,n)=>{n.d(r,{E0:()=>o,wR:()=>s});var i=n(91408);n(939863),n(231472);var a=n(837746);(0,i.hG)(a.BuT),(0,i.hG)(a.yUQ),(0,i.hG)(a.XaD),(0,i.hG)(a.fWT),(0,i.hG)(a.nnJ);let o=(0,i.hG)(a.tui),s=(0,i.hG)(a.i_6)},978447:(e,r,n)=>{n(411855),n(563706),n(153234),n(522739),n(163023),n(939863),n(498606)},103567:(e,r,n)=>{n.d(r,{PE:()=>g});var i=n(411855),a=n(188507),o=n(463033),s=n(686046),l=n(939863),c=n(175290),d=n(809840),u=n(225266),m=n(215822);function p(e){return{...e.is_widget?{widget_id:e.id}:{plugin_id:e.id},src:u.Nn.INVITE_TILE}}function h({resource:e}){let r=function(e){let r=(0,a.wA)(),n=p(e);return()=>r((0,u.dx)(n))}(e),n=function(e){let r=(0,a.wA)(),n=p(e);return()=>r((0,u.MZ)(n))}(e);return i.createElement(c.Y,null,i.createElement(o.$n,{onClick:e=>{e.stopPropagation(),n()},variant:"secondary"},(0,l.tx)("community.detail_view.decline")),i.createElement(o.$n,{onClick:e=>{e.stopPropagation(),r()},variant:"primary"},(0,l.tx)("community.detail_view.accept")))}function _({resource:e}){let r=(0,m.uF)(e),n=e.creator,a=e.is_widget?"widget":"plugin",o=`/community/${a}/${e.id}`;return i.createElement(d.E,null,(0,l.tx)("universal_insert.invited_you_to_publish",{ownerName:i.createElement(d.E,{fontWeight:"medium"},n.handle),resourceName:i.createElement(s.N,{newTab:!0,href:o,onClick:e=>{e.stopPropagation()},trusted:!0},i.createElement(d.E,{fontWeight:"medium"},r.name))}))}function g({resource:e}){return i.createElement(c.Y,{direction:"vertical"},i.createElement(_,{resource:e}),i.createElement(h,{resource:e}))}},389211:(e,r,n)=>{n(411855)},914149:(e,r,n)=>{n(411855),n(154254)},491815:(e,r,n)=>{n.d(r,{mk:()=>c});var i=n(411855);n(188507);var a=n(91408);n(794272);var o=n(572206);n(466636),n(271245),n(395281),n(178323),n(756085),n(875847),n(335682),n(694687),n(860178),n(820642),n(336599),n(106112),n(288300),n(401730),n(376485),n(811529),n(705129);var s=n(816460),l=n(837746);function c(e,r){let n=(0,i.useRef)(null),a=(0,i.useRef)(!1);return r.every(e=>!!e)&&!a.current&&(n.current=e,a.current=!0),null!==n.current?n.current:e}(0,a.hG)(l.Yr1),(0,a.hG)(l.Eg1),new o.Mi(s.wR,s.wR+s.E0),i.createContext(null)},379928:(e,r,n)=>{n.d(r,{I:()=>C});var i=n(411855),a=n(109388),o=n(188507),s=n(75395),l=n(922827),c=n(629019),d=n.n(c),u=n(572206),m=n(864089),p=n(999237),h=n(939863),_=n(986270),g=n(356390),f=n(312167),E=n(860178),y=n(809073),b=n(498606),v=n(80332),I=n(634951),T=n(16774),S=n(28752),w=n(763933);function A({children:e,mini:r,user:n}){return r?i.createElement("div",{className:d()(w.HG,w.ET)},e):i.createElement("div",{"data-tooltip-type":b.Ib.TEXT,"data-tooltip":n.name||n.handle||"","data-tooltip-timeout-delay":"500","data-tooltip-show-below":!0,"data-tooltip-offset-y":"-20",className:d()(w.HG)},e)}function C({user:e,hideName:r,mini:n,searchQuery:a,triggeredFrom:s}){let c=e.hi_res_img_url||e.img_url,d=`${c}?c=1`,m=(0,v.$L)(e.id,v.us),h=(0,I.LL)(d,e.name||e.handle||"",m),b=(0,E.TA)(),S=(0,T.b)(),C=(0,o.wA)(),P=i.useCallback(()=>{C(_.F9({currentUserId:b??void 0,storeInRecentsKey:y.$A.FigJam,item:{id:e.id,user:e,type:y.vt.FaceStamp}}))},[b,C,e]),{dragState:D,onInsertableResourcePointerDown:k}=(0,f.Z)({iconSrc:h,insertAction:r=>{let{dropPosition:n}=r,i=r.pointerPercentageOffset?r.pointerPercentageOffset.x:0,a=r.pointerPercentageOffset?r.pointerPercentageOffset.y:0,o=new u.Mi(50,50),s=n.subtract(new u.Mi(i*o.x,a*o.y)).subtract(new u.Mi(5,5));(0,I.xG)(h,s.x,s.y,e.id,"drag",l.zkO.USER),P(),S()},clickToInsert_DEPRECATED:!1,afterSuccessfulInsert:S,resource:{id:e.id,name:e.name||"",img:h},triggeredFrom:s,searchQuery:a,mini:n});return n&&!h?null:i.createElement(A,{mini:n,user:e},h?i.createElement(p.n.recordableDiv,{className:w.RX,onPointerDown:k},i.createElement(O,{stampImageUrl:h,username:e.handle||"",onClick:()=>{let r=g.Y5.getViewportInfo();(0,I.xG)(h,r.offsetX,r.offsetY,e.id,"click",l.zkO.USER),P(),S()},dragging:null!==D,mini:n}),i.createElement(R,{dragState:D,imageUrl:h}),!r&&i.createElement(L,{username:e.name||e.handle||""})):i.createElement(i.Fragment,null,i.createElement(N,{mini:n}),!r&&i.createElement(L,{username:""})))}function N({mini:e}={}){return i.createElement("div",{className:d()(w.HG,{[w.ET]:e,[w.M4]:!e})},i.createElement("div",{className:d()(w.eP,w.iE)}),!e&&i.createElement("div",{className:d()(w.t$,w.OP)}))}function L({username:e}){return i.createElement("div",{title:e,className:w.OP},e)}function O(e){return i.createElement(s.E,{className:w.RT,recordingKey:"facestamp",onClick:e.onClick,htmlAttributes:{"data-testid":`facestamp-${e.username}${e.mini?"-mini":""}`}},i.createElement(m.oW,{draggable:!1,src:e.stampImageUrl,className:d()(w.iE,{[w.Jy]:e.dragging,[w.dG]:e.mini}),alt:(0,h.t)("whiteboard.face_stamps.aria_label",{userName:e.username})}))}function R(e){if(!e.dragState?.dragPosition||!e.dragState.grabbedPointerPercentageOffset)return null;let r=function(){let{zoomScale:e}=g.Y5.getViewportInfo();return new u.Mi(50,50).scale(e)}(),n=e.dragState.dragPosition.subtract(new u.Mi(e.dragState.grabbedPointerPercentageOffset.x*r.x,e.dragState.grabbedPointerPercentageOffset.y*r.y));return(0,a.createPortal)(i.createElement(m.oW,{alt:"",className:d()(S.$J,{[S.Yg]:e.dragState.isDraggingOverCanvas}),style:{left:n.x,top:n.y,width:r.x,height:r.y},src:e.imageUrl}),document.getElementById("fullscreen-root"))}},465448:(e,r,n)=>{n.d(r,{qK:()=>c});var i=n(411855),a=n(188507),o=n(720289),s=n(335682),l=n(707465);function c(){let e=(0,a.d4)(e=>e.recentlyUsed.faceStamps),r=function(){let e=!!s.q5()?.org,r=(0,a.d4)(e=>(0,l.zg)(e.selectedView)&&!e.user);return!!(e&&!r)}(),n=(0,o.o)();return i.useMemo(()=>n&&r?e.figjam.map(e=>e.user):[],[n,e,r])}n(809073)},313148:(e,r,n)=>{n(411855)},144374:(e,r,n)=>{n.d(r,{Yx:()=>y});var i=n(411855),a=n(188507),o=n(922827),s=n(340818);n(153234),n(999237);var l=n(939863);n(738274);var c=n(662275);n(986270),n(737499),n(263908),n(99944),n(288300),n(809073),n(389211),n(491815),n(313148),n(16774);var d=n(109388),u=n(501972),m=n(813648),p=n(237870),h=n(746806),_=n(620597),g=n(746958);let f="delightful-toolbar-media-button",E="InsertMediaModal";function y(e){let r=function(e){switch(e){case"Table":return o.NLJ.TABLE;case"CodeBlock":return o.NLJ.CODE_BLOCK;case"MindMap":return o.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS;case"Text":return o.NLJ.TYPE;case"Section":return o.NLJ.SECTION;default:throw Error(`Unknown tool: ${e}`)}}(e),n=()=>{s.l7.user("click-insert-tool",()=>o.glU.createNodeAtViewportCenterFromTool(r))};return{insertToolWithDragAction:e=>{let{dropPosition:i,isClick:a}=e;a?n():s.l7.user("drag-insert-tool",()=>o.glU.createNodeFromTool(r,i.x,i.y))},insertToolOnClickAction:n}}(0,p.Ju)(function(){let e=(0,a.wA)(),r=(0,a.d4)(e=>!!e.modalShown?.data?.shouldMountCenter),n=i.useRef(null),s=r?{kind:"mountCenter"}:{kind:"buttonTarget",buttonTarget:f},{initialModalPosition:p,modalPosition:y,setModalPosition:b}=(0,m.ts)(s,157,320),v=i.useCallback(()=>{o.glU.triggerAction("set-tool-default",null),e(c.ES({type:E}))},[e]),I=i.useCallback(e=>{b(e)},[b]),T=!y||!!p?.equals(y);return(i.useEffect(()=>{let e=e=>{let r=d.findDOMNode(n.current?.getEl()),i=(0,u.Tc)(f);if(!r||!i)return;let a=r.contains(e.target),o=i.contains(e.target);!T||a||o||v()};return document.addEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}},[v,T]),p)?i.createElement(h.vx,{ref:n,initialPosition:p,initialWidth:320,title:(0,l.t)("whiteboard.embeds.insert_embed_modal.title"),onClose:v,onDragStart:()=>o.glU.triggerActionInUserEditScope("set-tool-default",null),onDragEnd:I,dragHeaderOnly:!0,arrowRelativeX:r?void 0:160,arrowPosition:h.F_.BOTTOM,smallArrow:!0,containerClassName:g.jT,headerClassName:g.N1,isFigJam:!0},i.createElement("div",{className:g.hQ,"data-testid":"insert-media-modal"},i.createElement(_.q,{onSuccess:v}))):null},E),n(972283),n(487392)},583718:(e,r,n)=>{n.d(r,{QK:()=>p,zX:()=>m});var i=n(411855),a=n(188507),o=n(915440),s=n(756085),l=n(269167),c=n(813648),d=n(279453),u=n(555328);function m({extensionId:e}){let r=(0,a.d4)(e=>e.currentUserOrgId),n=(0,o.Rs)(d.BB3,{orgId:r});return i.useMemo(()=>n.data?.currentUser?.installedPlugins.find(r=>r.pluginId===e)?.id,[n.data?.currentUser?.installedPlugins,e])}function p(e,r){let n=(0,s.Be)(),i=r===u.vt.PLUGIN?n.plugins[e]:n.widgets[e],o=(0,l.xp)(e),d=(0,l.aQ)(e),p=(0,a.d4)(r=>r.publishedPlugins[e]?o:d),h=m({extensionId:e}),{unsave:_,save:g}=(0,c._i)(e,r,p,h);return{unsave:_,save:g,isSavedForUser:!!(i&&"user"===i.installed_by),isSavedForOrg:!!(i&&"org"===i.installed_by),version:i}}},172226:(e,r,n)=>{var i=n(411855);n(188507),n(629019),n(966712),n(812115),n(268537),n(355819),n(163023);var a=n(939863),o=n(71425);n(941381);var s=n(662275);n(672517),n(756085),n(269167),n(170786),n(813648),n(318812),n(737499),n(336599),n(215822),n(288300),n(555328);var l=n(237870);n(96557),n(298543),n(319285),n(927206),n(816460),n(914149),n(491815),n(16774);var c=n(474742);n(553574),(0,l.Ju)(function({dispatch:e}){return i.createElement(c.Rw,{confirmationTitle:(0,a.t)("whiteboard.inserts.widget_development_error_modal_title"),content:(0,a.t)("whiteboard.inserts.widget_development_error_modal_description"),onConfirm:()=>{e((0,o.JZ)({resourceType:"widget"})),e(s.Lo())},confirmText:(0,a.t)("whiteboard.inserts.widget_development_import_manifest"),size:"small",disableClickOutsideToHide:!0,hideOnConfirm:!1,cancelText:(0,a.t)("whiteboard.inserts.widget_development_error_modal_close"),hideCancel:!1,popStack:!0})},"FigjamPublishedDevelopmentWidgetErrorModal",l.ZU.YES)},632788:(e,r,n)=>{n.d(r,{EJ:()=>T,T9:()=>S,_n:()=>I,lD:()=>w,ms:()=>A});var i=n(411855),a=n(188507);n(517333),n(268537);var o=n(939863),s=n(71425);n(970516),n(662275);var l=n(884484),c=n(756085);n(170786);var d=n(813648),u=n(318812),m=n(694687),p=n(215822);n(555328);var h=n(376485),_=n(18993),g=n(756689);n(96557),n(350913);var f=n(507956),E=n(728587),y=n(298543);function b({pluginId:e,preferences:r}){let{pinnedPlugins:n,pinPlugin:i,unpinPlugin:a}=r;return n.find(r=>r.plugin_id===e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.unpin"),callback:()=>{a(e)}}:{displayText:(0,o.t)("dev_handoff.inspect_panel.pin"),callback:()=>{i(e)}}}function v({plugin:e}){let{callback:r,isPluginSetToAutoRun:n}=(0,_.bE)(e??null);return(0,_.aY)(e)?{displayText:(0,o.t)("dev_handoff.inspect_panel.auto_run"),callback:r,isChecked:n}:null}n(172226);let I="DROPDOWN_TYPE_SAVED_AND_RECENT_ACTIONS_DROPDOWN";function T(e){let r=(0,u.Um)(),n=(0,g.VR)(),a=(0,f.ks)(),s=(0,m.sZ)(),l=(0,c.ll)(),d=v({plugin:e.plugin}),h=[];return(h.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),a&&((0,p.Th)(e.plugin,s,l)&&n.loaded&&h.push(b({pluginId:e.plugin.plugin_id,preferences:n})),d&&h.push(d)),r)?a?i.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h,autoHeight:!0}):i.createElement(A,{parentRect:r?.data.targetRect,lean:"left",minWidth:64,items:h}):null}function S(e){if(!e.localResource&&!e.publishedResource)throw Error("Either localResource or publishedResource is required");let r=(0,f.ks)(),n=(0,a.wA)(),m=(0,u.Um)(),_=Object.values((0,c.$1)()).find(r=>r.plugin_id===e.publishedResource?.id),E=(0,g.VR)(),y=v({plugin:e.publishedResource?(0,p.uF)(e.publishedResource):null}),I=e.localResource||_,T=(0,c.B7)(I?I.plugin_id:e.publishedResource.id),S=(0,c.Ud)(I?I.plugin_id:e.publishedResource.id),w=e.publishedResource||T||S,C=!!w?.versions[w.current_plugin_version_id],N=w?w.is_widget:I?.manifest.containsWidget,L=(0,d.LR)(),O=(0,l.NV)(I,w),R=(0,l.OX)(w),P=(0,l.x2)(I,w,L),D=(0,l.qu)(I),k=(0,l.qi)(C,()=>{I&&n(s.qR(I?.localFileId))});if(!m||!m.data.targetRect)return null;let M=[];(I&&!I.error||w)&&M.push(O),C&&e.viewResource&&M.push({displayText:(0,o.t)("universal_insert.view_details"),callback:e.viewResource}),C&&M.push(P),I&&I.error?.type!==h.ho.LOAD&&M.push(D),I||M.push({displayText:(0,o.t)("universal_insert.locate_local_version"),callback:()=>{(0,s.JZ)({resourceType:N?"widget":"plugin"})}});let F=[];w&&C&&E.loaded&&r&&F.push(b({pluginId:w.id,preferences:E})),C&&y&&F.push(y);let x=[];I&&x.push(k),R&&x.push(R);let U=M.some(Boolean)&&(x.some(Boolean)||F.some(Boolean))&&{displayText:"",separator:!0},B=x.some(Boolean)&&F.some(Boolean)&&{displayText:"",separator:!0};return i.createElement(A,{parentRect:m.data.targetRect,lean:"left",minWidth:y?220:120,rootAndSubmenuMaxWidth:y?void 0:190,disableDropdownScrollContainer:!0,hidePointWhenContentOffScreen:!0,dataTestId:"developmentResourceOptionDropdown",items:[...M,U,...F,B,...x].filter(e=>!!e)})}let w="DROPDOWN_TYPE_DEVELOPMENT_RESOURCE_OPTIONS_DROPDOWN";function A(e){let r=(0,a.wA)();return i.createElement(E.j,{...e,dispatch:r,showPoint:!0,type:y.it.DEFAULT,onSelectItem:e=>{e.callback&&e.callback("",null,r)}})}},760445:(e,r,n)=>{n.d(r,{B6:()=>p,Kr:()=>c,Nh:()=>h,Zm:()=>m,kB:()=>_});var i=n(411855);n(188507);var a=n(91408);n(96328),n(154254);var o=n(939863);n(870505),n(779709),n(457630),n(231472),n(457689),n(507956),n(978447),n(824049),n(56714);var s=n(837746);n(132752),(0,a.hG)(s.rDe);let l=(0,a.hG)(s.SKA);(0,a.hG)(s.rZj);let c=44;(0,a.hG)(s.wgS);let d=(0,a.hG)(s.iah),u=(0,a.hG)(s.LdP);(0,a.hG)(s.paq);let m=6,p=2;function h(e){if(!e)return{x:d,y:d};let r=document.querySelector("#toolbelt-action-component-insert");if(r){let e=r.getBoundingClientRect(),n=e?e?.top-l-6:u;return{x:e?.x||284,y:n}}{let e=document.querySelector("#toolbar-action-component-insert")?.getBoundingClientRect();return{x:e?.x||284,y:e?.bottom||u}}}function _(e){if(!e.community_publishers?.accepted||0===e.community_publishers.accepted.length)return"";let r=e.community_publishers.accepted[0].name;return 1===e.community_publishers.accepted.length?(0,o.t)("community.resource.by_creator",{spaceChar:" ",creator:r}):(0,o.t)("community.resource.by_more_than_2_creators",{spaceChar:" ",creator1:r,others:(0,o.t)("community.resource.by_x_others",{numPublishers:e.community_publishers.accepted.length-1})})}i.createContext(null)},76158:(e,r,n)=>{n.d(r,{s:()=>i});var i=(e=>(e.COMPONENT="component",e.PLUGIN="plugin",e.WIDGET="widget",e))(i||{}),a=(e=>(e[e.MAIN=0]="MAIN",e[e.ORG_PRIVATE_EXPANDED_LIST=1]="ORG_PRIVATE_EXPANDED_LIST",e[e.ORG_ALLOWLIST_EXPANDED_LIST=2]="ORG_ALLOWLIST_EXPANDED_LIST",e))(a||{})},76154:(e,r,n)=>{n.d(r,{dr:()=>ef,yG:()=>eE});var i=n(411855),a=n(188507),o=n(966664),s=n(343887),l=n(841368);n(340818);var c=n(629019),d=n.n(c);n(517333),n(563042);var u=n(946689),m=n(723325),p=n(163023),h=n(46481),_=n(348425),g=n(154254),f=n(939863),E=n(501114),y=n(175290),b=n(365292),v=n(408552),I=n(872860),T=n(472353),S=n(466636);n(545941);var w=n(738269),A=n(931828),C=n(672517),N=n(802915),L=n(780700),O=n(756085),R=n(988022),P=n(269167),D=n(641638);n(170786);var k=n(318812),M=n(694687),F=n(99506),x=n(215822),U=n(555328);n(376485);var B=n(498606),V=n(18993),G=n(978527),H=n(464628),K=n(399932);n(933464);var W=n(37637),$=n(507956),Y=n(728587);n(33876);var z=n(927206);n(103567);var j=n(552993);n(172226);var q=n(632788),Z=n(760445);n(76158);var X=n(132752),J=n(292164),Q=n(362679),ee=n(13556),et=n(237494),er=(e=>(e.COMMUNITY="community",e.RECENT="recent",e.DEVELOPMENT="development",e.DEVELOPMENT_MISSING_LOCAL="development_missing_local",e.ORG_PRIVATE="org_private",e.SAVED="saved",e.INVITED="invited",e))(er||{});function en(e){let r=(0,a.d4)(e=>e.orgById);if(e.resource.is_private){let n=e.resource?.org_id&&r[e.resource.org_id]?.name;return i.createElement(p.B,{svg:et.A,className:X.kQ,"data-tooltip-type":B.Ib.TEXT,"data-tooltip":n?(0,f.t)("community.plugins.private_for_plugin_org_name",{orgName:n}):(0,f.t)("community.plugins.private_for_plugin_org")})}return i.createElement(i.Fragment,null)}let ei=i.createContext(null);function ea(){return(0,o.sR)(i.useContext(ei),"Must be wrapped within <FdBrowseWidgetTileContext.Provider>")}let eo=i.createContext(null);function es(){return(0,o.sR)(i.useContext(eo),"Must be wrapped within <FdBrowsePluginTileContext.Provider>")}function el(e,r,n){let a=i.useRef(null),o=i.useCallback(()=>{a.current&&a.current.click()},[a]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationItem:c}=(0,m.M3)({path:r||[0],fauxClick:o,id:e}),d=n&&r&&r.length>=2&&r[0]===Z.B6&&0===r[1];return i.useEffect(()=>{d&&c?.fauxFocus()},[d,c]),{setKeyboardNavigationElement:s,isFauxFocused:l,keyboardNavigationButtonRef:a}}i.memo(function(e){let r=(0,O.Be)(),n=r.plugins[e.pluginId]||r.orgPlugins[e.pluginId],a=(0,O.b4)()[e.pluginId],o=(0,O.cW)()[e.pluginId],s=i.useMemo(()=>"recent"===e.type?a:"org_private"===e.type?(0,x.uF)(o):n,[n,e.type,o,a]),l=(0,k.Um)(),c=l?.type===q._n&&l.data.pluginId===e.pluginId&&l.data.targetRect&&l.data.viewType===e.type,d=eE(e.pluginId,e.type);return i.createElement(ec,{pluginId:e.pluginId,type:e.type,dropdownIsShown:c,runOptionsDropdownIsShown:d,version:s})});let ec=i.memo(function(e){let{dropdownIsShown:r,version:n}=e,o=(0,a.wA)(),{viewPluginDetails:s}=es(),l=i.useCallback(n=>{n.stopPropagation(),r?o(w.oB()):o(w.j7({type:q._n,data:{pluginId:e.pluginId,targetRect:n.currentTarget.getBoundingClientRect(),viewType:e.type}}))},[r,o,e.pluginId,e.type]),c=(0,L.dR)(e.pluginId,"universal-insert"),d=(0,L.Gt)(e.pluginId,"universal-insert"),u=(0,N.t)(e.pluginId,d,c),m=u.length>0,p=e.runOptionsDropdownIsShown&&m,h=i.useRef(null),{validatePublishedPluginInOrgAllowlist:_,isPluginBlockedByAllowlist:g}=(0,O.j1)(e.pluginId),f=(0,L.RK)(e.pluginId),E=i.useCallback(r=>{if(r?.stopPropagation(),_()){if(m){p?o(w.oB()):o(ef({pluginId:e.pluginId,tileType:e.type}));return}f?d():c(),o(A.b({seen_published_plugin_onboarding_modal:!0})),o(A.b({seen_development_plugin_onboarding_modal:!0}))}},[_,m,f,o,p,e.pluginId,e.type,d,c]),y=h.current?.getBoundingClientRect();if(!n)return null;let b=!!(p&&y)||r,v=i.createElement(j._W,{resourceId:e.pluginId,resourceType:U.vt.PLUGIN,parentView:j.nN.TILE,isFauxFocused:b});return i.createElement("div",null,i.createElement(eu,{pluginVersion:n,pluginId:e.pluginId,onOptionsClick:l,optionsButtonIsActive:r,onClick:E,showOnClickDropdownChevron:m,secondaryIcon:i.createElement(en,{resource:n}),primaryCTAButton:v,isFauxFocused:b,visuallyDisabled:g}),i.createElement("div",{ref:h}),p&&y&&i.createElement(Y.j,{showPoint:!1,lean:"center",items:u,onSelectItem:e=>{e.callback&&e.callback("",null,o)},parentRect:y,dispatch:o}),r&&i.createElement(q.EJ,{viewResource:s,plugin:n}))});function ed({pluginId:e,name:r,icon:n,iconUrl:a}){let[o,s]=i.useState(!!n);return i.createElement("div",{className:d()(o?X.lP:X.vt)},n||i.createElement(G.V,{plugin:{name:r,plugin_id:e,redirect_icon_url:a??""},loading:"lazy",alt:`${r} icon`,onLoad:()=>s(!0)}))}function eu(e){let r;let n=e.pluginVersion?.name??e.localPlugin?.name??"",a=e.pluginVersion?.redirect_icon_url,{isPluginSetToAutoRun:o}=(0,V.bE)(e.pluginVersion??null),c=e.localPlugin?e.localPlugin.manifest.editorType:e.pluginVersion?.manifest.editorType,u=!e.subheader,{viewPluginDetails:m,keyboardNavigationPath:T,shouldFocusFirstItem:S}=es(),{setKeyboardNavigationElement:w,isFauxFocused:A,keyboardNavigationButtonRef:N}=el(`plugin_${n}`,T,!!S),L=(0,C.j6)(),k=(0,P.ul)(e.pluginId),F=Object.values((0,O.$1)()).find(r=>String(r.plugin_id)===e.pluginId),U=(0,x.uF)(k),G=(0,x.pk)(U),H=(0,P.EO)(k)&&!F,K=(0,P.OY)(k),Y=(0,P.gn)(k)&&!F,j=(0,M.sZ)(),q=(0,O.ll)(),Z=!F&&(0,D.BF)({org:j,extensionVersion:U??e.pluginVersion,isWidget:!1,allowlistedExtensions:q}),et=e.isCommunityPreview&&!Z&&!e.isDevModeWizard,er=H&&!K?i.createElement(ey,{plugin:k,hideFreeTrialBadge:!0}):Y?i.createElement(z.ur,null):et?i.createElement(e_,{pluginId:e.pluginId,buttonRef:N}):void 0,en=(0,v.QP)({resource:k,height:"16",validBadges:[v.op.FREEMUM,v.op.OFF_PLATFORM,v.op.PURCHASED]}),ei=e.metadataOverrideNode??i.createElement(i.Fragment,null,i.createElement("div",{className:X.FV},i.createElement(y.Y,{spacing:4},i.createElement("div",{className:d()(X.B6,{[g.cx.colorTextDisabled.$]:e.visuallyDisabled})},n),o&&i.createElement(b.Ex,{height:"16"},(0,f.t)("universal_insert.auto_run")),e.inReview&&i.createElement(I.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,en&&!Y&&i.createElement("div",{className:X.UK},en),e.publishingStatusIcon&&i.createElement("div",{className:g.cx.colorIcon.$},i.createElement(_.t,{svg:e.publishingStatusIcon})),e.showOnClickDropdownChevron&&i.createElement(p.B,{svg:J.A,className:X.o2})),e.subheader&&i.createElement("div",{className:X.ZK},e.subheader)),er&&i.createElement("div",{className:X.D1},er),e.onOptionsClick&&i.createElement(s.K,{onClick:e.onOptionsClick,"aria-label":(0,f.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,f.t)("universal_insert.more_options")}},i.createElement(h.U,{svg:Q.A,fallbackSvg:ee.A,className:e.optionsButtonIsActive?X.F$:X.D1},i.createElement(l.J,null))),e.primaryCTAButton&&i.createElement("div",{style:E.sx.add({alignSelf:"center"}).$},e.primaryCTAButton)),ea=function(e,r){if((0,$.ks)());else if(e&&r)return!0;return!1}(e.showEditorTypeIcon,c),eo=(0,$.ks)();r=ea?i.createElement(W.li.IconAndBadgeContainer,null,i.createElement(ed,{pluginId:e.pluginId,name:n,iconUrl:a,icon:e.icon}),i.createElement(W.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},i.createElement(W.dn,{editorType:c,is16x16:!0}))):eo&&G?i.createElement(W.li.IconAndBadgeContainer,null,i.createElement(ed,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:a}),i.createElement(W.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"plugin"},i.createElement(W.ZA,null))):i.createElement(ed,{pluginId:e.pluginId,name:n,icon:e.icon,iconUrl:a});let ec=()=>{if((0,R.Cu)({trackingContext:L.name,pluginId:e.pluginId}),H&&!K||Z){m();return}if(e.onClick){e.onClick();return}m()};return i.createElement("div",{className:d()(u?X.$C:X.MJ,A||e.isFauxFocused?X.c6:void 0,e.isDevModeWizard?X.NH:void 0),onClick:ec,role:"button",tabIndex:0,ref:T?w:void 0},i.createElement("button",{onClick:e=>{e.stopPropagation(),ec()},ref:et?void 0:N,"data-testid":"plugin-tile-button"}),i.createElement("div",{className:X.ot},e.isNotification&&i.createElement("div",{className:X.Vx}),r),ei)}function em(e){let r=useDispatch(),n=useLocalWidgets(),i=React.useMemo(()=>e.localFileId?n[e.localFileId]:void 0,[n,e.localFileId]),a=usePublishingPlugins(),o=i?i.plugin_id:e.widgetId,s=useMyPublishedWidgets({includePendingPublishers:!1}),l=React.useMemo(()=>Object.values(s).find(e=>e.id===o),[s,o]),c=React.useMemo(()=>l&&l.current_plugin_version_id?l.versions[l.current_plugin_version_id]:void 0,[l]),d=useDropdownShown(),{viewWidgetDetails:u}=ea(),m=d?.type===DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN&&d?.data.isRecentTile===e.isRecentTile&&d?.data.localFileId===e.localFileId&&d?.data.pluginId===o&&d?.data.targetRect,p=React.useCallback(n=>{if(n.stopPropagation(),m)r(fileBrowserActions.hideDropdown());else{let i=n.currentTarget.getBoundingClientRect();r(fileBrowserActions.showDropdown({type:DevelopmentPluginTile.DEVELOPMENT_WIDGET_DROPDOWN,data:{localFileId:e.localFileId,pluginId:o,isRecentTile:e.isRecentTile,targetRect:i}}))}},[r,e.localFileId,o,e.isRecentTile,m]),h=React.useCallback(()=>{i&&createWidget({pluginID:i.plugin_id,widgetName:i.name,pluginVersionID:"",triggeredFrom:"universal-insert"})},[i]);if(!i&&!l)return null;let _=React.createElement(DevelopmentResourceStatus,{localResource:i,publishedResource:l}),g=l&&isInReview(l),f=l&&getPluginVersionOrEmptyVersion(l).redirect_snapshot_url||e.localFileId&&a[e.localFileId]&&a[e.localFileId].metadata.widgetSnapshotImageSrc||widgetDevelopmentSnapshotSvgIcon,E=l&&!g?l.roles.is_public?globeIcon:lock:void 0;return React.createElement(React.Fragment,null,React.createElement(eh,{widget:c,localWidget:i,subheader:_,iconUrl:f,widgetId:o,onClick:()=>h(),onOptionsClick:p,optionsButtonIsActive:m,useHorizontalLayout:!0,showEditorTypeIcon:!1,publishingStatusIcon:E,inReview:g}),m&&(i?React.createElement(DevelopmentResourceOptionsDropdown,{localResource:i,viewResource:u}):React.createElement(DevelopmentResourceOptionsDropdown,{publishedResource:l,viewResource:u})))}function ep({useHorizontalLayout:e=!1,onIconClick:r,disabled:n,iconUrl:o="",widget:s,publishedWidget:l,keyboardNavigationButtonRef:c}){let d=i.useMemo(()=>e?[v.op.PRICE]:[v.op.PURCHASED,v.op.OFF_PLATFORM,v.op.FREEMUM,v.op.PRICE],[e]),u=(0,a.d4)(e=>e.authedActiveCommunityProfile);return i.createElement("div",{className:e?X.Zv:X.Cq,onClick:r,role:"button",tabIndex:0},n?i.createElement(H.z,{src:o,context:F._Y.DESIGN}):i.createElement(K._,{widget:s,src:o,analytics:{triggeredFrom:"universal-insert"},keyboardNavigationButtonRef:c,context:F._Y.DESIGN}),i.createElement("div",{className:X.VJ},(0,v.$3)({resource:l,authedActiveCommunityProfile:u,validBadges:d,height:e?"16":"24"})))}let eh=i.memo(function(e){let r=e.localWidget??e.widget??x.lT,{viewWidgetDetails:n,keyboardNavigationPath:a,shouldFocusFirstItem:o}=ea(),{setKeyboardNavigationElement:c,isFauxFocused:u,keyboardNavigationButtonRef:m}=el(`widget_${r.name}`,a,!!o),p=(0,O.ZT)()[e.widgetId],b=(0,P.EO)(p),v=(0,P.gn)(p),T=p?(0,x.uF)(p):null,S=r.name;T?.name&&T?.name!==""&&(S=T?.name);let w=(0,M.sZ)(),A=(0,O.U6)(),N=!e.localWidget&&(0,D.BF)({org:w,extensionVersion:T??e.widget,isWidget:!0,allowlistedExtensions:A}),L=!!(b||N),k=(0,C.j6)(),F=L?void 0:e=>e.stopPropagation(),U=e.metadataOverrideNode??i.createElement(i.Fragment,null,i.createElement("div",{className:X.QF},i.createElement("div",{className:X.JW},i.createElement(y.Y,{spacing:4,verticalAlignItems:"center"},i.createElement("div",{className:d()(X.Y2,{[g.cx.colorTextDisabled.$]:e.visuallyDisabled})},S),e.inReview&&i.createElement(I.L,{height:"16"}),!!e.secondaryIcon&&e.secondaryIcon,e.publishingStatusIcon&&i.createElement("div",{className:g.cx.colorIcon.$},i.createElement(_.t,{svg:e.publishingStatusIcon})),v&&i.createElement("div",{className:X.Y9},i.createElement(z.xY,null)))),i.createElement("div",{className:X.ML},e.subheader)),e.onOptionsClick&&i.createElement(s.K,{"aria-label":(0,f.t)("universal_insert.more_options"),htmlAttributes:{"data-tooltip-type":B.Ib.TEXT,"data-tooltip":(0,f.t)("universal_insert.more_options")},onClick:e.onOptionsClick},i.createElement(h.U,{className:e.optionsButtonIsActive?X.F$:X.D1,svg:Q.A,fallbackSvg:ee.A},i.createElement(l.J,null))),e.primaryCTAButton&&i.createElement("div",{style:E.sx.add({alignSelf:"center"}).$},e.primaryCTAButton));return i.createElement("div",{className:d()(e.useHorizontalLayout?X.Gy:X.BG,u?X.c6:void 0),onClick:r=>{(0,R.Cu)({trackingContext:k.name,widgetId:e.widgetId}),L?n():e.onClick?e.onClick(r):n()},role:"button",tabIndex:0,ref:a?c:void 0,"data-testid":"widget-tile"},i.createElement("div",{className:X.ot},e.isNotification&&i.createElement("div",{className:X.Vx}),e.showEditorTypeIcon?i.createElement(W.li.IconAndBadgeContainer,null,i.createElement(ep,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:F,disabled:L,iconUrl:e.iconUrl,widget:r,publishedWidget:p,keyboardNavigationButtonRef:m}),i.createElement(W.li.BadgeContainer,{fromBrowseResourceModal:!0,resourceType:"widget"},i.createElement(W.dn,{editorType:e.editorType,is16x16:!0}))):i.createElement(ep,{useHorizontalLayout:e.useHorizontalLayout,onIconClick:F,disabled:L,iconUrl:e.iconUrl,widget:r,publishedWidget:p,keyboardNavigationButtonRef:m})),U)});function e_(e){let r=(0,a.wA)(),n=i.useRef(null),o=(0,k.Um)(),s=(0,O.JI)(),l=(0,$.ks)(),c=(0,L.dR)(e.pluginId,"universal-insert"),d=(0,L.Gt)(e.pluginId,"universal-insert"),m=(0,N.t)(e.pluginId,d,c),h=m.length>0,_=eE(e.pluginId,"community"),g=h&&o?.type===e.dropdownShownType&&o?.data.pluginId===e.pluginId,E=_||g,{validatePublishedPluginInOrgAllowlist:y}=(0,O.j1)(e.pluginId),b=(0,L.RK)(e.pluginId),v=i.useCallback(n=>{if(n.stopPropagation(),y()){if(h){E?r(w.oB()):(e.dropdownShownType&&r(w.j7({type:e.dropdownShownType,data:{pluginId:e.pluginId}})),r(ef({pluginId:e.pluginId,tileType:"community"})));return}b?d():c(),r(A.b({seen_published_plugin_onboarding_modal:!0})),r(A.b({seen_development_plugin_onboarding_modal:!0}))}},[y,h,b,r,E,e.dropdownShownType,e.pluginId,d,c]);if(l&&!s)return null;let I=n.current?.getBoundingClientRect(),T=e.usePrimaryButtonStyles?i.createElement(u.$$,{onClick:v,className:X.lI},(0,f.tx)("universal_insert.run"),h&&i.createElement(p.B,{svg:J.A,className:X.sI})):i.createElement("button",{className:X.lO,onClick:v,ref:e.buttonRef},(0,f.tx)("universal_insert.run"),h&&i.createElement(p.B,{svg:J.A,className:X.zZ}));return i.createElement("div",{className:e.usePrimaryButtonStyles?X.od:void 0,"data-testid":"run-plugin-button"},i.createElement("div",{ref:n},T),E&&I&&i.createElement(Y.j,{showPoint:!1,items:m,onSelectItem:e=>{e.callback&&e.callback("",null,r)},parentRect:I,dispatch:r,lean:"left"}))}let eg="DROPDOWN_TYPE_RUN_PLUGIN_SUBMENU";function ef(e){return w.j7({type:eg,data:e})}function eE(e,r){let n=(0,k.Um)();return n?.type===eg&&n.data.pluginId===e&&r===n.data.tileType}function ey(e){let r=(0,P.lt)(e.plugin);return e.plugin.monetized_resource_metadata?i.createElement("div",{className:X.y2},i.createElement("div",{className:X.lO},(0,S.bV)(e.plugin.monetized_resource_metadata)),!e.hideFreeTrialBadge&&(0,S.Lt)({resource:e.plugin,payment:r})&&i.createElement(T.w5,{metadata:e.plugin.monetized_resource_metadata,condensed:!0})):null}},824049:(e,r,n)=>{n(188507),n(226055),n(231472)},794321:(e,r,n)=>{n.d(r,{fD:()=>a});var i=(e=>(e.BRAINSTORM_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 brainstorm template interacted",e.TEAM_UPDATES_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team updates template interacted",e.TEAM_CHART_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 team chart template interacted",e.PLANNING_AHEAD_TEMPLATE_BUTTON_INTERACTED="Make something modal V2 planning ahead template interacted",e))(i||{}),a=(e=>(e.BRAINSTORM="BRAINSTORM",e.UPDATES="TEAM UPDATES",e.PLAN="PLANNING AHEAD",e.TEAM="TEAM CHART",e.NONE="NONE",e))(a||{})},302608:(e,r,n)=>{n.d(r,{bb:()=>e_});var i=n(411855),a=n(188507),o=n(686046),s=n(256296),l=n(140686),c=n(463033),d=n(629019),u=n.n(d),m=n(320063),p=n(189430),h=n(966712),_=n(716034),g=n(418956),f=n(659302),E=n(574705),y=n(153234),b=n(554322),v=n(572206),I=n(27087),T=n(448169),S=n(946689),w=n(511443),A=n(355819),C=n(163023),N=n(939863),L=n(392592),O=n(934533),R=n(970516),P=n(662275),D=n(931828),k=n(318812),M=n(611978),F=n(309798),x=n(239671),U=n(103101),B=n(237870),V=n(538697),G=n(746806),H=n(162057),K=n(390980),W=n(251890),$=n(33798),Y=n(681109),z=n(589084),j=n(132208),q=n(175479),Z=n(785496);let X=(0,_.eU)(!1),J=e=>e.map(e=>{let r=e.name.match(/((.*)\s+-\s+)?(.*)/);return{optionCategoryName:r&&r[2]||"Other",optionSubareaName:r&&r[3]||e.name,gid:e.gid}}).reduce((e,r)=>{let n=e.get(r.optionCategoryName);return n||(n=[],e.set(r.optionCategoryName,n)),n.push({name:r.optionSubareaName,gid:r.gid}),e},new Map),Q=e=>{let r=e.match(/app\.asana\.com\/\d\/\d+\/(\d+)/);if(!r||r.length<2)throw Error((0,N.t)("bug_reporter.error_invalid_asana_url"));return r[1]};function ee(e){return!et(e)}function et(e){return"error"in e}let er={gid:"",name:"Pick an option"},en="bugReporter",ei=(0,_.eU)(!0),ea=(0,_.eU)(""),eo=(0,_.eU)(""),es=(0,_.eU)(""),el=(0,_.eU)(er),ec=(0,_.eU)(er),ed=(0,_.eU)(!1),eu=i.createElement("div",{className:W.jM},"WARNING: because the title begins with TEST: your bug will be routed to the ",i.createElement(o.N,{newTab:!0,href:"https://app.asana.com/0/1203643376438098/list"},(0,N.tx)("bug_reporter.warning_asana_board")));function em(e){let r=(0,k.Um)(),n=(0,a.wA)(),o=(0,b.Av)(),{windowInnerHeight:d}=(0,p.l)(),[_,f]=(0,g.fp)(ea),[E,v]=(0,g.fp)(eo),[I,O]=(0,g.fp)(es),[R,P]=(0,g.fp)(el),[D,M]=(0,g.fp)(ec),[F,x]=(0,g.fp)(ed),[U,B]=i.useState(!0),[H,Y]=i.useState(!1),[z,q]=i.useState(!1),[Z,X]=i.useState([]),[J,ee]=i.useState(void 0),et=d-(o+G.uF+w.Ug)-w.lc;(0,m.h)(()=>{!0===F&&(ei(),x(!1))});let ei=()=>{B(!0),X([]),e.clearForm()},em=i.useCallback(()=>!!(!e.isSubmitting&&E.trim()&&I.trim())&&(!e.isNewReport||!!R.gid&&!!D.gid),[I,e.isNewReport,e.isSubmitting,D.gid,R.gid,E]),eh=r=>{if(r)try{let n=Q(r);e.attachFromTask(n)}catch(e){n(L.F.enqueue({message:`${e}`,error:!0}))}},e_=y.AF(y.Pt(en,"link-input"),"change",e=>{let r=e.target.value;f(r),""===r&&ei()}),eg=y.AF(y.Pt(en,"title-input"),"change",e=>{v(e.target.value)}),ef=y.AF(y.Pt(en,"productAreaSearch"),"change",e=>{eL(e.target.value),""===e.target.value&&M(er)}),eE=y.AF(y.Pt(en,"description-input"),"change",e=>{O(e.target.value)}),ey=y.qP(y.Pt(en,"severity-input")??"","change",e=>{P(e)}),eb=y.qP(y.Pt(en,"product-area-input")??"","change",e=>{M(e),eL("")}),ev=i.useCallback(e=>{let r=[],i=[];for(let n of e)if(n.size>0x3200000)i.push(n.name);else{let e=URL.createObjectURL(n);r.push({fileContent:n,url:e,name:n.name,type:n.type})}if(i.length>0){let e=`Error: files could not be attached (over 50MB limit): [${i.join(", ")}].`;console.error(e),n(L.F.enqueue({error:!0,message:e}))}return r},[n]),eI=e=>{if(e.files.length>0){let r=ev([...e.files]);X(e=>[...e,...r])}Y(!1)},eT=y.AF(y.Pt(en,"include-filekey-input"),"change",e=>{B(e.currentTarget.checked)}),eS=i.useCallback(()=>{em()&&e.submitBugReport(E,I,R,D,U,Z,J)},[Z,em,I,U,J,e,D,R,E]),ew=y.of(en,"submit",e=>{e.preventDefault(),eS()}),eA=(e,r)=>{let n=e.target;"Enter"===e.key&&(e.metaKey||e.ctrlKey?eS():("description"!==r&&e.preventDefault(),"asanaInput"===r&&eh(_),"productAreaSearch"===r&&q(!0))),"Escape"===e.key&&n&&n.blur()},eC=y.v_(y.Pt(en,"asanaInput"),"keydown",e=>{eA(e,"asanaInput")}),[eN,eL]=i.useState("");return i.createElement(T.Y,{className:u()(H&&W.oE),isDragTarget:()=>!0,onTargetDragEnter:()=>{Y(!0)},onTargetDragLeave:()=>{Y(!1)},onTargetDrop:e=>eI(e)},H&&i.createElement("div",{className:W.$1},i.createElement(C.B,{svg:$.A}),(0,N.tx)("bug_reporter.drop_attachments")),i.createElement(A.P,{maxHeight:et,hideScrollbar:H},i.createElement("form",{onSubmit:ew,onPaste:e=>{if(e.clipboardData.files.length>0){let r=ev([...e.clipboardData.files]);X(e=>[...e,...r])}},className:u()(W.yl,H&&W.vw)},i.createElement("div",{className:W.uu},i.createElement(s.J,{className:W.y8},(0,N.tx)("bug_reporter.asana_hint")),i.createElement(S.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.asana_link_placeholder"),value:_,onChange:e_,onPaste:e=>{let r=e.clipboardData.getData("text");try{Q(r),eh(r)}catch{}},onKeyDown:eC,maxLength:150})),i.createElement("div",null,i.createElement(s.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.title")),i.createElement(S.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.title_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"title"),value:E,onChange:eg,maxLength:150})),i.createElement("div",null,i.createElement(s.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.severity")),i.createElement(V.l6,{id:"bug_reporter_select_severity",dispatch:n,property:R,onChange:ey,dropdownShown:r,formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid}},0===e.severityOptions.length&&i.createElement(V.c$,{key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading")),e.severityOptions.map(e=>i.createElement(V.c$,{value:e,key:e.gid},e.name)))),i.createElement("div",null,i.createElement(s.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.product_area")),i.createElement(S.ks,{className:W._Z,placeholder:(0,N.t)("bug_reporter.modal.search_filter_placeholder"),autoFocus:!0,onKeyDown:e=>eA(e,"productAreaSearch"),value:eN,onChange:ef,maxLength:150}),i.createElement(V.l6,{dispatch:n,dropdownShown:r,id:"bug_reporter_select_product_area",dataTestId:"bug_reporter_select_product_area",formatter:{format:e=>e.name,isEqual:(e,r)=>e.gid===r.gid},property:D,onChange:e=>{eb(e)},triggerDropdown:z,setTriggerDropdown:q},(r=>{if(0===e.productAreaGroups.size)return i.createElement(V.c$,{value:null,key:"loading",disabled:!0},(0,N.tx)("bug_reporter.modal.loading"));let n=[];return e.productAreaGroups.forEach((e,a)=>{(r?e.filter(({name:e})=>e.toLowerCase().includes(r.toLowerCase())):e).length>0&&(n.push(i.createElement(V.c$,{value:null,key:a,isHeader:!0,disabled:!0},a)),e.forEach(e=>{(!r||e.name.toLowerCase().includes(r.toLowerCase()))&&n.push(i.createElement(V.c$,{value:e,key:e.gid,dataTestId:e.gid},e.name))}),n.push(i.createElement(V.sK,{key:`${a}.divider`})))}),n.pop(),n})(eN))),i.createElement("div",null,i.createElement(s.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.description")),i.createElement(S.ks,{className:[W._Z,W.Tg].join(" "),placeholder:(0,N.t)("bug_reporter.modal.description_placeholder"),type:"textarea",value:I,onChange:eE,onKeyDown:e=>eA(e,"description"),maxLength:1e3})),i.createElement("div",null,i.createElement(s.J,{className:W.Pf},(0,N.tx)("bug_reporter.modal.images_and_videos")),i.createElement(ep,{attachmentFiles:Z,setAttachmentFiles:X,validateInputFiles:ev})),(0,h.kc)().in_app_performance_profiling&&i.createElement("div",null,i.createElement(i.Fragment,null,i.createElement(s.J,{className:W.Pf},(0,N.tx)("bug_reporter.profiler.title")),i.createElement(K.J,{onProfilingFinish:e=>{ee(e)}}),J&&(0,N.tx)("bug_reporter.profiler.profile_attached"))),"fullscreen"===e.selectedView.view&&i.createElement(l.S,{checked:U,onChange:(e,{event:r})=>eT(r),label:i.createElement(s.J,null,i.createElement("div",{className:W.HI},(0,N.t)("bug_reporter.modal.include_filekey"),i.createElement("div",{className:W.kB},i.createElement(C.B,{svg:j.A}),i.createElement("div",{className:W.dX},(0,N.tx)("bug_reporter.modal.include_filekey_info")))))}),E.startsWith("TEST:")&&eu,i.createElement(S.e2,{className:W.GC},i.createElement(c.$n,{variant:"secondary",onClick:e.onClose},(0,N.tx)("bug_reporter.modal.cancel")),i.createElement(c.$n,{variant:"primary",type:"submit",disabled:!em()},(0,N.t)("bug_reporter.modal.submit"))))))}function ep(e){let{attachmentFiles:r,setAttachmentFiles:n,validateInputFiles:a}=e,o=i.useRef(null),s=i.useCallback(()=>{o.current&&(o.current.value="")},[]),l=i.useCallback(()=>{let e=o.current?.files||null;if(null===e||0===e.length)return;let r=a([...e]);n(e=>[...e,...r]),s()},[s,a,n]),c=(e,r,i)=>{e.preventDefault(),n(e=>(e.splice(r,1),[...e])),URL.revokeObjectURL(i)};return i.createElement("div",{className:W.VL},r.length>0&&r.map((e,r)=>i.createElement("div",{className:W.Dq,key:r},i.createElement("div",null,e.type.startsWith("image")?i.createElement("img",{className:W.cR,alt:e.name,key:r,src:e.url}):i.createElement("video",{className:W.cR,key:r,src:e.url}),i.createElement("div",{className:W.Lw})),i.createElement("button",{onClick:n=>c(n,r,e.url)},i.createElement(C.B,{className:W.Yz,svg:Z.A})))),i.createElement("label",{className:W.UM,htmlFor:"file-upload"},i.createElement(C.B,{svg:z.A})),i.createElement("input",{id:"file-upload",type:"file",accept:"image/png, image/jpeg, image/gif, video/mp4, video/quicktime",ref:o,onChange:l,multiple:!0,hidden:!0}))}function eh(e){let r=(0,a.wA)(),n=y.rf(y.Pt(en,"asana-link"),"click",()=>{});return i.createElement("div",{className:W.yl},i.createElement("div",{className:W.lM},(0,N.tx)("bug_reporter.success_message")),i.createElement("div",{className:W.U3},i.createElement("div",{className:W.AX},i.createElement(C.B,{svg:q.A}),i.createElement(o.N,{newTab:!0,onClick:n,href:e.taskUrl,trusted:!0},(0,N.tx)("bug_reporter.asana_link"))),i.createElement("div",{className:W.AX},i.createElement(C.B,{svg:Y.A}),i.createElement(c.$n,{variant:"link",onClick:()=>{r(R.lW({stringToCopy:e.taskUrl}))}},(0,N.tx)("bug_reporter.copy_link")))),e.isNewReport&&i.createElement("div",null,(0,N.tx)("bug_reporter.urgent_bug_info",{notifyTheRelevantOncall:i.createElement(o.N,{newTab:!0,href:"https://go/find-oncall",trusted:!0},(0,N.tx)("bug_reporter.notify_oncall"))})),e.slackUrl&&i.createElement("div",null,i.createElement(o.N.Button,{href:e.slackUrl,newTab:!0},(0,N.tx)("bug_reporter.open_slack_discussion"))),e.submissionErrorMessages.length>0&&e.submissionErrorMessages.map(e=>i.createElement("p",{key:e},e.toString())))}let e_=(0,B.Ju)(function(){let e=(0,a.d4)(e=>e.multiplayer.allUsers.length),r=(0,a.d4)(e=>e.user?.id),n=(0,M._6)(),o=(0,a.wA)(),{windowInnerHeight:s}=(0,p.l)(),l=(0,H.O)(),[c,d]=i.useState([]),[u,_]=(0,g.fp)(ea),y=(0,f.Xr)(eo),b=(0,f.Xr)(es),T=(0,f.Xr)(el),S=(0,f.Xr)(ec),[A,C]=i.useState(new Map),R=(0,f.Xr)(ed),[k,B]=(0,g.fp)(ei),[V,K]=i.useState(!1),[$,Y]=i.useState(!1),z=i.useRef(""),j=i.useRef(""),q=i.useRef(""),Z=i.useRef(""),eu=i.useRef(""),ep=i.useRef([]),e_=i.useRef(null),eg=i.useRef(0),ef=(0,f.Xr)(X),eE=()=>{o(P.Ce())},ey=(0,F.f)("seen_bug_reporter_modal");(0,m.h)(()=>{ey||o(D.b({seen_bug_reporter_modal:!0})),ef(!0)}),i.useEffect(()=>{(async()=>{try{let{data:e}=await U.o.getMeta();d(e.meta.severity),C(J(e.meta.product_area))}catch(e){o(L.F.enqueue({message:`Could not fetch field metadata: ${e}`,error:!0}))}})()},[o]);let eb=()=>U.o.getGetTask({taskGid:z.current}).then(({data:e})=>e).catch(e=>{let r=`Couldn't fetch task details from Asana. ${e.data.message}`;e instanceof I.Dr&&e.data?.message&&(r=e.data.message),o(L.F.enqueue({message:r,error:!0}))}),ev=async e=>{if(0===e.length)return{attachments:[],errorMessages:[]};let r=e.map(async e=>{try{return{uuid:await eT(e.fileContent,e.type),name:e.name}}catch(r){return{error:`Please add attachment ${e.name} directly in Asana instead. ${r}`}}}),n=await Promise.all(r);return ep.current=n.filter(et).map(({error:e})=>e),{attachments:n.filter(ee),errorMessages:n.filter(et).map(({error:e})=>e)}},eI=async e=>{if(!e)return{attachments:[],errorMessages:[]};try{return{attachments:[{uuid:await eT(JSON.stringify(e),"application/json"),name:"profile.json"}],errorMessages:[]}}catch(e){return{attachments:[],errorMessages:[`Please record a profile directly in dev tools instead. ${e}`]}}},eT=async(e,r)=>{let n=await U.o.getAttachmentUploadUrl({fileType:r});if(200!==n.status)throw Error("Failed to get presigned upload URL from S3");let{upload_url:i,fields:a,uuid:o}=n.data.meta,s=new FormData;for(let e in a)s.append(e,a[e]);if(s.append("content-type",r),s.append("file",e),204!==(await fetch(i,{method:"post",body:s})).status)throw Error("Failed to upload attachment to S3");return o},eS=async(i,a,s,l,c,d,m)=>{Y(!0),Z.current=i,eu.current=a,o(L.F.enqueue({type:"bug-reporter-submitting",message:(0,N.t)("bug_reporter.submitting_visual_bell"),timeoutType:"exact",timeoutOverride:4e3,icon:O.zX.SPINNER})),o(L.F.enqueue({type:"bug-reporter-submitting-long",message:(0,N.t)("bug_reporter.long_submitting_visual_bell"),delay:4e3,icon:O.zX.SPINNER}));let p={env:(0,h.tl)().cluster_name,user_agent:navigator.userAgent,view:n.view,user_id:r,org_id:(0,h.tl)().org_id,tracking_session_id:(0,h.tl)().tracking_session_id,release_commit:(0,h.tl)().release_manifest_git_commit,device_info:(0,E.N)(),num_people_in_file:e};"fullscreen"===n.view?(p.editor_type=(0,x.Bu)(n.editorType),c&&(p.file_key=n.fileKey,p.url=window.location.href)):p.url=window.location.href;let _={title:i,severity:s.gid,product_area:l.gid,description:a,metadata:p},g=[ev(d),eI(m)],[f,y]=await Promise.all(g);f.attachments.length>0&&(_.attachments=f.attachments),y.attachments.length>0&&(_.profileUuid=y.attachments[0].uuid),(f.errorMessages.length||y.errorMessages.length)&&(ep.current=[...f.errorMessages,...y.errorMessages]);try{let e=k?await I.Ay.post("/api/bug_reports",_):await I.Ay.put("/api/bug_reports/update_task",{..._,task_gid:z.current=Q(u)});if(e.status>=200&&e.status<300)o(L.F.dequeue({matchType:"bug-reporter-submitting"})),o(L.F.dequeue({matchType:"bug-reporter-submitting-long"})),j.current=e.data.meta.task_url,z.current=e.data.meta.task_gid,k||(q.current=e.data.meta.slack_url),eg.current=e_.current?.getCurrentContentSize()?.y||0,K(!0),R(!0),Y(!1);else throw Error(`Request failed with code ${e.status}.`)}catch(r){o(L.F.dequeue({matchType:"bug-reporter-submitting"})),o(L.F.dequeue({matchType:"bug-reporter-submitting-long"}));let e=r.message;r instanceof I.Dr&&r.data?.message&&"string"==typeof r.data.message&&(e=r.data.message),o(L.F.enqueue({message:`${e}. Couldn't submit report. Try again or use /bug in Slack.`,error:!0})),Y(!1)}},ew=async e=>{z.current=e,B(!1);let r=await eb();r&&(y(r.meta.title),b(r.meta.description),T(r.meta.severity??er),S(r.meta.product_area??er))};return i.createElement(G.vx,{ref:e_,title:(0,N.t)("help_widget.menu.report_issue"),initialPosition:(()=>{let e=l?w.lc:w.Ug,r=w.lc;return V&&(r=s-(eg.current+G.uF)-w.lc),new v.Mi(e,r)})(),initialConstraints:{x:"right",y:V?"top":"bottom"},onClose:eE,recordingKey:en,headerClassName:W.yK,dragHeaderOnly:!0},V?i.createElement(eh,{isNewReport:k,taskUrl:j.current,taskGid:z.current,slackUrl:q.current,title:Z.current,description:eu.current,submissionErrorMessages:ep.current}):i.createElement(em,{isNewReport:k,selectedView:n,severityOptions:c,productAreaGroups:A,attachFromTask:ew,submitBugReport:eS,onClose:eE,clearForm:()=>{B(!0),y(""),b(""),S(er),T(er),z.current="",_("")},isSubmitting:$}))},"BugReporterModal")},421276:(e,r,n)=>{n.d(r,{X:()=>c});var i=n(411855),a=n(163023),o=n(154254),s=n(809840),l=n(377869);function c(e){return i.createElement("p",{className:o.cx.flex.itemsCenter.gap8.mt8.$},i.createElement(a.B,{svg:l.A,className:o.cx.colorIconDesign.$}),i.createElement(s.E,{fontSize:13},e.bulletLabel))}},884812:(e,r,n)=>{n.d(r,{l:()=>u});var i=n(411855),a=n(946689),o=n(939863),s=n(662275),l=n(585878),c=n(415494);function d(e){return i.createElement("div",{style:{height:e.height}})}function u(e){let r=e.onHide||(()=>{e.dispatch(s.Lo())});return i.createElement(l.XV,{...e,isCloseHidden:!0},i.createElement(d,{height:18}),e.children&&i.createElement("div",{className:c.Vw},e.children,i.createElement(d,{height:18})),i.createElement(m,{onConfirm:e.onConfirm,onCancel:r,confirmButtonText:e.buttonText,hideCancelButton:e.hideCancelButton,makeButtonAppearNegative:e.makeButtonAppearNegative},e.checkboxText))}class m extends i.PureComponent{constructor(e){super(e),this.onCheck=()=>{this.setState({checked:!this.state.checked})},this.state={checked:!1}}render(){return i.createElement("div",{className:this.props.className},i.createElement(a.JU,{className:c.Pf},i.createElement(a.tB,{checked:this.state.checked,onChange:this.onCheck,className:c.kv}),this.props.children),i.createElement("div",{className:c.aV},!this.props.hideCancelButton&&i.createElement(a.tM,{onClick:this.props.onCancel},this.props.cancelButtonText||(0,o.t)("modal.cancel")),this.props.makeButtonAppearNegative?i.createElement(a.qM,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm")):i.createElement(a.vd,{disabled:!this.state.checked,onClick:this.props.onConfirm},this.props.confirmButtonText||(0,o.t)("modal.confirm"))))}}m.displayName="CheckboxConfirmButtons"},443958:(e,r,n)=>{n.d(r,{WB:()=>N});var i=n(411855),a=n(188507),o=n(716034),s=n(418956),l=n(893281),c=n(47506),d=n(468557),u=n(939863),m=n(896474),p=n(809840),h=n(662275),_=n(672517),g=n(460187),f=n(665723),E=n(585575),y=n(237870),b=n(526360),v=n(585878),I=n(454372);let T=(e,r)=>{switch(e){case E.M.SRGB:return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.info.srgb_supported"),type:"info"};case E.M.DISPLAY_P3:switch(r.status){case"SupportedNatively":case"SupportedWithPolyfill":return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.info.display_p3_supported"),type:"info"};case"ClientNotSupported":let n=r.diagnostics&&"client"in r.diagnostics&&"desktop-app"===r.diagnostics.client?(0,u.t)("fullscreen.color_management.user_color_profile_modal.client_type.desktop_app"):(0,u.t)("fullscreen.color_management.user_color_profile_modal.client_type.browser");if(r.diagnostics&&"shouldRestartDesktopAppInManagedColorSpace"in r.diagnostics&&r.diagnostics.shouldRestartDesktopAppInManagedColorSpace)return{text:(0,u.t)("fullscreen.color_management.beta.warning.desktop_unmanaged"),type:"warning"};return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.client",{client:n}),type:"warning"};case"MonitorNotSupported":if(r.diagnostics&&"alternativeMonitorName"in r.diagnostics&&r.diagnostics.alternativeMonitorName)return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.alternative_display",{displayName:r.diagnostics.alternativeMonitorName}),type:"warning"};return{text:(0,u.t)("fullscreen.color_management.user_color_profile_modal.warning.display_p3_not_supported.display"),type:"warning"}}}},S="user-color-profile",w={srgbOption:`${S}-srgb-option`,p3Option:`${S}-p3-option`,supportDetailsWarningIcon:`${S}-warning-icon`,supportDetailsInfoIcon:`${S}-info-icon`},A=(0,o.eU)(!1),C=(0,y.Ju)(function(){let e=(0,a.wA)(),r=(0,f.jK)(),n=function(e){switch(e){case E.M.DEFAULT:case E.M.SRGB:return E.M.SRGB;case E.M.DISPLAY_P3:return E.M.DISPLAY_P3}}(r.colorProfilePreference),o=T(n,(0,g.Av)()),y=function(e){switch(e){case E.M.SRGB:return(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.description");case E.M.DISPLAY_P3:return(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.description")}}(n),[S,C]=(0,s.fp)(A);return i.useEffect(()=>(S||C(!0),()=>{S&&((0,c.YQ)({id:"user_color_profile_modal_closed"}),C(!1))}),[C,S]),i.createElement(_.fu,{name:"color_management_user_color_profile_modal"},i.createElement(v.XV,{title:(0,u.t)("fullscreen.color_management.user_color_profile_modal.title"),minWidth:320,maxWidth:320,onClose:()=>{e((0,h.AS)())}},i.createElement("div",{className:I.yl},i.createElement("label",{className:I.fK},i.createElement(p.E,null,(0,u.tx)("fullscreen.color_management.user_color_profile_modal.options.label"))),i.createElement(l.z,{isHorizontal:!0,className:I.R$,value:n,onChange:e=>{(0,f.it)({colorProfilePreference:e,id:r.id})}},i.createElement(l.Z,{className:I.hO,value:E.M.SRGB,dataTestId:w.srgbOption},(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.srgb.value")),i.createElement(l.Z,{className:I.hO,value:E.M.DISPLAY_P3,dataTestId:w.p3Option},(0,u.t)("fullscreen.color_management.user_color_profile_modal.options.display_p3.value"))),i.createElement(p.E,{color:"secondary"},y),i.createElement("div",{className:I.jH}),i.createElement(p.E,{color:"secondary"},(0,u.tx)("fullscreen.color_management.user_color_profile_modal.descriptions.affected_files")),i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(d.Ph,{newTab:!0,trusted:!0,href:b.s},(0,u.tx)("rcs.rcs_shared.learn_more")),i.createElement("div",{className:I.jH}),i.createElement("div",{className:I.yF}),i.createElement("div",{className:I.cd},i.createElement(m.In,{icon:"warning"===o.type?"warning-32":"info-32",dataTestId:"warning"===o.type?w.supportDetailsWarningIcon:w.supportDetailsInfoIcon}),i.createElement("span",null,o.text,"warning"===o.type&&i.createElement(i.Fragment,null,i.createElement("span",{style:{whiteSpace:"pre"}}," "),i.createElement(d.Ph,{newTab:!0,trusted:!0,href:b.s},(0,u.tx)("rcs.rcs_shared.learn_more"))))))))},"user_color_profile_modal");function N(){return{name:"user-color-profile-menu-option",displayForQuickCommand:"user-color-profile-quick-action",callback:(e,r,n)=>{n((0,h.to)({type:C}))}}}},332086:(e,r,n)=>{n.d(r,{FF:()=>T,G$:()=>N});var i=n(411855),a=n(188507),o=n(946689),s=n(950964),l=n(939863),c=n(63397),d=n(662275),u=n(931828),m=n(107877),p=n(672517),h=n(143678),_=n(237870),g=n(928491),f=n(195907),E=n(474742),y=n(46526),b=n(406363),v=n(884992);let I={INDIGO:b.S0,VIOLET:b.xl,RED:b.qE,GREEN:b.Ts,GOLD:b.fr};var T=(e=>(e[e.COMMENTS=0]="COMMENTS",e[e.OPT_IN=1]="OPT_IN",e))(T||{});let S=(e,r)=>e.indexOf(r)>-1;function w({user:e,variations:r}){return i.createElement(i.Fragment,null,i.createElement(g.Ro,{className:v.my,entity:e,size:100}),S(r,0)&&i.createElement("div",null,i.createElement(y.eR,{backgroundColor:I.RED,position:{top:"12px",left:"12%",transform:"rotate(-12deg)"}}),i.createElement(y.eR,{backgroundColor:I.INDIGO,position:{top:"-40px",left:"9%",transform:"rotate(60deg)"}}),i.createElement(y.eR,{backgroundColor:I.VIOLET,position:{top:"-10px",left:"27%",transform:"rotate(20deg)"}}),i.createElement(y.eR,{backgroundColor:I.GREEN,position:{top:"-30px",left:"70%",transform:"rotate(30deg)"}}),i.createElement(y.eR,{backgroundColor:I.GOLD,position:{top:"8px",left:"88%",transform:"rotate(-20deg)"}})),i.createElement("h1",{className:v.wx},e?.handle),i.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.here_s_how_you_ll_look_when_using_the_figma_community")),i.createElement("h3",{className:v.N4},(0,l.tx)("community.onboarding.change_your_photo_or_name_in_your_settings"),S(r,0)&&i.createElement(i.Fragment,null,i.createElement("br",null),(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you"))))}function A(){return i.createElement(i.Fragment,null,i.createElement("h1",{className:v.wx},(0,l.tx)("community.onboarding.follow_our_guidelines")),i.createElement("h2",{className:v.m_},(0,l.tx)("community.onboarding.when_leaving_comments_we_ask_that_you")))}function C(){return i.createElement("div",{className:v.Il},i.createElement("li",null,i.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.stay_on_topic")),i.createElement(y.iF,null)),i.createElement("li",null,i.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.be_respectful")),i.createElement(y.B1,null)),i.createElement("li",null,i.createElement("div",{className:v.Qk},(0,l.tx)("community.onboarding.read_our_guidelines",{guidelinesLink:i.createElement("a",{href:"https://help.figma.com/hc/articles/360038510573-Figma-Community-Guidelines",target:"_blank"},(0,l.tx)("community.onboarding.guidelines"))})),i.createElement(y.$E,null)))}let N="COMMUNITY_OPT_IN";(0,_.Ju)(function({userId:e,onFinish:r,variations:n}){let _=(0,a.d4)(e=>e.user);e=e||_?.id;let g=(0,a.wA)(),y=()=>{g(d.Ce())},b=()=>{g(u.b({[f.Pn]:!0}))},I=S(n,0)&&1===n.length,T=S(n,0)?1===n.length?v.aq:v.Qc:v.FT;return i.createElement(E.aF,{className:T},i.createElement(p.fu,{name:h.e0.PROFILE_CREATE_MODAL,properties:{action:m.s0.COMMUNITY_OPT_IN,communityHubEntity:m.ZO.USERS,communityHubEntityId:e}},S(n,1)&&_?i.createElement(w,{user:_,variations:n}):i.createElement(A,null),S(n,0)&&i.createElement(C,null),i.createElement(s.Go,{type:"submit",className:v.C5,onClick:()=>{y();let i=S(n,1);i&&(g((0,c.h1)({onSuccess:r})),b()),S(n,0)&&e&&(b(),i||r?.())}},S(n,0)?(0,l.tx)("community.onboarding.got_it"):(0,l.tx)("community.onboarding.looks_good")),!I&&i.createElement(o.tM,{className:v.IK,onClick:y},(0,l.tx)("general.cancel"))))},N)},79190:(e,r,n)=>{n.d(r,{OZ:()=>V}),n(379683);var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(126049),c=n(207286),d=n(752553),u=n(768137),m=n(799569),p=n(976999),h=n(493323),_=n(154254),g=n(47506),f=n(939863),E=n(392592),y=n(175290),b=n(896474),v=n(396147),I=n(662275),T=n(672517),S=n(710667),w=n(304769),A=n(545697),C=n(447526),N=n(694687),L=n(99506),O=n(820113),R=n(135163),P=n(756704),D=n(679892),k=n(237870),M=n(807577),F=n(474742),x=n(603568);function U(e,r){return r(I.Lo()),D.Eh.postDevModeOptInTermsAccepted({orgId:e}).catch(e=>(r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.failed_to_agree_to_opt_in"),error:!0})),Promise.reject(e))).then(()=>(0,g.YQ)({id:"dev_mode_opt_in_success_event"}))}function B(){let e=(0,a.wA)();return i.createElement(m.Jn,{onClick:()=>e(I.Lo()),innerText:"Close"})}(0,k.Ju)(function(e){let r=(0,a.wA)(),n=(0,N.sZ)(),o=parseInt(e.emailRequestId??""),s=!Number.isNaN(o);return i.createElement(i.Suspense,{fallback:i.createElement("div",{className:x.$1},i.createElement(h.Z_,null))},i.createElement(T.fu,{name:"DevMode Opt-in Page",properties:{org_id:n.id,source:s?"email":"notif"}},i.createElement("div",{className:x.$1},i.createElement(G,{org:n,onAccept:()=>{let e=U(n.id,r);return s&&e.then(()=>{P.w.approveRequests({plan_id:n.id,plan_type:v.ps.ORG,included_request_ids:[o.toString()],selection_method:v.Xv.EMAIL}).catch(e=>(r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.upgrade_seats_error",{seatCount:1}),error:!0})),Promise.reject(e))).then(()=>r(E.F.enqueue({message:(0,f.t)("dev_mode_opt_in.modal.upgraded_seats",{seatCount:1}),type:"requests-approved"})))}),e},showNotNow:!1,hasAssociatedSeats:s})),i.createElement("div",{className:x.NX,style:{position:"absolute",top:24,right:24}},i.createElement(B,null))))},"DEV_MODE_OPT_IN_FULL_SCREEN_MODAL");let V=(0,k.Ju)(function(e){let r=(0,a.wA)(),n=(0,N.sZ)();return i.createElement(i.Suspense,{fallback:i.createElement(M.N,{hiddenTitle:(0,f.tx)("dev_mode_opt_in.modal.header"),estimatedWidth:520,estimatedHeight:520})},i.createElement(T.fu,{name:"DevMode Opt-in Modal",properties:{org_id:n.id,source:e.source?e.source:"dashboard"}},i.createElement(F.aF,{className:_.cx.overflowHidden.$,padding:40,size:520},i.createElement(G,{org:n,onAccept:()=>{let i=U(n.id,r);e.onOptInUpgrade&&i.then(()=>e.onOptInUpgrade()),e.onOptInShowModal&&i.then(()=>e.onOptInShowModal())},showNotNow:!0,hasAssociatedSeats:!!e.onOptInUpgrade}),i.createElement("div",{style:{position:"absolute",top:4,right:4}},i.createElement(B,null)))))},"DEV_MODE_OPT_IN_PARTIAL_MODAL");function G(e){let r=(0,a.wA)(),n=(0,c.Xf)(e.org.id),o=(0,l.A)(e.onAccept,750,{leading:!0,trailing:!1}),m=i.createElement("a",{className:_.cx.cursorPointer.fontMedium.$,href:"https://help.figma.com/hc/articles/19813618057623",target:"_blank",rel:"noopener noreferrer"},(0,f.t)("dev_mode_opt_in.modal.guide_to_dev_mode_billing")),h=i.createElement("a",{className:_.cx.cursorPointer.fontMedium.$,href:"https://www.figma.com/pricing",target:"_blank",rel:"noopener noreferrer"},"figma.com/pricing"),g=n.data?.currency??"usd",E=new O.vr(g),v=e.org.billing_tier??L.Ag.ORG,N=new A.X([w.ud.DEV_MODE]).dict(e=>({currency:g,billableProductKey:e,tier:(0,C.h)(v),renewalTerm:R.IX.YEAR,unit:R.IX.MONTH})),P=(0,S.ic)(N,{planParentId:e.org.id,planType:L.OL.ORG},S.Fq.ADMIN_SETTINGS),[D]=(0,d.mI)(P),k="loaded"===n.status&&"loaded"===D.status?i.createElement(i.Fragment,null,E.formatMoney(D.data[w.ud.DEV_MODE].amount)):i.createElement(p.Wi,{className:_.cx.h8.w20.inlineBlock.$});return i.createElement("div",{className:x.hQ},i.createElement("div",{className:x.rf},i.createElement("div",{className:x.wx},(0,f.tx)("dev_mode_opt_in.modal.header")),i.createElement("div",{className:s()(x.uI,_.cx.mb24.$)},e.hasAssociatedSeats?(0,f.tx)("dev_mode_opt_in.modal.subheader_with_seats"):(0,f.tx)("dev_mode_opt_in.modal.subheader")),i.createElement("div",{className:x.fZ},i.createElement("div",{className:_.cx.mt16.ml16.mr16.$},i.createElement(y.Y,{width:"fill-parent",spacing:8},i.createElement(b.In,{icon:"file-design-with-devmode-32-file-type"}),i.createElement("span",null,i.createElement("div",{className:x.uI},(0,f.tx)("dev_mode_opt_in.modal.pricing.with_design.main_text")),i.createElement("div",{className:x.Yg},(0,f.tx)("dev_mode_opt_in.modal.pricing.with_design.sub_text"))))),i.createElement("div",{className:x.Ot}),i.createElement("div",{className:_.cx.ml16.mr16.mb16.$},i.createElement(y.Y,{width:"fill-parent",spacing:8},i.createElement(b.In,{icon:"file-devmode-32-file-type"}),i.createElement("span",null,i.createElement("div",{className:x.uI},(0,f.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.main_text")),i.createElement("div",{className:x.Yg},(0,f.tx)("dev_mode_opt_in.modal.pricing.dev_mode_only.sub_text")))))),i.createElement("div",{className:x.Yg},i.createElement("div",{className:_.cx.mt24.fontMedium.$},(0,f.tx)("dev_mode_opt_in.modal.description_question")),i.createElement("div",{className:_.cx.mt8.$},(0,f.tx)("dev_mode_opt_in.modal.description_provision",{pricingLink:h,plan:v===L.Ag.ORG?(0,f.t)("dev_mode_opt_in.modal.org"):(0,f.t)("dev_mode_opt_in.modal.ent"),price:k,billingLink:m}))),i.createElement(u.vd,{className:s()(x.x6,_.cx.mt24.$),type:"button",onClick:o},e.hasAssociatedSeats?(0,f.tx)("dev_mode_opt_in.modal.agree_with_seats"):(0,f.tx)("dev_mode_opt_in.modal.agree")),e.showNotNow&&i.createElement(T.jm,{role:"button",className:s()(_.cx.mt8.flex.justifyCenter.$,x.qD),onClick:()=>r(I.Lo())},(0,f.tx)("dev_mode_opt_in.modal.not_now"))))}},765165:(e,r,n)=>{n.d(r,{K:()=>u});var i=n(411855),a=n(91408),o=n(153234),s=n(816660),l=n(837746),c=n(710877);let d=(0,a.jz)(l.LdP);function u({allowedResizeDirections:e,onEdgeDoubleClick:r,resizeTo:n,onResizeEnd:a,getCurrentContainerBounds:l,lockAspectRatio:c,isResizing:u,setIsResizing:h,setResizeDirections:_,hidden:g,recordingKey:f,mirrorResizeHorizontally:E=!1}){let{startResizing:y}=function({resizeTo:e,getCurrentContainerBounds:r,isResizing:n,setIsResizing:a,setResizeDirections:l,onResizeEnd:c,lockAspectRatio:u,recordingKey:m,hidden:h,mirrorResizeHorizontally:_=!1}){let g=i.useRef(),f=i.useRef(),E=i.useRef([]),y=i.useRef({x:0,y:0}),[b,v]=i.useState(!1),I=i.useCallback(()=>{v(!1),a(void 0),l([]),E.current=[],c?.()},[v,a,c,l]),T=i.useCallback(({x:r,y:i},a,o)=>{if(!n||!f.current||!e){v(!1);return}if(n&&0===o){I();return}let l=u||a,c={x:r-y.current.x,y:i-y.current.y};c.y=Math.max(c.y,d);let{left:m,top:h,right:g,bottom:E}=p(c,f.current,n,l,_);e({[s.OP.TOP]:h!==f.current.top,[s.OP.BOTTOM]:E!==f.current.bottom,[s.OP.LEFT]:m!==f.current.left,[s.OP.RIGHT]:g!==f.current.right},{left:m,top:h,right:g,bottom:E,lockAspectRatio:l})},[n,u,_,e,I]),S=i.useRef(I);S.current=I,(0,i.useEffect)(()=>()=>{n&&S.current()},[n]);let w=o.rf(m,"mouseup",I),A=o.rf(m,"mousemove",i.useCallback(e=>{if(h)return o.aH;e.stopPropagation(),e.preventDefault();let r={x:e.clientX,y:e.clientY};if(g.current=r,n)T(r,e.shiftKey,e.buttons);else{let e=Object.create(null);E.current.forEach(r=>{e[r]=!0}),l(E.current),a(e)}},[h,n,T,a,l]),{recordMetadata:e=>({clientX:e.clientX,clientY:e.clientY}),playbackMetadata:e=>({clientX:e.clientX,clientY:e.clientY})}),C=o.v_(m,"keydown",i.useCallback(e=>{e.shiftKey&&g.current&&T(g.current,!0)},[T])),N=o.v_(m,"keyup",i.useCallback(e=>{g.current&&T(g.current,e.shiftKey)},[T]));return(0,i.useEffect)(()=>{if(b)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",w),document.addEventListener("keydown",C),document.addEventListener("keyup",N),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",w),document.removeEventListener("keydown",C),document.removeEventListener("keyup",N)}},[b,A,w,C,N]),{startResizing:i.useCallback((e,n)=>{E.current=e;let i=r();f.current=i;let a={x:e.includes(s.OP.LEFT)?i.left:e.includes(s.OP.RIGHT)?i.right:n.x,y:e.includes(s.OP.TOP)?i.top:e.includes(s.OP.BOTTOM)?i.bottom:n.y};y.current={x:n.x-a.x,y:n.y-a.y},v(!0)},[r,v]),stopResizing:I}}({resizeTo:n,getCurrentContainerBounds:l,onResizeEnd:a,isResizing:u,setIsResizing:h,setResizeDirections:_,lockAspectRatio:c,hidden:g,recordingKey:f,mirrorResizeHorizontally:E});return g?null:i.createElement("div",null,Object.values(s.OP).map((n,a)=>e.includes(n)?i.createElement(m,{key:a,directions:[n],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n)}):null),[s.OP.TOP,s.OP.BOTTOM].map(n=>[s.OP.LEFT,s.OP.RIGHT].map((a,s)=>e.includes(n)&&e.includes(a)?i.createElement(m,{key:s,directions:[n,a],startResizing:y,onDoubleClick:r,recordingKey:o.Pt(f,n,a)}):null)))}class m extends o.o6{constructor(){super(...arguments),this.onMouseDown=e=>o.cZ(this,"mousedown",r=>{r.stopPropagation(),r.preventDefault(),this.props.startResizing(e,{x:r.clientX,y:r.clientY})}),this.onDoubleClick=o.cZ(this,"dblclick",()=>{if(!this.props.onDoubleClick)return o.aH;this.props.onDoubleClick?.()}),this.directionsToStyle=e=>{if(1===e.length)switch(e[0]){case s.OP.TOP:return c.In;case s.OP.BOTTOM:return c.Mo;case s.OP.LEFT:return c.Wg;case s.OP.RIGHT:return c.N2}else if(2===e.length){if(e[0]===s.OP.TOP&&e[1]===s.OP.RIGHT)return c.Mq;if(e[0]===s.OP.TOP&&e[1]===s.OP.LEFT)return c.pg;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.RIGHT)return c.my;if(e[0]===s.OP.BOTTOM&&e[1]===s.OP.LEFT)return c.Do}}}render(){return i.createElement("div",{className:this.directionsToStyle(this.props.directions),onMouseDown:this.onMouseDown(this.props.directions),onDoubleClick:this.onDoubleClick})}}let p=(e,r,n,i,a)=>{let{x:o,y:l}=e,c=n[s.OP.LEFT]?o:r.left,d=n[s.OP.RIGHT]?o:r.right,u=n[s.OP.TOP]?l:r.top,m=n[s.OP.BOTTOM]?l:r.bottom;if(a){let e=(r.left+r.right)/2;n[s.OP.LEFT]?d=e+(e-o):n[s.OP.RIGHT]&&(c=e-(o-e))}if(i){let e=(r.right-r.left)/(r.bottom-r.top-s.uF),i=n[s.OP.LEFT]?r.left-o:o-r.right,a=n[s.OP.TOP]?r.top-l:l-r.bottom,p=n[s.OP.LEFT]||n[s.OP.RIGHT],h=n[s.OP.TOP]||n[s.OP.BOTTOM];if(p&&h){let o,l;let p=i/e;p<a?(o=i,l=p,n[s.OP.TOP]?u=r.top-l:m=r.bottom+l):(o=a*e,l=a,n[s.OP.LEFT]?c=r.left-o:d=r.right+o)}else if(p){let i=n[s.OP.LEFT]?r.left-o:o-r.right;m=r.bottom+i/e}else if(h){let i=n[s.OP.TOP]?r.top-l:l-r.bottom;d=r.right+i*e}}return{left:c,top:u,right:d,bottom:m}}},425569:(e,r,n)=>{n.d(r,{Qn:()=>b});var i=n(411855),a=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(115630),d=n(517333),u=n(737947),m=n(966712),p=n(154254),h=n(964389),_=n(939863),g=n(662275),f=n(672517),E=n(237870);let y=(0,m.ck)("bbeffb0922b3841d79ccfa204400c7dc2c399628"),b=(0,E.Ju)(function(e){let r=(0,a.d4)(e=>e.modalShown?.data?.onImportCompleted),n=(0,a.d4)(e=>e.modalShown?.data?.onConnectClick),m=(0,a.wA)(),E=()=>{m(g.AS()),r?.()},b=d.eD?(0,_.tx)("rcs.jamboard.open_in_browser_disclaimer.title"):(0,_.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.title"),v=d.eD?(0,_.tx)("rcs.jamboard.open_in_browser_disclaimer.button"):(0,_.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.button"),I=d.eD?(0,_.tx)("rcs.jamboard.open_in_browser_disclaimer.desc1"):(0,_.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.desc1"),T=d.eD?()=>{E(),u.Ay.redirect(window.location.href,"_blank")}:n,S=o.hS({...e,onClose:E});return i.createElement(f.fu,{name:"google_connect_disclaimer_modal"},i.createElement(c.v,{mode:"whiteboard"},i.createElement(s.bL,{width:360,manager:S,height:"fixed"},i.createElement(l.vo,null,i.createElement(l.nB,{padding:{top:24,bottom:8,left:16,right:8}},i.createElement("img",{src:y,width:30,height:26,className:p.cx.mb8.$,alt:(0,_.t)("rcs.jamboard.google_drive_icon.alt")}),i.createElement("h2",{className:p.cx.mb8.font18.fontSemiBold.lh24.$},b),i.createElement("p",{className:p.cx.pb8.font11.lh16.$},I)),i.createElement(l.wi,null,i.createElement(l.jk,null,i.createElement(h.$z,{variant:"secondary",onClick:E},(0,_.tx)("rcs.jamboard.connect_to_google_drive_disclaimer.cancel")),i.createElement(h.$z,{variant:"primary",onClick:T},v)))))))},"ConnectToGoogleDriveDisclaimerModal")},826695:(e,r,n)=>{var i=n(411855),a=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(629019),d=n.n(c),u=n(776250),m=n(133537),p=n(586459),h=n(563706),_=n(946689),g=n(950964),f=n(135876),E=n(154254),y=n(881388),b=n(964389),v=n(939863),I=n(950949),T=n(662275),S=n(672517),w=n(335682),A=n(237870),C=n(160018),N=n(309325),L=n(411144);(0,A.Ju)(function(e){let r=(0,a.wA)(),[n,c]=i.useState(""),[A,O]=i.useState(!1),R=(0,w.tS)(),P=(0,a.d4)(e=>R?e.loadingState[I.f.loadingKeyForPayload({fileKey:R,emailAddress:n})]===p.r.LOADING:null),D=o.hS({...e,onClose:()=>{(0,u.sx)("google_meet_claim_email_modal_closed",{fileKey:R}),r(T.AS())}});return i.createElement(S.fu,{name:"google_device_try_file_claim_modal"},i.createElement(s.bL,{manager:D,width:420},i.createElement(l.vo,null,i.createElement(l.nB,{padding:32},i.createElement("div",{className:L.FS},i.createElement("h1",{className:L.DX},(0,v.tx)("google_device_try_file_modal.enter_email"))),i.createElement(g.k0,{multiple:1}),i.createElement("div",{className:L.FS},i.createElement("div",{className:L.Kc},(0,v.tx)("google_device_try_file_modal.enter_email.description"))),i.createElement(g.k0,{multiple:3}),i.createElement(_.il,{autoFocus:!0,type:"email",className:d()(L._2,A&&L.cC),placeholder:(0,v.t)("google_device_try_file_modal.enter_email.placeholder_email"),onChange:e=>{c(e.target.value)},value:n}),A&&i.createElement("div",{className:L.mV},(0,v.tx)("google_device_try_file_modal.enter_email.error_message")),i.createElement(g.k0,{multiple:2}),i.createElement(b.lR,{type:"submit",onClick:i=>{if(i.preventDefault(),i.stopPropagation(),null==n||!1===(0,m.xf)(n)||!R){O(!0);return}if(!R){r(y.s.error((0,v.t)("google_device_try_file_modal.error_saving_board")));return}e.onSubmitEmail({fileKey:R,emailAddress:n})}},i.createElement(f.x,{isLoading:!!P,className:E.cx.flex.justifyCenter.$},()=>(0,v.tx)("google_device_try_file_modal.enter_email.button"))),i.createElement(g.k0,{multiple:3}),i.createElement("div",{className:L.NJ},(0,v.tx)("google_device_try_file_modal.disclaimer",{tos:i.createElement(N.V,{url:h.Ay.isMeetDevice?C.A:C.Uw,title:(0,v.t)("google_device_try_file_modal.onboarding_disclaimer_tos")}),privacy_policy:i.createElement(N.V,{url:h.Ay.isMeetDevice?C.bO:C.JD,title:(0,v.t)("google_device_try_file_modal.onboarding_disclaimer_privacy_policy")})})),i.createElement(g.k0,{multiple:1})))))},"GOOGLE_DEVICE_TRY_FILE_CLAIM_MODAL")},492167:(e,r,n)=>{var i=n(411855),a=n(188507),o=n(862350),s=n(951792),l=n(288006),c=n(966712),d=n(950964),u=n(881388),m=n(964389),p=n(939863),h=n(662275),_=n(672517),g=n(335682),f=n(237870),E=n(411144);(0,f.Ju)(function(e){let{email:r,onChangeEmail:n}=e,f=(0,a.wA)(),y=(0,g.tS)(),b=o.hS({...e,preventUserClose:!0});return i.createElement(_.fu,{name:"google_device_try_file_received_email_modal"},i.createElement(s.bL,{manager:b,width:420},i.createElement(l.vo,null,i.createElement(l.nB,{padding:32},i.createElement("img",{src:(0,c.ck)("b0feff5e4abc5e66f99064463f2ad5d0a7f6c072.png"),alt:"",className:E.ZQ}),i.createElement(d.k0,{multiple:2}),i.createElement("div",{className:E.FS},i.createElement("h1",{className:E.DX},(0,p.tx)("google_device_try_file_modal.got_mail"))),i.createElement(d.k0,{multiple:1}),i.createElement("div",{className:E.FS},i.createElement("div",{className:E.Kc},(0,p.tx)("google_device_try_file_modal.got_mail.description",{email:i.createElement("p",{className:E.Fx},r)}))),i.createElement(d.k0,{multiple:3}),i.createElement(m.lR,{onClick:e=>{e.preventDefault(),e.stopPropagation(),f(h.Ce())}},(0,p.tx)("google_device_try_file_modal.got_mail.close")),i.createElement(d.k0,{multiple:3}),i.createElement("div",{className:E.NJ},(0,p.tx)("google_device_try_file_modal.got_mail.email_not_received",{send_again_link:i.createElement(m.$z,{variant:"link",onClick:n=>{if(n.preventDefault(),n.stopPropagation(),!y){f(u.s.error((0,p.t)("google_device_try_file_modal.error_saving_board")));return}e.onResendEmail({fileKey:y,emailAddress:r,isResentEmail:!0})}},(0,p.tx)("google_device_try_file_modal.got_mail.email_not_received.send_again"))})),i.createElement(d.k0,{multiple:2}),i.createElement("div",{className:E.NJ},(0,p.tx)("google_device_try_file_modal.got_mail.wrong_address",{use_different_email_link:i.createElement(m.$z,{variant:"link",onClick:e=>{e.preventDefault(),e.stopPropagation(),n()}},(0,p.tx)("google_device_try_file_modal.got_mail.wrong_address.use_different_email"))}))))))},"GOOGLE_DEVICE_TRY_FILE_RECEIVED_EMAIL_MODAL")},963719:(e,r,n)=>{n.d(r,{J:()=>b,M:()=>y});var i=n(411855),a=n(511617),o=n(737947),s=n(966712),l=n(946689),c=n(322611),d=n(154254),u=n(939863),m=n(694687),p=n(237870),h=n(355025),_=n(929018),g=n(967063);let f=d.cx.colorIcon.h32.w28.pb32.$,E=d.cx.w300.maxWFull.font13.h40.cursorPointer.$,y="LINK_EXPIRED_MODAL",b=(0,p.Ju)(function(){let{frame_context:e}=(0,s.Ay)(),r=(0,a.GZ)()&&e?.type==="embed",n=(0,m.sZ)();return(0,h.K)()&&n?i.createElement(_.H,{org:n}):i.createElement(c.u,{imageSrc:g.A,imageClassName:f,headerText:(0,u.t)("link_expired.header"),secondaryText:(0,u.t)("link_expired.description")},!r&&i.createElement(l.vd,{className:E,type:"submit",onClick:()=>{o.Ay.redirect("/")}},(0,u.tx)("link_expired.go_back_to_figma")))},y)},447402:(e,r,n)=>{n.d(r,{Lu:()=>C});var i=n(411855),a=n(188507),o=n(922827),s=n(776250),l=n(201888),c=n(737947),d=n(966712),u=n(563706),m=n(153234),p=n(946689),h=n(939863),_=n(738269),g=n(809831),f=n(356390),E=n(335682),y=n(239671),b=n(237870),v=n(351596),I=n(474742),T=n(651104),S=n(373494);function w(e,r={}){(0,s.sx)("memory_warning_event",{currentAllocatedBytes:o.hMR?.getTotalUsedHeapMemory(),maxAllocatedBytes:o.hMR?.getMaxUsedHeapMemory(),...e,...r})}var A=(e=>(e.SHOW_RELOAD="showReload",e.SHOW_RECOVERY_MODE="showRecoveryMode",e.SHOW_BROWSER_UPGRADE="showBrowserUpgrade",e.SHOW_BROWSER_UPGRADE_AND_DESKTOP_DOWNLOAD="showBrowserUpgradeAndDesktop",e))(A||{});let C="memory-warning-modal";function N(e){let r=f.Y5.hasDesktopApp(),n=(0,a.d4)(e=>e.mirror.appModel.isReadOnly),s=(0,a.d4)(e=>e.selectedView),b=(0,g.XE)(s)===y.nT.Design,A=(0,E.tS)()||d.Ay().editing_file?.source_file?.key||"",C=(0,a.wA)(),N={view:"fullscreen",editorType:b?y.nT.Design:y.nT.Whiteboard,fileKey:A,isRecoveryMode:!0},L=o.hMR.getHeapMemoryMode()===o.rCR.RECOVERY,O=n||L?"showReload":u.Ay.isWasm4gbSupported?"showRecoveryMode":r?"showBrowserUpgrade":"showBrowserUpgradeAndDesktop",R={chrome:"https://support.google.com/chrome/answer/95414",safari:"https://support.apple.com/en-us/HT204416",firefox:"https://support.mozilla.org/en-US/kb/update-firefox-latest-release",msedge:"https://support.microsoft.com/en-us/topic/update-to-the-new-microsoft-edge-182d0668-e3f0-49da-b8bb-db5675245dc2"},P=i.createElement(p.CY,{onClick:()=>f.Y5.navigateToURL(u.Ay.mac?"/download/desktop/mac":"/download/desktop/win",o.jkn.NEW_TAB),trusted:!0},(0,h.tx)("memory_warning_modal.desktop_app_download_link")),D="showReload"===O?{title:(0,h.t)("memory_warning_modal.reload_modal_title"),content:(0,h.t)("memory_warning_modal.reload_modal_content"),contentCTA:(0,h.t)("memory_warning_modal.reload_modal_content_cta"),buttonCTA:(0,h.t)("memory_warning_modal.reload_page_button"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showRecoveryMode"===O?{title:(0,h.t)("memory_warning_modal.recovery_mode_modal_title"),content:(0,h.t)("memory_warning_modal.recovery_mode_modal_out_of_memory"),contentCTA:(0,h.t)("memory_warning_modal.recovery_mode_modal_content"),buttonCTA:(0,h.t)("memory_warning_modal.recovery_mode_button"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.learn_more"),buttonExternalLink:null,secondaryButtonExternalLink:"https://help.figma.com/hc/articles/360040528173-Reduce-memory-usage-in-files/"}:"showBrowserUpgrade"===O?{title:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_open_in_desktop"),buttonCTA:(0,h.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:(0,h.t)("memory_warning_modal.open_in_desktop"),buttonExternalLink:u.Ay.browserType&&R[u.Ay.browserType]||null,secondaryButtonExternalLink:null}:{title:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_title"),content:(0,h.t)("memory_warning_modal.old_browser_out_of_memory_modal_content"),contentCTA:null,buttonCTA:(0,h.t)("memory_warning_modal.old_browser_primary_button_cta"),secondaryButtonCTA:null,buttonExternalLink:u.Ay.browserType&&R[u.Ay.browserType]||null,secondaryButtonExternalLink:null};return e.isBranching?i.createElement(v.E,null):i.createElement(I.aF,{size:"small",className:S.yl,disableClickOutsideToHide:!0},i.createElement("div",{className:T.GK},D.title),i.createElement("div",{className:T.jE},i.createElement("div",null,D.content,i.createElement("br",null),"\xa0",i.createElement("br",null)),"showBrowserUpgradeAndDesktop"===O?(0,h.tx)("memory_warning_modal.old_browser_out_of_memory_modal_content_cta_and_download_desktop",{desktopAppLink:P}):D.contentCTA,i.createElement("br",null)),i.createElement("div",{className:S.v0},D.secondaryButtonCTA&&i.createElement(p.nR,{recordingKey:m.Pt(e,"crash"),onClick:()=>{D.secondaryButtonCTA===(0,h.t)("memory_warning_modal.learn_more")&&w({warningEvent:"LEARN_MORE",fileKey:A},{isReadOnly:n}),"showBrowserUpgrade"===O&&(0,l.Sr)(location.href,l.B3.OOM_MODAL)}},i.createElement("a",{className:T.Xi,href:D.secondaryButtonExternalLink||void 0,target:"_blank"},D.secondaryButtonCTA)),i.createElement(p.$$,{recordingKey:m.Pt(e,"crash"),className:S.pL,onClick:()=>{D.buttonCTA===(0,h.t)("memory_warning_modal.recovery_mode_button")&&w({warningEvent:"OPEN_RECOVERY_MODE",fileKey:A},{isReadOnly:n}),("showRecoveryMode"===O||n)&&C(_.$T(N)),("showReload"===O||"showRecoveryMode"===O)&&c.Ay.reload("Memory warning panel")}},i.createElement("a",{className:T.Zb,href:D.buttonExternalLink||void 0,target:"_blank"},D.buttonCTA))))}(0,b.qK)(C,e=>{let{isBranching:r}=e.modalShown.data;return i.createElement(N,{isBranching:r})})},63666:(e,r,n)=>{n.d(r,{Ay:()=>w,CR:()=>R,NJ:()=>L,OA:()=>O,gm:()=>N,uv:()=>S});var i=n(411855),a=n(463033),o=n(572304);n(629019);var s=n(91408),l=n(602126),c=n(860601),d=n(799569),u=n(101505),m=n(672517),p=n(108975),h=n(168039),_=n(74505),g=n(457630),f=n(746806),E=n(884342),y=n(485861),b=n(837746),v=n(275596),I=n(630834),T=n(304516);let S=(0,s.hG)(b.W8e);function w(e){let r=(0,p.Yk)(),n=(0,g._X)({subscribeToUpdates_expensive:!0}),a=i.useRef({x:0,y:0,width:0,height:0,angle:0,absoluteBounds:{x:0,y:0,width:0,height:0},page:o.AD}),[s,l]=i.useState({left:0,top:0,pointerOffset:0,pointerPosition:0}),c=i.useMemo(()=>(0,E.P7)(e.pointerType||E.gm.arrow),[e.pointerType]),d=e.topPadding||-c.pointerTargetOverlap,u=i.useCallback(()=>{if(!a.current){l(null);return}let i=(0,g.Yb)(n,a.current.absoluteBounds),o={x:i.x+n.x,y:i.y+n.y,height:i.height,width:i.width};l((0,E.my)({width:e.width,height:e.height,targetRect:o,positioningConstants:c,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:d,arrowPosition:e.arrowPosition,targetType:"canvas",viewportTopOffset:n.y,viewportBottomOffset:r}))},[e.height,e.width,c,e.alignPointerToLeft,e.shouldCenterArrow,d,r,e.arrowPosition,n]);return i.useEffect(()=>{let r=(0,_.EE)(`useCanvasNodeRepositioning-${e.targetKey}`,[e.targetKey],e=>{a.current=e.position,u()});return a.current=r.currentNodePosition[e.targetKey]?.position||null,u(),()=>{(0,_.lB)(`useCanvasNodeRepositioning-${e.targetKey}`)}},[e.targetKey,u]),(0,y.pc)({location:s,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"canvas"}),s}function A(e,r){switch(e){case f.F_.TOP:case f.F_.BOTTOM:return{left:r};case f.F_.LEFT_TITLE:case f.F_.RIGHT_BODY:return{top:r};case f.F_.RIGHT_TITLE:return{}}}let C={[f.F_.TOP]:{foregroundStyle:v.FQ,backgroundStyle:v.oX},[f.F_.BOTTOM]:{foregroundStyle:v.nW,backgroundStyle:v.a5},[f.F_.LEFT_TITLE]:{foregroundStyle:v.Hn,backgroundStyle:v.gF},[f.F_.RIGHT_TITLE]:{foregroundStyle:v.Ar,backgroundStyle:v.Ny},[f.F_.RIGHT_BODY]:{foregroundStyle:v.Ar,backgroundStyle:v.Ny}};function N(e){let{foregroundStyle:r,backgroundStyle:n}=C[e.arrowPosition],a={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.arrowOffset?A(e.arrowPosition,e.arrowOffset):{}},o={...e.modalColor?{backgroundColor:e.modalColor}:{},...e.pointerBorder?{backgroundColor:e.pointerBorderColor||"#444444"}:{},...e.arrowOffset?A(e.arrowPosition,e.arrowOffset):{}};return i.createElement(i.Fragment,null,i.createElement("div",{"aria-hidden":!0,className:n,style:o}),i.createElement("div",{"aria-hidden":!0,className:r,style:a}))}function L(e){let r=(0,E.P7)(E.gm.arrow),n=e.width||r.defaultModalWidth,a=e.backgroundColor,o=e.onVisibilityChange,[s,l]=i.useState(0),c=i.useCallback(e=>{null!==e&&l(e.getBoundingClientRect().height)},[]),u=(e.isCanvasNode?w:y.eP)({targetKey:e.targetKey,height:s,width:n+2*S,topPadding:e.topPadding,alignPointerToLeft:e.alignPointerToLeft,shouldScrollTargetIntoView:e.shouldScrollTargetIntoView,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost}),m=!!u;if(i.useEffect(()=>{o&&o(m)},[m,o]),!u)return null;let p={left:u.left,top:u.top,width:n};e.topOffset&&(p.marginTop=e.topOffset),e.leftOffset&&(p.marginLeft=e.leftOffset);let h=e.backgroundColor?{backgroundColor:e.backgroundColor}:{};return i.createElement("div",{className:`${e.className||v.Lq} ${e.noAnimation?v.gh:""}`,style:{...p,...h},ref:c},i.createElement("div",{ref:e.containerRef,role:"tooltip"},!e.shouldHideArrow&&i.createElement(N,{arrowPosition:u.pointerPosition,arrowOffset:u.pointerOffset,modalColor:a}),e.shouldNotWrapInParagraphTag?e.children:i.createElement("p",null,e.children),e.dismissModal&&!e.hideCloseButton&&i.createElement(d.Jn,{useOriginalSrcFills_DEPRECATED:!0,className:v.b,onClick:e.dismissModal,innerText:"close",svg:T.A})))}function O(e){let{arrowPosition:r}=e,n=(0,E.P7)(E.gm.arrow),a=e.width||n.defaultModalWidth,o=e.backgroundColor,s="dark"===(0,h.DP)(),l="light"===e.background,[c,u]=i.useState(0),p=i.useCallback(e=>{null!==e&&u(e.getBoundingClientRect().height)},[]),_=(0,y.eP)({targetKey:e.targetKey,height:c,width:a+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,alignPointerToLeft:e.alignPointerToLeft,...r&&{arrowPosition:r}});if(!_&&!e.shouldCenterModal)return null;let g=l&&!s,f=i.createElement(d.Jn,{useOriginalSrcFills_DEPRECATED:!0,className:`${v._S} ${!g&&e.isUI3?v.uS:""}`,onClick:e.dismissModal,innerText:"close",svg:g?I.default:T.A}),b=i.createElement("div",null,e.ctaText&&e.onClickPrimaryCta&&i.createElement("div",{className:v.ZA},e.bottomLeftText&&i.createElement("b",null,e.bottomLeftText),i.createElement("div",{className:v.OQ},e.secondaryCtaText&&e.onClickSecondaryCta&&i.createElement(m.$z,{className:l?v.jS:v.dC,onClick:e.onClickSecondaryCta,"aria-hidden":!0},e.secondaryCtaText),e.ctaText&&e.onClickPrimaryCta&&i.createElement(P,{onClick:e.onClickPrimaryCta,trackingProperties:e.buttonContext?{buttonContext:e.buttonContext}:void 0},e.ctaText)))),w={backgroundColor:o,width:a,margin:e.topOffset?`${e.topOffset}px auto`:"auto"},A=_?{left:_.left,top:_.top}:{left:0,right:0,top:0,bottom:0};return i.createElement("div",{className:l?v.IL:v.wV,ref:p,style:{...w,...A}},i.createElement("div",null,_&&i.createElement(N,{arrowPosition:_.pointerPosition,arrowOffset:_.pointerOffset,modalColor:l?"var(--color-bg)":void 0}),i.createElement("h1",null,e.title),e.children,f),b)}let R=i.forwardRef(function(e,r){let[n,a]=i.useState(0),o=i.useCallback(e=>{null!==e&&a(e.getBoundingClientRect().height),null!=r&&(r.current=e)},[r]),s=i.useRef(null),m=e.disableClickOutsideToHide?c.lQ:e.dismissModal;(0,l.ww)(s,m);let p=i.useRef(null),h=(0,y.eP)({targetKey:e.targetKey,height:e.passHeightForLocation?e.height?e.height:0:n,width:e.width+2*S,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost});i.useEffect(()=>{h&&(p.current=h)},[h]);let _=h||p.current,g=e.hideIfTargetLost&&null==h;if(!_||g||e.hideModal||e.shouldDismissWhenLostDOMTarget&&!h)return null;let f=e.pointerBackgroundColor||"var(--color-border, rgba(0, 0, 0, 0.2))",E=e.pointerForegroundColor||"var(--color-bg, white)",b={left:_.left+(e.arrowPadding??0),top:_.top,width:e.width};e.height&&(b.height=e.height);let w=e.animateQuickly?v.B9:v.w0,A=e.pointerPaddingOffset??0;return i.createElement("div",{ref:s},i.createElement("div",{className:e.className?`${e.className}`:w,style:b,ref:o,"data-testid":"walkThroughModal"},!e.hidePointer&&i.createElement(N,{arrowPosition:_.pointerPosition,arrowOffset:_.pointerOffset+A,modalColor:E,pointerBorderColor:f,pointerBorder:!0}),e.children,!e.hideCloseButton&&i.createElement(d.Jn,{className:`${v.b} ${e.closeButtonClassName||""} ${e.useWhiteCloseButton?v.uS:""} `,onClick:()=>{e.additionalOnExplicitDismiss&&e.additionalOnExplicitDismiss(),e.dismissModal()},innerText:"close",svg:e.useWhiteCloseButton?T.A:I.default,trackingProperties:{trackingDescriptor:u.c.CLOSE_BUTTON}})))}),P=(0,m.tf)(function(e){return i.createElement(a.$n,{...e,variant:"primary"})})},66154:(e,r,n)=>{n.d(r,{$v:()=>u});var i=n(411855);n(188507),n(922827);var a=n(281381);n(163023);var o=n(154254),s=n(939863);n(293017),n(99506),n(243987),n(397065),n(279145);var l=n(746806),c=n(697338);function d(){return i.createElement(a.Ex,{color:a.zE.DEFAULT,text:(0,s.t)("pro_onboarding.professional"),className:o.cx.colorTextBrand.colorBgSelectedSecondary.font11.$})}function u({dismissModal:e}){let r="share-prototype";return i.createElement(c.Pp,{dismissModal:e,pointerTargetKey:r,calloutTargetKey:r,arrowPosition:l.F_.TOP,title:(0,s.t)("pro_onboarding.prototpye_only_links"),subtitle:(0,s.t)("pro_onboarding.on_your_professional_plan_you_can_share_prototypes"),width:300,badge:i.createElement(d,null)})}n(601538)},573821:(e,r,n)=>{n.d(r,{L0:()=>u,UA:()=>d,_:()=>m,fS:()=>p});var i=n(411855),a=n(966712),o=n(154254),s=n(939863),l=n(809840),c=n(421276);let d="seen_pro_onboarding_welcome_modal";function u(){return i.createElement("div",{className:o.cx.mt16.$},i.createElement(c.X,{bulletLabel:(0,s.t)("pro_onboarding.unlimited_files_for_all_your_ideas")}),i.createElement(c.X,{bulletLabel:(0,s.t)("pro_onboarding.unlimited_projects_to_organize_your_files")}),i.createElement(c.X,{bulletLabel:(0,s.t)("pro_onboarding.dev_mode_for_simpler_inspection_and_handoff")}))}function m({user:e}){return i.createElement(l.E,{fontSize:24,fontWeight:"bold"},(0,s.tx)("pro_onboarding.welcome_to_professional",{userName:e.name.split(" ")[0]}))}function p(){return i.createElement("img",{width:313,src:(0,a.ck)("4323e87513cec17f5decef84ebf66c12c0d2ea59"),alt:"An illustration welcoming you to Figma Professional"})}},524513:(e,r,n)=>{n.d(r,{yU:()=>C});var i=n(411855),a=n(109388),o=n(188507),s=n(922827),l=n(629019),c=n.n(l),d=n(776250),u=n(498750),m=n(153234),p=n(799569),h=n(946689),_=n(271779),g=n(939863),f=n(662275),E=n(188276),y=n(761771),b=n(226055),v=n(335682),I=n(694517),T=n(237870),S=n(585878),w=n(474742),A=n(678019);let C="savepoint-modal";(0,T.qK)(C,e=>{let r=e.modalShown,n=r.data&&r.data.description||"",a=r.data&&r.data.label||"",o=r.data&&r.data.savepointID,l=r.data&&r.data.isEditingMergeSavepoint||!1,c=(0,b.GS)(),d=!e.openFile.canEdit;return i.createElement(L,{recordingKey:"savepointModal",fileKey:e.openFile.key,isHistoryMode:e.mirror.appModel.topLevelMode===s.lyf.HISTORY,editorType:e.openFile.editorType,editingSavepointID:o,label:a,dispatch:e.dispatch,description:n,isViewOnly:d,isEditingMergeSavepoint:l,isUI3:c})});let N=class e extends m.uA{constructor(r){super(r),this.onConfirmSavepointModal=(e,r)=>{let n=e||"",i=r||"";this.props.editingSavepointID&&this.props.fileKey?(this.props.dispatch(E.D({fileKey:this.props.fileKey,savepointID:this.props.editingSavepointID,label:n,description:i})),this.hideModal(),(0,d.sx)("History Version Edited Information",{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:i.length})):n.length>0&&this.props.fileKey&&(this.props.dispatch(y.m({fileKey:this.props.fileKey,label:n,description:i})),this.hideModal(),(0,d.sx)(`History Version Created from ${this.props.isHistoryMode?"History Mode":"Keyboard Shortcut"}`,{savepointId:this.props.editingSavepointID,labelLength:n.length,descriptionLength:i.length})),this.clearSavedInputs()},this.onKeyDownMulti=e=>{e.keyCode===u.Uz.ENTER&&(e.ctrlKey||e.metaKey||e.altKey)&&(e.preventDefault(),this.hideModal(),this.onConfirmSavepointModal(this.state.label,this.state.description))},this.hideModal=()=>{this.props.dispatch(f.Ce())},this.onSubmit=m.P_(this,"submit",e=>{e.preventDefault(),this.onConfirmSavepointModal(this.state.label,this.state.description)}),this.onCancel=()=>{this.clearSavedInputs(),this.hideModal()},this.saveHistoryInputs=()=>{e.keepSavepointModalInput=!0,e.savedLabelInput=this.state.label,e.savedDescriptionInput=this.state.description},this.clearSavedInputs=()=>{e.keepSavepointModalInput=!1,e.savedLabelInput="",e.savedDescriptionInput=""},this.focusRef=e=>{e&&a.findDOMNode(e).focus()},this.onLabelChange=e=>{let r=e.target.value;this.setState({label:r})},this.onLabelBlur=e=>{this.onLabelChange(e)},this.onDescriptionChange=e=>{let r=e.target.value;this.setState({description:r})},this.onDescriptionBlur=e=>{this.onDescriptionChange(e)},this.goHistoryMode=()=>{this.props.isHistoryMode||(this.props.dispatch((0,I._b)()),this.saveHistoryInputs(),this.hideModal())},this.state={label:"",description:"",disableConfirm:!this.props.isLabelReadOnly}}setLabelAndDescriptionFromProps(r){this.state.label.length<1&&this.state.description.length<1&&(e.keepSavepointModalInput?this.setState({label:e.savedLabelInput,description:e.savedDescriptionInput}):this.setState({label:this.props.label,description:this.props.description}))}componentDidMount(){this.setLabelAndDescriptionFromProps(this.props),super.componentDidMount()}UNSAFE_componentWillReceiveProps(e){this.setLabelAndDescriptionFromProps(e)}render(){if(this.props.isViewOnly)return null;let e=this.state.disableConfirm;this.state.label&&this.state.label.length>0&&(e=!1);let r=(0,g.tx)("collaboration.feedback.save_modal.save"),n=(0,g.tx)("collaboration.feedback.save_modal.cancel"),a=this.props.editingSavepointID?this.props.isEditingMergeSavepoint?(0,g.tx)("collaboration.feedback.save_modal.edit_merge_details"):(0,g.tx)("collaboration.feedback.save_modal.edit_version_information"):(0,g.tx)("collaboration.feedback.save_modal.add_to_version_history"),o=i.createElement(_.i,{displayAs:_.C.Block},i.createElement("form",{onSubmit:this.onSubmit},i.createElement("div",{className:this.props.isUI3?A.nr:void 0},i.createElement("div",{className:A.uW},this.props.isEditingMergeSavepoint&&i.createElement("div",{className:A.VA},(0,g.tx)("collaboration.feedback.save_modal.merge_name_placeholder")),i.createElement(h.ks,{className:c()([A.NB,{[A.pR]:this.props.isLabelReadOnly}]),type:"input",name:"label",value:this.state.label,placeholder:(0,g.t)("fullscreen.savepoint_modal.title"),onChange:this.onLabelChange,onBlur:this.onLabelBlur,onKeyDown:this.onKeyDownMulti,autoFocus:!0,recordingKey:m.Pt(this.props,"title"),disabled:this.props.isLabelReadOnly})),i.createElement("div",{className:this.props.isUI3?void 0:A.uW},this.props.isEditingMergeSavepoint&&i.createElement("div",{className:A.VA},(0,g.tx)("fullscreen.savepoint_modal.give_this_merge_a_description")),i.createElement(h.ks,{className:A.tV,type:"textarea",name:"description",value:this.state.description,placeholder:(0,g.t)("collaboration.feedback.save_modal.description_placeholder"),onChange:this.onDescriptionChange,onBlur:this.onDescriptionBlur,onKeyDown:this.onKeyDownMulti,recordingKey:m.Pt(this.props,"description")}))),i.createElement("div",{className:this.props.isHistoryMode?A.$8:A.v0},!this.props.isHistoryMode&&i.createElement("div",{className:A.RW,onClick:this.goHistoryMode},(0,g.tx)("fullscreen.savepoint_modal.show_full_version_history")),i.createElement(h.e2,{reversed:!0},i.createElement(h.$$,{type:"submit",className:A.pL,disabled:e},r),i.createElement(h.nR,{type:"button",className:A.Lu,onClick:this.onCancel},n)))));return this.props.isUI3?i.createElement(S.XV,{title:a,onClose:this.hideModal},i.createElement("div",{className:A.yl},o)):i.createElement(w.aF,{size:"small",...this.props,className:A.yl},i.createElement(p.s_,{...this.props}),i.createElement("div",{className:A.DD},a),o)}};N.displayName="SavepointModal",N.keepSavepointModalInput=!1,N.savedLabelInput="",N.savedDescriptionInput="";let L=N;(0,T.Ju)(function({savepointID:e,label:r,description:n}){let a=(0,v.q5)(),s=(0,o.wA)(),l=(0,b.GS)();return a?i.createElement(L,{recordingKey:"savepointModal",fileKey:a.key,isHistoryMode:!0,editorType:a.editorType,editingSavepointID:e,label:r??"",dispatch:s,description:n??"",isViewOnly:!a.canEdit,isUI3:l,isLabelReadOnly:!0}):null},"DevModeSavepointModal")},161394:(e,r,n)=>{n.d(r,{MC:()=>b,QK:()=>I});var i=n(411855),a=n(57860),o=n(862350),s=n(951792),l=n(288006),c=n(463033),d=n(922827),u=n(776250);n(794272);var m=n(966712),p=n(493323),h=n(939863);n(100197);var _=n(237870),g=n(474742),f=n(456893),E=n(373494),y=n(727243);let b="upgrading-modal";(0,_.qK)(b,e=>i.createElement(v,{upgradingState:e.modalShown.data.upgradingState,dispatch:e.dispatch}));class v extends i.Component{render(){let e=this.props.upgradingState===d.kul.UPGRADING?(0,h.t)("multiplayer_upgrade_modal.content_saving"):(0,h.t)("multiplayer_upgrade_modal.content_reloading");return i.createElement(g.aF,{size:"small",className:E.yl,disableClickOutsideToHide:!0},i.createElement("div",{className:E.DD},(0,h.tx)("multiplayer_upgrade_modal.title")),i.createElement(f.B,null),i.createElement("div",{className:E.jE},e),i.createElement("div",{className:E.v0},(0,m.kc)().ss_fpl_upgrade?i.createElement(a.k,{size:"md"}):i.createElement(p.kt,null)))}}v.displayName="UpgradingModal";let I=(0,_.Ju)(function(e){let r=o.hS({preventUserClose:!0,...e}),n=e.upgradingState===d.kul.UPGRADING?(0,h.t)("multiplayer_upgrade_modal.content_saving"):(0,h.t)("multiplayer_upgrade_modal.content_reloading");return i.createElement(s.bL,{width:400,manager:r},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement(l.hE,null,(0,h.tx)("multiplayer_upgrade_modal.title"))),i.createElement(l.nB,null,i.createElement(f.B,null),i.createElement("div",{className:E.jE},n),i.createElement("div",{className:E.v0},i.createElement(a.k,{size:"md"})))))},"UpgradingModal");(0,_.Ju)(function({multiplayerSessionState:e,isReadOnly:r,...n}){let a=o.hS({preventUserClose:!0,...n}),m=e!==d.kul.UNJOINED;return e===d.kul.UPGRADING||e===d.kul.WAITING_FOR_RELOAD?null:i.createElement(s.bL,{width:400,manager:a},i.createElement(l.vo,null,i.createElement(l.Y9,null,i.createElement("span",{className:y.p},(0,h.tx)("multiplayer_upgrade_modal.title"))),i.createElement(l.nB,null,i.createElement("div",null,(0,h.tx)("multiplayer_upgrade_modal.content"),!m&&i.createElement("span",null,i.createElement("br",null),"\xa0",i.createElement("br",null),(0,h.tx)("multiplayer_upgrade_modal.content_offline")))),i.createElement(l.wi,null,i.createElement(l.jk,null,m&&i.createElement(c.$n,{onClick:()=>{(0,u.sx)("Upgrade Modal Clicked"),d.h3O.startUpgrade()}},r?(0,h.tx)("multiplayer_upgrade_modal.reload_button"):(0,h.tx)("multiplayer_upgrade_modal.save_and_reload_button"))))))},"OutOfDateWallModal");class T extends i.Component{constructor(){super(...arguments),this.noOp=e=>e,this.onUpdateClicked=()=>{(0,u.sx)("Upgrade Modal Clicked"),d.h3O.startUpgrade()}}render(){let{multiplayerSessionState:e,isReadOnly:r}=this.props,n=e!==d.kul.UNJOINED;return e===d.kul.UPGRADING||e===d.kul.WAITING_FOR_RELOAD?null:i.createElement(g.aF,{size:"small",className:E.yl,disableClickOutsideToHide:!0},i.createElement("div",{className:E.DD},(0,h.tx)("multiplayer_upgrade_modal.title")),i.createElement("div",{className:E.jE},(0,h.tx)("multiplayer_upgrade_modal.content"),!n&&i.createElement("span",null,i.createElement("br",null),"\xa0",i.createElement("br",null),(0,h.tx)("multiplayer_upgrade_modal.content_offline"))),n&&i.createElement("div",{className:E.v0},i.createElement(c.$n,{onClick:this.onUpdateClicked},r?(0,h.tx)("multiplayer_upgrade_modal.reload_button"):(0,h.tx)("multiplayer_upgrade_modal.save_and_reload_button"))))}}T.displayName="OutOfDateWall"},485861:(e,r,n)=>{n.d(r,{eP:()=>d,pc:()=>l,xT:()=>c});var i=n(411855),a=n(47506),o=n(479296),s=n(884342);function l({location:e,onTargetLost:r,targetKey:n,targetType:o}){let s=i.useRef(null),l=i.useRef(null),c=i.useRef(!1);i.useEffect(()=>{!c.current&&e&&(c.current=!0)},[c,e]),i.useEffect(()=>{e?(s.current=e,l.current=n):l.current===n&&((0,a.YQ)({id:"Lost DOM Target"}),r?.(c.current,o))},[e,r,n,o])}function c(e){let r=document.querySelectorAll(`[data-onboarding-key=${e}]`);if(0===r.length)return null;for(let e=0;e<r.length;e++){let n=r[e].getBoundingClientRect();if(!(0===n.left&&0===n.right&&0===n.height&&0===n.width))return r[e]}return null}let d=(0,o.D)(e=>{let r=(0,s.P7)(e.pointerType||s.gm.arrow);e.pointerOffsetOverride&&(r.standardPointerOffset=e.pointerOffsetOverride);let n=e.topPadding||-r.pointerTargetOverlap,a=i=>{let a=c(e.targetKey);if(null!=a){let o=(0,s.my)({width:e.width,height:e.height,targetRect:a.getBoundingClientRect(),positioningConstants:r,alignPointerToLeft:e.alignPointerToLeft,shouldCenterArrow:e.shouldCenterArrow,topPadding:n,targetType:"dom",arrowPosition:e.arrowPosition});return null==i||o.top!==i.top||o.left!==i.left?{type:"CHANGED",location:o}:{type:"UNCHANGED"}}return{type:"NOT_FOUND"}},o=null,[d,u]=i.useState(()=>{let e=a(null);return"CHANGED"===e.type&&(o=e.location),o}),[m,p]=i.useState(null);i.useEffect(()=>{let r=a(d);if("CHANGED"===r.type?o=r.location:"UNCHANGED"===r.type&&(o=d),void 0!==r&&u(o),p(e.targetKey),e.shouldScrollTargetIntoView){let r=c(e.targetKey);r?.scrollIntoView()}},[e.targetKey]);let h=i.useRef();function _(){let e=a(d);"CHANGED"===e.type?u(e.location):"NOT_FOUND"===e.type&&u(null)}return(i.useEffect(()=>{h.current=_}),i.useEffect(()=>{let e=setInterval(function(){h.current()},50);return()=>clearInterval(e)},[]),l({location:d,onTargetLost:e.onTargetLost,targetKey:e.targetKey,targetType:"dom"}),m!==e.targetKey)?o:d})},561916:(e,r,n)=>{n.d(r,{J4:()=>D,YU:()=>B,Kd:()=>G,Iz:()=>V,_9:()=>k,lG:()=>x,fb:()=>M,p8:()=>F,mi:()=>K,ET:()=>H});var i=n(411855),a=n(188507),o=n(302586),s=n(240624),l=n(918152),c=n(790484),d=n(137035),u=n(966712),m=n(893281),p=n(46481),h=n(939863),_=n(226055),g=n(318812),f=n(694687),E=n(99506),y=n(239671),b=n(851363),v=n(498606),I=n(231959),T=n(928491),S=n(538697);let w="audience_selector--iconContainer--W80mw",A="audience_selector--radioText--OD-3K",C="audience_selector--radioOption--4NDFa",N="audience_selector--radioSubtitle--g3Mry",L="audience_selector--blackIcon--PM3f-";var O=n(585101),R=n(535011),P=n(204702),D=(e=>(e.VIEW="view",e.EDIT="edit",e))(D||{}),k=(e=>(e.ANYONE="anyone",e.ORG="org",e.WORKSPACE="workspace",e.TEAM="team",e.FOLDER="folder",e.INVITE_ONLY="invite_only",e))(k||{});let M={[E.PQ.EDIT]:{shareAudience:"anyone",audienceAccessLevel:"edit"},[E.PQ.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.PQ.ORG_EDIT]:{shareAudience:"org",audienceAccessLevel:"edit"},[E.PQ.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_VIEW]:{shareAudience:"workspace",audienceAccessLevel:"view"},[E.PQ.WORKSPACE_EDIT]:{shareAudience:"workspace",audienceAccessLevel:"edit"},[E.PQ.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null},[E.PQ.INVITE_ONLY]:{shareAudience:"invite_only",audienceAccessLevel:null}},F={[E.Pu.VIEW]:{shareAudience:"anyone",audienceAccessLevel:"view"},[E.Pu.ORG_VIEW]:{shareAudience:"org",audienceAccessLevel:"view"},[E.Pu.INHERIT]:{shareAudience:"invite_only",audienceAccessLevel:null}};function x(e,r){return"anyone"===e?"edit"===r?E.PQ.EDIT:E.PQ.VIEW:"org"===e?"edit"===r?E.PQ.ORG_EDIT:E.PQ.ORG_VIEW:E.PQ.INVITE_ONLY}let U=(e,r)=>{if("anyone"===e){if("anyone"!==r)return!1}else if("org"===e&&"invite_only"===r)return!1;return!0};function B(e){let r=(0,a.wA)(),n={[E.vt.TEAM]:["invite_only"],[E.vt.FOLDER]:["invite_only"],[E.vt.FILE]:["anyone","invite_only"],[E.vt.FILE_REPO]:["anyone","invite_only"]}[e.resourceType],m=null;e.org&&(e.workspace&&e.workspace.id!==I.O&&n.splice(1,0,"workspace"),n.splice(1,0,"org")),e.isPrototype&&(n=n.filter(r=>U(e.fileShareAudience,r)),"anyone"===e.fileShareAudience&&1===n.length&&"anyone"===n[0]&&(m=(0,h.t)("permissions.audience_selector.can_only_be_adjusted_in_the_main_file")));let f=(0,g.Um)(),b={anyone:(0,h.t)("permissions.audience_selector.anyone"),workspace:e.workspace?.name||"",org:e.org?.name||"",team:e.team?.name||"",folder:"",invite_only:(0,h.t)("permissions.audience_selector.only_invited_people")},A=(0,_.GS)(),C={anyone:i.createElement("div",{className:w},i.createElement(p.U,{svg:R.A,className:L},i.createElement(o.Y,null))),workspace:e.workspace&&i.createElement("div",{className:w},A?i.createElement(s.w,null):i.createElement(T.z6,{entity:e.workspace,size:16})),org:e.org&&i.createElement("div",{className:w},A?i.createElement(l.Y,null):i.createElement(p.U,{svg:P.A,className:L},i.createElement(l.Y,null))),team:e.team&&i.createElement("div",{className:w},i.createElement(T.Ro,{entity:{id:e.team.id,imgUrl:e.team.img_url,name:e.team.name},hideFallbackInitial:!1,size:16})),folder:i.createElement(i.Fragment,null),invite_only:i.createElement("div",{className:w},i.createElement(p.U,{svg:O.A,className:L},i.createElement(c.c,null)))},N=i.useCallback(()=>{let r={[E.vt.TEAM]:(0,h.t)("permissions.audience_selector.team_resource_name"),[E.vt.FOLDER]:(0,h.t)("permissions.audience_selector.project_resource_name"),[E.vt.FILE]:(0,h.t)("permissions.audience_selector.file_resource_name"),[E.vt.FILE_REPO]:(0,h.t)("permissions.audience_selector.file_resource_name")};return e.isPrototype?e.editorType===y.nT.Slides&&(0,u.kc)().slides_paywall_string?(0,h.t)("permissions.audience_selector.presentation_resource_name"):(0,h.t)("permissions.audience_selector.prototype_resource_name"):r[e.resourceType]},[e.isPrototype,e.resourceType,e.editorType]),D=i.useMemo(()=>{let r=N();switch(e.value){case"anyone":return e.editorType===y.nT.Slides?(0,h.t)("permissions.audience_selector.anyone_even_outside_your_org_can_access_this_resource",{resourceName:r}):(0,h.t)("permissions.audience_selector.anyone_even_those_outside_your_org_can_access_this_resource",{resourceName:r});case"org":if(e.searchable)return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});return(0,h.t)("permissions.audience_selector.audience_can_access_through_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.org_members")});case"workspace":return(0,h.t)("permissions.audience_selector.audience_can_access_through_search_link_or_file_browser",{resourceName:r,audience:(0,h.t)("permissions.audience_selector.workspace_members")});case"team":case"folder":return(0,h.t)("permissions.audience_selector.can_access_through_search_file_browser_link");case"invite_only":return(0,h.t)("permissions.audience_selector.only_people_you_directly_invited_can_access",{resourceName:r})}},[e.value,e.searchable,e.editorType,N]);return i.createElement("div",{"data-testid":"create-team-modal-audience-selector"},i.createElement(S.l6,{id:"create-team-modal-audience-selector",property:e.value,formatter:{format:e=>b[e]},onChange:e.onChange,dispatch:r,dropdownShown:f,className:"audience_selector--dropdownSelector--eEAHQ select--selectInputExpanded--Lz6m4",inputClassName:"audience_selector--dropdownSelectorTitle---y7CH",icon:C[e.value],dropdownClassName:"audience_selector--dropdownContainer--Xyoak",openBelowTarget:!A,focusedOption:n[0],disabled:!!m||e.disabled,rightIcon:m?i.createElement(d.b,{"data-tooltip-type":v.Ib.TEXT,"data-tooltip":m}):void 0,iconClassName:"audience_selector--dropdownSvg--VPhRA"},n.map(r=>i.createElement(S.c$,{value:r,key:r,height:28,icon:C[r],dataTestId:`audience-option-${r}`,rightCheck:!0,disabled:"anyone"===r&&e.publicLinksBanned},b[r]))),i.createElement("div",{className:"audience_selector--subtitle--MIXKn text--fontPos11--2LvXf text--_fontBase--QdLsd"},D))}function V(e){return i.createElement(i.Fragment,null,i.createElement(m.z,{value:e.selectedPermissionsLevel,onChange:e.setSelectedPermissionsLevel,isHorizontal:!0,dataTestId:"permissions-level-radio-group"},i.createElement(m.Z,{key:"view-only",value:"view",className:C,disabled:e.disabled},i.createElement("p",{className:A},(0,h.tx)("team_creation.view"))),i.createElement(m.Z,{key:"edit",value:"edit",className:C,disabled:e.disabled||e.disableEdit},i.createElement("p",{className:A},e.teamCanAccess?(0,h.tx)("permissions.level_name_capitalized.can_access"):(0,h.tx)("team_creation.edit")))))}function G(e){return f.sZ()?.k12_google_org&&(0,u.kc)().student_plan_no_hidden_teams?i.createElement(m.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},i.createElement(m.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:C},i.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team"))):i.createElement(i.Fragment,null,i.createElement(m.z,{dataTestId:"org-browsable-team-radio-options",value:e.selectedDiscoverability,onChange:e.setSelectedDiscoverability},i.createElement(m.Z,{key:"org_browsable",value:b.Fb.ORG_BROWSABLE,className:C},i.createElement("p",{className:A},(0,h.tx)("team_creation.visible"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.anyone_can_find_this_team")),i.createElement(m.Z,{key:"hidden",value:b.Fb.HIDDEN,className:C},i.createElement("p",{className:A},(0,h.tx)("team_creation.hidden"))),i.createElement("p",{className:N},(0,h.tx)("team_creation.only_team_members_can_find_and_access"))))}function H(e,r,n,a){return e===E.PQ.EDIT||e===E.PQ.VIEW?a?(0,h.tx)("file_audience_row.anyone_with_password"):(0,h.tx)("permissions.anyone"):e===E.PQ.ORG_EDIT||e===E.PQ.ORG_VIEW?r&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:r.name}):e===E.PQ.WORKSPACE_EDIT||e===E.PQ.WORKSPACE_VIEW?n&&(0,h.tx)("permissions.anyone_in_container_name",{containerName:n.name}):e===E.PQ.INVITE_ONLY||e===E.PQ.INHERIT?(0,h.tx)("permissions.only_those_invited"):i.createElement(i.Fragment,null)}function K(e){return e===E.PQ.EDIT||e===E.PQ.ORG_EDIT||e===E.PQ.WORKSPACE_EDIT?(0,h.tx)("file_access_row.can_edit"):e===E.PQ.VIEW||e===E.PQ.ORG_VIEW||e===E.PQ.WORKSPACE_VIEW?(0,h.tx)("file_access_row.can_view"):void 0}},717156:(e,r,n)=>{n.d(r,{mK:()=>f,ox:()=>g});var i=n(411855),a=n(188507),o=n(181912),s=n(27087),l=n(47506),c=n(662275),d=n(877645),u=n(860178),m=n(963719),p=n(971646);function h(e){s.Ay.put(`/api/files/${e}/expire_public_link`)}let _=(e,r)=>{let n=i.useRef(null);i.useEffect(()=>{let i=e?(0,o.A)(e).diff((0,o.A)()):void 0;return void 0!==i&&i<0x7fffffff?(n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{n.current=null,r()},i)):n.current&&(clearTimeout(n.current),n.current=null),()=>{n.current&&clearTimeout(n.current)}},[e,r])};function g(e){let r=(0,u.iZ)(),n=(0,a.wA)(),{file:o,onCanvasExpired:s}=e,p=o?.key,g=(0,d.v)(e.file),f=i.useRef(void 0),E=g?.activeExpiration,y=g?.file,b=y?.hasViewPrototypeRole,v=g?.accessReverted;i.useEffect(()=>{b&&v&&!f.current?.accessReverted&&g.expiresAt&&g.expiresAt===f.current?.expiresAt&&(0,l.YQ)({id:"link_expired_event"}),f.current=g},[g,v,b]),_(E,i.useCallback(()=>{p&&(b&&r||(n(c.to({type:m.J})),s?.()),h(p))},[n,s,p,r,b]))}function f(e,r){_(p.d4(r)?.toISOString(),i.useCallback(()=>{h(e)},[e]))}},723856:(e,r,n)=>{n.d(r,{$:()=>u});var i=n(268853),a=n(776621),o=n(662275),s=n(396226);n(99506);var l=n(300874),c=n(239671),d=n(449731);function u(e,r,n){if(!(0,c.Nw)(r)){(0,a.$D)(i.e.MONETIZATION_UPGRADES,Error("Paywall: Wrong editor type for pro feature"),{extra:{editorType:r,teamId:n.id}});return}e((0,o.to)({type:d.DV,data:{team:n,editorType:(0,c.oD)(r),resource:l.Bi.PASSWORD_PROTECTION,currentPlan:s.F.Plan.STARTER,upsellPlan:s.F.Plan.PRO}}))}},578427:(e,r,n)=>{n.d(r,{KM:()=>D,Ku:()=>x});var i=n(411855),a=n(188507),o=n(463033),s=n(519788),l=n(902237),c=n(256296),d=n(511617),u=n(966712),m=n(314866),p=n(716034),h=n(659302),_=n(154254),g=n(939863),f=n(501114),E=n(931828),y=n(672517),b=n(335682),v=n(132135),I=n(637590),T=n(561916),S=n(329099),w=n(335775),A=n(882613),C=(e=>(e.EDIT="edit",e.DUPLICATE="duplicate",e))(C||{});let N=(0,u.ck)("cee072aec57608cbb49c64eb6cb3765896cea921"),L="share-to-google-classroom-row",O=(0,p.eU)(null),R=(0,y.tf)(w.sR);function P(e){let r=(0,a.wA)(),n=(0,h.Xr)(O),o=i.useRef(null);i.useEffect(()=>(n(o),()=>{n(null)}),[o,n]);let s=i.createElement("div",{ref:o,className:A.S},i.createElement("img",{src:N,alt:"share to google classroom",className:A.S}));return i.createElement(y.fu,{name:"share_to_google_classroom_row"},i.createElement(R,{icon:s,text:(0,g.t)("file_permissions_modal.share_as.google_classroom"),onClick:()=>{r(E.b({has_shared_to_google_classroom:!0})),e.onClick()},testId:L,dataOnboardingKey:L,expandCaret:!0,trackingProperties:{text:"Share to Google Classroom"}}))}function D({org:e,currentUser:r}){var n;let a=(0,S.o)(),o=e?.k12_google_org,s=(n=r?.profile?.jobTitle||"","education"===(0,m.HB)(n));return o||s?i.createElement(P,{onClick:()=>a(I.A5.SHARE_TO_GOOGLE_CLASSROOM)}):null}let k=(0,y.tf)(o.$n),M=f.sx.add({color:"var(--color-text-figjam)",cursor:"pointer",userSelect:"auto"}).$,F=f.sx.add({transform:"translateY(-4px)"}).$;function x(e){let r=T.fb[e.linkAccess].audienceAccessLevel!==T.J4.EDIT,n=(0,b.q5)(),[a,o]=(0,i.useState)("edit"),u=(0,S.o)();return i.createElement(y.fu,{name:"google_classroom_share_modal"},i.createElement("div",{className:_.cx.flex.flexColumn.p16.$},i.createElement("form",null,i.createElement(s.b,{legend:i.createElement(l.s,null,r?i.createElement("div",{className:_.cx.textBodyMedium.pb8.$,"data-testid":"share-to-google-classroom-disclaimer"},(0,g.tx)("file_permissions_modal.google_classroom_modal.disclaimer",{link:i.createElement(y.$z,{onClick:()=>u(I.A5.SHARE_SETTINGS),type:"button",style:M},(0,g.tx)("file_permissions_modal.google_classroom_modal.disclaimer_link"))})):i.createElement(i.Fragment,null)),value:a,onChange:o},i.createElement("div",{className:_.cx.mt8.$},i.createElement(s.c,{value:"edit",label:i.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-edit-option"}},(0,g.tx)("file_permissions_modal.google_classroom_modal.editable_option"))},r?i.createElement("div",{style:F},(0,g.tx)("file_permissions_modal.google_classroom_modal.editable_option_description")):null),i.createElement(s.c,{value:"duplicate",label:i.createElement(c.J,{htmlAttributes:{"data-testid":"share-to-google-classroom-duplicate-option"}},(0,g.tx)("file_permissions_modal.google_classroom_modal.duplicate_option"))},r?i.createElement("div",{style:F},(0,g.tx)("file_permissions_modal.google_classroom_modal.duplicate_option_description")):null)))),i.createElement("div",{className:_.cx.flex.flexRow.justifyEnd.$},i.createElement(k,{variant:"primary",onClick:()=>{let r=n?(0,v.jN)({file:n}):"",i="duplicate"===a?"/duplicate":"",o=r?`?url=${r}${i}`:"";(0,d.FJ)(`https://classroom.google.com/share${o}`,"_blank","popup,width=650,height=505"),e.closeModal()},trackingProperties:{googleClassroomShareOption:a},htmlAttributes:{"data-testid":"share-to-google-classroom-share-button"}},(0,g.tx)("general.next")))))}},971646:(e,r,n)=>{n.d(r,{$j:()=>s,Dp:()=>l,Fn:()=>c,M3:()=>E,U:()=>f,W7:()=>_,cH:()=>m,d4:()=>y,hP:()=>g,lX:()=>d,ml:()=>h,nM:()=>b,yJ:()=>u});var i=n(140593),a=n(181912),o=n(939863),s=(e=>(e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(s||{}),l=(e=>(e.TWENTY_SEC="20_seconds",e.CURRENT="current",e.DAY="24_hours",e.WEEK="7_days",e.CUSTOM="custom",e))(l||{});function c(e,r){switch(r){case"24_hours":case"24_hours":return p(e.clone().add(24,"h"));case"7_days":case"7_days":return p(e.clone().add(7,"d"));default:return(0,a.A)()}}function d(e,r){let n=r.diff(e,"hours");if(n<1){let n=r.diff(e,"minutes");return{num:n<1?1:n,unit:"minute"}}if(n<24)return{num:n,unit:"hour"};let i=Math.ceil(n/24);return i%30==0?{num:Math.floor(i/30),unit:"month"}:i%7==0?{num:Math.floor(i/7),unit:"week"}:{num:i,unit:"day"}}function u(e,r){let{num:n,unit:a}=d(e,r);switch(a){case"minute":return(0,o.t)("permissions_modal.file_share_settings.minute_text",{num:n});case"hour":return(0,o.t)("permissions_modal.file_share_settings.hour_text",{num:n});case"day":return(0,o.t)("permissions_modal.file_share_settings.day_text",{num:n});case"week":return(0,o.t)("permissions_modal.file_share_settings.week_text",{num:n});case"month":return(0,o.t)("permissions_modal.file_share_settings.month_text",{num:n});default:(0,i.xb)(a)}}function m(e,r=!1){return r?e.startOf("hour"):e.clone().add(30,"minutes").startOf("hour")}function p(e,r=!1){return e.clone().add(30,"seconds").startOf("minute")}function h(e){return e.format("LT")}function _(e){return e.format("YYYY-MM-DD")}function g(e){return e.format("HH:mm")}function f(e,r){return(0,a.A)(e+" "+r,"YYYY-MM-DD HH:mm")}function E(e,r){let n=e.isSame((0,a.A)().add(1,"day"),"day"),i=h(e);if(n&&!r)return(0,o.t)("file_access_row.expiration.24_hours.timestamp",{time:i});let s=e.toDate().toLocaleDateString(e.locale(),{weekday:r?"long":"short",month:"short",day:"numeric"});return(0,a.A)().isSame(e,"year")?(0,o.t)("file_access_row.expiration.date.timestamp",{date:s,time:i}):e.format("L LT")}function y(e){return e&&!e.accessReverted&&e.expiresAt?e.expiresAt:null}function b(e){return e<24||e%24!=0?(0,o.t)("file_access_row.expiration.past_org_limit_hours",{count:e}):(0,o.t)("file_access_row.expiration.past_org_limit_days",{count:e/24})}},303159:(e,r,n)=>{n.d(r,{H:()=>C});var i=n(411855),a=n(326331),o=n(629019),s=n.n(o),l=n(91408),c=n(268537),d=n(46481),u=n(47506),m=n(175290),p=n(809840),h=n(738269),_=n(672517),g=n(298543),f=n(465983),E=n(221785),y=n(816985),b=n(289298);let v=(0,l.hG)(E.p3),I=(0,l.hG)(f.km),T=(0,l.hG)(f.LF),S=(0,l.hG)(f.hX),w=v-I/2;function A({dispatch:e,dropdownClassName:r,dropdownShown:n,options:a,value:o,onChange:l,trackingProperties:d={}}){let[u,_]=(0,i.useState)(0),[f,E]=(0,i.useState)(window.innerWidth),b=()=>{E(window.innerWidth)};(0,i.useEffect)(()=>(window.addEventListener("resize",b),()=>window.removeEventListener("resize",b)),[]);let A=i.useRef(null),C=i.useRef(null);(0,i.useEffect)(()=>{if(A.current&&C.current){let e=A.current.getBoundingClientRect(),r=A.current.offsetParent?.getBoundingClientRect();!e||!r||e.top>=r.top&&e.bottom<=r.bottom||(A.current.scrollIntoView(!1),C.current.scrollBy(8)),_(e.width)}},[]);let N={...n?.data?.position||{top:0,left:0}},L=0,O=0,R=!1,P=-1,D=a.map((r,n)=>{if("separator"===r.type)return R||(L+=S),O+=S,i.createElement(c.wv,{key:r.key?String(r.key):n,dataTestId:`dropdown-separator-${n}`});let s=r.key===o;s&&(P=n),R=R||s;let u=r.subtext?T:I;R||(L+=u),O+=u;let _={};return r.subtext&&a[n+1]?.type!=="separator"&&(_.paddingBottom=8,O+=8),i.createElement("div",{key:String(r.key),ref:s?A:null,style:_,"data-testid":`dropdown-option-${n}`,"data-onboarding-key":`dropdown-option-${String(r.key)}`},i.createElement(c.rr,{checked:s,onClick:n=>{n.stopPropagation(),s||l(r.key),e(h.oB())},trackingProperties:{...d,key:String(r.key)},disabled:r.disabled,"data-testid":`dropdown-option-checkable-${n}`},i.createElement("div",{style:{display:"flex",alignItems:"center"}},!!r.icon&&i.createElement(i.Fragment,null,r.icon),i.createElement(m.Y,{direction:"vertical",spacing:4,height:u,verticalAlignItems:"center"},i.createElement(p.E,{fontSize:12},r.text),r.subtext&&i.createElement(p.E,{fontSize:11,color:"menu-disabled"},r.subtext)))))});u+N.left+4>f&&(N.left="auto",N.right=4);let k=16;P===a.length-1&&(k=8),"auto"!==N.top&&void 0!==N.top&&(N.top-=Math.min(L,w-k),N.top=Math.max(16,N.top));let M=i.createElement(g.g1,{maxDropdownHeight:e=>"auto"===N.top||void 0===N.top?v:Math.min(v,Math.round(e-N.top-8-16)),dropdownChildrenHeight:O,ref:C},D);return i.createElement(c.gw,{stopScrollPropagation:!0,dispatch:e,className:s()(y.N1,r),style:N},M)}function C({dispatch:e,dropdownShown:r,value:n,options:o,onChange:l,id:c,placeholder:m,disabled:p=!1,dropdownData:g={},isOpen:f,trackingProperties:E={},dataOnboardingKey:v,onOpenRcsEvent:I,ui3Icon:T}){let S=(0,i.useRef)(null),w=o.findIndex(e=>"option"===e.type&&e.key===n),C=o[w],N=C?.type==="option"?C.selectedLabel||C.text:m,L=C?.type==="option"&&C.selectedLabelClass||"";return f=f??r?.type===c,i.createElement("div",{ref:S},i.createElement(_.jm,{trackingProperties:E,className:s()({[y.Lt]:!p,[y.rp]:T}),onClick:p?void 0:n=>{n.stopPropagation(),n.preventDefault(),r&&r.type===c?e(h.oB()):o.length&&!p&&(e(h.j7({type:c,data:{...g,...function(e){let r=e.current?.getBoundingClientRect();return r?{position:{top:r.top,bottom:"auto",left:r.left,right:"auto"}}:{}}(S)}})),I&&(0,u.YQ)({id:I}))}},T,i.createElement("div",{className:`${y.Ck} ${L}`,"data-testid":"dropdown-label"},N),!p&&i.createElement("div",{className:y.Lo},i.createElement(d.U,{"data-onboarding-key":!p&&v?v:"",svg:b.A},i.createElement(a.r,null)))),f&&i.createElement(A,{dispatch:e,dropdownShown:r,dropdownClassName:y.W8,value:n,options:o,onChange:l,trackingProperties:E}))}},1700:(e,r,n)=>{n.d(r,{E4:()=>v,R9:()=>y,hP:()=>b,nu:()=>I});var i=n(411855),a=n(188507),o=n(74522),s=n(629019),l=n.n(s),c=n(163023),d=n(46481),u=n(939863);n(720647);var m=n(147206);n(265361);var p=n(668860),h=n(498606),_=n(303159),g=n(816985),f=n(860574),E=n(957412);function y(e){let r="level-change-dropdown",n=(0,a.wA)(),o=()=>e.dropdownShown&&e.dropdownShown.type===r&&e.dropdownShown.data.dropdownId===e.id,s=e.virtualRowItem?{position:"absolute",top:e.virtualRowItem.start,left:0,right:0}:void 0;return i.createElement("div",{className:g.zn,style:s},i.createElement("div",{className:g.H},i.createElement(b,{user:e.user,id:e.id,pending:e.pending})),i.createElement("div",{className:g.$S},i.createElement("div",{key:`name-${e.id}`,className:e.pending?g.NE:g.UU},e.userName),e.warningMessage&&i.createElement(c.B,{className:g.QW,svg:E.A,"data-tooltip-timeout-delay":50,"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e.warningMessage}),e.warningTooltipId&&i.createElement(c.B,{className:g.QW,svg:E.A,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip":e.warningTooltipId,"data-tooltip-timeout-delay":50,"data-tooltip-interactive":!0}),(()=>{let a=e.getRoleOptions();return a?i.createElement(_.H,{dispatch:n,onChange:e.onChangeLevel,options:a,id:r,value:e.level,dropdownShown:e.dropdownShown,dropdownData:{dropdownId:e.id},isOpen:!!o()}):e.isPrototypeRole&&e.level===p.e6.VIEW_PROTOTYPES?i.createElement("span",{className:g.C1},(0,u.t)("permissions.level_name.can_view")):i.createElement("span",{className:g.C1},(0,m.C1)(e.level,e.isBranchFile))})()))}function b(e){let{user:r,pending:n}=e,a=!1===n&&r.img_url;return a&&!n?i.createElement("img",{"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e.user.email,key:`avatar-${e.id}`,src:a,className:l()(g.my,e.small&&g.dT),alt:""}):i.createElement("div",{className:l()(g.f1,e.small&&g.dT),"data-tooltip-type":h.Ib.TEXT,"data-tooltip":e.user.email},i.createElement(d.U,{key:`avatar-${e.id}`,svg:f.A,className:l()(g.Zk,e.small&&g.dT)},i.createElement(o.A,{className:l()(g.Zk,e.small&&g.dT)})))}function v(e,r){return!1===e.pending?e.user.handle:e.user.email in r?r.usersByEmail[e.user.email].handle:e.user.email}function I(e,r,n,i,a,o,s){let l=[],c=!1;if(!n)return null;s&&o===p.e6.VIEW_PROTOTYPES?l.push({type:"option",key:p.e6.VIEW_PROTOTYPES,text:(0,m.C1)(p.e6.VIEWER)}):r?l.push(T(o)):(e&&!a&&l.push(T(p.e6.OWNER)),i&&l.push(T(p.e6.ADMIN)),l.push(T(p.e6.EDITOR)),l.push(T(p.e6.VIEWER)),c=a);let d=r&&!e?(0,u.t)("confirm_remove_role.leave"):(0,u.t)("confirm_remove_role.remove");return l.push({type:"separator"}),c&&l.push({type:"option",key:"resend",text:(0,u.t)("role_row.resend_invite")}),l.push({type:"option",key:p.e6.NONE,text:d}),l}function T(e){return{type:"option",key:e,text:(0,m.C1)(e)}}},56714:(e,r,n)=>{n.d(r,{I$:()=>T,Jr:()=>S,UM:()=>w});var i=n(966712),a=n(882225),o=n(813408),s=n(93623),l=n(492330);let c={id:"4317920",team_id:null,org_id:"675025436003846244",location:"San Francisco, CA",profile_handle:"asana",public_at:"2020-05-06T20:49:58.442Z",follower_count:341,following_count:0,primary_user_id:null,name:"Asana",img_url:"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/d8034acd-76dd-4b36-98da-58fdf79529f2","500_500":"https://s3-alpha.figma.com/profile/5c98d80b-d276-446c-8080-7e586b085612"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"asana.design",twitter:"twitter.com/asanadesignteam",instagram:"instagram.com/asanadesignteam",description:"We\u2019re the Design team behind Asana.\nWe design the future of teamwork. \u2728\n\nJoin us: asana.com/jobs/product",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/4317920/cover_image",is_community_beta:!0,badges:[a.s.FIGMA_PARTNER]},d={id:"1521",team_id:null,org_id:"703355754804194517",location:"Sydney, Australia",profile_handle:"atlassian",public_at:"2020-06-22T18:25:34.800Z",follower_count:4297,following_count:0,primary_user_id:null,name:"Atlassian",img_url:"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c1b2cbe9-346d-4ba4-9af0-aca1bc444657","500_500":"https://s3-alpha.figma.com/profile/26a88a1d-27d7-460c-9301-dd0910d39614"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://atlassian.com",twitter:null,instagram:null,description:"The official home of Atlassian's design resources in Figma.",pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1521/cover_image",is_community_beta:!0,badges:[a.s.FIGMA_PARTNER]},u={id:"1608",team_id:null,org_id:"797266083973274396",location:null,profile_handle:"github",public_at:"2020-02-12T18:27:36.218Z",follower_count:126,following_count:0,primary_user_id:null,name:"GitHub",img_url:"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/2789d808-2da3-4e73-a540-a7333e924556","500_500":"https://s3-alpha.figma.com/profile/84ae1734-e47e-4945-884c-f536e5d3f427"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://www.github.com",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"",is_community_beta:!1,badges:[a.s.FIGMA_PARTNER]},m={id:"1731",team_id:null,org_id:null,location:"Los Angeles, CA",profile_handle:"snap",public_at:"2020-03-02T14:56:23.081Z",follower_count:17,following_count:0,primary_user_id:null,name:"Snapchat",img_url:"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/7a97c4dc-8a42-4273-bcdd-d97bcabcd0b2","500_500":"https://s3-alpha.figma.com/profile/7bbd1ecd-0481-4423-9092-58ec01c00d68"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.ORG,website:"https://www.snapchat.com/l/en-gb/",twitter:null,instagram:null,description:null,pronouns:null,has_shared_teams:null,has_shared_orgs:null,redirect_cover_image_url:"/profile/1731/cover_image",is_community_beta:!1,badges:[]},p={id:"2480257",team_id:null,org_id:null,location:"San Francisco, CA",profile_handle:"figma",public_at:"2019-10-21T22:53:16.561Z",follower_count:16253,following_count:53,primary_user_id:"768244674400796816",name:"Figma",img_url:"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577",img_urls:{"120_120":"https://s3-alpha.figma.com/profile/c82ecc52-1c47-405d-980b-904ff54c6577","500_500":"https://s3-alpha.figma.com/profile/c4bc0357-6f54-412a-ac89-f311905bbec5"},current_user_is_following:!1,current_user_is_followed:!1,is_restricted_by_current_user:!1,entity_type:o.o1.USER,website:"www.figma.com",twitter:"twitter.com/figma",instagram:"instagram.com/figma",description:"Figma is the design tool for teams who build products together. Claim your community profile here: https://bit.ly/3euhKR9",pronouns:null,has_shared_teams:!1,has_shared_orgs:null,redirect_cover_image_url:"/profile/2480257/cover_image",is_community_beta:!0,badges:[]},h="1098405969270214551",_="1094001923188252679",g="1101944648482192724",f="1151936790942917527",E={[c.id]:h,[u.id]:g,[d.id]:_,[m.id]:f},y="1220512233196109878",b="1220802563996996107",v={[u.id]:y,[d.id]:b};function I(){return(!!(0,i.kc)().widgets_hardcode_cocreators||!!(0,i.kc)().cmty_hardcode_cocreators)&&"prod"===(0,i.tl)().cluster_name}function T(e){if(!I())return e;let r=function(e){if(!I())return[];switch(e){case h:return[p,c];case b:case _:return[p,d];case y:case g:return[p,u];case f:return[p,m];default:return[]}}(e.id);if(0===r.length)return e;let n=(e.community_publishers?.accepted??[]).filter(e=>!r.find(r=>r.id===e.id)),i=r.concat(n);return{...e,community_publishers:{...e.community_publishers,accepted:i}}}async function S(e){if(!I())return[];try{let r=E[e];if(r){let e=(await l.U.getVersions({widgetId:r})).data.meta.plugin;return[T(e)]}}catch(e){console.error(e)}return[]}async function w(e){if(!I())return[];try{let r=v[e];if(r){let e=(await s.V.getVersions({pluginId:r})).data.meta.plugin;return[T(e)]}}catch(e){console.error(e)}return[]}},927625:(e,r,n)=>{n.d(r,{AB:()=>eT,Ce:()=>ey,Ho:()=>eu,Q7:()=>eg,TL:()=>ew,Xg:()=>eb,v_:()=>eA});var i,a,o,s,l,c=n(411855),d=n(188507),u=n(140593),m=n(629019),p=n.n(m),h=n(737947),_=n(498750),g=n(563706),f=n(563042),E=n(761870),y=n(281381),b=n(125080),v=n(708258),I=n(163023),T=n(348425),S=n(939863),w=n(392592),A=n(674694),C=n(546856),N=n(466636),L=n(545941),O=n(158996),R=n(417659),P=n(853799),D=n(727749),k=n(738269),M=n(662275),F=n(672517),x=n(697551),U=n(27703),B=n(560718),V=n(860178),G=n(820642),H=n(215822),K=n(555328),W=n(376485),$=n(498606),Y=n(978527),z=n(928491),j=n(896528),q=n(432035),Z=n(580999),X=n(821134),J=n(350913),Q=n(526235),ee=n(457689),et=n(298543),er=n(740164),en=n(332086),ei=n(127391),ea=n(189095),eo=n(885700),es=n(109226),el=n(758064),ec=n(237494),ed=n(851750);function eu(e){let r;let[n,i]=c.useState(!1),a=!n&&e.isSet?ea.Bz:e.isWhiteboard?ea.kj:ea.h1,o=e.showNewBadge?c.createElement(eg,null):e.showFigPickBadge?c.createElement(e_,null):c.createElement(c.Fragment,null),s=p()(e.isSet?ea.mH:ea.ZX,{[ea.eB]:e.includeChromiumDownscalingFix&&g.Ay.chrome},e.imageClassName);return r=e.image?e.showOriginalThumbnail?c.createElement("img",{className:s,src:e.image,loading:"lazy",onLoad:()=>i(!0),alt:e.alt,draggable:!1}):c.createElement(A.Xy,{className:s,image:e.image,onLoad:()=>i(!0),hubFileId:e.hubFileId,alt:e.alt,thumbnailContext:e.thumbnailContext,resizedThumbnailUrls:e.resizedThumbnailUrls,draggable:e.draggable}):c.createElement(Q.Ek,null),c.createElement("div",{className:a,style:{backgroundColor:e.backgroundColor}},r,o,e.showPrototypeIcon&&c.createElement("div",{className:ea.cT},c.createElement(T.t,{svg:ed.A,className:ea.wr,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:ed.A})),e.showWhiteboardIcon&&c.createElement(ef,null))}function em(e){let r=(0,d.d4)(e=>e.orgById),n="search"===(0,d.d4)(({selectedView:e})=>e).view,i=e.plugin.org_id&&r?.[e.plugin.org_id],a=(0,H.uF)(e.plugin),{tagline:o,description:s,name:l}=a,u=(0,L.G8)({description:e.isPublishing?"":e.descriptionOverride??s??"",tagline:o??""},f.$J);return c.createElement("div",{className:ea.Ak},c.createElement("div",{className:ea.vG},c.createElement("img",{src:a.redirect_icon_url,loading:"lazy",alt:""})),c.createElement("div",{className:ea.wA},c.createElement(Y.V,{plugin:a,className:ea.Az,loading:"lazy",alt:""})),l&&c.createElement("div",{className:ea.K9},l),u&&c.createElement("div",{className:l?ea.Ry:ea.Tk},u),n&&i&&c.createElement("div",{className:ea.jG},c.createElement(ei.H,{entityId:i.id,entityName:i.name,imgUrl:i.img_url,hideTooltip:!0}),i.name),e.showNewBadge?c.createElement(eg,null):e.showInstalledIcon&&c.createElement("span",{className:ea.qP},(0,S.tx)("community.plugins.saved")),e.children)}c.memo(function(e){function r(){return e.name?c.createElement("div",{className:ea.ZR},e.name):c.createElement("div",{className:ea._},e.placeholderName)}function n(){return c.createElement("div",null,e.author?e.author:c.createElement("div",{className:ea.JM}))}return c.createElement(c.Fragment,null,c.createElement("div",{className:e.showFileNameAsPrimary?ea.cR:ea.i1,onClick:e.onClick},c.createElement("div",{className:ea.__},c.createElement("a",{className:ea.t5,href:e.href,onClick:e=>e.preventDefault(),style:{backgroundColor:e.backgroundColor,backgroundClip:g.Ay.safari?"padding-box":""}},c.createElement(eu,{image:e.backgroundImage,isWhiteboard:e.isWhiteboard,isSet:!!e.thumbnailIsSet,showFigPickBadge:e.showFigPickBadge,showNewBadge:e.showNewBadge,showPrototypeIcon:e.isPrototype,showWhiteboardIcon:e.isWhiteboard,showOriginalThumbnail:e.showOriginalThumbnail,hubFileId:e.hubFileId,alt:e.name}))),c.createElement("div",{className:ea.HC},c.createElement("div",{className:ea.dB},e.showFileNameAsPrimary?c.createElement(n,null):c.createElement(r,null)),c.createElement("div",{className:ea.bI},c.createElement("div",{className:ea.vz},ep(e.commentsSetting)&&c.createElement(eh,{count:e.commentCount}),e.duplicateButton),e.showFileNameAsPrimary?c.createElement(r,null):c.createElement(n,null)))))});let ep=e=>e!==B.Ni.ALL_DISABLED;function eh(e){return c.createElement("div",{className:ea.Z2},c.createElement(I.B,{className:ea.Ls,svg:el.A})," ",e.count)}function e_(){return c.createElement("div",{className:ea.jq,"data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.boosted_by_the_figma_team"),"data-tooltip-show-immediately":!0},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.fig_pick"),color:y.zE.BRAND,className:ea.q2}))}function eg(){return c.createElement("div",{className:ea.jq},c.createElement(y.Ex,{text:(0,S.t)("community.profiles.new"),color:y.zE.SUCCESS,className:ea.q2}))}function ef(){return c.createElement("div",{className:ea.o_,"data-tooltip-type":$.Ib.TEXT,"data-tooltip":(0,S.t)("community.profiles.made_in_fig_jam"),"data-tooltip-show-immediately":!0},c.createElement(T.t,{svg:eo.A,useOriginalSrcFills_DEPRECATED:!0,fallbackSvg:eo.A}))}function eE(e){let{CreatorsOverlay:r,creatorsOverlayProps:n}=i.useCreatorsHoverOverlay({resource:e.plugin}),a=e.isPaid?{id:"0",badges:[],monetized_resource_metadata:{id:"0",price:(0,N.ae)(e.price),is_subscription:!1}}:null;return c.createElement("div",{className:g.Ay.mobile?ea.IM:e.showAuthorByDefault?ea.Gf:ea.U$,onClick:e.onClick},a&&c.createElement(C.Mr,{resource:a||e.plugin}),c.createElement(r,{...n},c.createElement("div",{className:ea.w},c.createElement("div",{className:ea._F},c.createElement(ey,{plugin:e.plugin,showNewBadge:e.showNewBadge,showInstalledIcon:e.showInstalledIcon,isPublishing:e.isPublishing,descriptionOverride:e.descriptionOverride,isPublicOverride:e.isPublicOverride})),c.createElement(eb,{plugin:e.plugin,showInstallCount:e.showInstallCount,author:e.author,isPaid:e.isPaid,isPublicOverride:e.isPublicOverride,dropdown:e.dropdown}))))}function ey({plugin:e,showNewBadge:r,showInstalledIcon:n,isPublishing:i,descriptionOverride:a,isPublicOverride:o,...s}){let l=ev(e,o);return c.createElement(em,{showInstalledIcon:n??l,showNewBadge:r,isPublishing:i,plugin:e,descriptionOverride:a},c.createElement("div",{className:ea.bs},c.createElement(v.C,{...s})))}function eb({plugin:e,showInstallCount:r,author:n,isPaid:a,dropdown:o,isPublicOverride:s}){let{AuthorsJSX:l}=i.useCreatorsHoverOverlay({resource:e}),u=(0,d.d4)(e=>e.authedActiveCommunityProfile),m=(0,x.cs)(u),p=ev(e,s),h=s??!!e.roles.is_public,_=(0,V.iZ)(),f=(0,d.wA)(),y=e.publisher||e.creator,v=c.createElement("div",{className:ea.gx},c.createElement("div",{className:ea.MN},l)),T=c.useCallback(r=>{if(r?.stopPropagation(),r?.preventDefault(),p)_&&(f(D.s1({id:e.id,resourceType:K.vt.PLUGIN,source:D.uR.COMMUNITY_HUB})),f(w.F.enqueue({message:(0,S.t)("community.profiles.removed_from_saved_plugins"),type:"plugin-installed",button:{text:(0,S.t)("community.comments.undo"),action:()=>{f(D.oj({id:e.id,resourceType:K.vt.PLUGIN,orgId:void 0}))}}})));else{if(!_){if(g.rr){window.location.href="/login";return}f(E.Ts({origin:"plugin_install_signed_out"})),f(M.to({type:er.l,data:{headerText:(0,S.t)("community.profiles.save_this_plugin_to_give_you_and_figma_a_boost"),icon:es.A,dispatch:f}}));return}f(D.oj({id:e.id,resourceType:K.vt.PLUGIN,orgId:void 0}))}},[p,e,_,f]);return c.createElement("div",{className:ea.uB},r&&c.createElement("div",{className:ea.Rw},h&&(n||v),!h&&c.createElement("div",{className:ea.Wf},c.createElement(I.B,{className:ea.hz,svg:ec.A}),(0,S.tx)("community.cards.private")),c.createElement("div",{className:ea.y},h&&ep(e.comments_setting)&&c.createElement(eh,{count:e.comment_count}),a?c.createElement(ee.Ij,{metric:e.unique_run_count||0}):c.createElement("div",{className:g.Ay.mobile?ea.hA:ea.Pw},c.createElement(b.f,{className:g.Ay.mobile||m?ea.Ys:p?ea.XC:ea.sn,count:e.install_count,prefix:c.createElement("div",{className:ea.uu},p?"\u2713 ":"\u2193 "),onClick:g.Ay.mobile||m?void 0:T}),p&&c.createElement("div",{className:ea.a_,onClick:g.Ay.mobile||m?void 0:T},(0,S.tx)("community.profiles.remove_from_saved_plugins"))),o)),!r&&c.createElement(z.Ro,{entity:y,size:24}))}function ev(e,r){let n=(0,d.d4)(e=>e.authedActiveCommunityProfile),i=(0,x.Yo)();return(void 0===r||r)&&e.roles.is_public?n?(0,X.a)(n,e):e.profile_install_status===W.u8.PLUGIN_INSTALLED_FOR_USER:e.install_status===W.u8.PLUGIN_INSTALLED_FOR_USER||!!i&&e.install_status===W.u8.PLUGIN_INSTALLED_FOR_ORG}(e=>{function r(e){return c.createElement("div",{onMouseLeave:()=>{e.setDropdownRef(null),e.setDropdownContent(null)}},e.dropdownContent&&e.dropdownRef?.current&&c.createElement(et.Cf,{targetRect:e.dropdownRef.current.getBoundingClientRect(),maxWidth:150,minWidth:1,type:et.it.LIGHT,className:ea.s3,disableDropdownScrollContainer:!0,propagateCloseClick:!0},c.createElement("div",{className:ea.kP},e.dropdownContent)),e.children)}function n(e){let{setDropdownContent:r,setDropdownRef:n}=e,i=[c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null),c.useRef(null)],a=c.useRef(null),o=({profile:i,ref:a})=>c.createElement("span",{onMouseEnter:()=>{n(a),r(c.createElement(Z.Qi,{publisher:i,className:ea.Ah}))},ref:a,className:e.avatarContainerClassName,key:`author-link-${i.id}`},c.createElement(Z.Qi,{publisher:i,className:ea.CD,avatarClassName:ea.Vz,avatarSize:e.avatarSize,showAvatar:!0,hideName:!0})),s=({profile:r,stylesOverride:n})=>c.createElement(Z.Qi,{key:`author-link-${r.id}`,publisher:r,className:n||ea.CD,avatarClassName:ea.my,avatarSize:e.avatarSize,showAvatar:!0}),l=({profiles:e,ref:i})=>{let a=c.createElement(Z.Qi,{publisher:e[0],className:ea.CD});return c.createElement("div",{className:ea.NB},1===e.length&&(0,S.tx)("community.by_publisher",{publisher:a}),e.length>1&&(0,S.tx)("community.by_publisher_with_suffix",{publisherName:a,publishersSuffix:c.createElement(c.Fragment,null,c.createElement("span",{ref:i,className:ea.Jt,onMouseLeave:()=>{n(null)},onMouseEnter:()=>{n(i),r(c.createElement(c.Fragment,null,e.slice(1).map(e=>s({profile:e,stylesOverride:ea.Ah}))))}},(0,S.tx)("community.cards.pluralize_num_other_publishers",{numOtherPublishers:e.length-1})))}))},{resource:d}=e;if(!d)return null;let u=d.community_publishers.accepted;return 1===u.length?e.showAuthorAndOthersTextLabel?c.createElement(c.Fragment,null,o({profile:u[0],ref:i[0]}),l({profiles:u,ref:a})):c.createElement(c.Fragment,null,s({profile:u[0]})):u.length<=4?c.createElement(c.Fragment,null,u.map((e,r)=>o({profile:e,ref:i[r]})),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:a})):c.createElement(c.Fragment,null,...u.slice(0,4).map((e,r)=>o({profile:e,ref:i[r]})),(({profiles:i,ref:a})=>c.createElement("span",{ref:a,onMouseEnter:()=>{n(a),r(c.createElement(c.Fragment,null,i.map(e=>s({profile:e,stylesOverride:ea.Ah}))))},onMouseLeave:()=>{n(null)}},c.createElement(j.f,{size:e.avatarSize,className:ea.zb,text:`${i.length}`})))({profiles:u.slice(4),ref:i[4]}),e.showAuthorAndOthersTextLabel&&l({profiles:u,ref:a}))}e.useCreatorsHoverOverlay=function({resource:e,avatarStyleOverrides:i={size:24,containerClassName:ea.H,showAuthorAndOthersTextLabel:!1}}){let[a,o]=c.useState(null),[s,l]=c.useState(null),d=c.useMemo(()=>({setDropdownRef:l,setDropdownContent:o,dropdownRef:s,dropdownContent:a,avatarStyleOverrides:i}),[l,o,s,a,i]);return{AuthorsJSX:c.useMemo(()=>c.createElement(n,{resource:e,showAuthorAndOthersTextLabel:i.showAuthorAndOthersTextLabel,avatarSize:i.size,avatarContainerClassName:i.containerClassName,setDropdownContent:o,setDropdownRef:l}),[e,o,l,i]),CreatorsOverlay:r,creatorsOverlayProps:d}},e.Authors=n})(i||(i={})),(e=>{class r extends c.PureComponent{constructor(){super(...arguments),this.onClick=e=>{if((0,_.oJ)(e)){h.Ay.redirect((0,J.ho)(this.props.plugin?.id),"_blank");return}this.props.onClick()}}render(){return c.createElement(eE,{onClick:this.onClick,showInstallCount:!0,showAuthorByDefault:this.props.showAuthorByDefault,showNewBadge:!!(this.props.lastViewedAtForNewBadge&&Date.parse(this.props.plugin.created_at)>Date.parse(this.props.lastViewedAtForNewBadge)),dropdown:this.props.dropdown,plugin:this.props.plugin,isPublicOverride:this.props.isPublicOverride})}}e.ConnectedPluginTile=(0,d.Ng)(null,(e,r)=>({onClick:()=>{r.onClick?.(),e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.pluginId}))},onProfileCreate:n=>{e(M.to({type:en.G$,data:{variations:[en.FF.OPT_IN],userId:n.id,onFinish:()=>e(P.C({id:r.pluginId,resourceType:K.vt.PLUGIN}))}}))}}))(r),e.PluginTile=function(r){let n=(0,d.d4)(e=>e.publishedPlugins),i=r.plugin||(0,H.my)(r.pluginId,n);return c.createElement(e.ConnectedPluginTile,{...r,plugin:i})}})(a||(a={}));let eI=a.PluginTile,eT=(0,F.tf)(eI);class eS extends c.Component{render(){let{numResources:e,maxResources:r,className:n}=this.props;return c.createElement(c.Fragment,null,e<r?Array(r-e).fill(null).map((e,r)=>c.createElement("div",{key:r,className:n})):null)}}eS.defaultProps={maxResources:4},(e=>{class r extends c.Component{constructor(){super(...arguments),this.onHubFileClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onHubFileClick()})}render(){let e=(0,G.a6)(this.props.hubFile);return c.createElement("div",{className:ea.Yt},c.createElement("div",{className:ea.sj},c.createElement("a",{className:ea.Ai,style:{backgroundColor:(0,U.Cn)(this.props.hubFile.client_meta),backgroundImage:`url(${this.props.hubFile.thumbnail_url})`},onClick:this.onHubFileClick,href:(0,J.X$)(this.props.hubFile.id)},c.createElement("div",{className:ea.tr},c.createElement("div",{className:ea.Ll},e.name)))))}}r.displayName="PublicProfileHubFileTile",e.PublicProfileHubFileTile=(0,d.Ng)(null,(e,r)=>({onHubFileClick:()=>{e(k.$T({view:"communityHub",subView:"hubFile",hubFileId:r.hubFile.id}))}}))(r)})(o||(o={})),(e=>{class r extends c.Component{constructor(){super(...arguments),this.onPluginClick=(0,_.Gc)(e=>{e.preventDefault(),e.stopPropagation(),this.props.onResourceClick()})}render(){let e=(0,H.uF)(this.props.resource),r=(0,K.xQ)(this.props.resource);return c.createElement("div",{className:ea.Yt},c.createElement("div",{className:ea.sj},c.createElement("a",{className:ea.IC,onClick:this.onPluginClick,href:r?(0,J.YW)(this.props.resource.id):(0,J.ho)(this.props.resource.id)},c.createElement(Y.V,{className:ea.pt,plugin:e,loading:"lazy",alt:""}),c.createElement("div",{className:ea.FK},e.name))))}}r.displayName="PublicProfilePluginTile",e.PublicProfileBasePluginTile=(0,d.Ng)(null,(e,r)=>({onResourceClick:()=>{(0,K.xQ)(r.resource)?e(k.$T({view:"communityHub",subView:"widget",widgetId:r.resource.id})):e(k.$T({view:"communityHub",subView:"plugin",publishedPluginId:r.resource.id}))}}))(r)})(s||(s={})),(e=>{class r extends c.Component{constructor(e){super(e),this.onPublicProfileClick=e=>{if((0,_.oJ)(e)){let e=this.props.publicProfile;if(!e)return;h.Ay.redirect((0,R.bL)(e.profile_handle)||"","_blank");return}this.props.onPublicProfileClick()},this.updateFollowInfoOnFollowClick=()=>{let e=this.state.currentUserIsFollowing?{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff-1,currentUserIsFollowing:!1}:{currentUserFollowActionCountDiff:this.state.currentUserFollowActionCountDiff+1,currentUserIsFollowing:!0};this.setState(e)},this.state={currentUserFollowActionCountDiff:0,currentUserIsFollowing:e.publicProfile.current_user_is_following}}render(){let e=this.props.publicProfile;if(!e)return null;let r={id:e.id,name:e.name,img_url:e.img_url};return c.createElement("div",{className:`${ea.uy} ${this.props.notTabletSidebarOptimized?ea.HG:""}`},c.createElement("div",{className:ea.DU},c.createElement("div",{onClick:this.onPublicProfileClick},c.createElement(z.Ro,{entity:r,size:96,className:ea.W8})),c.createElement("div",{className:ea.kl},c.createElement("div",{className:ea.r9,onClick:this.onPublicProfileClick},e.name),e.profile_handle&&c.createElement("div",{className:ea.TD},c.createElement("div",{className:ea.O3,onClick:this.onPublicProfileClick},"@",e.profile_handle),e.current_user_is_followed&&c.createElement(eA,null)),e.location&&c.createElement("div",{className:ea._7},e.location),c.createElement("div",{className:ea.k1},!this.props.isOwnProfile&&c.createElement(q.W,{profile:e,followClassName:ea.u8,followingClassName:ea.u8,unfollowClassName:ea.u8,onClick:this.updateFollowInfoOnFollowClick,onError:this.updateFollowInfoOnFollowClick}),c.createElement("div",null,c.createElement("div",{className:ea.u0},(0,S.tx)("community.follow.followers")),c.createElement("div",{className:ea.oQ},e.follower_count+this.state.currentUserFollowActionCountDiff))))),this.props.resources.length>0&&c.createElement("div",{className:ea.iR},this.props.resources.map(e=>{let r=(0,O.Vm)(e);switch(r){case K.vt.HUB_FILE:return c.createElement(o.PublicProfileHubFileTile,{hubFile:e,key:e.id});case K.vt.PLUGIN:case K.vt.WIDGET:return c.createElement(s.PublicProfileBasePluginTile,{resource:e,key:e.id});default:(0,u.xb)(r)}}),c.createElement(eS,{numResources:this.props.resources.length,maxResources:6,className:ea.Yt})),0===this.props.resources.length&&c.createElement("div",{className:ea.t9},(0,S.tx)("community.profiles.no_resources_published_yet")))}}r.displayName="PublicProfileTile";let n=(e,r)=>({isOwnProfile:e.authedActiveCommunityProfile?.id===r.publicProfile.id}),i=(e,r)=>({onPublicProfileClick:()=>{r.onClick&&r.onClick(),e(k.$T({view:"communityHub",subView:"handle",handle:r.publicProfile.profile_handle}))}});e.ConnectedPublicProfileTile=(0,d.Ng)(n,i)(r),e.ConnectedPublicProfileTileTracked=(0,d.Ng)(n,i)((0,F.tf)(r))})(l||(l={}));let ew=l.ConnectedPublicProfileTile;function eA({color:e=y.zE.DEFAULT}){return c.createElement(y.Ex,{text:(0,S.t)("community.profiles.follows_you"),color:e,className:ea.x7})}l.ConnectedPublicProfileTileTracked},894728:(e,r,n)=>{n.d(r,{xZ:()=>L,z2:()=>O});var i=n(411855),a=n(188507),o=n(922827),s=n(629019),l=n.n(s),c=n(91408),d=n(517333),u=n(966712),m=n(563706),p=n(493323),h=n(163023),_=n(779709),g=n(611978),f=n(193212),E=n(99506),y=n(776615),b=n(239671),v=n(945020),I=n(507956),T=n(837746),S=n(890642),w=n(251473);let A=!1,C=()=>{if(A)return;A=!0;let e="",r=e=>Math.atan(e);for(let n=0;n<200;n++){let i=n/200,a=r(50*i)/r(50);e+=(100*i).toFixed(3)+"%{transform:scaleX("+a.toFixed(3)+");}"}let n="@-moz-keyframes progress-bar-animation {"+e+"}@-webkit-keyframes progress-bar-animation {"+e+"}",i=document.createElement("style");i.nonce=(0,u.Ay)().csp_nonce,i.textContent=n,document.head.appendChild(i)};function N(){return(0,u.kc)().pride_inclusive_loading_bar?S.DT:""}function L(){let e=(0,g._6)();if("fullscreen"!==e.view)return null;let r=(0,y.ju)(e);return i.createElement(D,{editorType:(0,b.oD)(e.editorType),cover:!0,progressPaused:!0,editorTheme:r})}function O(e){switch(e.progressBarMode){case o.Oin.KEEP_UI:return i.createElement(R,{progressBarType:e.progressBarType,left:e.left});case o.Oin.HIDE_UI:case o.Oin.ON_AND_LOCKED:return i.createElement(D,{editorType:e.editorType,isViewer:e.isViewer,shouldNotOverflow:e.shouldNotOverflow});case o.Oin.OFF:return i.createElement(i.Fragment,null)}}function R(e){let r=(0,a.d4)(e=>(0,I.$A)(e.selectedView)?0:(0,c.jz)(T.uj0));return i.createElement("div",{className:S.A7},i.createElement("div",{className:S.BT}),i.createElement("div",{className:S.cE,style:{right:r}}),i.createElement(P,{progressBarType:e.progressBarType,left:e.left}))}function P(e){switch(e.progressBarType){case v.lF.SPINNER:return i.createElement("div",{className:S.AV},i.createElement(p.nt,null));case v.lF.BAR:default:return i.createElement(B,{className:S.Wn,style:{left:`${e.left||0}`}})}}function D(e){let r="whiteboard"===e.editorType?E._Y.WHITEBOARD:e.isViewer?"viewer":E._Y.DESIGN;return i.createElement("div",{"data-editor-theme":e.editorTheme,className:l()(S.A7,e.shouldNotOverflow?S.ZT:null)},i.createElement("div",{className:l()({[S.Kb]:e.cover,[S.dV]:"whiteboard"===r,[S.Dn]:"design"===r&&!m.rr,[S.k1]:"design"===r&&m.rr,[S.Mf]:"viewer"===r&&!m.rr,[S.mb]:"viewer"===r&&m.rr})}),"whiteboard"!==r&&i.createElement(M,{type:r,progressPaused:e.progressPaused}),"whiteboard"===r&&i.createElement(k,{progressPaused:e.progressPaused}))}function k(e){return i.createElement("div",{className:l()(S.Dg,{[S.cu]:e.progressPaused})},i.createElement("div",{className:S.oQ},i.createElement("div",{className:S.pm},i.createElement("div",{className:S.BL})),i.createElement("div",{className:S.pn},i.createElement("div",{className:S.Ts}),i.createElement("div",{className:S.n1})),i.createElement("div",{className:S.xo},i.createElement("div",{className:S.Ag}),i.createElement("div",null))),i.createElement(U,{type:"whiteboard",progressPaused:e.progressPaused}))}function M(e){let[r,n]=i.useState(!1),a=(0,f.aq)();return((d.eD?d.eD.getZoomFactor():m.Ay.chrome||m.Ay.safari?Promise.resolve(window.outerWidth/window.innerWidth):Promise.resolve(void 0)).then(e=>{e&&(e<.95||e>1.05)&&a()&&!r&&n(!0)}),r||(0,m.KR)()||_.z4.getIsExtension())?i.createElement(F,{type:e.type,progressPaused:e.progressPaused}):i.createElement(x,{type:e.type,progressPaused:e.progressPaused})}function F(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,a="viewer"===e.type&&!m.rr;return i.createElement("div",{className:l()(S.Dg,{[S.iI]:e.progressPaused})},i.createElement("div",{className:l()({[S.OU]:!0,[S.Uo]:n,[S.v0]:a,[S.uq]:r})},i.createElement(h.B,{className:S.wn,svg:w.A})),i.createElement(U,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function x(e){let r="design"===e.type,n="viewer"===e.type&&m.rr,a="viewer"===e.type&&!m.rr;return i.createElement("div",{className:l()(S.Dg,{[S.cu]:e.progressPaused})},i.createElement("div",{className:l()({[S.OU]:!0,[S.Uo]:n,[S.v0]:a})},i.createElement("div",{className:S.pm},i.createElement("div",{className:`${S.hj} ${S.nR}`}),i.createElement("div",{className:`${S.Rp} ${S.nR}`}),i.createElement("div",{className:`${S.CU} ${S.nR}`}),i.createElement("div",{className:S.U0},i.createElement("div",{className:`${S.A6} ${S.nR}`}))),i.createElement("div",{className:S.pn},i.createElement("div",{className:`${S.Ts} ${S.nR}`}),i.createElement("div",{className:`${S.n1} ${S.nR}`})),i.createElement("div",{className:S.xo},i.createElement("div",{className:`${S.Ag} ${S.nR}`}),i.createElement("div",null))),i.createElement(U,{type:r?"design":n?"mobile_viewer":"desktop_viewer",progressPaused:e.progressPaused}))}function U(e){let{type:r,progressPaused:n}=e,a=N();return i.createElement("div",{className:l()({[S.QT]:"design"===r,[S.WH]:"mobile_viewer"===r,[S.y6]:"desktop_viewer"===r,[S.Pd]:"whiteboard"===r})},i.createElement("div",{className:l()({[S.fb]:"design"===r,[S.$8]:"mobile_viewer"===r,[S.Zu]:"desktop_viewer"===r,[S._M]:"whiteboard"===r,[S.BM]:!0!==n,[a]:!0})},i.createElement("div",{className:S.On})))}function B({className:e,style:r,seconds:n=120}){let a=N();return C(),i.createElement("div",{className:`${S.pT} ${e||""} ${a}`,style:{MozAnimation:`progress-bar-animation ${n}s linear`,WebkitAnimation:`progress-bar-animation ${n}s linear`,...r}})}B.displayName="ProgressBarRelative"},345679:(e,r,n)=>{n.d(r,{HC:()=>b,dU:()=>D});var i=n(411855),a=n(188507),o=n(966664),s=n(922827),l=n(629019),c=n.n(l),d=n(121913),u=n(966712),m=n(939863),p=n(529906),h=n(237395),_=n(842164),g=n(663237);let f="accessibilitytree--node--xYG8O",E="accessibilitytree--disabled--m1ByR accessibilitytree--node--xYG8O",y="accessibilitytree--scrollContainer--TNuEw accessibilitytree--node--xYG8O";function b({viewer:e,autofocus:r,setAutofocus:n}){let o;let s=(0,p.e)(),l=(0,a.d4)(e=>!!e.modalShown),d=i.useRef(s);if(l||(d.current=s),d.current&&e?.hasActiveScene()){let a=(0,u.u4)("ee_accessibility_inc_prototype",v,I);o=i.createElement(a,{viewer:e,autofocus:r,setAutofocus:n})}else o=i.createElement("p",{className:g.Q},(0,m.t)("viewer.accessibilitytree.disabled_placeholder"));return i.createElement("main",{className:c()("accessibilitytree--container--CjsLk","viewer-forward-keyevents")},o)}function v({autofocus:e,setAutofocus:r,viewer:n}){let a=function(e){let r=s.bpS.getActiveScene(),n=i.useMemo(()=>new O(e,r),[e,r]),a=(0,h._)(n);return i.useEffect(()=>(s.yGz.setMapping(r,s.Zbk.VIEWER),()=>s.yGz.setMapping(r,s.Zbk.NONE)),[r]),i.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&a.updateDirtyNodes([r])};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),()=>{e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[n,a,e]),i.useEffect(()=>{let n=setInterval(()=>{let n=s.yGz.flushChangedNodes(r).map(r=>e.getPrototypeNode(r)).filter(o.Vq);a.updateDirtyNodes(n)},100);return()=>void clearInterval(n)}),a}(n);return i.createElement(T,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:a})}function I({autofocus:e,setAutofocus:r,viewer:n}){let a=function(e){let r=i.useMemo(()=>new R(e),[e]),n=(0,h._)(r);return i.useEffect(()=>{let r=()=>{let r=e.getTopmostFrameNode();r&&n.updateSubtree(r)},i=r=>{let i=e.getPrototypeNode(r);i&&n.updateSubtree(i)};return r(),e.on("viewportChanged",r),e.on("canvasResize",r),e.on("topLevelFrameChange",r),e.on("accessibilityNodeInvalidated",i),()=>{e.off("accessibilityNodeInvalidated",i),e.off("topLevelFrameChange",r),e.off("canvasResize",r),e.off("viewportChanged",r)}},[r,n,e]),n}(n);return i.createElement(T,{autofocus:e,setAutofocus:r,viewer:n,accessibilityScope:a})}let T=i.memo(function({accessibilityScope:e,autofocus:r,setAutofocus:n,viewer:a}){let[o,s]=i.useState(void 0),l=function(e,r){let n=i.useRef(null),a=n.current,o=a?.contains(a?.ownerDocument?.activeElement);return i.useLayoutEffect(()=>{if(!e&&!o)return;let i=n.current;i&&(e||!i.contains(i.ownerDocument.activeElement))&&(i.focus(),e&&r?.(!1))}),n}(r,n);return(i.useEffect(()=>{let e=()=>{let e=a.getTopmostFrameNode();e&&s(a.nodeId(e))};return a.on("topLevelFrameChange",e),()=>{a.off("topLevelFrameChange",e)}},[a]),i.useEffect(()=>{let e=a.getTopmostFrameNode();s(e?a.nodeId(e):void 0)},[a]),o)?i.createElement(S,{key:o,nodeId:o,parentId:void 0,enabled:!0,focusRef:l,accessibilityScope:e,viewer:a}):null});function S({parentId:e,nodeId:r,enabled:n=!0,focusRef:a,accessibilityScope:o,viewer:s}){let l;let c=(0,h.W)(r,o),u=s.getPrototypeNode(r);if(!c||!u)return null;let{isClickable:m,tag:p="div",role:_,label:g}=c,b=L.get(p)||{};switch(s.nodeType(u)){case"TABLE":l=function(e,r){let n=e.nodeTableCells(r).map(r=>({text:e.nodeTableCellContent(r),pos:e.nodeDisplayBounds(r)})).sort((e,r)=>e.pos.x<r.pos.x?-1:1),a={};for(let e of n)a[e.pos.y]?a[e.pos.y].push(e):a[e.pos.y]=[e];let o=Object.keys(a).sort();return[i.createElement("div",{role:"rowgroup",key:"table-header"},a[o[0]].map((e,r)=>i.createElement("span",{key:`header-${r}`,role:"columnheader",style:{left:e.pos.x,top:e.pos.y,width:e.pos.width,height:e.pos.height}}))),i.createElement("div",{role:"rowgroup",key:"table-body"},o.map((e,r)=>i.createElement("div",{key:e,role:"row","aria-rowindex":r},a[e].map((r,n)=>i.createElement("span",{key:`${e}-${n}`,role:"cell",className:f,style:{display:"inline-block",left:r.pos.x,top:r.pos.y,width:r.pos.width,height:r.pos.height}},r.text)))))]}(s,u);break;case"TEXT":l=D(s.nodeText(u)||"",s.nodeLineData(u)||[],s.nodeCharacterStyles(u),s.navigateToFrameAndCloseOverlays);break;default:l=c.childIds.map(e=>i.createElement(S,{key:e,nodeId:e,accessibilityScope:o,focusRef:void 0,viewer:s,parentId:r}))}let v=s.nodeScrollBounds(u),I=e&&s.getPrototypeNode(e),T=!n&&"none"||I||"canvas",C=A(s,u,v?"scrollContainer":T),N=m?{onClick:e=>{(0,d.f)(d.h.PROTOTYPE_BUTTON_CLICKED,{isMouseEvent:e?.screenX!==0&&e?.screenY!==0}),s.nodeTriggerInteraction(u,"ON_CLICK")},onFocus:()=>void s.nodeHover(u),onBlur:()=>void s.nodeReverseHover(u)}:{},O=i.createElement(p,{className:!n&&E||!!v&&y||f,style:C,tabIndex:a?0:void 0,ref:a,role:_,key:r,"aria-label":g,...b,...N},l);return v&&(O=i.createElement(w,{displayRect:A(s,u,T),enabled:n,scrollRect:v,onScrolled:(e,r)=>s.nodeScrollTo(u,e,r),scrollAreaContent:O})),O}function w({displayRect:e,enabled:r,onScrolled:n,scrollRect:a,scrollAreaContent:o}){let s=i.useRef(null),l=i.useRef(!1),c=i.useCallback(e=>{let r=e.target;("number"==typeof r?.scrollLeft||"number"==typeof r?.scrollTop)&&(l.current?l.current=!1:n?.(r.scrollLeft*a.width/r.scrollWidth,r.scrollTop*a.height/r.scrollHeight))},[n,a.height,a.width]);return i.useEffect(()=>{let e=s.current;if(e)return e.addEventListener("scrollend",c),()=>e.removeEventListener("scrollend",c)},[c]),i.useEffect(()=>{let e=s.current;e&&(l.current=!0,a.width&&(e.scrollLeft=a.x*e.scrollWidth/a.width),a.height&&(e.scrollTop=a.y*e.scrollHeight/a.height))},[a.x,a.y,a.width,a.height]),i.createElement("div",{className:r?y:E,style:e,ref:s},o)}function A(e,r,n){switch(n){case"none":return{};case"canvas":{let{x:n,y:i,width:a,height:o}=e.nodeDisplayBounds(r);return{left:n,top:i,width:a,height:o}}case"scrollContainer":{let n=e.nodeCanvasSpaceBounds(r),i=e.nodeScrollBounds(r);if(!i)return{};{let e="100%",r="100%";return 0!==i.height&&(e=`${100*i.height/n.height}%`),0!==i.width&&(r=`${100*i.width/n.width}%`),{height:e,width:r}}}default:{let i=e.nodeCanvasSpaceBounds(n),a=e.nodeScrollBounds(n),o=e.nodeCanvasSpaceBounds(r),s=a?a.width:i.width,l=a?a.height:i.height,c=i.x,d=i.y,u=(o.x-c)/s,m=(o.y-d)/l,p=o.width/s,h=o.height/l;return{top:`${100*m}%`,left:`${100*u}%`,height:`${100*h}%`,width:`${100*p}%`}}}}let C=new Set(["article","aside","button","div","footer","form","header","h1","h2","h3","h4","h5","h6","input","nav","p","section","span"]),N=new Map([["img","div"],["a","button"]]),L=new Map([["form",{onSubmit:e=>e.preventDefault()}],["button",{type:"button"}],["input",{readonly:"readonly"}]]);class O{constructor(e,r){this.viewer=e,this.sceneHandle=r}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){let r=s.yGz.getNodeInfo(this.sceneHandle,this.viewer.nodeId(e)),n=r.tag.toLowerCase();return N.has(n)?n=N.get(n):C.has(n)||(n="div"),{tag:n,role:r.role.toLowerCase(),inclusion:_.vF.INCLUDE,label:r.label||void 0,isClickable:"BUTTON"===r.role||"LINK"===r.role}}children(e){return s.yGz.getNodeInfo(this.sceneHandle,this.viewer.nodeId(e)).readableChildren.map(e=>this.viewer.getPrototypeNode(e)).filter(o.Vq)}}class R{constructor(e){this.viewer=e,this.comparePayloads=void 0}id(e){return this.viewer.nodeId(e)}isRoot(e){let r=this.viewer.nodeParent(e);return!r||"CANVAS"===this.viewer.nodeType(r)}parent(e){let r=this.viewer.nodeParent(e),n=r&&this.viewer.nodeType(r);if("CANVAS"!==n&&"SECTION"!==n&&r)return r}interpret(e){return function(e,r){let n;let i=e.nodeInteractions(r),a=!!i.find(e=>"ON_CLICK"===e.trigger),o=!!i.find(e=>("URL"===e.to||"INTERNAL_NODE"===e.to)&&"NAVIGATE"===e.type&&"ON_CLICK"===e.trigger),s=!!e.nodeScrollBounds(r),l=e.getTopmostFrameNode()===r,c=!e.nodeVisible(r),{tag:d,role:u,label:m}=function({tag:e,role:r,label:n}){let i,a,o;return e&&"AUTO"!==e&&(i=e.toLowerCase()),r&&"AUTO"!==r&&(a=r.toLowerCase()),n&&""!==n&&(o=n),{tag:i,role:a,label:o}}(e.nodeAccessibilityProperties(r)),p=d||u||m?_.vF.INCLUDE:void 0;if(c)void 0===p&&(p=_.vF.OMIT),p=void 0===p?_.vF.OMIT:p,d="div";else if(a){if(void 0===p&&(p=_.vF.INCLUDE),d||="button",o&&(u||="link"),!e.nodeText(r)){let i=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,label:i,childIds:r}}}else{let i=e.nodeType(r);switch((l||a||s)&&void 0===p&&(p=_.vF.INCLUDE),i){case"FRAME":if(l)d||="article",m||=e.nodeName(r),void 0===p&&(p=_.vF.INCLUDE);else{if(d||="div",!u&&P(e,r)){let i=e.nodeName(r);n=(e,r)=>r.length?{...e,childIds:r}:{...e,inclusion:_.vF.INCLUDE,role:"img",label:e.label||i,childIds:r}}void 0===p&&(p=_.vF.CHILDREN)}break;case"BOOLEAN_OPERATION":case"STAR":case"LINE":case"ELLIPSE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"VECTOR":P(e,r)?(d||="div",u||="img",m||=e.nodeName(r),void 0===p&&(p=_.vF.INCLUDE)):(d||="div",void 0===p&&(p=_.vF.OMIT));break;case"SYMBOL":case"INSTANCE":d||="article",void 0===p&&(p=_.vF.INCLUDE),m||=e.nodeName(r);break;case"TEXT":d||="p",void 0===p&&(p=_.vF.INCLUDE);break;case"TABLE":d||="div",u||="table",void 0===p&&(p=_.vF.INCLUDE);break;case"TABLE_CELL":d||="td",void 0===p&&(p=_.vF.OMIT);break;default:d||="div",void 0===p&&(p=_.vF.INCLUDE),n=(e,r)=>(p=r.length?_.vF.INCLUDE:_.vF.OMIT,{...e,inclusion:p,childIds:r})}}let h={inclusion:p,tag:d,role:u,label:m,isClickable:a};return n?.bind(null,h)??h}(this.viewer,e)}children(e){return this.viewer.mapChildren(e,e=>e)}}function P(e,r){let n=e.nodeFillTypes(r);return 1===n.length&&"IMAGE"===n[0]}function D(e,r,n,a){let o=e.split(/\n/mu),s=[];function l(e){for(;s.length>e+1;){let e,r;let[n,a]=s.pop();switch(n){case"UNORDERED_LIST":e="ul",r="li";break;case"ORDERED_LIST":e="ol",r="li";break;default:e="p",r="span"}s[s.length-1][1].push(i.createElement(e,{key:s[s.length-1][1].length},a.map((e,n)=>i.createElement(r,{key:n},e))))}}let c=0;for(let e=0;e<o.length;e++){let d=o[e],u=r[e]||{type:"PLAIN",indentLevel:0};for("PLAIN"===u.lineType&&(u.indentLevel=0),l(u.indentLevel),s.length>1&&s[s.length-1][0]!==u.lineType&&l(u.indentLevel-1);s.length<u.indentLevel+1;)s.push([u.lineType,[]]);s[s.length-1][1].push(function(e,r){let o=[];for(let s of n){let{start:n,end:l,props:c}=s,d=[...r].length;if(n>e+d)break;if(l<=e)continue;n=Math.max(0,n-e),l=Math.min(d,l-e);let u=RegExp(`(?:[^]{${n}})([^]{${l-n}})`,"u"),m=r.match(u)?.[1],p=c?.get?.("HYPERLINK"),h=c?.get?.("FONT_STYLE"),_=h?.toLowerCase()?.includes("italic"),g=h?.toLowerCase()?.includes("bold"),f=c?.get?.("FONT_SIZE"),E=c?.get?.("TEXT_DECORATION"),y={fontWeight:g?"bold":void 0,fontStyle:_?"italic":void 0,fontSize:f?`${f}px`:void 0,textDecoration:new Map([["UNDERLINE","underline"],["STRIKETHROUGH","line-through"]]).get(E)};if("string"==typeof p?.url)o.push(i.createElement("a",{key:n+e,target:"_blank",rel:"noopener",href:p.url,style:y},m));else if(a&&"object"==typeof p?.guid){let r=p.guid;o.push(i.createElement("button",{key:n+e,type:"button",role:"link",onClick:()=>a(`${r.sessionID}:${r.localID}`)},m))}else g||_||f||E?o.push(i.createElement("span",{key:n+e,style:y},m)):o.push(m)}return o}(c,d)),c+=d.length+1}return l(0),s[0][1].map((e,r)=>"string"!=typeof e?e:i.createElement("p",{key:r},e))}},215688:(e,r,n)=>{n.d(r,{Bt:()=>a,IO:()=>o,nO:()=>i});let i="prototyping-auth-comments-modal",a="prototype-comments-view",o="prototype-sidebar-panel"},137874:(e,r,n)=>{n.d(r,{F:()=>f});var i=n(411855),a=n(188507),o=n(939863),s=n(944682),l=n(662275),c=n(259927),d=n(67085),u=n(499743),m=n(611978),p=n(892542),h=n(549774),_=n(728587),g=n(222129);function f(e){let{nodeId:r,clientX:n,clientY:f,prototypeUrl:E,fileKey:y,startingPointsData:b}=e,v=(0,m._6)();if("prototype"!==v.view)throw Error(`Unexpected non-prototype view: ${v.view}`);let{showHotspots:I,showProtoSidebar:T,scalingInfo:S}=v,w=(0,a.wA)(),A=(0,u.p)(),C=(0,p.b)(A,p.d.PROTOTYPE_FLOW_CONTEXT_MENU),N=(e,r)=>{let n=(0,h.vp)({scalingInfo:S,nodeId:e,startingPointNodeId:e,showHotspots:I,showProtoSidebar:T},null,null,C);w(s.S({fileKey:y,source:p.d.PROTOTYPE_FLOW_CONTEXT_MENU,url:`${r}${n}`,visualBellMessageOverride:(0,d.dE)({startingPointNodeId:e,startingPointsData:b}),visualBellButton:{text:(0,o.t)("permissions.copy_link_button.visual_bell.see_link_settings"),action:()=>{w((0,l.to)({type:g.g_,data:{fileKey:y,source:d.nk.prototypeCopyLinkButtonVisualBell}}))}}}))},L=[{displayText:(0,o.t)("viewer.flows_sidebar.copy_link_to_flow"),callback:()=>N(r,E)}];return i.createElement("div",{className:`${c.Dm}`},i.createElement(_.j,{dispatch:w,items:L,parentRect:{width:10,height:10,left:n+100,top:f,right:n+110,bottom:f-10},onSelectItem:e=>{e.callback&&e.callback("",null,w)},showPoint:!1}))}},337414:(e,r,n)=>{n.d(r,{e:()=>d});var i=n(433011),a=n(498750),o=n(563706),s=n(554322),l=n(563835);let c=class e{constructor(r,n){this._isUIShown=r,this._inCommentsMode=!1,this._rcsUserFlags=[],this._hideUITask=new i.W,this.handleProgressBarStoppedShowing=()=>{this.showUiAndScheduleFade()},this.onWindowFocus=()=>{this.showUiAndScheduleFade()},this.didEnterCommentsMode=()=>{this._hideUITask.reset(),this._setUIShown(!0),this._inCommentsMode=!0},this.didLeaveCommentsMode=()=>{this._inCommentsMode&&(this._inCommentsMode=!1,this.showUiAndScheduleFade())},this.didRscUserFlagsUpdate=e=>{this._rcsUserFlags=e},this.handleUnhideUI=()=>{this.showUiAndScheduleFade()},this.handlePageMouseDownOrTouchStart=e=>{"CURRENT_TLF"===e.type||"DEVICE_FRAME"===e.type?this._setUIShown(!1):"PROTOTYPE_BACKGROUND"===e.type&&(this._hideUITask.reset(),this._isUIShown()?this._setUIShown(!1):this.showUiAndScheduleFade())},this.handleHotspotClicked=()=>{this._setUIShown(!1)},this.handlePageMouseMove=(e,r)=>{let n=e.clientY,i=window.innerHeight-e.clientY,a=85>Math.abs(window.innerWidth/2+r/2-e.clientX)&&i<60;n<(0,s.bG)()?this.showUiAndScheduleFade():a?this.showUiAndScheduleFade():this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterMove=e=>{this._hideUITask.reset(),this._isUIShown()||this._setUIShown(!0),e.stopPropagation()},this.handleHeaderOrFooterBlur=e=>{this.scheduleFadeIfNecessary()},this.handleHeaderOrFooterFocus=e=>{this._hideUITask.reset(),this._setUIShown(!0)},this.handleKeyDown=(e,r)=>{(r&&this._isUIShown()||e.keyCode===a.Uz.ESCAPE)&&this.showUiAndScheduleFade()},this.teardown=()=>{this._hideUITask.reset()},this.showUiAndScheduleFade=()=>{this._isUIShown()||this._setUIShown(!0),this._hideUITask.reset(),this.scheduleFadeIfNecessary()},this.scheduleFadeIfNecessary=()=>{this._hideUITask.isScheduled()||this._hideUITask.scheduleOnce(()=>{this._setUIShown(!1)},e.FADE_DELAY_MS)},this._setUIShown=r=>{let i=!r&&this._inCommentsMode,a=!r&&this._rcsUserFlags.reduce((r,n)=>r||e.RCS_SHOWN_ON_UI.has(n),!1);i||a||n(r)}}};c.FADE_DELAY_MS=o.rr?1e3:2e3,c.RCS_SHOWN_ON_UI=new Set([l.e]);let d=c},562124:(e,r,n)=>{n.d(r,{Y9:()=>eo});var i=n(411855),a=n(188507),o=n(686754),s=n(686046),l=n(629019),c=n.n(l),d=n(121913),u=n(511617),m=n(568214),p=n(697170),h=n(737947),_=n(560945),g=n(966712),f=n(418956),E=n(860601),y=n(179940),b=n(153234),v=n(30637),I=n(268537),T=n(201242),S=n(163023);n(715981);let w={"data-fpl-audit-approved":""};var A=n(939863),C=n(392592),N=n(362252),L=n(738269),O=n(293017),R=n(938908),P=n(37943),D=n(138369),k=n(529906),M=n(369870);n(488983);var F=n(318812),x=n(611978),U=n(860178),B=n(94500),V=n(498606),G=n(679282),H=n(549166),K=n(347127),W=n(215688),$=n(624158),Y=n(957369),z=n(560002),j=n(759457),q=n(112512),Z=n(720248),X=n(671250),J=n(960340),Q=n(623467),ee=n(673520),et=n(798387),er=n(748292);let en="PROTOTYPE_SETTINGS_DROPDOWN",ei="proto_header_options_dropdown",ea=(0,M.ck)();function eo(e){let{prototype:r,file:n,shouldShowUI:s,recordingKey:l,optionsMenu:d}=e,_=(0,a.wA)(),E=(0,U.iZ)(),I=(0,F.Um)(),C=(0,x._6)(),N=(0,D.Fy)(),P=i.useRef(null),k=i.useRef(null),M=e=>{e.preventDefault(),_((0,B._P)({name:"Prototype Logo Clicked"})),_((0,O.eH)())},V=(e,r)=>P.current&&P.current.getBoundingClientRect().width<970?e:r,Y=!!E&&n.canView,Z=u.GZ()&&!(0,v.nl)(),X=Z&&null==(0,y.qg)(h.Ay.location.search).fullscreen,J=window.matchMedia("(max-width:830px)").matches&&!(0,v.PN)(),Q=j.wx;if(X&&!ea){let r=(0,m.sN)(m.Uv,(0,m.HL)(e.prototypeBGColor));Q=(0,m.HD)(r)?j.RA:j.cZ}let ee=!!I&&I.type===en,et=(0,f.md)($.jH),er=(0,f.md)($.M);return s&&r.showProgressBar?i.createElement(el,{onClickLogo:M}):i.createElement(i.Fragment,null,i.createElement("div",{className:c()(Q,{[j.Wc]:e.shouldHideHeader&&"loading"!==er&&!et,[j.G2]:e.sidebarData.isSidebarOpen||e.isCommentsSidebarOpen}),ref:P,...w,role:"region","aria-label":(0,A.t)("viewer.menu_bar.accessible_label"),onBlurCapture:e.onBlurCapture,onFocusCapture:e.onFocusCapture,onMouseMove:e.onMouseMove,onMouseDown:e=>{e.stopPropagation()}},i.createElement("div",{className:j.Cd},!Z&&i.createElement(ed,{recordingKey:b.Pt(l,"accessibility-button"),setAccessibilityTreeFocus:e.setAccessibilityTreeFocus}),i.createElement(es,{onClickLogo:M}),!Z&&e.startingPointsData&&e.startingPointsData?.length>0&&i.createElement("div",{ref:k},i.createElement(em,{setShowSidebar:e.sidebarData.setShowSidebar,isSidebarOpen:!!C.showProtoSidebar,sidebarId:e.sidebarData.sidebarId})),(!Z||ea)&&i.createElement(eu,{recordingKey:b.Pt(l,"comments-button"),selected:e.prototype.showComments,onClick:E?()=>{r.showComments?_(R.BZ()):_(R._b())}:e.showAuthCommentsModal,targetId:E?W.Bt:W.nO})),i.createElement("div",{className:j.SP},!Z&&!1,!Z&&i.createElement("h1",{className:Y?j.Ou:j.DD,dir:"auto"},n.name),Z&&i.createElement("h1",null,i.createElement(o._,{newTab:!0,trusted:!0,className:j.DD,href:`/proto/${n.key}`},n.name)),!Z&&Y&&i.createElement("div",{className:j.hg},i.createElement("div",{className:j.Ln},i.createElement(T.PX,{label:(0,A.t)("proto.options_dropdown"),"aria-expanded":ee,"aria-haspopup":"menu","aria-controls":ee?ei:void 0,onClick:e=>{e.stopPropagation(),ee?_(L.oB()):_(L.j7({type:en}))},svg:i.createElement(S.B,{svg:q.A,className:j.zl})})),ee&&i.createElement(ec,{viewer:e.viewer||null,file:n}))),i.createElement("div",{className:j.DK},(0,g.kc)().prototype_preload_offline&&i.createElement($.ez,null),(!Z||ea)&&e.multiplayer&&i.createElement(H.Cv,{dropdownShown:I,multiplayer:e.multiplayer,user:E}),(!Z||ea)&&i.createElement(z.Ay,{user:E,shareText:V((0,A.t)("viewer.menu_bar.share"),(0,K.f)(e.file.editorType)?(0,A.t)("viewer.menu_bar.share_presentation"):(0,A.t)("viewer.menu_bar.share_prototype")),loginText:V((0,A.t)("viewer.menu_bar.log_in"),(0,A.t)("viewer.menu_bar.log_in_or_create_account")),file:n}),!J&&d,!ea&&i.createElement(ep,{inFullScreenMode:e.inFullScreenMode,dispatch:_}))),!Z&&!ea&&!E&&!C.hideUI&&N()&&i.createElement(G.PQ,{origin:p.DT.PROTOTYPE,hideOnMobile:!0,overrideUseFedCMPrompt:!1}))}function es(e){let r=u.GZ()&&!ea&&null==(0,y.qg)(h.Ay.location.search).fullscreen,n=j.UF;return r&&(n=j.m_),i.createElement("div",{className:n},i.createElement(s.N,{href:"/",onClick:e.onClickLogo,"aria-label":(0,A.t)("proto.file_browser")},r&&i.createElement(S.B,{svg:er.A}),!r&&i.createElement(S.B,{svg:Q.A,useOriginalSrcFills_DEPRECATED:!0})))}function el(e){return i.createElement("div",{className:j.uH},i.createElement(es,{onClickLogo:e.onClickLogo}))}function ec(e){let{viewer:r,file:n}=e,o=(0,a.wA)(),[s,l]=(0,Y.nN)(),c=r?.getBaseScreenId(),d=`/file/${n.key}/${encodeURIComponent(n.name)}?node-id=${c}`;return(0,g.kc)().ps_benchmark?s&&l&&(d+=`&prev-plan-id=${s}&prev-plan-type=${l}`):s&&(d+=`&prev-org-id=${s}`),i.createElement("div",{className:j.fh},i.createElement(I.X3,{id:ei,hideDropdown:()=>o(L.oB()),options:[i.createElement(I.c$,{key:"open-in-editor",href:d,onMouseDown:()=>{o((0,B._P)({name:"Prototype Original Source Clicked"}))}},(0,A.tx)("viewer.menu_bar.open_in_editor"))]}))}function ed({setAccessibilityTreeFocus:e,recordingKey:r}){let n=i.useRef(null),[o,s]=i.useState(!1),{width:l}=(0,_.wY)(n)??_.cU,c=i.useCallback(()=>s(!0),[]),u=i.useCallback(()=>s(!1),[]),m=(0,a.wA)(),p=(0,k.e)(),h=e=>{m(C.F.enqueue({type:"accessibility-dom-enabled",role:"status",get message(){return e?(0,A.t)("viewer.options.accessible_dom_enabled"):(0,A.t)("viewer.options.accessible_dom_disabled")}})),m((0,P.X7)({enabled:e,scope:"SESSION"}))},g=b.rf(r,"click",r=>{(0,d.f)(p?d.h.SKIP_TO_CONTENT:d.h.ENABLE_AND_SKIP_TO_CONTENT,{isMouseEvent:r?.screenX!==0&&r?.screenY!==0}),h(!0),e(!0)});return i.createElement("div",{ref:n,className:j.ts,style:o?void 0:{marginLeft:-l}},i.createElement("button",{className:j.O6,onClick:g,onFocus:c,onBlur:u},(0,A.tx)("proto.header.skip_to_content")))}class eu extends b.o6{constructor(){super(...arguments),this.onClick=b.cZ(this,"click",()=>{this.props.onClick()})}render(){return i.createElement("div",{className:this.props.selected?j.WB:j.zQ,"data-onboarding-key":"prototype-comment"},i.createElement(T.PX,{onClick:this.onClick,"data-tooltip-type":V.Ib.TEXT,"data-tooltip":(0,A.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"}),"data-testid":"prototype-header-comments-button",label:(0,A.t)("proto.comment"),"aria-controls":this.props.targetId,svg:i.createElement(S.B,{svg:J.A})}))}}function em(e){let r=b.rf(e.recordingKey,"click",r=>{e.setShowSidebar(!e.isSidebarOpen)});return i.createElement("div",{className:j.e3},i.createElement(T.PX,{"data-tooltip-type":V.Ib.TEXT,"data-tooltip":`${e.isSidebarOpen?(0,A.t)("viewer.flows_sidebar.close_sidebar"):(0,A.t)("viewer.flows_sidebar.open_sidebar")}`,onClick:r,label:(0,A.t)("proto.flows"),"aria-controls":e.sidebarId,svg:i.createElement(S.B,{svg:e.isSidebarOpen?et.A:ee.A})}))}eu.displayName="ToggleCommentsButton";class ep extends i.PureComponent{constructor(){super(...arguments),this.onClick=u.R7.fullscreen?()=>{this.props.dispatch((0,N._M)())}:E.lQ}render(){let e;let r=u.R7.fullscreen;return e=r?this.props.inFullScreenMode?(0,A.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,A.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,A.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),i.createElement("div",{className:this.props.classNameOverride||(u.R7.fullscreen?j.Yd:j.E1)},i.createElement(T.PX,{label:e,disabled:!r,onClick:this.onClick,"data-tooltip-type":V.Ib.TEXT,"data-tooltip":e,svg:i.createElement(S.B,{svg:this.props.inFullScreenMode?X.A:Z.A})}))}}ep.displayName="ToggleFullScreenButton"},716253:(e,r,n)=>{n.d(r,{HS:()=>g,hF:()=>b,l5:()=>m,xY:()=>p});var i=n(188507),a=n(140593),o=n(922827);n(939863),n(392592);var s=n(992271),l=n(356390),c=n(239671),d=n(746806),u=n(223556),m=(e=>(e[e.DEVICE=0]="DEVICE",e[e.WEBSITE=1]="WEBSITE",e[e.SMALL=2]="SMALL",e))(m||{});function p(e){return"fullscreen"===e.selectedView.view&&(e.selectedView.editorType===c.nT.Design||e.selectedView.editorType===c.nT.DevHandoff||e.selectedView.editorType===c.nT.Slides)}let h=16/9,_=(e,r)=>{let n=r.getCurrentPage();if(!n)throw Error("Expected currentPage to exist");let{prototypeDevice:i}=n;return i?i.type===o.XQq.PRESENTATION?{x:e.absoluteBoundingBox.w,y:e.absoluteBoundingBox.h}:i.type===o.XQq.NONE?null:i.rotation===o.xOL.NONE?i.size:{x:i.size.y,y:i.size.x}:null};function g(e,r){let n=_(r,e);return n?{type:0,...n}:r.absoluteBoundingBox.w>=1280?{type:1}:{type:2}}function f(e,r){return(e.getCurrentPage()?.prototypeDevice?.rotation??o.xOL.NONE)===o.xOL.NONE?{x:104,y:20+(r?d.uF:0)}:{x:104,y:104}}let E=(e,{x:r,y:n},i)=>{let a=n/e.y,o=Math.min(a,r/e.x),{x:s,y:l}=f(i);if(o<1){if(o===a){if(Math.max(e.x*o,s)!==s)return{x:e.x*o,y:e.y*o};{let r=s/e.x;return{x:s,y:e.y*r}}}if(Math.max(e.y*o,l)!==l)return{x:e.x*o,y:e.y*o};{let r=l/e.y;return{x:e.x*r,y:l}}}return e},y=(e,{x:r,y:n},i)=>{let{x:a,y:o}=f(i),s=o/e.y,l=Math.max(s,a/e.x);if(l>1){if(l===s){if(Math.min(e.x*l,r)!==r)return{x:e.x*l,y:e.y*l};{let n=r/e.x;return{x:r,y:e.y*n}}}if(Math.min(e.y*l,n)!==n)return{x:e.x*l,y:e.y*l};{let r=n/e.y;return{x:e.x*r,y:n}}}return e};function b(e,r,n,o,c){let m=c.get(o);(0,a.vA)(!!m,"expected node to exist");let p=g(c,m);if(e&&(0,i.bN)(e.breakpoint,p)&&!r)return e;let _=l.Y5.getViewportInfo(),f=_.height-d.uF-32,b=Math.max(.5*_.width,104),v=(0,u.$W)(c),I=!!v&&(0,s.L_)(v);if(!(0===p.type&&n&&I)){let e=E(function(e,r){switch(e.type){case 0:return{x:e.x,y:e.y};case 1:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.w/h};case 2:return{x:r.absoluteBoundingBox.w,y:r.absoluteBoundingBox.h};default:(0,a.xb)(e)}}(p,m),{x:b,y:f},c);return{initialViewerSize:e=y(e,{x:b,y:f},c),breakpoint:p}}let T=c.getCurrentPage()?.prototypeDevice?.rotation;(0,a.B1)(T,"expected device rotation to exist");let{idealDeviceSize:S,framePresetSize:w}=(0,u.is)(v,T),A=E(S,{x:b,y:f},c);return A=y(A,{x:b,y:f},c),{initialViewerSize:(0,u.BX)(A,w,S),breakpoint:p}}},430817:(e,r,n)=>{n.d(r,{y:()=>S});var i=n(411855),a=n(188507),o=n(966712),s=n(522739),l=n(153808),c=n(268537),d=n(163023),u=n(939863),m=n(738269),p=n(109058);let h="internal_debug_tools--button--3-eAq";var _=n(18301),g=n(911339),f=n(289298),E=n(942723),y=n(236446),b=n(501191),v=n(743338),I=n(403921);let T="PROTOTYPE_DEBUG_TOOLS_MENU";function S(e){let r=(0,a.d4)(e=>e.dropdownShown),n=(0,a.wA)(),S=r?.type===T,[,w]=i.useState({}),A=i.useCallback(()=>w({}),[]),{viewer:C}=e,[N,L]=i.useState(!1),[O,R]=i.useState(!1);return(0,o.kc)().internal_prototyping_debug_tool?i.createElement("div",{className:"internal_debug_tools--debugContainer--CtxqL"},i.createElement(s.D8,{className:"internal_debug_tools--dropdownMenu--D-LuC",onClick:function(e){e.stopPropagation(),S?n(m.oB()):n(m.j7({type:T}))}},i.createElement("div",{className:"internal_debug_tools--dropdownMenuButton--5NXqo"},i.createElement("span",null,(0,u.tx)("viewer.debug_tools.debug_tools")),i.createElement("div",{className:"internal_debug_tools--buttonChevron--l5X4a"},i.createElement(d.B,{svg:f.A}))),S&&i.createElement(c.ms,{className:"internal_debug_tools--dropdown--5KC-1"},i.createElement(c.c$,{onClick:()=>{C?.isConnected()?C?.disconnectForTesting():C?.reconnectForTesting(),A()}},C?.isConnected()?(0,u.t)("viewer.debug_tools.disconnect_from_multiplayer"):(0,u.t)("viewer.debug_tools.reconnect_to_multiplayer")),i.createElement(c.c$,{onClick:()=>{(0,p.v)(!1);let e=document.getElementById("viewer_debug_stats");e?e.remove():C?(0,l.FL)(C):console.error("Viewer object doesn't exist")}},(0,u.tx)("viewer.debug_tools.toggle_debug_stats")),i.createElement(c.c$,{onClick:()=>window.testFakeLostContext?.()},(0,u.tx)("viewer.debug_tools.test_fake_web_gl_context_loss")),i.createElement(c.c$,{onClick:()=>window.testRealLostContext?.()},(0,u.tx)("viewer.debug_tools.test_real_web_gl_context_loss")),i.createElement(c.c$,{onClick:()=>{C?.takeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.take_spector_snapshot")),i.createElement(c.c$,{onClick:()=>{C?.clearTileCachesAndTakeSpectorSnapshot()}},(0,u.tx)("viewer.debug_tools.clear_tile_caches_and_take_spector_snapshot")),i.createElement(c.c$,{onClick:()=>{C&&(N?(C.renderLayerByLayerDeactivate(),L(!1),R(!1)):(C.renderLayerByLayerActivate(),L(!0)))}},(0,u.tx)("viewer.debug_tools.render_layer_by_layer")),i.createElement(c.c$,{onClick:()=>{C?.toggleRenderTreePrinting()}},(0,u.tx)("viewer.debug_tools.toggle_render_tree_printing")))),N?i.createElement("div",{className:"internal_debug_tools--layerByLayerRenderingControls--Oj1Jd"},i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerRewind()}},i.createElement(d.B,{svg:v.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerBackward()}},i.createElement(d.B,{svg:_.A})),O?i.createElement("button",{className:h,onClick:()=>{C&&O&&(C.renderLayerByLayerPause(),R(!1))}},i.createElement(d.B,{svg:I.A})):i.createElement("button",{className:h,onClick:()=>{C&&!O&&(C.renderLayerByLayerPlay(),R(!0))}},i.createElement(d.B,{svg:y.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerForward()}},i.createElement(d.B,{svg:E.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerDecreaseSpeed()}},i.createElement(d.B,{svg:g.A})),i.createElement("button",{className:h,onClick:()=>{C?.renderLayerByLayerIncreaseSpeed()}},i.createElement(d.B,{svg:b.A}))):null):null}},526391:(e,r,n)=>{n.d(r,{i:()=>g});var i=n(411855),a=n(57860),o=n(463033),s=n(776250),l=n(737947),c=n(563706),d=n(153808),u=n(163023),m=n(939863),p=n(250118),h=n(42638);function _(){let e=(0,p.b0)();return i.createElement("button",{type:"button",className:"loading_state_overlay--offlineSecondaryAction--tZCt4",onClick:()=>{e?location.reload():l.Ay.reload("The viewer is taking a long time to load.")}},(0,m.tx)("viewer.loading_overlay.reload"))}function g(e){let r=(()=>{let r=e.viewerEl?.getBoundingClientRect();return{top:r?.top||0,left:r?.left||0,width:r?.width||0,height:r?.height||0}})(),[n,l]=i.useState("LOADED"),[g,f]=i.useState(null),[E,y]=i.useState(null),[b,v]=i.useState(null),I=(0,p.b0)(),T=i.useCallback(e=>{"LOADED"!==e&&"SHORT_LOADING"!==e&&s.az.trackDefinedEvent("prototype.viewer_overlay_state",{overlayState:e,isInEmbed:(0,p.dH)(),isMirror:(0,c.Ji)(),isInlinePreview:I,interactionId:g||"",interactionCause:E||"",destinationId:b||""}),l(e)},[I,g,E,b]),S=i.useRef(null);return(i.useEffect(()=>{S.current&&clearTimeout(S.current),"SHORT_LOADING"===n?S.current=setTimeout(()=>{T("LONG_LOADING")},700):"LONG_LOADING"===n&&(S.current=setTimeout(()=>{navigator.onLine?T("LOADING_ERROR"):T("CONNECTION_ERROR")},1e4))},[n,T]),d.O5(e.viewer,"requestedStateChange",e=>{S.current&&clearTimeout(S.current),T("SHORT_LOADING"),e&&(y(e.cause),v(e.destinationId),f(e.interactionId))}),d.O5(e.viewer,"requestedStateChangeInitiated",()=>{S.current&&clearTimeout(S.current),T("LOADED")}),"LOADED"===n||"SHORT_LOADING"===n)?null:i.createElement("div",{className:"loading_state_overlay--overlayContainer--egThs"},r&&i.createElement("div",{className:"loading_state_overlay--contentContainer--20M6N",style:{...r}},"LONG_LOADING"===n?i.createElement(a.k,null):"LOADING_ERROR"===n?i.createElement("div",{className:"loading_state_overlay--longLoadingContainer--FQgxf"},i.createElement(a.k,null),i.createElement("div",{className:"loading_state_overlay--longLoadingHelperText--Vp9LZ text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.this_is_taking_some_time_hang_on_while_this_finishes_loading")),i.createElement(_,null)):"CONNECTION_ERROR"===n?i.createElement("div",{className:"loading_state_overlay--offlineContainer--TMfk0"},i.createElement(u.B,{className:"loading_state_overlay--offlineSvg--GHCgu",svg:h.A}),i.createElement("div",{className:"loading_state_overlay--offlineTextContainer--kn7QV"},i.createElement("div",{className:"loading_state_overlay--offlineTitle--6hlCW text--fontPos14--OL9Hp text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.can_t_connect_to_the_internet")),i.createElement("div",{className:"loading_state_overlay--offlineHelperText--qBa0p text--fontPos12--YsUAh text--_fontBase--QdLsd"},(0,m.tx)("viewer.loading_overlay.check_your_connection_to_continue_with_the_prototype"))),i.createElement("div",{className:"loading_state_overlay--offlineButtonContainer--MyWop"},i.createElement(o.$n,{variant:"primary",onClick:()=>T("LONG_LOADING")},(0,m.tx)("viewer.loading_overlay.try_again")),i.createElement(_,null))):void 0))}},624158:(e,r,n)=>{n.d(r,{ez:()=>B,M:()=>D,jH:()=>P,Dp:()=>U,lF:()=>V});var i=n(411855),a=n(188507),o=n(686754),s=n(773024),l=n(498481),c=n(776250),d=n(794272),u=n(716034),m=n(418956),p=n(659302),h=n(776621),_=n(743282),g=n(153808),f=n(857980),E=n(715981),y=n(939863),b=n(892629),v=n(549067),I=n(456104),T=n(397065),S=n(498606),w=n(340514),A=n(493364),C=n(154254),N=n(422237);let L=(0,N.ex)("preload_success",function(){return i.createElement("div",{className:C.cx.pr8.$},i.createElement("div",{className:C.cx.colorTextTooltip.textBodyMediumStrong.$},(0,y.t)("proto.preload.loaded.tooltip.header")),i.createElement("div",{className:C.cx.colorTextTooltipSecondary.$},(0,y.t)("proto.preload.loaded.tooltip.body")))}),O=(0,N.ex)("preload_error",function({isSlides:e}){return i.createElement("div",{className:C.cx.pr8.$},i.createElement("div",{className:C.cx.colorTextTooltip.textBodyMediumStrong.$},e?(0,y.t)("proto.preload.error.tooltip.header.slides"):(0,y.t)("proto.preload.error.tooltip.header")),i.createElement("div",{className:C.cx.colorTextTooltipSecondary.$},(0,y.t)("proto.preload.error.tooltip.body")))},e=>({isSlides:"true"===e.getAttribute("data-tooltip-slides")}));var R=n(463546);let P=(0,u.eU)(!1),D=(0,u.eU)("none"),k=(0,u.eU)(null),M=Math.floor(10),F=Math.floor(150),x={forwardToDatadog:!0};function U(){let e=(0,a.wA)(),[r,n]=(0,m.fp)(k),o=(0,p.Xr)(P),s=(0,p.Xr)(D),l=i.useCallback((i,a)=>{let l=a??r??null;null!==l&&(clearInterval(l),n(null)),o("error"===i),s(i),e(v.h({key:"offline-prototype",progress:0,total:0}))},[r,e,n,s,o]);return{startDownload:i.useCallback(()=>{s("loading"),o(!0);let r=(0,_.g)();(0,c.sx)("preload_prototype_started",{load_id:r},x);let i=g.hk(),a=i.getPrototypeStateCurrentIndex();i.restartPrototype(),i.navigateToFrameAtIndex(a),i.setLoadFullDocument(!0),i.setPreloaded(!0),i.preloadAllImages();let d=i.preloadAllVideos(),u=i.initialLoadFrames();e(v.h({key:"offline-prototype",progress:1,total:4}));let m=0,p=0,h=0,f=u,E=0,y=!1,b=setInterval(()=>{let a=i.loadFrames(f,E);f=a.nodesToVisit,E=a.numLoaded;let u=f.length+E,{loaded:_,total:g}=i.areAllImagesLoaded(),{loaded:I,total:T}=i.areAllVideosLoaded(d),S=E+_+I,w=u+g+T;if(window.navigator.onLine?(h!==S?m=0:m+=1,p=0):p+=1,h=S,p>=M||m>=F||S>w){(0,c.sx)("preload_prototype_finished",{load_id:r,num_loaded_frames:E,num_loaded_videos:I,num_loaded_images:_,num_total_frames:u,num_total_videos:T,num_total_images:g},x),l("error",b);return}if(e(v.h({key:"offline-prototype",progress:Math.max(Math.floor(S/w*4),1),total:4})),u===E&&0===f.length&&!y){y=!0,i.preloadAllImages(),d=[...d,...i.preloadAllVideos()];return}u===E&&0===f.length&&_===g&&I===T&&((0,c.sx)("preload_prototype_finished",{load_id:r,num_loaded_frames:E,num_loaded_videos:I,num_loaded_images:_,num_total_frames:u,num_total_videos:T,num_total_images:g},x),clearInterval(b),n(null),s("loaded"),o(!0))},300);n(b)},[e,l,n,s,o]),cancelDownload:l}}function B({isSlides:e=!1}){let[r,n]=(0,m.fp)(P),a=(0,m.md)(D),{isShowing:c,show:u,complete:p}=(0,I.e)({overlay:R.tyv,priority:T.N.SECONDARY_MODAL}),h=i.useCallback(()=>{n(!1),p()},[p,n]);i.useEffect(()=>{r?u():p()},[r,u,p]);let{progress:_}=(0,d.R)(e=>({progress:e.progress})),g=i.createElement(f.k,{className:"offline_prototype--progressIcon--Ye9zS",fraction:(0,b.OT)(_["offline-prototype"]),pathFill:"#FFFFFF"}),v=e?{errorTooltipHeader:(0,y.t)("proto.preload.error.tooltip.header.slides"),loadingTooltipHeader:(0,y.t)("proto.preload.loading.tooltip.header.slides")}:{errorTooltipHeader:(0,y.t)("proto.preload.error.tooltip.header"),loadingTooltipHeader:(0,y.t)("proto.preload.loading.tooltip.header")},C=function(e){let r=(0,m.md)(D),{errorTooltipHeader:n,loadingTooltipHeader:i}=e;return"error"===r?n:"loading"===r?i:(0,y.t)("proto.preload.loaded.tooltip.header")}(v),N=function(){let e=(0,m.md)(D);return"error"===e?(0,y.t)("proto.preload.error.tooltip.body"):"loading"===e?(0,y.t)("proto.preload.loading.tooltip.body"):(0,y.t)("proto.preload.loaded.tooltip.body")}();return i.createElement("div",null,i.createElement("div",{"data-onboarding-key":"preload-prototype-state-icon"},"loading"===a&&i.createElement(E.L,{isUI3:e,svgNode:g,useSvgNode:!0,"data-tooltip-submenu-open":r,"data-tooltip-type":S.Ib.TEXT,"data-tooltip":v.loadingTooltipHeader}),"loaded"===a&&i.createElement(E.L,{isUI3:e,svgNode:i.createElement(s.B,null),useSvgNode:!0,"data-tooltip-type":S.Ib.SPECIAL,"data-tooltip":r?void 0:L}),"error"===a&&i.createElement(E.L,{isUI3:e,svgNode:i.createElement(l.r,null),useSvgNode:!0,"data-tooltip-type":S.Ib.SPECIAL,"data-tooltip-slides":e,"data-tooltip":O})),i.createElement(w.rq,{"data-fpl-version":"ui3",isShowing:c,trackingContextName:"preload-prototype-state-icon",targetKey:"preload-prototype-state-icon",onTargetLost:h,onClose:h,isTooltip:!0,shouldCenterArrow:A.EL.BEST_EFFORT,title:i.createElement("span",null,C),description:i.createElement("span",null,N,"loaded"===a&&i.createElement(i.Fragment,null," ",i.createElement(o._,{className:"offline_prototype--learnMoreLink--SXs6g",href:e?"https://help.figma.com/hc/en-us/articles/24338209202327-Present-a-slide-deck#h_01J0XNV75FB33SMFRG32EMVQJ9":"https://help.figma.com/hc/en-us/articles/26463081577367-Present-prototypes-offline",newTab:!0,trusted:!0},(0,y.t)("proto.state_management.info_tooltip_learn_more")))),disableHighlight:!0}))}function V(){let e=(0,m.md)(D);i.useEffect(()=>{(0,h.kF)("viewer_preloaded_state",e)},[e])}},405328:(e,r,n)=>{n.d(r,{A9:()=>Y,Ag:()=>z,s7:()=>j});var i=n(411855),a=n(188507),o=n(140593),s=n(75395),l=n(228739),c=n(621945),d=n(538082),u=n(785933),m=n(302717),p=n(473107),h=n(629019),_=n.n(h),g=n(511617),f=n(737947),E=n(966712),y=n(418956),b=n(563706),v=n(179940),I=n(153234),T=n(30637),S=n(163023),w=n(46481),A=n(939863),C=n(738269),N=n(662275),L=n(992271),O=n(611978),R=n(94500),P=n(112976),D=n(423163),k=n(728587),M=n(250118),F=n(624158),x=n(957369),U=n(759457),B=n(743586),V=n(289298),G=n(479991),H=n(978019),K=n(534160),W=n(503618),$=n(844076);let Y="PROTOTYPE_OPTIONS_MENU";function z({device:e,showHotspots:r,showPrototypeOptions:n,showDeviceFrame:h,setHideUI:F,recordingKey:z,dropdownShown:q,isFooter:Z}){let X=g.GZ()&&!(0,T.nl)()&&null==(0,v.qg)(f.Ay.location.search).fullscreen,J=(0,a.d4)(e=>e.selectedView),Q=(0,a.wA)(),ee=i.useRef(null),et=(0,y.md)(M.Bf),er=j(),en=(0,b.o4)(),ei=null!=e&&"PRESET"===e.type;(0,o.vA)(!Z||ei);let ea=!Z&&ei,eo=Z&&ei,es=n&&!ea,el=ei&&!eo,ec=!eo,ed=!eo&&!en,eu=eo?"PROTOTYPE_OPTIONS_MENU_FOOTER":Y,em=q&&q.type===eu;function ep(e){e.stopPropagation(),em?Q(C.oB()):Q(C.j7({type:eu,data:{position:ee.current?.getBoundingClientRect()}}))}let eh=(0,R.M9)(J),e_=es?(function(e,r,n,a,o,s,d){let h=(0,M.Pz)(o,n),_=(0,M.Ac)(r,h),g=(h.findIndex(e=>e.scalingOptionId===_)+1)%h.length,f=h[g],E=n=>(function({option:e,currentScalingInfo:r,scalingHandlerOverride:n,recordingKey:a,showShortcut:o,dispatch:s,isFooter:d}){let h=(0,M.Ac)(r,[e]);return{displayText:(0,M.GP)(e.scalingOptionId,d),isChecked:h===e.scalingOptionId,callback:()=>n?n(e):void s((0,R.Jr)({...e.scalingInfo,userInitiated:!0,source:"presentation"})),recordingKey:a,shortcut:o?"Z":void 0,icon:d?void 0:function(e){switch(e){case M.IK.FIT_TO_SCREEN:return i.createElement(w.U,{svg:K.A,className:B.Fp},i.createElement(u.H,null));case M.IK.FIT_WIDTH:return i.createElement(w.U,{svg:W.A,className:B.Fp},i.createElement(m.v,null));case M.IK.FILL_SCREEN:return i.createElement(w.U,{svg:H.A,className:B.Fp},i.createElement(p.m,null));case M.IK.ACTUAL_SIZE:return i.createElement(w.U,{svg:G.A,className:B.Fp},i.createElement(l.O,null));case M.IK.RESPONSIVE:return i.createElement(w.U,{svg:$.A,className:B.Fp},i.createElement(c.V,null));default:return}}(e.scalingOptionId),unsetStrokeOnActiveOption:!0,name:e.scalingOptionId}})({dispatch:e,option:n,showShortcut:n.scalingOptionId===f.scalingOptionId,currentScalingInfo:r,scalingHandlerOverride:s,recordingKey:I.Pt({recordingKey:a},`option-${(0,M.Ti)(n.scalingOptionId)}`),isFooter:d});if(!(n!==M.Yu.DEFAULT&&!d&&h.length>=4))return h.map(e=>E(e));{let e=h.slice(0,2).map(e=>E(e)),r=h.slice(2).map(e=>E(e));return[{disabled:!0,displayText:(0,A.t)("viewer.options_menu.recommended_scaling_options")},...e,{disabled:!0,displayText:(0,A.t)("viewer.options_menu.other_scaling_options")},...r]}})(Q,eh,et,z,e?.type,void 0,Z).concat(P.w):[],eg=function(){let e=!!(0,O._6)().disableDefaultKeyboardNav,r=M.pw();return{displayText:(0,A.t)("viewer.options_menu.disable_default_keyboard_navigation_v1"),isChecked:!e,callback:function(){r(!e)}}}(),ef=e=>{e!==eh.contentScalingMode&&Q((0,R.Jr)({contentScalingMode:e,userInitiated:!0,source:"presentation"}))},eE=[{displayText:(0,A.t)("viewer.options_menu.fixed_size"),icon:i.createElement(w.U,{svg:G.A,className:B.Fp},i.createElement(l.O,null)),isChecked:"responsive"!==eh.contentScalingMode,callback:()=>ef("fixed"),recordingKey:"fixed",unsetStrokeOnActiveOption:!0},{displayText:(0,A.t)("viewer.options_menu.responsive"),icon:i.createElement(w.U,{svg:$.A,className:B.Fp},i.createElement(c.V,null)),isChecked:"responsive"===eh.contentScalingMode,callback:()=>ef("responsive"),recordingKey:"responsive",unsetStrokeOnActiveOption:!0},P.w],ey=function(e,r,n,i,a,{hideHotspots:o,hideDeviceFrame:s}={}){let l=[];return o||l.push({displayText:(0,A.t)("viewer.options_menu.show_hints_on_click"),isChecked:e,callback:function(){a((0,R.KJ)({showHotspots:!e}))},"data-onboarding-key":"toggleHotspots"}),s||l.push({displayText:(0,A.t)("viewer.options_menu.show_device_frame"),isChecked:n,callback:function(){a((0,R.t0)({showDeviceFrame:!n}))},recordingKey:"option-toggle-device-frame",hidden:!i,"data-onboarding-key":"toggleDeviceFrame"}),r?l:[]}(r,n,h,ei,Q,{hideHotspots:eo,hideDeviceFrame:ea}),eb=function(){let e=(0,O._6)(),r=(0,a.wA)(),n=(0,x.gV)(e),o=i.useCallback(e=>({recordingKey:I.Pt("device-option",e.presetIdentifier),isChecked:n?.presetIdentifier===e.presetIdentifier,callback:()=>{r((0,R.Zh)({name:"prototype.viewer_device_picker_changed",params:{presetIdentifier:e.presetIdentifier,framePresetWidth:e.framePresetSize.x,framePresetHeight:e.framePresetSize.y}})),r((0,R.mf)({newDevice:{type:"PRESET",presetIdentifier:e.presetIdentifier,size:e.framePresetSize,rotation:n?.rotation||"NONE"}}))},displayText:e.getI18nDeviceName(),sideText:`${e.framePresetSize.x}\u200A\xd7\u200A${e.framePresetSize.y}`,rightJustifySideText:!0}),[r,n]),s=e.initialDevice;return i.useMemo(()=>{let e=s?.presetIdentifier?(0,L.Fh)(L.hY[s.presetIdentifier].deviceName,s):null;if(!s||!e)return[];let r=[];r.push({disabled:!0,displayText:(0,A.t)("viewer.options_menu.device_dropdown.default")}),r.push(o(e)),r.push(P.w);let n=(0,L.qt)(s.presetIdentifier),i=(0,L.WT)(L.LM[n],s);r.push(...i.map(o));let a=(0,L.WT)(L.UV[n],s).filter(e=>!i.find(r=>r.presetIdentifier===e.presetIdentifier));return a.length>0&&r.push({displayText:(0,A.t)("viewer.options_menu.device_dropdown.other"),recordingKey:I.Pt({recordingKey:"device-option"},"other-options"),children:a.map(o)}),r.push(P.w),r},[s,o])}(),ev=function(e,r,{hideUIToggle:n}={}){return n?[]:[{displayText:(0,A.t)("viewer.options_menu.hide_ui"),isChecked:!1,callback:function(){e(!0),r((0,R._P)({name:"Prototype Hide UI",params:{hide:!0}}))},recordingKey:"hide-ui",shortcut:(0,M.Fg)()}]}(F,Q,{hideUIToggle:eo}),eI=function(e,r=!1){return r?[]:[{displayText:"Accessibility settings...",callback:()=>{e((0,N.to)({type:D.L}))},isChecked:!1}]}(Q,eo),eT=(0,E.kc)().prototype_preload_offline?[{children:[...ec?[eg]:[],...ey,...ed?[er]:[],...eI],displayText:(0,A.t)("proto.option_menu.advanced_settings"),recordingKey:"advanced-settings"}]:[...ec?[eg]:[],...ey,...eI],eS=X?e_:[...eo?eb:[],...e_,...el?eE:[],...eT,...ev],ew=i.createElement(s.E,{onClick:ep,recordingKey:I.Pt({recordingKey:z},"toggle"),"aria-label":(0,A.t)("viewer.options_menu.options"),className:U.My},i.createElement(d.P,{style:{margin:"0 8px"}})),eA=Z?e?.presetIdentifier&&L.hY[e?.presetIdentifier].getI18nDeviceName()||"UNKNOWN DEVICE":void 0,eC=i.createElement(s.E,{onClick:ep,recordingKey:I.Pt({recordingKey:z},"toggle"),htmlAttributes:{"data-fullscreen-intercept":!0,tabIndex:0},className:_()([B.kv,B.zG])},i.createElement("div",{className:B.g7},eA),i.createElement("div",{className:B.UT},i.createElement(S.B,{svg:V.A}))),eN=q?.data?.position??void 0,eL=_()({[B.HF]:Z,[B.v6]:!Z});return i.createElement("div",{className:eL,ref:ee},!Z&&ew,Z&&eC,em&&!!eN&&i.createElement(k.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:eN,dispatch:Q,items:eS,recordingKey:"options-menu-dropdown",displayAboveTarget:Z,alwaysShowCheckMarkOffset:!0}))}function j(e){let r=(0,y.md)(F.M),n="loaded"===r,{startDownload:a}=(0,F.Dp)();return i.useEffect(()=>{if(!n)return;let e=e=>{e.preventDefault();let r="Closing this tab will lose your unsaved local changes";return e.returnValue=r,r};return window.addEventListener("beforeunload",e),()=>window.removeEventListener("beforeunload",e)},[n]),{isChecked:n,displayText:(0,A.t)("viewer.options_menu.make_available_offline"),callback:()=>{n||"loading"===r||(e?.(),a())},hidden:!(0,E.kc)().prototype_preload_offline}}},624187:(e,r,n)=>{n.d(r,{AH:()=>u,Md:()=>c,pb:()=>l,z2:()=>s,zM:()=>d});var i=n(627472),a=n(418956),o=n(56029),s=(e=>(e[e.NOT_LOADED=0]="NOT_LOADED",e[e.LOADED=1]="LOADED",e))(s||{}),l=(e=>(e[e.LOAD_LIVEGRAPH=0]="LOAD_LIVEGRAPH",e[e.LOAD_VIEWER_INSTANCE=1]="LOAD_VIEWER_INSTANCE",e))(l||{});let c=(0,i.um)({status:0,livegraphLoaded:!1,viewerInstanceLoaded:!1},(e,r)=>{if(1===e.status)return e;switch(r.type){case 0:if(e.viewerInstanceLoaded)return o.Su.handleViewerLoaded("livegraph"),{status:1,lastLoaded:"livegraph"};if(e.livegraphLoaded)return e;return{...e,livegraphLoaded:!0};case 1:if(e.livegraphLoaded)return o.Su.handleViewerLoaded("multiplayer"),{status:1,lastLoaded:"multiplayer"};if(e.viewerInstanceLoaded)return e;return{...e,viewerInstanceLoaded:!0}}});function d(e){return a.zl.sub(c,()=>{u()&&e()})}function u(){return 1===a.zl.get(c).status}},957369:(e,r,n)=>{n.d(r,{gV:()=>d,nN:()=>c,tK:()=>u});var i=n(411855),a=n(188507),o=n(966712),s=n(553716),l=n(611978);function c(){let e=(0,a.d4)(e=>e.lastVisitedPlan),r=(0,a.d4)(e=>e.lastVisitedPlanId),n=null;return(0,o.kc)().ps_benchmark&&e&&(r=e.planId,n=e.planType),[r,n]}function d(e){return e.initialDevice?.presetIdentifier===e.overrideDevice?.presetIdentifier?e.initialDevice||null:e.overrideDevice||e.initialDevice||null}function u(){let e=(0,l._6)();return(0,i.useMemo)(()=>"prototype"!==e.view?((0,s.xi)("prototype-header","useCurrentlySelectedDevice called with non-prototype view"),null):d(e),[e])}},284995:(e,r,n)=>{n.d(r,{z:()=>T});var i=n(411855),a=n(188507),o=n(776250),s=n(737947),l=n(966712),c=n(179940),d=n(881388),u=n(56029),m=n(379202),p=n(745540),h=n(611978),_=n(710654),g=n(239671),f=n(547807);let E=new class{constructor(){this.CanvasSchemaValidator=(0,f.vh)()}getCanvas(e){return this.CanvasSchemaValidator.validate(async({xr:r})=>await r.get(`/file/${e.fileKey}/canvas`,null,{responseType:"arraybuffer"}))}},y=new class{constructor(){this.CanvasFkSchemaValidator=(0,f.vh)()}getCanvasFk(e){return this.CanvasFkSchemaValidator.validate(async({xr:r})=>await r.get(`/version/${e.versionId}/canvas?fk=${e.fileKey}`,null,{responseType:"arraybuffer"}))}};var b=n(250118);async function v(e,r){try{return await y.getCanvasFk({versionId:e,fileKey:r})}catch{return(0,o.sx)("Prototype Version Load Failed",{file_key:r,version_id:e}),null}}async function I(e){try{return await E.getCanvas({fileKey:e})}catch{return null}}function T(e){let{viewer:r,entry:n}=e,o=(0,a.wA)(),{file:f,versionId:E,nodeId:y,startingPointNodeId:T}=(0,h._6)(),S=i.useRef(!1);return i.useEffect(()=>{(async()=>{if(!f.key||S.current)return;let e=(0,c.qg)(s.Ay.location.search),i="1"===e["disable-mp"]&&(0,l.kc)().internal_only_debug_tools;_.T(),m.Q.setLoadTimeTracker(u.Su);let a=(b.dH()||"feed"===e["redirect-src"])&&E,h=a||i;if(h){let e=null;(e=a?await v(E,f.key):await I(f.key))?(r.loadFile({bytes:e.data,nodeId:y||"",startingPointNodeId:T||"",imagePrefixURL:`/file/${f.key}/image`,videoPrefixURL:`/api/files/${f.key}/videos`,editorType:(0,g.y9)(f.editor_type)},p.M),S.current=!0):o(d.s.flash("This prototype isn't available."))}else r.connectTo({fileKey:f.key,nodeId:y||"",startingPointNodeId:T||"",editorType:(0,g.y9)(f.editor_type)},p.M),S.current=!0;u.Su.handleAfterConnectTo({entry:n,connectionType:h?"file":"multiplayer",fullscreen:"Fullview-IC",logViewerWaiting:!1})})()},[o,f,E,y,T,r,n]),null}},349754:(e,r,n)=>{n.d(r,{L:()=>u});var i=n(411855),a=n(629019),o=n.n(a),s=n(448169),l=n(355819),c=n(154254),d=n(138504);function u(e){let r=e.showSidebar;return i.createElement("div",{className:o()({[d.so]:r,[d.c6]:!r,[d.UL]:e.withoutHeaderMargin})},i.createElement(s.V,{className:c.cx.flex.flex1.flexColumn.$},!1===e.scrollable?e.children:i.createElement(l.P,{className:d.jG,hideScrollbar:!0},e.children)))}},560002:(e,r,n)=>{n.d(r,{wh:()=>K,Ay:()=>H});var i=n(411855),a=n(188507),o=n(463033),s=n(511617),l=n(697170),c=n(737947),d=n(563706),u=n(761870),m=n(21452),p=n(154254),h=n(939863),_=n(662275),g=n(349410),f=n(67085),E=n(297174),y=n(498606),b=n(880671),v=n(320063),I=n(418956),T=n(659302),S=n(672517),w=n(456104),A=n(543312),C=n(582947),N=n(212957),L=n(397065),O=n(147829),R=n(66154),P=n(463546),D=n(421407);let k="seen_pro_onboarding_prototype_only_links_overlay",M=(0,C.r1)(k);function F({teamId:e}){let r=(0,I.md)(M),n=(0,I.md)(A.e),a=(0,T.Xr)(D.n),o=(0,g.kO)(),{show:s,isShowing:l,complete:c}=(0,w.e)({overlay:P.MxF,priority:L.N.DEFAULT_MODAL,experiment:{check:o,predicate:e=>e,postCheck:e=>!e}},[r,n]);return((0,v.h)(()=>{s({canShow:(r,n)=>n.some(r=>r.id===e),onShow:()=>a(!0)})}),l)?i.createElement(O.M,{isShowing:l,userFlagOnShow:k},i.createElement(S.fu,{name:N.S.getTooltipTrackingContext("Prototype Only Links"),properties:N.S.getTrackingProperties()},i.createElement(R.$v,{dismissModal:()=>{a(!1),c()}}))):null}var x=n(222129),U=n(759457);let B="node-id",V="prototype_header_nav_google_sso",G="slides_presentation_header_nav_google_sso";function H(e){let{user:r,file:n,shareText:p,loginText:g}=e,y=(0,a.wA)(),v=!(0,d.C8)();return r?i.createElement(i.Fragment,null,i.createElement("div",{className:U.TC},i.createElement(o.$n,{onClick:()=>{y(_.to({type:x.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},htmlAttributes:{"data-onboarding-key":"share-prototype"}},p)),n.teamId&&i.createElement(F,{teamId:n.teamId})):i.createElement("div",{className:U.TC},i.createElement(o.$n,{variant:v?"secondary":"primary",onClick:()=>{let e=c.Ay.location.pathname,r=new URLSearchParams(c.Ay.location.search).get(B);r&&(e=s.dR(e,{[B]:r})),y(u.Ts({origin:"prototype_header_nav",redirectUrl:e})),y(_.to({type:b.x,data:{}}))}},g),v&&i.createElement(E.H,{onClick:()=>{l.Rm({dispatch:y,origin:V,redirectUrl:c.Ay.location.pathname}).then(e=>"login"===e.type&&y(u.My({userId:e.user.id})),e=>{(0,m.g)("google_signup_error",V,{error:e.message})})}},(0,h.tx)("footer_banner.continue_with_google")))}function K(e){let{user:r,file:n,shareText:s,loginText:d,sharingDisabled:b,showDefaultAuthModal:v}=e,I=(0,a.wA)(),T=(0,g.Ns)(r);if(r)return i.createElement(i.Fragment,null,i.createElement(o.WW,{onClick:()=>{I(_.to({type:x.g_,data:{fileKey:n.key,source:f.nk.prototypeHeader}}))},disabled:b,htmlAttributes:{"data-tooltip":b?(0,h.t)("fullscreen.toolbar.multiplayer.sharing_slides_files_disabled_by_your_organization"):void 0,"data-tooltip-type":y.Ib.TEXT,"data-onboarding-key":"share-prototype"}},s),n.teamId&&i.createElement(F,{teamId:n.teamId}));let S=T();return i.createElement("div",{className:p.cx.flex.gap8.$},i.createElement(o.WW,{variant:S?"secondary":"primary",onClick:v},d),S&&i.createElement(E.H,{onClick:()=>{l.Rm({dispatch:I,origin:G,redirectUrl:c.Ay.location.pathname}).then(e=>"login"===e.type&&I(u.My({userId:e.user.id}))).catch(e=>{(0,m.g)("google_signup_error",G,{error:e.message})})},large:!0},(0,h.tx)("footer_banner.continue_with_google")))}},280690:(e,r,n)=>{n.d(r,{iO:()=>v,xt:()=>b,rI:()=>C});var i=n(411855),a=n(188507),o=n(838516),s=n(812115),l=n(153234),c=n(286640),d=n(799569),u=n(448169),m=n(355819),p=n(163023),h=n(939863),_=n(738269),g=n(7959);let f="sidebar_panel--scrollContainer--Gng-6 legacy_pages_panel--scrollContainer--YR8Lw";var E=n(450147),y=n(304516);let b=240,v="PROTOTYPE_FLOW_CONTEXT_MENU_DROPDOWN";function I(e){return Math.max(b,Math.min(500,e||0))}var T=(e=>(e[e.HEIGHT=0]="HEIGHT",e[e.WIDTH=1]="WIDTH",e))(T||{});let S=(e,r,n)=>{if(c.x4){let i=JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}");i[e]={...i[e],...0===r&&{height:n},...1===r&&{width:n}},c.x4.setItem("viewer-sidebar-panel",JSON.stringify(i))}},w=(e,r)=>{if(c.x4){let n=JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}");0===r?delete n[e].height:1===r&&delete n[e].width,c.x4.setItem("viewer-sidebar-panel",JSON.stringify(n))}},A=e=>{if(c.x4)return JSON.parse(c.x4.getItem("viewer-sidebar-panel")||"{}")[e]};function C(e){let[r,n]=(0,i.useState)(!1),[a,o]=(0,i.useState)(null),s="SidebarPanel",c=(0,i.useRef)(!1),d=i.useMemo(()=>a?I(a):b,[a]),u=l.rf(s,"mousedown",()=>{n(!0)}),m=l.rf(s,"mousemove",e=>{if(!r)return l.aH;{let r=I(e.clientX);r!==d&&o(r)}}),p=l.rf(s,"mouseup",i=>{if(!r)return l.aH;i.stopPropagation(),e.setSidebarWidthInParent(d),n(!1)});(0,i.useEffect)(()=>(document.addEventListener("mousemove",m),document.addEventListener("mouseup",p,!0),()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",p,!0)}),[m,p]);let{openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E,showSidebar:y,setSidebarWidthInParent:v}=e;(0,i.useEffect)(()=>{h&&a&&S(h,1,a)},[a,h]),(0,i.useEffect)(()=>{h&&(e=>{let r=A(e);r&&r.width&&(o(r.width),v(r.width))})(h)},[h,v]),(0,i.useEffect)(()=>{!c.current&&_.length>0?c.current=!0:c.current&&0===_.length&&y&&E(!1)},[_,y,E]);let T=i.createElement(i.Fragment,null,i.createElement("nav",{className:"sidebar_panel--content--Ebl5L","aria-labelledby":L,"aria-hidden":!e.showSidebar},i.createElement(R,{recordingKey:"sidebarViewerPanel",width:d,openFileKey:h,startingPointsData:_,activePrototypeStartingPointNodeId:g,onSelectFlow:f,setShowSidebar:E})),i.createElement("div",{className:"sidebar_panel--edge--Rc8Ap",style:{left:d},onMouseDown:u,onDoubleClick:()=>{o(null),e.setSidebarWidthInParent(null),e.openFileKey&&w(e.openFileKey,1)}}));return i.createElement(N,{id:e.id,showSidebar:e.showSidebar,width:d},T)}function N({id:e,children:r,showSidebar:n,width:a}){let o=n?"shown":"hidden",[s,l]=i.useState(o),c=s!==o?"transition":s,d=(0,i.useCallback)(()=>{l(o)},[o]);return(0,i.useEffect)(()=>{if("hidden"===s&&"shown"===o){let e=requestAnimationFrame(()=>void l(o));return()=>void cancelAnimationFrame(e)}},[s,o]),i.createElement("div",{id:e,className:"hidden"===c?"sidebar_panel--panelContainerDisplayNone--e6-Gw sidebar_panel--container--nl8-a":"sidebar_panel--panelContainer--0R0Wb sidebar_panel--container--nl8-a",style:{width:a,marginLeft:"shown"===c?0:-a},onTransitionEnd:d},r)}let L="sidebar-panel-heading-title";function O(){return i.createElement("div",{id:L,className:"sidebar_panel--flowsHeaderText--vATd7 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L legacy_pages_panel--pagesHeaderText--vgHeJ",onContextMenu:e=>{e.preventDefault(),e.stopPropagation()}},(0,h.tx)("viewer.flows_sidebar.flows"))}function R(e){let r=(0,i.useMemo)(()=>{let r={};for(let n=0;n<e.startingPointsData.length;n++)r[e.startingPointsData[n].id]=e.startingPointsData[n].description;return r},[e.startingPointsData]),[n,c]=(0,i.useState)(e.activePrototypeStartingPointNodeId),[b,I]=(0,i.useState)(r[e.activePrototypeStartingPointNodeId]),[T,C]=(0,i.useState)(!1),[N,L]=(0,i.useState)(null),[R,P]=(0,i.useState)(window.innerHeight),D=(0,i.useRef)(0),k=(0,i.useRef)(0),M=(0,i.useRef)(0),{openFileKey:F,activePrototypeStartingPointNodeId:x}=e,U=(0,a.wA)();(0,i.useEffect)(()=>{F&&N&&S(F,0,N)},[N,F]),(0,i.useEffect)(()=>{F&&(e=>{let r=A(e);r&&r.height&&L(V(r.height))})(F)},[F]);let B=e=>{k.current=D.current=e.clientY,M.current=e.clientY-86,L(M.current)},V=e=>{let r=16-(e-7)%32;return r<0&&(r+=32),e+r},G=(0,i.useCallback)(e=>Math.max(55,Math.min(e,Math.round(R-64-96))),[R]),H=(0,i.useMemo)(()=>(0,o.s)(()=>{P(window.innerHeight)},45),[]);function K(r){e.onSelectFlow(r)}(0,i.useEffect)(()=>{let e=()=>{H()};return window.addEventListener("resize",e),()=>{H.cancel(),window.removeEventListener("resize",e)}},[H]),(0,i.useEffect)(()=>{let e=e=>{e.clientY!==D.current&&(L(G(M.current+e.clientY-k.current)),D.current=e.clientY)},r=r=>{T&&(r.preventDefault(),r.stopPropagation(),e(r))},n=e=>{e.stopPropagation(),e.preventDefault(),C(!1)},i=r=>{T&&(r.preventDefault(),r.stopPropagation(),e(r.touches[0]))},a=e=>{C(!1)};return document.addEventListener("mousemove",r),document.addEventListener("mouseup",n),document.addEventListener("touchend",a),document.addEventListener("touchmove",i),()=>{document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",n),document.removeEventListener("touchend",a),document.removeEventListener("touchmove",i)}},[G,T]),(0,i.useEffect)(()=>{c(x),I(r[x])},[x,r]);let W=b&&"<p><br></p>"!==b;return i.createElement("div",{className:"sidebar_panel--verticalFlexContainer--HTP2n",style:{width:e.width}},i.createElement("div",{className:"sidebar_panel--flowsListPanelContent--vU15E"},i.createElement("div",{className:"sidebar_panel--flowsHeaderContainerWithShadow--ku5dU legacy_pages_panel--pagesHeaderContainerWithShadow--eCg-j legacy_pages_panel--pagesHeaderContainer--LWPh-"},i.createElement(O,null),i.createElement(d.Jn,{useOriginalSrcFills_DEPRECATED:!0,recordingKey:l.Pt(e,"closeSidebar"),className:"sidebar_panel--closeButton--XWnCD",onClick:()=>e.setShowSidebar(!1),innerText:"close",svg:y.A})),e.startingPointsData?i.createElement(u.V,null,i.createElement("div",{style:{height:N?G(N):(()=>{let r=32*e.startingPointsData.length,n=Math.round(.25*(R-64));return V(Math.min(r=32*Math.ceil(r/32)+16,n))})()},className:"sidebar_panel--flowsList--lbQgB legacy_pages_panel--pagesList--20gAo"},i.createElement(m.P,{className:f,width:e.width,hideScrollbar:!0},e.startingPointsData.map((e,r)=>{let a="sidebar_panel--flowsRowSpacer--fu7iG";return 0===r&&(a="sidebar_panel--flowsRowSpacerInsertBeforeTop--j7UnJ sidebar_panel--flowsRowSpacer--fu7iG"),i.createElement("div",{className:a,key:e.id},i.createElement("button",{role:"link",className:"sidebar_panel--flowRow--1yyNX legacy_pages_panel--pageRow--RXLs9 legacy_pages_panel--pageRowBase--2BLqh","aria-current":n===e.id,key:e.id,onClick:()=>K(e.id),onTouchStart:()=>K(e.id),onContextMenu:r=>(function(e,r){e.preventDefault();let{clientX:n,clientY:i}=e;U(_.j7({type:v,data:{clientX:n,clientY:i,nodeId:r}}))})(r,e.id)},i.createElement(p.B,{svg:E.A,className:`sidebar_panel--flowRowSvg--GhKTM
                        ${n===e.id?"sidebar_panel--visibleCheckmark--0Ts8X":"sidebar_panel--hiddenCheckmark--O-kpW"}`}),i.createElement(g.JU,{className:n===e.id?"sidebar_panel--flowNameSelected--T5iAg text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L":"sidebar_panel--flowNameUnselected--DUjvf text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L"},e.name)))})))):null),i.createElement("div",{className:"sidebar_panel--resizeLineContainer--tIXt8"},i.createElement("div",{className:"sidebar_panel--resizeLine--u3PU-",onMouseDown:e=>{e.preventDefault(),e.stopPropagation(),B(e),C(!0)},onTouchStart:e=>{e.preventDefault(),e.stopPropagation(),B(e.touches[0]),C(!0)},onDoubleClick:()=>{L(null),e.openFileKey&&w(e.openFileKey,0)}})),i.createElement("section",{"aria-label":(0,h.t)("proto.flow_description"),className:`sidebar_panel--flowDescriptionPanelContent--ogSmt ${W?"sidebar_panel--flowDescriptionText--pCFYA":""}`},i.createElement(m.P,{className:f,hideScrollbar:!0},i.createElement("div",{className:"sidebar_panel--flowDescriptionInnerPanelContent--H7-qc text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",dir:"auto"},i.createElement(s.R,{fallback:null,errorFallback:null,value:W?b:(0,h.t)("viewer.flows_sidebar.no_description")})))))}},507708:(e,r,n)=>{n.d(r,{V:()=>X});var i=n(411855),a=n(188507),o=n(922827),s=n(511617),l=n(835650),c=n(966712),d=n(418956),u=n(563706),m=n(553716),p=n(15220),h=n(27087),_=n(250881),g=n(760224),f=n(432155),E=n(662275),y=n(672517),b=n(693707),v=n(988022),I=n(67085),T=n(596),S=n(737499),w=n(99506),A=n(94500),C=n(776615),N=n(447532),L=n(143678),O=n(402766),R=n(180252),P=n(909604),D=n(894728),k=n(255416),M=n(984375),F=n(489921),x=n(222129),U=n(624158),B=n(624187),V=n(250118),G=n(284995),H=n(629019),K=n.n(H),W=n(91408),$=n(837746),Y=n(663237),z=n(317258);function j(e){let r;let n=(0,a.d4)(e=>!!e.modalShown),o=(0,W.jz)($.P4e);return r=e.offscreen?"translateY(100vh)":`translateY(-${o}px)`,i.createElement("div",{"aria-hidden":n,className:K()({[z.E3]:!0,[z.Oy]:!0,[Y.Q]:e.srOnly}),style:{transform:r}},e.children)}var q=n(260522);function Z(e){let{livegraphData:r}=e,n=(0,a.d4)(e=>e.selectedView),o=(0,a.d4)(e=>e.prototype),s=(0,a.d4)(e=>e.multiplayer),_=(0,a.d4)(e=>e.user),g=(0,a.wA)();if("prototype"!==n.view)throw Error(`Unexpected non-prototype view: ${n.view}`);i.useEffect(()=>(document.body.classList.add(q.$7),()=>{document.body.classList.remove(q.$7)}),[]);let f=(0,S.Yi)(n),b=(0,l.l7)()&&!(0,l.br)(),T=o.showComments&&!f&&!b,[w,A]=i.useState(null);(0,V.kZ)();let C=(0,V.l1)(w,n,e.scalingInfo,s,e.showHotspots,e.showDeviceFrame,T,o,_,"design"),[N,O]=i.useState(!1);i.useEffect(()=>{"prototype"===n.view&&C&&O(!0)},[C,n.view]);let R=i.useRef(!1);i.useEffect(()=>{(async()=>{if(n.file.key&&!R.current&&(0,c.kc)().viewer_use_compressed_textures&&(0,c.kc)().viewer_generate_compressed_textures&&(0,p.x2)()&&(u.Ay.ios||u.Ay.android||u.Ay.mac&&navigator.maxTouchPoints>0))try{await h.Ay.post(`/file/${n.file.key}/generate_compressed_textures`),R.current=!0}catch(e){(0,m.xi)("image","Failed to generate compressed textures",{fileKey:n.file.key,error:e})}})()},[n.file]);let P=(0,d.md)(B.Md),D=r?r.file.key:"",M=i.useRef(!1);return i.useEffect(()=>{!M.current&&(0,c.kc)().sc_files_prototype_share_as&&P.status===B.z2.LOADED&&n.share&&""!==D&&_&&(g((0,E.to)({type:x.g_,data:{fileKey:D,source:I.nk.fullscreenToolbar}})),M.current=!0)},[P.status,n.share,g,D,_]),(0,U.lF)(),i.createElement(i.Fragment,null,r&&(0,y.T8)(i.createElement(i.Fragment,null,i.createElement(F.A,null),i.createElement(k.Yp,{file:r.file,isCommentsMode:T,scalingInfo:e.scalingInfo,showHotspots:e.showHotspots,showPrototypeOptions:!0,showDeviceFrame:e.showDeviceFrame,org:e.org,recordingKey:"prototypeView",viewer:C,viewerElement:w,setViewerElement:A})),L.e0.PROTOTYPE,(0,v.oP)(r.file)),N&&!!C&&i.createElement(G.z,{viewer:C,entry:n.inlinePreview?"Preview":"Prototype"}))}function X(){let e=(0,a.d4)(e=>e.selectedView),r=(0,a.d4)(e=>e.prototype),n=(0,a.d4)(e=>e.flashes),c=(0,a.d4)(e=>e.user),d=(0,a.d4)(e=>e.currentUserOrgId?e.orgById[e.currentUserOrgId]:null),m=(0,a.d4)(e=>e.interactionTestDialogShown);if("prototype"!==e.view)throw Error(`Unexpected non-prototype view: ${e.view}`);let p=i.useRef(null),h=(0,l.f3)(),E=(0,b.Z)(h||"dark",p,e,!0),y=(0,V.PG)(e);if((0,P.d)())return i.createElement(P.O,null);let v=null==e.showHotspots||e.showHotspots,I=null==e.showDeviceFrame||e.showDeviceFrame;return i.createElement(C.uW.Provider,{value:E},i.createElement(R.K,{recordingKey:"inAppPage",containerRef:p},u.nW&&c&&!(0,s.GZ)()&&i.createElement(_.R,{userIdForTracking:c?.id,isCompact:!0}),i.createElement(Z,{scalingInfo:(0,A.M9)(e),showHotspots:v,showDeviceFrame:I,org:d,livegraphData:y}),!(0,l.jc)()&&(!y||r.showProgressBar)&&i.createElement(D.z2,{editorType:w._Y.DESIGN,isViewer:!0,progressBarMode:o.Oin.HIDE_UI}),i.createElement(g.a,{flashes:n}),i.createElement(O.V,null),i.createElement(f.Z,{positioner:j}),i.createElement(M.hG,null),m&&null,i.createElement(N.d,null,i.createElement(T.Ji,null))))}},70964:(e,r,n)=>{n.d(r,{Gv:()=>p,Uj:()=>u,ak:()=>m,iy:()=>h});var i,a=n(411855),o=n(686046),s=n(629019),l=n.n(s),c=n(672517),d=n(414598);let u=a.createContext(void 0);function m(e){return a.createElement("div",{className:l()(d.Qs,e.className)},e.children)}function p(e){let r={width:"300px"};return e.width&&("number"==typeof e.width?r.width=`${e.width}px`:r.width=e.width),e.height&&(r.height=e.height),e.margin&&(r.margin=e.margin),a.createElement(u.Consumer,null,n=>a.createElement("div",{className:l()(d.Dg,e.containerClassName)},a.createElement("img",{src:e.src,style:r,onLoad:n,alt:e.alt})))}function h(e){return a.createElement("div",{className:e.className?e.className:d.qr},e.children)}(i||(i={})).Content=function(e){return a.createElement("div",{className:e.className||d.xC,style:e.style},e.children)},(0,c.tf)(e=>a.createElement(o.N,{newTab:!0,trusted:!0,href:e.href,onClick:e.onClick},e.children))},242872:(e,r,n)=>{var i=n(411855),a=n(188507);n(268853),n(629019),n(540193),n(358145),n(915440),n(776621),n(268537),n(946689),n(449124),n(163023),n(154254);var o=n(939863);n(392592),n(934533),n(67294),n(134279),n(738269),n(198123);var s=n(662275);n(931828),n(809831),n(226055),n(774442),n(396226),n(318812),n(335682),n(99506),n(279453),n(300874),n(851363),n(498606);var l=n(237870);n(377020),n(267850),n(733378),n(746806),n(449731);var c=n(63666),d=n(601538);(0,l.Ju)(function(){let e=(0,a.wA)();return i.createElement(c.OA,{targetKey:d.v4,title:"",dismissModal:()=>{e(s.AS())},ctaText:(0,o.t)("rcs.move_drafts_nudge.got_it"),onClickPrimaryCta:()=>{e(s.AS())},width:268},i.createElement("p",{className:"move_drafts_nudge_rcs_steps--bodyWithoutTitle--H7oik"},(0,o.tx)("rcs.move_drafts_nudge.now_that_you_ve_moved_this_file_to_projects_your_teammates_can_edit_and_collaborate_with_you")))},"MoveDraftsFeedbackModal")},936181:(e,r,n)=>{n.d(r,{x:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(775111);class l extends i.Component{componentDidMount(){this.interval=setInterval(()=>{this.forceUpdate()},1e3)}componentWillUnmount(){clearInterval(this.interval)}render(){let e=document.querySelector(`[data-onboarding-key=${this.props.target}]`);if(!e)return i.createElement("div",null);{let r=e.getBoundingClientRect();if(!e.offsetParent)return i.createElement("div",null);let n=r.left+r.width/2,a=r.top+r.height/2,l=o()(s.xl,{[s.Df]:this.props.isBrandColor});return i.createElement("div",{className:l,style:{top:a,left:n}})}}}l.displayName="RcsCallout"},601538:(e,r,n)=>{n.d(r,{G8:()=>o,ao:()=>a,oi:()=>s,v4:()=>i});let i="share",a={key:"figjamTrySave",value:"1"},o="FULLSCREEN_FILENAME_CONTAINER";var s=(e=>(e.PAN="PAN_PREFERENCE_ONBOARDING_KEY",e.ZOOM="ZOOM_PREFERENCE_ONBOARDING_KEY",e))(s||{})},653734:(e,r,n)=>{n.d(r,{i:()=>N});var i=n(411855),a=n(109388),o=n(629019),s=n.n(o),l=n(91408),c=n(860601),d=n(572206),u=n(799569),m=n(946689),p=n(511443),h=n(135876),_=n(271779),g=n(672517),f=n(746806),E=n(474742),y=n(63666),b=n(70964),v=n(936181),I=n(15839),T=n(414598),S=n(837746);let w=(0,l.hG)(S.tui),A=(0,l.hG)(S.IKB),C=e=>null!==e?e:void 0;class N extends i.Component{constructor(e){super(e),this.renderIfDocumentComplete=()=>{"complete"===document.readyState&&this.forceRender()},this.getRcsKeyElementInterval=null,this.startScanningForRcsKeyElement=()=>{this.cleanUpRcsKeyElementScanner();let e=this.props.step;if(e.modalType===I.q3.DRAGGABLE){if(!e.onboardingKey){this.setState({rcsKeyLocation:null});return}this.getRcsKeyElementInterval=setInterval(()=>{let e=this.getRcsKeyElement();if(null!=e){let r=this.computeLocation(e.getBoundingClientRect());(null==this.state.rcsKeyLocation||this.state.rcsKeyLocation.top!==r.top||this.state.rcsKeyLocation.left!==r.left)&&this.setState({rcsKeyLocation:r})}else this.setState({rcsKeyLocation:null})},50)}},this.cleanUpRcsKeyElementScanner=()=>{null!=this.getRcsKeyElementInterval&&(clearInterval(this.getRcsKeyElementInterval),this.getRcsKeyElementInterval=null)},this.acceptHeight=e=>this.setState({modalHeight:e}),this.nextButtonRef=e=>{e&&(this.button=a.findDOMNode(e),this.focusButton())},this.focusButton=()=>{this.button&&!this.props.step.UNSAFE_disableFocus&&this.button.focus()},this.computeLocation=e=>{let r=this.props.step;if(r.modalType!==I.q3.DRAGGABLE)return{top:null,left:null,arrowRelativeX:null,arrowRelativeY:null,arrowPosition:null};if(r.pointDirection===I._L.LEFT_TITLE){let r=e.top+e.height/2;return{left:e.left+e.width+16,top:r-20,arrowRelativeX:-18,arrowRelativeY:f.uF/2-9,arrowPosition:f.F_.LEFT_TITLE}}if(r.pointDirection===I._L.RIGHT_TITLE){let r=e.top+e.height/2,n=e.left-this.width-16,i=f.uF/2-9;return{left:n,top:r-20,arrowRelativeX:this.width,arrowRelativeY:i,arrowPosition:f.F_.RIGHT_TITLE}}let n=e.left+e.width/2,i=e.bottom+18,a=n-this.width/2,o=n-(a=Math.min(a=Math.max(a,10),window.innerWidth-10-this.width)),s=f.F_.TOP;return null!=this.state.modalHeight&&window.innerHeight-i<this.state.modalHeight+12&&(i=e.top-this.state.modalHeight-12,s=f.F_.BOTTOM),{left:a,top:i,arrowRelativeX:o,arrowRelativeY:null,arrowPosition:s}},this.getFramePosition=()=>this.state.rcsKeyLocation?this.state.rcsKeyLocation:{top:null,left:null,arrowPosition:null,arrowRelativeX:null,arrowRelativeY:null},this.getRcsKeyElement=()=>{let e=this.props.step;if(e.modalType!==I.q3.DRAGGABLE)return null;let r=document.querySelector(`[data-onboarding-key=${e.onboardingKey}]`);if(!r)return null;let n=r.getBoundingClientRect();return 0===n.left&&0===n.right&&0===n.height&&0===n.width?null:r},this.acceptTitle=e=>{this.setState({title:e,titleSetByStep:this.props.step})},this.forceRender=()=>this.setState({renderCount:this.state.renderCount+1}),this.getPositionAndConstraints=(e,r)=>{let n=this.getFramePosition();if(n.top&&n.left)return{initialPosition:new d.Mi(n.left,n.top)};switch(e){case I.LN.BOTTOM_LEFT:return{initialPosition:r||new d.Mi(A,A),initialConstraints:{x:"left",y:"bottom"}};case I.LN.BOTTOM_RIGHT:return{initialPosition:r||new d.Mi(p.lc,16),initialConstraints:{x:"right",y:"bottom"}};case I.LN.TOP_RIGHT:return{initialPosition:r||new d.Mi(A,w+A),initialConstraints:{x:"right",y:"top"}};case I.LN.CENTER:default:return{initialPosition:r||new d.Mi(window.innerWidth/2-this.width/2,window.innerHeight/2-this.height/2)}}},this.state={modalHeight:328,rcsKeyLocation:null,renderCount:0}}componentDidMount(){window.addEventListener("beforeunload",this.props.onClose),this.startScanningForRcsKeyElement(),document.addEventListener("readystatechange",this.renderIfDocumentComplete)}componentWillUnmount(){this.props.onClose(),window.removeEventListener("beforeunload",this.props.onClose),document.removeEventListener("readystatechange",this.renderIfDocumentComplete),this.cleanUpRcsKeyElementScanner()}componentDidUpdate(e,r){this.focusButton();let n=this.props.step;if(n.modalType!==I.q3.DRAGGABLE)return;let i=e.step;(i.modalType!==I.q3.DRAGGABLE||n.onboardingKey&&n.onboardingKey!==i.onboardingKey)&&this.startScanningForRcsKeyElement()}get width(){let e=this.props.step;switch(e.modalType){case I.q3.FEATURE_UPDATE:return e.width||I.No;case I.q3.DRAGGABLE:return e.width||350;default:return 350}}get height(){return this.state.modalHeight||328}static getDerivedStateFromProps(e,r){return e.step!==r.titleSetByStep?{title:void 0,titleSetByStep:void 0}:{}}render(){let e=this.props.step,r=this.getFramePosition(),n={acceptTitle:this.acceptTitle,dismissModal:this.props.dismissModal,onClickPrimaryCta:this.props.onClickPrimaryCta,forceRender:this.forceRender},a=i.createElement(b.Uj.Provider,{value:this.forceRender},i.createElement(e.element,{...n}));return(0,g.T8)((()=>{switch(e.modalType){case I.q3.DRAGGABLE:let{initialPosition:n,initialConstraints:o}=this.getPositionAndConstraints(e.defaultLocation,e.initialPosition),l=e.title instanceof Function?e.title():e.title,d=this.state.title||l,p=e.onboardingKey||e.highlightOnlyKey;return i.createElement(i.Fragment,null,p&&!e.disableHighlight&&i.createElement(v.x,{target:p}),i.createElement(f.vx,{initialWidth:this.width,acceptHeight:this.acceptHeight,title:d,initialPosition:n,initialConstraints:o,arrowRelativeX:e.hideArrow?void 0:C(r.arrowRelativeX),arrowRelativeY:e.hideArrow?void 0:C(r.arrowRelativeY),arrowPosition:e.hideArrow?void 0:C(r.arrowPosition),animatedIn:!0,dragHeaderOnly:!!d,onClose:this.props.dismissModal,headerClassName:e.headerClassName,zIndex:e.zIndex,disableDragging:e.disableDragging},a,e.disableFooter?null:i.createElement(b.iy,{className:e.footerClassName},!e.hideStepCounter&&e.stepCounter&&i.createElement("div",{className:T.S},e.stepCounter),i.createElement("div",{className:T.v0},e.additionalButton&&i.createElement(m.NY,{className:T.lI,href:"link"===e.additionalButton.onClickBehavior?e.additionalButton.href:void 0,target:"link"===e.additionalButton.onClickBehavior?"_blank":void 0,onClick:"function"===e.additionalButton.onClickBehavior?()=>{e.additionalButton.onClick(this.props.dispatch),this.props.dismissModal()}:void 0,trackingProperties:e.additionalButton.textForTracking?{text:e.additionalButton.textForTracking()}:{}},e.additionalButton.label),i.createElement(m.vd,{ref:this.nextButtonRef,onClick:this.props.onClickPrimaryCta,className:T.lI,trackingProperties:{trackingDescriptor:e.ctaTrackingDescriptor},disabled:!!e.ctaIsLoading},i.createElement(h.x,{isLoading:!!e.ctaIsLoading,className:T.zP},()=>i.createElement("div",null,e.ctaText)))))));case I.q3.FEATURE_UPDATE:{let r=e.closeButtonStyle===I.M_.ON_DARK?T.oO:e.closeButtonStyle===I.M_.HIGH_CONTRAST?T.Db:e.closeButtonStyle===I.M_.ON_LIGHT?T.o:T.MD;return i.createElement(E.Nb,{className:`${T.yl} ${T.Kb}`,size:this.width,height:e.height,hide:this.props.dismissModal,disableClickOutsideToHide:e.disableClickOutsideToHide},a,e.closeButtonStyle!==I.M_.HIDDEN&&i.createElement(u.Jn,{innerText:"Close",className:r,onClick:()=>{this.props.additionalOnExplicitDismiss&&this.props.additionalOnExplicitDismiss(),this.props.dismissModal()}}))}case I.q3.WALK_THROUGH:return i.createElement(i.Fragment,null,!e.disableHighlight&&i.createElement(v.x,{target:e.onboardingKey}),i.createElement(y.CR,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,height:e.height,width:e.width,pointerForegroundColor:e.pointerForegroundColor,shouldCenterArrow:e.shouldCenterArrow,topPadding:e.topPadding,className:e.className,shouldDismissWhenLostDOMTarget:e.shouldDismissWhenLostDOMTarget,additionalOnExplicitDismiss:this.props.additionalOnExplicitDismiss,hideCloseButton:e.hideCloseButton,disableClickOutsideToHide:e.disableClickOutsideToHide},a));case I.q3.WELCOME:return i.createElement(i.Fragment,null,e.fullscreen&&i.createElement("div",{className:T.qg}),i.createElement(E.Nb,{className:s()(void 0!==e.fullscreen&&e.fullscreen?T.SV:T.Tw,e.className),size:"fitContent",hide:this.props.dismissModal,disableClickOutsideToHide:!0,disableKeyboardEventPropagation:!0,tintedModalBackground:void 0===e.tintedModalBackground||e.tintedModalBackground},i.createElement(_.i,{displayAs:_.C.Block},a)));case I.q3.SELF_CONTAINED:return a;case I.q3.POINTER:return i.createElement(i.Fragment,null,e.showHighlight&&i.createElement(v.x,{target:e.onboardingKey}),i.createElement(y.NJ,{dismissModal:this.props.dismissModal,targetKey:e.onboardingKey,width:e.width,topPadding:e.topPadding,shouldCenterArrow:e.shouldCenterArrow,shouldNotWrapInParagraphTag:e.shouldNotWrapInParagraphTag,arrowPosition:e.arrowPosition,onTargetLost:e.onTargetLost},a));case I.q3.ANNOUNCEMENT_POINTER:let g=e.title instanceof Function?e.title():e.title;return i.createElement(y.OA,{targetKey:e.onboardingKey,dismissModal:this.props.dismissModal,title:g,bottomLeftText:e.stepCounter,ctaText:e.ctaText,onClickPrimaryCta:this.props.onClickPrimaryCta,secondaryCtaText:e.secondaryCtaText,onClickSecondaryCta:e.preventDismissOnClickSecondaryCta?c.lQ:this.props.dismissModal,width:e.width,topPadding:e.topPadding,shouldCenterModal:e.shouldCenterModal,shouldCenterArrow:e.shouldCenterArrow,arrowPosition:e.arrowPosition},a)}})(),e.trackingContextName,e.trackingProperties,e.trackingEnabled)}}N.displayName="RcsFrame"},308706:(e,r,n)=>{n.d(r,{z:()=>c});var i=n(411855),a=n(939683),o=n(994190),s=n(939863),l=n(46044);function c({clientType:e}){let r=(0,a.U)();(0,i.useEffect)(()=>{let n=Date.now();return()=>{let i=Date.now()-n;r("reconnecting_modal_shown",{msElapsed:i,clientType:e}),i>1e3&&(0,o.B3)(e)}},[e,r]);let n=`${l.hd} ${l.ME}`;return i.createElement("div",{className:n},i.createElement("div",{className:l.nw},(0,s.tx)("reconnecting_modal.loading")))}},502242:(e,r,n)=>{n.d(r,{Qv:()=>y,RO:()=>E,we:()=>f});var i=n(411855);n(109388),n(188507),n(922827),n(340818),n(572304),n(298455);var a=n(629019),o=n.n(a);n(776250);var s=n(91408);n(966712),n(498750),n(153234),n(355819);var l=n(939863),c=n(175290);n(395281);var d=n(168039),u=n(959232);n(83909),n(44892),n(356390),n(848661),n(318812),n(144119),n(179243),n(158950),n(889449),n(184027);var m=n(759096);n(7959),n(538697);var p=n(137906),h=n(837746),_=n(71048);let g=2*(0,s.hG)(h.dGl);function f({selectedStyleProperties:e,snug:r}){let[n,a]=i.useState(!1),s=e.styleType,l="TEXT"===s,m="FILL"===s,h="dark"===(0,d.DP)(),{containerClassName:f,previewClassName:E}=i.useMemo(()=>({containerClassName:o()({[_.$9]:l,[_.vL]:!n&&m,[_.mj]:n&&m,[_.ig]:!l&&!m}),previewClassName:o()({[_.Lq]:!n,[_.s1]:n,[_.Gv]:!0,[_.Pj]:l,[_.SI]:l&&h,[_.hj]:m})}),[n,l,m,h]),y=i.useMemo(()=>{let e={};if(e.backgroundImage=`url('${(0,u.A)()}')`,!l)return m?n?e:void 0:e},[n,l,m]);return i.createElement(c.Y,{spacing:0,height:"hug-contents",padding:{left:m&&!r?g:0,right:m&&!r?g:0,top:m&&!r?g:0,bottom:r?0:g},verticalAlignItems:"start"},i.createElement("div",{style:y,className:f},e.url?i.createElement("img",{src:e.url,className:E,alt:"",onLoad:()=>{a(!0)}}):i.createElement(p.zi,{dsStyle:{style_type:e.styleType}})))}function E({selectedStyleProperties:e,recordingKey:r}){return i.createElement("div",null,"FILL"===e.styleType&&i.createElement(m.B8,{key:"fill",selectionProperties:e,recordingKey:r}),"GRID"===e.styleType&&i.createElement(m.tC,{key:"grids",selectionProperties:e,recordingKey:r}),"TEXT"===e.styleType&&i.createElement(m.gc,{key:"type",selectionProperties:e,recordingKey:r}),"EFFECT"===e.styleType&&i.createElement(m.w5,{key:"effects",selectionProperties:e,recordingKey:r}))}function y(e){switch(e){case"FILL":return(0,l.t)("design_systems.create_style.placeholder_name_color");case"TEXT":return(0,l.t)("design_systems.create_style.placeholder_name_text");case"EFFECT":return(0,l.t)("design_systems.create_style.placeholder_name_effect");case"GRID":return(0,l.t)("design_systems.create_style.placeholder_name_grid");default:return(0,l.t)("design_systems.create_style.placeholder_name_create_new_style_generic")}}(0,s.hG)(h.wQn)},255533:(e,r,n)=>{n.d(r,{Cj:()=>A});var i=n(411855),a=n(729064),o=n(629019),s=n.n(o),l=n(91408),c=n(886653),d=n(860601),u=n(946689),m=n(42962),p=n(976999),h=n(355819),_=n(154254),g=n(501114),f=n(672517),E=n(10648),y=n(269135),b=n(835981),v=n(467703),I=n(837746),T=n(950142);class S extends i.PureComponent{render(){let e=this.props.isReversed?"\u2191":"\u2193";return i.createElement("div",{className:`${b.LI} ${this.props.className||""}`,onClick:this.props.onClick,"data-onboarding-key":this.props.onboardingKey},this.props.nameElement?this.props.nameElement:this.props.name,this.props.isSelected&&i.createElement("div",{className:v.UE},e),this.props.extraContent)}}S.displayName="MultiSelectHeader";let w=(0,l.hG)(I.B6G);class A extends i.Component{constructor(e){super(e),this.rangeSelectAnchorRowKey=null,this.setScrollTopState=()=>{this.setState({scrollTop:this.nextScrollTop}),this.frameRequest=null},this.onScroll=e=>{this.nextScrollTop=e,null==this.frameRequest&&(this.frameRequest=requestAnimationFrame(this.setScrollTopState)),this.props.onScroll&&this.props.onScroll()},this.itemKeys=(0,c.xx)((e,r)=>e.map(e=>r(e))),this.selectableItemKeys=()=>{let e=this.itemKeys(this.props.items,this.props.getItemKey);return this.props.unselectableItemKeys?e.filter(e=>!this.props.unselectableItemKeys?.has(e)):e},this.toggleSelectMultiple=(e,r,n=!1)=>{this.rangeSelectAnchorRowKey=null;let i=this.props.onSelectedItemsChange??d.lQ;if(r){if(n)this.setState({selectedItemKeys:new Set,selectedAll:!1}),i([]);else{let r=new Set(this.state.selectedItemKeys);e.forEach(e=>r.delete(e)),this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll})),i(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}}else{let r=new Set([...e,...this.state.selectedItemKeys]);this.setState(e=>({selectedItemKeys:r,selectedAll:e.selectedAll||n})),i(this.filterToSelected(this.props.items,r,this.props.unselectableItemKeys,this.props.getItemKey))}},this.isItemSelected=e=>{let r=this.props.getItemKey(e);return this.state.selectedItemKeys.has(r)&&!this.props.unselectableItemKeys?.has(r)},this.toggleSelect=e=>{let r=this.props.getItemKey(e);if(this.props.unselectableItemKeys?.has(r))return;let n=new Set(this.props.singleSelect?[]:this.state.selectedItemKeys);this.rangeSelectAnchorRowKey=r,this.isItemSelected(e)?n.delete(r):n.add(r),this.setState({selectedItemKeys:n}),this.props.onSelectedItemsChange&&this.props.onSelectedItemsChange(this.filterToSelected(this.props.items,n,this.props.unselectableItemKeys,this.props.getItemKey))},this.selectRowsInRange=(e,r,n)=>{if(e===r)return;let i=this.props.items.map(e=>this.props.getItemKey(e)).filter(e=>!this.props.unselectableItemKeys?.has(e)),a=i.indexOf(e),o=i.indexOf(r);if(-1===a||-1===o)return;let s=Math.min(a,o),l=Math.max(a,o),c=i.slice(s,l+1);n?this.toggleSelectMultiple(c,!0):this.toggleSelectMultiple(c,!1)},this.onRowClick=(e,r)=>{let n=this.props.getItemKey(r);if(!this.props.unselectableItemKeys?.has(n)){if(e.shiftKey&&!this.props.singleSelect){let e;if(1===this.state.selectedItemKeys.size?e=[...this.state.selectedItemKeys][0]:this.rangeSelectAnchorRowKey&&(e=this.rangeSelectAnchorRowKey),e&&e!==n){let r=this.state.selectedItemKeys.has(n);this.selectRowsInRange(e,n,r),this.rangeSelectAnchorRowKey=n;return}}this.toggleSelect(r)}},this.isFirstInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let i=this.props.items[e-1];if(!i)return!0;let a=this.props.getItemKey(i);return!this.state.selectedItemKeys.has(a)},this.isLastInSelectedGroup=e=>{let r=this.props.items[e],n=this.props.getItemKey(r);if(!this.state.selectedItemKeys.has(n))return!1;let i=this.props.items[e+1];if(!i)return!0;let a=this.props.getItemKey(i);return!this.state.selectedItemKeys.has(a)},this.rowWithCheckbox=(e,r,n)=>{let a=this.isItemSelected(e),o=this.props.getItemKey(e),l=s()(v.sM,this.props.styleOverrideClassNames?.unselectedCheckbox),c=this.props.itemBasedStyleOverride?this.props.itemBasedStyleOverride(e):void 0,u=s()(v.nM,this.props.styleOverrideClassNames?.row,c?.row),p=s()(this.props.styleOverrideClassNames?.selectedRow,c?.selectedRow),h=this.props.unselectableItemKeys?.has(o)?null:i.createElement(m.y,{className:a?void 0:l,allChecked:a,someChecked:!1,"data-onboarding-key":a?"msl_selected_row_onboarding_key":void 0,"data-testid":"multi-select-list-select-item-checkbox",onChange:e=>{}}),_=e.tooltipText,g=[];return this.props.shouldRoundBordersForSelectedRows&&(g.push(v.uH),a&&!this.isFirstInSelectedGroup(n)&&g.push(v.BA),a&&!this.isLastInSelectedGroup(n)&&g.push(v.D)),i.createElement(y.iA,{className:s()(v.nM,u,a?p:void 0,...g,{[v.I6]:o===this.props.highlightState?.itemKey}),selected:a,key:o,onClick:r=>this.onRowClick(r,e),tooltipText:_,useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,dataTestId:"multi-select-list-table-trackable-row"},!this.props.noCheckboxColumn&&i.createElement("div",{className:s()(v.E0,this.props.styleOverrideClassNames?.checkboxColumn)},h),this.props.columns.map(a=>i.createElement("div",{className:a.className,key:a.name},a.cellComponent(e,r,this.props.highlightState??{itemKey:null,setItemKey:d.lQ},n))))},this.renderLoadingRow=e=>{let r=0;return e<2?r=1:e<10&&(r=1-(e-2+1)/9),i.createElement("div",{key:e,style:{opacity:r},"data-testid":"multi-select-list-loading-row"},i.createElement(y.iA,{className:s()(v.nM,this.props.styleOverrideClassNames?.row),useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,dataTestId:"multi-select-list-table-loading-row"},!this.props.noCheckboxColumn&&i.createElement("div",{className:s()(v.E0,this.props.styleOverrideClassNames?.checkboxColumn)}),this.props.columns.map((r,n)=>r.name?i.createElement("div",{className:r.className,key:r.name},r.loadingComponent?r.loadingComponent:i.createElement("div",{style:g.sx.add({width:`${50*Math.abs(Math.sin(e+n+1))+30}%`}).$},i.createElement(p.Wi,{className:_.cx.h12.$,animationType:p.JR.SHIMMER}))):i.createElement("div",{key:r.name,className:s()(_.cx.wFull.$,r.className)}))))},this.filterToSelected=(0,c.xx)((e,r,n,i)=>e.filter(e=>r.has(i(e))&&!n?.has(i(e)))),this.state={scrollTop:0,selectedItemKeys:new Set,selectedAll:!1},this.stickBannerRef=i.createRef(),this.scrollContainerRef=i.createRef()}componentDidUpdate(e,r){if(e.sortState.columnName!==this.props.sortState.columnName||e.sortState.isReversed!==this.props.sortState.isReversed||e.items.length!==this.props.items.length){if(this.rangeSelectAnchorRowKey=null,(e.isLoading||this.props.isLoading)&&e.items.length<this.props.items.length&&this.state.selectedAll){let r=this.props.items.slice(e.items.length).map(e=>this.props.getItemKey(e));this.setState(e=>({selectedItemKeys:new Set([...e.selectedItemKeys,...r])}))}this.props.isLoading&&0===this.props.items.length&&this.state.selectedAll&&(this.setState({selectedItemKeys:new Set,selectedAll:!1}),this.props.onToggleSelectAll?.(!0))}}onHeaderClick(e){this.props.onSetSortState(e)}renderColumnHeaders(e){let r=e.length===this.selectableItemKeys().length,n=e.length>0,a=0===e.length;return i.createElement(y.Hj,{header:!0,useAdminTableStyles:!0,useUpdatedTableStyles:this.props.useUpdatedTableStyling,className:s()(this.props.disabled?v.eO:v.U1,this.props.styleOverrideClassNames?.header),dataTestId:"multi-select-list-table-header-row"},!this.props.noCheckboxColumn&&i.createElement("div",{className:s()(v.E0,this.props.styleOverrideClassNames?.checkboxColumn)},this.selectableItemKeys().length>0&&!this.props.selectAllDisabled&&i.createElement(m.y,{allChecked:r,"data-onboarding-key":"msl_header_toggle_select_all_onboarding_key",someChecked:n,onChange:()=>{a?(this.toggleSelectMultiple(this.selectableItemKeys(),!1,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!1)):(this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0))},"data-testid":"multi-select-list-select-all-checkbox"})),this.props.columns.map(e=>i.createElement("div",{className:e.className,key:e.name},i.createElement(S,{className:e.headerClassName,extraContent:e.headerExtraContent,name:e.name,nameElement:e.nameElement,isReversed:this.props.sortState.isReversed,isSelected:e.sorting_key?e.sorting_key===this.props.sortState.columnName:e.name===this.props.sortState.columnName,onClick:e.getSortValue?()=>this.onHeaderClick(e.sorting_key??e.name):void 0,onboardingKey:e.onboardingKey}))))}render(){let e=this.filterToSelected(this.props.items,this.state.selectedItemKeys,this.props.unselectableItemKeys,this.props.getItemKey),r=this.props.isBannerHeightDynamic?{top:this.stickBannerRef?.current?.getBoundingClientRect()?.height||0}:void 0,n=this.props.isLoading&&0===this.props.items.length,a=this.props.trackingProperties?this.props.trackingProperties.batchAction:{};return i.createElement(i.Fragment,null,i.createElement(N,{anyVisibleAndSelectedItems:e.length>0,highlightState:this.props.highlightState}),i.createElement("div",{className:s()(v.wY,{[v.TH]:this.props.hasNewScrollContext},this.props.styleOverrideClassNames?.tableWrapper)},i.createElement(h.P,{className:v.jG,innerClassName:s()(v.NM,this.props.scrollContainerInnerClassName),onScroll:this.onScroll,minContentWidth:this.props.minContentWidth||(0,l.hG)(I.fAD),scrollContainerRef:this.scrollContainerRef,scrollContentRef:this.props.scrollContentRef,scrollingDisabled:n,horizontalScrollingDisabled:this.props.hasNewScrollContext,scrollBarAlways:this.props.scrollBarAlwaysVisible},i.createElement(i.Fragment,null,i.createElement("div",{ref:this.stickBannerRef,className:v.ln},this.props.stickyBanner),i.createElement("div",null,this.props.scrollAwayContent),i.createElement("div",{className:void 0!==this.props.stickyBanner?v.T3:v.ln,style:r},i.createElement(f.fu,{name:"MultiSelectList Header",trackingTargets:E.K.NONE,properties:{tableType:this.props.itemTypeContext.itemType}},this.props.stickyContent),!this.props.hideHeader&&this.renderColumnHeaders(e)),0===this.props.items.length&&!this.props.isLoading&&i.createElement("div",{className:v.p$},this.props.emptyContent),i.createElement(f.fu,{name:"MultiSelectList - Row",trackingTargets:E.K.RCS,properties:{tableType:this.props.itemTypeContext.itemType}},i.createElement(C,{totalLoaded:this.props.items.length,isLoading:!!this.props.isLoading,disabled:!!this.props.disabled,renderLoadingRow:e=>this.renderLoadingRow(e),renderItem:r=>this.rowWithCheckbox(this.props.items[r],e.length>0,r),scrollContainerRef:this.scrollContainerRef,onFetchMore:this.props.onFetchMore,rowHeight:this.props.rowHeightOverride??w,paddingEnd:this.props.paddingEnd||32})))),this.props.actionBar&&i.createElement(f.fu,{name:"MultiSelectList BatchAction",trackingTargets:E.K.RCS,properties:{selectedAll:this.state.selectedAll,selectedCount:e.length,...a}},i.createElement("div",{className:e.length>0?v._Z:v.KY,"data-testid":"multi-select-list-action-bar"},i.createElement("div",{className:s()(e.length>0?v.SB:v.cr,this.props.actionBarClassName)},i.createElement("div",{className:v.SM},this.props.itemTypeContext.getSelectedCountString(this.props.getTotalSelected?this.props.getTotalSelected(e,this.selectableItemKeys()):e.length)),this.props.actionBar(e),i.createElement(u.RW,{className:s()(v.Ym,this.props.styleOverrideClassNames?.batchActionClearButton),svg:T.A,onClick:()=>{this.toggleSelectMultiple(this.selectableItemKeys(),!0,!0),this.props.onToggleSelectAll&&this.props.onToggleSelectAll(!0)},trackingProperties:{action:"Clear Selection"}}))))),this.props.footer&&this.props.footer(e))}}function C({totalLoaded:e,isLoading:r,disabled:n,renderItem:o,renderLoadingRow:s,scrollContainerRef:l,onFetchMore:c,rowHeight:d,paddingEnd:u}){let m=i.useCallback(()=>d,[d]),{virtualItems:p,totalSize:h}=(0,a.z)({size:r||c?e+10:e,parentRef:l,overscan:15,estimateSize:m,paddingEnd:u||32});return i.useEffect(()=>{let r=p[p.length-1];e&&c&&r?.index>=e-1&&c()},[c,e,p]),i.createElement("div",{className:`${n?v.ry:v.jm}`,style:{height:h}},p.map(r=>i.createElement("div",{key:r.index,style:{position:"absolute",top:r.start,left:0,width:"100%",height:r.size}},r.index>=e?s(r.index-e):o(r.index))))}function N(e){let{anyVisibleAndSelectedItems:r,highlightState:n}=e;return i.useLayoutEffect(()=>{r&&n?.itemKey&&(0,n.setItemKey)(null)},[r,n?.itemKey,n?.setItemKey]),null}A.displayName="MultiSelectList"},548593:(e,r,n)=>{n.d(r,{pG:()=>f,rw:()=>y});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(738269),c=n(467594),d=n(298543),u=n(914557),m=n(372464),p=(e=>(e.DEFAULT="default",e.ADMIN_SETTINGS="adminSettings",e))(p||{});class h extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:m.zP})}}class _ extends u.o{constructor(){super(...arguments),this.styleOverrides=()=>({base:m.NQ,selected:m.xW})}}class g extends i.PureComponent{constructor(e){super(e),this.shouldShowDropdown=()=>!!(this.props.dropdownKey&&this.props.dropdownShown&&this.props.dropdownShown.type===this.props.dropdownKey&&this.props.dropdownShown.data&&this.props.dropdownShown.data.targetRect),this.toggleDropdown=()=>{let e=this.dropdownRef.current;this.props.dropdownKey&&e&&(this.props.dropdownShown?this.props.dispatch(l.oB()):this.props.dispatch(l.j7({type:this.props.dropdownKey,data:{targetRect:e.getBoundingClientRect()}})))},this.getTabClassWithStyling=()=>"adminSettings"===this.props.variant?_:h,this.dropdownRef=i.createRef()}render(){let e=this.getTabClassWithStyling();return i.createElement(e,{tab:this.props.tab,selectedTab:this.props.selectedTab,onClick:this.props.onClick??this.toggleDropdown,disabled:this.props.disabled,tooltipText:this.props.tooltipText,showTooltipWhenDisabled:this.props.showTooltipWhenDisabled,dataText:this.props.dataText},i.createElement("span",{ref:this.dropdownRef,className:m.Y1,"data-onboarding-key":this.props["data-onboarding-key"]},this.props.children),this.props.dropdownKey&&i.createElement(i.Fragment,null,i.createElement(c.c,{showingDropdown:this.shouldShowDropdown(),dropdownKey:this.props.dropdownKey,dispatch:this.props.dispatch,className:s()(m.ai,this.props.chevronClassName),svgContainerClassName:m.hq}),this.shouldShowDropdown()&&i.createElement(d.Cf,{targetRect:this.props.dropdownShown.data.targetRect,lean:"right",minWidth:120,propagateCloseClick:!0},this.props.dropdownOptions)))}}let f=g.name,E=e=>({dropdownShown:e.dropdownShown});function y(){return(0,a.Ng)(E)(g)}},436128:(e,r,n)=>{n.d(r,{W:()=>f});var i=n(411855),a=n(188507),o=n(96328),s=n(939863),l=n(198371),c=n(611978),d=n(860178),u=n(416822),m=n(668860),p=n(637590),h=n(498606),_=n(222928);function g(e,r,n){let i=(0,o.EJ)(e,25),a=n?function(e){switch(e){case m.e6.OWNER:return" (owner)";case m.e6.ADMIN:return" (admin)";default:return""}}(n):"";return r?(0,s.t)("avatar.tooltip.current_user_handle",{handle:i,roleName:a}):(0,s.t)("avatar.tooltip.other_user_handle",{handle:i,roleName:a})}function f(e){let r=(0,d.iZ)(),n=(0,a.d4)(e=>e.multiplayer),o=(0,u.q)(),s="user"in e?`user-${e.user.id}`:`role-${e.role.id}`,m="user"in e?e.user:e.role.user,f=!1,E="sessionId"in m&&m.sessionId===n.sessionID;r?f=m.id===r.id:"sessionId"in m&&(f=E);let y="role"in e?g(m.handle,f,e.role.level):g(m.handle,f),b=function(e){let r=(0,d.iZ)();return function(e){let{localUser:r,tooltipUser:n,multiplayer:i,isInWorkshop:a,selectedView:o}=e,s=n.id?.includes("VISITOR-")||!n.id,l=-1!==i.sessionID,c="sessionId"in n&&n.sessionId===i.sessionID,d="sessionId"in n&&n.sessionId===i.presenterSessionID,u="sessionId"in n&&i.observingSessionID===n.sessionId;return!l||(0,p.QB)(o)?s?"none":"view-profile":c?s||!r?a?"edit-name":"none":d?"stop-presenting":"none":d&&!u?"follow-presenter":u?"stop-observe":"start-observe"}({localUser:r,tooltipUser:e,multiplayer:(0,a.d4)(e=>e.multiplayer),isInWorkshop:(0,l.$D)(),selectedView:(0,c._6)()})}(m),v=`/files${o}/user/${m.id}`;return i.createElement("div",{id:e.id,key:`avatar-${s}`,"data-tooltip-type":h.Ib.SPECIAL,"data-tooltip":_.M,"data-tooltip-user-handle":y,"data-tooltip-user-session-id":"sessionId"in m?m.sessionId:void 0,"data-tooltip-timeout-delay":150,"data-tooltip-user-profile-url":v,"data-tooltip-click-action":b,"data-tooltip-max-width":300,"data-tooltip-offset-y":e.tooltipOffsetY??8,"data-tooltip-interactive":!0,style:{display:"inherit"}},e.children)}},527429:(e,r,n)=>{n.d(r,{$:()=>o,V:()=>s});var i=n(542367);let a=/https?:\/\/(?![\w.-]+\.(?:auto|map|center)[^\w.-]?)\S*/i;function o(e){try{return new URL(e),!0}catch(e){return!1}}function s(e){return i.I6(e,"url").concat(i.I6(e,"email")).filter(e=>!!o(e.href)&&a.test(e.href))}},607e3:(e,r,n)=>{n.d(r,{bx:()=>V,xi:()=>D});var i=n(411855),a=n(188507),o=n(45623),s=n(91408),l=n(966712),c=n(281381),d=n(163023),u=n(46481),m=n(348425),p=n(758297),h=n(154254),_=n(939863),g=n(392592),f=n(507877),E=n(697551),y=n(935308),b=n(411916),v=n(594901),I=n(860178),T=n(99506),S=n(728587),w=n(299211),A=n(457152),C=n(242983),N=n(838706),L=n(471174),O=n(819692),R=n(646351),P=n(247866);let D="FILE_BROWSER_WORKSPACE_SWITCHER",k="ACCOUNT_SWITCHING_COMMUNITY_ONBOARDING_KEY",M=(0,s.hG)(C.nZ),F=(0,s.hG)(C.Qr),x=(0,s.hG)(C.sw),U=(0,s.hG)(C.vj)+2*(0,s.hG)(C.xX),B=U+1;function V(){let e=(0,a.wA)(),r=(0,a.d4)(e=>e.dropdownShown?.type===D),n=(0,a.d4)(e=>e.selectedView),s=(0,a.d4)(e=>e.dropdownShown?.data?.targetRect),C=(0,a.d4)(e=>e.authedUsers),V=(0,a.d4)(e=>e.authedProfilesById),G=(0,v.FC)(),H=(0,I.Pc)(),K=(0,b.U8)(G,C.orderedIds),W=(0,a.d4)(e=>e.orgUsersByOrgId),$=(0,a.d4)(e=>e.orgById),Y=(0,a.d4)(e=>e.authedTeamsById),z=(0,a.d4)(e=>e.authedActiveCommunityProfile),j=(0,E.UP)(),q=(0,a.d4)(e=>Object.keys(e.authedProfilesById).some(r=>!!e.authedProfilesById[r].org_id||!!e.authedProfilesById[r].team_id)),Z=(0,a.d4)(e=>e.userNotifications.communityProfileBellStates),X=(0,w.m)(),J=(0,a.d4)(e=>e.teamFeedBellStates),Q=(0,l.kc)().ps_benchmark;i.useEffect(()=>{Q&&(0,y.nm)()(e).catch(r=>{let n=r?.data?.message||(0,_.t)("file_browser.error_try_again");e(g.F.enqueue({message:n,type:"error"}))})},[e,Q]);let ee=()=>{let r=[];return C.orderedIds.forEach(n=>{let a=C.byId[n];if(!a)return;r=r.concat([{displayText:a.email,optionHeight:U,icon:i.createElement("span",{className:N.PN}),disabled:!0}]);let o=a.plans?.map(r=>{let n={userId:a.id,orgId:r.is_org?r.plan_id:null,teamId:r.is_org?null:r.plan_id},o=b.O_(G,n),s=!!r.is_guest,d=n.orgId&&!s&&l.kc().xr_debounce_threshold?{view:"teamFeed"}:{view:"recentsAndSharing"};return{displayText:r.name,optionHeight:B,itemBadge:s?i.createElement(c.Ex,{className:N.qS,text:_.t("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:i.createElement(p.n,{className:h.cx.mr8.$,userId:n.userId,orgId:n.orgId,teamId:n.teamId}),isActive:o,isChecked:o,className:N.jx,callback:()=>e(f._l({workspace:n,view:d})),activeClassName:N.sI}})||[];r=(r=r.concat(o)).concat([{displayText:"",disabled:!0,separator:!0}])}),r};return i.createElement(i.Fragment,null,r&&i.createElement(S.j,{showPoint:!0,showCheckmarkOnRight:!0,lean:"left",leanPadding:M,items:(()=>{if(Q)return ee();let r=[];return C.orderedIds.forEach(n=>{let a=C.byId[n];r=(r=(r=r.concat([{displayText:a.email,optionHeight:U,icon:i.createElement("span",{className:N.PN}),disabled:!0}])).concat(K[n].map(r=>{let n=(0,b.HE)(G,r),s=!j&&(0,b.O_)(G,r),l=!r.orgId,d=!1;r.orgId&&W[r.orgId]&&(d=W[r.orgId][r.userId]?.permission===T._D.GUEST);let m=X?.[r.userId]?.[r.orgId||"0"],h=J[r.orgId||"0"],g=i.createElement(u.U,{svg:P.A},i.createElement(o.Z,null));return{displayText:n,optionHeight:B,badge:d?i.createElement(c.Ex,{className:N.qS,text:(0,_.t)("navbar.navbar.guest"),color:c.zE.INVERT,subtle:!0}):void 0,icon:i.createElement("div",{className:N.aS},(m||h)&&i.createElement("div",{className:N.e3}),i.createElement(p.n,{userId:r.userId,orgId:r.orgId})),subText:l&&a.external_restricted_org_id?(0,_.t)("navbar.workspaces.disabled_by_your_admins"):void 0,alternativeRightIconIfNotChecked:l&&a.external_restricted_org_id?g:void 0,isActive:s,isChecked:s,className:N.jx,activeClassName:N.sI,callback:()=>e(f._l({workspace:r})),"data-onboarding-key":l?"ACCOUNT_SWITCHING_PERSONAL_ONBOARDING_KEY":void 0}}))).concat([{displayText:"",disabled:!0,separator:!0}])}),r})().concat((()=>{let r=!!Z&&Object.values(Z).some(e=>e),a=(0,A.s)(C.byId,j,H,$,Y,V,Z,z,n,e);if(a.length>1){let e=[{displayText:q?"":(0,_.t)("navbar.community.browse_community_workspace_switcher_label"),optionHeight:U,itemBadge:q?i.createElement("div",{className:N.zS},(0,_.tx)("navbar.community.browse_community_workspace_switcher_label"),i.createElement("a",{href:"https://help.figma.com/hc/articles/4404108672663",target:"_blank",className:N.P2},i.createElement(d.B,{svg:L.A,className:N.E3}))):void 0,icon:i.createElement("span",{className:N.s9}),disabled:!0}];return[{displayText:(0,_.t)("navbar.community.community_label"),optionHeight:U,icon:i.createElement("div",{className:N.aS},r&&i.createElement("div",{className:N.e3}),i.createElement(m.t,{svg:O.A,fallbackSvg:R.A})),onMouseEnter:()=>(0,E.nR)("submenu",n.view),className:N.uK,children:e.concat(a),activeClassName:N.sI,"data-onboarding-key":k}]}if(1!==a.length)return[];{let e=a[0];return[{displayText:(0,_.t)("navbar.community.community_label"),sideText:e.sideText,rightJustifySideText:!0,optionHeight:U,icon:i.createElement("div",{className:N.aS},r&&i.createElement("div",{className:N.e3}),i.createElement(m.t,{svg:O.A,fallbackSvg:R.A})),activeClassName:N.sI,isActive:e.isActive,isChecked:e.isChecked,className:N.uK,callback:e.callback,"data-onboarding-key":k}]}})()),onSelectItem:(r,n)=>{r.callback&&r.callback("",null,e)},parentRect:s,dispatch:e,minWidth:F,rootAndSubmenuMaxWidth:x}))}},656839:(e,r,n)=>{var i=n(716034);(0,i.eU)(null),(0,i.eU)(null)},37112:(e,r,n)=>{n(268853),n(572304),n(966712),n(752553),n(776621),n(830445),n(848661),n(335682),n(279453),n(921199),n(705129),n(656839);var i=(e=>(e[e.Continue=0]="Continue",e[e.SkipChildren=1]="SkipChildren",e[e.Stop=2]="Stop",e))(i||{})},593400:(e,r,n)=>{n(411855),n(188507),n(966712),n(915440),n(29680),n(335682),n(279453);var i=n(540019);n(284321),n(234945),n(388094);var a=n(412899);n(656839),n(37112),i.M4.Query({fetch:async({nodes:e})=>0===e.length?{}:(await a.Q.getComponentNames(e)).data.meta.componentsById,stalenessPolicy:"never"})},608145:(e,r,n)=>{n.d(r,{dJ:()=>p});var i=n(268853),a=n(925998),o=n(467212),s=n(776250),l=n(517333),c=n(966712),d=n(776621),u=n(369351);let m="granted";class p{constructor(){this.permissionRequestMade=!1;let e=(0,c.Ay)().firebase_cloud_messaging_browser_notifications;this.config={apiKey:e?.api_key,authDomain:e?.auth_domain,projectId:e?.project_id,storageBucket:e?.storage_bucket,messagingSenderId:e?.messaging_sender_id,appId:e?.app_id},this.vapidKey=e?.vapid_id;let r=(0,a.Wp)(this.config);this.messaging=(0,o.dG)(r);try{this.registerOnMessageListener(),this.registerVisibilityChangeListener(),this.updateServiceWorkerOnPermissionChange()}catch(e){(0,d.$D)(i.e.WAYFINDING,Error("An issue was encountered while instantiating Firebase Messaging Service"))}}static getInstance(){return p.instance??=new p,p.instance}registerServiceWorker(){return navigator.serviceWorker.register(Fig.firebaseMessagingServiceWorkerURL,{type:"module"})}getServiceWorkerRegistration(){return navigator.serviceWorker.getRegistration(Fig.firebaseMessagingServiceWorkerURL)}registerOnMessageListener(){this.onMessageUnsubscribe=(0,o.xD)(this.messaging,async e=>{if(!e.data||!e.data.title||!e.data.body)return;let r=await this.getServiceWorkerRegistration(),n=e.data,i=n.title,a={body:n.body,data:{url:n.open_url},tag:e.messageId};r?.showNotification(i,a)})}registerVisibilityChangeListener(){document.addEventListener("visibilitychange",e=>{"visible"===document.visibilityState?this.onMessageUnsubscribe||this.registerOnMessageListener():(this.onMessageUnsubscribe?.(),this.onMessageUnsubscribe=void 0)},!1)}async updateServiceWorkerOnPermissionChange(){if("granted"!==(await navigator.permissions.query({name:"notifications"})).state)this.unregisterServiceWorkerWhenPermissionDenied();else{let e=await this.getServiceWorkerRegistration();e?this.retrieveAndSendToken(e):this.registerServiceWorkerWhenPermissionGranted()}}async unregisterServiceWorkerWhenPermissionDenied(){let e=await this.getServiceWorkerRegistration();e?.unregister()}async retrieveAndSendToken(e){let r=e??await this.getServiceWorkerRegistration(),n=await (0,o.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:r});u.sr.sendFirebaseToken({firebaseToken:n}),s.az.trackDefinedEvent("notification.firebase_token_registered",{})}async registerServiceWorkerWhenPermissionGranted(){let e=await this.registerServiceWorker();this.retrieveAndSendToken(e)}async shouldRequestPermission(){try{if(!("Notification"in window)||!("serviceWorker"in navigator)||!("PushManager"in window))return!1;let[e,r]=await Promise.all([navigator.permissions.query({name:"notifications"}),this.getServiceWorkerRegistration()]);if("granted"===e.state){r?.update();let e=!!r;return e&&this.retrieveAndSendToken(r),!e}if("denied"===e.state)return!1;return!0}catch(e){return!1}}async requestPermission(){let e=await Notification.requestPermission();if("granted"===e){let e=await this.registerServiceWorker();return{status:m,token:await (0,o.gf)(this.messaging,{vapidKey:this.vapidKey,serviceWorkerRegistration:e})}}return"denied"===e?{status:"denied"}:{status:"unknown"}}static createInstance(){return this.getInstance()}static async requestPushNotifications(){if(!(0,c.kc)().browser_notifications||l.eD)return;let e=p.getInstance();if(await e.shouldRequestPermission()&&!e.permissionRequestMade){e.permissionRequestMade=!0;try{let r=await e.requestPermission();r.status===m?(u.sr.sendFirebaseToken({firebaseToken:r.token}),s.az.trackDefinedEvent("notification.firebase_token_registered",{})):s.az.trackDefinedEvent("notification.firebase_token_registration_blocked",{status:r.status})}catch(e){(0,d.$D)(i.e.WAYFINDING,Error("Could not request permission for firebase token")),s.az.trackDefinedEvent("notification.firebase_token_registration_failed",{})}}}}},878227:(e,r,n)=>{n.d(r,{X:()=>u,v:()=>m});var i=n(966712),a=n(259829),o=n(563706);let s=o.XN?"iPadOS":o.Ay.osname,l=o.XN?0:+o.Ay.osversion;function c(e){let r=window.navigator.languages||[];return e<r.length?r[e]:void 0}let d={browser_name:o.Ay.name,browser_version:+o.Ay.version,os_name:s,os_version:l,release:i.tl().release_manifest_git_commit,release_tag:i.tl().release_git_tag,page_locale:i.mm()[0],navigatorLanguage1:c(0),navigatorLanguage2:c(1),navigatorLanguage3:c(2),navigatorLanguages:(window.navigator.languages||[]).join(","),uiVersion:(0,a.fF)()};function u(){return d}function m(e){d={...d,...e}}},966159:(e,r,n)=>{n.d(r,{Mx:()=>m,NY:()=>c,Ok:()=>s,uW:()=>d,ux:()=>l,xj:()=>p,yx:()=>u});var i=n(586459);let a={status:i.r.INIT},o={status:i.r.LOADING};function s(){return a}function l(){return o}function c(e){return{status:i.r.SUCCESS,value:e}}function d(e){return{status:i.r.FAILURE,error:e}}function u(e){return e.status===i.r.INIT}function m(e){return e.status===i.r.LOADING}function p(e){return e.status===i.r.SUCCESS}},627776:(e,r,n)=>{n.d(r,{Fe:()=>p,GH:()=>_,ce:()=>d,cm:()=>m}),n(411855);var i=n(776250),a=n(878227),o=n(716034),s=n(418956),l=n(563706),c=n(776621);function d(){return!!(l.Ay.chromeos&&window.matchMedia("(display-mode: tabbed)").matches)}let u=/^\/(files|idle_timeout|ip_account_restriction|my_plugins|user|org|team)(\/.*)?$/;function m(e){return u.test(e)||"/"===e||""===e}function p(e){document.body.style.backgroundColor="#2c2c2c"}let h=(0,o.eU)(null);function _(){g(),l.Ay.chromeos&&l.Ay.chrome&&(window.matchMedia("(display-mode: tabbed)").addEventListener("change",()=>{d()&&(p("dark"),g())}),window.addEventListener("appinstalled",()=>{(0,i.sx)("chrome_os_app_installed")}),window.addEventListener("beforeinstallprompt",e=>{s.zl.set(h,e)}))}function g(){let e=d();(0,c.kF)("chrome_os_app",e),e&&(0,a.v)({browser_name:"Figma ChromeOS App"})}},568214:(e,r,n)=>{n.d(r,{$q:()=>_,AW:()=>R,Bx:()=>x,DA:()=>q,FN:()=>l,FO:()=>p,F_:()=>F,G$:()=>L,GL:()=>N,H0:()=>f,HD:()=>A,HL:()=>w,J1:()=>U,UE:()=>s,Uv:()=>o,X9:()=>g,YN:()=>u,YR:()=>j,YU:()=>M,_W:()=>v,di:()=>S,e3:()=>d,kx:()=>Z,mx:()=>y,ol:()=>c,ql:()=>O,sN:()=>P,tK:()=>E,tM:()=>m,ty:()=>C,x1:()=>h});var i=n(543509),a=n(136880);let o={r:0,g:0,b:0,a:1},s={r:1,g:1,b:1,a:1},l=s;var c=(e=>(e.MULTIPLAYER_GRAY="#667799",e.MULTIPLAYER_BLUE="#007BE5",e.MULTIPLAYER_PURPLE="#9747FF",e.MULTIPLAYER_PINK="#FF24BD",e.MULTIPLAYER_RED="#F24822",e.MULTIPLAYER_YELLOW="#FFCD29",e.MULTIPLAYER_GREEN="#14AE5C",e))(c||{});let d="var(--color-textondarkcanvas, #ffffff)",u="var(--color-textonlightcanvas, #000000)",m="inset 0px 0px 0px 1px rgba(255, 255, 255, 0.15)",p="inset 0px 0px 0px 1px rgba(0, 0, 0, 0.1)",h="inset 0px 0px 0px 2px var(--color-bordertranslucent)",_={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"};function g(e,r){return{...e,a:r}}function f(e,r){if(!e)return null;if("string"!=typeof e)return e;let n=null!=r,i=r??1;return function(e,r=1){let n=e.match(/color\(\s*display-p3\s*(?<red>[-+]?[0-9]*\.?[0-9]+)\s+(?<green>[-+]?[0-9]*\.?[0-9]+)\s+(?<blue>[-+]?[0-9]*\.?[0-9]+)\s*(?:\/\s*(?<alpha>[-+]?[0-9]*\.?[0-9]+%?))?\s*\)/);if(n&&n.groups&&"red"in n.groups&&"green"in n.groups&&"blue"in n.groups){let{red:e,green:i,blue:a,alpha:o}=n.groups;return{r:parseFloat(e),g:parseFloat(i),b:parseFloat(a),a:o?parseFloat(o):r}}return null}(e,i)??S(e,i)??y(e,i)??E(e,n,i)??null}function E(e,r=!1,n=1){let i=/[^0-9a-f]*([0-9a-f]*)/i.exec(e.trim());if(!i)return null;let a=i[1];if(a.length>=8&&r)return D(V(a.substring(0,2)),V(a.substring(2,4)),V(a.substring(4,6)),V(a.substring(6,8)));if(7===a.length&&r)return D(V(a.substring(0,2)),V(a.substring(2,4)),V(a.substring(4,6)),B(a[6]));if(a.length>=6)return D(V(a.substring(0,2)),V(a.substring(2,4)),V(a.substring(4,6)),n);if(5===a.length&&r)return D(B(a[0]),B(a[1]),B(a[2]),V(a.substring(3,5)));if(4===a.length&&r)return D(B(a[0]),B(a[1]),B(a[2]),B(a[3]));if(a.length>=3)return D(B(a[0]),B(a[1]),B(a[2]),n);if(2===a.length){let e=V(a);return D(e,e,e,n)}else if(1===a.length){let e=B(a);return D(e,e,e,n)}return null}function y(e,r=1){let n;return(n=X.exec(e=e.trim()))?D(H(n[1]),H(n[2]),H(n[3]),null==n[4]?r:W(n[4])):(n=J.exec(e))?D(G(n[1]),G(n[2]),G(n[3]),null==n[4]?r:W(n[4])):(n=Q.exec(e))?function(e,r,n,i){if(0===r)return D(n,n,n,i);let a=n<.5?n*(1+r):n+r-n*r,o=2*n-a,s=[0,0,0];for(let r=0;r<3;++r){let n=e+-(1/3*(r-1));n<0&&++n,n>1&&--n,6*n<1?s[r]=o+(a-o)*6*n:2*n<1?s[r]=a:3*n<2?s[r]=o+(a-o)*(2/3-n)*6:s[r]=o}return D(s[0],s[1],s[2],i)}($(n[1]),H(n[2]),H(n[3]),null==n[4]?r:W(n[4])):(n=ee.exec(e))?function(e,r,n,i){let a=(100*e+16)/116,o=r/500+a,s=a-n/200,l=e=>{let r=e**3;return r>b?r:(e-16/116)/7.787};a=l(a);let c=e=>e>.0031308?1.055*e**(1/2.4)-.055:12.92*e,d=c(3.2404542*(o=95.047*l(o)/100)+-1.5371385*a+-.4985314*(s=108.883*l(s)/100)),u=c(-.969266*o+1.8760108*a+.041556*s),m=c(.0556434*o+-.2040259*a+1.0572252*s);return D(z(d),z(u),z(m),i)}(H(n[1]),parseFloat(n[2]),parseFloat(n[3]),null==n[4]?r:W(n[4])):(n=et.exec(e))?(0,a.I0)({l:K(n[1],.01),c:K(n[2],.004),h:$(n[3]),a:null==n[4]?r:W(n[4])}):(n=er.exec(e))?(0,a.oq)({l:K(n[1],.01),ax:K(n[2],.01),bx:parseFloat(n[3]),a:null==n[4]?r:W(n[4])}):null}let b=(6/29)**3;function v(e,r){return T(I(e),I(r))/.002741735}let I=e=>{let r,n,i,a=1-(1-e.r/255)*e.a,o=1-(1-e.g/255)*e.a,s=1-(1-e.b/255)*e.a;return r=(.4124*(a=a>.04045?Math.pow((a+.055)/1.055,2.4):a/12.92)+.3576*(o=o>.04045?Math.pow((o+.055)/1.055,2.4):o/12.92)+.1805*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92))/.95047,n=(.2126*a+.7152*o+.0722*s)/1,i=(.0193*a+.1192*o+.9505*s)/1.08883,r=r>.008856?Math.pow(r,1/3):7.787*r+16/116,{l:116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,a:500*(r-n),b:200*(n-(i=i>.008856?Math.pow(i,1/3):7.787*i+16/116))}},T=(e,r)=>{let n=e.l-r.l,i=e.a-r.a,a=e.b-r.b,o=Math.sqrt(e.a*e.a+e.b*e.b),s=o-Math.sqrt(r.a*r.a+r.b*r.b),l=i*i+a*a-s*s,c=n/1,d=s/(1+.045*o),u=(l=l<0?0:Math.sqrt(l))/(1+.015*o),m=c*c+d*d+u*u;return m<0?0:Math.sqrt(m)};function S(e,r=1){let n=_[e.toLowerCase()];return n?E(n,!1,r):null}function w(e){return{r:Y(e.r),g:Y(e.g),b:Y(e.b),a:Y(e.a)}}function A(e,r=.627){let n=f(e);return!!n&&U(n)<r}function C(e){if(!e)return!0;let r=f(e);return!r||r?.a===0}function N(e){return A(e)?d:u}function L(e){return A(e)?"var(--color-textondarkcanvassecondary, rgba(255,255,255,0.6))":"var(--color-textonlightcanvassecondary, rgba(0,0,0,0.6))"}function O(e,r,n){let i=f(e),a=f(r);if(!i||!a)return;let o=P(i,a),s=U(i),l=U(o);if(n){let e=U(a);return"light"===n&&e>.9||"dark"===n&&e<.25?h:void 0}return s<.2&&l<s+.1?m:s>.8&&.1>Math.abs(l-s)?p:void 0}function R(e=[]){function r(e){return null!=e}let n=e.map(e=>{if("SOLID"===e.type)return e.color;let n=(e.stops??[]).map(e=>e.color).filter(r);if(n.length)return P(...n)}).filter(r);return n.length?P(...n):void 0}function P(...e){return e.reduceRight((e,r)=>{let n=r.a,i=e.a,a=n*(1-i),o=a+i,s=a/o,l=i/o;return{r:r.r*s+e.r*l,g:r.g*s+e.g*l,b:r.b*s+e.b*l,a:o}})}function D(e,r,n,i=1){return isNaN(e)||isNaN(r)||isNaN(n)||isNaN(i)?null:{r:e,g:r,b:n,a:i}}function k({r:e,g:r,b:n,a:i}){return{r:Math.round(255*e),g:Math.round(255*r),b:Math.round(255*n),a:Math.round(255*i)}}function M(e){let{r,g:n,b:i}=k(e);return`rgba(${r}, ${n}, ${i}, ${e.a})`}function F(e){let{r,g:n,b:i,a}=k(e),o=Math.min(Math.max(0,n),255),s=Math.min(Math.max(0,i),255),l=Math.min(Math.max(0,a),255),c=Math.min(Math.max(0,r),255).toString(16).padStart(2,"0"),d=o.toString(16).padStart(2,"0"),u=s.toString(16).padStart(2,"0"),m=l.toString(16).padStart(2,"0");return 255===l?`#${c}${d}${u}`:`#${c}${d}${u}${m}`}function x(e){switch(e){case"legacy":return"#e5e5e5";case"light":default:return"#f5f5f5";case"dark":return"#1e1e1e"}}function U(e){return .299*e.r+.587*e.g+.114*e.b}function B(e){return V(`${e}${e}`)}function V(e){return Y(parseInt(e,16))}function G(e){return Y(parseFloat(e))}function H(e){return z(.01*parseFloat(e))}function K(e,r){return e.endsWith("%")?z(parseFloat(e)*r):parseFloat(e)}function W(e){return e?e.includes("%")?H(e):z(parseFloat(e)):1}function $(e){let r=parseFloat(e),n=0;return n=e.includes("grad")?.9*r:e.includes("rad")?180*r/Math.PI:e.includes("turn")?360*r:r,(n=(0,i._g)(n,360))/360}function Y(e){return z(e/255)}function z(e){return(0,i.qE)(e,0,1)}function j(e){return e&&!isNaN(e.r)&&!isNaN(e.g)&&!isNaN(e.b)&&e.r>=0&&e.r<=1&&e.g>=0&&e.g<=1&&e.b>=0&&e.b<=1}function q(e,r){let{r:n,g:a,b:o,a:s}=e,{r:l,g:c,b:d,a:u}=r;return(0,i.xN)(n,l)&&(0,i.xN)(a,c)&&(0,i.xN)(o,d)&&(0,i.xN)(s,u)}function Z(e){let r=f(e);return!!r&&.2126*r.r+.7152*r.g+.0722*r.b<.6}let X=/^(?:rgba?\()?\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,J=/^(?:rgba?\()?\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?[, ]\s*([0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,Q=/^(?:hsla?\()?\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)%\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,ee=/^(?:lab?\()?\s*([0-9]*\.?[0-9]+)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/,et=/^(?:oklch?\()\s*([0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+(?:deg|rad|grad|turn)?))?\s*\)?\s*;?$/,er=/^(?:oklab?\()\s*([0-9]*\.?[0-9]+%?)%\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+%?)\s*?[, ]\s*([-+]?[0-9]*\.?[0-9]+)\s*?(?:[,\/ ]\s*([-+]?[0-9]*\.?[0-9]+%?))?\s*\)?\s*;?$/},138392:(e,r,n)=>{n.d(r,{Eg:()=>P,Hd:()=>m,Wn:()=>u,jA:()=>d});var i=n(543509);n(539321);var a=n(404199),o=n(566343),s=n(775664),l=n(534367),c=n(568214);function d(e,r,n="IGNORE",i){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<0||r>1e3)return console.warn("Invalid value passed into calculateColorWithRampValue. Ensure value is between 0 and 1000",r),null;let a=E(e),o=I(a),s=T(a.hsluv_l,o);if(i){let{LESS_THAN:r,GREATER_THAN:n}=i;if(r&&100*s<r||n&&100*s>n)return e}return v(a,r/1e3,o,s),"IGNORE"!==n&&C(a,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(a)}function u(e){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRampValue. Ensure r, g, b, and a are between 0 and 1",e),null;let r=E(e),n=I(r);return Math.floor(100*T(r.hsluv_l,n))}function m(e,r,n="IGNORE"){if(!e||!(0,c.YR)(e))return console.warn("Invalid color passed to calculateColorWithRelativeAdjustment. Ensure r, g, b, and a are between 0 and 1",e),null;if(r<-1||r>1)return console.warn("Invalid percentage passed into calculateColorWithRelativeAdjustment. Ensure percentage is between -1 and 1",r),null;let i=E(e),a=I(i),o=i.hsluv_l,s=o;s=r>0?o+(100-o)*r:o*(1- -1*r);let l=T(o,a);return v(i,T(s,a)/10,a,l),"IGNORE"!==n&&C(i,"BLACK"===n||"BLACK_AND_WHITE"===n,"WHITE"===n||"BLACK_AND_WHITE"===n),f(i)}let p=["red","orange","yellow","green","blue","purple"],h={red:{a:-.079,b:16.1},orange:{a:-2.55,b:56.4},yellow:{a:-4.26,b:81.7},green:{a:1.67,b:131},blue:{a:3.4,b:227},purple:{a:.0136,b:282}},_={red:{d:95.2,c:-3.15,b:1.3,a:-.159},orange:{d:108,c:-11.7,b:2.8,a:-.183},yellow:{d:76.3,c:-3.03,b:1.96,a:-.151},green:{d:102,c:-44.8,b:11.8,a:-.776},blue:{d:95.5,c:-10.7,b:3.71,a:-.306},purple:{d:95.6,c:-2.82,b:1.43,a:-.189}},g={red:{d:96.4,c:-.7,b:-2.01,a:.125},orange:{d:103,c:-6.98,b:.0827,a:-.0256},yellow:{d:102,c:-5.84,b:.849,a:-.0972},green:{d:96.5,c:2.77,b:-2.86,a:.171},blue:{d:97.5,c:.173,b:-2.12,a:.127},purple:{d:98.1,c:-2.29,b:-1.94,a:.132}},f=e=>(e.hsluvToRgb(),{r:(0,i.qE)(e.rgb_r,0,1),g:(0,i.qE)(e.rgb_g,0,1),b:(0,i.qE)(e.rgb_b,0,1),a:1}),E=e=>{let r=new a.h;return r.rgb_r=e.r,r.rgb_g=e.g,r.rgb_b=e.b,r.rgbToHsluv(),r},y={red:1,orange:.75,yellow:.6,green:1,blue:1.1,purple:1};function b(e){if((0,o.f)(e,c.UE)<=S)return N(e);let r=E(e),n=new a.h;if(n.hsluv_h=r.hsluv_h,r.hsluv_l<=10)return n.hsluv_s=0,n.hsluv_l=60,f(n);if(r.hsluv_l<=30){let e=.03*r.hsluv_l;n.hsluv_s=r.hsluv_s*e}else n.hsluv_s=Math.min(100,1.5*r.hsluv_s);return n.hsluv_l=Math.min(100,.444*r.hsluv_l+55.555),O(n)}function v(e,r,n,i=5){r*=10;let a=h[n].a*i+h[n].b-e.hsluv_h;e.hsluv_h=h[n].a*r+h[n].b-a;let o=e.hsluv_s,s=_[n].a*i*i*i+_[n].b*i*i+_[n].c*i+_[n].d;e.hsluv_s=_[n].a*r*r*r+_[n].b*r*r+_[n].c*r+_[n].d,e.hsluv_s*=o/s,e.hsluv_l=g[n].a*r*r*r+g[n].b*r*r+g[n].c*r+g[n].d,e.hsluv_s>100&&(e.hsluv_s=100),e.hsluv_l>100&&(e.hsluv_l=100),e.hsluv_h>360&&(e.hsluv_h=360),e.hsluv_h<0&&(e.hsluv_h=0)}function I(e){let r={blue:0,yellow:0,green:0,purple:0,red:0,orange:0},n=e.hsluv_l/100;e.hsluvToRgb(),p.forEach(i=>{let o=new a.h;o.rgb_r=l.r[i].r,o.rgb_g=l.r[i].g,o.rgb_b=l.r[i].b,o.rgbToHsluv(),v(o,n,i,5),o.hsluvToRgb();let s=(0,c._W)(f(e),f(o));r[i]=s/y[i]});let i="yellow",o=r[i];for(let e in r)r[e]<o&&(o=r[e],i=e);return e.rgbToHsluv(),i}function T(e,r){let n=(0,i.Ae)(g[r].a,g[r].b,g[r].c,g[r].d-e),a=n.filter(e=>0<e&&e<10);return 1===a.length?a[0]:n.length>1?(n.sort(),n[Math.floor(n.length/2)]):e<50?11:-1}let S=1.31,w={BLACK:c.Uv,WHITE:c.UE},A=(e,r)=>{let{colorForContrastCheck:n,contrastMinimum:i}=r,a=()=>(0,o.f)(l,n),s=(0,c.HD)(n)?.1:-.1,l=f(e);for(;a()<i+.02&&(e.hsluv_l+=s,!(e.hsluv_l>100)&&!(e.hsluv_l<0));)l=f(e);return e.rgbToHsluv(),a()>=i+.02},C=(e,r,n)=>{let i;let a=f(e),s=(0,o.f)(c.UE,a),l=(0,o.f)(c.Uv,a);if(r&&n)i=l>=s?"BLACK":"WHITE";else{if(!r&&!n)return;i=r?"BLACK":"WHITE"}("BLACK"!==i||!(l>=4.5))&&("WHITE"===i&&s>=4.5||A(e,{contrastMinimum:4.5,colorForContrastCheck:w[i]}))},N=e=>({r:(0,i.qE)((e.r-1)/.55+1,0,1),g:(0,i.qE)((e.g-1)/.55+1,0,1),b:(0,i.qE)((e.b-1)/.55+1,0,1),a:1}),L=e=>{e.hsluvToRgb();let r=new a.h;return r.rgb_r=1-.55*(1-e.rgb_r),r.rgb_g=1-.55*(1-e.rgb_g),r.rgb_b=1-.55*(1-e.rgb_b),r.rgbToHsluv(),r},O=e=>{let r=L(e);return A(r,{contrastMinimum:S,colorForContrastCheck:w.WHITE}),N(f(r))};function R(e){let r=[],n=new Set;return e.forEach(e=>{let i=s.z5.format(e);n.has(i)||(n.add(i),r.push(e))}),r}function P(e){if(e)return{base:e,widget:e,baseLight:R(e.map(e=>m(e,.6,"BLACK_AND_WHITE")||c.Uv)),sticky:R(e.map(e=>d(e,400,"BLACK",{LESS_THAN:400})||c.Uv)),highlight:R(e.map(b)),pencilUI3:e}}},609494:(e,r,n)=>{n.d(r,{B2:()=>h,H3:()=>T,I:()=>v,Kq:()=>b,Kx:()=>I,L4:()=>N,Pq:()=>A,Rc:()=>function e(r=[],n=!0){let i=(Array.isArray(r)?r:[{t:r}]).map(r=>{let n={t:null,styles:null,children:null,user:null,userId:null,link:null,isHashtag:null};if(r.user_annotated&&r.user_id)return{...n,userId:r.user_id,user:{...r.user_annotated,name:r.user_annotated.name??null,imgUrl:r.user_annotated.img_url}};if(r.profile_id||null===r.profile_id)return{...n,t:"@"+r.t,styles:["lightbold"]};let i={...n,t:r.t||n.t,styles:r.styles||n.styles,link:r.link||n.link};return r.children?.length&&(i.children=r.children.map(r=>({...n,children:e(r.children,!1)}))),i});if(n&&i.length){let e=i[i.length-1];e.t=e.t?.replace(/\s+$/g,"")??null}return i},Wf:()=>function e(r,n){if(r.length!==n.length)return!1;for(let i=0;i<r.length;i++){let a=r[i],o=n[i];if(a.t!==o.t||a.user_id!==o.user_id)return!1;if(!g(a,o))return!1;if(a.profile_id!==o.profile_id)return!1;else if(a.link!==o.link)return!1;else if(!_(a,o))return!1;else if(!e(a.children??[],o.children??[]))return!1}return!0},_Z:()=>y,cs:()=>w,l5:()=>E,pV:()=>C,q:()=>S,sP:()=>function e(r=[]){if(!r)return"";let n=r.reduce((r,n)=>{let i=n.t||"",a=n.styles||[];n.user_annotated?(i=n.user_annotated.handle,a=["lightbold"]):n.profile_id||null===n.profile_id?(i="@"+n.t,a=["lightbold"]):n.children?.length?n.children.forEach((n,o)=>{(r||i)&&(i+="\n"),i+=a.includes("ol")?`${o+1}. `:"* ",i+=e(n.children)}):(i=(0,l.x6)(i).map(e=>"string"==typeof e?(0,u.hX)(e):`<span class="${p.mh}">${e.props["data-text"]}</span>`).join("\n"),n.link&&(a=["lightbold"]));let o=[];return a.forEach(e=>{"b"===e?o.push(p.hp):"lightbold"===e?o.push(p.XH):"i"===e?o.push(p.u5):"s"===e&&o.push(p.Vc)}),o.length&&(i=`<span class='${s()(...o)}'>`+i+"</span>"),r+i},"");return(0,d.F)(n)||""},vj:()=>f});var i=n(821910),a=n(966664),o=n(629019),s=n.n(o),l=n(934480),c=n(440535),d=n(733334),u=n(96328),m=n(572206),p=n(934545);let h=5,_=(e,r)=>{if((0,a.uy)(e.styles)&&(0,a.uy)(r.styles))return!0;if((0,a.uy)(e.styles)!==(0,a.uy)(e.styles))return!1;let n=e.styles?.filter(e=>!r.styles?.includes(e));return n?.length===0},g=(e,r)=>!!((0,a.uy)(e.user_annotated)&&(0,a.uy)(r.user_annotated))||(0,a.uy)(e.user_annotated)===(0,a.uy)(e.user_annotated)&&(0,i.c2)(e.user_annotated,r.user_annotated);var f=(e=>(e.EDITOR_MENTION="editor_mention",e.COMMUNITY_MENTION="community_mention",e.PLAIN_TEXT="plain_text",e.EMOJI="emoji",e.NONE="none",e))(f||{});function E(e){return 2===Object.keys(e).length&&Object.keys(e).includes("user_id")&&Object.keys(e).includes("user_annotated")?"editor_mention":2===Object.keys(e).length&&Object.keys(e).includes("profile_id")&&Object.keys(e).includes("t")?"community_mention":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")&&e.t&&(0,l.xM)(e.t)?"emoji":Object.keys(e).includes("t")&&!Object.keys(e).includes("link")?"plain_text":"none"}function y(e=[],r){if(!e)return"";let n=e.reduce((e,r)=>{let n=r.t||"";return r.user_annotated?n=r.user_annotated.handle:r.profile_id||null===r.profile_id?n="@"+r.t:r.children?.length&&r.styles?.length?r.children.forEach((i,a)=>{(e||n)&&(n+="\n"),n+=r.styles.includes("ol")?`${a+1}. `:"* ",n+=y(i.children)}):r.styles?.length&&r.styles.includes("s")&&(n=""),e+n},"");return r?.includeTrailingWhitespace||(n=n.replace(/\s+$/g,"")),(0,d.F)(n)||""}function b(e,r){let n=y(e,r),i=(0,l.Bx)(n);return(globalThis.Intl?.Segmenter?Array.from(new Intl.Segmenter().segment(i)):Array.from(i)).length}function v(e){return 0===e.length||/^\s*$/.test(y(e))}function I(e){return v(e)||y(e).length<=5}function T(e){let r=!(e.activeThread?.id===c.hm&&e.newComment.discardAttempt<c.IT),n=e.activeThread?.id?e.threads[e.activeThread.id]:null,i=!(n&&!(n&&I(n.reply.messageMeta)&&0===Object.keys(n.reply.attachments||{}).length)&&(!n.discardAttempts||n.discardAttempts<c.IT));return r&&i}function S(e){return y(e).length>=17500}function w(e){if(!Array.isArray(e))return[];let r=function e(r){let n=[];return r.forEach(r=>{r.user_id?.includes("invite-")?r.t&&n.push(r.t):r.children&&n.push(...e(r.children))}),n}(e);return!function e(r){return r.forEach(r=>{r.user_id?.includes("invite-")?delete r.user_id:r.children&&e(r.children)}),r}(e),r}function A(e){return e.length>0&&(e[e.length-1].t=e[e.length-1].t?.trimEnd()),e}function C(e,r){let n=Math.min(Math.max(e.x,r.x),r.x+r.width),i=Math.min(Math.max(e.y,r.y),r.y+r.height);return new m.Mi(n,i)}function N(e){return e.includes("-")}},91408:(e,r,n)=>{function i(e){return parseInt(e.split("px")[0])}function a(e){return Number(e.split("px")[0])}n.d(r,{hG:()=>i,jz:()=>a})},93484:(e,r,n)=>{n.d(r,{y:()=>i});let i=n(411855).createContext(null)},623738:(e,r,n)=>{n.d(r,{Uc:()=>c,iZ:()=>l});var i=n(922827),a=n(126911);n(966712);var o=n(588169),s=n(286640);let l=new Map(Object.entries(i.XpX).map(([e,r])=>[e,r]));function c(){let e=o.dZ.get((0,o.v7)())||"UNKNOWN",r=a.y.isApple()?"mac":"!mac",n=function(){let e;if(!s.x4)return{};let r=s.x4.getItem("customKeyboardShortcuts");if(!r)return{};try{e=JSON.parse(r)}catch(e){console.error("[Custom Keyboard Shortcuts] Failed to parse from local storage",e)}return e}()??{};return n[e]?.[r]??{}}Object.entries(i.XpX).map(([e,r])=>[r,e])},540193:(e,r,n)=>{n.d(r,{yN:()=>b,ql:()=>v});var i=n(411855);n(188507);var a=n(38329),o=n(966712),s=n(456772),l=n(915440),c=n(391388),d=n(944682),u=n(270056);n(938908);var m=n(782656),p=n(988022),h=n(279453),_=n(623746),g=n(569512),f=n(547807),E=n(66037);new class{constructor(){this.RecentPrototypesSchemaValidator=(0,f.YV)("RecentPrototypesSchemaValidator",e=>e.object({recent_prototypes:e.ignore(),recent_prototype_repos:e.ignore(),org_drafts_owners:e.array(E.WU)}),null,!1)}getRecentPrototypes(e){return this.RecentPrototypesSchemaValidator.validate(async({xr:r})=>await r.get("/api/recent_prototypes",f.td.toAPIParameters({...e,fuid:o.Ay().user_data?.id})))}};let y=null;async function b(e){if(!y)return;let r=[],n={},i=[];for(let a of y?.currentUser?.recentFiles2??[])a?.file?.key&&e.includes(a.file.key)&&(r.push({key:a.file.key,parent_org_id:a.file.parentOrgId,team_id:a.file.teamId,folder_id:a.file.folderId}),n[a.id]=null,i.push(a.file.key));let a=g.f.removeRecentFiles({fileKeys:i}),o=(0,s.WB)().optimisticallyDelete({RecentFile2:n},a);(0,p.OH)("File RecentFiles Removed",r),await o}function v(e){return function(e,r){var n;let s=r?h.KN$:(0,o.kc)().livegraph_recent_files_sev_swap?h.LD2:h.wZi,p=(0,l.Rs)(s,{});return"loaded"===p.status&&(n=p.data,n?.currentUser&&"recentFiles2"in n.currentUser)&&(y=p.data),(0,i.useEffect)(()=>{p.status===c.H.LOADED&&function(e,r,n){let i=e.recent_repos.map(e=>e.files).reduce((e,r)=>e.concat(r),[]);a.D.dispatch(d.uo({files:e.recent_files.concat(i),subscribeToRealtime:!1})),a.D.dispatch(m.nF({recent_repos:e.recent_repos,subscribeToRealtime:n})),a.D.dispatch(u.Kc({folderId:`recents-${r||"no-org"}`,state:"loaded"}))}((0,_.YN)(p.data),e,!1)},[p,e]),i.useMemo(()=>p.transform(e=>(0,_.YN)(e).recent_files),[p])}(e,!1)}},207286:(e,r,n)=>{n.d(r,{Xf:()=>y});var i,a=n(411855),o=n(358145),s=n(752553),l=n(27087),c=n(939863),d=n(349410),u=n(459279),m=n(870962),p=n(99506),h=n(540019),_=n(556261),g=n(56099),f=n(356931),E=n(679892);function y(e,r=!0){let n=(0,d.yq)(),l=(0,_.gI)({migrationGroup:g.L.GROUP_7,component:"useOrgBillingData"}),[m,p]=(0,s.IT)(i.orgBillingDataQuery(e),{enabled:r}),h=(0,a.useMemo)(()=>m.transform(e=>e?{...e,invoices:e.invoices.map(e=>({...e,billing_mechanics:n()?e.billing_mechanics:u.fA.LEGACY}))}:e),[m,n]);(0,f.i)(h,(0,c.t)("org_billing_error_default"));let E=(0,o.ZC)(e),b=a.useMemo(()=>E!==e&&!!E,[e,E]),v=(0,o.ZC)(l),I=a.useMemo(()=>!1===v&&l&&h.data&&0===Object.keys(h.data).length,[l,h.data,v]),T=a.useMemo(()=>I||b,[I,b]);return(0,a.useEffect)(()=>{"loading"!==h.status&&T&&p.refetch()},[p,T,h.status]),h}(i||(i={})).orgBillingDataQuery=h.M4.Query({fetch:async e=>(await E.Eh.getBillingData({orgId:e})).data.meta,enabled:e=>!!e}),h.M4.Mutation(async(e,{query:r})=>{let{orgId:n,billingContacts:a,onRejected:o}=e,s=await l.Ay.put(`/api/orgs/${n}/billing_data`,{admin_email:a}).catch(e=>{throw o(e),e});r.mutate(i.orgBillingDataQuery(n),e=>{e&&(e.admin_email=s.data.meta.admin_email)})}),h.M4.Mutation(async(e,{query:r})=>{let n=await l.Ay.put(`/api/orgs/${e.orgId}/lock_invoice`,{license_quantities:e.licenseQuantities}).catch(r=>{throw e.onRejected(r),r}),a=i.orgBillingDataQuery(e.orgId);return r.mutate(a,e=>{e&&(e.invoices=n.data.meta.invoices)}),e.planInvoiceId?(r.refetch(a),await (0,m.jL)({planType:p.OL.ORG,planId:e.orgId})):await r.refetch(a),n.data.meta}),h.M4.Mutation((e,{query:r})=>{r.refetch(i.orgBillingDataQuery(e))})},823810:(e,r,n)=>{n.d(r,{G4:()=>E,IT:()=>y,SW:()=>_,Ul:()=>f,g4:()=>h,m8:()=>g,n:()=>m,v_:()=>p});var i=n(411855),a=n(138020),o=n(915440),s=n(391388),l=n(720647),c=n(99506),d=n(279453);let u=e=>(r,n)=>n?r.filter(r=>{let i=n[r];return!!i?.[e]}):[],m=u("canTrash"),p=u("canDuplicate"),h=u("canRestore"),_=u("canRestoreToOtherFolders"),g=u("canDeleteForever"),f=u("canMove"),E=u("isDraftFile");function y(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({fileKey:e})),[e]),u=(0,o.p)(d.XRI,n,{enabled:r});return(0,i.useMemo)(()=>s.Qw.all(u.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.file;e&&(r[e.id]=function(e){let r=e.editorType===c._Y.WHITEBOARD&&e.org?.isFigJamDisabled||e.editorType===c._Y.SLIDES&&e.org?.isSlidesDisabled||!1,n=e.canEdit,i=e.canEdit,o=e.canRename,s=!!e.project?.canView,d=!!e.project?.canEdit,u=!!(0,a.oA)(e.canTrash),m=!!(0,a.oA)(e.canMove),p=(e.canEdit||!e.viewerExportRestricted)&&!r,h=!!(0,a.oA)(e.canRestore),_=!!(0,a.oA)(e.canRestoreToOtherFolders),g=e.canFavorite,f=e.isFavorited,E=e.isTeamTemplate,y=(0,l._R)(e.editorType??c._Y.DESIGN,e.currentPlanUser),b=e.isDraftFile,v=!!(0,a.oA)(e.canPermanentlyDelete),I=e.parentOrgId?"org":e.teamId?"team":null,T=e.parentOrgId||e.teamId||null;return{canEdit:n,canRename:o,canMove:m,canShowInProject:s,canPin:d,canTrash:u,canDuplicate:p,canRestore:h,canRestoreToOtherFolders:_,canFavorite:g,isFavorited:f,canDeleteForever:v,canUseInNewFile:E,canRestoreFromVersion:i,isFileTypeDisabled:r,canOpenMoveModal:!0,isUserRestrictedForSeat:y,planUser:e.currentPlanUser,planType:I,planId:T,isDraftFile:b}}(e))}return r}),[u])}},307524:(e,r,n)=>{n.d(r,{Q:()=>l});var i=n(411855),a=n(915440),o=n(391388),s=n(279453);function l(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({prototypeId:e})),[e]),c=(0,a.p)(s.vE,n,{enabled:r});return(0,i.useMemo)(()=>o.Qw.all(c.map(e=>e.result)).transform(e=>{let r={};for(let i of e){var n;let e=i.prototype;e&&(r[e.id]={canRead:(n=e).canRead,canFavorite:n.canRead&&!n.isFavorited,canUnfavorite:n.canRead&&n.isFavorited})}return r}),[c])}},388120:(e,r,n)=>{n.d(r,{CS:()=>_,Sk:()=>E,_H:()=>h,ae:()=>f,gX:()=>g,k8:()=>b,nL:()=>y,zj:()=>p});var i=n(411855),a=n(138020),o=n(915440),s=n(391388),l=n(720647),c=n(875847),d=n(99506),u=n(279453);let m=e=>(r,n)=>n?r.filter(r=>{let i=n[r];return!!i?.[e]}):[],p=m("canDelete"),h=m("canRestore"),_=m("canRestoreToOtherFolders"),g=m("canForeverDelete"),f=m("canMove"),E=m("isDraftRepo");function y(e,r,n){return n?e.filter(e=>{let i=r[e],a=n[e];return a?.isMainBranch(i)}):[]}function b(e,r=!0){let n=(0,i.useMemo)(()=>e.map(e=>({repoId:e})),[e]),m=(0,o.p)(u.rwE,n,{enabled:r});return(0,i.useMemo)(()=>s.Qw.all(m.map(e=>e.result)).transform(e=>{let r={};for(let n of e){let e=n.repo;e&&(r[e.id]=function(e){let r=e.canEdit,n=e.canMove,i=!!e.project?.canView,o=e.canEdit&&!e.isTrashed,s=e.canEdit&&e.isTrashed,u=e.isTrashed&&!!(0,a.oA)(e.sourceFile?.canRestore),m=!!(e.isTrashed&&(0,a.oA)(e.sourceFile?.canRestoreToOtherFolders)),p=!!e.sourceFile?.isFavorited,h=e.canRead&&!!e.sourceFile&&!e.sourceFile.isFavorited,_=e.canRead&&!!e.sourceFile&&e.sourceFile.isFavorited,g=!!e.project&&e.canEdit,f=e.parentOrgId?"org":e.teamId?"team":null,E=e.parentOrgId||e.teamId||null,y=(0,l._R)(d._Y.DESIGN,e.currentPlanUser),b=(0,c.T9)(e?.project);return{canDelete:o,canRename:r,canShowInProject:i,isFavorited:p,canRestore:u,canRestoreToOtherFolders:m,canForeverDelete:s,canFavorite:h,canUnfavorite:_,isMainBranch:r=>r===e.sourceFile?.key,canMove:n,canEditBranch:r=>!!e.branches?.find(e=>e.key===r)?.canEdit,canPin:g,planId:E,planType:f,canOpenMoveModal:!0,isUserRestrictedForSeat:y,planUser:e.currentPlanUser,isDraftRepo:b}}(e))}return r}),[m])}},73950:(e,r,n)=>{n.d(r,{r8:()=>E});var i=n(922827),a=n(340818),o=n(298455),s=n(966712),l=n(716034),c=n(418956),d=n(477268),u=n(215932),m=n(635455),p=n(240159),h=(e=>(e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.IDLE=1]="IDLE",e[e.DETECTING=2]="DETECTING",e[e.SUGGESTING=3]="SUGGESTING",e[e.FIXING=4]="FIXING",e))(h||{}),_=(e=>(e[e.Break=0]="Break",e[e.SkipChildren=1]="SkipChildren",e))(_||{});let g=(0,l.eU)(0),f=new class{constructor(){this.status=0,this.ruleIdToEnabledRule={}}initialize(){0===this.status&&(this.refreshEnabledRules(),this.status=1)}refreshEnabledRules(){this.ruleIdToEnabledRule=Object.fromEntries(p.l.filter(e=>e.enabled()).map(e=>[e.id,e]))}getEnabledRules(){return Object.values(this.ruleIdToEnabledRule)}getSelectedNodes(){let e=(0,o.UN)();return e.getCurrentPage()?.directlySelectedNodes??[]}getLintableNodes(e){let r=[];for(let n of e)(0,m.eA)(n,e=>{if(!("SECTION"===e.type||(0,d.ke)(e))){if((0,m.YS)(e))return 1;e.fills?.find(e=>e.visible&&e.opacity&&e.opacity>0)&&r.push(e)}});return r}async getViolationsForCurrentPage(){let e=(0,o.UN)(),r=e.getCurrentPage()?.childrenNodes??[],n=this.getLintableNodes(r);return await this.getViolationsForNodes(n)}async runDetectionOnMaybeSelectionOrPage(){let e;let r=(0,o.UN)(),n=this.getSelectedNodes();if(n.length>0){i.mHF?.setLintingTarget({guids:n.map(e=>e.guid),entirePage:!1});let r=this.getLintableNodes(n);e=await this.getViolationsForNodes(r),c.zl.set(u.fY,n.map(e=>e.guid))}else{i.mHF?.setLintingTarget({guids:[],entirePage:!0}),e=await this.getViolationsForCurrentPage();let n=r.getCurrentPage()?.guid;n&&c.zl.set(u.fY,[n])}c.zl.set(u.m7,e)}async updateViolationsForNodes(e,r){try{let n=c.zl.get(u.m7);if(r.length>0&&(n=this.getViolationsAfterRemoval(n,r),e=e.filter(e=>!r.includes(e))),0===e.length)return c.zl.set(u.m7,n),!0;let i=e.map(e=>(0,o.UN)().get(e)).filter(e=>!!e),a=this.getLintableNodes(i),s=await this.getViolationsForNodes(a),l=this.getMergedViolations(n,s,e);return c.zl.set(u.m7,l),!0}catch(e){return console.error("Error updating violations: ",e),!1}}getViolationsAfterRemoval(e,r){let n=new Map(e);return r.forEach(e=>{n.delete(e)}),n}getMergedViolations(e,r,n){let i=(0,o.UN)(),a=new Map(e);for(let[e,o]of(n.forEach(e=>{let r=i.get(e);r&&(0,m.eA)(r,e=>{a.delete(e.guid)})}),r))a.set(e,o);return a}setStatus(e){this.status=e,c.zl.set(g,e)}async getViolationsForNodes(e){if(this.isLinterRunning())throw Error("Linter is already running");this.setStatus(2);let r=new Map;try{for(let n of e)for(let e of this.getEnabledRules()){let{passedDetection:i,failedGuidToDetectionContext:a}=await e.detect(n);if(!i)for(let n of Object.keys(a)||[]){let i={ruleId:e.id,guid:n,detectionContext:a[n]},o=r.get(n)??new Map;o.set(i.ruleId,i),r.set(n,o)}}}catch(e){throw Error("Error detecting violations: "+e)}finally{this.setStatus(1)}return r}async getFix(e,r){if(this.isLinterRunning())throw Error("Linter is already running");this.setStatus(3);try{let n=e.ruleId,i=e.guid,a=this.ruleIdToEnabledRule[n];if(!a)throw Error("Rule not found for violation");let s=(0,o.UN)().get(i);if(!s)throw Error("Node not found for violation");let l=c.zl.get(u.VG),d=l.get(i)??new Map;if(d.has(n))return d.get(n);let m=await a.getFix(s,e.detectionContext,r[e.ruleId]);if(m?.valid&&(d.set(n,m),l.set(i,d),c.zl.set(u.VG,l)),!m)throw Error("Fix should not be undefined");return m}catch(e){throw Error("Error getting fix: "+e)}finally{this.setStatus(1)}}async applyFixContextToViolations(e,r){if(this.isLinterRunning())throw Error("Linter is already running");this.setStatus(4);let n=[],i=[];try{let s=(0,o.UN)(),l=[];for(let o of e){let e=this.ruleIdToEnabledRule[o.ruleId];if(!e){console.warn("Rule not found for violation",o);continue}let c=s.get(o.guid);if(!c){console.warn("Node not found for violation",o);continue}a.l7.user("design-linter-apply-fix-to-violations",()=>{l.push(new Promise(async(a,s)=>{try{await e.fix(c,r)?n.push(o):i.push(o),a()}catch(e){i.push(o),s();return}}))})}await Promise.allSettled(l)}catch(e){throw Error("Error fixing violations: "+e)}finally{this.setStatus(1)}return{fixedViolations:n,failedViolations:i}}async fixViolations(e){if(this.isLinterRunning())throw Error("Linter is already running");this.setStatus(4);let r=[],n=[];try{let i=(0,o.UN)(),s=[];for(let o of e){let e=this.ruleIdToEnabledRule[o.ruleId];if(!e){console.warn("Rule not found for violation",o);continue}let l=i.get(o.guid);if(!l){console.warn("Node not found for violation",o);continue}a.l7.user("design-linter-fix-violations",()=>{s.push(new Promise(async(i,a)=>{try{let a=c.zl.get(u.VG).get(o.guid),s=a?.get(o.ruleId);if(!s||!s.valid||!s.fixContext)throw Error("Valid fix not found in cache, button should be disabled");await e.fix(l,s.fixContext)?r.push(o):n.push(o),i()}catch(e){n.push(o),a();return}}))})}await Promise.allSettled(s)}catch(e){throw Error("Error fixing violations: "+e)}finally{this.setStatus(1)}return{fixedViolations:r,failedViolations:n}}async fixSingleViolation(e){let{fixedViolations:r}=await this.fixViolations([e]);return 1===r.length}isLinterRunning(){return[2,3,4].includes(this.status)}getRuleById(e){return this.ruleIdToEnabledRule[e]||null}};function E(){return(0,s.kc)().aip_flower_garden?(f.initialize(),f):null}},517333:(e,r,n)=>{n.d(r,{S8:()=>p,aw:()=>i.a,eD:()=>u,fU:()=>g,hX:()=>m,hl:()=>_,y3:()=>f});var i=n(723069),a=n(878227),o=n(563706),s=n(776621),l=n(820260),c=n(748553),d=n(323653);let u=function(){let e=window.__figmaDesktop;return delete window.__figmaDesktop,e?new c.d(e):null}(),m=function(){let e=window.__figmaDesktopGetPopoutAPI?.();return e?.lockAPI(),e?new l.E(e):null}(),p=window.bellFeedAPI?window.bellFeedAPI:null,h=u||m;function _(){return(0,d.x5)(u?.getInformationalVersion()).status===d.JN.DISABLED}function g(){if(u&&o.Ay.mac){let[e,r]=`${o.Ay.osversion}`.split(".");return 10>+e||10==+e&&12>+r}return!1}function f(){return!!u}h&&!navigator.userAgent.match(/figma-linux/)&&((0,a.v)({browser_name:"Figma Desktop",desktop_channel:h.beta?"beta":"stable",desktop_version:h.getInformationalVersion(),desktop_client_id:h.getClientID()}),(0,s.XM)("browser",{name:"Desktop",version:h.getInformationalVersion()}))},341834:(e,r,n)=>{n.d(r,{W2:()=>N,_A:()=>L,_p:()=>f,d8:()=>C,hW:()=>A,hu:()=>S,sS:()=>w,vn:()=>T});var i=n(737947),a=n(418956),o=n(716034),s=n(931828),l=n(279453),c=n(707465),d=n(6281),u=n(511617),m=n(517333),p=n(38329),h=n(966712),_=n(286640);let g=(()=>{if(_.Co){let e="initialPathName";if(_.Co[e])return _.Co[e];_.Co[e]=i.Ay.location.pathname}return i.Ay.location.pathname})();function f(){return!(0,u.GZ)()&&!m.eD&&!!(((0,h.tl)().editing_file||(0,h.tl)().link_password_input)&&E(y)||E(b))}function E(e){return e(g)&&e(i.Ay.location.pathname)}function y(e){return["/file/","/design/","/board/","/slides/"].some(r=>e.startsWith(r))}function b(e){let r=(0,c.YP)(e);return r.length>=4&&"files"===r[1]&&"feed-posts"===r[2]&&!!r[3]}let v="autoOpenInDesktopApp",I="openInDesktopAppMenuModal";function T(){return(0,h.kc)().desktop_use_db_auto_open_pref?a.zl.get(O):S()}function S(){return _.x4?_.x4[v]:void 0}function w(e){_.x4&&(_.x4[v]=e)}function A(e){w(e),(0,h.kc)().desktop_save_auto_open_pref&&(C(e),p.D.dispatch(s.b({user_changed_auto_open_pref:!0})))}function C(e){d.e.setPreferenceValue({key:"auto_open_in_desktop",value:e})}function N(){return _.x4?_.x4[I]:void 0}function L(e){_.x4&&(_.x4[I]=e)}let O=(0,o.eU)(e=>{let r=e(l.imP.Query({})),n=h.tl().user_data?.auto_open_in_desktop;return"loaded"===r.status&&r.data?.currentUser?.userPreferences?.status==="loaded"&&(n=r.data.currentUser.userPreferences.data?.preferences.auto_open_in_desktop),n})},323653:(e,r,n)=>{n.d(r,{JN:()=>c,x5:()=>d});var i=n(367035),a=n(181912),o=n(418956),s=n(716034);let l=[{minVersion:"116.10.0",date:"2024-01-01"},{minVersion:"116.16.0",date:"2024-09-01"},{minVersion:"116.17.0",date:"2024-09-01"},{minVersion:"116.18.0",date:"2024-09-18"},{minVersion:"124.0.0",date:"2024-10-25"},{minVersion:"124.1.0",date:"2024-11-20"},{minVersion:"124.2.0",date:"2024-12-18"},{minVersion:"124.3.0",date:"2025-01-25"},{minVersion:"124.4.0",date:"2025-02-21"},{minVersion:"124.5.0",date:"2025-04-03"},{minVersion:"124.6.0",date:"2025-04-22"},{minVersion:"124.7.0",date:"2025-05-21"}];var c=(e=>(e.SUPPORTED="SUPPORTED",e.DEPRECATED="DEPRECATED",e.DISABLED="DISABLED",e))(c||{});function d(e,r=(0,a.A)(),n=l){if(window.__figmaContent)return{status:"DISABLED"};if(null==e)return{status:"SUPPORTED"};if(!window.trustedTypes)return{status:"DISABLED"};if(1!==(0,i.Z)(e,"10.100.0")&&1===(0,i.Z)(e,"10.101.0"))return{status:"SUPPORTED"};for(let{minVersion:o,date:s}of n){if(1!==(0,i.Z)(e,o))continue;let n=(0,a.A)(s);if(n.isBefore(r))return{status:"DISABLED"};if(n.subtract(2,"month").isBefore(r))return{status:"DEPRECATED",date:n}}return{status:"SUPPORTED"}}let u=(0,o.E3)("last_dismissed_desktop_deprecation_banner","",{subscribeToChanges:!0});(0,s.eU)(e=>{let r=e(u);if(r){let e=(0,a.A)(r),n=(0,a.A)().subtract(1,"week");if(e.isAfter(n))return!0}return!1},(e,r,n)=>{r(u,n?(0,a.A)().toISOString():"")})},961747:(e,r,n)=>{n.d(r,{_:()=>i});let i=new class{constructor(){this.callbacks=[],this.matchMediaCallback=()=>{for(let e of this.callbacks)e(window.devicePixelRatio);this.updateMediaListener()},this.updateMediaListener()}updateMediaListener(){this.matchMedia&&this.matchMedia.removeListener(this.matchMediaCallback),this.matchMedia=window.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`),this.matchMedia.addListener(this.matchMediaCallback)}addListener(e){this.callbacks.push(e)}removeListener(e){for(let r=0;r<this.callbacks.length;r++)this.callbacks[r]===e&&(this.callbacks=this.callbacks.splice(r,1))}}},133537:(e,r,n)=>{n.d(r,{N0:()=>l,Ng:()=>E,bs:()=>m,fT:()=>y,iE:()=>g,jm:()=>f,nD:()=>h,qe:()=>_,xf:()=>s,zN:()=>p});var i=n(782118),a=n(966712),o=n(571854);function s(e){return/^[^<>\/\\:?*"|]*$/.test(e)&&/^[\u0000-\u007F]+$/.test(e)&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/i.test(e)}function l(e){let r=[];for(let n of e.split(/[;,\n]/g)){let e=n.match(/^.*<(.*)>$/);e&&(n=e[1]),(n=n.trim())&&r.push(n)}return r}let c=i.C,d={};c.forEach(e=>d[e]=!0);let u=["ge.com"];function m(e){if(e in d||u.includes(e))return null;for(let r of c)if(1===(0,o.f)(e,r))return r;return null}function p(e){return e.toLowerCase().split("@")[1]||null}function h(e){return!!e&&e.endsWith((0,a.tl)().figma_email_suffix)}function _(e){let r=p(e);return!!r&&r in d}function g(e){return"work"===(e.meta?e.meta.email_domain_type:void 0)}function f(e){return!!e&&s(e)&&(e.endsWith("@figma.com")||e.endsWith("@test.figma.com"))}function E(e){return!!e&&e.startsWith("synthetic-tester")&&e.endsWith("@test.figma.com")}function y(e){return"support-share@figma.com"===e}},835650:(e,r,n)=>{n.d(r,{Yw:()=>h,br:()=>u,f3:()=>g,ih:()=>d,jc:()=>m,l7:()=>c,qd:()=>_});var i=n(511617),a=n(737947),o=n(966712),s=n(179940),l=n(974986);function c(){return(0,i.GZ)()&&o.Ay().frame_context?.type==="embed"}function d(){return(0,i.GZ)()&&o.Ay().frame_context?.type==="integration"}function u(){try{return window.self.origin===window.parent.origin}catch(e){return!1}}function m(){return c()&&!!(0,o.kc)().embedkit_v2}function p(){return(0,s.v6)(a.Ay.location.search)}function h(){let e=p();return e.embed_host||e["embed-host"]}function _(){let e=p(),r=e.embed_host||e["embed-host"],n=e["node-id"],i="0"!==e["viewport-controls"];return{embedHost:r,hideUi:e.hide_ui,isCommunityViewer:!!e.community_viewer,isViewportControlsEnabled:i,nodeId:n,showFooter:"0"!==e.footer,showPageSelector:"0"!==e["page-selector"]&&!(n&&!i),theme:g(),isDevMode:"dev"===e.m||"dev"===e.mode}}function g(){if(m()){var e;return"system"===(e=(0,o.Ay)().embed_theme)?l.n.matches?"dark":"light":e}}},691273:(e,r,n)=>{n.d(r,{n:()=>a});var i=n(553716);function a(){(0,i.ED)("[hideEmbedViewerLoader]","Hiding embed viewer loader");try{let e=document.getElementById("embed-viewer-loading-page");e&&(e.classList.add("fadeOut"),setTimeout(()=>{e.classList.add("hidden")},250))}catch(e){(0,i.ED)("[hideEmbedViewerLoader]","Failed to hide embed viewer loader",e)}}},323762:(e,r,n)=>{n.d(r,{CV:()=>d,Js:()=>l,KJ:()=>c,LU:()=>u});var i=n(891721);n(966712);var a=n(302067);let o=RegExp("^<iframe[^>]+src\\s*=\\s*(?:(?:\"([^\">]+)\")|(?:'([^'>]+)')).*><\\/iframe>$"),s=RegExp("^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z0-9\\u00a1-\\uffff][a-z0-9\\u00a1-\\uffff_-]{0,62})?[a-z0-9\\u00a1-\\uffff]\\.)+(?:[a-z\\u00a1-\\uffff]{2,}\\.?))(?::\\d{2,5})?(?:[/?#]\\S*)?$","i");function l(e){let r=new URL(e).hostname;return 0===r.indexOf("www.")&&(r=r.slice(4)),r}function c(e){let r=function(e){if(!e.startsWith("<iframe"))return"";let r=i.sanitize(e,{ALLOWED_TAGS:["iframe"],ALLOWED_ATTR:["src"]}),n=o.exec(r);return n&&n.length>1?n[1]:""}(e),n=r||e,a=n.startsWith("http://")||n.startsWith("https://")?n:`https://${n}`;return s.test(a)?{isFromIFrame:!!r,url:a}:null}function d(e,r,n){let i=c(r.trim());return i?(e(a.MY({clipboardText:r,url:i.url,isTextIframe:i.isFromIFrame,entrypoint:n})),{valid:!0}):{valid:!1,reason:"Text was not a valid URL or IFrame"}}function u(e="",r){if(!e.startsWith("<meta charset='utf-8'><div><a href='https://app.asana.com"))return null;let n=i.sanitize(e,{ALLOWED_TAGS:["a"],ALLOWED_ATTR:["href"]}).split("<a"),a=/href="(https:\/\/app\.asana\.com[^"]*)"/,o=[];for(let e of n){let r=e.match(a);r&&r[1]&&o.push({url:r[1],isFromIFrame:!1})}return o.length!==r.split("\n").length?null:o}},654084:(e,r,n)=>{n.d(r,{AH:()=>p,cx:()=>l});var i=n(898028),a=n(966712);let{flush:o,hydrate:s,cx:l,merge:c,getRegisteredStyles:d,injectGlobal:u,keyframes:m,css:p,sheet:h,cache:_}=(0,i.A)({key:"emotion",nonce:(0,a.tl)().csp_nonce})},722138:(e,r,n)=>{n.d(r,{Dr:()=>s,K2:()=>u,Pe:()=>d,SX:()=>c,gB:()=>o,j4:()=>l,to:()=>a});var i=n(776250);function a(e,r,n,a,o,s){(0,i.sx)("resource_removed_from_favorites",{resource_id:e,selectedView:r,entrypoint:n,resource_type:a,editor_type:o,fileBrowserUnfavorite:s})}function o(e,r,n,a,o,s){(0,i.sx)("resource_added_to_favorites",{resourceId:e,editor_type:o,selectedView:r,resource_type:a,entrypoint:n,fileBrowserFavorite:s})}function s(e,r){(0,i.sx)("favorites_to_move_add_to_sidebar_click",{favorited_resource_id:e,dest_team_id:r})}function l(e){(0,i.sx)("favorites_to_move_unstar_all_click",{favorited_resource_id:e})}function c(e,r){(0,i.sx)("File Browser Sidebar Custom Section Created",{new_custom_section_name:r,new_custom_section_id:e})}function d(e){(0,i.sx)("File Browser Sidebar Custom Section Deleted",{new_custom_section_id:e})}function u(e,r){(0,i.sx)("File Browser Sidebar Custom Section Renamed",{new_custom_section_new_name:r,new_custom_section_id:e})}},693601:(e,r,n)=>{async function i(){return await Promise.all([n.e(3877),n.e(9336),n.e(1594)]).then(n.bind(n,89336))}async function a(e,r={includeIDs:!1}){return(await i()).serializeJSX(e,r)}async function o(e,r={includeIDs:!1}){let n=await i();return await n.deserializeJSX(e,r)}n.d(r,{LZ:()=>o,oy:()=>a})},992405:(e,r,n)=>{n.d(r,{jW:()=>i});let i=/^\/(?:file|design|board|slides)\/([0-9a-zA-Z]{22,128})(?:\/|$)/},513654:(e,r,n)=>{n.d(r,{AH:()=>g,_f:()=>f,jY:()=>_});var i=n(268853),a=n(922827),o=n(776250),s=n(344780),l=n(395900),c=n(367094),d=n(805286),u=n(624187),m=n(574705),p=n(776621),h=n(84917);function _(e){switch(e){case a.IPZ.SWT_CREATED:return"shapeWithTextCreated";case a.IPZ.SWT_EDITED:return"shapeWithTextEdited";case a.IPZ.SWT_DELETED:return"shapeWithTextDeleted";case a.IPZ.SWT_RESIZED:return"shapeWithTextResized";case a.IPZ.STICKY_EDITED:return"stickyEdited";case a.IPZ.STICKY_DELETED:return"stickyDeleted";case a.IPZ.STICKY_RESIZED:return"stickyResized"}}class g{constructor(e,r,n=1,i=!1,a=null,d=()=>{},u=!1,p=()=>{},_=()=>{}){this._analyticsEventName=e,this._processTimersForLogging=r,this._timerDepth=n,this._forwardToDatadog=i,this._tsmerMetrics=a,this._customLogMetricsCallbackHistogram=d,this._isRecording=!1,this._isCanceled=!1,this._onFrameStartCallback=()=>{},this._isFirstLogForTab=!0,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._numberOfRenderedCommentsWatermark=0,this._lastRecordedNumberOfRenderedComments=0,this._distributionByWorkName=new Map,this._lastKnownFrameMs=null,this._lastKnownFrameIndex=null,this._lastLogTime=null,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._fileKey=null,this._productType="unknown",this._deviceInfo=(0,m.N)(),this._activeNamedEvents=new Set,this._singleFrameNamedEvents=new Set,this._eventTrackers=new Map,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tileRenderersUsed=new Set,this._currentTileRenderer="",this.scheduleLogTwoMinutesFromNow=()=>{null===this._scheduledLogAtMs&&(this._scheduledLogAtMs=performance.now()+12e4)},this._onDocumentVisibilityChange=()=>{this.handleDocumentVisibilityChange(document.visibilityState)},this.updateLastKnownFrameMs=e=>{this._lastKnownFrameMs=e},this.startRecording=e=>{this._isRecording=!0,this._resetLogState(),this._lastKnownFrameMs=performance.now(),null===this._lastLogTime&&(this._lastLogTime=this._lastKnownFrameMs),e&&this.scheduleLogTwoMinutesFromNow()},this.stopRecordingAndLog=e=>{let r={};return this._distributionByWorkName.forEach((e,n)=>{r[n]=e.toPOJO()}),this._shouldLogToAnalytics()&&(this._logToAnalytics(e),this._resetLogState()),this._isRecording=!1,r},this.setFileInfo=(e,r)=>{(e!==this._fileKey||r!==this._productType)&&(this._fileKey=e,this._productType=r,this._resetLogState())},this._startRecordingNamedEvent=e=>{this._activeNamedEvents.add(e)},this.recordSingleFrameNamedEvent=e=>{this._singleFrameNamedEvents.add(e)},this._stopRecordingNamedEvent=e=>{this._activeNamedEvents.delete(e)},this.handleZoomStart=()=>{this._startRecordingNamedEvent("zoomActive")},this.handleZoomStop=()=>{this._stopRecordingNamedEvent("zoomActive")},this.handleScrollEvent=()=>{this.recordSingleFrameNamedEvent("scrollActive")},this.onNodeDragStart=()=>{this._startRecordingNamedEvent("nodeDragActive")},this.onNodeDragEnd=()=>{this._stopRecordingNamedEvent("nodeDragActive")},this.onTileRendererChanged=e=>{this._tileRenderersUsed.add(e),this._currentTileRenderer=e},this.onContextRestored=()=>{this._contextRestoredCount++},this.updateMaxRenderLayerCount=e=>{this._maxRenderLayerCount=Math.max(this._maxRenderLayerCount,e)},this.updateMaxRenderedTileBytesUsed=e=>{this._maxRenderedTileBytesUsed=Math.max(this._maxRenderedTileBytesUsed,e)},this.incrementNumAnimationsFromCpp=()=>{this._numAnimationsFromCpp++},this.incrementNumAnimationsFromTs=()=>{this._numAnimationsFromTs++},this.handleDocumentVisibilityChange=e=>{"hidden"===e&&this._shouldLogToAnalytics()&&(this._logToAnalytics("tab-hidden"),this._resetLogState()),"hidden"!==e&&this._resetLogState()},this._logToAnalytics=(e,r=!1)=>{let n={};n.schema=new l.UP().schema(),n.reason=e,n.isFirstLogAfterLoad=this._isFirstLogForTab,n.imagesLoading="loading"===this._imagesLoadingState,n.multiplayerUserCount=this._multiplayerUserCount,n.ongoingSpotlight=this._ongoingSpotlight,n.fileKey=this._fileKey,n.productType=this._productType,n.refreshRate=this.refreshRate(),n.commentsRenderCount=this._numberOfRenderedCommentsWatermark,n.contextRestoredCount=this._contextRestoredCount,n.maxRenderLayerCount=this._maxRenderLayerCount,n.maxRenderedTileBytesUsed=this._maxRenderedTileBytesUsed,(0,m.U)(this._deviceInfo,n),n.numAnimationsFromCpp=this._numAnimationsFromCpp,n.numAnimationsFromTs=this._numAnimationsFromTs,this._isFirstLogForTab=!1,null!==this._tsmerMetrics&&(n.editFrames=this._tsmerMetrics.editFrameDistribution().toLogParams(),n.editFramesWhileNotPanningOrZooming=this._tsmerMetrics.editFrameDistributionWhileNotPanningOrZooming().toLogParams(),n.remoteFrames=this._tsmerMetrics.remoteFrameDistribution().toLogParams(),n.remoteFramesWhileNotPanningOrZooming=this._tsmerMetrics.remoteFrameDistributionWhileNotPanningOrZooming().toLogParams()),this._customLogMetricsCallbackHistogram(n),n.tileRenderersUsed=JSON.stringify(Array.from(this._tileRenderersUsed)),this._tileRenderersUsed.clear(),this._tileRenderersUsed.add(this._currentTileRenderer),this._distributionByWorkName.forEach((e,r)=>{if(r in n)throw Error(`attempt to track performance for a work item with a reserved name: ${r}`);n[r]=e.toLogParams()}),n.totalBatchTime=performance.now()-this._lastLogTime,this._lastLogTime=performance.now(),r?setTimeout(()=>{this._sendLogRequest(n)},0):this._sendLogRequest(n)},this._sendLogRequest=e=>{let r={forwardToDatadog:this._forwardToDatadog,batchRequest:!0};(0,o.sx)(this._analyticsEventName,e,r)},this._processTimerTree=(e,r,n)=>{if(r>=this._timerDepth)return[];let i=[];for(let a of e){let e=[...n,a.name],o=e.join(".");if(!(o in this._lastRecordedHitCountByName)||!(o in this._lastRecordedDurationSinceLastFrame)){this._lastRecordedHitCountByName[o]=a.hitCount,this._lastRecordedDurationSinceLastFrame[o]=a.totalElapsedTime;continue}let s=a.hitCount-this._lastRecordedHitCountByName[o];if(0===s)continue;s>a.elapsedTimes.length&&console.warn(`Logged performance for ${o} too many times in one animation frame`);let l=a.totalElapsedTime-this._lastRecordedDurationSinceLastFrame[o];this._lastRecordedHitCountByName[o]=a.hitCount,this._lastRecordedDurationSinceLastFrame[o]=a.totalElapsedTime,i.push({path:e,elapsedTime:l});let c=r+1;c<this._timerDepth&&a.children.length>0&&(i=i.concat(this._processTimerTree(a.children,c,e)))}return i},this.onFrameStart=()=>{this._isRecording&&!this._isCanceled&&"ok"===c.y.getFullscreenCrashState()&&this._onFrameStartCallback()},this.setOnFrameStartCallback=e=>{this._onFrameStartCallback=e},this.onFrame=()=>{if("ok"!==c.y.getFullscreenCrashState())return"canceled";try{if(this._isCanceled)return"canceled";if("visible"!==document.visibilityState||!this._isRecording)return this._resetLogState(),"not-recording";let e=performance.now();if(null!=this._lastKnownFrameMs){let r=e-this._lastKnownFrameMs;if(r<6e4){for(let e of(this._getOrCreateDistribution("all").add(r),this._activeNamedEvents))this._getOrCreateDistribution(e).add(r);let e=performance.now(),n=[];for(let[e,i]of this._eventTrackers)i.didEventOccur()&&(n.push(e),this._getOrCreateDistribution(e).add(r));let i=performance.now()-e;for(let e of this._singleFrameNamedEvents)this._getOrCreateDistribution(e).add(r);null!==this._scheduledLogAtMs&&this._slowFrameTracker?.checkSlowFrameAndSample(r,n,i,this._fileKey,this._productType),this._singleFrameNamedEvents.clear()}}if(this._lastKnownFrameMs=e,s.rH.areTimersOpen())return this._isCanceled=!0,"canceled";let r=this._processTimerTree(s.rH.report(),0,[]);for(let e of this._processTimersForLogging(r))this._getOrCreateDistribution(e.path.join(".")).add(e.elapsedTime);return this._tsmerMetrics?.onFrame(),null!==this._scheduledLogAtMs&&performance.now()>this._scheduledLogAtMs&&(this._logToAnalytics("two-minutes-elapsed",!0),this._resetLogState()),"success"}finally{this._slowFrameTracker?.clearPerFrameMetricsAndIncrementFrameCounter()}},this.testOnlyGetAllDistribution=()=>this._getOrCreateDistribution("all"),this.pendingImagesChanged=e=>{if("loaded"===this._imagesLoadingState)return;let r=e>0?"loading":"loaded";r!==this._imagesLoadingState&&("loading"===this._imagesLoadingState&&(this._logToAnalytics("images-loaded"),this._resetLogState()),this._imagesLoadingState=r)},this._slowFrameTracker=new h.N(u,p,_),document.addEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.addEventListener("visibilitychange",this._onDocumentVisibilityChange)}uninstall(){document.removeEventListener("mousemove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("keydown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchdown",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchstart",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("touchmove",this.scheduleLogTwoMinutesFromNow,!0),document.removeEventListener("visibilitychange",this._onDocumentVisibilityChange)}hasScheduledLog(){return null!=this._scheduledLogAtMs}_shouldLogToAnalytics(){return this._isRecording&&null!=this._scheduledLogAtMs}productTypeForTests(){return this._productType}_resetLogState(){this._lastKnownFrameMs=null,this._imagesLoadingState=null,this._ongoingSpotlight=!1,this._multiplayerUserCount=1,this._distributionByWorkName=new Map,this._scheduledLogAtMs=null,this._lastRecordedHitCountByName={},this._lastRecordedDurationSinceLastFrame={},this._activeNamedEvents.clear(),this._singleFrameNamedEvents.clear(),this._numberOfRenderedCommentsWatermark=this._lastRecordedNumberOfRenderedComments,this._contextRestoredCount=0,this._maxRenderLayerCount=0,this._maxRenderedTileBytesUsed=0,this._numAnimationsFromCpp=0,this._numAnimationsFromTs=0,this._tsmerMetrics?.resetLogState()}getSlowFrameTracker(){return this._slowFrameTracker}refreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return"120FPS";if(r.min<32)return"60FPS";if(r.min<48)return"30FPS"}}return"UNKNOWN"}estimatedRefreshRate(){let e=this._distributionByWorkName.get("all");if(e){let r=e.getMode();if(r){if(r.min<9)return{frameLength:1e3/120,fps:120};if(r.min<32)return{frameLength:1e3/60,fps:60};r.min}}return{frameLength:1e3/30,fps:30}}tsmerMetrics(){return this._tsmerMetrics}_getOrCreateDistribution(e){let r=this._distributionByWorkName.get(e);return r||(r=new l.UP,this._distributionByWorkName.set(e,r)),r}addEventTracker(e,r){this._eventTrackers.set(e,r)}addTimeEvent(e,r){this._getOrCreateDistribution(e).add(r)}setNumberOfRenderedComments(e){this._lastRecordedNumberOfRenderedComments=e,this._numberOfRenderedCommentsWatermark=Math.max(e,this._numberOfRenderedCommentsWatermark)}setMultiplayerPerfInfo(e){let{multiplayerUserCount:r,ongoingSpotlight:n}=e;this._ongoingSpotlight=n,this._multiplayerUserCount=r}trackOtherUserCursorMoved(){d.R9?.setOtherUserMouseMovedCallback(()=>{this.recordSingleFrameNamedEvent("otherUserCursorMoved")})}}class f{constructor(e,r){this._viewerMaxTimerDepth=5,this._viewer=null,this._rafHandle=-1,this._addCustomViewerLogMetrics=e=>{!function(e,r){e&&(r.optimizationExposures=JSON.stringify(Object.fromEntries(e.getAndClearHistogramBatchFields())))}(this._viewer,e)},this._addCustomSlowFrameTrackerLogMetrics=(e,r)=>{!function(e,r,n){if(e){let i=a.AiE.getAndClearHistogramBatchFields(),o=new Map;i.forEach((e,r)=>{o.set(r,e>0)}),r[h.N.optimizationExposuresKey]=JSON.stringify(Object.fromEntries(new Map([...o,...e.getAndClearSlowFrameTrackerFields()]))),r[h.N.gpuMetricsCurrentFrameKey]=e.getViewerGpuMetricsCurrentFrameJSON().toString(),r[h.N.cpuTimerTreeCurrentFrameKey]=a.fZb.getCurrentFrameCpuTimerTreeJSON().toString(),n&&(r[h.N.gpuMetricsPreviousFrameKey]=e.getViewerGpuMetricsPreviousFrameJSON().toString(),r[h.N.cpuTimerTreePreviousFrameKey]=a.fZb.getPreviousFrameCpuTimerTreeJSON().toString())}}(this._viewer,e,r)},this._clearCustomSlowFrameTrackerLogMetrics=e=>{!function(e,r){e&&(a.AiE?.clearSlowFrameTrackerFields(),e.clearAllSlowFrameTrackerFields(),e.gpuMetricsNextFrame(r),a.fZb?.nextFrame(r))}(this._viewer,e)},this._frameDistributionTracker=new g("frame_distributions",function(e){return r=>{let n=[];for(let a of r){if(a.path.length>e||a.path.length<1){(0,p.$D)(i.e.CLIENT_PLATFORM,Error(`We should not go deeper than ${e} levels into the timer tree`));continue}let r=a.path[0];if("react-render"===r||r.startsWith("viewer:")){let e=a.path.map(e=>e.startsWith("viewer:")?e.substr(7):e).join(".");n.push({...a,path:[e]})}}return n}}(this._viewerMaxTimerDepth),this._viewerMaxTimerDepth,!0,null,this._addCustomViewerLogMetrics,!0,this._addCustomSlowFrameTrackerLogMetrics,this._clearCustomSlowFrameTrackerLogMetrics),this._renderingStateTimer=null,this._renderingActive=!1,this._viewerLoadSubscription=null,this._handleRenderingStart=()=>{this._renderingActive=!0,this._renderingStateTimer=new l.M4,this._renderingStateTimer.start()},this._handleRenderingStop=()=>{this._renderingStateTimer=null,this._renderingActive=!1},this._handleInitialDocumentLoad=()=>{this._frameDistributionTracker.startRecording(!0)},this._handleDidRebuildAfterReconnect=()=>{this._frameDistributionTracker.startRecording(!1)},this._handleWillRebuildAfterReconnect=()=>{this._frameDistributionTracker.stopRecordingAndLog("about-to-rebuild-scene")},this.onFrame=()=>{"ok"===c.y.getFullscreenCrashState()&&(this._frameDistributionTracker.onFrameStart(),this._recordRenderingTimeEvent(),this._rafHandle=requestAnimationFrame(this.onFrame),"canceled"===this._frameDistributionTracker.onFrame()&&cancelAnimationFrame(this._rafHandle))},this._rafHandle=requestAnimationFrame(this.onFrame),this._frameDistributionTracker.setFileInfo(e,r)}uninstall(){this._frameDistributionTracker.uninstall(),cancelAnimationFrame(this._rafHandle),this.setViewer(null)}getFrameDistributionTrackerForTest(){return this._frameDistributionTracker}setViewer(e){null!=this._viewer&&(this._viewerLoadSubscription&&(this._viewerLoadSubscription(),this._viewerLoadSubscription=null),this._viewer.off("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.off("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.off("renderingStart",this._handleRenderingStart),this._viewer.off("renderingStop",this._handleRenderingStop),this._viewer.off("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.off("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.off("scrollEvent",this._frameDistributionTracker.handleScrollEvent)),this._frameDistributionTracker.stopRecordingAndLog("changing-viewer"),this._viewer=e,null!=this._viewer&&(this._viewerLoadSubscription=(0,u.zM)(this._handleInitialDocumentLoad),this._viewer.on("sceneWillRebuildAfterReconnecting",this._handleWillRebuildAfterReconnect),this._viewer.on("sceneDidRebuildAfterReconnecting",this._handleDidRebuildAfterReconnect),this._viewer.on("renderingStart",this._handleRenderingStart),this._viewer.on("renderingStop",this._handleRenderingStop),this._viewer.on("zoomStart",this._frameDistributionTracker.handleZoomStart),this._viewer.on("zoomStop",this._frameDistributionTracker.handleZoomStop),this._viewer.on("scrollEvent",this._frameDistributionTracker.handleScrollEvent))}_recordRenderingTimeEvent(){this._renderingActive&&(this._renderingStateTimer&&6e4>this._renderingStateTimer.getElapsedTime()&&this._frameDistributionTracker.addTimeEvent("rendererActive",this._renderingStateTimer.getElapsedTime()),this._renderingStateTimer=new l.M4,this._renderingStateTimer.start())}setInternalFrameDistributionTrackerForTest(e){this._frameDistributionTracker=e}}},697170:(e,r,n)=>{n.d(r,{Bs:()=>R,DT:()=>w,Rm:()=>O,W8:()=>P,_B:()=>C,xI:()=>L});var i=n(776250),a=n(511617),o=n(38329),s=n(737947),l=n(286640),c=n(27087),d=n(761870),u=n(654750),m=n(195847),p=n(21452),h=n(690598),_=n(6108),g=n(938571),f=n(881388),E=n(939863),y=n(662275),b=n(479296),v=n(133537),I=n(966712),T=n(553716);let S="google_sso_temp";var w=(e=>(e.COMMUNITY="google_one_tap_logged_out_community",e.LOGGED_OUT_FILE="google_one_tap_logged_out_file",e.PROTOTYPE="google_one_tap_prototype",e))(w||{}),A=(e=>(e.LOGGED_OUT_FOOTER="logged_out_footer",e.LOGGED_OUT_FOOTER_CONTINUE_WITH_GOOGLE="logged_out_footer_continue_with_google",e.FIGJAM_TRY_FOOTER_BANNER="figjam_try_footer_banner",e.FIGJAM_TRY_FOOTER_BANNER_CONTINUE_WITH_GOOGLE="figjam_try_footer_banner_continue_with_google",e))(A||{});let C="/api/session/google_auth/signin",N=(0,b.D)(()=>new Promise((e,r)=>{document.cookie=S+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let n=(0,a.FJ)("/start_google_sso","","width=600,height=600");if(null===n){(0,i.sx)("GoogleSSOError",{step:"window-not-found"}),r(Error((0,E.t)("auth.google-sso.unable-to-get-info")));return}window.setTimeout(function a(){let o=(0,l.OS)(document.cookie,S);if(null!==o){let n=JSON.parse(o);document.cookie=S+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",n.token?e(n):((0,i.sx)("GoogleSSOError",{step:"token-not-found"}),r(Error((0,E.t)("auth.google-sso.unable-to-get-info"))))}else n.closed?((0,i.sx)("GoogleSSOError",{step:"cookie-not-found"}),r(Error((0,E.t)("auth.google-sso.unable-to-get-info")))):window.setTimeout(a,250)},250)}));async function L(e,r){let n=await N();return await P(n,{dispatch:e,apiUrl:"/api/session/google_auth/signin_or_signup",origin:r})}async function O({dispatch:e,origin:r,redirectUrl:n}){let i=await N();return n&&e(d.WY({redirectUrl:n})),await P(i,{dispatch:e,apiUrl:C,origin:r})}function R(e,r,n){(0,p.g)("google_sso_login_redirect_attempt",n,{fromMsTeams:r}),document.cookie=S+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";let i=JSON.stringify({apiUrl:C,redirectPath:e});document.cookie=`${S}=${encodeURIComponent(i)}; path=/`;let a=r?s.Ay.unsafeRedirectMsTeams:s.Ay.redirect,o="/start_google_sso?should_use_redirect_instead=1";r&&(o+="&from_ms_teams=1"),a(o)}async function P(e,{dispatch:r,apiUrl:n,origin:a}){let s=!!a&&Object.values(w).includes(a);await (0,h.sT)({googleUserInfo:e},`google-${s?"one-tap":"sso"}`);try{let{data:o}=await function(e,r){let n={name:r.name,token:r.token,token_type:r.tokenType,google_fed_cm_enabled:(0,I.kc)().google_federated_cm??!1};return c.Ay.post(e,n)}(n,e);return r(f.s.flash((0,E.t)("auth.sign-in-success",{email:o.meta.email}))),o.meta&&o.meta.email_domain_type?((0,i.sx)("Sign Up (GTM)",{isWorkEmail:(0,v.iE)(o)}),await (0,g.p)("sign_up_google_sso")):((0,i.sx)("google_sso",{eventSubtype:"google_sso_success_signin",user_id:o?.meta?.id,origin:a}),await (0,g.p)("sign_in_google_sso")),{type:"login",user:o.meta}}catch({data:c}){let n=(0,E.Jv)({data:c},c?.message),i=(0,E.t)("auth.google-sso.unable-to-auth"),l=o.D?.getState().auth.redirectUrl||"";if(s&&(0,p.g)("google_one_tap_login_error",a,{error:n}),n===(0,E.t)("auth.error.account-not-found"))return function({userInfo:e,origin:r,dispatch:n,redirectUrl:i}){var a;null!=r&&(0,u.MZ)()?(n(d.Ts({origin:r,formState:m.qB.SIGN_UP,redirectUrl:i})),n(y.to({type:_.a,data:{}}))):o.D?.getState()?.modalShown?.type!==_.a&&(0,u.MZ)()&&(0,T.xi)("authenticate_google_user","Skipped launching auth modal before arkose verification",{auth_origin:r},{reportAsSentryError:!0,modeEventName:"google_sso_skipped_launching_auth_modal"}),a={...e,origin:r},n(d.OZ({googleIdToken:a.token})),n(d.fX({googleTokenType:a.tokenType})),n(d.m9({value:a.name})),a.origin&&n(d.dl({authOrigin:a.origin})),n(d.E({formState:m.qB.VERIFY_HUMAN,prevState:m.qB.SIGN_UP,postVerificationAction:d.Sr()}))}({userInfo:e,origin:a,dispatch:r,redirectUrl:l}),{type:"signup"};throw r(f.s.error(n||i,15e3)),Error(n||(0,E.t)("auth.google-sso.unable-to-auth"))}}},737433:(e,r,n)=>{n.d(r,{H:()=>s});var i=n(723069),a=n(922827),o=n(517333);let s={trigger(e){if(o.eD)switch(e){case a.JA.GENERIC:o.eD.triggerHaptic(i.i.GENERIC,1,0);break;case a.JA.LEVEL:o.eD.triggerHaptic(i.i.LEVEL,1,0);break;case a.JA.SNAP:o.eD.triggerHaptic(i.i.SNAP,1,0);break;default:throw Error(e)}}}},173292:(e,r,n)=>{n.d(r,{o:()=>a,p:()=>o});var i=n(411855);function a(){let e=new Set;return{subscribe:r=>(e.add(r),()=>{e.delete(r)}),emit(r){for(let n of e)n(r)}}}function o(e,r){(0,i.useEffect)(()=>e.subscribe(r),[r,e])}},939683:(e,r,n)=>{n.d(r,{NV:()=>u,U:()=>l,am:()=>d,hC:()=>c});var i=n(411855),a=n(188507),o=n(126049),s=n(988022);function l(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState();(0,s.ds)(r,a.openFile?.key,a,n,i)},[e])}function c(){let e=(0,a.Pj)();return i.useCallback((r,n)=>{let i=e.getState();(0,s.GS)(r,i.openFile?.key??"",i,n??{})},[e])}function d(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState(),o=a.openFile?.key,l=a.user&&a.user.id;(0,s.ds)(r,o,a,{userId:l,...n},i)},[e])}function u(e){let r=function(){let e=(0,a.Pj)();return i.useCallback((r,n,i)=>{let a=e.getState(),o=a.currentUserOrgId??"";(0,s.Fr)(r,o,a,{...n},i)},[e])}();return(0,o.A)(r,e,{leading:!0,trailing:!1})}},560945:(e,r,n)=>{n.d(r,{cU:()=>a,wY:()=>o});var i=n(411855);let a={width:0,height:0};function o(e,r){let[n,a]=(0,i.useState)(null);return(0,i.useLayoutEffect)(()=>{if(!e||!e.current)return;let i=new ResizeObserver(i=>{for(let o of i)if(e.current===o.target){let e=o.contentRect.width,i=o.contentRect.height;if(n&&n.width===e&&n.height===i)continue;let s={width:o.contentRect.width,height:o.contentRect.height};a(s),r&&r(s)}});return i.observe(e.current),()=>i.disconnect()},[e,r,n]),n}},963490:(e,r,n)=>{n(411855),n(358145)},910522:(e,r,n)=>{n.d(r,{R:()=>a});var i=n(411855);function a(e="minute"){let[r,n]=(0,i.useState)(new Date);return(0,i.useEffect)(()=>{let r=setInterval(()=>{n(new Date)},function(e){if("number"==typeof e)return e;switch(e){case"second":return 1e3;case"minute":return 6e4;case"hour":return 36e5;case"day":return 864e5}}(e));return()=>clearInterval(r)},[e]),r}},602126:(e,r,n)=>{n.d(r,{ww:()=>a});var i=n(411855);function a(e,r){var n,a;return n="mousedown",a=[e.current],i.useEffect(()=>{function e(e){a.some(r=>r&&r.contains(e.target))||r(e)}return document.addEventListener(n,e),()=>{document.removeEventListener(n,e)}},[n,r,a]),e}},988652:(e,r,n)=>{n.d(r,{M:()=>a});var i=n(411855);function a(){let e=i.useRef(null),r=function(e){let[r,n]=i.useState(!1);return i.useEffect(()=>{let r=()=>n(!0),i=()=>n(!1),a=e.current;if(a)return a.addEventListener("mouseover",r),a.addEventListener("mouseleave",i),()=>{a.removeEventListener("mouseover",r),a.removeEventListener("mouseleave",i)}},[e.current,n]),r}(e);return[i.useCallback(r=>{e.current=r},[]),r,e]}},22332:(e,r,n)=>{n(411855)},358145:(e,r,n)=>{n.d(r,{$J:()=>s,ZC:()=>a,qd:()=>o});var i=n(411855);function a(e){let r=(0,i.useRef)();return(0,i.useEffect)(()=>{r.current=e},[e]),r.current}function o(e){let r=(0,i.useRef)({value:e,prev:void 0}),n=r.current.value;return e!==n&&(r.current={value:e,prev:n}),r.current.prev}function s(e){let[r,n]=(0,i.useState)(void 0);return(0,i.useEffect)(()=>{n(e)},[e]),r}},436408:(e,r,n)=>{n(411855)},62935:(e,r,n)=>{n.d(r,{M:()=>a});var i=n(411855);function a(e){let r=(0,i.useRef)(null);return(0,i.useImperativeHandle)(e,()=>r.current),r}},404843:(e,r,n)=>{n.d(r,{x:()=>i});let i=(0,n(716034).eU)(!1)},220331:(e,r,n)=>{n.d(r,{R_:()=>A,w5:()=>w});var i=n(88823),a=n.n(i),o=n(511617),s=n(737947),l=n(966712),c=n(187623),d=n(27087),u=n(743905),m=n(662275),p=n(988022),h=n(779709),_=n(349719),g=n(347935),f=n(929594),E=n(517333),y=n(563706),b=!1;let v=null,I=null,T=null,S=["mousemove","mousedown","keydown","touchstart","touchmove","wheel"];function w(){return b}function A(e){let{user_data:r,idle_timeout_duration_in_secs:n,idle_timeout_last_active_at:i,idle_timeout_org_name:w,frame_context:A}=(0,l.Ay)();r&&n&&i&&w&&!b&&function(e,r,n,i,w,A){if((0,y.Q1)()||(0,y.Ji)()||y.Ay.isIpadNative)return;let C=`last-active-at-${e.email}`,N="idle_timeout_last_active_at_change",L=(0,o.GZ)(),O=L&&"embed"===w,R=L&&"integration"===w,P=.05*r,D=Math.min(60,r/2),k=new c.P,M=e=>{localStorage.setItem(C,e.toString()),k.sendToAllTabs(N)};M(n);let F=()=>{document.hasFocus()&&d.Ay.post(`/api/user/${e.id}/idle_timeout_last_active_at`,{is_embed:L.toString()&&!h.z4.getIsExtension()}).then(e=>{let r=e.data.meta.idle_timeout_last_active_at;r&&M(r)}).catch(e=>{401===e.status&&U()})},x=()=>!!A&&A.getState().modalShown?.type===f.xn,U=()=>{if(A&&A?.getState().authedUsers.orderedIds.length===1&&((0,p.Pg)(),u.U2.clear()),O)s.Ay.reload("idleSessionTimeout-embed");else if(R){let{pathname:e,search:r}=s.Ay.location,n=`${e}${r}&integration_host=msft`;window.location.replace(n)}else h.z4.getIsExtension()&&(0,l.kc)().dt_dev_mode_vscode_idle_timeout?(0,_.$g)():s.Ay.redirect(`/idle_timeout?fuid=${e.id}&redirect_uri=${encodeURIComponent(window.location.href)}`)},B=()=>Math.floor(Date.now()/1e3);T&&S.forEach(e=>{document.removeEventListener(e,T)}),T=a()(F,1e3*P,{trailing:!1,leading:!0}),S.forEach(e=>{document.addEventListener(e,T)});let V=()=>{I&&clearTimeout(I),v&&clearTimeout(v),!x()||document.hasFocus()||E.eD||A?.dispatch(m.ES(f.eN));let n=parseInt(localStorage.getItem(C))+r-B();v=setTimeout(()=>{g.N.getIdleTimeoutPrecheck({fuid:e.id}).then(e=>{let n=e.data.meta.idle_timeout_last_active_at;n&&n+r>=B()?M(n):U()}).catch(e=>{U()})},1e3*n),O||(I=setTimeout(()=>{x()||A?.dispatch(m.to({type:f.eN,data:{orgName:i,duration:r,onHide:()=>{F()}}}))},1e3*(n-D)))};k.register(N,()=>{V()}),V(),b=!0}(r,n,i,w,A?.type,e)}},300785:(e,r,n)=>{n.d(r,{Rg:()=>s,YA:()=>c,hM:()=>d,qr:()=>l});var i=n(974880),a=n(939863),o=(e=>(e.MINUTES="minutes",e.HOURS="hours",e.DAYS="days",e))(o||{});let s="on-idle-timeout-logged-in-ipc-key";function l(e){return e<3600?[e/60,"minutes"]:e<86400?[e/3600,"hours"]:e%86400==0?[e/86400,"days"]:[e/3600,"hours"]}function c(e,r){let n={duration:r};switch(e){case"minutes":return(0,a.tx)("settings_tab.idle_session_timeout.time.minutes",n);case"hours":return(0,a.tx)("settings_tab.idle_session_timeout.time.hours",n);case"days":return(0,a.tx)("settings_tab.idle_session_timeout.time.days",n)}}function d(e){return!!(0,i.Et)(e)&&e<43200}},966712:(e,r,n)=>{n.d(r,{AU:()=>M,Ay:()=>F,CZ:()=>R,DC:()=>I,Hk:()=>b,IX:()=>w,KI:()=>g,Lz:()=>x,O_:()=>C,Uv:()=>k,W4:()=>O,YG:()=>A,b5:()=>N,bg:()=>D,ck:()=>P,gq:()=>d,kc:()=>_,mm:()=>B,sL:()=>L,sj:()=>v,tl:()=>T,u3:()=>f,u4:()=>y,w0:()=>E});var i,a=n(773595),o=n(443259),s=n(479296),l=n(402958),c=n(179940);let d={disable_personal:!0,teams:[],team_users:[],roles:[],orgs:[],org_drafts_owners:[],user_favorite_fonts:[],is_free_user:!0,is_starter_user:!0},u=(()=>{let e={...JSON.parse(JSON.stringify(T().feature_flags||{}))};if(e.sites=e.sites&&!1,e.dakota=e.dakota&&!1,e.cooper=e.cooper&&!1,e.campfire=e.campfire&&!0,Object.freeze(e),l.L){let r=new Set;return new Proxy(e,{get(e,n){let i=e[n];return void 0===i||r.has(n)||(l.L.addFeatureFlagEvaluation(n,i),r.add(n)),i}})}return e})(),m=(()=>{let e=JSON.parse(JSON.stringify(T().feature_flag_rules||{}));return e.hash_function=T().feature_flags_hash_function||"md5",e})(),p=(()=>{let e=JSON.parse(JSON.stringify(T().launchdarkly_client_flags||{}));return Object.freeze(e),e})(),{zoom_client_user_agent:h}=T();h&&function(e,r){if(e.navigator.userAgent!==r){let n={get:function(){return r}};try{Object.defineProperty(e.navigator,"userAgent",n)}catch(r){e.navigator=Object.create(navigator,{userAgent:n})}}}(window,h);let _=(0,s.D)(()=>u),g=(0,s.D)(()=>m),f={};function E(){return p}function y(e,r,n){return _()[e]?r:n}(i||(i={})).withFeatureFlag=function(e,r){if(_()[e])return r;let n=e=>null;return n.displayName="",n};let b=e=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,editing_file:e}},v=()=>{self.INITIAL_OPTIONS={...self.INITIAL_OPTIONS,payment_flow_data:null}};function I(){return T().payment_flow_data}function T(){return window.INITIAL_OPTIONS||{}}function S(e){Object.defineProperty(T(),e,{writable:!1,configurable:!1})}function w(){return"local"===T().cluster_name}function A(){return"staging"===T().cluster_name}function C(){return"prod"===T().cluster_name}function N(){return w()||A()||T().cluster_name?.startsWith("devenv")||"gov-staging"===T().cluster_name}function L(){let e=T().cluster_name;return e?"gov"===e:"figma-gov.com"===window.location.hostname}function O(){return L()?"support-figgov@figma.com":"support@figma.com"}function R(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),`https://${L()?"static.figma-gov.com":"static.figma.com"}/${e}`}function P(e){return e||(e=""),e.startsWith("/")&&(e=e.slice(1)),R(`uploads/${e}`)}function D(){return T().consent_region}function k(){return function(e){switch(e){case"staging":return e;case"prod":return"production";case"gov":return"gov-prod";case"gov-staging":return"gov-staging";default:return"development"}}(T().cluster_name||"")}function M(){return T().editing_file?.editor_type??void 0}S("jubilee"),S("campfire_model_enabled");let F=T,x="https://fakepath.figma.com",U=!1;function B(){let e=[(0,o.$e)(),(0,o.bQ)()];for(let r=0;r<e.length;r++){let n=e[r];if(n){let e=(0,c.xL)(n);if(e.locale)return!function(e){let r=e.locale,n=!!e.persistLocale;if(!r||!n)return;let i=T().user_data;if(!i)return;let{id:o,locale:s}=i;a.Yv.includes(r)&&s!==r&&(U||(U=!0,fetch("/api/user",{method:"PUT",body:JSON.stringify({id:o,locale:r}),headers:{"Content-Type":"application/json"}})))}(e),(0,o.$W)(e.locale)}}let r=(0,o.Np)();if(r){let e=r.split("/")[1];if(e&&a.Yv.includes(e))return(0,o.$W)(e)}let{user_data:n}=T();return n?.locale&&n?.locale!==a.MY?[n?.locale,a.MY]:[a.MY]}},259829:(e,r,n)=>{n.d(r,{SI:()=>m,fF:()=>u});var i=n(966712),a=n(563706),o=n(198181),s=n(270499),l=n(898148);let c=window.location.pathname;function d(e){return!function({isDesign:e,isDesignPrototypeViewer:r,isDevMode:n,isEmbed:a,isEmbedKitV2Enabled:s,isFigjam:l,isFigjamUi3LabEnabled:c,isFigjamMobileDevicesEnabled:d,isMobileDevice:u,isSites:m,isSlides:p,isCooper:h,isLitmus:_,isIllustration:g,isUI3ForceDevOnly:f,isUi3LabEnabled:E,isVSCodeExtension:y,isLoggedOutDesignExp:b}){return!!f||!!b||!!p||!!m||!!h||!!_||!!g||(y?!!(0,i.kc)().dt_vscode_ready_for_dev:!!a&&!!s||(l?!!c&&(!u||d):(!!e||!!n)&&!r&&!a&&!!(0,o.M)()&&E))}(e)?"ui2":"ui3"}function u(){let e=(0,i.AU)();return d({isDesign:"design"===e,isDesignPrototypeViewer:c.startsWith("/proto/"),isDevMode:"design"===e,isEmbed:i.Ay().frame_context?.type==="embed",isEmbedKitV2Enabled:_("embedkit_v2"),isFigjam:"whiteboard"===e,isFigjamUi3LabEnabled:(0,s.Y)({trueOverrideUserFlag:h("unified_index_v3_figjam_toggle_override_true"),falseOverrideUserFlag:h("unified_index_v3_figjam_toggle_override_false"),canOverride:(0,l.Q4)(),defaultValue:!0}),isFigjamMobileDevicesEnabled:_("unified_index_v3_figjam_mobile_device"),isMobileDevice:a.Xb,isSites:"sites"===e,isSlides:"slides"===e,isCooper:!1,isLitmus:!1,isIllustration:!1,isUI3ForceDevOnly:(0,s.Y)({trueOverrideUserFlag:h("force_ui3_dev_only_override_true"),falseOverrideUserFlag:h("force_ui3_dev_only_override_false"),canOverride:"prod"!==(0,i.Ay)().cluster_name,defaultValue:!1}),isUi3LabEnabled:p(),isVSCodeExtension:!1,isLoggedOutDesignExp:!1})}function m(){return d({isDesign:!0,isUi3LabEnabled:p(),isDesignPrototypeViewer:!1,isDevMode:!1,isEmbed:!1,isEmbedKitV2Enabled:_("embedkit_v2"),isFigjam:!1,isFigjamUi3LabEnabled:!1,isFigjamMobileDevicesEnabled:!1,isMobileDevice:!1,isSites:!1,isSlides:!1,isCooper:!1,isLitmus:!1,isIllustration:!1,isUI3ForceDevOnly:!1,isVSCodeExtension:!1,isLoggedOutDesignExp:!1})}function p(){return(0,s.Y)({trueOverrideUserFlag:h(l.pU),falseOverrideUserFlag:h(l.EM),canOverride:!0,defaultValue:(0,l.Mx)()})}function h(e){for(let r of i.Ay()?.user_flags||[])if(r.name===e)return!0;return!1}function _(e){return!0===(0,i.kc)()[e]}},599445:(e,r,n)=>{function i(){return!1}n.d(r,{Is:()=>function e(r){let n=r.recordingKey();if(n){if(r.__registeredRecordingKey)n!==r.__registeredRecordingKey&&(c(r),e(r));else for(let e in r.__registeredRecordingKey=n,r.__playbackHandlers)o(l(n,e),r.__playbackHandlers[e])}},YJ:()=>u,aH:()=>d,k3:()=>i,nL:()=>c});let a=Object.create(null);function o(e,r){if(-1!==(e in a?a[e].indexOf(r):-1))throw Error(`Tried to register already registered playback handler for ${e}`);a[e]||(a[e]=[]),a[e].push(r)}function s(e,r){let n=e in a?a[e].indexOf(r):-1;if(-1===n)throw Error(`Tried to unregister unknown playback handler for ${e}`);a[e].splice(n,1),0===a[e].length&&delete a[e]}function l(e,r){return`${e}.${r}`}function c(e){if(e.__registeredRecordingKey){for(let r in e.__playbackHandlers)s(l(e.__registeredRecordingKey,r),e.__playbackHandlers[r]);e.__registeredRecordingKey=null}}let d="SKIP_RECORDING";function u(e,r,n,i={}){i.record||(e=>e);let a=i.playback||(e=>e),c=e.__playbackHandlers||(e.__playbackHandlers=Object.create(null)),d=c[r];if(c[r]=e=>n(a(e)),d&&e.__registeredRecordingKey){let n=l(e.__registeredRecordingKey,r);s(n,d),o(n,c[r])}return function(e){0===n.length&&(e=void 0),n(e)}}},588169:(e,r,n)=>{n.d(r,{Cg:()=>E,Ug:()=>p,dZ:()=>_,rd:()=>f,v7:()=>y,xt:()=>b});var i=n(922827),a=n(286640);n(939863);var o=n(22774),s=n(988022),l=n(356390),c=n(38329),d=n(187623),u=n(27087);let m="keyboardLayoutPreference",p="keyboardLayoutPreference",h=new Map(Object.entries(i.aTn).map(([e,r])=>[e,r])),_=new Map(Object.entries(i.aTn).map(([e,r])=>[r,e]));function g(e){let[r]=e.split(":"),n=h.get(r);return r&&n?{layout:n}:{layout:i.aTn.UNKNOWN}}function f({layout:e}){if(!a.x4)return;let r=i.aTn[e];a.x4.setItem(m,r),new d.P().sendToOtherTabs(p,r),function(e){try{let r=c.D.getState();(0,s.uE)("keyboard_layout_preference",r,{layout:i.aTn[e.layout],eventName:e.eventName,detectedLayout:e.detectedLayout,detectedLayoutStr:e.detectedLayoutStr})}catch(e){}}({layout:e,eventName:"user_manual_change"}),i.glU.reloadShortcuts(e),u.Ay.put("/api/user",{keyboard_preference:i.aTn[e],keyboard_preference_method:"manual"})}function E(e){if(!a.x4)return;a.x4.setItem(m,e);let{layout:r}=g(e);l.Y5&&l.Y5.isReady()&&i.glU.reloadShortcuts(r)}function y(){return function(){if(a.x4){let e=a.x4.getItem(m);if(null!=e)return g(e)}if(!c.D)return{layout:i.aTn.UNKNOWN};let e=c.D.getState().user?.keyboard_layout,r=h.get(e);if(!e||!r)return{layout:i.aTn.UNKNOWN};let n=e?r:i.aTn.UNKNOWN;return E(i.aTn[n]),{layout:n}}().layout}function b(){return 0===Object.keys(i.aTn).length?[]:[{name:"keyboard-layout-menu-option",callback:(e,r,n)=>{n(o.FU({tab:"layout"})),l.Y5.triggerAction("toggle-keyboard-shortcuts")}}]}},285468:(e,r,n)=>{n.d(r,{C:()=>M});var i=n(411855),a=n(268853),o=n(444751),s=n(118653),l=n(813746),c=n(320174),d=n(919911),u=n(399260),m=n(300638),p=n(171931),h=n(822094),_=n(541535),g=n(849271),f=n(239251),E=n(376962),y=n(908838),b=n(226661),v=n(736923),I=n(922070),T=n(776621),S=n(638933),w=n(496734),A=n(405196),C=n(453301),N=n(184276),L=n(650625),O=n(88537),R=n(690864);let P='{"root":{"children":[{"children":[],"direction":null,"format":"","indent":0,"type":"paragraph","version":1}],"direction":null,"format":"","indent":0,"type":"root","version":1}}',D=[I.Ey,c.v5,c.YW,l.Db,o.iK,v.jL];function k({value:e,valueFormat:r,onSave:n,themeOverride:k,lexicalContentClassName:M,namespace:F,placeholder:x,innerRef:U,plugins:B=[],hasToolbar:V=!1,isEditable:G=!0}){let H={link:G?R.nf:R.Jj,list:{listitem:R.Aw,ol:R.cg,ul:R.e6},text:{bold:R.ZS,italic:R.kQ,strikethrough:R.Hn,code:R.ti},paragraph:R.FY,heading:{h1:R.R_,h2:R.R_},code:R.DV,...k},K=(0,i.useMemo)(()=>{if("lexical"===r||!e)return P;let n=(0,s.D)({nodes:[I.Ey,c.v5,c.YW,l.Db,o.iK,v.jL],onError:r=>{console.error(r),(0,T.$D)(a.e.EXTENSIBILITY,r,{extra:{htmlString:e}})}});return(0,w.D)(e,n,"json")},[r,e]),[W,$]=(0,i.useState)(!1),[Y,z]=(0,i.useState)(null);return i.createElement(m.n,{initialConfig:{namespace:F,onError(n){console.error(n),(0,T.$D)(a.e.EXTENSIBILITY,n,{extra:{namespace:F,editorInput:"lexical"===r?e||P:K,valueFormat:r}})},theme:H,nodes:D,editorState:"lexical"===r?e||P:K,editable:G}},i.createElement("div",{ref:e=>{null!==e&&z(e)}},i.createElement(b.$,{contentEditable:i.createElement(p.a,{className:M,ref:U}),placeholder:x,ErrorBoundary:h.A}),V&&i.createElement(O.A,{setIsLinkEditMode:$}),G&&Y&&i.createElement(N.A,{anchorElem:Y,isLinkEditMode:W,setIsLinkEditMode:$})),i.createElement(_.G,null),i.createElement(f.Q,null),i.createElement(E.E,{transformers:[d.mK,d.NB,d.eA,d.gb,d.d7,d.Pi,d.WY,d.Eg,d.gW,d.Sq,d.TB,d.Up]}),"lexical"===r&&i.createElement(A.D,{value:e}),!G&&"html"===r&&i.createElement(w._,{htmlString:e}),n&&i.createElement(y.D,{onChange:(e,r,i)=>{i.has("focus")||e.read(()=>{n({html:(0,S.T)(r),lexical:JSON.stringify(e.toJSON())})})},ignoreSelectionChange:!0}),i.createElement(C.A,null),i.createElement(u.x,null),i.createElement(g.W,null),i.createElement(L.A,null),...B)}function M({value:e,valueFormat:r,themeOverride:n,lexicalContentClassName:a,namespace:o,innerRef:s}){return i.createElement(k,{value:e,valueFormat:r,isEditable:!1,lexicalContentClassName:a,themeOverride:n,namespace:o,innerRef:s})}},915440:(e,r,n)=>{n.d(r,{Rs:()=>v,ZA:()=>f,oS:()=>S,p:()=>I,rp:()=>b});var i=n(411855),a=n(138020),o=n(772824);n(525763);var s=n(560512),l=n(718983),c=n(772841);n(776250);var d=n(44948),u=n(358145),m=n(966712),p=n(391388),h=n(743282),_=n(869661);function g(){let e=i.useContext(_.ob);if(!e)throw Error("Tried to use useSubscription outside a LiveGraph context provider");return e}function f(){return g().client}function E(e){return!e.hasOwnProperty("enabled")||!!e.enabled}function y(e){return Array.isArray(e)&&(1===e.length||2===e.length)&&(0,a.bu)(e[0])}function b(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],o=(y(e)?e[1]:e[2])??{},l=(0,d.zN)(n,a.lw),m=E(o),_=function(){let[e,r]=i.useState(0);return i.useCallback(()=>r(e=>e+1),[])}(),f=g(),v=o.traceId,I=function(e,r){let n=i.useRef((0,h.g)()),o=(0,u.ZC)(e),s=(0,u.ZC)(r);return void 0===o||void 0===s||o===e&&(0,a.lw)(r,s)||(n.current=(0,h.g)()),n.current}(r,l),T=i.useMemo(()=>f.client?.viewHasStaticQueries(r)?{...l,__requestId:I}:l,[l,I,r,f.client]),S=m&&T?f.mock?f.mock.useSubscription(r,T):f.client?.getViewResult(r,T)??c.F5:s.F4;return i.useEffect(()=>{if(!f.mock&&!1!==m&&T)return f.client?.subscribe(r,T,_,v)},[m,f.client,f.mock,r,v,T,_]),i.useMemo(()=>p.Qw.from(S),[S])}let v=(0,m.kc)().use_subscription_v2?b:function(...e){let r=y(e)?e[0].view:e[0],n=y(e)?e[0].args:e[1],o=(y(e)?e[1]:e[2])??{},l=E(o),[d,u]=i.useState(l&&n?c.F5:s.F4),m=g(),[h,_]=i.useState(n),f=o.traceId,b=d;return m.mock&&n&&(b=m.mock.useSubscription(r,n)),n&&!(0,a.lw)(n,h)&&(_(n),u(b=l?c.F5:s.F4)),i.useEffect(()=>{if(m.mock)return;if(!1===l){u(s.F4);return}if(!h)return;let e=m.client?.subscribe(r,h,e=>{u(e)},f);return()=>{e?.()}},[l,h,m.client,m.mock,r,f]),i.useMemo(()=>p.Qw.from(b),[b])};function I(e,r,n={}){let a=g(),s=E(n),[l,c]=i.useState({}),[d]=i.useState(()=>new o.A(a.client,()=>c({})));return i.useLayoutEffect(()=>{d.update(e,s?r:[])},[d,e,r,s]),i.useLayoutEffect(()=>()=>d.clear(),[d]),i.useMemo(()=>r.map(e=>({args:e,result:s?p.Qw.from(d.currentResult(e)):p.Qw.disabled()})),[d,r,s,l])}class T{constructor(e,r,n){this.viewArgs=e,this.traceId=(0,h.g)(),this.errors=null,this._isLoading=!0,this.timer=new l.M({onTimeout:()=>r(this),timeoutMs:n})}finish(){this._isLoading=!1,this.timer.finish()}get timeElapsedMs(){return this.timer.getTime()}get wasBackgrounded(){return this.timer.backgrounded}get wasOffline(){return this.timer.wasOffline}get isLoading(){return this._isLoading}}function S(e,r,n){let o=i.useRef(null),s=!1!==n.enabled,l=n.subscriptionLogger,c=i.useRef(r),d=o.current;!o.current&&s&&(o.current=new T(r,e=>l.onEvent("stuck",m,e),l.stuckMs));let u=s?o.current.traceId:void 0,m=v(e,r,{enabled:s,traceId:u});if(null===d&&s&&l.onEvent("initiated",m,o.current),!(0,a.lw)(r,c.current)){let e=new T(r,e=>l.onEvent("stuck",m,e),l.stuckMs);o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",m,o.current,{nextTraceId:e.traceId})),o.current=e,l.onEvent("initiated",m,o.current),c.current=r}return i.useEffect(()=>{"loaded"===m.status?o.current?.isLoading&&(o.current.finish(),l.onEvent("loaded",m,o.current)):"errors"===m.status&&o.current?.isLoading&&(o.current.finish(),o.current.errors=m.errors,l.onEvent("error",m,o.current))},[m,m.errors,m.status,l]),i.useEffect(()=>()=>{o.current?.isLoading&&(o.current.finish(),l.onEvent("canceled",m,o.current))},[]),m}},286098:(e,r,n)=>{n.d(r,{Nc:()=>u,XJ:()=>l,ad:()=>s,f2:()=>d,h7:()=>o,zb:()=>c});var i=n(99506),a=n(711525);function o(e){return{id:e.key,key:e.key,name:e.name,fileRepoId:e.file_repo_id,editorType:e.editor_type,folderId:e.folder_id,teamId:e.team_id,hasFileLinkPassword:!1,thumbnailUrl:e.thumbnail_url||"",thumbnailUrlOverride:e.thumbnail_url_override||"",thumbnailGuid:e.thumbnail_guid||null,clientMeta:e.client_meta,touchedAt:e.touched_at,lastPublishedAt:e.last_published_at??"",canView:!0,linkAccess:e.link_access,repo:{id:e.file_repo_id||"",name:"",createdAt:new Date,deletedAt:new Date,trashedAt:null,updatedAt:new Date,linkAccess:e.link_access,protoLinkAccess:e.proto_link_access,hasFileLinkPassword:!1,hasProtoLinkPassword:!1,orgAudience:null,orgBrowsable:!0,hasActiveBranches:!1},project:null,isTeamTemplate:e.is_team_template||!1}}function s(e,r,n,a){return{userId:r,resourceType:i.bk.FOLDER,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,project:{id:e.id,path:e.path,orgId:n,teamId:e.team_id,updatedAt:new Date(e.updated_at),createdAt:new Date(e.created_at),deletedAt:null!=e.deleted_at?new Date(e.deleted_at):null,trashedAt:null!=e.trashed_at?new Date(e.trashed_at):null,viewOnlyAt:e.is_view_only?new Date:null,inviteOnlyAt:e.is_invite_only?new Date:null,canEdit:!1,description:e.description,team:{id:e.team_id??"",orgId:n,name:"",licenseGroup:{name:""},studentTeamAt:null,eduGracePeriod:{id:"",isValid:!1},restrictionsList:[],subscription:i.Qh.OK,gracePeriodEnd:null,canEdit:!1,canAdmin:!1}}}}function l(e,r,n,o){return{userId:r,orgId:n??null,teamId:e.fig_file?.team_id??null,sidebarSectionId:o??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id??"",resourceType:i.bk.PROTOTYPE,prototype:{id:e.id||"unknown",name:e.name,fileKey:e.fig_file.key,pageId:e.page_id,thumbnailUrl:e.thumbnail_url,file:{parentOrgId:e.fig_file.parent_org_id||null,key:e.fig_file.key,folderId:e.fig_file.folder_id,teamId:e.fig_file.team_id,fileRepoId:e.fig_file.file_repo_id,hasProtoLinkPassword:e.fig_file.has_proto_link_password,name:e.fig_file.name,editorType:e.fig_file.editor_type,protoLinkAccess:e.fig_file.proto_link_access,createdAt:new Date(e.fig_file.created_at),trashedAt:e.fig_file.trashed_at?new Date(e.fig_file.trashed_at):null,prototypeUrl:{status:a.tT.Loaded,data:e.fig_file.prototype_url}}}}}function c(e,r,n,a){return{userId:r,orgId:n??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,resourceType:i.bk.TEAM,teamId:null,team:{id:e.id,orgId:e.org_id,name:e.name,deletedAt:null,imgUrl:null,licenseGroup:null}}}function d(e,r,n,a){return{userId:r,orgId:n??null,teamId:e.team_id??null,sidebarSectionId:a??null,createdAt:new Date,updatedAt:new Date,resourceId:e.key,resourceType:i.bk.FILE,file:o(e)}}function u(e,r,n,a){return{userId:r,orgId:n??null,createdAt:new Date,updatedAt:new Date,resourceId:e.id,sidebarSectionId:a??null,resourceType:i.bk.WORKSPACE,teamId:null,workspace:{...e,orgId:n,colorConfig:null,description:null,orgAccess:"",createdAt:new Date,canAdmin:!1,canView:!1,canCreateTeam:!1,publicLinkControlsSetting:"",publicLinkControlsMaxExpiration:"",hasCustomPublicLinkControlsSetting:!1,isPluginAllowlisted:!1,canRead:!1,imgUrlTransformed:e.imgUrl}}}},995672:(e,r,n)=>{n.d(r,{r:()=>a});var i=n(411855);function a({setMaxWidth:e,render:r}){let[n,a]=i.useState(new Map),o=i.useMemo(()=>n.size?Math.max(...n.values()):void 0,[n]);i.useLayoutEffect(()=>e(o),[o,e]);let s=i.useCallback((e,r)=>a(n=>{if(n.get(e)===r)return n;let i=new Map(n);return"number"==typeof r?i.set(e,r):i.delete(e),i}),[]);return i.createElement(i.Fragment,null,r({reportWidthOfValue:s}))}n(629019),n(538697)},886653:(e,r,n)=>{function i(e){let r=null;return function(...n){if(null!=r&&r.args.length===n.length){let e=!0;for(let i=0,a=n.length;i<a;i++)if(n[i]!=r.args[i]){e=!1;break}if(e)return r.result}return(r={args:n,result:e(...n)}).result}}function a(e){let r=new WeakMap;return n=>{let i=r.get(n);if(i)return i;let a=e(n);return r.set(n,a),a}}n.d(r,{cm:()=>a,xx:()=>i})},994190:(e,r,n)=>{n.d(r,{$G:()=>p,Ad:()=>o,B3:()=>f,Hh:()=>g,Jj:()=>_,S:()=>h,Y7:()=>E,ai:()=>c,f1:()=>m,kJ:()=>d,s$:()=>u});var i=n(742808),a=n(692106);let o=["memory.fullscreen.","performance.fullscreen."],s=!0;function l(e,r){let n=-1/0;return()=>{let i=Date.now()/1e3;i-n>e&&(n=i,r())}}window.addEventListener("error",e=>{if(!s)return;s=!1;let{message:r,filename:n}=e,a=/abort/i.test(r),o=/\/compiled_/.test(n);(0,i.Rh)("unhandled_error",{abort:a,fullscreen:o})});let c=l(30,()=>{(0,i.Rh)("context_lost")}),d=l(30,()=>{(0,i.Rh)("context_restored")});function u(e){window.figmaPerfTesting&&window.postMessage({name:e,value:performance.now()/1e3},"*")}function m(){(0,i.Rh)("dirty_after_load")}function p(){(0,i.Rh)("consecutive_flushes")}function h(){(0,i.Rh)("consecutive_image_change_skips")}function _(){(0,i.Rh)("image_paste_error")}function g(){(0,i.Rh)("unsaved_changes_bell")}function f(e){(0,i.Rh)("reconnecting_banner",{client:e})}function E(e){return(0,a.x)(e,!0,e.productType)}},453418:(e,r,n)=>{n.d(r,{Sd:()=>y,Zp:()=>f,tB:()=>E,wc:()=>m}),n(966712);var i=n(563706);n(286640);var a=n(988022),o=n(356390),s=n(617453),l=n(601538),c=n(38329),d=n(187623),u=n(27087),m=(e=>(e.MouseScrollToZoom="mouse-scroll-wheel-zoom",e.RightClickDragToPan="right-click-drag-to-pan",e))(m||{}),p=(e=>(e.UserManualChange="user_manual_change",e.Onboarding="onboarding",e))(p||{});function h({navigationPreference:e,enabled:r,eventOrigin:n}){var i,o;new d.P().sendToOtherTabs(e,JSON.stringify(r)),function(e){try{let r=c.D.getState();(0,a.uE)("navigation_preferences",r,{navigationPreference:e.navigationPreference,enabled:e.enabled,eventOrigin:e.eventOrigin})}catch(e){}}({navigationPreference:e,enabled:r,eventOrigin:n}),i=e,o=r,c.D.getState().user?.id&&u.Ay.put("/api/user","mouse-scroll-wheel-zoom"===i?{mouse_scroll_to_zoom:o}:{right_click_drag_to_pan:o})}let _=[!0,1,"1","true"];function g(e){return _.includes(e)}function f(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-scroll-wheel-zoom-enabled":"set-scroll-wheel-zoom-disabled")}(g(e))}function E(e){c.D.getState().isFullscreenDocumentLoaded&&function(e){o.Y5.triggerAction(e?"set-right-click-pan-enabled":"set-right-click-pan-disabled")}(g(e))}function y(){return[{separator:!0,platforms:["!ipad"]},{action:"toggle-scroll-wheel-zoom",platforms:["!ipad"],hideForQuickCommand:i.Ay.isIpad,"data-onboarding-key":l.oi.ZOOM,callback:()=>{h({navigationPreference:"mouse-scroll-wheel-zoom",enabled:!(0,s.UK)().scrollWheelZoom.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().scrollWheelZoom,propertyValue:!0},{action:"toggle-right-click-pan",platforms:["!ipad"],hideForQuickCommand:i.Ay.isIpad,"data-onboarding-key":l.oi.PAN,callback:()=>{h({navigationPreference:"right-click-drag-to-pan",enabled:!(0,s.UK)().rightClickPan.getCopy(),eventOrigin:"user_manual_change"})},property:(0,s.UK)().rightClickPan,propertyValue:!0},{separator:!0,platforms:["!ipad"],flags:["!edit"]}]}},316082:(e,r,n)=>{n.d(r,{y:()=>s});var i=n(411855),a=n(922827),o=n(939683);function s(){let e=(0,o.U)(),r=a.h3O?.getSessionState(),n=function(){let[e,r]=i.useState(navigator.onLine);return i.useEffect(()=>{let e=()=>r(navigator.onLine);return window.addEventListener("online",e),window.addEventListener("offline",e),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]),e}();return i.useEffect(()=>{!n&&r&&r!==a.kul.DETACHED&&e("offline_multiplayer_discrepancy",{isNavigatorOnline:navigator.onLine,isJoined:r===a.kul.JOINED,multiplayerSessionState:r.toString()})},[n,r,e]),n||r===a.kul.JOINED}},183297:(e,r,n)=>{n.d(r,{AS:()=>o,En:()=>l,mL:()=>s,u9:()=>c,vs:()=>a}),n(411855);var i=n(27087);let a=25,o="next",s="prev";function l(e,r,n,a=o){return new Promise((o,l)=>{let c=n&&n.pagination,d=c&&(a===s?c.prev_page:c.next_page);(null==c||d)&&(d=d||`${e}${-1===e.indexOf("?")?"?":"&"}page_size=${r}`,(0,i.k9)(d).then(({data:e})=>{let r=e.pagination;null==c?c=r:a===s?r.prev_page&&(c.prev_page=r.prev_page):c.next_page=r.next_page,e.meta.pagination=c,o(e.meta)},l))})}function c(e){return!!(!e?.pagination||e.pagination.next_page)}},988261:(e,r,n)=>{n.d(r,{_H:()=>i});function i(){let e=`figma.pc=; domain=${window.location.hostname}; path=/; max-age=0; expires=Thu, 01 Jan 1970 00:00:00 UTC;`;document.cookie=e}},812115:(e,r,n)=>{n.d(r,{R:()=>o,X:()=>a});var i=n(503457);let a=(0,i.kf)("lazy_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,367780))).QuillEditor})}),o=(0,i.kf)("lazy_readonly_quill_editor",{isCodesplit:!0,ComponentFactory:async()=>({default:(await Promise.all([n.e(2399),n.e(1398),n.e(1876),n.e(3036),n.e(4195),n.e(441),n.e(8547),n.e(4586),n.e(7054),n.e(214),n.e(4920),n.e(3779),n.e(6739),n.e(741),n.e(5215)]).then(n.bind(n,367780))).ReadOnlyQuillEditor})})},563042:(e,r,n)=>{n.d(r,{$J:()=>s,Ee:()=>l,OZ:()=>o,ZB:()=>d,mm:()=>c}),n(630564);var i=n(563706),a=n(126911);function o(e){if(!e.keyShortcutKey)return"";let r=a.y.isApple();var n=r?"\u2318":"Ctrl+";return e.keyShortcutShift&&(n+=r?"\u21E7":"Shift+"),e.keyShortcutOption&&(n+=r?"\u2325":i.Ay.chromeos?"Search+":"Alt+"),`   ${n}${e.keyShortcutKey}`}function s(e){if(!e)return"";if(e.length<1||"<"!==e.charAt(0)||">"!==e.charAt(e.length-1))return e;var r=e.replace(/(<\/[ph]\d?>)/g,"\n");return(r=(r=r.replace(/(<([^>]+)>)/gi,"")).replace(/&nbsp;/g,"\xa0")).replace(/&amp;/g,"&")}let l=/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)/g;function c(e){if(!e)return"";if(e.length>2&&"<"===e.charAt(0)&&">"===e.charAt(e.length-1))return e;var r=e.replace(/^.*/gm,"<p>$&</p>");return(r=(r=r.replace(l,e=>`<a href="${e}">${e}</a>`)).replace(/<p><\/p>/g,"<p><br></p>")).replace(/(\r\n|\n|\r)/gm,"")}function d(e){return""===s(e)?.trim()}},1372:(e,r,n)=>{n.d(r,{$9:()=>u,EM:()=>s,J1:()=>c,V$:()=>d,oI:()=>m});var i=n(517655);let a=[],o=0;function s(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}let l=(0,i.Xs)(),c=l,d=l.v2;function u(){c.disconnect();let e=(0,i.Xs)();c=e,d=e.v2,c.connect()}function m(){(0,i.oI)()}window.realtimeClient=l,[].push(function(){o>0||a.forEach(e=>{o+=1,setTimeout(()=>{try{e()}finally{o-=1}},6e4+24e4*Math.random())})})},517655:(e,r,n)=>{n.d(r,{EM:()=>h,Xs:()=>f,oI:()=>_});var i,a=n(776250),o=n(966712),s=n(845755),l=n(30637);let c=!1,d=!1,u=[],m=[],p=0;function h(e){let r=e.split(":");return{channel:r[0],timestamp:parseInt(r[1]),generation:parseInt(r[2]),signature:r[3]}}function _(){d=!0}let g=-1;function f(){let e=null,r=null,n=null,i=null,u=null,p={},_=!0,f=Date.now(),E=0,y=null,b=!0,v=null,I=()=>{null!=u&&clearInterval(u),null!=i&&i.close(),u=null,i=null,_=!0},T=()=>{y&&(clearTimeout(y),y=null),v&&(window.removeEventListener("online",v),v=null),N()},S=()=>{if(I(),!b||null!=y)return;let e=4+(Math.min(128,4*Math.pow(2,E))-4)*Math.random();console.log(`[Realtime] Disconnected. Will attempt reconnect in ${e.toFixed(0)} seconds.`),y=setTimeout(()=>{console.log(`[Realtime] Attempting reconnect now after waiting ${e.toFixed(0)} seconds.`),T()},1e3*e),E++,v=()=>{console.log("[Realtime] Attempting reconnect due to connectivity change."),navigator.onLine&&T()},window.addEventListener("online",v)},w=e=>{i&&i.readyState===i.OPEN&&i.send(`tok:${e.channel}:${e.timestamp}:${e.generation}:${e.signature}`)},A=e=>{let r=(0,o.tl)().user_data;if(!r?.id){console.warn("Can't post to me channel without user id available"),(0,a.sx)("Me Channel UserId Missing");return}let n=`/me-${r?.id}`;if(!(n in p)){if(console.warn("We're not subscribed to the me channel"),(0,a.sx)("Me Channel Subscription Missing"),r?.realtime_token){(0,a.sx)("Me Channel Resubscribe");let e=h(r.realtime_token);p[n]=e,w(e)}else{console.warn("We're unable to subscribe to the me channel; server will reject this message"),(0,a.sx)("Me Channel No Token");return}}if(!i||i.readyState!==i.OPEN){(0,l.nl)()||console.warn("Sending to me without open websocket"),(0,a.sx)("Me Channel Websocket Missing");return}let s=JSON.stringify([{channel:n,data:e}]);i.send(`pme:${s}`)},C=e=>{delete p[e],i&&i.readyState===i.OPEN&&i.send(`uns:${e}`)},N=()=>{if(d)return;I();let r="";r=("https:"===window.location.protocol?`wss://${window.location.host}`:`ws://${window.location.host}`)+"/api/realtime_v2";let n=window.INITIAL_OPTIONS&&window.INITIAL_OPTIONS.release_git_tag||"";r+=`?release_git_tag=${n}&user_id=${window.INITIAL_OPTIONS?.user_data?.id||""}`,(i=new WebSocket(r)).onopen=e=>{for(let e in E=0,console.log(`[Realtime] Connected to ${r}.`),u=setInterval(()=>{i.send("ping")},3e4+5e3*Math.random()-2500),c&&Date.now()-f>6e4&&m.forEach(e=>{setTimeout(e,0)}),c=!0,p)w(p[e])},i.onmessage=r=>{if("pong"===r.data){f=Date.now();return}let n=r.data.substr(0,4);if("tok:"===n){let e=h(r.data.substr(4));p[e.channel]=e;return}let i={};if("ouc:"===n){let e=r.data.substr(4).split(":");3!==e.length&&console.warn("Got ouc: command with wrong number of params");for(let r=0;r<e.length;r++)"null"===e[r]&&(e[r]=null);i={type:"verify_user_state",org_user_count:e[0]&&parseInt(e[0]),org_user_updated:e[1]&&new Date(parseInt(e[1])).toISOString(),target_user_id:e[2]}}else if("sub:"===n||"uns:"===n){let e=r.data.split(":"),n=e[e.length-1];if("ok"===n)return;if(delete p[e[1]],"expired"===n){if(!_)return;_=!1,i={type:"token_expired"}}else{console.warn(r.data);return}}else{try{i=JSON.parse(r.data)}catch(e){console.warn(`unexpected non-JSON realtime message: ${r.data}`);return}null!=i.err&&(console.warn("encountered error message from realtime",i.err),S())}e&&e(i)},i.onclose=e=>{i=null,S()}},L={},O=new Set,R=new Map,P={connect:N,disconnect:()=>{b=!1,I(),p={}},setCallback:r=>{e=e=>{let n=e.method,i=Object.keys(e).filter(e=>s.C.has(e)).map(r=>({type:r,value:e[r]})),a=!1;r(e),i.forEach(r=>{let i=L[r.type];i&&Object.keys(i).map(e=>i[e]).filter(e=>e.methods[n]).forEach(n=>{n.callback(r.value,e.method)})})}},setOnSubscribeCallback:e=>{r=e},setOnUnsubscribeCallback:e=>{n=e},subscribe:(e,n)=>{let i=p[e.channel];p[e.channel]=e,i||w(e),!1!==n&&O.add(e.channel),r&&r(e.channel)},unsubscribe:(e,r)=>{if(!1!==r&&O.delete(e),!1===r&&O.has(e))return;let i=R.get(e);i&&i.size>0||(delete p[e],C(e),n&&n(e))},postToMeChannel:e=>{A(e)}},D=()=>{let e=(0,o.tl)().user_data;return e?.realtime_token?h(e.realtime_token):null},k=["post","put","delete"],M=e=>"string"==typeof e?{type:e,token:D(),methods:k}:e,F={subscriptions:p,subscribe:function(e,r){let n=M(e),i=n.token||D();if(!i)return()=>{};let a=(g+=1,`${g}:${performance.now()}`),o=L[n.type]||{},s=n.methods||k,l={};return s.forEach(e=>{l[e]=!0}),o[a]={methods:l,callback:r},L[n.type]=o,(R.get(i.channel)||new Set).add(a),P.subscribe(i,!1),()=>{let{channel:e}=i,r=R.get(e);r?.delete(a);let o=L[n.type];if(o&&(delete o[a],0===Object.keys(o).length)){let e=n.type;delete L[e]}P.unsubscribe(e,!1)}}};return{...P,v2:F}}i=function(){p>0||u.forEach(e=>{p+=1,setTimeout(()=>{try{e()}finally{p-=1}},6e4+24e4*Math.random())})},m.push(i)},99380:(e,r,n)=>{n.d(r,{kS:()=>l,q5:()=>d});var i=n(411855);n(188507),n(407436),n(881388);var a=n(939863);n(738269),n(662275),n(356390),n(457630),n(335682),n(611978),n(973131),n(694517),n(493536),n(335650);var o=n(36657);(0,n(237870).Ju)(function(e){return i.createElement(o.R,{title:(0,a.tx)("recordings.restart_modal_title"),confirmText:(0,a.tx)("general.restart"),onConfirm:e.onConfirm,open:e.open,onClose:e.onClose},(0,a.tx)("recordings.restart_modal_confirmation"))},"RECORDING_CONFIRM_RESTART_MODAL"),n(38329),n(966712);var s=n(860601);let l="none-device",c={initializeRecordingMedia:s.Xv,abortRecording:s.lQ,startWalkthroughRecording:s.lQ,stopWalkthroughRecording:s.Xv,restartWalkthroughRecording:s.lQ,togglePauseRecording:s.lQ,isRecording:!1,isPaused:!1,mediaStream:void 0,getRecordingDataForSinatraCreate:s.pp,getRecordingLengthMs:s.dD},d=i.createContext(c)},964937:(e,r,n)=>{n.d(r,{F:()=>o});var i=n(109388),a=n(775541);function o(e,r=document.createElement("div")){let n=(0,a.H)(r);return(0,i.flushSync)(()=>{n.render(e)}),r.innerHTML}},289329:(e,r,n)=>{n.d(r,{iw:()=>l,ld:()=>s});var i=n(737947),a=n(966712);let o=class e{static initialize(){let r=a.Ay().user_data?.email;if(r&&(-1!==r.indexOf("@figma)")||-1!==r.indexOf("@test.figma"))){let r=new URLSearchParams(i.Ay.location.search).get("safeModeRenderLimitMs");r&&(e.getForcedRenderTimeMsValue=parseInt(r))}}getForcedRenderTimeMs(){return e.getForcedRenderTimeMsValue}};o.getForcedRenderTimeMsValue=null,o.initialize();let s=new o,l=new class{constructor(e){this.safeModeOptions=e}getForcedRenderTimeMs(){let e=this.safeModeOptions.getForcedRenderTimeMs();return null!=e?e:-1}}(s)},522739:(e,r,n)=>{n.d(r,{D8:()=>c,GG:()=>u,T9:()=>_,lt:()=>m,mv:()=>h,oj:()=>d,u2:()=>p});var i=n(411855),a=n(903547),o=n(672517),s=n(153234);class l extends s.o6{constructor(){super(...arguments),this.onClick=s.cZ(this,"click",e=>this.props.onClick?this.props.onClick(e):s.aH),this.onContextClick=s.cZ(this,"contextmenu",e=>this.props.onContextMenu?this.props.onContextMenu(e):s.aH),this.onDoubleClick=s.cZ(this,"dblclick",e=>this.props.onDoubleClick?this.props.onDoubleClick(e):s.aH),this.onMouseDown=s.cZ(this,"mousedown",e=>this.props.onMouseDown?this.props.onMouseDown(e):s.aH),this.onMouseUp=s.cZ(this,"mouseup",e=>this.props.onMouseUp?this.props.onMouseUp(e):s.aH),this.onMouseMove=s.cZ(this,"mousemove",e=>this.props.onMouseMove?this.props.onMouseMove(e):s.aH),this.onMouseEnter=s.cZ(this,"mouseenter",e=>this.props.onMouseEnter?this.props.onMouseEnter(e):s.aH),this.onMouseLeave=s.cZ(this,"mouseleave",e=>this.props.onMouseLeave?this.props.onMouseLeave(e):s.aH),this.onPointerDown=s.Am(this,"pointerdown",e=>this.props.onPointerDown?this.props.onPointerDown(e):s.aH),this.onPointerUp=s.Am(this,"pointerup",e=>this.props.onPointerUp?this.props.onPointerUp(e):s.aH),this.onPointerMove=s.Am(this,"pointermove",e=>this.props.onPointerMove?this.props.onPointerMove(e):s.aH),this.onKeyUp=s.C0(this,"keyup",e=>this.props.onKeyUp?this.props.onKeyUp(e):s.aH),this.onKeyDown=s.C0(this,"keydown",e=>this.props.onKeyDown?this.props.onKeyDown(e):s.aH),this.onFocus=s.Ht(this,"focus",e=>this.props.onFocus?this.props.onFocus(e):s.aH),this.onBlur=s.Ht(this,"blur",e=>this.props.onBlur?this.props.onBlur(e):s.aH)}render(){let{recordingKey:e,forwardedRef:r,dataTestId:n,dataOnboardingKey:i,...a}=this.props;return this.recordingKey()&&(this.props.onClick&&(a.onClick=this.onClick),this.props.onDoubleClick&&(a.onDoubleClick=this.onDoubleClick),this.props.onMouseDown&&(a.onMouseDown=this.onMouseDown),this.props.onMouseMove&&(a.onMouseMove=this.onMouseMove),this.props.onMouseEnter&&(a.onMouseEnter=this.onMouseEnter),this.props.onMouseLeave&&(a.onMouseLeave=this.onMouseLeave),this.props.onMouseUp&&(a.onMouseUp=this.onMouseUp),this.props.onContextMenu&&(a.onContextMenu=this.onContextClick),this.props.onKeyUp&&(a.onKeyUp=this.onKeyUp),this.props.onKeyDown&&(a.onKeyDown=this.onKeyDown),this.props.onFocus&&(a.onFocus=this.onFocus),this.props.onBlur&&(a.onBlur=this.onBlur),this.props.onPointerDown&&(a.onPointerDown=this.onPointerDown),this.props.onPointerUp&&(a.onPointerUp=this.onPointerUp),this.props.onPointerMove&&(a.onPointerMove=this.onPointerMove)),n&&(a["data-testid"]=n),i&&(a["data-onboarding-key"]=i),this.node(a,r)}}class c extends l{node(e,r){return i.createElement("div",{...e,ref:r})}}c.displayName="RecordableDiv",(0,o.tf)(c);class d extends l{node(e,r){return i.createElement("span",{...e,ref:r})}}d.displayName="RecordableSpan";class u extends l{node(e,r){return i.createElement("button",{...e,ref:r})}}u.displayName="RecordableButton";class m extends l{node(e,r){return i.createElement("a",{...e,ref:r})}}m.displayName="RecordableA";class p extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return i.createElement("input",{...e,onChange:this.onChange,ref:r,dir:"auto","data-onboarding-key":this.props.dataOnboardingKey})}}p.displayName="RecordableInput";class h extends l{constructor(){super(...arguments),this.onChange=s.Z7(this,"change",e=>this.props.onChange?this.props.onChange(e):s.aH)}node(e,r){return i.createElement("textarea",{...e,onChange:this.onChange,ref:r,dir:"auto"})}}function _({children:e}){let r=(0,i.useMemo)(()=>s.Fk()?(e,r)=>{let n=s.cC(r.recordingKey);return(0,i.useMemo)(()=>{if(!e||!r.recordingKey)return e;let i=s.fA(n,r.eventName,r=>Array.isArray(r)?e(...r):e(r));return(...e)=>i(e)},[n,r.eventName,e,r.recordingKey])}:g,[]);return i.createElement(a.g.Provider,{value:{useInteraction:r}},e)}function g(e){return e}h.displayName="RecordableTextarea"},733334:(e,r,n)=>{n.d(r,{F:()=>s,p:()=>l});var i=n(891721),a=n.n(i);let o=/[\u202A-\u202E\u2060-\u206F]/g;function s(e){return e?e.replace(o,"").normalize():e}function l(e){return a().sanitize(e)}},36381:(e,r,n)=>{n.d(r,{We:()=>o,qV:()=>a});var i=n(908048);async function a(e){let r=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",r))).map(e=>e.toString(16).padStart(2,"0")).join("")}function o(e,r){return s(e,r)}async function s(e,r){let n=r.split(".");if(2!==n.length)throw Error("Could not parse message and nonce.");let a=n[0],o=n[1],s=(0,i.D4)(a),l=(0,i.D4)(o),c=await window.crypto.subtle.decrypt({name:"AES-GCM",iv:s},e,l);return new TextDecoder().decode(c)}},844157:(e,r,n)=>{n.d(r,{b:()=>a});var i=n(617691);function a(e,r){let n=e[i.Ms[r]];return e[i.UC[r]]?void 0:n}},852438:(e,r,n)=>{function i(e,r){let n=new Set,[i,a]=e.size<r.size?[e,r]:[r,e];for(let e of i)a.has(e)&&n.add(e);return n}function a(e,r){if(e.size!==r.size)return!1;for(let n of e)if(!r.has(n))return!1;return!0}function o(e,r,n){let i=new Map,[a,o]=e.size<r.size?[e,r]:[r,e];for(let[e,r]of a.entries()){let a=o.get(e);null!=a&&i.set(e,n(e,r,a))}return i}n.d(r,{iR:()=>i,wD:()=>o,yZ:()=>a})},708389:(e,r,n)=>{var i;n.d(r,{f:()=>i}),(e=>{let r=(e,r)=>e<r?-1:1,n=Intl.Collator().resolvedOptions().locale+"-u-co-emoji";e.LEXICOGRAPHICALLY=(e,i)=>"string"!=typeof e?r(e,i):RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(e)&&RegExp("\\p{Extended_Pictographic}|\\p{Regional_Indicator}","u").test(i)?e.localeCompare(i,n):e.localeCompare(i),e.BY_DATETIME=(e,n)=>{if("string"!=typeof e)return r(e,n);let i=Date.parse(e),a=Date.parse(n);return i&&a?a-i:r(e,n)},e.byProperty=function(e,n=r){return(r,i)=>r[e]===i[e]?0:n(r[e],i[e])},e.byComparators=function(...e){return(r,n)=>{for(let i=0;i<e.length;i++){let a=(0,e[i])(r,n);if(0!==a)return a}return 0}},e.reverse=function(e){return(r,n)=>-1*e(r,n)}})(i||(i={}))},742668:(e,r,n)=>{n.d(r,{G:()=>i});var i=(e=>(e.SDKReady="sdkReady",e.Call="call",e.SetProperty="setProperty",e.GetProperty="getProperty",e.SetContainerDimensions="setContainerDimensions",e.Error="error",e.GetPermissionToShowSurvey="getPermissionToShowSurvey",e.SurveyClosed="surveyClosed",e))(i||{})},88570:(e,r,n)=>{n.d(r,{A:()=>g});var i=n(411855),a=n(511617),o=n(517333),s=n(966712),l=n(716034),c=n(418956),d=n(30637),u=n(111538),m=n(559036),p=n(19266);n(742668);let h=(0,l.eU)([]);function _(e,r){let{country:n,region:i}=e;return r.some(({country:e,region:r})=>(!e||n===e)&&(!r||i===r))}function g({children:e,onAttemptToShowSurvey:r,onSurveyClose:n,geofence:l={}}){var g;let f=(0,c.md)(u.EA),E=(g=function(){let e=(0,s.tl)();return{country:e.iso_code,region:e.viewer_region}}(),!(void 0!==l.exclude&&_(g,l.exclude))&&(void 0===l.include||_(g,l.include))),y=!(0,a.GZ)()&&!(0,d.lZ)()&&!(0,s.tl)().e2e_traffic&&f&&E&&(0,s.kc)().sprig_enabled&&!o.S8,[b,v]=(0,i.useState)(p.An),I=(0,c.md)(h);return(0,i.useEffect)(()=>{v(e=>(e.tearDown(),y?new p.Ay:p.An))},[y]),(0,i.useEffect)(()=>{b.setCallbacks({onAttemptToShowSurvey:r,onSurveyClose:n})},[r,n,b]),(0,i.useLayoutEffect)(()=>{p.Ay.setScreenAreasToAvoid(I)},[I]),i.createElement(m.M.Provider,{value:b},e)}(0,l.eU)(null,(e,r,n)=>{let i=e(h);r(h,[...i,n])}),(0,l.eU)(null,(e,r,n)=>{let i=e(h),a=i.indexOf(n);-1!==a&&r(h,i.slice(0,a).concat(i.slice(a+1)))})},647899:(e,r,n)=>{n.d(r,{iO:()=>p.DynamicConfig,f6:()=>p.EvaluationReason,w$:()=>I,aH:()=>m.aH,sq:()=>m.sq,w0:()=>h.w0,gP:()=>h.gP,hW:()=>T,vs:()=>S,Fj:()=>h.Fj,I7:()=>A});var i=n(411855);n(188507);var a=n(358145),o=n(966712),s=n(418956),l=n(716034);n(931828),n(582947);var c=n(697165),d=n(127351),u=n(624601),m=n(977373),p=n(581749),h=n(422705),_=n(140593),g=n(776250),f=n(567837),E=n(854282),y=n(675367),b=n(30637);let v=class e{static notInTestingEnvForLogging(){return("undefined"==typeof process||void 0===process?.env?.JEST_WORKER_ID)&&!(0,b.PN)()}static populateDynamicConfig(e,r){if(!this.FrozenDyanmicConfigs.get(e)){let n=(0,E.tc)(e,!0);if(null!==n&&n.getEvaluationDetails().reason!==p.EvaluationReason.Unrecognized)this.ToBeExposedDynamicConfigSet.add(e),null==this.LogExposureTimeoutHandle&&(this.LogExposureTimeoutHandle=window.setTimeout(this.LogExposureCallback,this.LogExposureDelayMs));else{if(this.notInTestingEnvForLogging()){let n={resource_type:"config",source:r,resource_name:e,statsig_ready:(0,y.r)()};(0,g.sx)(this.DataDogInvalidStatsigFetchKey,n,{forwardToDatadog:!0})}this.AlreadyExposedDynamicConfigSet.add(e)}this.FrozenDyanmicConfigs.set(e,n)}}static populateExperimentConfig(e,r){if(!this.FrozenDyanmicConfigs.get(e)){let n=(0,E.V1)(e,!0);if(null!=n)this.ToBeExposedExperimentConfigSet.add(e),null==this.LogExposureTimeoutHandle&&(this.LogExposureTimeoutHandle=window.setTimeout(this.LogExposureCallback,this.LogExposureDelayMs));else{if(this.notInTestingEnvForLogging()){let n={resource_type:"experiment",source:r,resource_name:e,statsig_ready:(0,y.r)()};(0,g.sx)(this.DataDogInvalidStatsigFetchKey,n,{forwardToDatadog:!0})}this.AlreadyExposedExperimentConfigSet.add(e)}this.FrozenDyanmicConfigs.set(e,n)}}static typeGuardBoolean(e){let r="boolean"==typeof e;return r||(0,_.KF)(!1,"Expected boolean, got "+typeof e),r}static getDynamicConfigBoolean(e,r,n,i=this.DefaultSourceLoggingString){this.populateDynamicConfig(e,i);let a=this.FrozenDyanmicConfigs.get(e);return null!=a?a.get(r,n,void 0):n}static getExperimentBoolean(e,r,n,i=this.DefaultSourceLoggingString){this.populateExperimentConfig(e,i);let a=this.FrozenDyanmicConfigs.get(e);return null!=a?a.get(r,n,void 0):n}static typeGuardNumber(e){let r="number"==typeof e;return r||(0,_.KF)(!1,"Expected number, got "+typeof e),r}static getDynamicConfigNumber(e,r,n,i=this.DefaultSourceLoggingString){this.populateDynamicConfig(e,i);let a=this.FrozenDyanmicConfigs.get(e);return null!=a?a.get(r,n,void 0):n}static getExperimentNumber(e,r,n,i=this.DefaultSourceLoggingString){this.populateExperimentConfig(e,i);let a=this.FrozenDyanmicConfigs.get(e);return null!=a?a.get(r,n,void 0):n}static typeGuardString(e){let r="string"==typeof e;return r||(0,_.KF)(!1,"Expected string, got "+typeof e),r}static getDynamicConfigString(e,r,n,i=this.DefaultSourceLoggingString){this.populateDynamicConfig(e,i);let a=this.FrozenDyanmicConfigs.get(e);return null!=a?a.get(r,n,void 0):n}static getExperimentString(e,r,n,i=this.DefaultSourceLoggingString){this.populateExperimentConfig(e,i);let a=this.FrozenDyanmicConfigs.get(e);return null!=a?a.get(r,n,void 0):n}static getFeatureGateFromInitialOptionsInternal(e){return{value:(0,o.kc)()[e]??!1,rule_id:(0,o.KI)()[(0,f.F)(e)]??null}}static getFeatureGateFromInitialOptions(r){if(!this.FrozenFeatureGates.has(r)){let n=e.getFeatureGateFromInitialOptionsInternal(r);this.FrozenFeatureGates.set(r,n)}let n=this.FrozenFeatureGates.get(r)?.value??!1;return this.logExposureForFeatureGate(r,n),n}static logExposureForFeatureGate(r,n){let i=e.getFeatureGateFromInitialOptionsInternal(r);this.AlreadyExposedFeatureGateSet.has(r)||(this.ToBeExposedFeatureGateExposureMap.set(r,i),null==this.LogExposureTimeoutHandle&&(this.LogExposureTimeoutHandle=window.setTimeout(this.LogExposureCallback,this.LogExposureDelayMs)))}static updateFeatureGateForTesting(e,r,n=null){this.FrozenFeatureGates.set(e,{value:r,rule_id:n})}static setInRenderServerForViewerTests(){this.InRenderServerForViewerTests=!0}static clear(){this.FrozenFeatureGates.clear(),this.FrozenDyanmicConfigs.clear(),this.AlreadyExposedFeatureGateSet.clear(),this.ToBeExposedFeatureGateExposureMap.clear(),this.AlreadyExposedDynamicConfigSet.clear(),this.ToBeExposedDynamicConfigSet.clear(),this.AlreadyExposedExperimentConfigSet.clear(),this.ToBeExposedExperimentConfigSet.clear(),null!=this.LogExposureTimeoutHandle&&(clearTimeout(this.LogExposureTimeoutHandle),this.LogExposureTimeoutHandle=null),this.InRenderServerForViewerTests=!1}};v.DataDogInvalidStatsigFetchKey="statsig.frozen_config_invalid_fetch",v.DefaultSourceLoggingString="web",v.AlreadyExposedExperimentConfigSet=new Set,v.ToBeExposedExperimentConfigSet=new Set,v.AlreadyExposedDynamicConfigSet=new Set,v.ToBeExposedDynamicConfigSet=new Set,v.FrozenDyanmicConfigs=new Map,v.FrozenFeatureGates=new Map,v.AlreadyExposedFeatureGateSet=new Set,v.ToBeExposedFeatureGateExposureMap=new Map,v.InRenderServerForViewerTests=!1,v.LogExposureCallback=()=>{if(!v.InRenderServerForViewerTests){if(!(0,y.r)()){if(console.error("Statsig is not ready to log exposures"),v.notInTestingEnvForLogging()){let e={resource_type:"exposure_log",source:"web",statsig_ready:(0,y.r)()};(0,g.sx)(v.DataDogInvalidStatsigFetchKey,e,{forwardToDatadog:!0})}v.LogExposureTimeoutHandle=window.setTimeout(v.LogExposureCallback,v.LogExposureDelayMs);return}for(let[e,r]of v.ToBeExposedFeatureGateExposureMap)(0,E.s1)(e,r)&&(v.ToBeExposedFeatureGateExposureMap.delete(e),v.AlreadyExposedFeatureGateSet.add(e));for(let e of v.ToBeExposedDynamicConfigSet)(0,E.xA)(e)&&(v.AlreadyExposedDynamicConfigSet.add(e),v.ToBeExposedDynamicConfigSet.delete(e));for(let e of v.ToBeExposedExperimentConfigSet)(0,E.XY)(e)&&(v.AlreadyExposedExperimentConfigSet.add(e),v.ToBeExposedExperimentConfigSet.delete(e));v.LogExposureTimeoutHandle=null}},v.LogExposureDelayMs=3e4,v.LogExposureTimeoutHandle=null;let I=v;async function T(e,r,n,i=!1){let a=s.zl.get(u.ZJ);return(n||(0,o.kc)().statsig_suspend)&&await a.initCompletedPromise,(0,c.Tq)(s.zl.get(u.ZJ),e,"getExperiment",r,i)}function S(e,r,n){return T(e,r,n,!0)}function w(e,r,n){let{userVersion:o}=(0,i.useContext)(d.B),l=(0,a.ZC)(o),m=(0,s.md)(u.ZJ),p=(0,i.useRef)(null);return{getConfig:(0,i.useCallback)(()=>((l!==o||null==p.current)&&(p.current=(0,c.Tq)(m,e,"useExperiment",r,n)),p.current),[e,r,l,m,o,n])}}n(959641);let A=(0,o.kc)().statsig_suspend?function(e,r,n){return(0,s.md)(u.u_),w(e,r,n)}:w;(0,o.kc)().statsig_suspend,(0,s.Iz)(({experimentName:e,keepDeviceValue:r,disableExposureLogging:n})=>(0,l.eU)(async i=>{await i(u.u_),i(u.gR);let a=i(u.ZJ),o=null;return()=>(null==o&&(o=(0,c.Tq)(a,e,"getExperiment",r,n)),o)}),(e,r)=>e.experimentName===r.experimentName&&e.disableExposureLogging===r.disableExposureLogging&&e.keepDeviceValue===r.keepDeviceValue)},96328:(e,r,n)=>{n.d(r,{$M:()=>I,Ay:()=>y,DV:()=>g,EJ:()=>p,FS:()=>L,H9:()=>C,LD:()=>b,Qp:()=>O,Qt:()=>h,Rw:()=>N,VZ:()=>s,Vs:()=>A,YH:()=>u,Yx:()=>E,Zr:()=>a,_5:()=>l,fs:()=>S,gU:()=>w,hX:()=>d,lH:()=>m,sy:()=>T,td:()=>v,vE:()=>c,zS:()=>o});var i=n(178466);function a(e){return e.charAt(0).toUpperCase()+e.slice(1)}function o(e){return e.toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()})}function s(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function l(e){return e.replace(/([A-Z])/g,"_$1").toLowerCase()}function c(e){return a(e.split("_").join(" ").toLocaleLowerCase())}function d(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e){let r=unescape(encodeURIComponent(e)),n=new Uint8Array(r.length);for(var i=0;i<r.length;i++)n[i]=r.charCodeAt(i);return n}function m(e){return String.prototype.toWellFormed?e.toWellFormed():function(e){function r(e){return(63488&e)==55296}let n="";for(let i=0;i<e.length;++i){let a=e.charCodeAt(i);if(!r(a)){n+=e.charAt(i);continue}if(!((1024&a)!=0)&&i+1<e.length){let a=e.charCodeAt(i+1);if(r(a)&&(1024&a)!=0){n+=e.charAt(i),n+=e.charAt(i+1),++i;continue}}n+="\uFFFD"}return n}(e)}function p(e,r){return e.length>r?e.slice(0,r-1).trimEnd()+"\u2026":e}function h(e){let r=[];for(let n=0;n<e.length;n++){let i=function(e,r){let n=e.charCodeAt(r);if(Number.isNaN(n))return"";if(n<55296||n>57343)return e.charAt(r);if(55296<=n&&n<=56319){if(e.length<=r+1)throw Error("High surrogate without following low surrogate");let n=e.charCodeAt(r+1);if(56320>n||n>57343)throw Error("High surrogate without following low surrogate");return e.charAt(r)+e.charAt(r+1)}throw Error("Not the start of a single- or multibyte-character")}(e,n);n+=i.length-1,r.push(i)}return r}let _={numeric:!0,sensitivity:"base"};function g(e,r,n=_){let a=(0,i.Gq)().getPrimaryLocale(!1),o=new Intl.Collator(a,n);return e.sort((e,n)=>o.compare(r(e),r(n)))}let f={};function E(e,r="conjunction"){let n=(0,i.Gq)().getPrimaryLocale(!1);return f[r]||(f[r]=new Intl.ListFormat(n,{type:r})),f[r].format(e)}function y(e){var r=[];return(e=e.replace(/_|-/g," ")).split(" ").forEach(function(e){r.push(e.charAt(0).toUpperCase()+e.slice(1).toLowerCase())}),r.join(" ")}function b(e,r,n){return n=n||`${r}s`,1===e?r:n}function v(e,r,n){return null==e&&(e=0),`${e} ${b(e,r,n)}`}function I(e){return e<1e3?e.toString():e<1e5?`${Math.floor(e/100)/10}k`:e<1e6?`${Math.floor(e/1e3)}k`:e<1e8?`${Math.floor(e/1e5)/10}m`:e<1e9?`${Math.floor(e/1e6)}m`:e<1e11?`${Math.floor(e/1e8)/10}b`:`${Math.floor(e/1e9)}b`}function T(e){return encodeURIComponent(e.replace(/ /g,"-"))}function S(e){var r=e.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[ .\-_\/\\:;|,&+=*]/g,"-").replace(/[^a-z0-9\-]/g,"").replace(/\-+/g,"-").replace(/^\-+/,"").substring(0,100).replace(/\-+$/,"");return T(r=["thumbnail","icon","code","snapshot","duplicate","embed","canvas","remixes"].includes(r)?"":r)}let w=e=>/[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,18}\b([-a-zA-Z0-9()@:%_\+.~#?&//=]*)/.test(e);function A(e){for(var r=0,n=e.length>>>2,i=new Uint8Array(3*n),a=0,o=[],s=0;s<127;s++)o[s]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(String.fromCharCode(s));for(;r<n<<2;){var l=o[e.charCodeAt(r++)],c=o[e.charCodeAt(r++)],d=o[e.charCodeAt(r++)],u=o[e.charCodeAt(r++)];i[a++]=l<<2|c>>>4,d>=0&&(i[a++]=c<<4|d>>>2),u>=0&&(i[a++]=d<<6|u)}return a===i.length?i:i.subarray(0,a)}function C(e){for(var r="",n=e.length,i=0;i<n;i+=1024)r+=String.fromCharCode.apply(String,e.subarray(i,i+1024));return btoa(r)}function N(e){for(var r="",n=0;n<e.length;n++)r+=("00"+e[n].toString(16)).slice(-2);return r}function L(e){return e.replace(/\s+/g,"")}function O(e,r){return L(e)===L(r)}},650322:(e,r,n)=>{n.d(r,{GU:()=>c,SH:()=>s,cn:()=>o});var i=n(181912);n(668860);var a=n(966712);function o(e){return!!e.student_validated_at}function s(e,r){return{hasGracePeriod:!!(e&&r in e),isInValidGracePeriod:(e&&e[r]?l(e,r):0)>0}}let l=(e,r)=>Math.ceil((0,i.A)(e[r].createdAt).add(7,"days").diff((0,i.A)(),"days",!0));function c(e,r,n,i){let o=s(e,n);if(!(0,a.kc)().edu_onboarding_grace_period||r||!i||!o.hasGracePeriod)return{showReminder:!1,showAccessRestricted:!1};let l=o.isInValidGracePeriod;return{showReminder:l,showAccessRestricted:!l}}},30637:(e,r,n)=>{n.d(r,{Lg:()=>d,Ns:()=>i.k3,PN:()=>c,b_:()=>a,lZ:()=>l,nl:()=>s});var i=n(599445);let a=!1,o="/test/interactions"===window.location.pathname||"/test/interactions/proto"===window.location.pathname||"/test/interactions/deck"===window.location.pathname||"/test/interactions/presenter"===window.location.pathname;function s(){return o}function l(){return o}function c(){return o||(0,i.k3)()}function d(){try{return!1}catch{return!1}}o&&new URLSearchParams(window.location.search).get("mode")},913016:(e,r,n)=>{function i(e){return a(24*e)}function a(e){return 300*Math.round(Date.now()/3e5)-3600*e}function o(){return new Date("2024-10-10T15:00:00Z")}n.d(r,{G5:()=>i,S6:()=>a,n:()=>o})},520581:(e,r,n)=>{n.d(r,{E:()=>m});var i=n(411855),a=n(179479),o=n(69961),s=n(148011),l=n(985740),c=n(863359),d=n(201547),u=n(951783);function m(e){return(0,s.TR)()?i.createElement(p,{...e}):i.createElement(i.Fragment,null,e.children)}function p({name:e,children:r,alsoTrack:n}){let m=(0,a.F)(n),p=(0,s.MF)({name:e,alsoTrackRef:m}),h=(0,s.ps)(p),{error:_,trackablePath:g}=h,f=(0,s.MF)(()=>(0,s.ET)(g,p)),E=(0,i.useCallback)(e=>{!_&&(0,s.VC)(g)&&(0,l.S)({trackablePath:g.map(e=>e.name),interactableId:p.name,trackingMethod:"automatic",...e},f())},[g,p,f,_]),y=(0,u.s)(E),b=(0,o.o3)(o.nt.trackableDebug),v=(0,s.MF)(()=>(0,s.R8)({componentName:"AutoInteractable",name:e,error:_,alsoTrackedProperties:f()}));return r=(0,d.C)({children:r,isDebugMode:b,name:e,color:_?"red":"blue",depth:g.length+1,getTooltipText:v}),i.createElement(c.f.Provider,{value:h},i.createElement("div",{className:"displayContents",...y},r))}},763658:(e,r,n)=>{n.d(r,{k:()=>d});var i=n(411855),a=n(179479),o=n(69961),s=n(148011),l=n(863359),c=n(201547);function d(e){return(0,s.TR)()?i.createElement(u,{...e}):i.createElement(i.Fragment,null,e.children)}function u({name:e,trackingEnabled:r,trackImpressions:n=!0,alsoTrack:d,children:u}){let m=(0,a.F)(d),p=(0,s.U2)({name:e,trackingEnabled:r,alsoTrackRef:m}),{trackablePath:h,error:_}=p,g=(0,s.MF)(()=>(0,s.ET)(h));(0,s.fK)(h,g,n);let f=(0,o.o3)(o.nt.trackableDebug),E=(0,s.MF)(()=>(0,s.R8)({componentName:"Trackable",name:e,error:_,alsoTrackedProperties:g()}));return u=(0,c.C)({children:u,isDebugMode:f,name:e,color:_?"red":"green",depth:h.length,getTooltipText:E}),i.createElement(l.f.Provider,{value:p},u)}},800576:(e,r,n)=>{function i(e){return null==e?"":new URL(e).origin}function a(e){if(0!==e.indexOf("data:"))throw Error("Invalid data URL: `data:` prefix missing");let[r,n]=e.slice(5).split(",");if(!n)throw Error("Invalid data URL: data part missing");let i=!!r&&r.length>0,a=i&&r.endsWith(";base64"),o=a?r.slice(0,-7):i?r:void 0;return new Blob([a?function(e){let r=atob(e),n=r.length,i=new Uint8Array(n);for(let e=0;e<n;e++)i[e]=r.charCodeAt(e);return i}(n):decodeURIComponent(n)],{type:o})}n.d(r,{G_:()=>a,Jk:()=>i})},547807:(e,r,n)=>{n.d(r,{Rq:()=>E,YV:()=>f,_5:()=>I,q$:()=>y,td:()=>i,vh:()=>v});var i,a=n(953657),o=n.n(a),s=n(595977),l=n.n(s),c=n(612543),d=n.n(c),u=n(27087),m=n(330654),p=n(776250),h=n(966712),_=n(553716);class g{constructor(e,r,n,i=!1){this.featureFlagKey=n,this.enforce=i,this._input=null,this._output=null;let a="function"==typeof r?r(m):r;this.validator=new b(e,a,this.enforce?"error":"warn")}async validate(e){let r=await e({xr:u.IF});if("string"==typeof this.featureFlagKey&&!(0,h.kc)()[this.featureFlagKey]||200!==r.status)return r;try{let e=await this.validator.validate(()=>Promise.resolve(r));if(this.enforce)return e;return{...e,data:{...r.data,...e.data}}}catch(e){if(this.enforce)throw e;return r}}}function f(e,r,n,i=!1){let a="function"==typeof r?r(m):r;return new g(e,m.object({meta:a}),n,i)}function E(e,r,n,i=!1){let a="function"==typeof r?r(m):r;return new g(e,m.object({meta:a,pagination:m.object({nextPage:m.string().nullable(),prevPage:m.string().nullable()})}),n,i)}function y(e,r){return new b(e,m.object({meta:r}),"error")}class b{constructor(e,r,n){this.debugKey=e,this.schema=r,this.logLevel=n,this._input=null,this._output=null}async validate(e){let r=await e({xr:u.IF}),n=this.schema.safeParse(r.data);if(n.success){let e=n.data,{data:i,...a}=r;return{...a,data:{...e}}}throw(0,p.sx)("Validator Failure",{name:this.debugKey,level:this.logLevel,error:JSON.stringify(n.error.flatten())},{forwardToDatadog:!0,batchRequest:!0}),"error"===this.logLevel&&(0,_.x1)("APIGetValidationFailure",`Validation failed for api response for ${this.debugKey}`,function(e){let r={};return e.issues.forEach(e=>{let n=e.path.map(e=>"number"==typeof e?"[#]":e).join(".");r[n]||=new Set,r[n].add(e.message)}),Object.keys(r).reduce((e,n)=>(e[n]=[...r[n]],e),{})}(n.error),{reportAsSentryError:!0}),n.error}}function v(){return{_input:null,_output:null,validate:e=>e({xr:u.IF})}}(e=>{e.toAPIParameters=function(e,r=[]){if(void 0===e)return e;let n=new Set(r);return Object.keys(e).reduce((r,i)=>{let a=n.has(i)?i:d()(i),o=e[i];switch(void 0!==o&&(r[a]=o),typeof o){case"undefined":break;case"number":case"boolean":r[a]=o.toString();break;default:r[a]=o}return r},{})},e.toCamelCase=function(e){return e.transform(e=>l()(e,(e,r)=>o()(r)))}})(i||(i={}));let I=v()},153808:(e,r,n)=>{n.d(r,{l9:()=>E,hk:()=>y,R4:()=>b,FL:()=>A,ur:()=>S,O5:()=>w});var i=n(411855),a=n(953723),o=n(686759),s=n(776250);class l{constructor(e,r){this._timeOfLastDisconnectMs=null,this._timeOfLastConnectionMs=null,this._timeOfFirstConnectionMs=null,this._definedConnectionAttemptEventName=e,this._definedDisconnectEventName=r}handleSocketDisconnect(e){if(null==this._timeOfLastConnectionMs)return;this._timeOfLastDisconnectMs=this.nowMs();let r=(this._timeOfLastDisconnectMs-this._timeOfLastConnectionMs)/1e3,n=this.nowMs()/1e3;s.az.trackDefinedEvent(this._definedDisconnectEventName,{connectionDurationSeconds:r,windowIsActive:e,sessionLengthSeconds:n})}handleSocketConnectionAttempt(e,r,n,i){if(!e&&r<3)return;let a=null==this._timeOfLastDisconnectMs?0:this._timeOfLastDisconnectMs,o=(this.nowMs()-a)/1e3;e&&(this._timeOfLastConnectionMs=this.nowMs(),null==this._timeOfFirstConnectionMs&&(this._timeOfFirstConnectionMs=this._timeOfLastConnectionMs));let l=this.nowMs()/1e3;s.az.trackDefinedEvent(this._definedConnectionAttemptEventName,{success:e,timeSinceDisconnectSeconds:o,numberOfConnectionAttempts:r,firstTimeConnecting:n,windowIsActive:i,sessionLengthSeconds:l})}nowMs(){return Math.round(performance.now())}}var c=n(647899),d=n(221825),u=n(56029),m=n(682331),p=n(289329),h=n(553716),_=n(30637),g=null,f=null;let E=new m.L;function y(){return g}function b(){return null}class v{bindContext(e,r){(0,d.R)(e,r,(0,a.iL)().GL)}getNewProgramId(){let e=(0,a.iL)().GL;return e.getNewId(e.programs)}}let I=class e{getDynamicConfigBoolean(r,n,i){return c.w$.getDynamicConfigBoolean(r,n,i,e.SourceLoggingString)}getDynamicConfigNumber(r,n,i){return c.w$.getDynamicConfigNumber(r,n,i,e.SourceLoggingString)}getDynamicConfigString(r,n,i){return c.w$.getDynamicConfigString(r,n,i,e.SourceLoggingString)}getExperimentBoolean(r,n,i){return c.w$.getExperimentBoolean(r,n,i,e.SourceLoggingString)}getExperimentNumber(r,n,i){return c.w$.getExperimentNumber(r,n,i,e.SourceLoggingString)}getExperimentString(r,n,i){return c.w$.getExperimentString(r,n,i,e.SourceLoggingString)}clearFeatureGatesForTesting(){c.w$.clear()}updateFeatureGateForTesting(e,r){c.w$.updateFeatureGateForTesting(e,r)}getFeatureGateFromInitialOptions(e){return c.w$.getFeatureGateFromInitialOptions(e)}setInRenderServerForViewerTests(){c.w$.setInRenderServerForViewerTests()}};async function T(){if(!Fig.createViewer)try{let e=Fig.tsViewerScriptURL;await (0,o.k0)(e)}catch(e){throw e}}function S(e,r,n,a){let[o,s]=i.useState(null),c=i.useRef({viewerMode:e,containerElement:r,loadTimeTracker:u.Su,statsigViewerWebConfig:new I,socketConnectionTracker:new l("prototype.multiplayer_socket_connection_attempt","prototype.multiplayer_socket_disconnect"),safeModeOptions:p.ld,emscriptenGL:new v,logError:(e,r,n,i,a)=>{switch(e){case"DEBUG":(0,h.ED)(r,n,i,a);break;case"INFO":(0,h.Lo)(r,n,i,a);break;case"WARN":(0,h.xi)(r,n,i,a);break;case"ERROR":(0,h.x1)(r,n,i,a)}},...n});i.useEffect(()=>{let e=c.current;(async function(){let{containerElement:r}=c.current;g&&!a?(JSON.stringify({...e,containerElement:null})===JSON.stringify(f)||(0,_.nl)()||console.warn("useViewer called with different options than the first call!"),r&&g.setNewContainerElement(r)):(f={...e,containerElement:null},await T(),g=await Fig.createViewer(e)),s(g)})()},[a]),i.useEffect(()=>{o&&r&&o.setNewContainerElement(r)},[o,r]);let d=r?.getBoundingClientRect();return i.useLayoutEffect(()=>{o?.forceFrame()},[o,d?.x,d?.y,d?.height,d?.width]),o}function w(e,r,n){i.useEffect(()=>(e?.on(r,n),()=>{e?.off(r,n)}),[e,r,n])}function A(e){let r=document.createElement("div");r.setAttribute("id","viewer_debug_stats"),document.body.appendChild(r),r.style.cssText=`
  font-size: 18px;
  position: fixed;
  left: 6px;
  top: 48px;
  background-color: black;
  color: white;
  border-radius: 3px;
  display: flex;
  flex-direction: column;
  padding: 6px;
  `,setInterval(()=>{for(;r.firstChild;)r.removeChild(r.firstChild);let n=e.getStatsForDebugging();for(let e in n){let i=document.createElement("div");i.innerHTML=`
      <div>
        <span>
          ${e}: &nbsp;
        </span>
        <span>
          ${n[e]}
        </span>
      </div>
      `,r.appendChild(i)}},1e3/30)}I.SourceLoggingString="viewer"},218736:(e,r,n)=>{n.d(r,{H:()=>d});var i=n(469222),a=n(776250),o=n(737947),s=n(966712),l=n(693160),c=n(743282);function d(e){if(!(0,s.kc)().web_vitals_report)return;let r=o.Ay.location.pathname+o.Ay.location.search,n=!!document.querySelector('meta[name="is_preload_streaming"]'),d=!!document.querySelector('meta[name="is_serving_resized_image"]');function u(i){let c={name:i.name,google_rating:i.rating,navigation:i.navigationType,id:i.id,value:i.value,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d,statsig_client_bootstrap:(0,s.w0)().statsig_client_bootstrap??!0,statsig_has_bootstrap_values:!!(0,s.tl)().statsig_bootstrap_values};(0,a.sx)("Web Vital Metrics",c,{forwardToDatadog:!0,sendAsBeacon:!0})}function m(i,s){let u={name:s,google_rating:"not-applicable",navigation:function(){let e=window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];return e?document.prerendering||(e.activationStart||0)>0?"prerender":document.wasDiscarded?"restore":e.type.replace(/_/g,"-"):"navigate"}(),value:i.timeStamp,initialPath:r,normalized_current_path:(0,l.qR)(o.Ay.location.pathname),id:(0,c.g)(),bundle:e,used_codesplitting:!0,bundle_streaming:n,resized_images:d};(0,a.sx)("Web Vital Metrics",u,{forwardToDatadog:!0,sendAsBeacon:!0})}(0,i.lt)(u),(0,i.fK)(u),(0,i.zB)(u),(0,i.IN)(u),(0,i.Ck)(u),(0,i.rH)(u),document.addEventListener("DOMContentLoaded",e=>m(e,"DCL")),window.addEventListener("load",e=>m(e,"LOAD"))}},15220:(e,r,n)=>{n.d(r,{IJ:()=>g,Vu:()=>u,WQ:()=>p,ap:()=>m,dK:()=>h,x2:()=>_,xt:()=>d});var i=n(776250),a=n(966712),o=n(742808),s=n(221825),l=n(18978),c=n(574705),d=(e=>(e[e.SUCCESS=0]="SUCCESS",e[e.NO_WEBGL=1]="NO_WEBGL",e[e.STENCIL_TEST_FAILURE=2]="STENCIL_TEST_FAILURE",e))(d||{});function u(){return!!(0,a.kc)().use_webgpu&&void 0!==navigator.gpu}function m(){return!!(0,a.kc)().webgl2_override||l.X.isWebGL2Supported()}function p(){return l.X.isWebGL2Supported()}function h(){return null==window.webGLTestResult&&(window.webGLTestResult=function(){var e=0;try{let r=function(){let e=document.createElement("canvas");try{return e.getContext("webgl")}catch(e){}return null}();r||(e=1),0!==e||r?.isContextLost()||function(e){let r=e.getExtension("WEBGL_debug_renderer_info"),n=r&&(e.getParameter(r.UNMASKED_RENDERER_WEBGL)+"").toLowerCase(),i={gpu_vendor:n?/\bamd\b|\bati\b/.test(n)?"amd":/\bnvidia\b/.test(n)?"nvidia":/\bintel\b/.test(n)?"intel":"unknown":"unknown",gpu_api:n?/direct3d9/.test(n)?"d3d9":/direct3d11/.test(n)?"d3d11":/opengl/.test(n)?"opengl":"unknown":"unknown"};(0,o.Rh)("page_load",i).catch(e=>console.error("Error trying to send tags",i,e))}(r)}catch(e){}return e}()),window.webGLTestResult}function _(){let e=(0,s.j)(m());return!!e?.getExtension("WEBGL_compressed_texture_astc")}function g(){let e="webgl_not_supported",r="unknown",n="unknown",a="unknown";if(0===window.webGLTestResult){e=l.X.initializationStatus();let i=(0,c.N)();i&&(r=i.renderer,n=i.vendor,a=i.version)}i.az.trackDefinedEvent("rendering_and_animation.webgl_initialization",{status:e,renderer:r,vendor:n,version:a})}},747396:(e,r,n)=>{n.d(r,{jm:()=>i}),n(411855),n(939863);let i={showNotificationSettings:!1,disableCommentsWhenHandToolEnabled:!1,repositionViewportOnCommentSelection:!1,clusterBy:"page",orphanedBy:"deleted_pages"}},750252:(e,r,n)=>{function i(e){let r=document.visibilityState;e?(delete document.visibilityState,delete document.hidden):Object.defineProperties(document,{visibilityState:{value:"hidden",configurable:!0},hidden:{value:!0,configurable:!0}}),r!==document.visibilityState&&(a=!1,document.dispatchEvent(new Event("visibilitychange",{bubbles:!0}))),a=!e}n.d(r,{R:()=>i});let a=!1;window.addEventListener("visibilitychange",function(e){a&&(e.stopPropagation(),e.stopImmediatePropagation())},{capture:!0,passive:!0})},214673:(e,r,n)=>{n.d(r,{g:()=>i});var i=(e=>(e[e.PNG=0]="PNG",e[e.JPEG=1]="JPEG",e[e.PDF=2]="PDF",e))(i||{}),a=(e=>(e[e.SAVED=0]="SAVED",e[e.SAVING=1]="SAVING",e[e.PAUSED=2]="PAUSED",e))(a||{})},503316:(e,r,n)=>{var i=(e=>(e[e.FEATURE_DISABLED=0]="FEATURE_DISABLED",e[e.READ_ONLY_FILE=1]="READ_ONLY_FILE",e))(i||{}),a=(e=>(e[e.MOBILE_NATIVE_NAVBAR=0]="MOBILE_NATIVE_NAVBAR",e))(a||{}),o=(e=>(e[e.BEGAN=0]="BEGAN",e[e.MOVED=1]="MOVED",e[e.ENDED=2]="ENDED",e[e.CANCELLED=3]="CANCELLED",e[e.MOVED_COALESCED=4]="MOVED_COALESCED",e))(o||{})},347240:(e,r,n)=>{n.d(r,{H:()=>a}),n(411855),n(188507);var i=n(922827);n(38329),n(798099),n(356390),n(737499),n(503316);let a=[i.NLJ.VECTOR_PENCIL,i.NLJ.HIGHLIGHTER,i.NLJ.WASHI_TAPE,i.NLJ.ERASER,i.NLJ.LASSO];i.NLJ.VECTOR_PENCIL,i.NLJ.HIGHLIGHTER,i.NLJ.WASHI_TAPE},555024:(e,r,n)=>{n.d(r,{t:()=>i});function i(){let e=window.FigmaMobile;return e?.shouldAllowSimulatedRightClick??!0}},182827:(e,r,n)=>{n.d(r,{y:()=>h}),n(429075);var i=n(411855),a=n(776250),o=n(564577),s=n(163023),l=n(939863),c=n(585091),d=n(787337),u=n(424755),m=(e=>(e.FILE="file",e.PROTOTYPE="prototype",e))(m||{});function p(e){let{access_type:r,accessed_via:n}=e,a=i.useMemo(()=>{let r={icon:d.A,message:function(e){switch(e){case"file":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_file");case"prototype":return(0,l.t)("proto.embeds.visible_to_people_invited_to_this_prototype")}}(e.type)},i={icon:d.A,message:n?(0,l.t)("proto.embeds.visible_to_org_name",{orgName:n.name}):(0,l.t)("proto.embeds.visible_to_everyone_in_your_org")};return{edit:null,view:null,org_edit:i,org_view:i,inherit:r,invite_only:r,workspace_edit:null,workspace_view:null}},[n,e.type]);if(!r)return null;let o=a[r];if(!o)return null;let{icon:c,message:u}=o;return i.createElement("div",{className:"embed_documentation_footer--documentationAccessLevel--a1Kwf"},i.createElement(s.B,{className:"embed_documentation_footer--documentationAccessLevelIcon--G-bLc",svg:c}),i.createElement("span",{className:"embed_documentation_footer--documentationAccessLevelReason--H-eVa ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},u))}function h(e){let r=`/${e.isPrototype?"proto":"file"}/${e.fileKey}${e.params.startsWith("?")?e.params:`?${e.params}`}`;return i.createElement("a",{className:"embed_documentation_footer--documentationFooter--cRlI0",target:"_blank",rel:"noopener",href:r,onClick:()=>{(0,a.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:e.fileKey,kind:e.isPrototype?"proto":"file",embed_host:(0,c.jr)().embed_host})}},i.createElement("div",{className:"embed_documentation_footer--documentationFooterRight--llo4e"},i.createElement(p,{...e,type:e.isPrototype?"prototype":"file"})),i.createElement("div",{className:"embed_documentation_footer--documentationFooterLeft--LSi6J"},i.createElement(s.B,{className:"embed_documentation_footer--documentationFooterIcon--KNE1D",svg:u.A}),i.createElement("span",{className:"embed_documentation_footer--documentationFooterTitle--cJTEV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},e.fileName),e.touchedAt&&i.createElement("span",{className:"embed_documentation_footer--documentationFooterUpdatedAt--AroJM text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,l.tx)("proto.embeds.last_edited",{relativeTime:i.createElement(o.h1,{date:e.touchedAt})}))))}},585091:(e,r,n)=>{n.d(r,{jr:()=>o}),n(511617);var i=n(737947),a=n(179940);function o(){return(0,a.v6)(i.Ay.location.search)}var s=(e=>(e.SET_CANVAS_SPACE_CENTER="SET_CANVAS_SPACE_CENTER",e.SET_CURRENT_PAGE_ID="SET_CURRENT_PAGE_ID",e.ADJUST_ZOOM="ADJUST_ZOOM",e.SET_ZOOM="SET_ZOOM",e.RESET_ZOOM_TO_FIT_CANVAS_CONTENT="RESET_ZOOM_TO_FIT_CANVAS_CONTENT",e.SET_COMMENT_MODE="SET_COMMENT_MODE",e.SET_CURSOR_STYLE="SET_CURSOR_STYLE",e.SET_SCROLL_TO_PAN="SET_SCROLL_TO_PAN",e))(s||{})},463546:(e,r,n)=>{function i(e,r){return{id:e,...r}}n.d(r,{$T1:()=>I,BWk:()=>R,DFF:()=>b,GCV:()=>C,KdZ:()=>w,Kze:()=>g,MJs:()=>p,MxF:()=>E,Njd:()=>m,QpH:()=>L,SqV:()=>O,UDe:()=>a,aI5:()=>c,ar0:()=>s,b0J:()=>D,bIZ:()=>S,dvJ:()=>k,ePo:()=>N,hPP:()=>l,iuG:()=>T,jkr:()=>P,kp0:()=>u,lLk:()=>d,t0T:()=>v,tBR:()=>y,tyv:()=>f,tzJ:()=>A,wRI:()=>_,y3_:()=>o,zoI:()=>h});let a=i("LibrariesWorkspaceOnboarding",{team:"scale",allowShowingIfModalPresent:!0}),o=i("MobileProtoDownloadModalPrompt",{team:"desktop"}),s=i("MultiplayerObservationNux",{team:"feedback",queueOnBlock:!0}),l=i("MultiplayerSpotlightNudgeNux",{team:"feedback"}),c=i("MultiplayerSpotlightNux",{team:"feedback",queueOnBlock:!0}),d=i("OnboardFigJamEditor",{team:"figjam",queueOnBlock:!0}),u=i("OnboardFigJamEditorBrowseTemplates",{team:"figjam",queueOnBlock:!0}),m=i("OnboardFigJamEditorMakeSomething",{team:"figjam",queueOnBlock:!0}),p=i("OnboardFigJamViewer",{team:"figjam",queueOnBlock:!0}),h=i("OnboardFigJamEditorUnified",{team:"figjam",queueOnBlock:!0}),_=i("OnboardFigJamEditorUnifiedPanAndZoom",{team:"figjam",queueOnBlock:!0}),g=i("OnboardFigJamEditorUnifiedProduct",{team:"figjam",queueOnBlock:!0}),f=i("PrototypePreloadedOverlay",{team:"scenegraph_and_sync"}),E=i("ProOnboardingPrototypeOnlyLinksOverlay",{team:"monetization_upgrades"}),y=i("SearchWorkspaceOnboarding",{team:"scale"}),b=i("SprigSurveysOverlay",{team:"community",queueOnBlock:!1,allowShowingIfModalPresent:!0}),v=i("ViewerToEditorOverlay",{team:"monetization_upgrades"}),I=i("MobileReplyUpsellHint",{team:"desktop"}),T=i("FontIndexUpdateSummer2024Overlay",{team:"text_and_vector",lifecycle:{userFlagName:"seen_font_index_update_summer2024_overlay",maxTimes:1}}),S=i("FeedPostDetailZoomPanNudge",{team:"explore",allowShowingIfModalPresent:!0}),w=i("SharingClarityBranchModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),A=i("SharingClarityFileAudienceOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),C=i("SharingClarityFileModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),N=i("SharingClarityPrototypeModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),L=i("SharingClarityProjectCreationPermissionOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),O=i("SharingClarityProjectCreationTeamAccessOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),R=i("SharingClarityProjectModalOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),P=i("SharingClarityTeamCreationOverlay",{team:"workflow",allowShowingIfModalPresent:!0}),D=i("FilePreviewOverlay",{team:"search",lifecycle:{userFlagName:"seen_file_preview_overlay",maxTimes:1}}),k=i("DevModeOnboardingTooltipOverlay",{team:"activation",queueOnBlock:!0,lifecycle:{userFlagName:"dev_mode_has_seen_onboarding_tooltip",maxTimes:1}})},877723:(e,r,n)=>{n.d(r,{u4:()=>u}),n(411855),n(138020);var i=n(966712),a=n(418956),o=n(716034);n(915440),n(809831);var s=n(694687);n(99506),n(279453),n(556261),n(56099);var l=n(984968);n(239737);var c=n(554905),d=n(782112);function u(){let e=(0,a.md)(p),r=(0,s.sZ)()||null,n=(0,l.ol)()||null,o=(0,c.Td)(),u=!(0,d.lt)({currentOrg:r,currentTeam:n,isViewer:o});return(0,i.kc)().qa_ai_metering?{loading:"loading"===e,isSlidesAiEnabled:"has_permission"===e}:{loading:!1,isSlidesAiEnabled:u}}var m=(e=>(e.LOADING="loading",e.HAS_PERMISSION="has_permission",e.NO_PERMISSION="no_permission",e))(m||{});let p=(0,o.eU)("loading")},175103:(e,r,n)=>{n.d(r,{Wv:()=>C,ZH:()=>A,gK:()=>w});var i=n(411855),a=n(188507),o=n(75395),s=n(629019),l=n.n(s),c=n(133537),d=n(62557),u=n(286640),m=n(761870),p=n(195847),h=n(690598),_=n(641170),g=n(452441),f=n(939863),E=n(101505),y=n(672517),b=n(988022),v=n(187348),I=n(594897),T=n(74491);let S=i.forwardRef(function({className:e,showUpdatedInputDesign:r,...n},a){return r?i.createElement(_.LN,{className:e,...(0,d.d)(n),ref:a}):i.createElement(g.L,{className:l()(I.hF,e),...(0,d.d)(n),ref:a})});function w(e){let r=T.a,n=`${e.isInvalid?r:""}`,a={...e,className:n};return delete a.isInvalid,i.createElement(S,{...(0,d.d)(a)})}function A(e){let[r,n]=(0,i.useState)(null),s=(0,a.wA)(),l=(0,a.d4)(e=>e.auth.formState),d=(0,a.d4)(e=>e.auth.clickedSAMLSignIn),_=(0,a.d4)(e=>e.auth.email),g=(0,a.d4)(e=>e.auth.invalidInput),{trackEvent:T}=(0,y.j6)(),S=e=>{e&&l===p.qB.SIGN_IN&&s(m.E({formState:p.qB.SAML_START}))},A=async e=>{if(s(m.BZ({value:e})),!d&&(0,c.xf)(e)){await (0,h.sT)({email:e},l?.toString()||"unknown");try{let r=u.Q_()?.getItem(`SIGN-IN ${e}`);if(r){S("true"===r);return}let{data:n}=await v.F.getOrgSamlConfigRequired({email:e});u.Q_()?.setItem(`SIGN-IN ${e}`,n.meta.saml_sso_only),S(!!n.meta.saml_sso_only)}catch(e){l===p.qB.SAML_START&&s(m.E({formState:p.qB.SIGN_IN}))}}},C=()=>{let e=_.split("@")[0];A(`${e}@${r}`),n(null),T(b.Ws,{trackingDescriptor:E.c.USE_SUGGESTED_EMAIL,previousDomain:e,newDomain:r})},N=e.placeholder??(0,f.t)("auth.email-input-placeholder");return i.createElement(i.Fragment,null,i.createElement(w,{onChange:e=>A(e.currentTarget.value),onBlur:r=>{if(e.onBlur?.(r,!0),e.showDomainSuggestions){let e=_.split("@")[1];n((0,c.bs)(e))}},value:_,name:p.RE.EMAIL,placeholder:N,type:"email",id:"email",autoComplete:"username",autoCapitalize:"off",autoCorrect:"off",isInvalid:p.RE.EMAIL===g,showUpdatedInputDesign:e.showUpdatedInputDesign,"aria-invalid":p.RE.EMAIL===g,"aria-describedby":e.ariaDescribedBy}),r&&i.createElement("div",{"data-testid":"domain-suggestion",className:I.rt},(0,f.tx)("auth.email-domain-suggestion-prompt",{domainSuggestion:i.createElement(o.E,{className:I.nf,onClick:()=>C()},r)})))}function C(e){let[r,n]=(0,i.useState)(""),o=(0,a.wA)(),s=(0,a.d4)(e=>e.auth.invalidInput),l=e.placeholder??(0,f.t)("auth.password-input-placeholder"),c=e.isSignUp?"new-password":"current-password";return i.createElement(w,{name:p.RE.PASSWORD,type:"password",placeholder:l,autoCapitalize:"off",autoCorrect:"off",autoComplete:c,id:"current-password",value:r,onChange:function(e){n(e.currentTarget.value),o(m.OZ({googleIdToken:null}))},onBlur:e.onBlur,isInvalid:s===p.RE.PASSWORD,showUpdatedInputDesign:e.showUpdatedInputDesign,"aria-invalid":s===p.RE.PASSWORD,"aria-describedby":e.ariaDescribedBy})}},295698:(e,r,n)=>{n.d(r,{bv:()=>E,IU:()=>f});var i=n(411855);n(188507);var a=n(91408),o=n(268537),s=n(874991),l=n(154254),c=n(939863);n(896474);var d=n(672517);n(10648),n(318812),n(698812),n(99506);var u=n(498606),m=n(298543);n(303159);var p=n(467703),h=n(465983);let _=(0,a.hG)(h.km),g=(0,a.hG)(h.hX);function f(e){return i.createElement(d.jm,{className:e.disabled?"shared_table--optionDisabled--OhX66 shared_table--_optionBase--z8wdT shared_table--_disabled--EkV7j":"shared_table--option--hw4Sr shared_table--_optionBase--z8wdT",onClick:e.onClick,trackingProperties:e.trackingProperties,disabled:e.disabled,...e.tooltip?{"data-tooltip-type":u.Ib.TEXT,"data-tooltip":e.tooltip,"data-tooltip-show-above":!0}:{}},e.label)}function E(e){let r=e.dropdownShown?.type===e.dropdownType,n=(0,c.t)("multi_select_list.filter_default"),a=null===e.selectedValue?n:e.getDisplayText(e.selectedValue),d=e.hideDefaultOption?e.values.length*_:(e.values.length+1)*_+g;return i.createElement(s.V,{dispatch:e.dispatch,type:e.dropdownType,showingDropdown:r},i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l.cx.maxW200.ellipsis.overflowHidden.$},e.getSelectedDisplayText?i.createElement("span",{className:l.cx.noWrap.$},e.getSelectedDisplayText(e.selectedValue)):i.createElement(i.Fragment,null,i.createElement("span",{className:l.cx.noWrap.$},e.label,":")," ",i.createElement("span",{className:l.cx.noWrap.$},a))),r&&i.createElement(o.gw,{stopScrollPropagation:!0,dispatch:e.dispatch,className:p.sI,style:e.dropdownShown.data.position},i.createElement(m.g1,{maxDropdownHeight:e=>Math.round(.5*e),dropdownChildrenHeight:d},!e.hideDefaultOption&&i.createElement(i.Fragment,null,i.createElement(o.rr,{checked:null===e.selectedValue,onClick:()=>e.updateFilter(null),trackingProperties:{filterType:e.dropdownType}},n),i.createElement(o.wv,null)),e.values.map(r=>i.createElement(o.ru,{key:e.getDisplayText(r),checked:e.selectedValue===r,onClick:()=>e.updateFilter(r),primaryText:e.getDisplayText(r),secondaryText:null===e.selectedValue&&e.getCount?e.getCount(r).toString():"",trackingProperties:{filterType:e.dropdownType,text:e.getDisplayText(r)}})))))}var y=(e=>(e.NONE="NONE",e.UNASSIGNED="UNASSIGNED",e.WORKSPACE="WORKSPACE",e))(y||{})},485727:(e,r,n)=>{n.d(r,{G:()=>s});var i=n(411855),a=n(939863),o=n(809840);function s(){return i.createElement(i.Fragment,null,i.createElement(o.E,{color:"handoff",fontWeight:"medium",fontSize:11},(0,a.tx)("checkout.dev_mode_included_text_formatted.dev_mode"))," ",i.createElement(o.E,{color:"secondary",fontSize:11},(0,a.tx)("checkout.dev_mode_included_text_formatted.included")))}},858977:(e,r,n)=>{n(411855),n(154254),n(629019),n(568214),n(809840)},768137:(e,r,n)=>{n.d(r,{$$:()=>s,nR:()=>c,pz:()=>u,tM:()=>d,vd:()=>l});var i=n(411855),a=n(672517),o=n(150823);function s(e){let{className:r,...n}=e;return i.createElement("button",{className:`${o.xZ} ${r}`,type:"button",...n},e.children)}let l=(0,a.tf)(s);function c(e){let{className:r,...n}=e;return i.createElement("button",{className:`${o.HM} ${r}`,type:"button",...n},e.children)}let d=(0,a.tf)(c);function u(e){let{className:r,...n}=e;return i.createElement("button",{className:`${o.AJ} ${r}`,type:"button",...n},e.children)}},457921:(e,r,n)=>{n.d(r,{S:()=>m});var i=n(411855),a=n(629019),o=n.n(a),s=n(163023),l=n(516398),c=n(16435),d=n(949207),u=n(432023);function m({children:e,isInitiallyOpen:r,title:n,titleClassName:a}){let[m,p]=i.useState(r),h=()=>p(e=>!e);return i.createElement("div",null,i.createElement("div",{className:o()(c.S,a),onClick:h,onKeyDown:e=>(0,l.hx)({e,onClickHandler:h}),role:"button",tabIndex:0},i.createElement(s.B,{className:c.G,svg:m?d.A:u.A}),n),m&&e)}},736174:(e,r,n)=>{n.d(r,{Q:()=>R});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(418956),c=n(498750),d=n(153234),u=n(723325),m=n(662275),p=n(146817),h=n(473744),_=n(151283),g=n(534804),f=n(543817),E=n(335682),y=n(416095),b=n(933342),v=n(135076),I=n(180715),T=n(776018),S=n(790429),w=n(811529),A=n(603396),C=n(718242),N=n(875387),L=n(486107),O=n(382232);function R({enableKeyboardNavigation:e,colIndex:r,rowIndex:n,isList:a,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}){return e?i.createElement(P,{colIndex:r,rowIndex:n,isList:a,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:l}):i.createElement(D,{enableKeyboardNavigation:e,isList:a,isTileSelected:o,renderedElement:s})}function P({colIndex:e,rowIndex:r,isList:n,isTileSelected:o,renderedElement:s,shouldRefocusAfterKeyboardInsert:I}){let L=i.useContext(v.U),O=(0,a.d4)(e=>e.modalShown),R=(0,a.d4)(E.sS),P=(0,S.J)(s.item,s.sectionPosition,s.sectionNameForTracking),k=(0,A.n)(s.item),M=(0,f.u)({canSwap:!0,openFileKey:R??"",sourceForTracking:"Asset Panel",insertAsChildOfCanvas:!0}),F=i.useCallback(()=>{O?.type!==T.V||k||P()},[k,O?.type,P]),x=i.useCallback(()=>{O?.type!==T.V&&L?.onOpenFlyout(s.item,s.sectionPosition,s.sectionNameForTracking)},[L,O?.type,s.item,s.sectionPosition,s.sectionNameForTracking]),{keyboardNavigationItem:U,setKeyboardNavigationElement:B}=(0,u.M3)({path:[1,r],column:n?null:e,id:(0,p.V)(s.item),onFocus:F}),V=function({onComponentInsertSwap:e,onOpenFlyout:r,keyboardNavigationItem:n,item:o,sectionNameForTracking:s,sectionPosition:d,shouldRefocusAfterKeyboardInsert:u,rowIndex:p,colIndex:f,isList:E,sourceForTracking:v}){let I=(0,a.wA)(),S=(0,a.d4)(e=>e.modalShown),A=(0,l.md)(N.TG),L=(0,g.Ew)({assetKey:(0,b.u2)(o),assetLibraryKey:o.library_key,assetType:o.type,isList:E,sectionNameforTracking:s,sectionPosition:d,sourceForTracking:v??w.mZ,aiScore:o.ai_score??void 0,lexicalScore:o.lexical_score??void 0,isExample:(0,h.o)(o,A),partnerType:(0,_.X)(o.library_key)}),O=(0,C.ZV)(L);return i.useCallback(i=>{if((i.keyCode===c.Uz.ENTER||i.keyCode===c.Uz.SPACE)&&(0,y.dx)(o)){if(i.metaKey){r();return}if(e(i,o),O(i),u&&!(0===p&&0===f)){let e=E?n?.getItemAbove():n?.getItemToTheLeft();e?.focus()}else n?.blur();S?.type===T.V&&I(m.AS())}},[f,I,O,E,o,n,S?.type,e,r,p,u])}({colIndex:e,rowIndex:r,isList:n,keyboardNavigationItem:U,onComponentInsertSwap:M,onOpenFlyout:x,...s,shouldRefocusAfterKeyboardInsert:I}),G=i.useCallback(e=>{(0!==e.detail||e.nativeEvent.pointerType)&&(U?.focus(),x())},[x,U]),H=`componentScrollContainerTile.${e}.${r}`,K=d.rf(H,"click",G);return i.createElement(D,{enableKeyboardNavigation:!0,isList:n,isShownInFlyout:k,isTileSelected:o,onKeyDown:V,onClick:K,onSetKeyboardNavigationElement:B,renderedElement:s})}function D({enableKeyboardNavigation:e,isList:r,isShownInFlyout:n,isTileSelected:a,onKeyDown:o,onClick:c,onSetKeyboardNavigationElement:d,renderedElement:u}){let m=(0,l.md)(I.T),p=a?.(u)??!1;i.useEffect(()=>{r?u.element=i.cloneElement(u.element,{}):u.element=i.cloneElement(u.element,{selected:p})},[r,p,u]);let h={top:u.top,left:u.left,height:r?u.height:void 0},_=s()(r?O.fJ:O.ND,{[L.QT]:!r,[O.r6]:r&&n,[O.HR]:r&&n&&m});return e||o||c?i.createElement("button",{key:u.key,style:h,className:_,onKeyDown:o,onClick:c,ref:d},u.element):i.createElement("div",{key:u.key,style:h,className:_},u.element)}},164377:(e,r,n)=>{var i=n(411855);n(563706);var a=n(629019),o=n.n(a),s=n(568214),l=n(498750),c=n(860601),d=n(153234),u=n(551608),m=n(896474),p=n(809840),h=n(751859);i.forwardRef(function(e,r){let{disabled:n,onClick:a,onMouseDown:_,onKeyDown:g,icon:f,recordingKey:E,children:y,onFocus:b,onBlur:v,width:I="hug-contents","data-tooltip":T,"data-tooltip-type":S,"data-onboarding-key":w,dataTestId:A}=e,C=d.rf(E,"click",a||c.lQ),N=E?C:a,L=d.rf(E,"mousedown",_||c.lQ),O=E?L:_,R=i.useCallback(e=>{u.j?.(e)||(g?.(e),e.keyCode===l.Uz.ESCAPE&&e.currentTarget.blur())},[g]);return i.createElement("button",{disabled:n,onClick:N,onMouseDown:O,onKeyDown:R,className:function({width:r,children:n}){let i=[h.e,(0,s.kx)(e.parentBackgroundColor)?h.tS:h.zA];switch(n||i.push(h.J0),r){case"hug-contents":i.push(h.PB);break;case"fill-parent":i.push(h.uC)}return o()(i)}({width:I,children:y}),onFocus:b,onBlur:v,ref:r,"data-tooltip":T,"data-tooltip-type":S,"data-onboarding-key":w,"data-testid":A},f&&i.createElement("div",{className:h.zc},i.createElement(m.In,{icon:f})),y&&i.createElement(p.E,{fontSize:11,fontWeight:"regular",truncate:!0},y))}),n(154254),n(553015)},268537:(e,r,n)=>{n.d(r,{MM:()=>P,OR:()=>T,Ve:()=>I,Vq:()=>A,X3:()=>S,c$:()=>N,gS:()=>L,gw:()=>F,l4:()=>w,ms:()=>C,rr:()=>k,ru:()=>M,wv:()=>O});var i=n(411855),a=n(629019),o=n.n(a),s=n(846627),l=n(498750),c=n(255942),d=n(860601),u=n(153234),m=n(30637),p=n(163023),h=n(865618),_=n(738269),g=n(259927),f=n(672517),E=n(798099),y=n(977955),b=n(247245),v=n(783423);function I(e){let[r,n]=i.useState(!1),a="label"in e,s="dropdownButton"in e;return i.createElement("div",{className:o()(y.gD,e.className,r&&y.FR,e.shouldRenderAutocompleteStyles&&y.Rp),...e.notDraggable?{"data-not-draggable":!0}:{}},a&&i.createElement("div",{className:o()(y.Ts,e.noBorder&&y.E7,e.noRightPadding&&y.zT),onClick:()=>n(!r),role:"menu",tabIndex:0},i.createElement("div",{className:y.ep},!!e.iconLabel&&i.createElement("div",{className:y.Vi},e.iconLabel),i.createElement("p",null,e.label)),i.createElement(p.B,{className:y.tZ,svg:v.A})),s&&i.createElement(e.dropdownButton,{onClick:()=>n(!r)}),r&&i.createElement(i.Fragment,null,i.createElement("div",{className:o()(y.DE,e.dropdownOptionsClassName,e.rightAlignOptions&&y.Wh,e.optionsBelowSelector&&y.fG),onClick:e.stayOpenOnSelect?void 0:()=>n(!r),role:"menu",tabIndex:0},i.createElement(f.fu,{name:e.menuTrackingContextName||"",enabled:!!e.menuTrackingContextName,properties:e.menuTrackingProperties},i.createElement(S,{options:e.options,hideDropdown:()=>n(!1),shouldRenderAutocompleteStyles:e.shouldRenderAutocompleteStyles}))),i.createElement(B,{closeDropdown:()=>n(!1)})))}function T(e){let[r,n]=i.useState(e.focusContainerOnMount?-1:0),a=i.useMemo(()=>i.Children.toArray(e.children||e.options).filter(e=>"boolean"!=typeof e),[e.children,e.options]),o=(0,i.useRef)(Array(a.length)),s=i.useRef(document.activeElement);(0,i.useEffect)(()=>{let e=o.current[r];e&&(e.tabIndex=0,e.focus())},[r,o]);let l=i.useCallback((e,r)=>{let i=o.current[e];i&&(i.tabIndex=-1,i.focus()),n(r)},[]),c=i.useCallback(()=>{let e=r-1;for(let r of o.current)if(null==o.current[e])e=e-1<0?o.current.length-1:e-1;else break;l(r,e)},[r,l]),u=i.useCallback(()=>{let e=r+1;for(let r of o.current)if(null==o.current[e])e=e+1>=o.current.length?0:e+1;else break;l(r,e)},[r,l]);return{childrenComponents:a,getSetChildRef:e=>(e=>{if("boolean"!=typeof e&&(e.type===N||e.type===P)){let r=e.props;return!!(r.disabled||r.header)}return!1})(a[e])?d.lQ:r=>o.current[e]=r,onKeyDown:n=>{switch(n.stopPropagation(),n.nativeEvent&&n.nativeEvent.stopImmediatePropagation(),n.key){case"Escape":e.autofocusPrevElementOnEsc&&s.current?.focus(),e.hideDropdown();break;case"Tab":e.autofocusPrevElementOnTab&&s.current?.focus(),e.hideDropdown();break;case" ":case"Enter":{let n=o.current[r];n&&n.click(),e.autofocusPrevElementOnSelect&&s.current?.focus();break}case"Left":case"ArrowLeft":"horizontal"===e.orientation&&c();break;case"Up":case"ArrowUp":"horizontal"!==e.orientation&&c();break;case"Right":case"ArrowRight":"horizontal"===e.orientation&&u();break;case"ArrowDown":case"Down":"horizontal"!==e.orientation&&u();break;case"Home":case"PageUp":l(r,0);break;case"End":case"PageDown":l(r,o.current.length-1)}},onFocus:e=>{if(e&&e.target){let n=o.current.indexOf(e.target);n>=0&&l(r,n)}}}}function S(e){let{childrenComponents:r,getSetChildRef:n,onKeyDown:a,onFocus:o}=T(e),{children:s,options:l,...c}=e;return i.createElement(C,{...c,onKeyDown:a,tabIndex:-1},i.Children.map(r,(e,r)=>i.cloneElement(e,{buttonRef:n(r),onFocus:o})))}function w(e,r){let[n,a]=i.useState(null);return i.useEffect(()=>{let n=e.current;if(n){let e=n.getBoundingClientRect(),i=r.left,o=r.top;i<8?i=8:i+e.width>window.innerWidth-8&&(i=window.innerWidth-8-e.width),o<8?o=8:o+e.height>window.innerHeight-8&&(o=window.innerHeight-8-e.height),a([i,o])}},[e,r.left,r.top]),i.useMemo(()=>n?{...r,left:n[0],top:n[1]}:{...r,visibility:"hidden"},[n,r])}let A=i.forwardRef(function({style:e,...r},n){let a=i.useRef(null),o=w(a,e);return i.createElement(F,{dropdownRef:(0,c.A)(a,n),style:o,...r})});class C extends u.o6{constructor(){super(...arguments),this.preventDefault=e=>{e.preventDefault()},this.stopPropagation=e=>{e.stopPropagation()},this.stopPropagationForPointerDown=e=>{(0,E.ft)()&&this.stopPropagation(e)},this.onClick=u.cZ(this,"click",e=>{if(!this.props.onClick)return u.aH;this.props.onClick(e)})}render(){return i.createElement("div",{tabIndex:this.props.tabIndex??0,role:"menu",id:this.props.id,className:o()(y.Wm,this.props.className,{[y.DY]:this.props.positionAbsolute,[y._S]:this.props.positionFixed,[y.rU]:this.props.shouldRenderAutocompleteStyles,[g.s4]:this.props.preventZoom}),onClick:this.onClick,onMouseDown:this.stopPropagation,onScroll:this.props.stopScrollPropagation?this.stopPropagation:this.props.onScroll,onWheel:this.props.preventZoom?void 0:this.stopPropagation,onTouchStart:this.stopPropagation,onPointerDown:this.stopPropagationForPointerDown,onContextMenu:this.preventDefault,onKeyDown:this.props.onKeyDown,style:this.props.style,"data-cancel-insertable-resource-drag-and-drop":!0,ref:this.props.dropdownRef,"aria-labelledby":this.props["aria-labelledby"],"data-onboarding-key":this.props.dataOnboardingKey,"data-testid":this.props["data-testid"],onFocus:this.props.onFocus},this.props.children)}}C.displayName="Dropdown";class N extends u.o6{constructor(){super(...arguments),this.mouseOverTimestamp=0,this.state={hover:!1},this.onDragStart=e=>{e.preventDefault()},this.onPointerOver=e=>{this.props.onPointerOver&&this.props.onPointerOver(),this.setState({hover:!0}),this.props.onHover&&this.props.onHover(!0),this.props.href||(this.mouseOverTimestamp=Number(e.timeStamp))},this.onPointerOut=e=>{this.props.onPointerOut&&this.props.onPointerOut(),this.setState({hover:!1}),this.props.onHover&&this.props.onHover(!1)},this.onPointerUp=u.cZ(this,"mouseup",e=>{if(!this.props.href){if(this.props.onPointerUp){this.props.onPointerUp(e);return}if(Number(e.timeStamp)-this.mouseOverTimestamp>20){let r=e.target;null!=r.click&&(this.mouseUpTimer=setTimeout(r.click.bind(r),1))}}}),this.onTouchEnd=e=>{let r=e.target;if(r.click&&(e.preventDefault(),r&&e.changedTouches)){let n=e.changedTouches[0];document.elementFromPoint(n.clientX,n.clientY)===r&&r.click()}},this.onClick=u.cZ(this,"click",e=>{this.props.href&&(0,l.oJ)(e)||(this.props.href?(0,s.e)(this.props.href,e):clearTimeout(this.mouseUpTimer),this.props.onClick?.(e))}),this.ariaRole=()=>this.props.header?"presentation":"role"in this.props?this.props.role??"menuitem":"menuitem"}render(){let e=this.props.disabled||this.props.header,r=o()(e?y.IZ:{[y.wY]:this.state.hover||this.props.simulateHover,[y.uK]:!0},this.props.className);return i.createElement("a",{tabIndex:-1,role:this.ariaRole(),id:this.props.id,ref:this.props.buttonRef,onFocus:this.props.onFocus,"data-search-click-action":this.props["data-search-click-action"],className:r,href:this.props.href,target:this.props.target,rel:"noopener",onClick:e?void 0:this.onClick,onPointerUp:e?void 0:this.onPointerUp,onPointerOver:e?void 0:this.onPointerOver,onPointerOut:e?void 0:this.onPointerOut,onMouseDown:this.props.onMouseDown,onKeyDown:this.props.onKeyDown,onDragStart:this.onDragStart,onTouchEnd:this.onTouchEnd,"data-dropdown-tooltip":this.props.tooltip,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.recordingKey,"data-fullscreen-intercept":this.props["data-fullscreen-intercept"],"aria-disabled":this.props.disabled,"aria-checked":"aria-checked"in this.props?this.props["aria-checked"]:void 0},this.props.children)}}N.displayName="Option";let L=(0,f.tf)(N);class O extends i.PureComponent{constructor(){super(...arguments),this.onClick=e=>{e.stopPropagation()}}render(){let e=y.me;return this.props.className&&(e+=` ${this.props.className}`),i.createElement("div",{className:e,onClick:this.onClick,style:this.props.style,"data-testid":this.props.dataTestId??"dropdown-separator"},i.createElement("div",{className:y.se}))}}O.displayName="Separator";var R=(e=>(e.Checkmark="Checkmark",e.Checkbox="Checkbox",e))(R||{});class P extends u.o6{render(){return i.createElement(N,{...this.props,className:o()(y.o6,"Checkbox"===this.props.displayType&&this.props.nested&&y.cY,this.props.className),"aria-checked":this.props.checked,role:"role"in this.props?this.props.role:void 0},"Checkbox"===this.props.displayType?i.createElement("span",{className:y.z6,"data-preferred-theme":"dark"},i.createElement(h.S,{disabled:this.props.disabled,checked:this.props.checked,mixed:this.props.mixed})):this.props.checked?i.createElement(p.B,{className:y.z6,svg:b.A,dataTestId:"dropdown-check-icon"}):i.createElement("span",{className:y.z6}),this.props.children)}}P.displayName="CheckableOption",P.defaultProps={displayType:"Checkmark"};class D extends u.o6{render(){return i.createElement(P,{...this.props},i.createElement("div",null,this.props.primaryText),!!this.props.secondaryText&&i.createElement("div",{className:y.pH},this.props.secondaryText))}}let k=(0,f.tf)(P),M=(0,f.tf)(D);class F extends u.o6{render(){return i.createElement(i.Fragment,null,i.createElement(C,{...this.props}),U(this.props)?i.createElement(B,{closeDropdown:this.props.closeDropdown,recordingKey:"dropdownModalScrim"}):i.createElement(B,{dispatch:this.props.dispatch,recordingKey:"dropdownModalScrim"}))}}F.displayName="DropdownWithScrim";let x=e=>{e.preventDefault()},U=e=>!!e.closeDropdown;class B extends u.o6{constructor(){super(...arguments),this.mouseMotionSinceMouseDown=0,this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY=5,this.closeDropdown=()=>{U(this.props)?this.props.closeDropdown():this.props.dispatch(_.oB())},this.onMouseDown=u.cZ(this,"mousedown",e=>{this.mouseMotionSinceMouseDown=0,this.closeDropdown(),e.stopPropagation()}),this.onMouseMove=u.cZ(this,"mousemove",e=>{if((0,m.PN)()){if(!(this.mouseMotionSinceMouseDown<this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY))return u.aH;this.mouseMotionSinceMouseDown+=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY}else this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementX),this.mouseMotionSinceMouseDown+=Math.abs(e.nativeEvent.movementY)}),this.onMouseUp=u.cZ(this,"mouseup",e=>{this.mouseMotionSinceMouseDown>=this.MENU_CLOSE_MOUSE_MOVE_SENSITIVITY&&(this.closeDropdown(),e.stopPropagation())})}render(){return i.createElement("div",{className:y.bv,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onContextMenu:x,"data-does-not-dismiss-modal":!0})}}},926051:(e,r,n)=>{n.d(r,{y:()=>v}),n(429075);var i=n(411855),a=n(686754),o=n(343887),s=n(918152),l=n(680433),c=n(697322),d=n(963757),u=n(776250),m=n(511617),p=n(835650),h=n(564577),_=n(154254),g=n(939863),f=n(809840);let E=["org_edit","org_view","inherit","invite_only"],y={org_edit:s.Y,org_view:s.Y,inherit:l.$,invite_only:l.$};function b({accessData:e,isPrototype:r}){let{access_type:n}=e;if(!E.includes(n))return null;let a="";if("org_edit"===n||"org_view"===n){let r=e.accessed_via;a=r?(0,g.t)("proto.embeds.visible_to_org_name",{orgName:r.name}):(0,g.t)("proto.embeds.visible_to_everyone_in_your_org")}else("inherit"===n||"invite_only"===n)&&(a=r?(0,g.t)("proto.embeds.visible_to_people_invited_to_this_prototype"):(0,g.t)("proto.embeds.visible_to_people_invited_to_this_file"));let o=y[n];return i.createElement(o,{className:"embed_documentation_footer--accessTypeIcon--215DQ","data-tooltip":a,"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250})}function v({accessData:e,fileKey:r,fileName:n,isPrototype:o,nodeName:s,repoName:l,params:d,touchedAt:m}){let E=i.useMemo(()=>{let e=new URL(`${window.location.origin}/${o?"proto":"file"}/${r}`);return e.search=d.startsWith("?")?d:`?${d}`,e.toString()},[r,o,d]),y=i.useRef(null);return i.createElement("div",{ref:y,className:_.cx.colorBg.h24.px16.py12.flex.gap8.itemsCenter.justifyBetween.bt1.bSolid.colorBorder.zIndex1.$},i.createElement("div",{className:_.cx.flex.gap8.itemsCenter.h24.wFull.overflowHidden.$},i.createElement(I,{fileKey:r,params:d,isPrototype:o}),i.createElement("div",{className:"embed_documentation_footer--footerLink--fS-Mp"},l&&i.createElement(c.L,null),i.createElement(a._,{newTab:!0,trusted:!0,className:_.cx.cursorPointer.font11.lh16.fontInter.fontMedium.colorText.flex.itemsCenter.gap4.overflowHidden.$,href:E,onClick:()=>{(0,u.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:o?"proto":"file",embed_host:(0,p.Yw)()})}},i.createElement("span",{className:_.cx.truncate.$},n),s&&i.createElement(i.Fragment,null,i.createElement("span",null,"\xb7"),i.createElement("span",{className:_.cx.truncate.$},s))))),i.createElement("div",{className:_.cx.flex.gap4.alignCenter.itemsCenter.cursorDefault.$},e&&i.createElement(b,{accessData:e,isPrototype:o}),null!=m&&i.createElement(f.E,{truncate:!0,fontSize:9,color:"secondary"},(0,g.tx)("proto.embeds.last_edited",{relativeTime:i.createElement(h.h1,{date:m})}))))}function I({params:e,fileKey:r,isPrototype:n,showTooltip:a}){let s=`${window.location.origin}/${n?"proto":"file"}/${r}${e.startsWith("?")?e:`?${e}`}`,l=a?{"data-tooltip":(0,g.t)("embed.footer.figma_logo_aria_label"),"data-tooltip-type":"text","data-tooltip-show-above":!0,"data-tooltip-show-immediately":!0,"data-tooltip-max-width":250}:{};return i.createElement(o.K,{htmlAttributes:l,"aria-label":(0,g.t)("embed.footer.figma_logo_aria_label"),onClick:()=>{(0,m.FJ)(s,"_blank"),(0,u.sx)("IFrame Mobile Viewer Document Footer Clicked",{fileKey:r,kind:n?"proto":"file",embed_host:(0,p.Yw)()})}},i.createElement(d.m,{className:_.cx.flexShrink0.$}))}},861506:(e,r,n)=>{n.d(r,{l:()=>h});var i=n(411855),a=n(188507),o=n(75395),s=n(941670),l=n(538649),c=n(776250),d=n(511617),u=n(835650),m=n(154254),p=n(362252);function h({fileKey:e}){let r=(0,a.wA)(),n=d.R7.fullscreen,h=(0,a.d4)(e=>e.appWindow.inFullScreenMode);return n?i.createElement(o.E,{onClick:()=>{(0,c.sx)("IFrame Mobile Viewer Toggle Fullscreen",{fileKey:e,source:"click",embed_host:(0,u.Yw)()}),r((0,p._M)())},className:m.cx.absolute.bRadius5.colorBg.w24.h24.cursorDefault.flex.itemsCenter.justifyCenter.elevation100.$,style:{top:16,right:16}},h?i.createElement(s.p,null):i.createElement(l.O,null)):null}},192437:(e,r,n)=>{let i;n.d(r,{As:()=>f,H4:()=>g,S1:()=>I,tH:()=>b});var a=n(411855),o=n(268853),s=n(463033),l=n(776250),c=n(966712),d=n(776621),u=n(939863),m=n(178466),p=n(210954),h=n(933771);let _=Symbol("Default"),g={DEFAULT_FULL_PAGE:_,NONE_I_KNOW_WHAT_IM_DOING:Symbol("None")};function f(e,r){if(r){e.stack+="\n\nReact stack:"+r.componentStack;let n=Error("React component stack where the error occurred");n.stack=r.componentStack,e.cause=n}}function E(e){return e?.message?.includes("The node to be removed is not a child of this node")}let y=class e extends a.Component{constructor(e){super(e),this.state={hasError:!1,isGoogleTranslateError:!1}}static getDerivedStateFromError(e){return{hasError:!0,isGoogleTranslateError:E(e),error:e}}componentDidCatch(r,n){f(r,n);try{this.props.onError?.()}catch(e){}let i=this.props.fallback===g.DEFAULT_FULL_PAGE,a=E(r),s=(0,d.$D)(this.props.team||o.e.FRONTEND_PLATFORM,r,{tags:{react:!0,errorBoundary:this.props.boundaryKey,...this.props.sentryTags,...i?{severity:d.DZ.Critical}:{}}});i&&!e.reportedHardCrash&&(e.reportedHardCrash=!0,a?(0,l.sx)("js_extension_dom_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0}):(0,l.sx)("js_hard_crash",{errorBoundary:this.props.boundaryKey},{forwardToDatadog:!0})),this.sentryID=s}render(){if(this.state.hasError){console.log("Rendering error: "+this.state.error),console.log("Boundary key: "+this.props.boundaryKey);let e=null;return e=this.props.fallback===_?a.createElement(I,{sentryId:this.sentryID,isGoogleTranslateError:this.state.isGoogleTranslateError}):this.props.fallback===g.NONE_I_KNOW_WHAT_IM_DOING?null:this.props.fallback,a.createElement(T,{error:this.state.error},e)}return this.props.children}};y.reportedHardCrash=!1;let b=y,v={title:"Something went wrong",descriptionP1:"Our team is looking into it now. If reloading the page doesn't work, check our ",statusPage:"status page",descriptionP2:" for updates",googleTranslateDescription:"This is likely due to a Chrome Extension, such as Google Translate. Try disabling Chrome Extensions and refresh the page",reload:"Reload"};function I(e){let r=a.useMemo(()=>{let e=document.body.style.colorScheme;return e&&"dark"===e?"dark":"light"},[]),n=a.useMemo(()=>{try{let e=(0,m.Gq)(!1);return e?.initialized&&!!(0,u.t)("general.root_error_boundary_title")}catch(e){return!1}},[]),i=e.isGoogleTranslateError&&(0,c.kc)().error_boundary_google_translate;return a.createElement("div",{className:h.ZX,"data-preferred-theme":r},a.createElement("div",{className:h.fi},a.createElement("div",{className:h.v2},n?(0,u.tx)("general.root_error_boundary_title"):v.title),a.createElement("div",{className:h.rU},i?n?(0,u.tx)("general.root_error_boundary_google_translate_description"):v.googleTranslateDescription:n?(0,u.tx)("general.root_error_boundary_description",{status_page:a.createElement(p.N,{trusted:!0,href:"https://status.figma.com",style:{display:"inline"}},(0,u.tx)("general.root_error_boundary_status_page"))}):a.createElement(a.Fragment,null,a.createElement("span",null,v.descriptionP1),a.createElement(p.N,{trusted:!0,href:"https://status.figma.com",style:{display:"inline"}},v.statusPage),a.createElement("span",null,v.descriptionP2))),a.createElement("div",{className:h.yV},a.createElement(s.$n,{variant:"primary",onClick:()=>location.reload()},n?(0,u.tx)("general.root_error_boundary_refresh"):v.reload)),e.sentryId&&a.createElement("div",{className:h.g6},"Error ID: ",e.sentryId)))}function T(e){let r=i??=a.createContext({}),{error:n,children:o}=e,s=a.useMemo(()=>({error:n}),[n]);return a.createElement(r.Provider,{value:s},o)}},946689:(e,r,n)=>{n.d(r,{$$:()=>C,C3:()=>H,CY:()=>es,HE:()=>B,JU:()=>ei,Kz:()=>ed,Lf:()=>er,M7:()=>U,NY:()=>Z,N_:()=>ea,O0:()=>G,Ph:()=>eo,RW:()=>eu,Us:()=>el,VE:()=>ec,Yo:()=>em,cw:()=>x,e2:()=>w,il:()=>ee,ks:()=>Q,nR:()=>O,ny:()=>S,p6:()=>P,pY:()=>j,qM:()=>M,qZ:()=>k,rb:()=>Y,s6:()=>D,tB:()=>en,tM:()=>R,vd:()=>N,vv:()=>L,wG:()=>J});var i=n(411855),a=n(902008),o=n(629019),s=n.n(o),l=n(846627),c=n(498750),d=n(62557),u=n(153234),m=n(452441),p=n(163023),h=n(46481),_=n(154254),g=n(672517),f=n(988022),E=n(498606),y=n(210954),b=n(150823),v=n(247245),I=n(126815);let T=null;function S(e){T=e}function w(e){return i.createElement("div",{className:s()(b.GC,e.reversed&&b.zi,e.className)},e.children)}class A extends u.uA{constructor(){super(...arguments),this.onKeyDown=e=>{T&&T(e)||(this.props.onKeyDown&&this.props.onKeyDown(e),e.keyCode===c.Uz.ESCAPE&&e.target.blur())},this.onClick=u.cZ(this,"click",e=>{this.props.onClick&&this.props.onClick(e)}),this.onPointerDown=u.Am(this,"pointerdown",e=>{this.props.onPointerDown&&this.props.onPointerDown(e)})}render(){let e={...this.props};e.className=`${this.props.defaultClass} ${this.props.className||""}`;let r=this.props.dataTestId;return delete e.defaultClass,delete e.recordingKey,delete e.dataTestId,this.props.onClick&&this.props.recordingKey&&(e.onClick=this.onClick),this.props.onPointerDown&&this.props.recordingKey&&(e.onPointerDown=this.onPointerDown),i.createElement("button",{onKeyDown:this.onKeyDown,...e,"data-testid":r},this.props.children)}}A.displayName="ButtonBase";class C extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.xZ,e&&b.Ij),...r})}}C.displayName="ButtonPrimary";let N=(0,g.tf)(C);class L extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.fY,e&&b.Ij),...r})}}L.displayName="BigButtonPrimary",(0,g.tf)(L);class O extends i.Component{render(){return i.createElement(A,{defaultClass:b.HM,type:"button",...this.props})}}O.displayName="ButtonSecondary";let R=(0,g.tf)(O);class P extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.xJ,e&&b.Ij),type:"button",...r})}}P.displayName="BigButtonSecondary",(0,g.tf)(P);class D extends i.Component{render(){return i.createElement(A,{defaultClass:b.oC,type:"button",...this.props})}}D.displayName="ButtonSecondaryNegative";class k extends i.Component{render(){return i.createElement(A,{defaultClass:b.ky,type:"button",...this.props})}}k.displayName="ButtonNegative";let M=(0,g.tf)(k);class F extends i.Component{render(){return i.createElement(A,{defaultClass:b.OK,type:"button",...this.props})}}F.displayName="BigButtonNegative";class x extends i.Component{render(){return i.createElement(A,{defaultClass:b.I2,...this.props})}}x.displayName="ButtonWhite";let U=(0,g.tf)(x);class B extends i.Component{render(){return i.createElement(A,{defaultClass:b.rd,...this.props})}}B.displayName="ButtonInverse";class V extends i.Component{render(){let{fullWidth:e,...r}=this.props;return i.createElement(A,{defaultClass:s()(b.FO,e&&b.Ij),...r})}}V.displayName="BigButtonInverse",(0,g.tf)(V);class G extends i.Component{render(){return i.createElement(A,{defaultClass:b.OY,...this.props})}}G.displayName="ButtonGreen";class H extends i.Component{render(){let{customClassName:e,...r}=this.props;return i.createElement(A,{defaultClass:b.Iw,className:e,...r})}}H.displayName="ButtonGrey",(0,g.tf)(G);class K extends i.Component{render(){return i.createElement(A,{defaultClass:this.props.solidWhenDisabled?b.dy:b.sY,...this.props})}}K.displayName="BigButtonGreen";class W extends i.Component{render(){return i.createElement(A,{defaultClass:b.yT,...this.props})}}W.displayName="BigButtonBlack",(0,g.tf)(W);class $ extends i.Component{render(){let e=`${b.xZ} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return i.createElement("a",{...r},this.props.children)}}$.displayName="ButtonLink";let Y=(0,g.tf)($);class z extends i.Component{render(){let{fullWidth:e,...r}=this.props,n=s()(b.fY,this.props.fullWidth&&b.Ij),a=`${n} ${this.props.className||""}`;return r={...r,className:a,rel:"noopener"},i.createElement("a",{...r},this.props.children)}}z.displayName="ButtonLink";let j=(0,g.tf)(z);class q extends i.Component{render(){let e=`${b.HM} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return i.createElement("a",{...r},this.props.children)}}q.displayName="ButtonSecondaryLink";let Z=(0,g.tf)(q);class X extends i.Component{render(){let e=`${b.hz} ${this.props.className||""}`,r={...this.props,className:e,rel:"noopener"};return i.createElement("a",{...r},this.props.children)}}X.displayName="BigButtonSecondaryLink";let J=118,Q=i.forwardRef(function({className:e,...r},n){return i.createElement(m.L,{className:s()(b._Z,e),...(0,d.d)(r),ref:n})});class ee extends i.Component{render(){let e=`${b.ki} ${this.props.className||""}`,r={...this.props,className:e};return i.createElement(m.L,{...r})}}ee.displayName="BigTextInput";let et=(0,g.h3)(m.L);class er extends i.Component{render(){return i.createElement("div",{className:this.props.className||(this.props.disabled?b.d1:b.ri)},i.createElement("label",{htmlFor:this.props.htmlName,className:s()(b.dQ,{[b.QC]:this.props.value,[b.z3]:this.props.hasError})},this.props.label),this.props.trackingFieldName&&i.createElement(et,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onBlur:this.props.onBlur,onFocus:this.props.onFocus,trackingFieldName:this.props.trackingFieldName,trackingPopulationLevel:this.props.value?f._R.POPULATED_COMPLETE:f._R.NOT_POPULATED,dataTestId:this.props.dataTestId,required:this.props.required}),!this.props.trackingFieldName&&i.createElement(m.L,{id:this.props.htmlName,name:this.props.htmlName,value:this.props.value,disabled:this.props.disabled,placeholder:this.props.placeholder||this.props.label,autoComplete:this.props.autoCompleteName,type:this.props.type||"text",maxLength:this.props.maxLength||50,onKeyPress:this.props.onKeyPress,onChange:this.props.onChange,onFocus:this.props.onFocus,onBlur:this.props.onBlur,dataTestId:this.props.dataTestId,required:this.props.required}),this.props.tooltip&&i.createElement(p.B,{className:b.G,svg:I.A,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":this.props.tooltip,"data-tooltip-timeout-delay":300}))}}class en extends i.PureComponent{constructor(e){super(e),this.documentKeyDown=e=>{e.keyCode===c.Uz.TAB&&this.setState({showFocus:!0})},this.documentMouseDown=e=>{this.setState({showFocus:!1})},this.onFocus=e=>{this.state.showFocus||e.target.blur()},this.classNameForInput=()=>{let e=`${b.kv} ${this.props.className||""}`;return this.state.showFocus&&(e+=` ${b.hP}`),e},this.state={showFocus:!1}}componentDidMount(){document.addEventListener("keydown",this.documentKeyDown),document.addEventListener("mousedown",this.documentMouseDown)}componentWillUnmount(){document.removeEventListener("keydown",this.documentKeyDown),document.removeEventListener("mousedown",this.documentMouseDown)}render(){let{svgOverride:e,classOverride:r,checked:n,...o}=this.props;return i.createElement("div",{className:b.HI},i.createElement("input",{...o,type:"checkbox",onFocus:this.onFocus,className:r||this.classNameForInput(),checked:n}),n?i.createElement("div",{className:b.Eg},i.createElement(h.U,{svg:e??v.A},i.createElement(a.l,null))):null)}}function ei(e){let r=`${b.Pf} ${e.className||""}`;return i.createElement("label",{...e,className:r})}en.displayName="Checkbox";let ea=y.N,eo=(0,g.tf)(ea);class es extends i.Component{render(){let{canFocus:e,trusted:r,className:n,...a}=this.props,o=`${b.MH} ${n||""}`,s={...a,className:o,rel:r?"noopener":"noopener nofollow noreferrer ugc",onClick:e=>{this.props.onClick&&this.props.onClick(e),this.props.href&&(0,l.e)(this.props.href,e)}};return e&&(s={href:"#",tabIndex:0,...s}),i.createElement("a",{...s},this.props.children)}}es.displayName="Link";let el=(0,g.tf)(es);class ec extends i.Component{render(){let e=`${b.X7} ${this.props.className||""}`,r={...this.props,className:e};return i.createElement("select",{...r})}}function ed(e){let r=e.multiple?8*e.multiple:e.value?e.value:0;return"x"===e.direction?i.createElement("div",{style:{width:r},className:_.cx.flexShrink0.$,"aria-hidden":"true"}):i.createElement("div",{style:{height:r},className:_.cx.flexShrink0.$,"aria-hidden":"true"})}ec.displayName="BigSelect",ed.displayName="Spacing";let eu=(0,g.tf)(p.B),em=(0,g.tf)(e=>i.createElement("a",{...e},e.children));(0,g.tf)(function(e){return i.createElement(A,{defaultClass:s()(b._d,e.className),...e})})},641170:(e,r,n)=>{n.d(r,{LN:()=>f});var i=n(411855),a=n(538513),o=n(135317),s=n(629019),l=n.n(s),c=n(959407),d=n(521725),u=n.n(d);n(563706);var m=n(62557),p=n(452441);n(163023);var h=n(822916),_=n(64592),g=n(804891);i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:l()(_.Pf,e.inlineLabel&&_.Qg),htmlFor:n},e.label),i.createElement("select",{className:l()(_.Wm,e.responseHasError&&_.U3),id:n,name:e.name,onChange:e.onChange,onFocus:e.onFocus,onBlur:e.onBlur,value:e.value||""},i.createElement("option",{disabled:!!e.value},e.inlineLabel?e.label:""),Object.keys(e.options).map(r=>i.createElement("option",{value:r,key:r},e.options[r]))),e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:_.Pf,htmlFor:n},e.label),i.createElement("textarea",{className:l()(_.PC,e.responseHasError&&_.U3),onChange:e.onChange,onBlur:e.onBlur,id:n,name:e.name,value:e.value}),e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:_.Pf,htmlFor:n},e.label),i.createElement("input",{className:l()(_.En,e.className,e.responseHasError&&_.U3),disabled:e.disabled,onChange:e.onChange,onBlur:e.onBlur,onFocus:e.onFocus,onKeyDown:e.onKeyDown,onKeyDownCapture:e.onKeyDownCapture,id:n,type:"text",name:e.name,value:e.value}),e.children,e.error)}),i.forwardRef(function(e,r){let[n,a]=i.useState([]),o=i.useRef(null),s=r=>!!e.defaultOption&&(!e.maxListSizeToRevealDefaultOption||r.length<=e.maxListSizeToRevealDefaultOption),d=()=>{let r=e.options.sort().slice(0,100);s(r)&&r.unshift(e.defaultOption),a(r)},{isOpen:m,getToggleButtonProps:p,getLabelProps:h,getMenuProps:g,getInputProps:f,getItemProps:E,getComboboxProps:y,openMenu:b,highlightedIndex:v}=(0,c.Bp)({selectedItem:e.value,items:n,onSelectedItemChange({selectedItem:r}){e.onChange(r||"")},onIsOpenChange:({isOpen:e,selectedItem:r})=>{e&&!r&&d()},onInputValueChange:r=>{if(r.inputValue.trim().length>0){let n=RegExp(u()(r.inputValue),"i"),i=e.options.filter(e=>n.test(e)).sort().slice(0,100);s(i)&&i.unshift(e.defaultOption),a(i)}else d()}}),I=()=>{(!e.value||e.defaultOption&&e.defaultOption===e.value)&&d()};return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{...h({className:_.Pf})},e.label),i.createElement("div",{...y({className:_.Tw})},i.createElement("input",{...f({className:l()(_.En,m&&_.qT,!m&&e.responseHasError&&_.U3,e.className),ref:o,disabled:e.disabled,onBlur:e.onBlur,onClick:()=>{I(),b()}})}),i.createElement("button",{...p({onClick:()=>{I(),o.current.select()},disabled:e.disabled,className:_.pZ,type:"button"})})),i.createElement("div",{className:l()(_.Em,!m&&_.Qg)},i.createElement("ul",{...g({className:_.es})},n.map((e,r)=>i.createElement("li",{className:l()(v===r&&_.$p,0===r&&n.length>1&&s(n)?_.KG:_.J7),key:e,...E({item:e,index:r})},e)))),e.children,!m&&e.error)}),i.forwardRef(function(e,r){let n=`__${e.name}`;return i.createElement("fieldset",{ref:r,className:_.lI},i.createElement("label",{className:_.Pf,htmlFor:n},e.label),i.createElement("input",{type:"file",id:n,name:e.name,onChange:e.onChange}),e.error)});let f=i.forwardRef(function({className:e,...r},n){return i.createElement("div",{className:g.Kf},i.createElement("label",{className:g.qf,htmlFor:r.id},r.placeholder),i.createElement(p.L,{className:l()(g.hF,e),...(0,m.d)(r),ref:n}))});i.forwardRef(function(e,r){return i.createElement("div",{className:h.kL},i.createElement("span",{className:h.zr,"data-disabled":!!e.disabled||void 0},i.createElement(a.F,{ref:r,...e,className:h.kv}),i.createElement("span",{className:h.Cv},i.createElement(o.g,{className:h.uU}))),i.createElement("label",{htmlFor:e.id},e.label))})},395771:(e,r,n)=>{n.d(r,{R:()=>o});var i=n(411855),a=n(498606);class o extends i.PureComponent{constructor(){super(...arguments),this.textContainerRef=i.createRef(),this.getFittingText=()=>{if(!this.textContainerRef.current)return null;let e=this.textContainerRef.current,r=e.getBoundingClientRect().width,{text:n}=this.props,i=document.createElement("p");if(i.className=this.props.className||"",i.style.cssText="display: inline; white-space: nowrap;",e.appendChild(i),i.innerText=n,i.getBoundingClientRect().width<=r)return e.removeChild(i),n;let a="";for(let e=0;e<n.length;e+=1){let o=`...${n.slice(n.length-e)}`;i.innerText=o;let{width:s}=i.getBoundingClientRect();if(s>r)break;a=o}return e.removeChild(i),a}}componentDidMount(){this.forceUpdate()}render(){let e=this.getFittingText();return i.createElement("div",{ref:this.textContainerRef,style:{width:this.props.maxWidth?`${this.props.maxWidth}px`:"100%"},"data-tooltip-type":this.props.text!==e?a.Ib.TEXT:void 0,"data-tooltip":this.props.text!==e?this.props.text:void 0,"aria-label":this.props.text},i.createElement("p",{className:this.props.className},e))}}o.displayName="FrontTruncatedText"},262896:(e,r,n)=>{n.d(r,{ny:()=>m});var i=n(776250),a=n(686759),o=n(966712);let s=(0,o.tl)().zendesk_web_key_public,l={productQuestion:{id:0x53d1c67aa1},bugReport:{id:0x53d1c6adf6},featureRequest:{id:0x53d1c6b4c1},account:{id:0x53d206c58a},dataPrivacy:{id:0x1623bff94217},community:{id:0x71090d38797},billing:{id:0x8d41e49e517},events:{id:0x11e3970aad17},other:{id:0x53d1c6e546}},c=function(){return{webWidget:{position:{horizontal:"right",vertical:"bottom"},offset:{horizontal:"0px",vertical:"40px"},contactForm:{selectTicketForm:{"*":"Please choose:"},ticketForms:Object.keys(l).map(e=>l[e])},helpCenter:{searchPlaceholder:{"*":"How can we help?"},messageButton:{"*":"Contact us"}}}}},d=null;function u(){window.zE&&(window.zE("webWidget","show"),window.zE("webWidget","open"),window.zE("webWidget:on","close",()=>{window.zE("webWidget","hide")}),window.zE("webWidget:on","userEvent",e=>{let r={action:e.action,relatedZendeskId:e.properties?.id,relatedZendeskName:e.properties?.name,searchTerm:e.properties?.term};(0,i.sx)("zendesk_help_widget",r)}))}function m(e,r,n){(d||(d=(async()=>{if(window.figmaPerfTesting)throw Error("testing");if(window.zE)return window.zE;if(!s)throw Error("No zendesk_web_key_public api key");window.zESettings=c();try{return await (0,a.k0)("https://static.zdassets.com/ekr/snippet.js?key="+s,{id:"ze-snippet",cors:!1}),window.zE}catch(e){throw d=null,e}})())).then(()=>{d&&window.zE&&(window.zESettings=c(),r?.ticketForms&&(window.zESettings.webWidget.contactForm={ticketForms:r.ticketForms.map(e=>l[e]),fields:(r.fields||[]).map(e=>({id:e.id,prefill:{"*":e.value}}))}),r?.suppressAnswerBot&&(window.zESettings.webWidget.helpCenter={suppress:!0},window.zESettings.webWidget.answerBot={suppress:!0}),r?.locale&&window.zE("webWidget","setLocale",r.locale),window.zE("webWidget","updateSettings",window.zESettings),window.zE("webWidget","prefill",{name:{value:e.name,readOnly:!0},email:{value:e.email,readOnly:!0}}))}).then(u).catch(()=>console.error(`Our support center is not currently available. You can email us at ${(0,o.W4)()}.`))}},642822:(e,r,n)=>{n.d(r,{LE:()=>l,oS:()=>c,y1:()=>s});var i=n(411855),a=n(140593),o=n(556284),s=(e=>(e[e.DESIGN=0]="DESIGN",e[e.DESIGN_AND_DEV_MODE=1]="DESIGN_AND_DEV_MODE",e[e.DEV_MODE=2]="DEV_MODE",e[e.DEV_MODE_SELECTED=3]="DEV_MODE_SELECTED",e[e.WHITEBOARD=4]="WHITEBOARD",e[e.PUBLISHED=5]="PUBLISHED",e[e.PROTOTYPE=6]="PROTOTYPE",e[e.TEMPLATE=7]="TEMPLATE",e[e.REPO=8]="REPO",e[e.SLIDES=9]="SLIDES",e[e.SLIDES_TEMPLATE=10]="SLIDES_TEMPLATE",e[e.SITES=11]="SITES",e[e.COOPER=12]="COOPER",e))(s||{}),l=(e=>(e[e.LARGE=0]="LARGE",e[e.MEDIUM=1]="MEDIUM",e[e.SMALL=2]="SMALL",e))(l||{});function c(e){let r;let n=e.size??0;switch(e.type){case 0:r=i.createElement(m,{size:n});break;case 1:r=i.createElement(p,null);break;case 2:r=i.createElement(h,null);break;case 3:r=i.createElement(h,{selected:!0});break;case 4:r=i.createElement(_,{size:n});break;case 5:r=i.createElement(u,{size:n});break;case 6:r=i.createElement(d,{size:n});break;case 7:r=i.createElement(b,{size:n,svgOptions:e.svgOptions});break;case 8:r=i.createElement(v,{size:n});break;case 9:r=i.createElement(g,{size:n});break;case 10:r=i.createElement(f,{size:n});break;case 11:r=i.createElement(y,{size:n});break;case 12:r=i.createElement(E,{size:n});break;default:(0,a.xb)(e.type)}return i.createElement("div",{"data-tooltip-type":e["data-tooltip-type"],"data-tooltip":e["data-tooltip"],className:e.className,"data-testid":e.dataTestId},r)}function d(e){let r="var(--color-iconprototypefile, #E6E6E6)",n="var(--color-iconprototypefilesecondary, black)";return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_1019308_55963)"},i.createElement("path",{d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8Z",fill:r}),i.createElement("path",{d:"M6 11.5V4.5L12 8L6 11.5Z",fill:n})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_1019308_55963"},i.createElement("rect",{width:"16",height:"16",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:o.tU},i.createElement("circle",{cx:"16",cy:"16",r:"12",fill:r}),i.createElement("path",{d:"M13 21.5V10.5L22 16L13 21.5Z",fill:n}))}function u(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",fill:"var(--color-iconpublishedfile, #2c2c2c)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42809 5.94824L8.4163 5.94487L5.93954 5.23713L7.81094 7.11265C7.84908 7.10727 7.88805 7.10449 7.92768 7.10449C8.38608 7.10449 8.75769 7.47692 8.75769 7.93634C8.75769 8.39576 8.38608 8.76819 7.92768 8.76819C7.46927 8.76819 7.09766 8.39576 7.09766 7.93634C7.09766 7.89736 7.10033 7.859 7.10551 7.82144L5.24201 5.95383L5.90568 8.27402L5.91639 8.31146L5.92416 8.34963C6.11456 9.28536 6.94108 9.98642 7.92622 9.98642C8.15158 9.98642 8.36652 9.95019 8.56673 9.88397L9.15269 9.69017L9.58863 10.1271L10.2943 10.8343L10.838 10.2893L10.1189 9.56871L9.68985 9.13868L9.87373 8.55969C9.93575 8.36438 9.96962 8.15529 9.96962 7.93633C9.96962 6.98187 9.3191 6.17937 8.43996 5.95132L8.42809 5.94824ZM12.2506 10.2893L11.0006 11.5421L10.2943 12.25L9.58793 11.5421L8.88074 10.8334C8.58052 10.9327 8.25963 10.9864 7.92622 10.9864C6.45479 10.9864 5.22725 9.9399 4.94424 8.54903L3.82397 4.6326L3.5 3.5L4.63269 3.82367L8.69105 4.98335C10.0017 5.32333 10.9696 6.51654 10.9696 7.93633C10.9696 8.25918 10.9196 8.57032 10.8268 8.86238L12.2506 10.2893Z",fill:"var(--color-icon-onbrand, white)"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3022_62326)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#2C2C2C"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9464 7.68575L12.9346 7.68238L6.56175 5.86133L10.8434 10.151C11.0417 10.0543 11.2645 10 11.5 10C12.3284 10 13 10.6716 13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 11.2723 10.0507 11.0565 10.1415 10.8632L5.86781 6.58163L7.61385 12.6858L7.62457 12.7232L7.63233 12.7614C8.035 14.7403 9.78217 16.2262 11.8709 16.2262C12.3463 16.2262 12.8019 16.1497 13.2273 16.009L13.8132 15.8152L14.2492 16.2521L16.015 18.0218L18.026 16.0063L16.239 14.2155L15.81 13.7855L15.9938 13.2065C16.1254 12.7921 16.1968 12.3497 16.1968 11.8886C16.1968 9.86928 14.8204 8.17187 12.9583 7.68883L12.9464 7.68575ZM19.4386 16.0063L16.7213 18.7297L16.0151 19.4374L16.015 19.4375L16.0149 19.4374L15.3086 18.7297L13.5413 16.9584C13.0159 17.1322 12.4544 17.2262 11.8709 17.2262C9.29588 17.2262 7.14769 15.3948 6.65241 12.9608L4.44897 5.2576L4.125 4.125L5.25769 4.44867L13.2093 6.72087C15.5029 7.31583 17.1968 9.40395 17.1968 11.8886C17.1968 12.4536 17.1092 12.9981 16.9469 13.5092L19.4386 16.0063Z",fill:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3022_62326"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},i.createElement("path",{fill:"var(--color-iconpublishedfile, #2c2c2c)",d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("path",{fill:"var(--color-icon-onbrand, white)",fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z"}),i.createElement("path",{fill:"var(--color-iconpublishedfilesecondary, #787878)",d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z"}))}function m(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{className:o.XD,d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.42809 5.94824L8.4163 5.94487L5.93954 5.23713L7.81094 7.11265C7.84908 7.10727 7.88805 7.10449 7.92768 7.10449C8.38608 7.10449 8.75769 7.47692 8.75769 7.93634C8.75769 8.39576 8.38608 8.76819 7.92768 8.76819C7.46927 8.76819 7.09766 8.39576 7.09766 7.93634C7.09766 7.89736 7.10033 7.859 7.10551 7.82144L5.24201 5.95383L5.90568 8.27402L5.91639 8.31146L5.92416 8.34963C6.11456 9.28536 6.94108 9.98642 7.92622 9.98642C8.15158 9.98642 8.36652 9.95019 8.56673 9.88397L9.15269 9.69017L9.58863 10.1271L10.2943 10.8343L10.838 10.2893L10.1189 9.56871L9.68985 9.13868L9.87373 8.55969C9.93575 8.36438 9.96962 8.15529 9.96962 7.93633C9.96962 6.98187 9.3191 6.17937 8.43996 5.95132L8.42809 5.94824ZM12.2506 10.2893L11.0006 11.5421L10.2943 12.25L9.58793 11.5421L8.88074 10.8334C8.58052 10.9327 8.25963 10.9864 7.92622 10.9864C6.45479 10.9864 5.22725 9.9399 4.94424 8.54903L3.82397 4.6326L3.5 3.5L4.63269 3.82367L8.69105 4.98335C10.0017 5.32333 10.9696 6.51654 10.9696 7.93633C10.9696 8.25918 10.9196 8.57032 10.8268 8.86238L12.2506 10.2893Z",fill:"var(--color-icon-ondesign, white)"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3022_62357)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#0D99FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9464 7.68575L12.9346 7.68238L6.56175 5.86133L10.8434 10.151C11.0417 10.0543 11.2645 10 11.5 10C12.3284 10 13 10.6716 13 11.5C13 12.3284 12.3284 13 11.5 13C10.6716 13 10 12.3284 10 11.5C10 11.2723 10.0507 11.0565 10.1415 10.8632L5.86781 6.58163L7.61385 12.6858L7.62457 12.7232L7.63233 12.7614C8.035 14.7403 9.78217 16.2262 11.8709 16.2262C12.3463 16.2262 12.8019 16.1497 13.2273 16.009L13.8132 15.8152L14.2492 16.2521L16.015 18.0218L18.026 16.0063L16.239 14.2155L15.81 13.7855L15.9938 13.2065C16.1254 12.7921 16.1968 12.3497 16.1968 11.8886C16.1968 9.86928 14.8204 8.17187 12.9583 7.68883L12.9464 7.68575ZM19.4386 16.0063L16.7213 18.7297L16.0151 19.4374L16.015 19.4375L16.0149 19.4374L15.3086 18.7297L13.5413 16.9584C13.0159 17.1322 12.4544 17.2262 11.8709 17.2262C9.29588 17.2262 7.14769 15.3948 6.65241 12.9608L4.44897 5.2576L4.125 4.125L5.25769 4.44867L13.2093 6.72087C15.5029 7.31583 17.1968 9.40395 17.1968 11.8886C17.1968 12.4536 17.1092 12.9981 16.9469 13.5092L19.4386 16.0063Z",fill:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3022_62357"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},i.createElement("path",{className:o.XD,d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 12.9953L16.8466 12.992L12.4437 11.7366L15.7009 14.9938C15.8169 14.954 15.9412 14.9324 16.0707 14.9324C16.6993 14.9324 17.2089 15.442 17.2089 16.0707C17.2089 16.6993 16.6993 17.2089 16.0707 17.2089C15.442 17.2089 14.9324 16.6993 14.9324 16.0707C14.9324 15.9412 14.954 15.8169 14.9938 15.7009L11.7425 12.4496L12.9443 16.6419L12.9548 16.6784L12.9625 16.7156C13.26 18.1592 14.5397 19.2442 16.0707 19.2442C16.4199 19.2442 16.7541 19.1882 17.0659 19.0854L17.6507 18.8924L18.0862 19.3279L19.3171 20.5588L20.5858 19.2901L19.3411 18.0455L18.9107 17.615L19.0954 17.035C19.1918 16.7321 19.2443 16.4085 19.2443 16.0707C19.2443 14.5951 18.2363 13.3524 16.8699 12.9983L16.8582 12.9953ZM21.2929 18.583L22 19.2901L21.2929 19.9972L20.0242 21.2659L19.3171 21.973L18.61 21.2659L17.3791 20.035C16.9676 20.1708 16.5277 20.2442 16.0707 20.2442C14.0558 20.2442 12.3744 18.8165 11.983 16.9175L10.3246 11.1324L10 10L11.1329 10.323L17.1208 12.0303C18.9175 12.4959 20.2443 14.1283 20.2443 16.0707C20.2443 16.5127 20.1756 16.9386 20.0482 17.3384L21.2929 18.583Z",fill:"var(--color-icon-ondesign, white)"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-icondesignfilesecondary, #9bd5fd)"}))}function p(){return i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_126_32431)"},i.createElement("path",{d:"M7 28.2725H25C25.5523 28.2725 26 27.8247 26 27.2725V10.1867C26 9.92146 25.8946 9.6671 25.7071 9.47957L20.7929 4.56535C20.6054 4.37782 20.351 4.27246 20.0858 4.27246H7C6.44772 4.27246 6 4.72018 6 5.27246V27.2725C6 27.8247 6.44772 28.2725 7 28.2725Z",fill:"var(--color-bg-design, #0d99ff)"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M16.8582 13.2677L16.8466 13.2644L12.4437 12.0091L15.7009 15.2663C15.8169 15.2265 15.9412 15.2049 16.0707 15.2049C16.6993 15.2049 17.2089 15.7145 17.2089 16.3431C17.2089 16.9718 16.6993 17.4814 16.0707 17.4814C15.442 17.4814 14.9324 16.9718 14.9324 16.3431C14.9324 16.2137 14.954 16.0893 14.9938 15.9734L11.7425 12.7221L12.9443 16.9144L12.9548 16.9509L12.9625 16.9881C13.26 18.4317 14.5397 19.5167 16.0707 19.5167C16.4199 19.5167 16.7541 19.4607 17.0659 19.3578L17.6507 19.1649L18.0862 19.6004L19.3171 20.8313L20.5858 19.5626L19.3411 18.318L18.9107 17.8875L19.0954 17.3074C19.1918 17.0046 19.2443 16.6809 19.2443 16.3431C19.2443 14.8676 18.2363 13.6249 16.8699 13.2708L16.8582 13.2677ZM21.2929 18.8555L22 19.5626L21.2929 20.2697L20.0242 21.5384L19.3171 22.2455L18.61 21.5384L17.3791 20.3075C16.9676 20.4432 16.5277 20.5167 16.0707 20.5167C14.0558 20.5167 12.3744 19.0889 11.983 17.1899L10.3246 11.4049L10 10.2725L11.1329 10.5955L17.1208 12.3028C18.9175 12.7684 20.2443 14.4008 20.2443 16.3431C20.2443 16.7851 20.1756 17.2111 20.0482 17.6109L21.2929 18.8555Z",fill:"var(--color-icon-ondesign, white)"}),i.createElement("path",{d:"M20.5 8.77246V6.68667V4.27246L22.2071 5.97957L24.2929 8.06535L26 9.77246H23.5858H21.5C20.9477 9.77246 20.5 9.32475 20.5 8.77246Z",fill:"var(--color-icondesignfilesecondary, #9bd5fd)"}),i.createElement("rect",{x:"18.5667",y:"17.8391",width:"13.8667",height:"13.8667",rx:"6.93333",fill:"var(--color-bg-handoff, #14AE5C)"}),i.createElement("rect",{x:"18.5667",y:"17.8391",width:"13.8667",height:"13.8667",rx:"6.93333",stroke:"var(--color-bg)",strokeWidth:"0.866667"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.9064 26.9361L21.3519 24.8635L21.1792 24.6332L21.3519 24.4029L22.9067 22.3299H23.8663L22.1388 24.6332L23.866 26.9361H22.9064ZM24.5473 26.9361L26.2747 22.3299H27.0946L25.3672 26.9361H24.5473ZM28.0887 26.9361H27.129L28.8562 24.6332L27.1288 22.3299H28.0884L29.6431 24.4029L29.8158 24.6332L29.6431 24.8635L28.0887 26.9361Z",fill:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_126_32431"},i.createElement("rect",{width:"32",height:"32",fill:"var(--color-icon-ondesign, white)",transform:"translate(0 0.272461)"}))))}function h(e){return e.selected?i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M7 27.9999H25C25.5523 27.9999 26 27.5522 26 26.9999V9.9142C26 9.64898 25.8946 9.39463 25.7071 9.20709L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44771 4 6 4.44771 6 5V26.9999C6 27.5522 6.44771 27.9999 7 27.9999Z",fill:"#008043"}),i.createElement("path",{d:"M20.5 8.50035V6.41457V4.00037L22.2071 5.70747L24.2929 7.79325L26 9.50035H23.5858H21.5C20.9477 9.50035 20.5 9.05263 20.5 8.50035Z",fill:"#85E0A3"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6718 20.1257L9.26719 16.9195L9 16.5633L9.26718 16.207L11.6719 13.0007H13.1563L10.4844 16.5633L13.1562 20.1257H11.6718ZM14.2098 20.1257L16.8817 13.0007H18.1499L15.478 20.1257H14.2098ZM19.6876 20.1257H18.2032L20.875 16.5633L18.2031 13.0007H19.6875L22.0922 16.207L22.3594 16.5633L22.0922 16.9195L19.6876 20.1257Z",fill:"white"})):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M7 27.9999H25C25.5523 27.9999 26 27.5522 26 26.9999V9.9142C26 9.64898 25.8946 9.39463 25.7071 9.20709L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44771 4 6 4.44771 6 5V26.9999C6 27.5522 6.44771 27.9999 7 27.9999Z",fill:"#14AE5C"}),i.createElement("path",{d:"M20.5 8.50047V6.41469V4.00049L22.2071 5.70759L24.2929 7.79337L26 9.50047H23.5858H21.5C20.9477 9.50047 20.5 9.05276 20.5 8.50047Z",fill:"#85E0A3"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.6721 20.1255L9.26743 16.9193L9.00024 16.5631L9.26743 16.2068L11.6721 13.0005H13.1565L10.4846 16.563L13.1564 20.1255H11.6721ZM14.21 20.1255L16.8819 13.0005H18.1501L15.4783 20.1255H14.21ZM19.6878 20.1255H18.2034L20.8752 16.563L18.2034 13.0005H19.6877L22.0924 16.2068L22.3596 16.5631L22.0924 16.9193L19.6878 20.1255Z",fill:"white"}))}function _(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{className:o.bF,d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.18907 3.60057L3.45361 3.45345L3.6007 4.18891L4.14615 6.9163L4.17584 7.06475L4.28289 7.1718L10.1112 13.0001C10.5017 13.3906 11.1349 13.3906 11.5254 13.0001L13.0001 11.5254C13.3906 11.1348 13.3906 10.5017 13.0001 10.1111L7.17182 4.28288L7.06478 4.17584L6.91634 4.14614L4.18907 3.60057ZM5.09705 6.57175L4.72837 4.72827L6.57175 5.09702L7.13379 5.65906L5.65906 7.13376L5.09705 6.57175ZM6.36616 7.84086L7.8409 6.36617L12.293 10.8183L10.8183 12.293L6.36616 7.84086Z",fill:"var(--color-icon-onfigjam, white)"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",{clipPath:"url(#clip0_3022_62349)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#9747FF"}),i.createElement("path",{d:"M7.49078 11.0263L15.8491 19.3847C16.2397 19.7752 16.8728 19.7752 17.2634 19.3847L19.3846 17.2634C19.7751 16.8729 19.7751 16.2397 19.3846 15.8492L11.0262 7.49084M7.49078 11.0263L5.67769 9.21321L4.76767 4.76782L9.21315 5.67775L11.0262 7.49084M7.49078 11.0263L11.0262 7.49084",stroke:"var(--color-icon-ondesign, white)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3022_62349"},i.createElement("rect",{width:"24",height:"24",fill:"white"})))):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none"},i.createElement("path",{className:o.bF,d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.2966 20.8616C19.4811 21.0461 19.7802 21.0461 19.9647 20.8616L21.0059 19.8205C21.1903 19.636 21.1903 19.3369 21.0059 19.1524L15.0579 13.2045L13.3487 14.9137L19.2966 20.8616ZM12.6416 14.2066L11.7021 13.2671L11.2748 11.1305L13.4113 11.5578L14.3508 12.4974L12.6416 14.2066ZM11.0623 10.0682L13.9043 10.6366L21.713 18.4453C22.288 19.0203 22.288 19.9526 21.713 20.5276L20.6718 21.5687C20.0968 22.1438 19.1645 22.1438 18.5895 21.5687L10.7809 13.7601L10.2125 10.9181L10 9.85578L11.0623 10.0682Z",fill:"var(--color-icon-onfigjam, white)"}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconfigjamfilesecondary, #C599FF)"}))}function g(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"16",height:"16",rx:"2",fill:"#FF5C16"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4H12C12.5523 4 13 4.44772 13 5V10C13 10.5523 12.5523 11 12 11H11.2618H10.2165H5.78352H4.73824H4C3.44772 11 3 10.5523 3 10V5C3 4.44772 3.44772 4 4 4ZM4.43389 12H4C2.89543 12 2 11.1046 2 10V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V10C14 11.1046 13.1046 12 12 12H11.5661L11.9783 13.3544C12.0587 13.6186 11.9098 13.8979 11.6456 13.9783C11.3814 14.0587 11.1021 13.9098 11.0217 13.6456L10.5208 12H5.47918L4.97835 13.6456C4.89795 13.9098 4.61861 14.0587 4.35443 13.9783C4.09025 13.8979 3.94127 13.6186 4.02167 13.3544L4.43389 12ZM5 5C4.44772 5 4 5.44772 4 6C4 6.55228 4.44772 7 5 7C5.55228 7 6 6.55228 6 6C6 5.44772 5.55228 5 5 5ZM5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8Z",fill:"white"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"24",height:"24",rx:"5",fill:"#FF5C16"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6H19C19.5523 6 20 6.44772 20 7V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V7C4 6.44772 4.44772 6 5 6ZM3 7C3 5.89543 3.89543 5 5 5H19C20.1046 5 21 5.89543 21 7V15C21 16.1046 20.1046 17 19 17H17.0177L17.9628 19.3107C18.0673 19.5663 17.9449 19.8582 17.6893 19.9628C17.4337 20.0673 17.1418 19.9449 17.0372 19.6893L15.9373 17H8.06281L6.9628 19.6895C6.85826 19.9451 6.56632 20.0676 6.31073 19.963C6.05514 19.8585 5.93268 19.5666 6.03722 19.311L6.9824 17H5C3.89543 17 3 16.1046 3 15V7ZM6 9C6 8.44772 6.44772 8 7 8C7.55228 8 8 8.44772 8 9C8 9.55228 7.55228 10 7 10C6.44772 10 6 9.55228 6 9ZM7 12C6.44772 12 6 12.4477 6 13C6 13.5523 6.44772 14 7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12Z",fill:"white"})):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M8 28H24C25.1046 28 26 27.1046 26 26V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3787 4.87868C20.8161 4.31607 20.053 4 19.2574 4H8C6.89543 4 6 4.89543 6 6V26C6 27.1046 6.89543 28 8 28Z",fill:"#FF5C16"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 10.9998V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3786 4.87868C20.816 4.31607 20.053 4 19.2573 4H19.0203C19.5632 4.01081 20 4.4543 20 4.9998V7.9998C20 9.10437 20.8954 9.9998 22 9.9998H25C25.5522 9.9998 26 10.4475 26 10.9998Z",fill:"white",fillOpacity:"0.4"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12H20C20.5523 12 21 12.4477 21 13V18C21 18.5523 20.5523 19 20 19H19.2618H18.2165H13.7835H12.7382H12C11.4477 19 11 18.5523 11 18V13C11 12.4477 11.4477 12 12 12ZM12.4339 20H12C10.8954 20 10 19.1046 10 18V13C10 11.8954 10.8954 11 12 11H20C21.1046 11 22 11.8954 22 13V18C22 19.1046 21.1046 20 20 20H19.5661L19.9783 21.3544C20.0587 21.6186 19.9098 21.8979 19.6456 21.9783C19.3814 22.0587 19.1021 21.9098 19.0217 21.6456L18.5208 20H13.4792L12.9783 21.6456C12.8979 21.9098 12.6186 22.0587 12.3544 21.9783C12.0903 21.8979 11.9413 21.6186 12.0217 21.3544L12.4339 20ZM13 13C12.4477 13 12 13.4477 12 14C12 14.5523 12.4477 15 13 15C13.5523 15 14 14.5523 14 14C14 13.4477 13.5523 13 13 13ZM13 16C12.4477 16 12 16.4477 12 17C12 17.5523 12.4477 18 13 18C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16Z",fill:"white"}))}function f(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"16",height:"16",rx:"2",fill:"#2C2C2C"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 4H12C12.5523 4 13 4.44772 13 5V10C13 10.5523 12.5523 11 12 11H11.2618H10.2165H5.78352H4.73824H4C3.44772 11 3 10.5523 3 10V5C3 4.44772 3.44772 4 4 4ZM4.43389 12H4C2.89543 12 2 11.1046 2 10V5C2 3.89543 2.89543 3 4 3H12C13.1046 3 14 3.89543 14 5V10C14 11.1046 13.1046 12 12 12H11.5661L11.9783 13.3544C12.0587 13.6186 11.9098 13.8979 11.6456 13.9783C11.3814 14.0587 11.1021 13.9098 11.0217 13.6456L10.5208 12H5.47918L4.97835 13.6456C4.89795 13.9098 4.61861 14.0587 4.35443 13.9783C4.09025 13.8979 3.94127 13.6186 4.02167 13.3544L4.43389 12ZM5 5C4.44772 5 4 5.44772 4 6C4 6.55228 4.44772 7 5 7C5.55228 7 6 6.55228 6 6C6 5.44772 5.55228 5 5 5ZM5 8C4.44772 8 4 8.44772 4 9C4 9.55228 4.44772 10 5 10C5.55228 10 6 9.55228 6 9C6 8.44772 5.55228 8 5 8Z",fill:"white"})):1===e.size?i.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"24",height:"24",rx:"5",fill:"#2C2C2C"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5 6H19C19.5523 6 20 6.44772 20 7V15C20 15.5523 19.5523 16 19 16H5C4.44772 16 4 15.5523 4 15V7C4 6.44772 4.44772 6 5 6ZM3 7C3 5.89543 3.89543 5 5 5H19C20.1046 5 21 5.89543 21 7V15C21 16.1046 20.1046 17 19 17H17.0177L17.9628 19.3107C18.0673 19.5663 17.9449 19.8582 17.6893 19.9628C17.4337 20.0673 17.1418 19.9449 17.0372 19.6893L15.9373 17H8.06281L6.9628 19.6895C6.85826 19.9451 6.56632 20.0676 6.31073 19.963C6.05514 19.8585 5.93268 19.5666 6.03722 19.311L6.9824 17H5C3.89543 17 3 16.1046 3 15V7ZM6 9C6 8.44772 6.44772 8 7 8C7.55228 8 8 8.44772 8 9C8 9.55228 7.55228 10 7 10C6.44772 10 6 9.55228 6 9ZM7 12C6.44772 12 6 12.4477 6 13C6 13.5523 6.44772 14 7 14C7.55228 14 8 13.5523 8 13C8 12.4477 7.55228 12 7 12Z",fill:"white"})):i.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M8 28H24C25.1046 28 26 27.1046 26 26V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3787 4.87868C20.8161 4.31607 20.053 4 19.2574 4H8C6.89543 4 6 4.89543 6 6V26C6 27.1046 6.89543 28 8 28Z",fill:"#757575"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M26 10.9998V10.7426C26 9.94699 25.6839 9.18393 25.1213 8.62132L21.3786 4.87868C20.816 4.31607 20.053 4 19.2573 4H19.0203C19.5632 4.01081 20 4.4543 20 4.9998V7.9998C20 9.10437 20.8954 9.9998 22 9.9998H25C25.5522 9.9998 26 10.4475 26 10.9998Z",fill:"white",fillOpacity:"0.4"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 12H20C20.5523 12 21 12.4477 21 13V18C21 18.5523 20.5523 19 20 19H19.2618H18.2165H13.7835H12.7382H12C11.4477 19 11 18.5523 11 18V13C11 12.4477 11.4477 12 12 12ZM12.4339 20H12C10.8954 20 10 19.1046 10 18V13C10 11.8954 10.8954 11 12 11H20C21.1046 11 22 11.8954 22 13V18C22 19.1046 21.1046 20 20 20H19.5661L19.9783 21.3544C20.0587 21.6186 19.9098 21.8979 19.6456 21.9783C19.3814 22.0587 19.1021 21.9098 19.0217 21.6456L18.5208 20H13.4792L12.9783 21.6456C12.8979 21.9098 12.6186 22.0587 12.3544 21.9783C12.0903 21.8979 11.9413 21.6186 12.0217 21.3544L12.4339 20ZM13 13C12.4477 13 12 13.4477 12 14C12 14.5523 12.4477 15 13 15C13.5523 15 14 14.5523 14 14C14 13.4477 13.5523 13 13 13ZM13 16C12.4477 16 12 16.4477 12 17C12 17.5523 12.4477 18 13 18C13.5523 18 14 17.5523 14 17C14 16.4477 13.5523 16 13 16Z",fill:"white"}))}function E({inverted:e,size:r}){return null}function y(e){return null}function b(e){return 2===e.size?i.createElement("svg",{width:"16",height:"16",viewBox:e.svgOptions?.viewBox||"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1 3C1 1.89543 1.89543 1 3 1H13C14.1046 1 15 1.89543 15 3V13C15 14.1046 14.1046 15 13 15H3C1.89543 15 1 14.1046 1 13V3Z",className:o.bF}),i.createElement("mask",{id:e.svgOptions?.id+"template_msk_sm",fill:"var(--color-icon-onfigjam, white)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3 4H13V12H3V4ZM4 5H12V7.00004H4V5ZM12 8.00004H7V11H12V8.00004ZM6 11H4V8.00004H6V11Z"})),i.createElement("path",{d:"M4 5V4H3V5H4ZM12 5H13V4H12V5ZM12 7.00004V8.00004H13V7.00004H12ZM4 7.00004H3V8.00004H4V7.00004ZM3 4V3H2V4H3ZM13 4H14V3H13V4ZM13 12V13H14V12H13ZM3 12H2V13H3V12ZM12 8.00004H13V7.00004H12V8.00004ZM7 8.00004V7.00004H6V8.00004H7ZM7 11H6V12H7V11ZM12 11V12H13V11H12ZM6 11V12H7V11H6ZM4 11H3V12H4V11ZM4 8.00004V7.00004H3V8.00004H4ZM6 8.00004H7V7.00004H6V8.00004ZM4 6H12V4H4V6ZM11 5V7.00004H13V5H11ZM5 7.00004V5H3V7.00004H5ZM12 7.00004H7V9.00004H12V7.00004ZM6 8.00004V11H8V8.00004H6ZM7 12H12V10H7V12ZM13 11V8.00004H11V11H13ZM6 10H4V12H6V10ZM5 11V8.00004H3V11H5ZM4 9.00004H6V7.00004H4V9.00004ZM5 8.00004V11H7V8.00004H5ZM12 6.00004H4V8.00004H12V6.00004ZM4 12V4H2V12H4ZM3 5H13V3H3V5ZM12 4V12H14V4H12ZM13 11H3V13H13V11Z",fill:"var(--color-icon-onfigjam, white)",mask:`url(#${e.svgOptions?.id+"template_msk_sm"})`})):0===e.size?i.createElement("svg",{width:"32",height:"32",viewBox:e.svgOptions?.viewBox||"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:o.bF},i.createElement("path",{d:"M7 28H25C25.5523 28 26 27.5523 26 27V9.91421C26 9.649 25.8946 9.39464 25.7071 9.20711L20.7929 4.29289C20.6054 4.10536 20.351 4 20.0858 4H7C6.44772 4 6 4.44772 6 5V27C6 27.5523 6.44772 28 7 28Z"}),i.createElement("mask",{id:e.svgOptions?.id+"template_msk_lg",fill:"var(--color-icon-onfigjam, white)"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10 12H22V22H10V12ZM11 13H21V15H11V13ZM21 16H14V21H21V16ZM13 21V16H11V21H13Z"})),i.createElement("path",{d:"M21 13H22V12H21V13ZM11 13V12H10V13H11ZM21 15V16H22V15H21ZM11 15H10V16H11V15ZM10 12V11H9V12H10ZM22 12H23V11H22V12ZM22 22V23H23V22H22ZM10 22H9V23H10V22ZM21 16H22V15H21V16ZM14 16V15H13V16H14ZM14 21H13V22H14V21ZM21 21V22H22V21H21ZM13 21V22H14V21H13ZM13 16H14V15H13V16ZM11 16V15H10V16H11ZM11 21H10V22H11V21ZM21 12H11V14H21V12ZM22 15V13H20V15H22ZM10 13V15H12V13H10ZM21 15H14V17H21V15ZM13 16V21H15V16H13ZM14 22H21V20H14V22ZM22 21V16H20V21H22ZM14 21V16H12V21H14ZM13 15H11V17H13V15ZM10 16V21H12V16H10ZM11 22H13V20H11V22ZM11 16H21V14H11V16ZM11 22V12H9V22H11ZM22 11H10V13H22V11ZM23 22V12H21V22H23ZM10 23H22V21H10V23Z",fill:"var(--color-icon-onfigjam, white)",mask:`url(#${e.svgOptions?.id+"template_msk_lg"})`}),i.createElement("path",{d:"M20.5 8.5V6.41421V4L22.2071 5.70711L24.2929 7.79289L26 9.5H23.5858H21.5C20.9477 9.5 20.5 9.05228 20.5 8.5Z",fill:"var(--color-iconfigjamfilesecondary, #C599FF)"})):i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},i.createElement("g",{clipPath:"url(#clip0_3268_73108)"},i.createElement("rect",{width:"24",height:"24",rx:"4",fill:"#9747FF"}),i.createElement("mask",{id:"path-2-inside-1_3268_73108",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6 7H18V9.7H8.96991H6V7ZM5 10.7V9.7V7V6H6H18H19V7V17V18H18H6H5V17V10.7ZM6 10.7H8.46991V17H6V10.7ZM9.46991 17H18V10.7H9.46991V17Z"})),i.createElement("path",{d:"M18 7H19V6H18V7ZM6 7V6H5V7H6ZM18 9.7V10.7H19V9.7H18ZM6 9.7H5V10.7H6V9.7ZM5 6V5H4V6H5ZM19 6H20V5H19V6ZM19 18V19H20V18H19ZM5 18H4V19H5V18ZM8.46991 10.7H9.46991V9.7H8.46991V10.7ZM6 10.7V9.7H5V10.7H6ZM8.46991 17V18H9.46991V17H8.46991ZM6 17H5V18H6V17ZM9.46991 17H8.46991V18H9.46991V17ZM18 17V18H19V17H18ZM18 10.7H19V9.7H18V10.7ZM9.46991 10.7V9.7H8.46991V10.7H9.46991ZM18 6H6V8H18V6ZM19 9.7V7H17V9.7H19ZM8.96991 10.7H18V8.7H8.96991V10.7ZM6 10.7H8.96991V8.7H6V10.7ZM5 7V9.7H7V7H5ZM6 10.7V9.7H4V10.7H6ZM4 7V9.7H6V7H4ZM4 6V7H6V6H4ZM6 5H5V7H6V5ZM18 5H6V7H18V5ZM19 5H18V7H19V5ZM20 7V6H18V7H20ZM20 17V7H18V17H20ZM20 18V17H18V18H20ZM18 19H19V17H18V19ZM6 19H18V17H6V19ZM5 19H6V17H5V19ZM4 17V18H6V17H4ZM4 10.7V17H6V10.7H4ZM8.46991 9.7H6V11.7H8.46991V9.7ZM9.46991 17V10.7H7.46991V17H9.46991ZM6 18H8.46991V16H6V18ZM5 10.7V17H7V10.7H5ZM9.46991 18H18V16H9.46991V18ZM19 17V10.7H17V17H19ZM18 9.7H9.46991V11.7H18V9.7ZM8.46991 10.7V17H10.4699V10.7H8.46991Z",fill:"white",mask:"url(#path-2-inside-1_3268_73108)"})),i.createElement("defs",null,i.createElement("clipPath",{id:"clip0_3268_73108"},i.createElement("rect",{width:"24",height:"24",fill:"white"}))))}function v(e){return m(e)}},455057:(e,r,n)=>{n.d(r,{S:()=>u,_:()=>m});var i=n(411855),a=n(629019),o=n.n(a),s=n(163023),l=n(501114),c=n(794587),d=n(54375),u=(e=>(e[e.INFORMATION=0]="INFORMATION",e[e.ERROR=1]="ERROR",e[e.WARNING=2]="WARNING",e[e.FIGJAM=3]="FIGJAM",e[e.PLAIN=4]="PLAIN",e))(u||{});function m({color:e,icon:r,fullWidth:n,rounded:a=!0,text:u,dataTestId:m,padding:p}){return i.createElement("div",{"data-testid":m,style:l.sx.if(!a,{borderRadius:"0px"}).if(void 0!==p,{padding:p+"px"}).$,className:o()({[c.ZI]:0===e,[c.z3]:1===e,[c.$e]:2===e,[c.hh]:3===e,[c.pj]:4===e,[c.Ij]:n})},i.createElement(s.B,{autosize:!0,className:c.G,width:"16px",height:"12px",svg:r??d.A}),i.createElement("p",null,u))}},439729:(e,r,n)=>{n.d(r,{T:()=>o});var i=n(411855),a=n(178466);let o=i.memo(function(e){let r=e.locale||(0,a.Gq)().getPrimaryLocale(!1),n=i.useMemo(()=>new Intl.ListFormat(r,{style:e.formatStyle||"long",type:e.formatType||"conjunction"}),[r,e.formatStyle,e.formatType]),o=i.Children.toArray(e.children),s=n.formatToParts(o.map((e,r)=>`${r}`)).map((e,r)=>"element"===e.type?o[Number(e.value)]:"literal"===e.type?i.createElement("span",{key:`${r}_literal`},e.value):null);return i.createElement("span",{className:e.className||""},s)})},723325:(e,r,n)=>{n.d(r,{M3:()=>y,Nt:()=>T,bh:()=>v,c2:()=>I,dP:()=>E,lv:()=>w,yn:()=>S,z3:()=>b});var i=n(411855),a=n(561546),o=n(140593),s=n(966664),l=n(157663),c=n(44948),d=n(498750),u=n(860601),m=n(563706),p=n(522739);let h={preventScroll:!1,block:"nearest"},_={supportHorizontalNavigation:!0,simulateClickOnEnter:!0};class g{constructor({id:e,path:r,column:n,element:i,defaultFocusOptions:a=h,setIsFauxFocused:o,fauxClick:s,keyboardItemNavigationOptions:l=_}){this.id=e,this.path=r,this.column=n,this.element=i,this.defaultFocusOptions=a,this.setIsFauxFocused=o,this.fauxClick=s,this.navigationOptions=l}addToTree(e,r){this.tree=e,function(e,r){let n;let{path:i,column:a}=r;try{n=P(e,i,!0)}catch(e){l.k.warn("Failed to add item to KeyboardNavigationProvider tree: ",r);return}let o=a??0,s=n.items[o]?.element;s&&s!==r.element&&l.k.warn("Overwriting item in KeyboardNavigationProvider tree. Existing item: ",n.items[o]," New item: ",r),n.items[o]=r}(e,this),r&&this.id&&r.set(this.id,this)}removeFromTree(e){this.tree&&(function(e,r){let n,i;let{path:o,column:c}=r;try{n=(i=P(e,o)).items[c||0]??null}catch(e){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(!n){l.k.warn("Item not found in KeyboardNavigationProvider tree: ",r);return}if(n.element!==r.element){l.k.warn("Item found in KeyboardNavigationProvider tree, but it does not match the expected item: ",n,r);return}if(i.items[c||0]=void 0,i.items.every(s.uy)){R(e,o.slice(0,-1)).children[o[o.length-1]]=void 0;for(let r=o.length-1;r>=1;r--){let n=o.slice(0,r),[i,l]=(0,a.Vs)(n),c=R(e,i);if(R(e,n).children.every(s.uy))c.children[l]=void 0;else break}e.children.every(s.uy)&&(e.children=[])}}(this.tree,this),this.tree=void 0),e&&this.id&&e.delete(this.id)}focus(e=this.defaultFocusOptions){this.element.focus({preventScroll:!0}),e.preventScroll||this.element.scrollIntoView(e)}blur(){this.element.blur()}fauxFocus(e=this.defaultFocusOptions){this.setIsFauxFocused(!0,this),e.preventScroll||this.element.scrollIntoView(e)}fauxBlur(){this.setIsFauxFocused(!1,this)}simulateClick(){this.fauxClick?this.fauxClick():this.element.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))}getItemAbove(){return this.tree&&O(this.tree,this,"up")}getItemBelow(){if(!this.tree)return null;let e=O(this.tree,this,"down")||null;for(;e&&e.navigationOptions.skipOnDownNavigation;)e=e.getItemBelow();return e}getItemToTheLeft(){return this.tree&&L(this.tree,this,"left")}getItemToTheRight(){if(!this.tree)return null;let e=L(this.tree,this,"right")||null;for(;e&&e.navigationOptions.skipOnRightNavigation;)e=e.getItemToTheRight();return e}}let f=i.createContext(null),E=i.forwardRef(function({onKeyDown:e,allowVim:r=!1,disabled:n,overrideDown:a,overrideUp:o,overrideLeft:s,overrideRight:l,allowHorizontalNavigationWhileInputFocused:c=!1,useKeyNavFauxFocusSync:d,useFocusOnly:m,useDisplayContents:h,..._},g){let E=i.useRef({type:"parent",children:[]}),y=i.useRef(new Map),b=i.useRef(null),v=i.useCallback(e=>{b.current===e&&(b.current=null)},[]),A=i.useCallback(e=>{b.current=e},[]),C=i.useRef(null),N=i.useRef(null),L=i.useRef(u.lQ),O=i.useCallback(e=>{e===C.current&&(C.current=null,L.current(),L.current=u.lQ)},[]),R=i.useCallback((e,r)=>{C.current&&O(C.current),C.current=e,L.current=r},[O]),P=i.useCallback(n=>{let i=b.current,d=C.current,u=k(n),p=!(n.metaKey||n.ctrlKey||n.altKey||n.shiftKey)&&c;if(I(n,r)){if(d&&!m){n.preventDefault();let e=D(E.current,d,o);e?e?.fauxFocus():d.getItemAbove()?.fauxFocus()}else if(i){n.preventDefault();let e=D(E.current,i,o);e?e?.focus():i.getItemAbove()?.focus()}}else if(T(n,r)){if(d&&!m){n.preventDefault();let e=D(E.current,d,a);e?e?.fauxFocus():d.getItemBelow()?.fauxFocus()}else if(i){n.preventDefault();let e=D(E.current,i,a);e?e?.focus():i.getItemBelow()?.focus()}else N.current&&N.current.fauxFocus()}else if(S(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!m){n.preventDefault();let e=D(E.current,d,s);e?e?.fauxFocus():d.getItemToTheLeft()?.fauxFocus()}else if(i){n.preventDefault();let e=D(E.current,i,s);e?e?.focus():i.getItemToTheLeft()?.focus()}}else if(w(u,r,p)){if(d&&d.navigationOptions.supportHorizontalNavigation&&!m){n.preventDefault();let e=D(E.current,d,l);e?e?.fauxFocus():d.getItemToTheRight()?.fauxFocus()}else if(i){n.preventDefault();let e=D(E.current,i,l);e?e?.focus():i.getItemToTheRight()?.focus()}}else"Enter"===u?d&&!m&&(n.preventDefault(),d.navigationOptions.simulateClickOnEnter&&d.simulateClick()):"Escape"===u&&(i||d)&&(n.preventDefault(),i&&i.blur(),d&&d.fauxBlur());e?.(n)},[c,r,e,m,o,a,s,l]),M=i.useMemo(()=>({tree:E.current,lookupMap:y.current,onFocusItem:A,onBlurItem:v,onFauxFocusItem:R,onFauxBlurItem:O,fauxBlurItem:()=>C.current?.fauxBlur(),blurItem:()=>b.current?.blur(),setDefaultFauxFocusedItem:e=>{N.current||(N.current=e)},fauxFocusDefaultItem:()=>{N.current?.fauxFocus()},useKeyNavFauxFocusSync:d}),[A,v,R,O,d]);return i.createElement(f.Provider,{value:M},i.createElement(p.D8,{style:h?{display:"contents"}:void 0,onKeyDown:n?e:P,forwardedRef:g,..._}))});function y({path:e,column:r=null,id:n,defaultFocusOptions:a,onFocus:o,onBlur:l,onFauxFocus:d,onFauxBlur:u,fauxClick:m,disabled:p,navigationOptions:h}){let _=(0,c.zN)(e),E=(0,c.zN)(a),y=(0,c.zN)(h);if(0===_.length)throw Error("Path must be non-empty");if(_.some(e=>e<0))throw Error("All path indices must be non-negative");if(null!=r&&r<0)throw Error("Column must be non-negative");let[b,v]=i.useState(void 0),[I,T]=i.useState(!1),[S,w]=i.useState(!1),A=i.useRef(null),{tree:C,lookupMap:N,onFocusItem:L,onBlurItem:O,onFauxFocusItem:R,onFauxBlurItem:P,setDefaultFauxFocusedItem:D,useKeyNavFauxFocusSync:k}=(0,s.sR)(i.useContext(f),"Must use `useKeyboardNavigationItem` inside `<KeyboardNavigationProvider>");i.useEffect(()=>{if(b&&!p){let e=()=>T(!0),r=()=>T(!1);return b.addEventListener("focus",e),b.addEventListener("blur",r),b===document.activeElement&&e(),()=>{b.removeEventListener("focus",e),b.removeEventListener("blur",r),b===document.activeElement&&r()}}},[p,b]);let M=i.useCallback(e=>{w(r=>(r&&(u?.(),P(e)),!1))},[u,P]),F=i.useCallback(e=>{w(r=>(r||(d?.(),R(e,()=>{null!==A.current&&clearTimeout(A.current),A.current=setTimeout(()=>{M(e)},0)})),!0))},[M,d,R]),x=i.useCallback((e,r)=>{e?F(r):M(r)},[F,M]);i.useEffect(()=>()=>{null!==A.current&&clearTimeout(A.current)},[]);let U=i.useMemo(()=>null==b||p?null:new g({id:n,path:_,column:r,element:b,defaultFocusOptions:E,setIsFauxFocused:k?x:w,fauxClick:m,keyboardItemNavigationOptions:y}),[b,p,n,_,r,E,k,x,m,y]);return i.useEffect(()=>{if(U)return U.addToTree(C,N),U.navigationOptions.fauxFocusByDefault&&D(U),()=>{U.removeFromTree(N),U.navigationOptions.fauxFocusByDefault&&D(null)}},[U,N,D,C]),i.useEffect(()=>{if(U&&I)return o?.(),L(U),()=>{l?.(),O(U)}},[U,I,o,l,L,O]),i.useEffect(()=>{if(!k&&U&&S)return d?.(),R(U,()=>{w(!1)}),()=>{u?.(),P(U)}},[U,S,d,u,R,P,k]),{setKeyboardNavigationElement:v,keyboardNavigationItem:U,isFocused:I,isFauxFocused:S}}function b(e="real"){let{blurItem:r,fauxBlurItem:n}=(0,s.sR)(i.useContext(f),"Must use `useBlurFocusedItem` inside `<KeyboardNavigationProvider>");return i.useCallback(()=>{switch(e){case"real":r();break;case"faux":n();break;default:(0,o.xb)(e)}},[r,n,e])}function v({preventScroll:e}={}){let{tree:r}=(0,s.sR)(i.useContext(f),"Must use `useFocusFirstItem` inside `<KeyboardNavigationProvider>");return i.useCallback(()=>{let n=function e(r){if("leaf"===r.type)return r.items.find(e=>null!=e)??null;for(let n of r.children)if(n){let r=e(n);if(r)return r}return null}(r);n?.focus({preventScroll:e})},[e,r])}function I(e,r){let n=k(e),i=(0,d.vN)(e,d.xH.CONTROL),a=m.Ay.mac&&i;return"ArrowUp"===n||"KeyK"===n&&r&&A()||a&&"KeyP"===n}function T(e,r){let n=k(e),i=(0,d.vN)(e,d.xH.CONTROL),a=m.Ay.mac&&i;return"ArrowDown"===n||"KeyJ"===n&&r&&A()||a&&"KeyN"===n}function S(e,r,n=!1){return"ArrowLeft"===e&&C(n)||"KeyH"===e&&r&&A()}function w(e,r,n=!1){return"ArrowRight"===e&&C(n)||"KeyL"===e&&r&&A()}function A(){return!N(document.activeElement)}function C(e){let r=document.activeElement;return!N(r)||!!e||(r instanceof HTMLDivElement?""===r.textContent:""===r.value)}function N(e){return!!e&&(e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)||e instanceof HTMLDivElement&&"true"===e.contentEditable}function L(e,{path:r,column:n},i){if(null==n)return;let o=P(e,r);return("left"===i?a.lq:a.M0)(o.items,n)||O(e,{path:r,column:"left"===i?1/0:-1},"left"===i?"up":"down")}function O(e,{path:r,column:n},i){for(let o=r.length-1;o>=0;o--){let s=r.slice(0,o),l=r[o],c=R(e,s),d=("up"===i?a.lq:a.M0)(c.children,l);if(d){let e=("up"===i?function e(r){if("leaf"===r.type)return r;let n=(0,a.lq)(r.children,r.children.length);if(n)return e(n);throw Error("Expected a node but got nothing")}:function e(r){if("leaf"===r.type)return r;let n=(0,a.M0)(r.children,-1);if(n)return e(n);throw Error("Expected a node but got nothing")})(d);return(0,a.qg)(e.items,n||0)}}}function R(e,r,n=!1){for(let i of r){let r=e.children[i];if(r){if("leaf"===r.type)throw Error("Expected a parent but got a leaf");e=r}else if(n){let r={type:"parent",children:[]};e.children[i]=r,e=r}else throw Error("Expected a parent but got nothing")}return e}function P(e,r,n=!1){let[i,o]=(0,a.Vs)(r),s=R(e,i,n),l=s.children[o];if(l){if("parent"!==l.type)return l;throw Error("Expected a parent but got a leaf")}if(n){let e={type:"leaf",items:[]};return s.children[o]=e,e}throw Error("Expected a leaf but got nothing")}function D(e,r,n){try{var i,a;let o=n?.(r);return o&&(i=o.path,a=o.column,P(e,i).items[a??0])}catch(e){}}function k(e){return e.code??e.key}},638889:(e,r,n)=>{n.d(r,{S:()=>o});var i=n(411855),a=n(939931);class o extends i.PureComponent{render(){let e=["\u2318","\u2325","\u21E7","\u2303"];return i.createElement("span",{className:this.props.className},this.props.shortcut.split("").map((r,n)=>{let o=-1!==e.indexOf(r)?a.C:a.G;return i.createElement("span",{key:n,className:o},r)}))}}o.displayName="KeyboardShortcut"},607899:(e,r,n)=>{n.d(r,{n:()=>i.o});var i=n(194422);n(411855),n(629019),n(281249),n(354235)},194422:(e,r,n)=>{n.d(r,{o:()=>i});var i,a=n(167249);(e=>{e.set=(0,a.N)("BLOCKED_UI_LOADING_INDICATOR_SET"),e.remove=(0,a.N)("BLOCKED_UI_LOADING_INDICATOR_REMOVE")})(i||(i={}))},976999:(e,r,n)=>{n.d(r,{JR:()=>o,Qp:()=>c,Wi:()=>l});var i=n(411855),a=n(194021),o=(e=>(e.SHIMMER="shimmer",e.SHIMMER_ON_MENU="shimmer_on_menu",e.LIGHT_SHIMMER="light_shimmer",e.NO_SHIMMER="no_shimmer",e))(o||{});let s=e=>{switch(e){case"shimmer":default:return a._J;case"light_shimmer":return a.QH;case"shimmer_on_menu":return a.Sw;case"no_shimmer":return}};function l(e){return i.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${"shimmer_on_menu"===e.animationType?a.ky:a.KQ} ${e.primary?a.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},i.createElement("div",{className:s(e.animationType)}))}function c(e){return i.createElement("div",{style:{...e.style??{},opacity:e.opacity?`${e.opacity}%`:"100%"},className:`${a.GE} ${e.primary?a.lx:""} ${e.className||""}`,"data-testid":e.dataTestId},i.createElement("div",{className:s(e.animationType)}))}},922790:(e,r,n)=>{n.d(r,{x:()=>c});var i=n(411855),a=n(629019),o=n.n(a);n(30637);var s=n(154254),l=n(645544);function c({loaded:e,loadingSkeletonElement:r,children:n}){let a=i.useRef(e);return i.createElement("div",{className:s.cx.grid.$},e&&i.createElement("div",{className:o()(s.cx.gridRowEnd1.gridColumnEnd1.$)},n),i.createElement("div",{className:o()(s.cx.eventsNone.gridRowEnd1.gridColumnEnd1.overflowHidden.$,{[l.X]:e,[s.cx.opacity1.$]:!a.current})},r))}},250881:(e,r,n)=>{n.d(r,{R:()=>b});var i=n(411855),a=n(629019),o=n.n(a),s=n(776250),l=n(966712),c=n(563706),d=n(286640),u=n(946689),m=n(939863),p=n(101505),h=n(672517);let _="mobile_download_prompt--mobilePromptTitle--7Tgsn text--fontPos13--xW8hS text--_fontBase--QdLsd",g="mobile_download_prompt--mobilePromptOption--TbF2D",f="mobile_download_prompt--mobilePromptOptionTitle--mMUYW text--fontPos13--xW8hS text--_fontBase--QdLsd",E="mobile_download_prompt--mobilePromptOptionImage--Cp9zK",y="mobile_download_prompt_dismissed";function b(e){let{isCompact:r}=e,n=c.aR?"https://apps.apple.com/us/app/figma-mirror/id1152747299#":"https://play.google.com/store/apps/details?id=com.figma.mirror",a=(0,d.UG)(),_=!r&&!!e.renderBlockingPrompt,[b,T]=i.useState(!_),[S,w]=i.useState(!_);i.useEffect(()=>{null===a.get(y)&&(T(!1),w(!1))},[a,_]);let A=()=>{_||(T(!0),(0,s.sx)("mobile_web_mobile_app_download_prompt_dismissed",{userId:e.userIdForTracking}),setTimeout(()=>{w(!0)},300),a.set(y,!0))};return null!==a.get(y)?null:i.createElement(h.fu,{name:"Mobile Download Prompt"},i.createElement("div",{className:o()({"mobile_download_prompt--overlay--OzW6J":!0,"mobile_download_prompt--overlayClosed--2FWpY":b,"mobile_download_prompt--overlayAnimateEnd--dBvI0":S}),style:{transitionDuration:"300ms"},onClick:A},i.createElement("div",{className:o()("mobile_download_prompt--mobilePromptContainer--FKz5e","mobile_download_prompt--mobileDownloadPromptContainer--FaI33",{"mobile_download_prompt--mobileDownloadPromptContainerClosed--DHusv":b,"mobile_download_prompt--mobileDownloadPromptContainerFullHeightBlocking--B100f":_}),onClick:e=>{e.stopPropagation()}},i.createElement("div",{className:o()("mobile_download_prompt--mobilePromptDescriptionContainer--1PhoH",{"mobile_download_prompt--fullHeightPrompt--U6KWw":_})},r?i.createElement(I,null):i.createElement(v,{renderBlockingPrompt:_??!1})),i.createElement("hr",{className:o()({"mobile_download_prompt--mobilePromptHR--UpOqS":!0,"mobile_download_prompt--fullWidthHR--B-2i1":_})}),i.createElement("div",{className:g},i.createElement("img",{className:E,src:(0,l.ck)("249f0f055b922ecef6bffc592a8420e7e6eddcea"),alt:(0,m.t)("file_browser.mobile_prompt.app_image_alt")}),i.createElement("div",null,i.createElement("h3",{className:f},(0,m.tx)("file_browser.mobile_prompt.app_title")),i.createElement("p",{className:"mobile_download_prompt--mobilePromptOptionDescription--APlZp text--fontPos11--2LvXf text--_fontBase--QdLsd"},_?(0,m.tx)("file_browser.mobile_prompt.app_description_new"):(0,m.tx)("file_browser.mobile_prompt.app_description"))),i.createElement(u.pY,{trackingProperties:{userId:e.userIdForTracking,appLink:n,trackingDescriptor:p.c.MOBILE_WEB_MOBILE_APP_DOWNLOAD_PROMPT_CLICKED},href:n,className:"mobile_download_prompt--downloadActionButton--lOsEh"},(0,m.tx)("file_browser.mobile_prompt.app_action"))),!_&&i.createElement("div",{className:g},i.createElement("img",{className:E,src:(0,l.ck)("741698fed49afa5e8f3becdd906e66d32c8e7fae"),alt:(0,m.t)("file_browser.mobile_prompt.browser_image_alt")}),i.createElement("div",null,i.createElement("h3",{className:f},(0,m.tx)("file_browser.mobile_prompt.browser_title"))),i.createElement(u.p6,{onClick:()=>A(),className:"mobile_download_prompt--continueActionButton--7yKGD"},(0,m.tx)("file_browser.mobile_prompt.browser_action"))))))}function v(e){return i.createElement(i.Fragment,null,i.createElement("img",{className:"mobile_download_prompt--mobilePromptImage--U2Yqj",src:(0,l.ck)("5f1dc37f397dbddf711d3d950bee5dd46c07fc72"),alt:(0,m.t)("file_browser.mobile_prompt.image_alt")}),i.createElement("div",{className:"mobile_download_prompt--mobilePromptTitleContainer--o8VIK"},i.createElement("h2",{className:_},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_title_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_title")),i.createElement("p",{className:"mobile_download_prompt--mobilePromptSubTitle--GFR67 text--fontPos13--xW8hS text--_fontBase--QdLsd"},e.renderBlockingPrompt?(0,m.tx)("file_browser.mobile_prompt.modal_body_blocking"):(0,m.tx)("file_browser.mobile_prompt.modal_body"))))}function I(){return i.createElement(i.Fragment,null,i.createElement("h2",{className:_},(0,m.tx)("file_browser.mobile_prompt.modal_title_compact")))}},32863:(e,r,n)=>{n.d(r,{Cp:()=>x,IW:()=>F,Lp:()=>V,Qv:()=>U,jq:()=>G,ne:()=>M,o_:()=>H,xD:()=>B,y2:()=>K});var i=n(411855),a=n(782683),o=n(882316),s=n(629019),l=n.n(s),c=n(91408),d=n(320063),u=n(358145),m=n(498750),p=n(153234),h=n(522739),_=n(452441),g=n(163023),f=n(154254),E=n(939863),y=n(501114),b=n(896474),v=n(226055),I=n(283942),T=n(498606),S=n(507956),w=n(227795),A=n(170588),C=n(837746),N=n(404921),L=n(399403),O=n(700977),R=n(703475),P=n(630834),D=n(361807),k=n(372240);function M(e,r){let n=i.useCallback(e=>{setTimeout(()=>{v.current&&(v.current.focus(),e&&v.current.select())},0)},[]),a=i.useCallback(()=>{v.current&&v.current.blur()},[]),o=i.useCallback(()=>{v.current&&v.current.select()},[]);i.useImperativeHandle(r,()=>({focus:n,blur:a,select:o,searchInput:v.current}));let[s,l]=i.useState(!1),[c,h]=i.useState(!1),[_,g]=i.useState(void 0),{onFocus:f,onClick:E}=e,y=i.useCallback(()=>{f&&f(),h(!0)},[f]),b=i.useRef(!1),v=i.useRef(null),T=i.useCallback(e=>{b.current=document.activeElement!==e.target},[]),S=i.useCallback(()=>{b.current&&(v.current?.select(),y())},[y]),w=i.useCallback(()=>{e.onBlur&&e.onBlur(),h(!1)},[e]),A=p.AF(e.recordingKey,"change",r=>{let n=r.target;e.onChange(n.value)}),C=p.v_(e.recordingKey,"keydown",r=>{if(!(e.isKeyDownHandled&&e.isKeyDownHandled(r))){if(" "===r.key&&r.stopPropagation(),r.keyCode===m.Uz.ESCAPE){v.current?.blur();return}(0,I.jr)(r,I.W0.NO)}}),N=i.useCallback((e=!1)=>{e&&l(!0),n(),E&&E()},[n,E]),L=p.rf(e.recordingKey,"click",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),O=p.v_(e.recordingKey+".clear","keydown",r=>{r.stopPropagation(),e.clearSearch(),l(!1),n()}),R=(0,u.ZC)(e.isFocused);return i.useEffect(()=>{R||!0!==e.isFocused?!0===R&&!1===e.isFocused&&a():n()},[a,n,R,e.isFocused]),(0,d.h)(()=>{e.focusOnMount&&v.current&&(v.current.focus(),y()),e.selectTextOnMount&&v.current&&v.current.select()}),{loggedOutSearchBarActivated:s,inputFocused:c,placeholderWidth:_,setPlaceholderWidth:g,searchInputRef:v,onMouseDown:T,onMouseUp:S,onSearchClick:N,onClearSearchClick:L,onClearSearchKeyDown:O,onFocus:f,onBlur:w,onClick:E,onSearchKeyDown:C,onSearchChange:A}}let F=i.forwardRef((e,r)=>{let n=(0,v.GS)(),{searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:m,onSearchKeyDown:p,onSearchChange:h}=M(e,r),f=(0,S.ks)(),b=f?N.vq:N.rk;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${b} ${e.className||""}`},e.withUI3Icon?i.createElement(a.h,{className:e.iconClassName}):i.createElement(g.B,{className:e.iconClassName??N.qc,svg:L.A}),i.createElement(_.L,{ref:o,placeholder:e.placeholder||(0,E.t)("general.search"),className:N.mn,value:e.query,onMouseDown:s,onMouseUp:l,onFocus:d,onBlur:u,onClick:m,onChange:h,onKeyDown:p,spellCheck:!1,style:y.sx.if(e.hasTransparentBackground,y.sx.add({background:"transparent"})).if(f||e.smallFont,y.sx.if(n,y.sx.textBodyMedium,y.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),i.createElement(W,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))});i.forwardRef((e,r)=>{let n=(0,v.GS)(),{searchInputRef:a,onMouseDown:o,onMouseUp:s,onClearSearchClick:l,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:m,onSearchChange:p}=M(e,r),h=(0,S.ks)(),g=h?N.vq:N.rk;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${g} ${e.className||""}`},i.createElement("button",{onClick:e.onBack,className:f.cx.colorBgSecondary.$},i.createElement(b.In,{icon:"chevron-left-32"})),i.createElement(_.L,{ref:a,placeholder:e.placeholder||(0,E.t)("general.search"),className:N.mn,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:c,onBlur:d,onClick:u,onChange:p,onKeyDown:m,spellCheck:!1,style:y.sx.if(e.hasTransparentBackground,y.sx.add({background:"transparent"})).if(h||e.smallFont,y.sx.if(n,y.sx.textBodyMedium,y.sx.font11.$)).$,disabled:e.disabled,dataTestId:"search-bar-input",maxInputLength:e.maxInputLength}),i.createElement(W,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:l}))}),i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onSearchClick:d,onClearSearchClick:u,onFocus:m,onBlur:p,onClick:h,onSearchKeyDown:f,onSearchChange:y}=M(e,r),b=e.placeholder||(0,E.t)("general.search"),v=`${e.className||""} ${n?N.pp:N.MI}`;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:v},i.createElement(g.B,{className:N.MU,svg:L.A,onClick:()=>d()}),i.createElement(_.L,{ref:s,placeholder:b,className:N.mn,value:e.query,onMouseDown:l,onMouseUp:c,onFocus:m,onBlur:p,onClick:h,onChange:y,onKeyDown:f,style:{width:n?void 0:a},spellCheck:!1}),i.createElement("div",{className:N.ds,ref:e=>o(e?.getBoundingClientRect().width)},b),i.createElement(W,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:u}))}),i.forwardRef((e,r)=>{let n=i.createRef();return i.useImperativeHandle(r,()=>n.current),i.createElement("div",{className:N.$7,onMouseDown:()=>n.current?.focus()},i.createElement(F,{...e,smallFont:!0,hasTransparentBackground:!0,className:l()(f.cx.wFull.$,e.className),ref:n}))});let x=i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,searchInputRef:o,onMouseDown:s,onMouseUp:l,onClearSearchClick:c,onFocus:d,onBlur:u,onClick:m,onSearchKeyDown:p,onSearchChange:h}=M(e,r),f=e.placeholder||(0,E.t)("general.search"),y=`${e.className||""} ${N.W1}`,b=e.query.length>0?N.p3:N.Rt;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{s(e),e.target.matches("input")||e.preventDefault()},onMouseUp:l},i.createElement(g.B,{className:N.mh,svg:L.A}),i.createElement(_.L,{ref:o,placeholder:f,className:b,value:e.query,onFocus:d,onBlur:u,onClick:m,onChange:h,onKeyDown:p,style:{width:n?void 0:a},spellCheck:!1}),i.createElement(W,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:c}))}),U=i.forwardRef((e,r)=>{let{inputFocused:n,placeholderWidth:a,setPlaceholderWidth:o,searchInputRef:s,onMouseDown:l,onMouseUp:c,onClearSearchClick:d,onFocus:u,onBlur:m,onClick:p,onSearchKeyDown:h,onSearchChange:g}=M(e,r),f=e.placeholder||(0,E.t)("general.search"),y=`${e.className||""} ${N.Gh}`,v=e.query.length>0?N.r3:N.nP;return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:y,onMouseDown:e=>{l(e),e.target.matches("input")||e.preventDefault()},onMouseUp:c},i.createElement(b.In,{icon:"search-32"}),i.createElement(_.L,{ref:s,placeholder:f,className:v,value:e.query,onFocus:u,onBlur:m,onClick:p,onChange:g,onKeyDown:h,style:{width:n?void 0:a},spellCheck:!1}),i.createElement("div",{className:N.lm,ref:e=>o(Math.max(50,e?.getBoundingClientRect().width))},f),i.createElement(W,{query:e.query,hideXIcon:!!e.hideXIcon,withSmallXIcon:!!e.withSmallXIcon,onClearSearchClick:d}))}),B=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onFocus:s,onBlur:l,onClick:c,onSearchKeyDown:d,onSearchChange:u}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:N.sb},i.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("general.search"),className:N.vs,value:e.query,onMouseDown:a,onMouseUp:o,onFocus:s,onBlur:l,onChange:u,onClick:c,onKeyDown:d,spellCheck:!1}),i.createElement(g.B,{className:N.Ck,svg:O.A,onClick:e.onSubmit}))}),V=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onClearSearchClick:s,onFocus:c,onBlur:d,onClick:u,onSearchKeyDown:m,onSearchChange:h}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:l()(e.className||N.HD,{[N.RT]:!e.extraSpacing,[N.qX]:e.extraSpacing,[N.Cs]:e.hideSearchIcon})},!e.hideSearchIcon&&i.createElement(g.B,{svg:R.A,className:N.nk}),i.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("design_systems.publishing_modal.search_placeholder"),className:e.query?N.CC:N.Vl,value:e.query,onMouseDown:a,onMouseUp:o,onFocus:c,onBlur:d,onClick:u,onChange:h,onKeyDown:m,spellCheck:!1,dataTestId:e.dataTestId}),!!e.query&&!e.hideXIcon&&i.createElement(w.Me,{recordingKey:p.Pt(e,"closeX"),svg:P.default,onClick:s,"data-tooltip-type":T.Ib.TEXT,"data-tooltip":(0,E.t)("search.search_bar.clear")}))}),G=i.forwardRef((e,r)=>{let{searchInputRef:n,onMouseDown:a,onMouseUp:o,onClearSearchClick:s,onFocus:l,onBlur:c,onClick:d,onSearchKeyDown:u,onSearchChange:m}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${N.ZG} ${e.className||""}`},i.createElement(g.B,{svg:R.A,className:N.MU}),i.createElement(_.L,{ref:n,placeholder:e.placeholder||(0,E.t)("general.search"),className:N.uD,value:e.query,onMouseDown:a,onMouseUp:o,onFocus:l,onBlur:c,onClick:d,onChange:m,onKeyDown:u,spellCheck:!1,style:e.hasTransparentBackground?{background:"transparent"}:void 0}),i.createElement(h.D8,{className:N.m9,onClick:s,recordingKey:p.Pt(e,"clearSearch")},!!e.query&&(0,E.tx)("collaboration.branching_to_source.clear")),!e.hideXIcon&&i.createElement("div",{className:N.NC},i.createElement(g.B,{className:N.i3,svg:P.default,onClick:e.onClose})))}),H=i.forwardRef((e,r)=>{let{loggedOutSearchBarActivated:n,searchInputRef:a,onMouseDown:o,onMouseUp:s,onSearchClick:l,onClearSearchClick:d,onFocus:u,onBlur:m,onClick:p,onSearchKeyDown:h,onSearchChange:f}=M(e,r);return i.createElement("div",{"data-onboarding-key":e["data-onboarding-key"],className:`${N.ax} ${e.className||""}`},!n&&!e.query&&i.createElement("div",{className:N.JU,onClick:()=>l(!0)},i.createElement(g.B,{className:N.Qm,svg:O.A})),(n||!!e.query)&&i.createElement("div",{className:N.S_},i.createElement(_.L,{ref:a,placeholder:e.placeholder||(0,E.t)("general.search"),className:N.nA,value:e.query,onMouseDown:o,onMouseUp:s,onFocus:u,onBlur:m,onClick:p,onChange:f,onKeyDown:h,autoFocus:!0,spellCheck:!1}),i.createElement(A.z,{query:`(min-width: ${(0,c.hG)(C.tgj)}px)`},i.createElement(g.B,{className:N.i3,svg:D.A,onClick:d})),i.createElement(A.z,{query:`(max-width: ${(0,c.hG)(C.tgj)-1}px)`},i.createElement(g.B,{className:N.i3,svg:k.A,onClick:d}))))}),K=i.forwardRef((e,r)=>{let n=i.createRef();return i.useImperativeHandle(r,()=>n.current),i.createElement("div",{className:N.tL,style:e.styleOverrides,onMouseDown:()=>n.current?.focus()},i.createElement(F,{...e,smallFont:!0,className:l()(f.cx.wFull.$,e.className),ref:n}))});function W({query:e,hideXIcon:r,withSmallXIcon:n,onClearSearchClick:a}){return!e||r?null:i.createElement(i.Fragment,null,n?i.createElement(h.D8,{className:N.i3,onClick:a},i.createElement(o.f,null)):i.createElement(g.B,{dataTestId:"search-x-icon",className:N.i3,svg:P.default,onClick:a}))}},910769:(e,r,n)=>{n(411855),n(188507);var i=n(672517),a=n(206316);(0,i.tf)(a.d)},524173:(e,r,n)=>{n.d(r,{On:()=>s});var i=n(411855),a=n(140593),o=n(568343);class s extends i.PureComponent{render(){(0,a.KF)(Number.isInteger(this.props.number),"breadcrumb step must be an integer"),(0,a.KF)(this.props.number>=1&&this.props.number<=20,"breadcrumb step is out of expected range");let e="";return this.props.selected?(e+=o.Qq,this.props.lightText&&(e+=" "+o.vV)):(e+=o.PM,this.props.lightText&&(e+=" "+o.x8)),this.props.canClick&&(this.props.lightText?e+=" "+o.v6:e+=" "+o.lm),i.createElement("div",{"data-testid":this.props.number+this.props.text,className:e,onClick:()=>this.props.canClick&&this.props.onClick&&this.props.onClick()},i.createElement("span",{className:o.CD},String.fromCharCode(9311+this.props.number)),this.props.text)}}s.displayName="StepBreadcrumb";class l extends i.PureComponent{render(){return i.createElement("div",{className:o.QM})}}l.displayName="StepBreadcrumbSpacer";class c extends i.PureComponent{render(){return i.createElement("div",{className:`${o.Fb} ${this.props.className||""}`},this.props.children)}}c.displayName="StepTitle";class d extends i.PureComponent{render(){return i.createElement("div",{className:o.eN,...this.props})}}d.displayName="StepInstructions"},271779:(e,r,n)=>{n.d(r,{C:()=>c,i:()=>d});var i=n(411855),a=n(629019),o=n.n(a),s=n(503537),l=n(154254),c=(e=>(e.Block="block",e.DeprecatedFullHeightBlock="fullHeightBlock",e.Contents="contents",e))(c||{});class d extends i.Component{constructor(){super(...arguments),this.containerRef=i.createRef(),this.traverseChildren=()=>{this.firstTabbableEl=void 0,this.lastTabbableEl=void 0;let e=r=>{for(let n of((0,s.B)(r)&&((!this.firstTabbableEl||r.tabIndex<this.firstTabbableEl.tabIndex)&&(this.firstTabbableEl=r),(!this.lastTabbableEl||r.tabIndex>=this.lastTabbableEl.tabIndex)&&(this.lastTabbableEl=r)),Array.from(r.children)))e(n);for(let n of Array.from(r.shadowRoot?.children||[]))e(n)};e(this.containerRef.current)},this.onFrontGuardFocus=e=>{this.traverseChildren();let r=this.containerRef.current.contains(e.relatedTarget)?this.lastTabbableEl:this.firstTabbableEl;this.focusElement(r)},this.onBackGuardFocus=()=>{this.traverseChildren(),this.focusElement(this.firstTabbableEl)}}focusElement(e){e&&setTimeout(()=>{e.focus(),e.select?.()},0)}render(){let e=o()(this.props.className,{[l.cx.hFull.$]:"fullHeightBlock"===this.props.displayAs,displayContents:"contents"===this.props.displayAs});return i.createElement("div",{className:e,style:this.props.style},i.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onFrontGuardFocus}),i.createElement("div",{className:e,ref:this.containerRef},this.props.children),i.createElement("div",{"aria-hidden":"true",tabIndex:0,onFocus:this.onBackGuardFocus}))}}d.defaultProps={displayAs:"contents"},d.displayName="TabLoop"},331737:(e,r,n)=>{n.d(r,{NU:()=>p});var i=n(411855),a=n(915440),o=n(261902),s=n(71656),l=n(554460),c=n(869381),d=n(27703),u=n(99506),m=n(279453);function p({file:e,...r}){var n,p;let h=(0,a.Rs)(m.sMs,{key:e.key}),_=(n=e.editor_type,p=!!e.thumbnail_guid,n===u._Y.SLIDES?c.F.SLIDES:n===u._Y.WHITEBOARD?p?c.F.WHITEBOARD:c.F.DEFAULT_WHITEBOARD:p?c.F.DESIGN:c.F.DEFAULT_DESIGN);if((0,d.i4)(e)){if("loading"===h.status)return i.createElement(l.q,{...r});if(!h.transform(e=>!!e.file?.hasPermission).unwrapOr(!1))return i.createElement(o.N,{thumbnailType:_,...r})}return i.createElement(s.V,{key:e.key,thumbnailUrl:e.thumbnail_url_override??e.thumbnail_url,thumbnailType:_,clientMeta:e.client_meta,lastTouchedAt:e.touched_at??e.updated_at,...r})}},842262:(e,r,n)=>{n.d(r,{A:()=>p});var i=n(411855),a=n(629019),o=n.n(a),s=n(163023),l=n(154254),c=n(939863),d=n(305928),u=n(761070),m=n(639425);function p(e){return e.listView?i.createElement("div",{className:"slightly-larger"===e.listView?d.h5:d._O},i.createElement("div",{className:o()("offline_file_thumbnail--listImage--RsZ9C","slightly-larger"===e.listView?d.Sl:l.cx.hFull.wFull.$)},i.createElement(s.B,{className:"offline_file_thumbnail--listThumbnail--6B-IU",svg:u.A}))):i.createElement("div",{className:"offline_file_thumbnail--thumbnail--mAtos"},i.createElement(s.B,{className:"offline_file_thumbnail--thumbnailIcon--UHGgb",svg:m.A}),i.createElement("div",{className:"offline_file_thumbnail--thumbnailLabel--04hA-"},(0,c.tx)("tile.offline_file_tile.offline_created_file")))}},71656:(e,r,n)=>{n.d(r,{V:()=>I});var i=n(411855),a=n(629019),o=n.n(a),s=n(181912),l=n(966712),c=n(716034),d=n(418956),u=n(864089),m=n(842262),p=n(554460),h=n(869381),_=n(154254),g=n(920037),f=n(268853),E=n(776621);let y=16/9;function b(e){return"#"+(0x1000000+(e[0]<<16)+(e[1]<<8)+e[2]).toString(16).slice(1)}let v=(0,c.eU)({});function I({thumbnailUrl:e,thumbnailType:r,lastTouchedAt:n,clientMeta:a,size:c,borderRadius:I,noBorder:T,addtlStyles:S,draggable:w}){let A=!!(0,l.kc)().file_browser_thumbnails_16_by_9&&r!==h.F.DEFAULT_DESIGN&&r!==h.F.DEFAULT_WHITEBOARD&&r!==h.F.SLIDES,{latestThumbnailUrl:C,smartBackgroundColor:N}=function({touchedAt:e,thumbnailUrl:r,needsSmartBackground:n}){let[a,o]=(0,d.fp)(v),l=!e||(0,s.A)(e).isBefore((0,s.A)().subtract(4,"seconds")),c=!n||r&&!!a[r],[u,m]=i.useState(l&&r&&c?r:null),p=i.useCallback(e=>{if(!n||a[e])m(e);else{let r=new Image;r.crossOrigin="anonymous",r.className=_.cx.fixed.hidden.$,r.onload=()=>{let n=function(e){try{if(!e)return null;if((e.naturalWidth/e.naturalHeight).toFixed(3)===y.toFixed(3))return"transparent";let r=document.createElement("canvas"),n=r.getContext("2d");if(!n)return r.remove(),null;let{width:i,height:a}=e;r.width=i,r.height=a,n.drawImage(e,0,0,i,a);let o=n.getImageData(0,a/2,1,1).data,s=n.getImageData(i/2,0,1,1).data,l=n.getImageData(i,a/2,-1,1).data,c=n.getImageData(i/2,a,1,-1).data,d=b(o),u=b(s),m=b(l),p=b(c);return r.remove(),function(e){let r=new Map,n=null,i=0;for(let a of e){let e=(r.get(a)??0)+1;r.set(a,e),e>i&&(i=e,n=a)}return n}([d,u,m,p])}catch(r){return(0,E.$D)(f.e.WAYFINDING,r,{extra:{imageObject:e,"imageObject instanceof HTMLElement":e instanceof HTMLElement,"imageObject instanceof HTMLImageElement":e instanceof HTMLImageElement}}),null}}(r);n&&o(r=>({...r,[e]:n})),m(e),r.remove()},r.src=e,document.body.appendChild(r)}},[m,n,a,o]);i.useLayoutEffect(()=>{if(r){if(e){let n=(0,s.A)(e).diff((0,s.A)().subtract(4,"seconds"));if(n<=0){p(r);return}{let e=setTimeout(()=>{p(r)},n);return()=>clearTimeout(e)}}p(r)}else m(null)},[e,r,p]);let h=n&&u?a[u]:void 0;return{latestThumbnailUrl:u,smartBackgroundColor:h}}({thumbnailUrl:e,touchedAt:n,needsSmartBackground:A}),{thumbnailLoadError:L,onError:O}=function(e){let[{url:r,hasError:n},a]=i.useState({url:e,hasError:!1}),o=i.useCallback(()=>{a(({url:e})=>({url:e,hasError:!0}))},[]);return e!==r?(a({url:e,hasError:!1}),{thumbnailLoadError:!1,onError:o}):{thumbnailLoadError:n,onError:o}}(C),R=r!==h.F.SLIDES?(0,g.C)(a):void 0,P=r===h.F.DEFAULT_DESIGN||r===h.F.DEFAULT_WHITEBOARD;return i.createElement(p.q,{borderRadius:I,backgroundClassName:o()({"thumbnail--whiteboardBackground--NqVbL":r===h.F.WHITEBOARD||r===h.F.DEFAULT_WHITEBOARD,"thumbnail--checkerboardBackground--Q3H9I":r===h.F.DEFAULT_DESIGN&&(!R||"transparent"===R),"thumbnail--backgroundDefault--018Ph":r===h.F.PROTOTYPE||r===h.F.SLIDES||r===h.F.SITES&&!(A&&N)&&(!R||"transparent"===R)}),noBorder:T,backgroundColor:A?N:R},r===h.F.OFFLINE?i.createElement(m.A,{listView:c===h.y.SMALL}):null!==C&&!L&&i.createElement(u.oW,{src:C,alt:"",loading:"lazy",onError:O,draggable:!!w,className:o()(_.cx.hFull.wFull.$,{"thumbnail--thumbnailCover--IK4Yi":!P&&!(0,l.kc)().file_browser_thumbnails_16_by_9,"thumbnail--thumbnailContain---m6Py":P||(0,l.kc)().file_browser_thumbnails_16_by_9,[_.cx.p10.$]:P&&c!==h.y.SMALL,[_.cx.p4.$]:P&&c===h.y.SMALL}),crossOrigin:"anonymous",style:S}))}},554460:(e,r,n)=>{n.d(r,{q:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(154254);function l({backgroundColor:e,backgroundClassName:r,borderRadius:n,noBorder:a,children:l}){return i.createElement("div",{"data-testid":"thumbnail-container",className:o()(s.cx.hFull.wFull.borderBox.if(!a,s.cx.b1.bSolid.colorBorder).overflowHidden.$,{[s.cx.bRadius2.$]:2===n,[s.cx.bRadius4.$]:4===n,[s.cx.bRadius6.$]:6===n,[s.cx.bRadius8.$]:8===n},r),style:e?{backgroundColor:e}:void 0},i.createElement("div",{className:"thumbnail_container--aspectRatio--Q7gu8"},l))}},869381:(e,r,n)=>{n.d(r,{F:()=>a,y:()=>i});var i=(e=>(e.SMALL="small",e.DEFAULT="default",e))(i||{}),a=(e=>(e.DESIGN="design",e.WHITEBOARD="whiteboard",e.DEFAULT_DESIGN="default_design",e.DEFAULT_WHITEBOARD="default_whiteboard",e.OFFLINE="offline",e.SLIDES="slides",e.PROTOTYPE="prototype",e.SITES="sites",e))(a||{})},715981:(e,r,n)=>{n.d(r,{L:()=>_});var i=n(411855),a=n(187134),o=n(96796),s=n(629019),l=n.n(s),c=n(153234),d=n(163023),u=n(348425),m=n(712155),p=n(289298);let h=e=>e.stopPropagation();i.forwardRef((e,r)=>i.createElement(a.o,{eventListeners:["onClick"]},i.createElement(_,{...e,children:void 0,recordingKey:e.recordingKey,ref:r}),e.children));class _ extends c.uA{constructor(e){super(e),this.onClick=c.cZ(this,"click",e=>{this.props.onClick&&this.props.onClick(e)}),this.onKeyDown=e=>{"Escape"===e.key&&(e.preventDefault(),this.wrapperRef.current?.blur(),this.buttonRef.current?.blur()),this.props.enabled&&!this.props.hidden&&("Enter"===e.key||" "===e.key)&&(e.preventDefault(),this.props.onClick(e))},this.wrapperRef=i.createRef(),this.buttonRef=i.createRef()}render(){let e,r="";r=this.props.selected?m.wH:this.props.enabled?m.Sn:m.r9,this.props.isUI3&&this.props.ui3Icon?e=this.props.ui3Icon:this.props.useSvgNode?e=this.props.svgNode?i.createElement("span",null,this.props.svgNode):null:this.props.svg&&(e=i.createElement(u.t,{svg:this.props.svg,fallbackSvg:this.props.fallbackSvg,useOriginalSrcFills_DEPRECATED:this.props.useOriginalSrcFills_DEPRECATED,className:this.props.svgStyle}));let n=i.createElement(i.Fragment,null,!this.props.hidden&&e,this.props.text&&i.createElement("span",{className:this.props.textStyle||(this.props.svg?m.Pf:m.Qq)},this.props.text),this.props.showIndicator&&i.createElement("span",{className:this.props.indicatorStyle?this.props.indicatorStyle:m.q3}),this.props.showChevron&&(this.props.isUI3?i.createElement("div",{className:m.VI},i.createElement(o.O,null)):this.props.positionOnChevron?i.createElement("div",{className:m.FH,ref:this.props.chevronRef},i.createElement(d.B,{svg:p.A,className:l()(m.cN,m.Ot)})):i.createElement(d.B,{svg:p.A,className:m.cN})),this.props.children);return i.createElement("button",{id:this.props.id,ref:this.buttonRef,className:l()(r,this.props.narrow?m.sc:null,this.props.className),onMouseDown:this.props.enabled&&!this.props.hidden?this.onClick:void 0,onClick:h,"data-tooltip-type":this.props["data-tooltip-type"],"data-tooltip-slides":this.props["data-tooltip-slides"],"data-tooltip-submenu-open":this.props["data-tooltip-submenu-open"],"data-tooltip":this.props["data-tooltip"],"data-tooltip-shortcut-key":this.props["data-tooltip-shortcut-key"],"data-tooltip-offset-x":this.props.showChevron&&!this.props.isUI3&&this.props.positionOnChevron?8:0,"data-onboarding-key":this.props.onboardingKey,"data-testid":this.props.dataTestId,onKeyDown:this.onKeyDown,"aria-label":this.props.ariaLabel,"aria-expanded":this.props["aria-expanded"],"aria-controls":this.props["aria-controls"],"aria-haspopup":this.props["aria-haspopup"],"data-fullscreen-intercept":!0},n)}}_.displayName="TopBarAction",_.defaultProps={enabled:!0,hidden:!1}},139588:(e,r,n)=>{n(411855),n(629019),n(256975),n(964881),n(617453),n(100197)},299986:(e,r,n)=>{n.d(r,{f:()=>c});var i=n(411855);n(640783);var a=n(966712),o=n(800576);n(163023),n(939863);var s=n(540019),l=n(781294);function c(){return i.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.97616 0.163086C3.56555 0.163086 0 3.75492 0 8.19851C0 11.7505 2.28457 14.7572 5.45388 15.8214C5.85012 15.9014 5.99527 15.6485 5.99527 15.4357C5.99527 15.2495 5.9822 14.6109 5.9822 13.9456C3.76343 14.4246 3.30139 12.9877 3.30139 12.9877C2.94482 12.0565 2.41649 11.8171 2.41649 11.8171C1.69029 11.3249 2.46939 11.3249 2.46939 11.3249C3.27494 11.3781 3.69763 12.1497 3.69763 12.1497C4.41061 13.3735 5.55951 13.0277 6.02171 12.8148C6.08767 12.296 6.2991 11.9368 6.52359 11.7373C4.75396 11.551 2.89208 10.8592 2.89208 7.77272C2.89208 6.89468 3.20882 6.17631 3.71069 5.61762C3.63151 5.41811 3.35412 4.59313 3.79004 3.48896C3.79004 3.48896 4.46351 3.27607 5.98204 4.31378C6.63218 4.13789 7.30265 4.04841 7.97616 4.04766C8.64963 4.04766 9.33616 4.14088 9.97012 4.31378C11.4888 3.27607 12.1623 3.48896 12.1623 3.48896C12.5982 4.59313 12.3207 5.41811 12.2415 5.61762C12.7566 6.17631 13.0602 6.89468 13.0602 7.77272C13.0602 10.8592 11.1984 11.5376 9.41551 11.7373C9.70612 11.99 9.9569 12.4689 9.9569 13.2272C9.9569 14.3048 9.94384 15.1696 9.94384 15.4356C9.94384 15.6485 10.0891 15.9014 10.4852 15.8215C13.6545 14.757 15.9391 11.7505 15.9391 8.19851C15.9522 3.75492 12.3736 0.163086 7.97616 0.163086Z",fill:"#24292f",style:{fill:"var(--color-icon)"}}))}(0,a.ck)("aae0db2814117595e45cc509d52e79e7cc31333c"),(0,a.ck)("ae3807b6d650b52da20879078b85a0df23ee056a"),s.M4.Query({fetch:async e=>e?(await l.$.getFaviconForUrlProxy({url:(0,o.Jk)(e)})).data.meta??null:null})},298365:(e,r,n)=>{n.d(r,{n:()=>l});var i=n(411855),a=n(181912),o=n(178466),s=n(498606);function l(e){let r=function(e,r=(0,o.Gq)().getPrimaryLocale(!1)){return new Intl.DateTimeFormat(r,{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}).format(a.A.utc(e).toDate())}(e.date,e.locale);return i.createElement("span",{"data-tooltip-type":s.Ib.TEXT,"data-tooltip":r},e.children)}},427472:(e,r,n)=>{n.d(r,{ZQ:()=>S});var i=n(411855),a=n(629019),o=n.n(a),s=n(511617),l=n(560945),c=n(966712),d=n(659302),u=n(418956),m=n(563706),p=n(946689),h=n(163023),_=n(939863),g=n(101505),f=n(672517),E=n(988022),y=n(111538),b=n(916058),v=n(909595),I=n(491087);function T(e){let[r,n]=i.useState(e.showBanner),{trackEvent:a}=(0,f.j6)(),s=i.useRef(null),c=(0,d.Xr)(y.P4),u=(0,l.wY)(s)??l.cU,m=r?u.height+(e.verticalPadding||0):0;i.useEffect(()=>{c(m)},[m,c]);let b=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),a(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_OUT})},T=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!0}),a(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_OPT_IN})},S=async()=>{n(!1),await (0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1}),a(E.Ws,{trackingDescriptor:g.c.COOKIE_BANNER_EXPLICIT_CONSENT_DISMISS})};return r?i.createElement("div",{className:o()(I.kL,e.variant===v.a.COMMUNITY&&[I.gC,I.Vt],e.variant===v.a.FILE_VIEWER&&I.ut,e.variant===v.a.PROTOTYPE&&I.Id,e.variant===v.a.AUTH&&[I.gC,I.Yp]),role:"region",ref:s,"aria-label":(0,_.t)("cookies.consent_manager"),"data-testid":"cookie-banner"},i.createElement("div",{className:I.rf},(0,_.tx)("cookies.explicit_consent_body")," ",i.createElement(p.Yo,{href:(0,_.dS)("/consent-preferences/"),target:"_blank",rel:"noreferrer"},(0,_.tx)("cookies.cookies_settings"))),i.createElement("div",{className:I.o1},i.createElement(e.SecondaryButton,{onClick:b,"data-testid":"cookie-opt-out-button"},(0,_.tx)("cookies.do_not_allow_cookies")),i.createElement(e.PrimaryButton,{onClick:T,"data-testid":"cookie-opt-in-button"},(0,_.tx)("cookies.allow_all_cookies"))),i.createElement("div",{className:I.X8},i.createElement("button",{onClick:S,type:"button","data-testid":"cookie-dismiss-button"},i.createElement(h.B,{className:I.MW,svg:e.dismissIcon})))):e.persistentMessage&&i.createElement(f.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function S(e){let r=(0,u.md)(y.Dr),n=!1;return(r===y.S6.UNLOADED&&(n=!0),r!==y.S6.YES||e.persistentMessage||(n=!0),(0,b.V)()&&(n=!0),c.Ay().user_data?.id&&(n=!0),((0,c.Ay)().is_embed||(0,s.GZ)())&&(n=!0),m.Ay.isMeetDevice&&(n=!0),i.useEffect(()=>{!n&&m.Ay.isIpadNative&&(0,y.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||m.Ay.isIpadNative)?null:i.createElement(f.fu,{name:"Cookie Banner",properties:{consentRegion:"explicit"}},i.createElement(T,{...e,showBanner:r===y.S6.NO}))}},802755:(e,r,n)=>{n.d(r,{C$:()=>T});var i=n(411855),a=n(629019),o=n.n(a),s=n(511617),l=n(560945),c=n(966712),d=n(659302),u=n(418956),m=n(563706),p=n(946689),h=n(163023),_=n(101505),g=n(672517),f=n(988022),E=n(111538),y=n(916058),b=n(909595),v=n(491087);function I(e){let[r,n]=i.useState(e.showBanner),[a,s]=i.useState(!1),c=i.useRef(null),u=i.useRef(),m=(0,d.Xr)(E.P4),y=(0,l.wY)(c)??l.cU,I=r?y.height+(e.verticalPadding||0):0;i.useEffect(()=>{m(I)},[I,m]);let{trackEvent:T}=(0,g.j6)(),S=i.useRef(T);S.current=T,i.useEffect(()=>()=>{clearTimeout(u.current)},[]);let w=i.useCallback(e=>{c.current?.contains(e.target)||(s(!0),window.removeEventListener("click",w),u.current=setTimeout(async()=>{if(!r)return null;n(!1),await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})},1e4))},[r]),A=i.useCallback(async()=>{clearTimeout(u.current),a&&(await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS}))},[a]);i.useEffect(()=>{if(r)return window.addEventListener("click",w),window.addEventListener("beforeunload",A),()=>{window.removeEventListener("beforeunload",A),window.removeEventListener("click",w)}},[r,w,A]);let C=async()=>{n(!1),window.removeEventListener("click",w),await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!1}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_OPT_OUT})},N=async()=>{n(!1),window.removeEventListener("click",w),await (0,E.L3)({consentRegion:"implicit",cookiesEnabled:!0}),S.current(f.Ws,{trackingDescriptor:_.c.COOKIE_BANNER_IMPLICIT_CONSENT_DISMISS})};return r?i.createElement("div",{className:o()(v.kL,e.variant===b.a.COMMUNITY&&[v.gC,v.Vt],e.variant===b.a.FILE_VIEWER&&v.ut,e.variant===b.a.PROTOTYPE&&v.Id,e.variant===b.a.AUTH&&[v.gC,v.Yp]),role:"region","aria-label":"Consent Manager",ref:c,"data-testid":"cookie-banner"},i.createElement("div",{className:v.rf},"This website uses cookies, pixel tags, and local storage for performance, personalization, and marketing purposes. Our use of some cookies may be considered a sale, sharing for behavioral advertising, or targeted advertising. For more, see our"," ",i.createElement(p.Yo,{rel:"noopener",target:"_blank",href:"/privacy/"},"privacy policy"),". ",i.createElement("b",null,"California Residents")," can learn how personal information is"," ",i.createElement(p.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"collected"),", including how it is"," ",i.createElement(p.Yo,{href:"/privacy/#purpose",rel:"noopener",target:"_blank"},"used"),", whether it is"," ",i.createElement(p.Yo,{href:"/privacy/#ca-notice",rel:"noopener",target:"_blank"},"\u201Csold\u201D or \u201Cshared\u201D"),", and how long it is"," ",i.createElement(p.Yo,{href:"/privacy/#retention",rel:"noopener",target:"_blank"},"retained"),"."),i.createElement("div",{className:v.o1},i.createElement(e.SecondaryButton,{onClick:C,"data-testid":"cookie-opt-out-button"},"Opt out")),i.createElement("div",{className:v.X8},i.createElement("button",{onClick:N,type:"button","data-testid":"cookie-dismiss-button"},i.createElement(h.B,{className:v.MW,svg:e.dismissIcon})))):e.persistentMessage&&i.createElement(g.fu,{name:"Cookie Banner Persistent Message"},e.persistentMessage)||null}function T(e){let r=(0,u.md)(E.Dr),n=!1;return(r===E.S6.UNLOADED&&(n=!0),r!==E.S6.YES||e.persistentMessage||(n=!0),(0,y.V)()&&(n=!0),c.Ay().user_data?.id&&(n=!0),((0,c.Ay)().is_embed||(0,s.GZ)())&&(n=!0),m.Ay.isMeetDevice&&(n=!0),i.useEffect(()=>{!n&&m.Ay.isIpadNative&&(0,E.L3)({consentRegion:"explicit",cookiesEnabled:!1})},[n]),n||m.Ay.isIpadNative)?null:i.createElement(g.fu,{name:"Cookie Banner",properties:{consentRegion:"implicit"}},i.createElement(I,{...e,showBanner:r===E.S6.NO}))}},373466:(e,r,n)=>{n.d(r,{j:()=>u});var i=n(411855),a=n(966712),o=n(553015),s=n(427472),l=n(802755),c=n(909595),d=n(444077);let u=i.memo(function(){return"implicit"===(0,a.Ay)().consent_region?i.createElement(l.C$,{variant:c.a.PROTOTYPE,dismissIcon:d.A,SecondaryButton:e=>i.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):"explicit"===(0,a.Ay)().consent_region?i.createElement(s.ZQ,{variant:c.a.PROTOTYPE,dismissIcon:d.A,PrimaryButton:e=>i.createElement(o.$,{onClick:e.onClick,variant:"primary","data-testid":e["data-testid"]},e.children),SecondaryButton:e=>i.createElement(o.$,{onClick:e.onClick,variant:"secondary","data-testid":e["data-testid"]},e.children)}):null})},240604:(e,r,n)=>{n.d(r,{S:()=>o});var i=n(522739),a=n(724040);let o={div:(0,a.G)("Inaccessible","div",{"data-fpl-audit":!0}),button:(0,a.G)("Inaccessible","button",{"data-fpl-audit":!0,type:"button"}),span:(0,a.G)("Inaccessible","span",{"data-fpl-audit":!0}),recordableDiv:(0,a.G)("Inaccessible",i.D8,{"data-fpl-audit":!0}),recordableButton:(0,a.G)("Inaccessible",i.GG,{"data-fpl-audit":!0,type:"button"}),recordableSpan:(0,a.G)("Inaccessible",i.oj,{"data-fpl-audit":!0})}},468557:(e,r,n)=>{n.d(r,{Ph:()=>s});var i=n(686046),a=n(686754),o=n(672517);let s=(0,o.tf)(i.N);(0,o.tf)(i.N.Button),(0,o.tf)(a._)},696808:(e,r,n)=>{n.d(r,{Q:()=>i.$});var i=n(572900)},258786:(e,r,n)=>{n.d(r,{$:()=>o,W:()=>s});var i=n(411855),a=n(356390);class o{constructor(){this.singleTapTouchStartListeners={},this.singleTapTouchMoveListeners={},this.singleTapTouchEndListeners={},this.singleTapMouseDownListeners={},this.singleTapMouseUpListeners={},this.tapCallback=null,this.multiTapTouchStartListeners={},this.multiTapTouchEndListeners={},this.multiTapMouseDownListeners={},this.multiTapMouseUpListeners={},this.multiTapCallbacks={},this.multiTouchLongPressTouchStartListeners={},this.multiTouchLongPressTouchMoveListeners={},this.multiTouchLongPressTouchEndListeners={},this.multiTouchLongPressTouchCancelListeners={},this.multiTouchLongPressPointerDownListeners={},this.multiTouchLongPressPointerMoveListeners={},this.multiTouchLongPressPointerUpListeners={},this.multiTouchLongPressPointerCancelListeners={},this.multiTouchLongPressCallbacks=new Map}installTapGestureRecognizer(e,r){let n,i;this.tapCallback=r;let a=e=>{i=Date.now(),n=e},o=()=>{i=void 0,n=void 0},s=()=>{n&&i&&Date.now()-i<500&&(this.tapCallback?.(n),o())};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&a({x:e.touches[0].screenX,y:e.touches[0].screenY})},this.singleTapTouchStartListeners,1),this.replaceEventListener(e,"touchmove",e=>{if(1===e.touches.length&&n){let r=e.touches[0];this.didMoveTooMuch([{identifier:0,screenX:r.screenX,screenY:r.screenY}],{0:{screenX:n.x,screenY:n.y}},10)&&o()}else o()},this.singleTapTouchMoveListeners,1),this.replaceEventListener(e,"touchend",s,this.singleTapTouchEndListeners,1),this.replaceEventListener(e,"mousedown",e=>{a({x:e.screenX,y:e.screenY})},this.singleTapMouseDownListeners,1),this.replaceEventListener(e,"mouseup",s,this.singleTapMouseUpListeners,1)}updateTapGestureRecognizer(e,r){this.tapCallback?this.tapCallback=r:this.installTapGestureRecognizer(e,r)}uninstallTapGestureRecognizer(e){this.tapCallback&&(this.tapCallback=null,e.removeEventListener("touchstart",this.singleTapTouchStartListeners[1],!0),e.removeEventListener("touchmove",this.singleTapTouchMoveListeners[1],!0),e.removeEventListener("touchend",this.singleTapTouchEndListeners[1],!0),e.removeEventListener("mousedown",this.singleTapMouseDownListeners[1],!0),e.removeEventListener("mouseup",this.singleTapMouseUpListeners[1],!0))}numTapsInRecencyThreshold(e,r){let n=Date.now(),i=0;for(let a=e.length-1;a>=0;a--)if(Math.abs(e[a]-n)<r)i++;else break;return i}installMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]=n;let i=[],a=!1,o=()=>{let e=Date.now();if(i.push(e),a=this.numTapsInRecencyThreshold(i,500)===r.numTaps)i=[];else for(;i.length>r.numTaps;)i.shift()},s=()=>{a&&(this.multiTapCallbacks[r.numTaps]?.(),a=!1)};this.replaceEventListener(e,"touchstart",e=>{1===e.touches.length&&o()},this.multiTapTouchStartListeners,r.numTaps),this.replaceEventListener(e,"touchend",s,this.multiTapTouchEndListeners,r.numTaps),this.replaceEventListener(e,"mousedown",o,this.multiTapMouseDownListeners,r.numTaps),this.replaceEventListener(e,"mouseup",s,this.multiTapMouseUpListeners,r.numTaps)}updateMultiTapGestureRecognizer(e,r,n){this.multiTapCallbacks[r.numTaps]?this.multiTapCallbacks[r.numTaps]=n:this.installMultiTapGestureRecognizer(e,r,n)}installMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.set(n,r);let i=null,o=null,s=e=>{if(null==o){for(let r of(o={},e))o[r.identifier]={screenX:r.screenX,screenY:r.screenY};i=setTimeout(()=>{let r;1===e.length&&(r={x:e[0].screenX,y:e[0].screenY}),this.multiTouchLongPressCallbacks.get(n)?.(r),a.Y5&&a.Y5.cancelPendingGestures&&a.Y5.cancelPendingGestures()},500)}},l=()=>{null!=i&&(clearTimeout(i),i=null,o=null)},c=e=>{e.length===n&&o?this.didMoveTooMuch(e,o,10)&&l():l()};this.replaceEventListener(e,"touchstart",e=>{e.touches.length===n?s(e.touches):l()},this.multiTouchLongPressTouchStartListeners,n),this.replaceEventListener(e,"touchmove",e=>c(e.touches),this.multiTouchLongPressTouchMoveListeners,n),this.replaceEventListener(e,"touchend",l,this.multiTouchLongPressTouchEndListeners,n),this.replaceEventListener(e,"touchcancel",l,this.multiTouchLongPressTouchCancelListeners,n),this.replaceEventListener(e,"pointerdown",e=>{1===n&&"touch"!==e.pointerType?s([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}]):l()},this.multiTouchLongPressPointerDownListeners,n),this.replaceEventListener(e,"pointermove",e=>{"touch"!==e.pointerType&&c([{identifier:e.pointerId,screenX:e.screenX,screenY:e.screenY}])},this.multiTouchLongPressPointerMoveListeners,n),this.replaceEventListener(e,"pointerup",l,this.multiTouchLongPressPointerUpListeners,n),this.replaceEventListener(e,"pointercancel",l,this.multiTouchLongPressPointerCancelListeners,n)}updateMultiTouchLongPressGestureRecognizer(e,r,n){this.multiTouchLongPressCallbacks.has(n)?this.multiTouchLongPressCallbacks.set(n,r):this.installMultiTouchLongPressGestureRecognizer(e,r,n)}uninstallMultiTouchLongPressGestureRecognizer(e,r){this.multiTouchLongPressCallbacks.has(r)&&(this.multiTouchLongPressCallbacks.delete(r),e.removeEventListener("touchstart",this.multiTouchLongPressTouchStartListeners[r],!0),e.removeEventListener("touchmove",this.multiTouchLongPressTouchMoveListeners[r],!0),e.removeEventListener("touchend",this.multiTouchLongPressTouchEndListeners[r],!0),e.removeEventListener("touchcancel",this.multiTouchLongPressTouchCancelListeners[r],!0),e.removeEventListener("pointerdown",this.multiTouchLongPressPointerDownListeners[r],!0),e.removeEventListener("pointermove",this.multiTouchLongPressPointerMoveListeners[r],!0),e.removeEventListener("pointerup",this.multiTouchLongPressPointerUpListeners[r],!0),e.removeEventListener("pointercancel",this.multiTouchLongPressPointerCancelListeners[r],!0))}replaceEventListener(e,r,n,i,a){i[a]&&e.removeEventListener(r,i[a],!0),i[a]=n,e.addEventListener(r,i[a],!0)}didMoveTooMuch(e,r,n){for(let i of e){let e=r[i.identifier];if(void 0===e||Math.hypot(e.screenX-i.screenX,e.screenY-i.screenY)>n)return!0}return!1}}let s=i.createContext(new o)},299211:(e,r,n)=>{n.d(r,{m:()=>s});var i=n(915440),a=n(711525),o=n(279453);function s(){let e=(0,i.Rs)(o.JgS,{});if("loaded"!==e.status||e.data.persistentUserNotificationBells.status!==a.tT.Loaded)return{};let r=(0,a.oA)(e.data.persistentUserNotificationBells),n={};return Object.values(r||[]).forEach(e=>{let{userId:r,notificationSpaceId:i}=e;if(r&&i){n[r]??={};let a=n[r];a&&(a[i]=!!e.bell)}}),n}n(395116)},273709:(e,r,n)=>{n(966712)},908604:(e,r,n)=>{n.d(r,{UR:()=>a,gj:()=>i});let i=function(){throw Error("Analyze not available")},a=function(){throw Error("Cannot close window")}},234587:(e,r,n)=>{n.d(r,{Vj:()=>a,cJ:()=>o,oz:()=>i});let i=function(){return!1},a=function(){return!1},o=function(){return!1}},139055:(e,r,n)=>{n.d(r,{IU:()=>a,Kk:()=>l,bC:()=>o,jT:()=>s});var i=n(411855);let a=function(){return""},o=function(){return!1},s=function(){return{}},l=function(){return!1};i.createContext(void 0)},362369:(e,r,n)=>{n.d(r,{E:()=>i});var i=(e=>(e.FJ_SELECTION="figjam-selection-inline-menu",e.FJ_SHARE_MODAL="figjam-share-modal",e.FJ_PAGE_MENU="figjam-page-context-menu",e.FJ_FILE_MENU="figjam-file-editor-menu",e.SLIDES_TEMPLATE="slides-template",e))(i||{})},983499:(e,r,n)=>{var i=n(27087);(0,n(479296).n)(async({fileKey:e,fileVersion:r,selectedGuids:n})=>{if(!r)throw Error("Missing file version");let a=function({fileKey:e,fileVersion:r,selectedGuids:n}){return`/api/file_proxy/file/${e}/canvas?fv=${r}${n?.length?`&nodes_to_extract=${n.join(",")}`:""}`}({fileKey:e,fileVersion:r,selectedGuids:n});return(await i.Ay.post(a,{fv:`${r}`},{responseType:"arraybuffer"})).data})},636227:(e,r,n)=>{n.d(r,{Yc:()=>_,d_:()=>g});var i=n(411855),a=n(647899),o=n(239349),s=n(809831),l=n(335682),c=n(694687),d=n(860178),u=n(893606),m=n(479296),p=n(72754),h=n(430196);function _(){let{getConfig:e}=(0,a.I7)("fd_to_slides_entrypoints");return e}function g(){let e=(0,l.q5)(),r=(0,s.Em)(),n=(0,d.Pc)(),i=(0,u.R)(),a=(0,c.sZ)();if(!n||!r||!i||a?.id&&a.is_slides_disabled)return!1;let o=e?.creatorId===n.id;return!!e&&!!o}(0,m.n)(()=>{let e=g(),r=_(),n=(0,h.N)(),a=(0,o.Tv)(),s=(0,p.A)();return(0,i.useMemo)(()=>{if(!e)return!1;let i=r().get("enabled",!1);return a.length?!!s.length&&i:n.size>0&&i},[r,e,a.length,n.size,s.length])})},144119:(e,r,n)=>{n.d(r,{sO:()=>o});var i=n(188507);n(922827),n(30637),n(373119),n(100197),n(601607),n(452883);var a=n(656147);function o(){return(0,i.d4)(e=>(0,a.P)(e.selectedView))}},983724:(e,r,n)=>{n.d(r,{Jb:()=>h,Wj:()=>_,Xe:()=>g,_Q:()=>f});var i=n(411855),a=n(188507),o=n(922827),s=n(572304),l=n(298455),c=n(44948),d=n(966712),u=n(29680),m=n(100197),p=n(601607);function h(){let e=(0,a.d4)(e=>e.mirror.sceneGraphSelection);return(0,i.useMemo)(()=>{if((0,d.kc)().piper_components&&o.Ez5.singleSlideView().isComponentSectionFocused())return o.Ez5.slideDeck().componentSectionId();let r=new Set;Object.keys(e).forEach(e=>{let n=(0,l.UN)().get(e),i=n?.findContainingSlideOrSelf();i&&(0,s.fn)((0,s.sH)(i))&&r.add(i)});let n=Array.from(r);return 1===n.length?n[0]:null},[e])}function _(){let e=(0,u.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)();return e&&r?Object.keys(e).filter(e=>r.get(e)?.isSlideOrTemplate()??!1):[]},[e])}function g(){let e=(0,m.J2)(o.Ez5.slideDeck().slideGrid).flat();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}function f(){let e=function(){let e=(0,m.J2)(o.Ez5.slideDeck().slideGrid).flat(),r=new Set(function(){let e=(0,u.KH)();return(0,c.k9)(()=>{let r=(0,l.UN)(),n=new Set;return Object.keys(e).forEach(e=>{let i=r.get(e)?.findContainingSlideOrSelf();i&&n.add(i)}),Array.from(n.values())},[e])}());if(!e.length||!r.size)return[];let n=[];for(let i of e)if(r.has(i)&&(n.push(i),r.delete(i)),0===r.size)break;return n}();return(0,p.Fk)((e,r)=>{for(let n of r){let r=e.get(n);if(!r?.isSkippedSlide)return n}return null},e)}},430196:(e,r,n)=>{n.d(r,{N:()=>o});var i=n(922827),a=n(100197);function o(){let e=i.Ez5.slideLikeNodeObserverState();return(0,a.ut)(e?.slideLikeNodeIdsOnCanvas,new Set([]))}},195601:(e,r,n)=>{n.d(r,{p:()=>l}),n(922827),n(776250);var i=n(716034),a=n(418956);n(96328),n(356390),n(15859),n(737499);let o=(0,i.eU)({}),s=(0,a.Iz)(e=>(0,i.eU)(r=>r(o)[e]??"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAABmCAYAAACN+dAoAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAABeSURBVHgB7cAxAQAAAMKg9U9tDQ8oAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB4NyDtAAG2m4HvAAAAAElFTkSuQmCC",(r,n,i)=>{let a=r(o);n(o,{...a,[e]:i})}));function l(e){let r=s(e);return(0,a.md)(r)}},366501:(e,r,n)=>{n.d(r,{$u:()=>g,oY:()=>_,rY:()=>h});var i=n(411855),a=n(188507),o=n(922827);n(340818),n(572304),n(298455),n(841563),n(939683);var s=n(966712),l=n(716034);n(30637);var c=n(939863),d=n(392592);n(550273),n(29680),n(575288),n(193212);var u=n(100197),m=n(601607);n(706966),n(92566),n(983724);var p=n(108239);function h(e){return e.reduce((e,r)=>e.concat(r),[])}function _(e,r){let n=o.Ez5.singleSlideView().focusedSlideId.getCopy(),{row:i,col:a}=o.Ez5.getInsertGridCoord({x:-1/0,y:-1/0}),s=(0,p.f4)(i,a,r,!1);o.Ez5?.singleSlideView()?.isSingleSlideViewEnabled()&&o.Ez5.singleSlideView().focusSlideInSingleSlideView(s,!0);let l=e.get(s),c=e.get(n);return l&&c?.sourceLibraryKey&&(l.sourceLibraryKey=c.sourceLibraryKey),o.Egt.replaceSelection([s],!0),s}function g(){let e=(0,a.wA)(),{numSkippedSlides:r,numTotalSlides:n}=function(){let e=(0,u.ut)(o.Ez5?.slideDeck().slideGrid,[]);return(0,m.wA)((e,r)=>r.flat().reduce(({numSkippedSlides:r,numTotalSlides:n},i)=>{let a=e.get(i);return a&&(n+=1,a.isSkippedSlide&&(r+=1)),{numSkippedSlides:r,numTotalSlides:n}},{numSkippedSlides:0,numTotalSlides:0}),e)}();return(0,i.useCallback)(i=>{let a=o.Ez5?.slideDeck().anySymbolsInSlides();0===n?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_no_slides"),onDismiss:()=>{}})):r>0?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_skipped_slides"),onDismiss:()=>{}})):!((0,s.kc)().piper_components||(0,s.kc)().piper_components_v2)&&a?e(d.F.enqueue({message:(0,c.t)("file_permissions_modal.share_as.publish_template_slides_error_symbol_in_slide"),onDismiss:()=>{}})):i()},[e,r,n])}(0,l.eU)("")},924430:(e,r,n)=>{n.d(r,{R4:()=>i,w1:()=>a,wl:()=>o});let i="slides-template-preview",a="slides-template-publish-item",o="agreed_to_slides_ai_terms"},372669:(e,r,n)=>{n.d(r,{j:()=>x});var i=n(411855),a=n(966712),o=n(418956),s=n(563706),l=n(153234),c=n(103907),d=n(369870),u=n(318812),m=n(860178),p=n(549166),h=n(624158),_=n(250118),g=n(462521),f=n(556465),E=n(518803),y=n(756762),b=n(188507),v=n(343887),I=n(523099),T=n(553716),S=n(939863),w=n(507877),A=n(611978),C=n(707465),N=n(239671),L=n(498606);function O(){let e=(0,A._6)(),r=(0,b.Pj)(),n=(0,b.wA)(),a=(0,C.U2)(e),o=i.useCallback(()=>{if(!a){(0,T.x1)("OpenInSlidesEditorButton","No fileKey found for view",{selectedView:e},{reportAsSentryError:!0});return}let i=(0,C.xS)(r.getState(),{view:"fullscreen",fileKey:a,editorType:N.nT.Slides});n(w.V3({url:i}))},[n,a,e,r]);return i.createElement(v.K,{"aria-label":(0,S.t)("viewer.menu_bar.open_in_figma_slides"),onClick:o,htmlAttributes:{"data-tooltip":(0,S.t)("viewer.menu_bar.open_in_figma_slides"),"data-tooltip-type":L.Ib.TEXT}},i.createElement(I.E,null))}var R=n(797613),P=n(39108),D=n(938908);function k({showComments:e,recordingKey:r}){let n=(0,b.wA)(),a=(0,S.t)("viewer.menu_bar.add_comment",{padding:"    ",shortcut:"C"});return i.createElement(R.f,{onChange:()=>{e?n(D.BZ()):n(D._b())},"aria-label":a,recordingKey:r,onIcon:i.createElement(P.f,null),offIcon:i.createElement(P.f,null),variant:"highlighted",checked:e,htmlAttributes:{"data-tooltip":a,"data-tooltip-type":L.Ib.TEXT,"data-testid":"prototype-header-comments-button"}})}var M=n(759457),F=n(606789);function x({file:e,fadeBehavior:r,showProgressBar:n,showComments:b,multiplayer:v,recordingKey:I,shouldShowUI:T}){let S=(0,m.iZ)(),w=(0,u.Um)(),A=i.useRef(null),C=(0,d.ck)(),N=(0,_.dH)(),L=(0,s.o4)(),R=(0,o.md)(h.jH),P=(0,o.md)(h.M);return i.createElement(c.j9.Consumer,null,()=>i.createElement(E.D,{fileName:e.name,headerRef:A,fadeBehavior:r,showProgressBar:n,shouldShowUI:T||"loading"===P||R,rightColumn:i.createElement(i.Fragment,null,(0,a.kc)().prototype_preload_offline&&i.createElement(h.ez,{isSlides:!0}),v&&i.createElement(p.Cv,{dropdownShown:w,multiplayer:v,user:S}),i.createElement("div",{className:M.fi},(!N||C)&&i.createElement(i.Fragment,null,i.createElement("div",{className:F.LY},i.createElement(k,{showComments:b,recordingKey:l.Pt(I,"comments-button")})),i.createElement("div",{className:F.LY},i.createElement(O,null))),(0,a.kc)().prototype_preload_offline&&!L&&i.createElement("div",{className:F.LY},i.createElement(g.A,null)),i.createElement("div",{className:F.LY},i.createElement(y.A,null))),i.createElement(f.o,{headerRef:A,file:e}))}))}},462521:(e,r,n)=>{n.d(r,{A:()=>h});var i=n(411855),a=n(188507),o=n(343887),s=n(538082),l=n(153234),c=n(939863),d=n(738269),u=n(318812),m=n(728587),p=n(405328);function h({recordingKey:e,onPreloadStart:r}){let n=(0,a.wA)(),h=(0,u.Um)(),_=h&&h.type===p.A9,g=i.useRef(null),f=i.createElement(o.K,{onClick:function(e){e.stopPropagation(),_?n(d.oB()):n(d.j7({type:p.A9,data:{position:g.current?.getBoundingClientRect()}}))},recordingKey:l.Pt({recordingKey:e},"toggle"),"aria-label":(0,c.t)("viewer.options_menu.options")},i.createElement(s.P,null)),E=h?.data?.position??void 0,y=(0,p.s7)(r);return i.createElement("div",{ref:g},f,_&&!!E&&i.createElement(m.j,{showPoint:!0,onSelectItem:e=>e.callback?.(),parentRect:E,dispatch:n,items:[y],recordingKey:"options-menu-dropdown",displayAboveTarget:!1,alwaysShowCheckMarkOffset:!0}))}},556465:(e,r,n)=>{n.d(r,{o:()=>_});var i=n(411855),a=n(188507),o=n(737947),s=n(560945),l=n(761870),c=n(939863),d=n(662275),u=n(694687),m=n(860178),p=n(880671),h=n(560002);function _({headerRef:e,file:r}){let n=(0,m.iZ)(),_=(0,u.sZ)(),g=(0,a.wA)(),[f,E]=i.useState((0,c.t)("viewer.menu_bar.share")),[y,b]=i.useState((0,c.t)("viewer.menu_bar.log_in"));return(0,s.wY)(e,({width:e})=>{e>970?(E((0,c.t)("viewer.menu_bar.share_presentation")),b((0,c.t)("viewer.menu_bar.log_in_or_create_account"))):(E((0,c.t)("viewer.menu_bar.share")),b((0,c.t)("viewer.menu_bar.log_in")))}),i.createElement(h.wh,{user:n,shareText:f,loginText:y,file:r,showDefaultAuthModal:()=>{g(l.Ts({origin:"prototype_header_nav",redirectUrl:o.Ay.location.pathname})),g(d.to({type:p.x,data:{}}))},sharingDisabled:_?.is_slides_disabled})}},518803:(e,r,n)=>{n.d(r,{D:()=>w});var i=n(411855),a=n(188507),o=n(343887),s=n(963757),l=n(629019),c=n.n(l),d=n(511617),u=n(737947),m=n(179940),p=n(163023),h=n(240604),_=n(939863),g=n(293017),f=n(122983),E=n(94500),y=n(498606),b=n(250118),v=n(759457),I=n(606789),T=n(748292);let S=(0,f.ck)();function w({fileName:e,headerRef:r,showProgressBar:n,fadeBehavior:o,disableHeaderFade:s,shouldShowUI:l,hideTopLeftIcon:d,headerClassName:u,leftColumn:m,rightColumn:p}){let f=(0,a.wA)(),y=(0,b.dH)(),T=e=>{e.preventDefault(),f((0,E._P)({name:"Prototype Logo Clicked"})),f((0,g.eH)())};return n?i.createElement("div",{className:v.uH},!d&&i.createElement(A,{onClick:T})):i.createElement(h.S.div,{className:c()(v.wx,u,{[v.Wc]:!l&&!s}),ref:r,role:"region","aria-label":(0,_.t)("viewer.menu_bar.accessible_label"),onBlurCapture:o?.handleHeaderOrFooterBlur,onFocusCapture:o?.handleHeaderOrFooterFocus,onMouseMove:o?.handleHeaderOrFooterMove,onMouseDown:e=>{e.stopPropagation()}},i.createElement("div",{className:v.Cd},!d&&i.createElement(A,{onClick:T}),(!y||S)&&i.createElement("h1",{className:c()(d?I.Y_:I.DD),dir:"auto"},e),m),i.createElement("div",{className:v.SP}),i.createElement("div",{className:c()(v.DK,I.DK)},p))}function A({onClick:e}){return d.GZ()&&!S&&null==(0,m.qg)(u.Ay.location.search).fullscreen?i.createElement("a",{"aria-label":(0,_.t)("proto.file_browser"),href:"/",onClick:e,className:v.m_},i.createElement(p.B,{svg:T.A})):i.createElement("div",{className:c()(I.LY,v.kT)},i.createElement(o.K,{onClick:e,"aria-label":(0,_.t)("proto.file_browser"),htmlAttributes:{"data-tooltip":(0,_.t)("proto.file_browser"),"data-tooltip-type":y.Ib.TEXT}},i.createElement(s.m,null)))}},756762:(e,r,n)=>{n.d(r,{A:()=>h});var i=n(411855),a=n(188507),o=n(343887),s=n(941670),l=n(538649),c=n(511617),d=n(860601),u=n(939863),m=n(362252),p=n(498606);function h(){let e;let r=(0,a.wA)(),n=(0,a.d4)(e=>e.appWindow.inFullScreenMode),h=c.R7.fullscreen?()=>{r((0,m._M)())}:d.lQ,_=c.R7.fullscreen;return e=_?n?(0,u.t)("viewer.menu_bar.exit_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.enter_full_screen",{shortcut:"F"}):(0,u.t)("viewer.menu_bar.full_screen_is_not_supported_by_this_browser"),i.createElement(o.K,{"aria-label":e,onClick:h,disabled:!_,htmlAttributes:{"data-tooltip":e,"data-tooltip-type":p.Ib.TEXT}},n?i.createElement(s.p,null):i.createElement(l.O,null))}},742934:(e,r,n)=>{n.d(r,{CK:()=>I,NQ:()=>v,PG:()=>w,Vz:()=>S,o9:()=>A,rR:()=>T});var i=n(411855),a=n(188507),o=n(396353),s=n(922827),l=n(340818),c=n(568214),d=n(966712),u=n(418956),m=n(632430),p=n(356390),h=n(848661),_=n(618056),g=n(555074);n(869156);var f=n(29680),E=n(279702);n(158445),n(238093);var y=n(564092),b=n(179243);function v(e){return{type:"SOLID",color:{...e,a:1},opacity:e.a,blendMode:"NORMAL"}}function I(){let[e]=(0,g.lJ)("imageOverlayPaint");return i.useCallback((r,n)=>{_.Tm.clearCache();let i=[r];e&&(0,h.hS)(e)&&i.push(e),p.Y5.updateSelectionProperties({fillPaints:i},{shouldCommit:n})},[e])}function T(e){let r=(0,u.md)(b.E_);return i.useCallback((n,i)=>{r&&n.color?l.l7.user("slides-edit-theme-color",()=>S(r.varId,r.modeId,n)):e(n,i)},[r,e])}function S(e,r,n){s.CWU.setVariableValueForMode(e,r,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:{...n.color,a:n.opacity??1}})}function w(e){let r=(0,a.wA)(),n=(0,u.md)(b.E_);return i.useCallback(async i=>{let a=await r((0,m.Oe)(i)),c=o.sD.fromString(a);c&&(n?l.l7.user("slides-edit-theme-color",()=>{(0,d.kc)().piper_theme_variable_alias?s.CWU.setVariableValueForMode(n.varId,n.modeId,(0,y.y$)(s.rXF.COLOR,a)):s.Ez5.slideThemeLibBindings().setThemeColorVariableFromSubscribedVariableColorValue(n?.varId||"",n?.modeId||"",a)}):e({type:"SOLID",opacity:1,visible:!0,blendMode:"NORMAL",colorVar:{value:{alias:o.sD.toKiwi(c)},dataType:"ALIAS",resolvedDataType:"COLOR"}},E.zk.YES))},[r,n,e])}function A(e,r){let n=(0,a.wA)(),o=(0,u.md)(b.E_),s=(0,f.eY)();return i.useCallback((i,a)=>{o?n((0,m.nh)({style:i,callback:e=>{let n=s.get(e),i=(0,c.AW)(n?.fills);i&&r&&l.l7.user("slides-edit-theme-color",()=>r(o.varId||"",o.modeId||"",v(i)))}})):n(m.AV({style:i,inheritStyleKeyField:e,fromSearch:a?.fromSearch}))},[n,o,e,s,r])}n(559681),n(452883)},753243:(e,r,n)=>{n.d(r,{qm:()=>h});var i=n(411855);n(188507);var a=n(75395);n(922827),n(340818),n(572304);var o=n(629019),s=n.n(o);n(568214);var l=n(966712),c=n(153234),d=n(30637);n(520581),n(763658),n(46481);var u=n(154254);n(939863),n(293017),n(428654),n(775664),n(848661),n(318812);var m=n(498606);n(420186),n(746806),n(179243),n(559681),n(452883),n(742934),n(173915);var p=n(222849);(0,l.ck)("bdf32fe13fe9a9be5b40c3de4a18572f14c9a1eb");function h({backgroundString:e,opacity:r,tooltipText:n,tooltipSubtext:o,onClick:l,onContextMenu:h,isSelected:_,editIcon:g,showEditIcon:f,isEditing:E,onClickEdit:y,recordingKey:b}){let v=(0,c.rf)(b,"contextmenu",e=>{h&&h(e)});return i.createElement("div",{className:s()(p.k8,{[p.wH]:_}),"data-tooltip-type":m.Ib.TEXT,"data-tooltip-show-above":!0,"data-tooltip":n,"data-tooltip-subtext":o,"data-tooltip-text-inline":!0,"data-testid":b},g&&f&&y&&i.createElement(a.E,{className:s()(p.Lq,{[p.Sn]:E,[p.Qo]:(0,d.nl)()}),onClick:e=>{if((0,d.nl)())y();else{let r=e.currentTarget.getBoundingClientRect(),n=r.width/2,i=r.left+n,a=r.top+n;Math.pow(e.clientX-i,2)+Math.pow(e.clientY-a,2)<=n*n&&y()}},recordingKey:c.Pt(b,"edit")},g),i.createElement(a.E,{htmlAttributes:{onContextMenu:v},onClick:l,className:u.cx.w24.h24.relative.$,recordingKey:b},i.createElement("div",{className:p.Le,style:{background:e}}),i.createElement("div",{className:p.f$,style:{opacity:void 0!==r?1-r:0}})))}},173915:(e,r,n)=>{n.d(r,{Ph:()=>q,jP:()=>Y});var i=n(411855),a=n(188507),o=n(688009),s=n(343887),l=n(75395),c=n(139689),d=n(844519),u=n(922827),m=n(340818),p=n(864361),h=n(966712),_=n(418956),g=n(860601),f=n(153234),E=n(763658),y=n(452441),b=n(154254),v=n(939863),I=n(356390),T=n(285381),S=n(617453),w=n(618056),A=n(555074),C=n(869156),N=n(318812),L=n(29680),O=n(237929),R=n(173454),P=n(279702),D=n(922358),k=n(846848),M=n(12669),F=n(285897),x=n(807676),U=n(939143),B=n(875157),V=n(746806),G=n(742934),H=n(179243),K=n(559681),W=n(452883),$=n(222849);let Y=k.qo,z={type:"SOLID",color:{r:0,g:0,b:0,a:1},opacity:1,blendMode:"NORMAL"};var j=(e=>(e[e.COLOR=0]="COLOR",e[e.GRADIENT=1]="GRADIENT",e))(j||{});function q({paint:e,onChange:r,onClose:n,initialPosition:s,enableGradients:l,hideCustomColorPickerFillTypeToggle:c,inheritStyleKeyField:d}){let m=(0,G.PG)(r),p=(0,G.o9)(d,G.Vz),y=["custom_color","library"],[b,v,T]=o.t.useTabs({custom_color:y.includes("custom_color"),library:y.includes("library")},{defaultActive:()=>(0,h.kc)().piper_theme_variable_alias&&e.colorVar?.dataType==="ALIAS"?"library":"custom_color"}),S=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),w=(0,A.kl)("numSelectedByType"),C=i.useMemo(()=>{if(w)return(0,B.aZ)(u.rrT.FILL,w)},[w]),N=(0,W.$)(),L=(0,K.UZ)(N),O=(0,_.md)(H.E_),R=i.useMemo(()=>{if((0,h.kc)().piper_theme_variable_alias){if(!O)return(0,x.L)(e);{let e=ee(O.varId)?.modeValues[L];if(e&&e.type===u.Z_n.ALIAS)return ee(e.value)}}return null},[O,e,L]),P=i.useMemo(()=>new Set,[]),D=i.useCallback(()=>{S===u.m1T.GRADIENT&&I.Y5.triggerAction("leave-edit-mode"),n()},[S,n]),k="slidesCustomColorPicker";return i.createElement(E.k,{name:"slides_custom_color_picker"},i.createElement(V.vx,{initialPosition:s,onClose:D,initialWidth:Y,recordingKey:k},i.createElement(Z,{editVar:O,tabManager:T,tabProps:b,onClose:D,recordingKey:k}),i.createElement(o.t.TabPanel,{...v.custom_color},i.createElement(X,{paint:e,onPaintChange:r,enableGradients:l,recordingKey:"slidesCustomColorPicker",hideCustomColorPickerFillTypeToggle:c})),i.createElement(o.t.TabPanel,{...v.library},i.createElement(U.Rp,{selectedItem:R,resolvedType:u.rXF.COLOR,disabledVariableIds:P,pickerType:"color-picker",recordingKey:f.Pt("slidesCustomColorPicker","libraryColors"),onVariableSelected:m,onStyleSelected:p,onClose:g.lQ,variableScopes:C})),(0,h.kc)().piper_rename_theme_colors&&i.createElement(Q,{recordingKey:f.Pt(k,"rename")})))}function Z({editVar:e,tabManager:r,tabProps:n,onClose:a,recordingKey:l}){let p=i.createElement(s.K,{onClick:a,recordingKey:f.Pt(l,"colorPickerModalHeader","closeButton"),"aria-label":(0,v.t)("common.close")},i.createElement(c.A,null)),h=i.useCallback(()=>m.l7.user("slides-delete-theme-color",()=>{e&&u.CWU?.deleteVariable(e.varId)}),[e]);return i.createElement("div",null,e?i.createElement("div",{className:b.cx.flex.justifyBetween.itemsCenter.pl16.pr8.pb8.pt8.$},i.createElement("p",{className:b.cx.textBodyMediumStrong.$},(0,v.t)("slides.properties_panel.text_style.edit_template_color")),i.createElement("div",{className:b.cx.flex.gap8.$},i.createElement(s.K,{onClick:h,"aria-label":(0,v.t)("slides.properties_panel.color_picker.delete_template_color")},i.createElement(d.i,null)),p)):null,e?i.createElement("div",{className:b.cx.h1.wFull.colorBgTertiary.$}):null,i.createElement("div",{className:b.cx.flex.justifyBetween.p8.$},i.createElement(o.t.TabStrip,{manager:r},i.createElement(o.t.Tab,{...n.custom_color},(0,v.tx)("fullscreen.properties_panel.color_picker.custom")),i.createElement(o.t.Tab,{...n.library},(0,v.tx)("fullscreen.properties_panel.color_picker.libraries"))),null===e?p:null))}function X({paint:e,onPaintChange:r,enableGradients:n,recordingKey:o,hideCustomColorPickerFillTypeToggle:s}){let l=(0,a.wA)(),c=(0,N.Um)(),d=(0,L.dH)(),m=(0,T.Ep)(),h=(0,p.C)(),_=(0,S.Ku)(),g=(0,a.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),f=i.useRef(null),[E,y]=i.useState((0,w.bn)(e.type)?1:0),b=(0,w.Ou)(e),v=(0,w.x$)(e),A=(0,L.p8)("currentSelectedGradientStop"),C=(0,w.iC)(b||v||z,A),O=n=>{e.type!==n&&r(w.Tm.initPaint(n,z.color,e,"slides-custom-color-picker"),!(0,w.bn)(e.type)&&(0,w.bn)(n)?P.zk.NO:P.zk.YES)};return i.createElement(i.Fragment,null,!s&&n&&i.createElement(J,{panelType:E,onPanelTypeChange:e=>{E!==e&&(O(0===e?"SOLID":"GRADIENT_LINEAR"),y(e),1===e?I.Y5.triggerAction("toggle-gradient-edit-mode"):g===u.m1T.GRADIENT&&I.Y5.triggerAction("leave-edit-mode"))},recordingKey:o}),n&&1===E&&v&&i.createElement(D.vL,{name:"Slides color picker",ref:f,handleKeyDown:e=>{v&&(0,M.T)(e,v,g,A,r)},focusOnMount:!0,forceUpdate:h},i.createElement(F.i,{paint:v,onChange:r,currentSelectedGradientStop:A,colorProfile:m,hasFocus:!!f.current&&f.current.hasFocus(),dispatch:l,recordingKey:o})),i.createElement(k.S7,{color:C,colorFormat:_,onColorChange:(n,i)=>{(0,M.n)(n,e,A,r,i)},dropperDisabled:!1,displayType:k.sX.FULL,currentTool:d,dispatch:l,dropdownShown:c,recordingKey:o,canAcceptStyles:!1,canAcceptVariables:!1}))}function J({panelType:e,onPanelTypeChange:r,recordingKey:n}){let a=[{type:0,label:(0,v.t)("slides.properties_panel.color_picker.color_toggle"),optionRecordingKey:"color"},{type:1,label:(0,v.t)("slides.properties_panel.color_picker.gradient_toggle"),optionRecordingKey:"gradient"}];return i.createElement("div",{className:b.cx.wFull.py8.bb1.bSolid.colorBorder.$},i.createElement("div",{className:$.X9},a.map(({type:a,label:o,optionRecordingKey:s})=>i.createElement(l.E,{key:a,className:e===a?$.wH:void 0,onClick:()=>r(a),recordingKey:f.Pt(n,s)},o))))}function Q({recordingKey:e}){let r=(0,_.md)(H.E_),n=(0,C.tZ)(r?.varId),[a,o]=i.useState(n??"");i.useEffect(()=>{o(n??"")},[n]);let s=i.useRef(null),l=i.useCallback(()=>{u.CWU.renameVariable(r?.varId??"",(0,O.rh)(a))},[r,a]);return r?i.createElement("div",{className:b.cx.px16.py12.flex.itemsCenter.bt1.bSolid.colorBorder.$},i.createElement("span",{className:b.cx.colorTextSecondary.textBodyMedium.w64.$},(0,v.tx)("slides.properties_panel.color_picker.rename_color_label")),i.createElement(y.L,{className:$.Kv,name:"variableName",ref:s,value:a,onChange:e=>{o(e.target.value)},onBlur:m.nc.user("slides-rename-theme-color",l),onKeyDown:e=>{("Enter"===e.key||"Escape"===e.key)&&s.current?.blur()},placeholder:(0,v.t)("slides.properties_panel.color_picker.rename_color_placeholder"),delay:50,"data-1p-ignore":!0,recordingKey:e})):null}function ee(e){let r=u.CWU.getLocalVariableInfo(e);if(r)return(0,R.kz)(r);let n=u.CWU.getSubscribedVariableInfo(e);return n?(0,R.ZI)(n):null}},352046:(e,r,n)=>{n.d(r,{i:()=>c});var i=n(411855);n(177131);var a=n(136880);n(922827),n(340818),n(572304);var o=n(568214),s=n(428654),l=n(168039);function c(){let e=(0,l.yM)().colorText;return i.useMemo(()=>{if(e){let r=s.F.parse(e);if(r.a>0)return(0,a.oU)(r)}return(0,a.oU)(o.Uv)},[e])}n(184027)},108239:(e,r,n)=>{n.d(r,{$j:()=>c,f4:()=>l});var i=n(922827),a=n(572304);n(298455);var o=n(418956),s=n(92566);function l(e,r,n,c=!0){let d=o.zl.get(s.xB),u=d[e]?.[r-1]||d[e-1]?.[(d[e-1]?.length||0)-1]||d[e+1]?.[0]||d[e]?.[0]||d[0]?.[0],m=(0,a.fn)((0,a.sH)(u))?i.Ez5.slideDeck().duplicateAsBlankSlide(u,e,r,n):i.Ez5.slideDeck().addBlankSlideAtCoord(e,r,n);return c&&i.Ez5.commit(),setTimeout(()=>{i.Ez5.singleSlideView().isSingleSlideViewEnabled()||i.Ez5.singleSlideView().panToSlideIfOutsideViewport(m,.6)},0),m}function c({row:e,x:r=0,y:n=0}){let i=o.zl.get(s.fc)[e];i&&i.forEach(e=>{var i;(i=e.node?.parentNode?.type==="MODULE"?e.node.parentNode:e.node)&&(i.overlayTransform.m02!==r||i.overlayTransform.m12!==n)&&(i.overlayTransform={...i.overlayTransform,m02:r,m12:n})})}},953289:(e,r,n)=>{n.d(r,{Ei:()=>s,F4:()=>d,Jw:()=>y,Md:()=>p,UM:()=>E,Vf:()=>o,_g:()=>g,bY:()=>l,cZ:()=>f,q7:()=>v});var i=n(716034),a=n(940596),o=(e=>(e.ALL="ALL",e.ORG="ORG",e.TEMPLATE="TEMPLATE",e.HUB_FILE="HUB_FILE",e.FILE_PICKER="FILE_PICKER",e.TEMPLATE_PICKER="TEMPLATE_PICKER",e.TEAM="TEAM",e))(o||{});let s=(0,a.Wh)(()=>(0,i.eU)(!1));(0,a.Wh)(()=>(0,i.eU)(!1));let l=(0,i.eU)({type:"ALL"});(0,i.eU)("");let c=(0,i.eU)({});(0,i.eU)(e=>e(c),(e,r,n,i)=>{r(c,e=>({...e,[n]:i}))}),(0,i.eU)(null,(e,r)=>{r(c,{})}),(0,i.eU)(0);var d=(e=>(e.PUBLISH_HUB_FILE_INITIATED="PUBLISH_HUB_FILE_INITIATED",e.PUBLISH_HUB_FILE_COMPLETED="PUBLISH_HUB_FILE_COMPLETED",e.PUBLISH_HUB_FILE_ERRORED="PUBLISH_HUB_FILE_ERRORED",e.PUBLISH_TEMPLATE_INITIATED="PUBLISH_TEMPLATE_INITIATED",e.PUBLISH_TEMPLATE_COMPLETED="PUBLISH_TEMPLATE_COMPLETED",e.PUBLISH_TEMPLATE_ERRORED="PUBLISH_TEMPLATE_ERRORED",e.UNPUBLISH_TEMPLATE_INITIATED="UNPUBLISH_TEMPLATE_INITIATED",e.UNPUBLISH_HUB_FILE_INITIATED="UNPUBLISH_HUB_FILE_INITIATED",e.UNPUBLISH_COMPLETED="UNPUBLISH_COMPLETED",e.UNPUBLISH_TEMPLATE_ERRORED="UNPUBLISH_ERRORED",e.CLEARED="CLEARED",e))(d||{});let u=["PUBLISH_HUB_FILE_INITIATED","PUBLISH_TEMPLATE_INITIATED","UNPUBLISH_TEMPLATE_INITIATED","UNPUBLISH_HUB_FILE_INITIATED"],m=[...u,"CLEARED"];function p(e){return u.includes(e)}let h={CLEARED:u,PUBLISH_TEMPLATE_INITIATED:["PUBLISH_TEMPLATE_COMPLETED","PUBLISH_TEMPLATE_ERRORED"],PUBLISH_TEMPLATE_COMPLETED:m,PUBLISH_TEMPLATE_ERRORED:m,UNPUBLISH_TEMPLATE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_HUB_FILE_INITIATED:["UNPUBLISH_COMPLETED","UNPUBLISH_ERRORED"],UNPUBLISH_COMPLETED:m,UNPUBLISH_ERRORED:m,PUBLISH_HUB_FILE_INITIATED:["PUBLISH_HUB_FILE_COMPLETED","PUBLISH_HUB_FILE_ERRORED"],PUBLISH_HUB_FILE_COMPLETED:m,PUBLISH_HUB_FILE_ERRORED:m},_=(0,i.eU)({state:"CLEARED"}),g=(0,i.eU)(e=>e(_).state),f=(0,i.eU)(e=>{let r=e(_);return"PUBLISH_TEMPLATE_INITIATED"===r.state?r.request:null}),E=(0,i.eU)(null,(e,r,n)=>{let i=e(g),{state:a}=n;if(h[i].includes(a))r(_,n);else throw Error(`Invalid state transition from ${i} to ${a}. Please check the state transition logic.`)});function y(e){switch(e){case"PUBLISH_TEMPLATE_ERRORED":case"PUBLISH_TEMPLATE_INITIATED":return"Slides Team Template Publish";case"UNPUBLISH_TEMPLATE_INITIATED":case"UNPUBLISH_ERRORED":return"Slides Team Template Unpublish";case"PUBLISH_HUB_FILE_ERRORED":case"PUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Publish";case"UNPUBLISH_HUB_FILE_INITIATED":return"Slides Hub File Unpublish";default:return e}}(0,i.eU)(null,(e,r)=>r(_,{state:"CLEARED"}));var b=(e=>(e.ALL="ALL",e.SINGLE="SINGLE",e.NONE="NONE",e))(b||{});(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)(null)),(0,a.Wh)(()=>(0,i.eU)({type:"NONE"})),(0,a.Wh)(()=>(0,i.eU)(""));let v=(0,a.Wh)(()=>(0,i.eU)(!1))},950814:(e,r,n)=>{n.d(r,{l:()=>i});let i=8},677967:(e,r,n)=>{var i=n(99506),a=n(540019),o=n(555328),s=n(222085),l=n(576144),c=n(950814);a.M4.Query({fetch:async e=>await s.A.getCommunityShelves({shelfType:o.cS.PIPER_TEMPLATE_MODAL}).then(e=>e.data.meta)}),a.M4.Query({fetch:async e=>await s.A.getCommunityShelfById({categoryId:e}).then(e=>{if(e.data.meta.length>0)return e.data.meta[0]})}),a.M4.Query({fetch:async e=>e?await l.q.getSearchPaginated({orgId:e,size:c.l,from:0,templateType:i._Y.SLIDES}).then(e=>e.data.meta.templates):[]})},491679:(e,r,n)=>{n.d(r,{Jv:()=>u,YW:()=>d});var i=n(411855);n(188507),n(268853),n(922827),n(340818),n(298455),n(3794),n(540193),n(966712),n(391388),n(553716),n(30637);var a=n(154483);n(384162),n(410424),n(632430),n(986270),n(965480),n(988022),n(356390),n(335682),n(694687),n(820642),n(99506),n(540019),n(336599),n(601607);var o=n(463592);n(106112),n(555328),n(809073),n(967409),n(272917),n(369394),n(508567);var s=n(576144);n(372291),n(144119),n(953289),n(677967);(0,a.fv)(),new o.CN({keys:["name"],ignoreLocation:!0});var l=(e=>(e[e.LOADING=0]="LOADING",e[e.NO_RECENT_FILES=1]="NO_RECENT_FILES",e[e.NO_QUERY_RESULTS=2]="NO_QUERY_RESULTS",e[e.SUCCESS=3]="SUCCESS",e))(l||{}),c=(e=>(e.OVERLAY_MODAL="OVERLAY_MODAL",e.PICKER="PICKER",e.BOARD_TO_DECK="BOARD_TO_DECK",e))(c||{});async function d(e){return!!e&&!e.parentOrgId&&!!e.teamId&&!!e.editorType&&(await s.q.getTeamTemplateLimitReached({teamId:e.teamId,editorType:e.editorType})).data.meta.template_limit_reached}async function u(e){return!!e&&!e.parent_org_id&&!!e.team_id&&!!e.editor_type&&(await s.q.getTeamTemplateLimitReached({teamId:e.team_id,editorType:e.editor_type})).data.meta.template_limit_reached}i.createContext(null)},179243:(e,r,n)=>{n.d(r,{Dh:()=>u,Dq:()=>c,E_:()=>m,TN:()=>l,i1:()=>d});var i=n(418956),a=n(716034),o=n(940596),s=n(674011);let l=(0,s.hR)([],{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),c=(0,s.hR)({},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}),d=(0,i.Iz)(e=>(0,s.hR)({id:e,data:null},{changeFileBehavior:s.hW.RESET_VALUE_ON_FILE_CHANGE}));function u(e){let r=d(e);return i.zl.get(r).data}(0,o.Wh)(()=>(0,i.M2)((0,a.eU)({})));let m=(0,o.Wh)(()=>(0,a.eU)(null))},559681:(e,r,n)=>{n.d(r,{UZ:()=>I,Xo:()=>b,k1:()=>S,kO:()=>E,lK:()=>T});var i=n(411855),a=n(966664),o=n(396353),s=n(922827),l=n(572304);n(568214);var c=n(966712),d=n(418956),u=n(364898),m=n(529928),p=n(416095);n(726284);var h=n(859703),_=n(933123),g=n(125944),f=n(179243);function E(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r);return!n}let y=(0,m.bt)(e=>e.library.local.styles);function b(e){let r=(0,d.md)(y),n=(0,f.i1)(e),{data:a}=(0,d.md)(n);return i.useMemo(()=>{if(!e)return[];if(!(0,g.X_)(e))return console.warn("Expected local theme",e),[];if(!a)return console.warn("Theme no longer exists in the theme map",e),[];let n=new Set(a?.styleGUIDs||[]);return n.size>0?(0,p.ti)(r,"TEXT").filter(e=>n.has(e.node_id)).sort((e,r)=>(0,u.Ez)(r.sort_position||"",e.sort_position||"")):[]},[e,a,r])}function v(e){let r=(0,d.md)(h.Cg),n=(0,f.i1)(e),{data:i}=(0,d.md)(n);return e?(0,g.X_)(e)?i?(i.variableIDs||[]).map(e=>r[e])||[]:(console.warn("Theme no longer exists in the theme map",e),[]):(console.warn("Expected local theme",e),[]):[]}function I(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r),a=n?.variableSetID||"";return i.useMemo(()=>o.gr.isValid(a)?s.CWU.getVariableSetDefaultMode(a):"",[a])}function T(e){let r=function(e){let r=v(e);return(0,i.useMemo)(()=>{let n=s.Ez5.slideThemeLibBindings().getBlackColorVariableId(e),i=s.Ez5.slideThemeLibBindings().getWhiteColorVariableId(e);return r.filter(e=>e&&e.resolvedType===s.rXF.COLOR).sort((e,r)=>{for(let a of[n,i]){if(e.node_id===a)return -1;if(r.node_id===a)return 1}return e.sortPosition<r.sortPosition?-1:1}).map(e=>e.node_id)},[e,r])}(e),n=I(e),o=(0,g.X_)(e);return r.map(e=>{if(!e||0===e.length)return;let r=o?s.CWU.getLocalVariableInfo(e):s.CWU.getSubscribedVariableInfo(e);if(r&&r.modeValues){let i=function(e,r){let n=e.modeValues[r];if(!n||n.resolvedType!==s.rXF.COLOR)return null;if(n.type===s.Z_n.COLOR)return n.value;if(n.type===s.Z_n.ALIAS&&(0,c.kc)().piper_theme_variable_alias){let r=s.CWU.getVariableResolvedValue(e.id,new Map);if(r)return r.value}return null}(r,n);if(i){let a={color:i,colorVar:{dataType:"ALIAS",resolvedDataType:"COLOR",value:{alias:{guid:(0,l.sH)(e.replace("VariableID:",""))||void 0}}}};return{variableId:e,variableName:r.name,variableType:r.modeValues[n].type,paint:a}}}}).filter(a.Vq)}function S(e){let r=(0,f.i1)(e),{data:n}=(0,d.md)(r),a=n?.variableSetID||"",o=I(e),l=v(e),c=(0,_.ay)();return(0,i.useCallback)(e=>{if(a){let r=c(a,l,s.rXF.COLOR,"",s.HS4.SLIDES_THEME);return r&&s.CWU.setVariableValueForMode(r,o,{type:s.Z_n.COLOR,resolvedType:s.rXF.COLOR,value:e}),r}return null},[c,a,o,l])}},452883:(e,r,n)=>{n.d(r,{$:()=>s});var i=n(848661),a=n(555074),o=n(601607);function s(){let[e]=(0,a.lJ)("themeId"),r=(0,o.Fk)(e=>e.getRoot().slideThemeId);return e&&(0,i.hS)(e)?e:r}},125944:(e,r,n)=>{function i(e){return e.length>0&&!e.includes("/")}function a(e){return"TEXT"===e||"GRID"===e}n.d(r,{Rc:()=>a,X_:()=>i})},266294:(e,r,n)=>{n.d(r,{PF:()=>f,fx:()=>E}),n(411855);var i=n(922827),a=n(298455),o=n(38329);n(966712);var s=n(418956),l=n(553716);n(47506),n(939863);var c=n(582064);n(392592),n(934533);var d=n(119198),u=n(974105);n(335682);var m=n(99506),p=n(984968),h=n(945020);n(983499),n(92566),n(144119);var _=n(72754),g=n(463660);function f(e,r){!function(e,r){let n=s.zl.get(p.Me),i=o.D.getState(),a=(0,u.Kl)(i);e(d.zE({state:a,from:h.f6.DESIGN_TO_SLIDES_ENTRYPOINT,editorType:m._Y.SLIDES,team:n,openNewFileIn:h.ai.NEW_TAB,slidesNewFileData:r}))}(e,{localStorageKey:r})}function E(e,r,n=!1){return new Promise((o,s)=>{let d;if(null===r||null===e){(0,l.x1)("storeFigmaContentForSlidesCreation","No openFile or file version",{fileKey:e?.key,fileVersion:r},{reportAsSentryError:!0}),s();return}let u=(0,c.MZ)(),m=(0,a.UN)(),p=m.getDirectlySelectedNodes();d=n&&p.length?m.getDirectlySelectedNodes().filter(e=>(0,_.o)(e)).map(e=>e.guid):[...i.Ez5.slideLikeNodeObserverState().slideLikeNodeIdsOnCanvas.getCopy()];try{(0,g.JR)(u,{fileKey:e.key,fileVersion:r,pageGuid:m.getCurrentPage()?.guid,selectedNodeIds:d}),o(u)}catch(n){(0,l.x1)("storeFigmaContentForSlidesCreation","Failed to serialize and store sceneGraph data into local storage",{fileKey:e.key,fileVersion:r},{reportAsSentryError:!0}),s()}})}},155565:(e,r,n)=>{n.d(r,{Z:()=>s});var i=n(91408);n(818),n(506599),n(617453),n(187882);var a=n(125944),o=n(837746);function s(e){return"FILL"===e||"STROKE"===e||(0,a.Rc)(e)}(0,i.jz)(o.M$q)},985481:(e,r,n)=>{n.d(r,{KL:()=>i,Z3:()=>p});var i,a=n(411855),o=n(966664),s=n(922827),l=n(44948),c=n(29680),d=n(601607),u=n(559681),m=n(669186);function p({themeId:e,styleId:r,options:n,onPreviewGenerated:i}){let p=function(e){let r=(0,d.Fk)((e,r)=>{let n;let i=e.get(r);if(!i)return;let a=i.fontSize,o=i.lineHeightOrMixed;if("mixed"===o)n=a;else switch(o.units){case"RAW":n=a*o.value;break;case"PIXELS":n=o.value;break;case"PERCENT":n=a*o.value/100}return{name:i.name,fontFamily:i.fontName.family,fontStyle:i.fontName.style,fontSize:a,lineHeight:n}},e);return(0,l.k9)(()=>r,[r])}(r);!function({themeId:e,styleId:r,styleMetadata:n,options:i,onPreviewGenerated:l}){let d=function({themeId:e,minPreviewHeight:r,maxPreviewHeight:n,defaultPreviewHeight:i}){let s=function(e){let r=(0,u.Xo)(e),n=(0,c.eY)();return a.useMemo(()=>{let e=r.map(e=>n.get(e.node_id)?.fontSize).filter(o.Vq);if(e.length)return{min:Math.min(...e),max:Math.max(...e)}},[r,n])}(e);return a.useMemo(()=>{if(!s)return new class{getPreviewHeight(e){return i}};let{min:e,max:a}=s;return new class{getPreviewHeight(o){let s=function(e,r,n,i,a){if(!(e<r)&&!(e>n)&&!(i>=a)&&!(r>=n))return(e-r)/(n-r)*(a-i)+i}(o,e,a,r,n);return s?Math.round(s):i}}},[s,r,n,i])}({themeId:e,minPreviewHeight:i.minHeight,maxPreviewHeight:i.maxHeight,defaultPreviewHeight:Math.round((i.minHeight+i.maxHeight)/2)}),{fontsAreLoading:p,checkFontsAreLoading:h}=(0,m.B)();a.useEffect(()=>{h()},[n,h]),a.useEffect(()=>{if(p)return;if(!n||!s.vXe.fontIsLoaded(n.fontFamily,n.fontStyle)){l(null);return}let e=d.getPreviewHeight(n.fontSize),a=n.name;i.maxWidth&&(a=s.glU.truncateText(n.fontFamily,e,n.lineHeight*(e/n.fontSize),i.maxWidth,1,a));let o=s.Ez5.slideThemeStylePreview().generateTextPreview(r,a,i.color,n.fontFamily,n.fontStyle);if(!o){l(null);return}l({preview:o,previewHeight:e})},[p,r,n,i,d,l])}({themeId:e,styleId:r,styleMetadata:p,options:n,onPreviewGenerated:i})}(e=>{e.MIN_THEME_TEXT_STYLE_PREVIEW_HEIGHT=12,e.MAX_THEME_TEXT_STYLE_PREVIEW_HEIGHT=22})(i||(i={}))},126674:(e,r,n)=>{n.d(r,{DG:()=>M,Kc:()=>R,OQ:()=>P,Zp:()=>L,dy:()=>k,in:()=>x,rS:()=>D});var i=n(411855),a=n(188507),o=n(841563),s=n.n(o),l=n(776250),c=n(711525),d=n(642822),u=n(970516),m=n(944682),p=n(507877),h=n(763223),_=n(654034),g=n(912924),f=n(112235),E=n(29680),y=n(132135),b=n(99506),v=n(540019),I=n(556261),T=n(56099),S=n(549774),w=n(440535),A=n(103271),C=n(588282),N=n(406158),L=(e=>(e.TILE="tile",e.DETAIL_MODAL="detail",e))(L||{});function O(e,r,n){return e===n&&r!==b.Xn.GUEST}function R(e,r){let n=`${location.origin}/files/${e}/feed-posts`;return r?.uuid&&(n+=`/${r.uuid}`),n}function P({fileVersionId:e,fileKey:r,startingNodeId:n},i){let a=(0,S.lD)({startingPointNodeId:n,versionId:e});a["redirect-src"]="feed",Object.assign(a,i);let o=Object.entries(a).map(([e,r])=>`${e}=${r}`).join("&");return`${location.origin}/proto/${r}?${o}`}function D(e,r,n){let o=(0,a.wA)(),s=r.find(e=>e.type===A.cM.NODE||e.type===A.cM.PROTOTYPE),c=(s?s.fileKey:void 0)||n;i.useEffect(()=>{o(m.ZN({file_key:c??void 0}))},[o,c]);let u=v.M4.useFile(c).data,h=(0,f.$)(),_=i.useMemo(()=>u&&s&&s.type===A.cM.PROTOTYPE?d.y1.PROTOTYPE:u?h(u):void 0,[u,s,h]),g=u&&void 0!==_;return{fileData:u,fileIcon:_,fileLoaded:g,openFile:i.useCallback(()=>{if((0,l.sx)("Team Feed File Clicked",{postUuid:e}),s){if(s.type===A.cM.NODE){let r=(0,y.jN)({file:{key:s.fileKey},commentId:(0,C.iw)(e)});o(p.V3({url:r}))}else s.type===A.cM.PROTOTYPE&&o(p.V3({url:P(s)}))}if(c){let e=(0,y.jN)({file:{key:c}});o(p.V3({url:e}))}},[o,s,e,c])}}var k=(e=>(e.TILE="tile",e.DETAIL="detail",e))(k||{});function M(e,r){let n=(0,a.wA)();return i.useCallback(()=>{(0,l.sx)("Team Feed Copy Link Clicked",{postUuid:e,source:r}),n(u.le({view:"teamFeed",postUuid:e}))},[n,e,r])}let F={component:"useFeedPostInfo",migrationGroup:T.L.GROUP_7};function x(e,r,n,a){let[o,d]=i.useState({}),[u,m]=i.useState({}),p=(0,E.eY)(),f=(0,I.wy)({...F,attribute:"planUserParentOrgId",legacy:(e,r)=>r?.org_id,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e.planKey.parentId??void 0}}),y=(0,I.wy)({...F,attribute:"planUserPermission",legacy:(e,r)=>r?.permission,migrated:e=>{if(e?.key.type===b.h4.ORG_USER)return e?.permission}});return i.useEffect(()=>{if(e.errors&&e.errors.length){let r=JSON.stringify(e.errors.map(e=>({code:e.code,path:e.path,message:e.error?.message||""})));console.error(`Failed to load feed posts: ${r}`),(0,l.sx)("Livegraph Feed Post Comments Errors",{errors:r})}},[e.errors]),i.useMemo(()=>{if((0,h.y)()&&"loaded"===e.status&&e.data.file&&p?.get){let r=e.data.file.feedPosts,i=r.filter(e=>!!e.org&&!!y&&O(f,y,e.org.id)),l=(0,g.N)(i),c=n(l);Object.entries(c).every(([e,r])=>null===o[e]&&null===r||!!o[e]&&!!r&&o[e]===r)||d(c);let h=a(l,p?.get.bind(p),r);Object.entries(h).every(([e,r])=>{let n=u[e];return!!n&&s()(n,r)})||m(h)}},[e,p,n,a,y,f,o,u]),i.useMemo(()=>f?function(e,r,n,i,a,o){if("loaded"!==e.status)return e;if(!e.data.file)return(0,c.gB)([]);let s={},l=(e.data.file?.feedPosts||[]).sort((e,r)=>r.createdAt.getTime()-e.createdAt.getTime()).filter(e=>!!e.org&&O(a,o,e.org.id)).map(e=>{let a=e.comments.map(e=>({id:`feed_comment_${e.id}`,uuid:e.uuid,key:"",parent_id:null,user_id:e.user.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.messageMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:(0,_.CR)(e.user),feed_id:e.id,attachments:e.attachments})),[o,...l]=(0,g.N)([e]);s[o]=s[o]+1||0;let c=n[o]??null,d=i[e.publicUuid]?.[o],u={};for(let r of l)n[r]===c&&(u[r]=i[e.publicUuid]?.[r]);let m=null,p=null;d&&(p={x:d.x+d.width,y:d.y},m={x:d.x,y:d.y+d.height});let h=(0,_.CR)(e.creator),f=(0,C.iw)(e.publicUuid),E=e.content.map(e=>JSON.parse(e)),{thumbnail:y,padImage:b,thumbnailBackground:v}=(0,N.i0)(E,e.backgroundColor??void 0);return{id:f,uuid:"",key:e.fileKey||"",anchored:!1,selectionAnchorCanvasPosition:null,page:c,pageName:null,isActive:r===f,isPendingFromSinatra:!1,canvasPosition:p,boundingBoxAnchorCanvasPosition:m,comments:[{id:f,uuid:"",key:e.fileKey||"",parent_id:null,user_id:h.id,created_at:e.createdAt.toISOString(),resolved_at:null,deleted_at:null,message_meta:(0,_.o8)(e.descriptionMeta),client_meta:null,order_id:null,isUnread:!1,isPendingFromSinatra:!1,user:h,feed_id:e.id},...a],messageMeta:[],attachments:[],isCanvasMention:!1,sidebarItemType:w.kT.FEED_POST,feedPostPublicUuid:e.publicUuid,feedPostTitle:e.title,feedPostThumbnail:y,feedPostThumbnailBackground:v,feedPostNumContent:e.content.length,padFeedPostThumbnail:b,otherBoundingBoxes:u,pinVerticalStagger:s[o]}});return(0,c.gB)(l)}(e,r,o,u,f,y):(0,c.gB)([]),[e,r,o,u,f,y])}},679736:(e,r,n)=>{n.d(r,{M2:()=>a.M,My:()=>i.My,lt:()=>i.lt,t1:()=>a.t});var i=n(701372),a=n(498792)},406158:(e,r,n)=>{n.d(r,{AK:()=>A,EU:()=>N,Px:()=>b,Rl:()=>I,WI:()=>w,X2:()=>S,i0:()=>C,mz:()=>L,pj:()=>y,zr:()=>T});var i=n(140593),a=n(922827),o=n(539321),s=n(776250),l=n(966712),c=n(395900),d=n(1844),u=n(27087),m=n(204279),p=n(973131),h=n(103271),_=n(988771),g=n(421689);let f="team_feed",E=(e,r,n)=>{let i;let a=new Image;if(a.crossOrigin="anonymous",e.type===h.cM.NODE?i=(0,g.yt)(e.image_url,a).then(async e=>{let i=new Image;if(i.crossOrigin="anonymous",!n)throw Error("Expected a oldNodeImageUrl value");let a=await (0,g.yt)(n,i).then(e=>e.naturalWidth),o=e.naturalWidth/a;return r.state.zoom/=o,(0,g.Bt)(e,r.state)}):e.type===h.cM.IMAGE&&r.url&&(i=Promise.resolve(r.url)),!i)throw Error("Expected a previewImagePromise");return i.then(e=>fetch(e)).then(e=>e.arrayBuffer()).then(e=>{let r=new Uint8Array(e),n=URL.createObjectURL(new Blob([r]));return(0,d.Q)(f,r,"image/jpeg").then(({data:e})=>({data:e,localUrl:n}))}).then(({data:e,localUrl:n})=>({previewImageUrl:e.meta.url,localUrl:n,previewState:r.state}))};async function y(e,r,n,a){let l;if(r.find(e=>e.displayContentItem.type===h.cM.NODE||e.displayContentItem.type===h.cM.PROTOTYPE)){let r=new c.M4;r.start();let i=await (0,p.J)(n,a,"",e);r.stop(),(0,s.sx)("Team Feed New Savepoint Created",{elapsedTimeMs:r.getElapsedTime()}),l=i.id}let d=r.map(e=>{switch(e.displayContentItem.type){case h.cM.NODE:return e.processedContentItem.then(r=>{let n;let i={...r,fileVersionId:l};return e.preview&&(n=new c.M4).start(),(e.preview?E(i,e.preview,e.displayContentItem.image_url):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let r=void 0!==e?{...i,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:i;return(0,h.hM)(r)})});case h.cM.IMAGE:return e.processedContentItem.then(r=>{let n;return e.preview&&(n=new c.M4).start(),(e.preview?E(r,e.preview):Promise.resolve(void 0)).then(e=>{n&&(n.stop(),(0,s.sx)("Team Feed Preview Uploaded",{elapsedTimeMs:n.getElapsedTime()}));let i=void 0!==e?{...r,preview_image_url:e.previewImageUrl,backgroundColor:(0,o.colorToHex)(e.previewState.backgroundColor),initialX:e.previewState.x,initialY:e.previewState.y,initialZoom:e.previewState.zoom}:r;return(0,h.hM)(i)})});case h.cM.VIDEO:return e.processedContentItem.then(e=>(0,h.hM)(e));case h.cM.PROTOTYPE:return e.processedContentItem.then(e=>(0,h.hM)({...e,fileVersionId:l}));default:(0,i.xb)(e.displayContentItem)}});return await Promise.all(d)}function b(e,r,n){return r.map(r=>{let n={type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:"",isLoading:!0};return{displayContentItem:n,processedContentItem:Promise.resolve(n)}})}let v=(e,r,n)=>_.Y.getGenerateImageToken({orgId:n,tokenVersion:"2",fileKey:e}).then(n=>{let i=n.data.meta,a=(0,l.Ay)().api_cdn_url||(0,l.Ay)().api_url;return u.Ay.crossOriginGet(`${a}/v1/images/${e}`,{token:i,scale:g.qc.toString(),ids:r.join(",")})});async function I(e,r,n,i,o,l){let d;let u=v(e,r,n);if(o)d=r.map(r=>({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:l&&l[r]}));else{let n=new c.M4;n.start();let i=r.map(r=>new Promise((n,i)=>{setTimeout(()=>{let i=new Blob([function(e){let[r,n]=a.Vzr.generateThumbnailForNode(e,g.Ty.width,g.Ty.height,1,{});return n}(r)]),o=URL.createObjectURL(i);n({type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o})},0)}));d=await Promise.all(i),n.stop(),(0,s.sx)("Team Feed Client Node Image Generation",{fileKey:e,nodeIds:r,elapsedTimeMs:n.getElapsedTime()})}return r.map((r,n)=>{let a=u.then(a=>{let o=a.data.images;return{type:h.cM.NODE,fileKey:e,fileVersionId:"",nodeId:r,image_url:o[r],backgroundColor:d[n]?.backgroundColor??i}});return{nodeId:r,displayContentItem:d[n],processedContentItem:a}}).reduce((e,r)=>({...e,[r.nodeId]:r}),{})}function T(e,r){return{displayContentItem:{type:h.cM.IMAGE,...e},processedContentItem:(0,m.rH)(e,f).then(e=>({type:h.cM.IMAGE,...e})),fileIdentifier:r}}function S(e,r,n,i){return{displayContentItem:{type:h.cM.VIDEO,mediaType:e.mediaType,path:e.url,sha:"",videoFileUuid:"",coverImage:""},processedContentItem:(0,m.bu)(e,r,n,f).then(e=>({type:h.cM.VIDEO,...e})),fileIdentifier:i}}function w(e,r){let n={...e,type:h.cM.PROTOTYPE,imageUrl:"",prototypeId:0,fileVersionId:""},i=v(e.fileKey,[e.startingNodeId],r).then(r=>(n.imageUrl=r.data.images[e.startingNodeId],n));return{displayContentItem:n,processedContentItem:i}}function A(e){switch(e.displayContentItem.type){case h.cM.NODE:return;case h.cM.IMAGE:URL.revokeObjectURL(e.displayContentItem.url),e.displayContentItem.preview_image_url&&URL.revokeObjectURL(e.displayContentItem.preview_image_url);return;case h.cM.VIDEO:URL.revokeObjectURL(e.displayContentItem.path);return;case h.cM.PROTOTYPE:return;default:(0,i.xb)(e.displayContentItem)}}function C(e,r){let n=e.find(e=>e.type===h.cM.NODE),i=n?.mediumImageUrl||n?.preview_image_url||n?.image_url;if(i)return{thumbnail:i,padImage:!n.preview_image_url,thumbnailBackground:L(n,r)};let a=e.find(e=>e.type===h.cM.PROTOTYPE),o=a?.imageUrl;if(o)return{thumbnail:o,padImage:!1,thumbnailBackground:L(a,r)};let s=e.find(e=>e.type===h.cM.IMAGE),l=s?.mediumImageUrl||s?.preview_image_url||s?.url;if(l)return{thumbnail:l,padImage:!s?.preview_image_url,thumbnailBackground:L(s,r)};let c=e.find(e=>e.type===h.cM.VIDEO),d=c?.coverImage;return d?{thumbnail:d,padImage:!1,thumbnailBackground:L(c,r)}:{thumbnail:"",padImage:!1,thumbnailBackground:L(null,r)}}function N(e){return!!((0,h.aT)(e)&&void 0!==e.initialX&&void 0!==e.initialY&&void 0!==e.initialZoom&&e.backgroundColor)}function L(e,r){return e?(0,h.aT)(e)?"backgroundColor"in e&&e.backgroundColor||r:"black":"var(--color-bg-secondary)"}},916616:(e,r,n)=>{n.d(r,{a9:()=>N,$K:()=>v,aH:()=>b,Q6:()=>E});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(995672),c=n(939863),d=n(259927),u=n(318812),m=n(498606),p=n(538697),h=n(300587),_=n(677859),g=n(662599),f=n(935084),E=(e=>(e.ActualSize="Actual Size",e.Default="Default",e.Fit="Fit to Screen",e.FitWidth="Fit Width",e.FillScreen="Fill Screen",e))(E||{});let y={"Actual Size":()=>(0,c.t)("fig_feed.zoom_pan_preset.actual_size"),Default:()=>(0,c.t)("fig_feed.zoom_pan_preset.default"),"Fit to Screen":()=>(0,c.t)("viewer.options_menu.fit_to_screen"),"Fill Screen":()=>(0,c.t)("viewer.options_menu.fill_screen"),"Fit Width":()=>(0,c.t)("viewer.options_menu.fit_width")},b=Object.keys(E),v="Default";class I extends p.l6{}class T extends p.c${}let S={format:e=>e in E?y[E[e]]():(0,c.t)("fig_feed.zoom_pan_preset.custom")};function w({reportWidth:e,inputProps:r}){let n=i.useRef(null),a=r.property;return i.useLayoutEffect(()=>{let r=n.current;return r&&e(a,r.getBoundingClientRect().width),()=>e(a,void 0)},[n,a,e]),i.createElement("div",{className:f.D9,"aria-hidden":!0},i.createElement(p.uQ,{...r,containerClassName:s()(r.containerClassName,f.oO),ref:n}))}function A({reportWidth:e,value:r,optionProps:n}){let a=i.useRef(null);return i.useLayoutEffect(()=>{let n=a.current?.getElement();return n&&e(r,n.getBoundingClientRect().width),()=>e(r,void 0)},[a,r,e]),i.createElement("div",{className:f.D9,"aria-hidden":!0},i.createElement(T,{...n,additionalStylesClassName:s()(n.additionalStylesClassName,f.ZS),ref:a}))}function C(e){let[r,n]=i.useState(void 0),[o,s]=i.useState(void 0),p=(0,a.wA)(),h=(0,u.Um)(),_=i.useMemo(()=>({inputClassName:"edit_preview_toolbar--input--FPZy0 text--fontNeg11--StdFq text--_fontBase--QdLsd text--_negText--j9g-L",formatter:S}),[]),g=i.useMemo(()=>i.createElement(l.r,{setMaxWidth:n,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,b.map(r=>i.createElement(w,{key:r,reportWidth:e,inputProps:{..._,property:r}})))}),[_]),f=i.useMemo(()=>i.createElement(l.r,{setMaxWidth:s,render:({reportWidthOfValue:e})=>i.createElement(i.Fragment,null,b.map(r=>i.createElement(A,{key:r,value:r,reportWidth:e,optionProps:{height:32,value:r,formattedValue:S.format(r)}})))}),[]);return i.createElement("div",{className:"edit_preview_toolbar--zoomPanPresetSelectorContainer--45Nn2","data-tooltip-show-above":!0,"data-tooltip-type":m.Ib.TEXT,"data-tooltip":(0,c.t)("fig_feed.zoom_pan_preset.tooltip")},f,g,i.createElement(I,{..._,inputWidth:r,property:e.value,onChange:r=>{e.setZoomPanPreset(r)},chevronClassName:"edit_preview_toolbar--chevron--zjsKc",dropdownClassName:d.Dm,id:`feedZoomPanPresetControl:${e.id}`,blurOnChange:!0,dropdownAlignment:"right",recordingKey:"feedZoomPanPreset",dispatch:p,dropdownShown:h,targetDomNode:document.body,dropdownWidth:o,preventHiddenInput:"always",ariaLabel:(0,c.t)("fig_feed.zoom_pan_preset.tooltip"),role:"combobox"},b.map(e=>i.createElement(T,{key:e,value:e,fullWidth:!0}))))}function N({id:e,backgroundColor:r,setBackgroundColor:n,zoomPanPreset:a,setZoomPanPreset:o,onResetCallback:l,applyToAllCallback:d}){let u=!(a in E);return i.createElement("div",{className:"edit_preview_toolbar--editPreviewToolbar--Gvlyc"},i.createElement(h.ZE,{value:r,onColorChange:n,recordingKey:"teamFeedEditablePreviewBackgroundColorControl",paletteType:"base",buttonCaretType:"down",buttonSize:"small",optionSize:"medium",positionX:()=>0,positionY:(e,r)=>(0,g.T1)(e,r,4),dropperDisabled:!0,inlineButtonTooltip:(0,c.t)("fig_feed.background_color.tooltip"),onlyShowCustomColorPopover:!0}),i.createElement(_.wv,null),i.createElement(C,{id:e,value:a,setZoomPanPreset:o}),!!d&&i.createElement(i.Fragment,null,i.createElement(_.wv,null),i.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.apply_to_all.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:async()=>{await d()},disabled:u,recordingKey:"teamFeedResetPreview"},i.createElement("span",{className:s()({"edit_preview_toolbar--buttonDisabled--hE0Am":u})},(0,c.t)("fig_feed.apply_to_all")))),l&&i.createElement(i.Fragment,null,i.createElement(_.wv,null),i.createElement(_.$n,{tooltip:(0,c.t)("fig_feed.reset.tooltip"),tooltipMaxWidth:200,caret:"none",onClick:l,recordingKey:"teamFeedResetPreview"},i.createElement("span",null,(0,c.t)("fig_feed.reset")))))}},160156:(e,r,n)=>{n.d(r,{K1:()=>O,Zo:()=>K,xT:()=>G});var i=n(411855),a=n(140593),o=n(629019),s=n.n(o),l=n(729074),c=n(568214),d=n(988652),u=n(768137),m=n(135876),p=n(163023),h=n(939863),_=n(553015),g=n(28588),f=n(103271),E=n(498606),y=n(126674),b=n(406158),v=n(987669),I=n(421689),T=n(441883),S=n(36019),w=n(151146),A=n(501191),C=n(169852),N=n(95917),L=n(36129);function O(e){let r;switch(e.type){case f.cM.NODE:r=e.nodeId;break;case f.cM.IMAGE:r=e.url;break;case f.cM.VIDEO:r=e.path;break;case f.cM.PROTOTYPE:r=e.startingNodeId;break;default:throw Error("unexpected content item type")}return`${e.type}:${r}`}function R(e){let[r,n]=i.useState(!e.isThumbnail&&!e.usesPreviewImage);if(i.useEffect(()=>{if(!e.imgUrl)return;let r=new Image;r.src=e.imgUrl,r.onload=()=>{let e=r.width/r.height;n(r=>r&&Math.abs(e-I.dp)>.01)}},[e.imgUrl]),null===e.imgUrl)return i.createElement("div",null,(0,h.t)("fig_feed.could_not_load_preview_image"));let a=e.isThumbnail&&e.thumbnailUrl?e.thumbnailUrl:e.imgUrl;return i.createElement(i.Fragment,null,e.showPreviewFacade&&i.createElement("div",{className:w.Hq},i.createElement(u.pz,{onClick:e.onUpdatePreviewImage},(0,h.t)("fig_feed.update_preview_image"))),i.createElement("img",{src:a,alt:(0,h.t)("fig_feed.thumbnail_alt_text"),draggable:!1,className:s()(w.tv,e.isThumbnail&&w.Jq,r&&w.Pd)}),e.isThumbnail?null:"image/gif"===e.mediaType?i.createElement("div",{className:w.mB},(0,h.t)("fig_feed.gif")):null)}function P(e){let r=!!e.editPreviewOptions;return i.createElement("div",{className:w.yE},e.contentItems.map((n,a)=>{let o;return e.editPreviewOptions?.applyToAllCallback&&(o=r=>e.editPreviewOptions.applyToAllCallback(r,O(n))),i.createElement("div",{key:a,className:s()({[w.Xt]:!0,[w.sD]:a===e.selectedIdx})},i.createElement(I.DH,{key:`details::${n.image_url}`,imageSrc:n.image_url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:a===e.selectedIdx?e.editPreviewOptions?.setContentPreview:void 0,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(n)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||n.backgroundColor&&(0,c.H0)(n.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,applyToAllCallback:o,imageScale:r?1:void 0,enableZoomKeyControls:a===e.selectedIdx&&(e.source===y.Zp.DETAIL_MODAL||r),enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL}))}))}function D(e){return i.createElement(T.D,{item:e.prototypeContent})}function k(e){let r=!!e.editPreviewOptions;return i.createElement(I.DH,{key:`details::${e.imageContent.url}`,imageSrc:e.imageContent.url,shouldZoomToStart:!1,shouldWheelPan:!0,showEditPreviewControls:r,setContentPreview:e.editPreviewOptions?.setContentPreview,initialSnapshotState:e.editPreviewOptions?.initialSnapshotStates?.[O(e.imageContent)],disableReset:!!e.editPreviewOptions?.disableReset,resetSnapshotState:e.editPreviewOptions?.selectedContentResetSnapshotState,applyToAllCallback:e.editPreviewOptions?.applyToAllCallback?r=>e.editPreviewOptions.applyToAllCallback(r,O(e.imageContent)):void 0,pageBackgroundColor:e.editPreviewOptions?.pageBackgroundColor||e.imageContent.backgroundColor&&(0,c.H0)(e.imageContent.backgroundColor)||e.pageBackgroundColor&&(0,c.H0)(e.pageBackgroundColor)||void 0,imageScale:1,enableZoomKeyControls:e.source===y.Zp.DETAIL_MODAL||r,enableSnapToGuidelines:r,enableZoomControls:e.source===y.Zp.DETAIL_MODAL})}function M(e){let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return i.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,source:e.source})}function F(e){return e.isThumbnail?i.createElement("div",null,(0,h.tx)("fig_feed.video")):i.createElement("div",null,(0,h.tx)("fig_feed.transcode_after_submit"))}function x(e){if(g.cU.includes(e.videoContent.mediaType)&&""===e.videoContent.videoFileUuid)return i.createElement(F,{isThumbnail:e.isThumbnail});if(e.isThumbnail&&e.videoContent.coverImage)return i.createElement(R,{imgUrl:e.videoContent.coverImage,isThumbnail:!0});let r=(0,S.jI)(e.feedPostUuid,e.videoContent.path,e.source);return i.createElement(S.l0,{id:r,videoContent:e.videoContent,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source})}function U(e){return i.createElement(i.Fragment,null,i.createElement(m.x,{isLoading:!e.content.imageUrl},()=>i.createElement(R,{imgUrl:e.content.imageUrl,isThumbnail:e.isThumbnail})),!e.isThumbnail&&i.createElement("div",{className:w.mB},(0,h.tx)("fig_feed.prototype_badge")))}function B(e){let r=e.contentItems[e.selectedIdx];switch(r.type){case f.cM.NODE:return i.createElement(P,{selectedIdx:e.selectedIdx,contentItems:e.contentItems,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor,source:e.source});case f.cM.IMAGE:return i.createElement(k,{imageContent:r,source:e.source,editPreviewOptions:e.editPreviewOptions,pageBackgroundColor:e.pageBackgroundColor});case f.cM.VIDEO:return i.createElement(M,{videoContent:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source});case f.cM.PROTOTYPE:return i.createElement(D,{prototypeContent:r});default:(0,a.xb)(r)}}function V(e){switch(e.content.type){case f.cM.NODE:let r=e.content,n=r.mediumImageUrl??r.preview_image_url??r.image_url,o=r.preview_image_url??r.image_url;return i.createElement(m.x,{isLoading:!!r.isLoading},()=>i.createElement(R,{imgUrl:e.isEditing?o:n,usesPreviewImage:!!r.preview_image_url,isThumbnail:e.isThumbnail,thumbnailUrl:e.isEditing?o:r.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage}));case f.cM.IMAGE:let s=e.content.mediumImageUrl??e.content.preview_image_url??e.content.url,l=e.content.preview_image_url??e.content.url;return i.createElement(R,{imgUrl:e.isEditing?l:s,isThumbnail:e.isThumbnail,usesPreviewImage:!!e.content.preview_image_url,mediaType:e.content.mediaType,thumbnailUrl:e.isEditing?l:e.content.thumbnailUrl,showPreviewFacade:e.showPreviewFacade,onUpdatePreviewImage:e.onUpdatePreviewImage});case f.cM.VIDEO:return i.createElement(x,{videoContent:e.content,isThumbnail:e.isThumbnail,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source});case f.cM.PROTOTYPE:return i.createElement(U,{content:e.content,isThumbnail:e.isThumbnail});default:(0,a.xb)(e.content)}}function G(e){let r=!!e.editPreviewOptions,n=e.contentItems.length>1||r,{selectedContentIdx:a,pageBackgroundColor:o,setSelectedContentIdx:l,contentItems:u,onContentHover:_}=e,[g,y]=(0,d.M)();i.useEffect(()=>{_?.(y)},[y,_]);let v=i.useMemo(()=>u[a],[u,a]),I=i.useMemo(()=>n?i.createElement(H,{direction:"horizontal",contentItems:u,selectedIdx:a,setSelectedIdx:l,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:!1}):null,[n,u,a,l,e.pageBackgroundColor,e.feedPostUuid]);e.editPreviewOptions&&v&&"node"===v.type&&v.backgroundColor&&(e.editPreviewOptions.pageBackgroundColor=(0,c.H0)(v.backgroundColor)??void 0);let{openEditPreviewModalCallback:T,deleteSelectedItemCallback:S}=e,[A,N]=i.useState(!1),L=i.useMemo(()=>{if(!T&&!S||!A||!v)return null;let e=n?w.IN:w.r$;return i.createElement("div",{className:e},v&&(0,f.aT)(v)&&T&&i.createElement("div",null,i.createElement("button",{onClick:T,className:w.nY},(0,h.tx)("fig_feed.edit_preview"))),S&&i.createElement(p.B,{svg:C.A,className:w.j5,onClick:S,autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"}))},[A,v,n,T,S]);return i.createElement("div",{className:s()(w.qG,r&&w.Mm)},i.createElement("div",{ref:g,className:n&&!r?w.Uz:w.xs,style:{backgroundColor:(0,b.mz)(v,e.pageBackgroundColor)},onMouseDown:e.onSelectedTileMouseDown,role:"button",tabIndex:0,onPointerEnter:()=>N(!0),onPointerLeave:()=>N(!1),"data-testid":"feed-post-content-section"},L,i.createElement(m.x,{isLoading:!v},()=>e.staticContent?i.createElement(V,{content:v,isThumbnail:!1,feedPostUuid:e.feedPostUuid,feedPostIdx:e.feedPostIdx,source:e.source}):i.createElement(B,{contentItems:u.filter(e=>null!==e),selectedIdx:a,editPreviewOptions:e.editPreviewOptions,feedPostUuid:e.feedPostUuid,pageBackgroundColor:o,source:e.source}))),I)}function H(e){let r=i.useRef(null);i.useEffect(()=>{let n=r.current,i=r.current?.children[e.selectedIdx];if(!n||!i)return;let a=n?.getBoundingClientRect();a?.top>=0&&a?.left>=0&&a?.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a?.right<=(window.innerWidth||document.documentElement.clientWidth)&&i.scrollIntoView({behavior:"smooth",block:"nearest",inline:"nearest"})},[e.direction,e.selectedIdx]);let n=(0,S.pN)(),{scrollToItem:a,onReorderCallback:o,setSelectedIdx:c,deleteItem:d}=e,[u,m]=i.useState(null),h=e.thumbnailType||"wide",g=i.useCallback((r,o,l)=>{let p=s()(w.iD,l&&w.Ut,"small"===h&&w.kL,"wide"===h&&w.Wr);return i.createElement("div",{className:p,onMouseDown:()=>{n(e.feedPostUuid),a?.(o),c?.(o)},onPointerEnter:()=>m(o),onPointerLeave:()=>m(null),role:"button",tabIndex:0,style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},"data-testid":`content-item-${o}`},i.createElement(V,{content:r,isThumbnail:!0,isEditing:e.isEditing}),d&&o===u&&i.createElement("div",{className:w.nx},i.createElement("div",{className:w.fy,onClick:e=>{e.stopPropagation(),d(o)},role:"button",tabIndex:0},i.createElement(v.X,null))))},[e.pageBackgroundColor,e.feedPostUuid,h,e.isEditing,u,n,a,c,d]),f=r=>{if("horizontal"!==e.direction)return null;let n=e.selectedIdx===("left"===r?0:e.contentItems.length-1);return i.createElement(_.$,{onMouseDown:()=>{let n=(e.selectedIdx+("left"===r?-1:1)+e.contentItems.length)%e.contentItems.length;c?.(n)},icon:"left"===r?"chevron-left-32":"chevron-right-32",variant:"text",disabled:n})},E=s()(w.sm,"horizontal"===e.direction?w.d9:w.b1);if(o)return i.createElement("div",{className:E},i.createElement(l._.Group,{axis:"vertical"===e.direction?"y":"x",onReorder:o,values:e.contentItems,className:s()(w.M2,"horizontal"===e.direction?w.AA:w.h0),role:"button",tabIndex:0,ref:r},e.contentItems.map((r,n)=>i.createElement(l._.Item,{value:r,id:O(r),key:O(r),translate:"no"},g(r,n,!(e.canAddContent&&e.isAddingContent)&&n===e.selectedIdx))),e.canAddContent&&i.createElement("div",{className:s()(w.iD,"small"===e.thumbnailType&&w.kL,"wide"===e.thumbnailType&&w.Wr,e.isAddingContent?w.ad:w.WW),onMouseDown:e.setAddingActive,role:"button",tabIndex:0},i.createElement(p.B,{svg:A.A}))));{let n=s()(w.M2,"horizontal"===e.direction?w.n2:w.h0);return i.createElement("div",{className:E},f("left"),i.createElement("div",{className:n,ref:r},e.contentItems.map((r,n)=>i.createElement(i.Fragment,{key:n},g(r,n,n===e.selectedIdx)))),f("right"))}}function K(e){let r=e.contentItems[e.selectedIdx],n=r&&(0,f.aT)(r),{onReorderCallback:a,deleteItemAtIdx:o,setSelectedIdx:l,onFileInputChange:c,setContentPreview:d,openPostFromFileModal:u}=e,[_,g]=i.useState(0===e.contentItems.length);i.useEffect(()=>{0===e.contentItems.length?g(!0):g(!1)},[e.contentItems.length]);let y=e.contentItems.length>=1||n,v=i.useCallback(()=>{g(!0)},[]),T=i.useCallback(e=>{l(e),g(!1)},[l]),[S,A]=i.useState(!1),R=i.useMemo(()=>S&&r?i.createElement("div",{className:w.r$},o&&i.createElement(p.B,{svg:C.A,className:w.j5,onClick:()=>o(e.selectedIdx),autosize:!0,"data-tooltip-type":E.Ib.TEXT,"data-tooltip":(0,h.t)("fig_feed.delete"),dataTestId:"delete-content-item"})):null,[r,S,e.selectedIdx,o]),P=i.useRef(null),D=(e,r,n,a)=>i.createElement("div",{className:w.c9,onClick:a,role:"button",tabIndex:0},i.createElement(p.B,{svg:n}),i.createElement("div",{className:w.LO},i.createElement("div",{className:w.Gq},e),r)),k=i.useCallback((n,i,a)=>{let o=O(r);r&&o&&!(0,I.L$)(i,e.snapshotStates[o])&&d(o,n,i)},[r,e.snapshotStates,d]),M=(r,n)=>{k(r,n,e.selectedIdx)},[F,x]=i.useState({}),U=i.useCallback(()=>{x(e=>({...e,[O(r)]:!0}))},[r]);return i.createElement("div",null,(()=>{if(_){let r=null===e.attachedFile?(0,h.t)("fig_feed.add_frames"):"whiteboard"===e.attachedFile.editor_type?(0,h.t)("fig_feed.share_something_from_figjam"):(0,h.t)("fig_feed.add_frames_from_this_figma_file");return i.createElement("div",{className:s()(w.Er,y&&w.QX)},i.createElement("div",{className:s()(w.hM,e.dragging&&w.cB)},D((0,h.t)("fig_feed.choose_frames"),r,N.A,u),i.createElement("form",null,i.createElement("input",{type:"file",name:"fileInput",id:"fileInput",accept:f.bB.join(","),ref:P,onChange:c(P),multiple:!0,className:w.Fg}),i.createElement("label",{htmlFor:"fileInput"},D((0,h.t)("fig_feed.upload_files"),(0,h.t)("fig_feed.add_images_or_videos"),L.A)))))}return i.createElement("div",{className:s()(w.Er,y&&w.QX),style:{backgroundColor:(0,b.mz)(r,e.pageBackgroundColor)},role:"button",tabIndex:0,onPointerEnter:()=>A(!0),onPointerLeave:()=>A(!1)},R,i.createElement(m.x,{isLoading:!r},()=>(0,f.aT)(r)&&("edit"===e.mode&&(F[O(r)]||!r.shouldBlockEditPreview)||"create"===e.mode)?i.createElement(B,{contentItems:e.contentItems,selectedIdx:e.selectedIdx,editPreviewOptions:{setContentPreview:M,initialSnapshotStates:e.snapshotStates,disableReset:!0},feedPostUuid:e.feedPostUuid,pageBackgroundColor:e.pageBackgroundColor,source:e.source}):i.createElement(V,{content:r,isThumbnail:!1,feedPostUuid:e.feedPostUuid,source:e.source,showPreviewFacade:"edit"===e.mode&&(0,f.aT)(r)&&r.shouldBlockEditPreview,onUpdatePreviewImage:"edit"===e.mode?U:void 0})),e.dragging&&i.createElement("div",{className:w.c$},i.createElement("div",{className:w.W9})))})(),y?i.createElement(H,{direction:"horizontal",thumbnailType:"wide",contentItems:e.contentItems,onReorderCallback:a,deleteItem:o,selectedIdx:e.selectedIdx,setSelectedIdx:T,pageBackgroundColor:e.pageBackgroundColor,feedPostUuid:e.feedPostUuid,canAddContent:e.contentItems.length<f.e3,isAddingContent:_,setAddingActive:v,isEditing:!0}):null)}},52678:(e,r,n)=>{n.d(r,{K:()=>ea});var i=n(411855),a=n(188507),o=n(140593),s=n(629019),l=n.n(s),c=n(776250),d=n(737947),u=n(358145),m=n(498750),p=n(503457),h=n(915440),_=n(27087),g=n(642822),f=n(355819),E=n(163023),y=n(47506),b=n(881388),v=n(939863),I=n(67294),T=n(975350),S=n(738269),w=n(662275),A=n(569172),C=n(654034),N=n(692630),L=n(355513),O=n(694687),R=n(611978),P=n(860178),D=n(279453),k=n(531827),M=n(103271),F=n(498606),x=n(819117),U=n(237870),B=n(402609),V=n(421422),G=n(727236),H=n(182876),K=n(400333),W=n(474742),$=n(126674),Y=n(679736),z=n(160156),j=n(47026),q=n(339617),Z=n(531398),X=n(385121),J=n(430811),Q=n(70080),ee=n(412141),et=n(40674),er=n(893984),en=n(630834);function ei(){return i.createElement("div",null,(0,v.t)("fig_feed.post_dne"))}let ea=(0,U.Ju)(function(e){let r=(0,a.wA)(),n=(0,O.dq)(),s=(0,R._6)();i.useEffect(()=>{"teamFeed"!==s.view&&"user"!==s.view&&("fullscreen"===s.view&&e.inFileView||r(w.Ce()))},[r,s,e.inFileView]);let l=i.useRef({selectedView:s,inFileView:e.inFileView});i.useEffect(()=>{l.current={selectedView:s,inFileView:e.inFileView}},[e.inFileView,s]),i.useEffect(()=>()=>{l.current.inFileView||"teamFeed"!==l.current.selectedView.view||r(S.$T({...l.current.selectedView,postUuid:void 0}))},[r]);let p=i.useRef(!1),g=i.useCallback(r=>{p.current||!r||e.autofocusCommentInput||(r.focus(),p.current=!0)},[e.autofocusCommentInput]),f=(0,u.ZC)(e.postUuid);i.useEffect(()=>{n&&(e.inFileView||f===e.postUuid||"teamFeed"!==s.view||(p.current=!1,d.Ay.replace((0,$.Kc)(n,{uuid:e.postUuid}))))},[f,e.postUuid,n,e.inFileView,s]);let E=(0,h.Rs)(D.FHz,{publicUuid:e.postUuid});i.useEffect(()=>{!e.inFileView&&E.data?.feedPost?.title&&(0,L.hL)(E.data.feedPost.title)},[e.inFileView,E.data]),i.useEffect(()=>((0,c.sx)("Team Feed Post Details View Visited",{postUuid:e.postUuid}),()=>{(0,c.sx)("Team Feed Post Closed",{postUuid:e.postUuid})}),[e.postUuid]),i.useEffect(()=>{_.Ay.post(`/api/feed_posts/${e.postUuid}/mark_viewed`)},[e.postUuid]);let[I,T]=i.useState(0);i.useEffect(()=>{T(e.selectedContentIdx||0)},[e.postUuid,e.selectedContentIdx]);let A=i.useMemo(()=>E.data?.feedPost?E.data.feedPost.content.map(e=>JSON.parse(e)):[],[E.data]),C=A.length,{requestToOpenPostByFeedIdx:N}=e,P=i.useCallback(r=>{r.keyCode===m.Uz.LEFT_ARROW?0===I?N&&void 0!==e.feedIdx&&N(e.feedIdx-1):T(I-1):r.keyCode===m.Uz.RIGHT_ARROW&&(I===C-1?N&&void 0!==e.feedIdx&&N(e.feedIdx+1):T(I+1))},[I,C,N,e.feedIdx]),[k,F]=i.useState(!0),x=i.useCallback(()=>F(e=>!e),[]),[U,H]=i.useState(!1);i.useEffect(()=>{!U&&"loaded"===E.status&&A[I]&&(0,M.Dr)(A[I])&&((0,y.YQ)({id:V.X}),H(!0))},[E.status,U,A,I]);let K=E.data?.feedPost||e.initialPreloadedPost;if(!K)switch(E.status){case"errors":return i.createElement(ei,null);case"loading":case"disabled":return i.createElement(W.aF,{className:Q.ZA,size:"any"});case"loaded":return r(b.s.error((0,v.t)("fig_feed.post_dne"))),r(w.Ce()),null;default:(0,o.xb)(E)}return i.createElement(i.Fragment,null,i.createElement(W.aF,{className:Q.ZA,size:"any"},i.createElement("div",{className:Q.Zp,role:"listbox",tabIndex:0,onKeyDown:P,ref:g},i.createElement("div",{className:Q.kL,"data-onboarding-key":G.O},i.createElement("div",{className:k?Q.hQ:Q.MZ},i.createElement(z.xT,{contentItems:A,staticContent:!1,selectedContentIdx:I,setSelectedContentIdx:r=>{T(r),e.onSetSelectedContentIdx?.(r)},pageBackgroundColor:K.backgroundColor??void 0,feedPostUuid:e.postUuid,source:$.Zp.DETAIL_MODAL})),i.createElement(eo,{feedPost:K,contentItems:A,autofocusCommentInput:!!e.autofocusCommentInput,inFileView:e.inFileView,onSidebarToggle:x,show:k})))),i.createElement(B.p,null,i.createElement(G.b,null)))},N.E,U.ZU.YES);function eo(e){let r=(0,a.wA)(),n=(0,P.iZ)(),o=(0,O.dq)(),s=i.useCallback(()=>{r(w.Ce())},[r]),{fileData:l,fileIcon:c,fileLoaded:d,openFile:u}=(0,$.rS)(e.feedPost.publicUuid,e.contentItems,e.feedPost.fileKey),m=i.useCallback(()=>{let n=e.inFileView&&e.feedPost.fileKey||void 0;r((0,w.to)({type:(0,Y.t1)(),data:{preloadedFeedPost:e.feedPost,entryPoint:e.inFileView?Y.M2.FILE:Y.M2.FEED,lockedFileKey:n}}))},[r,e.feedPost,e.inFileView]),p=(0,$.DG)(e.feedPost.publicUuid,$.dy.DETAIL);if(!o||!n)return null;let h=i.createElement(i.Fragment,null,i.createElement("div",{className:Q.Si},i.createElement(J.Wu,{feedPost:e.feedPost,source:$.Zp.DETAIL_MODAL,onEditClick:m})),i.createElement("button",{onClick:p,"data-tooltip-type":F.Ib.TEXT,"data-tooltip":(0,v.t)("fig_feed.copy_link_to_post")},i.createElement(E.B,{svg:er.A,className:Q.Gp})),i.createElement("button",{onClick:e.onSidebarToggle},i.createElement(E.B,{svg:et.A,className:Q.Gp})),i.createElement("button",{onClick:s},i.createElement(E.B,{svg:en.default,className:Q.Nk})));if(!e.show)return i.createElement("div",{className:Q.SY},h);let _=i.createElement("div",{className:Q.N1},i.createElement("div",{className:Q.qd},(0,v.tx)("fig_feed.details")),i.createElement("div",{className:Q.IE,"data-testid":"feed-modal-open-file"},h)),f=i.createElement("div",{className:Q.op},i.createElement("div",{className:Q.mY},i.createElement(q.B,{user:e.feedPost.creator,date:e.feedPost.createdAt,size:I.Pf.MEDIUM,shortDate:!1})),i.createElement(el,{feedPost:e.feedPost,currentOrgId:o,currentUser:n}),d&&!e.inFileView&&i.createElement("button",{className:Q.XE,onClick:e.inFileView?void 0:u},(0,v.tx)("fig_feed.from_file",{fileComponent:i.createElement(i.Fragment,null,i.createElement(g.oS,{className:Q.Wv,type:c,size:g.LE.SMALL}),i.createElement("span",{className:Q.q4},l.name))})),i.createElement("div",{className:Q.E_},i.createElement(Z.Q$,{type:Z.Us.FULL,source:Z.zY.DETAIL_POST,postUuid:e.feedPost.publicUuid,postId:e.feedPost.id,feedReactions:e.feedPost.reactions})));return i.createElement("div",{className:Q.HP},_,i.createElement(es,{postInfo:f,comments:e.feedPost.comments,postUuid:e.feedPost.publicUuid,currentUser:n,currentOrgId:o,autofocusCommentInput:e.autofocusCommentInput}))}function es(e){let r=(0,a.wA)(),n=i.useRef(null),o=i.useRef(null),[s,l]=i.useState(!1),c=i.useCallback(r=>{0===r.intersectionRatio&&e.comments.length>0?l(!0):l(!1)},[e.comments.length]);(0,H.g)(o,c,{threshold:[0,1]});let d=i.useCallback(()=>{n.current&&n.current.scrollToBottom()},[]),u=e.comments.sort((e,r)=>e.createdAt.getTime()-r.createdAt.getTime()),[m,h]=i.useState(e.comments.length);i.useEffect(()=>{let r=m<e.comments.length;r&&h(e.comments.length);let n=e.comments[e.comments.length-1];r&&n.user.id===e.currentUser.id&&d()},[m,e.comments,e.currentUser,d]);let[_,g]=i.useState([]),y=(0,a.d4)(e=>e.comments.newComment),b=i.useCallback(()=>{r(A.gX({postUuid:e.postUuid,messageMeta:_,attachmentIds:Object.keys(y.attachments)})),g([]),r(T.$M({resetStatusOnly:!1}))},[r,e.postUuid,_,y]),S=i.useMemo(()=>({library:new k.M8(e.currentOrgId,e.postUuid)}),[e.currentOrgId,e.postUuid]),w=i.useCallback(e=>{r(T.nb({attachmentId:e.id,attachment:e}))},[r]),N=i.useCallback((e,n)=>{r(T.nb({attachmentId:e,attachment:null})),n?n.then(()=>x.J.delete(e)):x.J.delete(e)},[r]);return i.createElement("div",{className:Q.ty},i.createElement(f.P,{innerClassName:Q.qy,useBottomPinning:!0,ref:n},e.postInfo,i.createElement("div",{ref:o,className:Q.Ai},u.map(r=>i.createElement(j.i,{key:r.id,commentId:r.id,commentUuid:r.uuid||"",createdAt:r.createdAt,commentUser:r.user,reactions:r.reactions,messageMeta:(0,C.o8)(r.messageMeta),user:e.currentUser,currentOrgId:e.currentOrgId,mentionables:S,attachments:r.attachments}))),s&&i.createElement("div",{className:Q.cm,onClick:d,role:"button",tabIndex:0},i.createElement(E.B,{svg:ee.A,className:Q.mL}),(0,v.tx)("fig_feed.num_comments",{numComments:u.length}))),i.createElement("div",{className:Q.kG},i.createElement("div",{className:Q.gK},i.createElement(I.H8,{user:e.currentUser,size:I.Pf.MEDIUM})),i.createElement(X.o,{fallback:null,errorFallback:p.H4.NONE,user:e.currentUser,currentOrgId:e.currentOrgId,autofocus:e.autofocusCommentInput,onSubmit:b,hideSubmitButton:!1,mentionables:S,composerContainerClass:Q.DA,editableTypeaheadClass:Q.OX,messageContent:_,updateMessage:g,editingExistingComment:!1,updateAttachment:w,deleteAttachment:N,attachments:Object.values(y.attachments)})))}function el(e){let r=i.useMemo(()=>(0,C.o8)(e.feedPost.descriptionMeta),[e.feedPost.descriptionMeta]);return i.createElement("div",{role:"textbox",tabIndex:0,className:Q.tL},i.createElement("div",{className:Q.pT},e.feedPost.title),i.createElement(K.HH,{messageMeta:r,commentId:e.feedPost.id,className:l()(Q.gG)}))}},339617:(e,r,n)=>{n.d(r,{A:()=>g,B:()=>_});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(210954),c=n(564577),d=n(67294),u=n(738269),m=n(798099),p=n(589640),h=n(681807);function _(e){let r=e.date&&i.createElement(c.h1,{date:e.date,style:e.shortDate?"short":void 0,capitalize:!0,key:"from-now"}),n=[i.createElement("div",{key:"from-now",onMouseDown:e.onTileMouseDown,role:"button",tabIndex:0,className:s()(e.onTileMouseDown&&h.WJ,h.PI)},r)];return i.createElement("div",{className:h.ME},i.createElement(g,{user:e.user,size:e.size,noAvatar:e.noAvatar,noHandle:e.noHandle,appendToHandle:n}))}function g(e){let r=(0,a.wA)(),n=i.useCallback(n=>{n.stopPropagation(),e.user.id&&r(u.$T({view:"user",userId:e.user.id,userViewTab:p.o.INTERNAL_PROFILE_POSTS}))},[r,e.user.id]),o=e.appendToHandle||!1===e.noHandle;return i.createElement("div",{className:h.ME},!e.noAvatar&&i.createElement(l.N,{onClick:n,trusted:!0,onMouseDown:m.dG},i.createElement(d.H8,{user:e.user,size:e.size??d.Pf.LARGE})),o&&i.createElement("div",{className:h.Qs},!e.noHandle&&i.createElement(l.N,{className:h.TK,onClick:n,trusted:!0},i.createElement("div",{className:h.p$},e.user.handle)),e.appendToHandle))}},531398:(e,r,n)=>{n.d(r,{Q$:()=>g,Us:()=>h,nn:()=>f,zY:()=>_});var i=n(411855),a=n(188507),o=n(629019),s=n.n(o),l=n(569172),c=n(318812),d=n(860178),u=n(336174),m=n(884101),p=n(114292),h=(e=>(e[e.FULL=0]="FULL",e[e.ADD_ONLY=1]="ADD_ONLY",e))(h||{}),_=(e=>(e[e.TILE_CONTENT=0]="TILE_CONTENT",e[e.TILE_POST=1]="TILE_POST",e[e.DETAIL_POST=2]="DETAIL_POST",e[e.DETAIL_COMMENT_NO_REACTION=3]="DETAIL_COMMENT_NO_REACTION",e[e.DETAIL_COMMENT_WITH_REACTION=4]="DETAIL_COMMENT_WITH_REACTION",e[e.FILE_POPOVER=5]="FILE_POPOVER",e))(_||{});function g(e){let r=(0,a.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=i.useCallback(({emoji:n,addOnly:i})=>{let a=o(n);a?i||r(l.Oy({feedPostUuid:e.postUuid,emoji:n,reactionId:a})):r(l.EF({feedPostUuid:e.postUuid,feedPostId:e.postId,emoji:n}))},[r,o,e.postUuid,e.postId]);return i.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"post",id:e.postUuid},feedReactions:e.feedReactions})}function f(e){let r=(0,a.wA)(),n=(0,d.iZ)(),{existingReactionIdForCurrentUser:o}=b(e.feedReactions,n),s=i.useCallback(({emoji:n,addOnly:i})=>{let a=o(n);a?i||r(l.t9({commentUuid:e.commentUuid,emoji:n,reactionId:a})):r(l.FJ({commentUuid:e.commentUuid,commentId:e.commentId,emoji:n}))},[r,o,e.commentUuid,e.commentId]);return i.createElement(E,{type:e.type,source:e.source,hideAddReactionButton:e.hideAddReactionButton,prependToList:e.prependToList,toggleReaction:s,feedResource:{type:"comment",id:e.commentUuid},feedReactions:e.feedReactions})}function E(e){let r=(0,d.iZ)(),{toggleReaction:n}=e,{reactionsWithSelected:a}=b(e.feedReactions,r),o=i.useCallback((e,r)=>{r.stopPropagation(),n({emoji:e.emoji,addOnly:!1})},[n]),s=i.useCallback(e=>{n({emoji:e,addOnly:!0})},[n]),l=i.createElement(y,{type:e.type,feedResource:e.feedResource,source:e.source,onAddReaction:s,hideAddReactionButton:e.hideAddReactionButton});return 1===e.type?l:i.createElement("div",{className:p.KD},i.createElement(m.Kb,{reactions:a,collapseOverflow:!1,onClickExisting:o,prependToList:e.prependToList},l))}function y(e){let r=i.useRef(null),{isReactionPickerVisible:n,toggleReactionPicker:a,emojiPicker:o}=I(e.feedResource,e.source,r,e.onAddReaction);return e.hideAddReactionButton&&!n?i.createElement("div",{className:p.$S}):i.createElement(i.Fragment,null,i.createElement("div",{ref:r,className:s()(1===e.type?p.D5:p.HL)},i.createElement(m.ny,{onClick:a,selected:n,styleClassName:p.$S,selectedStyleClassName:p.Qi})),n&&o)}let b=(e,r)=>{let n=i.useMemo(()=>{let n={};if(!r)return n;for(let i of e)i.user.id===r.id&&(n[i.emoji]=i.id);return n},[e,r]),a=i.useCallback(e=>n[e],[n]);return{reactionsWithSelected:i.useMemo(()=>{let r={};for(let n of e){let{emoji:e,user:i,createdAt:o}=n;r[e]||(r[e]={emoji:e,users:[],selected:!!a(e),createdAt:o.getTime(),skinTonesToUsers:{}}),r[e].createdAt=Math.min(r[e].createdAt,o.getTime()),r[e].users.push({handle:i.handle,id:i.id,img_url:i.imgUrl})}return Object.values(r).sort((e,r)=>e.createdAt-r.createdAt||e.emoji.localeCompare(r.emoji))},[e,a]),existingReactionIdForCurrentUser:a}},v=(e,r)=>`FEED_TILE_EMOJI_PICKER-${e}${r?`-${r}`:null}`,I=(e,r,n,a)=>{let o=(0,c.BK)(v(r,e?.id)),s=i.useCallback(e=>{a(e.shortcodes),o.hide()},[o,a]),l=n.current&&i.createElement(u._,{onInsert:s,onCancel:o.hide,targetRect:n.current.getBoundingClientRect()});return{isReactionPickerVisible:o.showing,toggleReactionPicker:o.toggle,emojiPicker:l}}},322615:(e,r,n)=>{n.d(r,{e:()=>w});var i=n(411855),a=n(188507),o=n(187134),s=n(629019),l=n.n(s),c=n(961747),d=n(860601),u=n(153234),m=n(715981),p=n(939863),h=n(226055),_=n(318812),g=n(498606),f=n(259494),E=n(467594),y=n(227795),b=n(289566),v=n(349307),I=n(179544),T=n(98285),S=n(539954);function w({recordingKey:e,currentZoom:r,Dropdown:n,...s}){let w=(0,a.wA)(),A=i.useRef(null),C=(0,_.BK)(s.dropdownId),[N,L]=i.useState(null),O=(0,h.GS)(),R=i.useCallback(()=>{L(A?.current?.getBoundingClientRect()||null)},[A]);i.useEffect(()=>(R(),c._.addListener(R),window.addEventListener("resize",R),()=>{c._.removeListener(R),window.removeEventListener("resize",R)}),[R]);let P=i.useCallback(()=>{R(),C.toggle({hasOwnEscKeyHandler:!1})},[C,R]),D=u.rf(u.Pt(e,"zoomButton"),"click",P),k=C.showing&&N&&i.createElement(n,{targetRect:N,showingZoomDropdown:C.showing,toggleZoomMenu:C.toggle,recordingKey:e}),M=!("canZoomIn"in s)||s.canZoomIn,F=!("canZoomOut"in s)||s.canZoomOut,x="onZoomIn"in s?s.onZoomIn:d.lQ,U="onZoomOut"in s?s.onZoomOut:d.lQ;return i.createElement("div",{className:b.sH},i.createElement(o.o,{eventListeners:["onClick"]},i.createElement(y.K0,{recordingKey:u.Pt(e,"zoomOutButton"),className:l()({[b.QO]:!0,[b.Sn]:F}),svg:v.A,fallbackSvg:I.A,disabled:!F,onClick:U,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-out"}),i.createElement(m.L,{ariaLabel:(0,p.t)("fullscreen.zoom_menu.zoom_view_options"),onClick:D,selected:C.showing,className:l()(b.LY,C.showing&&b.vu),onboardingKey:f.q,"data-tooltip-type":g.Ib.TEXT,"data-tooltip":(0,p.t)("fullscreen.zoom_menu.zoom_view_options")},i.createElement("div",{className:b.cm,"data-testid":"zoom-amount",ref:A},function(){let e=Math.round(r);return O?e.toString().length<5?`${e}%`:`${e}`:`${e}%`}()),i.createElement("div",{className:b.FH,ref:A},i.createElement(E.c,{dispatch:w,dropdownKey:"zoom-input-dropdown",showingDropdown:C.showing,dataTestId:"zoom-menu-chevron",className:C.showing?b.r4:b.Dn,svgContainerClassName:b.r2,toggleOnClick:!0}))),k,i.createElement(y.K0,{recordingKey:u.Pt(e,"zoomInButton"),className:l()({[b.sy]:!0,[b.Sn]:M}),svg:T.A,fallbackSvg:S.A,disabled:!M,onClick:x,"data-tooltip-type":g.Ib.LOOKUP,"data-tooltip":"zoom-in"})))}},430811:(e,r,n)=>{n.d(r,{Wu:()=>b});var i=n(411855),a=n(188507),o=n(776250),s=n(27087),l=n(268537),c=n(939863),d=n(662275),u=n(569172),m=n(963067),p=n(860178),h=n(237870),_=n(474742),g=n(665061);let f=(0,h.Ju)(function(e){let r=(0,c.tx)("fig_feed.delete_confirmation");return e.numComments&&e.numReactions?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments_and_reactions",{numCommentsAndReactions:e.numComments+e.numReactions}):e.numComments?r=(0,c.tx)("fig_feed.delete_confirmation_with_comments",{numComments:e.numComments}):e.numReactions&&(r=(0,c.tx)("fig_feed.delete_confirmation_with_reactions",{numReactions:e.numReactions})),i.createElement(_.Rw,{destructive:!0,confirmationTitle:(0,c.tx)("fig_feed.delete_post"),confirmText:(0,c.tx)("fig_feed.delete"),onConfirm:e.onConfirm,popStack:!0},i.createElement("p",null,r))},"PostConfirmDeleteModal");var E=(e=>(e.USER="user_post_context_menu",e.SYSTEM="system_post_context_menu",e))(E||{});let y=e=>{let r=(0,p.iZ)(),n=(0,m.Yo)(),i=(r&&r.id===e.creator.id)??!1;return{canDelete:i,canAdminDelete:n?.isAdmin??!1,canEdit:i}};function b(e){let r=(0,a.wA)(),n=i.useCallback(()=>r(u.Y9()),[r]),{onEditClick:m,feedPost:p}=e,{canDelete:h,canAdminDelete:_,canEdit:E}=y(p),b=p.comments.length,I=p.reactions.length,T=i.useCallback(()=>{r((0,d.AS)()),s.Ay.del(`/api/feed_posts/post_uuid/${p.publicUuid}`).then(()=>{(0,o.sx)("Team Feed Post Deleted",{postUuid:p.publicUuid}),n()})},[r,p.publicUuid,n]),S=i.useCallback(()=>{r((0,d.to)({type:f,data:{onConfirm:T,numComments:b,numReactions:I},showModalsBeneath:!0}))},[r,T,b,I]);if(!h&&!_)return null;let w=h?(0,c.tx)("fig_feed.delete_ellipsis"):(0,c.tx)("fig_feed.delete_admin_ellipsis"),A=[!!E&&!!m&&i.createElement(l.c$,{key:"edit",onClick:m},(0,c.tx)("fig_feed.edit")),(!!h||!!_)&&i.createElement(l.c$,{key:"delete",onClick:S},w)];return i.createElement(g.V,{dropdownId:v("user_post_context_menu",e.feedPost.publicUuid,e.source),options:A,hideTarget:e.hideTarget,lean:"left",maxWidth:120})}let v=(e,r,n)=>e+r+n},694443:(e,r,n)=>{n.d(r,{n:()=>s});var i=n(411855),a=n(928491),o=n(134279);function s({team:e,size:r=o.P.MEDIUM,shape:n="SQUARE",fallbackDisplay:s=o.U.FIRST_CHARACTER,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u}){return i.createElement(a.w7,{entity:e,size:r,hideFallbackInitial:s===o.U.HIDDEN,shape:n,avatarSvg:l,fallbackSvg:c,svgSizeRatio:d,opacity:u})}},865618:(e,r,n)=>{n.d(r,{S:()=>i.S});var i=n(218108)},583765:(e,r,n)=>{n.d(r,{Ac:()=>j,D2:()=>ea,bJ:()=>F,dO:()=>ee});var i=n(268853),a=n(922827),o=n(38329),s=n(966712),l=n(716034),c=n(776621),d=n(825871),u=n(782112),m=n(931828),p=n(74930),h=n(178323),_=n(378260),g=n(582947),f=n(106757),E=n(335682),y=n(940596),b=n(529928),v=n(888699),I=n(794321),T=n(258751),S=n(787523),w=n(912152),A=n(435898),C=n(350042),N=n(315944),L=n(430933),O=n(211519),R=n(342824),P=(e=>(e.NONE="none",e.TOP_BAR="top-bar",e.NEW_FILE="new-file",e))(P||{});let D="used_figjam_ai_generate",k="used_figjam_ai_generate_modal_v2",M=(0,l.eU)(!1),F=(0,l.eU)(null,(e,r)=>{r(M,!0),r(q,void 0)}),x=(0,l.eU)(null,(e,r)=>{r(H),r(M,!1)}),U=(0,l.eU)(!1),B=(0,l.eU)(null,(e,r)=>{r(H),r(U,!0)}),V=(0,b.bt)(()=>(0,A.Uy)()&&!(0,s.kc)().figjam_generate_handbrake&&!(0,u.y8)(!0)),G=(0,l.eU)(e=>e(V)?e(M)?"top-bar":(e(T.P)===S.iH.TRUE||e(Y))&&!e(U)&&e(v.l5)===I.fD.NONE?"new-file":"none":"none"),H=(0,l.eU)(null,(e,r)=>{r(W),r(Y,!1),r(q,void 0)});(0,l.eU)(null,(e,r)=>{let n=e(G);"top-bar"===n?r(x):"new-file"===n&&r(B)});let K=(0,l.eU)(null,(e,r)=>{e(en).abort(),r(en,new AbortController),r(ee,{status:N.c.NONE})});(0,l.eU)(null,(e,r)=>{r(H),r(U,!1),r(M,!1)});let W=(0,l.eU)(null,(e,r)=>{r(K),r(z,A.Nb.ENTRY),r(X,void 0),r(J,(0,O.Xi)()),r(Q,a.VIy.BASIC)});(0,l.eU)(null,(e,r)=>{r(z,A.Nb.PROMPT_BUILDER)}),(0,y.Wh)(()=>(0,l.eU)(!1));let $=(0,l.eU)(A.Nb.ENTRY),Y=(0,l.eU)(!1),z=(0,l.eU)(null,(e,r,n)=>{n===A.Nb.PROMPT_BUILDER&&r(Y,!0),r($,n)});(0,l.eU)(e=>e($));let j=(0,l.eU)(""),q=(0,l.eU)(void 0),Z=(0,l.eU)(""),X=(0,l.eU)(void 0),J=(0,l.eU)((0,O.Xi)()),Q=(0,l.eU)(a.VIy.BASIC),ee=(0,l.eU)({status:N.c.NONE}),et=(0,l.eU)(null),er=(0,y.Wh)(()=>(0,l.eU)(!1));(0,l.eU)(null,(e,r,n)=>{r(er,n)});let en=(0,l.eU)(new AbortController),ei=(0,l.eU)(null,async(e,r,{fileKey:n,prompt:a,stage:l,useCaseCategory:u,useCase:y,subtitle:b,entrypoint:v,jumpToNewLine:I,fromGenerateModalV2:T,pageNodeId:S})=>{let P;if(null===n&&(0,c.$D)(i.e.AI_PRODUCTIVITY,Error("No file key provided for FigJam AI Generate request")),!a)return{status:N.c.NONE};r(C.Mg,e=>e+1),e((0,g.r1)(D)).data||o.D.dispatch(m.b({[D]:!0}));let M=e((0,g.r1)(k)).data;T&&!M&&o.D.dispatch(m.b({[k]:!0})),r(K);let F=e(en).signal,x={orgId:e(_._s),teamId:e(E.As)||null,fileKey:n,userId:e(f.kS)||null,trackingSessionId:(0,d.f)()};r(ee,{status:N.c.LOADING}),r(X,u),r(z,A.Nb.PROMPT_BUILDER),r(et,S);let U="board";try{globalThis.AI_DEBUG_XML&&(0,s.kc)().figjam_text_to_template_debug?U="board":(U=await (0,w.P)({prompt:a,signal:F,authInfo:x})||"board",(0,s.kc)().figjam_text_to_visual_timeline||"timeline"!==U||(U="gantt"),(0,A.$B)()||"mindmap"!==U||(U="board"))}catch(o){let e=(0,R.E$)(o,R.ez.GENERATE);return P={status:N.c.ERROR,type:U,errorMessage:e.message,trace:o.trace},(0,C.h5)(n,0,1,a,"inappropriate",l,v,u,y,b),(0,C.fK)(n,e.message),e.reportToSentry&&(0,c.$D)(i.e.AI_PRODUCTIVITY,o),r(ee,P),P}u&&(u===A.es.FLOW_CHART?U="diagram":u===A.es.GANTT_CHART?U="gantt":u===A.es.ORG_CHART&&(U="orgchart"));let B=e(Z),V=B&&a.includes(B)?B:void 0;r(Z,""),(0,C.h5)(n,0,1,a,U,l,v,u,y,b,V);try{P=await (0,p.B)(()=>e(C.LX)||"null",n,h.T.AI,async()=>{let r;if("board"===U){let i=I||null,o=e(_._s);r=await (0,L.L)({prompt:a,signal:F,fileKey:n,authInfo:x,shouldJumpToNewLine:i,orgId:o})}else{let r=e(Q),n=e(J),i=U;await (0,O.$D)({prompt:a,signal:F,visualType:i,authInfo:x,ganttColor:n,ganttType:r})}let i=e(C.LX);return(0,C.lx)(n,0,a,U,i),{status:N.c.SUCCESS,type:U,trace:r}})}catch(e){if(e?.name==="AbortError")P={status:N.c.NONE};else{let r=(0,R.E$)(e,R.ez.GENERATE);P={status:N.c.ERROR,type:U,errorMessage:r.message,trace:e.trace},r.reportToSentry&&(0,c.$D)(i.e.AI_PRODUCTIVITY,e),(0,C.fK)(n,r.message)}}return r(ee,P),P});(0,l.eU)(null,(e,r,{prompt:n,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,jumpToNewLine:u,fromGenerateModalV2:m,pageNodeId:p})=>{let h=e(E.ze);if(null===h||0===h.length){(0,c.$D)(i.e.AI_PRODUCTIVITY,Error("No file key found for loaded file to use for FigJam AI Generate request"));return}r(ei,{fileKey:h,prompt:n,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:d,jumpToNewLine:u,fromGenerateModalV2:m,pageNodeId:p})});let ea=(0,l.eU)(null,(e,r,{fileKey:n,prompt:i,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,jumpToNewLine:d,fromGenerateModalV2:u,pageNodeId:m})=>{r(ei,{fileKey:n,prompt:i,stage:a,useCaseCategory:o,useCase:s,subtitle:l,entrypoint:c,jumpToNewLine:d,fromGenerateModalV2:u,pageNodeId:m})})},391993:(e,r,n)=>{n.d(r,{$t:()=>_,HZ:()=>g}),n(411855),n(188507),n(520887);var i=n(38329),a=n(966712),o=n(418956);n(877723);var s=n(782112),l=n(119198),c=n(974105);n(177505);var d=n(335682),u=n(99506),m=n(984968),p=n(945020);n(362369);var h=n(463660);function _({dispatch:e,pageGuids:r,fileKey:n,source:a}){let s=o.zl.get(d.ze),_=o.zl.get(m.Me),g=i.D.getState();!function({figjamData:e,newFileState:r,dispatch:n,currentTeam:i,source:a,checkIsViewer:o}){f({checkIsViewer:o})&&(localStorage.setItem(h.Mu,JSON.stringify(e)),n(l.zE({state:r,from:a,editorType:u._Y.SLIDES,team:i,openNewFileIn:p.ai.NEW_TAB,slidesAiNewFileData:{source:a}})))}({figjamData:{figjamFileKey:n||s,pageGuids:r},newFileState:(0,c.Kl)(g),dispatch:e,currentTeam:_,source:a,checkIsViewer:!1})}function g(){return f({checkIsViewer:!1})}function f({checkIsViewer:e}){if(!(0,a.kc)().piper_present_summary||(0,s.y8)(e))return!1;if(!e){let e=o.zl.get(d.yV),r=!o.zl.get(m.Me)?.starter_team&&e?.viewerExportRestricted;if(e&&!e.canEditCanvas&&r)return!1}return!0}n(230646)},435898:(e,r,n)=>{n.d(r,{Zj:()=>d,Nb:()=>o,i_:()=>u,Dl:()=>m,es:()=>l,$B:()=>_,Uy:()=>h}),n(411855),n(561546);var i=n(966712);n(939863);var a=(e=>(e.NEVER="never",e.ONCE="once",e.MORETHANEONCE="morethanonce",e))(a||{}),o=(e=>(e[e.ENTRY=0]="ENTRY",e[e.PROMPT_BUILDER=1]="PROMPT_BUILDER",e))(o||{}),s=(e=>(e.MEETING="meeting",e.GANTT_CHART="gantt_chart",e.BRAINSTORM="brainstorm",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.PLAN="plan",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(s||{}),l=(e=>(e.WEEKLY_SYNC="weekly_sync",e.PLAN="plan",e.BRAINSTORM="brainstorm",e.TEAM_RETRO="team_retro",e.ONEONONE="1:1",e.GANTT_CHART="gantt_chart",e.FLOW_CHART="flow_chart",e.ORG_CHART="org_chart",e.MIND_MAP="mind_map",e.TIMELINE="timeline",e))(l||{}),c=(e=>(e.IN_EDITOR="in_editor",e.TEMPLATE_SHELF="template_shelf",e.COMMUNITY="community",e.ONBOARDING_MODAL="onboarding_modal",e))(c||{}),d=(e=>(e.GENERATE_MODE="generate_stage",e.REFINEMENT_MODE="refinement_stage",e))(d||{});let u="figjam_ai_diagram",m="figjam_ai_template";var p=(e=>(e.TEMPLATE="template",e.VISUAL="visual",e))(p||{});function h(){return!!(0,i.kc)().figjam_text_to_visual}function _(){return!!(0,i.kc)().figjam_text_to_visual_mindmap}},211041:(e,r,n)=>{n.d(r,{OU:()=>s,RA:()=>o}),n(966712),n(563706);var i=n(825871);n(782112),n(694687);var a=n(285334);let o=new Set([a.Ph,a.T0]);function s(e){let r=e.openFile,n=r?r.teamId:null;return{teamId:n,orgId:e.currentUserOrgId,fileKey:r?r.key:null,userId:e.user?.id||null,trackingSessionId:(0,i.f)()}}},350042:(e,r,n)=>{n.d(r,{F9:()=>m,LX:()=>_,Mg:()=>g,fK:()=>h,h5:()=>u,lx:()=>p});var i=n(776250),a=n(418956),o=n(716034),s=n(36381),l=(e=>(e.FREEFORM="freeform",e.SUGGESTION="suggestion",e.AUTOCOMPLETE="autocomplete",e))(l||{}),c=(e=>(e.AI_PROMPT_EDITED="ai_prompt_edited",e.AI_PROMPT_BUILDER_OUTPUT_REQUESTED="ai_prompt_builder_output_requested",e.AI_PROMPT_BUILDER_OUTPUT_STREAMING="ai_prompt_builder_output_streaming",e.AI_PROMPT_BUILDER_OUTPUT_CREATED="ai_prompt_builder_output_created",e.AI_PROMPT_REQUEST_ERROR="ai_prompt_request_error",e.AI_PROMPT_SUGGESTIONS_VIEWED="ai_prompt_suggestions_viewed",e))(c||{});let d=e=>"board"===e?"template":"visual";function u(e,r,n,o,l,c,u,m,p,h,_){let f="inappropriate"===l?l:d(l);(0,s.qV)(o).then(s=>{(0,i.sx)("ai_prompt_builder_output_requested",{fileKey:e,variantIndex:r,numVariants:n,promptId:s,outputType:f,oneClickPromptUseCase:p,oneClickPromptUseCaseCategory:m,oneClickPromptUseCaseSubCategory:h,numCharactersInput:o.length,localOutputId:a.zl.get(g),stage:c,uiTriggeredFrom:u,autocompletePromptAddition:_},{forwardToDatadog:!0})})}function m(e,r,n,o,l){(0,s.qV)(n).then(n=>{(0,i.sx)("ai_prompt_builder_output_streaming",{fileKey:e,variantIndex:r,promptId:n,outputType:d(o),cortexRequestId:l,localOutputId:a.zl.get(g)},{forwardToDatadog:!0})})}function p(e,r,n,o,l){(0,s.qV)(n).then(n=>{(0,i.sx)("ai_prompt_builder_output_created",{fileKey:e,variantIndex:r,promptId:n,outputType:d(o),cortexRequestId:l,localOutputId:a.zl.get(g)},{forwardToDatadog:!0})})}function h(e,r){(0,i.sx)("ai_prompt_request_error",{fileKey:e,errorMessage:r},{forwardToDatadog:!0})}let _=(0,o.eU)(null),g=(0,o.eU)(0)},88596:(e,r,n)=>{n.d(r,{Vn:()=>c,mr:()=>s});var i=n(38329),a=n(988022),o=n(974105),s=(e=>(e.REQUEST="ai_summary_requested",e.CREATE="ai_summary_created",e.DELETE="ai_summary_deleted",e.LINK_COPED="ai_summary_link_copied",e.TEXT_COPIED="ai_summary_text_copied",e.TIME_TAKEN_TO_COMPLETE="figjam.summarize.time_taken_to_complete",e))(s||{}),l=(e=>(e.TIME_TAKEN_TO_COMPLETE="figjam.cluster.time_taken_to_complete",e))(l||{});function c(e,r){let n=i.D.getState(),s=o.d1(n)?.key??"";(0,a.ds)(e,s,n,{...r})}},230646:(e,r,n)=>{n(188507),n(211041)},342824:(e,r,n)=>{n.d(r,{E$:()=>d,ez:()=>l}),n(411855),n(188507);var i=n(341582),a=n(885659);n(737947),n(966712);var o=n(939863);n(392592);var s=n(479296),l=(e=>(e.SUMMARIZE="sticky-summarization-error",e.CLUSTER="sticky-cluster-error",e.GENERATE="generate-error",e))(l||{}),c=(e=>(e.Reload="reload",e.Trace="trace",e))(c||{});let d=(0,s.D)((e,r)=>{let n={"sticky-summarization-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_summary.content_length_limit_exceeded_error"),figjam_summarize_out_of_date:(0,o.t)("whiteboard.ai_summary.out_of_date_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_summary.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_summary.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_summary.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"sticky-cluster-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_cluster.rate_limit_exceeded_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_cluster.generic_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_cluster.generic_error"),not_implemented:(0,o.t)("ai.error.not_implemented")},"generate-error":{content_length_limit_exceeded:(0,o.t)("whiteboard.ai_generate.content_length_limit_exceeded_error"),rate_limit_exceeded:(0,o.t)("whiteboard.ai_generate.rate_limit_error"),ai_opt_out_error:(0,o.t)("whiteboard.ai.ai_opt_out_error"),generic:(0,o.t)("whiteboard.ai_generate.unknown_error"),service_issue:(0,o.t)("whiteboard.ai.service_issue_error"),unsafe_or_harmful_content:(0,o.t)("whiteboard.ai.inappropriate_input_error"),offline:(0,o.t)("whiteboard.ai.offline_error"),unauthorized:(0,o.t)("whiteboard.ai_generate.unknown_error"),not_implemented:(0,o.t)("ai.error.not_implemented")}},s="generic",l=!0;if(e instanceof i.CortexErrorV2)i.ClientContentLengthLimitExceededError.isInstance(e)||i.ProviderContentLengthLimitExceededError.isInstance(e)?s="content_length_limit_exceeded":i.OutOfDateFeatureVersionError.isInstance(e)?"figjam_summarize"===e.featureName&&(s="figjam_summarize_out_of_date"):i.ProviderRateLimitExceededError.isInstance(e)||i.CortexRateLimitExceededError.isInstance(e)?s="rate_limit_exceeded":i.ProviderServiceIssueError.isInstance(e)||i.ProviderServiceBusyError.isInstance(e)?s="service_issue":i.OfflineError.isInstance(e)?(s="offline",l=!1):i.UnsafeOrHarmfulPromptError.isInstance(e)||i.ProviderUnsafeOrHarmfulContentError.isInstance(e)?(s="unsafe_or_harmful_content",l=!1):i.UnauthorizedError.isInstance(e)?(s="unauthorized",l=!1):i.NotImplementedError.isInstance(e)?(s="not_implemented",l=!1):i.FigjamVisualParsingError.isInstance(e)?(s="generic",l=!1):e?.statusCode===429?s="rate_limit_exceeded":e?.statusCode===403&&(s="ai_opt_out_error");else if(e instanceof a.G1)switch(e.type){case"content_length_limit_exceeded":s="content_length_limit_exceeded";break;case"figjam_summarize_out_of_date":s="figjam_summarize_out_of_date";break;case"rate_limit_exceeded":s="rate_limit_exceeded";break;case"service_issue":s="service_issue";break;case"offline":s="offline",l=!1;break;case"unsafe_or_harmful_content":case"figjam_generate_moderation_api_unsafe_or_harmful_content":s="unsafe_or_harmful_content",l=!1;break;case"unauthorized":s="unauthorized",l=!1;break;case"figjam_visual_parsing_error":s="generic",l=!1;break;case"generic":if(429===e.data.status){s="rate_limit_exceeded";break}403===e.data.status&&(s="ai_opt_out_error")}let c=n[r],d=c[s]??c.generic;return{type:s,message:d,reportToSentry:l}})},684690:(e,r,n)=>{n.d(r,{Z9:()=>g,iN:()=>E});var i=n(411855);n(188507);var a=n(922827),o=n(568214),s=n(138392);n(358145);var l=n(659302);n(456772);var c=n(752553);n(456363),n(939863),n(392592);var d=n(335682),u=n(279453);n(428467),n(984968);var m=n(694241);n(166748);var p=n(479296);n(161459);var h=n(42173),_=n(225719);let g=(0,p.D)(()=>{let e=(0,d.tS)(),[r]=(0,c.IT)((0,u.nD6)({fileKey:e||""}),{enabled:!!e}),{loadedPaletteVariations:n,loadedColorPalette:a}=function(e){let r=(0,i.useRef)(),{uuid:n,palette:a}=function(e){let r={uuid:m.fJ,palette:void 0},n=e.data?.file;if("loaded"!==e.status||!n)return r;if(n.userColorPaletteOverrideData){let e=n.userColorPaletteOverrideData.colorPaletteUuid;if(e===m.fJ)return r;if(n.userColorPaletteOverrideData.colorPalette)return{uuid:e,palette:n.userColorPaletteOverrideData.colorPalette}}return n.defaultColorPaletteData?.colorPalette?{uuid:n.defaultColorPaletteData.colorPaletteUuid,palette:n.defaultColorPaletteData.colorPalette}:r}(e);r.current=a;let l=a?.baseColors.join(":")||"";return(0,i.useMemo)(()=>{let i,a;let c=r.current;return"loaded"===e.status&&c&&n!==m.fJ&&(i=l.split(":").map(e=>(0,o.tK)(e)).filter(f),a=(0,s.Eg)(i)),{loadedPaletteVariations:a,loadedColorPalette:c}},[n,l,e.status])}(r),p=(0,l.Xr)(_.$R);return((0,i.useEffect)(()=>{p(n)},[n,p]),a&&n)?{type:m.Yv.CUSTOM,variations:n,uuid:a.uuid,name:a.name,isTeamDefault:a.isTeamDefault}:{type:m.Yv.DEFAULT,uuid:m.fJ}});function f(e){return null!==e}function E(e,r){let n=g();return!!e&&(n.type===m.Yv.CUSTOM?0>n.variations[r].findIndex(r=>(0,o.DA)(e,r)):(0,h.zS)(e,r)===a.daH.CUSTOM)}},225719:(e,r,n)=>{n.d(r,{$R:()=>d,Jq:()=>l,Uh:()=>u,db:()=>m,rN:()=>c});var i=n(922827),a=n(520887),o=n(716034),s=n(418956);n(456772),n(939863),n(392592),n(166748);let l=(0,o.eU)(-1),c=(0,o.eU)([]);(0,o.eU)(!1);let d=(0,o.eU)(void 0);function u(e){switch(e){case i.Z6A.STICKY:return["sticky"];case i.Z6A.HIGHLIGHT:return["highlight"];default:return["base","baseLight"]}}function m(){let e=s.zl.get(d);if(!e)return;let r=e.base;if(!r)return;let n=(0,a.NT)().getDirectlySelectedNodes().filter(e=>"STICKY"===e.type||"SHAPE_WITH_TEXT"===e.type||"SECTION"===e.type||"CONNECTOR"===e.type||"VECTOR"===e.type||"HIGHLIGHT"===e.type),i=new Map;n.forEach(e=>{let r=e.fills.length>0?e.fills[0].color:void 0,n=e.strokePaints.data.length>0?e.strokePaints.data[0].color:void 0,a=r||n;a&&(i.has(a)?i.set(a,i.get(a)+1):i.set(a,1))});let o=Array.from(i.entries()).sort((e,r)=>r[1]-e[1]),l=new Map,c=r.sort(()=>Math.random()-.5);o.forEach((e,r)=>{l.set(e[0],c[r%c.length])}),n.forEach(e=>{if(e.fills.length>0){let r=e.fills[0].color,n=r?l.get(r):void 0;n&&(e.fills=[{type:"SOLID",color:n}])}else if(e.strokePaints.data.length>0){let r=e.strokePaints.data[0].color,n=r?l.get(r):void 0;n&&(e.strokePaints={data:[{type:"SOLID",color:n}],blobs:[]})}})}(0,o.eU)(0)},425187:(e,r,n)=>{n.d(r,{f:()=>l});var i=n(922827),a=n(572304),o=n(627472);let s={positionRelativeToSelection:i.cfv.ABOVE,currentlySelectedNode:{nodeId:a.AD,ariaLabel:null}},l=(0,o.um)(s,(e,r)=>{switch(r.type){case"SET_POS_RELATIVE_TO_SELECTION":return{...e,positionRelativeToSelection:r.payload};case"SET_CURRENTLY_SELECTED_NODE":return{...e,currentlySelectedNode:r.payload};default:return e}})},511080:(e,r,n)=>{n.d(r,{AZ:()=>L,ZH:()=>P,cN:()=>O,cs:()=>D,dF:()=>C,lV:()=>N,mS:()=>A,nX:()=>R,oV:()=>w});var i=n(411855),a=n(136880),o=n(922827),s=n(629019),l=n.n(s),c=n(563706),d=n(154254),u=n(428654),m=n(509742),p=(e=>(e[e.DEFAULT=1]="DEFAULT",e[e.INITIAL_DRAG_ON_DLT=2]="INITIAL_DRAG_ON_DLT",e[e.DRAG_ON_CANVAS=3]="DRAG_ON_CANVAS",e[e.DRAG_RETURN_TO_DLT=4]="DRAG_RETURN_TO_DLT",e))(p||{});i.forwardRef(({color:e,toolbarIconScale:r=1,toolOrder:n=1,shouldAnimate:a=!0,stickyAnimationState:o=1},s)=>{let c=4===n,d=4===o,u=16,p=25;r<1&&(c?(u=24,p=32):u=19);let h={[m.Sk]:1===n,[m.gz]:2===n,[m.eB]:3===n,[m.ID]:c};return i.createElement("div",{className:l()({[m.xI]:2===n,[m.t3]:3===n,[m.iD]:c}),style:{width:116*r,height:116*r}},i.createElement("div",{className:l()({...h,[m.ZJ]:!0,[m.B4]:(!a||4===o)&&1===n||3===o&&2===n,[m.i0]:3===o,[m.BE]:d,[m.rh]:!d&&!a&&2===n}),style:{top:u*r,left:p*r,width:104*r,height:104*r},ref:s},i.createElement("div",{className:l()({[m.uh]:!0,[m.WX]:!0})},i.createElement("svg",{className:m.SN,width:104*r,height:104*r,viewBox:"-20 -20 104 104",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("g",null,i.createElement("path",{className:l()(m.Wq,{[m.cq]:!0}),style:{clipPath:`url(#stickyMaskV3-${n})`},d:"M0.459717 0.680176L104.46 0.680243V104.68H0.459717V2.09514V0.680176Z",fill:e}),i.createElement("g",{className:m.BN},i.createElement("mask",{id:`stickyCurlMaskV3-${n}`,style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:84,height:84},i.createElement("path",{d:"M31.9819 3.8766C34.7398 1.38156 38.3262 7.51147e-07 42.0452 2.10768e-06L104 2.47061e-05V104H3.61353e-05L3.37915e-06 39.4677C1.22757e-06 35.2289 1.7934 31.188 4.9367 28.3443L31.9819 3.8766Z",fill:"white"})),i.createElement("g",{mask:`url(#stickyCurlMaskV3-${n})`},i.createElement("path",{d:"M104 6.74129e-05L54.8928 48.5492L0 104V0L104 6.74129e-05Z",fill:e,className:m.cq}),i.createElement("g",{filter:"url(#stickyCurlBlurFilter)"},i.createElement("rect",{x:"-26",y:"50.6831",width:"96.831",height:"16.7797",transform:"rotate(-41.9127 -26 50.6831)",fill:"black",fillOpacity:"0.3"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.526 4.26953L3.2583 29.8513C10.3683 23.4168 26.3782 24.6229 26.3782 24.6229C26.3782 24.6229 25.0586 10.1224 31.526 4.26953Z",fill:e,className:m.cq}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31.5262 4.26953L3.25854 29.8513C10.3686 23.4168 26.3784 24.6229 26.3784 24.6229C26.3784 24.6229 25.0588 10.1224 31.5262 4.26953Z",fill:"url(#paint0_linear_221_5067)"})))),i.createElement("defs",null,i.createElement("clipPath",{id:`stickyMaskV3-${n}`},i.createElement("path",{className:m.cP,d:"M50.9701 6.74129e-05L104.97 0V104H0.970459V46.9909L50.9701 6.74129e-05Z",fill:"#C20000"}),i.createElement("path",{className:m.dP,d:"M32.2236 3.8766C34.9815 1.38156 38.5679 7.51147e-07 42.2869 2.10768e-06L104.242 2.47061e-05V104H0.241735L0.241703 39.4677C0.2417 35.2289 2.0351 31.188 5.1784 28.3443L32.2236 3.8766Z",fill:"#2400FF"}),i.createElement("rect",{x:"250",y:"520",width:"1",height:"1"})),i.createElement("filter",{xmlns:"http://www.w3.org/2000/svg",id:`sticky_shadow-${n}`,x:"0",y:"0",width:"200%",height:"200%",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"1.5"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0"}),i.createElement("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_276_2240"}),i.createElement("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),i.createElement("feOffset",null),i.createElement("feGaussianBlur",{stdDeviation:"4"}),i.createElement("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.17 0"}),i.createElement("feBlend",{mode:"normal",in2:"effect1_dropShadow_276_2240",result:"effect2_dropShadow_276_2240"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect2_dropShadow_276_2240",result:"shape"})),i.createElement("filter",{id:"stickyCurlBlurFilter",x:"-58",y:"-45.9995",width:"147.267",height:"141.169",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB"},i.createElement("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.createElement("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),i.createElement("feGaussianBlur",{stdDeviation:"16",result:"effect1_foregroundBlur_221_5067"})),i.createElement("linearGradient",{id:"paint0_linear_221_5067",x1:"18.1477",y1:"15.5989",x2:"25.7005",y2:"25.3824",gradientUnits:"userSpaceOnUse"},i.createElement("stop",{stopColor:"white",stopOpacity:"0.5"}),i.createElement("stop",{offset:"0.319642",stopColor:"white",stopOpacity:"0.2"}),i.createElement("stop",{offset:"1",stopColor:"white",stopOpacity:"0.2"})))))))});let h="#699BF7",_="#B3B3B3";function g({toolbarIconScale:e,children:r,isBeingDraggedForPlacement:n}){let a=c.Ay.safari&&n;return i.createElement("svg",{fill:"none",height:144*e,width:144*e,viewBox:"0 0 144 144",xmlns:"http://www.w3.org/2000/svg",className:l()({[m.WX]:!a,[m.$d]:!0})},r)}let f=new Map([[o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,104],[o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,128],[o.NLJ.SHAPE_WHITEBOARD_SQUARE,112]]),E=2/38,y=.5/38,b=8/38;function v(e,r){if(r===o.xbm.NONE)return"#000000";let n=u.F.parse(e),i=o.DV9.getShapeWithTextStrokeColor((0,a.oU)(n));return i?u.F.format((0,a.aH)(i)):"#757575"}function I(e,r,n){if(!n)return{};let{styleType:i,isDragging:a}=n,s=function(e){let r=f.get(e);return void 0===r?112:r}(r);return{stroke:v(e,i),strokeWidth:i===o.xbm.NONE?s*y:s*E,strokeOpacity:i===o.xbm.NONE?.2:1,strokeDasharray:i===o.xbm.DASHED?`${s*b} ${s*b}`:"",strokeLinecap:"round",className:d.cx.if(a,d.cx.hidden).$}}function T(e,r){if(!r)return{};let{styleType:n,svgToCanvasScale:i,isDragging:a}=r;return r?{stroke:v(e,n),strokeWidth:function(e,r,n=!1){return n&&(e===o.xbm.SOLID||e===o.xbm.DASHED)?4*r:0}(n,i,a),strokeDasharray:function(e,r,n=!1){return n&&e===o.xbm.DASHED?`${16*r} ${10*r}`:""}(n,i,a),strokeLinecap:"round"}:{}}function S(e){return!!e&&e.styleType===o.xbm.NONE}function w(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"black",fillOpacity:"0.9"}))}function A(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"0.5",y:"0.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"black",fillOpacity:"0.9"}))}function C(){return i.createElement("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24 12C24 13.8382 22.7125 15.3937 21.0234 15.862L21.0844 16.1232L22.2429 21.1436H17.7571L18.5638 17.6477L18.9817 15.862C17.2926 15.3937 16 13.8382 16 12C16 9.79086 17.7909 8 20 8C22.2091 8 24 9.79086 24 12ZM16.6622 16.9936C15.0544 15.9178 14 14.0828 14 12C14 8.68629 16.6863 6 20 6C23.3137 6 26 8.68629 26 12C26 14.0841 24.9465 15.92 23.3383 16.9955L24.3326 21.3042L28.2169 22.1674L29 22.3414V23.1436V28.1436V29.1436H28H12H11V28.1436V23.1436V22.3414L11.7831 22.1674L15.6674 21.3042L16.6622 16.9936ZM27 23.9457L23.3902 23.1436H16.6098L13 23.9457V27.1436H27V23.9457ZM12 34.1436V32.1436H28V34.1436H12Z",fill:"white"}))}function N(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("mask",{id:"path-3-inside-1_1019679_55716",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M33.3576 13.6424L32 11L30.6424 13.6424L28 15L30.6424 16.3576L32 19L33.3576 16.3576L36 15L33.3576 13.6424ZM39.1682 26H41H42V27V38C42 40.2091 40.2091 42 38 42H18C15.7909 42 14 40.2091 14 38V27V26H15H28.1837C28.2225 25.3193 28.3893 24.6345 28.6965 23.9794C29.9863 21.2293 33.2613 20.0454 36.0114 21.3352C37.9039 22.2227 39.0547 24.0503 39.1682 26ZM37.1625 26C37.0532 24.8026 36.3294 23.6933 35.1622 23.146C33.4121 22.3252 31.3281 23.0786 30.5073 24.8287C30.329 25.2088 30.225 25.6047 30.1893 26H37.1625ZM25.8981 19.4218L22.4218 15.828L18.828 19.3044L22.3044 22.8981L25.8981 19.4218ZM23.8593 14.4375L22.4688 13L21.0312 14.3905L17.4375 17.8669L16 19.2574L17.3905 20.6949L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L23.8593 14.4375ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"black",fillOpacity:"0.9"}),i.createElement("path",{d:"M32 11L33.7789 10.086L32 6.6237L30.2211 10.086L32 11ZM33.3576 13.6424L31.5787 14.5564L31.8723 15.1277L32.4436 15.4213L33.3576 13.6424ZM30.6424 13.6424L31.5564 15.4213L32.1277 15.1277L32.4213 14.5564L30.6424 13.6424ZM28 15L27.086 13.2211L23.6237 15L27.086 16.7789L28 15ZM30.6424 16.3576L32.4213 15.4436L32.1277 14.8723L31.5564 14.5787L30.6424 16.3576ZM32 19L30.2211 19.914L32 23.3763L33.7789 19.914L32 19ZM33.3576 16.3576L32.4436 14.5787L31.8723 14.8723L31.5787 15.4436L33.3576 16.3576ZM36 15L36.914 16.7789L40.3763 15L36.914 13.2211L36 15ZM39.1682 26L37.1715 26.1162L37.2812 28H39.1682V26ZM42 26H44V24H42V26ZM14 26V24H12V26H14ZM28.1837 26V28H30.0729L30.1804 26.1138L28.1837 26ZM28.6965 23.9794L26.8858 23.1302V23.1302L28.6965 23.9794ZM36.0114 21.3352L35.1622 23.146V23.146L36.0114 21.3352ZM37.1625 26V28H39.3533L39.1542 25.8183L37.1625 26ZM35.1622 23.146L34.313 24.9567V24.9567L35.1622 23.146ZM30.5073 24.8287L28.6965 23.9794L28.6965 23.9794L30.5073 24.8287ZM30.1893 26L28.1974 25.8203L28.0008 28H30.1893V26ZM22.4218 15.828L23.8593 14.4375L22.4688 13L21.0312 14.3905L22.4218 15.828ZM25.8981 19.4218L27.2887 20.8593L28.7262 19.4688L27.3356 18.0313L25.8981 19.4218ZM18.828 19.3044L17.4375 17.8669L16 19.2574L17.3905 20.6949L18.828 19.3044ZM22.3044 22.8981L20.8669 24.2887L22.2574 25.7262L23.6949 24.3356L22.3044 22.8981ZM22.4688 13L23.9063 11.6095L22.5157 10.172L21.0782 11.5625L22.4688 13ZM23.8593 14.4375L22.4218 15.828L22.4218 15.828L23.8593 14.4375ZM21.0312 14.3905L22.4218 15.828L22.4218 15.828L21.0312 14.3905ZM17.4375 17.8669L16.047 16.4294H16.047L17.4375 17.8669ZM16 19.2574L14.6095 17.8199L13.172 19.2104L14.5625 20.6479L16 19.2574ZM17.3905 20.6949L18.828 19.3044L18.828 19.3044L17.3905 20.6949ZM20.8669 24.2887L22.3044 22.8981H22.3044L20.8669 24.2887ZM22.2574 25.7262L20.8199 27.1167L22.2104 28.5542L23.6479 27.1637L22.2574 25.7262ZM23.6949 24.3356L22.3044 22.8981V22.8981L23.6949 24.3356ZM27.2887 20.8593L28.6792 22.2968V22.2968L27.2887 20.8593ZM28.7262 19.4688L30.1167 20.9063L31.5542 19.5157L30.1637 18.0782L28.7262 19.4688ZM27.3356 18.0313L28.7731 16.6407L28.7731 16.6407L27.3356 18.0313ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM30.2211 11.914L31.5787 14.5564L35.1366 12.7283L33.7789 10.086L30.2211 11.914ZM32.4213 14.5564L33.7789 11.914L30.2211 10.086L28.8634 12.7283L32.4213 14.5564ZM28.914 16.7789L31.5564 15.4213L29.7283 11.8634L27.086 13.2211L28.914 16.7789ZM31.5564 14.5787L28.914 13.2211L27.086 16.7789L29.7283 18.1366L31.5564 14.5787ZM33.7789 18.086L32.4213 15.4436L28.8634 17.2717L30.2211 19.914L33.7789 18.086ZM31.5787 15.4436L30.2211 18.086L33.7789 19.914L35.1366 17.2717L31.5787 15.4436ZM35.086 13.2211L32.4436 14.5787L34.2717 18.1366L36.914 16.7789L35.086 13.2211ZM32.4436 15.4213L35.086 16.7789L36.914 13.2211L34.2717 11.8634L32.4436 15.4213ZM39.1682 28H41V24H39.1682V28ZM41 28H42V24H41V28ZM40 26V27H44V26H40ZM40 27V38H44V27H40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM38 40H18V44H38V40ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM16 38V27H12V38H16ZM16 27V26H12V27H16ZM14 28H15V24H14V28ZM15 28H28.1837V24H15V28ZM30.1804 26.1138C30.2049 25.6836 30.3102 25.2488 30.5073 24.8287L26.8858 23.1302C26.4684 24.0201 26.24 24.955 26.1869 25.8862L30.1804 26.1138ZM30.5073 24.8287C31.3281 23.0786 33.4121 22.3252 35.1622 23.146L36.8607 19.5244C33.1105 17.7657 28.6446 19.38 26.8858 23.1302L30.5073 24.8287ZM35.1622 23.146C36.3641 23.7096 37.099 24.8697 37.1715 26.1162L41.1648 25.8838C41.0104 23.2309 39.4437 20.7359 36.8607 19.5244L35.1622 23.146ZM39.1542 25.8183C38.9831 23.9427 37.8478 22.1964 36.0114 21.3352L34.313 24.9567C34.811 25.1903 35.1234 25.6625 35.1708 26.1817L39.1542 25.8183ZM36.0114 21.3352C33.2613 20.0454 29.9863 21.2293 28.6965 23.9794L32.318 25.6779C32.6698 24.9278 33.563 24.605 34.313 24.9567L36.0114 21.3352ZM28.6965 23.9794C28.4179 24.5735 28.2537 25.1964 28.1974 25.8203L32.1812 26.1797C32.1963 26.013 32.2401 25.8441 32.318 25.6779L28.6965 23.9794ZM30.1893 28H37.1625V24H30.1893V28ZM20.9843 17.2186L24.4606 20.8123L27.3356 18.0313L23.8593 14.4375L20.9843 17.2186ZM20.2186 20.7419L23.8123 17.2655L21.0312 14.3905L17.4375 17.8669L20.2186 20.7419ZM23.7419 21.5076L20.2655 17.9138L17.3905 20.6949L20.8669 24.2887L23.7419 21.5076ZM24.5076 17.9843L20.9138 21.4606L23.6949 24.3356L27.2887 20.8593L24.5076 17.9843ZM21.0312 14.3905L22.4218 15.828L25.2968 13.047L23.9063 11.6095L21.0312 14.3905ZM22.4218 15.828L23.8593 14.4375L21.0782 11.5625L19.6407 12.953L22.4218 15.828ZM18.828 19.3044L22.4218 15.828L19.6407 12.953L16.047 16.4294L18.828 19.3044ZM17.3905 20.6949L18.828 19.3044L16.047 16.4294L14.6095 17.8199L17.3905 20.6949ZM18.828 19.3044L17.4375 17.8669L14.5625 20.6479L15.953 22.0854L18.828 19.3044ZM22.3044 22.8981L18.828 19.3044L15.953 22.0854L19.4294 25.6792L22.3044 22.8981ZM23.6949 24.3356L22.3044 22.8981L19.4294 25.6792L20.8199 27.1167L23.6949 24.3356ZM22.3044 22.8981L20.8669 24.2887L23.6479 27.1637L25.0854 25.7731L22.3044 22.8981ZM25.8981 19.4218L22.3044 22.8981L25.0854 25.7731L28.6792 22.2968L25.8981 19.4218ZM27.3356 18.0313L25.8981 19.4218L28.6792 22.2968L30.1167 20.9063L27.3356 18.0313ZM25.8981 19.4218L27.2887 20.8593L30.1637 18.0782L28.7731 16.6407L25.8981 19.4218ZM22.4218 15.828L25.8981 19.4218L28.7731 16.6407L25.2968 13.047L22.4218 15.828ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-3-inside-1_1019679_55716)"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}))}function L(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{d:"M11.5269 4L22.3945 9.08856L17.306 19.9562L6.4383 14.8677L11.5269 4Z",fill:"#FF8577"}),i.createElement("path",{d:"M51.3739 20.2821C49.7324 23.7823 45.5642 25.2891 42.064 23.6475C38.5639 22.006 37.0571 17.8378 38.6986 14.3376C40.3402 10.8375 44.5084 9.33072 48.0085 10.9723C51.5087 12.6138 53.0155 16.782 51.3739 20.2821Z",fill:"#C7B9FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.377 23.8507L25.8165 22.6624L27.3151 27.0003H28.4367L30.6793 20.0203L27.2397 21.2085L25.16 15.1885L22.377 23.8507Z",fill:"#FFC700"}),i.createElement("mask",{id:"path-6-inside-1_1019679_55739",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M38.0275 4.97265L36.5002 2L34.9728 4.97265L32.0002 6.5L34.9728 8.02735L36.5002 11L38.0275 8.02735L41.0002 6.5L38.0275 4.97265ZM33.3487 11.6515L32.5002 10L31.6517 11.6515L30.0002 12.5L31.6517 13.3485L32.5002 15L33.3487 13.3485L35.0002 12.5L33.3487 11.6515ZM19.7353 10.0517L12.4902 6.65937L9.09785 13.9045L16.343 17.2969L19.7353 10.0517ZM11.527 4L6.43848 14.8677L17.3062 19.9562L22.3947 9.08856L11.527 4ZM49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329ZM51.3741 20.2821C49.7326 23.7823 45.5644 25.2891 42.0642 23.6475C38.564 22.006 37.0573 17.8378 38.6988 14.3376C40.3404 10.8375 44.5085 9.33072 48.0087 10.9723C51.5089 12.6138 53.0156 16.782 51.3741 20.2821ZM25.1601 15.1882L22.377 23.8504L25.8166 22.6621L26.9697 26H28.758L30.6794 20.02L27.2398 21.2082L25.1601 15.1882ZM30.8587 26L32.5835 20.6318C32.8152 19.9105 32.6196 19.1203 32.0781 18.5905C31.5367 18.0607 30.7423 17.8823 30.0263 18.1296L28.4771 18.6648L27.0505 14.5352C26.7694 13.7215 25.9992 13.179 25.1384 13.1883C24.2776 13.1977 23.5193 13.7568 23.256 14.5764L20.4729 23.2386C20.2412 23.9598 20.4368 24.7501 20.9783 25.2799C21.5197 25.8097 22.3141 25.9881 23.0301 25.7408L24.5793 25.2056L24.8537 26H15H14V27V38C14 40.2091 15.7909 42 18 42H38C40.2091 42 42 40.2091 42 38V27V26H41H30.8587ZM16 38V28H40V38C40 39.1046 39.1046 40 38 40H18C16.8954 40 16 39.1046 16 38Z",fill:"white"}),i.createElement("path",{d:"M36.5002 2L38.2791 1.08599L36.5002 -2.3763L34.7213 1.08599L36.5002 2ZM38.0275 4.97265L36.2486 5.88666L36.5422 6.45801L37.1135 6.75158L38.0275 4.97265ZM34.9728 4.97265L35.8868 6.75158L36.4582 6.45801L36.7518 5.88666L34.9728 4.97265ZM32.0002 6.5L31.0862 4.72107L27.6239 6.5L31.0862 8.27893L32.0002 6.5ZM34.9728 8.02735L36.7518 7.11334L36.4582 6.54199L35.8868 6.24842L34.9728 8.02735ZM36.5002 11L34.7213 11.914L36.5002 15.3763L38.2791 11.914L36.5002 11ZM38.0275 8.02735L37.1135 6.24842L36.5422 6.54199L36.2486 7.11334L38.0275 8.02735ZM41.0002 6.5L41.9142 8.27893L45.3765 6.5L41.9142 4.72107L41.0002 6.5ZM32.5002 10L34.2791 9.08599L32.5002 5.6237L30.7213 9.08599L32.5002 10ZM33.3487 11.6515L31.5698 12.5655L31.8633 13.1368L32.4347 13.4304L33.3487 11.6515ZM31.6517 11.6515L32.5657 13.4304L33.137 13.1368L33.4306 12.5655L31.6517 11.6515ZM30.0002 12.5L29.0862 10.7211L25.6239 12.5L29.0862 14.2789L30.0002 12.5ZM31.6517 13.3485L33.4306 12.4345L33.137 11.8632L32.5657 11.5696L31.6517 13.3485ZM32.5002 15L30.7213 15.914L32.5002 19.3763L34.2791 15.914L32.5002 15ZM33.3487 13.3485L32.4347 11.5696L31.8633 11.8632L31.5698 12.4345L33.3487 13.3485ZM35.0002 12.5L35.9142 14.2789L39.3765 12.5L35.9142 10.7211L35.0002 12.5ZM12.4902 6.65937L13.3383 4.84809L11.527 4L10.6789 5.81128L12.4902 6.65937ZM19.7353 10.0517L21.5466 10.8998L22.3947 9.08856L20.5834 8.24047L19.7353 10.0517ZM9.09785 13.9045L7.28657 13.0564L6.43848 14.8677L8.24976 15.7158L9.09785 13.9045ZM16.343 17.2969L15.4949 19.1082L17.3062 19.9562L18.1543 18.145L16.343 17.2969ZM6.43848 14.8677L4.6272 14.0196L3.7791 15.8309L5.59038 16.679L6.43848 14.8677ZM11.527 4L12.3751 2.18872L10.5638 1.34063L9.71575 3.15191L11.527 4ZM17.3062 19.9562L16.4581 21.7675L18.2693 22.6156L19.1174 20.8043L17.3062 19.9562ZM22.3947 9.08856L24.206 9.93665L25.0541 8.12537L23.2428 7.27728L22.3947 9.08856ZM42.9134 21.8368L43.7626 20.026L42.9134 21.8368ZM49.5634 19.4329L47.7526 18.5837L49.5634 19.4329ZM40.5096 15.1869L38.6988 14.3376V14.3376L40.5096 15.1869ZM47.1595 12.783L48.0087 10.9723L47.1595 12.783ZM42.0642 23.6475L41.215 25.4583H41.215L42.0642 23.6475ZM51.3741 20.2821L49.5634 19.4329L51.3741 20.2821ZM38.6988 14.3376L36.8881 13.4884V13.4884L38.6988 14.3376ZM48.0087 10.9723L47.1595 12.783L47.1595 12.783L48.0087 10.9723ZM22.377 23.8504L20.4729 23.2386L19.2493 27.0469L23.0301 25.7408L22.377 23.8504ZM25.1601 15.1882L27.0505 14.5352L25.0913 8.86403L23.256 14.5764L25.1601 15.1882ZM25.8166 22.6621L27.707 22.0091L27.0539 20.1187L25.1635 20.7718L25.8166 22.6621ZM26.9697 26L25.0793 26.6531L25.5446 28H26.9697V26ZM28.758 26V28H30.2161L30.6622 26.6118L28.758 26ZM30.6794 20.02L32.5835 20.6318L33.8071 16.8235L30.0263 18.1296L30.6794 20.02ZM27.2398 21.2082L25.3494 21.8613L26.0025 23.7517L27.8929 23.0986L27.2398 21.2082ZM30.8587 26L28.9546 25.3882L28.1155 28H30.8587V26ZM32.5835 20.6318L34.4876 21.2436V21.2436L32.5835 20.6318ZM30.0263 18.1296L30.6794 20.02H30.6794L30.0263 18.1296ZM28.4771 18.6648L26.5868 19.3179L27.2398 21.2082L29.1302 20.5552L28.4771 18.6648ZM27.0505 14.5352L28.9409 13.8821L27.0505 14.5352ZM25.1384 13.1883L25.1601 15.1882L25.1384 13.1883ZM23.256 14.5764L21.3519 13.9646L23.256 14.5764ZM20.4729 23.2386L22.377 23.8504H22.377L20.4729 23.2386ZM23.0301 25.7408L23.6831 27.6311L23.6831 27.6311L23.0301 25.7408ZM24.5793 25.2056L26.4696 24.5525L25.8166 22.6621L23.9262 23.3152L24.5793 25.2056ZM24.8537 26V28H27.6606L26.7441 25.3469L24.8537 26ZM14 26V24H12V26H14ZM42 26H44V24H42V26ZM16 28V26H14V28H16ZM40 28H42V26H40V28ZM34.7213 2.91401L36.2486 5.88666L39.8065 4.05864L38.2791 1.08599L34.7213 2.91401ZM36.7518 5.88666L38.2791 2.91401L34.7213 1.08599L33.1939 4.05863L36.7518 5.88666ZM32.9142 8.27893L35.8868 6.75158L34.0588 3.19372L31.0862 4.72107L32.9142 8.27893ZM35.8868 6.24842L32.9142 4.72107L31.0862 8.27893L34.0588 9.80628L35.8868 6.24842ZM38.2791 10.086L36.7518 7.11334L33.1939 8.94136L34.7213 11.914L38.2791 10.086ZM36.2486 7.11334L34.7213 10.086L38.2791 11.914L39.8065 8.94136L36.2486 7.11334ZM40.0862 4.72107L37.1135 6.24842L38.9415 9.80628L41.9142 8.27893L40.0862 4.72107ZM37.1135 6.75158L40.0862 8.27893L41.9142 4.72107L38.9415 3.19372L37.1135 6.75158ZM30.7213 10.914L31.5698 12.5655L35.1276 10.7375L34.2791 9.08599L30.7213 10.914ZM33.4306 12.5655L34.2791 10.914L30.7213 9.08599L29.8727 10.7375L33.4306 12.5655ZM30.9142 14.2789L32.5657 13.4304L30.7376 9.87255L29.0862 10.7211L30.9142 14.2789ZM32.5657 11.5696L30.9142 10.7211L29.0862 14.2789L30.7376 15.1275L32.5657 11.5696ZM34.2791 14.086L33.4306 12.4345L29.8727 14.2625L30.7213 15.914L34.2791 14.086ZM31.5698 12.4345L30.7213 14.086L34.2791 15.914L35.1276 14.2625L31.5698 12.4345ZM34.0862 10.7211L32.4347 11.5696L34.2627 15.1275L35.9142 14.2789L34.0862 10.7211ZM32.4347 13.4304L34.0862 14.2789L35.9142 10.7211L34.2627 9.87255L32.4347 13.4304ZM11.6421 8.47065L18.8873 11.863L20.5834 8.24047L13.3383 4.84809L11.6421 8.47065ZM10.9091 14.7526L14.3015 7.50747L10.6789 5.81128L7.28657 13.0564L10.9091 14.7526ZM17.1911 15.4856L9.94594 12.0932L8.24976 15.7158L15.4949 19.1082L17.1911 15.4856ZM17.9241 9.20365L14.5317 16.4488L18.1543 18.145L21.5466 10.8998L17.9241 9.20365ZM8.24976 15.7158L13.3383 4.84809L9.71575 3.15191L4.6272 14.0196L8.24976 15.7158ZM18.1543 18.145L7.28657 13.0564L5.59038 16.679L16.4581 21.7675L18.1543 18.145ZM20.5834 8.24047L15.4949 19.1081L19.1174 20.8043L24.206 9.93665L20.5834 8.24047ZM10.6789 5.81128L21.5466 10.8998L23.2428 7.27728L12.3751 2.18872L10.6789 5.81128ZM42.0642 23.6475C45.5644 25.2891 49.7326 23.7823 51.3741 20.2821L47.7526 18.5837C47.0491 20.0838 45.2627 20.7295 43.7626 20.026L42.0642 23.6475ZM38.6988 14.3376C37.0573 17.8378 38.564 22.006 42.0642 23.6475L43.7626 20.026C42.2626 19.3225 41.6168 17.5362 42.3203 16.0361L38.6988 14.3376ZM48.0087 10.9723C44.5085 9.33072 40.3404 10.8375 38.6988 14.3376L42.3203 16.0361C43.0238 14.536 44.8102 13.8902 46.3103 14.5938L48.0087 10.9723ZM51.3741 20.2821C53.0156 16.782 51.5089 12.6138 48.0087 10.9723L46.3103 14.5938C47.8104 15.2973 48.4561 17.0836 47.7526 18.5837L51.3741 20.2821ZM41.215 25.4583C45.7152 27.5688 51.0743 25.6316 53.1849 21.1314L49.5634 19.4329C48.3908 21.9331 45.4136 23.0093 42.9134 21.8368L41.215 25.4583ZM36.8881 13.4884C34.7775 17.9887 36.7148 23.3478 41.215 25.4583L42.9134 21.8368C40.4133 20.6643 39.3371 17.687 40.5096 15.1869L36.8881 13.4884ZM48.8579 9.1615C44.3577 7.05096 38.9986 8.98819 36.8881 13.4884L40.5096 15.1869C41.6821 12.6867 44.6594 11.6105 47.1595 12.783L48.8579 9.1615ZM53.1849 21.1314C55.2954 16.6311 53.3582 11.272 48.8579 9.1615L47.1595 12.783C49.6596 13.9555 50.7359 16.9328 49.5634 19.4329L53.1849 21.1314ZM24.2812 24.4622L27.0643 15.8L23.256 14.5764L20.4729 23.2386L24.2812 24.4622ZM25.1635 20.7718L21.724 21.96L23.0301 25.7408L26.4696 24.5525L25.1635 20.7718ZM28.8601 25.3469L27.707 22.0091L23.9262 23.3152L25.0793 26.6531L28.8601 25.3469ZM26.9697 28H28.758V24H26.9697V28ZM28.7752 19.4082L26.8539 25.3882L30.6622 26.6118L32.5835 20.6318L28.7752 19.4082ZM27.8929 23.0986L31.3324 21.9104L30.0263 18.1296L26.5868 19.3179L27.8929 23.0986ZM23.2698 15.8413L25.3494 21.8613L29.1302 20.5552L27.0505 14.5352L23.2698 15.8413ZM32.7629 26.6118L34.4876 21.2436L30.6794 20.02L28.9546 25.3882L32.7629 26.6118ZM34.4876 21.2436C34.9511 19.8011 34.5598 18.2206 33.4769 17.161L30.6794 20.02V20.02L34.4876 21.2436ZM33.4769 17.161C32.394 16.1014 30.8053 15.7445 29.3733 16.2392L30.6794 20.02L30.6794 20.02L33.4769 17.161ZM29.3733 16.2392L27.8241 16.7744L29.1302 20.5552L30.6794 20.02L29.3733 16.2392ZM30.3675 18.0117L28.9409 13.8821L25.1601 15.1882L26.5868 19.3179L30.3675 18.0117ZM28.9409 13.8821C28.3787 12.2548 26.8382 11.1697 25.1166 11.1884L25.1601 15.1882H25.1601L28.9409 13.8821ZM25.1166 11.1884C23.395 11.2072 21.8785 12.3254 21.3519 13.9646L25.1601 15.1882H25.1601L25.1166 11.1884ZM21.3519 13.9646L18.5688 22.6268L22.377 23.8504L25.1601 15.1882L21.3519 13.9646ZM18.5688 22.6268C18.1053 24.0693 18.4966 25.6498 19.5795 26.7094L22.377 23.8504L22.377 23.8504L18.5688 22.6268ZM19.5795 26.7094C20.6625 27.769 22.2511 28.1258 23.6831 27.6311L22.377 23.8504L22.377 23.8504L19.5795 26.7094ZM23.6831 27.6311L25.2323 27.096L23.9262 23.3152L22.377 23.8504L23.6831 27.6311ZM22.6889 25.8586L22.9633 26.6531L26.7441 25.3469L26.4696 24.5525L22.6889 25.8586ZM15 28H24.8537V24H15V28ZM14 28H15V24H14V28ZM16 27V26H12V27H16ZM16 38V27H12V38H16ZM18 40C16.8954 40 16 39.1046 16 38H12C12 41.3137 14.6863 44 18 44V40ZM38 40H18V44H38V40ZM40 38C40 39.1046 39.1046 40 38 40V44C41.3137 44 44 41.3137 44 38H40ZM40 27V38H44V27H40ZM40 26V27H44V26H40ZM41 28H42V24H41V28ZM30.8587 28H41V24H30.8587V28ZM14 28V38H18V28H14ZM40 26H16V30H40V26ZM42 38V28H38V38H42ZM38 42C40.2091 42 42 40.2091 42 38H38V42ZM18 42H38V38H18V42ZM14 38C14 40.2091 15.7909 42 18 42V38H18H14Z",fill:"black",fillOpacity:"0.9",mask:"url(#path-6-inside-1_1019679_55739)"}))}function O(){return i.createElement("svg",{width:"56",height:"62",viewBox:"0 0 56 62",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"11",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("path",{d:"M11.9511 6.09433L11.0454 5.67028L10.6214 6.57592L5.53284 17.4436L5.10879 18.3492L6.01443 18.7733L16.8821 23.8619L17.7878 24.2859L18.2118 23.3803L23.3004 12.5126L23.7244 11.6069L22.8188 11.1829L11.9511 6.09433Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M41.6394 27.5529C45.6396 29.4289 50.4033 27.7069 52.2793 23.7067C54.1553 19.7065 52.4334 14.9429 48.4331 13.0668C44.4329 11.1908 39.6693 12.9128 37.7933 16.913C35.9172 20.9132 37.6392 25.6769 41.6394 27.5529Z",fill:"#9747FF",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.3772 26.8504L25.8167 25.6621L27.3153 30H28.4369L30.6795 23.02L27.2399 24.2082L25.1602 18.1882L22.3772 26.8504Z",fill:"#9747FF"}),i.createElement("path",{d:"M15 30H41V41C41 42.6569 39.6569 44 38 44H18C16.3431 44 15 42.6569 15 41V30Z",stroke:"white",strokeWidth:"2"}),i.createElement("path",{d:"M37.3897 4.54299L36.5002 2.81185L35.6108 4.54299L34.2302 7.22997L31.5432 8.61054L29.8121 9.5L31.5432 10.3895L34.2302 11.77L35.6108 14.457L36.5002 16.1881L37.3897 14.457L38.7703 11.77L41.4573 10.3895L43.1884 9.5L41.4573 8.61054L38.7703 7.22997L37.3897 4.54299Z",fill:"white",stroke:"#9747FF",strokeWidth:"2"}),i.createElement("path",{d:"M32.5002 13L33.3488 14.6515L35.0002 15.5L33.3488 16.3485L32.5002 18L31.6517 16.3485L30.0002 15.5L31.6517 14.6515L32.5002 13Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.7354 13.0517L12.4903 9.65937L9.09791 16.9045L16.343 20.2969L19.7354 13.0517ZM11.5271 7L6.43854 17.8677L17.3062 22.9562L22.3948 12.0886L11.5271 7Z",fill:"white"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M42.9135 24.8368C45.4136 26.0093 48.3909 24.9331 49.5634 22.4329C50.7359 19.9328 49.6597 16.9555 47.1596 15.783C44.6594 14.6105 41.6822 15.6867 40.5096 18.1869C39.3371 20.687 40.4134 23.6643 42.9135 24.8368ZM42.0643 26.6475C45.5645 28.2891 49.7327 26.7823 51.3742 23.2821C53.0157 19.782 51.509 15.6138 48.0088 13.9723C44.5086 12.3307 40.3404 13.8375 38.6989 17.3376C37.0574 20.8378 38.5641 25.006 42.0643 26.6475Z",fill:"white"}),i.createElement("mask",{id:"path-10-inside-1_1_174",fill:"white"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z"})),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M25.1598 18.1883L22.3767 26.8505L25.8163 25.6623L26.9693 29.0001H24.8534L24.5789 28.2057L23.0297 28.7409C22.3137 28.9883 21.5194 28.8098 20.9779 28.28C20.4365 27.7502 20.2408 26.96 20.4726 26.2387L23.2557 17.5766C23.519 16.757 24.2772 16.1978 25.138 16.1885C25.9988 16.1791 26.7691 16.7216 27.0502 17.5353L28.4768 21.6649L30.026 21.1297C30.742 20.8824 31.5363 21.0608 32.0778 21.5906C32.6192 22.1204 32.8149 22.9107 32.5832 23.6319L30.8584 29.0001H28.7577L30.679 23.0201L27.2395 24.2084L25.1598 18.1883Z",fill:"white"}),i.createElement("path",{d:"M22.3767 26.8505L20.4726 26.2387L19.249 30.047L23.0297 28.7409L22.3767 26.8505ZM25.1598 18.1883L27.0502 17.5353L25.091 11.8642L23.2557 17.5766L25.1598 18.1883ZM25.8163 25.6623L27.7066 25.0092L27.0536 23.1189L25.1632 23.7719L25.8163 25.6623ZM26.9693 29.0001V31.0001H29.7763L28.8597 28.3471L26.9693 29.0001ZM24.8534 29.0001L22.963 29.6532L23.4283 31.0001H24.8534V29.0001ZM24.5789 28.2057L26.4693 27.5527L25.8163 25.6623L23.9259 26.3153L24.5789 28.2057ZM23.0297 28.7409L22.3767 26.8505L22.3767 26.8505L23.0297 28.7409ZM20.9779 28.28L22.3767 26.8505L22.3767 26.8505L20.9779 28.28ZM20.4726 26.2387L22.3767 26.8505L22.3767 26.8505L20.4726 26.2387ZM23.2557 17.5766L21.3515 16.9648L21.3515 16.9648L23.2557 17.5766ZM25.138 16.1885L25.1598 18.1883L25.138 16.1885ZM27.0502 17.5353L28.9405 16.8822L28.9405 16.8822L27.0502 17.5353ZM28.4768 21.6649L26.5864 22.318L27.2395 24.2084L29.1298 23.5553L28.4768 21.6649ZM30.026 21.1297L30.679 23.0201L30.679 23.0201L30.026 21.1297ZM32.0778 21.5906L30.679 23.0201L30.679 23.0201L32.0778 21.5906ZM32.5832 23.6319L34.4873 24.2437L34.4873 24.2437L32.5832 23.6319ZM30.8584 29.0001V31.0001H32.3165L32.7625 29.6119L30.8584 29.0001ZM28.7577 29.0001L26.8536 28.3883L26.0144 31.0001H28.7577V29.0001ZM30.679 23.0201L32.5832 23.6319L33.8067 19.8236L30.026 21.1297L30.679 23.0201ZM27.2395 24.2084L25.3491 24.8614L26.0021 26.7518L27.8925 26.0987L27.2395 24.2084ZM24.2808 27.4623L27.0639 18.8001L23.2557 17.5766L20.4726 26.2387L24.2808 27.4623ZM25.1632 23.7719L21.7236 24.9601L23.0297 28.7409L26.4693 27.5527L25.1632 23.7719ZM28.8597 28.3471L27.7066 25.0092L23.9259 26.3153L25.079 29.6532L28.8597 28.3471ZM24.8534 31.0001H26.9693V27.0001H24.8534V31.0001ZM26.7437 28.3471L26.4693 27.5527L22.6885 28.8588L22.963 29.6532L26.7437 28.3471ZM23.9259 26.3153L22.3767 26.8505L23.6828 30.6313L25.232 30.0961L23.9259 26.3153ZM22.3767 26.8505L22.3767 26.8505L19.5792 29.7095C20.6621 30.7692 22.2508 31.126 23.6828 30.6313L22.3767 26.8505ZM22.3767 26.8505L22.3767 26.8505L18.5684 25.6269C18.105 27.0694 18.4963 28.6499 19.5792 29.7095L22.3767 26.8505ZM22.3767 26.8505L25.1598 18.1883L21.3515 16.9648L18.5684 25.6269L22.3767 26.8505ZM25.1598 18.1883L25.1598 18.1883L25.1163 14.1886C23.3947 14.2073 21.8782 15.3256 21.3515 16.9648L25.1598 18.1883ZM25.1598 18.1883L25.1598 18.1883L28.9405 16.8822C28.3783 15.2549 26.8379 14.1699 25.1163 14.1886L25.1598 18.1883ZM25.1598 18.1883L26.5864 22.318L30.3672 21.0119L28.9405 16.8822L25.1598 18.1883ZM29.1298 23.5553L30.679 23.0201L29.3729 19.2394L27.8237 19.7746L29.1298 23.5553ZM30.679 23.0201L30.679 23.0201L33.4765 20.1611C32.3936 19.1015 30.805 18.7447 29.3729 19.2394L30.679 23.0201ZM30.679 23.0201L30.679 23.0201L34.4873 24.2437C34.9507 22.8012 34.5594 21.2207 33.4765 20.1611L30.679 23.0201ZM30.679 23.0201L28.9543 28.3883L32.7625 29.6119L34.4873 24.2437L30.679 23.0201ZM28.7577 31.0001H30.8584V27.0001H28.7577V31.0001ZM28.7749 22.4083L26.8536 28.3883L30.6618 29.6119L32.5832 23.6319L28.7749 22.4083ZM27.8925 26.0987L31.3321 24.9105L30.026 21.1297L26.5864 22.318L27.8925 26.0987ZM23.2694 18.8414L25.3491 24.8614L29.1298 23.5553L27.0502 17.5353L23.2694 18.8414Z",fill:"white",mask:"url(#path-10-inside-1_1_174)"}))}function R(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"white"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function P(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#F5F5F5"}),i.createElement("rect",{x:"8.5",y:"8.5",width:"39",height:"39",rx:"7.5",stroke:"black",strokeOpacity:"0.2"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"black",fillOpacity:"0.9"}))}function D(){return i.createElement("svg",{width:"56",height:"56",viewBox:"0 0 56 56",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("rect",{x:"8",y:"8",width:"40",height:"40",rx:"8",fill:"#9747FF"}),i.createElement("rect",{width:"32",height:"32",transform:"translate(12 12)",fill:"#9747FF"}),i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M27 27V19H29V27H37V29H29V37H27V29H19V27H27Z",fill:"white"}))}i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M109.821 18.253A3 3 0 00106.916 16H11.87a3 3 0 00-2.906 3.747l25.215 98.001A3 3 0 0037.084 120h95.046a3 3 0 002.906-3.748l-25.215-98z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M34.179 18.253A3 3 0 0137.084 16h95.046a3 3 0 012.906 3.747l-25.215 98.001a3 3 0 01-2.905 2.252H11.87a3 3 0 01-2.906-3.748l25.215-98z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M68.787 118.279c1.324 2.295 5.102 2.295 6.426 0l56.403-97.77c1.195-2.072-.542-4.509-3.213-4.509H15.597c-2.67 0-4.408 2.437-3.213 4.508l56.403 97.771z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},s)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M68.787 17.721c1.324-2.295 5.102-2.295 6.426 0l56.403 97.771c1.195 2.071-.542 4.508-3.213 4.508H15.597c-2.67 0-4.408-2.437-3.213-4.508l56.403-97.77z",fill:e,className:m.cq,ref:s,...T(e,n)}),i.createElement("path",{d:"M130.75 115.992L130.75 115.992C131.134 116.658 131.057 117.364 130.645 117.942C130.223 118.534 129.432 119 128.403 119H15.5971C14.5693 119 13.7776 118.534 13.3555 117.942C12.9431 117.364 12.8659 116.658 13.2503 115.992L13.2503 115.992L69.6533 18.221C70.0992 17.4482 70.9999 17 72.0001 17C73.0004 17 73.9011 17.4482 74.347 18.221L130.75 115.992Z",...I(e,o.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},s)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("circle",{cx:"72",cy:"72",r:"64",fill:e,className:m.cq,ref:s,...T(e,n)}),i.createElement("circle",{cx:"72",cy:"72",r:"62",fill:"none",...I(e,o.NLJ.SHAPE_WHITEBOARD_ELLIPSE,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{x:"8",y:"20",width:"128",height:"104",rx:"40",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{x:"16",y:"32",width:"112",height:"80",rx:"40",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{width:"79.374",height:"79.374",x:"15.874",y:"71.874",rx:"3.175",transform:"rotate(-45 15.874 71.874)",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},s)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("rect",{x:"16",y:"16",width:"112",height:"112",rx:"3.23077",fill:e,className:m.cq,ref:s,...T(e,n)}),i.createElement("rect",{x:"16",y:"16",width:"110",height:"110",fill:"none",rx:"3.23077",...I(e,o.NLJ.SHAPE_WHITEBOARD_SQUARE,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M16.1763 30.5665C16.1763 28.9381 17.4061 27.1478 20.2318 25.336C23.0129 23.5529 27.1015 21.9106 32.2405 20.517C42.5046 17.7335 56.7388 16 72.5 16C88.2612 16 102.495 17.7335 112.759 20.517C117.898 21.9106 121.987 23.5529 124.768 25.336C127.594 27.1478 128.824 28.9381 128.824 30.5665C128.824 32.1949 127.594 33.9852 124.768 35.7969C121.987 37.5801 117.898 39.2224 112.759 40.616C102.495 43.3995 88.2612 45.1329 72.5 45.1329C56.7388 45.1329 42.5046 43.3995 32.2405 40.616C27.1015 39.2224 23.0129 37.5801 20.2318 35.7969C17.4061 33.9852 16.1763 32.1949 16.1763 30.5665Z M125.816 37.4319C126.996 36.6756 128.019 35.8576 128.824 34.9796V113.434C128.824 115.062 127.594 116.852 124.768 118.664C121.987 120.447 117.898 122.089 112.759 123.483C102.495 126.267 88.2612 128 72.5 128C56.7388 128 42.5046 126.267 32.2405 123.483C27.1015 122.089 23.0129 120.447 20.2318 118.664C17.4061 116.852 16.1763 115.062 16.1763 113.434V34.9796C16.981 35.8576 18.0038 36.6756 19.1835 37.4319C22.201 39.3666 26.5029 41.0724 31.7322 42.4905C42.2047 45.3305 56.6179 47.0751 72.5 47.0751C88.3821 47.0751 102.795 45.3305 113.268 42.4905C118.497 41.0724 122.799 39.3666 125.816 37.4319Z":"M15.5289 30.5664C15.5289 21.9851 41.0355 15.0288 72.5 15.0288C103.964 15.0288 129.471 21.9851 129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M129.471 30.5664C129.471 39.1477 103.964 46.104 72.5 46.104C41.0355 46.104 15.5289 39.1477 15.5289 30.5664M129.471 30.5664C129.471 21.9851 103.964 15.0288 72.5 15.0288C41.0355 15.0288 15.5289 21.9851 15.5289 30.5664M129.471 30.5664V113.433C129.471 122.015 103.964 128.971 72.5 128.971C41.0355 128.971 15.5289 122.015 15.5289 113.433V30.5664",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M22.1503 121H117.979C117.215 120.301 116.503 119.415 115.844 118.393C114.15 115.767 112.657 112.023 111.417 107.473C108.931 98.3601 107.405 85.8189 107.405 72C107.405 58.1811 108.931 45.6399 111.417 36.5273C112.657 31.9771 114.15 28.2333 115.844 25.6072C116.503 24.5851 117.215 23.6986 117.979 23H22.1503C20.7231 23 19.1567 24.0712 17.5724 26.5282C16.0127 28.9471 14.5759 32.5037 13.3566 36.9744C10.9214 45.9038 9.40463 58.2875 9.40463 72C9.40463 85.7125 10.9214 98.0962 13.3566 107.026C14.5759 111.496 16.0127 115.053 17.5724 117.472C19.1567 119.929 20.7231 121 22.1503 121Z M117.272 26.5282C118.856 24.0712 120.423 23 121.85 23C123.277 23 124.843 24.0712 126.428 26.5282C127.987 28.9471 129.424 32.5037 130.643 36.9744C133.079 45.9038 134.595 58.2875 134.595 72C134.595 85.7125 133.079 98.0962 130.643 107.026C129.424 111.496 127.987 115.053 126.428 117.472C124.843 119.929 123.277 121 121.85 121C120.423 121 118.856 119.929 117.272 117.472C115.712 115.053 114.275 111.496 113.056 107.026C110.621 98.0962 109.104 85.7125 109.104 72C109.104 58.2875 110.621 45.9038 113.056 36.9744C114.275 32.5037 115.712 28.9471 117.272 26.5282Z":"M122.229 22.1504C129.738 22.1504 135.824 44.4687 135.824 72.0001C135.824 99.5315 129.738 121.85 122.229 121.85H22.5295C15.0209 121.85 8.93413 99.5315 8.93413 72.0001C8.93413 44.4687 15.0209 22.1504 22.5295 22.1504H122.229Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M121.85 121.85C114.341 121.85 108.254 99.5315 108.254 72.0001C108.254 44.4687 114.341 22.1504 121.85 22.1504M121.85 121.85C129.358 121.85 135.445 99.5315 135.445 72.0001C135.445 44.4687 129.358 22.1504 121.85 22.1504M121.85 121.85H22.1503C14.6417 121.85 8.55492 99.5315 8.55492 72.0001C8.55492 44.4687 14.6417 22.1504 22.1503 22.1504H121.85",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M10.3815 22.7052C10.3815 21.211 11.5925 20 13.0867 20H103.561V46.1503C103.561 48.3081 105.31 50.0578 107.468 50.0578H133.618V121.295C133.618 122.789 132.407 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V22.7052Z M132.343 48.2543L105.364 21.2752V46.1503C105.364 47.3121 106.306 48.2543 107.468 48.2543H132.343Z":"M9.47974 121.295V22.7051C9.47974 20.7128 11.0944 19.0981 13.0867 19.0981H104.462L134.52 49.1559V121.295C134.52 123.287 132.905 124.902 130.913 124.902H13.0867C11.0944 124.902 9.47974 123.287 9.47974 121.295Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M104.462 19.0981H13.0867C11.0944 19.0981 9.47974 20.7128 9.47974 22.7051V121.295C9.47974 123.287 11.0944 124.902 13.0867 124.902H130.913C132.905 124.902 134.52 123.287 134.52 121.295V49.1559M104.462 19.0981L134.52 49.1559M104.462 19.0981V46.1502C104.462 47.81 105.808 49.1559 107.468 49.1559H134.52",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M20.2185 21.6806C20.6341 20.6642 21.6236 20 22.7221 20H66.5728C67.6712 20 68.6608 20.6642 69.0763 21.6806L78.4719 44.6474H10.823L20.2185 21.6806Z M10.3815 46.4509H130.913C132.408 46.4509 133.619 47.6618 133.619 49.1561V121.295C133.619 122.789 132.408 124 130.913 124H13.0867C11.5925 124 10.3815 122.789 10.3815 121.295V46.4509Z":"M9.4798 121.295V45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549H130.913C132.906 45.549 134.52 47.1637 134.52 49.1559V121.295C134.52 123.287 132.906 124.902 130.913 124.902H13.0867C11.0945 124.902 9.4798 123.287 9.4798 121.295Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M9.4798 45.549V121.295C9.4798 123.287 11.0945 124.902 13.0867 124.902H130.913C132.906 124.902 134.52 123.287 134.52 121.295V49.1559C134.52 47.1637 132.906 45.549 130.913 45.549H79.815M9.4798 45.549L19.3838 21.3393C19.9381 19.9836 21.2576 19.0981 22.7221 19.0981H66.5728C68.0372 19.0981 69.3567 19.9836 69.911 21.3393L79.815 45.549M9.4798 45.549H79.815",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M132.825 31H11.1751C9.11354 31 7.59918 32.9715 8.0945 35.0106L27.3025 110.463C27.653 111.906 28.924 112.92 30.3831 112.92H113.617C115.076 112.92 116.347 111.906 116.698 110.463L135.906 35.0106C136.401 32.9715 134.886 31 132.825 31Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M93.2603 48.8289L74.8382 18.1385C73.7284 16.4493 71.2511 16.4493 70.1413 18.1385L51.7195 48.8289C51.3354 49.4134 50.7472 49.8337 50.0698 50.0076L14.5248 57.5829C12.5231 58.0968 11.7423 60.523 13.0688 62.1078L37.2107 88.5999C37.6704 89.1492 37.903 89.8531 37.8609 90.5682L34.3002 125.894C34.1806 127.929 36.2 129.41 38.1052 128.685L71.4895 114.399C72.1339 114.154 72.8457 114.154 73.49 114.399L106.874 128.685C108.779 129.41 110.799 127.929 110.679 125.894L107.118 90.5682C107.077 89.8531 107.309 89.1492 107.769 88.5999L131.911 62.1078C133.237 60.523 132.457 58.0968 130.455 57.5829L94.9096 50.0076C94.2325 49.8337 93.6443 49.4134 93.2603 48.8289Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M120.45 27H23.55C22.1417 27 21 28.1454 21 29.5583V86.4924C21 87.408 21.4877 88.2538 22.2789 88.7102L70.7289 116.66C71.5159 117.113 72.4841 117.114 73.2711 116.66L121.721 88.7102C122.512 88.2538 123 87.408 123 86.4924V29.5583C123 28.1454 121.858 27 120.45 27Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8.24869 71.3645L24.1079 34.3397C24.6034 33.1629 25.7559 32.3976 27.0328 32.3976H116.967C118.244 32.3976 119.397 33.1629 119.892 34.3397L135.751 71.3645C136.083 72.152 136.083 73.04 135.751 73.8275L119.892 110.852C119.397 112.029 118.244 112.794 116.967 112.794H27.0328C25.7559 112.794 24.6034 112.029 24.1079 110.852L8.24869 73.8275C7.9171 73.04 7.9171 72.152 8.24869 71.3645Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M129.24 59.4647L74.475 16.7477C73.1969 15.7508 71.4046 15.7508 70.1265 16.7477L15.3612 59.4647C14.1752 60.3897 13.7044 61.9638 14.1876 63.388L34.9562 124.601C35.4429 126.035 36.7893 127 38.304 127H106.298C107.812 127 109.159 126.035 109.645 124.601L130.414 63.388C130.897 61.9638 130.426 60.3897 129.24 59.4647Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M94.8699 16H49.1301C48.3125 16 47.5284 16.3248 46.9503 16.9029L16.9029 46.9503C16.3248 47.5284 16 48.3125 16 49.1301V94.8699C16 95.6875 16.3248 96.4716 16.9029 97.0497L46.9503 127.097C47.5284 127.675 48.3125 128 49.1301 128H94.8699C95.6875 128 96.4716 127.675 97.0497 127.097L127.097 97.0497C127.675 96.4716 128 95.6875 128 94.8699V49.1301C128 48.3125 127.675 47.5284 127.097 46.9503L97.0497 16.9029C96.4716 16.3248 95.6875 16 94.8699 16Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M47.1111 47.1099V18.8718C47.1111 17.2857 48.3969 16 49.9829 16H94.0171C95.6031 16 96.8889 17.2857 96.8889 18.8718V46.632C96.8889 46.6325 96.8896 46.6325 96.8901 46.6325H125.128C126.714 46.6325 128 47.9182 128 49.5043V94.0171C128 95.6031 126.714 96.8889 125.128 96.8889H96.8894C96.8889 96.8889 96.8889 96.8896 96.8889 96.8901V125.128C96.8889 126.714 95.6031 128 94.0171 128H49.9829C48.3969 128 47.1111 126.714 47.1111 125.128V96.8894C47.1111 96.8889 47.1104 96.8889 47.1099 96.8889H18.8718C17.2857 96.8889 16 95.6031 16 94.0171V49.9829C16 48.3969 17.2857 47.1111 18.8718 47.1111H47.1106C47.1111 47.1111 47.1111 47.1104 47.1111 47.1099Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:S(n)?"M8.28613 31.5551C8.28613 30.119 9.45004 28.9551 10.8862 28.9551H16.664V115.045H10.8862C9.45004 115.045 8.28613 113.881 8.28613 112.445V31.5551Z M18.3974 115.045V28.9551H127.021V115.045H18.3974Z M128.754 115.045V28.9551H134.532C135.968 28.9551 137.132 30.119 137.132 31.5551V112.445C137.132 113.881 135.968 115.045 134.532 115.045H128.754Z":"M7.68134 31.5551C7.68134 29.6403 9.23327 28.0884 11.148 28.0884H17.7926H128.15H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15H17.7926H11.148C9.23327 115.912 7.68134 114.36 7.68134 112.445V31.5551Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M17.7926 28.0884H11.148C9.23327 28.0884 7.68134 29.6403 7.68134 31.5551V112.445C7.68134 114.36 9.23327 115.912 11.148 115.912H17.7926M17.7926 28.0884V115.912M17.7926 28.0884H128.15M17.7926 115.912H128.15M128.15 28.0884V115.912M128.15 28.0884H134.794C136.709 28.0884 138.261 29.6403 138.261 31.5551V112.445C138.261 114.36 136.709 115.912 134.794 115.912H128.15",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M3 31.9044C3 28.2578 6.22596 25.4544 9.83687 25.963L136.837 43.8517C139.798 44.2688 142 46.8027 142 49.793V112C142 115.314 139.314 118 136 118H9C5.68629 118 3 115.314 3 112V31.9044Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M27.8014 70.724L8.31687 37.526C7.36024 35.695 8.68491 33.5 10.7466 33.5H112.245C113.225 33.5 114.13 34.0241 114.62 34.8749L135.632 70.6249C136.122 71.4758 136.122 72.5242 135.632 73.3751L114.62 109.125C114.13 109.976 113.225 110.5 112.245 110.5H10.7466C8.68491 110.5 7.36024 108.305 8.31687 106.474L27.8014 73.276C28.219 72.4768 28.219 71.5232 27.8014 70.724Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M33.129 70.5542L11.8756 36.4458C10.776 34.4464 12.2225 32 14.5043 32H106.561C107.609 32 108.582 32.5478 109.126 33.4447L132.065 70.4447C132.645 71.4006 132.645 72.5994 132.065 73.5553L109.126 110.555C108.582 111.452 107.609 112 106.561 112H14.5043C12.2225 112 10.776 109.554 11.8756 107.554L33.129 73.4458C33.6241 72.5455 33.6241 71.4545 33.129 70.5542Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8 24.41C8 23.0789 9.07886 22 10.41 22H133.59C134.921 22 136 23.0789 136 24.4095V109.272C136 110.813 134.515 111.919 133.037 111.477L117.877 106.938C101.942 102.167 84.7341 104.324 70.4706 112.88C55.667 121.76 37.6577 123.527 21.4094 117.693L9.33252 113.356C8.53306 113.069 8 112.312 8 111.462V24.41Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M8.00262 23.8137C8.00262 22.5661 9.01375 21.5549 10.2614 21.5549H124.704C125.951 21.5549 126.962 22.5661 126.962 23.8137V28.0802H18.2924C16.2163 28.0802 14.5278 29.7638 14.5278 31.8442V105.774L9.51934 104.138L9.49978 104.132C8.61172 103.869 8.00262 103.052 8.00262 102.126V23.8137Z M18.2924 29.586H133.739C134.986 29.586 135.997 30.5972 135.997 31.8442V111.379C135.997 112.823 134.605 113.86 133.221 113.445L119.012 109.191C104.078 104.72 87.9501 106.742 74.5822 114.761C60.7079 123.083 43.8294 124.739 28.6012 119.271L17.2825 115.207C16.5333 114.937 16.0337 114.227 16.0337 113.432V31.8442C16.0337 30.5967 17.0466 29.586 18.2924 29.586Z":"M7.24973 23.8136C7.24973 22.1502 8.59794 20.802 10.2614 20.802H124.704C126.367 20.802 127.715 22.1502 127.715 23.8136V28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812L9.28559 104.854C8.07793 104.495 7.24973 103.386 7.24973 102.126V23.8136Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M127.715 28.833V23.8136C127.715 22.1502 126.367 20.802 124.704 20.802H10.2614C8.59794 20.802 7.24973 22.1502 7.24973 23.8136V102.126C7.24973 103.386 8.07793 104.495 9.28559 104.854L15.2808 106.812M127.715 28.833H18.2924C16.6315 28.833 15.2808 30.1803 15.2808 31.8442V106.812M127.715 28.833H133.739C135.402 28.833 136.75 30.1813 136.75 31.8442V111.379C136.75 113.328 134.872 114.726 133.005 114.166L118.796 109.912C104.064 105.502 88.1559 107.496 74.9695 115.406C60.9016 123.845 43.7874 125.524 28.3468 119.979L17.028 115.915C15.98 115.539 15.2808 114.545 15.2808 113.432V106.812",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8.94141 70.0367L59.3021 28.0736C60.95 26.7503 63.3967 27.9234 63.3967 30.037V50.1764C63.3967 50.1765 63.3968 50.1767 63.3969 50.1769V50.1769C63.3971 50.177 63.3973 50.1771 63.3974 50.1771H133.482C134.873 50.1771 136 51.3044 136 52.6951V91.3049C136 92.6956 134.873 93.823 133.482 93.823H63.3974C63.3973 93.823 63.3971 93.8231 63.3969 93.8232V93.8232C63.3968 93.8233 63.3967 93.8235 63.3967 93.8237V113.963C63.3967 116.077 60.95 117.25 59.3021 115.926L8.9414 73.9634C7.6862 72.9554 7.6862 71.0446 8.94141 70.0367Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M12.5068 70.5597C11.8311 71.4272 11.8311 72.5728 12.5068 73.4403L47.1369 117.894C48.7381 119.95 52.3844 118.949 52.3844 116.454V99.4781H129C130.657 99.4781 132 98.135 132 96.4781V48.7638C132 47.107 130.657 45.7638 129 45.7638H52.3844V27.5458C52.3844 25.0508 48.7381 24.05 47.1369 26.1055L12.5068 70.5597Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M135.059 73.9634L84.6979 115.926C83.05 117.25 80.6033 116.077 80.6033 113.963V93.8237C80.6033 93.8235 80.6032 93.8233 80.6031 93.8232V93.8232C80.6029 93.8231 80.6028 93.823 80.6026 93.823H10.518C9.12736 93.823 8 92.6956 8 91.3049V52.6951C8 51.3044 9.12736 50.1771 10.518 50.1771H80.6026C80.6027 50.1771 80.6029 50.177 80.6031 50.1769V50.1769C80.6032 50.1767 80.6033 50.1765 80.6033 50.1764V30.037C80.6033 27.9234 83.05 26.7503 84.6979 28.0736L135.059 70.0367C136.314 71.0446 136.314 72.9554 135.059 73.9634Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M131.493 70.5597C132.169 71.4272 132.169 72.5728 131.493 73.4403L96.8631 117.894C95.2619 119.95 91.6156 118.949 91.6156 116.454V99.4781H15C13.3432 99.4781 12 98.135 12 96.4781V48.7638C12 47.107 13.3432 45.7638 15 45.7638H91.6156V27.5458C91.6156 25.0508 95.2619 24.05 96.8631 26.1055L131.493 70.5597Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M24.029 72C24.029 59.2726 28.9314 47.6903 36.951 39.0383L70.4029 72.4902L37.4306 105.472C29.1273 96.7676 24.029 84.9792 24.029 72Z M72.5239 70.3686L39.0571 36.9017C47.7613 28.5984 59.5497 23.5 72.529 23.5C85.5032 23.5 97.2876 28.5945 105.991 36.8921L72.5239 70.3686Z M74.6452 72.4899L108.098 39.0281C116.123 47.6811 121.029 59.2676 121.029 72C121.029 84.9793 115.931 96.7677 107.627 105.472L74.6452 72.4899Z M72.5242 74.6115L105.491 107.578C96.8387 115.598 85.2564 120.5 72.529 120.5C59.8015 120.5 48.2191 115.598 39.5671 107.578L72.5242 74.6115Z":"M72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M108.121 36.883C99.0547 27.6948 86.4569 22 72.529 22C44.9148 22 22.529 44.3858 22.529 72C22.529 99.6142 44.9148 122 72.529 122C100.143 122 122.529 99.6142 122.529 72C122.529 58.3137 117.03 45.9117 108.121 36.883ZM108.121 36.883L72.524 72.49M108.121 36.883L108.129 36.875M36.929 36.895L72.524 72.49M72.524 72.49L107.634 107.6M72.524 72.49L37.424 107.6",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M71.058 70.5H24.0807C24.8582 44.9063 45.4643 24.3002 71.058 23.5227V70.5Z M74.058 70.5V23.5227C99.6516 24.3002 120.258 44.9063 121.035 70.5H74.058Z M74.058 73.5H121.035C120.258 99.0936 99.6516 119.7 74.058 120.477V73.5Z M71.058 73.5V120.477C45.4643 119.7 24.8582 99.0936 24.0807 73.5H71.058Z":"M122.558 72C122.558 99.6142 100.172 122 72.558 122C44.9437 122 22.558 99.6142 22.558 72C22.558 44.3858 44.9437 22 72.558 22C100.172 22 122.558 44.3858 122.558 72Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M122.558 72C122.558 99.6142 100.172 122 72.558 122M122.558 72C122.558 44.3858 100.172 22 72.558 22M122.558 72H72.558M72.558 122C44.9437 122 22.558 99.6142 22.558 72M72.558 122V72M22.558 72C22.558 44.3858 44.9437 22 72.558 22M22.558 72H72.558M72.558 22V72",...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M8 43.5V84.2344C8 98.0415 19.1929 109.234 33 109.234H33.4992C33.4994 109.234 33.4996 109.235 33.4997 109.235V109.235C33.4999 109.235 33.5 109.235 33.5 109.235V121.505C33.5 124.734 37.147 126.624 39.7975 124.769L61.9993 109.235V109.235C62.0001 109.235 62.001 109.234 62.002 109.234H111C124.807 109.234 136 98.0415 136 84.2344V43.5C136 29.6929 124.807 18.5 111 18.5H33C19.1929 18.5 8 29.6929 8 43.5Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:"M128 50V80.5754C128 92.7257 118.15 102.575 106 102.575H60.4126V102.575C60.4117 102.575 60.411 102.576 60.4103 102.577L42.151 115.27C39.9715 117.123 36.972 115.234 36.972 112.007L36.9715 102.576C36.9715 102.576 36.9717 102.576 36.9718 102.575C36.9718 102.575 36.9719 102.575 36.9718 102.575H26.486C20.6947 102.575 16 97.8807 16 92.0894V50C16 37.8497 25.8497 28 38 28H106C118.15 28 128 37.8497 128 50Z",fill:e,className:m.cq,ref:o,...T(e,n)}))),i.forwardRef(({color:e=h,toolbarIconScale:r=1,shapeStrokeProps:n,isBeingDraggedForPlacement:a},o)=>i.createElement(g,{toolbarIconScale:r,isBeingDraggedForPlacement:!!a},i.createElement("path",{d:S(n)?"M8.00348 31.8228C8.00348 30.3962 9.15968 29.24 10.5863 29.24H15.465V36.7015H8.00348V31.8228Z M17.1868 36.7015V29.24H133.414C134.84 29.24 135.997 30.3962 135.997 31.8228V36.7015H17.1868Z M17.1868 38.4233H135.997V112.177C135.997 113.604 134.84 114.76 133.414 114.76H17.1868V38.4233Z M15.465 38.4233V114.76H10.5863C9.15968 114.76 8.00348 113.604 8.00348 112.177V38.4233H15.465Z":"M7.64255 31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259H133.914C135.816 28.3792 137.357 29.9208 137.357 31.8229V37.5625V112.177C137.357 114.079 135.816 115.621 133.914 115.621H16.8259H11.0863C9.1842 115.621 7.64255 114.079 7.64255 112.177V37.5625V31.8229Z",fill:e,className:m.cq,ref:o}),i.createElement("path",{d:"M7.64255 37.5625V31.8229C7.64255 29.9208 9.1842 28.3792 11.0863 28.3792H16.8259M7.64255 37.5625V112.177C7.64255 114.079 9.1842 115.621 11.0863 115.621H16.8259M7.64255 37.5625H16.8259M16.8259 115.621H133.914C135.816 115.621 137.357 114.079 137.357 112.177V37.5625M16.8259 115.621V37.5625M137.357 37.5625V31.8229C137.357 29.9208 135.816 28.3792 133.914 28.3792H16.8259M137.357 37.5625H16.8259M16.8259 28.3792V37.5625",...T(e,n)}))),i.forwardRef(({color:e=_,toolbarIconScale:r=1},n)=>i.createElement("svg",{width:31*r,height:34*r,viewBox:"0 0 32 34",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.7929 1.70711C22.4024 1.31658 22.4024 0.683417 22.7929 0.292893C23.1834 -0.0976311 23.8166 -0.0976311 24.2071 0.292893L30.2071 6.29289C30.5976 6.68342 30.5976 7.31658 30.2071 7.70711L24.2071 13.7071C23.8166 14.0976 23.1834 14.0976 22.7929 13.7071C22.4024 13.3166 22.4024 12.6834 22.7929 12.2929L27.0858 8H20.6834C17.922 8 15.6834 10.2386 15.6834 13V27C15.6834 30.866 12.5494 34 8.68341 34H1.5C0.947715 34 0.5 33.5523 0.5 33C0.5 32.4477 0.947715 32 1.5 32H8.68341C11.4448 32 13.6834 29.7614 13.6834 27V13C13.6834 9.13401 16.8174 6 20.6834 6H27.0858L22.7929 1.70711Z",fill:e,ref:n}))),i.forwardRef(({color:e=_,toolbarIconScale:r=1},n)=>i.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:28*r,height:30*r,viewBox:"0 0 28 30",fill:"none"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M17.8987 2.17466C17.3465 2.18604 16.8897 1.74765 16.8783 1.19548C16.8669 0.643314 17.3053 0.186467 17.8575 0.175085L26.341 0.000216699C26.8931 -0.011165 27.35 0.427228 27.3614 0.979396L27.5362 9.46288C27.5476 10.015 27.1092 10.4719 26.5571 10.4833C26.0049 10.4947 25.548 10.0563 25.5367 9.50409L25.4197 3.82765L1.73377 29.4084C1.35854 29.8137 0.725841 29.838 0.320597 29.4628C-0.0846483 29.0875 -0.108983 28.4548 0.266244 28.0496L24.3476 2.04173L17.8987 2.17466Z",fill:e,ref:n})))},499109:(e,r,n)=>{n.d(r,{UM:()=>l,zW:()=>c});var i=n(411855),a=n(629019),o=n.n(a),s=n(153234);n(163023);let l="dlt_banner_shortcut_button",c=(0,i.memo)((0,i.forwardRef)(function(e,r){let{shortcut:n,onClick:a,isActive:l,recordingKey:c,dataElementTarget:d,isPressed:u}=e,m=(0,s.rf)((0,s.Pt)("dltBannerShortcutButton",c),"click",a),p=o()("dlt_banner_inline_elements--shortcutButton--LOMMi",{"dlt_banner_inline_elements--active--zWunk":l,"dlt_banner_inline_elements--pressed--36odr":u});return i.createElement("button",{ref:r,className:p,onClick:m,"data-element-target":d},n)}))},330505:(e,r,n)=>{var i=n(411855),a=n(188507),o=n(922827),s=n(812821),l=n(499109);(0,i.memo)(function(e){let r=(0,a.d4)(e=>e.mirror.appModel.currentTool===o.NLJ.COMMENTS),n=(0,i.useCallback)(()=>{r?o.glU.triggerActionInUserEditScope("set-tool-default",{source:l.UM}):o.glU.triggerActionInUserEditScope("set-tool-comments",{source:l.UM})},[r]);return i.createElement(l.zW,{shortcut:"C",onClick:n,isActive:r,recordingKey:"comment",isPressed:e.isPressed})}),(0,i.memo)(function(e){let r=(0,a.d4)(e=>"REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&e.multiplayerEmoji.isChatting),n=(0,i.useCallback)(e=>{if(r){s.CB.closeWheel();return}s.CB.startChat(e.clientX,e.clientY,l.UM)},[r]);return i.createElement(l.zW,{shortcut:"/",onClick:n,isActive:r,recordingKey:"cursorChat",dataElementTarget:"dlt-banner-chat-shortcut",isPressed:e.isPressed})}),(0,i.memo)(function(e){let r=(0,i.useRef)(null),n=(0,a.d4)(e=>{let r="WHEEL"===e.multiplayerEmoji.type,n="REACTING_OR_CHATTING"===e.multiplayerEmoji.type&&!!e.multiplayerEmoji.imageUrl;return r||n}),o=(0,i.useCallback)(()=>{if(n){s.CB.closeWheel();return}let e=r.current?.getBoundingClientRect()??{x:0,y:0},i=e.x+100,a=e.y-200;s.CB.handleShortcutPressWithType({viewportX:i,viewportY:a,source:l.UM,wheelType:"REACTION"}),s.CB.handleShortcutRelease(i,a)},[n]);return i.createElement(l.zW,{ref:r,shortcut:"E",onClick:o,isActive:n,recordingKey:"emote",dataElementTarget:"dlt-banner-emote-shortcut",isPressed:e.isPressed})})},202232:(e,r,n)=>{n.d(r,{HY:()=>o,YB:()=>a,fK:()=>s,hx:()=>l}),n(411855),n(188507),n(922827),n(629019);var i=n(153234);n(140908),n(356390),n(848661),n(457630),n(161459),n(509742);let a=1500,o="delightful-toolbar",s="delightful_toolbar";function l(e){return i.Pt("delightfulToolbar",e)}},161459:(e,r,n)=>{n.d(r,{BD:()=>g,Dq:()=>_,Iz:()=>u,LX:()=>y,T7:()=>E,XQ:()=>m,g5:()=>d,n6:()=>f,qB:()=>p,uM:()=>c,wv:()=>l,zQ:()=>h});var i=n(922827),a=n(966712),o=n(428654),s=n(42173);let l=4,c=8,d=24,u=40,m=[{type:"SOLID",color:(0,s.BV)(i.daH.BLACK,"base")}],p=l,h=1,_=[{type:"SOLID",color:(0,s.BV)(i.daH.HIGHLIGHT_YELLOW,"highlight")}],g=(0,s.BV)(i.Ez5?.uiState().showUI3Colors.getCopy()?i.daH.STICKY_GRAY_UI3:i.daH.STICKY_GRAY_LIGHT,"sticky"),f=o.F.parse((0,s.Mr)((0,a.kc)().figjam_dlt_bw_shapes?i.daH.WHITE:i.daH.VIOLET_LIGHT)),E=(0,a.kc)().figjam_dlt_bw_shapes?i.xbm.SOLID:i.xbm.NONE,y=(0,s.BV)(i.daH.GRAY,"baseLight")},219001:(e,r,n)=>{n.d(r,{nS:()=>o});var i=n(411855),a=(e=>(e.ClickOut="clickOut",e.KeyboardEsc="keyboardEsc",e.ToolSelected="toolSelected",e.ChevronClicked="chevronClicked",e.PropertyChanged="propertyChanged",e.CloseButton="closeButton",e.ClickDemotedDlt="clickDemotedDlt",e.OpenedShapesSidebar="openedShapesSidebar",e))(a||{});let o=i.createContext({state:{draggedTool:void 0,submenu:{tool:void 0,shouldCloseOnClickOut:!0},draggedToolCanCancel:!0,shouldFinishClick:!0,shouldDemoteDlt:!1},dispatch:()=>null})},712546:(e,r,n)=>{n.d(r,{FF:()=>h,hv:()=>_,rD:()=>p,oV:()=>m,bz:()=>g}),n(411855);var i=n(188507),a=n(563706);n(411045),n(303345);var o=n(809831),s=n(965480);n(875847);var l=n(922827);function c(){return!!(0,i.d4)(e=>e.mirror.appModel.activeCanvasEditModeType===l.m1T.HISTORY&&e.versionHistory.activeId&&"current_version"!==e.versionHistory.activeId)}var d=n(29680);n(335682),n(860178),n(99506),n(819338);var u=n(554905);function m(){let e=(0,d.aV)(),r=(0,o.ow)(),n=(0,u.Td)(),s=(0,i.d4)(e=>!!e.user);return!e&&r&&n&&!a.Ay.isIpadNative&&s}function p(){let e=(0,d.aV)(),r=(0,o.ow)(),n=c(),s=(0,i.d4)(e=>!!e.user);return!e&&r&&n&&!a.Ay.isIpadNative&&s}function h(){let e=(0,i.d4)(e=>e.mirror?.appModel.showUi),r=(0,o.ow)(),n=(0,i.d4)(e=>e.mirror?.appModel.isReadOnly),a=m(),s=p();return r&&e&&(!n||a||s)}function _(e={}){let{isEnabledForViewers:r}=e,n=(0,d.aV)(),i=(0,u.Td)(),a=c();return n||i&&!r||a&&!r}function g(){let e=(0,s.kD)(),r=(0,s.tS)(),n=(0,u.Td)();return!!e&&r&&n}n(219001),n(525040)},178911:(e,r,n)=>{n.d(r,{Hm:()=>f,yl:()=>g});var i=n(411855),a=n(188507),o=n(922827),s=n(902139),l=n(988022),c=n(369870),d=n(498606),u=n(511080),m=n(202232),p=n(212981),h=n(383847),_=n(509742);let g="delightful-toolbar-universal-insert";function f(){let e=(0,a.d4)(e=>e.universalInsertModal.showing),r=(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.NONE),n=e&&r,f=(0,a.wA)(),E=(0,i.useCallback)(()=>{n?(f(s.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:m.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:m.fK}),f(s.En({initialX:0,initialY:0})),(0,l.Cu)({source:m.fK},"action_open_universal_insert_modal"))},[f,n]);return i.createElement("div",{"data-element-target":"delightful-toolbar-universal-insert-button",className:_.Zh},i.createElement(h.IB,{toolType:"universal-insert",recordingKey:(0,m.hx)("universal-insert"),isSelected:n,className:c.pb.isGoogleClassroomIntegration()?_.vy:_.pN,onClick:E,"data-tooltip-type":d.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt",hasOpenSubmenu:n,onboardingKey:g},e=>i.createElement(p.gd,{toolType:"universal-insert",inactiveIcon:i.createElement(u.lV,null),hoveredIcon:i.createElement(u.AZ,null),activeIcon:i.createElement(u.cN,null),isSelected:n,isHovered:e})))}},48009:(e,r,n)=>{n.d(r,{xX:()=>W});var i=n(411855),a=n(188507),o=n(922827),s=n(629019),l=n.n(s),c=n(966712),d=n(418956),u=n(192437),m=n(154254),p=n(47506),h=n(753643),_=n(801161),g=n(902139),f=n(988022),E=n(128765),y=n(369870),b=n(460289),v=n(694687),I=n(860178),T=n(336599),S=n(809073),w=n(498606),A=n(369394),C=n(867795),N=n(511080),L=n(123975),O=n(202232),R=n(297483),P=n(178911),D=n(931397),k=n(212981),M=n(333343),F=n(383847),x=n(509742),U=n(524639);let B="delightful-toolbar-universal-insert-button-icon",V=[{src:(0,c.ck)("9cd2eb2ff31cb221dce81ca1e67aa51e12b24166"),zIndex:0,width:50,height:50,translateStart:{x:42,y:36},rotateStart:-15,translateEnd:{x:42,y:36},rotateEnd:-15},{src:(0,c.ck)("276fdbb8f6edbcb958f84235ebfc58b63eab0fc2"),zIndex:1,width:50,height:50,translateStart:{x:95,y:36},rotateStart:15,translateEnd:{x:95,y:36},rotateEnd:15},{src:(0,c.ck)("94db9cf93e2a26f927d5f1a7f066f8b045985011"),zIndex:2,width:50,height:50,translateStart:{x:42,y:66},rotateStart:-10,translateEnd:{x:42,y:66},rotateEnd:-10},{src:(0,c.ck)("004b50b1460d47029608e9aaa66c09c1c94c6741"),zIndex:3,width:50,height:50,translateStart:{x:95,y:66},rotateStart:10,translateEnd:{x:95,y:66},rotateEnd:10}];function G({recentItems:e,toolbarIconScale:r,isModalOpen:n}){let a=(0,R.ws)(e);return i.createElement("div",{className:l()(x.z6,x.ac,U.JY),style:{width:112*r}},V.map((e,o)=>{var s,l;let c=a[o];return i.createElement(K,{key:c?.id||e.src,zIndex:5+e.zIndex,width:e.width*r,height:e.height*r,isModalOpen:n,transform:(s={x:e.translateStart.x*r,y:e.translateStart.y*r},l=e.rotateStart,`translate(calc(-50% + ${s.x}px), calc(-50% + ${s.y}px)) rotate(${l}deg)`)},c?i.createElement(D.E,{item:c,width:e.width*r,height:e.height*r,disableTooltips:!0}):i.createElement("img",{src:e.src,alt:"",className:U.VF}))}))}function H({onClick:e,isSelected:r,isHovered:n}){return i.createElement("div",{className:m.cx.flex.itemsCenter.justifyCenter.mx20.h40.w40.$},i.createElement(F.IB,{toolType:"universal-insert-collage",recordingKey:(0,O.hx)("universal-insert-plus"),isSelected:r,hasOpenSubmenu:!1,onClick:e,"data-tooltip-type":w.Ib.LOOKUP,"data-tooltip":"browse-all-resources-dlt","data-tooltip-offset-y":-2},i.createElement(k.gd,{toolType:"universal-insert-collage",inactiveIcon:i.createElement(N.nX,null),hoveredIcon:i.createElement(N.ZH,null),activeIcon:i.createElement(N.cs,null),isSelected:r,isHovered:n})))}function K({zIndex:e,width:r,height:n,transform:a,isModalOpen:o,children:s}){return i.createElement("div",{className:l()(U.s,{[U.r3]:o}),style:{zIndex:e,width:r,height:n,transform:a}},i.createElement("div",{className:U.f_},s))}function W(e,r){let[n,a]=(0,i.useState)(!1),o=(0,i.useRef)(!1),s=(0,i.useRef)([]);return s.current=r,(0,i.useEffect)(()=>{e||o.current||(o.current=!0,async function(){let e=[];for(let r of s.current)r&&e.push(new Promise(e=>{let n=new Image;n.src=r,n.addEventListener("load",()=>e()),n.addEventListener("error",()=>e())}));await Promise.all(e),a(!0)}())},[e]),n}function $({toolbarIconScale:e}){let r=(0,I.TA)(),[n,s]=(0,i.useState)(!1),l=(0,a.wA)(),c=(0,R.NT)(),u=(0,d.md)(L.c),m=(0,b.XM)(),w=(0,v.sZ)(),N=(0,a.d4)(e=>e.universalInsertModal.showing),k=(0,E.fG)(),V=function(e,r){let n=(0,a.wA)();return(0,i.useCallback)(()=>{(0,p.YQ)({id:"figjam-saves"}),e?(n(g.KE()),o.glU.triggerActionInUserEditScope("set-tool-default",{source:O.fK})):(o.glU.triggerActionInUserEditScope("clear-tool",{source:O.fK}),n(_.jD()),n(g.En({initialX:0,initialY:0,initialTab:r?.stage!=="FULL"?C.p.MORE:void 0})),(0,f.Cu)({source:O.fK},"action_open_universal_insert_collage_modal"))},[e,r,n])}(N,u);(0,i.useEffect)(()=>{l(A.cd.fetchTemplatesMetadata({key:S.$A.FigJam,orgId:w?.id})),l(A.cd.fetchWidgetsMetadata({key:S.$A.FigJam})),s(!0)},[l,w?.id]);let K=(0,T.oh)(h.fC),$=(0,T.oh)(A.cd.fetchTemplatesMetadata.loadingKeyForPayload({key:S.$A.FigJam})),Y=(0,T.oh)(A.cd.fetchWidgetsMetadata.loadingKeyForPayload({key:S.$A.FigJam})),z=W(!n||K||$||Y,c.map(e=>(0,D.h)(e,k,r??void 0)))?c.map(e=>e.id||"").sort((e,r)=>e.localeCompare(r)).join(""):"loading",j=m&&u?.stage==="MINIMIZED_ZERO"||u?.stage==="MINIMIZED"||u?.stage==="CUT_OFF";return i.createElement(M.XN,{alignment:"CENTER"},i.createElement(F.IB,{toolType:"universal-insert-collage",recordingKey:(0,O.hx)("universal-insert-collage"),isSelected:N,className:y.pb.isGoogleClassroomIntegration()?x.vy:x.qs,onClick:V,ariaLabel:"browse-all-resources-dlt",onboardingKey:P.yl,"data-does-not-dismiss-modal":!0,hasOpenSubmenu:N},r=>i.createElement(M.ti,{isSelected:r,noScaleAnimation:!0,isRightEdge:!0},i.createElement("div",{className:U.Ge,"data-onboarding-key":"figjam-saves","data-element-target":B,"data-cancel-insertable-resource-drag-and-drop":!0},!j&&i.createElement(G,{key:z,recentItems:c,toolbarIconScale:e,isModalOpen:N}),i.createElement(H,{onClick:V,isSelected:N,isHovered:r})))))}function Y(){return i.createElement(M.XN,{alignment:"CENTER"},i.createElement("div",{"data-element-target":B,className:U.V6},i.createElement(P.Hm,null)))}(0,i.memo)(function({toolbarIconScale:e}){return i.createElement(u.tH,{fallback:i.createElement(Y,null),boundaryKey:"UniversalInsertCollage"},i.createElement($,{toolbarIconScale:e}))})},548785:(e,r,n)=>{var i=n(922827),a=n(966712);n(939863),n(511080),(0,a.ck)("207bc31b9911b06b2b85797781d0a68486b15dc6"),(0,a.ck)("476a2d6160ae8dc502e8458d538777675394443b"),(0,a.ck)("06cceafc7034bc35db5fb309ab70717615526a5c"),(0,a.ck)("5ab93eef0010c3b6af23e4c8fd15e3f427a8799a"),(0,a.ck)("98d711f562ff8f5c043c5c622ef61f3654da25cb"),(0,a.ck)("45389442e64125e09f25fc9a0eaf4bc27e4da760"),(0,a.ck)("ac68553557253b75a1bfc3ad0996bcbacefa8650"),i.daH.BLACK,i.daH.GRAY_DARK,i.daH.GRAY_LIGHT,i.daH.RED,i.daH.ORANGE,i.daH.YELLOW,i.daH.GREEN,i.daH.BLUE,i.daH.VIOLET,i.daH.WHITE,Array.from(new Map([["SQUARE",i.NLJ.SHAPE_WHITEBOARD_SQUARE],["ELLIPSE",i.NLJ.SHAPE_WHITEBOARD_ELLIPSE],["ROUNDED_RECTANGLE",i.NLJ.SHAPE_WHITEBOARD_ROUNDED_RECTANGLE],["DIAMOND",i.NLJ.SHAPE_WHITEBOARD_DIAMOND],["TRIANGLE_UP",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_UP],["TRIANGLE_DOWN",i.NLJ.SHAPE_WHITEBOARD_TRIANGLE_DOWN],["PARALLELOGRAM_RIGHT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_RIGHT],["PARALLELOGRAM_LEFT",i.NLJ.SHAPE_WHITEBOARD_PARALLELOGRAM_LEFT],["ENG_DATABASE",i.NLJ.SHAPE_WHITEBOARD_ENG_DATABASE],["ENG_QUEUE",i.NLJ.SHAPE_WHITEBOARD_ENG_QUEUE],["ENG_FILE",i.NLJ.SHAPE_WHITEBOARD_ENG_FILE],["ENG_FOLDER",i.NLJ.SHAPE_WHITEBOARD_ENG_FOLDER],["TRAPEZOID",i.NLJ.SHAPE_WHITEBOARD_TRAPEZOID],["STAR",i.NLJ.SHAPE_WHITEBOARD_STAR],["SHIELD",i.NLJ.SHAPE_WHITEBOARD_SHIELD],["HEXAGON",i.NLJ.SHAPE_WHITEBOARD_HEXAGON],["PENTAGON",i.NLJ.SHAPE_WHITEBOARD_PENTAGON],["OCTAGON",i.NLJ.SHAPE_WHITEBOARD_OCTAGON],["PLUS",i.NLJ.SHAPE_WHITEBOARD_PLUS],["PREDEFINED_PROCESS",i.NLJ.SHAPE_WHITEBOARD_PREDEFINED_PROCESS],["MANUAL_INPUT",i.NLJ.SHAPE_WHITEBOARD_MANUAL_INPUT],["CHEVRON",i.NLJ.SHAPE_WHITEBOARD_CHEVRON],["DOCUMENT_SINGLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_SINGLE],["DOCUMENT_MULTIPLE",i.NLJ.SHAPE_WHITEBOARD_DOCUMENT_MULTIPLE],["ARROW_LEFT",i.NLJ.SHAPE_WHITEBOARD_ARROW_LEFT],["ARROW_RIGHT",i.NLJ.SHAPE_WHITEBOARD_ARROW_RIGHT],["SUMMING_JUNCTION",i.NLJ.SHAPE_WHITEBOARD_SUMMING_JUNCTION],["OR",i.NLJ.SHAPE_WHITEBOARD_OR],["SPEECH_BUBBLE",i.NLJ.SHAPE_WHITEBOARD_SPEECH_BUBBLE],["INTERNAL_STORAGE",i.NLJ.SHAPE_WHITEBOARD_INTERNAL_STORAGE],["MINDMAP_TREE_NUCLEUS",i.NLJ.SHAPE_WHITEBOARD_MINDMAP_TREE_NUCLEUS]]),([e,r])=>[r,e])},972283:(e,r,n)=>{n.d(r,{AH:()=>x});var i=n(411855),a=n(188507),o=n(922827),s=n(629019),l=n.n(s),c=n(966712),d=n(563706),u=n(163023),m=n(939863),p=n(145519),h=n(625651),_=n(501972),g=n(812821),f=n(701882),E=n(460289),y=n(498606),b=n(511080),v=n(202232),I=n(212981),T=n(383847),S=n(525040),w=n(522322),A=n(509742),C=n(533600);let N="delightful-toolbar-stamp-button",L={padBottom:30,height:512},O=100*L.padBottom/L.height,R=`calc(${O}% + -14px)`,P=`translateY(${R})`;function D({onClickToOpenWheel:e,leaveVotingSessionAndCloseWheel:r,numVotesRemaining:n,hasRemainingVotes:a}){let[o,s]=(0,i.useState)(!1),c=a&&!d.Ay.isIpad;k({shouldOpenWheelOnHover:c,isHovered:o});let p=a?A.rf:A.he;return i.createElement("button",{className:l()(A.tS,p),onMouseEnter:()=>!d.Ay.isIpad&&s(!0),onMouseLeave:()=>!d.Ay.isIpad&&s(!1),onClick:()=>{c||(a?e():r())},tabIndex:-1},a?i.createElement("span",{className:A._V},(0,m.tx)("voting.delightful_toolbar.votes_remaining",{numVotes:n})):i.createElement(i.Fragment,null,i.createElement(u.B,{className:A.oE,svg:C.A}),i.createElement("span",{className:A._V},(0,m.tx)("voting.delightful_toolbar.no_votes_remaining"))))}function k({shouldOpenWheelOnHover:e,isHovered:r}){let n=e&&r;(0,i.useEffect)(()=>{if(!n)return;let e=setTimeout(()=>x({source:"peeking_vote_wheel_hover",openedViaHover:!0}),100);return()=>clearTimeout(e)},[n])}function M({onClickToOpenWheel:e,isStampToolSelected:r,hasRemainingVotes:n}){let[a,o]=(0,i.useState)(!1),s=i.useRef(null),u=F(),m=function({isHidden:e,wheelRef:r}){let[n,a]=i.useState(!1);return i.useEffect(()=>{if(e){a(!0);return}let n=r.current;if(!n){a(!1);return}let i=()=>{a(!1),n.removeEventListener("transitionend",i)};return n.addEventListener("transitionend",i),()=>{n.removeEventListener("transitionend",i)}},[e,r]),e||n}({isHidden:u,wheelRef:s}),p=n&&!d.Ay.isIpad;k({shouldOpenWheelOnHover:p,isHovered:a}),(0,i.useEffect)(()=>{let e=s.current;if(!e)return;let r={transform:`${P} scale(1.05)`},n={transform:`${P} scale(1)`},i=new Animation(new KeyframeEffect(e,[{transform:"translateY(100%) scale(0.1)"},r],{duration:450,easing:"ease-out"})),a=new Animation(new KeyframeEffect(e,[r,n],{duration:200,easing:"ease-in-out"})),o=new Animation(new KeyframeEffect(e,[n,n],{duration:400})),l=new Animation(new KeyframeEffect(e,[n,{}],{duration:300,easing:"cubic-bezier(0.37, 0, 0.48, 1.33)"}));return i.play(),i.finished.then(()=>a.play()).catch(()=>{}),a.finished.then(()=>o.play()).catch(()=>{}),o.finished.then(()=>l.play()).catch(()=>{}),()=>{i.cancel(),o.cancel(),l.cancel()}},[s]);let h=!(r||n);return i.createElement("div",{className:A.$},i.createElement("button",{ref:s,tabIndex:-1,className:l()(A.uA,{[A.hA]:h,[A.wj]:u,[A.tq]:m,[A.FP]:!n}),onMouseEnter:()=>!d.Ay.isIpad&&o(!0),onMouseLeave:()=>!d.Ay.isIpad&&o(!1),onClick:()=>!p&&e(),style:{backgroundImage:`url(${(0,c.ck)("c497ee1c6afcaf44b866a46227b40c8ad62dd143")})`}}))}function F(){return(0,a.d4)(e=>"WHEEL"===e.multiplayerEmoji.type&&["STAMP1","STAMP2"].includes(e.multiplayerEmoji.wheelType))}function x({source:e,openedViaHover:r=!1}){let n=(0,_.Tc)(N),i=(0,_.Tc)(v.HY);if(n||i){let a=n?n.getBoundingClientRect():i.getBoundingClientRect(),o=a.x+a.width/2,s=a.y-(f.l+2)-14;g.CB.handleShortcutPressWithType({viewportX:o,viewportY:s,source:e,openedViaHover:r,wheelType:"STAMP"}),g.CB.handleShortcutRelease(o,s)}}(0,i.memo)(function(){let e=(0,a.wA)(),r=F(),n=(0,a.d4)(e=>e?.mirror?.appModel?.currentTool===o.NLJ.STAMP)||r,s=(0,E.XM)(),c=(0,w.hr)(),d=c>0,u=(0,a.d4)(e=>e.universalInsertModal.showing),m=(0,S.bu)(),_=(0,i.useCallback)(()=>{s&&e(h.H1({votingStage:o.W8Y.NOT_JOINED})),e(p.Ho())},[e,s]),f=(0,i.useCallback)(()=>{r?g.CB.closeWheel():x({source:v.fK})},[r]);return i.createElement("div",{"data-element-target":N,className:l()(A.Zh,A.UJ)},i.createElement(T.IB,{toolType:"stamp",recordingKey:(0,v.hx)("stamp"),isSelected:n,className:A.iE,onClick:f,"data-tooltip-type":y.Ib.LOOKUP,"data-tooltip":"set-tool-stamp",onboardingKey:"stamp",tooltipLocation:s?"below":"above",tooltipOffset:s?{offsetX:0,offsetY:-14}:void 0,"data-tooltip-bottom-flip-margin":s?0:void 0,hasOpenSubmenu:!1},e=>i.createElement(I.gd,{toolType:"stamp",inactiveIcon:i.createElement(b.oV,null),hoveredIcon:i.createElement(b.mS,null),activeIcon:i.createElement(b.dF,null),isSelected:n,isHovered:e})),s&&!u&&!m&&i.createElement(i.Fragment,null,i.createElement(D,{leaveVotingSessionAndCloseWheel:_,onClickToOpenWheel:f,numVotesRemaining:c,hasRemainingVotes:d}),i.createElement(M,{onClickToOpenWheel:f,isStampToolSelected:n,hasRemainingVotes:d})))})},807671:(e,r,n)=>{n.d(r,{J:()=>l});var i=n(411855),a=n(629019),o=n.n(a),s=n(509742);function l({className:e,disabled:r,isDragging:n,children:a,"aria-hidden":l}){return i.createElement("div",{"aria-disabled":r,"aria-hidden":l,className:o()(s.F0,{[e||""]:!!e,[s.FK]:r,[s.Bx]:n}),"data-fullscreen-intercept":!0},a)}},212981:(e,r,n)=>{n.d(r,{gd:()=>o});var i=n(411855);n(629019),n(153234),n(522739),n(939863),n(511080),n(712546);var a=n(844383);function o({toolType:e,inactiveIcon:r,hoveredIcon:n,activeIcon:o,isHovered:s,isSelected:c}){return i.createElement(l,{toolType:e},i.createElement("div",{className:a.g$},c?o:s?n:r))}let s=i.createContext({enableHiding:!1,visibleTool:"text"});function l({toolType:e,children:r}){let n=i.useContext(s);return i.createElement(i.Fragment,null,n.enableHiding&&n.visibleTool!==e?null:r)}},333343:(e,r,n)=>{n.d(r,{XN:()=>s,ti:()=>l});var i=n(411855),a=n(629019),o=n.n(a);function s({alignment:e,children:r,onMouseEnter:n,onMouseLeave:a,innerRef:s}){return i.createElement("div",{className:o()("dlt_submenu--submenuContainer--M4ufs delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--submenuLeftAligned--ADsMj":"LEFT"===e,"dlt_submenu--submenuCenterAligned--ryltJ":"CENTER"===e,"dlt_submenu--submenuRightAligned--kUi5D":"RIGHT"===e}),onMouseEnter:n,onMouseLeave:a,ref:s},r)}function l({isSelected:e,children:r,explicitWidth:n,shouldCenterContent:a,noScaleAnimation:s,isRightEdge:l}){return i.createElement("div",{style:{width:n},className:o()("dlt_submenu--toolBackground--St0Y2 delightful_toolbar--passthruLayout--gz5r2",{"dlt_submenu--toolBackgroundScalingHighlight--LTx6Y":!s,"dlt_submenu--toolBackgroundHighlighted--aUWM5":e,"dlt_submenu--toolBackgroundCenterContent--p466V":a,"dlt_submenu--toolBackgroundRightEdgeHighlight--hqdJJ":!!l})},r)}n(522739),n(47506),n(939863),n(385326),n(116723),n(684690),n(511080),n(712546),n(557558),n(677859),n(948529)},383847:(e,r,n)=>{n.d(r,{IB:()=>y});var i=n(411855),a=n(629019),o=n.n(a),s=n(498750),l=n(153234),c=n(522739),d=n(483990),u=n(672517),m=n(219001),p=n(712546),h=n(751025),_=n(520325),g=n(807671),f=n(509742);let E=(0,i.forwardRef)(({toolType:e,isSelected:r,onClick:n,children:a,tooltipOffset:u={offsetX:0,offsetY:12},tooltipLocation:h="above",className:E,recordingKey:y,onboardingKey:b,ButtonLayout:v=g.J,isDisabled:I=!1,clickOnMouseDown:T=!1,inTabOrder:S=!0,ariaLabel:w,isHovered:A,isEnabledForViewers:C=!1,onMouseEnter:N,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,hasOpenSubmenu:D,testId:k,...M},F)=>{let{state:x,dispatch:U}=(0,i.useContext)(m.nS),B=(0,p.hv)({isEnabledForViewers:C})||I,V=x.draggedTool===e,G=w||M["data-tooltip"],H=e=>{e.preventDefault(),e.stopPropagation(),x.shouldFinishClick&&!T&&n(e)};return i.createElement(c.D8,{className:o()(f.Zh,f.$y,{[f.ll]:B}),recordingKey:y,onMouseEnter:N,onMouseMove:L,onMouseLeave:O,onTouchStart:R,onTouchEnd:P,onPointerDown:B?void 0:e=>{if(e.preventDefault(),e.stopPropagation(),T?(n(e),U({type:"cancel drag"})):U({type:"start click"}),!_.T.RECORD_DETAILED_EVENTS)return l.aH},onClick:B?void 0:H,"data-tooltip-type":V?null:M["data-tooltip-type"],"data-tooltip-submenu-open":D,"data-tooltip":M["data-tooltip"],"data-tooltip-offset-x":M["data-tooltip-offset-x"]??u.offsetX,"data-tooltip-offset-y":M["data-tooltip-offset-y"]??u.offsetY,"data-tooltip-show-above":"above"===h||void 0,"data-tooltip-show-below":"below"===h||void 0,"data-tooltip-show-left":"left"===h||void 0,"data-tooltip-bottom-flip-margin":M["data-tooltip-bottom-flip-margin"],"data-onboarding-key":b,"data-fullscreen-intercept":!0,"data-testid":k},i.createElement(v,{className:E,isHovering:A,isSelected:r,disabled:B,isDragging:V,"aria-hidden":!0},a),i.createElement(c.D8,{className:o()(f.yG,f.dR,{[f.ll]:B,[f.vu]:r,[f.Lt]:"select"===e,[f.sD]:"hand"===e}),onClick:B?void 0:H,onKeyDown:B?void 0:e=>{e.keyCode===s.Uz.ENTER&&x.shouldFinishClick&&!T&&n(e)},forwardedRef:F,role:function(e,r){let n;return e.shouldDemoteDlt?n="presentation":r&&(n="button"),n}(x,S),tabIndex:S&&!B?0:-1,"aria-hidden":!S,"aria-label":G&&S?function(e){try{return(0,d.A)(e)||e}catch(r){return e}}(G):void 0,"aria-disabled":B,"data-fullscreen-intercept":!0}))}),y=(0,i.forwardRef)(({children:e,hasExtraLongHoverTime:r,...n},a)=>{let{isHovered:o,hoverTarget:s,onMouseEnter:l,onMouseMove:c,onMouseLeave:d,onTouchStart:u,onTouchEnd:m}=(0,h.W)(n.onClick,r),p="function"==typeof e?e(o,s):e;return i.createElement(E,{...n,ref:a,isHovered:o,onMouseEnter:l,onMouseLeave:d,onMouseMove:c,onTouchStart:u,onTouchEnd:m},p)});(0,u.tf)(y)},557558:(e,r,n)=>{var i=n(463546);i.lLk.id,i.kp0.id,i.Njd.id,i.MJs.id,i.zoI.id,i.wRI.id,i.Kze.id},184184:(e,r,n)=>{n.d(r,{B:()=>s});var i=n(922827),a=n(716034);let o=i.cxo.SELECTION,s=(0,a.eU)(o)},525040:(e,r,n)=>{n.d(r,{Vi:()=>l,bu:()=>s});var i=n(188507),a=n(922827),o=n(333399);function s(){return!!(0,i.d4)(e=>{let r=e?.mirror?.appModel?.currentTool;return r&&(0,o.L)(r)?r:null})}function l(){return(0,i.d4)(e=>e?.mirror?.appModel?.currentTool===a.NLJ.COMMENTS)}n(548785)},587467:(e,r,n)=>{n.d(r,{qV:()=>l,ym:()=>s});var i=n(988022);let a={toggles_mute:"toggles_mute",changes_volume:"changes_volume"},o=(e,r,n,a)=>{(0,i.ds)(e,r.openFile?.key,r,{...n,multiplayer_count:r.multiplayer.allUsers.length},a)},s=(e,r)=>o(a.toggles_mute,e,{isMuted:r}),l=(e,r)=>o(a.changes_volume,e,{volume:r})},411189:(e,r,n)=>{n.d(r,{$_:()=>c,I8:()=>d,P0:()=>a,_s:()=>o,c4:()=>l,om:()=>u});var i=n(518261);function a(e){let r=[];return e.forEach(e=>{let n=Math.floor(Math.random()*e.cuesheet.tracks.length);e.start_at_ms=e.cuesheet.tracks[n].start_time,r.push(e)}),r}async function o({songID:e,onSuccess:r,onNotFound:n}){try{await i.N.getActive({songID:e}),r()}catch(r){if(404===r.status){n();return}throw console.warn(`Failed to fetch active song with id ${e}: ${r}`),n(),r}}let s=["play","pause","previoustrack","nexttrack","seekbackward","seekforward","seekto","stop"];function l(){return"mediaSession"in navigator&&!!navigator.mediaSession.metadata}function c(e,r){if(!e)return;let{title:n,album_art:i}=e;if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=new window.MediaMetadata({title:n,artist:"FigJam Music",artwork:[{src:i||""}]}),s))try{navigator.mediaSession.setActionHandler(e,()=>{})}catch(r){console.warn(`Attempting to stub out all action handlers for media session, but the media session action '${e}' is not supported`)}r&&navigator.mediaSession.setActionHandler("stop",()=>{r()})}}function d(){if("mediaSession"in navigator){for(let e of(navigator.mediaSession.metadata=null,s))try{navigator.mediaSession.setActionHandler(e,null)}catch(r){console.warn(`Attempting to null all custom action handlers for media session, but the media session action '${e}' is not supported`)}navigator.mediaSession.setActionHandler("play",()=>{})}}function u(){navigator.mediaSession.setActionHandler("play",null)}},728406:(e,r,n)=>{n.d(r,{FR:()=>s,P$:()=>a,YI:()=>o});var i=n(737499);function a(e){return e?e.isPaused?e.timeRemainingMs:e.timeRemainingMs-performance.now()+e.timeOrigin:-1/0}function o(e){return e<10?`0${e}`:`${e}`}function s(){let e=(0,i.F4)();return!!e?.shouldShowTimerOnTheLeft}},68517:(e,r,n)=>{var i=n(627472),a=n(716034),o=n(418956),s=n(286640),l=n(529928),c=n(728406);function d(){let e=(0,s.DN)().get("last-timer-set-time")||180;return{seconds:(0,c.YI)(e%60),minutes:(0,c.YI)(Math.floor(e/60)),lastUsedTime:e,isStopping:!1,lastAction:{type:"reset-state"}}}(0,i.um)(d(),(e,r)=>{let n={...e,lastAction:r};switch(r.type){case"set-seconds":return{...n,seconds:r.seconds};case"set-minutes":return{...n,minutes:r.minutes};case"set-time":return{...n,minutes:r.minutes,seconds:r.seconds};case"add-minutes":let i=Math.min(Math.max(0,parseInt(n.minutes)+r.minutes),99).toString(),a=1===i.length?"0"+i:i;return{...n,minutes:a};case"start-timer":let o=60*parseInt(n.minutes)+parseInt(n.seconds);if(1e3*o<=0)return n;return{...n,lastUsedTime:o};case"reset-state":return d();default:return n}});let u=(0,l.bt)(e=>e.timer),m=(0,a.eU)({});(0,o.yu)((0,a.eU)(e=>(e(m),Math.max(0,Math.ceil((0,c.P$)(e(u).time)/1e3))),(e,r,n)=>{r(m,{})}),({setSelf:e})=>{let r=setInterval(()=>{let r=o.zl.get(u);!r||!r.time||r?.time?.isPaused||e("RECOMPUTE")},200);return()=>clearInterval(r)})},631169:(e,r,n)=>{n.d(r,{V3:()=>A,w:()=>w,HG:()=>C});var i=n(411855);n(188507);var a=n(343887),o=n(139689);n(922827);var s=n(968082),l=n(134288),c=n(323434),d=n(305874),u=n(153234),m=n(355819),p=n(939863),h=n(501114);n(625651);var _=n(501972),g=n(161325),f=n(601607),E=n(634951),y=n(861802),b=n(266023),v=n(599486),I=n(522322);n(74505),n(457630);var T=n(837746),S=n(468951);let w=32,A=7.5,C=256;var N=(e=>(e.DEFAULT="default",e.HOVERED="hovered",e.SELECTED="selected",e.DIMMED="dimmed",e))(N||{}),L=(e=>(e.LARGE="large",e.MEDIUM="medium",e.SMALL="small",e.X_SMALL="xSmall",e))(L||{});function O({clientHeight:e,scrollHeight:r,scrollTop:n}){return 1>Math.abs(r-e-n)}function R({numTotalVotes:e,isMostVoted:r}){return i.createElement("span",{className:S.TK},i.createElement("span",null,(0,p.tx)("voting.pin.votes",{numVotes:e})),r&&i.createElement("img",{src:v.Ys,className:S.C0,alt:(0,p.t)("voting.pin.medal_img_alt")}))}function P({reportWidth:e,numTotalVotes:r,isMostVoted:n,scale:a,padding:o}){let s=i.useRef(null);return i.useLayoutEffect(()=>{let r=s.current;if(r){let{width:n}=r.getBoundingClientRect();window.myEl=r,e(n)}},[s,r,n,a,o.paddingLeft,o.paddingRight,o.paddingTop,o.paddingBottom,e]),i.createElement("div",{className:S.D9,style:{transform:`scale(${a})`},"aria-hidden":!0},i.createElement("span",{style:o,ref:s},i.createElement(R,{numTotalVotes:r,isMostVoted:n})))}function D({userId:e,nodeVotes:r}){let n=r.length>3,a=n?r.slice(0,2):r,o=r.length-2;return i.createElement("li",{key:e,className:S.QE},i.createElement(k,{userId:e}),i.createElement("div",{className:S.WK},a.map(e=>i.createElement(F,{key:e,stampId:e})),n&&i.createElement("span",{className:S._v},o)))}function k({userId:e}){let{user:r,loading:n}=(0,g.wW)(e);return i.createElement(i.Fragment,null,i.createElement(b.v,{userId:e,user:r,loading:n,size:24,loadingClassName:S.SD}),i.createElement(b.m,{userId:e,user:r,loading:n,defaultClassName:S.nT,loadingClassName:S.fK}))}function M({overflowCount:e}){return i.createElement("li",{className:S.Qf},i.createElement("div",{className:S.EA},i.createElement(v.xL,null)),i.createElement("span",{className:S.iG},(0,p.tx)("voting.pin.voter_list_overflow",{numOverflowingVoters:e})))}function F({stampId:e}){let r=(0,d.fU)(),n=(0,f.Fk)((e,r)=>{let n=e.get(r);return n?n.name:null},e),a=(()=>{let e=y.WJ.find(e=>e.label===n);return e&&(0,E.k6)(e,r)||y.tR})(),o=n?(0,p.t)("voting.pin.stamp_preview_alt_with_type",{stampType:n}):(0,p.t)("voting.pin.stamp_preview_alt_without_type");return i.createElement("img",{className:S.O8,src:a,alt:o})}i.memo(function({nodeVoteInfo:e,isMostVoted:r,pinState:n,setIsHovered:d,selectPin:g,deselectPin:f,viewportSize:E,currentUserId:y,recordingKey:b}){let v=(0,i.useRef)(null),C=(0,i.useRef)(null),[N,L]=(0,i.useState)(0),[k,F]=(0,i.useState)(!1),[x,U]=(0,i.useState)(!0),[B,V]=(0,i.useState)(0),[G,H]=(0,i.useState)(!1),K=(0,I.oC)(e),W={large:{paddingTop:"2px",paddingBottom:"2px",paddingLeft:"10px",paddingRight:"10px"},medium:{paddingTop:"1px",paddingBottom:"1px",paddingLeft:"8px",paddingRight:"8px"},small:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"7px",paddingRight:"7px"},xSmall:{paddingTop:"0px",paddingBottom:"0px",paddingLeft:"6px",paddingRight:"6px"}}[E],$={large:1,medium:.9,small:.8,xSmall:.7}[E];(0,i.useEffect)(()=>{if("selected"!==n)return;let e=e=>{(0,_.n3)(e.target,v.current)||f()};return window.addEventListener("click",e),()=>window.removeEventListener("click",e)},[n,f,e.guid]);let Y=r?h.sx.colorBgvotingtertiary.$.backgroundColor:h.sx.colorBg.$.backgroundColor,z={default:{transform:`scale(${$})`,backgroundColor:Y,borderColor:Y,opacity:1,...W},dimmed:{transform:`scale(${$})`,backgroundColor:Y,borderColor:Y,opacity:.5,...W},hovered:{transform:"scale(1)",backgroundColor:Y,borderColor:Y,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"},selected:{transform:"scale(1)",backgroundColor:Y,...h.sx.colorBorderSelectedStrong.$,opacity:1,paddingTop:"8px",paddingBottom:"12px",paddingLeft:"16px",paddingRight:"0px"}},j={default:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},dimmed:{width:"0px",height:"0px",marginLeft:"0px",marginRight:"0px",opacity:0},hovered:{width:T.$tX,height:T.$tX,marginLeft:"8px",marginRight:"12px",opacity:0},selected:{width:T.$tX,height:T.$tX,marginLeft:"8px",marginRight:"12px",opacity:1}},q=(0,i.useMemo)(()=>{let r=(0,I.zi)(y);return Object.entries(e.userIdToNodeVotes).sort((e,n)=>r(e[0],n[0]))},[e.userIdToNodeVotes,y]),Z=q.length>3,X=Z?q.slice(0,2):q,J=Z?q.slice(2):[],Q={hovered:{height:`${w}px`},selected:{height:"auto"}},ee=(0,i.useCallback)(e=>{let r=0!==e;r!==k&&F(r);let n=C.current?.getScrollHeight(),i=C.current?.getTrackHeight(),a=void 0===n||void 0===i||O({clientHeight:i,scrollHeight:n,scrollTop:e});a!==x&&U(a)},[k,x]),et=(0,i.useCallback)(e=>{if(!e||!C.current){F(!1),U(!0);return}let r=C.current.getScrollTop(),n=C.current.getScrollHeight(),i=C.current.getTrackHeight();F(0!==r),U(O({clientHeight:i,scrollHeight:n,scrollTop:r}))},[]);return i.createElement(s.x,{transition:{duration:.1,ease:"easeInOut"}},i.createElement("div",{role:"button",tabIndex:0,className:S.UD,onMouseEnter:()=>d(!0),onMouseLeave:()=>d(!1),onClick:u.rf(b,"click",g),ref:v,style:{transform:`translateX(${10-N}px)`},id:e.guid},i.createElement(l.P.div,{className:S.yM,initial:!1,animate:n,variants:z},i.createElement("p",{className:S.wx},i.createElement(R,{numTotalVotes:K,isMostVoted:r}),i.createElement(l.P.span,{className:S.cG,initial:!1,animate:n,variants:j},"selected"===n&&i.createElement(a.K,{onClick:e=>{e.stopPropagation(),f(),d(!1)},"aria-label":(0,p.t)("general.close")},i.createElement(o.A,null)))),i.createElement(c.N,null,["selected","hovered"].includes(n)&&i.createElement(i.Fragment,null,i.createElement(l.P.div,{className:S.W0,animate:"selected"===n&&k&&!G?"scrolled":"notScrolled",initial:{marginTop:"0px",opacity:0},variants:{notScrolled:{marginTop:"4px",opacity:0},scrolled:{marginTop:"4px",opacity:1}},exit:{marginTop:"0px",opacity:0}}),i.createElement(l.P.div,{className:S.sI,initial:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/$})`},animate:{width:"240px",height:"auto",opacity:1,transform:"scale(1)"},exit:{width:"0px",height:"0px",opacity:0,transform:`scale(${1/$})`}},i.createElement(m.P,{ref:C,maxHeight:w*A,width:240,allowScrollAndZoomOver:!0,onScroll:ee,onCanScrollChange:et,forceRerenderCount:B},i.createElement("ul",{className:S.hQ},X.map(([e,r])=>i.createElement(D,{key:e,userId:e,nodeVotes:r})),Z&&i.createElement(l.P.div,{initial:!1,animate:n,variants:Q,onAnimationStart:()=>H(!0),onAnimationComplete:()=>{H(!1),V(e=>e+1)}},"hovered"===n&&i.createElement(M,{overflowCount:q.length-X.length}),"selected"===n&&J.map(([e,r])=>i.createElement(D,{key:e,userId:e,nodeVotes:r})))))),i.createElement(l.P.div,{className:S.W0,animate:"selected"!==n||x||G?"hide":"show",initial:{opacity:0},variants:{show:{opacity:1},hide:{opacity:0}},exit:{opacity:0}}))))),i.createElement(P,{reportWidth:L,numTotalVotes:K,isMostVoted:r,scale:$,padding:W}))})},599486:(e,r,n)=>{n.d(r,{Ys:()=>o,xL:()=>s});var i=n(411855),a=n(966712);(0,a.ck)("054596349bf8a2ae155aa7818cf2a3cbf483a9f4");let o=(0,a.ck)("295306027f272a9b0931ddec9321361f7cd8299b");function s(){return i.createElement("svg",{width:"20",height:"14",viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.5 3.5C8.5 4.88071 7.38071 6 6 6C4.61929 6 3.5 4.88071 3.5 3.5C3.5 2.11929 4.61929 1 6 1C7.38071 1 8.5 2.11929 8.5 3.5ZM9.5 3.5C9.5 5.433 7.933 7 6 7C4.067 7 2.5 5.433 2.5 3.5C2.5 1.567 4.067 0 6 0C7.933 0 9.5 1.567 9.5 3.5ZM17 5C17 6.10457 16.1046 7 15 7C13.8954 7 13 6.10457 13 5C13 3.89543 13.8954 3 15 3C16.1046 3 17 3.89543 17 5ZM18 5C18 6.65685 16.6569 8 15 8C13.3431 8 12 6.65685 12 5C12 3.34315 13.3431 2 15 2C16.6569 2 18 3.34315 18 5ZM13.2108 10.4215C13.7492 10.1518 14.3569 10 15 10C17.2091 10 19 11.7909 19 14H20C20 11.2386 17.7614 9 15 9C14.1612 9 13.3706 9.20657 12.6763 9.57162C12.8743 9.83933 13.0532 10.1234 13.2108 10.4215ZM12 14H11C11 11.2386 8.76142 9 6 9C3.23858 9 1 11.2386 1 14H0C0 10.6863 2.68629 8 6 8C9.31371 8 12 10.6863 12 14Z"}))}},140871:(e,r,n)=>{n(411855),n(188507),n(138020)},522322:(e,r,n)=>{n.d(r,{hr:()=>s,oC:()=>l,zi:()=>c}),n(411855);var i=n(188507);n(922827),n(563706),n(939863),n(662275),n(198371),n(396226);var a=n(356390);n(335682),n(99506),n(984968),n(300874),n(239671),n(449731),n(624829),n(900073),n(487392),n(368702),n(140871);var o=(e=>(e.FEATURE_DISABLED="featureDisabled",e.ELIGIBLE_WITH_MOVE_FILE_TO_PAID_TEAM="eligibleWithMoveFileToPaidTeam",e.ELIGIBLE_WITH_UPGRADE="eligibleWithUpgrade",e.ELIGIBLE="eligible",e))(o||{});function s(){let e=(0,i.d4)(e=>e.mirror.appModel.votingSessionInfo),r=a.BI.getUserId(),n=r&&e.userIdToVoteStampIds[r]?.length||0;return e.userVoteLimit-n}function l(e){return Object.values(e.userIdToNodeVotes).reduce((e,r)=>e+r.length,0)}function c(e){return function(r,n){return r===e?-1:n===e?1:r.localeCompare(n)}}},487392:(e,r,n)=>{n.d(r,{Fn:()=>i,OO:()=>a}),n(411855),n(188507),n(922827),n(939683),n(625651),n(460289),n(68517),n(900073),n(368702),n(140871);var i=(e=>(e.OPEN="meetings_panel_open",e.CLOSE="meetings_panel_close",e))(i||{}),a=(e=>(e.MEETINGS_TOOLBAR="meetings_toolbar",e.MEETINGS_MINIMIZED="meetings_minimized",e.MEETINGS_PANEL="meetings_panel",e.INSERTS_MENU="inserts_menu",e.QUICK_ACTIONS="quick_actions",e.IPAD_MENU="ipad_menu",e.MAKE_SOMETHING_V2_ONBOARDING="make_something_v2_onboarding",e))(a||{})},42173:(e,r,n)=>{n.d(r,{AF:()=>U,BV:()=>F,Cn:()=>k,Cz:()=>V,Mr:()=>B,TS:()=>D,V_:()=>x,zS:()=>M});var i=n(268853),a=n(922827),o=n(776621),s=n(939863),l=n(428654),c=n(547302),d=n(616121);let u=["base","baseLight","sticky","highlight","widget","pencilUI3"];function m({colorsToCSS:e,lightDisplayColors:r,darkDisplayColors:n}){return{COLOR_TO_CSS:e,CSS_TO_COLOR:new Map(Array.from(e,([e,r])=>[r,e])),LIGHT_DISPLAY:r??e,DARK_DISPLAY:n??e}}let p=a.Hdj.V700,h=new Map;function _(e){return 0===h.size&&function(){let e=a.DV9?.getWhiteboardPaletteTypeToRampValue();if(e)for(let[r,n]of e.entries()){if(!u.includes(r)){(0,o.$D)(i.e.FIGJAM,Error(`${r} doesn't exist in the WhiteboardPaletteType union type`));continue}h.set(r,n)}}(),h.get(e)??p}let g=m({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.GRAY_DARK,d.vh],[a.daH.RED,d.N0],[a.daH.ORANGE,d.qm],[a.daH.YELLOW,d.Sb],[a.daH.GREEN,d.RO],[a.daH.BLUE,d.k0],[a.daH.VIOLET,d.zt],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.BLACK,d.Ws],[a.daH.GRAY_DARK,d._M],[a.daH.BLUE,d.jc],[a.daH.VIOLET,d.mO],[a.daH.WHITE,d.az],[a.daH.RED,d.Af],[a.daH.ORANGE,d.n7],[a.daH.YELLOW,d.p5],[a.daH.GREEN,d.R2]])});function f(e=!1){return a.Ez5?.uiState().showUI3Colors.getCopy()&&!e?function(){let e=_("base");return m({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.GRAY_DARK,d.vh],[a.daH.YELLOW,(0,c.W)(c.r.YELLOW,e)],[a.daH.ORANGE,(0,c.W)(c.r.ORANGE,e)],[a.daH.RED,(0,c.W)(c.r.RED,e)],[a.daH.PINK,(0,c.W)(c.r.PINK,e)],[a.daH.VIOLET,(0,c.W)(c.r.VIOLET,e)],[a.daH.BLUE,(0,c.W)(c.r.BLUE,e)],[a.daH.TEAL,(0,c.W)(c.r.TEAL,e)],[a.daH.GREEN,(0,c.W)(c.r.GREEN,e)],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():g}let E=m({colorsToCSS:new Map([[a.daH.GRAY,d.Z6],[a.daH.GRAY_LIGHT,d.xr],[a.daH.RED_LIGHT,d.Po],[a.daH.ORANGE_LIGHT,d.is],[a.daH.YELLOW_LIGHT,d.Qw],[a.daH.GREEN_LIGHT,d.bu],[a.daH.BLUE_LIGHT,d.oW],[a.daH.VIOLET_LIGHT,d.Py]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.GRAY,d._M],[a.daH.GRAY_LIGHT,d.A4],[a.daH.BLUE_LIGHT,d.X8],[a.daH.VIOLET_LIGHT,d.eN],[a.daH.RED_LIGHT,d._P],[a.daH.ORANGE_LIGHT,d.LL],[a.daH.YELLOW_LIGHT,d.fU],[a.daH.GREEN_LIGHT,d.c6]])});function y(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("baseLight");return m({colorsToCSS:new Map([[a.daH.GRAY,d.Z6],[a.daH.GRAY_LIGHT,d.U8],[a.daH.YELLOW_LIGHT,(0,c.W)(c.r.YELLOW,e)],[a.daH.ORANGE_LIGHT,(0,c.W)(c.r.ORANGE,e)],[a.daH.RED_LIGHT,(0,c.W)(c.r.RED,e)],[a.daH.PINK_LIGHT,(0,c.W)(c.r.PINK,e)],[a.daH.VIOLET_LIGHT,(0,c.W)(c.r.VIOLET,e)],[a.daH.BLUE_LIGHT,(0,c.W)(c.r.BLUE,e)],[a.daH.TEAL_LIGHT,(0,c.W)(c.r.TEAL,e)],[a.daH.GREEN_LIGHT,(0,c.W)(c.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():E}let b=m({colorsToCSS:new Map([[a.daH.STICKY_GRAY,d.oK],[a.daH.STICKY_RED,d.SW],[a.daH.STICKY_ORANGE,d.B9],[a.daH.STICKY_YELLOW,d.Pp],[a.daH.STICKY_GREEN,d.k7],[a.daH.STICKY_BLUE,d.JI],[a.daH.STICKY_VIOLET,d._x],[a.daH.STICKY_PINK,d.a6],[a.daH.STICKY_GRAY_LIGHT,d.Uw]]),lightDisplayColors:new Map([[a.daH.STICKY_GRAY_LIGHT,d.FQ],[a.daH.STICKY_GRAY,d.fh],[a.daH.STICKY_BLUE,d.yG],[a.daH.STICKY_VIOLET,d.DN],[a.daH.STICKY_RED,d.pZ],[a.daH.STICKY_PINK,d.i4],[a.daH.STICKY_ORANGE,d.Q2],[a.daH.STICKY_YELLOW,d.iU],[a.daH.STICKY_GREEN,d.h3]]),darkDisplayColors:new Map([[a.daH.STICKY_GRAY_LIGHT,d.PQ],[a.daH.STICKY_GRAY,d.T2],[a.daH.STICKY_BLUE,d.o$],[a.daH.STICKY_VIOLET,d.Zz],[a.daH.STICKY_RED,d.$b],[a.daH.STICKY_PINK,d.Q1],[a.daH.STICKY_ORANGE,d.aT],[a.daH.STICKY_YELLOW,d.K4],[a.daH.STICKY_GREEN,d.nL]])});function v(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("sticky");return m({colorsToCSS:new Map([[a.daH.WHITE,d.t1],[a.daH.STICKY_GRAY_UI3,d.Dd],[a.daH.STICKY_YELLOW,(0,c.W)(c.r.YELLOW,e)],[a.daH.STICKY_ORANGE,(0,c.W)(c.r.ORANGE,e)],[a.daH.STICKY_RED,(0,c.W)(c.r.RED,e)],[a.daH.STICKY_PINK,(0,c.W)(c.r.PINK,e)],[a.daH.STICKY_VIOLET,(0,c.W)(c.r.VIOLET,e)],[a.daH.STICKY_BLUE,(0,c.W)(c.r.BLUE,e)],[a.daH.STICKY_TEAL,(0,c.W)(c.r.TEAL,e)],[a.daH.STICKY_GREEN,(0,c.W)(c.r.GREEN,e)]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():b}let I=m({colorsToCSS:new Map([[a.daH.HIGHLIGHT_GRAY,d.g$],[a.daH.HIGHLIGHT_RED,d.vD],[a.daH.HIGHLIGHT_ORANGE,d.Ah],[a.daH.HIGHLIGHT_YELLOW,d.wO],[a.daH.HIGHLIGHT_GREEN,d.Td],[a.daH.HIGHLIGHT_BLUE,d.qH],[a.daH.HIGHLIGHT_VIOLET,d.fV],[a.daH.HIGHLIGHT_WHITE,d.nG]]),lightDisplayColors:new Map([[a.daH.HIGHLIGHT_RED,d.qt],[a.daH.HIGHLIGHT_YELLOW,d.DE],[a.daH.HIGHLIGHT_GREEN,d.ev],[a.daH.HIGHLIGHT_BLUE,d.vY],[a.daH.HIGHLIGHT_VIOLET,d.gn],[a.daH.HIGHLIGHT_ORANGE,d.xu],[a.daH.HIGHLIGHT_GRAY,d.AN],[a.daH.HIGHLIGHT_WHITE,d.wl]]),darkDisplayColors:new Map([[a.daH.HIGHLIGHT_RED,d.qt],[a.daH.HIGHLIGHT_YELLOW,d.DE],[a.daH.HIGHLIGHT_GREEN,d.ev],[a.daH.HIGHLIGHT_BLUE,d.vY],[a.daH.HIGHLIGHT_VIOLET,d.gn],[a.daH.HIGHLIGHT_ORANGE,d.xu],[a.daH.HIGHLIGHT_GRAY,d.AN],[a.daH.HIGHLIGHT_WHITE,d.wl]])}),T=m({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.RED,d.N0],[a.daH.ORANGE,d.qm],[a.daH.YELLOW,d.Sb],[a.daH.GREEN,d.RO],[a.daH.BLUE,d.k0],[a.daH.VIOLET,d.zt],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:new Map([[a.daH.BLACK,d.Ws],[a.daH.BLUE,d.jc],[a.daH.VIOLET,d.mO],[a.daH.WHITE,d.az],[a.daH.RED,d.Af],[a.daH.ORANGE,d.n7],[a.daH.YELLOW,d.p5],[a.daH.GREEN,d.R2]])});function S(){return a.Ez5?.uiState().showUI3Colors.getCopy()?function(){let e=_("pencilUI3");return m({colorsToCSS:new Map([[a.daH.BLACK,d.jR],[a.daH.RED,(0,c.W)(c.r.RED,e)],[a.daH.ORANGE,(0,c.W)(c.r.ORANGE,e)],[a.daH.YELLOW,(0,c.W)(c.r.YELLOW,e)],[a.daH.GREEN,(0,c.W)(c.r.GREEN,e)],[a.daH.BLUE,(0,c.W)(c.r.BLUE,e)],[a.daH.VIOLET,(0,c.W)(c.r.VIOLET,e)],[a.daH.WHITE,d.t1]]),lightDisplayColors:void 0,darkDisplayColors:void 0})}():T}a.daH.BLACK,a.daH.WHITE,a.daH.GRAY_DARK,a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.BLUE,a.daH.BLUE_LIGHT,a.daH.VIOLET,a.daH.VIOLET_LIGHT,a.daH.RED,a.daH.RED_LIGHT,a.daH.ORANGE,a.daH.ORANGE_LIGHT,a.daH.YELLOW,a.daH.YELLOW_LIGHT,a.daH.GREEN,a.daH.GREEN_LIGHT,a.daH.PINK,a.daH.PINK_LIGHT,a.daH.INDIGO,a.daH.INDIGO_LIGHT,a.daH.COBALT,a.daH.COBALT_LIGHT,a.daH.TEAL,a.daH.TEAL_LIGHT,a.daH.OLIVE,a.daH.OLIVE_LIGHT,a.daH.STICKY_GRAY_LIGHT,a.daH.STICKY_GRAY,a.daH.STICKY_GRAY_UI3,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_RED,a.daH.STICKY_PINK,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_COBALT,a.daH.STICKY_INDIGO,a.daH.STICKY_TEAL,a.daH.STICKY_OLIVE,a.daH.STICKY_LIME,a.daH.HIGHLIGHT_RED,a.daH.HIGHLIGHT_YELLOW,a.daH.HIGHLIGHT_GREEN,a.daH.HIGHLIGHT_BLUE,a.daH.HIGHLIGHT_VIOLET,a.daH.HIGHLIGHT_ORANGE,a.daH.HIGHLIGHT_GRAY,a.daH.HIGHLIGHT_WHITE;let w=[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.GREEN,a.daH.TEAL,a.daH.BLUE,a.daH.VIOLET,a.daH.PINK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.WHITE],A=[a.daH.BLACK,a.daH.GRAY_DARK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE],C=[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.GREEN_LIGHT,a.daH.TEAL_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT,a.daH.PINK_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT],N=[a.daH.GRAY,a.daH.GRAY_LIGHT,a.daH.RED_LIGHT,a.daH.ORANGE_LIGHT,a.daH.YELLOW_LIGHT,a.daH.GREEN_LIGHT,a.daH.BLUE_LIGHT,a.daH.VIOLET_LIGHT],L=[a.daH.BLACK,a.daH.RED,a.daH.ORANGE,a.daH.YELLOW,a.daH.GREEN,a.daH.BLUE,a.daH.VIOLET,a.daH.WHITE],O=[a.daH.STICKY_GRAY,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW,a.daH.STICKY_GREEN,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK,a.daH.STICKY_GRAY_LIGHT],R=[a.daH.WHITE,a.daH.STICKY_GRAY_UI3,a.daH.STICKY_GREEN,a.daH.STICKY_TEAL,a.daH.STICKY_BLUE,a.daH.STICKY_VIOLET,a.daH.STICKY_PINK,a.daH.STICKY_RED,a.daH.STICKY_ORANGE,a.daH.STICKY_YELLOW],P=[a.daH.HIGHLIGHT_GRAY,a.daH.HIGHLIGHT_RED,a.daH.HIGHLIGHT_ORANGE,a.daH.HIGHLIGHT_YELLOW,a.daH.HIGHLIGHT_GREEN,a.daH.HIGHLIGHT_BLUE,a.daH.HIGHLIGHT_VIOLET,a.daH.HIGHLIGHT_WHITE];function D(e){switch(e){case"widget":case"base":return(a.Ez5?.uiState().showUI3Colors.getCopy()?w:A).map(e=>F(e,"base"));case"baseLight":return(a.Ez5?.uiState().showUI3Colors.getCopy()?C:N).map(e=>F(e,"baseLight"));case"sticky":return(a.Ez5?.uiState().showUI3Colors.getCopy()?R:O).map(e=>F(e,"sticky"));case"highlight":return P.map(e=>F(e,"highlight"));case"pencilUI3":return L.map(e=>F(e,"pencilUI3"))}}function k(e){return"base"===e}function M(e,r,n=a.daH.CUSTOM){let i;let o=l.F.format(e);switch(r){case"widget":case"base":i=f().CSS_TO_COLOR.get(o);break;case"baseLight":i=y().CSS_TO_COLOR.get(o);break;case"sticky":i=v().CSS_TO_COLOR.get(o);break;case"highlight":i=I.CSS_TO_COLOR.get(o);break;case"pencilUI3":i=S().CSS_TO_COLOR.get(o)}return i??n}function F(e,r){let n;switch(r){case"widget":case"base":n=f().COLOR_TO_CSS.get(e);break;case"baseLight":n=y().COLOR_TO_CSS.get(e);break;case"sticky":n=v().COLOR_TO_CSS.get(e);break;case"highlight":n=I.COLOR_TO_CSS.get(e);break;case"pencilUI3":n=S().COLOR_TO_CSS.get(e)}return n?l.F.parse(n):void 0}function x(e,r="base",n=(0,s.t)("whiteboard.colors.custom")){let i=Array.isArray(e)?e[0]:e,o=M(i,r);return"base"===r&&o===a.daH.CUSTOM&&(o=M(i,"baseLight")),function(e){switch(e){case a.daH.BLACK:return(0,s.t)("whiteboard.colors.black");case a.daH.WHITE:return(0,s.t)("whiteboard.colors.white");case a.daH.GRAY_DARK:return(0,s.t)("whiteboard.colors.dark_gray");case a.daH.GRAY:return(0,s.t)("whiteboard.colors.gray");case a.daH.GRAY_LIGHT:return(0,s.t)("whiteboard.colors.light_gray");case a.daH.YELLOW:return(0,s.t)("whiteboard.colors.yellow");case a.daH.YELLOW_LIGHT:return(0,s.t)("whiteboard.colors.light_yellow");case a.daH.ORANGE:return(0,s.t)("whiteboard.colors.orange");case a.daH.ORANGE_LIGHT:return(0,s.t)("whiteboard.colors.light_orange");case a.daH.RED:return(0,s.t)("whiteboard.colors.red");case a.daH.RED_LIGHT:return(0,s.t)("whiteboard.colors.light_red");case a.daH.PINK:return(0,s.t)("whiteboard.colors.pink");case a.daH.PINK_LIGHT:return(0,s.t)("whiteboard.colors.light_pink");case a.daH.VIOLET:return(0,s.t)("whiteboard.colors.violet");case a.daH.VIOLET_LIGHT:return(0,s.t)("whiteboard.colors.light_violet");case a.daH.INDIGO:return(0,s.t)("whiteboard.colors.indigo");case a.daH.INDIGO_LIGHT:return(0,s.t)("whiteboard.colors.light_indigo");case a.daH.COBALT:return(0,s.t)("whiteboard.colors.cobalt");case a.daH.COBALT_LIGHT:return(0,s.t)("whiteboard.colors.light_cobalt");case a.daH.BLUE:return(0,s.t)("whiteboard.colors.blue");case a.daH.BLUE_LIGHT:return(0,s.t)("whiteboard.colors.light_blue");case a.daH.TEAL:return(0,s.t)("whiteboard.colors.teal");case a.daH.TEAL_LIGHT:return(0,s.t)("whiteboard.colors.light_teal");case a.daH.GREEN:return(0,s.t)("whiteboard.colors.green");case a.daH.GREEN_LIGHT:return(0,s.t)("whiteboard.colors.light_green");case a.daH.OLIVE:return(0,s.t)("whiteboard.colors.olive");case a.daH.OLIVE_LIGHT:return(0,s.t)("whiteboard.colors.light_olive");case a.daH.LIME:return(0,s.t)("whiteboard.colors.lime");case a.daH.LIME_LIGHT:return(0,s.t)("whiteboard.colors.light_lime");case a.daH.STICKY_GRAY_LIGHT:return(0,s.t)("whiteboard.colors.light_gray");case a.daH.STICKY_GRAY:case a.daH.STICKY_GRAY_UI3:return(0,s.t)("whiteboard.colors.gray");case a.daH.STICKY_BLUE:return(0,s.t)("whiteboard.colors.blue");case a.daH.STICKY_VIOLET:return(0,s.t)("whiteboard.colors.violet");case a.daH.STICKY_RED:return(0,s.t)("whiteboard.colors.red");case a.daH.STICKY_PINK:return(0,s.t)("whiteboard.colors.pink");case a.daH.STICKY_ORANGE:return(0,s.t)("whiteboard.colors.orange");case a.daH.STICKY_YELLOW:return(0,s.t)("whiteboard.colors.yellow");case a.daH.STICKY_GREEN:return(0,s.t)("whiteboard.colors.green");case a.daH.STICKY_COBALT:return(0,s.t)("whiteboard.colors.cobalt");case a.daH.STICKY_INDIGO:return(0,s.t)("whiteboard.colors.indigo");case a.daH.STICKY_TEAL:return(0,s.t)("whiteboard.colors.teal");case a.daH.STICKY_OLIVE:return(0,s.t)("whiteboard.colors.olive");case a.daH.STICKY_LIME:return(0,s.t)("whiteboard.colors.lime");case a.daH.HIGHLIGHT_RED:return(0,s.t)("whiteboard.colors.pink");case a.daH.HIGHLIGHT_YELLOW:return(0,s.t)("whiteboard.colors.yellow");case a.daH.HIGHLIGHT_GREEN:return(0,s.t)("whiteboard.colors.green");case a.daH.HIGHLIGHT_BLUE:return(0,s.t)("whiteboard.colors.blue");case a.daH.HIGHLIGHT_VIOLET:return(0,s.t)("whiteboard.colors.violet");case a.daH.HIGHLIGHT_ORANGE:return(0,s.t)("whiteboard.colors.orange");case a.daH.HIGHLIGHT_GRAY:return(0,s.t)("whiteboard.colors.gray");case a.daH.HIGHLIGHT_WHITE:return(0,s.t)("whiteboard.colors.white");default:return}}(o)??n}function U(e,r="base"){let n=e+1;switch(r){case"highlight":return(0,s.t)("whiteboard.colors.palette.highlight",{index:n});case"baseLight":return(0,s.t)("whiteboard.colors.palette.light",{index:n});default:return(0,s.t)("whiteboard.colors.palette.base",{index:n})}}function B(e,r="rgba(255, 255, 255, 1)"){return f().COLOR_TO_CSS.get(e)??r}function V(e,r,n){let i;let o={...e,a:1},s=M(o,r);if(s===a.daH.NONE||s===a.daH.CUSTOM)return l.F.format(o);switch(r){case"baseLight":i=y();break;case"sticky":i=v();break;case"highlight":i=I;break;case"pencilUI3":i=S();break;default:i=f()}return("light"===n?i.LIGHT_DISPLAY.get(s):i.DARK_DISPLAY.get(s))??l.F.format(o)}[d.jR,d.xr,d.N0,d.Sb,d.RO].map(e=>l.F.parse(e))},300587:(e,r,n)=>{n.d(r,{ZE:()=>O});var i=n(411855),a=n(629019),o=n.n(a),s=n(568214),l=n(794272),c=n(153234),d=n(522739),u=n(743282),m=n(939863),p=n(428654),h=n(775664),_=n(301462),g=n(694241),f=n(498606),E=n(684690),y=n(677859),b=n(437771),v=n(948529),I=n(96913),T=n(662599),S=n(42173),w=n(345334),A=n(365777),C=n(242145);function N(e){return Array.isArray(e)?1===e.length?e[0]:void 0:e}let L={right:T.nm,center:void 0,left:T.Gu};function O({value:e,onColorChange:r,onOpacityChange:n,recordingKey:a,paletteType:o,additionalContentsTop:s,buttonSize:c,buttonBackground:d,buttonClassName:u,buttonCaretType:m,dropperDisabled:p,optionSize:h,customOpacity:_,ariaLabel:f,alignment:y,inlineButtonTooltip:b,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:I,isColorPopoverOpen:T,shouldDisableDataTooltip:w,setIsColorPopoverOpen:A,positionX:C,positionY:N}){let L=(0,l.R)(e=>e.mirror.selectionProperties.whiteboardNumSelectedByType),O={name:"figjam_node_color_change",properties:{node_type:L&&1===Object.keys(L).length&&Object.keys(L).pop()||"MIXED",...L}},{variations:P,type:D}=(0,E.Z9)(),k=(D===g.Yv.DEFAULT?(0,S.TS)(o):P[o].slice()).map((e,r)=>({option:e,tooltip:D===g.Yv.DEFAULT?(0,S.V_)(e,o):(0,S.AF)(r,o)})),M=k.length;if("base"===o){let e=(D===g.Yv.DEFAULT?(0,S.TS)("baseLight"):P.baseLight).map((e,r)=>({option:e,tooltip:D===g.Yv.DEFAULT?(0,S.V_)(e,"baseLight"):(0,S.AF)(r,"baseLight")}));k.push(...e)}return i.createElement(R,{options:k,value:{option:e},onColorChange:e=>r(e.option),onOpacityChange:n,recordingKey:a,paletteType:o,fixedNumColumns:M,analytics:O,additionalContentsTop:s,buttonSize:c,buttonBackground:d,buttonClassName:u,buttonCaretType:m,dropperDisabled:p,optionSize:h,customOpacity:_,alignment:y,ariaLabel:f,inlineButtonTooltip:b,palettePickerPopoverWrapper:v,onlyShowCustomColorPopover:I,isColorPopoverOpen:T,shouldDisableDataTooltip:w,setIsColorPopoverOpen:A,positionX:C,positionY:N})}function R({value:e,onColorChange:r,onOpacityChange:n,recordingKey:a,additionalContentsTop:o,additionalContentsBottom:l,options:d,inlineButtonTooltip:u,paletteType:p,fixedNumColumns:h,buttonSize:_,buttonBackground:g="dark",buttonClassName:f,buttonCaretType:E="down",dropperDisabled:b,optionSize:T,isDesignInlineMenu:w,analytics:A,customOpacity:C,ariaLabel:N,alignment:L,positionX:O,positionY:R,palettePickerPopoverWrapper:D,shouldDisableDataTooltip:k,isColorPopoverOpen:M,setIsColorPopoverOpen:F,shouldCustomColorPopoverCloseOnEscape:x,hasNonWhiteboardColors:U,onlyShowCustomColorPopover:B,customOptions:V,customOptionsHeader:G}){let[H,K]=i.useState(!1),W={...(Array.isArray(e.option)?e.option[0]:e.option)??s.UE};return C&&(W.a=C),i.useEffect(()=>{F&&F(H)},[H,F]),B||H?i.createElement(I.v,{target:i.createElement(y.$n,{onClick:()=>K(!H),caret:E,active:"light"===g?"LOUD":"NORMAL",recordingKey:(0,c.Pt)(a,"colorSelectorButton"),className:f,tooltip:u||(0,S.V_)(e.option,p,(0,m.t)("whiteboard.inline_menu.color")),role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,p).toLocaleLowerCase()})},i.createElement(v.cd,{size:_,value:e.option,paletteType:p,background:g})),color:W,isOpen:H,onColorChange:e=>{r({option:e})},onOpacityChange:e=>{n&&n(e)},onClose:()=>{K(!1)},theme:"dark",analytics:A,recordingKey:(0,c.Pt)(a,"customColorPopover"),showOpacity:null!=C,alignment:L,positionX:O,positionY:R,dropperDisabled:b,shouldCloseOnEscape:x}):i.createElement(P,{value:e,options:d,onColorChange:r,onCustomColor:()=>K(!0),additionalContentsTop:o,additionalContentsBottom:l,inlineButtonTooltip:u,paletteType:p,buttonSize:_,buttonClassName:f,buttonCaretType:E,buttonBackground:g,optionSize:T,isDesignInlineMenu:w,fixedNumColumns:h,analytics:A,recordingKey:a,ariaLabel:N,alignment:L,palettePickerPopoverWrapper:D,shouldDisableDataTooltip:k,positionX:O,positionY:R,isColorPopoverOpen:M,setIsColorPopoverOpen:F,hasNonWhiteboardColors:U,customOptions:V,customOptionsHeader:G})}function P({value:e,onColorChange:r,onCustomColor:n,recordingKey:a,additionalContentsTop:l,additionalContentsBottom:g,options:I,inlineButtonTooltip:T,paletteType:O,buttonSize:R,buttonClassName:P,buttonCaretType:D="down",buttonBackground:k="dark",optionSize:M,isDesignInlineMenu:F,fixedNumColumns:x,analytics:U,ariaLabel:B,alignment:V="center",palettePickerPopoverWrapper:G,shouldDisableDataTooltip:H,positionX:K,positionY:W,isColorPopoverOpen:$,setIsColorPopoverOpen:Y,hasNonWhiteboardColors:z,customOptions:j,customOptionsHeader:q}){let Z=i.useRef((0,u.g)()),X=i.useRef((0,u.g)()),J=N(e.option),Q=(0,E.iN)(J,O),ee=(0,E.iN)(J,"baseLight")&&"base"===O,et=z?function(e,r){try{return!r.find(r=>{let n=N(r.option),i=N(e.option);return n&&i&&(0,s.DA)(n,i)})}catch(e){return console.error(e),!1}}(e,I):Q&&ee,er=()=>{$&&n()},en=r=>et?i.createElement(d.GG,{id:X.current,...H?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":(0,m.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()(C.s,{[A.H]:r}),key:"custom-color",role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),recordingKey:(0,c.Pt)(a,"colorSelectorCustomOption"),onPointerUp:er},i.createElement(v.cd,{swatchStyle:{border:"1px solid rgba(0, 0, 0, 0.2)",boxSizing:"border-box",boxShadow:"none"},value:e.option,selectionState:"selected_custom",paletteType:O,background:"dark",size:"medium"})):i.createElement(d.GG,{id:X.current,key:"custom-color",recordingKey:(0,c.Pt)(a,"colorSelectorCustomOption"),onPointerUp:er,role:"option",tabIndex:-1,"aria-label":(0,m.t)("whiteboard.colors.custom"),className:o()(C.s,{[A.H]:r})},i.createElement(v.ZI,{shouldDisableDataTooltip:H})),{derivedNumColumnsInGrid:ei,swatchGrid:ea}=(({fixedNumColumns:e})=>{if(e)return{swatchGrid:(0,v.Wj)(e,B,Z.current),derivedNumColumnsInGrid:e};let{swatchGrid:r,numColumns:n}=(0,v.lX)(I.length,B,Z.current);return{derivedNumColumnsInGrid:n,swatchGrid:r}})({fixedNumColumns:x});return i.createElement(b.Fn,{value:e,onChange:e=>{r(e),U&&_.F.trackFromFullscreen("figjam_node_color_change",{source:"default",color:h.z5.format(e.option),...U.properties})},options:I,renderOption:({value:e,onClick:r,id:n,isSelected:s,isFocused:l})=>i.createElement(d.GG,{id:n,...H?{}:{"data-tooltip-type":f.Ib.TEXT,"data-tooltip":e.tooltip||(0,S.V_)(e.option,O),"data-tooltip-show-above":!0},className:o()(C.s,{[A.H]:l}),key:p.F.format(e.option)+e.tooltip,"data-testid":"colorMenuOption",role:"option","aria-label":e.tooltip||(0,S.V_)(e.option,O),onPointerUp:e=>{$&&r(e)},recordingKey:(0,c.Pt)(a,"colorSelectorOption",p.F.format(e.option)),tabIndex:-1},i.createElement(v.cd,{value:e.option,selectionState:s?"selected":"unselected",paletteType:O,size:M,background:"dark"})),renderButton:({value:e,ref:r,onClick:n,onKeyDown:o,active:s,activeOptionId:l})=>i.createElement(y.$n,{role:"combobox",ariaLabel:(0,m.t)("whiteboard.inline_menu.color_selector_label",{currentColor:(0,S.V_)(e.option,O).toLocaleLowerCase()}),onPointerDown:n,onKeyDown:o,ariaActiveDescendant:l,ariaControls:Z.current,caret:D,active:s?"light"===k?"LOUD":"NORMAL":"NONE",recordingKey:(0,c.Pt)(a,"colorSelectorButton"),tooltip:T||(0,S.V_)(e.option,O,(0,m.t)("whiteboard.inline_menu.color")),isDesignInlineMenu:F,isNewSubmenu:"light"===k,className:P},i.createElement(v.cd,{size:R,value:e.option,paletteType:O,background:k,ref:r})),optionEquality:(e,r)=>!(Array.isArray(e.option)||Array.isArray(r.option))&&(0,s.DA)(e.option,r.option),OptionWrapper:ea,PopoverWrapper:G||b.wM,additionalOptions:(e=!1)=>i.createElement(w.R,{customOption:en(e),paletteType:O,numOptions:I.length,numColumns:ei}),additionalOptionId:X.current,additionalOptionOnChange:n,additionalContentsTop:l,additionalContentsBottom:g,positionX:K??L[V],positionY:W,onToggleMenuOpen:Y,customOptions:j,customOptionsHeader:q})}},677859:(e,r,n)=>{n.d(r,{$n:()=>g,W1:()=>_,wv:()=>E});var i=n(411855),a=n(629019),o=n.n(a),s=n(522739),l=n(163023),c=n(498606),d=n(984375),u=n(75888),m=n(553545),p=n(112512),h=n(395397);function _({marginBottom:e,size:r,children:n,padding:a,menuRef:s,ariaLabel:l,role:c,tabIndex:d,ariaHidden:u,onBlurCapture:p,onFocus:h,propagateInputToFullscreen:_,testID:g,focusableDivTestId:f,darkModePreferred:E}){return i.createElement("div",{"aria-label":l,"aria-hidden":u,className:m.bH,role:c,tabIndex:d,ref:s,onBlurCapture:p,onFocus:h,"data-fullscreen-intercept":_,"data-testid":f,"data-preferred-theme":E?"dark":void 0},i.createElement("div",{className:o()(m.zr,{[m.EX]:"small"===r}),style:{paddingRight:a,paddingLeft:a,marginBottom:e},"data-testid":g},n))}i.forwardRef((e,r)=>{let{id:n,svg:a,onClick:s,blurOnClick:c,onKeyDown:d,onMouseEnter:u,onMouseLeave:p,onPointerUp:h,onPointerDown:_,svgWidth:f,svgHeight:E,caret:y="none",size:b,tooltip:v,tooltipShortcutActionKey:I,tooltipType:T,resourceId:S,recordingKey:w,active:A="NONE",focused:C,disabled:N,svgStyle:L,buttonStyle:O,buttonChildrenStyle:R,useOriginalSrcFills_DEPRECATED:P,isNewSubmenu:D,ariaLabel:k,role:M,tabIndex:F,onboardingKey:x,testId:U}=e,{ariaActiveDescendant:B,ariaControls:V}=e;return i.createElement(g,{id:n,onClick:s,onKeyDown:d,onMouseEnter:u,onMouseLeave:p,onPointerUp:h,onPointerDown:_,blurOnClick:c,caret:y,ref:r,size:b,recordingKey:w,active:A,focused:C,disabled:N,className:o()({[m.$9]:N}),tooltip:v,tooltipShortcutActionKey:I,tooltipType:T,resourceId:S,buttonStyle:O,buttonChildrenStyle:R,isNewSubmenu:D,ariaLabel:k,ariaActiveDescendant:B,ariaControls:V,role:M,tabIndex:F,onboardingKey:x,testId:U},i.createElement(l.B,{svg:a,width:f,height:E,style:L,useOriginalSrcFills_DEPRECATED:P}))});let g=i.forwardRef((e,r)=>{let{id:n,children:a,onClick:l,onMouseEnter:p,onMouseLeave:h,onPointerUp:_,onPointerDown:g,onKeyDown:E,blurOnClick:b,disabled:v=!1,caret:I="none",animateCaret:T=!1,size:S="large",buttonStyle:w,buttonChildrenStyle:A,isNewSubmenu:C,isDesignInlineMenu:N,recordingKey:L,active:O="NONE",focused:R,tooltip:P,tooltipShortcutActionKey:D,tooltipType:k,tooltipMaxWidth:M,resourceId:F,testId:x,className:U="",ariaLabel:B,role:V,tabIndex:G,onboardingKey:H}=e,{ariaControls:K,ariaActiveDescendant:W}=e,$=(0,u._r)(),Y=i.Children.toArray(a),z=1===Y.length&&"string"==typeof Y[0].props.children,j=function({tooltip:e,shouldShowTooltips:r,tooltipType:n}){return e&&r?n||c.Ib.TEXT:void 0}({tooltip:P,shouldShowTooltips:$,tooltipType:k}),q="combobox"===V&&"NONE"!==O;return i.createElement(s.GG,{id:n,"aria-label":function({ariaLabel:e,actualTooltipType:r,tooltip:n}){return e??(0,d.En)({"data-tooltip-type":r??c.Ib.TEXT,"data-tooltip":n??""})}({ariaLabel:B,actualTooltipType:j,tooltip:P}),"aria-controls":K,"aria-owns":q?K:void 0,"aria-activedescendant":q?W:void 0,"aria-pressed":"button"===V||null==V?"NONE"!==O:void 0,"aria-checked":"switch"===V?"NONE"!==O:void 0,"aria-expanded":"combobox"===V?"NONE"!==O:void 0,tabIndex:function(e,r){return void 0!==e?e:"option"===r?-1:0}(G,V),role:V,onClick:f(l,v),onKeyDown:f(E,v),onMouseUp:!v&&b?e=>{e.currentTarget.blur()}:void 0,onMouseEnter:f(p,v),onMouseLeave:f(h,v),onPointerUp:f(_,v),onPointerDown:f(g,v),className:o()({[m.x6]:!0,[m.BB]:!0,[m._T]:C,[m.Hh]:N,[m.cN]:"none"!==I&&!!a,[m.Ec]:"none"!==I&&!a,[m.EX]:"small"===S,[m.Pq]:"SOFT"===O,[m.k1]:"NORMAL"===O,[m.F$]:"LOUD"===O,[m.zt]:z,[m.gK]:!v,[m.bI]:R,[U]:!!U}),style:w,forwardedRef:r,recordingKey:L,"data-resource-id":F||void 0,"data-tooltip-show-above":!0,"data-tooltip-type":j,"data-tooltip-max-width":M,"data-tooltip-shortcut-key":D,"data-tooltip":P,"data-fullscreen-intercept":null==E?"true":void 0,"data-onboarding-key":H,dataTestId:x},i.createElement("div",{className:o()({[m.LJ]:z,[m.Qq]:!z,[m.Hh]:N,[m.EX]:"small"===S}),style:A},a),"none"!==I&&i.createElement(y,{caret:I,animateCaret:T,active:O}))});function f(e,r){return r?void 0:e}function E({size:e="tall",margin:r}){return i.createElement("div",{className:m.me,style:{height:"tall"===e?40:28,marginLeft:r,marginRight:r}})}let y=i.memo(({caret:e,animateCaret:r,active:n})=>i.createElement(l.B,{className:o()({[m.OW]:!0,[m.Ln]:r,[m.y9]:r&&"LOUD"===n}),svg:"up"===e?h.A:p.A}))},437771:(e,r,n)=>{n.d(r,{Fn:()=>g,wM:()=>_});var i=n(411855),a=n(433011),o=n(498750),s=n(30637),l=n(743282);n(268537);var c=n(356390),d=n(283942),u=n(677859),m=n(244307),p=n(116481),h=(e=>(e.fontFamilyControl="fontFamilyControl",e))(h||{});function _({children:e,padding:r}){return i.createElement(u.W1,{padding:r},i.createElement("div",{className:p.ec},e))}function g({value:e,onChange:r,options:n,renderOption:u,renderButton:h,optionEquality:g,OptionWrapper:f=function(e,r){return function({children:e}){return i.createElement("div",{id:void 0,role:"listbox","aria-label":void 0,tabIndex:-1,className:p.Wh},e)}}(),additionalOptions:E,additionalOptionId:y,additionalOptionOnChange:b,additionalContentsTop:v,additionalContentsBottom:I,PopoverWrapper:T=_,positionX:S,positionY:w,responsivePositionY:A,popoverClassName:C,onToggleMenuOpen:N,parentComponent:L,customOptions:O,customOptionsHeader:R,overrideMenuOpenState:P,renderButtonRef:D,overrideMenuFocused:k}){let M=(0,i.useRef)(null),[F,x]=(0,i.useState)(!1),U=P?P.isOpenOverride:F,B=P?P.setIsOpenOverride:x,[V,G]=(0,i.useState)(0),[H,K]=(0,i.useState)(!1),W=k?k.focusedIndexOverride:V,$=k?k.setFocusedIndexOverride:G,Y=k?k.isFocusedByKeyboardOverride:H,z=k?k.setIsFocusedByKeyboardOverride:K,j=n.length+(O?O.length:0)+(null!=E?1:0),[q]=(0,i.useState)(()=>{let e=Array(j);for(let r=0;r<n.length;r++)e[r]=(0,l.g)();return null!=E&&(e[n.length]=y),e}),Z=new a.W,[X,J]=(0,i.useState)(!0);return i.useEffect(()=>{N&&N(U)},[U,N]),i.createElement(m.A,{target:h({value:e,ref:D??M,onKeyDown:e=>{switch(e.keyCode){case o.Uz.ESCAPE:U?B(!1):e.currentTarget?.blur();break;case o.Uz.ENTER:U&&(W>=0&&W<n.length?r(n[W],e):W===n.length&&E&&b?.(e));break;case o.Uz.RIGHT_ARROW:case o.Uz.LEFT_ARROW:case o.Uz.UP_ARROW:case o.Uz.DOWN_ARROW:if(!(0,o.sC)(e,0)){(0,d.f7)(e);break}if(z(!0),U&&j){let r=W;(r+=e.keyCode===o.Uz.UP_ARROW||e.keyCode===o.Uz.LEFT_ARROW?-1:1)>=j?r=0:r<0&&(r=j-1),$(r)}else U||B(!0);e.preventDefault(),e.stopPropagation();break;case o.Uz.TAB:z(!1);break;case o.Uz.C:case o.Uz.V:case o.Uz.X:(0,o.Te)(e)&&(c.Y5.triggerAction(e.keyCode===o.Uz.C?"copy":e.keyCode===o.Uz.X?"cut":"paste"),e.stopPropagation(),e.preventDefault());break;default:(0,d.f7)(e)}},onClick:()=>{z(!1),B(!U),L&&"fontFamilyControl"===L&&((0,s.nl)()?J(!0):(J(!1),Z.reset(),Z.scheduleOnce(()=>{J(!0)},250)))},active:U,activeOptionId:null!=W?q[W]:void 0}),onClose:()=>{L&&"fontFamilyControl"===L&&Z.reset(),B(!1)},renderPopoverContents:a=>{let o=(n,i)=>{let a=e=>r(n,e),o=e=>{a(e),B(!1)};return u({value:n,id:q[i],onClick:e=>{(!L||"fontFamilyControl"!==L||X)&&o(e)},isSelected:g?g(n,e):n===e,isFocused:Y&&W===i})},s=n.map(o),l=O?.map((e,r)=>o(e,r+s.length));return l?i.createElement(T,{side:a},v,i.createElement(f,null,s),R,i.createElement(f,null,l,E?.(Y&&W===s.length+l.length)),I):i.createElement(T,{side:a},v,i.createElement(f,null,s,E?.(Y&&W===s.length)),I)},isOpen:U,positionX:S,positionY:w,responsivePositionY:A,className:C})}},948529:(e,r,n)=>{n.d(r,{Wj:()=>v,ZI:()=>E,cd:()=>f,lX:()=>I});var i=n(411855),a=n(629019),o=n.n(a);n(568214);var s=n(153234),l=n(522739),c=n(572206),d=n(163023);n(348425);var u=n(939863),m=n(931770),p=n(498606),h=n(42173),_=n(133999),g=n(501191);let f=i.forwardRef(({value:e,paletteType:r,background:n="dark",size:a="medium",selectionState:s="unselected",swatchStyle:c,onClick:d,recordingKey:u,tooltip:m},g)=>{let f,E=null;return Array.isArray(e)&&e[1]&&(E=i.createElement("div",{className:_.XD,style:{background:(0,h.Cz)(e[1],r,n)},"data-testid":"colorCircle"})),f=Array.isArray(e)?e.length<=2&&e[0]?(0,h.Cz)(e[0],r,n):"rgba(255, 255, 255, 1)":(0,h.Cz)(e,r,n),i.createElement("div",{ref:g,className:o()({[_.C8]:!0,[_.wH]:"selected"===s,[_.DD]:"selected_custom"===s&&"light"===n,[_.Jd]:"selected_custom"===s&&"dark"===n,[_.as]:"large"===a,[_.EX]:"small"===a,[_.s]:"xsmall"===a})},i.createElement("div",{className:_.GW},i.createElement(l.D8,{className:o()(_.nf,{[_.qb]:"light"===n,[_.uB]:"dark"===n}),style:{background:f,...c},onClick:d,recordingKey:u,"data-tooltip-show-above":!0,"data-tooltip-type":m?p.Ib.TEXT:void 0,"data-tooltip":m,"data-testid":"colorCircle","data-clickable":!0}),E))});function E({onClick:e,swatchStyle:r,recordingKey:n,shouldDisableDataTooltip:a,selectionState:c,size:d="medium"}){return i.createElement(l.D8,{...a?{}:{"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.colors.custom"),"data-tooltip-show-above":!0},className:o()({[_.C8]:!0,[_.wH]:"selected"===c,[_.as]:"large"===d,[_.EX]:"small"===d,[_.s]:"xsmall"===d}),onClick:e,recordingKey:(0,s.Pt)(n,"colorSelectorCustomOption")},i.createElement("div",{className:_.GW},i.createElement(l.D8,{className:o()(_.yB,_.uB),style:r,"data-clickable":!0})))}let y=i.forwardRef(({value:e,size:r="medium",selectionState:n="unselected",swatchStyle:a,onClick:s,onPointerUp:c,recordingKey:d,tooltip:u},m)=>i.createElement("div",{ref:m,className:o()({[_.C8]:!0,[_.wH]:"selected"===n,[_.EX]:"small"===r})},i.createElement("div",{className:_.GW},i.createElement(l.D8,{className:o()(_.nf,_.uB),style:{backgroundImage:`url(${e})`,backgroundSize:"auto 100%",...a},onClick:s,onPointerUp:c,recordingKey:d,"data-tooltip-show-above":!0,"data-tooltip-type":u?p.Ib.TEXT:void 0,"data-tooltip":u}))));function b({children:e,numColumns:r=4,ariaLabel:n,id:a}){return i.createElement("div",{className:_.FG,style:{"--columns":r},"aria-label":n,role:"listbox",id:a,"data-fullscreen-intercept":!0},e)}function v(e,r,n){return function({children:a}){return i.createElement(b,{numColumns:e,ariaLabel:r,id:n},a)}}function I(e,r,n){let a;return{swatchGrid:function({children:e}){return i.createElement(b,{numColumns:a,ariaLabel:r,id:n},e)},numColumns:a=e<6?e:6===e?3:e<=8?4:5}}i.forwardRef(({imagePaint:e,background:r,size:n="medium",selectionState:a="unselected",hovered:s,onClick:l,onMouseEnter:h,onMouseLeave:f,onPointerUp:E},b)=>{let[v,I]=i.useState(""),T=i.useCallback(e=>{let r=m.jS(e,new c.Mi((e.originalImageWidth||244)/(e.originalImageHeight||244)*244,244),{r:0,g:0,b:0,a:0});r&&r.pixels&&r.pixelSize&&I(m.Pv(r.pixels,r.pixelSize))},[]);return i.useEffect(()=>{e&&T(e)},[e,T]),i.createElement("div",{style:{position:"relative"},onMouseEnter:h,onMouseLeave:f,"data-tooltip-type":p.Ib.TEXT,"data-tooltip":(0,u.t)("whiteboard.delightful_toolbar.custom_upload"),"data-tooltip-show-above":!0},i.createElement(y,{value:v,size:n,selectionState:a,onClick:l,onPointerUp:E,ref:b}),s&&i.createElement("div",{className:_._F},i.createElement(d.B,{svg:g.A,style:{fill:"dark"===r?"white":void 0},className:o()({[_.RB]:!0,[_.hv]:"light"===r,[_.ft]:"dark"===r,[_.EX]:"small"===n})})))})},662599:(e,r,n)=>{n.d(r,{Mj:()=>p,T1:()=>u,DH:()=>m,Al:()=>l,Gu:()=>c,nm:()=>d});var i=n(411855);n(629019);var a=n(560945),o=n(622422),s=n(676938);let l=(e,r)=>e.x+e.width/2-r.width/2,c=(e,r)=>e.x,d=(e,r)=>e.x+e.width-r.width,u=(e,r,n)=>e.y-r.height-n,m=(e,r,n)=>e.height+e.y+n;function p({targetRect:e,targetRef:r,children:n,onClose:c,onMeasure:d,onMouseEnter:m,onMouseLeave:p,style:h,offset:_=4,positionX:g=l,positionY:f=u,positionXY:E,childRef:y,onPosition:b,frozen:v,setSizeChanged:I}){let[T,S]=i.useState({x:0,y:0}),[w,A]=i.useState(!1),C=i.useRef(null),N=i.useCallback(e=>{let r=0!==e.width||0!==e.height;A(r),d&&d(e),r||S({x:0,y:0})},[d]),L=(0,a.wY)(C,N)??a.cU;(0,s.Y)(c,{ignore:[r?.current,C.current]});let O=(0,o.$)(w)&&w,R=(0,o.$)(L);i.useEffect(()=>I&&I(R),[I,R]);let{x:P,y:D}=T,k=0!==P||0!==D?[P,D]:void 0;(O||w&&!v)&&(E?[P,D]=E(e,L,_,k):(P=g(e,L,_),D=f(e,L,_))),i.useEffect(()=>{S({x:P,y:D})},[P,D]);let{width:M,height:F}=L;return i.useEffect(()=>{w&&b&&b(P,D,{width:M,height:F},_)},[P,D,M,F,b,_,w]),i.createElement("div",{style:{position:"absolute",width:"fit-content",height:"fit-content",transform:`translate3d(${P}px, ${D}px, 0)`,...h,...w?{}:{opacity:0}},onMouseEnter:m,onMouseLeave:p,ref:e=>{C.current=e,y&&y(e)}},n)}},520177:(e,r,n)=>{n.d(r,{w:()=>m});var i=n(716034),a=n(627472),o=n(563706),s=n(809831),l=n(555328),c=n(239671),d=n(222085),u=n(554905);let m=(0,i.eU)(e=>{let r=e(s.u8)===c.nT.Whiteboard,n=e(u.hS);return r&&!n&&!o.Xb}),p=(0,i.eU)(async()=>await d.A.getCommunityShelves({shelfType:l.cS.FIGJAM_SECTION_PRESET_PICKER}).then(e=>e.data.meta));(0,a.Rq)(p)},251344:(e,r,n)=>{n.d(r,{BQ:()=>s});var i=n(738269),a=n(259927);n(128765);var o=n(356390);function s(e,r){if(!e||!e.isSection||!o.Y5.isReady())return!1;let n=e.sectionPresetShelfId,s=e.sectionPresetTemplateId,l=e.name,c=e.hasSectionPresetWithEdits;return!!l&&(r(i.j7({type:a.si,data:{sectionId:e.guid,sectionName:l,initialShelfId:n,initialTemplateId:s,showAlertOnSelect:c}})),!0)}n(106112)},364916:(e,r,n)=>{n.d(r,{Gn:()=>c});var i=n(716034),a=n(418956),o=n(516359);let s=(0,i.eU)(!1);(0,i.eU)(null,(e,r)=>{r(s,!1)});let l=(0,i.eU)({state:"closed"});(0,i.eU)(null,(e,r)=>{r(l,{state:"closed"})}),(0,i.eU)(null,(e,r,{title:n,items:i,fileKey:a})=>{r(l,{state:"open",title:n,items:i,fileKey:a})}),(0,i.eU)(!1);let c=(0,a.E3)(o.Ec,[],{subscribeToChanges:!0})},516359:(e,r,n)=>{n.d(r,{Ec:()=>i});let i="recent-diagramming-shapes-figjam"},964683:(e,r,n)=>{n.d(r,{KE:()=>c}),n(268853);var i=n(922827),a=n(35645),o=n.n(a),s=n(418956);n(776621),n(456363),n(44892),n(173454),n(202232);var l=n(364916);function c(e,r,n){if(r===i.VTL.NO)return;if(r===i.VTL.YES_WITHOUT_REORDER){let r=s.zl.get(l.Gn).map(r=>r.id===e?{...r,lastAddedAtByUserId:{...r.lastAddedAtByUserId,...n?{[n]:Date.now()}:{}}}:r);s.zl.set(l.Gn,r);return}let[[a],c]=o()(s.zl.get(l.Gn),r=>r.id===e),d={id:e,lastAddedAtByUserId:{...a?.lastAddedAtByUserId||{},...n?{[n]:Date.now()}:{}}};s.zl.set(l.Gn,[d,...c])}},787523:(e,r,n)=>{n.d(r,{iH:()=>i}),n(411855),n(188507),n(922827),n(128906),n(963490),n(358145),n(650769),n(151166),n(988022),n(457025),n(114716),n(457630),n(335682),n(309798),n(707465),n(589584),n(83012);var i=(e=>(e[e.TRUE=0]="TRUE",e[e.FALSE=1]="FALSE",e[e.LOADING=2]="LOADING",e))(i||{})},666456:(e,r,n)=>{n.d(r,{bj:()=>v});var i=n(922827),a=n(340818),o=n(716034),s=n(418956),l=n(777078),c=n(373119),d=n(400380);let u=(0,o.eU)(null),m=(0,o.eU)(null),p=(0,o.eU)({x:0,y:0}),h=(0,o.eU)(null),_=(0,o.eU)(!1),g=(0,o.eU)(!1);(0,o.eU)(e=>e(m)),(0,o.eU)(e=>e(_)),(0,o.eU)(e=>e(g)),(0,o.eU)(e=>e(p));let f=(0,o.eU)(!1),E="new_preview",y=null;function b(){y&&y.abort(E),y=null}(0,o.eU)(null,async(e,r,n,a)=>{let o=!e(_)&&(0,d.t)(n.template,e(m));if(e(g)||o||e(f))return!1;r(T),r(_,!0),r(u,a.previewManager),r(m,n.template),b();let s=(y||(y=new TaskController({priority:"background"})),y);function l(r){return scheduler.postTask(()=>!!((0,d.t)(n.template,e(m))&&e(c.w))&&(r(),!0),{signal:s.signal}).catch(e=>{if(e===E)return!1;throw e})}s.setPriority(a.priority);let v=e(u),I=(async()=>{try{let o=await e(w(n)),s=v?.nodeType===i.Z6A.SECTION?v.options:null,c=a?.position||null;if(!await l(()=>i.Hyj.prepareTemplatePreview(o,s,c))||!await l(()=>i.Hyj.insertTemplatePreview(a.moveViewportAfterPreview,a.viewportOptions||null)))return!1;let d=i.Hyj.getTemplatePreviewSize();return r(p,d),r(_,!1),!0}catch(i){throw(0,d.t)(n.template,e(m))&&r(T),i}})();return r(h,I),await I});let v=(0,o.eU)(null,async(e,r,n)=>{let o=e(h);if(!o||e(g))return!1;r(g,!0);try{if(!await o||!e(c.w))return!1;return await scheduler.postTask((0,a.nc)(n.editScopeType,"commit-figjam-template-preview",()=>i.Hyj.commitTemplatePreview(n.selectTemplateAfterCommit,n.moveViewportAfterCommit)),{priority:n.priority}),r(m,null),r(f,!0),r(S),!0}finally{r(g,!1)}}),I=(0,o.eU)(null,(e,r)=>{r(f,!1),e(_)&&(b(),r(T))}),T=(0,o.eU)(null,(e,r)=>{r(m,null),r(h,null),r(_,!1),r(g,!1),e(c.w)&&i.Hyj.clearTemplatePreview()});(0,o.eU)(null,(e,r)=>{r(I),r(T)});let S=(0,o.eU)(null,(e,r)=>{r(u,null),i.Hyj.clearSectionPreviewSupport()}),w=(0,s.Iz)(e=>(0,o.eU)(async()=>await (0,l.dT)(e)),(e,r)=>e.fileKey===r.fileKey&&e.fileVersion===r.fileVersion&&(0,d.t)(e.template,r.template))},83012:(e,r,n)=>{n(939863),n(309798),n(288300),n(161074)},162057:(e,r,n)=>{n.d(r,{O:()=>d});var i=n(411855);n(922827),n(629019),n(189430);var a=n(563706);n(88570);var o=n(809831);n(949632),n(100197),n(498606);var s=n(939863),l=n(422237),c=n(85609);(0,l.ex)("zoom_slider",function(e){let{zoomPercentage:r}=e;return i.createElement("div",{className:c.P},(0,s.tx)("whiteboard.zoom_slider.zoom_percentage",{zoomProportion:r/100}))},e=>({zoomPercentage:Number(e.dataset.tooltipZoomPercentage)}));function d(){return(0,o.ow)()&&!a.Ay.isIpad}},773024:(e,r,n)=>{n.d(r,{B:()=>a});var i=n(263159);let a=(0,n(411855).memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17.923 4.267a.5.5 0 1 0-.846-.534l-5.625 8.907L7.89 8.188a.5.5 0 0 0-.78.624l4 5a.5.5 0 0 0 .813-.045zM5 14.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 .5.5h15a.5.5 0 0 0 .5-.5v-3a.5.5 0 0 0-1 0V17H5z",clipRule:"evenodd"})})})},686754:(e,r,n)=>{n.d(r,{_:()=>c});var i=n(263159),a=n(411855),o=n(903547),s=n(101677);let l=(0,a.createContext)(void 0);l.Provider;let c=(0,a.forwardRef)(({recordingKey:e,children:r,href:n,trusted:c,newTab:d,onClick:u,htmlAttributes:m,...p},h)=>{let _=(0,a.useContext)(l),g=c??function(e){if(!s.A)return!1;try{let r=window.location.origin;return new URL(e,r).origin===r}catch{return!1}}(n)?"noopener":"noopener nofollow noreferrer ugc",f=(0,o.Q)(u||_?e=>{_?.(e),u?.(e)}:void 0,{eventName:"click",recordingKey:e},[u,_]);return(0,i.jsx)("a",{target:d?"_blank":void 0,rel:g,...m,...p,ref:h,onClick:f,href:n,children:r})});c.displayName="LinkPrimitive"},149620:(e,r,n)=>{n.d(r,{Lh:()=>o}),n(263159);var i=n(411855);let a=(0,i.createContext)({close:"Close",dismiss:"Dismiss",loading:"Loading",mixed:"Mixed",select:"Select an option"});function o(e){return(0,i.useContext)(a)[e]}},541594:(e,r,n)=>{n.d(r,{DX:()=>d,Kg:()=>u,PU:()=>l,U1:()=>m}),n(263159);var i=n(411855),a=n(109388),o=n(823988);n(496954);let s=new Set;function l(){return Array.from(s)}let c=(0,i.createContext)(()=>document.body);function d(){let e=(0,i.useContext)(c)();if(!e)throw Error("Attempted to use WindowOutlet before it was rendered. Windows should be rendered on user action or after a delay on page load.");return e}function u({children:e}){let r=d();return(0,a.createPortal)(e,r)}function m(e){let r=(0,i.useRef)(null);return(0,i.useCallback)(n=>{(0,o.c)(e,n),null==n?s.delete(r.current):s.add(n),r.current=n},[e])}u.displayName="WindowOutlet"},219320:(e,r,n)=>{n.d(r,{a:()=>o});var i=n(370927);let a=class{fontResourceStatusChanged(e,r,n){(0,i.dF)(e,r,n)}};function o(){new a}},136880:(e,r,n)=>{function i(e){if(0===e.s)return{r:e.l,g:e.l,b:e.l,a:e.a};let r=e.l<.5?e.l*(1+e.s):e.l+e.s-e.l*e.s,n=2*e.l-r,i=[0,0,0];for(let a=0;a<3;a++){let o=e.h+-(1/3*(a-1));o<0&&o++,o>1&&o--,6*o<1?i[a]=n+(r-n)*6*o:2*o<1?i[a]=r:3*o<2?i[a]=n+(r-n)*(2/3-o)*6:i[a]=n}return{r:i[0],g:i[1],b:i[2],a:e.a}}function a(e){let r=e.r,n=e.g,i=e.b,a=Math.min(Math.min(r,n),i),o=Math.max(Math.max(r,n),i),s=o-a,l=0;o===a?l=0:r===o?l=(n-i)/s:n===o?l=2+(i-r)/s:i===o&&(l=4+(r-n)/s),(l=Math.min(60*l,360))<0&&(l+=360);let c=(a+o)/2;return{h:l/=360,s:o===a?0:c<=.5?s/(o+a):s/(2-o-a),l:c,a:e.a}}function o(e){let r=(e.h-Math.floor(e.h))*6,n=e.v*e.s,i=n*(1-Math.abs(r%2-1)),a=e.s<=0?0:r<1?n:r<2?i:r<3?0:r<4?0:r<5?i:n,o=e.s<=0?0:r<1?i:r<2?n:r<3?n:r<4?i:0,s=e.s<=0?0:r<1?0:r<2?0:r<3?i:r<4?n:r<5?n:i,l=e.v-n;return{r:a+l,g:o+l,b:s+l,a:e.a}}function s(e){let r=Math.max(Math.max(e.r,e.g),e.b),n=r-Math.min(Math.min(e.r,e.g),e.b);return{h:(0===n?0:r===e.r?((e.g-e.b)/n+6)%6:r===e.g?(e.b-e.r)/n+2:(e.r-e.g)/n+4)/6,s:0===r?0:n/r,v:r,a:e.a}}function l(e){return"l"in e?i(e):o(e)}function c(e){return"l"in e?{...e,s:1,l:.5,a:1}:{...e,s:1,v:1,a:1}}function d(e,r){let n=a(e),o=360*n.h;return i({...n,h:(o+r)%360/360})}function u(e){return 255&(e>0?255*e+.5:0)}function m(e,r,n){return u(e)|u(r)<<8|u(n)<<16|-0x1000000}function p(e){return u(e.red)|u(e.green)<<8|u(e.blue)<<16|u(e.alpha)<<24}function h(e){return{red:(255&e)/255,green:(e>>8&255)/255,blue:(e>>16&255)/255,alpha:(e>>24&255)/255}}function _(e,r){let n=e.alpha,i=r.alpha,a=n*(1-i),o=a+i,s=a/o,l=i/o;return{red:e.red*s+r.red*l,green:e.green*s+r.green*l,blue:e.blue*s+r.blue*l,alpha:o}}function g(e){return{red:e.r,green:e.g,blue:e.b,alpha:e.a}}function f(e){return{r:e.red,g:e.green,b:e.blue,a:e.alpha}}function E(e,r){let n=[];for(let i=0;i<3;i++)n.push(e[i][0]*r[0]+e[i][1]*r[1]+e[i][2]*r[2]);return n}function y(e){return b({l:e.l,ax:e.c*Math.cos(360*e.h*Math.PI/180),bx:e.c*Math.sin(360*e.h*Math.PI/180),a:e.a})}function b(e){let r=E([[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],[e.l,e.ax,e.bx]),n=E([[1.2268798733741557,-.5578149965554813,.28139105017721583],[-.04057576262431372,1.1122868293970594,-.07171106666151701],[-.07637294974672142,-.4214933239627914,1.5869240244272418]],r.map(e=>e**3)),i=E([[12831/3959,-329/214,-1974/3959],[-851781/878810,1648619/878810,36519/878810],[705/12673,-2585/12673,705/667]],n).map(function(e){let r=Math.abs(e);return r>.0031308?(e<0?-1:1)*(1.055*Math.pow(r,1/2.4)-.055):12.92*e});return{r:i[0],g:i[1],b:i[2],a:e.a}}n.d(r,{Ad:()=>d,I0:()=>y,Ih:()=>c,QR:()=>m,R0:()=>h,aH:()=>f,au:()=>_,bi:()=>p,kE:()=>o,oB:()=>a,oU:()=>g,oq:()=>b,qN:()=>s,w_:()=>l})},8684:(e,r,n)=>{function i(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}n.d(r,{$C:()=>N,A1:()=>m,A2:()=>G,Ag:()=>O,Bj:()=>W,Bz:()=>j,CJ:()=>el,EU:()=>g,Fe:()=>k,Gh:()=>$,Iz:()=>et,LY:()=>y,Lz:()=>D,RN:()=>a,RU:()=>Y,Rx:()=>F,TC:()=>P,Ud:()=>V,V3:()=>z,Vm:()=>C,WF:()=>K,Z3:()=>M,ZD:()=>T,Zs:()=>H,_L:()=>E,aO:()=>B,b_:()=>ee,be:()=>er,c2:()=>A,d1:()=>en,dJ:()=>J,d_:()=>eo,di:()=>s,eZ:()=>_,jw:()=>c,k0:()=>h,l5:()=>S,lM:()=>R,mk:()=>x,nn:()=>X,o$:()=>o,p6:()=>b,pG:()=>ea,qV:()=>ei,rf:()=>v,rm:()=>l,ry:()=>L,sG:()=>es,tO:()=>d,tg:()=>u,tz:()=>I,uH:()=>Q,vv:()=>Z,w4:()=>w,wm:()=>U,xJ:()=>p,yR:()=>q,yy:()=>f});class a{onMissingEditScope(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onGuardrailViolation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class o{reportEditAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class s{readyToAcceptAutosaveChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasOngoingCommitTask(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}enqueueAutosaveCommit(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}createAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAutosaveManager(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isConnected(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class l{isEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getSuggestion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class c{jsEchoUintValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}jsEchoUint64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Value(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"0"}jsEchoInt64Struct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{uvalue:"0",ivalue:"0"}}jsEchoStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoIntArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoBoolArrayValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoJsonValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}jsEchoJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.")}jsEchoDeeplyNestedJsValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}jsEchoIntMapValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}jsEchoIntSetValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Set}jsEchoOptionalStringValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsEchoOptionalStringStruct(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{valueOpt2:null}}jsEchoFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoNonFastParseableStructValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{jsonValue:"",intValue:0,uintValue:0,int64Value:"0",uint64Value:"0",strValue:"",doubleValue:0,boolValue:!1,guidValue:"-1:-1",structValue:{value:0},arrayIntValue:[],arrayStringValue:[],arrayBoolValue:[],jsValue:void 0}}jsEchoCallbackValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return()=>{}}getObservableCounter(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getObservableArray(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}jsValueTestsDone(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class d{rerunSearch(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getTextMatches(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}rebuildIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logIndex(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setResultInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusAndNavigate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCategoryCounts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReplace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}detectTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}applyTextTransform(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class u{handleMouseDown(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseMove(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMouseUp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createNewCommentAtPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class m{openTemplatePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class p{trackComponentInstanceDetachment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentInstanceInsertion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackStyleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackVariableAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackComponentAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class h{convertEmojiNameToString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearEmojiTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingEmojiTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setEmojiTypeaheadImageSet(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setEmojiTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class _{startChat(...e){if(this.shouldThrow)throw Error("Method not implemented.")}closeWheel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutPress(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleShortcutRelease(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class g{requestEditorType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDeviceInfoForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}presetDeviceSupportsTouch(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}sizeMatchesFramePreset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getFramePresetForSize(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCurrentFileName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}isUserPresent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}backToFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentIsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fullscreenIsReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isFontListLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}afterFontsLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFileVersion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSketchFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewWhiteboardFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSitesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openNewSlidesFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFontSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}attemptedSketchFileDrop(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openExportSettingsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPdfExportSettingsModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleBrowseAllResourcesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openPreferencesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNudgeAmountPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openFplDebug(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hidePicker(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createFeedPost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}findInspiration(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openQuickActionsAssetsTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}inspectFragment(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleSignedOutEditAttempt(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hasUnsavedChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}shouldSuppressUnsavedChangesUI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}toggleInteractionRecorderVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showCanvasContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectLayerContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTextEditModeContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRulerGuideContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showSelectionContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showLeftPanelTab(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTeamLibraryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleComponentInsertModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleVariablesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPublishDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTemplatePublishModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forcePublishStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppPush(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAutosaveVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToInstanceVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showReturnToVariantVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteWidgetsAsSublayersVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAiContentFillSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMagicLinkSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showUpscaleImageSuggestedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPushOverridesVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showVisualBellInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}NOT_LOCALIZED_showMobileNativeToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMobileNativeToastLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellForMultiEdit(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUndo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellLocalizedInf(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithUrlButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissEphemeralVisualBells(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithDelayLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showVisualBellWithCloseButtonLocalized(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearVisualBellType(...e){if(this.shouldThrow)throw Error("Method not implemented.")}dismissMobileMediaLoadingToast(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getNaturalStyleKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalizedString(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}closeManageMemoryModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPasteLoadingIndicatorAndPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPromptToMoveLibraryItems(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateViewportInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideMissingFontDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}canUseClipboardAPI(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}readFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}clipboardHasUnsanitizedPng(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}decodePackedHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}decodeMetadataFromHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}detectSpreadsheetDataInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}writeDataToClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}sendSerializedClipboardDataToS3(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSerializedClipboardDataFromS3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getKeyboardLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}setKeyboardLayoutPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveUseNumbersForOpacityPreference(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectedStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateStyleThumbnail(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSavepoint(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}showSavepointModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showBrowserAlert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleHistoryMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showViewChangesNotification(...e){if(this.shouldThrow)throw Error("Method not implemented.")}togglePerfHUDVisibility(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleFakeMPActivity(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleTSMERConfig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showImageScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showGIFConvertedAndScaledDownWarning(...e){if(this.shouldThrow)throw Error("Method not implemented.")}checkForImageBackgroundRemoval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usedKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startRenamingPages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}insertComponentOrShowError__DEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.")}fetchComponentBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}fetchComponentBufferForSevRepair(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}getLatestPublishedVersionHashForComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLatestPublishedVersionForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}fetchVariableSetBuffers(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}startLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}finishLoadingDroppedImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}toggleMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackInteractiveSlideElementInsertedForSprig(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCopyExportRestricted(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInWorkshopMode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}requestOpenExternalSourceFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}requestOpenExternalSourceFileLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}validateAndParseURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}navigateToURL(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHyperlinkPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateHyperlinkPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleUserClickOnHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setCanvasMentionPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateCanvasMentionPopupPosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openHelp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openSupportForum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTutorials(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}keyboardWillShowWithHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.")}runLastPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMovePagesJob(...e){if(this.shouldThrow)throw Error("Method not implemented.")}retrieveMetadataAndSelectBrokenFixedScrollingNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppQueueFileForWriting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}desktopAppWriteFiles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppExportFile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCutEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobileCopyEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMobilePasteEnabled(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mobileAppShowContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDefaultOnOTFeatures(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}copyLinkToPage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateLinkToNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}generateLinkToRemoteNode(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalGUIDFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLocalVersionIdFromUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}syncPencilStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncHighlighterStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncToolStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncCurrentToolSetSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVideoShouldAutoplay(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendActiveStackRegionAnalytics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getUserName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getIsEmojiWheelOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}openStartingPointFlowInPrototypeViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}focusPrototypeStartingPointPanelToEditName(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setSentryTag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openTimerModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resendMusic(...e){if(this.shouldThrow)throw Error("Method not implemented.")}activateVotingStampTool(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setActiveAgendaItemId(...e){if(this.shouldThrow)throw Error("Method not implemented.")}escapeAndSaveCSVData(...e){if(this.shouldThrow)throw Error("Method not implemented.")}parseCsvStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndCreateNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHtmlStringAndTriggerSmartPaste(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}parseHTMLStringIntoLineDirectionalities(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isNavigatorClipboardWriteSupported(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}onNodePositionChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onSectionPresetPickerCreated(...e){if(this.shouldThrow)throw Error("Method not implemented.")}generateEmbed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}generateWidgetFromURL(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}handleAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startExportAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendEventToResponsiveContentHandler(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onAgendaChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onFigjamStarterKitAction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canUploadAndEditVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getVariableSetNumberOfModesAllowed(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultStateKeyForStateGroup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}selectPublishedAssetGuids(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}handleZoomActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handlePanActionTriggeredToSetOnboardingFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleNodeCountReachedForMoveDraft(...e){if(this.shouldThrow)throw Error("Method not implemented.")}selectLocalStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}formatDateTime(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setFigjamStarterKitBoundingBox(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadedCompareChanges(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldViewOnlyJiggle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}upsellLibrariesHandleConsecutivePaste(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onPlaygroundNodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}triggerHaptics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logEnterMode(...e){if(this.shouldThrow)throw Error("Method not implemented.")}evaluateMathExpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}changeDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardToolToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addWhiteboardDiagrammingShapeToRecents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTilesRendered(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateTable(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onEditTableText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragStart(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onNodeDragEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onCreateSticky(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onDifferentSectionClicked(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onConnectDiagramShapeWithConnector(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onTileRendererChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}afterComputeViewportSettings(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getNextQueryRequestId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}afterQueryCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}rejectAllSceneGraphQueries(...e){if(this.shouldThrow)throw Error("Method not implemented.")}movedSingleNodeVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createSlideAfterFocusedSlide(...e){if(this.shouldThrow)throw Error("Method not implemented.");return"-1:-1"}generateFlappFromPastedText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabled(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiActionMetered(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isAiDisabledFigJam(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isInAiExperimentOrGrantlist(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}removeImageBackground(...e){if(this.shouldThrow)throw Error("Method not implemented.")}upscaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}autoRenameLayersDevHandoff(...e){if(this.shouldThrow)throw Error("Method not implemented.")}regenerateText(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debugMagicLinkAIModel(...e){if(this.shouldThrow)throw Error("Method not implemented.")}openMakePrototypeModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isMagicLinkDone(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}isMagicLinkDoneToastShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}linkToComponent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getLabValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}hasAiRenameLayersPermission(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}logFullscreenActionToDatadogRum(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class f{fontResourceStatusChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class E{connect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}disconnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}send(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class y{getDefaultDocumentColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCanvasColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getUserColorProfile(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class b{getIsExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setNodesReady(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setNodesCompleted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forwardExportsToExtension(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showStatusContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isStatusContextMenuShowing(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showDevModeFeaturesModal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showAnnotationsButtonContextMenu(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isDevModeOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}exitDevModeFocusOrOverview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}shouldAvoidScaling(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class v{nodeChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class I{createMouseBehavior(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tableUiReorderHandleHoveredLength(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}tableUiAddButtonHoveredRadius(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class T{updateViolationsForNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class S{setMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearMentionsTypeaheadQuery(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isShowingMentionsTypeaheadResults(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setMentionsTypeaheadTargetRect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}endSearchSession(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}showVisualBellForPastedMentions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class w{getPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}resetPdfSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}convertPdfToScene(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class A{selectionChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}boxSelectionEnded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}currentPageChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}timerChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}slidesViewChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}documentChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}codegenPreferencesChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stackInvariantsEnforced(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginPageLoaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pluginAccessibleNodeIds(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}pluginAccessiblePages(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class C{getAPIName(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getSuggestionsForWord(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}spellCheckText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}runTextReviewPlugin(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldEnableWhenFirstActivated(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class N{isQuickActionsShown(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class L{isMinimizedInUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class O{pasteVariablesWithLocalizationPopupDEPRECATED(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}pasteVariablesWithLocalizationPopup(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class R{reconnectingStarted(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectingSucceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorHidden(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromObserver(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyCursorUnhiddenFromConnectionCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}notifyEditorConvertedToViewer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSaveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateMultiplayerState(...e){if(this.shouldThrow)throw Error("Method not implemented.")}restartPresentation(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}cancelPresentationStoppedVisualBell(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setBackgroundFlushInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startMonitorInterval(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleMultiplayerSignal(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showRestoreComponentDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showComponentRemovedDialog(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isWindowActive(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}buildMultiplayerUrl(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}requestedChunkedFileLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}socketBufferedAmount(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}prettyPrintMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reconnectSequenceNumberChanged(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class P{showEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideEyedropper(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getColorFromNativeEyeDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}updateSelectionPaintsWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionImages(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintsWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithFillEncodedPaints(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updatePaintsDirectlyOnSingleNodeWithStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearSelectionPaintsDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionPaintFromDropper(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}pickerHasSelectionPaintOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}originalPaintForCurrentSelectionPaintsPicker(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}colorPickerSelectedVariable(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}clearSelectionTextAndEffectStylesDueToLimitExceeded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}updateSelectionTextAndEffectStyles(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isPrototypingModalOpen(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}validateCopyBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class D{handleConnect(...e){if(this.shouldThrow)throw Error("Method not implemented.")}addUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeUser(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMouseCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setMousePosition(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setIsHoveringWidgetWithHiddenCursors(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setHighFiveStatus(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setChatMessage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setFocusOnTextCursor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setVoiceMetadata(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleReactionFromServer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}sendReaction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}playSoundEffectOnce(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class k{clearTemplatePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class M{getEyedropperContext(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}updateEditPaletteModalColor(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isCustomPaletteApplied(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showSectionPresets(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}triggerConfetti(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class F{trackFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackDefinedEventFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetDefinedAnalyticsForDocument(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveFlushes(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportConsecutiveImageChangeSkips(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestore(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportBranchingLoadTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportMultiplayerRoundTripTime(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportPerfEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportQuantizedColorEqualsUse(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextLost(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportContextRestored(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportDirtyAfterLoad(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryReportError(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopPerfTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}pauseOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryStopOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}trySetAttributeOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryGetAttributesOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getOpsTimer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}addToDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}createDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}removeDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getDistributionAnalyticsProperties(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}resetDistribution(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderLayerCount(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportNonIndependentLayerAnimationActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportRenderedTileBytesUsed(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromCpp(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportAnimationFromTs(...e){if(this.shouldThrow)throw Error("Method not implemented.")}recordRenderingEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}saveRenderingTrace(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerActive(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}reportIndependentLayerRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logNumericMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logStringMetric(...e){if(this.shouldThrow)throw Error("Method not implemented.")}handleAllocationFailureWithNative(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}slogFromFullscreen(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class x{dispatchAction(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}getCustomKeyboardShortcuts(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}getDisplayStringFromKey(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getKeyboardShortcutFromText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getTextFromKeyboardShortcut(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class U{readSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}writeSync(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class B{isUI3(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3Colors(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}showUI3ColorsInitialValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class V{getDefaultPencilStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getDefaultHighlighterStrokeWeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class G{decodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}encodeImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}scaleImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}cancelCurrentImageWorkers(...e){if(this.shouldThrow)throw Error("Method not implemented.")}init(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class H{createVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}deleteVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidth(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getHeight(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}getCoverImage(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}loadVideo(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}copyVideoPermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyVideoPermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}loadAllVideos(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class K{autoSegmentNodesByRegion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}shouldRunSimpleStackDetection(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runMakeResponsiveHeuristics(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackShouldShowMSALOnboarding(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyAllAutoLayout(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}makeResponsive2(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class W{getUserId(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getUserLocale(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}hasUserFlag(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ${markMissingFontScannerAsComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Y{submitDeveloperRelatedLinks(...e){if(this.shouldThrow)throw Error("Method not implemented.")}didGetNodeStatusChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isVariableAvailableInLibraryAsset(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class z{copyImagePermissions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}copyImagePermissionsFromLibraryKey(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDownloadPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forceDownloadImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getSignedUrls(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}getImageHostDomain(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}setMinimumImagePriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}forgetImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clearImageDecodePending(...e){if(this.shouldThrow)throw Error("Method not implemented.")}downloadEmoji(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}markImageUploading(...e){if(this.shouldThrow)throw Error("Method not implemented.")}markImageUploaded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}startUploadingImage(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pendingUploadStats(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[new Set,new Set]}logDebugInfo(...e){if(this.shouldThrow)throw Error("Method not implemented.")}pauseImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resumeImageDownloads(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExternalSource(...e){if(this.shouldThrow)throw Error("Method not implemented.")}staticAssetWithPath(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class j{rgbaToThumbhash(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Uint8Array}thumbhashToRgba(...e){if(this.shouldThrow)throw Error("Method not implemented.");return{rgba:new Uint8Array,width:0,height:0}}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class q{readRichTextFromHtml(...e){if(this.shouldThrow)throw Error("Method not implemented.");return[]}createHtmlFromTextNodes(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}createHtmlFromTextData(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Z{getParsedCodeTokens(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getBackgroundColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getLineNumberColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}getCursorColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class X{onInsertFromExisting(...e){if(this.shouldThrow)throw Error("Method not implemented.")}onImpression(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}mountWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}mountWidgetLowPriority(...e){if(this.shouldThrow)throw Error("Method not implemented.")}trackSelectionStateInteraction(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}queueRender(...e){if(this.shouldThrow)throw Error("Method not implemented.")}renderFirstPartyWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}isRenderingWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}runPropertyMenuCallback(...e){if(this.shouldThrow)throw Error("Method not implemented.")}terminateRunningWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}clickHyperlink(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWidgetIconBuffer(...e){if(this.shouldThrow)throw Error("Method not implemented.");return Promise.reject()}onTextEditEnd(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}showNonInteractableWidgetTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}hideTooltip(...e){if(this.shouldThrow)throw Error("Method not implemented.")}logMultipleInputEditorsInWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableAdded(...e){if(this.shouldThrow)throw Error("Method not implemented.")}stickableRemoved(...e){if(this.shouldThrow)throw Error("Method not implemented.")}canInteractWithWidget(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}canViewWidgetDetails(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class J{prefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}debounceNodeResizeUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}debounceNodeMovementUpdate(...e){if(this.shouldThrow)throw Error("Method not implemented.")}announceDomChange(...e){if(this.shouldThrow)throw Error("Method not implemented.")}getWCAG2Contrast(...e){if(this.shouldThrow)throw Error("Method not implemented.");return 0}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class Q{onFrameDistributionTrackedEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ee{isCustomPaletteColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class et{clearSlideThemeStylePreview(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncSlideThemeAtom(...e){if(this.shouldThrow)throw Error("Method not implemented.")}computeThemeSwapColorVariableMapping(...e){if(this.shouldThrow)throw Error("Method not implemented.");return new Map}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class er{isInOrg(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class en{getSummaryAsClipboardText(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ei{calculateColorWithRampValue(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}calculateColorWithRelativeAdjustment(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}getRampValueForColor(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class ea{isZombieStyle(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class eo{syncChangedSubscribedConsumptions(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class es{syncAddedOrChangedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}syncRemovedAssets(...e){if(this.shouldThrow)throw Error("Method not implemented.")}resetMirrorCache(...e){if(this.shouldThrow)throw Error("Method not implemented.")}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}class el{windowSetupComplete(...e){if(this.shouldThrow)throw Error("Method not implemented.")}windowHandleBeforeTick(...e){if(this.shouldThrow)throw Error("Method not implemented.")}initPrefersReducedMotion(...e){if(this.shouldThrow)throw Error("Method not implemented.")}destroyWindow(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTitle(...e){if(this.shouldThrow)throw Error("Method not implemented.")}title(...e){if(this.shouldThrow)throw Error("Method not implemented.");return""}alert(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setTextCaretBounds(...e){if(this.shouldThrow)throw Error("Method not implemented.")}usingMultiTouchPointerEvents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}setExpectingTextInput(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingCopyCutEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}setExpectingPasteEvent(...e){if(this.shouldThrow)throw Error("Method not implemented.")}execCommandCopy(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}readClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}writeClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}clearClipboardContents(...e){if(this.shouldThrow)throw Error("Method not implemented.")}tryToReadFromClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadSubstringFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToReadFilesFromClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}tryToDetectSpreadsheetDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}tryToDetectLineDataOnClipboard(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}writeToClipboardAsBlobInHTML(...e){if(this.shouldThrow)throw Error("Method not implemented.");return!1}focusView(...e){if(this.shouldThrow)throw Error("Method not implemented.")}viewWithFocus(...e){if(this.shouldThrow)throw Error("Method not implemented.");return null}constructor(e=!1){i(this,"shouldThrow",void 0),this.shouldThrow=e}}},83783:(e,r,n)=>{n.d(r,{DS:()=>d,F0:()=>m,GI:()=>_,Ji:()=>f,MT:()=>h,Ql:()=>g,Si:()=>l,UP:()=>y,hD:()=>c,hV:()=>o,kh:()=>E,oY:()=>p,rV:()=>u});var i=n(779647),a=n(298455);function o(e,r){let n=r(e);if("stop"===n||"skip"===n)return n;for(let n of e.childrenNodes)if("stop"===o(n,r))return"stop"}function s(e,r){return e.get(r)?.parentNode||null}function l(e,r,n){let i=s(e,r);for(;i;){if("CANVAS"===i.type||"DOCUMENT"===i.type)return;if("stop"===n(i))break;i=i.parentNode}}function c(e,r,n){let i=e.get(r);i&&"stop"!==n(i)&&l(e,r,n)}function d(e,r){let n=[];return l(e,r,e=>{n.push(e)}),n}function u(e,r,n){if(r===n)return!0;let i=s(e,n);for(;i;){if(i.guid===r)return!0;i=i.parentNode}return!1}function m(e,r){let n=0,i=e.get(r)||null;for(;i&&"CANVAS"!==i.type&&"DOCUMENT"!==i.type;)n++,i=s(e,i.guid);return n}function p(e){return"VECTOR"===e||"STAR"===e||"LINE"===e||"ELLIPSE"===e||"RECTANGLE"===e||"REGULAR_POLYGON"===e||"ROUNDED_RECTANGLE"===e}function h(e){return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}function _(e){return"STAMP"===e.type||"ROUNDED_RECTANGLE"===e.type&&e.name?.includes("FigJam Stamp Icon")}function g(e,r){let n=null;return l(e,r,e=>{if(!n){if("NONE"!==e.scrollDirection)return n=e,"stop";{let r=e.parentNode;if(r&&r&&"CANVAS"===r.type&&r.visible&&(0,i.F)(e.type)&&e.visible)return n=e,"stop"}}}),n}function f(e){let r=null,n=e.parentNode;for(;n;){if(n.isStackOrFixedSizeContainer){r=n;break}n=n.parentNode}return r}function E(e,r){let n=null;return c(e,r,e=>{let r=e.parentNode;r&&r&&("CANVAS"===r.type||"SECTION"===r.type)&&r.visible&&(0,i.F)(e.type)&&e.visible&&"SECTION"!==e.type&&(n=e)}),n}function y(){let e=(0,a.UN)(),r=[];return o(e.getRoot(),e=>{r.push(e.guid)}),r}},617691:(e,r,n)=>{n.d(r,{$P:()=>l,M7:()=>c,Ms:()=>o,UC:()=>s,eX:()=>u,nM:()=>d,s4:()=>i});var i,a=n(177131);!function(e){e.NONE="NONE",e.FILL="FILL",e.STROKE="STROKE",e.TEXT="TEXT",e.EFFECT="EFFECT",e.GRID="GRID"}(i||(i={}));let o={inheritEffectStyleKey:"inheritEffectStyleName",inheritExportStyleKey:"inheritExportStyleName",inheritFillStyleKey:"inheritFillStyleName",inheritFillStyleKeyForStroke:"inheritFillStyleNameForStroke",inheritGridStyleKey:"inheritGridStyleName",inheritTextStyleKey:"inheritTextStyleName"},s={inheritEffectStyleKey:"softDeletedEffectStyleId",inheritExportStyleKey:"softDeletedExportStyleId",inheritFillStyleKey:"softDeletedFillStyleId",inheritFillStyleKeyForStroke:"softDeletedFillStyleForStrokeId",inheritGridStyleKey:"softDeletedGridStyleId",inheritTextStyleKey:"softDeletedTextStyleId"};function l(e){return!!e?.key}function c(e){return e.startsWith("S:")}function d(e){return e&&l(e)?`S:${e.key},${e.version||""}`:""}function u(e){if(!e||!c(e))return null;let r=e.substring(2).split(",");if(!r||2!==r.length)return null;let n=(0,a.n3)(r[0]),i=(0,a.IA)(r[1]);return n===a.n3.INVALID?null:{key:n,version:i}}},953723:(e,r,n)=>{n.d(r,{N4:()=>l,eS:()=>c,iL:()=>s,jS:()=>d});var i=n(525102),a=n(922827);let o={};function s(){return o}function l({isProduction:e,executeEmscriptenJS:r}){let n,a;let s=(0,i.n)();(o={}).instantiateWasm=function(e,r){return n=e,a=r,{}},s.Module=o;let l=!1;e||Object.defineProperty(o,"wasmOffsetData",{get:()=>(l=!0,{offset_map:{},func_starts:[],name_map:{},import_functions:0}),set:()=>{}});try{r(),l&&(o.emscripten_realloc_buffer??o.growMemory)(0x60000000)}finally{delete s.Module}if(void 0===n)throw Error('Expected WebAssembly code to set "imports"');if(void 0===a)throw Error('Expected WebAssembly code to set "receiveInstance"');return{imports:n,receiveInstance:a,getReservedHeapSize:()=>o.HEAPU8.buffer.byteLength}}function c(){let e=(0,i.n)(),r=e.executeFullscreenEmscriptenCode;return delete e.executeFullscreenEmscriptenCode,r}function d({callMain:e,tsApisForCpp:r,registerRefreshCallback:n,leakBindings:s}){let l=(0,i.n)();try{l.tsapi_init=(e,r)=>{(0,a.LQj)(e),n?.(r)},l.tsApisForCpp=r,o.jsHelpers=r.jsHelpers,e()}finally{s||(delete l.tsapi_init,delete l.tsApisForCpp)}}},402581:(e,r,n)=>{n.d(r,{C7:()=>h,DL:()=>s,Dd:()=>K,H:()=>b,KU:()=>V,L6:()=>U,Mh:()=>H,Qv:()=>_,TM:()=>k,XM:()=>F,a$:()=>m,bv:()=>u,c1:()=>p,fR:()=>c,fZ:()=>d,h4:()=>o,jR:()=>l,mx:()=>G,po:()=>W,pp:()=>P,r6:()=>R,tl:()=>N});var i=n(104180),a=n(806391);let o=i.z.object({prompt_data:i.z.string(),negative_prompt_data:i.z.string().default("blurry, bad"),cfg_scale:i.z.number().default(10),seed:i.z.number().default(20),steps:i.z.number().default(50),style_preset:i.z.string().default("photographic"),height:i.z.number().default(512),width:i.z.number().default(512),additionalPrefix:i.z.string().optional().default("")}),s=i.z.object({image:i.z.string(),metadata:i.z.object({height:i.z.number(),width:i.z.number()})}),l=i.z.object({userPrompt:i.z.string(),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional(),isDirectGenerationCompatible:i.z.boolean().nullable().optional()}),c=i.z.string(),d=i.z.object({userPrompt:i.z.string(),sections:i.z.array(i.z.string()),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional()});i.z.string(),i.z.object({recommendedKitKey:i.z.string()});let u=i.z.object({presets:i.z.array(i.z.string()).optional(),theme:i.z.record(i.z.any()).optional(),jsx:i.z.string().optional(),dsKit:i.z.object({kitKey:i.z.string(),isLocal:i.z.boolean()}).optional(),trace:a.B.optional()}),m=u.extend({sections:i.z.array(i.z.string()).optional(),layoutJsx:i.z.string().optional(),v3Components:i.z.record(i.z.string()).optional()}),p=i.z.object({componentNames:i.z.array(i.z.string()),userPrompt:i.z.string(),kitKey:i.z.string().nullable().optional(),isLocal:i.z.boolean().nullable().optional()}),h=i.z.object({userPrompt:i.z.string()}),_=i.z.object({content:i.z.string()}),g=i.z.object({version:i.z.literal(2),darkMode:i.z.boolean(),fontFamilies:i.z.object({title:i.z.array(i.z.string()),body:i.z.array(i.z.string()),label:i.z.array(i.z.string())}),brandColor:i.z.string(),colors:i.z.object({text:i.z.string().array(),background:i.z.string().array(),border:i.z.string().array()}),borderRadii:i.z.array(i.z.number()),spacing:i.z.array(i.z.number())});g.omit({version:!0}).keyof();let f=i.z.object({fontFamilies:i.z.array(i.z.string()),colors:i.z.array(i.z.string()),borderRadii:i.z.array(i.z.number()),spacing:i.z.array(i.z.number())}),E=i.z.union([g,f]),y=i.z.object({prompt:i.z.string()}),b=i.z.object({userPrompt:i.z.string(),promptHistory:i.z.array(y).optional(),storedInitialPrompt:i.z.string(),jsx:i.z.string(),jsxInsertReplace:i.z.string().optional(),currentTheme:E,kitKey:i.z.string(),isLocal:i.z.boolean()}),v=i.z.object({type:i.z.literal("text_or_image"),affectedId:i.z.string(),content:i.z.string()}),I=i.z.enum(["font","layout","component","other"]),T=i.z.object({type:i.z.literal("theme"),content:g.partial()}),S=i.z.object({type:i.z.literal("iCantDoThis"),rationaleCategory:I.optional()}),w=[i.z.object({type:i.z.literal("remove"),affectedId:i.z.string()}),i.z.object({type:i.z.literal("move"),affectedId:i.z.string(),insertBehavior:i.z.enum(["above","below"]),destinationId:i.z.string()}),i.z.object({type:i.z.literal("replaceClasses"),affectedId:i.z.string(),classes:i.z.string().array()})],A=[i.z.object({type:i.z.literal("insert"),affectedId:i.z.string(),insertBehavior:i.z.enum(["above","below"]),jsxToInsert:i.z.string()}),i.z.object({type:i.z.literal("replace"),affectedId:i.z.string(),jsxToInsert:i.z.string()})],C=i.z.discriminatedUnion("type",[v,...w,...A,T,S]),N=i.z.object({action:C.optional(),cortex_error:i.z.object({type:i.z.string(),data:i.z.any()}).optional(),trace:a.B.optional()}),L=i.z.object({key:i.z.string(),name:i.z.string(),is_local:i.z.boolean(),description:i.z.string()});i.z.object({meta:i.z.object({kits:i.z.array(L)}),error:i.z.boolean().optional(),message:i.z.string().optional()});let O=i.z.enum(["normal","transparent","segment"]),R=i.z.object({imageB64:i.z.string()}),P=i.z.object({conflictScore:i.z.number(),reasoning:i.z.string()}),D=i.z.object({imageB64:i.z.string(),jsx:i.z.string()}),k=i.z.object({requests:i.z.array(D)}),M=i.z.object({isMobileDesign:i.z.boolean(),components:i.z.array(i.z.object({guid:i.z.string(),name:i.z.string()}))}),F=i.z.object({responses:i.z.array(M.nullable())}),x=i.z.object({imageB64:i.z.string(),jsx:i.z.string(),isStateGroup:i.z.boolean()}),U=i.z.object({requests:i.z.array(x)}),B=i.z.object({componentName:i.z.string(),componentDescription:i.z.string(),nodeIdsToPropertyNames:i.z.array(i.z.object({id:i.z.string(),propertyName:i.z.string()}))}),V=i.z.object({responses:i.z.array(B.nullable())}),G=i.z.object({serializedNodes:i.z.record(i.z.string()),prompt:i.z.string()}),H=i.z.object({delta:i.z.string()}),K=i.z.object({id:i.z.string().optional(),initialUserPrompt:i.z.string().optional(),jsxJSON:i.z.string().optional(),prompt:i.z.string().optional(),desc:i.z.string().optional(),transparent:i.z.boolean().optional(),background:O.optional(),height:i.z.number(),width:i.z.number(),description:i.z.string().optional()}),W=i.z.object({image:i.z.string(),foregroundImage:i.z.string().optional(),description:i.z.string(),trace:a.B.optional()})},919117:(e,r,n)=>{n.d(r,{aC:()=>u,e3:()=>d});var i,a,o=n(104180);!function(e){e.NEUTRAL="neutral",e.CASUAL="casual",e.PROFESSIONAL="professional",e.CONCISE="concise",e.EXPANDED="expanded"}(i||(i={})),function(e){e.DESIGN="design",e.SLIDES="slides"}(a||(a={}));let s=o.z.object({id:o.z.string(),text:o.z.string()}).array(),l=o.z.object({tone:o.z.nativeEnum(i),weight:o.z.number()}).array(),c=o.z.enum(["design","slides"]),d=o.z.union([o.z.object({text:o.z.string(),tones:l,productType:c.optional()}),o.z.object({texts:s,tones:l,productType:c.optional()})]),u=o.z.object({id:o.z.string().optional(),delta:o.z.string()})},341582:(e,r,n)=>{n.r(r),n.d(r,{ClientContentLengthLimitExceededError:()=>o.j0,ClientNoTextSelectedError:()=>o.b6,ContentFillIncorrectNumberOfResultsError:()=>o.Es,ContentFillParsingError:()=>o.Dr,CortexClientError:()=>o.jG,CortexErrorV2:()=>i.G,CortexProviderAPIError:()=>o.HW,CortexProviderSDKError:()=>o.HA,CortexRateLimitExceededError:()=>o.qD,CortexServerError:()=>o.XA,CortexSetupError:()=>o.BA,FigjamClusterToolNotCalledError:()=>o.dJ,FigjamTemplateParsingError:()=>o.dr,FigjamVisualParsingError:()=>o.b3,InvalidCoreFunctionArgumentError:()=>o.oW,InvalidDataContentError:()=>o.tm,InvalidPromptArgumentError:()=>o.x0,MeterExceededError:()=>o.NZ,NotImplementedError:()=>o.EH,OfflineError:()=>o.M_,OutOfDateFeatureVersionError:()=>o.CV,ProviderContentLengthLimitExceededError:()=>o.FA,ProviderEmptyResponseError:()=>o.cD,ProviderInvalidResponseDataError:()=>o.ES,ProviderInvalidToolArgumentsError:()=>o.ns,ProviderNoContentGeneratedError:()=>o.de,ProviderNoObjectGeneratedError:()=>o.$F,ProviderNoSuchToolError:()=>o.UR,ProviderParseResponseError:()=>o.o6,ProviderRateLimitExceededError:()=>o.Mm,ProviderResponseClientError:()=>o.U,ProviderResponseServerError:()=>o.Ay,ProviderServiceBusyError:()=>o.u8,ProviderServiceIssueError:()=>o.c5,ProviderSetupError:()=>o.br,ProviderUnsafeOrHarmfulContentError:()=>o.v9,StreamingJSONParseError:()=>o.mP,TooManyEmbeddingValuesForCallError:()=>o.Ch,UnauthorizedError:()=>o.D_,UnsafeOrHarmfulPromptError:()=>o.bt,UnsupportedFunctionalityError:()=>o.b8,deserializeCortexErrorV2:()=>a.j,isSerializedCortexErrorV2:()=>a.G});var i=n(868),a=n(794317),o=n(31679)},885659:(e,r,n)=>{n.d(r,{G1:()=>i});class i extends Error{type;data;trace;metadata;sentryTags;constructor(e,r,n,i,a){super(n??function(e){let r=e.message;return"string"==typeof r?r:void 0}(r)??`CortexError of type ${e}`),null!=i&&(this.stack=i),void 0!==a&&(this.trace=a),this.type=e,this.data=r}}},841748:(e,r,n)=>{n.r(r),n.d(r,{BOOLEAN_TYPE_REPR:()=>i.oo,COMPONENT_PREFIX:()=>a.FE,CUSTOM_IMAGE_TYPE_STR:()=>i.Vk,IMAGE_NAME_FORMAT:()=>a.Ii,IMAGE_TYPE_REPR:()=>i.dX,STRING_TYPE_REPR:()=>i.NU,cleanComponentPropNameForUsage:()=>a.j3,extractModifiersFromProp:()=>a.rB,filterComponentProps:()=>l.A,getComponentInfoById:()=>i.Ye,getComponentInfoByIdUncached:()=>i.Z1,getComponentJSXName:()=>a.WG,getInstanceIdsForDef:()=>a.wn,getInstanceNodeProps:()=>c.Y,getNestedImageNodes:()=>a._j,getNodeParentPath:()=>o.yu,getTypeInfoCached:()=>i.NY,groupByCommonPrefixSorted:()=>a.hM,isPartOfGroup:()=>o.Se,moveNumbersToEnd:()=>s.wP,resetTypeInfoCache:()=>i.UY,toCamelCase:()=>s.Cb,toTitleCase:()=>s.Sn,usagePropsToRawProps:()=>c.R});var i=n(564289),a=n(234872),o=n(589756),s=n(442685),l=n(960539),c=n(688459)},267398:(e,r,n)=>{n(235310),n(862075),n(498931)},924289:(e,r,n)=>{n(986116);var i=n(862075);n(267398),i.Q_,i.cq,i.Eo,i.SR,i.ut},98526:(e,r,n)=>{n.d(r,{_o:()=>a._o,f6:()=>i.f6}),n(924289);var i=n(862075);n(367786),n(986116),n(267398);var a=n(498931)},353562:(e,r,n)=>{n.d(r,{Ed:()=>i.Ed});var i=n(952895);n(717278),n(922827),n(298455),n(32433),n(132765)},717278:(e,r,n)=>{n.d(r,{KY:()=>d,Pm:()=>g,c1:()=>l,h:()=>c,iz:()=>m,jd:()=>u,qK:()=>_,rt:()=>h,s$:()=>f,v6:()=>p});var i=n(140593),a=n(32433),o=n(741378),s=n(132765);function l(e){let r=e.slice(1).join(o.rR);if("transparent"===r)return[];let n=r.split("/"),i=n[0],l=n[1]??"",c=a.Fy[i]??(0,o.G2)(i);if(!c||!c.match(/^#?[0-9a-f]{3,8}$/i))return null;if(!l||!a.KF[l])return c;let d=(0,s.QW)(c);return d&&a.KF[l]&&(d.a=a.KF[l]??1),d}function c(e){return a.UF[e]||`[${e.toFixed(0)}px]`}function d(e){return a._L[e]||`[${e.toFixed(0)}px]`}function u(e){return a.hN[e]||`[${e.toFixed(0)}]`}function m(e){let r=e.toLowerCase(),n=a.c[r];if(n)return n;if(/^#[0-9A-Fa-f]{3}$/.test(r)){let e="#"+r.slice(1).split("").map(e=>e+e).join(""),n=a.c[e];if(n)return n}return`[${r}]`}function p(e,r){let n=a.uZ[e];return!r?.alwaysUsePreciseValues&&e>=999?"-full":"string"==typeof n?n?`-${n}`:"":`-[${e.toFixed(0)}px]`}function h(e,r){switch(r){case"PIXELS":{let r=a.dP[e];if(r)return r;return`[${e.toFixed(0)}px]`}case"PERCENT":for(let[r,n]of Object.entries(a.u0))if(Math.round(100*n)===Math.round(e))return r;return`[${e.toFixed(0)}%]`;default:(0,i.xb)(r)}}function _(e){let r=parseFloat(e.toFixed(2)).toString();return["0","2","4","8"].includes(r)?`${r}`:`[${r}px]`}function g(e){let r=parseFloat(e.toFixed(2));return a.dJ[r]||`[${r.toString()}]`}function f(e,r){return r<0?`-${e}-${c(-r)}`:`${e}-${c(r)}`}},741378:(e,r,n)=>{n.d(r,{G2:()=>l,Hc:()=>o,kX:()=>s,mu:()=>u,rR:()=>d});var i=n(897459);let a=/^\[(?:([a-z-]+):)?(.+)\]$/i;function o(e,r=0){let n=a.exec(e);if(n&&n[2].endsWith("px")){let e=n[2].slice(0,n[2].length-2);if(r>0){let r=Number(e);return isNaN(r)?null:Number(r.toFixed(2))}return i.y$.isInteger(e)?Number(e):null}return null}function s(e){let r=a.exec(e);if(r&&r[2].endsWith("%")){let e=r[2].slice(0,r[2].length-1);return i.y$.isInteger(e)?Number(e):null}return null}function l(e){let r=a.exec(e);return r&&r[2].startsWith("#")?r[2]:null}let c=/\s+/,d="-";function u(e){let r=(0,i.QP)(e),n=r.includes("flex-col")?"vertical":"horizontal";return r.split(c).map(e=>({...function(e){let r=!1,n=e.split(d);return""===n[0]&&1!==n.length&&(r=!0,n.shift()),{classParts:n,isNegative:r,className:e}}(e),flexDirection:n}))}},132765:(e,r,n)=>{n.d(r,{QW:()=>a,si:()=>c});var i=n(104180);function a(e){if(!e)return null;e=e.replace(/^#([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,(e,r,n,i,a)=>"#"+r+r+n+n+i+i+(a?a+a:""));let r=/^#([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i.exec(e);return r?{r:parseInt(r[1],16)/255,g:parseInt(r[2],16)/255,b:parseInt(r[3],16)/255,a:void 0===r[4]?1:parseInt(r[4],16)/255}:null}i.z.object({r:i.z.number().min(0).max(1),g:i.z.number().min(0).max(1),b:i.z.number().min(0).max(1),a:i.z.number().min(0).max(1)}).describe("@name(RGBA)");let o=e=>("00"+Math.round(255*e).toString(16).toUpperCase()).substr(-2),s=e=>`${o(e.r)}${o(e.g)}${o(e.b)}`,l=(e,r=1)=>`${o(e.r)}${o(e.g)}${o(e.b)}${o(e.a*r)}`;function c(e,r=1){if(1===e.a&&1===r){let r=s(e);return r[0]===r[1]&&r[2]===r[3]&&r[4]===r[5]?`#${r[0]}${r[2]}${r[4]}`:`#${r}`}{let n=l(e,r);return n[0]===n[1]&&n[2]===n[3]&&n[4]===n[5]&&n[6]===n[7]?`#${n[0]}${n[2]}${n[4]}${n[6]}`:`#${n}`}}},729615:(e,r,n)=>{n.d(r,{$V:()=>function e(r,n){return!h(r.parentNode)&&(r.parentNode===n||e(r.parentNode,n))},CB:()=>h,FI:()=>p,FZ:()=>i,Fo:()=>v,Id:()=>k,JE:()=>w,N6:()=>S,OS:()=>F,Og:()=>N,Sh:()=>_,Si:()=>b,TA:()=>L,VL:()=>g,Z:()=>G,fN:()=>function e(r){if(!x(r)||(0,s.P)(r)||(0,l._)(r)||h(r.parentNode)||r.w>=128||r.h>=128||r.w<.01||r.h<.01||r.w/r.h>2||r.h/r.w>2)return!1;if(A(r)&&r.children){let n=!0;for(let i of r.children)if("GROUP"===i.type){if(!e(i)){n=!1;break}}else if(!C(i)&&!M(i)){n=!1;break}return n}return!1},fY:()=>function e(r){if(h(r.parentNode))return!1;let n=k(r);if(r.w>=n.w||r.h>=n.h/2||r.w<.01||r.h<.01)return!1;if(A(r)&&r.children){if(1===r.children.length){let n=r.children[0];if(!1===n.visible)return!1;if("TEXT"===n.type||"FRAME"===n.type&&n.children&&1===n.children.length&&e(n.children[0]))return!0}if(r.children.length>1&&r.children.length<5){for(let n of r.children)if(!1!==n.visible&&("TEXT"!==n.type&&"GROUP"!==n.type&&"RECTANGLE"!==n.type&&"ROUNDED_RECTANGLE"!==n.type&&!F(n)||"GROUP"===n.type&&!e(n)))return!1;let n=!0;for(let e of r.children)if(!F(e)){n=!1;break}return!n}}return!1},hb:()=>E,j0:()=>O,nP:()=>P,nf:()=>x,rm:()=>B,rq:()=>V,u_:()=>A,ul:()=>f,yM:()=>function e(r,n){if(r.children)for(let i of r.children)e(i,n);n(r)},yV:()=>R});var i,a=n(557028),o=n(541131),s=n(856629),l=n(733283);function c(e,r,n,i,a,o,s){try{var l=e[o](s),c=l.value}catch(e){n(e);return}l.done?r(c):Promise.resolve(c).then(i,a)}function d(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function u(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(r){d(e,r,n[r])})}return e}function m(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n.push.apply(n,i)}return n})(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}),e}class p extends Error{toString(){return"Error: Found loose node on page"}constructor(e){super(),d(this,"looseNodeInfo",void 0),this.name="FoundLooseNodeOnPageError",this.looseNodeInfo=e}}function h(e){return"CANVAS"===e.type}function _(e,r){for(let n of r.children){let r=g(e,n);if(r)return r}return null}function g(e,r){if(r.id===e)return r;if(!r.children)return null;for(let n of r.children){let r=g(e,n);if(r)return r}return null}function f(e,r){let n=[e];for(;n.length>0;){let e=n.pop();r(e),e.children&&n.push(...e.children)}}function E(e,r){return y.apply(this,arguments)}function y(){var e;return e=function*(e,r){let n=[e];for(;n.length>0;){let e=n.pop();yield r(e),e.children&&n.push(...e.children)}},(y=function(){var r=this,n=arguments;return new Promise(function(i,a){var o=e.apply(r,n);function s(e){c(o,i,a,s,l,"next",e)}function l(e){c(o,i,a,s,l,"throw",e)}s(void 0)})}).apply(this,arguments)}function b(e,r){if(h(e.parentNode))return;let n=e.parentNode;for(;n&&"CANVAS"!==n.type&&!("BREAK"===r(n)||h(n.parentNode));)n="parentNode"in n?n.parentNode:void 0}function v(e,r,{includeSelf:n}={includeSelf:!0}){let i=[];return f(e,a=>{r(a)&&(n||a!==e)&&i.push(a)}),i}function I(e){var r;return m(u({},e),{children:null===(r=e.children)||void 0===r?void 0:r.map(I)})}function T(e,r,n){if(e.id===r)return{parent:n,node:e};if(e.children)for(let n of e.children){let i=T(n,r,e);if(i)return i}return null}function S(e,r){let{parent:n,node:i}=T(e,r)||{};for(;n&&"CANVAS"!==n.type&&"SECTION"!==n.type;){var a,o;i=n,n=null===(a=T(e,null!==(o=n.id)&&void 0!==o?o:""))||void 0===a?void 0:a.parent}return null!=i?i:e}function w(e){return"FRAME"===e.type||"INSTANCE"===e.type||"SYMBOL"===e.type}function A(e){var r;return["GROUP","BOOLEAN_OPERATION"].includes(null!==(r=e.type)&&void 0!==r?r:"")||w(e)}function C(e){var r;return["VECTOR","BOOLEAN_OPERATION","ELLIPSE","STAR","REGULAR_POLYGON","RECTANGLE","ROUNDED_RECTANGLE","LINE"].includes(null!==(r=e.type)&&void 0!==r?r:"")}function N(e){return["CANVAS","SECTION"].includes(e.type)}function L(e){var r,n;return"FRAME"===e.type&&((null===(r=e.parentNode)||void 0===r?void 0:r.type)==="CANVAS"||(null===(n=e.parentNode)||void 0===n?void 0:n.type)==="SECTION")}function O(e){if(A(e)&&e.children&&e.children.length>0){let r=!0;for(let n of e.children)if(!("VECTOR"===n.type&&(0,a.bB)(n.name))){r=!1;break}if(r)return!0}return!1}function R(e,r){var n;let i=(null!==(n=e.parentNode.children)&&void 0!==n?n:[]).filter(r=>r!==e),a=[];for(let n of i){if(n===e)continue;let i={x:n.x,y:n.y,width:n.w,height:n.h},s={x:e.x,y:e.y,width:e.w,height:e.h};r?(0,o.oP)(s,i)&&a.push(n):(0,o.oP)(i,s)&&a.push(n)}return a}function P(e){return w(e)&&N(e.parentNode)}!function(e){e.CONTINUE="CONTINUE",e.BREAK="BREAK"}(i||(i={}));let D=["CANVAS","SECTION","SLIDE_ROW"];function k(e){if(D.includes(e.parentNode.type)&&P(e))return e;if(h(e.parentNode))throw new p(e);return k(e.parentNode)}function M(e){return"TEXT"===e.type&&!!e.characters&&Number.isInteger(parseInt(e.characters))}function F(e){if(h(e.parentNode))return!1;let r=k(e);if(e.w>=r.w||e.h>=r.h||e.w<.01||e.h<.01)return!1;if(C(e)||M(e))return!0;if(A(e)&&e.children){let r=!0;for(let n of e.children)if("GROUP"===n.type){if(!F(n)){r=!1;break}}else if(!C(n)&&!M(n)){r=!1;break}return r}return!1}function x(e){let r=!0;return e.visible||void 0===e.visible||(r=!1),b(e,e=>e.visible||void 0===e.visible?"CONTINUE":(r=!1,"BREAK")),r}function U(e){return e.localID<0||e.sessionID<0?null:`${e.sessionID}:${e.localID}`}function B(e,r){var n;let i=[],a=null===(n=e.interactions)||void 0===n?void 0:n.flatMap(n=>{let a;if(!e.id||!n)return[];let o=function(e,r){var n;if(e.isDeleted)return null;let i=null===(n=e.actions)||void 0===n?void 0:n.find(e=>"BACK"===e.connectionType||"CLOSE"===e.connectionType||"INTERNAL_NODE"===e.connectionType&&e.transitionNodeID&&("NAVIGATE"===e.navigationType||"OVERLAY"===e.navigationType));if(!i)return null;let a=null,o=i.connectionType,s=i.navigationType;if("BACK"===o||"CLOSE"===o)a={buttonID:r,navigationType:o,destinationScreenID:null,score:0,rationale:""};else if("INTERNAL_NODE"===o&&("NAVIGATE"===s||"OVERLAY"===s)&&i.transitionNodeID){let e=U(i.transitionNodeID);if(!e)return null;a={buttonID:r,navigationType:({NAVIGATE:"NAVIGATE",OVERLAY:"OPEN_POPUP"})[s],destinationScreenID:e,score:10,rationale:"existing interaction"}}return a}(n,e.id);if(!o)return[];let s=r?r.get(o.buttonID):o.buttonID;if(!s)return[];if(n.id&&(a=U(n.id)),!o.destinationScreenID)return a&&i.push(a),[{buttonID:s,navigationType:o.navigationType,destinationScreenID:null,score:10,rationale:""}];{let e=r?r.get(o.destinationScreenID):o.destinationScreenID;return e?(a&&i.push(a),[{buttonID:s,navigationType:o.navigationType,destinationScreenID:e,score:10,rationale:"existing interaction"}]):[]}});return{interactionMappings:null!=a?a:[],interactionIds:i}}function V(e){let r=e.children.map(e=>(function e(r){var n;let{parentNode:i}=r,a=function(e,r){if(null==e)return{};var n,i,a=function(e,r){if(null==e)return{};var n,i,a={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],r.indexOf(n)>=0||(a[n]=e[n]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],!(r.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(r,["parentNode"]);return a.children=null===(n=r.children)||void 0===n?void 0:n.map(e),a})(e));r.forEach(e=>{f(e,e=>{if(e.children)for(let r of e.children)r.parentNode=e})});let n=m(u({},e),{children:r});return n.children.forEach(e=>{e.parentNode=n}),n}function G(e,r){let n=null!=e?e:0,i=null!=r?r:0;return 0===n?0:0===i?null:n/i}},203201:(e,r,n)=>{n.d(r,{bu:()=>d,zo:()=>l});var i=n(689837),a=n(104180);let o=a.z.discriminatedUnion("type",[a.z.object({name:a.z.string(),type:a.z.literal("number"),defaultValue:a.z.number().optional(),value:a.z.number().optional()}),a.z.object({name:a.z.string(),type:a.z.literal("color"),defaultValue:a.z.string().optional(),value:a.z.string().optional()}),a.z.object({name:a.z.string(),type:a.z.literal("string"),defaultValue:a.z.string().optional(),value:a.z.string().optional()}),a.z.object({name:a.z.string(),type:a.z.literal("enum"),options:a.z.array(a.z.string()),defaultValue:a.z.string().optional(),value:a.z.string().optional()}),a.z.object({name:a.z.string(),type:a.z.literal("boolean"),defaultValue:a.z.boolean().optional(),value:a.z.boolean().optional()})]),s=a.z.array(i.HQ);a.z.object({code:a.z.string(),score:a.z.number().describe("Score between 0 and 10 based on how well the code matches the design")});let l=a.z.object({code:a.z.string(),props:a.z.record(a.z.array(o)).describe("Mapping from node id to props array")}),c=a.z.object({provider:a.z.enum(["anthropic","openai"]),modelId:a.z.string()});a.z.enum(["ste","sites","hybrid"]);let d=a.z.discriminatedUnion("serializer",[a.z.object({chat:s,serializer:a.z.literal("ste"),model:c.optional(),html:a.z.string(),styles:a.z.string()}),a.z.object({chat:s,serializer:a.z.literal("sites"),model:c.optional()}),a.z.object({chat:s,serializer:a.z.literal("hybrid"),model:c.optional()})])},561546:(e,r,n)=>{n.d(r,{AM:()=>p,Af:()=>L,Bq:()=>function e(r,n=[]){for(let i=0;i<r.length;i++){let a=r[i];Array.isArray(a)?e(a,n):n.push(a)}return n},Ef:()=>u,Jk:()=>c,KQ:()=>g,Kg:()=>l,LN:()=>b,M0:()=>T,N9:()=>s,RP:()=>N,TR:()=>C,Ul:()=>v,Vs:()=>A,WI:()=>I,_j:()=>o,g6:()=>O,hR:()=>h,k4:()=>m,lX:()=>R,lq:()=>S,lu:()=>d,my:()=>y,qg:()=>w,v7:()=>f});var i=n(966664),a=n(543509);function o(e){return Array.isArray(e)?e:[e]}function s(e,r){-1===e.indexOf(r)&&e.push(r)}function l(e,r){-1===e.indexOf(r)&&e.unshift(r)}function c(e,r){let n=e.indexOf(r);-1!==n&&e.splice(n,1)}function d(e,r){if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==r[n])return!1;return!0}function u(e){for(let r=1;r<e.length;r++)if(void 0===e[r]||e[r]!==e[r-1])return!1;return!0}function m(e,r){let n,i,a=e.length;for(;0!==a;)i=Math.floor((r?function(e=Date.now()){return(9301*e+49297)%233280/233280}(r):Math.random())*a),a-=1,n=e[a],e[a]=e[i],e[i]=n;return e}function p(e,r,n=!1){return h(e,e=>e[r],n)}function h(e,r,n=!1,i,a=!1){e.sort((e,o)=>{if(r(e)===r(o)&&i){let r=a?-1:1;return i(e)<i(o)?-r:r}let s=n?-1:1;return r(e)<r(o)?-s:s})}let _=new Intl.Collator("en",{numeric:!0,sensitivity:"base"});function g(e,r,n={}){f(e,e=>e[r],n)}function f(e,r,n={},i){let a=e=>{let n=r(e);return n&&n.toLowerCase?n.toLowerCase():""},o=e=>{if(!i)return"";let r=i(e);return r&&r.toLowerCase?r.toLowerCase():""},s=n.isDescending?-1:1;n.useExpensiveNaturalComparison?e.sort((e,r)=>_.compare(a(e),a(r))*s):e.sort((e,r)=>{if(a(e)===a(r)&&i){let i=n.isSecondaryDescending?-1:1;return o(e)<o(r)?-i:i}return a(e)<a(r)?-s:s})}function E(e,r,n=!1){return e.sort((e,i)=>{let a=new Date(r(e)).getTime()<new Date(r(i)).getTime()?1:-1;return n?-a:a})}function y(e,r,n=!1){return E(e,e=>e[r],n)}function b(e){return E(e,e=>e.created_at)}function v(e,...r){return e.sort((e,n)=>{for(let i of r){let r=i(e,n);if(0!==r)return r}return 0})}function I(e){return e.filter(i.Vq)}function T(e,r,n=i.Vq){for(let i=r+1;i<e.length;i++){let r=e[i];if(n(r,i))return r}}function S(e,r,n=i.Vq){for(let i=r-1;i>=0;i--){let r=e[i];if(n(r,i))return r}}function w(e,r,n="left",o=i.Vq){r=(0,a.qE)(r,0,e.length-1);for(let i=0;r-i>=0||r+i<e.length;i++){let[a,s]="left"===n?[r-i,r+i]:[r+i,r-i];if(a>=0&&a<e.length){let r=e[a];if(o(r,a))return r}if(s>=0&&s<e.length){let r=e[s];if(o(r,s))return r}}}function A(e){let r=[...e],n=(0,i.sR)(r.pop(),"input must be non-empty");return[r,n]}function C(e,r,n=String){let i={};r.forEach((e,r)=>{i[n(e)]=r});let a=0,o=0,s=[];for(;;){let l=e[a],c=r[o];if(void 0===l||void 0===c){if(void 0===l&&void 0===c)return s;void 0!==l&&void 0===c?(s.push({hasBoth:!1,left:l,right:void 0}),a++):void 0===l&&void 0!==c&&(s.push({hasBoth:!1,left:void 0,right:c}),o++)}else{let e=i[n(l)];void 0===e||e<o?(s.push({hasBoth:!1,left:l,right:void 0}),a++):(e===o?(s.push({hasBoth:!0,left:l,right:c}),a++):s.push({hasBoth:!1,left:void 0,right:c}),o++)}}}function N(e,r){let n=[];for(let i of e){let e=r(i);null!=e&&n.push(e)}return n}function L(e,r){for(let n of e){let e=r(n);if(null!=e)return e}}function O(e,r){return e.includes(r)?e.filter(e=>e!==r):e.concat(r)}async function R(e,r){let n=e.map(r);return await Promise.all(n)}},543509:(e,r,n)=>{function i(e,r,n){return Math.min(Math.max(e,r),n)}function a(e,r,n){return e=null==r?e:Math.max(e,r),null==n?e:Math.min(e,n)}function o(e,r){if(e===r)return e;if(e>r)throw Error("random: start must be larger than end");return Math.random()*(r-e+1)+e}function s(e,r,n){let i=null!=r,a=i?r:e,o=i?e:0;n=null==n?Math.sign(a-o):n;let{result:s}=Array.from({length:Math.abs((a-o)/(n||1))}).reduce(({result:e,current:r})=>({result:[...e,r],current:r+n}),{current:o,result:[]});return s}function l(e,r){let n=[];for(let i=0;i<e;++i)n.push(r(i));return n}function c(e,r,n=1e-6){return Math.abs(e-r)<n}function d(e,r){return(e%r+r)%r}function u(e,r){return Math.round(e/r)*r}function m(e,r,n,i){let a;if(1e-8>Math.abs(e)){if(e=r,r=n,n=i,1e-8>Math.abs(e))return(e=r,r=n,1e-8>Math.abs(e))?[]:[-r/e];let a=r*r-4*e*n;return 1e-8>Math.abs(a)?[-r/(2*e)]:a>0?[(-r+Math.sqrt(a))/(2*e),(-r-Math.sqrt(a))/(2*e)]:[]}let o=(3*e*n-r*r)/(3*e*e),s=(2*r*r*r-9*e*r*n+27*e*e*i)/(27*e*e*e);if(1e-8>Math.abs(o))a=[Math.cbrt(-s)];else if(1e-8>Math.abs(s))a=[0].concat(o<0?[Math.sqrt(-o),-Math.sqrt(-o)]:[]);else{let e=s*s/4+o*o*o/27;if(1e-8>Math.abs(e))a=[-1.5*s/o,3*s/o];else if(e>0){let r=Math.cbrt(-s/2-Math.sqrt(e));a=[r-o/(3*r)]}else{let e=2*Math.sqrt(-o/3),r=Math.acos(3*s/o/e)/3,n=2*Math.PI/3;a=[e*Math.cos(r),e*Math.cos(r-n),e*Math.cos(r-2*n)]}}for(let n=0;n<a.length;n++)a[n]-=r/(3*e);return a}n.d(r,{Ae:()=>m,KY:()=>a,M9:()=>l,YE:()=>u,_g:()=>d,qE:()=>i,xN:()=>c,y1:()=>s,yT:()=>o})},3360:(e,r,n)=>{function i(e){for(let r in e)return!1;return!0}function a(e){for(let r in e)return r;return null}function o(e,r){let n={...e};for(let[e,i]of Object.entries(r))null!=i&&(n[e]=i);return n}function s(e,r){let n={};for(let[i,a]of Object.entries(e).sort(r))n[i]=a;return n}n.d(r,{Bq:()=>function e(r,n=""){return Object.fromEntries(Object.entries(r).flatMap(([r,i])=>{let a=""===n?r:`${n}.${r}`;return i&&"object"==typeof i?Object.entries(e(i,a)):[[a,i]]}))},Dy:()=>function e(r,n,i){for(let a in r){let o=""===i?a:i+"."+a;Array.isArray(r[a])?n[o]=JSON.stringify(r[a]):"object"==typeof r[a]&&null!==r[a]?e(r[a],n,o):n[o]=r[a]}},Im:()=>i,b$:()=>o,mf:()=>s,o:()=>a})},672797:(e,r,n)=>{function i(e){return new Promise(r=>{let n=Array(e.length),i=e.length,a=()=>{0===i&&r(n)};for(let r=0;r<e.length;r++)e[r].then(e=>{n[r]={type:"resolve",resolve:e,reject:void 0},i--,a()},e=>{n[r]={type:"reject",resolve:void 0,reject:e},i--,a()});a()})}function a(e,r){return new Promise(n=>{let i=0,a=e.length,o=()=>{0===a&&n(s)},s=Array(e.length),l=r=>{let n=e[r];return void 0!==n&&(n().then(e=>{s[r]={type:"resolve",resolve:e,reject:void 0},a--,c(),o()},e=>{s[r]={type:"reject",resolve:void 0,reject:e},a--,c(),o()}),!0)},c=()=>{let e=l(i);return i++,e};for(let e=0;e<r&&c();e++);o()})}function o(e){let r=null;return()=>(null===r&&(r=e()).catch(()=>r=null),r)}n.d(r,{Ed:()=>a,Kt:()=>o,_7:()=>i})},974880:(e,r,n)=>{function i(e){return"object"==typeof e&&null!==e}function a(e){return"number"==typeof e}n.d(r,{Et:()=>a,UU:()=>i})}}]);

//# debugId=976331a1-85b8-5bb4-84df-32a753cc116c

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/33a8a263aa6cb51da13a650dbccd0355c362385c/2725-9b3da74d7a370614.min.js.map